<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tc-netem - Network Emulator</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Network emulator">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tc-netem<small> (8)</small></h1>
        <p class="lead">Network emulator</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/"><span itemprop="title">System administration commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/tc-netem.8.html"><span itemprop="title">tc-netem</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>tc qdisc ... dev</strong> <em>DEVICE</em> ]  <strong>add netem</strong> <em>OPTIONS</em></p>
<p class='spacer'>

<p><em>OPTIONS</em> := [ <em>LIMIT</em> ] [ <em>DELAY</em> ] [ <em>LOSS</em> ] [ <em>CORRUPT</em> ] [ <em>DUPLICATION</em> ] [ <em>REORDERING</em> ][ <em>RATE</em> ]</p>
<p class='spacer'>

<p><em>LIMIT</em> :=  <strong>limit</strong> <em>packets</em></p>
<p class='spacer'>

<p><em>DELAY</em> :=  <strong>delay</strong> <em>TIME</em> [ <em>JITTER</em> [ <em>CORRELATION</em> ]]]</p>
<p class='spacer'>

<pre>       [</pre>

<p><strong>distribution</strong> { uniform<strong> | </strong>normal<strong> | </strong>pareto<strong> |  </strong>paretonormal<strong> } ]</strong></p>
<p class='spacer'>

<p><em>LOSS</em> :=  <strong>loss</strong> {  <strong>random</strong> <em>PERCENT</em> [ <em>CORRELATION</em> ]  |</p>
<p class='spacer'>

<p>               <strong>state</strong> <em>p13</em> [ <em>p31</em> [ <em>p32</em> [ <em>p23</em> [ <em>p14</em>]]]] |</p>
<p class='spacer'>

<p>               <strong>gemodel</strong> <em>p</em> [ <em>r</em> [ <em>1-h</em> [ <em>1-k</em> ]]] }   [ <strong>ecn</strong> ] </p>
<p class='spacer'>

<p><em>CORRUPT</em> :=  <strong>corrupt</strong> <em>PERCENT</em> [ <em>CORRELATION</em> ]]</p>
<p class='spacer'>

<p><em>DUPLICATION</em> :=  <strong>duplicate</strong> <em>PERCENT</em> [ <em>CORRELATION</em> ]]</p>
<p class='spacer'>

<p><em>REORDERING</em> :=  <strong>reorder</strong> <em>PERCENT</em> [ <em>CORRELATION</em> ] [  <strong>gap</strong> <em>DISTANCE</em> ]</p>
<p class='spacer'>

<p><em>RATE</em> :=  <strong>rate</strong> <em>RATE</em> [ <em>PACKETOVERHEAD</em> [ <em>CELLSIZE</em> [ <em>CELLOVERHEAD</em> ]]]]</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>NetEm is an enhancement of the Linux traffic control facilities that allow to add delay, packet loss, duplication and more other characteristics to packets outgoing from a selected network interface. NetEm is built using the existing Quality Of Service (QOS) and Differentiated Services (diffserv) facilities in the Linux kernel.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">netem OPTIONS</h2>
        <div class="sectioncontent">

<p>netem has the following options:</p>
<p class='spacer'>

  <h3>limit packets</h3>
<p class='spacer'>

<p>limits the effect of selected options to the indicated number of next packets.</p>
<p class='spacer'>

  <h3>delay</h3>
<p>adds the chosen delay to the packets outgoing to chosen network interface. The optional parameters allows to introduce a delay variation and a correlation. Delay and jitter values are expressed in ms while correlation is percentage.</p>
<p class='spacer'>

  <h3>distribution</h3>
<p>allow the user to choose the delay distribution. If not specified, the default distribution is Normal. Additional parameters allow to consider situations in which network has variable delays depending on traffic flows concurring on the same path, that causes several delay peaks and a tail.</p>
<p class='spacer'>

  <h3>loss random</h3>
<p>adds an independent loss probability to the packets outgoing from the chosen network interface. It is also possible to add a correlation, but this option is now deprecated due to the noticed bad behavior.</p>
<p class='spacer'>

  <h3>loss state</h3>
<p>adds packet losses according to the 4-state Markov using the transition probabilities as input parameters. The parameter p13 is mandatory and if used alone corresponds to the Bernoulli model. The optional parameters allows to extend the model to 2-state (p31), 3-state (p23 and p32) and 4-state (p14). State 1 corresponds to good reception, State 4 to independent losses, State 3 to burst losses and State 2 to good reception within a burst.</p>
<p class='spacer'>

  <h3>loss gemodel</h3>
<p>adds packet losses according to the Gilbert-Elliot loss model or its special cases (Gilbert, Simple Gilbert and Bernoulli). To use the Bernoulli model, the only needed parameter is p while the others will be set to the default values r=1-p, 1-h=1 and 1-k=0. The parameters needed for the Simple Gilbert model are two (p and r), while three parameters (p, r, 1-h) are needed for the Gilbert model and four (p, r, 1-h and 1-k) are needed for the Gilbert-Elliot model. As known, p and r are the transition probabilities between the bad and the good states, 1-h is the loss probability in the bad state and 1-k is the loss probability in the good state.</p>
<p class='spacer'>

  <h3>ecn</h3>
<p>can be used optionally to mark packets instead of dropping them. A loss model has to be used for this to be enabled.</p>
<p class='spacer'>

  <h3>corrupt</h3>
<p>allows the emulation of random noise introducing an error in a random position for a chosen percent of packets. It is also possible to add a correlation through the proper parameter.</p>
<p class='spacer'>

  <h3>duplicate</h3>
<p>using this option the chosen percent of packets is duplicated before queuing them. It is also possible to add a correlation through the proper parameter.</p>
<p class='spacer'>

  <h3>reorder</h3>
<p>to use reordering, a delay option must be specified. There are two ways to use this option (assuming 'delay 10ms' in the options list).</p>
<p class='spacer'>

<p><strong>reorder </strong> <em>25% 50%</em> <strong>gap</strong> <em>5</em></p>
<p class='spacer'>

<p>in this first example, the first 4 (gap - 1) packets are delayed by 10ms and subsequent packets are sent immediately with a probability of 0.25 (with correlation of 50% ) or delayed with a probability of 0.75. After a packet is reordered, the process restarts i.e. the next 4 packets are delayed and subsequent packets are sent immediately or delayed based on reordering probability. To cause a repeatable pattern where every 5th packet is reordered reliably, a reorder probability of 100% can be used.</p>
<p class='spacer'>

<p><strong>reorder</strong> <em>25% 50%</em></p>
<p class='spacer'>

<p>in this second example 25% of packets are sent immediately (with correlation of 50%) while the others are delayed by 10 ms.</p>
<p class='spacer'>

  <h3>rate</h3>
<p>delay packets based on packet size and is a replacement for <em>TBF</em>. Rate can be specified in common units (e.g. 100kbit). Optional <em>PACKETOVERHEAD</em> (in bytes) specify an per packet overhead and can be negative. A positive value can be used to simulate additional link layer headers. A negative value can be used to artificial strip the Ethernet header (e.g. -14) and/or simulate a link layer header compression scheme. The third parameter - an unsigned value - specify the cellsize. Cellsize can be used to simulate link layer schemes. ATM for example has an payload cellsize of 48 bytes and 5 byte per cell header. If a packet is 50 byte then ATM must use two cells: 2 * 48 bytes payload including 2 * 5 byte header, thus consume 106 byte on the wire. The last optional value <em>CELLOVERHEAD</em> can be used to specify per cell overhead - for our ATM example 5. <em>CELLOVERHEAD</em> can be negative, but use negative values with caution.</p>
<p class='spacer'>

<p>Note that rate throttling is limited by several factors: the kernel clock granularity avoid a perfect shaping at a specific level. This will show up in an artificial packet compression (bursts). Another influence factor are network adapter buffers which can also add artificial delay.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">

<p>The main known limitation of Netem are related to timer granularity, since Linux is not a real-time operating system.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>tc qdisc add dev eth0 root netem rate 5kbit 20 100 5 delay all outgoing packets on device eth0 with a rate of 5kbit, a per packet overhead of 20 byte, a cellsize of 100 byte and a per celloverhead of 5 byte:</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCES</h2>
        <div class="sectioncontent">

  <dl class='dl-horizontal'>
    <dt> 1. </dt>
    <dd>
  <p>Hemminger S. , "Network Emulation with NetEm", Open Source Development Lab, April 2005 (http://devresources.linux-foundation.org/shemminger/netem/LCA2005_paper.pdf)</p>
<p class='spacer'>

    </dd>
    <dt> 2. </dt>
    <dd>
  <p>Netem page from Linux foundation, (http://www.linuxfoundation.org/en/Net:Netem)</p>
<p class='spacer'>

    </dd>
    <dt> 3. </dt>
    <dd>
  <p>Salsano S., Ludovici F., Ordine A., "Definition of a general and intuitive loss model for packet networks and its implementation in the Netem module in the Linux kernel", available at http://netgroup.uniroma2.it/NetemCLG</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>tc</strong>(8), <a href="../man8/tc-tbf.8.html"><strong>tc-tbf</strong>(8)</a></p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Netem was written by Stephen Hemminger at Linux foundation and is based on NISTnet. This manpage was created by Fabio Ludovici &lt;fabio.ludovici at yahoo dot it&gt; and Hagen Paul Pfeifer &lt;hagen@jauu.net&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tc-nat.8.html"><span aria-hidden="true">&larr;</span> tc-nat.8: stateless native address translation action</a></li>
   <li class="next"><a href="tc-pfifo.8.html">tc-pfifo.8: Packet limited First In, First Out queue bfifo - Byte limited First In, First Out queue <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
