<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shutdown - bring the system down }}} {{{  Synopsis</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Bring the system down }}} {{{  synopsis">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shutdown<small> (8)</small></h1>
        <p class="lead">Bring the system down }}} {{{  synopsis</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/"><span itemprop="title">System administration commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/shutdown.8.html"><span itemprop="title">shutdown</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>/sbin/shutdown</strong> [<strong>-akrhPHfFnc</strong>] [<strong>-t</strong> <em>sec</em>] <em>time</em> [<em>warning message</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>shutdown</strong> brings the system down in a secure way.  All logged-in users are notified that the system is going down, and <a href="../man1/login.1.html"><strong>login</strong>(1)</a> is blocked. It is possible to shut the system down immediately or after a specified delay. All processes are first notified that the system is going down by the signal \s-2SIGTERM\s0.  This gives programs like <strong>vi</strong>(1) the time to save the file being edited, mail and news processing programs a chance to exit cleanly, etc. <strong>shutdown</strong> does its job by signalling the <strong>init</strong> process, asking it to change the runlevel. Runlevel <strong>0</strong> is used to halt the system, runlevel <strong>6</strong> is used to reboot the system, and runlevel <strong>1</strong> is used to put to system into a state where administrative tasks can be performed; this is the default if neither the <em>-h</em> or <em>-r</em> flag is given to <strong>shutdown</strong>. To see which actions are taken on halt or reboot see the appropriate entries for these runlevels in the file <em>/etc/inittab</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-horizontal'>
    <dt><strong>-a</strong></dt>
    <dd>
  <p>Use <strong>/etc/shutdown.allow</strong>.</p>
    </dd>
    <dt><strong>-k</strong></dt>
    <dd>
  <p>Don't really shutdown; only send the warning messages to everybody.</p>
    </dd>
    <dt><strong>-r</strong></dt>
    <dd>
  <p>Reboot after shutdown.</p>
    </dd>
    <dt><strong>-h</strong></dt>
    <dd>
  <p>Halt or power off after shutdown.</p>
    </dd>
    <dt><strong>-P</strong></dt>
    <dd>
  <p>Halt action is to turn off the power.</p>
    </dd>
    <dt><strong>-H</strong></dt>
    <dd>
  <p>Modifier to the -h flag.  Halt action is to halt or drop into boot monitor on systems that support it.  Must be used with the -h flag.</p>
    </dd>
    <dt><strong>-f</strong></dt>
    <dd>
  <p>Skip fsck on reboot.</p>
    </dd>
    <dt><strong>-F</strong></dt>
    <dd>
  <p>Force fsck on reboot.</p>
    </dd>
    <dt><strong>-n</strong></dt>
    <dd>
  <p>[DEPRECATED] Don't call <a href="../man8/init.8.html"><strong>init</strong>(8)</a> to do the shutdown but do it ourself. The use of this option is discouraged, and its results are not always what you'd expect.</p>
    </dd>
    <dt><strong>-c</strong></dt>
    <dd>
  <p>Cancel a waiting shutdown. ("shutdown now" is no longer waiting.) With this option it is of course not possible to give the time argument, but you can enter explanatory message arguments on the command line that will be sent to all users.</p>
    </dd>
    <dt><strong>-t</strong> <em>sec</em></dt>
    <dd>
  <p>Tell <a href="../man8/init.8.html"><strong>init</strong>(8)</a> to wait <em>sec</em> seconds between sending processes the warning and the kill signal, before changing to another runlevel.</p>
    </dd>
    <dt><em>time</em></dt>
    <dd>
  <p>When to shutdown.</p>
    </dd>
    <dt><em>warning message</em></dt>
    <dd>
  <p>Message to send to all users.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>The <em>time</em> argument can have different formats.  First, it can be an absolute time in the format <em>hh:mm</em>, in which <em>hh</em> is the hour (1 or 2 digits) and <em>mm</em> is the minute of the hour (in two digits). Second, it can be in the format <strong>+</strong><em>m</em>, in which <em>m</em> is the number of minutes to wait.  The word <strong>now</strong> is an alias for <strong>+0</strong>.</p>
<p class='spacer'>

<p>If shutdown is called with a delay, it will create the advisory file <em>/run/nologin</em> which causes programs such as <a href="../man1/login.1.html"><strong>login</strong>(1)</a></em> to not allow new user logins. This file is created five minutes before the shutdown sequence starts. Shutdown removes this file if it is stopped before it can signal init (i.e. it is cancelled or something goes wrong). It also removes it before calling init to change the runlevel.</p>
<p class='spacer'>

<p>The <strong>-f</strong> flag means `reboot fast'.  This only creates an advisory file <em>/fastboot</em> which can be tested by the system when it comes up again.  The boot rc file can test if this file is present, and decide not to run <strong>fsck</strong>(1) since the system has been shut down in the proper way. After that, the boot process should remove <em>/fastboot</em>.</p>
<p class='spacer'>

<p>The <strong>-F</strong> flag means `force fsck'.  This only creates an advisory file <em>/forcefsck</em> which can be tested by the system when it comes up again.  The boot rc file can test if this file is present, and decide to run <strong>fsck</strong>(1) with a special `force' flag so that even properly unmounted file systems get checked. After that, the boot process should remove <em>/forcefsck</em>.</p>
<p class='spacer'>

<p>The <strong>-n</strong> flag causes <strong>shutdown</strong> not to call <strong>init</strong>, but to kill all running processes itself. <strong>shutdown</strong> will then turn off quota, accounting, and swapping and unmount all file systems.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESS CONTROL</h2>
        <div class="sectioncontent">

<p><strong>shutdown</strong> can be called from <a href="../man8/init.8.html"><strong>init</strong>(8)</a> when the magic keys <strong>CTRL-ALT-DEL</strong> are pressed, by creating an appropriate entry in <em>/etc/inittab</em>. This means that everyone who has physical access to the console keyboard can shut the system down. To prevent this, <strong>shutdown</strong> can check to see if an authorized user is logged in on one of the virtual consoles. If <strong>shutdown</strong> is called with the <strong>-a</strong> argument (add this to the invocation of shutdown in /etc/inittab), it checks to see if the file <em>/etc/shutdown.allow</em> is present. It then compares the login names in that file with the list of people that are logged in on a virtual console (from <em>/var/run/utmp</em>). Only if one of those authorized users <strong>or root</strong> is logged in, it will proceed. Otherwise it will write the message</p>
<p class='spacer'>

<pre><strong>shutdown: no authorized users logged in</strong></pre>

<p class='spacer'>

<p>to the (physical) system console. The format of <em>/etc/shutdown.allow</em> is one user name per line. Empty lines and comment lines (prefixed by a <strong>#</strong>) are allowed. Currently there is a limit of 32 users in this file.</p>
<p class='spacer'>

<p>Note that if <em>/etc/shutdown.allow</em> is not present, the <strong>-a</strong> argument is ignored.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HALT OR POWEROFF</h2>
        <div class="sectioncontent">

<p>The <strong>-H</strong> option just sets the <em>init</em> environment variable <em>INIT_HALT</em> to <em>HALT</em>, and the <strong>-P</strong> option just sets that variable to <em>POWEROFF</em>. The shutdown script that calls <a href="../man8/halt.8.html"><strong>halt</strong>(8)</a> as the last thing in the shutdown sequence should check these environment variables and call <a href="../man8/halt.8.html"><strong>halt</strong>(8)</a> with the right options for these options to actually have any effect. Debian 3.1 (sarge) supports this.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<pre>/fastboot
/etc/inittab
/etc/init.d/halt
/etc/init.d/reboot
/etc/shutdown.allow</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<p>A lot of users forget to give the <em>time</em> argument and are then puzzled by the error message <strong>shutdown</strong> produces. The <em>time</em> argument is mandatory; in 90 percent of all cases this argument will be the word <strong>now</strong>.</p>
<p class='spacer'>

<p>Init can only capture CTRL-ALT-DEL and start shutdown in console mode. If the system is running the X window System, the X server processes all key strokes. Some X11 environments make it possible to capture CTRL-ALT-DEL, but what exactly is done with that event depends on that environment.</p>
<p class='spacer'>

<p>Shutdown wasn't designed to be run setuid. /etc/shutdown.allow is not used to find out who is executing shutdown, it ONLY checks who is currently logged in on (one of the) console(s).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Miquel van Smoorenburg, miquels@cistron.nl</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man8/fsck.8.html"><strong>fsck</strong>(8)</a>, <a href="../man8/init.8.html"><strong>init</strong>(8)</a>, <a href="../man8/halt.8.html"><strong>halt</strong>(8)</a>, <a href="../man8/poweroff.8.html"><strong>poweroff</strong>(8)</a>, <a href="../man8/reboot.8.html"><strong>reboot</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
  <li class="previous"><a href="shadowconfig.8.html"><span aria-hidden="true">&larr;</span> shadowconfig.8: toggle shadow passwords on and off</a></li><li class="next"><a href="slattach.8.html">slattach.8: attach a network interface to a serial line <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
