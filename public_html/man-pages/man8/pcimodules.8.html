<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pcimodules - List kernel driver modules available for all currently plugged in PCI devices</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="List kernel driver modules available for all currently plugged in pci devices">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pcimodules<small> (8)</small></h1>
        <p class="lead">List kernel driver modules available for all currently plugged in pci devices</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="/"><span itemprop="title">Carta.tech</span></a>
	</li>
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/"><span itemprop="title">System administration commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/pcimodules.8.html"><span itemprop="title">pcimodules</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>pcimodules</strong> [<strong>--class</strong>class_id<strong>]</strong> [<strong>--classmask</strong>mask<strong>]</strong> [<strong>--help</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>pcimodules</strong> lists all driver modules for all currently plugged in PCI devices. <strong>pcimodules</strong> should be run at boot time, and whenever a PCI device is "hot plugged" into the system.  This can be done by the following Bourne shell syntax:</p>
<p class='spacer'>

<p>	for module in $(pcimodules) ; do</p>
<p class='spacer'>

<p>		modprobe -s -k "$module"</p>
<p class='spacer'>

<p>	done</p>
<p class='spacer'>

<p>When a PCI device is removed from the system, the Linux kernel will decrement a usage count on PCI driver module.  If this count drops to zero (i.e., there are no PCI drivers), then the <strong>modprobe -r</strong> process that is normally configured to run from cron every few minutes will eventually remove the unneeded module.</p>
<p class='spacer'>

<p>The --class and --classmask arguments can be used to limit the search to certain classes of PCI devices.  This is useful, for example, to generate a list of ethernet card drivers to be loaded when the kernel has indicated that it is trying to resolve an unknown network interface.</p>
<p class='spacer'>

<p>Modules are listed in the order in which the PCI devices are physically arranged so that the computer owner can arrange things like having scsi device 0 be on a controller that is not alphabetically the first scsi controller.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>--class class --classmask mask</strong></dt>
    <dd>
    </dd>
  </dl>
<p class='spacer'>

<p>--class and --classmask limit the search to PCI cards in particular classes.  These arguments are always used together. The arguments to --class and --classmask can be given as hexadecimal numbers by prefixing a leading "0x". Note that the classes used by pcimodules are in "Linux" format, meaning the class value that you see with lspci would be shifted left eight bits, with the new low eight bits programming interface ID. An examples of how to use class and classmask is provided below. <strong>--help, -h</strong> Print a help message and exit.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt>pcimodules</dt>
    <dd>
  <p>lists all modules corresponding to currently plugged in PCI devices.</p>
    </dd>
    <dt>pcimodules --class 0x20000 --classmask 0xffff00</dt>
    <dd>
  <p>lists all modules corresponding to currently plugged in ethernet PCI devices.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>/lib/modules/&lt;kernel-version&gt;/modules.pcimap</strong></dt>
    <dd>
  <p>This file is automatically generated by <strong>depmod,</strong> and used by <strong>pcimodules</strong> to determine which modules correspond to which PCI ID's.</p>
    </dd>
    <dt><strong>/proc/bus/pci</strong></dt>
    <dd>
  <p>An interface to PCI bus configuration space provided by the post-2.1.82 Linux kernels. Contains per-bus subdirectories with per-card config space files and a <em>devices</em> file containing a list of all PCI devices.</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man8/lspci.8.html"><strong>lspci</strong>(8)</a></p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MAINTAINER</h2>
        <div class="sectioncontent">

<p>The Linux PCI Utilities are maintained by Martin Mares &lt;mj@suse.cz&gt;.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p><strong>pcimodules</strong> was written by Adam J. Richter &lt;adam@yggdrasil.com&gt;, based on public domain example code by Martin Mares &lt;mj@suse.cz&gt;.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

<p><strong>pcimodules</strong> is copyright 2000, Yggdrasil Computing, Incorporated, and may be copied under the terms and conditions of version 2 of the GNU General Public License as published by the Free Software Foundation (Cambridge, Massachusetts, United States of America).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="partprobe.8.html"><span aria-hidden="true">&larr;</span> partprobe.8: inform the OS of partition table changes</a></li>
   <li class="next"><a href="pivot_root.8.html">pivot_root.8: change the root filesystem <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
