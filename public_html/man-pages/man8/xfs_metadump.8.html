<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xfs_metadump - copy XFS filesystem metadata to a file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Copy xfs filesystem metadata to a file">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xfs_metadump<small> (8)</small></h1>
        <p class="lead">Copy xfs filesystem metadata to a file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xfs_metadump.8.html">
      <span itemprop="name">xfs_metadump</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xfsprogs/">
      <span itemprop="name">xfsprogs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xfs_metadump.8.html">
      <span itemprop="name">xfs_metadump</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>xfs_metadump</strong> [ <strong>-aefFgow</strong> ] [ <strong>-m</strong> <em>max_extents</em> ] ] [ <strong>-l</strong> <em>logdev</em> ] <em>source</em> <em>target</em></p>
<p class='spacer'>

<p><strong>xfs_metadump -V</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>xfs_metadump</strong> is a debugging tool that copies the metadata from an XFS filesystem to a file. The <em>source</em> argument must be the pathname of the device or file containing the XFS filesystem and the <em>target</em> argument specifies the destination file name. If <em>target</em> is -, then the output is sent to stdout. This allows the output to be redirected to another program such as a compression application.</p>
<p class='spacer'>

<p><strong>xfs_metadump</strong> may only be used to copy unmounted filesystems, or read-only mounted filesystems.</p>
<p class='spacer'>

<p><strong>xfs_metadump</strong> does not alter the source filesystem in any way. The <em>target</em> image is a contiguous (non-sparse) file containing all the filesystem's metadata and indexes to where the blocks were copied from.</p>
<p class='spacer'>

<p>By default, <strong>xfs_metadump</strong> obfuscates most file (regular file, directory and symbolic link) names and extended attribute names to allow the dumps to be sent without revealing confidential information. Extended attribute values are zeroed and no data is copied. The only exceptions are file or attribute names that are 4 or less characters in length. Also file names that span extents (this can only occur with the <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> options where <strong>-n</strong> <em>size</em> &gt; <strong>-b</strong> <em>size</em>) are not obfuscated. Names between 5 and 8 characters in length inclusively are partially obfuscated.</p>
<p class='spacer'>

<p><strong>xfs_metadump</strong> should not be used for any purposes other than for debugging and reporting filesystem problems. The most common usage scenario for this tool is when <a href="../man8/xfs_repair.8.html"><strong>xfs_repair</strong>(8)</a> fails to repair a filesystem and a metadump image can be sent for analysis.</p>
<p class='spacer'>

<p>The file generated by <strong>xfs_metadump</strong> can be restored to filesystem image (minus the data) using the <a href="../man8/xfs_mdrestore.8.html"><strong>xfs_mdrestore</strong>(8)</a> tool.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>-a</strong></dt>
    <dd>
  <p>Copies entire metadata blocks.  Normally, <strong>xfs_metadump</strong> will zero any stale bytes interspersed with in-use metadata.  Use this option to copy full metadata blocks, to provide more debugging information for a corrupted filesystem.  Note that the extra data will be unobfuscated.</p>
    </dd>
    <dt><strong>-e</strong></dt>
    <dd>
  <p>Stops the dump on a read error. Normally, it will ignore read errors and copy all the metadata that is accessible.</p>
    </dd>
    <dt><strong>-f</strong></dt>
    <dd>
  <p>Specifies that the filesystem image to be processed is stored in a regular file (see the <strong>mkfs.xfs -d</strong> file option). This can also happen if an image copy of a filesystem has been made into an ordinary file with <a href="../man8/xfs_copy.8.html"><strong>xfs_copy</strong>(8)</a>.</p>
    </dd>
    <dt><strong>-F</strong></dt>
    <dd>
  <p>Specifies that we want to continue even if the superblock magic is not correct. If the source is truly not an XFS filesystem, the resulting image will be useless, and xfs_metadump may crash.</p>
    </dd>
    <dt><strong>-g</strong></dt>
    <dd>
  <p>Shows dump progress. This is sent to stdout if the <em>target</em> is a file or to stderr if the <em>target</em> is stdout.</p>
    </dd>
    <dt><strong>-l</strong><em> logdev</em></dt>
    <dd>
  <p>For filesystems which use an external log, this specifies the device where the external log resides. The external log is not copied, only internal logs are copied.</p>
    </dd>
    <dt><strong>-m</strong></dt>
    <dd>
  <p>Set the maximum size of an allowed metadata extent.  Extremely large metadata extents are likely to be corrupt, and will be skipped if they exceed this value.  The default size is 1000 blocks.</p>
    </dd>
    <dt><strong>-o</strong></dt>
    <dd>
  <p>Disables obfuscation of file names and extended attributes.</p>
    </dd>
    <dt><strong>-w</strong></dt>
    <dd>
  <p>Prints warnings of inconsistent metadata encountered to stderr. Bad metadata is still copied.</p>
    </dd>
    <dt><strong>-V</strong></dt>
    <dd>
  <p>Prints the version number and exits.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<p><strong>xfs_metadump</strong> returns an exit code of 0 if all readable metadata is successfully copied or 1 if a write error occurs or a read error occurs and the <strong>-e</strong> option used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<p>As <strong>xfs_metadump</strong> copies metadata only, it does not matter if the <em>source</em> filesystem has a realtime section or not. If the filesystem has an external log, it is not copied. Internal logs are copied and any outstanding log transactions are not obfuscated if they contain names.</p>
<p class='spacer'>

<p><strong>xfs_metadump</strong> is a shell wrapper around the <a href="../man8/xfs_db.8.html"><strong>xfs_db</strong>(8)</a> <strong>metadump</strong> command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man8/xfs_repair.8.html"><strong>xfs_repair</strong>(8)</a>, <a href="../man8/xfs_mdrestore.8.html"><strong>xfs_mdrestore</strong>(8)</a>, <a href="../man8/xfs_freeze.8.html"><strong>xfs_freeze</strong>(8)</a>, <a href="../man8/xfs_db.8.html"><strong>xfs_db</strong>(8)</a>, <a href="../man8/xfs_copy.8.html"><strong>xfs_copy</strong>(8)</a>, <a href="../man5/xfs.5.html"><strong>xfs</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p>Email bug reports to <strong>xfs@oss.sgi.com</strong>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xfs_mdrestore.8.html"><span aria-hidden="true">&larr;</span> xfs_mdrestore.8: restores an XFS metadump image to a filesystem image</a></li>
   <li class="next"><a href="xfs_mkfile.8.html">xfs_mkfile.8: create an XFS file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
