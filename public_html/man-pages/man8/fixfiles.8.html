<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fixfiles - fix file SELinux security contexts.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Fix file selinux security contexts.">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fixfiles<small> (8)</small></h1>
        <p class="lead">Fix file selinux security contexts.</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/"><span itemprop="title">System administration commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/fixfiles.8.html"><span itemprop="title">fixfiles</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p><strong>fixfiles</strong> <em>[-v] [-F] [-B] [ -N time ] [-l logfile ] { check | restore|[-f] relabel | verify } [[dir/file] ... ]</em></p>
<p class='spacer'>

<p><strong>fixfiles</strong> <em>[-v] [-F] [ -R rpmpackagename[,rpmpackagename...] ] [-l logfile ] { check | restore | verify }</em></p>
<p class='spacer'>

<p><strong>fixfiles</strong> <em>[-v] [-F] -C PREVIOUS_FILECONTEXT [-l logfile ] { check | restore | verify }</em></p>
<p class='spacer'>

<p><strong>fixfiles [-F] [-B]</strong> <em>onboot</em></p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>This manual page describes the <strong>fixfiles</strong> script.</p>
<p class='spacer'>

<p>This script is primarily used to correct the security context database (extended attributes) on filesystems.</p>
<p class='spacer'>

<p>It can also be run at any time to relabel when adding support for new policy, or  just check whether the file contexts are all as you expect.  By default it will relabel all mounted ext2, ext3, xfs and jfs file systems as long as they do not have a security context mount option.  You can use the -R flag to use rpmpackages as an alternative. The file /etc/selinux/fixfiles_exclude_dirs can contain a list of directories excluded from relabeling.</p>
<p class='spacer'>

<p><strong>fixfiles onboot</strong> will setup the machine to relabel on the next reboot.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>-B</strong></dt>
    <dd>
  <p>If specified with onboot, this fixfiles will record the current date in the /.autorelabel file, so that it can be used later to speed up labeling. If used with restore, the restore will only affect files that were modified today.</p>
    </dd>
    <dt><strong>-l logfile</strong></dt>
    <dd>
  <p>Save the output to the specified logfile</p>
    </dd>
    <dt><strong>-F</strong></dt>
    <dd>
  <p>Force reset of context to match file_context for customizable files</p>
<p class='spacer'>

    </dd>
    <dt><strong>-f</strong></dt>
    <dd>
  <p>Clear /tmp directory with out prompt for removal.</p>
<p class='spacer'>

    </dd>
    <dt><strong>-R rpmpackagename[,rpmpackagename...]</strong></dt>
    <dd>
  <p>Use the rpm database to discover all files within the specified packages and restore the file contexts.  (-a will get all files in the RPM database).</p>
    </dd>
    <dt><strong>-C PREVIOUS_FILECONTEXT</strong></dt>
    <dd>
  <p>Run a diff on  the PREVIOUS_FILECONTEXT file to the currently installed one, and restore the context of all affected files.</p>
<p class='spacer'>

    </dd>
    <dt><strong>-N time</strong></dt>
    <dd>
  <p>Only act on files created after the specified date.  Date must be specified in "YYYY-MM-DD HH:MM" format.  Date field will be passed to find --newermt command.</p>
<p class='spacer'>

    </dd>
    <dt><strong>-v</strong></dt>
    <dd>
  <p>Modify verbosity from progress to verbose. (Run restorecon with -v instead of -p)</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

  <p>One of:</p>
  <dl class='dl-vertical'>
    <dt><strong>check</strong></dt>
    <dd>
  <p>print any incorrect file context labels, showing old and new context, but do not change them.</p>
    </dd>
    <dt><strong>restore</strong></dt>
    <dd>
  <p>change any incorrect file context labels.</p>
    </dd>
    <dt><strong>relabel</strong></dt>
    <dd>
  <p>Prompt for removal of contents of /tmp directory and then change any incorrect file context labels to match the install file_contexts file.</p>
    </dd>
    <dt><strong>verify</strong></dt>
    <dd>
  <p>List out files with incorrect file context labels, but do not change them.</p>
    </dd>
    <dt><strong>[[dir/file] ... ]</strong></dt>
    <dd>
  <p>List of files or directories trees that you wish to check file context on.</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>This man page was written by Richard Hally &lt;rhally@mindspring.com&gt;. The script  was written by Dan Walsh &lt;dwalsh@redhat.com&gt;</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man8/setfiles.8.html"><strong>setfiles</strong>(8)</a>,<a href="../man8/restorecon.8.html"><strong>restorecon</strong>(8)</a></strong></p>
<p class='spacer'>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="findmnt.8.html"><span aria-hidden="true">&larr;</span> findmnt.8: find a filesystem</a></li>
   <li class="next"><a href="flowtop.8.html">flowtop.8: top-like netfilter TCP/UDP/SCTP/DCCP/ICMP(v6) flow tracking <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
