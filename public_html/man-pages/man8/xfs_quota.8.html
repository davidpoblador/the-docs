<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xfs_quota: Manage use of quota on xfs filesystems</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manage use of quota on xfs filesystems">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xfs_quota<small> (8)</small></h1>
        <p class="lead">Manage use of quota on xfs filesystems</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xfs_quota.8.html">
      <span itemprop="name">xfs_quota: Manage use of quota on xfs filesystems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xfsprogs/">
      <span itemprop="name">xfsprogs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xfs_quota.8.html">
      <span itemprop="name">xfs_quota: Manage use of quota on xfs filesystems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>xfs_quota</strong> [ <strong>-x</strong> ] [ <strong>-p</strong> <em>prog</em> ] [ <strong>-c</strong> <em>cmd</em> ] ... [ <strong>-d</strong> <em>project</em> ] ... [ <em>path</em> ... ]</p><p><strong>xfs_quota -V</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>xfs_quota</strong> is a utility for reporting and editing various aspects of filesystem quota.</p><p>The options to <strong>xfs_quota</strong> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-c</strong><em> cmd</em></p>
  </dt>
  <dd>
    <p><strong>xfs_quota</strong> commands may be run interactively (the default) or as arguments on the command line. Multiple <strong>-c</strong> arguments may be given. The commands are run in the sequence given, then the program exits.</p>
  </dd>
  <dt>
    <p><strong>-p</strong><em> prog</em></p>
  </dt>
  <dd>
    <p>Set the program name for prompts and some error messages, the default value is <strong>xfs_quota</strong>.</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>Enable expert mode. All of the administrative commands (see the ADMINISTRATOR COMMANDS section below) which allow modifications to the quota system are available only in expert mode.</p>
  </dd>
  <dt>
    <p><strong>-d</strong><em> project</em></p>
  </dt>
  <dd>
    <p>Project names or numeric identifiers may be specified with this option, which restricts the output of the individual <strong>xfs_quota</strong> commands to the set of projects specified. Multiple <strong>-d</strong> arguments may be given.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Prints the version number and exits.</p>
  </dd>

</dl>
<p>The optional <em>path</em> argument(s) can be used to specify mount points or device files which identify XFS filesystems. The output of the individual <strong>xfs_quota</strong> commands will then be restricted to the set of filesystems specified.</p><p>This manual page is divided into two sections - firstly, information for users of filesystems with quota enabled, and the <strong>xfs_quota</strong> commands of interest to such users; and then information which is useful only to administrators of XFS filesystems using quota and the quota commands which allow modifications to the quota system.</p><p>Note that common to almost all of the individual commands described below are the options for specifying which quota types are of interest - user quota (<strong>-u</strong>), group quota (<strong>-g</strong>), and/or project quota (<strong>-p</strong>). Also, several commands provide options to operate on "blocks used" (<strong>-b</strong>), "inodes used" (<strong>-i</strong>), and/or "realtime blocks used" (<strong>-r</strong>).</p><p>Many commands also have extensive online help. Use the <strong>help</strong> command for more details on any command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">QUOTA OVERVIEW</h2>
        <div class="sectioncontent">
<p>In most computing environments, disk space is not infinite. The quota subsystem provides a mechanism to control usage of disk space. Quotas can be set for each individual user on any/all of the local filesystems. The quota subsystem warns users when they exceed their allotted limit, but allows some extra space for current work (hard limit/soft limit). In addition, XFS filesystems with limit enforcement turned off can be used as an effective disk usage accounting system.</p><h3>Users' View of Disk Quotas</h3>
<p>To most users, disk quotas are either of no concern or a fact of life that cannot be avoided. There are two possible quotas that can be imposed - a limit can be set on the amount of space a user can occupy, and there may be a limit on the number of files (inodes) he can own.</p><p>The <strong>quota</strong> command provides information on the quotas that have been set by the system administrators and current usage.</p><p>There are four numbers for each limit:  current usage, soft limit (quota), hard limit, and time limit. The soft limit is the number of 1K-blocks (or files) that the user is expected to remain below. The hard limit cannot be exceeded. If a user's usage reaches the hard limit, further requests for space (or attempts to create a file) fail with the "Quota exceeded" (EDQUOT) error.</p><p>When a user exceeds the soft limit, the timer is enabled. Any time the quota drops below the soft limits, the timer is disabled. If the timer pops, the particular limit that has been exceeded is treated as if the hard limit has been reached, and no more resources are allocated to the user. The only way to reset this condition, short of turning off limit enforcement or increasing the limit, is to reduce usage below quota. Only the superuser (i.e. a sufficiently capable process) can set the time limits and this is done on a per filesystem basis.</p>
<h3>Surviving When the Quota Limit Is Reached</h3>
<p>In most cases, the only way for a user to recover from over-quota conditions is to abort whatever activity is in progress on the filesystem that has reached its limit, remove sufficient files to bring the limit back below quota, and retry the failed program.</p><p>However, if a user is in the editor and a write fails because of an over quota situation, that is not a suitable course of action. It is most likely that initially attempting to write the file has truncated its previous contents, so if the editor is aborted without correctly writing the file, not only are the recent changes lost, but possibly much, or even all, of the contents that previously existed.</p><p>There are several possible safe exits for a user caught in this situation. He can use the editor shell escape command to examine his file space and remove surplus files.  Alternatively, using <strong>sh</strong>(1), he can suspend the editor, remove some files, then resume it. A third possibility is to write the file to some other filesystem (perhaps to a file on <em>/tmp</em>) where the user's quota has not been exceeded. Then after rectifying the quota situation, the file can be moved back to the filesystem it belongs on.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USER COMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>print</strong></p>
  </dt>
  <dd>
    <p>Lists all paths with devices/project identifiers. The path list can come from several places - the command line, the mount table, and the <em>/etc/projects</em> file.</p>
  </dd>
  <dt>
    <p><strong>df</strong></p>
  </dt>
  <dd>
    <p>See the <strong>free</strong> command. <strong>quota</strong> [ <strong>-g</strong> | <strong>-p</strong> | <strong>-u</strong> ] [ <strong>-bir</strong> ] [ <strong>-hnNv</strong> ] [ <strong>-f</strong> <em>file</em> ] [ <em>ID</em> | <em>name</em> ] ...</p><p>Show individual usage and limits, for a single user <em>name</em> or numeric user <em>ID</em>. The <strong>-h</strong> option reports in a "human-readable" format similar to the <strong>df</strong>(1) command. The <strong>-n</strong> option reports the numeric IDs rather than the name. The <strong>-N</strong> option omits the header. The <strong>-v</strong> option outputs verbose information. The <strong>-f</strong> option sends the output to <em>file</em> instead of stdout. <strong></strong> free [ <strong>-bir</strong> ] [ <strong>-hN</strong> ] [ <strong>-f</strong> <em>file</em> ]</p><p>Reports filesystem usage, much like the <strong>df</strong>(1) utility. It can show usage for <strong>b</strong>locks, <strong>i</strong>node, and/or <strong>r</strong>ealtime block space, and shows used, free, and total available. If project quota are in use (see the DIRECTORY TREE QUOTA section below), it will also report utilisation for those projects (directory trees). The <strong>-h</strong> option reports in a "human-readable" format. The <strong>-N</strong> option omits the header. The <strong>-f</strong> option outputs the report to <em>file</em> instead of stdout. <strong>help</strong> [ <em>command</em> ]</p><p>Online help for all commands, or one specific <em>command</em>.</p>
  </dd>
  <dt>
    <p><strong>quit</strong></p>
  </dt>
  <dd>
    <p>Exit <strong>xfs_quota</strong>.</p>
  </dd>
  <dt>
    <p><strong>q</strong></p>
  </dt>
  <dd>
    <p>See the <strong>quit</strong> command.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">QUOTA ADMINISTRATION</h2>
        <div class="sectioncontent">
<p>The XFS quota system differs to that of other filesystems in a number of ways. Most importantly, XFS considers quota information as filesystem metadata and uses journaling to provide a higher level guarantee of consistency. As such, it is administered differently, in particular:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>The <strong>quotacheck</strong> command has no effect on XFS filesystems. The first time quota accounting is turned on (at mount time), XFS does an automatic quotacheck internally; afterwards, the quota system will always be completely consistent until quotas are manually turned off.</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>There is no need for quota file(s) in the root of the XFS filesystem.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>XFS distinguishes between quota accounting and limit enforcement. Quota accounting must be turned on at the time of mounting the XFS filesystem. However, it is possible to turn on/off limit enforcement any time quota accounting is turned on. The "quota" option to the <strong>mount</strong> command turns on both (user) quota accounting and enforcement. The "uqnoenforce" option must be used to turn on user accounting with limit enforcement disabled.</p>
  </dd>
  <dt>
    4.
  </dt>
  <dd>
    <p>Turning on quotas on the root filesystem is slightly different from the above. For IRIX XFS, refer to <strong>quotaon</strong>(1M). For Linux XFS, the quota mount flags must be passed in with the "rootflags=" boot parameter.</p>
  </dd>
  <dt>
    5.
  </dt>
  <dd>
    <p>It is useful to use the <strong>state</strong> to monitor the XFS quota subsystem at various stages - it can be used to see if quotas are turned on, and also to monitor the space occupied by the quota system itself..</p>
  </dd>
  <dt>
    6.
  </dt>
  <dd>
    <p>There is a mechanism built into <strong>xfsdump</strong> that allows quota limit information to be backed up for later restoration, should the need arise.</p>
  </dd>
  <dt>
    7.
  </dt>
  <dd>
    <p>Quota limits cannot be set before turning on quotas on.</p>
  </dd>
  <dt>
    8.
  </dt>
  <dd>
    <p>XFS filesystems keep quota accounting on the superuser (user ID zero), and the tool will display the superuser's usage information. However, limits are never enforced on the superuser (nor are they enforced for group and project ID zero).</p>
  </dd>
  <dt>
    9.
  </dt>
  <dd>
    <p>XFS filesystems perform quota accounting whether the user has quota limits or not.</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p>XFS supports the notion of project quota, which can be used to implement a form of directory tree quota (i.e. to restrict a directory tree to only being able to use up a component of the filesystems available space; or simply to keep track of the amount of space used, or number of inodes, within the tree).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADMINISTRATOR COMMANDS</h2>
        <div class="sectioncontent">
<p><strong>path</strong> [ <em>N</em> ]</p><p>Lists all paths with devices/project identifiers or set the current path to the <em>N</em>th list entry (the current path is used by many of the commands described here, it identifies the filesystem toward which a command is directed). The path list can come from several places - the command line, the mount table, and the <em>/etc/projects</em> file. <strong>report</strong> [ <strong>-gpu</strong> ] [ <strong>-bir</strong> ] [ <strong>-ahntlLNU</strong> ] [ <strong>-f</strong> <em>file</em> ]</p><p>Report filesystem quota information. This reports all quota usage for a filesystem, for the specified quota type (<strong>u</strong>/<strong>g</strong>/<strong>p</strong> and/or <strong>b</strong>locks/<strong>i</strong>nodes/<strong>r</strong>ealtime). It reports blocks in 1KB units by default. The <strong>-h</strong> option reports in a "human-readable" format similar to the <strong>df</strong>(1) command. The <strong>-f</strong> option outputs the report to <em>file</em> instead of stdout. The <strong>-a</strong> option reports on all filesystems. The <strong>-n</strong> option outputs the numeric ID instead of the name. The <strong>-L</strong> and <strong>-U</strong> options specify lower and upper ID bounds to report on.  If upper/lower bounds are specified, then by default only the IDs will be displayed in output; with the <strong>-l</strong> option, a lookup will be performed to translate these IDs to names. The <strong>-N</strong> option reports information without the header line. The <strong>-t</strong> option performs a terse report. <strong></strong> state [ <strong>-gpu</strong> ] [ <strong>-av</strong> ] [ <strong>-f</strong> <em>file</em> ]</p><p>Report overall quota state information. This reports on the state of quota accounting, quota enforcement, and the number of extents being used by quota metadata within the filesystem. The <strong>-f</strong> option outputs state information to <em>file</em> instead of stdout. The <strong>-a</strong> option reports state on all filesystems and not just the current path. <strong></strong> limit [ <strong>-g</strong> | <strong>-p</strong> | <strong>-u</strong> ] <strong>bsoft=</strong><em>N</em> | <strong>bhard=</strong><em>N</em> | <strong>isoft=</strong><em>N</em> | <strong>ihard=</strong><em>N</em> | <strong>rtbsoft=</strong><em>N</em> | <strong>rtbhard=</strong><em>N</em> <strong>-d</strong> | <em>id</em> | <em>name</em></p><p>Set quota block limits (bhard/bsoft), inode count limits (ihard/isoft) and/or realtime block limits (rtbhard/rtbsoft). The <strong>-d</strong> option (defaults) can be used to set the default value that will be used, otherwise a specific <strong>u</strong>ser/<strong>g</strong>roup/<strong>p</strong>roject <em>name</em> or numeric <em>id</em>entifier must be specified. <strong>timer</strong> [ <strong>-g</strong> | <strong>-p</strong> | <strong>-u</strong> ] [ <strong>-bir</strong> ] <em>value</em></p><p>Allows the quota enforcement timeout (i.e. the amount of time allowed to pass before the soft limits are enforced as the hard limits) to be modified. The current timeout setting can be displayed using the <strong>state</strong> command. The value argument is a number of seconds, but units of 'minutes', 'hours', 'days', and 'weeks' are also understood (as are their abbreviations 'm', 'h', 'd', and 'w'). <strong>warn</strong> [ <strong>-g</strong> | <strong>-p</strong> | <strong>-u</strong> ] [ <strong>-bir</strong> ] <em>value</em> <strong>-d</strong> | <em>id</em> | <em>name</em></p><p>Allows the quota warnings limit (i.e. the number of times a warning will be send to someone over quota) to be viewed and modified. The <strong>-d</strong> option (defaults) can be used to set the default time that will be used, otherwise a specific <strong>u</strong>ser/<strong>g</strong>roup/<strong>p</strong>roject <em>name</em> or numeric <em>id</em>entifier must be specified. <strong>NOTE: this feature is not currently implemented.</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>enable</strong> [ <strong>-gpu</strong> ] [ <strong>-v</strong> ]</p>
  </dt>
  <dd>
    <p>Switches on quota enforcement for the filesystem identified by the current path. This requires the filesystem to have been mounted with quota enabled, and for accounting to be currently active. The <strong>-v</strong> option (verbose) displays the state after the operation has completed.</p>
  </dd>
  <dt>
    <p><strong>disable</strong> [ <strong>-gpu</strong> ] [ <strong>-v</strong> ]</p>
  </dt>
  <dd>
    <p>Disables quota enforcement, while leaving quota accounting active. The <strong>-v</strong> option (verbose) displays the state after the operation has completed.</p>
  </dd>
  <dt>
    <p><strong>off</strong> [ <strong>-gpu</strong> ] [ <strong>-v</strong> ]</p>
  </dt>
  <dd>
    <p>Permanently switches quota off for the filesystem identified by the current path. Quota can only be switched back on subsequently by unmounting and then mounting again.</p>
  </dd>
  <dt>
    <p><strong>remove</strong> [ <strong>-gpu</strong> ] [ <strong>-v</strong> ]</p>
  </dt>
  <dd>
    <p>Remove any space allocated to quota metadata from the filesystem identified by the current path. Quota must not be enabled on the filesystem, else this operation will report an error. <strong></strong> dump [ <strong>-g</strong> | <strong>-p</strong> | <strong>-u</strong> ] [ <strong>-f</strong> <em>file</em> ]</p><p>Dump out quota limit information for backup utilities, either to standard output (default) or to a <em>file</em>. This is only the limits, not the usage information, of course. <strong>restore</strong> [ <strong>-g</strong> | <strong>-p</strong> | <strong>-u</strong> ] [ <strong>-f</strong> <em>file</em> ]</p><p>Restore quota limits from a backup <em>file</em>. The file must be in the format produced by the <strong>dump</strong> command. <strong></strong> quot [ <strong>-g</strong> | <strong>-p</strong> | <strong>-u</strong> ] [ <strong>-bir</strong> ] [ <strong>-acnv</strong> ] [ <strong>-f</strong> <em>file</em> ]</p><p>Summarize filesystem ownership, by user, group or project. This command uses a special XFS "bulkstat" interface to quickly scan an entire filesystem and report usage information. This command can be used even when filesystem quota are not enabled, as it is a full-filesystem scan (it may also take a long time...). The <strong>-a</strong> option displays information on all filesystems. The <strong>-c</strong> option displays a histogram instead of a report. The <strong>-n</strong> option displays numeric IDs rather than names. The <strong>-v</strong> option displays verbose information. The <strong>-f</strong> option send the output to <em>file</em> instead of stdout. <strong>project</strong> [ <strong>-cCs</strong> [ <strong>-d</strong> <em>depth</em> ] [ <strong>-p</strong> <em>path</em> ] <em>id</em> | <em>name</em> ]</p><p>The <strong>-c</strong>, <strong>-C</strong>, and <strong>-s</strong> options allow the directory tree quota mechanism to be maintained. <strong>-d</strong> allows to limit recursion level when processing project directories and <strong>-p</strong> allows to specify project paths at command line ( instead of <em>/etc/projects</em> ). All options are discussed in detail below.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIRECTORY TREE QUOTA</h2>
        <div class="sectioncontent">
<p>The project quota mechanism in XFS can be used to implement a form of directory tree quota, where a specified directory and all of the files and subdirectories below it (i.e. a tree) can be restricted to using a subset of the available space in the filesystem.</p><p>A managed tree must be setup initially using the <strong>-s</strong> option to the <strong>project</strong> command. The specified project name or identifier is matched to one or more trees defined in <em>/etc/projects</em>, and these trees are then recursively descended to mark the affected inodes as being part of that tree. This process sets an inode flag and the project identifier on every file in the affected tree. Once this has been done, new files created in the tree will automatically be accounted to the tree based on their project identifier. An attempt to create a hard link to a file in the tree will only succeed if the project identifier matches the project identifier for the tree. The <strong>xfs_io</strong> utility can be used to set the project ID for an arbitrary file, but this can only be done by a privileged user.</p><p>A previously setup tree can be cleared from project quota control through use of the <strong>project -C</strong> option, which will recursively descend the tree, clearing the affected inodes from project quota control.</p><p>Finally, the <strong>project -c</strong> option can be used to check whether a tree is setup, it reports nothing if the tree is correct, otherwise it reports the paths of inodes which do not have the project ID of the rest of the tree, or if the inode flag is not set.</p><p>Option <strong>-d</strong> can be used to limit recursion level (-1 is infinite, 0 is top level only, 1 is first level ... ). Option <strong>-p</strong> adds possibility to specify project paths in command line without a need for <em>/etc/projects</em> to exist. Note that if projects file exists then it is also used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Enabling quota enforcement on an XFS filesystem (restrict a user to a set amount of space).</p>
<pre>

# mount -o uquota /dev/xvm/home /home
# xfs_quota -x -c 'limit bsoft=500m bhard=550m tanya' /home
# xfs_quota -x -c report /home
</pre>
<p>Enabling project quota on an XFS filesystem (restrict files in log file directories to only using 1 gigabyte of space).</p>
<pre>

# mount -o prjquota /dev/xvm/var /var
# echo 42:/var/log &gt;&gt; /etc/projects
# echo logfiles:42 &gt;&gt; /etc/projid
# xfs_quota -x -c 'project -s logfiles' /var
# xfs_quota -x -c 'limit -p bhard=1g logfiles' /var
</pre>
<p>Same as above without a need for configuration files.</p>
<pre>

# rm -f /etc/projects /etc/projid
# mount -o prjquota /dev/xvm/var /var
# xfs_quota -x -c 'project -s -p /var/log 42' /var
# xfs_quota -x -c 'limit -p bhard=1g 42' /var
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>XFS implements delayed allocation (aka. allocate-on-flush) and this has implications for the quota subsystem. Since quota accounting can only be done when blocks are actually allocated, it is possible to issue (buffered) writes into a file and not see the usage immediately updated. Only when the data is actually written out, either via one of the kernels flushing mechanisms, or via a manual <a href="../man2/sync.2.html"><strong>sync</strong>(2)</a>, will the usage reported reflect what has actually been written.</p><p>In addition, the XFS allocation mechanism will always reserve the maximum amount of space required before proceeding with an allocation. If insufficient space for this reservation is available, due to the block quota limit being reached for example, this may result in the allocation failing even though there is sufficient space. Quota enforcement can thus sometimes happen in situations where the user is under quota and the end result of some operation would still have left the user under quota had the operation been allowed to run its course. This additional overhead is typically in the range of tens of blocks.</p><p>Both of these properties are unavoidable side effects of the way XFS operates, so should be kept in mind when assigning block limits.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Quota support for filesystems with realtime subvolumes is not yet implemented, nor is the quota warning mechanism (the Linux <a href="../man8/warnquota.8.html"><strong>warnquota</strong>(8)</a> tool can be used to provide similar functionality on that platform).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/projects</em></p>
  </dt>
  <dd>
    <p>Mapping of numeric project identifiers to directories trees.</p>
  </dd>
  <dt>
    <p><em>/etc/projid</em></p>
  </dt>
  <dd>
    <p>Mapping of numeric project identifiers to project names.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IRIX SEE ALSO</h2>
        <div class="sectioncontent">
<p><strong>quotaon</strong>(1M), <strong>xfs</strong>(4).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LINUX SEE ALSO</h2>
        <div class="sectioncontent">
<p><a href="../man8/warnquota.8.html"><strong>warnquota</strong>(8)</a>, <a href="../man5/xfs.5.html"><strong>xfs</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xfs_quota&hellip;</h2>
        <div class="sectioncontent">
<p><strong>df</strong>(1), <strong>mount</strong>(1), <a href="../man2/sync.2.html"><strong>sync</strong>(2)</a>, <a href="../man5/projid.5.html"><strong>projid</strong>(5)</a>, <a href="../man5/projects.5.html"><strong>projects</strong>(5)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xfs_ncheck.8.html"><span aria-hidden="true">&larr;</span> xfs_ncheck.8: Generate pathnames from i-numbers for xfs</a></li>
   <li class="next"><a href="xfs_repair.8.html">xfs_repair.8: Repair an xfs filesystem <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
