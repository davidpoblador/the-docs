<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>quotacheck - scan a filesystem for disk usage, create, check and repair quota files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Scan a filesystem for disk usage, create, check and repair quota files">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">quotacheck<small> (8)</small></h1>
        <p class="lead">Scan a filesystem for disk usage, create, check and repair quota files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/quotacheck.8.html">
      <span itemprop="name">quotacheck</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/quota/">
      <span itemprop="name">quota</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/quotacheck.8.html">
      <span itemprop="name">quotacheck</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>quotacheck</strong> [ <strong>-gubcfinvdMmR</strong> ] [ <strong>-F</strong> <em>quota-format</em> ] <strong>-a</strong> | <em>filesystem</em></p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>quotacheck</strong> examines each filesystem, builds a table of current disk usage, and compares this table against that recorded in the disk quota file for the filesystem (this step is omitted if option <strong>-c</strong> is specified). If any inconsistencies are detected, both the quota file and the current system copy of the incorrect quotas are updated (the latter only occurs if an active filesystem is checked which is not advised). By default, only user quotas are checked. <strong>quotacheck</strong> expects each filesystem to be checked to have quota files named <em>[a]quota.user</em> and <em>[a]quota.group</em> located at the root of the associated filesystem.  If a file is not present, <strong>quotacheck</strong> will create it.</p>
<p class='spacer'>

<p>If the quota file is corrupted, <strong>quotacheck</strong> tries to save as much data as possible.  Rescuing data may need user intervention. With no additional options <strong>quotacheck</strong> will simply exit in such a situation. When in interactive mode (option <strong>-i</strong>) , the user is asked for advice. Advice can also be provided from command line (see option <strong>-n</strong>) , which is useful when <strong>quotacheck</strong> is run automatically (ie. from script) and failure is unacceptable.</p>
<p class='spacer'>

<p><strong>quotacheck</strong> should be run each time the system boots and mounts non-valid filesystems. This is most likely to happen after a system crash.</p>
<p class='spacer'>

<p>It is strongly recommended to run <strong>quotacheck</strong> with quotas turned off for the filesystem. Otherwise, possible damage or loss to data in the quota files can result.  It is also unwise to run <strong>quotacheck</strong> on a live filesystem as actual usage may change during the scan.  To prevent this, <strong>quotacheck</strong> tries to remount the filesystem read-only before starting the scan. After the scan is done it remounts the filesystem read-write. You can disable this with option <strong>-m</strong>. You can also make <strong>quotacheck</strong> ignore the failure to remount the filesystem read-only with option <strong>-M</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>-b, --backup</strong></dt>
    <dd>
  <p>Forces <strong>quotacheck</strong> to make backups of the quota file before writing the new data.</p>
    </dd>
    <dt><strong>-v, --verbose</strong></dt>
    <dd>
  <p><strong>quotacheck</strong> reports its operation as it progresses.  Normally it operates silently. If the option is specified twice, also the current directory is printed (note that printing can slow down the scan measurably).</p>
    </dd>
    <dt><strong>-d, --debug</strong></dt>
    <dd>
  <p>Enable debugging mode.  It will result in a lot of information which can be used in debugging the program. The output is very verbose and the scan will be slow.</p>
    </dd>
    <dt><strong>-u, --user</strong></dt>
    <dd>
  <p>Only user quotas listed in <em>/etc/mtab</em> or on the filesystems specified are to be checked.  This is the default action.</p>
    </dd>
    <dt><strong>-g, --group</strong></dt>
    <dd>
  <p>Only group quotas listed in <em>/etc/mtab</em> or on the filesystems specified are to be checked.</p>
    </dd>
    <dt><strong>-c, --create-files</strong></dt>
    <dd>
  <p>Don't read existing quota files. Just perform a new scan and save it to disk. <strong>quotacheck</strong> also skips scanning of old quota files when they are not found.</p>
    </dd>
    <dt><strong>-f, --force</strong></dt>
    <dd>
  <p>Forces checking and writing of new quota files on filesystems with quotas enabled. This is not recommended as the created quota files may be out of sync.</p>
    </dd>
    <dt><strong>-M, --try-remount</strong></dt>
    <dd>
  <p>This flag forces checking of filesystem in read-write mode if a remount fails. Do this only when you are sure no process will write to a filesystem while scanning.</p>
    </dd>
    <dt><strong>-m, --no-remount</strong></dt>
    <dd>
  <p>Don't try to remount filesystem read-only. See comment with option <strong>-M</strong>.</p>
    </dd>
    <dt><strong>-i, --interactive</strong></dt>
    <dd>
  <p>Interactive mode. By default <strong>quotacheck</strong> exits when it finds an error. In interactive mode user is asked for input instead.  See option <strong>-n</strong>.</p>
    </dd>
    <dt><strong>-n, --use-first-dquot</strong></dt>
    <dd>
  <p>If the quota files become corrupted, it is possible for duplicate entries for a single user or group ID to exist.  Normally in this case, <strong>quotacheck</strong> exits or asks user for input. When this option is set, the first entry found is always used (this option works in interactive mode too).</p>
    </dd>
    <dt><strong>-F, --format=f2format-namef1</strong></dt>
    <dd>
  <p>Check and fix quota files of specified format (ie. don't perform format auto-detection). This is recommended as detection might not work well on corrupted quota files.  Possible format names are: <strong>vfsold</strong> Original quota format with 16-bit UIDs / GIDs, <strong>vfsv0</strong> Quota format with 32-bit UIDs / GIDs, 64-bit space usage, 32-bit inode usage and limits, <strong>vfsv1</strong> Quota format with 64-bit quota limits and usage, <strong>rpc</strong> (quota over NFS), <strong>xfs</strong> (quota on XFS filesystem)</p>
    </dd>
    <dt><strong>-a, --all</strong></dt>
    <dd>
  <p>Check all mounted non-NFS filesystems in <strong>/etc/mtab</strong></p>
    </dd>
    <dt><strong>-R, --exclude-root</strong></dt>
    <dd>
  <p>When used together with the <strong>-a</strong> option, all filesystems except for the root filesystem are checked for quotas.</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTE</h2>
        <div class="sectioncontent">

<p><strong>quotacheck</strong> should only be run by super-user. Non-privileged users are presumably not allowed to read all the directories on the given filesystem.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man1/quota.1.html"><strong>quota</strong>(1)</a>, <a href="../man2/quotactl.2.html"><strong>quotactl</strong>(2)</a>, <a href="../man5/fstab.5.html"><strong>fstab</strong>(5)</a>, <a href="../man8/quotaon.8.html"><strong>quotaon</strong>(8)</a>, <a href="../man8/repquota.8.html"><strong>repquota</strong>(8)</a>, <a href="../man8/convertquota.8.html"><strong>convertquota</strong>(8)</a>, <a href="../man8/setquota.8.html"><strong>setquota</strong>(8)</a>, <strong>edquota</strong>(8), <a href="../man8/fsck.8.html"><strong>fsck</strong>(8)</a>, <strong>efsck</strong>(8), <strong>e2fsck</strong>(8), <strong>xfsck</strong>(8)</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>aquota.user or aquota.group</strong></dt>
    <dd>
  <p>located at filesystem root with quotas (version 2 quota, non-XFS filesystems)</p>
    </dd>
    <dt><strong>quota.user or quota.group</strong></dt>
    <dd>
  <p>located at filesystem root with quotas (version 1 quota, non-XFS filesystems)</p>
    </dd>
    <dt><strong>/etc/mtab</strong></dt>
    <dd>
  <p>names and locations of mounted filesystems</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Jan Kara lt;jack@suse.czgt;</p>
<p class='spacer'>

<p>Based on old <strong>quotacheck</strong> by:</p>
<p class='spacer'>

<p>Edvard Tuinder lt;ed@elm.netgt;</p>
<p class='spacer'>

<p>Marco van Wieringen lt;mvw@planets.elm.netgt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="quota_nld.8.html"><span aria-hidden="true">&larr;</span> quota_nld.8: quota netlink message daemon</a></li>
   <li class="next"><a href="quotaon.8.html">quotaon.8: turn filesystem quotas on and off <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
