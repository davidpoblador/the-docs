<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xfs_db: Debug an xfs filesystem</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Debug an xfs filesystem">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xfs_db<small> (8)</small></h1>
        <p class="lead">Debug an xfs filesystem</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xfs_db.8.html">
      <span itemprop="name">xfs_db: Debug an xfs filesystem</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xfsprogs/">
      <span itemprop="name">xfsprogs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xfs_db.8.html">
      <span itemprop="name">xfs_db: Debug an xfs filesystem</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>xfs_db</strong> [ <strong>-c</strong> <em>cmd</em> ] ... [ <strong>-i</strong>|<strong>r</strong>|<strong>x</strong>|<strong>F</strong> ] [ <strong>-f</strong> ] [ <strong>-l</strong> <em>logdev</em> ] [ <strong>-p</strong> <em>progname</em> ] <em>device</em></p>
<p class='spacer'>

<p><strong>xfs_db -V</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>xfs_db</strong> is used to examine an XFS filesystem. Under rare circumstances it can also be used to modify an XFS filesystem, but that task is normally left to <a href="../man8/xfs_repair.8.html"><strong>xfs_repair</strong>(8)</a> or to scripts such as <a href="../man8/xfs_admin.8.html"><strong>xfs_admin</strong>(8)</a> that run <strong>xfs_db</strong>.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>-c</strong><em> cmd</em></dt>
    <dd>
  <p><strong>xfs_db</strong> commands may be run interactively (the default) or as arguments on the command line. Multiple <strong>-c</strong> arguments may be given. The commands are run in the sequence given, then the program exits.</p>
    </dd>
    <dt><strong>-f</strong></dt>
    <dd>
  <p>Specifies that the filesystem image to be processed is stored in a regular file at <em>device</em> (see the <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> <strong>-d</strong> <em>file</em> option). This might happen if an image copy of a filesystem has been made into an ordinary file with <a href="../man8/xfs_copy.8.html"><strong>xfs_copy</strong>(8)</a>.</p>
    </dd>
    <dt><strong>-F</strong></dt>
    <dd>
  <p>Specifies that we want to continue even if the superblock magic is not correct.  For use in <strong>xfs_metadump</strong>.</p>
    </dd>
    <dt><strong>-i</strong></dt>
    <dd>
  <p>Allows execution on a mounted filesystem, provided it is mounted read-only. Useful for shell scripts which must only operate on filesystems in a guaranteed consistent state (either unmounted or mounted read-only). These semantics are slightly different to that of the <strong>-r</strong> option.</p>
    </dd>
    <dt><strong>-l</strong><em> logdev</em></dt>
    <dd>
  <p>Specifies the device where the filesystems external log resides. Only for those filesystems which use an external log. See the <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> <strong>-l</strong> option, and refer to <a href="../man5/xfs.5.html"><strong>xfs</strong>(5)</a> for a detailed description of the XFS log.</p>
    </dd>
    <dt><strong>-p</strong><em> progname</em></dt>
    <dd>
  <p>Set the program name to <em>progname</em> for prompts and some error messages, the default value is <strong>xfs_db</strong>.</p>
    </dd>
    <dt><strong>-r</strong></dt>
    <dd>
  <p>Open <em>device</em> or <em>filename</em> read-only. This option is required if the filesystem is mounted. It is only necessary to omit this flag if a command that changes data (<strong>write</strong>, <strong>blocktrash</strong>) is to be used.</p>
    </dd>
    <dt><strong>-x</strong></dt>
    <dd>
  <p>Specifies expert mode. This enables the <strong>write</strong> and <strong>blocktrash</strong> commands.</p>
    </dd>
    <dt><strong>-V</strong></dt>
    <dd>
  <p>Prints the version number and exits.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONCEPTS</h2>
        <div class="sectioncontent">

<p><strong>xfs_db</strong> commands can be broken up into two classes. Most commands are for the navigation and display of data structures in the filesystem. Other commands are for scanning the filesystem in some way.</p>
<p class='spacer'>

<p>Commands which are used to navigate the filesystem structure take arguments which reflect the names of filesystem structure fields. There can be multiple field names separated by dots when the underlying structures are nested, as in C. The field names can be indexed (as an array index) if the underlying field is an array. The array indices can be specified as a range, two numbers separated by a dash.</p>
<p class='spacer'>

<p><strong>xfs_db</strong> maintains a current address in the filesystem. The granularity of the address is a filesystem structure. This can be a filesystem block, an inode or quota (smaller than a filesystem block), or a directory block (could be larger than a filesystem block). There are a variety of commands to set the current address. Associated with the current address is the current data type, which is the structural type of this data. Commands which follow the structure of the filesystem always set the type as well as the address. Commands which examine pieces of an individual file (inode) need the current inode to be set, this is done with the <strong>inode</strong> command.</p>
<p class='spacer'>

<p>The current address/type information is actually maintained in a stack that can be explicitly manipulated with the <strong>push</strong>, <strong>pop</strong>, and <strong>stack</strong> commands. This allows for easy examination of a nested filesystem structure. Also, the last several locations visited are stored in a ring buffer which can be manipulated with the <strong>forward</strong>, <strong>back</strong>, and <strong>ring</strong> commands.</p>
<p class='spacer'>

<p>XFS filesystems are divided into a small number of allocation groups. <strong>xfs_db</strong> maintains a notion of the current allocation group which is manipulated by some commands. The initial allocation group is 0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">

<p class='spacer'>

  <p>Many commands have extensive online help. Use the <strong>help</strong> command for more details on any command.</p>
  <dl class='dl-vertical'>
    <dt><strong>a</strong></dt>
    <dd>
  <p>See the <strong>addr</strong> command.</p>
    </dd>
    <dt><strong>ablock</strong><em> filoff</em></dt>
    <dd>
  <p>Set current address to the offset <em>filoff</em> (a filesystem block number) in the attribute area of the current inode.</p>
    </dd>
    <dt><strong>addr [</strong><em>field-expression</em><strong>]</strong></dt>
    <dd>
  <p>Set current address to the value of the <em>field-expression</em>. This is used to "follow" a reference in one structure to the object being referred to. If no argument is given, the current address is printed.</p>
    </dd>
    <dt><strong>agf [</strong><em>agno</em><strong>]</strong></dt>
    <dd>
  <p>Set current address to the AGF block for allocation group <em>agno</em>. If no argument is given, use the current allocation group.</p>
    </dd>
    <dt><strong>agfl [</strong><em>agno</em><strong>]</strong></dt>
    <dd>
  <p>Set current address to the AGFL block for allocation group <em>agno</em>. If no argument is given, use the current allocation group.</p>
    </dd>
    <dt><strong>agi [</strong><em>agno</em><strong>]</strong></dt>
    <dd>
  <p>Set current address to the AGI block for allocation group <em>agno</em>. If no argument is given, use the current allocation group.</p>
    </dd>
    <dt><strong>b</strong></dt>
    <dd>
  <p>See the <strong>back</strong> command.</p>
    </dd>
    <dt><strong>back</strong></dt>
    <dd>
  <p>Move to the previous location in the position ring.</p>
    </dd>
    <dt><strong>blockfree</strong></dt>
    <dd>
  <p>Free block usage information collected by the last execution of the <strong>blockget</strong> command. This must be done before another <strong>blockget</strong> command can be given, presumably with different arguments than the previous one.</p>
    </dd>
    <dt><strong>blockget [-npvs] [-b </strong><em>bno</em><strong>] ... [-i </strong><em>ino</em><strong>] ...</strong></dt>
    <dd>
      <p>Get block usage and check filesystem consistency. The information is saved for use by a subsequent <strong>blockuse</strong>, <strong>ncheck</strong>, or <strong>blocktrash</strong> command.</p>
      <dl class='dl-vertical'>
        <dt><strong>-b</strong></dt>
        <dd>
      <p>is used to specify filesystem block numbers about which verbose information should be printed.</p>
        </dd>
        <dt><strong>-i</strong></dt>
        <dd>
      <p>is used to specify inode numbers about which verbose information should be printed.</p>
        </dd>
        <dt><strong>-n</strong></dt>
        <dd>
      <p>is used to save pathnames for inodes visited, this is used to support the <a href="../man8/xfs_ncheck.8.html"><strong>xfs_ncheck</strong>(8)</a> command. It also means that pathnames will be printed for inodes that have problems. This option uses a lot of memory so is not enabled by default.</p>
        </dd>
        <dt><strong>-p</strong></dt>
        <dd>
      <p>causes error messages to be prefixed with the filesystem name being processed. This is useful if several copies of <strong>xfs_db</strong> are run in parallel.</p>
        </dd>
        <dt><strong>-s</strong></dt>
        <dd>
      <p>restricts output to severe errors only. This is useful if the output is too long otherwise.</p>
        </dd>
        <dt><strong>-v</strong></dt>
        <dd>
      <p>enables verbose output. Messages will be printed for every block and inode processed.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>blocktrash [-z] [-o </strong><em>offset</em><strong>] [-n </strong><em>count</em><strong>] [-x </strong><em>min</em><strong>] [-y </strong><em>max</em><strong>] [-s </strong><em>seed</em><strong>] [-0|1|2|3] [-t </strong><em>type</em><strong>] ...</strong></dt>
    <dd>
      <p>Trash randomly selected filesystem metadata blocks. Trashing occurs to randomly selected bits in the chosen blocks. This command is available only in debugging versions of <strong>xfs_db</strong>. It is useful for testing <a href="../man8/xfs_repair.8.html"><strong>xfs_repair</strong>(8)</a>.</p>
      <dl class='dl-vertical'>
        <dt><strong>-0</strong> | <strong>-1</strong> | <strong>-2</strong> | <strong>-3</strong></dt>
        <dd>
      <p>These are used to set the operating mode for <strong>blocktrash</strong>. Only one can be used: <strong>-0</strong> changed bits are cleared; <strong>-1</strong> changed bits are set; <strong>-2</strong> changed bits are inverted; <strong>-3</strong> changed bits are randomized.</p>
        </dd>
        <dt><strong>-n</strong></dt>
        <dd>
      <p>supplies the <em>count</em> of block-trashings to perform (default 1).</p>
        </dd>
        <dt><strong>-o</strong></dt>
        <dd>
      <p>supplies the bit <em>offset</em> at which to start trashing the block.  If the value is preceded by a '+', the trashing will start at a randomly chosen offset that is larger than the value supplied.  The default is to randomly choose an offset anywhere in the block.</p>
        </dd>
        <dt><strong>-s</strong></dt>
        <dd>
      <p>supplies a <em>seed</em> to the random processing.</p>
        </dd>
        <dt><strong>-t</strong></dt>
        <dd>
      <p>gives a <em>type</em> of blocks to be selected for trashing. Multiple <strong>-t</strong> options may be given. If no <strong>-t</strong> options are given then all metadata types can be trashed.</p>
        </dd>
        <dt><strong>-x</strong></dt>
        <dd>
      <p>sets the <em>minimum</em> size of bit range to be trashed. The default value is 1.</p>
        </dd>
        <dt><strong>-y</strong></dt>
        <dd>
      <p>sets the <em>maximum</em> size of bit range to be trashed. The default value is 1024.</p>
        </dd>
        <dt><strong>-z</strong></dt>
        <dd>
      <p>trashes the block at the top of the stack.  It is not necessary to run <strong>blockget</strong> if this option is supplied.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>blockuse [-n] [-c </strong><em>count</em><strong>]</strong></dt>
    <dd>
      <p>Print usage for current filesystem block(s). For each block, the type and (if any) inode are printed.</p>
      <dl class='dl-vertical'>
        <dt><strong>-c</strong></dt>
        <dd>
      <p>specifies a <em>count</em> of blocks to process. The default value is 1 (the current block only).</p>
        </dd>
        <dt><strong>-n</strong></dt>
        <dd>
      <p>specifies that file names should be printed. The prior <strong>blockget</strong> command must have also specified the <strong>-n</strong> option.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>bmap [-a] [-d] [</strong><em>block</em><strong> [</strong><em>len</em><strong>]]</strong></dt>
    <dd>
  <p>Show the block map for the current inode. The map display can be restricted to an area of the file with the <em>block</em> and <em>len</em> arguments. If <em>block</em> is given and <em>len</em> is omitted then 1 is assumed for len.</p>
<p class='spacer'>

  <p>The <strong>-a</strong> and <strong>-d</strong> options are used to select the attribute or data area of the inode, if neither option is given then both areas are shown.</p>
    </dd>
    <dt><strong>check</strong></dt>
    <dd>
  <p>See the <strong>blockget</strong> command.</p>
    </dd>
    <dt><strong>convert </strong><em>type number</em><strong> [</strong><em>type number</em><strong>] ... </strong><em>type</em></dt>
    <dd>
  <p>Convert from one address form to another. The known <em>type</em>s, with alternate names, are: <strong>agblock</strong> or <strong>agbno</strong> (filesystem block within an allocation group) <strong>agino</strong> or <strong>aginode</strong> (inode number within an allocation group) <strong>agnumber</strong> or <strong>agno</strong> (allocation group number) <strong>bboff</strong> or <strong>daddroff</strong> (byte offset in a <strong>daddr</strong>) <strong>blkoff</strong> or <strong>fsboff or</strong> <strong>agboff</strong> (byte offset in a <strong>agblock</strong> or <strong>fsblock</strong>) <strong>byte</strong> or <strong>fsbyte</strong> (byte address in filesystem) <strong>daddr</strong> or <strong>bb</strong> (disk address, 512-byte blocks) <strong>fsblock</strong> or <strong>fsb</strong> or <strong>fsbno</strong> (filesystem block, see the <strong>fsblock</strong> command) <strong>ino</strong> or <strong>inode</strong> (inode number) <strong>inoidx</strong> or <strong>offset</strong> (index of inode in filesystem block) <strong>inooff</strong> or <strong>inodeoff</strong> (byte offset in inode)</p>
<p class='spacer'>

  <p>Only conversions that "make sense" are allowed. The compound form (with more than three arguments) is useful for conversions such as <strong>convert agno</strong> <em>ag</em> <strong>agbno</strong> <em>agb</em> <strong>fsblock</strong>.</p>
    </dd>
    <dt><strong>daddr [</strong><em>d</em><strong>]</strong></dt>
    <dd>
  <p>Set current address to the daddr (512 byte block) given by <em>d</em>. If no value for <em>d</em> is given, the current address is printed, expressed as a daddr. The type is set to <strong>data</strong> (uninterpreted).</p>
    </dd>
    <dt><strong>dblock</strong><em> filoff</em></dt>
    <dd>
  <p>Set current address to the offset <em>filoff</em> (a filesystem block number) in the data area of the current inode.</p>
    </dd>
    <dt><strong>debug [</strong><em>flagbits</em><strong>]</strong></dt>
    <dd>
  <p>Set debug option bits. These are used for debugging <strong>xfs_db</strong>. If no value is given for <em>flagbits</em>, print the current debug option bits. These are for the use of the implementor.</p>
    </dd>
    <dt><strong>dquot [</strong><em>-g</em><strong>|</strong><em>-p</em><strong>|</strong><em>-u</em><strong>]</strong><em> id</em></dt>
    <dd>
  <p>Set current address to a group, project or user quota block for the given ID. Defaults to user quota.</p>
    </dd>
    <dt><strong>echo [</strong><em>arg</em><strong>] ...</strong></dt>
    <dd>
  <p>Echo the arguments to the output.</p>
    </dd>
    <dt><strong>f</strong></dt>
    <dd>
  <p>See the <strong>forward</strong> command.</p>
    </dd>
    <dt><strong>forward</strong></dt>
    <dd>
  <p>Move forward to the next entry in the position ring.</p>
    </dd>
    <dt><strong>frag [-adflqRrv]</strong></dt>
    <dd>
      <p>Get file fragmentation data. This prints information about fragmentation of file data in the filesystem (as opposed to fragmentation of freespace, for which see the <strong>freesp</strong> command). Every file in the filesystem is examined to see how far from ideal its extent mappings are. A summary is printed giving the totals.</p>
      <dl class='dl-vertical'>
        <dt><strong>-v</strong></dt>
        <dd>
      <p>sets verbosity, every inode has information printed for it. The remaining options select which inodes and extents are examined. If no options are given then all are assumed set, otherwise just those given are enabled.</p>
        </dd>
        <dt><strong>-a</strong></dt>
        <dd>
      <p>enables processing of attribute data.</p>
        </dd>
        <dt><strong>-d</strong></dt>
        <dd>
      <p>enables processing of directory data.</p>
        </dd>
        <dt><strong>-f</strong></dt>
        <dd>
      <p>enables processing of regular file data.</p>
        </dd>
        <dt><strong>-l</strong></dt>
        <dd>
      <p>enables processing of symbolic link data.</p>
        </dd>
        <dt><strong>-q</strong></dt>
        <dd>
      <p>enables processing of quota file data.</p>
        </dd>
        <dt><strong>-R</strong></dt>
        <dd>
      <p>enables processing of realtime control file data.</p>
        </dd>
        <dt><strong>-r</strong></dt>
        <dd>
      <p>enables processing of realtime file data.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>freesp [-bcds] [-a </strong><em>ag</em><strong>] ... [-e </strong><em>i</em><strong>] [-h </strong><em>h1</em><strong>] ... [-m </strong><em>m</em><strong>]</strong></dt>
    <dd>
      <p>Summarize free space for the filesystem. The free blocks are examined and totalled, and displayed in the form of a histogram, with a count of extents in each range of free extent sizes.</p>
      <dl class='dl-vertical'>
        <dt><strong>-a</strong></dt>
        <dd>
      <p>adds <em>ag</em> to the list of allocation groups to be processed. If no <strong>-a</strong> options are given then all allocation groups are processed.</p>
        </dd>
        <dt><strong>-b</strong></dt>
        <dd>
      <p>specifies that the histogram buckets are binary-sized, with the starting sizes being the powers of 2.</p>
        </dd>
        <dt><strong>-c</strong></dt>
        <dd>
      <p>specifies that <strong>freesp</strong> will search the by-size (cnt) space Btree instead of the default by-block (bno) space Btree.</p>
        </dd>
        <dt><strong>-d</strong></dt>
        <dd>
      <p>specifies that every free extent will be displayed.</p>
        </dd>
        <dt><strong>-e</strong></dt>
        <dd>
      <p>specifies that the histogram buckets are equal-sized, with the size specified as <em>i</em>.</p>
        </dd>
        <dt><strong>-h</strong></dt>
        <dd>
      <p>specifies a starting block number for a histogram bucket as <em>h1</em>. Multiple <strong>-h</strong>'s are given to specify the complete set of buckets.</p>
        </dd>
        <dt><strong>-m</strong></dt>
        <dd>
      <p>specifies that the histogram starting block numbers are powers of <em>m</em>. This is the general case of <strong>-b</strong>.</p>
        </dd>
        <dt><strong>-s</strong></dt>
        <dd>
      <p>specifies that a final summary of total free extents, free blocks, and the average free extent size is printed.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>fsb</strong></dt>
    <dd>
  <p>See the <strong>fsblock</strong> command.</p>
    </dd>
    <dt><strong>fsblock [</strong><em>fsb</em><strong>]</strong></dt>
    <dd>
  <p>Set current address to the fsblock value given by <em>fsb</em>. If no value for <em>fsb</em> is given the current address is printed, expressed as an fsb. The type is set to <strong>data</strong> (uninterpreted). XFS filesystem block numbers are computed ((<em>agno</em> &lt;&lt; <em>agshift</em>) | <em>agblock</em>) where <em>agshift</em> depends on the size of an allocation group. Use the <strong>convert</strong> command to convert to and from this form. Block numbers given for file blocks (for instance from the <strong>bmap</strong> command) are in this form.</p>
    </dd>
    <dt><strong>hash</strong><em> string</em></dt>
    <dd>
  <p>Prints the hash value of <em>string</em> using the hash function of the XFS directory and attribute implementation.</p>
    </dd>
    <dt><strong>help [</strong><em>command</em><strong>]</strong></dt>
    <dd>
  <p>Print help for one or all commands.</p>
    </dd>
    <dt><strong>inode [</strong><em>inode#</em><strong>]</strong></dt>
    <dd>
  <p>Set the current inode number. If no <em>inode#</em> is given, print the current inode number.</p>
    </dd>
    <dt><strong>label [</strong><em>label</em><strong>]</strong></dt>
    <dd>
  <p>Set the filesystem label. The filesystem label can be used by <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> instead of using a device special file. The maximum length of an XFS label is 12 characters - use of a longer <em>label</em> will result in truncation and a warning will be issued. If no <em>label</em> is given, the current filesystem label is printed.</p>
    </dd>
    <dt><strong>log [stop | start </strong><em>filename</em><strong>]</strong></dt>
    <dd>
  <p>Start logging output to <em>filename</em>, stop logging, or print the current logging status.</p>
    </dd>
    <dt><strong>metadump [-egow] </strong><em>filename</em></dt>
    <dd>
  <p>Dumps metadata to a file. See <a href="../man8/xfs_metadump.8.html"><strong>xfs_metadump</strong>(8)</a> for more information.</p>
    </dd>
    <dt><strong>ncheck [-s] [-i </strong><em>ino</em><strong>] ...</strong></dt>
    <dd>
      <p>Print name-inode pairs. A <strong>blockget -n</strong> command must be run first to gather the information.</p>
      <dl class='dl-vertical'>
        <dt><strong>-i</strong></dt>
        <dd>
      <p>specifies an inode number to be printed. If no <strong>-i</strong> options are given then all inodes are printed.</p>
        </dd>
        <dt><strong>-s</strong></dt>
        <dd>
      <p>specifies that only setuid and setgid files are printed.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>p</strong></dt>
    <dd>
  <p>See the <strong>print</strong> command.</p>
    </dd>
    <dt><strong>pop</strong></dt>
    <dd>
  <p>Pop location from the stack.</p>
    </dd>
    <dt><strong>print [</strong><em>field-expression</em><strong>] ...</strong></dt>
    <dd>
  <p>Print field values. If no argument is given, print all fields in the current structure.</p>
    </dd>
    <dt><strong>push [</strong><em>command</em><strong>]</strong></dt>
    <dd>
  <p>Push location to the stack. If <em>command</em> is supplied, set the current location to the results of <em>command</em> after pushing the old location.</p>
    </dd>
    <dt><strong>q</strong></dt>
    <dd>
  <p>See the <strong>quit</strong> command.</p>
    </dd>
    <dt><strong>quit</strong></dt>
    <dd>
  <p>Exit <strong>xfs_db</strong>.</p>
    </dd>
    <dt><strong>ring [</strong><em>index</em><strong>]</strong></dt>
    <dd>
  <p>Show position ring (if no <em>index</em> argument is given), or move to a specific entry in the position ring given by <em>index</em>.</p>
    </dd>
    <dt><strong>sb [</strong><em>agno</em><strong>]</strong></dt>
    <dd>
  <p>Set current address to SB header in allocation group <em>agno</em>. If no <em>agno</em> is given, use the current allocation group number.</p>
    </dd>
    <dt><strong>source </strong><em>source-file</em></dt>
    <dd>
  <p>Process commands from <em>source-file</em>. <strong>source</strong> commands can be nested.</p>
    </dd>
    <dt><strong>stack</strong></dt>
    <dd>
  <p>View the location stack.</p>
    </dd>
    <dt><strong>type [</strong><em>type</em><strong>]</strong></dt>
    <dd>
  <p>Set the current data type to <em>type</em>. If no argument is given, show the current data type. The possible data types are: <strong>agf</strong>, <strong>agfl</strong>, <strong>agi</strong>, <strong>attr</strong>, <strong>bmapbta</strong>, <strong>bmapbtd</strong>, <strong>bnobt</strong>, <strong>cntbt</strong>, <strong>data</strong>, <strong>dir</strong>, <strong>dir2</strong>, <strong>dqblk</strong>, <strong>inobt</strong>, <strong>inode</strong>, <strong>log</strong>, <strong>rtbitmap</strong>, <strong>rtsummary</strong>, <strong>sb</strong>, <strong>symlink</strong> and <strong>text</strong>. See the TYPES section below for more information on these data types.</p>
    </dd>
    <dt><strong>uuid [</strong><em>uuid</em><strong> | </strong><em>generate</em><strong> | </strong><em>rewrite</em><strong> | </strong><em>restore</em><strong>]</strong></dt>
    <dd>
  <p>Set the filesystem universally unique identifier (UUID). The filesystem UUID can be used by <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> instead of using a device special file. The <em>uuid</em> can be set directly to the desired UUID, or it can be automatically generated using the <strong>generate</strong> option. These options will both write the UUID into every copy of the superblock in the filesystem.  On a CRC-enabled filesystem, this will set an incompatible superblock flag, and the filesystem will not be mountable with older kernels.  This can be reverted with the <strong>restore</strong> option, which will copy the original UUID back into place and clear the incompatible flag as needed. <strong>rewrite</strong> copies the current UUID from the primary superblock to all secondary copies of the superblock. If no argument is given, the current filesystem UUID is printed.</p>
    </dd>
    <dt><strong>version [</strong><em>feature</em><strong> | </strong><em>versionnum features2</em><strong>]</strong></dt>
    <dd>
  <p>Enable selected features for a filesystem (certain features can be enabled on an unmounted filesystem, after <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> has created the filesystem). Support for unwritten extents can be enabled using the <strong>extflg</strong> option. Support for version 2 log format can be enabled using the <strong>log2</strong> option. Support for extended attributes can be enabled using the <strong>attr1</strong> or <strong>attr2</strong> option. Once enabled, extended attributes cannot be disabled, but the user may toggle between <strong>attr1</strong> and <strong>attr2</strong> at will (older kernels may not support the newer version).</p>
<p class='spacer'>

  <p>If no argument is given, the current version and feature bits are printed. With one argument, this command will write the updated version number into every copy of the superblock in the filesystem. If two arguments are given, they will be used as numeric values for the <em>versionnum</em> and <em>features2</em> bits respectively, and their string equivalent reported (but no modifications are made).</p>
    </dd>
    <dt><strong>write [-c] [</strong><em>field value</em><strong>] ...</strong></dt>
    <dd>
  <p>Write a value to disk. Specific fields can be set in structures (struct mode), or a block can be set to data values (data mode), or a block can be set to string values (string mode, for symlink blocks). The operation happens immediately: there is no buffering.</p>
<p class='spacer'>

  <p>Struct mode is in effect when the current type is structural, i.e. not data. For struct mode, the syntax is " .B write <em>field value .</em></p>
<p class='spacer'>

      <p>Data mode is in effect when the current type is data. In this case the contents of the block can be shifted or rotated left or right, or filled with a sequence, a constant value, or a random value. In this mode <strong>write</strong> with no arguments gives more information on the allowed commands.</p>
      <dl class='dl-vertical'>
        <dt><strong>-c</strong></dt>
        <dd>
      <p>Skip write verifiers and CRC recalculation; allows invalid data to be written to disk.</p>
        </dd>
      </dl>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TYPES</h2>
        <div class="sectioncontent">

  <p>This section gives the fields in each structure type and their meanings. Note that some types of block cover multiple actual structures, for instance directory blocks.</p>
  <dl class='dl-vertical'>
    <dt><strong>agf</strong></dt>
    <dd>
      <p>The AGF block is the header for block allocation information; it is in the second 512-byte block of each allocation group. The following fields are defined:</p>
      <dl class='dl-vertical'>
        <dt><strong>magicnum</strong></dt>
        <dd>
      <p>AGF block magic number, 0x58414746 ('XAGF').</p>
        </dd>
        <dt><strong>versionnum</strong></dt>
        <dd>
      <p>version number, currently 1.</p>
        </dd>
        <dt><strong>seqno</strong></dt>
        <dd>
      <p>sequence number starting from 0.</p>
        </dd>
        <dt><strong>length</strong></dt>
        <dd>
      <p>size in filesystem blocks of the allocation group. All allocation groups except the last one of the filesystem have the superblock's <strong>agblocks</strong> value here.</p>
        </dd>
        <dt><strong>bnoroot</strong></dt>
        <dd>
      <p>block number of the root of the Btree holding free space information sorted by block number.</p>
        </dd>
        <dt><strong>cntroot</strong></dt>
        <dd>
      <p>block number of the root of the Btree holding free space information sorted by block count.</p>
        </dd>
        <dt><strong>bnolevel</strong></dt>
        <dd>
      <p>number of levels in the by-block-number Btree.</p>
        </dd>
        <dt><strong>cntlevel</strong></dt>
        <dd>
      <p>number of levels in the by-block-count Btree.</p>
        </dd>
        <dt><strong>flfirst</strong></dt>
        <dd>
      <p>index into the AGFL block of the first active entry.</p>
        </dd>
        <dt><strong>fllast</strong></dt>
        <dd>
      <p>index into the AGFL block of the last active entry.</p>
        </dd>
        <dt><strong>flcount</strong></dt>
        <dd>
      <p>count of active entries in the AGFL block.</p>
        </dd>
        <dt><strong>freeblks</strong></dt>
        <dd>
      <p>count of blocks represented in the freespace Btrees.</p>
        </dd>
        <dt><strong>longest</strong></dt>
        <dd>
      <p>longest free space represented in the freespace Btrees.</p>
        </dd>
        <dt><strong>btreeblks</strong></dt>
        <dd>
      <p>number of blocks held in the AGF Btrees.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>agfl</strong></dt>
    <dd>
      <p>The AGFL block contains block numbers for use of the block allocator; it is in the fourth 512-byte block of each allocation group. Each entry in the active list is a block number within the allocation group that can be used for any purpose if space runs low. The AGF block fields <strong>flfirst</strong>, <strong>fllast</strong>, and <strong>flcount</strong> designate which entries are currently active. Entry space is allocated in a circular manner within the AGFL block. Fields defined:</p>
      <dl class='dl-vertical'>
        <dt><strong>bno</strong></dt>
        <dd>
      <p>array of all block numbers. Even those which are not active are printed.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>agi</strong></dt>
    <dd>
      <p>The AGI block is the header for inode allocation information; it is in the third 512-byte block of each allocation group. Fields defined:</p>
      <dl class='dl-vertical'>
        <dt><strong>magicnum</strong></dt>
        <dd>
      <p>AGI block magic number, 0x58414749 ('XAGI').</p>
        </dd>
        <dt><strong>versionnum</strong></dt>
        <dd>
      <p>version number, currently 1.</p>
        </dd>
        <dt><strong>seqno</strong></dt>
        <dd>
      <p>sequence number starting from 0.</p>
        </dd>
        <dt><strong>length</strong></dt>
        <dd>
      <p>size in filesystem blocks of the allocation group.</p>
        </dd>
        <dt><strong>count</strong></dt>
        <dd>
      <p>count of inodes allocated.</p>
        </dd>
        <dt><strong>root</strong></dt>
        <dd>
      <p>block number of the root of the Btree holding inode allocation information.</p>
        </dd>
        <dt><strong>level</strong></dt>
        <dd>
      <p>number of levels in the inode allocation Btree.</p>
        </dd>
        <dt><strong>freecount</strong></dt>
        <dd>
      <p>count of allocated inodes that are not in use.</p>
        </dd>
        <dt><strong>newino</strong></dt>
        <dd>
      <p>last inode number allocated.</p>
        </dd>
        <dt><strong>dirino</strong></dt>
        <dd>
      <p>unused.</p>
        </dd>
        <dt><strong>unlinked</strong></dt>
        <dd>
      <p>an array of inode numbers within the allocation group. The entries in the AGI block are the heads of lists which run through the inode <strong>next_unlinked</strong> field. These inodes are to be unlinked the next time the filesystem is mounted.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>attr</strong></dt>
    <dd>
      <p>An attribute fork is organized as a Btree with the actual data embedded in the leaf blocks. The root of the Btree is found in block 0 of the fork. The index (sort order) of the Btree is the hash value of the attribute name. All the blocks contain a <strong>blkinfo</strong> structure at the beginning, see type <strong>dir</strong> for a description. Nonleaf blocks are identical in format to those for version 1 and version 2 directories, see type <strong>dir</strong> for a description. Leaf blocks can refer to "local" or "remote" attribute values. Local values are stored directly in the leaf block. Remote values are stored in an independent block in the attribute fork (with no structure). Leaf blocks contain the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>hdr</strong></dt>
        <dd>
      <p>header containing a <strong>blkinfo</strong> structure <strong>info</strong> (magic number 0xfbee), a <strong>count</strong> of active entries, <strong>usedbytes</strong> total bytes of names and values, the <strong>firstused</strong> byte in the name area, <strong>holes</strong> set if the block needs compaction, and array <strong>freemap</strong> as for <strong>dir</strong> leaf blocks.</p>
        </dd>
        <dt><strong>entries</strong></dt>
        <dd>
      <p>array of structures containing a <strong>hashval</strong>, <strong>nameidx</strong> (index into the block of the name), and flags <strong>incomplete</strong>, <strong>root</strong>, and <strong>local</strong>.</p>
        </dd>
        <dt><strong>nvlist</strong></dt>
        <dd>
      <p>array of structures describing the attribute names and values. Fields always present: <strong>valuelen</strong> (length of value in bytes), <strong>namelen</strong>, and <strong>name</strong>. Fields present for local values: <strong>value</strong> (value string). Fields present for remote values: <strong>valueblk</strong> (fork block number of containing the value).</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>bmapbt</strong></dt>
    <dd>
      <p>Files with many extents in their data or attribute fork will have the extents described by the contents of a Btree for that fork, instead of being stored directly in the inode. Each bmap Btree starts with a root block contained within the inode. The other levels of the Btree are stored in filesystem blocks. The blocks are linked to sibling left and right blocks at each level, as well as by pointers from parent to child blocks. Each block contains the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>magic</strong></dt>
        <dd>
      <p>bmap Btree block magic number, 0x424d4150 ('BMAP').</p>
        </dd>
        <dt><strong>level</strong></dt>
        <dd>
      <p>level of this block above the leaf level.</p>
        </dd>
        <dt><strong>numrecs</strong></dt>
        <dd>
      <p>number of records or keys in the block.</p>
        </dd>
        <dt><strong>leftsib</strong></dt>
        <dd>
      <p>left (logically lower) sibling block, 0 if none.</p>
        </dd>
        <dt><strong>rightsib</strong></dt>
        <dd>
      <p>right (logically higher) sibling block, 0 if none.</p>
        </dd>
        <dt><strong>recs</strong></dt>
        <dd>
      <p>[leaf blocks only] array of extent records. Each record contains <strong>startoff</strong>, <strong>startblock</strong>, <strong>blockcount</strong>, and <strong>extentflag</strong> (1 if the extent is unwritten).</p>
        </dd>
        <dt><strong>keys</strong></dt>
        <dd>
      <p>[non-leaf blocks only] array of key records. These are the first key value of each block in the level below this one. Each record contains <strong>startoff</strong>.</p>
        </dd>
        <dt><strong>ptrs</strong></dt>
        <dd>
      <p>[non-leaf blocks only] array of child block pointers. Each pointer is a filesystem block number to the next level in the Btree.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>bnobt</strong></dt>
    <dd>
      <p>There is one set of filesystem blocks forming the by-block-number allocation Btree for each allocation group. The root block of this Btree is designated by the <strong>bnoroot</strong> field in the corresponding AGF block. The blocks are linked to sibling left and right blocks at each level, as well as by pointers from parent to child blocks. Each block has the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>magic</strong></dt>
        <dd>
      <p>BNOBT block magic number, 0x41425442 ('ABTB').</p>
        </dd>
        <dt><strong>level</strong></dt>
        <dd>
      <p>level number of this block, 0 is a leaf.</p>
        </dd>
        <dt><strong>numrecs</strong></dt>
        <dd>
      <p>number of data entries in the block.</p>
        </dd>
        <dt><strong>leftsib</strong></dt>
        <dd>
      <p>left (logically lower) sibling block, 0 if none.</p>
        </dd>
        <dt><strong>rightsib</strong></dt>
        <dd>
      <p>right (logically higher) sibling block, 0 if none.</p>
        </dd>
        <dt><strong>recs</strong></dt>
        <dd>
      <p>[leaf blocks only] array of freespace records. Each record contains <strong>startblock</strong> and <strong>blockcount</strong>.</p>
        </dd>
        <dt><strong>keys</strong></dt>
        <dd>
      <p>[non-leaf blocks only] array of key records. These are the first value of each block in the level below this one. Each record contains <strong>startblock</strong> and <strong>blockcount</strong>.</p>
        </dd>
        <dt><strong>ptrs</strong></dt>
        <dd>
      <p>[non-leaf blocks only] array of child block pointers. Each pointer is a block number within the allocation group to the next level in the Btree.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>cntbt</strong></dt>
    <dd>
      <p>There is one set of filesystem blocks forming the by-block-count allocation Btree for each allocation group. The root block of this Btree is designated by the <strong>cntroot</strong> field in the corresponding AGF block. The blocks are linked to sibling left and right blocks at each level, as well as by pointers from parent to child blocks. Each block has the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>magic</strong></dt>
        <dd>
      <p>CNTBT block magic number, 0x41425443 ('ABTC').</p>
        </dd>
        <dt><strong>level</strong></dt>
        <dd>
      <p>level number of this block, 0 is a leaf.</p>
        </dd>
        <dt><strong>numrecs</strong></dt>
        <dd>
      <p>number of data entries in the block.</p>
        </dd>
        <dt><strong>leftsib</strong></dt>
        <dd>
      <p>left (logically lower) sibling block, 0 if none.</p>
        </dd>
        <dt><strong>rightsib</strong></dt>
        <dd>
      <p>right (logically higher) sibling block, 0 if none.</p>
        </dd>
        <dt><strong>recs</strong></dt>
        <dd>
      <p>[leaf blocks only] array of freespace records. Each record contains <strong>startblock</strong> and <strong>blockcount</strong>.</p>
        </dd>
        <dt><strong>keys</strong></dt>
        <dd>
      <p>[non-leaf blocks only] array of key records. These are the first value of each block in the level below this one. Each record contains <strong>blockcount</strong> and <strong>startblock</strong>.</p>
        </dd>
        <dt><strong>ptrs</strong></dt>
        <dd>
      <p>[non-leaf blocks only] array of child block pointers. Each pointer is a block number within the allocation group to the next level in the Btree.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>data</strong></dt>
    <dd>
  <p>User file blocks, and other blocks whose type is unknown, have this type for display purposes in <strong>xfs_db</strong>. The block data is displayed in hexadecimal format.</p>
    </dd>
    <dt><strong>dir</strong></dt>
    <dd>
      <p>A version 1 directory is organized as a Btree with the directory data embedded in the leaf blocks. The root of the Btree is found in block 0 of the file. The index (sort order) of the Btree is the hash value of the entry name. All the blocks contain a <strong>blkinfo</strong> structure at the beginning with the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>forw</strong></dt>
        <dd>
      <p>next sibling block.</p>
        </dd>
        <dt><strong>back</strong></dt>
        <dd>
      <p>previous sibling block.</p>
        </dd>
        <dt><strong>magic</strong></dt>
        <dd>
      <p>magic number for this block type.</p>
        </dd>
      </dl>
<p class='spacer'>

      <p>The non-leaf (node) blocks have the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>hdr</strong></dt>
        <dd>
      <p>header containing a <strong>blkinfo</strong> structure <strong>info</strong> (magic number 0xfebe), the <strong>count</strong> of active entries, and the <strong>level</strong> of this block above the leaves.</p>
        </dd>
        <dt><strong>btree</strong></dt>
        <dd>
      <p>array of entries containing <strong>hashval</strong> and <strong>before</strong> fields. The <strong>before</strong> value is a block number within the directory file to the child block, the <strong>hashval</strong> is the last hash value in that block.</p>
        </dd>
      </dl>
<p class='spacer'>

      <p>The leaf blocks have the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>hdr</strong></dt>
        <dd>
      <p>header containing a <strong>blkinfo</strong> structure <strong>info</strong> (magic number 0xfeeb), the <strong>count</strong> of active entries, <strong>namebytes</strong> (total name string bytes), <strong>holes</strong> flag (block needs compaction), and <strong>freemap</strong> (array of <strong>base</strong>, <strong>size</strong> entries for free regions).</p>
        </dd>
        <dt><strong>entries</strong></dt>
        <dd>
      <p>array of structures containing <strong>hashval</strong>, <strong>nameidx</strong> (byte index into the block of the name string), and <strong>namelen</strong>.</p>
        </dd>
        <dt><strong>namelist</strong></dt>
        <dd>
      <p>array of structures containing <strong>inumber</strong> and <strong>name</strong>.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>dir2</strong></dt>
    <dd>
  <p>A version 2 directory has four kinds of blocks. Data blocks start at offset 0 in the file. There are two kinds of data blocks: single-block directories have the leaf information embedded at the end of the block, data blocks in multi-block directories do not. Node and leaf blocks start at offset 32GiB (with either a single leaf block or the root node block). Freespace blocks start at offset 64GiB. The node and leaf blocks form a Btree, with references to the data in the data blocks. The freespace blocks form an index of longest free spaces within the data blocks.</p>
<p class='spacer'>

      <p>A single-block directory block contains the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>bhdr</strong></dt>
        <dd>
      <p>header containing <strong>magic</strong> number 0x58443242 ('XD2B') and an array <strong>bestfree</strong> of the longest 3 free spaces in the block (<strong>offset</strong>, <strong>length</strong>).</p>
        </dd>
        <dt><strong>bu</strong></dt>
        <dd>
      <p>array of union structures. Each element is either an entry or a freespace. For entries, there are the following fields: <strong>inumber</strong>, <strong>namelen</strong>, <strong>name</strong>, and <strong>tag</strong>. For freespace, there are the following fields: <strong>freetag</strong> (0xffff), <strong>length</strong>, and <strong>tag</strong>. The <strong>tag</strong> value is the byte offset in the block of the start of the entry it is contained in.</p>
        </dd>
        <dt><strong>bleaf</strong></dt>
        <dd>
      <p>array of leaf entries containing <strong>hashval</strong> and <strong>address</strong>. The <strong>address</strong> is a 64-bit word offset into the file.</p>
        </dd>
        <dt><strong>btail</strong></dt>
        <dd>
      <p>tail structure containing the total <strong>count</strong> of leaf entries and <strong>stale</strong> count of unused leaf entries.</p>
        </dd>
      </dl>
<p class='spacer'>

      <p>A data block contains the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>dhdr</strong></dt>
        <dd>
      <p>header containing <strong>magic</strong> number 0x58443244 ('XD2D') and an array <strong>bestfree</strong> of the longest 3 free spaces in the block (<strong>offset</strong>, <strong>length</strong>).</p>
        </dd>
        <dt><strong>du</strong></dt>
        <dd>
      <p>array of union structures as for <strong>bu</strong>.</p>
        </dd>
      </dl>
<p class='spacer'>

      <p>Leaf blocks have two possible forms. If the Btree consists of a single leaf then the freespace information is in the leaf block, otherwise it is in separate blocks and the root of the Btree is a node block. A leaf block contains the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>lhdr</strong></dt>
        <dd>
      <p>header containing a <strong>blkinfo</strong> structure <strong>info</strong> (magic number 0xd2f1 for the single leaf case, 0xd2ff for the true Btree case), the total <strong>count</strong> of leaf entries, and <strong>stale</strong> count of unused leaf entries.</p>
        </dd>
        <dt><strong>lents</strong></dt>
        <dd>
      <p>leaf entries, as for <strong>bleaf</strong>.</p>
        </dd>
        <dt><strong>lbests</strong></dt>
        <dd>
      <p>[single leaf only] array of values which represent the longest freespace in each data block in the directory.</p>
        </dd>
        <dt><strong>ltail</strong></dt>
        <dd>
      <p>[single leaf only] tail structure containing <strong>bestcount</strong> count of <strong>lbests</strong>.</p>
        </dd>
      </dl>
<p class='spacer'>

  <p>A node block is identical to that for types <strong>attr</strong> and <strong>dir</strong>.</p>
<p class='spacer'>

      <p>A freespace block contains the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>fhdr</strong></dt>
        <dd>
      <p>header containing <strong>magic</strong> number 0x58443246 ('XD2F'), <strong>firstdb</strong> first data block number covered by this freespace block, <strong>nvalid</strong> number of valid entries, and <strong>nused</strong> number of entries representing real data blocks.</p>
        </dd>
        <dt><strong>fbests</strong></dt>
        <dd>
      <p>array of values as for <strong>lbests</strong>.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>dqblk</strong></dt>
    <dd>
      <p>The quota information is stored in files referred to by the superblock <strong>uquotino</strong> and <strong>pquotino</strong> fields. Each filesystem block in a quota file contains a constant number of quota entries. The quota entry size is currently 136 bytes, so with a 4KiB filesystem block size there are 30 quota entries per block. The <strong>dquot</strong> command is used to locate these entries in the filesystem. The file entries are indexed by the user or project identifier to determine the block and offset. Each quota entry has the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>magic</strong></dt>
        <dd>
      <p>magic number, 0x4451 ('DQ').</p>
        </dd>
        <dt><strong>version</strong></dt>
        <dd>
      <p>version number, currently 1.</p>
        </dd>
        <dt><strong>flags</strong></dt>
        <dd>
      <p>flags, values include 0x01 for user quota, 0x02 for project quota.</p>
        </dd>
        <dt><strong>id</strong></dt>
        <dd>
      <p>user or project identifier.</p>
        </dd>
        <dt><strong>blk_hardlimit</strong></dt>
        <dd>
      <p>absolute limit on blocks in use.</p>
        </dd>
        <dt><strong>blk_softlimit</strong></dt>
        <dd>
      <p>preferred limit on blocks in use.</p>
        </dd>
        <dt><strong>ino_hardlimit</strong></dt>
        <dd>
      <p>absolute limit on inodes in use.</p>
        </dd>
        <dt><strong>ino_softlimit</strong></dt>
        <dd>
      <p>preferred limit on inodes in use.</p>
        </dd>
        <dt><strong>bcount</strong></dt>
        <dd>
      <p>blocks actually in use.</p>
        </dd>
        <dt><strong>icount</strong></dt>
        <dd>
      <p>inodes actually in use.</p>
        </dd>
        <dt><strong>itimer</strong></dt>
        <dd>
      <p>time when service will be refused if soft limit is violated for inodes.</p>
        </dd>
        <dt><strong>btimer</strong></dt>
        <dd>
      <p>time when service will be refused if soft limit is violated for blocks.</p>
        </dd>
        <dt><strong>iwarns</strong></dt>
        <dd>
      <p>number of warnings issued about inode limit violations.</p>
        </dd>
        <dt><strong>bwarns</strong></dt>
        <dd>
      <p>number of warnings issued about block limit violations.</p>
        </dd>
        <dt><strong>rtb_hardlimit</strong></dt>
        <dd>
      <p>absolute limit on realtime blocks in use.</p>
        </dd>
        <dt><strong>rtb_softlimit</strong></dt>
        <dd>
      <p>preferred limit on realtime blocks in use.</p>
        </dd>
        <dt><strong>rtbcount</strong></dt>
        <dd>
      <p>realtime blocks actually in use.</p>
        </dd>
        <dt><strong>rtbtimer</strong></dt>
        <dd>
      <p>time when service will be refused if soft limit is violated for realtime blocks.</p>
        </dd>
        <dt><strong>rtbwarns</strong></dt>
        <dd>
      <p>number of warnings issued about realtime block limit violations.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>inobt</strong></dt>
    <dd>
      <p>There is one set of filesystem blocks forming the inode allocation Btree for each allocation group. The root block of this Btree is designated by the <strong>root</strong> field in the corresponding AGI block. The blocks are linked to sibling left and right blocks at each level, as well as by pointers from parent to child blocks. Each block has the following fields:</p>
      <dl class='dl-vertical'>
        <dt><strong>magic</strong></dt>
        <dd>
      <p>INOBT block magic number, 0x49414254 ('IABT').</p>
        </dd>
        <dt><strong>level</strong></dt>
        <dd>
      <p>level number of this block, 0 is a leaf.</p>
        </dd>
        <dt><strong>numrecs</strong></dt>
        <dd>
      <p>number of data entries in the block.</p>
        </dd>
        <dt><strong>leftsib</strong></dt>
        <dd>
      <p>left (logically lower) sibling block, 0 if none.</p>
        </dd>
        <dt><strong>rightsib</strong></dt>
        <dd>
      <p>right (logically higher) sibling block, 0 if none.</p>
        </dd>
        <dt><strong>recs</strong></dt>
        <dd>
      <p>[leaf blocks only] array of inode records. Each record contains <strong>startino</strong> allocation-group relative inode number, <strong>freecount</strong> count of free inodes in this chunk, and <strong>free</strong> bitmap, LSB corresponds to inode 0.</p>
        </dd>
        <dt><strong>keys</strong></dt>
        <dd>
      <p>[non-leaf blocks only] array of key records. These are the first value of each block in the level below this one. Each record contains <strong>startino</strong>.</p>
        </dd>
        <dt><strong>ptrs</strong></dt>
        <dd>
      <p>[non-leaf blocks only] array of child block pointers. Each pointer is a block number within the allocation group to the next level in the Btree.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>inode</strong></dt>
    <dd>
  <p>Inodes are allocated in "chunks" of 64 inodes each. Usually a chunk is multiple filesystem blocks, although there are cases with large filesystem blocks where a chunk is less than one block. The inode Btree (see <strong>inobt</strong> above) refers to the inode numbers per allocation group. The inode numbers directly reflect the location of the inode block on disk. Use the <strong>inode</strong> command to point <strong>xfs_db</strong> to a specific inode. Each inode contains four regions: <strong>core</strong>, <strong>next_unlinked</strong>, <strong>u</strong>, and  <strong>a</strong>. <strong>core</strong> contains the fixed information. <strong>next_unlinked</strong> is separated from the core due to journaling considerations, see type <strong>agi</strong> field <strong>unlinked</strong>. <strong>u</strong> is a union structure that is different in size and format depending on the type and representation of the file data ("data fork"). <strong>a</strong> is an optional union structure to describe attribute data, that is different in size, format, and location depending on the presence and representation of attribute data, and the size of the <strong>u</strong> data ("attribute fork"). <strong>xfs_db</strong> automatically selects the proper union members based on information in the inode.</p>
<p class='spacer'>

      <p>The following are fields in the inode core:</p>
      <dl class='dl-vertical'>
        <dt><strong>magic</strong></dt>
        <dd>
      <p>inode magic number, 0x494e ('IN').</p>
        </dd>
        <dt><strong>mode</strong></dt>
        <dd>
      <p>mode and type of file, as described in <a href="../man2/chmod.2.html"><strong>chmod</strong>(2)</a>, <a href="../man2/mknod.2.html"><strong>mknod</strong>(2)</a>, and <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a>.</p>
        </dd>
        <dt><strong>version</strong></dt>
        <dd>
      <p>inode version, 1 or 2.</p>
        </dd>
        <dt><strong>format</strong></dt>
        <dd>
      <p>format of <strong>u</strong> union data (0: xfs_dev_t, 1: local file - in-inode directory or symlink, 2: extent list, 3: Btree root, 4: unique id [unused]).</p>
        </dd>
        <dt><strong>nlinkv1</strong></dt>
        <dd>
      <p>number of links to the file in a version 1 inode.</p>
        </dd>
        <dt><strong>nlinkv2</strong></dt>
        <dd>
      <p>number of links to the file in a version 2 inode.</p>
        </dd>
        <dt><strong>projid_lo</strong></dt>
        <dd>
      <p>owner's project id (low word; version 2 inode only). <strong>projid_hi</strong> owner's project id (high word; version 2 inode only).</p>
        </dd>
        <dt><strong>uid</strong></dt>
        <dd>
      <p>owner's user id.</p>
        </dd>
        <dt><strong>gid</strong></dt>
        <dd>
      <p>owner's group id.</p>
        </dd>
        <dt><strong>atime</strong></dt>
        <dd>
      <p>time last accessed (seconds and nanoseconds).</p>
        </dd>
        <dt><strong>mtime</strong></dt>
        <dd>
      <p>time last modified.</p>
        </dd>
        <dt><strong>ctime</strong></dt>
        <dd>
      <p>time created or inode last modified.</p>
        </dd>
        <dt><strong>size</strong></dt>
        <dd>
      <p>number of bytes in the file.</p>
        </dd>
        <dt><strong>nblocks</strong></dt>
        <dd>
      <p>total number of blocks in the file including indirect and attribute.</p>
        </dd>
        <dt><strong>extsize</strong></dt>
        <dd>
      <p>basic/minimum extent size for the file.</p>
        </dd>
        <dt><strong>nextents</strong></dt>
        <dd>
      <p>number of extents in the data fork.</p>
        </dd>
        <dt><strong>naextents</strong></dt>
        <dd>
      <p>number of extents in the attribute fork.</p>
        </dd>
        <dt><strong>forkoff</strong></dt>
        <dd>
      <p>attribute fork offset in the inode, in 64-bit words from the start of <strong>u</strong>.</p>
        </dd>
        <dt><strong>aformat</strong></dt>
        <dd>
      <p>format of <strong>a</strong> data (1: local attribute data, 2: extent list, 3: Btree root).</p>
        </dd>
        <dt><strong>dmevmask</strong></dt>
        <dd>
      <p>DMAPI event mask.</p>
        </dd>
        <dt><strong>dmstate</strong></dt>
        <dd>
      <p>DMAPI state information.</p>
        </dd>
        <dt><strong>newrtbm</strong></dt>
        <dd>
      <p>file is the realtime bitmap and is "new" format.</p>
        </dd>
        <dt><strong>prealloc</strong></dt>
        <dd>
      <p>file has preallocated data space after EOF.</p>
        </dd>
        <dt><strong>realtime</strong></dt>
        <dd>
      <p>file data is in the realtime subvolume.</p>
        </dd>
        <dt><strong>gen</strong></dt>
        <dd>
      <p>inode generation number.</p>
        </dd>
      </dl>
<p class='spacer'>

      <p>The following fields are in the <strong>u</strong> data fork union:</p>
      <dl class='dl-vertical'>
        <dt><strong>bmbt</strong></dt>
        <dd>
      <p>bmap Btree root. This looks like a <strong>bmapbtd</strong> block with redundant information removed.</p>
        </dd>
        <dt><strong>bmx</strong></dt>
        <dd>
      <p>array of extent descriptors.</p>
        </dd>
        <dt><strong>dev</strong></dt>
        <dd>
      <p>dev_t for the block or character device.</p>
        </dd>
        <dt><strong>sfdir</strong></dt>
        <dd>
      <p>shortform (in-inode) version 1 directory. This consists of a <strong>hdr</strong> containing the <strong>parent</strong> inode number and a <strong>count</strong> of active entries in the directory, followed by an array <strong>list</strong> of <strong>hdr.count</strong> entries. Each such entry contains <strong>inumber</strong>, <strong>namelen</strong>, and <strong>name</strong> string.</p>
        </dd>
        <dt><strong>sfdir2</strong></dt>
        <dd>
      <p>shortform (in-inode) version 2 directory. This consists of a <strong>hdr</strong> containing a <strong>count</strong> of active entries in the directory, an <strong>i8count</strong> of entries with inumbers that don't fit in a 32-bit value, and the <strong>parent</strong> inode number, followed by an array <strong>list</strong> of <strong>hdr.count</strong> entries. Each such entry contains <strong>namelen</strong>, a saved <strong>offset</strong> used when the directory is converted to a larger form, a <strong>name</strong> string, and the <strong>inumber</strong>.</p>
        </dd>
        <dt><strong>symlink</strong></dt>
        <dd>
      <p>symbolic link string value.</p>
        </dd>
      </dl>
<p class='spacer'>

      <p>The following fields are in the <strong>a</strong> attribute fork union if it exists:</p>
      <dl class='dl-vertical'>
        <dt><strong>bmbt</strong></dt>
        <dd>
      <p>bmap Btree root, as above.</p>
        </dd>
        <dt><strong>bmx</strong></dt>
        <dd>
      <p>array of extent descriptors.</p>
        </dd>
        <dt><strong>sfattr</strong></dt>
        <dd>
      <p>shortform (in-inode) attribute values. This consists of a <strong>hdr</strong> containing a <strong>totsize</strong> (total size in bytes) and a <strong>count</strong> of active entries, followed by an array <strong>list</strong> of <strong>hdr.count</strong> entries. Each such entry contains <strong>namelen</strong>, <strong>valuelen</strong>, <strong>root</strong> flag, <strong>name</strong>, and <strong>value</strong>.</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>log</strong></dt>
    <dd>
  <p>Log blocks contain the journal entries for XFS. It's not useful to examine these with <strong>xfs_db</strong>, use <a href="../man8/xfs_logprint.8.html"><strong>xfs_logprint</strong>(8)</a> instead.</p>
    </dd>
    <dt><strong>rtbitmap</strong></dt>
    <dd>
  <p>If the filesystem has a realtime subvolume, then the <strong>rbmino</strong> field in the superblock refers to a file that contains the realtime bitmap. Each bit in the bitmap file controls the allocation of a single realtime extent (set == free). The bitmap is processed in 32-bit words, the LSB of a word is used for the first extent controlled by that bitmap word. The <strong>atime</strong> field of the realtime bitmap inode contains a counter that is used to control where the next new realtime file will start.</p>
    </dd>
    <dt><strong>rtsummary</strong></dt>
    <dd>
  <p>If the filesystem has a realtime subvolume, then the <strong>rsumino</strong> field in the superblock refers to a file that contains the realtime summary data. The summary file contains a two-dimensional array of 16-bit values. Each value counts the number of free extent runs (consecutive free realtime extents) of a given range of sizes that starts in a given bitmap block. The size ranges are binary buckets (low size in the bucket is a power of 2). There are as many size ranges as are necessary given the size of the realtime subvolume. The first dimension is the size range, the second dimension is the starting bitmap block number (adjacent entries are for the same size, adjacent bitmap blocks).</p>
    </dd>
    <dt><strong>sb</strong></dt>
    <dd>
      <p>There is one sb (superblock) structure per allocation group. It is the first disk block in the allocation group. Only the first one (block 0 of the filesystem) is actually used; the other blocks are redundant information for <a href="../man8/xfs_repair.8.html"><strong>xfs_repair</strong>(8)</a> to use if the first superblock is damaged. Fields defined:</p>
      <dl class='dl-vertical'>
        <dt><strong>magicnum</strong></dt>
        <dd>
      <p>superblock magic number, 0x58465342 ('XFSB').</p>
        </dd>
        <dt><strong>blocksize</strong></dt>
        <dd>
      <p>filesystem block size in bytes.</p>
        </dd>
        <dt><strong>dblocks</strong></dt>
        <dd>
      <p>number of filesystem blocks present in the data subvolume.</p>
        </dd>
        <dt><strong>rblocks</strong></dt>
        <dd>
      <p>number of filesystem blocks present in the realtime subvolume.</p>
        </dd>
        <dt><strong>rextents</strong></dt>
        <dd>
      <p>number of realtime extents that <strong>rblocks</strong> contain.</p>
        </dd>
        <dt><strong>uuid</strong></dt>
        <dd>
      <p>unique identifier of the filesystem.</p>
        </dd>
        <dt><strong>logstart</strong></dt>
        <dd>
      <p>starting filesystem block number of the log (journal). If this value is 0 the log is "external".</p>
        </dd>
        <dt><strong>rootino</strong></dt>
        <dd>
      <p>root inode number.</p>
        </dd>
        <dt><strong>rbmino</strong></dt>
        <dd>
      <p>realtime bitmap inode number.</p>
        </dd>
        <dt><strong>rsumino</strong></dt>
        <dd>
      <p>realtime summary data inode number.</p>
        </dd>
        <dt><strong>rextsize</strong></dt>
        <dd>
      <p>realtime extent size in filesystem blocks.</p>
        </dd>
        <dt><strong>agblocks</strong></dt>
        <dd>
      <p>size of an allocation group in filesystem blocks.</p>
        </dd>
        <dt><strong>agcount</strong></dt>
        <dd>
      <p>number of allocation groups.</p>
        </dd>
        <dt><strong>rbmblocks</strong></dt>
        <dd>
      <p>number of realtime bitmap blocks.</p>
        </dd>
        <dt><strong>logblocks</strong></dt>
        <dd>
      <p>number of log blocks (filesystem blocks).</p>
        </dd>
        <dt><strong>versionnum</strong></dt>
        <dd>
      <p>filesystem version information. This value is currently 1, 2, 3, or 4 in the low 4 bits. If the low bits are 4 then the other bits have additional meanings. 1 is the original value. 2 means that attributes were used. 3 means that version 2 inodes (large link counts) were used. 4 is the bitmask version of the version number. In this case, the other bits are used as flags (0x0010: attributes were used, 0x0020: version 2 inodes were used, 0x0040: quotas were used, 0x0080: inode cluster alignment is in force, 0x0100: data stripe alignment is in force, 0x0200: the <strong>shared_vn</strong> field is used, 0x1000: unwritten extent tracking is on, 0x2000: version 2 directories are in use).</p>
        </dd>
        <dt><strong>sectsize</strong></dt>
        <dd>
      <p>sector size in bytes, currently always 512. This is the size of the superblock and the other header blocks.</p>
        </dd>
        <dt><strong>inodesize</strong></dt>
        <dd>
      <p>inode size in bytes.</p>
        </dd>
        <dt><strong>inopblock</strong></dt>
        <dd>
      <p>number of inodes per filesystem block.</p>
        </dd>
        <dt><strong>fname</strong></dt>
        <dd>
      <p>obsolete, filesystem name.</p>
        </dd>
        <dt><strong>fpack</strong></dt>
        <dd>
      <p>obsolete, filesystem pack name.</p>
        </dd>
        <dt><strong>blocklog</strong></dt>
        <dd>
      <p>log2 of <strong>blocksize</strong>.</p>
        </dd>
        <dt><strong>sectlog</strong></dt>
        <dd>
      <p>log2 of <strong>sectsize</strong>.</p>
        </dd>
        <dt><strong>inodelog</strong></dt>
        <dd>
      <p>log2 of <strong>inodesize</strong>.</p>
        </dd>
        <dt><strong>inopblog</strong></dt>
        <dd>
      <p>log2 of <strong>inopblock</strong>.</p>
        </dd>
        <dt><strong>agblklog</strong></dt>
        <dd>
      <p>log2 of <strong>agblocks</strong> (rounded up).</p>
        </dd>
        <dt><strong>rextslog</strong></dt>
        <dd>
      <p>log2 of <strong>rextents</strong>.</p>
        </dd>
        <dt><strong>inprogress</strong></dt>
        <dd>
      <p><a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> or <a href="../man8/xfs_copy.8.html"><strong>xfs_copy</strong>(8)</a> aborted before completing this filesystem.</p>
        </dd>
        <dt><strong>imax_pct</strong></dt>
        <dd>
      <p>maximum percentage of filesystem space used for inode blocks.</p>
        </dd>
        <dt><strong>icount</strong></dt>
        <dd>
      <p>number of allocated inodes.</p>
        </dd>
        <dt><strong>ifree</strong></dt>
        <dd>
      <p>number of allocated inodes that are not in use.</p>
        </dd>
        <dt><strong>fdblocks</strong></dt>
        <dd>
      <p>number of free data blocks.</p>
        </dd>
        <dt><strong>frextents</strong></dt>
        <dd>
      <p>number of free realtime extents.</p>
        </dd>
        <dt><strong>uquotino</strong></dt>
        <dd>
      <p>user quota inode number.</p>
        </dd>
        <dt><strong>pquotino</strong></dt>
        <dd>
      <p>project quota inode number; this is currently unused.</p>
        </dd>
        <dt><strong>qflags</strong></dt>
        <dd>
      <p>quota status flags (0x01: user quota accounting is on, 0x02: user quota limits are enforced, 0x04: quotacheck has been run on user quotas, 0x08: project quota accounting is on, 0x10: project quota limits are enforced, 0x20: quotacheck has been run on project quotas).</p>
        </dd>
        <dt><strong>flags</strong></dt>
        <dd>
      <p>random flags. 0x01: only read-only mounts are allowed.</p>
        </dd>
        <dt><strong>shared_vn</strong></dt>
        <dd>
      <p>shared version number (shared readonly filesystems).</p>
        </dd>
        <dt><strong>inoalignmt</strong></dt>
        <dd>
      <p>inode chunk alignment in filesystem blocks.</p>
        </dd>
        <dt><strong>unit</strong></dt>
        <dd>
      <p>stripe or RAID unit.</p>
        </dd>
        <dt><strong>width</strong></dt>
        <dd>
      <p>stripe or RAID width.</p>
        </dd>
        <dt><strong>dirblklog</strong></dt>
        <dd>
      <p>log2 of directory block size (filesystem blocks).</p>
        </dd>
      </dl>
    </dd>
    <dt><strong>symlink</strong></dt>
    <dd>
  <p>Symbolic link blocks are used only when the symbolic link value does not fit inside the inode. The block content is just the string value. Bytes past the logical end of the symbolic link value have arbitrary values.</p>
    </dd>
    <dt><strong>text</strong></dt>
    <dd>
  <p>User file blocks, and other blocks whose type is unknown, have this type for display purposes in <strong>xfs_db</strong>. The block data is displayed in two columns: Hexadecimal format and printable ASCII chars.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<p>Many messages can come from the <strong>check</strong> (<strong>blockget</strong>) command. If the filesystem is completely corrupt, a core dump might be produced instead of the message <em>device</em> <strong>is not a valid filesystem</strong></p>
<p class='spacer'>

<p>If the filesystem is very large (has many files) then <strong>check</strong> might run out of memory. In this case the message <strong>out of memory</strong> is printed.</p>
<p class='spacer'>

  <p>The following is a description of the most likely problems and the associated messages. Most of the diagnostics produced are only meaningful with an understanding of the structure of the filesystem.</p>
  <dl class='dl-vertical'>
    <dt><strong>agf_freeblks </strong><em>n</em><strong>, counted </strong><em>m</em><strong> in ag </strong><em>a</em></dt>
    <dd>
  <p>The freeblocks count in the allocation group header for allocation group <em>a</em> doesn't match the number of blocks counted free.</p>
    </dd>
    <dt><strong>agf_longest </strong><em>n</em><strong>, counted </strong><em>m</em><strong> in ag </strong><em>a</em></dt>
    <dd>
  <p>The longest free extent in the allocation group header for allocation group <em>a</em> doesn't match the longest free extent found in the allocation group.</p>
    </dd>
    <dt><strong>agi_count </strong><em>n</em><strong>, counted </strong><em>m</em><strong> in ag </strong><em>a</em></dt>
    <dd>
  <p>The allocated inode count in the allocation group header for allocation group <em>a</em> doesn't match the number of inodes counted in the allocation group.</p>
    </dd>
    <dt><strong>agi_freecount </strong><em>n</em><strong>, counted </strong><em>m</em><strong> in ag </strong><em>a</em></dt>
    <dd>
  <p>The free inode count in the allocation group header for allocation group <em>a</em> doesn't match the number of inodes counted free in the allocation group.</p>
    </dd>
    <dt><strong>block </strong><em>a/b</em><strong> expected inum 0 got </strong><em>i</em></dt>
    <dd>
  <p>The block number is specified as a pair (allocation group number, block in the allocation group). The block is used multiple times (shared), between multiple inodes. This message usually follows a message of the next type.</p>
    </dd>
    <dt><strong>block </strong><em>a/b</em><strong> expected type unknown got </strong><em>y</em></dt>
    <dd>
  <p>The block is used multiple times (shared).</p>
    </dd>
    <dt><strong>block </strong><em>a/b</em><strong> type unknown not expected</strong></dt>
    <dd>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a>, <a href="../man8/xfs_admin.8.html"><strong>xfs_admin</strong>(8)</a>, <a href="../man8/xfs_copy.8.html"><strong>xfs_copy</strong>(8)</a>, <a href="../man8/xfs_logprint.8.html"><strong>xfs_logprint</strong>(8)</a>, <a href="../man8/xfs_metadump.8.html"><strong>xfs_metadump</strong>(8)</a>, <a href="../man8/xfs_ncheck.8.html"><strong>xfs_ncheck</strong>(8)</a>, <a href="../man8/xfs_repair.8.html"><strong>xfs_repair</strong>(8)</a>, <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a>, <a href="../man2/chmod.2.html"><strong>chmod</strong>(2)</a>, <a href="../man2/mknod.2.html"><strong>mknod</strong>(2)</a>, <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a>, <a href="../man5/xfs.5.html"><strong>xfs</strong>(5)</a>.</p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="xfs_copy.8.html"><span aria-hidden="true">&larr;</span> xfs_copy.8: copy the contents of an XFS filesystem</a></li>
   <li class="next"><a href="xfs_estimate.8.html">xfs_estimate.8: estimate the space that an XFS filesystem will take <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
