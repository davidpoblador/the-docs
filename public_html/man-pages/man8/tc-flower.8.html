<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tc-flower: Flow based traffic control filter</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Flow based traffic control filter">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tc-flower<small> (8)</small></h1>
        <p class="lead">Flow based traffic control filter</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/tc-flower.8.html">
      <span itemprop="name">tc-flower: Flow based traffic control filter</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/iproute2/">
      <span itemprop="name">iproute2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/tc-flower.8.html">
      <span itemprop="name">tc-flower: Flow based traffic control filter</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>tc</strong> <strong>filter</strong> ... <strong>flower</strong> [  <em>MATCH_LIST</em> ] [  <strong>action</strong> <em>ACTION_SPEC</em> ] [  <strong>classid</strong> <em>CLASSID</em> ]</p><p><em>MATCH_LIST</em> := [ <em>MATCH_LIST</em> ] <em>MATCH</em></p><p><em>MATCH</em> := {  <strong>indev</strong> <em>ifname</em> |  <strong>skip_sw</strong> | <strong>skip_hw</strong>  | {  <strong>dst_mac</strong> | <strong>src_mac</strong> }  <em>mac_address</em> |  <strong>eth_type</strong> { <strong>ipv4</strong> | <strong>ipv6</strong> |  <em>ETH_TYPE</em> } |  <strong>ip_proto</strong> { <strong>tcp</strong> | <strong>udp</strong> |  <em>IP_PROTO</em> } | {  <strong>dst_ip</strong> | <strong>src_ip</strong> } {  <em>ipv4_address</em> | <em>ipv6_address</em> } | {  <strong>dst_port</strong> | <strong>src_port</strong> }  <em>port_number</em> }</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>flower</strong> filter matches flows to the set of keys specified and assigns an arbitrarily chosen class ID to packets belonging to them. Additionally (or alternatively) an action from the generic action framework may be called.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>action</strong><em> ACTION_SPEC</em></p>
  </dt>
  <dd>
    <p>Apply an action from the generic actions framework on matching packets.</p>
  </dd>
  <dt>
    <p><strong>classid</strong><em> CLASSID</em></p>
  </dt>
  <dd>
    <p>Specify a class to pass matching packets on to. <em>CLASSID</em> is in the form <strong>X</strong>:<strong>Y</strong>, while <strong>X</strong> and <strong>Y</strong> are interpreted as numbers in hexadecimal format.</p>
  </dd>
  <dt>
    <p><strong>indev</strong><em> ifname</em></p>
  </dt>
  <dd>
    <p>Match on incoming interface name. Obviously this makes sense only for forwarded flows. <em>ifname</em> is the name of an interface which must exist at the time of <strong>tc</strong> invocation.</p>
  </dd>
  <dt>
    <p><strong>skip_sw</strong></p>
  </dt>
  <dd>
    <p>Do not process filter by software. If hardware has no offload support for this filter, or TC offload is not enabled for the interface, operation will fail.</p>
  </dd>
  <dt>
    <p><strong>skip_hw</strong></p>
  </dt>
  <dd>
    <p>Do not process filter by hardware.</p>
  </dd>
  <dt>
    <p><strong>dst_mac</strong><em> mac_address</em> <strong>src_mac</strong><em> mac_address</em></p>
  </dt>
  <dd>
    <p>Match on source or destination MAC address.</p>
  </dd>
  <dt>
    <p><strong>eth_type</strong><em> ETH_TYPE</em></p>
  </dt>
  <dd>
    <p>Match on layer three protocol. <em>ETH_TYPE</em> may be either <strong>ipv4</strong>,<strong>ipv6</strong> or an unsigned 16bit value in hexadecimal format.</p>
  </dd>
  <dt>
    <p><strong>ip_proto</strong><em> IP_PROTO</em></p>
  </dt>
  <dd>
    <p>Match on layer four protocol. <em>IP_PROTO</em> may be either <strong>tcp</strong>,<strong>udp</strong> or an unsigned 8bit value in hexadecimal format.</p>
  </dd>
  <dt>
    <p><strong>dst_ip</strong><em> ADDRESS</em> <strong>src_ip</strong><em> ADDRESS</em></p>
  </dt>
  <dd>
    <p>Match on source or destination IP address. <em>ADDRESS</em> must be a valid IPv4 or IPv6 address, depending on <strong>ether_type</strong>, which has to be specified in beforehand.</p>
  </dd>
  <dt>
    <p><strong>dst_port</strong><em> NUMBER</em> <strong>src_port</strong><em> NUMBER</em></p>
  </dt>
  <dd>
    <p>Match on layer 4 protocol source or destination port number. Only available for <strong>ip_proto</strong> values <strong>udp</strong> and <strong>tcp</strong>, which has to be specified in beforehand.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>As stated above where applicable, matches of a certain layer implicitly depend on the matches of the next lower layer. Precisely, layer one and two matches ( <strong>indev</strong>,<strong>dst_mac</strong>,<strong>src_mac</strong> and <strong>eth_type</strong>) have no dependency, layer three matches ( <strong>ip_proto</strong>,<strong>dst_ip</strong> and <strong>src_ip</strong>) require <strong>eth_type</strong> being set to either <strong>ipv4</strong> or <strong>ipv6</strong>, and finally layer four matches ( <strong>dst_port</strong> and <strong>src_port</strong>) depend on <strong>ip_proto</strong> being set to either <strong>tcp</strong> or <strong>udp</strong>.</p><p>There can be only used one mask per one prio. If user needs to specify different mask, he has to use different prio.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tc-flower&hellip;</h2>
        <div class="sectioncontent">
<p><strong>tc</strong>(8), <a href="../man8/tc-flow.8.html"><strong>tc-flow</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tc-flow.8.html"><span aria-hidden="true">&larr;</span> tc-flow.8: Flow based traffic control filter</a></li>
   <li class="next"><a href="tc-fq.8.html">tc-fq.8: Fair queue traffic policing <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
