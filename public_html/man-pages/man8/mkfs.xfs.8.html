<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mkfs.xfs: Construct an xfs filesystem</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Construct an xfs filesystem">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mkfs.xfs<small> (8)</small></h1>
        <p class="lead">Construct an xfs filesystem</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mkfs.xfs.8.html">
      <span itemprop="name">mkfs.xfs: Construct an xfs filesystem</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xfsprogs/">
      <span itemprop="name">xfsprogs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mkfs.xfs.8.html">
      <span itemprop="name">mkfs.xfs: Construct an xfs filesystem</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mkfs.xfs</strong> [ <strong>-b</strong> <em>block_size</em> ] [ <strong>-m</strong> <em>global_metadata_options</em> ] [ <strong>-d</strong> <em>data_section_options</em> ] [ <strong>-f</strong> ] [ <strong>-i</strong> <em>inode_options</em> ] [ <strong>-l</strong> <em>log_section_options</em> ] [ <strong>-n</strong> <em>naming_options</em> ] [ <strong>-p</strong> <em>protofile</em> ] [ <strong>-q</strong> ] [ <strong>-r</strong> <em>realtime_section_options</em> ] [ <strong>-s</strong> <em>sector_size</em> ] [ <strong>-L</strong> <em>label</em> ] [ <strong>-N</strong> ] [ <strong>-K</strong> ] <em>device</em></p><p><strong>mkfs.xfs -V</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mkfs.xfs</strong> constructs an XFS filesystem by writing on a special file using the values found in the arguments of the command line. It is invoked automatically by <a href="../man8/mkfs.8.html"><strong>mkfs</strong>(8)</a> when it is given the <strong>-t xfs</strong> option.</p><p>In its simplest (and most commonly used form), the size of the filesystem is determined from the disk driver.  As an example, to make a filesystem with an internal log on the first partition on the first SCSI disk, use:</p><ul>
<li><p><strong>mkfs.xfs /dev/sda1</strong></p></li>
</ul><p>The metadata log can be placed on another device to reduce the number of disk seeks.  To create a filesystem on the first partition on the first SCSI disk with a 10000 block log located on the first partition on the second SCSI disk, use:</p><p><strong>mkfs.xfs&nbsp;-l&nbsp;logdev=/dev/sdb1,size=10000b /dev/sda1</strong></p><p>Each of the <em>option</em> elements in the argument list above can be given as multiple comma-separated suboptions if multiple suboptions apply to the same option. Equivalently, each main option can be given multiple times with different suboptions. For example, <strong>-l internal,size=10000b</strong> and <strong>-l internal -l size=10000b</strong> are equivalent.</p><p>In the descriptions below, sizes are given in sectors, bytes, blocks, kilobytes, megabytes, gigabytes, etc. Sizes are treated as hexadecimal if prefixed by 0x or 0X, octal if prefixed by 0, or decimal otherwise. The following lists possible multiplication suffixes:</p><p><strong>s</strong>&nbsp;-&nbsp;multiply by sector size (default = 512, see <strong>-s</strong> option below). <strong>b</strong>&nbsp;-&nbsp;multiply by filesystem block size (default = 4K, see <strong>-b</strong> option below). <strong>k</strong>&nbsp;-&nbsp;multiply by one kilobyte (1,024 bytes). <strong>m</strong>&nbsp;-&nbsp;multiply by one megabyte (1,048,576 bytes). <strong>g</strong>&nbsp;-&nbsp;multiply by one gigabyte (1,073,741,824 bytes). <strong>t</strong>&nbsp;-&nbsp;multiply by one terabyte (1,099,511,627,776 bytes). <strong>p</strong>&nbsp;-&nbsp;multiply by one petabyte (1,024 terabytes). <strong>e</strong>&nbsp;-&nbsp;multiply by one exabyte (1,048,576 terabytes).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-b</strong><em> block_size_options</em></p>
  </dt>
  <dd>
    <p>This option specifies the fundamental block size of the filesystem. The valid <em>block_size_options</em> are: <strong>log=</strong><em>value</em> or <strong>size=</strong><em>value</em> and only one can be supplied. The block size is specified either as a base two logarithm value with <strong>log=</strong>, or in bytes with <strong>size=</strong>. The default value is 4096 bytes (4 KiB), the minimum is 512, and the maximum is 65536 (64 KiB). Although <strong>mkfs.xfs</strong> will accept any of these values and create a valid filesystem, XFS on Linux can only mount filesystems with pagesize or smaller blocks.</p>
  </dd>
  <dt>
    <p><strong>-m</strong><em> global_metadata_options</em></p>
  </dt>
  <dd>
    <p>These options specify metadata format options that either apply to the entire filesystem or aren't easily characterised by a specific functionality group. The valid <em>global_metadata_options</em> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>crc=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to create a filesystem which maintains and checks CRC information in all metadata objects on disk. The value is either 0 to disable the feature, or 1 to enable the use of CRCs.</p><ul>
<li><p>CRCs enable enhanced error detection due to hardware issues, whilst the format changes also improves crash recovery algorithms and the ability of various tools to validate and repair metadata corruptions when they are found.  The CRC algorithm used is CRC32c, so the overhead is dependent on CPU architecture as some CPUs have hardware acceleration of this algorithm.  Typically the overhead of calculating and checking the CRCs is not noticeable in normal operation.</p></li><li><p>By default, <strong>mkfs.xfs</strong> will enable metadata CRCs.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>finobt=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This option enables the use of a separate free inode btree index in each allocation group. The value is either 0 to disable the feature, or 1 to create a free inode btree in each allocation group.</p><ul>
<li><p>The free inode btree mirrors the existing allocated inode btree index which indexes both used and free inodes. The free inode btree does not index used inodes, allowing faster, more consistent inode allocation performance as filesystems age.</p></li><li><p>By default, <strong>mkfs.xfs</strong> will create free inode btrees for filesystems created with the (default) <strong>-m crc=1</strong> option set. When the option <strong>-m crc=0</strong> is used, the free inode btree feature is not supported and is disabled.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>uuid=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>Use the given value as the filesystem UUID for the newly created filesystem. The default is to generate a random UUID.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-d</strong><em> data_section_options</em></p>
  </dt>
  <dd>
    <p>These options specify the location, size, and other parameters of the data section of the filesystem. The valid <em>data_section_options</em> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>agcount=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the number of allocation groups. The data section of the filesystem is divided into allocation groups to improve the performance of XFS. More allocation groups imply that more parallelism can be achieved when allocating blocks and inodes. The minimum allocation group size is 16 MiB; the maximum size is just under 1 TiB. The data section of the filesystem is divided into <em>value</em> allocation groups (default value is scaled automatically based on the underlying device size).</p>
  </dd>
  <dt>
    <p><strong>agsize=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is an alternative to using the <strong>agcount</strong> suboption. The <em>value</em> is the desired size of the allocation group expressed in bytes (usually using the <strong>m</strong> or <strong>g</strong> suffixes). This value must be a multiple of the filesystem block size, and must be at least 16MiB, and no more than 1TiB, and may be automatically adjusted to properly align with the stripe geometry. The <strong>agcount</strong> and <strong>agsize</strong> suboptions are mutually exclusive.</p>
  </dd>
  <dt>
    <p><strong>name=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This can be used to specify the name of the special file containing the filesystem. In this case, the log section must be specified as <strong>internal</strong> (with a size, see the <strong>-l</strong> option below) and there can be no real-time section.</p>
  </dd>
  <dt>
    <p><strong>file[=</strong><em>value</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>This is used to specify that the file given by the <strong>name</strong> suboption is a regular file. The <em>value</em> is either 0 or 1, with 1 signifying that the file is regular. This suboption is used only to make a filesystem image. If the <em>value</em> is omitted then 1 is assumed.</p>
  </dd>
  <dt>
    <p><strong>size=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the size of the data section. This suboption is required if <strong>-d file[=1]</strong> is given. Otherwise, it is only needed if the filesystem should occupy less space than the size of the special file.</p>
  </dd>
  <dt>
    <p><strong>sunit=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the stripe unit for a RAID device or a logical volume. The <em>value</em> has to be specified in 512-byte block units. Use the <strong>su</strong> suboption to specify the stripe unit size in bytes. This suboption ensures that data allocations will be stripe unit aligned when the current end of file is being extended and the file size is larger than 512KiB. Also inode allocations and the internal log will be stripe unit aligned.</p>
  </dd>
  <dt>
    <p><strong>su=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is an alternative to using <strong>sunit.</strong> The <strong>su</strong> suboption is used to specify the stripe unit for a RAID device or a striped logical volume. The <em>value</em> has to be specified in bytes, (usually using the <strong>m</strong> or <strong>g</strong> suffixes). This <em>value</em> must be a multiple of the filesystem block size.</p>
  </dd>
  <dt>
    <p><strong>swidth=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the stripe width for a RAID device or a striped logical volume. The <em>value</em> has to be specified in 512-byte block units. Use the <strong>sw</strong> suboption to specify the stripe width size in bytes. This suboption is required if <strong>-d sunit</strong> has been specified and it has to be a multiple of the <strong>-d sunit</strong> suboption.</p>
  </dd>
  <dt>
    <p><strong>sw=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>suboption is an alternative to using <strong>swidth.</strong> The <strong>sw</strong> suboption is used to specify the stripe width for a RAID device or striped logical volume. The <em>value</em> is expressed as a multiplier of the stripe unit, usually the same as the number of stripe members in the logical volume configuration, or data disks in a RAID device.</p><ul>
<li><p>When a filesystem is created on a logical volume device, <strong>mkfs.xfs</strong> will automatically query the logical volume for appropriate <strong>sunit</strong> and <strong>swidth</strong> values.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>noalign</strong></p>
  </dt>
  <dd>
    <p>This option disables automatic geometry detection and creates the filesystem without stripe geometry alignment even if the underlying storage device provides this information.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>Force overwrite when an existing filesystem is detected on the device. By default, <strong>mkfs.xfs</strong> will not write to the device if it suspects that there is a filesystem or partition table on the device already.</p>
  </dd>
  <dt>
    <p><strong>-i</strong><em> inode_options</em></p>
  </dt>
  <dd>
    <p>This option specifies the inode size of the filesystem, and other inode allocation parameters. The XFS inode contains a fixed-size part and a variable-size part. The variable-size part, whose size is affected by this option, can contain: directory data, for small directories; attribute data, for small attribute sets; symbolic link data, for small symbolic links; the extent list for the file, for files with a small number of extents; and the root of a tree describing the location of extents for the file, for files with a large number of extents.</p><ul>
<li><p>The valid <em>inode_options</em> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>size=</strong><em>value</em><strong> | log=</strong><em>value</em><strong> | perblock=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>The inode size is specified either as a <em>value</em> in bytes with <strong>size=</strong>, a base two logarithm <em>value</em> with <strong>log=</strong>, or as the number fitting in a filesystem block with <strong>perblock=</strong>. The minimum (and default) <em>value</em> is 256 bytes. The maximum <em>value</em> is 2048 (2 KiB) subject to the restriction that the inode size cannot exceed one half of the filesystem block size.</p><ul>
<li><p>XFS uses 64-bit inode numbers internally; however, the number of significant bits in an inode number is affected by filesystem geometry.  In practice, filesystem size and inode size are the predominant factors. The Linux kernel (on 32 bit hardware platforms) and most applications cannot currently handle inode numbers greater than 32 significant bits, so if no inode size is given on the command line, <strong>mkfs.xfs</strong> will attempt to choose a size such that inode numbers will be &lt; 32 bits.  If an inode size is specified, or if a filesystem is sufficiently large, <strong>mkfs.xfs</strong> will warn if this will create inode numbers &gt; 32 significant bits.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>maxpct=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This specifies the maximum percentage of space in the filesystem that can be allocated to inodes. The default <em>value</em> is 25% for filesystems under 1TB, 5% for filesystems under 50TB and 1% for filesystems over 50TB.</p><ul>
<li><p>In the default inode allocation mode, inode blocks are chosen such that inode numbers will not exceed 32 bits, which restricts the inode blocks to the lower portion of the filesystem. The data block allocator will avoid these low blocks to accommodate the specified maxpct, so a high value may result in a filesystem with nothing but inodes in a significant portion of the lower blocks of the filesystem. (This restriction is not present when the filesystem is mounted with the <em>inode64</em> option on 64-bit platforms).</p></li><li><p>Setting the value to 0 means that essentially all of the filesystem can become inode blocks, subject to inode32 restrictions.</p></li><li><p>This value can be modified with <a href="../man8/xfs_growfs.8.html"><strong>xfs_growfs</strong>(8)</a></em>.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>align[=</strong><em>value</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>This is used to specify that inode allocation is or is not aligned. The <em>value</em> is either 0 or 1, with 1 signifying that inodes are allocated aligned. If the <em>value</em> is omitted, 1 is assumed. The default is that inodes are aligned. Aligned inode access is normally more efficient than unaligned access; alignment must be established at the time the filesystem is created, since inodes are allocated at that time. This option can be used to turn off inode alignment when the filesystem needs to be mountable by a version of IRIX that does not have the inode alignment feature (any release of IRIX before 6.2, and IRIX 6.2 without XFS patches).</p>
  </dd>
  <dt>
    <p><strong>attr=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the version of extended attribute inline allocation policy to be used.  By default, this is 2, which uses an efficient algorithm for managing the available inline inode space between attribute and extent data.</p><ul>
<li><p>The previous version 1, which has fixed regions for attribute and extent data, is kept for backwards compatibility with kernels older than version 2.6.16.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>projid32bit[=</strong><em>value</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>This is used to enable 32bit quota project identifiers. The <em>value</em> is either 0 or 1, with 1 signifying that 32bit projid are to be enabled. If the value is omitted, 1 is assumed.  (This default changed in release version 3.2.0.)</p>
  </dd>
  <dt>
    <p><strong>sparse[=</strong><em>value</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Enable sparse inode chunk allocation. The <em>value</em> is either 0 or 1, with 1 signifying that sparse allocation is enabled. If the value is omitted, 1 is assumed. Sparse inode allocation is disabled by default. This feature is only available for filesystems formatted with <strong>-m crc=1.</strong></p><ul>
<li><p>When enabled, sparse inode allocation allows the filesystem to allocate smaller than the standard 64-inode chunk when free space is severely limited. This feature is useful for filesystems that might fragment free space over time such that no free extents are large enough to accommodate a chunk of 64 inodes. Without this feature enabled, inode allocations can fail with out of space errors under severe fragmented free space conditions.</p></li>
</ul>
  </dd>

</dl>
</li>
</ul>
  </dd>
  <dt>
    <p><strong>-l</strong><em> log_section_options</em></p>
  </dt>
  <dd>
    <p>These options specify the location, size, and other parameters of the log section of the filesystem. The valid <em>log_section_options</em> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>internal[=</strong><em>value</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>This is used to specify that the log section is a piece of the data section instead of being another device or logical volume. The <em>value</em> is either 0 or 1, with 1 signifying that the log is internal. If the <em>value</em> is omitted, 1 is assumed.</p>
  </dd>
  <dt>
    <p><strong>logdev=</strong><em>device</em></p>
  </dt>
  <dd>
    <p>This is used to specify that the log section should reside on the <em>device</em> separate from the data section. The <strong>internal=1</strong> and <strong>logdev</strong> options are mutually exclusive.</p>
  </dd>
  <dt>
    <p><strong>size=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the size of the log section.</p><ul>
<li><p>If the log is contained within the data section and <strong>size</strong> isn't specified, <strong>mkfs.xfs</strong> will try to select a suitable log size depending on the size of the filesystem.  The actual logsize depends on the filesystem block size and the directory block size.</p></li><li><p>Otherwise, the <strong>size</strong> suboption is only needed if the log section of the filesystem should occupy less space than the size of the special file. The <em>value</em> is specified in bytes or blocks, with a <strong>b</strong> suffix meaning multiplication by the filesystem block size, as described above. The overriding minimum value for size is 512 blocks. With some combinations of filesystem block size, inode size, and directory block size, the minimum log size is larger than 512 blocks.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>version=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This specifies the version of the log. The current default is 2, which allows for larger log buffer sizes, as well as supporting stripe-aligned log writes (see the sunit and su options, below).</p><ul>
<li><p>The previous version 1, which is limited to 32k log buffers and does not support stripe-aligned writes, is kept for backwards compatibility with very old 2.4 kernels.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>sunit=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This specifies the alignment to be used for log writes. The <em>value</em> has to be specified in 512-byte block units. Use the <strong>su</strong> suboption to specify the log stripe unit size in bytes. Log writes will be aligned on this boundary, and rounded up to this boundary. This gives major improvements in performance on some configurations such as software RAID5 when the <strong>sunit</strong> is specified as the filesystem block size. The equivalent byte value must be a multiple of the filesystem block size. Version 2 logs are automatically selected if the log <strong>sunit</strong> suboption is specified.</p><ul>
<li><p>The <strong>su</strong> suboption is an alternative to using <strong>sunit.</strong></p></li>
</ul>
  </dd>
  <dt>
    <p><strong>su=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the log stripe. The <em>value</em> has to be specified in bytes, (usually using the <strong>s</strong> or <strong>b</strong> suffixes). This value must be a multiple of the filesystem block size. Version 2 logs are automatically selected if the log <strong>su</strong> suboption is specified.</p>
  </dd>
  <dt>
    <p><strong>lazy-count=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This changes the method of logging various persistent counters in the superblock.  Under metadata intensive workloads, these counters are updated and logged frequently enough that the superblock updates become a serialization point in the filesystem. The <em>value</em> can be either 0 or 1.</p><ul>
<li><p>With <strong>lazy-count=1</strong>, the superblock is not modified or logged on every change of the persistent counters. Instead, enough information is kept in other parts of the filesystem to be able to maintain the persistent counter values without needed to keep them in the superblock. This gives significant improvements in performance on some configurations. The default <em>value</em> is 1 (on) so you must specify <strong>lazy-count=0</strong> if you want to disable this feature for older kernels which don't support it.</p></li>
</ul>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-n</strong><em> naming_options</em></p>
  </dt>
  <dd>
    <p>These options specify the version and size parameters for the naming (directory) area of the filesystem. The valid <em>naming_options</em> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>size=</strong><em>value</em><strong> | log=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>The block size is specified either as a <em>value</em> in bytes with <strong>size=</strong>, or as a base two logarithm <em>value</em> with <strong>log=</strong>. The block size must be a power of 2 and cannot be less than the filesystem block size. The default size <em>value</em> for version 2 directories is 4096 bytes (4 KiB), unless the filesystem block size is larger than 4096, in which case the default <em>value</em> is the filesystem block size. For version 1 directories the block size is the same as the filesystem block size.</p>
  </dd>
  <dt>
    <p><strong>version=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>The naming (directory) version <em>value</em> can be either 2 or 'ci', defaulting to 2 if unspecified. With version 2 directories, the directory block size can be any power of 2 size from the filesystem block size up to 65536.</p><ul>
<li><p>The <strong>version=ci</strong> option enables ASCII only case-insensitive filename lookup and version 2 directories. Filenames are case-preserving, that is, the names are stored in directories using the case they were created with.</p></li><li><p>Note: Version 1 directories are not supported.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>ftype=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This feature allows the inode type to be stored in the directory structure so that the <a href="../man3/readdir.3.html"><strong>readdir</strong>(3)</a> and <a href="../man2/getdents.2.html"><strong>getdents</strong>(2)</a> do not need to look up the inode to determine the inode type.</p><p>The <em>value</em> is either 0 or 1, with 1 signifiying that filetype information will be stored in the directory structure. The default value is 0.</p><p>When CRCs are enabled via <strong>-m crc=1,</strong> the ftype functionality is always enabled. This feature can not be turned off for such filesystem configurations.</p><ul>
<li></li>
</ul>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-p</strong><em> protofile</em></p>
  </dt>
  <dd>
    <p>If the optional <strong>-p</strong><em> protofile</em> argument is given, <strong>mkfs.xfs</strong> uses <em>protofile</em> as a prototype file and takes its directions from that file. The blocks and inodes specifiers in the <em>protofile</em> are provided for backwards compatibility, but are otherwise unused. The syntax of the protofile is defined by a number of tokens separated by spaces or newlines. Note that the line numbers are not part of the syntax but are meant to help you in the following discussion of the file contents.</p>
<pre>

\f71       /stand/\f1\f2diskboot\f1\f7
2       4872 110
3       d--777 3 1
4       usr     d--777 3 1
5       sh      ---755 3 1 /bin/sh
6       ken     d--755 6 1
7               $
8       b0      b--644 3 1 0 0
9       c0      c--644 3 1 0 0
10      fifo    p--644 3 1
11      slink   l--644 3 1 /a/symbolic/link
12      :  This is a comment line
13      $
14      $\f1
</pre>
<ul>
<li><p>Line 1 is a dummy string. (It was formerly the bootfilename.) It is present for backward compatibility; boot blocks are not used on SGI systems.</p></li><li><p>Note that some string of characters must be present as the first line of the proto file to cause it to be parsed correctly; the value of this string is immaterial since it is ignored.</p></li><li><p>Line 2 contains two numeric values (formerly the numbers of blocks and inodes). These are also merely for backward compatibility: two numeric values must appear at this point for the proto file to be correctly parsed, but their values are immaterial since they are ignored.</p></li><li><p>The lines 3 through 11 specify the files and directories you want to include in this filesystem. Line 3 defines the root directory. Other directories and files that you want in the filesystem are indicated by lines 4 through 6 and lines 8 through 10. Line 11 contains symbolic link syntax.</p></li><li><p>Notice the dollar sign (<strong>$</strong>) syntax on line 7. This syntax directs the <strong>mkfs.xfs</strong> command to terminate the branch of the filesystem it is currently on and then continue from the directory specified by the next line, in this case line 8. It must be the last character on a line. The colon on line 12 introduces a comment; all characters up until the following newline are ignored. Note that this means you cannot have a file in a prototype file whose name contains a colon. The <strong>$</strong> on lines 13 and 14 end the process, since no additional specifications follow.</p></li><li><p>File specifications provide the following:</p></li><li>
<pre>
  * file mode
</pre>

<pre>
  * user ID
</pre>

<pre>
  * group ID
</pre>

<pre>
  * the file's beginning contents
</pre>
</li>
</ul>
  </dd>

</dl>
<ul>
<li><p>A 6-character string defines the mode for a file. The first character of this string defines the file type. The character range for this first character is <strong>-bcdpl.</strong> A file may be a regular file, a block special file, a character special file, directory files, named pipes (first-in, first out files), and symbolic links. The second character of the mode string is used to specify setuserID mode, in which case it is <strong>u</strong>. If setuserID mode is not specified, the second character is <strong>-</strong>. The third character of the mode string is used to specify the setgroupID mode, in which case it is <strong>g</strong>. If setgroupID mode is not specified, the third character is <strong>-</strong>. The remaining characters of the mode string are a three digit octal number. This octal number defines the owner, group, and other read, write, and execute permissions for the file, respectively. For more information on file permissions, see the <strong>chmod</strong>(1) command.</p></li><li><p>Following the mode character string are two decimal number tokens that specify the user and group IDs of the file's owner.</p></li><li><p>In a regular file, the next token specifies the pathname from which the contents and size of the file are copied. In a block or character special file, the next token are two decimal numbers that specify the major and minor device numbers. When a file is a symbolic link, the next token specifies the contents of the link.</p><p>When the file is a directory, the <strong>mkfs.xfs</strong> command creates the entries <strong>dot</strong> (.) and <strong>dot-dot</strong> (..) and then reads the list of names and file specifications in a recursive manner for all of the entries in the directory. A scan of the protofile is always terminated with the dollar ( <strong>$</strong> ) token.</p></li>
</ul>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>Quiet option. Normally <strong>mkfs.xfs</strong> prints the parameters of the filesystem to be constructed; the <strong>-q</strong> flag suppresses this.</p>
  </dd>
  <dt>
    <p><strong>-r</strong><em> realtime_section_options</em></p>
  </dt>
  <dd>
    <p>These options specify the location, size, and other parameters of the real-time section of the filesystem. The valid <em>realtime_section_options</em> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>rtdev=</strong><em>device</em></p>
  </dt>
  <dd>
    <p>This is used to specify the <em>device</em> which should contain the real-time section of the filesystem. The suboption value is the name of a block device.</p>
  </dd>
  <dt>
    <p><strong>extsize=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the size of the blocks in the real-time section of the filesystem. This <em>value</em> must be a multiple of the filesystem block size. The minimum allowed size is the filesystem block size or 4 KiB (whichever is larger); the default size is the stripe width for striped volumes or 64 KiB for non-striped volumes; the maximum allowed size is 1 GiB. The real-time extent size should be carefully chosen to match the parameters of the physical media used.</p>
  </dd>
  <dt>
    <p><strong>size=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>This is used to specify the size of the real-time section. This suboption is only needed if the real-time section of the filesystem should occupy less space than the size of the partition or logical volume containing the section.</p>
  </dd>
  <dt>
    <p><strong>noalign</strong></p>
  </dt>
  <dd>
    <p>This option disables stripe size detection, enforcing a realtime device with no stripe geometry.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-s</strong><em> sector_size</em></p>
  </dt>
  <dd>
    <p>This option specifies the fundamental sector size of the filesystem. The <em>sector_size</em> is specified either as a value in bytes with <strong>size=</strong><em>value</em> or as a base two logarithm value with <strong>log=</strong><em>value.</em> The default <em>sector_size</em> is 512 bytes. The minimum value for sector size is 512; the maximum is 32768 (32 KiB). The <em>sector_size</em> must be a power of 2 size and cannot be made larger than the filesystem block size.</p>
  </dd>
  <dt>
    <p><strong>-L</strong><em> label</em></p>
  </dt>
  <dd>
    <p>Set the filesystem <em>label</em>. XFS filesystem labels can be at most 12 characters long; if <em>label</em> is longer than 12 characters, <strong>mkfs.xfs</strong> will not proceed with creating the filesystem.  Refer to the <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> and <a href="../man8/xfs_admin.8.html"><strong>xfs_admin</strong>(8)</a> manual entries for additional information.</p>
  </dd>
  <dt>
    <p><strong>-N</strong></p>
  </dt>
  <dd>
    <p>Causes the file system parameters to be printed out without really creating the file system.</p>
  </dd>
  <dt>
    <p><strong>-K</strong></p>
  </dt>
  <dd>
    <p>Do not attempt to discard blocks at mkfs time.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Prints the version number and exits.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mkfs.xfs&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/xfs.5.html"><strong>xfs</strong>(5)</a>, <a href="../man8/mkfs.8.html"><strong>mkfs</strong>(8)</a>, <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a>, <strong>xfs_info</strong>(8), <a href="../man8/xfs_admin.8.html"><strong>xfs_admin</strong>(8)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>With a prototype file, it is not possible to specify hard links.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mkfs.minix.8.html"><span aria-hidden="true">&larr;</span> mkfs.minix.8: Make a minix filesystem</a></li>
   <li class="next"><a href="mkswap.8.html">mkswap.8: Set up a linux swap area <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
