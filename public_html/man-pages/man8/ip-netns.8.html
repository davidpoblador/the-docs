<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ip-netns: Process network namespace management</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Process network namespace management">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ip-netns (8) manual">
  <meta name="twitter:description" content="Process network namespace management">
  <meta name="twitter:image" content="https://www.carta.tech/images/iproute2-ip-netns-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ip-netns.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ip-netns (8) manual" />
  <meta property="og:description" content="Process network namespace management" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/iproute2-ip-netns-8.png" />

</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ip-netns<small> (8)</small></h1>
        <p class="lead">Process network namespace management</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ip-netns.8.html">
      <span itemprop="name">ip-netns: Process network namespace management</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/iproute2/">
      <span itemprop="name">iproute2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ip-netns.8.html">
      <span itemprop="name">ip-netns: Process network namespace management</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ip</strong> [ <em>OPTIONS</em> ] <strong>netns</strong>  { <em>COMMAND</em> |  <strong>help</strong> }</p><p><strong>ip netns</strong> [ <strong>list</strong> ]</p><p><strong>ip netns add</strong> <em>NETNSNAME</em></p><p><strong>ip [-all] netns del</strong> [ <em>NETNSNAME</em> ]</p><p><strong>ip netns set</strong> <em>NETNSNAME NETNSID</em></p><p><strong>ip netns identify</strong> [ <em>PID</em> ]</p><p><strong>ip netns pids</strong> <em>NETNSNAME</em></p><p><strong>ip [-all] netns exec </strong> [ <em>NETNSNAME</em> ] <em>command</em>...</p><p><strong>ip netns monitor</strong></p><p><strong>ip netns list-id</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A network namespace is logically another copy of the network stack, with its own routes, firewall rules, and network devices.</p><p>By default a process inherits its network namespace from its parent. Initially all the processes share the same default network namespace from the init process.</p><p>By convention a named network namespace is an object at <strong>/var/run/netns/</strong>NAME that can be opened. The file descriptor resulting from opening <strong>/var/run/netns/</strong>NAME refers to the specified network namespace. Holding that file descriptor open keeps the network namespace alive. The file descriptor can be used with the <a href="../man2/setns.2.html"><strong>setns</strong>(2)</a></strong> system call to change the network namespace associated with a task.</p><p>For applications that are aware of network namespaces, the convention is to look for global network configuration files first in <strong>/etc/netns/</strong>NAME<strong>/</strong> then in <strong>/etc/</strong>. For example, if you want a different version of <strong>/etc/resolv.conf</strong> for a network namespace used to isolate your vpn you would name it <strong>/etc/netns/myvpn/resolv.conf.</strong></p><p><strong>ip netns exec</strong> automates handling of this configuration, file convention for network namespace unaware applications, by creating a mount namespace and bind mounting all of the per network namespace configure files into their traditional location in /etc.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ip netns list - show all of the named network namespaces</strong></p>
  </dt>
  <dd>
    <p>This command displays all of the network namespaces in /var/run/netns</p>
  </dd>
  <dt>
    <p><strong>ip netns add NAME - create a new named network namespace</strong></p>
  </dt>
  <dd>
    <p>If NAME is available in /var/run/netns/ this command creates a new network namespace and assigns NAME.</p>
  </dd>
  <dt>
    <p><strong>ip [-all] netns delete [ NAME ] - delete the name of a network namespace(s)</strong></p>
  </dt>
  <dd>
    <p>If NAME is present in /var/run/netns it is umounted and the mount point is removed. If this is the last user of the network namespace the network namespace will be freed and all physical devices will be moved to the default one, otherwise the network namespace persists until it has no more users. ip netns delete may fail if the mount point is in use in another mount namespace.</p><p>If <strong>-all</strong> option was specified then all the network namespace names will be removed.</p><p>It is possible to lose the physical device when it was moved to netns and then this netns was deleted with a running process:</p><p>$ ip netns add net0</p><p>$ ip link set dev eth0 netns net0</p><p>$ ip netns exec net0 SOME_PROCESS_IN_BACKGROUND</p><p>$ ip netns del net0</p><p>and eth0 will appear in the default netns only after SOME_PROCESS_IN_BACKGROUND will exit or will be killed. To prevent this the processes running in net0 should be killed before deleting the netns:</p><p>$ ip netns pids net0 | xargs kill</p><p>$ ip netns del net0</p>
  </dd>
  <dt>
    <p><strong>ip netns set NAME NETNSID - assign an id to a peer network namespace</strong></p>
  </dt>
  <dd>
    <p>This command assigns a id to a peer network namespace. This id is valid only in the current network namespace. This id will be used by the kernel in some netlink messages. If no id is assigned when the kernel needs it, it will be automatically assigned by the kernel. Once it is assigned, it's not possible to change it.</p>
  </dd>
  <dt>
    <p><strong>ip netns identify [PID] - Report network namespaces names for process</strong></p>
  </dt>
  <dd>
    <p>This command walks through /var/run/netns and finds all the network namespace names for network namespace of the specified process, if PID is not specified then the current process will be used.</p>
  </dd>
  <dt>
    <p><strong>ip netns pids NAME - Report processes in the named network namespace</strong></p>
  </dt>
  <dd>
    <p>This command walks through proc and finds all of the process who have the named network namespace as their primary network namespace.</p>
  </dd>
  <dt>
    <p><strong>ip [-all] netns exec [ NAME ] cmd ... - Run cmd in the named network namespace</strong></p>
  </dt>
  <dd>
    <p>This command allows applications that are network namespace unaware to be run in something other than the default network namespace with all of the configuration for the specified network namespace appearing in the customary global locations. A network namespace and bind mounts are used to move files from their network namespace specific location to their default locations without affecting other processes.</p><p>If <strong>-all</strong> option was specified then <strong>cmd</strong> will be executed synchronously on the each named network namespace even if <strong>cmd</strong> fails on some of them. Network namespace name is printed on each <strong>cmd</strong> executing.</p>
  </dd>
  <dt>
    <p><strong>ip netns monitor - Report as network namespace names are added and deleted</strong></p>
  </dt>
  <dd>
    <p>This command watches network namespace name addition and deletion events and prints a line for each event it sees.</p>
  </dd>
  <dt>
    <p><strong>ip netns list-id - list network namespace ids (nsid)</strong></p>
  </dt>
  <dd>
    <p>Network namespace ids are used to identify a peer network namespace. This command displays nsid of the current network namespace and provides the corresponding iproute2 netns name (from /var/run/netns) if any.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>ip netns list</p><p>Shows the list of current named network namespaces</p><p>ip netns add vpn</p><p>Creates a network namespace and names it vpn</p><p>ip netns exec vpn ip link set lo up</p><p>Bring up the loopback interface in the vpn network namespace.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ip-netns&hellip;</h2>
        <div class="sectioncontent">
<p><strong>ip</strong>(8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Original Manpage by Eric W. Biederman</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ip-netconf.8.html"><span aria-hidden="true">&larr;</span> ip-netconf.8: Network configuration monitoring</a></li>
   <li class="next"><a href="ip-ntable.8.html">ip-ntable.8: Neighbour table configuration <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
