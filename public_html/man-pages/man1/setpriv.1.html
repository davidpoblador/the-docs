<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>setpriv: Run a program with different linux privilege settings</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run a program with different linux privilege settings">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">setpriv<small> (1)</small></h1>
        <p class="lead">Run a program with different linux privilege settings</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/setpriv.1.html">
      <span itemprop="name">setpriv: Run a program with different linux privilege settings</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/util-linux/">
      <span itemprop="name">util-linux</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/setpriv.1.html">
      <span itemprop="name">setpriv: Run a program with different linux privilege settings</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>setpriv</strong> [options] <em>program</em> [<em>arguments</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Sets or queries various Linux privilege settings that are inherited across <a href="../man2/execve.2.html"><strong>execve</strong>(2)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTION</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--clear-groups</strong></p>
  </dt>
  <dd>
    <p>Clear supplementary groups.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>,<strong></strong> <strong>--dump</strong></p>
  </dt>
  <dd>
    <p>Dump current privilege state.  Can be specified more than once to show extra, mostly useless, information.  Incompatible with all other options.</p>
  </dd>
  <dt>
    <p><strong>--groups <em>group</em>...</strong></p>
  </dt>
  <dd>
    <p>Set supplementary groups.  The argument is a comma-separated list.</p>
  </dd>
  <dt>
    <p><strong>--inh-caps</strong> (<strong>+</strong>|<strong>-</strong>)<strong>cap</strong>...  or  <strong>--bounding-set</strong> (<strong>+</strong>|<strong>-</strong>)<strong>cap</strong>...</p>
  </dt>
  <dd>
    <p>Set the inheritable capabilities or the capability bounding set.  See <a href="../man7/capabilities.7.html"><strong>capabilities</strong>(7)</a>. The argument is a comma-separated list of <strong>+</strong><em>cap</em> and <strong>-</strong><em>cap</em> entries, which add or remove an entry respectively. <strong>+all</strong> and <strong>-all</strong> can be used to add or remove all caps.  The set of capabilities starts out as the current inheritable set for <strong>--inh-caps</strong> and the current bounding set for <strong>--bounding-set</strong>. If you drop something from the bounding set without also dropping it from the inheritable set, you are likely to become confused.  Do not do that.</p>
  </dd>
  <dt>
    <p><strong>--keep-groups</strong></p>
  </dt>
  <dd>
    <p>Preserve supplementary groups.  Only useful in conjunction with <strong>--rgid</strong>, <strong>--egid</strong>, or <strong>--regid</strong>.</p>
  </dd>
  <dt>
    <p><strong>--list-caps</strong></p>
  </dt>
  <dd>
    <p>List all known capabilities.  This option must be specified alone.</p>
  </dd>
  <dt>
    <p><strong>--no-new-privs</strong></p>
  </dt>
  <dd>
    <p>Set the <em>no_new_privs</em> bit.  With this bit set, <a href="../man2/execve.2.html"><strong>execve</strong>(2)</a> will not grant new privileges.  For example, the setuid and setgid bits as well as file capabilities will be disabled.  (Executing binaries with these bits set will still work, but they will not gain privileges.  Certain LSMs, especially AppArmor, may result in failures to execute certain programs.)  This bit is inherited by child processes and cannot be unset.  See <a href="../man2/prctl.2.html"><strong>prctl</strong>(2)</a> and <em>Documentation/prctl/no_new_privs.txt</em> in the Linux kernel source.</p><p>The no_new_privs bit is supported since Linux 3.5.</p>
  </dd>
  <dt>
    <p><strong>--rgid</strong><em></em> <em>gid,</em> <em></em><strong>--egid</strong><em></em> <em>gid,</em> <em></em><strong>--regid</strong><em></em> <em>gid</em></p>
  </dt>
  <dd>
    <p>Set the real, effective, or both gids.  The <em>gid</em> argument can be given as textual group name.</p><p>For safety, you must specify one of <strong>--clear-groups</strong>, <strong>--groups</strong>, or <strong>--keep-groups</strong> if you set any primary <em>gid</em>.</p>
  </dd>
  <dt>
    <p><strong>--ruid</strong><em></em> <em>uid,</em> <em></em><strong>--euid</strong><em></em> <em>uid,</em> <em></em><strong>--reuid</strong><em></em> <em>uid</em></p>
  </dt>
  <dd>
    <p>Set the real, effective, or both uids.  The <em>uid</em> argument can be given as textual login name.</p><p>Setting a <em>uid</em> or <em>gid</em> does not change capabilities, although the exec call at the end might change capabilities.  This means that, if you are root, you probably want to do something like:</p><p><strong>        setpriv --reuid=1000 --regid=1000 --caps=-all</strong></p>
  </dd>
  <dt>
    <p><strong>--securebits</strong> (<strong>+</strong>|<strong>-</strong>)<strong>securebit</strong>...</p>
  </dt>
  <dd>
    <p>Set or clear securebits.  The argument is a comma-separated list. The valid securebits are <em>noroot</em>, <em>noroot_locked</em>, <em>no_setuid_fixup</em>, <em>no_setuid_fixup_locked</em>, and <em>keep_caps_locked</em>. <em>keep_caps</em> is cleared by <a href="../man2/execve.2.html"><strong>execve</strong>(2)</a> and is therefore not allowed.</p>
  </dd>
  <dt>
    <p><strong>--selinux-label</strong><em></em> <em>label</em></p>
  </dt>
  <dd>
    <p>Request a particular SELinux transition (using a transition on exec, not dyntrans).  This will fail and cause <a href="../man1/setpriv.1.html"><strong>setpriv</strong>(1)</a> to abort if SELinux is not in use, and the transition may be ignored or cause <a href="../man2/execve.2.html"><strong>execve</strong>(2)</a> to fail at SELinux's whim.  (In particular, this is unlikely to work in conjunction with <em>no_new_privs</em>.) This is similar to <strong>runcon</strong>(1).</p>
  </dd>
  <dt>
    <p><strong>--apparmor-profile</strong><em></em> <em>profile</em></p>
  </dt>
  <dd>
    <p>Request a particular AppArmor profile (using a transition on exec).  This will fail and cause <a href="../man1/setpriv.1.html"><strong>setpriv</strong>(1)</a> to abort if AppArmor is not in use, and the transition may be ignored or cause <a href="../man2/execve.2.html"><strong>execve</strong>(2)</a> to fail at AppArmor's whim.</p>
  </dd>
  <dt>
    <p><strong>-V</strong>,<strong></strong> <strong>--version</strong></p>
  </dt>
  <dd>
    <p>Display version information and exit.</p>
  </dd>
  <dt>
    <p><strong>-h</strong>,<strong></strong> <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Display help text and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>If applying any specified option fails, <em>program</em> will not be run and <strong>setpriv</strong> will return with exit code 127.</p><p>Be careful with this tool -- it may have unexpected security consequences. For example, setting no_new_privs and then execing a program that is SELinux-confined (as this tool would do) may prevent the SELinux restrictions from taking effect.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO setpriv&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man2/prctl.2.html"><strong>prctl</strong>(2)</a>, <strong>capability</strong>(7)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Andy Lutomirski</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>The <strong>setpriv</strong> command is part of the util-linux package and is available from</p><p>Linux Kernel Archive</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="setmetamode.1.html"><span aria-hidden="true">&larr;</span> setmetamode.1: Define the keyboard meta key handling</a></li>
   <li class="next"><a href="setsid.1.html">setsid.1: Run a program in a new session <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
