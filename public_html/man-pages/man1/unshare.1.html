<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>unshare - run program with some namespaces unshared from parent</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run program with some namespaces unshared from parent">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">unshare<small> (1)</small></h1>
        <p class="lead">Run program with some namespaces unshared from parent</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man1/"><span itemprop="title">Executable programs or shell commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man1/unshare.1.html"><span itemprop="title">unshare</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>unshare</strong> [options] <em>program</em> [<em>arguments</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

  <p>Unshares the indicated namespaces from the parent process and then executes the specified <em>program</em>.  The namespaces to be unshared are indicated via options.  Unshareable namespaces are:</p>
  <dl class='dl-vertical'>
    <dt><strong>mount namespace</strong></dt>
    <dd>
  <p>Mounting and unmounting filesystems will not affect the rest of the system (<strong>CLONE_NEWNS</strong> flag), except for filesystems which are explicitly marked as shared (with <strong>mount --make-shared</strong>; see <em>/proc/self/mountinfo</em> for the <strong>shared</strong> flags).</p>
<p class='spacer'>

  <p>It's recommended to use <strong>mount --make-rprivate</strong> or <strong>mount --make-rslave</strong> after <strong>unshare --mount</strong> to make sure that mountpoints in the new namespace are really unshared from the parental namespace.</p>
    </dd>
    <dt><strong>UTS namespace</strong></dt>
    <dd>
  <p>Setting hostname or domainname will not affect the rest of the system. (<strong>CLONE_NEWUTS</strong> flag)</p>
    </dd>
    <dt><strong>IPC namespace</strong></dt>
    <dd>
  <p>The process will have an independent namespace for System V message queues, semaphore sets and shared memory segments.  (<strong>CLONE_NEWIPC</strong> flag)</p>
    </dd>
    <dt><strong>network namespace</strong></dt>
    <dd>
  <p>The process will have independent IPv4 and IPv6 stacks, IP routing tables, firewall rules, the <em>/proc/net</em> and <em>/sys/class/net</em> directory trees, sockets, etc.  (<strong>CLONE_NEWNET</strong> flag)</p>
    </dd>
    <dt><strong>pid namespace</strong></dt>
    <dd>
  <p>Children will have a distinct set of PID to process mappings from their parent. (<strong>CLONE_NEWPID</strong> flag)</p>
    </dd>
    <dt><strong>user namespace</strong></dt>
    <dd>
  <p>The process will have a distinct set of UIDs, GIDs and capabilities. (<strong>CLONE_NEWUSER</strong> flag)</p>
    </dd>
  </dl>
<p class='spacer'>

<p>See <a href="../man2/clone.2.html"><strong>clone</strong>(2)</a> for the exact semantics of the flags.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>-h</strong>,<strong> --help</strong></dt>
    <dd>
  <p>Display help text and exit.</p>
    </dd>
    <dt><strong>-i</strong>,<strong> --ipc</strong></dt>
    <dd>
  <p>Unshare the IPC namespace.</p>
    </dd>
    <dt><strong>-m</strong>,<strong> --mount</strong></dt>
    <dd>
  <p>Unshare the mount namespace.</p>
    </dd>
    <dt><strong>-n</strong>,<strong> --net</strong></dt>
    <dd>
  <p>Unshare the network namespace.</p>
    </dd>
    <dt><strong>-p</strong>,<strong> --pid</strong></dt>
    <dd>
  <p>Unshare the pid namespace. See also the <strong>--fork</strong> and <strong>--mount-proc</strong> options.</p>
    </dd>
    <dt><strong>-u</strong>,<strong> --uts</strong></dt>
    <dd>
  <p>Unshare the UTS namespace.</p>
    </dd>
    <dt><strong>-U</strong>,<strong> --user</strong></dt>
    <dd>
  <p>Unshare the user namespace.</p>
    </dd>
    <dt><strong>-f</strong>,<strong> --fork</strong></dt>
    <dd>
  <p>Fork the specified <em>program</em> as a child process of <strong>unshare</strong> rather than running it directly.  This is useful when creating a new pid namespace.</p>
    </dd>
    <dt><strong>--mount-proc</strong>[=<em>mountpoint</em>]</dt>
    <dd>
  <p>Just before running the program, mount the proc filesystem at <em>mountpoint</em> (default is /proc).  This is useful when creating a new pid namespace.  It also implies creating a new mount namespace since the /proc mount would otherwise mess up existing programs on the system.  The new proc filesystem is explicitly mounted as private (by MS_PRIVATE|MS_REC).</p>
    </dd>
    <dt><strong>-r</strong>,<strong> --map-root-user</strong></dt>
    <dd>
  <p>Run the program only after the current effective user and group IDs have been mapped to the superuser UID and GID in the newly created user namespace.  This makes it possible to conveniently gain capabilities needed to manage various aspects of the newly created namespaces (such as configuring interfaces in the network namespace or mounting filesystems in the mount namespace) even when run unprivileged.  As a mere convenience feature, it does not support more sophisticated use cases, such as mapping multiple ranges of UIDs and GIDs.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man2/unshare.2.html"><strong>unshare</strong>(2)</a>, <a href="../man2/clone.2.html"><strong>clone</strong>(2)</a>, <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p>None known so far.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Mikhail Gusarov &lt;dottedmag@dottedmag.net&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">

<p>The unshare command is part of the util-linux package and is available from ftp://ftp.kernel.org/pub/linux/utils/util-linux/.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
  <li class="previous"><a href="unshar.1.html"><span aria-hidden="true">&larr;</span> unshar.1: unpack a shar archive</a></li><li class="next"><a href="uptime.1.html">uptime.1: Tell how long the system has been running. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
