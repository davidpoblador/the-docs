<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmlogcheck: Checks for invalid data in a pcp archive</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Checks for invalid data in a pcp archive">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmlogcheck<small> (1)</small></h1>
        <p class="lead">Checks for invalid data in a pcp archive</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmlogcheck.1.html">
      <span itemprop="name">pmlogcheck: Checks for invalid data in a pcp archive</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pcp/">
      <span itemprop="name">pcp</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmlogcheck.1.html">
      <span itemprop="name">pmlogcheck: Checks for invalid data in a pcp archive</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p>\f3pmlogcheck\f1 [\f3-lz\f1] [\f3-n\f1 \f2pmnsfile\f1] [\f3-S\f1 \f2start\f1] [\f3-T\f1 \f2finish\f1] [\f3-Z\f1 \f2timezone\f1] \f2archive\f1</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>pmlogcheck</strong> prints information about the nature of any invalid data which it detects in the files of a PCP archive.</p>
<p class='spacer'>

<p>The archive has the base name <em>archive</em> and must have been previously created using <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a>.</p>
<p class='spacer'>

<p>Normally <strong>pmlogcheck</strong> operates on the default Performance Metrics Name Space ( .BR pmns (5)), however if the <strong>-n</strong> option is specified an alternative namespace is loaded from the file <em>pmnsfile</em>.</p>
<p class='spacer'>

<p>The command line options <strong>-S</strong> and <strong>-T</strong> can be used to specify a time window over which metrics should be checked in Pass 3 (see below). These options are common to many Performance Co-Pilot tools and are fully described in <strong>PCPIntro</strong>(1).</p>
<p class='spacer'>

<p>The <strong>-l</strong> option prints the archive label, showing the log format version, the time and date for the start and (current) end of the archive, and the host from which the performance metrics values were collected.</p>
<p class='spacer'>

<p>By default, <strong>pmlogcheck</strong> reports the time of day according to the local timezone on the system where <strong>pmlogcheck</strong> is run. The <strong>-Z</strong> option changes the timezone to <em>timezone</em> in the format of the environment variable <strong>TZ</strong> as described in <a href="../man7/environ.7.html"><strong>environ</strong>(7)</a>. The <strong>-z</strong> option changes the timezone to the local timezone at the host that is the source of the performance metrics, as specified in the label record of the archive log.</p>
<p class='spacer'>

<p>The checking proceeds in a number of passes, each designed to validate progressively more complex semantic relationships between the information in a PCP archive.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Pass 0</h2>
        <div class="sectioncontent">

<p>Each physical file of the PCP archive is processed to ensure the label records are valid and consistent, and that each file contains an integral number of physical records with correct header and trailer fields.</p>
<p class='spacer'>

<p>Any errors at this stage are usually fatal.  The PCP archive is probably damaged beyond repair, and no more passes of <strong>pmlogcheck</strong> are attempted.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Pass 1</h2>
        <div class="sectioncontent">

<p>Validates the integrity of the temporal index, usually <em>archive</em><strong>.index</strong><em>.</em></p>
<p class='spacer'>

<p>As the temporal index is (strictly speaking) optional, errors at this stage are handled by marking the index as bad and ignoring it for the remainder of the <strong>pmlogcheck</strong> passes.</p>
<p class='spacer'>

<p>Permanent repair can be achieved by removing the temporal index file and then making a copy of the PCP archive using <strong>pmlogrewrite</strong>(1) or <a href="../man1/pmlogextract.1.html"><strong>pmlogextract</strong>(1)</a>. This will create a new temporal index for the copied archive as a side-effect.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Pass 2</h2>
        <div class="sectioncontent">

<p>Validates the integrity of the metadata file, usually <em>archive</em><strong>.meta</strong><em>.</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Pass 3</h2>
        <div class="sectioncontent">

<p>Validates the integrity of each of the log volumes of the PCP archive, usually <em>archive</em><strong>.0</strong><em>,</em> <em>archive</em><strong>.1</strong><em>,</em><strong>etc.</strong></p>
<p class='spacer'>

<p>There is some basic integrity checks to ensure the encoding of values for each metric remains consistent and the values are well formed across all the observations in the archive.</p>
<p class='spacer'>

<p>Also the timestamps for the observations are expected to be monotonically increasing as the archive is tranversed.</p>
<p class='spacer'>

<p>Additional attention is given to counter metrics ( .I type from <strong>pmLookupDesc</strong>(3) is <strong>PM_SEM_COUNTER</strong>) which are expected to have monotonically increasing values. If the values are not monotonic increasing this may suggest a counter wrap has happened or there has been some interruption or reset to the underlying source of the performance data that is no captured in the archive.</p>
<p class='spacer'>

<p>For each counter metric which has been detected as having wrapped at some point in the archive, <strong>pmlogcheck</strong> produces output describing the metric name (with instance identifiers where appropriate), the internal storage type for the metric, the value of the metric before the counter wrap (with its associated timestamp), and the value of the metric after the wrap (also with a timestamp).</p>
<p class='spacer'>

<p><strong>pmlogcheck</strong> produces two different timestamp formats, depending on the interval over which it is run.  For an interval greater than 24 hours, the date is displayed in addition to the time at which the counter wrap occurred. If the extent of the data being checked is less than 24 hours, a more precise format is used (time is displayed with millisecond precision, but without the date).</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>$PCP_VAR_DIR/pmns/</strong><em>*</em></dt>
    <dd>
  <p>default PMNS specification files</p>
    </dd>
    <dt><strong>$PCP_LOG_DIR/pmlogger/</strong><em>hostname</em></dt>
    <dd>
  <p>default directory for PCP archives containing performance data collected from the host <em>hostname</em>.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PCP ENVIRONMENT</h2>
        <div class="sectioncontent">

<p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <strong>pcp.conf</strong>(5).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>PCPIntro</strong>(1), <a href="../man1/pmdumplog.1.html"><strong>pmdumplog</strong>(1)</a>, <a href="../man1/pmlogextract.1.html"><strong>pmlogextract</strong>(1)</a>, <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a>, <strong>pmlogrewrite</strong>(1), <a href="../man1/pmlogsummary.1.html"><strong>pmlogsummary</strong>(1)</a>, <strong>pmval</strong>(1), <strong>pmLookupDesc</strong>(3), <strong>pcp.conf</strong>(5), <a href="../man5/pcp.env.5.html"><strong>pcp.env</strong>(5)</a> and <strong>pmns</strong>(5).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<p>All are generated on standard error and are intended to be self- explanatory.</p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="pmlock.1.html"><span aria-hidden="true">&larr;</span> pmlock.1: simple file-based mutex</a></li>
   <li class="next"><a href="pmlogextract.1.html">pmlogextract.1: reduce, extract, concatenate and merge Performance Co-Pilot archives <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
