<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmlogconf: Create/edit a pmlogger configuration file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create/edit a pmlogger configuration file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pmlogconf (1) manual">
  <meta name="twitter:description" content="Create/edit a pmlogger configuration file">
  <meta name="twitter:image" content="https://www.carta.tech/images/pcp-pmlogconf-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pmlogconf.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pmlogconf (1) manual" />
  <meta property="og:description" content="Create/edit a pmlogger configuration file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pcp-pmlogconf-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmlogconf<small> (1)</small></h1>
        <p class="lead">Create/edit a pmlogger configuration file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmlogconf.1.html">
      <span itemprop="name">pmlogconf: Create/edit a pmlogger configuration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pcp/">
      <span itemprop="name">pcp</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmlogconf.1.html">
      <span itemprop="name">pmlogconf: Create/edit a pmlogger configuration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pmlogconf</strong> [<strong>-cqrv</strong>] [<strong>-d</strong><em> groupsdir</em>] [<strong>-h</strong><em> hostname</em>] <em>configfile</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>pmlogconf</strong> may be used to create and modify a generic configuration file for the PCP archive logger, <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a>.</p><p>If <em>configfile</em> does not exist, <strong>pmlogconf</strong> will create a generic configuration file with a default set of enabled metrics and logging intervals.</p><p>Once created, <em>configfile</em> may be used with the <strong>-c</strong> option to <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a> to select performance metrics and specify logging intervals for a PCP archive.</p><p>If <em>configfile</em> does exist, <strong>pmlogconf</strong> will prompt for input from the user to enable or disable groups of related performance metrics and to control the logging interval for each enabled group.</p><p>Group selection requires a simple <strong>y</strong> (yes) or <strong>n</strong> (no) response to the prompt <strong>Log this group?</strong>.</p><p>Other responses at this point may be used to select additional control functions as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>m</strong>
  </dt>
  <dd>
    <p>Report the names of the metrics in the current group.</p>
  </dd>
  <dt>
    <strong>q</strong>
  </dt>
  <dd>
    <p>Finish with group selection (quit) and make no further changes to this group or any subsequent group.</p>
  </dd>
  <dt>
    <strong>/</strong><em>pattern</em><strong></strong>
  </dt>
  <dd>
    <p>Make no change to this group but search for a group containing <em>pattern</em> in the description of the group or the names of the associated metrics.</p>
  </dd>

</dl>
<p>A logging interval is specified by responding to the <strong>Logging interval?</strong> prompt with the keywords <strong>once</strong> or <strong>default</strong> or a valid <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a> interval specification of the form `` .B every <em>N timeunits</em>'' or simply `` .I "N timeunits" '' (the <strong>every</strong> is optional) where <em>N</em> is an unsigned integer and <em>timeunits</em> is one of the keywords <strong>msec</strong>, <strong>millisecond</strong>, <strong>sec</strong>, <strong>second</strong>, <strong>min</strong>, <strong>minute</strong>, <strong>hour</strong> or the plural form of one of the keywords.</p><p>When run from automated logging setup processes, the <strong>-c</strong> option is used to add a message and timestamp indicating this fact. This option is not appropriate for interactive use of the tool.</p><p>The <strong>-q</strong> option suppresses the logging interval dialog and preserves the current interval from <em>configfile</em>.</p><p>More verbose output may be enabled with the <strong>-v</strong> option.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SETUP GROUP FILES</h2>
        <div class="sectioncontent">
<p>When an initial <em>configfile</em> is created, the default specifications come from a set of group files below the <em>groupsdir</em> specified with the <strong>-d</strong> option (the default <em>groupsdir</em> is <strong>$PCP_VAR_DIR/config/pmlogconf</strong> which is most commonly correct, so the <strong>-d</strong> option is rarely used in practice).</p><p>The directory structure below <em>groupsdir</em> is arbitrary as all regular files will be found by recursive descent and considered, so add-on products and PMDA developers can easily extend the available defaults to <strong>pmlogconf</strong> by adding new directories and/or group files below <em>groupsdir</em>.</p><p>These group files are processed in the following ways:</p><ul>
<li><p>When a new <em>configfile</em> is created, all group files are processed.</p></li><li><p>Whenever <strong>pmlogconf</strong> is run with an existing <em>configfile</em>, <em>groupsdir</em> is traversed to see if any new groups have been defined and should be considered for inclusion in <em>configfile</em>.</p></li><li><p>When <strong>pmlogconf</strong> processes a group in <em>configfile</em> that is enabled, the list of metrics associated with the group is taken from the group file (and replaces any previous list of metrics associated with this group in <em>configfile</em>).</p></li><li><p>When the <strong>-r</strong> (reprobe) command line option is specified, every group (not just newly discovered ones) is reprocessed to see if it should be considered for inclusion in <em>configfile</em>.</p></li>
</ul><p>Each group file is structured as follows:</p><ul>
<li><p>The first line must contain <strong>#pmlogconf-setup 2.0</strong></p></li><li><p>Other lines beginning with <strong>#</strong> are treated as comments.</p></li><li><p>Blank lines are ignored.</p></li><li><p>One or more lines starting with the keyword <strong>ident</strong> are used to provide the human-readable description of the group.</p></li><li><p>Non-blank lines beginning with white space define metrics to be associated with this group, one per line.  Each metric specification follows the rules for a <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a> configuration, namely either the name of a non-leaf node in the PMNS (implying all descendent names in the PMNS), or the name of a leaf node in the PMNS optionally followed by one or more instance names enclosed by ``['' and ``]''.</p></li><li><p>A control line starting with one of the keywords <strong>probe</strong> or <strong>force</strong> must be present.</p></li><li><p>An optional logging interval control line begins with the keyword <strong>delta</strong> followed by one of the <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a> interval specification described above.</p></li><li><p><strong>probe</strong> control lines have the format:</p><p><strong>probe</strong> <em>metric</em> [<em>condition</em> [<em>state_rule</em>] ]</p><p>where <em>metric</em> is the name of a PCP metric (must be a leaf node in the PMNS and no instance specification is allowed) and the optional <em>condition</em> is the keyword <strong>exists</strong> (true if <em>metric</em> exists, i.e. is defined in the PMNS) or the keyword <strong>values</strong> (true if <em>metric</em> exists in the PMNS and has one or more current values) or an expression of the form</p><p><em>op</em> <em>val</em> where <em>op</em> is one of the <strong>awk</strong>(1) operators (<strong>==</strong>, <strong>!=</strong>, <strong>&gt;</strong>, <strong>&gt;=</strong>, <strong>&lt;</strong>, <strong>&lt;=</strong>, <strong>~</strong> (regular expression match) or <strong>!~</strong> (negated regular expression match)) and <em>val</em> is a value (arbitrary sequence of characters, excluding a space) and the <em>condition</em> is true if there is some instance of <em>metric</em> that makes the expression true.</p><p>If the <em>condition</em> is missing, the default is <strong>exists</strong>.</p><p>When an explicit <em>condition</em> is provided, there may also be an optional <em>state_rule</em> of the form</p><p><strong>?</strong> <em>true_state</em> <strong>:</strong> <em>false_state</em> where <em>true_state</em> (applies if <em>condition</em> is true) and <em>false_state</em> (applies if <em>condition</em> is false) are both taken from the keywords <strong>include</strong> (include and enable the group and the associated metrics in <em>configfile</em>), <strong>available</strong> (include and disable the group in <em>configfile</em> - a user action of <strong>y</strong> as described above is needed to enable the group and add the associated metrics into <em>configfile</em>) or <strong>exclude</strong> (the group is not considered for inclusion in <em>configfile</em>).</p><p>The default <em>state_rule</em> is</p><p>? available : exclude</p></li><li><p><strong>force</strong> control lines begin with the keyword <strong>force</strong> followed by one of the states defined above, so one of the actions <strong>include</strong>, <strong>exclude</strong> or <strong>available</strong> is applied unconditionally to the group.</p></li>
</ul><p>Probing is only done when a new group is being added to <em>configfile</em> or when the <strong>-r</strong> command line option is specified.  The evaluation of the probing conditions is done by contacting <a href="../man1/pmcd.1.html"><strong>pmcd</strong>(1)</a> on <em>hostname</em> (defaults to local:).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The following group file demonstrates all of the supported syntactic elements.</p>
<pre>
#pmlogconf-setup 2.0
ident   Example group file
ident   ... more description
delta   1 minute
probe   sample.secret.foo.one values ? include : exclude
        sample.secret.foo.one
        sample.secret.foo.bar   # non-leaf in the PMNS
        sample.colour [ red green ]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MIGRATION</h2>
        <div class="sectioncontent">
<p>The current version of <strong>pmlogconf</strong> (2.0) supports a slightly different format for <em>configfile</em> compared to earlier versions.  If an old version <em>configfile</em> is presented to <strong>pmlogconf</strong> it will be converted to the new format.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PCP ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <a href="../man5/pcp.conf.5.html"><strong>pcp.conf</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pmlogconf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/pmcd.1.html"><strong>pmcd</strong>(1)</a>, <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a>, <a href="../man5/pcp.conf.5.html"><strong>pcp.conf</strong>(5)</a> and <a href="../man5/pcp.env.5.html"><strong>pcp.env</strong>(5)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pmlogcheck.1.html"><span aria-hidden="true">&larr;</span> pmlogcheck.1: Checks for invalid data in a pcp archive</a></li>
   <li class="next"><a href="pmlogextract.1.html">pmlogextract.1: Reduce, extract, concatenate and merge performance co-pilot archives <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
