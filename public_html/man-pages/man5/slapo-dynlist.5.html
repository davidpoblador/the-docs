<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapo-dynlist - Dynamic List overlay to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Dynamic list overlay to slapd">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapo-dynlist<small> (5)</small></h1>
        <p class="lead">Dynamic list overlay to slapd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapo-dynlist.5.html">
      <span itemprop="name">slapo-dynlist</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/openldap/">
      <span itemprop="name">openldap</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapo-dynlist.5.html">
      <span itemprop="name">slapo-dynlist</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p>ETCDIR/slapd.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The <strong>dynlist</strong> overlay to <strong>slapd</strong>(8) allows expansion of dynamic groups and more. Any time an entry with a specific objectClass (defined in the overlay configuration) is being returned, the LDAP URI-valued occurrences of a specific attribute (also defined in the overlay configuration) are expanded into the corresponding entries, and the values of the attributes listed in the URI are added to the original entry. No recursion is allowed, to avoid potential infinite loops.</p>
<p class='spacer'>

<p>Since the resulting entry is dynamically constructed, it does not exist until it is constructed while being returned. As a consequence, dynamically added attributes do not participate in the filter matching phase of the search request handling. In other words, <em>filtering for dynamically added attributes always fails</em>.</p>
<p class='spacer'>

<p>The resulting entry must comply with the LDAP data model, so constraints are enforced. For example, if a <em>SINGLE-VALUE</em> attribute is listed, only the first value found during the list expansion appears in the final entry. The above described behavior is disabled when the <em>manageDSAit</em> control (RFC 3296) is used. In that case, the contents of the dynamic group entry is returned; namely, the URLs are returned instead of being expanded.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">

<p>The config directives that are specific to the <strong>dynlist</strong> overlay must be prefixed by <strong>dynlist-</strong>, to avoid potential conflicts with directives specific to the underlying database or to other stacked overlays.</p>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>overlay dynlist</strong></dt>
    <dd>
  <p>This directive adds the dynlist overlay to the current database, or to the frontend, if used before any database instantiation; see <strong>slapd.conf</strong>(5) for details.</p>
<p class='spacer'>

    </dd>
  </dl>
<p class='spacer'>

  <p>This <strong>slapd.conf</strong> configuration option is defined for the dynlist overlay. It may have multiple occurrences, and it must appear after the <strong>overlay</strong> directive.</p>
  <dl class='dl-vertical'>
    <dt><strong>dynlist-attrset &lt;group-oc&gt; [&lt;URI&gt;] &lt;URL-ad&gt; [[&lt;mapped-ad&gt;:]&lt;member-ad&gt; ...]</strong></dt>
    <dd>
  <p>The value <strong>group-oc</strong> is the name of the objectClass that triggers the dynamic expansion of the data.</p>
<p class='spacer'>

  <p>The optional <strong>URI</strong> restricts expansion only to entries matching the <em>DN</em>, the <em>scope</em> and the <em>filter</em> portions of the URI.</p>
<p class='spacer'>

  <p>The value <strong>URL-ad</strong> is the name of the attributeDescription that contains the URI that is expanded by the overlay; if none is present, no expansion occurs. If the intersection of the attributes requested by the search operation (or the asserted attribute for compares) and the attributes listed in the URI is empty, no expansion occurs for that specific URI. It must be a subtype of <em>labeledURI</em>.</p>
<p class='spacer'>

  <p>The value <strong>member-ad</strong> is optional; if present, the overlay behaves as a dynamic group: this attribute will list the DN of the entries resulting from the internal search. In this case, the <em>attrs</em> portion of the URIs in the <strong>URL-ad</strong> attribute must be absent, and the <em>DN</em>s of all the entries resulting from the expansion of the URIs are listed as values of this attribute. Compares that assert the value of the <strong>member-ad</strong> attribute of entries with <strong>group-oc</strong> objectClass apply as if the DN of the entries resulting from the expansion of the URI were present in the <strong>group-oc</strong> entry as values of the <strong>member-ad</strong> attribute.</p>
<p class='spacer'>

  <p>Alternatively, <strong>mapped-ad</strong> can be used to remap attributes obtained through expansion. <strong>member-ad</strong> attributes are not filled by expanded DN, but are remapped as <strong>mapped-ad</strong> attributes.  Multiple mapping statements can be used.</p>
<p class='spacer'>

    </dd>
  </dl>
<p class='spacer'>

<p>The dynlist overlay may be used with any backend, but it is mainly intended for use with local storage backends. In case the URI expansion is very resource-intensive and occurs frequently with well-defined patterns, one should consider adding a proxycache later on in the overlay stack.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORIZATION</h2>
        <div class="sectioncontent">

<p>By default the expansions are performed using the identity of the current LDAP user. This identity may be overridden by setting the <strong>dgIdentity</strong> attribute in the group's entry to the DN of another LDAP user. In that case the dgIdentity will be used when expanding the URIs in the object. Setting the dgIdentity to a zero-length string will cause the expansions to be performed anonymously. Note that the dgIdentity attribute is defined in the <strong>dyngroup</strong> schema, and this schema must be loaded before the dgIdentity authorization feature may be used. If the <strong>dgAuthz</strong> attribute is also present in the group's entry, its values are used to determine what identities are authorized to use the <strong>dgIdentity</strong> to expand the group. Values of the <strong>dgAuthz</strong> attribute must conform to the (experimental) <em>OpenLDAP authz</em> syntax.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<p>This example collects all the email addresses of a database into a single entry; first of all, make sure that slapd.conf contains the directives:</p>
<p class='spacer'>

<p class='spacer'>

<pre>    include /path/to/dyngroup.schema
    # ...

    database &lt;database&gt;
    # ...

    overlay dynlist
    dynlist-attrset groupOfURLs memberURL</pre>

<p class='spacer'>

<p>and that slapd loads dynlist.la, if compiled as a run-time module; then add to the database an entry like</p>
<p class='spacer'>

<pre>    dn: cn=Dynamic List,ou=Groups,dc=example,dc=com
    objectClass: groupOfURLs
    cn: Dynamic List
    memberURL: ldap:///ou=People,dc=example,dc=com?mail?sub?(objectClass=person)</pre>

<p class='spacer'>

<p>If no &lt;attrs&gt; are provided in the URI, all (non-operational) attributes are collected.</p>
<p class='spacer'>

<p>This example implements the dynamic group feature on the <strong>member</strong> attribute:</p>
<p class='spacer'>

<p class='spacer'>

<pre>    include /path/to/dyngroup.schema
    # ...

    database &lt;database&gt;
    # ...

    overlay dynlist
    dynlist-attrset groupOfURLs memberURL member</pre>

<p class='spacer'>

<p>A dynamic group with dgIdentity authorization could be created with an entry like</p>
<p class='spacer'>

<pre>    dn: cn=Dynamic Group,ou=Groups,dc=example,dc=com
    objectClass: groupOfURLs
    objectClass: dgIdentityAux
    cn: Dynamic Group
    memberURL: ldap:///ou=People,dc=example,dc=com??sub?(objectClass=person)
    dgIdentity: cn=Group Proxy,ou=Services,dc=example,dc=com</pre>

<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt>ETCDIR/slapd.conf</dt>
    <dd>
  <p>default slapd configuration file</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>slapd.conf</strong>(5), <strong>slapd-config</strong>(5), <strong>slapd</strong>(8). The <a href="../man5/slapo-dynlist.5.html"><strong>slapo-dynlist</strong>(5)</a> overlay supports dynamic configuration via <strong>back-config</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>This module was written in 2004 by Pierangelo Masarati for SysNet s.n.c.</p>
<p class='spacer'>

<p>Attribute remapping was contributed in 2008 by Emmanuel Dreyfus.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slapo-dyngroup.5.html"><span aria-hidden="true">&larr;</span> slapo-dyngroup.5: Dynamic Group overlay to slapd</a></li>
   <li class="next"><a href="slapo-lastbind.5.html">slapo-lastbind.5: lastbind overlay to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
