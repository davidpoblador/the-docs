<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bounce - Postfix bounce message template format</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Postfix bounce message template format">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bounce<small> (5)</small></h1>
        <p class="lead">Postfix bounce message template format</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man5/"><span itemprop="title">File formats and conventions</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man5/bounce.5.html"><span itemprop="title">bounce</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>bounce_template_file = /etc/postfix/bounce.cf</strong>

<strong>postconf -b</strong> [<em>template_file</em>]</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The Postfix <strong>bounce</strong>(8) server produces delivery status notification (DSN) messages for undeliverable mail, delayed mail, successful delivery or address verification requests.</p>
<p class='spacer'>

<p>By default, these notifications are generated from built-in templates with message headers and message text. Sites can override the built-in information by specifying a bounce template file with the <strong>bounce_template_file</strong> configuration parameter.</p>
<p class='spacer'>

<p>This document describes the general procedure to create a bounce template file, followed by the specific details of bounce template formats.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERAL PROCEDURE</h2>
        <div class="sectioncontent">

<p>To create a customized bounce template file, create a temporary copy of the file <strong>/etc/postfix/bounce.cf.default</strong> and edit the temporary file.</p>
<p class='spacer'>

<p>To preview the results of $<em>name</em> expansions in the template text, use the command</p>
<p class='spacer'>

<pre>    <strong>postconf -b</strong> <em>temporary_file</em></pre>

<p class='spacer'>

<p>Errors in the template will be reported to the standard error stream and to the syslog daemon.</p>
<p class='spacer'>

<p>While previewing the text, be sure to pay particular attention to the expansion of time value parameters that appear in the delayed mail notification text.</p>
<p class='spacer'>

<p>Once the result is satisfactory, copy the template to the Postfix configuration directory and specify in main.cf something like:</p>
<p class='spacer'>

<pre>/etc/postfix/main.cf:
    bounce_template_file = /etc/postfix/bounce.cf</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TEMPLATE FILE FORMAT</h2>
        <div class="sectioncontent">

<p>The template file can specify templates for failed mail, delayed mail, successful delivery or for address verification. These templates are named <strong>failure_template</strong>, <strong>delay_template</strong>, <strong>success_template</strong> and <strong>verify_template</strong>, respectively.  You can but do not have to specify all four templates in a bounce template file.</p>
<p class='spacer'>

<p>Each template starts with "<em>template_name<strong> = &lt;&lt;EOF</em>" and ends with a line that contains the word "EOF</strong>" only. You can change the word EOF, but you can't enclose it in quotes as with the shell or with Perl (<em>template_name = &lt;&lt;'EOF'</em>). Here is an example:</p>
<p class='spacer'>

<pre>    # The failure template is used for undeliverable mail.

    failure_template = &lt;&lt;EOF
    Charset: us-ascii
    From: MAILER-DAEMON (Mail Delivery System)
    Subject: Undelivered Mail Returned to Sender
    Postmaster-Subject: Postmaster Copy: Undelivered Mail

    This is the mail system at host $myhostname.

    I'm sorry to have to inform you that your message could not
    be delivered to one or more recipients. It's attached below.

    For further assistance, please send mail to postmaster.

    If you do so, please include this problem report. You can
    delete your own text from the attached returned message.

                       The mail system
    EOF</pre>

<p class='spacer'>

  <p>The usage and specification of bounce templates is subject to the following restrictions:</p>
  <dl class='dl-horizontal'>
    <dt>&bull;</dt>
    <dd>
  <p>No special meaning is given to the backslash character or to leading whitespace; these are always taken literally.</p>
    </dd>
    <dt>&bull;</dt>
    <dd>
  <p>Inside the &lt;&lt; context, the "$" character is special. To produce a "$" character as output, specify "$$".</p>
    </dd>
    <dt>&bull;</dt>
    <dd>
  <p>Outside the &lt;&lt; context, lines beginning with "#" are ignored, as are empty lines, and lines consisting of whitespace only.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>Examples of all templates can be found in the file <strong>bounce.cf.default</strong> in the Postfix configuration directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TEMPLATE HEADER FORMAT</h2>
        <div class="sectioncontent">

<p>The first portion of a bounce template consists of optional template headers.  Some become message headers in the delivery status notification; some control the formatting of that notification. Headers not specified in a template will be left at their default value.</p>
<p class='spacer'>

  <p>The following headers are supported:</p>
  <dl class='dl-horizontal'>
    <dt><strong>Charset:</strong></dt>
    <dd>
  <p>The MIME character set of the template message text.  See the "TEMPLATE MESSAGE TEXT FORMAT" description below.</p>
    </dd>
    <dt><strong>From:</strong></dt>
    <dd>
  <p>The sender address in the message header of the delivery status notification.</p>
    </dd>
    <dt><strong>Subject:</strong></dt>
    <dd>
  <p>The subject in the message header of the delivery status notification that is returned to the sender.</p>
    </dd>
    <dt><strong>Postmaster-Subject:</strong></dt>
    <dd>
  <p>The subject that will be used in Postmaster copies of undeliverable or delayed mail notifications. These copies are sent under control of the notify_classes configuration parameter.</p>
    </dd>
  </dl>
<p class='spacer'>

  <p>The usage and specification of template message headers is subject to the following restrictions:</p>
  <dl class='dl-horizontal'>
    <dt>&bull;</dt>
    <dd>
  <p>Template message header names can be specified in upper case, lower case or mixed case. Postfix always produces bounce message header labels of the form "<strong>From:</strong>" and "<strong>Subject:</strong>".</p>
    </dd>
    <dt>&bull;</dt>
    <dd>
  <p>Template message headers must not span multiple lines.</p>
    </dd>
    <dt>&bull;</dt>
    <dd>
  <p>Template message headers do not support $parameter expansions.</p>
    </dd>
    <dt>&bull;</dt>
    <dd>
  <p>Template message headers must contain ASCII characters only, and must not contain ASCII null characters.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TEMPLATE MESSAGE TEXT FORMAT</h2>
        <div class="sectioncontent">

  <p>The second portion of a bounce template consists of message text. As the above example shows, template message text may contain main.cf $parameters. Besides the parameters that are defined in main.cf, the following parameters are treated specially depending on the suffix that is appended to their name.</p>
  <dl class='dl-horizontal'>
    <dt>delay_warning_time_<em>suffix</em></dt>
    <dd>
  <p>Expands into the value of the <strong>delay_warning_time</strong> parameter, expressed in the time unit specified by <em>suffix</em>, which is one of <strong>seconds</strong>, <strong>minutes</strong>, <strong>hours, days</strong>, or <strong>weeks</strong>.</p>
    </dd>
    <dt>maximal_queue_lifetime_<em>suffix</em></dt>
    <dd>
  <p>Expands into the value of the <strong>maximal_queue_lifetime</strong> parameter, expressed in the time unit specified by <em>suffix</em>.  See above under <strong>delay_warning_time</strong> for possible <em>suffix</em> values.</p>
    </dd>
  </dl>
<p class='spacer'>

  <p>The usage and specification of template message text is subject to the following restrictions:</p>
  <dl class='dl-horizontal'>
    <dt>&bull;</dt>
    <dd>
  <p>The template message text is not sent in Postmaster copies of delivery status notifications.</p>
    </dd>
    <dt>&bull;</dt>
    <dd>
  <p>If the template message text contains non-ASCII characters, Postfix requires that the <strong>Charset:</strong> template header is updated.  Specify an appropriate superset of US-ASCII. A superset is needed because Postfix appends ASCII text after the message template when it sends a delivery status notification.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<strong>bounce</strong>(8), Postfix delivery status notifications
<a href="../man5/postconf.5.html"><strong>postconf</strong>(5)</a>, configuration parameters</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">

<p>The Secure Mailer license must be distributed with this software.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">

<p>The Postfix bounce template format was originally developed by Nicolas Riendeau.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR(S)</h2>
        <div class="sectioncontent">

<pre>Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
  <li class="previous"><a href="booleans.5.html"><span aria-hidden="true">&larr;</span> booleans.5: The SELinux booleans configuration files .</a></li><li class="next"><a href="canonical.5.html">canonical.5: Postfix canonical table format <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
