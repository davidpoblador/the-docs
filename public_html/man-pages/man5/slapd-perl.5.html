<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapd-perl - Perl backend to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Perl backend to slapd">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapd-perl<small> (5)</small></h1>
        <p class="lead">Perl backend to slapd</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="/"><span itemprop="title">Carta.tech</span></a>
	</li>
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man5/"><span itemprop="title">File formats and conventions</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man5/slapd-perl.5.html"><span itemprop="title">slapd-perl</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p>ETCDIR/slapd.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The Perl backend to <strong>slapd</strong>(8) works by embedding a <strong>perl</strong>(1) interpreter into <strong>slapd</strong>(8). Any perl database section of the configuration file <strong>slapd.conf</strong>(5) must then specify what Perl module to use. <strong>Slapd</strong> then creates a new Perl object that handles all the requests for that particular instance of the backend.</p>
<p class='spacer'>

<p>You will need to create a method for each one of the following actions:</p>
<p class='spacer'>

<pre>  * new        # creates a new object,
  * search     # performs the ldap search,
  * compare    # does a compare,
  * modify     # modifies an entry,
  * add        # adds an entry to backend,
  * modrdn     # modifies an entry's rdn,
  * delete     # deletes an ldap entry,
  * config     # module-specific config directives,
  * init       # called after backend is initialized.</pre>

<p class='spacer'>

  <p>Unless otherwise specified, the methods return the result code which will be returned to the client.  Unimplemented actions can just return unwillingToPerform (53).</p>
  <dl class='dl-vertical'>
    <dt><strong>new</strong></dt>
    <dd>
  <p>This method is called when the configuration file encounters a <strong>perlmod</strong> line. The module in that line is then effectively `use'd into the perl interpreter, then the <strong>new</strong> method is called to create a new object. Note that multiple instances of that object may be instantiated, as with any perl object. The <strong>new</strong> method receives the class name as argument.</p>
    </dd>
    <dt><strong>search</strong></dt>
    <dd>
    <p>This method is called when a search request comes from a client. It arguments are as follows:</p>
<pre>  * object reference
  * base DN
  * scope
  * alias dereferencing policy
  * size limit
  * time limit
  * filter string
  * attributes only flag (1 for yes)
  * list of attributes to return (may be empty)</pre>

    </dd>
  </dl>
<p class='spacer'>

  <p>Return value: (resultcode, ldif-entry, ldif-entry, ...)</p>
  <dl class='dl-vertical'>
    <dt><strong>compare</strong></dt>
    <dd>
    <p>This method is called when a compare request comes from a client. Its arguments are as follows.</p>
<pre>  * object reference
  * dn
  * attribute assertion string</pre>

    </dd>
  </dl>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>modify</strong></dt>
    <dd>
    <p>This method is called when a modify request comes from a client. Its arguments are as follows.</p>
<pre>  * object reference
  * dn
  * a list formatted as follows
    ({ "ADD" | "DELETE" | "REPLACE" },
     attributetype, value...)...</pre>

    </dd>
  </dl>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>add</strong></dt>
    <dd>
    <p>This method is called when a add request comes from a client. Its arguments are as follows.</p>
<pre>  * object reference
  * entry in string format</pre>

    </dd>
  </dl>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>modrdn</strong></dt>
    <dd>
    <p>This method is called when a modrdn request comes from a client. Its arguments are as follows.</p>
<pre>  * object reference
  * dn
  * new rdn
  * delete old dn flag (1 means yes)</pre>

    </dd>
  </dl>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>delete</strong></dt>
    <dd>
    <p>This method is called when a delete request comes from a client. Its arguments are as follows.</p>
<pre>  * object reference
  * dn</pre>

    </dd>
  </dl>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>config</strong></dt>
    <dd>
    <p>This method is called once for each perlModuleConfig line in the <strong>slapd.conf</strong>(5) configuration file. Its arguments are as follows.</p>
<pre>  * object reference
  * array of arguments on line</pre>

    </dd>
  </dl>
<p class='spacer'>

  <p>Return value: nonzero if this is not a valid option.</p>
  <dl class='dl-vertical'>
    <dt><strong>init</strong></dt>
    <dd>
    <p>This method is called after backend is initialized. Its argument is as follows.</p>
<pre>  * object reference</pre>

    </dd>
  </dl>
<p class='spacer'>

<p>Return value: nonzero if initialization failed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">

  <p>These <strong>slapd.conf</strong> options apply to the PERL backend database. That is, they must follow a "database perl" line and come before any subsequent "backend" or "database" lines. Other database options are described in the <strong>slapd.conf</strong>(5) manual page.</p>
  <dl class='dl-vertical'>
    <dt><strong>perlModulePath /path/to/libs</strong></dt>
    <dd>
  <p>Add the path to the @INC variable.</p>
    </dd>
    <dt><strong>perlModule ModName</strong></dt>
    <dd>
  <p>`Use' the module name ModName from ModName.pm</p>
    </dd>
    <dt><strong>filterSearchResults</strong></dt>
    <dd>
  <p>Search results are candidates that need to be filtered (with the filter in the search request), rather than search results to be returned directly to the client.</p>
    </dd>
    <dt><strong>perlModuleConfig &lt;arguments&gt;</strong></dt>
    <dd>
  <p>Invoke the module's config method with the given arguments.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<p>There is an example Perl module `SampleLDAP' in the slapd/back-perl/ directory in the OpenLDAP source tree.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESS CONTROL</h2>
        <div class="sectioncontent">

<p>The <strong>perl</strong> backend does not honor any of the access control semantics described in <strong>slapd.access</strong>(5); all access control is delegated to the underlying PERL scripting. Only <strong>read (=r)</strong> access to the <strong>entry</strong> pseudo-attribute and to the other attribute values of the entries returned by the <strong>search</strong> operation is honored, which is performed by the frontend.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNING</h2>
        <div class="sectioncontent">

<p>The interface of this backend to the perl module MAY change. Any suggestions would greatly be appreciated.</p>
<p class='spacer'>

<p>Note: in previous versions, any unrecognized lines in the slapd.conf file were passed to the perl module's config method. This behavior is deprecated (but still allowed for backward compatibility), and the perlModuleConfig directive should instead be used to invoke the module's config method. This compatibility feature will be removed at some future date.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt>ETCDIR/slapd.conf</dt>
    <dd>
  <p>default slapd configuration file</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>slapd.conf</strong>(5), <strong>slapd</strong>(8), <strong>perl</strong>(1).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slapd-passwd.5.html"><span aria-hidden="true">&larr;</span> slapd-passwd.5: /etc/passwd backend to slapd</a></li>
   <li class="next"><a href="slapd-relay.5.html">slapd-relay.5: relay backend to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
