<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapd-ldap - LDAP backend to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ldap backend to slapd">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapd-ldap<small> (5)</small></h1>
        <p class="lead">Ldap backend to slapd</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="/"><span itemprop="title">Carta.tech</span></a>
	</li>
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man5/"><span itemprop="title">File formats and conventions</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man5/slapd-ldap.5.html"><span itemprop="title">slapd-ldap</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p>ETCDIR/slapd.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The LDAP backend to <strong>slapd</strong>(8) is not an actual database; instead it acts as a proxy to forward incoming requests to another LDAP server. While processing requests it will also chase referrals, so that referrals are fully processed instead of being returned to the slapd client.</p>
<p class='spacer'>

<p>Sessions that explicitly Bind to the back-ldap database always create their own private connection to the remote LDAP server. Anonymous sessions will share a single anonymous connection to the remote server. For sessions bound through other mechanisms, all sessions with the same DN will share the same connection. This connection pooling strategy can enhance the proxy's efficiency by reducing the overhead of repeatedly making/breaking multiple connections.</p>
<p class='spacer'>

<p>The ldap database can also act as an information service, i.e. the identity of locally authenticated clients is asserted to the remote server, possibly in some modified form. For this purpose, the proxy binds to the remote server with some administrative identity, and, if required, authorizes the asserted identity. See the <em>idassert-</em>* rules below. The administrative identity of the proxy, on the remote server, must be allowed to authorize by means of appropriate <strong>authzTo</strong> rules; see <strong>slapd.conf</strong>(5) for details.</p>
<p class='spacer'>

<p>The proxy instance of <strong>slapd</strong>(8) must contain schema information for the attributes and objectClasses used in filters, request DNs and request-related data in general. It should also contain schema information for the data returned by the proxied server. It is the responsibility of the proxy administrator to keep the schema of the proxy lined up with that of the proxied server.</p>
<p class='spacer'>

<p class='spacer'>

<p>Note: When looping back to the same instance of <strong>slapd</strong>(8), each connection requires a new thread; as a consequence, <strong>slapd</strong>(8) must be compiled with thread support, and the <strong>threads</strong> parameter may need some tuning; in those cases, one may consider using <a href="../man5/slapd-relay.5.html"><strong>slapd-relay</strong>(5)</a> instead, which performs the relayed operation internally and thus reuses the same connection.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">

<p>These <strong>slapd.conf</strong> options apply to the LDAP backend database. That is, they must follow a "database ldap" line and come before any subsequent "backend" or "database" lines. Other database options are described in the <strong>slapd.conf</strong>(5) manual page.</p>
<p class='spacer'>

<p class='spacer'>

<p>Note: In early versions of back-ldap it was recommended to always set</p>
<p class='spacer'>

<pre>lastmod  off</pre>

<p class='spacer'>

<p>for <strong>ldap</strong> and <strong>meta</strong> databases. This was required because operational attributes related to entry creation and modification should not be proxied, as they could be mistakenly written to the target server(s), generating an error. The current implementation automatically sets lastmod to <strong>off</strong>, so its use is redundant and should be omitted.</p>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>uri &lt;ldapurl&gt;</strong></dt>
    <dd>
  <p>LDAP server to use.  Multiple URIs can be set in a single <strong>ldapurl</strong> argument, resulting in the underlying library automatically calling the first server of the list that responds, e.g.</p>
<p class='spacer'>

  <p><strong>uri "ldap://host/ ldap://backup-host/"</strong></p>
<p class='spacer'>

    <p>The URI list is space- or comma-separated. Whenever the server that responds is not the first one in the list, the list is rearranged and the responsive server is moved to the head, so that it will be first contacted the next time a connection needs to be created. <strong>acl-bind</strong> <strong>bindmethod=simple|sasl [binddn=&lt;simple DN&gt;] [credentials=&lt;simple password&gt;]</strong> <strong>[saslmech=&lt;SASL mech&gt;] [secprops=&lt;properties&gt;] [realm=&lt;realm&gt;]</strong> <strong>[authcId=&lt;authentication ID&gt;] [authzId=&lt;authorization ID&gt;]</strong> <strong>[starttls=no|yes|critical]</strong> <strong>[tls_cert=&lt;file&gt;]</strong> <strong>[tls_key=&lt;file&gt;]</strong> <strong>[tls_cacert=&lt;file&gt;]</strong> <strong>[tls_cacertdir=&lt;path&gt;]</strong> <strong>[tls_reqcert=never|allow|try|demand]</strong> <strong>[tls_cipher_suite=&lt;ciphers&gt;]</strong> <strong>[tls_protocol_min=&lt;major&gt;[.&lt;minor&gt;]]</strong> <strong>[tls_crlcheck=none|peer|all]</strong> Allows to define the parameters of the authentication method that is internally used by the proxy to collect info related to access control, and whenever an operation occurs with the identity of the rootdn of the LDAP proxy database. The identity defined by this directive, according to the properties associated to the authentication method, is supposed to have read access on the target server to attributes used on the proxy for ACL checking.</p>
<p class='spacer'>

    <p>There is no risk of giving away such values; they are only used to check permissions. The default is to use <strong>simple</strong> bind, with empty <em>binddn</em> and <em>credentials</em>, which means that the related operations will be performed anonymously. If not set, and if <strong>idassert-bind</strong> is defined, this latter identity is used instead.  See <strong>idassert-bind</strong> for details.</p>
<p class='spacer'>

    <p>The connection between the proxy database and the remote server associated to this identity is cached regardless of the lifespan of the client-proxy connection that first established it.</p>
<p class='spacer'>

    <p><strong>This identity is not implicitly used by the proxy</strong> <strong>when the client connects anonymously.</strong> The <strong>idassert-bind</strong> feature, instead, in some cases can be crafted to implement that behavior, which is <em>intrinsically unsafe and should be used with extreme care</em>. This directive obsoletes <strong>acl-authcDN</strong>, and <strong>acl-passwd</strong>.</p>
<p class='spacer'>

  <p>The TLS settings default to the same as the main slapd TLS settings, except for <strong>tls_reqcert</strong> which defaults to "demand".</p>
<p class='spacer'>

    </dd>
    <dt><strong>cancel {ABANDON|ignore|exop[-discover]}</strong></dt>
    <dd>
  <p>Defines how to handle operation cancellation. By default, <strong>abandon</strong> is invoked, so the operation is abandoned immediately. If set to <strong>ignore</strong>, no action is taken and any further response is ignored; this may result in further response messages to be queued for that connection, so it is recommended that long lasting connections are timed out either by <em>idle-timeout</em> or <em>conn-ttl</em>, so that resources eventually get released. If set to <strong>exop</strong>, a <em>cancel</em> operation (RFC 3909) is issued, resulting in the cancellation of the current operation; the <em>cancel</em> operation waits for remote server response, so its use may not be recommended. If set to <strong>exop-discover</strong>, support of the <em>cancel</em> extended operation is detected by reading the remote server's root DSE.</p>
<p class='spacer'>

    </dd>
    <dt><strong>chase-referrals {YES|no}</strong></dt>
    <dd>
  <p>enable/disable automatic referral chasing, which is delegated to the underlying libldap, with rebinding eventually performed if the <strong>rebind-as-user</strong> directive is used.  The default is to chase referrals.</p>
<p class='spacer'>

    </dd>
    <dt><strong>conn-ttl &lt;time&gt;</strong></dt>
    <dd>
  <p>This directive causes a cached connection to be dropped and recreated after a given ttl, regardless of being idle or not.</p>
<p class='spacer'>

    </dd>
    <dt><strong>idassert-authzFrom &lt;authz-regexp&gt;</strong></dt>
    <dd>
  <p>if defined, selects what <em>local</em> identities are authorized to exploit the identity assertion feature. The string <strong>&lt;authz-regexp&gt;</strong> follows the rules defined for the <em>authzFrom</em> attribute. See <strong>slapd.conf</strong>(5), section related to <strong>authz-policy</strong>, for details on the syntax of this field.</p>
<p class='spacer'>

    <p><strong>idassert-bind</strong> <strong>bindmethod=none|simple|sasl [binddn=&lt;simple DN&gt;] [credentials=&lt;simple password&gt;]</strong> <strong>[saslmech=&lt;SASL mech&gt;] [secprops=&lt;properties&gt;] [realm=&lt;realm&gt;]</strong> <strong>[authcId=&lt;authentication ID&gt;] [authzId=&lt;authorization ID&gt;]</strong> <strong>[authz={native|proxyauthz}] [mode=&lt;mode&gt;] [flags=&lt;flags&gt;]</strong> <strong>[starttls=no|yes|critical]</strong> <strong>[tls_cert=&lt;file&gt;]</strong> <strong>[tls_key=&lt;file&gt;]</strong> <strong>[tls_cacert=&lt;file&gt;]</strong> <strong>[tls_cacertdir=&lt;path&gt;]</strong> <strong>[tls_reqcert=never|allow|try|demand]</strong> <strong>[tls_cipher_suite=&lt;ciphers&gt;]</strong> <strong>[tls_protocol_min=&lt;version&gt;]</strong> <strong>[tls_crlcheck=none|peer|all]</strong> Allows to define the parameters of the authentication method that is internally used by the proxy to authorize connections that are authenticated by other databases. Direct binds are always proxied without any idassert handling.</p>
<p class='spacer'>

    <p>The identity defined by this directive, according to the properties associated to the authentication method, is supposed to have auth access on the target server to attributes used on the proxy for authentication and authorization, and to be allowed to authorize the users. This requires to have <strong>proxyAuthz</strong> privileges on a wide set of DNs, e.g. <strong>authzTo=dn.subtree:</strong>, and the remote server to have <strong>authz-policy</strong> set to <strong>to</strong> or <strong>both</strong>. See <strong>slapd.conf</strong>(5) for details on these statements and for remarks and drawbacks about their usage. The supported bindmethods are</p>
<p class='spacer'>

    <p><strong>none|simple|sasl</strong></p>
<p class='spacer'>

    <p>where <strong>none</strong> is the default, i.e. no <em>identity assertion</em> is performed.</p>
<p class='spacer'>

    <p>The authz parameter is used to instruct the SASL bind to exploit <strong>native</strong> SASL authorization, if available; since connections are cached, this should only be used when authorizing with a fixed identity (e.g. by means of the <strong>authzDN</strong> or <strong>authzID</strong> parameters). Otherwise, the default <strong>proxyauthz</strong> is used, i.e. the proxyAuthz control (Proxied Authorization, RFC 4370) is added to all operations.</p>
<p class='spacer'>

    <p>The supported modes are:</p>
<p class='spacer'>

    <p><strong>&lt;mode&gt; := {legacy|anonymous|none|self}</strong></p>
<p class='spacer'>

    <p>If <strong>&lt;mode&gt;</strong> is not present, and <strong>authzId</strong> is given, the proxy always authorizes that identity. <strong>&lt;authorization ID&gt;</strong> can be</p>
<p class='spacer'>

    <p><strong>u:&lt;user&gt;</strong></p>
<p class='spacer'>

    <p><strong>[dn:]&lt;DN&gt;</strong></p>
<p class='spacer'>

    <p>The former is supposed to be expanded by the remote server according to the authz rules; see <strong>slapd.conf</strong>(5) for details. In the latter case, whether or not the <strong>dn:</strong> prefix is present, the string must pass DN validation and normalization.</p>
<p class='spacer'>

    <p>The default mode is <strong>legacy</strong>, which implies that the proxy will either perform a simple bind as the <em>authcDN</em> or a SASL bind as the <em>authcID</em> and assert the client's identity when it is not anonymous. The other modes imply that the proxy will always either perform a simple bind as the <em>authcDN</em> or a SASL bind as the <em>authcID</em>, unless restricted by <strong>idassert-authzFrom</strong> rules (see below), in which case the operation will fail; eventually, it will assert some other identity according to <strong>&lt;mode&gt;</strong>. Other identity assertion modes are <strong>anonymous</strong> and <strong>self</strong>, which respectively mean that the <em>empty</em> or the <em>client</em>'s identity will be asserted; <strong>none</strong>, which means that no proxyAuthz control will be used, so the <em>authcDN</em> or the <em>authcID</em> identity will be asserted. For all modes that require the use of the <em>proxyAuthz</em> control, on the remote server the proxy identity must have appropriate <em>authzTo</em> permissions, or the asserted identities must have appropriate <em>authzFrom</em> permissions.  Note, however, that the ID assertion feature is mostly useful when the asserted identities do not exist on the remote server.</p>
<p class='spacer'>

    <p>Flags can be</p>
<p class='spacer'>

    <p><strong>override,[non-]prescriptive,proxy-authz-[non-]critical,dn-{authzid|whoami}</strong></p>
<p class='spacer'>

    <p>When the <strong>override</strong> flag is used, identity assertion takes place even when the database is authorizing for the identity of the client, i.e. after binding with the provided identity, and thus authenticating it, the proxy performs the identity assertion using the configured identity and authentication method.</p>
<p class='spacer'>

    <p>When the <strong>prescriptive</strong> flag is used (the default), operations fail with <em>inappropriateAuthentication</em> for those identities whose assertion is not allowed by the <strong>idassert-authzFrom</strong> patterns. If the <strong>non-prescriptive</strong> flag is used, operations are performed anonymously for those identities whose assertion is not allowed by the <strong>idassert-authzFrom</strong> patterns.</p>
<p class='spacer'>

    <p>When the <strong>proxy-authz-non-critical</strong> flag is used (the default), the proxyAuthz control is not marked as critical, in violation of RFC 4370.  Use of <strong>proxy-authz-critical</strong> is recommended.</p>
<p class='spacer'>

    <p>When the <strong>dn-authzid</strong> flag is used, RFC 3829 LDAP Authorization Identity Controls is used to retrieve the identity associated to the SASL identity; when the <strong>dn-whoami</strong> flag is used, RFC 4532 LDAP Who am I? Operation is performed after the bind for the same purpose.</p>
<p class='spacer'>

    <p>The TLS settings default to the same as the main slapd TLS settings, except for <strong>tls_reqcert</strong> which defaults to "demand".</p>
<p class='spacer'>

    <p>The identity associated to this directive is also used for privileged operations whenever <strong>idassert-bind</strong> is defined and <strong>acl-bind</strong> is not.  See <strong>acl-bind</strong> for details.</p>
<p class='spacer'>

  <p>This directive obsoletes <strong>idassert-authcDN</strong>, <strong>idassert-passwd</strong>, <strong>idassert-mode</strong>, and <strong>idassert-method</strong>.</p>
<p class='spacer'>

    </dd>
    <dt><strong>idassert-passthru &lt;authz-regexp&gt;</strong></dt>
    <dd>
  <p>if defined, selects what <em>local</em> identities bypass the identity assertion feature. Those identities need to be known by the remote host. The string <strong>&lt;authz-regexp&gt;</strong> follows the rules defined for the <em>authzFrom</em> attribute. See <strong>slapd.conf</strong>(5), section related to <strong>authz-policy</strong>, for details on the syntax of this field.</p>
<p class='spacer'>

    </dd>
    <dt><strong>idle-timeout &lt;time&gt;</strong></dt>
    <dd>
  <p>This directive causes a cached connection to be dropped an recreated after it has been idle for the specified time.</p>
<p class='spacer'>

    </dd>
    <dt><strong>keepalive &lt;idle&gt;:&lt;probes&gt;:&lt;interval&gt;</strong></dt>
    <dd>
  <p>The <strong>keepalive</strong> parameter sets the values of <em>idle</em>, <em>probes</em>, and <em>interval</em> used to check whether a socket is alive; <em>idle</em> is the number of seconds a connection needs to remain idle before TCP starts sending keepalive probes; <em>probes</em> is the maximum number of keepalive probes TCP should send before dropping the connection; <em>interval</em> is interval in seconds between individual keepalive probes. Only some systems support the customization of these values; the <strong>keepalive</strong> parameter is ignored otherwise, and system-wide settings are used.</p>
<p class='spacer'>

    </dd>
    <dt><strong>network-timeout &lt;time&gt;</strong></dt>
    <dd>
  <p>Sets the network timeout value after which <a href="../man2/poll.2.html"><strong>poll</strong>(2)</a>/<a href="../man2/select.2.html"><strong>select</strong>(2)</a> following a <a href="../man2/connect.2.html"><strong>connect</strong>(2)</a> returns in case of no activity. The value is in seconds, and it can be specified as for <strong>idle-timeout</strong>.</p>
<p class='spacer'>

    </dd>
    <dt><strong>norefs &lt;NO|yes&gt;</strong></dt>
    <dd>
  <p>If <strong>yes</strong>, do not return search reference responses. By default, they are returned unless request is LDAPv2.</p>
<p class='spacer'>

    </dd>
    <dt><strong>noundeffilter &lt;NO|yes&gt;</strong></dt>
    <dd>
  <p>If <strong>yes</strong>, return success instead of searching if a filter is undefined or contains undefined portions. By default, the search is propagated after replacing undefined portions with <strong>(!(objectClass=*))</strong>, which corresponds to the empty result set.</p>
<p class='spacer'>

    </dd>
    <dt><strong>onerr {CONTINUE|stop}</strong></dt>
    <dd>
  <p>This directive allows to select the behavior in case an error is returned by the remote server during a search. The default, <strong>continue</strong>, consists in returning success. If the value is set to <strong>stop</strong>, the error is returned to the client.</p>
<p class='spacer'>

    </dd>
    <dt><strong>protocol-version {0,2,3}</strong></dt>
    <dd>
  <p>This directive indicates what protocol version must be used to contact the remote server. If set to 0 (the default), the proxy uses the same protocol version used by the client, otherwise the requested protocol is used. The proxy returns <em>unwillingToPerform</em> if an operation that is incompatible with the requested protocol is attempted.</p>
<p class='spacer'>

    </dd>
    <dt><strong>proxy-whoami {NO|yes}</strong></dt>
    <dd>
  <p>Turns on proxying of the WhoAmI extended operation. If this option is given, back-ldap will replace slapd's original WhoAmI routine with its own. On slapd sessions that were authenticated by back-ldap, the WhoAmI request will be forwarded to the remote LDAP server. Other sessions will be handled by the local slapd, as before. This option is mainly useful in conjunction with Proxy Authorization.</p>
<p class='spacer'>

    </dd>
    <dt><strong>quarantine &lt;interval&gt;,&lt;num&gt;[;&lt;interval&gt;,&lt;num&gt;[...]]</strong></dt>
    <dd>
  <p>Turns on quarantine of URIs that returned <em>LDAP_UNAVAILABLE</em>, so that an attempt to reconnect only occurs at given intervals instead of any time a client requests an operation. The pattern is: retry only after at least <em>interval</em> seconds elapsed since last attempt, for exactly <em>num</em> times; then use the next pattern. If <em>num</em> for the last pattern is "<strong>+</strong>", it retries forever; otherwise, no more retries occur. The process can be restarted by resetting the <em>olcDbQuarantine</em> attribute of the database entry in the configuration backend.</p>
<p class='spacer'>

    </dd>
    <dt><strong>rebind-as-user {NO|yes}</strong></dt>
    <dd>
  <p>If this option is given, the client's bind credentials are remembered for rebinds, when trying to re-establish a broken connection, or when chasing a referral, if <strong>chase-referrals</strong> is set to <em>yes</em>.</p>
<p class='spacer'>

    </dd>
    <dt><strong>session-tracking-request {NO|yes}</strong></dt>
    <dd>
  <p>Adds session tracking control for all requests. The client's IP and hostname, and the identity associated to each request, if known, are sent to the remote server for informational purposes. This directive is incompatible with setting <em>protocol-version</em> to 2.</p>
<p class='spacer'>

    </dd>
    <dt><strong>single-conn {NO|yes}</strong></dt>
    <dd>
  <p>Discards current cached connection when the client rebinds.</p>
<p class='spacer'>

    </dd>
    <dt><strong>t-f-support {NO|yes|discover}</strong></dt>
    <dd>
  <p>enable if the remote server supports absolute filters (see <em>RFC 4526</em> for details). If set to <strong>discover</strong>, support is detected by reading the remote server's root DSE.</p>
<p class='spacer'>

    </dd>
    <dt><strong>timeout [&lt;op&gt;=]&lt;val&gt; [...]</strong></dt>
    <dd>
  <p>This directive allows to set per-operation timeouts. Operations can be</p>
<p class='spacer'>

  <p><strong>&lt;op&gt; ::= bind, add, delete, modrdn, modify, compare, search</strong></p>
<p class='spacer'>

  <p>The overall duration of the <strong>search</strong> operation is controlled either by the <strong>timelimit</strong> parameter or by server-side enforced time limits (see <strong>timelimit</strong> and <strong>limits</strong> in <strong>slapd.conf</strong>(5) for details). This <strong>timeout</strong> parameter controls how long the target can be irresponsive before the operation is aborted. Timeout is meaningless for the remaining operations, <strong>unbind</strong> and <strong>abandon</strong>, which do not imply any response, while it is not yet implemented in currently supported <strong>extended</strong> operations. If no operation is specified, the timeout <strong>val</strong> affects all supported operations.</p>
<p class='spacer'>

  <p>Note: if the timelimit is exceeded, the operation is cancelled (according to the <strong>cancel</strong> directive); the protocol does not provide any means to rollback operations, so the client will not be notified about the result of the operation, which may eventually succeeded or not. In case the timeout is exceeded during a bind operation, the connection is destroyed, according to RFC4511.</p>
<p class='spacer'>

  <p>Note: in some cases, this backend may issue binds prior to other operations (e.g. to bind anonymously or with some prescribed identity according to the <strong>idassert-bind</strong> directive). In this case, the timeout of the operation that resulted in the bind is used.</p>
<p class='spacer'>

    <p><strong>tls {[try-]start|[try-]propagate|ldaps}</strong> <strong>[tls_cert=&lt;file&gt;]</strong> <strong>[tls_key=&lt;file&gt;]</strong> <strong>[tls_cacert=&lt;file&gt;]</strong> <strong>[tls_cacertdir=&lt;path&gt;]</strong> <strong>[tls_reqcert=never|allow|try|demand]</strong> <strong>[tls_cipher_suite=&lt;ciphers&gt;]</strong> <strong>[tls_crlcheck=none|peer|all]</strong> Specify the use of TLS when a regular connection is initialized. The StartTLS extended operation will be used unless the URI directive protocol scheme is <strong>ldaps://</strong>. In that case this keyword may only be set to "ldaps" and the StartTLS operation will not be used. <strong>propagate</strong> issues the StartTLS operation only if the original connection did. The <strong>try-</strong> prefix instructs the proxy to continue operations if the StartTLS operation failed; its use is <strong>not</strong> recommended.</p>
<p class='spacer'>

  <p>The TLS settings default to the same as the main slapd TLS settings, except for <strong>tls_reqcert</strong> which defaults to "demand".</p>
<p class='spacer'>

    </dd>
    <dt><strong>use-temporary-conn {NO|yes}</strong></dt>
    <dd>
  <p>when set to <strong>yes</strong>, create a temporary connection whenever competing with other threads for a shared one; otherwise, wait until the shared connection is available.</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BACKWARD COMPATIBILITY</h2>
        <div class="sectioncontent">

<p>The LDAP backend has been heavily reworked between releases 2.2 and 2.3, and subsequently between 2.3 and 2.4. As a side-effect, some of the traditional directives have been deprecated and should be no longer used, as they might disappear in future releases.</p>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>acl-authcDN &lt;administrative DN for access control purposes&gt;</strong></dt>
    <dd>
  <p>Formerly known as the <strong>binddn</strong>, it is the DN that is used to query the target server for acl checking; it is supposed to have read access on the target server to attributes used on the proxy for acl checking. There is no risk of giving away such values; they are only used to check permissions.</p>
<p class='spacer'>

  <p><strong>The acl-authcDN identity is by no means implicitly used by the proxy</strong> <strong>when the client connects anonymously.</strong> The <strong>idassert-*</strong> feature can be used (at own risk) for that purpose instead.</p>
<p class='spacer'>

  <p>This directive is obsoleted by the <strong>binddn</strong> arg of <strong>acl-bind</strong> when <em>bindmethod</em>=<strong>simple</strong>, and will be dismissed in the future.</p>
<p class='spacer'>

    </dd>
    <dt><strong>acl-passwd &lt;password&gt;</strong></dt>
    <dd>
  <p>Formerly known as the <strong>bindpw</strong>, it is the password used with the above <strong>acl-authcDN</strong> directive. This directive is obsoleted by the <strong>credentials</strong> arg of <strong>acl-bind</strong> when <em>bindmethod</em>=<strong>simple</strong>, and will be dismissed in the future.</p>
<p class='spacer'>

    </dd>
    <dt><strong>idassert-authcDN &lt;administrative DN for proxyAuthz purposes&gt;</strong></dt>
    <dd>
  <p>DN which is used to propagate the client's identity to the target by means of the proxyAuthz control when the client does not belong to the DIT fragment that is being proxied by back-ldap. This directive is obsoleted by the <strong>binddn</strong> arg of <strong>idassert-bind</strong> when <em>bindmethod</em>=<strong>simple</strong>, and will be dismissed in the future.</p>
<p class='spacer'>

    </dd>
    <dt><strong>idassert-passwd &lt;password&gt;</strong></dt>
    <dd>
  <p>Password used with the <strong>idassert-authcDN</strong> above. This directive is obsoleted by the <strong>crendentials</strong> arg of <strong>idassert-bind</strong> when <em>bindmethod</em>=<strong>simple</strong>, and will be dismissed in the future.</p>
<p class='spacer'>

    </dd>
    <dt><strong>idassert-mode &lt;mode&gt; [&lt;flags&gt;]</strong></dt>
    <dd>
  <p>defines what type of <em>identity assertion</em> is used. This directive is obsoleted by the <strong>mode</strong> arg of <strong>idassert-bind</strong>, and will be dismissed in the future.</p>
<p class='spacer'>

    </dd>
    <dt><strong>idassert-method &lt;method&gt; [&lt;saslargs&gt;]</strong></dt>
    <dd>
  <p>This directive is obsoleted by the <strong>bindmethod</strong> arg of <strong>idassert-bind</strong>, and will be dismissed in the future.</p>
<p class='spacer'>

    </dd>
    <dt><strong>port &lt;port&gt;</strong></dt>
    <dd>
  <p>this directive is no longer supported.  Use the <strong>uri</strong> directive as described above.</p>
<p class='spacer'>

    </dd>
    <dt><strong>server &lt;hostname[:port]&gt;</strong></dt>
    <dd>
  <p>this directive is no longer supported.  Use the <strong>uri</strong> directive as described above.</p>
<p class='spacer'>

    </dd>
    <dt><strong>suffixmassage, map, rewrite*</strong></dt>
    <dd>
  <p>These directives are no longer supported by back-ldap; their functionality is now delegated to the <strong>rwm</strong> overlay.  Essentially, add a statement</p>
<p class='spacer'>

  <p><strong>overlay rwm</strong></p>
<p class='spacer'>

  <p>first, and prefix all rewrite/map statements with <strong>rwm-</strong> to obtain the original behavior. See <a href="../man5/slapo-rwm.5.html"><strong>slapo-rwm</strong>(5)</a> for details.</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESS CONTROL</h2>
        <div class="sectioncontent">

<p>The <strong>ldap</strong> backend does not honor all ACL semantics as described in <strong>slapd.access</strong>(5). In general, access checking is delegated to the remote server(s). Only <strong>read (=r)</strong> access to the <strong>entry</strong> pseudo-attribute and to the other attribute values of the entries returned by the <strong>search</strong> operation is honored, which is performed by the frontend.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OVERLAYS</h2>
        <div class="sectioncontent">

<p>The LDAP backend provides basic proxying functionalities to many overlays. The <strong>chain</strong> overlay, described in <a href="../man5/slapo-chain.5.html"><strong>slapo-chain</strong>(5)</a>, and the <strong>translucent</strong> overlay, described in <a href="../man5/slapo-translucent.5.html"><strong>slapo-translucent</strong>(5)</a>, deserve a special mention.</p>
<p class='spacer'>

<p>Conversely, there are many overlays that are best used in conjunction with the LDAP backend. The <strong>proxycache</strong> overlay allows caching of LDAP search requests (queries) in a local database. See <a href="../man5/slapo-pcache.5.html"><strong>slapo-pcache</strong>(5)</a> for details. The <strong>rwm</strong> overlay provides DN rewrite and attribute/objectClass mapping capabilities to the underlying database. See <a href="../man5/slapo-rwm.5.html"><strong>slapo-rwm</strong>(5)</a> for details.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt>ETCDIR/slapd.conf</dt>
    <dd>
  <p>default slapd configuration file</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>slapd.conf</strong>(5), <strong>slapd-config</strong>(5), <a href="../man5/slapd-meta.5.html"><strong>slapd-meta</strong>(5)</a>, <a href="../man5/slapo-chain.5.html"><strong>slapo-chain</strong>(5)</a>, <a href="../man5/slapo-pcache.5.html"><strong>slapo-pcache</strong>(5)</a>, <a href="../man5/slapo-rwm.5.html"><strong>slapo-rwm</strong>(5)</a>, <a href="../man5/slapo-translucent.5.html"><strong>slapo-translucent</strong>(5)</a>, <strong>slapd</strong>(8), <strong>ldap</strong>(3).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Howard Chu, with enhancements by Pierangelo Masarati</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slapd-dnssrv.5.html"><span aria-hidden="true">&larr;</span> slapd-dnssrv.5: DNS SRV referral backend to slapd</a></li>
   <li class="next"><a href="slapd-ldif.5.html">slapd-ldif.5: LDIF backend to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
