<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>locatedb: Front-compressed file name database</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Front-compressed file name database">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">locatedb<small> (5)</small></h1>
        <p class="lead">Front-compressed file name database</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/locatedb.5.html">
      <span itemprop="name">locatedb: Front-compressed file name database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/findutils/">
      <span itemprop="name">findutils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/locatedb.5.html">
      <span itemprop="name">locatedb: Front-compressed file name database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>This manual page documents the format of file name databases for the GNU version of <strong>locate</strong>. The file name databases contain lists of files that were in particular directory trees when the databases were last updated.</p>
<p class='spacer'>

<p>There can be multiple databases.  Users can select which databases <strong>locate</strong> searches using an environment variable or command line option; see <a href="../man1/locate.1.html"><strong>locate</strong>(1)</a>.  The system administrator can choose the file name of the default database, the frequency with which the databases are updated, and the directories for which they contain entries.  Normally, file name databases are updated by running the <strong>updatedb</strong> program periodically, typically nightly; see <a href="../man1/updatedb.1.html"><strong>updatedb</strong>(1)</a>.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GNU LOCATE02 database format</h2>
        <div class="sectioncontent">

<p>This is the default format of databases produced by <strong>updatedb</strong>. The <strong>updatedb</strong> program runs <strong>frcode</strong> to compress the list of file names using front-compression, which reduces the database size by a factor of 4 to 5.  Front-compression (also known as incremental encoding) works as follows.</p>
<p class='spacer'>

<p>The database entries are a sorted list (case-insensitively, for users' convenience).  Since the list is sorted, each entry is likely to share a prefix (initial string) with the previous entry.  Each database entry begins with an signed offset-differential count byte, which is the additional number of characters of prefix of the preceding entry to use beyond the number that the preceding entry is using of its predecessor.  (The counts can be negative.)  Following the count is a null-terminated ASCII remainder &ndash; the part of the name that follows the shared prefix.</p>
<p class='spacer'>

<p>If the offset-differential count is larger than can be stored in a signed byte (&plusmn;127), the byte has the value 0x80 (binary 10000000) and the actual count follows in a 2-byte word, with the high byte first (network byte order).  This count can also be negative (the sign bit being in the first of the two bytes).</p>
<p class='spacer'>

<p>Every database begins with a dummy entry for a file called `LOCATE02', which <strong>locate</strong> checks for to ensure that the database file has the correct format; it ignores the entry in doing the search.</p>
<p class='spacer'>

<p>Databases cannot be concatenated together, even if the first (dummy) entry is trimmed from all but the first database.  This is because the offset-differential count in the first entry of the second and following databases will be wrong.</p>
<p class='spacer'>

<p>In the future, the data within the locate database may not be sorted in any particular order.  To obtain sorted results, pipe the output of <strong>locate</strong> through <strong>sort -f</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">slocate database format</h2>
        <div class="sectioncontent">

<p>The <strong>slocate</strong> program uses a database format similar to, but not quite the same as, GNU <strong>locate</strong>. The first byte of the database specifies its <em>security</em> <em>level</em>. If the security level is 0, <strong>slocate</strong> will read, match and print filenames on the basis of the information in the database only.  However, if the security level byte is 1, <strong>slocate</strong> omits entries from its output if the invoking user is unable to access them.  The second byte of the database is zero.  The second byte is followed by the first database entry.  The first entry in the database is not preceded by any differential count or dummy entry.  Instead the differential count for the first item is assumed to be zero.</p>
<p class='spacer'>

<p>Starting with the second entry (if any) in the database, data is interpreted as for the GNU LOCATE02 format.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Old Locate Database format</h2>
        <div class="sectioncontent">

<p>There is also an old database format, used by Unix <strong>locate</strong> and <strong>find</strong> programs and earlier releases of the GNU ones.  <strong>updatedb</strong> runs programs called <strong>bigram</strong> and <strong>code</strong> to produce old-format databases.  The old format differs from the above description in the following ways.  Instead of each entry starting with an offset-differential count byte and ending with a null, byte values from 0 through 28 indicate offset-differential counts from -14 through 14.  The byte value indicating that a long offset-differential count follows is 0x1e (30), not 0x80.  The long counts are stored in host byte order, which is not necessarily network byte order, and host integer word size, which is usually 4 bytes.  They also represent a count 14 less than their value.  The database lines have no termination byte; the start of the next line is indicated by its first byte having a value \(&lt;= 30.</p>
<p class='spacer'>

<p>In addition, instead of starting with a dummy entry, the old database format starts with a 256 byte table containing the 128 most common bigrams in the file list.  A bigram is a pair of adjacent bytes. Bytes in the database that have the high bit set are indexes (with the high bit cleared) into the bigram table.  The bigram and offset-differential count coding makes these databases 20&ndash;25% smaller than the new format, but makes them not 8-bit clean.  Any byte in a file name that is in the ranges used for the special codes is replaced in the database by a question mark, which not coincidentally is the shell wildcard to match a single character.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
Input to <strong>frcode</strong>:
/usr/src
/usr/src/cmd/aardvark.c
/usr/src/cmd/armadillo.c
/usr/tmp/zoo

Length of the longest prefix of the preceding entry to share:
0 /usr/src
8 /cmd/aardvark.c
14 rmadillo.c
5 tmp/zoo
</pre>

  <p>Output from <strong>frcode</strong>, with trailing nulls changed to newlines and count bytes made printable:</p>
<pre>0 LOCATE02
0 /usr/src
8 /cmd/aardvark.c
6 rmadillo.c
-9 tmp/zoo

(6 = 14 - 8, and -9 = 5 - 14)</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man1/find.1.html"><strong>find</strong>(1)</a>, <a href="../man1/locate.1.html"><strong>locate</strong>(1)</a>, <a href="../man5/locatedb.5.html"><strong>locatedb</strong>(5)</a>, <a href="../man1/xargs.1.html"><strong>xargs</strong>(1)</a>, <strong>Finding Files</strong> (on-line in Info, or printed)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>The best way to report a bug is to use the form at http://savannah.gnu.org/bugs/?group=findutils. The reason for this is that you will then be able to track progress in fixing the problem.   Other comments about <a href="../man1/locate.1.html"><strong>locate</strong>(1)</a> and about the findutils package in general can be sent to the <em>bug-findutils</em> mailing list.  To join the list, send email to <em>bug-findutils-request@gnu.org</em>.</p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="locale.5.html"><span aria-hidden="true">&larr;</span> locale.5: describes a locale definition file</a></li>
   <li class="next"><a href="login.defs.5.html">login.defs.5: shadow password suite configuration <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
