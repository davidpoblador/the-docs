<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xfs: Layout, mount options, and supported file attributes for the xfs filesystem</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Layout, mount options, and supported file attributes for the xfs filesystem">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xfs<small> (5)</small></h1>
        <p class="lead">Layout, mount options, and supported file attributes for the xfs filesystem</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/xfs.5.html">
      <span itemprop="name">xfs: Layout, mount options, and supported file attributes for the xfs filesystem</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xfsprogs/">
      <span itemprop="name">xfsprogs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/xfs.5.html">
      <span itemprop="name">xfs: Layout, mount options, and supported file attributes for the xfs filesystem</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>An XFS filesystem can reside on a regular disk partition or on a logical volume. An XFS filesystem has up to three parts: a data section, a log section, and a realtime section. Using the default <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> options, the realtime section is absent, and the log area is contained within the data section. The log section can be either separate from the data section or contained within it. The filesystem sections are divided into a certain number of <em>blocks</em>, whose size is specified at <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> time with the <strong>-b</strong> option.</p>
<p class='spacer'>

<p>The data section contains all the filesystem metadata (inodes, directories, indirect blocks) as well as the user file data for ordinary (non-realtime) files and the log area if the log is <em>internal</em> to the data section. The data section is divided into a number of <em>allocation groups</em>. The number and size of the allocation groups are chosen by <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> so that there is normally a small number of equal-sized groups. The number of allocation groups controls the amount of parallelism available in file and block allocation. It should be increased from the default if there is sufficient memory and a lot of allocation activity. The number of allocation groups should not be set very high, since this can cause large amounts of CPU time to be used by the filesystem, especially when the filesystem is nearly full. More allocation groups are added (of the original size) when <a href="../man8/xfs_growfs.8.html"><strong>xfs_growfs</strong>(8)</a> is run.</p>
<p class='spacer'>

<p>The log section (or area, if it is internal to the data section) is used to store changes to filesystem metadata while the filesystem is running until those changes are made to the data section. It is written sequentially during normal operation and read only during mount. When mounting a filesystem after a crash, the log is read to complete operations that were in progress at the time of the crash.</p>
<p class='spacer'>

<p>The realtime section is used to store the data of realtime files. These files had an attribute bit set through <a href="../man3/xfsctl.3.html"><strong>xfsctl</strong>(3)</a> after file creation, before any data was written to the file. The realtime section is divided into a number of <em>extents</em> of fixed size (specified at <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a> time). Each file in the realtime section has an extent size that is a multiple of the realtime section extent size.</p>
<p class='spacer'>

<p>Each allocation group contains several data structures. The first sector contains the superblock. For allocation groups after the first, the superblock is just a copy and is not updated after <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a>. The next three sectors contain information for block and inode allocation within the allocation group. Also contained within each allocation group are data structures to locate free blocks and inodes; these are located through the header structures.</p>
<p class='spacer'>

<p>Each XFS filesystem is labeled with a Universal Unique Identifier (UUID). The UUID is stored in every allocation group header and is used to help distinguish one XFS filesystem from another, therefore you should avoid using <strong>dd</strong>(1) or other block-by-block copying programs to copy XFS filesystems. If two XFS filesystems on the same machine have the same UUID, <strong>xfsdump</strong>(8) may become confused when doing incremental and resumed dumps. <strong>xfsdump</strong>(8) and <strong>xfsrestore</strong>(8) are recommended for making copies of XFS filesystems.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPERATIONS</h2>
        <div class="sectioncontent">

<p>Some functionality specific to the XFS filesystem is accessible to applications through the <a href="../man3/xfsctl.3.html"><strong>xfsctl</strong>(3)</a> and by-handle (see <strong>open_by_handle</strong>(3)) interfaces.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MOUNT OPTIONS</h2>
        <div class="sectioncontent">

  <p>The following XFS-specific mount options may be used when mounting an XFS filesystem. Other generic options may be used as well; refer to the <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> manual page for more details.</p>
  <dl class='dl-vertical'>
    <dt><strong>allocsize=size</strong></dt>
    <dd>
  <p>Sets the buffered I/O end-of-file preallocation size when doing delayed allocation writeout. Valid values for this option are page size (typically 4KiB) through to 1GiB, inclusive, in power-of-2 increments.</p>
<p class='spacer'>

  <p>The default behavior is for dynamic end-of-file preallocation size, which uses a set of heuristics to optimise the preallocation size based on the current allocation patterns within the file and the access patterns to the file. Specifying a fixed allocsize value turns off the dynamic behavior.</p>
    </dd>
    <dt><strong>attr2</strong>|<strong>noattr2</strong></dt>
    <dd>
  <p>The options enable/disable an "opportunistic" improvement to be made in the way inline extended attributes are stored on-disk.  When the new form is used for the first time when attr2 is selected (either when setting or removing extended attributes) the on-disk superblock feature bit field will be updated to reflect this format being in use.</p>
<p class='spacer'>

  <p>The default behavior is determined by the on-disk feature bit indicating that attr2 behavior is active. If either mount option it set, then that becomes the new default used by the filesystem.</p>
<p class='spacer'>

  <p>CRC enabled filesystems always use the attr2 format, and so will reject the noattr2 mount option if it is set.</p>
    </dd>
    <dt><strong>barrier</strong>|<strong>nobarrier</strong></dt>
    <dd>
  <p>Enables/disables the use of block layer write barriers for writes into the journal and for data integrity operations. This allows for drive level write caching to be enabled, for devices that support write barriers.</p>
<p class='spacer'>

  <p>Barriers are enabled by default.</p>
    </dd>
    <dt><strong>discard</strong>|<strong>nodiscard</strong></dt>
    <dd>
  <p>Enable/disable the issuing of commands to let the block device reclaim space freed by the filesystem.  This is useful for SSD devices, thinly provisioned LUNs and virtual machine images, but may have a performance impact.</p>
<p class='spacer'>

  <p>Note: It is currently recommended that you use the fstrim application to discard unused blocks rather than the discard mount option because the performance impact of this option is quite severe.  For this reason, nodiscard is the default.</p>
    </dd>
    <dt><strong>grpid</strong>|<strong>bsdgroups</strong>|<strong>nogrpid</strong>|<strong>sysvgroups</strong></dt>
    <dd>
  <p>These options define what group ID a newly created file gets.  When grpid is set, it takes the group ID of the directory in which it is created; otherwise it takes the fsgid of the current process, unless the directory has the setgid bit set, in which case it takes the gid from the parent directory, and also gets the setgid bit set if it is a directory itself.</p>
    </dd>
    <dt><strong>filestreams</strong></dt>
    <dd>
  <p>Make the data allocator use the filestreams allocation mode across the entire filesystem rather than just on directories configured to use it.</p>
    </dd>
    <dt><strong>ikeep</strong>|<strong>noikeep</strong></dt>
    <dd>
  <p>When ikeep is specified, XFS does not delete empty inode clusters and keeps them around on disk.  When noikeep is specified, empty inode clusters are returned to the free space pool.  noikeep is the default.</p>
    </dd>
    <dt><strong>inode32</strong>|<strong>inode64</strong></dt>
    <dd>
  <p>When inode32 is specified, it indicates that XFS limits inode creation to locations which will not result in inode numbers with more than 32 bits of significance.</p>
<p class='spacer'>

  <p>When inode64 is specified, it indicates that XFS is allowed to create inodes at any location in the filesystem, including those which will result in inode numbers occupying more than 32 bits of significance.</p>
<p class='spacer'>

  <p>inode32 is provided for backwards compatibility with older systems and applications, since 64 bits inode numbers might cause problems for some applications that cannot handle large inode numbers.  If applications are in use which do not handle inode numbers bigger than 32 bits, the inode32 option should be specified.</p>
<p class='spacer'>

  <p>For kernel v3.7 and later, inode64 is the default.</p>
    </dd>
    <dt><strong>largeio</strong>|<strong>nolargeio</strong></dt>
    <dd>
  <p>If "nolargeio" is specified, the optimal I/O reported in st_blksize by <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a> will be as small as possible to allow user applications to avoid inefficient read/modify/write I/O.  This is typically the page size of the machine, as this is the granularity of the page cache.</p>
<p class='spacer'>

  <p>If "largeio" specified, a filesystem that was created with a "swidth" specified will return the "swidth" value (in bytes) in st_blksize. If the filesystem does not have a "swidth" specified but does specify an "allocsize" then "allocsize" (in bytes) will be returned instead. Otherwise the behavior is the same as if "nolargeio" was specified.  nolargeio is the default.</p>
    </dd>
    <dt><strong>logbufs=value</strong></dt>
    <dd>
  <p>Set the number of in-memory log buffers.  Valid numbers range from 2&ndash;8 inclusive.</p>
<p class='spacer'>

  <p>The default value is 8 buffers.</p>
<p class='spacer'>

  <p>If the memory cost of 8 log buffers is too high on small systems, then it may be reduced at some cost to performance on metadata intensive workloads. The logbsize option below controls the size of each buffer and so is also relevant to this case.</p>
    </dd>
    <dt><strong>logbsize=value</strong></dt>
    <dd>
  <p>Set the size of each in-memory log buffer.  The size may be specified in bytes, or in kibibytes (KiB) with a "k" suffix. Valid sizes for version 1 and version 2 logs are 16384 (value=16k) and 32768 (value=32k).  Valid sizes for version 2 logs also include 65536 (value=64k), 131072 (value=128k) and 262144 (value=256k). The logbsize must be an integer multiple of the log stripe unit configured at mkfs time.</p>
<p class='spacer'>

  <p>The default value for version 1 logs is 32768, while the default value for version 2 logs is MAX(32768, log_sunit).</p>
    </dd>
    <dt><strong>logdev=device</strong> and <strong>rtdev=device</strong></dt>
    <dd>
  <p>Use an external log (metadata journal) and/or real-time device. An XFS filesystem has up to three parts: a data section, a log section, and a real-time section.  The real-time section is optional, and the log section can be separate from the data section or contained within it.</p>
    </dd>
    <dt><strong>noalign</strong></dt>
    <dd>
  <p>Data allocations will not be aligned at stripe unit boundaries. This is only relevant to filesystems created with non-zero data alignment parameters (sunit, swidth) by mkfs.</p>
    </dd>
    <dt><strong>norecovery</strong></dt>
    <dd>
  <p>The filesystem will be mounted without running log recovery. If the filesystem was not cleanly unmounted, it is likely to be inconsistent when mounted in "norecovery" mode. Some files or directories may not be accessible because of this. Filesystems mounted "norecovery" must be mounted read-only or the mount will fail.</p>
    </dd>
    <dt><strong>nouuid</strong></dt>
    <dd>
  <p>Don't check for double mounted file systems using the file system uuid.  This is useful to mount LVM snapshot volumes, and often used in combination with "norecovery" for mounting read-only snapshots.</p>
    </dd>
    <dt><strong>noquota</strong></dt>
    <dd>
  <p>Forcibly turns off all quota accounting and enforcement within the filesystem.</p>
    </dd>
    <dt><strong>uquota/usrquota/quota/uqnoenforce/qnoenforce</strong></dt>
    <dd>
  <p>User disk quota accounting enabled, and limits (optionally) enforced.  Refer to <a href="../man8/xfs_quota.8.html"><strong>xfs_quota</strong>(8)</a> for further details.</p>
    </dd>
    <dt><strong>gquota/grpquota/gqnoenforce</strong></dt>
    <dd>
  <p>Group disk quota accounting enabled and limits (optionally) enforced.  Refer to <a href="../man8/xfs_quota.8.html"><strong>xfs_quota</strong>(8)</a> for further details.</p>
    </dd>
    <dt><strong>pquota/prjquota/pqnoenforce</strong></dt>
    <dd>
  <p>Project disk quota accounting enabled and limits (optionally) enforced.  Refer to <a href="../man8/xfs_quota.8.html"><strong>xfs_quota</strong>(8)</a> for further details.</p>
    </dd>
    <dt><strong>sunit=value</strong> and <strong>swidth=value</strong></dt>
    <dd>
  <p>Used to specify the stripe unit and width for a RAID device or a stripe volume.  "value" must be specified in 512-byte block units. These options are only relevant to filesystems that were created with non-zero data alignment parameters.</p>
<p class='spacer'>

  <p>The sunit and swidth parameters specified must be compatible with the existing filesystem alignment characteristics.  In general, that means the only valid changes to sunit are increasing it by a power-of-2 multiple. Valid swidth values are any integer multiple of a valid sunit value.</p>
<p class='spacer'>

  <p>Typically the only time these mount options are necessary if after an underlying RAID device has had it's geometry modified, such as adding a new disk to a RAID5 lun and reshaping it.</p>
    </dd>
    <dt><strong>swalloc</strong></dt>
    <dd>
  <p>Data allocations will be rounded up to stripe width boundaries when the current end of file is being extended and the file size is larger than the stripe width size.</p>
    </dd>
    <dt><strong>wsync</strong></dt>
    <dd>
  <p>When specified, all filesystem namespace operations are executed synchronously. This ensures that when the namespace operation (create, unlink, etc) completes, the change to the namespace is on stable storage. This is useful in HA setups where failover must not result in clients seeing inconsistent namespace presentation during or after a failover event.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE ATTRIBUTES</h2>
        <div class="sectioncontent">

<p>The XFS filesystem supports setting the following file attributes on Linux systems using the <strong>chattr</strong>(1) utility:</p>
<p class='spacer'>

<p><strong>a</strong> - append only</p>
<p class='spacer'>

<p><strong>A</strong> - no atime updates</p>
<p class='spacer'>

<p><strong>d</strong> - no dump</p>
<p class='spacer'>

<p><strong>i</strong> - immutable</p>
<p class='spacer'>

<p><strong>S</strong> - synchronous updates</p>
<p class='spacer'>

<p>For descriptions of these attribute flags, please refer to the <strong>chattr</strong>(1) man page.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xfs&hellip;</h2>
        <div class="sectioncontent">

<p><strong>chattr</strong>(1), <a href="../man3/xfsctl.3.html"><strong>xfsctl</strong>(3)</a>, <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a>, <a href="../man8/mkfs.xfs.8.html"><strong>mkfs.xfs</strong>(8)</a>, <strong>xfs_info</strong>(8), <a href="../man8/xfs_admin.8.html"><strong>xfs_admin</strong>(8)</a>, <strong>xfsdump</strong>(8), <strong>xfsrestore</strong>(8).</p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="x_contexts.5.html"><span aria-hidden="true">&larr;</span> x_contexts.5: Userspace selinux labeling interface and configuration file format for the x window system contexts backend. this backend is also used to determine the default context for labeling remotely connected x clients .</a></li>
   <li class="next"><a href="yp.conf.5.html">yp.conf.5: Nis binding configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
