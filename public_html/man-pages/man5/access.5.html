<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>access - Postfix SMTP server access table</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Postfix smtp server access table">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">access<small> (5)</small></h1>
        <p class="lead">Postfix smtp server access table</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/access.5.html">
      <span itemprop="name">access</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/postfix/">
      <span itemprop="name">postfix</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/access.5.html">
      <span itemprop="name">access</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>postmap /etc/postfix/access</strong>

postmap -q "<em>string" /etc/postfix/access</em>

postmap -q - /etc/postfix/access &lt;<em>inputfile</em></pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>This document describes access control on remote SMTP client information: host names, network addresses, and envelope sender or recipient addresses; it is implemented by the Postfix SMTP server.  See <a href="../man5/header_checks.5.html"><strong>header_checks</strong>(5)</a> or <a href="../man5/body_checks.5.html"><strong>body_checks</strong>(5)</a> for access control on the content of email messages.</p>
<p class='spacer'>

<p>Normally, the <a href="../man5/access.5.html"><strong>access</strong>(5)</a> table is specified as a text file that serves as input to the <a href="../man1/postmap.1.html"><strong>postmap</strong>(1)</a> command. The result, an indexed file in <strong>dbm</strong> or <strong>db</strong> format, is used for fast searching by the mail system. Execute the command "<strong>postmap /etc/postfix/access</strong>" to rebuild an indexed file after changing the corresponding text file.</p>
<p class='spacer'>

<p>When the table is provided via other means such as NIS, LDAP or SQL, the same lookups are done as for ordinary indexed files.</p>
<p class='spacer'>

<p>Alternatively, the table can be provided as a regular-expression map where patterns are given as regular expressions, or lookups can be directed to TCP-based server. In those cases, the lookups are done in a slightly different way as described below under "REGULAR EXPRESSION TABLES" or "TCP-BASED TABLES".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CASE FOLDING</h2>
        <div class="sectioncontent">

<p>The search string is folded to lowercase before database lookup. As of Postfix 2.3, the search string is not case folded with database types such as regexp: or pcre: whose lookup fields can match both upper and lower case.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TABLE FORMAT</h2>
        <div class="sectioncontent">

  <p>The input format for the <a href="../man1/postmap.1.html"><strong>postmap</strong>(1)</a> command is as follows:</p>
  <dl class='dl-horizontal'>
    <dt><em>pattern action</em></dt>
    <dd>
  <p>When <em>pattern</em> matches a mail address, domain or host address, perform the corresponding <em>action</em>.</p>
    </dd>
    <dt>blank lines and comments</dt>
    <dd>
  <p>Empty lines and whitespace-only lines are ignored, as are lines whose first non-whitespace character is a `#'.</p>
    </dd>
    <dt>multi-line text</dt>
    <dd>
  <p>A logical line starts with non-whitespace text. A line that starts with whitespace continues a logical line.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EMAIL ADDRESS PATTERNS</h2>
        <div class="sectioncontent">

  <p>With lookups from indexed files such as DB or DBM, or from networked tables such as NIS, LDAP or SQL, patterns are tried in the order as listed below:</p>
  <dl class='dl-horizontal'>
    <dt><em>user</em>@<em>domain</em></dt>
    <dd>
  <p>Matches the specified mail address.</p>
    </dd>
    <dt><em>domain.tld</em></dt>
    <dd>
  <p>Matches <em>domain.tld</em> as the domain part of an email address.</p>
<p class='spacer'>

  <p>The pattern <em>domain.tld</em> also matches subdomains, but only when the string <strong>smtpd_access_maps</strong> is listed in the Postfix <strong>parent_domain_matches_subdomains</strong> configuration setting.</p>
    </dd>
    <dt><em>.domain.tld</em></dt>
    <dd>
  <p>Matches subdomains of <em>domain.tld</em>, but only when the string <strong>smtpd_access_maps</strong> is not listed in the Postfix <strong>parent_domain_matches_subdomains</strong> configuration setting.</p>
    </dd>
    <dt><em>user</em>@</dt>
    <dd>
  <p>Matches all mail addresses with the specified user part.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>Note: lookup of the null sender address is not possible with some types of lookup table. By default, Postfix uses <strong>&lt;&gt;</strong> as the lookup key for such addresses. The value is specified with the <strong>smtpd_null_access_lookup_key</strong> parameter in the Postfix <strong>main.cf</strong> file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EMAIL ADDRESS EXTENSION</h2>
        <div class="sectioncontent">

<p>When a mail address localpart contains the optional recipient delimiter (e.g., <em>user+foo</em>@<em>domain</em>), the lookup order becomes: <em>user+foo</em>@<em>domain</em>, <em>user</em>@<em>domain</em>, <em>domain</em>, <em>user+foo</em>@, and <em>user</em>@.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOST NAME/ADDRESS PATTERNS</h2>
        <div class="sectioncontent">

  <p>With lookups from indexed files such as DB or DBM, or from networked tables such as NIS, LDAP or SQL, the following lookup patterns are examined in the order as listed:</p>
  <dl class='dl-horizontal'>
    <dt><em>domain.tld</em></dt>
    <dd>
  <p>Matches <em>domain.tld</em>.</p>
<p class='spacer'>

  <p>The pattern <em>domain.tld</em> also matches subdomains, but only when the string <strong>smtpd_access_maps</strong> is listed in the Postfix <strong>parent_domain_matches_subdomains</strong> configuration setting.</p>
    </dd>
    <dt><em>.domain.tld</em></dt>
    <dd>
  <p>Matches subdomains of <em>domain.tld</em>, but only when the string <strong>smtpd_access_maps</strong> is not listed in the Postfix <strong>parent_domain_matches_subdomains</strong> configuration setting.</p>
    </dd>
    <dt><em>net.work.addr.ess</em></dt>
    <dd>
    </dd>
    <dt><em>net.work.addr</em></dt>
    <dd>
    </dd>
    <dt><em>net.work</em></dt>
    <dd>
    </dd>
    <dt><em>net</em></dt>
    <dd>
  <p>Matches the specified IPv4 host address or subnetwork. An IPv4 host address is a sequence of four decimal octets separated by ".".</p>
<p class='spacer'>

  <p>Subnetworks are matched by repeatedly truncating the last ".octet" from the remote IPv4 host address string until a match is found in the access table, or until further truncation is not possible.</p>
<p class='spacer'>

  <p>NOTE 1: The access map lookup key must be in canonical form: do not specify unnecessary null characters, and do not enclose network address information with "[]" characters.</p>
<p class='spacer'>

  <p>NOTE 2: use the <strong>cidr</strong> lookup table type to specify network/netmask patterns. See <a href="../man5/cidr_table.5.html"><strong>cidr_table</strong>(5)</a> for details.</p>
    </dd>
    <dt><em>net:work:addr:ess</em></dt>
    <dd>
    </dd>
    <dt><em>net:work:addr</em></dt>
    <dd>
    </dd>
    <dt><em>net:work</em></dt>
    <dd>
    </dd>
    <dt><em>net</em></dt>
    <dd>
  <p>Matches the specified IPv6 host address or subnetwork. An IPv6 host address is a sequence of three to eight hexadecimal octet pairs separated by ":".</p>
<p class='spacer'>

  <p>Subnetworks are matched by repeatedly truncating the last ":octetpair" from the remote IPv6 host address string until a match is found in the access table, or until further truncation is not possible.</p>
<p class='spacer'>

  <p>NOTE 1: the truncation and comparison are done with the string representation of the IPv6 host address. Thus, not all the ":" subnetworks will be tried.</p>
<p class='spacer'>

  <p>NOTE 2: The access map lookup key must be in canonical form: do not specify unnecessary null characters, and do not enclose network address information with "[]" characters.</p>
<p class='spacer'>

  <p>NOTE 3: use the <strong>cidr</strong> lookup table type to specify network/netmask patterns. See <a href="../man5/cidr_table.5.html"><strong>cidr_table</strong>(5)</a> for details.</p>
<p class='spacer'>

  <p>IPv6 support is available in Postfix 2.2 and later.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCEPT ACTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-horizontal'>
    <dt><strong>OK</strong></dt>
    <dd>
  <p>Accept the address etc. that matches the pattern.</p>
    </dd>
    <dt><em>all-numerical</em></dt>
    <dd>
  <p>An all-numerical result is treated as OK. This format is generated by address-based relay authorization schemes such as pop-before-smtp.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>For other accept actions, see "OTHER ACTIONS" below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REJECT ACTIONS</h2>
        <div class="sectioncontent">

  <p>Postfix version 2.3 and later support enhanced status codes as defined in RFC 3463. When no code is specified at the beginning of the <em>text</em> below, Postfix inserts a default enhanced status code of "5.7.1" in the case of reject actions, and "4.7.1" in the case of defer actions. See "ENHANCED STATUS CODES" below.</p>
  <dl class='dl-horizontal'>
    <dt>4<em>NN text</em></dt>
    <dd>
    </dd>
    <dt>5<em>NN text</em></dt>
    <dd>
  <p>Reject the address etc. that matches the pattern, and respond with the numerical three-digit code and text. 4<em>NN</em> means "try again later", while 5<em>NN</em> means "do not try again".</p>
<p class='spacer'>

      <p>The following responses have special meaning for the Postfix SMTP server:</p>
      <dl class='dl-horizontal'>
        <dt>421 <em>text</em> (Postfix 2.3 and later)</dt>
        <dd>
        </dd>
        <dt>521 <em>text</em> (Postfix 2.6 and later)</dt>
        <dd>
      <p>After responding with the numerical three-digit code and text, disconnect immediately from the SMTP client.  This frees up SMTP server resources so that they can be made available to another SMTP client.</p>
        </dd>
<p class='spacer'>

      <p>Note: The "521" response should be used only with botnets and other malware where interoperability is of no concern. The "send 521 and disconnect" behavior is NOT defined in the SMTP standard.</p>
        </dd>
      </dl>
    </dd>
    <dt>REJECT <em>optional text...</em></dt>
    <dd>
  <p>Reject the address etc. that matches the pattern. Reply with "$access_map_reject_code <em>optional text...</em>" when the optional text is specified, otherwise reply with a generic error response message.</p>
    </dd>
    <dt>DEFER <em>optional text...</em></dt>
    <dd>
  <p>Reject the address etc. that matches the pattern. Reply with "$access_map_defer_code <em>optional text...</em>" when the optional text is specified, otherwise reply with a generic error response message.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.6 and later.</p>
    </dd>
    <dt>DEFER_IF_REJECT <em>optional text...</em></dt>
    <dd>
  <p>Defer the request if some later restriction would result in a REJECT action. Reply with "$access_map_defer_code 4.7.1 <em>optional text...</em>" when the optional text is specified, otherwise reply with a generic error response message.</p>
<p class='spacer'>

  <p>Prior to Postfix 2.6, the SMTP reply code is 450.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.1 and later.</p>
    </dd>
    <dt>DEFER_IF_PERMIT <em>optional text...</em></dt>
    <dd>
  <p>Defer the request if some later restriction would result in a an explicit or implicit PERMIT action. Reply with "$access_map_defer_code 4.7.1 <em> optional text...</em>" when the optional text is specified, otherwise reply with a generic error response message.</p>
<p class='spacer'>

  <p>Prior to Postfix 2.6, the SMTP reply code is 450.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.1 and later.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>For other reject actions, see "OTHER ACTIONS" below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OTHER ACTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-horizontal'>
    <dt><em>restriction...</em></dt>
    <dd>
  <p>Apply the named UCE restriction(s) (<strong>permit</strong>, <strong>reject</strong>, <strong>reject_unauth_destination</strong>, and so on).</p>
    </dd>
    <dt>BCC <em>user@domain</em></dt>
    <dd>
  <p>Send one copy of the message to the specified recipient.</p>
<p class='spacer'>

  <p>If multiple BCC actions are specified within the same SMTP MAIL transaction, only the last action will be used.</p>
<p class='spacer'>

  <p>This feature is not part of the stable Postfix release.</p>
    </dd>
    <dt>DISCARD <em>optional text...</em></dt>
    <dd>
  <p>Claim successful delivery and silently discard the message. Log the optional text if specified, otherwise log a generic message.</p>
<p class='spacer'>

  <p>Note: this action currently affects all recipients of the message. To discard only one recipient without discarding the entire message, use the <a href="../man5/transport.5.html"><strong>transport</strong>(5)</a> table to direct mail to the <strong>discard</strong>(8) service.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.0 and later.</p>
    </dd>
    <dt><strong>DUNNO</strong></dt>
    <dd>
  <p>Pretend that the lookup key was not found. This prevents Postfix from trying substrings of the lookup key (such as a subdomain name, or a network address subnetwork).</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.0 and later.</p>
    </dd>
    <dt>FILTER <em>transport:destination</em></dt>
    <dd>
  <p>After the message is queued, send the entire message through the specified external content filter. The <em>transport</em> name specifies the first field of a mail delivery agent definition in master.cf; the syntax of the next-hop <em>destination</em> is described in the manual page of the corresponding delivery agent.  More information about external content filters is in the Postfix FILTER_README file.</p>
<p class='spacer'>

  <p>Note 1: do not use $<em>number</em> regular expression substitutions for <em>transport</em> or <em>destination</em> unless you know that the information has a trusted origin.</p>
<p class='spacer'>

  <p>Note 2: this action overrides the main.cf <strong>content_filter</strong> setting, and affects all recipients of the message. In the case that multiple <strong>FILTER</strong> actions fire, only the last one is executed.</p>
<p class='spacer'>

  <p>Note 3: the purpose of the FILTER command is to override message routing.  To override the recipient's <em>transport</em> but not the next-hop <em>destination</em>, specify an empty filter <em>destination</em> (Postfix 2.7 and later), or specify a <em>transport:destination</em> that delivers through a different Postfix instance (Postfix 2.6 and earlier). Other options are using the recipient-dependent <strong>transport_maps</strong> or the sender-dependent <strong>sender_dependent_default_transport_maps</strong> features.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.0 and later.</p>
    </dd>
    <dt>HOLD <em>optional text...</em></dt>
    <dd>
  <p>Place the message on the <strong>hold</strong> queue, where it will sit until someone either deletes it or releases it for delivery. Log the optional text if specified, otherwise log a generic message.</p>
<p class='spacer'>

  <p>Mail that is placed on hold can be examined with the <a href="../man1/postcat.1.html"><strong>postcat</strong>(1)</a> command, and can be destroyed or released with the <a href="../man1/postsuper.1.html"><strong>postsuper</strong>(1)</a> command.</p>
<p class='spacer'>

  <p>Note: use "<strong>postsuper -r</strong>" to release mail that was kept on hold for a significant fraction of <strong>$maximal_queue_lifetime</strong> or <strong>$bounce_queue_lifetime</strong>, or longer. Use "<strong>postsuper -H</strong>" only for mail that will not expire within a few delivery attempts.</p>
<p class='spacer'>

  <p>Note: this action currently affects all recipients of the message.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.0 and later.</p>
    </dd>
    <dt>PREPEND <em>headername: headervalue</em></dt>
    <dd>
  <p>Prepend the specified message header to the message. When more than one PREPEND action executes, the first prepended header appears before the second etc. prepended header.</p>
<p class='spacer'>

  <p>Note: this action must execute before the message content is received; it cannot execute in the context of <strong>smtpd_end_of_data_restrictions</strong>.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.1 and later.</p>
    </dd>
    <dt>REDIRECT <em>user@domain</em></dt>
    <dd>
  <p>After the message is queued, send the message to the specified address instead of the intended recipient(s).</p>
<p class='spacer'>

  <p>Note: this action overrides the FILTER action, and currently affects all recipients of the message.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.1 and later.</p>
    </dd>
    <dt>WARN <em>optional text...</em></dt>
    <dd>
  <p>Log a warning with the optional text, together with client information and if available, with helo, sender, recipient and protocol information.</p>
<p class='spacer'>

  <p>This feature is available in Postfix 2.1 and later.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENHANCED STATUS CODES</h2>
        <div class="sectioncontent">

  <p>Postfix version 2.3 and later support enhanced status codes as defined in RFC 3463. When an enhanced status code is specified in an access table, it is subject to modification. The following transformations are needed when the same access table is used for client, helo, sender, or recipient access restrictions; they happen regardless of whether Postfix replies to a MAIL FROM, RCPT TO or other SMTP command.</p>
  <dl class='dl-horizontal'>
    <dt>&bull;</dt>
    <dd>
  <p>When a sender address matches a REJECT action, the Postfix SMTP server will transform a recipient DSN status (e.g., 4.1.1-4.1.6) into the corresponding sender DSN status, and vice versa.</p>
    </dd>
    <dt>&bull;</dt>
    <dd>
  <p>When non-address information matches a REJECT action (such as the HELO command argument or the client hostname/address), the Postfix SMTP server will transform a sender or recipient DSN status into a generic non-address DSN status (e.g., 4.0.0).</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REGULAR EXPRESSION TABLES</h2>
        <div class="sectioncontent">

<p>This section describes how the table lookups change when the table is given in the form of regular expressions. For a description of regular expression lookup table syntax, see <a href="../man5/regexp_table.5.html"><strong>regexp_table</strong>(5)</a> or <a href="../man5/pcre_table.5.html"><strong>pcre_table</strong>(5)</a>.</p>
<p class='spacer'>

<p>Each pattern is a regular expression that is applied to the entire string being looked up. Depending on the application, that string is an entire client hostname, an entire client IP address, or an entire mail address. Thus, no parent domain or parent network search is done, <em>user@domain</em> mail addresses are not broken up into their <em>user@</em> and <em>domain</em> constituent parts, nor is <em>user+foo</em> broken up into <em>user</em> and <em>foo</em>.</p>
<p class='spacer'>

<p>Patterns are applied in the order as specified in the table, until a pattern is found that matches the search string.</p>
<p class='spacer'>

<p>Actions are the same as with indexed file lookups, with the additional feature that parenthesized substrings from the pattern can be interpolated as <strong>$1</strong>, <strong>$2</strong> and so on.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TCP-BASED TABLES</h2>
        <div class="sectioncontent">

<p>This section describes how the table lookups change when lookups are directed to a TCP-based server. For a description of the TCP client/server lookup protocol, see <a href="../man5/tcp_table.5.html"><strong>tcp_table</strong>(5)</a>. This feature is not available up to and including Postfix version 2.4.</p>
<p class='spacer'>

<p>Each lookup operation uses the entire query string once. Depending on the application, that string is an entire client hostname, an entire client IP address, or an entire mail address. Thus, no parent domain or parent network search is done, <em>user@domain</em> mail addresses are not broken up into their <em>user@</em> and <em>domain</em> constituent parts, nor is <em>user+foo</em> broken up into <em>user</em> and <em>foo</em>.</p>
<p class='spacer'>

<p>Actions are the same as with indexed file lookups.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<p>The following example uses an indexed file, so that the order of table entries does not matter. The example permits access by the client at address 1.2.3.4 but rejects all other clients in 1.2.3.0/24. Instead of <strong>hash</strong> lookup tables, some systems use <strong>dbm</strong>.  Use the command "<strong>postconf -m</strong>" to find out what lookup tables Postfix supports on your system.</p>
<p class='spacer'>

<pre>/etc/postfix/main.cf:
    smtpd_client_restrictions =
        check_client_access hash:/etc/postfix/access

/etc/postfix/access:
    1.2.3   REJECT
    1.2.3.4 OK</pre>

<p class='spacer'>

<p>Execute the command "<strong>postmap /etc/postfix/access</strong>" after editing the file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p>The table format does not understand quoting conventions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<a href="../man1/postmap.1.html"><strong>postmap</strong>(1)</a>, Postfix lookup table manager
<strong>smtpd</strong>(8), SMTP server
<a href="../man5/postconf.5.html"><strong>postconf</strong>(5)</a>, configuration parameters
<a href="../man5/transport.5.html"><strong>transport</strong>(5)</a>, transport:nexthop syntax</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">README FILES</h2>
        <div class="sectioncontent">

  <p>Use "<strong>postconf readme_directory</strong>" or "<strong>postconf html_directory</strong>" to locate this information.</p>
<pre>SMTPD_ACCESS_README, built-in SMTP server access control
DATABASE_README, Postfix lookup table overview</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">

<p>The Secure Mailer license must be distributed with this software.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR(S)</h2>
        <div class="sectioncontent">

<pre>Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="next"><a href="access.conf.5.html">access.conf.5: the login access control table file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
