<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tcp_table - Postfix client/server table lookup protocol</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Postfix client/server table lookup protocol">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tcp_table<small> (5)</small></h1>
        <p class="lead">Postfix client/server table lookup protocol</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="/"><span itemprop="title">Carta.tech</span></a>
	</li>
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man5/"><span itemprop="title">File formats and conventions</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man5/tcp_table.5.html"><span itemprop="title">tcp_table</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>postmap -q "<em>string" tcp:host:port</em>

postmap -q - tcp:<em>host:port &lt;inputfile</em></pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The Postfix mail system uses optional tables for address rewriting or mail routing. These tables are usually in <strong>dbm</strong> or <strong>db</strong> format. Alternatively, table lookups can be directed to a TCP server.</p>
<p class='spacer'>

<p>To find out what types of lookup tables your Postfix system supports use the "<strong>postconf -m</strong>" command.</p>
<p class='spacer'>

<p>To test lookup tables, use the "<strong>postmap -q</strong>" command as described in the SYNOPSIS above.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROTOCOL DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The TCP map class implements a very simple protocol: the client sends a request, and the server sends one reply. Requests and replies are sent as one line of ASCII text, terminated by the ASCII newline character. Request and reply parameters (see below) are separated by whitespace.</p>
<p class='spacer'>

<p>Send and receive operations must complete in 100 seconds.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REQUEST FORMAT</h2>
        <div class="sectioncontent">

  <p>Each request specifies a command, a lookup key, and possibly a lookup result.</p>
  <dl class='dl-horizontal'>
    <dt><strong>get</strong> SPACE <em>key</em> NEWLINE</dt>
    <dd>
  <p>Look up data under the specified key.</p>
    </dd>
    <dt><strong>put</strong> SPACE <em>key</em> SPACE <em>value</em> NEWLINE</dt>
    <dd>
  <p>This request is currently not implemented.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPLY FORMAT</h2>
        <div class="sectioncontent">

  <p>Each reply specifies a status code and text. Replies must be no longer than 4096 characters including the newline terminator.</p>
  <dl class='dl-horizontal'>
    <dt><strong>500</strong> SPACE <em>text</em> NEWLINE</dt>
    <dd>
  <p>In case of a lookup request, the requested data does not exist. In case of an update request, the request was rejected. The text describes the nature of the problem.</p>
    </dd>
    <dt><strong>400</strong> SPACE <em>text</em> NEWLINE</dt>
    <dd>
  <p>This indicates an error condition. The text describes the nature of the problem. The client should retry the request later.</p>
    </dd>
    <dt><strong>200</strong> SPACE <em>text</em> NEWLINE</dt>
    <dd>
  <p>The request was successful. In the case of a lookup request, the text contains an encoded version of the requested data.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENCODING</h2>
        <div class="sectioncontent">

<p>In request and reply parameters, the character %, each non-printing character, and each whitespace character must be replaced by %XX, where XX is the corresponding ASCII hexadecimal character value. The hexadecimal codes can be specified in any case (upper, lower, mixed).</p>
<p class='spacer'>

<p>The Postfix client always encodes a request. The server may omit the encoding as long as the reply is guaranteed to not contain the % or NEWLINE character.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SECURITY</h2>
        <div class="sectioncontent">

<p>Do not use TCP lookup tables for security critical purposes. The client-server connection is not protected and the server is not authenticated.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p>Only the lookup method is currently implemented.</p>
<p class='spacer'>

<p>The client does not hang up when the connection is idle for a long time.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<a href="../man1/postmap.1.html"><strong>postmap</strong>(1)</a>, Postfix lookup table manager
<a href="../man5/regexp_table.5.html"><strong>regexp_table</strong>(5)</a>, format of regular expression tables
<a href="../man5/pcre_table.5.html"><strong>pcre_table</strong>(5)</a>, format of PCRE tables
<a href="../man5/cidr_table.5.html"><strong>cidr_table</strong>(5)</a>, format of CIDR tables</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">README FILES</h2>
        <div class="sectioncontent">

  <p>Use "<strong>postconf readme_directory</strong>" or "<strong>postconf html_directory</strong>" to locate this information.</p>
<pre>DATABASE_README, Postfix lookup table overview</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">

<p>The Secure Mailer license must be distributed with this software.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR(S)</h2>
        <div class="sectioncontent">

<pre>Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="subuid.5.html"><span aria-hidden="true">&larr;</span> subuid.5: the subordinate uid file</a></li>
   <li class="next"><a href="term.5.html">term.5: format of compiled term file. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
