<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>attr_set: Set the value of a user attribute of a filesystem object</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Set the value of a user attribute of a filesystem object">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">attr_set<small> (3)</small></h1>
        <p class="lead">Set the value of a user attribute of a filesystem object</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/attr_set.3.html">
      <span itemprop="name">attr_set: Set the value of a user attribute of a filesystem object</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/attr/">
      <span itemprop="name">attr</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/attr_set.3.html">
      <span itemprop="name">attr_set: Set the value of a user attribute of a filesystem object</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">C SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include <attr/attributes.h></strong>

<strong>int attr_set (const char *\f2path\f3, const char *\f2attrname\f3, </strong>
<strong>              const char *\f2attrvalue\f3, const int \f2valuelength\f3,</strong>
<strong>              int \f2flags\f3);</strong>

<strong>int attr_setf (int \f2fd\f3, const char *\f2attrname\f3, </strong>
<strong>               const char *\f2attrvalue\f3, const int \f2valuelength\f3,</strong>
<strong>               int \f2flags\f3);</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>attr_set</strong> and <strong>attr_setf</strong> functions provide a way to create attributes and set/change their values.</p><p><em>Path\^</em> points to a path name for a filesystem object, and <em>fd\^</em> refers to the file descriptor associated with a file. If the attribute <em>attrname</em> does not exist, an attribute with the given name and value will be created and associated with that indicated filesystem object. If an attribute with that name already exists on that filesystem object, the existing value is replaced with the new value given in this call. The new attribute value is copied from the <em>attrvalue</em> buffer for a total of <em>valuelength</em> bytes. The <em>flags</em> argument can contain the following symbols bitwise OR'ed together:</p>
<dl class='dl-vertical'>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>ATTR_ROOT Look for <em>attrname</em> in the <strong>root</strong> address space, not in the <strong>user</strong> address space. (limited to use by super-user only)</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>ATTR_DONTFOLLOW Do not follow symbolic links when resolving a <em>path</em> on an <strong>attr_set</strong> function call. The default is to follow symbolic links.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>ATTR_CREATE Return an error (EEXIST) if an attribute of the given name already exists on the indicated filesystem object, otherwise create an attribute with the given name and value. This flag is used to implement a pure create operation, without this flag <strong>attr_set</strong> will create the attribute if it does not already exist. An error (EINVAL) will be returned if both ATTR_CREATE and ATTR_REPLACE are set in the same call.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>ATTR_REPLACE Return an error (ENOATTR) if an attribute of the given name does not already exist on the indicated filesystem object, otherwise replace the existing attribute\'s value with the given value. This flag is used to implement a pure replacement operation, without this flag <strong>attr_set</strong> will create the attribute if it does not already exist. An error (EINVAL) will be returned if both ATTR_CREATE and ATTR_REPLACE are set in the same call.</p>
  </dd>

</dl>
<p><strong>attr_set</strong> will fail if one or more of the following are true:</p>
<dl class='dl-vertical'>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[ENOATTR] The attribute name given is not associated with the indicated filesystem object and the ATTR_REPLACE flag bit was set.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[E2BIG] The value of the given attribute is too large, it exceeds the maximum allowable size of an attribute value.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EEXIST] The attribute name given is already associated with the indicated filesystem object and the ATTR_CREATE flag bit was set.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[ENOENT] The named file does not exist.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EPERM] The effective user <small>ID</small> does not match the owner of the file and the effective user <small>ID</small> is not super-user.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[ENOTDIR] A component of the path prefix is not a directory.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EACCES] Search permission is denied on a component of the path prefix.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EINVAL] A bit was set in the <em>flag</em> argument that is not defined for this system call, or both the ATTR_CREATE and ATTR_REPLACE flags bits were set.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EFAULT] <em>Path,</em> <em>attrname,</em> or <em>attrvalue</em> points outside the allocated address space of the process.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[ELOOP] A path name lookup involved too many symbolic links.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[ENAMETOOLONG] The length of <em>path</em> exceeds <small></small> {<em>MAXPATHLEN</em>}, or a pathname component is longer than <small></small> {<em>MAXNAMELEN</em>}.</p>
  </dd>

</dl>
<p><strong>attr_setf\^</strong> will fail if:</p>
<dl class='dl-vertical'>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[ENOATTR] The attribute name given is not associated with the indicated filesystem object and the ATTR_REPLACE flag bit was set.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[E2BIG] The value of the given attribute is too large, it exceeds the maximum allowable size of an attribute value.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EEXIST] The attribute name given is already associated with the indicated filesystem object and the ATTR_CREATE flag bit was set.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EINVAL] A bit was set in the <em>flag</em> argument that is not defined for this system call, or both the ATTR_CREATE and ATTR_REPLACE flags bits were set, or <em>fd\^</em> refers to a socket, not a file.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EFAULT] <em>Attrname,</em> or <em>attrvalue</em> points outside the allocated address space of the process.</p>
  </dd>
  <dt>
    <p><small></small></p>
  </dt>
  <dd>
    <p>[EBADF] <em>Fd\^</em> does not refer to a valid descriptor.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>On success, zero is returned.  On error, -1 is returned, and <em>errno</em> is set appropriately.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO attr_set&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/attr.1.html"><strong>attr</strong>(1)</a>, <a href="../man3/attr_get.3.html"><strong>attr_get</strong>(3)</a>, <a href="../man3/attr_list.3.html"><strong>attr_list</strong>(3)</a>, <a href="../man3/attr_multi.3.html"><strong>attr_multi</strong>(3)</a>, and <a href="../man3/attr_remove.3.html"><strong>attr_remove</strong>(3)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="attr_remove.3.html"><span aria-hidden="true">&larr;</span> attr_remove.3: Remove a user attribute of a filesystem object</a></li>
   <li class="next"><a href="auth_destroy.3.html">auth_destroy.3: Library routines for remote procedure calls <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
