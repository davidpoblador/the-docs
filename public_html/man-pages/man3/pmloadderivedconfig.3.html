<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmloadderivedconfig: Load derived metric definitions from files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Load derived metric definitions from files">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmloadderivedconfig<small> (3)</small></h1>
        <p class="lead">Load derived metric definitions from files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/pmloadderivedconfig.3.html">
      <span itemprop="name">pmloadderivedconfig: Load derived metric definitions from files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pcp/">
      <span itemprop="name">pcp</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/pmloadderivedconfig.3.html">
      <span itemprop="name">pmloadderivedconfig: Load derived metric definitions from files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">C SYNOPSIS</h2>
        <div class="sectioncontent">

<p>#include &lt;pcp/pmapi.h&gt;</p>
<p class='spacer'>

<p>int pmLoadDerivedConfig(char *<em>path</em>);</p>
<p class='spacer'>

<p>cc ... -lpcp</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>Derived metrics may be used to extend the available metrics with new (derived) metrics using simple arithmetic expressions. The definitions of these metrics can be persisted and loaded programatically by monitor tools using <strong>pmLoadDerivedConfig</strong>.</p>
<p class='spacer'>

<p>The <em>path</em> parameter defines a colon separated list of files and/or directories (the syntax is the same as for the <strong>$PATH</strong> variable for <strong>sh</strong>(1)), from which derived metric specifications are to be sourced. The <em>path</em> components are expanded into a list of files as follows: if a component is a file, then that file is added to the list, else if a component is a directory then recursive descent is used to enumerate all files below that directory and these are added to the list. Each file in the resulting list is parsed in order, and according to the derived metrics syntax described below.</p>
<p class='spacer'>

  <p>Each line of the file(s) identified by <em>path</em> is either a comment line (with a ``#'' in the first position of the line) or the declaration of a derived performance metric, specified as:</p>
  <dl class='dl-horizontal'>
    <dt>*</dt>
    <dd>
  <p>the name of the derived metric, using the same ``dot notation'' syntax that is used for PCP performance metrics, see <strong>PCPIntro</strong>(1) and <strong>pmns</strong>(5).</p>
    </dd>
    <dt>*</dt>
    <dd>
  <p>an equals sign (``='')</p>
    </dd>
    <dt>*</dt>
    <dd>
  <p>a valid expression for a derived metric, as described in <strong>pmRegisterDerived</strong>(3).</p>
    </dd>
  </dl>
<p class='spacer'>

<p>White space is ignored in the lines.</p>
<p class='spacer'>

<p>For each line containing a derived metric definition, <strong>pmRegisterDerived</strong>(3) is called to register the new derived metric.</p>
<p class='spacer'>

<p>Because <strong>pmLoadDerivedConfig</strong> may process many files, each of which may contain many derived metric specifications, it is not possible to provide very specific error status on return. Hence the result from <strong>pmLoadDerivedConfig</strong> will be the number of derived metrics successfully loaded from files on the given <em>path</em>. Catastrophic errors such as not being able to open one of the files on the given <em>path</em> will cause an immediate return with a negative return value that can be passed to <strong>pmErrStr</strong>(3) to obtain the associated error message.</p>
<p class='spacer'>

<p>When errors are encountered in the derived metric specifications diagnostic messages are generated by <strong>pmRegisterDerived</strong>(3) and displayed via <a href="../man3/pmprintf.3.html"><strong>pmprintf</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre># sample derived metric definitions
bad_in_pkts = network.interface.in.errors + network.interface.in.drops
# note the following would need to be on a single line ...
disk.dev.read_pct = 100 * delta(disk.dev.read) /
            (delta(disk.dev.read) + delta(disk.dev.write))</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>sh</strong>(1), <strong>PCPIntro</strong>(1), <strong>PMAPI</strong>(3), <strong>pmRegisterDerived</strong>(3), <a href="../man3/pmprintf.3.html"><strong>pmprintf</strong>(3)</a> and <strong>pmns</strong>(5).</p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="pmloadasciinamespace.3.html"><span aria-hidden="true">&larr;</span> pmloadasciinamespace.3: establish a local PMNS for an application</a></li>
   <li class="next"><a href="pmloadnamespace.3.html">pmloadnamespace.3: load a local PMNS for an application <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
