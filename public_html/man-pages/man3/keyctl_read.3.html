<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>keyctl_read: Read a key</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Read a key">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">keyctl_read<small> (3)</small></h1>
        <p class="lead">Read a key</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/keyctl_read.3.html">
      <span itemprop="name">keyctl_read: Read a key</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/keyutils/">
      <span itemprop="name">keyutils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/keyctl_read.3.html">
      <span itemprop="name">keyctl_read: Read a key</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>#include &lt;keyutils.h&gt;</strong>

<strong>long keyctl_read(key_serial_t </strong><em>key</em><strong>, char *</strong><em>buffer</em><strong>,</strong>
<strong>size_t</strong><em>buflen</em><strong>);</strong>

<strong>long keyctl_read_alloc(key_serial_t </strong><em>key</em><strong>, void **</strong><em>_buffer</em><strong>);</strong></pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>keyctl_read</strong>() reads the payload of a key if the key type supports it.</p>
<p class='spacer'>

<p>The caller must have <strong>read</strong> permission on a key to be able to read it.</p>
<p class='spacer'>

<p><em>buffer</em> and <em>buflen</em> specify the buffer into which the payload data will be placed.  If the buffer is too small, the full size of the payload will be returned and no copy will take place.</p>
<p class='spacer'>

<p><strong>keyctl_read_alloc</strong>() is similar to <strong>keyctl_read</strong>() except that it allocates a buffer big enough to hold the payload data and places the data in it.  If successful, a pointer to the buffer is placed in <em>*_buffer</em>. The caller must free the buffer.</p>
<p class='spacer'>

<p><strong>keyctl_read_alloc</strong>() adds a NUL character after the data it retrieves, though this is not counted in the size value it returns.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">READING KEYRINGS</h2>
        <div class="sectioncontent">

<p>This call can be used to list the contents of a keyring.  The data is presented to the user as an array of <strong>key_serial_t</strong> values, each of which corresponds to a key to which the keyring holds a link.</p>
<p class='spacer'>

<p>The size of the keyring will be sizeof(key_serial_t) multiplied by the number of keys.  The size of key_serial_t is invariant across different word sizes, though the byte-ordering is as appropriate for the kernel.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">

<p>On success <strong>keyctl_read</strong>() returns the amount of data placed into the buffer.  If the buffer was too small, then the size of buffer required will be returned, but no data will be transferred.</p>
<p class='spacer'>

<p>On success <strong>keyctl_read_alloc</strong>() returns the amount of data in the buffer.</p>
<p class='spacer'>

<p>On error, both functions set errno to an appropriate code and return the value <strong>-1</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>ENOKEY</strong></dt>
    <dd>
  <p>The key specified is invalid.</p>
    </dd>
    <dt><strong>EKEYEXPIRED</strong></dt>
    <dd>
  <p>The key specified has expired.</p>
    </dd>
    <dt><strong>EKEYREVOKED</strong></dt>
    <dd>
  <p>The key specified had been revoked.</p>
    </dd>
    <dt><strong>EACCES</strong></dt>
    <dd>
  <p>The key exists, but is not <strong>readable</strong> by the calling process.</p>
    </dd>
    <dt><strong>EOPNOTSUPP</strong></dt>
    <dd>
  <p>The key type does not support reading of the payload data.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LINKING</h2>
        <div class="sectioncontent">

<p>This is a library function that can be found in <em>libkeyutils</em>. When linking, <strong>-lkeyutils</strong> should be specified to the linker.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man1/keyctl.1.html"><strong>keyctl</strong>(1)</a>,</p>
<p class='spacer'>

<p><a href="../man2/add_key.2.html"><strong>add_key</strong>(2)</a>,</p>
<p class='spacer'>

<p><a href="../man2/keyctl.2.html"><strong>keyctl</strong>(2)</a>,</p>
<p class='spacer'>

<p><a href="../man2/request_key.2.html"><strong>request_key</strong>(2)</a>,</p>
<p class='spacer'>

<p><a href="../man3/keyctl.3.html"><strong>keyctl</strong>(3)</a>,</p>
<p class='spacer'>

<p><a href="../man7/keyutils.7.html"><strong>keyutils</strong>(7)</a>,</p>
<p class='spacer'>

<p><a href="../man7/keyrings.7.html"><strong>keyrings</strong>(7)</a></p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="keyctl_link.3.html"><span aria-hidden="true">&larr;</span> keyctl_link.3: Link a key to a keyring keyctl_unlink - Unlink a key from a keyring</a></li>
   <li class="next"><a href="keyctl_revoke.3.html">keyctl_revoke.3: Revoke a key <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
