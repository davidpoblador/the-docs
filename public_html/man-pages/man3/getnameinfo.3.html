<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>getnameinfo - address-to-name translation in protocol-independent manner</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Address-to-name translation in protocol-independent manner">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">getnameinfo<small> (3)</small></h1>
        <p class="lead">Address-to-name translation in protocol-independent manner</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="/"><span itemprop="title">Carta.tech</span></a>
	</li>
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man3/"><span itemprop="title">Library calls</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man3/getnameinfo.3.html"><span itemprop="title">getnameinfo</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>#include &lt;sys/socket.h&gt;</strong>
<strong>#include &lt;netdb.h&gt;</strong>

<strong>int getnameinfo(const struct sockaddr *</strong><em>addr</em><strong>, socklen_t </strong><em>addrlen</em><strong>,</strong>
<strong>                char *</strong><em>host</em><strong>, socklen_t </strong><em>hostlen</em><strong>,</strong>
<strong>                char *</strong><em>serv</em><strong>, socklen_t </strong><em>servlen</em><strong>, int </strong><em>flags</em><strong>);</strong></pre>

<p class='spacer'>

<p>Feature Test Macro Requirements for glibc (see <a href="../man7/feature_test_macros.7.html"><strong>feature_test_macros</strong>(7)</a>):</p>
<p class='spacer'>

<p><strong>getnameinfo</strong>():</p>
<pre>    Since glibc 2.22: _POSIX_C_SOURCE &gt;= 201112L
    Glibc 2.21 and earlier: _POSIX_C_SOURCE</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The <strong>getnameinfo</strong>() function is the inverse of <a href="../man3/getaddrinfo.3.html"><strong>getaddrinfo</strong>(3)</a>: it converts a socket address to a corresponding host and service, in a protocol-independent manner. It combines the functionality of <a href="../man3/gethostbyaddr.3.html"><strong>gethostbyaddr</strong>(3)</a> and <a href="../man3/getservbyport.3.html"><strong>getservbyport</strong>(3)</a>, but unlike those functions, <strong>getnameinfo</strong>() is reentrant and allows programs to eliminate IPv4-versus-IPv6 dependencies.</p>
<p class='spacer'>

<p>The <em>sa</em> argument is a pointer to a generic socket address structure (of type <em>sockaddr_in</em> or <em>sockaddr_in6</em>) of size <em>addrlen</em> that holds the input IP address and port number. The arguments <em>host</em> and <em>serv</em> are pointers to caller-allocated buffers (of size <em>hostlen</em> and <em>servlen</em> respectively) into which <strong>getnameinfo</strong>() places null-terminated strings containing the host and service names respectively.</p>
<p class='spacer'>

<p>The caller can specify that no hostname (or no service name) is required by providing a NULL <em>host</em> (or <em>serv</em>) argument or a zero <em>hostlen</em> (or <em>servlen</em>) argument. However, at least one of hostname or service name must be requested.</p>
<p class='spacer'>

  <p>The <em>flags</em> argument modifies the behavior of <strong>getnameinfo</strong>() as follows:</p>
  <dl class='dl-vertical'>
    <dt><strong>NI_NAMEREQD</strong></dt>
    <dd>
  <p>If set, then an error is returned if the hostname cannot be determined.</p>
    </dd>
    <dt><strong>NI_DGRAM</strong></dt>
    <dd>
  <p>If set, then the service is datagram (UDP) based rather than stream (TCP) based. This is required for the few ports (512-514) that have different services for UDP and TCP.</p>
    </dd>
    <dt><strong>NI_NOFQDN</strong></dt>
    <dd>
  <p>If set, return only the hostname part of the fully qualified domain name for local hosts.</p>
    </dd>
    <dt><strong>NI_NUMERICHOST</strong></dt>
    <dd>
  <p>If set, then the numeric form of the hostname is returned. (When not set, this will still happen in case the node's name cannot be determined.)</p>
    </dd>
    <dt><strong>NI_NUMERICSERV</strong></dt>
    <dd>
  <p>If set, then the numeric form of the service address is returned. (When not set, this will still happen in case the service's name cannot be determined.)</p>
    </dd>
  </dl>
  <h3>Extensions to getnameinfo() for Internationalized Domain Names</h3>
<p class='spacer'>

  <p>Starting with glibc 2.3.4, <strong>getnameinfo</strong>() has been extended to selectively allow hostnames to be transparently converted to and from the Internationalized Domain Name (IDN) format (see RFC 3490, <em>Internationalizing Domain Names in Applications (IDNA)</em>). Three new flags are defined:</p>
  <dl class='dl-vertical'>
    <dt><strong>NI_IDN</strong></dt>
    <dd>
  <p>If this flag is used, then the name found in the lookup process is converted from IDN format to the locale's encoding if necessary. ASCII-only names are not affected by the conversion, which makes this flag usable in existing programs and environments.</p>
    </dd>
    <dt><strong>NI_IDN_ALLOW_UNASSIGNED</strong>, <strong>NI_IDN_USE_STD3_ASCII_RULES</strong></dt>
    <dd>
  <p>Setting these flags will enable the IDNA_ALLOW_UNASSIGNED (allow unassigned Unicode code points) and IDNA_USE_STD3_ASCII_RULES (check output to make sure it is a STD3 conforming hostname) flags respectively to be used in the IDNA handling.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">

  <p>On success, 0 is returned, and node and service names, if requested, are filled with null-terminated strings, possibly truncated to fit the specified buffer lengths. On error, one of the following nonzero error codes is returned:</p>
  <dl class='dl-vertical'>
    <dt><strong>EAI_AGAIN</strong></dt>
    <dd>
  <p>The name could not be resolved at this time. Try again later.</p>
    </dd>
    <dt><strong>EAI_BADFLAGS</strong></dt>
    <dd>
  <p>The <em>flags</em> argument has an invalid value.</p>
    </dd>
    <dt><strong>EAI_FAIL</strong></dt>
    <dd>
  <p>A nonrecoverable error occurred.</p>
    </dd>
    <dt><strong>EAI_FAMILY</strong></dt>
    <dd>
  <p>The address family was not recognized, or the address length was invalid for the specified family.</p>
    </dd>
    <dt><strong>EAI_MEMORY</strong></dt>
    <dd>
  <p>Out of memory.</p>
    </dd>
    <dt><strong>EAI_NONAME</strong></dt>
    <dd>
  <p>The name does not resolve for the supplied arguments. <strong>NI_NAMEREQD</strong> is set and the host's name cannot be located, or neither hostname nor service name were requested.</p>
    </dd>
    <dt><strong>EAI_OVERFLOW</strong></dt>
    <dd>
  <p>The buffer pointed to by <em>host</em> or <em>serv</em> was too small.</p>
    </dd>
    <dt><strong>EAI_SYSTEM</strong></dt>
    <dd>
  <p>A system error occurred. The error code can be found in <em>errno</em>.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>The <a href="../man3/gai_strerror.3.html"><strong>gai_strerror</strong>(3)</a> function translates these error codes to a human readable string, suitable for error reporting.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<p>/etc/hosts</p>
<p class='spacer'>

<p>/etc/nsswitch.conf</p>
<p class='spacer'>

<p>/etc/resolv.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSIONS</h2>
        <div class="sectioncontent">

<p><strong>getnameinfo</strong>() is provided in glibc since version 2.1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ATTRIBUTES</h2>
        <div class="sectioncontent">

<p>For an explanation of the terms used in this section, see <a href="../man7/attributes.7.html"><strong>attributes</strong>(7)</a>.</p>
<table class="table table-striped">
<tr>
<th>Interface</th>
<th>Attribute</th>
<th>Value</th></tr>

<tr>
<td><strong>getnameinfo</strong>()  </td>
<td>Thread safety</td>
<td>MT-Safe env locale</td></tr>
</table>

<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">

<p>POSIX.1-2001, POSIX.1-2008, RFC&nbsp;2553.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

  <p>In order to assist the programmer in choosing reasonable sizes for the supplied buffers, <em>&lt;netdb.h&gt;</em> defines the constants</p>
<pre>
#define NI_MAXHOST      1025
#define NI_MAXSERV      32</pre>

<p class='spacer'>

<p>Since glibc 2.8, these definitions are exposed only if suitable feature test macros are defined, namely: <strong>_GNU_SOURCE</strong>, <strong>_DEFAULT_SOURCE</strong> (since glibc 2.19), or (in glibc versions up to and including 2.19) <strong>_BSD_SOURCE</strong> or <strong>_SVID_SOURCE</strong>.</p>
<p class='spacer'>

<p>The former is the constant <strong>MAXDNAME</strong> in recent versions of BIND's <em>&lt;arpa/nameser.h&gt;</em> header file. The latter is a guess based on the services listed in the current Assigned Numbers RFC.</p>
<p class='spacer'>

<p>Before glibc version 2.2, the <em>hostlen</em> and <em>servlen</em> arguments were typed as <em>size_t</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<p>The following code tries to get the numeric hostname and service name, for a given socket address. Note that there is no hardcoded reference to a particular address family.</p>
<p class='spacer'>

<pre>struct sockaddr *addr;     /* input */
socklen_t addrlen;         /* input */
char hbuf[NI_MAXHOST], sbuf[NI_MAXSERV];

if (getnameinfo(addr, addrlen, hbuf, sizeof(hbuf), sbuf,
            sizeof(sbuf), NI_NUMERICHOST | NI_NUMERICSERV) == 0)
    printf("host=%s, serv=%s&#92;n", hbuf, sbuf);</pre>

<p class='spacer'>

<p>The following version checks if the socket address has a reverse address mapping.</p>
<p class='spacer'>

<pre>struct sockaddr *addr;     /* input */
socklen_t addrlen;         /* input */
char hbuf[NI_MAXHOST];

if (getnameinfo(addr, addrlen, hbuf, sizeof(hbuf),
            NULL, 0, NI_NAMEREQD))
    printf("could not resolve hostname");
else
    printf("host=%s&#92;n", hbuf);</pre>

<p class='spacer'>

<p>An example program using <strong>getnameinfo</strong>() can be found in <a href="../man3/getaddrinfo.3.html"><strong>getaddrinfo</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man2/accept.2.html"><strong>accept</strong>(2)</a>, <a href="../man2/getpeername.2.html"><strong>getpeername</strong>(2)</a>, <a href="../man2/getsockname.2.html"><strong>getsockname</strong>(2)</a>, <a href="../man2/recvfrom.2.html"><strong>recvfrom</strong>(2)</a>, <a href="../man2/socket.2.html"><strong>socket</strong>(2)</a>, <a href="../man3/getaddrinfo.3.html"><strong>getaddrinfo</strong>(3)</a>, <a href="../man3/gethostbyaddr.3.html"><strong>gethostbyaddr</strong>(3)</a>, <a href="../man3/getservbyname.3.html"><strong>getservbyname</strong>(3)</a>, <a href="../man3/getservbyport.3.html"><strong>getservbyport</strong>(3)</a>, <a href="../man3/inet_ntop.3.html"><strong>inet_ntop</strong>(3)</a>, <a href="../man5/hosts.5.html"><strong>hosts</strong>(5)</a>, <a href="../man5/services.5.html"><strong>services</strong>(5)</a>, <a href="../man7/hostname.7.html"><strong>hostname</strong>(7)</a>, <a href="../man8/named.8.html"><strong>named</strong>(8)</a></p>
<p class='spacer'>

<p>R. Gilligan, S. Thomson, J. Bound and W. Stevens, <em>Basic Socket Interface Extensions for IPv6</em>, RFC&nbsp;2553, March 1999.</p>
<p class='spacer'>

<p>Tatsuya Jinmei and Atsushi Onoe, <em>An Extension of Format for IPv6 Scoped Addresses</em>, internet draft, work in progress <a href="ftp://ftp.ietf.org/internet-drafts/draft-ietf-ipngwg-scopedaddr-format-02.txt">ftp://ftp.ietf.org/internet-drafts/draft-ietf-ipngwg-scopedaddr-format-02.txt</a></p>
<p class='spacer'>

<p>Craig Metz, <em>Protocol Independence Using the Sockets API</em>, Proceedings of the freenix track: 2000 USENIX annual technical conference, June 2000 <a href="http://www.usenix.org/publications/library/proceedings/usenix2000/freenix/metzprotocol.html">http://www.usenix.org/publications/library/proceedings/usenix2000/freenix/metzprotocol.html</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="getmntent_r.3.html"><span aria-hidden="true">&larr;</span> getmntent_r.3: get filesystem descriptor file entry</a></li>
   <li class="next"><a href="getnetbyaddr.3.html">getnetbyaddr.3: get network entry <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
