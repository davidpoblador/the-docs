<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>posix_madvise: Give advice about patterns of memory usage</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Give advice about patterns of memory usage">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="posix_madvise (3) manual">
  <meta name="twitter:description" content="Give advice about patterns of memory usage">
  <meta name="twitter:image" content="https://www.carta.tech/images/man-pages-posix_madvise-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/posix_madvise.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="posix_madvise (3) manual" />
  <meta property="og:description" content="Give advice about patterns of memory usage" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/man-pages-posix_madvise-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">posix_madvise<small> (3)</small></h1>
        <p class="lead">Give advice about patterns of memory usage</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/posix_madvise.3.html">
      <span itemprop="name">posix_madvise: Give advice about patterns of memory usage</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/man-pages/">
      <span itemprop="name">man-pages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/posix_madvise.3.html">
      <span itemprop="name">posix_madvise: Give advice about patterns of memory usage</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;sys/mman.h&gt;</strong>

<strong>int posix_madvise(void *</strong><em>addr</em><strong>, size_t </strong><em>len</em><strong>, int </strong><em>advice</em><strong>);</strong>
</pre>
<p>Feature Test Macro Requirements for glibc (see <a href="../man7/feature_test_macros.7.html"><strong>feature_test_macros</strong>(7)</a>):</p><p><strong>posix_madvise</strong>():</p><p>_POSIX_C_SOURCE &gt;= 200112L</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>posix_madvise</strong>() function allows an application to advise the system about its expected patterns of usage of memory in the address range starting at <em>addr</em> and continuing for <em>len</em> bytes. The system is free to use this advice in order to improve the performance of memory accesses (or to ignore the advice altogether), but calling <strong>posix_madvise</strong>() shall not affect the semantics of access to memory in the specified range.</p><p>The <em>advice</em> argument is one of the following:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>POSIX_MADV_NORMAL</strong></p>
  </dt>
  <dd>
    <p>The application has no special advice regarding its memory usage patterns for the specified address range. This is the default behavior.</p>
  </dd>
  <dt>
    <p><strong>POSIX_MADV_SEQUENTIAL</strong></p>
  </dt>
  <dd>
    <p>The application expects to access the specified address range sequentially, running from lower addresses to higher addresses. Hence, pages in this region can be aggressively read ahead, and may be freed soon after they are accessed.</p>
  </dd>
  <dt>
    <p><strong>POSIX_MADV_RANDOM</strong></p>
  </dt>
  <dd>
    <p>The application expects to access the specified address range randomly. Thus, read ahead may be less useful than normally.</p>
  </dd>
  <dt>
    <p><strong>POSIX_MADV_WILLNEED</strong></p>
  </dt>
  <dd>
    <p>The application expects to access the specified address range in the near future. Thus, read ahead may be beneficial.</p>
  </dd>
  <dt>
    <p><strong>POSIX_MADV_DONTNEED</strong></p>
  </dt>
  <dd>
    <p>The application expects that it will not access the specified address range in the near future.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>On success, <strong>posix_madvise</strong>() returns 0. On failure, it returns a positive error number.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>EINVAL</strong></p>
  </dt>
  <dd>
    <p><em>addr</em> is not a multiple of the system page size or <em>len</em> is negative.</p>
  </dd>
  <dt>
    <p><strong>EINVAL</strong></p>
  </dt>
  <dd>
    <p><em>advice</em> is invalid.</p>
  </dd>
  <dt>
    <p><strong>ENOMEM</strong></p>
  </dt>
  <dd>
    <p>Addresses in the specified range are partially or completely outside the caller's address space.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSIONS</h2>
        <div class="sectioncontent">
<p>Support for <strong>posix_madvise</strong>() first appeared in glibc version 2.2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">
<p>POSIX.1-2001.</p><p>POSIX.1-2008 specifies a further value for <em>advice</em>, <strong>POSIX_FADV_NOREUSE</strong>, meaning that the specified data will be accessed only once. This value is not currently supported.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>POSIX.1 permits an implementation to generate an error if <em>len</em> is 0. On Linux, specifying <em>len</em> as 0 is permitted (as a successful no-op).</p><p>In glibc, this function is implemented using <a href="../man2/madvise.2.html"><strong>madvise</strong>(2)</a>. However, since glibc 2.6, <strong>POSIX_MADV_DONTNEED</strong> is treated as a no-op, because the corresponding <a href="../man2/madvise.2.html"><strong>madvise</strong>(2)</a> value, <strong>MADV_DONTNEED</strong>, has destructive semantics.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO posix_madvise&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man2/madvise.2.html"><strong>madvise</strong>(2)</a>, <a href="../man2/posix_fadvise.2.html"><strong>posix_fadvise</strong>(2)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="posix_fallocate.3.html"><span aria-hidden="true">&larr;</span> posix_fallocate.3: Allocate file space</a></li>
   <li class="next"><a href="posix_memalign.3.html">posix_memalign.3: Allocate aligned memory <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
