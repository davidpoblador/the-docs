<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pfm_get_event_attr_info: Get event attribute information</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Get event attribute information">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pfm_get_event_attr_info<small> (3)</small></h1>
        <p class="lead">Get event attribute information</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/pfm_get_event_attr_info.3.html">
      <span itemprop="name">pfm_get_event_attr_info: Get event attribute information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/perfmon2/">
      <span itemprop="name">perfmon2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/pfm_get_event_attr_info.3.html">
      <span itemprop="name">pfm_get_event_attr_info: Get event attribute information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include <perfmon/pfmlib.h></strong>

<strong>int</strong> <strong>pfm_get_event_attr_info(int</strong> <strong></strong><em>idx</em><strong>,</strong> <strong>int</strong> <strong></strong><em>attr</em><strong>,</strong> <strong>pfm_os_t</strong> <strong></strong><em>os</em><strong>,</strong> <strong>pfm_event_attr_info_t</strong> <strong>*</strong><em>info</em><strong>);</strong>

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This function returns in <strong>info</strong> information about the attribute designated by <strong>attr</strong> for the event specified in <strong>idx</strong> and the os layer in <strong>os</strong>.</p><p>The <strong>pfm_os_t</strong> enumeration provides the following choices:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>PFM_OS_NONE</strong></p>
  </dt>
  <dd>
    <p>The returned information pertains only to what the PMU hardware exports. No operating system attributes is taken into account.</p>
  </dd>
  <dt>
    <p><strong>PFM_OS_PERF_EVENT</strong></p>
  </dt>
  <dd>
    <p>The returned information includes the actual PMU hardware and the additional attributes exported by the perf_events kernel interface. The perf_event attributes pertain only the PMU hardware. In case perf_events is not detected, an error is returned.</p>
  </dd>
  <dt>
    <p><strong>PFM_OS_PERF_EVENT_EXT</strong></p>
  </dt>
  <dd>
    <p>The returned information includes all of what is already provided by <strong>PFM_OS_PERF_EVENT</strong> plus all the software attributes controlled by perf_events, such as sampling period, precise sampling.</p>
  </dd>

</dl>
<p>The <strong>pfm_event_attr_info_t</strong> structure is defined as follows:</p>
<pre>
typedef struct {
        const char              *name;
        const char              *desc;
        const char              *equiv;
        size_t			size;
        uint64_t                code;
        pfm_attr_t              type;
        int                     idx;
        pfm_attr_ctrl_t         ctrl;
        int                     reserved1;
        struct {
                int             is_dfl:1;
                int             is_precise:1;
                int             reserved:30;
        };
        union {
                uint64_t        dfl_val64;
                const char      *dfl_str;
                int             dfl_bool;
                int             dfl_int;
        };
} pfm_event_attr_info_t;
</pre>
<p>The fields of this structure are defined as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>name</strong></p>
  </dt>
  <dd>
    <p>This is the name of the attribute. This is a read-only string.</p>
  </dd>
  <dt>
    <p><strong>desc</strong></p>
  </dt>
  <dd>
    <p>This is the description of the attribute. This is a read-only string. It may contain multiple sentences.</p>
  </dd>
  <dt>
    <p><strong>equiv</strong></p>
  </dt>
  <dd>
    <p>Certain attributes may be just variations of other attributes for the same event. They may be provided as handy shortcuts to avoid supplying a long list of attributes. For those attributes, this field is not NULL and contains the complete equivalent attribute string. This string, once appended to the event name, may be used library calls requiring an event string.</p>
  </dd>
  <dt>
    <p><strong>code</strong></p>
  </dt>
  <dd>
    <p>This is the raw attribute code. For PFM_ATTR_UMASK, this is the unit mask code. For all other attributes, this is an opaque index.</p>
  </dd>
  <dt>
    <p><strong>type</strong></p>
  </dt>
  <dd>
    <p>This is the type of the attribute. Attributes represent either sub-events or extra filters that can be applied to the event. Filters (also called modifiers)  may be tied to the event or the PMU register the event is programmed into. The type of an attribute determines how it must be specified. The following types are defined:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>PFM_ATTR_UMASK</strong></p>
  </dt>
  <dd>
    <p>This is a unit mask, i.e., a sub-event. It is specified using its name. Depending on the event, it may be possible to specify multiple unit masks.</p>
  </dd>
  <dt>
    <p><strong>PFM_ATTR_MOD_BOOL</strong></p>
  </dt>
  <dd>
    <p>This is a boolean attribute. It has a value of 0, 1, y or n. The value is specified after the equal sign, e.g., foo=1. As a convenience, the equal sign and value may be omitted, in which case this is equivalent to =1.</p>
  </dd>
  <dt>
    <p><strong>PFM_ATTR_MOD_INTEGER</strong></p>
  </dt>
  <dd>
    <p>This is an integer attribute. It has a value which must be passed after the equal sign. The range of valid values depends on the attribute and is usually specified in its description.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>idx</strong></p>
  </dt>
  <dd>
    <p>This is the attribute index. It is identical to the value of <strong>attr</strong> passed to the call and is provided for completeness.</p>
  </dd>
  <dt>
    <p><strong>size</strong></p>
  </dt>
  <dd>
    <p>This field contains the size of the struct passed. This field is used to provide for extensibility of the struct without compromising backward compatibility. The value should be set to <strong>sizeof(pfm_event_attr_info_t)</strong>. If instead, a value of <strong>0</strong> is specified, the library assumes the struct passed is identical to the first ABI version which size is <strong>PFM_ATTR_INFO_ABI0</strong>. Thus, if fields were added after the first ABI, they will not be set by the library. The library does check that bytes beyond what is implemented are zeroes.</p>
  </dd>
  <dt>
    <p><strong>is_dfl</strong></p>
  </dt>
  <dd>
    <p>This field indicates whether or not this attribute is set by default. This applies mostly for PFM_ATTR_UMASK. If a unit mask is marked as default, and no unit mask is specified in the event string, then the library uses it by default. Note that there may be multiple defaults per event depending on how unit masks are grouped.</p>
  </dd>
  <dt>
    <p><strong>is_precise</strong></p>
  </dt>
  <dd>
    <p>This field indicates whether or not this umask supports precise sampling. Precise sampling is a hardware mechanism that avoids instruction address skid when using interrupt-based sampling. On Intel X86 processors, this field indicates that the umask supports Precise Event-Based Sampling (PEBS).</p>
  </dd>
  <dt>
    <p><strong>dfl_val64, dfl_str, dfl_bool, dfl_int</strong></p>
  </dt>
  <dd>
    <p>This union contains the value of an attribute. For PFM_ATTR_UMASK, the is the unit mask code, for all other types this is the actual value of the attribute.</p>
  </dd>
  <dt>
    <p><strong>ctrl</strong></p>
  </dt>
  <dd>
    <p>This field indicates which layer or source controls the attribute. The following sources are defined:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>PFM_ATTR_CTRL_UNKNOWN</strong></p>
  </dt>
  <dd>
    <p>The source controlling the attribute is not known.</p>
  </dd>
  <dt>
    <p><strong>PFM_ATTR_CTRL_PMU</strong></p>
  </dt>
  <dd>
    <p>The attribute is controlled by the PMU hardware.</p>
  </dd>
  <dt>
    <p><strong>PFM_ATTR_CTRL_PERF_EVENT</strong></p>
  </dt>
  <dd>
    <p>The attribute is controlled by the perf_events kernel interface.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>reserved</strong></p>
  </dt>
  <dd>
    <p>These fields must be set to zero.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN</h2>
        <div class="sectioncontent">
<p>If successful, the function returns <strong>PFM_SUCCESS</strong> and attribute information in <strong>info</strong>, otherwise it returns an error code.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>PFMLIB_ERR_NOINIT</strong></p>
  </dt>
  <dd>
    <p>Library has not been initialized properly.</p>
  </dd>
  <dt>
    <p><strong>PFMLIB_ERR_INVAL</strong></p>
  </dt>
  <dd>
    <p>The <strong>idx</strong> or <strong>attr</strong> arguments are invalid or <strong>info</strong> is <strong>NULL</strong> or <strong>size</strong> is not zero.</p>
  </dd>
  <dt>
    <p><strong>PFM_ERR_NOTSUPP</strong></p>
  </dt>
  <dd>
    <p>The requested os layer has not been detected on the host system.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Stephane Eranian &lt;eranian@gmail.com&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pfm_find_event.3.html"><span aria-hidden="true">&larr;</span> pfm_find_event.3: None</a></li>
   <li class="next"><a href="pfm_get_event_encoding.3.html">pfm_get_event_encoding.3: Get raw event encoding <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
