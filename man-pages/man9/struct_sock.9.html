<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>struct_sock: Network layer representation of sockets</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Network layer representation of sockets">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="struct_sock (9) manual">
  <meta name="twitter:description" content="Network layer representation of sockets">
  <meta name="twitter:image" content="https://www.carta.tech/images/linux-manual-3.16-struct_sock-9.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man9/struct_sock.9.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="struct_sock (9) manual" />
  <meta property="og:description" content="Network layer representation of sockets" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/linux-manual-3.16-struct_sock-9.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">struct_sock<small> (9)</small></h1>
        <p class="lead">Network layer representation of sockets</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man9/">
      <span itemprop="name">Kernel routines</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man9/struct_sock.9.html">
      <span itemprop="name">struct_sock: Network layer representation of sockets</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/linux-manual-3.16/">
      <span itemprop="name">linux-manual-3.16</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man9/struct_sock.9.html">
      <span itemprop="name">struct_sock: Network layer representation of sockets</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
struct sock {
  struct sock_common __sk_common;
#define sk_node			__sk_common.skc_node
#define sk_nulls_node		__sk_common.skc_nulls_node
#define sk_refcnt		__sk_common.skc_refcnt
#define sk_tx_queue_mapping	__sk_common.skc_tx_queue_mapping
#define sk_dontcopy_begin	__sk_common.skc_dontcopy_begin
#define sk_dontcopy_end		__sk_common.skc_dontcopy_end
#define sk_hash			__sk_common.skc_hash
#define sk_portpair		__sk_common.skc_portpair
#define sk_num			__sk_common.skc_num
#define sk_dport		__sk_common.skc_dport
#define sk_addrpair		__sk_common.skc_addrpair
#define sk_daddr		__sk_common.skc_daddr
#define sk_rcv_saddr		__sk_common.skc_rcv_saddr
#define sk_family		__sk_common.skc_family
#define sk_state		__sk_common.skc_state
#define sk_reuse		__sk_common.skc_reuse
#define sk_reuseport		__sk_common.skc_reuseport
#define sk_bound_dev_if		__sk_common.skc_bound_dev_if
#define sk_bind_node		__sk_common.skc_bind_node
#define sk_prot			__sk_common.skc_prot
#define sk_net			__sk_common.skc_net
#define sk_v6_daddr		__sk_common.skc_v6_daddr
#define sk_v6_rcv_saddr	__sk_common.skc_v6_rcv_saddr
  socket_lock_t sk_lock;
  struct sk_buff_head sk_receive_queue;
  struct sk_backlog;
#define sk_rmem_alloc sk_backlog.rmem_alloc
  int sk_forward_alloc;
#ifdef CONFIG_RPS
  __u32 sk_rxhash;
#endif
#ifdef CONFIG_NET_RX_BUSY_POLL
  unsigned int sk_napi_id;
  unsigned int sk_ll_usec;
#endif
  atomic_t sk_drops;
  int sk_rcvbuf;
  struct sk_filter __rcu * sk_filter;
  struct socket_wq __rcu * sk_wq;
#ifdef CONFIG_NET_DMA
  struct sk_buff_head sk_async_wait_queue;
#endif
#ifdef CONFIG_XFRM
  struct xfrm_policy * sk_policy[2];
#endif
  unsigned long sk_flags;
  struct dst_entry * sk_rx_dst;
  struct dst_entry __rcu * sk_dst_cache;
  spinlock_t sk_dst_lock;
  atomic_t sk_wmem_alloc;
  atomic_t sk_omem_alloc;
  int sk_sndbuf;
  struct sk_buff_head sk_write_queue;
  unsigned int sk_shutdown:2;
  unsigned int sk_no_check_tx:1;
  unsigned int sk_no_check_rx:1;
  unsigned int sk_userlocks:4;
  unsigned int sk_protocol:8;
  unsigned int sk_type:16;
#define SK_PROTOCOL_MAX U8_MAX
  int sk_wmem_queued;
  gfp_t sk_allocation;
  u32 sk_pacing_rate;
  u32 sk_max_pacing_rate;
  netdev_features_t sk_route_caps;
  netdev_features_t sk_route_nocaps;
  int sk_gso_type;
  unsigned int sk_gso_max_size;
  u16 sk_gso_max_segs;
  int sk_rcvlowat;
  unsigned long sk_lingertime;
  struct sk_buff_head sk_error_queue;
  struct proto * sk_prot_creator;
  rwlock_t sk_callback_lock;
  int sk_err;
  int sk_err_soft;
  unsigned short sk_ack_backlog;
  unsigned short sk_max_ack_backlog;
  __u32 sk_priority;
#if IS_ENABLED(CONFIG_CGROUP_NET_PRIO)
  __u32 sk_cgrp_prioidx;
#endif
  struct pid * sk_peer_pid;
  const struct cred * sk_peer_cred;
  long sk_rcvtimeo;
  long sk_sndtimeo;
  void * sk_protinfo;
  struct timer_list sk_timer;
  ktime_t sk_stamp;
  struct socket * sk_socket;
  void * sk_user_data;
  struct page_frag sk_frag;
  struct sk_buff * sk_send_head;
  __s32 sk_peek_off;
  int sk_write_pending;
#ifdef CONFIG_SECURITY
  void * sk_security;
#endif
  __u32 sk_mark;
  u32 sk_classid;
  struct cg_proto * sk_cgrp;
  void (* sk_state_change) (struct sock *sk);
  void (* sk_data_ready) (struct sock *sk);
  void (* sk_write_space) (struct sock *sk);
  void (* sk_error_report) (struct sock *sk);
  int (* sk_backlog_rcv) (struct sock *sk,struct sk_buff *skb);
  void (* sk_destruct) (struct sock *sk);
};
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MEMBERS</h2>
        <div class="sectioncontent">
<p>__sk_common</p><p>shared layout with inet_timewait_sock</p><p>sk_lock</p><p>synchronizer</p><p>sk_receive_queue</p><p>incoming packets</p><p>sk_backlog</p><p>always used with the per-socket spinlock held</p><p>sk_forward_alloc</p><p>space allocated forward</p><p>sk_rxhash</p><p>flow hash received from netif layer</p><p>sk_napi_id</p><p>id of the last napi context to receive data for sk</p><p>sk_ll_usec</p><p>usecs to busypoll when there is no data</p><p>sk_drops</p><p>raw/udp drops counter</p><p>sk_rcvbuf</p><p>size of receive buffer in bytes</p><p>sk_filter</p><p>socket filtering instructions</p><p>sk_wq</p><p>sock wait queue and async head</p><p>sk_async_wait_queue</p><p>DMA copied packets</p><p>sk_policy[2]</p><p>flow policy</p><p>sk_flags</p><p><strong>SO_LINGER</strong> (l_onoff), <strong>SO_BROADCAST</strong>, <strong>SO_KEEPALIVE</strong>, <strong>SO_OOBINLINE</strong> settings, <strong>SO_TIMESTAMPING</strong> settings</p><p>sk_rx_dst</p><p>receive input route used by early demux</p><p>sk_dst_cache</p><p>destination cache</p><p>sk_dst_lock</p><p>destination cache lock</p><p>sk_wmem_alloc</p><p>transmit queue bytes committed</p><p>sk_omem_alloc</p><p>"o&ldquo; is &rdquo;option&ldquo; or &rdquo;other"</p><p>sk_sndbuf</p><p>size of send buffer in bytes</p><p>sk_write_queue</p><p>Packet sending queue</p><p>sk_shutdown</p><p>mask of <strong>SEND_SHUTDOWN</strong> and/or <strong>RCV_SHUTDOWN</strong></p><p>sk_no_check_tx</p><p><strong>SO_NO_CHECK</strong> setting, set checksum in TX packets</p><p>sk_no_check_rx</p><p>allow zero checksum in RX packets</p><p>sk_userlocks</p><p><strong>SO_SNDBUF</strong> and <strong>SO_RCVBUF</strong> settings</p><p>sk_protocol</p><p>which protocol this socket belongs in this network family</p><p>sk_type</p><p>socket type (<strong>SOCK_STREAM</strong>, etc)</p><p>sk_wmem_queued</p><p>persistent queue size</p><p>sk_allocation</p><p>allocation mode</p><p>sk_pacing_rate</p><p>Pacing rate (if supported by transport/packet scheduler)</p><p>sk_max_pacing_rate</p><p>Maximum pacing rate (<strong>SO_MAX_PACING_RATE</strong>)</p><p>sk_route_caps</p><p>route capabilities (e.g. <strong>NETIF_F_TSO</strong>)</p><p>sk_route_nocaps</p><p>forbidden route capabilities (e.g NETIF_F_GSO_MASK)</p><p>sk_gso_type</p><p>GSO type (e.g. <strong>SKB_GSO_TCPV4</strong>)</p><p>sk_gso_max_size</p><p>Maximum GSO segment size to build</p><p>sk_gso_max_segs</p><p>Maximum number of GSO segments</p><p>sk_rcvlowat</p><p><strong>SO_RCVLOWAT</strong> setting</p><p>sk_lingertime</p><p><strong>SO_LINGER</strong> l_linger setting</p><p>sk_error_queue</p><p>rarely used</p><p>sk_prot_creator</p><p>sk_prot of original sock creator (see ipv6_setsockopt, IPV6_ADDRFORM for instance)</p><p>sk_callback_lock</p><p>used with the callbacks in the end of this struct</p><p>sk_err</p><p>last error</p><p>sk_err_soft</p><p>errors that don&apos;t cause failure but are the cause of a persistent failure not just &apos;timed out&apos;</p><p>sk_ack_backlog</p><p>current listen backlog</p><p>sk_max_ack_backlog</p><p>listen backlog set in <strong>listen</strong></p><p>sk_priority</p><p><strong>SO_PRIORITY</strong> setting</p><p>sk_cgrp_prioidx</p><p>socket group&apos;s priority map index</p><p>sk_peer_pid</p><p>struct pid for this socket&apos;s peer</p><p>sk_peer_cred</p><p><strong>SO_PEERCRED</strong> setting</p><p>sk_rcvtimeo</p><p><strong>SO_RCVTIMEO</strong> setting</p><p>sk_sndtimeo</p><p><strong>SO_SNDTIMEO</strong> setting</p><p>sk_protinfo</p><p>private area, net family specific, when not using slab</p><p>sk_timer</p><p>sock cleanup timer</p><p>sk_stamp</p><p>time stamp of last packet received</p><p>sk_socket</p><p>Identd and reporting IO signals</p><p>sk_user_data</p><p>RPC layer private data</p><p>sk_frag</p><p>cached page frag</p><p>sk_send_head</p><p>front of stuff to transmit</p><p>sk_peek_off</p><p>current peek_offset value</p><p>sk_write_pending</p><p>a write to stream socket waits to start</p><p>sk_security</p><p>used by security modules</p><p>sk_mark</p><p>generic packet mark</p><p>sk_classid</p><p>this socket&apos;s cgroup classid</p><p>sk_cgrp</p><p>this socket&apos;s cgroup-specific proto data</p><p>sk_state_change</p><p>callback to indicate change in the state of the sock</p><p>sk_data_ready</p><p>callback to indicate there is data to be processed</p><p>sk_write_space</p><p>callback to indicate there is bf sending space available</p><p>sk_error_report</p><p>callback to indicate errors (e.g. <strong>MSG_ERRQUEUE</strong>)</p><p>sk_backlog_rcv</p><p>callback to process the backlog</p><p>sk_destruct</p><p>called at sock freeing time, i.e. when all refcnt == 0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="struct_skb_shared_hwtstamps.9.html"><span aria-hidden="true">&larr;</span> struct_skb_shared_hwtstamps.9: Hardware time stamps</a></li>
   <li class="next"><a href="struct_sock_common.9.html">struct_sock_common.9: Minimal network layer representation of sockets <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
