<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bitmap_onto: Translate one bitmap relative to another</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Translate one bitmap relative to another">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bitmap_onto (9) manual">
  <meta name="twitter:description" content="Translate one bitmap relative to another">
  <meta name="twitter:image" content="https://www.carta.tech/images/linux-manual-3.16-bitmap_onto-9.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man9/bitmap_onto.9.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bitmap_onto (9) manual" />
  <meta property="og:description" content="Translate one bitmap relative to another" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/linux-manual-3.16-bitmap_onto-9.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bitmap_onto<small> (9)</small></h1>
        <p class="lead">Translate one bitmap relative to another</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man9/">
      <span itemprop="name">Kernel routines</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man9/bitmap_onto.9.html">
      <span itemprop="name">bitmap_onto: Translate one bitmap relative to another</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/linux-manual-3.16/">
      <span itemprop="name">linux-manual-3.16</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man9/bitmap_onto.9.html">
      <span itemprop="name">bitmap_onto: Translate one bitmap relative to another</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>void bitmap_onto(unsigned&nbsp;long&nbsp;*&nbsp;</strong><em>dst</em><strong>, const&nbsp;unsigned&nbsp;long&nbsp;*&nbsp;</strong><em>orig</em><strong>, const&nbsp;unsigned&nbsp;long&nbsp;*&nbsp;</strong><em>relmap</em><strong>, int&nbsp;</strong><em>bits</em><strong>);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">
<p><em>dst</em></p><p>resulting translated bitmap</p><p><em>orig</em></p><p>original untranslated bitmap</p><p><em>relmap</em></p><p>bitmap relative to which translated</p><p><em>bits</em></p><p>number of bits in each of these bitmaps</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Set the n-th bit of <em>dst</em> iff there exists some m such that the n-th bit of <em>relmap</em> is set, the m-th bit of <em>orig</em> is set, and the n-th bit of <em>relmap</em> is also the m-th _set_ bit of <em>relmap</em>. (If you understood the previous sentence the first time your read it, you&apos;re overqualified for your current job.)</p><p>In other words, <em>orig</em> is mapped onto (surjectively) <em>dst</em>, using the the map { &lt;n, m&gt; | the n-th bit of <em>relmap</em> is the m-th set bit of <em>relmap</em> }.</p><p>Any set bits in <em>orig</em> above bit number W, where W is the weight of (number of set bits in) <em>relmap</em> are mapped nowhere. In particular, if for all bits m set in <em>orig</em>, m &gt;= W, then <em>dst</em> will end up empty. In situations where the possibility of such an empty result is not desired, one way to avoid it is to use the <strong>bitmap_fold</strong> operator, below, to first fold the <em>orig</em> bitmap over itself so that all its set bits x are in the range 0 &lt;= x &lt; W. The <strong>bitmap_fold</strong> operator does this by setting the bit (m % W) in <em>dst</em>, for each bit (m) set in <em>orig</em>.</p><p>Example [1] for <strong>bitmap_onto</strong>: Let&apos;s say <em>relmap</em> has bits 30-39 set, and <em>orig</em> has bits 1, 3, 5, 7, 9 and 11 set. Then on return from this routine, <em>dst</em> will have bits 31, 33, 35, 37 and 39 set.</p><p>When bit 0 is set in <em>orig</em>, it means turn on the bit in <em>dst</em> corresponding to whatever is the first bit (if any) that is turned on in <em>relmap</em>. Since bit 0 was off in the above example, we leave off that bit (bit 30) in <em>dst</em>.</p><p>When bit 1 is set in <em>orig</em> (as in the above example), it means turn on the bit in <em>dst</em> corresponding to whatever is the second bit that is turned on in <em>relmap</em>. The second bit in <em>relmap</em> that was turned on in the above example was bit 31, so we turned on bit 31 in <em>dst</em>.</p><p>Similarly, we turned on bits 33, 35, 37 and 39 in <em>dst</em>, because they were the 4th, 6th, 8th and 10th set bits set in <em>relmap</em>, and the 4th, 6th, 8th and 10th bits of <em>orig</em> (i.e. bits 3, 5, 7 and 9) were also set.</p><p>When bit 11 is set in <em>orig</em>, it means turn on the bit in <em>dst</em> corresponding to whatever is the twelfth bit that is turned on in <em>relmap</em>. In the above example, there were only ten bits turned on in <em>relmap</em> (30..39), so that bit 11 was set in <em>orig</em> had no affect on <em>dst</em>.</p><p>Example [2] for <strong>bitmap_fold</strong> + <strong>bitmap_onto</strong>: Let&apos;s say <em>relmap</em> has these ten bits set: 40 41 42 43 45 48 53 61 74 95 (for the curious, that&apos;s 40 plus the first ten terms of the Fibonacci sequence.)</p><p>Further lets say we use the following code, invoking <strong>bitmap_fold</strong> then bitmap_onto, as suggested above to avoid the possitility of an empty <em>dst</em> result:</p><p>unsigned long *tmp; // a temporary bitmap&apos;s bits</p><p>bitmap_fold(tmp, orig, bitmap_weight(relmap, bits), bits); bitmap_onto(dst, tmp, relmap, bits);</p><p>Then this table shows what various values of <em>dst</em> would be, for various <em>orig</em>&apos;s. I list the zero-based positions of each set bit. The tmp column shows the intermediate result, as computed by using <strong>bitmap_fold</strong> to fold the <em>orig</em> bitmap modulo ten (the weight of <em>relmap</em>).</p><p><em>orig</em> tmp <em>dst</em> 0 0 40 1 1 41 9 9 95 10 0 40 (*) 1 3 5 7 1 3 5 7 41 43 48 61 0 1 2 3 4 0 1 2 3 4 40 41 42 43 45 0 9 18 27 0 9 8 7 40 61 74 95 0 10 20 30 0 40 0 11 22 33 0 1 2 3 40 41 42 43 0 12 24 36 0 2 4 6 40 42 45 53 78 102 211 1 2 8 41 42 74 (*)</p><p>(*) For these marked lines, if we hadn&apos;t first done <strong>bitmap_fold</strong> into tmp, then the <em>dst</em> result would have been empty.</p><p>If either of <em>orig</em> or <em>relmap</em> is empty (no set bits), then <em>dst</em> will be returned empty.</p><p>If (as explained above) the only set bits in <em>orig</em> are in positions m where m &gt;= W, (where W is the weight of <em>relmap</em>) then <em>dst</em> will once again be returned empty.</p><p>All bits in <em>dst</em> not set by the above rule are cleared.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bitmap_fold.9.html"><span aria-hidden="true">&larr;</span> bitmap_fold.9: Fold larger bitmap into smaller, modulo specified size</a></li>
   <li class="next"><a href="bitmap_ord_to_pos.9.html">bitmap_ord_to_pos.9: Find position of n-th set bit in bitmap <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
