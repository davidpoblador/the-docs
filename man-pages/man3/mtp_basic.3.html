<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mtp_basic: The basic device management api.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The basic device management api.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mtp_basic (3) manual">
  <meta name="twitter:description" content="The basic device management api.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmtp-doc-mtp_basic-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/mtp_basic.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mtp_basic (3) manual" />
  <meta property="og:description" content="The basic device management api." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmtp-doc-mtp_basic-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mtp_basic<small> (3)</small></h1>
        <p class="lead">The basic device management api.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/mtp_basic.3.html">
      <span itemprop="name">mtp_basic: The basic device management api.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmtp-doc/">
      <span itemprop="name">libmtp-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/mtp_basic.3.html">
      <span itemprop="name">mtp_basic: The basic device management api.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Function Documentation</h2>
        <div class="sectioncontent">
<h3>int LIBMTP_Check_Capability (\fBLIBMTP_mtpdevice_t\fP *device, \fBLIBMTP_devicecap_t\fPcap)</h3>
<p>This function checks if the device has some specific capabilities, in order to avoid calling APIs that may disturb the device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to check the capability on.</p><p><em>cap</em> the capability to check.</p><p><strong>Returns:</strong></p><p>0 if not supported, any other value means the device has the requested capability.</p><p>References LIBMTP_DEVICECAP_EditObjects, LIBMTP_DEVICECAP_GetPartialObject, LIBMTP_DEVICECAP_SendPartialObject, and LIBMTP_mtpdevice_struct::params.</p>
<h3>int LIBMTP_Check_Specific_Device (intbusno, intdevno)</h3>
<p>Checks if a specific device with a certain bus and device number has an MTP type device descriptor.</p><p><strong>Parameters:</strong></p><p><em>busno</em> the bus number of the device to check</p><p><em>deviceno</em> the device number of the device to check</p><p><strong>Returns:</strong></p><p>1 if the device is MTP else 0</p>
<h3>void LIBMTP_Clear_Errorstack (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This function clears the error stack of a device and frees any memory used by it. Call this when you're finished with using the errors.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the MTP device to clear the error stack for.</p><p>References LIBMTP_mtpdevice_struct::errorstack.</p><p>Referenced by LIBMTP_Release_Device().</p>
<h3>void LIBMTP_destroy_allowed_values_t (\fBLIBMTP_allowed_values_t\fP *allowed_vals)</h3>
<p>Destroys a LIBMTP_allowed_values_t struct</p><p><strong>Parameters:</strong></p><p><em>allowed_vals</em> the struct to destroy</p><p>References LIBMTP_allowed_values_struct::datatype, and LIBMTP_allowed_values_struct::is_range.</p>
<h3>\fBLIBMTP_error_number_t\fP LIBMTP_Detect_Raw_Devices (\fBLIBMTP_raw_device_t\fP **devices, int *numdevs)</h3>
<p>Detect the raw MTP device descriptors and return a list of of the devices found.</p><p><strong>Parameters:</strong></p><p><em>devices</em> a pointer to a variable that will hold the list of raw devices found. This may be NULL on return if the number of detected devices is zero. The user shall simply free()<em> this variable when finished with the raw devices, in order to release memory.</em></p><p><em>numdevs</em> a pointer to an integer that will hold the number of devices in the list. This may be 0.</p><p><strong>Returns:</strong></p><p>0 if successful, any other value means failure.</p><p><strong>Examples: </strong> <strong>detect.c</strong>, and <strong>folders.c</strong>.</p><p>References LIBMTP_raw_device_struct::bus_location, LIBMTP_raw_device_struct::device_entry, LIBMTP_device_entry_struct::device_flags, LIBMTP_raw_device_struct::devnum, LIBMTP_device_entry_struct::product, LIBMTP_device_entry_struct::product_id, LIBMTP_device_entry_struct::vendor, and LIBMTP_device_entry_struct::vendor_id.</p><p>Referenced by LIBMTP_Get_Connected_Devices(), and LIBMTP_Get_First_Device().</p>
<h3>void LIBMTP_Dump_Device_Info (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This function dumps out a large chunk of textual information provided from the PTP protocol and additionally some extra MTP-specific information where applicable.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the MTP device to report info from.</p><p>References LIBMTP_devicestorage_struct::AccessCapability, LIBMTP_mtpdevice_struct::default_album_folder, LIBMTP_mtpdevice_struct::default_music_folder, LIBMTP_mtpdevice_struct::default_organizer_folder, LIBMTP_mtpdevice_struct::default_picture_folder, LIBMTP_mtpdevice_struct::default_playlist_folder, LIBMTP_mtpdevice_struct::default_text_folder, LIBMTP_mtpdevice_struct::default_video_folder, LIBMTP_mtpdevice_struct::default_zencast_folder, dump_usbinfo(), LIBMTP_mtpdevice_struct::extensions, LIBMTP_devicestorage_struct::FilesystemType, LIBMTP_devicestorage_struct::FreeSpaceInBytes, LIBMTP_devicestorage_struct::FreeSpaceInObjects, LIBMTP_devicestorage_struct::id, LIBMTP_Get_Property_Description(), LIBMTP_device_extension_struct::major, LIBMTP_devicestorage_struct::MaxCapacity, LIBMTP_device_extension_struct::minor, LIBMTP_device_extension_struct::name, LIBMTP_device_extension_struct::next, LIBMTP_devicestorage_struct::next, LIBMTP_mtpdevice_struct::object_bitsize, LIBMTP_mtpdevice_struct::params, LIBMTP_mtpdevice_struct::storage, LIBMTP_devicestorage_struct::StorageDescription, LIBMTP_devicestorage_struct::StorageType, LIBMTP_mtpdevice_struct::usbinfo, and LIBMTP_devicestorage_struct::VolumeIdentifier.</p>
<h3>void LIBMTP_Dump_Errorstack (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This function dumps the error stack to stderr. (You still have to clear the stack though.)</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the MTP device to dump the error stack for.</p><p>References LIBMTP_mtpdevice_struct::errorstack.</p>
<h3>int LIBMTP_Format_Storage (\fBLIBMTP_mtpdevice_t\fP *device, \fBLIBMTP_devicestorage_t\fP *storage)</h3>
<p>Formats device storage (if the device supports the operation). WARNING: This WILL delete all data from the device. Make sure you've got confirmation from the user BEFORE you call this function.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device containing the storage to format.</p><p><em>storage</em> the actual storage to format.</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure.</p><p>References LIBMTP_devicestorage_struct::id, and LIBMTP_mtpdevice_struct::params.</p>
<h3>int LIBMTP_Get_Allowed_Property_Values (\fBLIBMTP_mtpdevice_t\fP *device, \fBLIBMTP_property_t\fP constproperty, \fBLIBMTP_filetype_t\fP constfiletype, \fBLIBMTP_allowed_values_t\fP *allowed_vals)</h3>
<p>Gets the allowed values (range or enum) for a property</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device</p><p><em>property</em> the property to query</p><p><em>filetype</em> the filetype of the object you want to set values for</p><p><em>allowed_vals</em> pointer to a LIBMTP_allowed_values_t struct to receive the allowed values. Call LIBMTP_destroy_allowed_values_t on this on successful completion.</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure</p><p>References LIBMTP_allowed_values_struct::datatype, LIBMTP_allowed_values_struct::is_range, LIBMTP_allowed_values_struct::num_entries, and LIBMTP_mtpdevice_struct::params.</p>
<h3>int LIBMTP_Get_Batterylevel (\fBLIBMTP_mtpdevice_t\fP *device, uint8_t *constmaximum_level, uint8_t *constcurrent_level)</h3>
<p>This function retrieves the current battery level on the device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the battery level for.</p><p><em>maximum_level</em> a pointer to a variable that will hold the maximum level of the battery if the call was successful.</p><p><em>current_level</em> a pointer to a variable that will hold the current level of the battery if the call was successful. A value of 0 means that the device is on external power.</p><p><strong>Returns:</strong></p><p>0 if the storage info was successfully retrieved, any other means failure. A typical cause of failure is that the device does not support the battery level property.</p><p>References LIBMTP_mtpdevice_struct::maximum_battery_level, LIBMTP_mtpdevice_struct::params, and LIBMTP_mtpdevice_struct::usbinfo.</p>
<h3>\fBLIBMTP_error_number_t\fP LIBMTP_Get_Connected_Devices (\fBLIBMTP_mtpdevice_t\fP **device_list)</h3>
<p>Get the first connected MTP device node in the linked list of devices. Currently this only provides access to USB devices</p><p><strong>Parameters:</strong></p><p><em>device_list</em> A list of devices ready to be used by the caller. You need to know how many there are.</p><p><strong>Returns:</strong></p><p>Any error information gathered from device connections</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Number_Devices_In_List()</strong></p><p>References LIBMTP_Detect_Raw_Devices().</p>
<h3>int LIBMTP_Get_Device_Certificate (\fBLIBMTP_mtpdevice_t\fP *device, char **constdevcert)</h3>
<p>This function returns the device (public key) certificate as an XML document string from the device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the device certificate for.</p><p><em>devcert</em> the device certificate as an XML string or NULL if the call failed or the device certificate property is not supported. This string must be free()<em>:ed by the caller after use.</em></p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure.</p>
<h3>char* LIBMTP_Get_Deviceversion (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This retrieves the device version (hardware and firmware version) of an MTP device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the device version for.</p><p><strong>Returns:</strong></p><p>a newly allocated UTF-8 string representing the device version. The string must be freed by the caller after use. If the call was unsuccessful this will contain NULL.</p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>\fBLIBMTP_error_t\fP* LIBMTP_Get_Errorstack (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This returns the error stack for a device in case you need to either reference the error numbers (e.g. when creating multilingual apps with multiple-language text representations for each error number) or when you need to build a multi-line error text widget or something like that. You need to call the LIBMTP_Clear_Errorstack to clear it when you're finished with it.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the MTP device to get the error stack for.</p><p><strong>Returns:</strong></p><p>the error stack or NULL if there are no errors on the stack.</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Clear_Errorstack()</strong></p><p><strong>LIBMTP_Dump_Errorstack()</strong></p><p>References LIBMTP_mtpdevice_struct::errorstack.</p>
<h3>\fBLIBMTP_mtpdevice_t\fP* LIBMTP_Get_First_Device (void)</h3>
<p>Get the first (as in 'first in the list of') connected MTP device.</p><p><strong>Returns:</strong></p><p>a device pointer.</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Get_Connected_Devices()</strong></p><p>References LIBMTP_Detect_Raw_Devices().</p>
<h3>char* LIBMTP_Get_Friendlyname (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This retrieves the 'friendly name' of an MTP device. Usually this is simply the name of the owner or something like 'John Doe's Digital Audio Player'. This property should be supported by all MTP devices.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the friendly name for.</p><p><strong>Returns:</strong></p><p>a newly allocated UTF-8 string representing the friendly name. The string must be freed by the caller after use.</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Set_Friendlyname()</strong></p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>char* LIBMTP_Get_Manufacturername (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This retrieves the manufacturer name of an MTP device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the manufacturer name for.</p><p><strong>Returns:</strong></p><p>a newly allocated UTF-8 string representing the manufacturer name. The string must be freed by the caller after use. If the call was unsuccessful this will contain NULL.</p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>char* LIBMTP_Get_Modelname (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This retrieves the model name (often equal to product name) of an MTP device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the model name for.</p><p><strong>Returns:</strong></p><p>a newly allocated UTF-8 string representing the model name. The string must be freed by the caller after use. If the call was unsuccessful this will contain NULL.</p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>char const* LIBMTP_Get_Property_Description (\fBLIBMTP_property_t\fPinproperty)</h3>
<p>This helper function returns a textual description for a libmtp property to be used in dialog boxes etc.</p><p><strong>Parameters:</strong></p><p><em>inproperty</em> the libmtp internal property to get a description for.</p><p><strong>Returns:</strong></p><p>a string representing the filetype, this must <strong>NOT</strong> be free():ed by the caller!</p><p>References propertymap_struct::description, and propertymap_struct::id.</p><p>Referenced by LIBMTP_Dump_Device_Info().</p>
<h3>int LIBMTP_Get_Secure_Time (\fBLIBMTP_mtpdevice_t\fP *device, char **constsectime)</h3>
<p>This function returns the secure time as an XML document string from the device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the secure time for.</p><p><em>sectime</em> the secure time string as an XML document or NULL if the call failed or the secure time property is not supported. This string must be free()<em>:ed by the caller after use.</em></p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure.</p>
<h3>char* LIBMTP_Get_Serialnumber (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This retrieves the serial number of an MTP device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the serial number for.</p><p><strong>Returns:</strong></p><p>a newly allocated UTF-8 string representing the serial number. The string must be freed by the caller after use. If the call was unsuccessful this will contain NULL.</p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>int LIBMTP_Get_Storage (\fBLIBMTP_mtpdevice_t\fP *device, int constsortby)</h3>
<p>This function updates all the storage id's of a device and their properties, then creates a linked list and puts the list head into the device struct. It also optionally sorts this list. If you want to display storage information in your application you should call this function, then dereference the device struct (device-&gt;storage) to get out information on the storage.</p><p>You need to call this everytime you want to update the device-&gt;storage list, for example anytime you need to check available storage somewhere.</p><p><strong>WARNING:</strong> since this list is dynamically updated, do not reference its fields in external applications by pointer! E.g do not put a reference to any char *<strong> field. instead strncpy()</strong> it!</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the storage for.</p><p><em>sortby</em> an integer that determines the sorting of the storage list. Valid sort methods are defined in <strong>libmtp.h</strong> with beginning with LIBMTP_STORAGE_SORTBY_. 0 or LIBMTP_STORAGE_SORTBY_NOTSORTED to not sort.</p><p><strong>Returns:</strong></p><p>0 on success, 1 success but only with storage id's, storage properities could not be retrieved and -1 means failure.</p><p>References LIBMTP_devicestorage_struct::AccessCapability, LIBMTP_devicestorage_struct::FilesystemType, LIBMTP_devicestorage_struct::FreeSpaceInBytes, LIBMTP_devicestorage_struct::FreeSpaceInObjects, LIBMTP_devicestorage_struct::id, LIBMTP_devicestorage_struct::MaxCapacity, LIBMTP_devicestorage_struct::next, LIBMTP_mtpdevice_struct::params, LIBMTP_devicestorage_struct::prev, LIBMTP_mtpdevice_struct::storage, LIBMTP_devicestorage_struct::StorageDescription, LIBMTP_devicestorage_struct::StorageType, and LIBMTP_devicestorage_struct::VolumeIdentifier.</p><p>Referenced by LIBMTP_Open_Raw_Device_Uncached().</p>
<h3>char* LIBMTP_Get_String_From_Object (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id)</h3>
<p>Get/set arbitrary properties. These do not update the cache; should only be used on properties not stored in structs</p><p>Retrieves a string from an object</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><strong>Returns:</strong></p><p>valid string or NULL on failure. The returned string must bee free():ed by the caller after use.</p>
<h3>int LIBMTP_Get_Supported_Filetypes (\fBLIBMTP_mtpdevice_t\fP *device, uint16_t **constfiletypes, uint16_t *constlength)</h3>
<p>This function retrieves a list of supported file types, i.e. the file types that this device claims it supports, e.g. audio file types that the device can play etc. This list is mitigated to inlcude the file types that libmtp can handle, i.e. it will not list filetypes that libmtp will handle internally like playlists and folders.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the filetype capabilities for.</p><p><em>filetypes</em> a pointer to a pointer that will hold the list of supported filetypes if the call was successful. This list must be free()<em>:ed by the caller after use.</em></p><p><em>length</em> a pointer to a variable that will hold the length of the list of supported filetypes if the call was successful.</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure.</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Get_Filetype_Description()</strong></p><p>References LIBMTP_mtpdevice_struct::params, and LIBMTP_mtpdevice_struct::usbinfo.</p>
<h3>char* LIBMTP_Get_Syncpartner (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This retrieves the syncronization partner of an MTP device. This property should be supported by all MTP devices.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to get the sync partner for.</p><p><strong>Returns:</strong></p><p>a newly allocated UTF-8 string representing the synchronization partner. The string must be freed by the caller after use.</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Set_Syncpartner()</strong></p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>uint16_t LIBMTP_Get_u16_From_Object (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id, uint16_t constvalue_default)</h3>
<p>Retrieves an unsigned 16-bit integer from an object attribute</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><em>value_default</em> Default value to return on failure</p><p><strong>Returns:</strong></p><p>a value</p>
<h3>uint32_t LIBMTP_Get_u32_From_Object (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id, uint32_t constvalue_default)</h3>
<p>Retrieves an unsigned 32-bit integer from an object attribute</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><em>value_default</em> Default value to return on failure</p><p><strong>Returns:</strong></p><p>the value</p>
<h3>uint64_t LIBMTP_Get_u64_From_Object (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id, uint64_t constvalue_default)</h3>
<p>Retrieves an unsigned 64-bit integer from an object attribute</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><em>value_default</em> Default value to return on failure</p><p><strong>Returns:</strong></p><p>the value</p>
<h3>uint8_t LIBMTP_Get_u8_From_Object (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id, uint8_t constvalue_default)</h3>
<p>Retrieves an unsigned 8-bit integer from an object attribute</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><em>value_default</em> Default value to return on failure</p><p><strong>Returns:</strong></p><p>a value</p>
<h3>int LIBMTP_Is_Property_Supported (\fBLIBMTP_mtpdevice_t\fP *device, \fBLIBMTP_property_t\fP constproperty, \fBLIBMTP_filetype_t\fP constfiletype)</h3>
<p>Determine if a property is supported for a given file type</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device</p><p><em>property</em> the property to query</p><p><em>filetype</em> the filetype of the object you want to set values for</p><p><strong>Returns:</strong></p><p>0 if not supported, positive if supported, negative on error</p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>uint32_t LIBMTP_Number_Devices_In_List (\fBLIBMTP_mtpdevice_t\fP *device_list)</h3>
<p>Get the number of devices that are available in the listed device list</p><p><strong>Parameters:</strong></p><p><em>device_list</em> Pointer to a linked list of devices</p><p><strong>Returns:</strong></p><p>Number of devices in the device list device_list</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Get_Connected_Devices()</strong></p><p>References LIBMTP_mtpdevice_struct::next.</p>
<h3>\fBLIBMTP_mtpdevice_t\fP* LIBMTP_Open_Raw_Device_Uncached (\fBLIBMTP_raw_device_t\fP *rawdevice)</h3>
<p>This function opens a device from a raw device. It is the preferred way to access devices in the new interface where several devices can come and go as the library is working on a certain device.</p><p><strong>Parameters:</strong></p><p><em>rawdevice</em> the raw device to open a 'real' device for.</p><p><strong>Returns:</strong></p><p>an open device.</p><p>References LIBMTP_raw_device_struct::bus_location, LIBMTP_mtpdevice_struct::cached, configure_usb_device(), LIBMTP_mtpdevice_struct::default_album_folder, LIBMTP_mtpdevice_struct::default_music_folder, LIBMTP_mtpdevice_struct::default_organizer_folder, LIBMTP_mtpdevice_struct::default_picture_folder, LIBMTP_mtpdevice_struct::default_playlist_folder, LIBMTP_mtpdevice_struct::default_text_folder, LIBMTP_mtpdevice_struct::default_video_folder, LIBMTP_mtpdevice_struct::default_zencast_folder, LIBMTP_raw_device_struct::device_entry, DEVICE_FLAG_FLAC_IS_UNKNOWN, DEVICE_FLAG_OGG_IS_UNKNOWN, LIBMTP_device_entry_struct::device_flags, DEVICE_FLAGS_ANDROID_BUGS, DEVICE_FLAGS_ARICENT_BUGS, DEVICE_FLAGS_SONY_NWZ_BUGS, LIBMTP_raw_device_struct::devnum, LIBMTP_mtpdevice_struct::errorstack, LIBMTP_mtpdevice_struct::extensions, LIBMTP_Get_Storage(), LIBMTP_mtpdevice_struct::maximum_battery_level, LIBMTP_device_extension_struct::name, LIBMTP_device_extension_struct::next, LIBMTP_mtpdevice_struct::object_bitsize, LIBMTP_mtpdevice_struct::params, _PTP_USB::rawdevice, LIBMTP_mtpdevice_struct::storage, and LIBMTP_mtpdevice_struct::usbinfo.</p>
<h3>void LIBMTP_Release_Device (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This closes and releases an allocated MTP device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the MTP device to release.</p><p>References LIBMTP_mtpdevice_struct::extensions, LIBMTP_Clear_Errorstack(), LIBMTP_device_extension_struct::name, LIBMTP_device_extension_struct::next, LIBMTP_mtpdevice_struct::params, and LIBMTP_mtpdevice_struct::usbinfo.</p><p>Referenced by LIBMTP_Release_Device_List().</p>
<h3>void LIBMTP_Release_Device_List (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This closes and releases an allocated MTP device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the MTP device to release.</p><p>References LIBMTP_Release_Device(), LIBMTP_Release_Device_List(), and LIBMTP_mtpdevice_struct::next.</p><p>Referenced by LIBMTP_Release_Device_List().</p>
<h3>int LIBMTP_Reset_Device (\fBLIBMTP_mtpdevice_t\fP *device)</h3>
<p>This resets a device in case it supports the PTP_OC_ResetDevice operation code (0x1010).</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to reset.</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure.</p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>int LIBMTP_Set_Friendlyname (\fBLIBMTP_mtpdevice_t\fP *device, char const *constfriendlyname)</h3>
<p>Sets the 'friendly name' of an MTP device.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to set the friendly name for.</p><p><em>friendlyname</em> the new friendly name for the device.</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure.</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Get_Friendlyname()</strong></p><p>References LIBMTP_mtpdevice_struct::params.</p>
<h3>int LIBMTP_Set_Object_String (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id, char const *conststring)</h3>
<p>Sets an object attribute from a string</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><em>string</em> string value to set</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure</p>
<h3>int LIBMTP_Set_Object_u16 (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id, uint16_t constvalue)</h3>
<p>Sets an object attribute from an unsigned 16-bit integer</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><em>value</em> 16-bit unsigned integer to set</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure</p>
<h3>int LIBMTP_Set_Object_u32 (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id, uint32_t constvalue)</h3>
<p>Sets an object attribute from an unsigned 32-bit integer</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><em>value</em> 32-bit unsigned integer to set</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure</p>
<h3>int LIBMTP_Set_Object_u8 (\fBLIBMTP_mtpdevice_t\fP *device, uint32_t constobject_id, \fBLIBMTP_property_t\fP constattribute_id, uint8_t constvalue)</h3>
<p>Sets an object attribute from an unsigned 8-bit integer</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to an MTP device.</p><p><em>object_id</em> Object reference</p><p><em>attribute_id</em> MTP attribute ID</p><p><em>value</em> 8-bit unsigned integer to set</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure</p>
<h3>int LIBMTP_Set_Syncpartner (\fBLIBMTP_mtpdevice_t\fP *device, char const *constsyncpartner)</h3>
<p>Sets the synchronization partner of an MTP device. Note that we have no idea what the effect of setting this to 'foobar' may be. But the general idea seems to be to tell which program shall synchronize with this device and tell others to leave it alone.</p><p><strong>Parameters:</strong></p><p><em>device</em> a pointer to the device to set the sync partner for.</p><p><em>syncpartner</em> the new synchronization partner for the device.</p><p><strong>Returns:</strong></p><p>0 on success, any other value means failure.</p><p><strong>See also:</strong></p><p><strong>LIBMTP_Get_Syncpartner()</strong></p><p>References LIBMTP_mtpdevice_struct::params.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for libmtp from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mtp_albums.3.html"><span aria-hidden="true">&larr;</span> mtp_albums.3: The audio/video album management api.</a></li>
   <li class="next"><a href="mtp_device-flags.h.3.html">mtp_device-flags.h.3: Device-flags.h <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
