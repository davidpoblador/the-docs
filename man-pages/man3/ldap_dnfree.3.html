<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ldap_dnfree: Ldap dn handling routines</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ldap dn handling routines">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ldap_dnfree (3) manual">
  <meta name="twitter:description" content="Ldap dn handling routines">
  <meta name="twitter:image" content="https://www.carta.tech/images/libldap2-dev-ldap_dnfree-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/ldap_dnfree.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ldap_dnfree (3) manual" />
  <meta property="og:description" content="Ldap dn handling routines" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libldap2-dev-ldap_dnfree-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ldap_dnfree<small> (3)</small></h1>
        <p class="lead">Ldap dn handling routines</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ldap_dnfree.3.html">
      <span itemprop="name">ldap_dnfree: Ldap dn handling routines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libldap2-dev/">
      <span itemprop="name">libldap2-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ldap_dnfree.3.html">
      <span itemprop="name">ldap_dnfree: Ldap dn handling routines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">LIBRARY</h2>
        <div class="sectioncontent">
<p>OpenLDAP LDAP (libldap, -lldap)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
#include &lt;ldap.h&gt;

char *ldap_get_dn( LDAP *ld, LDAPMessage *entry )

int ldap_str2dn( const char *str, LDAPDN *dn, unsigned flags )

void ldap_dnfree( LDAPDN dn )

int ldap_dn2str( LDAPDN dn, char **str, unsigned flags )

char **ldap_explode_dn( const char *dn, int notypes )

char **ldap_explode_rdn( const char *rdn, int notypes )

char *ldap_dn2ufn( const char * dn )

char *ldap_dn2dcedn( const char * dn )

char *ldap_dcedn2dn( const char * dn )

char *ldap_dn2ad_canonical( const char * dn )
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>These routines allow LDAP entry names (Distinguished Names, or DNs) to be obtained, parsed, converted to a user-friendly form, and tested. A DN has the form described in RFC 4414 "Lightweight Directory Access Protocol (LDAP): String Representation of Distinguished Names".</p><p>The <strong>ldap_get_dn()</strong> routine takes an <em>entry</em> as returned by <a href="../man3/ldap_first_entry.3.html"><strong>ldap_first_entry</strong>(3)</a> or <a href="../man3/ldap_next_entry.3.html"><strong>ldap_next_entry</strong>(3)</a> and returns a copy of the entry's DN.  Space for the DN will be obtained dynamically and should be freed by the caller using <a href="../man3/ldap_memfree.3.html"><strong>ldap_memfree</strong>(3)</a>.</p><p><strong>ldap_str2dn()</strong> parses a string representation of a distinguished name contained in <strong>str</strong> into its components, which are stored in <strong>dn</strong> as <strong>ldap_ava</strong> structures, arranged in <strong>LDAPAVA,</strong> <strong>LDAPRDN,</strong> and <strong>LDAPDN</strong> terms.  Space for <strong>dn</strong> will be obtained dynamically and should be freed by the caller using <a href="../man3/ldap_dnfree.3.html"><strong>ldap_dnfree</strong>(3)</a>. The <strong>LDAPDN</strong> is defined as:</p>
<pre>
typedef struct ldap_ava {
    struct berval la_attr;
    struct berval la_value;
    unsigned la_flags;
} LDAPAVA;

typedef LDAPAVA** LDAPRDN;
typedef LDAPRDN* LDAPDN;

</pre>
<p>The attribute types and the attribute values are not normalized. The <strong>la_flags</strong> can be either <strong>LDAP_AVA_STRING</strong> or <strong>LDAP_AVA_BINARY,</strong> the latter meaning that the value is BER/DER encoded and thus must be represented as, quoting from RFC 4514, " ... an octothorpe character ('#' ASCII 35) followed by the hexadecimal representation of each of the bytes of the BER encoding of the X.500 AttributeValue." The <strong>flags</strong> parameter to <strong>ldap_str2dn()</strong> can be</p>
<pre>
	LDAP_DN_FORMAT_LDAPV3
	LDAP_DN_FORMAT_LDAPV2
	LDAP_DN_FORMAT_DCE

</pre>
<p>which defines what DN syntax is expected (according to RFC 4514, RFC 1779 and DCE, respectively). The format can be <em>OR</em>ed to the flags</p>
<pre>
	LDAP_DN_P_NO_SPACES
	LDAP_DN_P_NO_SPACE_AFTER_RDN
	...
	LDAP_DN_PEDANTIC

</pre>
<p>The latter is a shortcut for all the previous limitations.</p><p><strong>LDAP_DN_P_NO_SPACES</strong> does not allow extra spaces in the dn; the default is to silently eliminate spaces around AVA separators ('='), RDN component separators ('+' for LDAPv3/LDAPv2 or ',' for DCE) and RDN separators (',' LDAPv3/LDAPv2 or '/' for DCE).</p><p><strong>LDAP_DN_P_NO_SPACE_AFTER_RDN</strong> does not allow a single space after RDN separators.</p><p><strong>ldap_dn2str()</strong> performs the inverse operation, yielding in <strong>str</strong> a string representation of <strong>dn.</strong> It allows the same values for <strong>flags</strong> as <strong>ldap_str2dn(),</strong> plus</p>
<pre>
	LDAP_DN_FORMAT_UFN
	LDAP_DN_FORMAT_AD_CANONICAL

</pre>
<p>for user-friendly naming (RFC 1781) and AD canonical.</p><p>The following routines are viewed as deprecated in favor of <strong>ldap_str2dn()</strong> and <strong>ldap_dn2str().</strong> They are provided to support legacy applications.</p><p>The <strong>ldap_explode_dn()</strong> routine takes a DN as returned by <strong>ldap_get_dn()</strong> and breaks it up into its component parts.  Each part is known as a Relative Distinguished Name, or RDN. <strong>ldap_explode_dn()</strong> returns a NULL-terminated array, each component of which contains an RDN from the DN.  The <em>notypes</em> parameter is used to request that only the RDN values be returned, not their types.  For example, the DN "cn=Bob, c=US" would return as either { "cn=Bob", "c=US", NULL } or { "Bob", "US", NULL }, depending on whether notypes was 0 or 1, respectively. Assertion values in RDN strings may included escaped characters. The result can be freed by calling <a href="../man3/ldap_value_free.3.html"><strong>ldap_value_free</strong>(3)</a>.</p><p>Similarly, the <strong>ldap_explode_rdn()</strong> routine takes an RDN as returned by <strong>ldap_explode_dn(dn,0)</strong> and breaks it up into its "type=value" component parts (or just "value", if the <em>notypes</em> parameter is set).  Note the value is not unescaped.  The result can be freed by calling <a href="../man3/ldap_value_free.3.html"><strong>ldap_value_free</strong>(3)</a>.</p><p><strong>ldap_dn2ufn()</strong> is used to turn a DN as returned by <a href="../man3/ldap_get_dn.3.html"><strong>ldap_get_dn</strong>(3)</a> into a more user-friendly form, stripping off all type names.  See "Using the Directory to Achieve User Friendly Naming" (RFC 1781) for more details on the UFN format.  Due to the ambiguous nature of the format, it is generally only used for display purposes. The space for the UFN returned is obtained dynamically and the user is responsible for freeing it via a call to <a href="../man3/ldap_memfree.3.html"><strong>ldap_memfree</strong>(3)</a>.</p><p><strong>ldap_dn2dcedn()</strong> is used to turn a DN as returned by <a href="../man3/ldap_get_dn.3.html"><strong>ldap_get_dn</strong>(3)</a> into a DCE-style DN, e.g. a string with most-significant to least significant rdns separated by slashes ('/'); rdn components are separated by commas (','). Only printable chars (e.g. LDAPv2 printable string) are allowed, at least in this implementation. <strong>ldap_dcedn2dn()</strong> performs the opposite operation. <strong>ldap_dn2ad_canonical()</strong> turns a DN into a AD canonical name, which is basically a DCE dn with attribute types omitted. The trailing domain, if present, is turned in a DNS-like domain. The space for the returned value is obtained dynamically and the user is responsible for freeing it via a call to <a href="../man3/ldap_memfree.3.html"><strong>ldap_memfree</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>If an error occurs in <strong>ldap_get_dn()</strong>, NULL is returned and the <strong>ld_errno</strong> field in the <em>ld</em> parameter is set to indicate the error.  See <a href="../man3/ldap_error.3.html"><strong>ldap_error</strong>(3)</a> for a description of possible error codes. <strong>ldap_explode_dn()</strong>, <strong>ldap_explode_rdn()</strong>, <strong>ldap_dn2ufn(),</strong> <strong>ldap_dn2dcedn(),</strong> <strong>ldap_dcedn2dn(),</strong> and <strong>ldap_dn2ad_canonical()</strong> will return NULL with <a href="../man3/errno.3.html"><strong>errno</strong>(3)</a> set appropriately in case of trouble.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>These routines dynamically allocate memory that the caller must free.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ldap_dnfree&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/ldap.3.html"><strong>ldap</strong>(3)</a>, <a href="../man3/ldap_error.3.html"><strong>ldap_error</strong>(3)</a>, <a href="../man3/ldap_first_entry.3.html"><strong>ldap_first_entry</strong>(3)</a>, <a href="../man3/ldap_memfree.3.html"><strong>ldap_memfree</strong>(3)</a>, <a href="../man3/ldap_value_free.3.html"><strong>ldap_value_free</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p><strong>OpenLDAP Software</strong> is developed and maintained by The OpenLDAP Project &lt;http://www.openldap.org/&gt;. <strong>OpenLDAP Software</strong> is derived from University of Michigan LDAP 3.3 Release.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ldap_dn2ufn.3.html"><span aria-hidden="true">&larr;</span> ldap_dn2ufn.3: Ldap dn handling routines</a></li>
   <li class="next"><a href="ldap_dup.3.html">ldap_dup.3: Duplicate and destroy ldap session handles <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
