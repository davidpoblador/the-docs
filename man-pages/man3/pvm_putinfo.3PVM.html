<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pvm_putinfo: Store and retrieve messages in global mailbox.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Store and retrieve messages in global mailbox.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pvm_putinfo (3PVM) manual">
  <meta name="twitter:description" content="Store and retrieve messages in global mailbox.">
  <meta name="twitter:image" content="https://www.carta.tech/images/pvm-dev-pvm_putinfo-3PVM.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3PVM/pvm_putinfo.3PVM.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pvm_putinfo (3PVM) manual" />
  <meta property="og:description" content="Store and retrieve messages in global mailbox." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pvm-dev-pvm_putinfo-3PVM.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pvm_putinfo<small> (3PVM)</small></h1>
        <p class="lead">Store and retrieve messages in global mailbox.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3PVM/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3PVM/pvm_putinfo.3PVM.html">
      <span itemprop="name">pvm_putinfo: Store and retrieve messages in global mailbox.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pvm-dev/">
      <span itemprop="name">pvm-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3PVM/pvm_putinfo.3PVM.html">
      <span itemprop="name">pvm_putinfo: Store and retrieve messages in global mailbox.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
C	int index = pvm_putinfo( char *name, int bufid, int flags )

	int bufid = pvm_recvinfo( char *name, int index, int flags )

	int info = pvm_delinfo( char *name, int index, int flags )

	int info = pvm_getmboxinfo( char *pattern, int *nclasses,
	                            struct pvmmboxinfo **classes )


     struct pvmmboxinfo {
        char *mi_name;                /* class name */
        int   mi_nentries;            /* # of entries for this class */
        int  *mi_indices;             /* mbox entry indices */
        int  *mi_owners;              /* mbox entry owner tids */
        int  *mi_flags;               /* mbox entry flags */
     };

Fortran

	call pvmfputinfo( name, bufid, flags, index )

	call pvmfrecvinfo( name, index, flags, bufid )

	call pvmfdelinfo( name, index, flags, info )

	call pvmfgetmboxinfo( pattern, name, nclasses, nentries,
	                      index, owner, flags, info )
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    name
  </dt>
  <dd>
    <p>Database key (class name), any null-terminated string.</p>
  </dd>
  <dt>
    index
  </dt>
  <dd>
    <p>Database key (class index), &gt;= 0. Default index = 0.</p>
  </dd>
  <dt>
    flags
  </dt>
  <dd>
    <p>User specified options.  (see below)</p>
  </dd>
  <dt>
    bufid
  </dt>
  <dd>
    <p>Handle of message buffer to put in database, or message returned. A returned bufid &lt; 0 indicates an error.</p>
  </dd>
  <dt>
    info
  </dt>
  <dd>
    <p>Resulting status code.</p>
  </dd>
  <dt>
    pattern
  </dt>
  <dd>
    <p>GNU regular expression (pattern) to match on names in mailbox database. Additionally, the singular "*" will match on all names.</p>
  </dd>
  <dt>
    nclasses
  </dt>
  <dd>
    <p>Number of classes matching pattern.</p>
  </dd>
  <dt>
    classes
  </dt>
  <dd>
    <p>Array of pvmmboxinfo mailbox entries matching pattern.</p>
  </dd>
  <dt>
    nentries
  </dt>
  <dd>
    <p>Number of entries for a given class.</p>
  </dd>
  <dt>
    owner
  </dt>
  <dd>
    <p>Task id that inserted entry into mailbox database.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>These functions implement a "message mailbox" database that can be used by PVM tasks to advertise information to other PVM tasks. An example would be to advertise names or locations of services.  Another example would be to advertise a common "context" on which two tasks may communicate.</p><p>The database entries are PVM messages keyed by a user specified name and an optional index value. The name may be any null-terminated string and the index a non-negative integer. The index value is assigned by PVM and is used to uniquely identify one of multiple named instances within the database.</p><p>Entries are "owned" by the task that created them. An entry is automatically removed from the database when the owner task exits unless the database entry was created with flag PvmMboxPersistent.</p><p>When a task exits and leaves an entry in the mailbox, the owner tid of that entry is marked as zero (0) to indicate that there is no longer an active owner task.</p><p><em></em><em>pvm_putinfo</em> inserts a record in the database, given a key and data (message). It returns mailbox index number if the record is successfully stored, PvmExists if a record with the given key already exists, or PvmDenied if an attempt is made to overwrite a locked record.</p><p>The following options are added together as the flags parameter to pvm_putinfo.</p>
<dl class='dl-vertical'>
  <dt>
    PvmMboxDefault
  </dt>
  <dd>
    <p>Inserts entry as the only named instance for a given name. This entry may only be modified and deleted by its owner. It is automatically deleted when its owner exits.</p>
  </dd>
  <dt>
    PvmMboxPersistent
  </dt>
  <dd>
    <p>Entry remains in the database when the owner task exits. Entries are removed from the database when PVM is halted or a reset is issued from the console.</p>
  </dd>
  <dt>
    PvmMboxMultiInstance
  </dt>
  <dd>
    <p>Permits multiple entry instances of the same name. PVM will assign an index key to each instance.</p>
  </dd>
  <dt>
    PvmMboxOverWritable
  </dt>
  <dd>
    <p>Permits other tasks to overwrite and delete this database entry.</p>
  </dd>
  <dt>
    PvmMboxDirectIndex( index )
  </dt>
  <dd>
    <p>Performs an atomic delete and re-insert for the mailbox entry at the given index. Valid index values for this macro are limited to the range [ 0 .. <em>PvmMboxMaxDirectIndex</em> ). The given mailbox entry must have been created with the <em>PvmMboxOverWritable</em> flag set. If <em>index</em> is greater than 0, then the mailbox must also have been created with the <em>PvmMboxMultiInstance</em> flag set.</p>
  </dd>

</dl>
<p><em></em><em>pvm_recvinfo</em> operates just like a pvm_recv() except the message is coming from the database. The message should be unpacked after pvm_recvinfo(). Like pvm_recv, pvm_recvinfo returns a pointer to a message buffer containing the record matching the key &lt;name,index&gt; from the database. Returned value &lt; 0 indicates an error.</p><p>The following options are added together as the flags parameter to pvm_recvinfo.</p>
<dl class='dl-vertical'>
  <dt>
    PvmMboxDefault
  </dt>
  <dd>
    <p>Exact match on key &lt;name, index&gt; is returned. Returns PvmNotFound if exact match not found.</p>
  </dd>
  <dt>
    PvmMboxFirstAvail
  </dt>
  <dd>
    <p>The first entry in &lt;name&gt; with index greater than or equal to the specified index parameter is retuned. PvmMboxFirstAvail with index = 0 will produce the same results as using PvmMboxDefault.</p>
  </dd>
  <dt>
    PvmMboxReadAndDelete
  </dt>
  <dd>
    <p>Return entry and delete from database. Task must be permitted to do both read and delete otherwise an error will occur. bufid returns PvmNotFound if entry does not exist and will return PvmDenied if the record exists but may not be deleted.</p>
  </dd>

</dl>
<p><em></em><em>pvm_delinfo</em> deletes database entry specified by the key &lt;name, index&gt;. Returns PvmOK if the record was deleted, PvmNotFound if the record does not exist, or PvmDenied if an attempt is made to remove a "locked" record.</p><p>There are no flags presently specified for pvm_delinfo.</p><p><em></em><em>pvm_getmboxinfo</em> returns an array of pvmmboxinfo for all class names in the database. This is used, for example, by programs that clean up the database or for applications to find out what is available. <em>classes</em> returns a pointer to the array allocated by libpvm and freed on the next call to pvm_getmboxinfo.</p><p>The Fortran function returns information on one entry per call. Thus, if called repeatedly until an info value of <em>PvmNotFound</em> is returned, all entries matching the given pattern will have been returned. If a new pattern is desired, calling pvmfgetnames() with info = -1 will reset the entry name list and obtain a new list for the given pattern.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
C:
	/*
	*  create and insert mailbox entry
	*/
	sprintf( service, "Task_A_service" );
	sprintf( message, "Greetings from task A." );
	pvm_initsend( PvmDataDefault );
	pvm_pkint( &mytid, 1, 1 );
	pvm_pkint( &context, 1, 1 );
	pvm_pkstr( message );
	if (( pvm_putinfo( service, pvm_getsbuf(), PvmMboxDefault )) == PvmExists ){
		printf( "can't register - service already running\n" );
		exit( -1 );
	}


	/*
	*  look for and retrieve specified mailbox
	*/
	sprintf( service, "Task_A_service" );
	if (( msg_buf = pvm_recvinfo(service, 0, PvmMboxFirstAvail )) &gt;= 0 ){
		pvm_setrbuf( msg_buf );
		pvm_upkint( &their_tid, 1, 1 );
		pvm_upkint( &their_context, 1, 1 );
		pvm_upkstr( message );
	}

Fortran:
	we need the fortran examples...


</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>The following error conditions can be returned by one or more of these functions:</p>
<dl class='dl-vertical'>
  <dt>
    PvmBadParam
  </dt>
  <dd>
    <p>An invalid value was specified for <em>bufid</em> argument.</p>
  </dd>
  <dt>
    PvmNoSuchBuf
  </dt>
  <dd>
    <p>Message buffer <em>bufid</em> doesn't exist.</p>
  </dd>
  <dt>
    PvmNoMem
  </dt>
  <dd>
    <p>Libpvm is unable to allocate memory to pack data.</p>
  </dd>
  <dt>
    PvmExists
  </dt>
  <dd>
    <p>The requested key is already in use (pvm_putinfo).</p>
  </dd>
  <dt>
    PvmNotFound
  </dt>
  <dd>
    <p>The requested key does not exist (pvm_recvinfo, pvm_delinfo).</p>
  </dd>
  <dt>
    PvmDenied
  </dt>
  <dd>
    <p>The key is locked by another task and cannot be replaced or deleted.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pvm_putinfo&hellip;</h2>
        <div class="sectioncontent">
<p>pvm_initsend(3PVM), pvm_getsbuf(3PVM), pvm_pack(3PVM),</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pvm_pstat.3PVM.html"><span aria-hidden="true">&larr;</span> pvm_pstat.3PVM: Returns the status of the specified pvm process.</a></li>
   <li class="next"><a href="pvm_recv.3PVM.html">pvm_recv.3PVM: Receive a message. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
