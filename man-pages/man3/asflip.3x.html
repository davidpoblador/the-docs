<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>asflip: Asflip- demonstrates flipping image in 90 degree increments libafterimage/tutorials/asflip</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Asflip- demonstrates flipping image in 90 degree increments libafterimage/tutorials/asflip">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="asflip (3x) manual">
  <meta name="twitter:description" content="Asflip- demonstrates flipping image in 90 degree increments libafterimage/tutorials/asflip">
  <meta name="twitter:image" content="https://www.carta.tech/images/libafterimage-dev-asflip-3x.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3x/asflip.3x.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="asflip (3x) manual" />
  <meta property="og:description" content="Asflip- demonstrates flipping image in 90 degree increments libafterimage/tutorials/asflip" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libafterimage-dev-asflip-3x.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">asflip<small> (3x)</small></h1>
        <p class="lead">Asflip- demonstrates flipping image in 90 degree increments libafterimage/tutorials/asflip</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/asflip.3x.html">
      <span itemprop="name">asflip: Asflip- demonstrates flipping image in 90 degree increments libafterimage/tutorials/asflip</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libafterimage-dev/">
      <span itemprop="name">libafterimage-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/asflip.3x.html">
      <span itemprop="name">asflip: Asflip- demonstrates flipping image in 90 degree increments libafterimage/tutorials/asflip</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASFlip</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>libAfterImage application for image rotation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>New steps described in this tutorial are : ASFlip.1. Flip value. ASFlip.2. Rotating ASImage.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO asflip&hellip;</h2>
        <div class="sectioncontent">
<p>Tutorial 1: ASView  - explanation of basic steps needed to use</p>
<pre>
                      libAfterImage and some other simple things.
</pre>
<p>Tutorial 2: ASScale - image scaling basics. Tutorial 3: ASTile  - image tiling and tinting. Tutorial 4: ASMerge - scaling and blending of arbitrary number of</p>
<pre>
                      images.
</pre>
<p>Tutorial 5: ASGrad  - drawing multipoint linear gradients.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>#include "../afterbase.h" #include "../afterimage.h" #include "common.h"</p><p>void usage() {</p>
<pre>
    printf( "Usage: asflip [-h]|[[-f flip]|[-m vertical] "
            "[-g geom] image]");
    printf( "&#92;nWhere: image - is image filename&#92;n");
    printf( "       flip  - rotation angle in degrees. "
            "90, 180 and 270 degrees supported&#92;n");
    printf( "       geom  - source image is tiled using this geometry, "
            "prior to rotation&#92;n");
    printf( "       vertical - 1 - mirror image in vertical direction, "
            "0 - horizontal&#92;n");
</pre>
<p>}</p><p>int main(int argc, char* argv[]) {</p>
<pre>
    Display *dpy = NULL;
    ASVisual *asv ;
    int screen = 0 , depth = 0 ;
    char *image_file = "rose512.jpg" ;
    int flip = FLIP_VERTICAL;
    Bool vertical = False, mirror = False ;
    int tile_x, tile_y, geom_flags = 0;
    unsigned int tile_width, tile_height ;
    ASImage *im = NULL;
    ASImage *flipped_im = NULL ;
</pre>

<pre>
    /* see ASView.1 : */
    set_application_name( argv[0] );
</pre>

<pre>
    if( argc &gt; 1 )
    {
        int i = 1 ;
        if( strcmp( argv[1], "-h" ) == 0 )
        {
            usage();
            return 0;
        }
        for( i = 1 ; i &lt; argc ; i++ )
        {
            if( argv[i][0] == '-' && i &lt; argc-1 )
            {
                switch(argv[i][1])
                {
                    case 'm' :
                        mirror = True;
                        vertical = atoi(argv[i+1]) ;
                        break ;
                    case 'f' :          /* see ASFlip.1 */
                        mirror = False;
                        flip = atoi(argv[i+1])/90 ;
                        break ;
                    case 'g' :          /* see ASTile.2 : */
                        geom_flags = XParseGeometry( argv[i+1],
                                                     &tile_x, &tile_y,
                                                     &tile_width,
                                                     &tile_height );
                        break ;
                }
                ++i ;
            }else
                image_file = argv[i] ;
        }
    }else
        usage();
</pre>
<p>#ifndef X_DISPLAY_MISSING</p>
<pre>
    dpy = XOpenDisplay(NULL);
    _XA_WM_DELETE_WINDOW = XInternAtom( dpy, "WM_DELETE_WINDOW", False);
    screen = DefaultScreen(dpy);
    depth = DefaultDepth( dpy, screen );
</pre>
<p>#endif</p>
<pre>
    /* see ASView.2 : */
    im = file2ASImage( image_file, 0xFFFFFFFF, SCREEN_GAMMA, 0, getenv("IMAGE_PATH"), NULL );
    if( im == NULL )
        return 1;
</pre>

<pre>
    /* Making sure tiling geometry is sane : */
    if( !get_flags(geom_flags, XValue ) )
        tile_x = 0 ;
    if( !get_flags(geom_flags, YValue ) )
        tile_y = 0 ;
    if( !get_flags(geom_flags, WidthValue ) )
    {
        if( !mirror )
            tile_width = (get_flags(flip,FLIP_VERTICAL))?
                            im-&gt;height:im-&gt;width ;
        else
            tile_width = im-&gt;width ;
    }
    if( !get_flags(geom_flags, HeightValue ) )
    {
        if( !mirror )
            tile_height = (get_flags(flip,FLIP_VERTICAL))?
                            im-&gt;width:im-&gt;height;
        else
            tile_height = im-&gt;height ;
    }
    printf( "%s: tiling image              "flipping it by %d degrees&#92;n",
            get_application_name(), image_file,
            tile_width, tile_height,tile_x, tile_y, flip*90 );
</pre>

<pre>
    /* see ASView.3 : */
    asv = create_asvisual( dpy, screen, depth, NULL );
</pre>

<pre>
    /* see ASFlip.2 : */
    if( !mirror )
        flipped_im = flip_asimage(  asv, im,
                                    tile_x, tile_y,
                                    tile_width, tile_height,
                                    flip,
                                    ASA_ASImage, 0,
                                    ASIMAGE_QUALITY_DEFAULT );
    else
        flipped_im = mirror_asimage(asv, im,
                                    tile_x, tile_y,
                                    tile_width, tile_height,
                                    vertical,
                                    ASA_ASImage, 0,
                                    ASIMAGE_QUALITY_DEFAULT );
    destroy_asimage( &im );
</pre>

<pre>
    if( flipped_im )
    {
</pre>
<p>#ifndef X_DISPLAY_MISSING</p>
<pre>
        /* see ASView.4 : */
        Window w = create_top_level_window( asv, DefaultRootWindow(dpy),
                                            32, 32,
                                            tile_width, tile_height,
                                            1, 0, NULL,
                                            "ASFlip", image_file );
        if( w != None )
        {
            Pixmap p ;
</pre>

<pre>
            XMapRaised   (dpy, w);
            /* see ASView.5 : */
            p = asimage2pixmap( asv, DefaultRootWindow(dpy), flipped_im,
                                NULL, True );
            destroy_asimage( &flipped_im );
            /* see common.c: set_window_background_and_free() : */
            p = set_window_background_and_free( w, p );
            /* see common.c: wait_closedown() : */
        }
        wait_closedown(w);
        dpy = NULL;
</pre>
<p>#else</p>
<pre>
        /* writing result into the file */
        ASImage2file( flipped_im, NULL, "asflip.jpg", ASIT_Jpeg, NULL );
        destroy_asimage( &flipped_im );
</pre>
<p>#endif</p>
<pre>
    }
    return 0 ;
</pre>
<p>}</p><p>libAfterImage/tutorials/ASFlip.1 [6.1]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Step 1. Flip value.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>libAfterImage provides facility for rotating images in 90 degree increments - flipping essentially. Accordingly flip parameter could have 4 values - 0, -90, -180, -270 degrees.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
    flip = atoi(argv[2])/90;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO asflip&hellip;</h2>
        <div class="sectioncontent">
<p>flip libAfterImage/tutorials/ASFlip.2 [6.2]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Step 2. Flipping ASImage.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Flipping can actually be combined with offset and tiling. Original image gets tiled to supplied rectangle, and then gets rotated to requested degree.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
    flipped_im = flip_asimage(asv, im,
                                  tile_x, tile_y,
                                  tile_width, tile_height,
                                  flip,
                                  ASA_XImage,0,
                                  ASIMAGE_QUALITY_DEFAULT );
        destroy_asimage( &im );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>As far as we need to render rotated image right away - we set to_xim parameter to True, so that image will be rotated into XImage. Right after rotation is done - we can destroy original image.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO asflip&hellip;</h2>
        <div class="sectioncontent">
<p>flip_asimage()</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ascompose.3x.html"><span aria-hidden="true">&larr;</span> ascompose.3x: Ascompose- provides access to libafterimage functionality, using scripts written in custom xml dialect libafterimage/ascompose</a></li>
   <li class="next"><a href="asfont.3x.html">asfont.3x: Asfont- text drawing functionality and handling of ttf and x11 fonts libafterimage/asfont.h <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
