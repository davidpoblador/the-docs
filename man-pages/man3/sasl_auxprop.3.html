<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sasl_auxprop: How to work with sasl auxiliary properties</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="How to work with sasl auxiliary properties">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sasl_auxprop (3) manual">
  <meta name="twitter:description" content="How to work with sasl auxiliary properties">
  <meta name="twitter:image" content="https://www.carta.tech/images/libsasl2-dev-sasl_auxprop-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/sasl_auxprop.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sasl_auxprop (3) manual" />
  <meta property="og:description" content="How to work with sasl auxiliary properties" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libsasl2-dev-sasl_auxprop-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sasl_auxprop<small> (3)</small></h1>
        <p class="lead">How to work with sasl auxiliary properties</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/sasl_auxprop.3.html">
      <span itemprop="name">sasl_auxprop: How to work with sasl auxiliary properties</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libsasl2-dev/">
      <span itemprop="name">libsasl2-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/sasl_auxprop.3.html">
      <span itemprop="name">sasl_auxprop: How to work with sasl auxiliary properties</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;sasl/prop.h&gt;</strong>

<strong>struct propctx *prop_new(unsigned </strong><em>estimate</em><strong>) </strong>

<strong>int prop_dup(struct propctx </strong><em>*src_ctx</em><strong>, </strong>
<strong>             struct propctx </strong><em>*dst_ctx</em><strong>)</strong>

<strong>int prop_request(struct propctx </strong><em>*ctx</em><strong>, </strong>
<strong>                 const char </strong><em>**names</em><strong>)</strong>

<strong>const struct propval *prop_get(struct propctx </strong><em>*ctx</em><strong>)</strong>

<strong>int prop_getnames(struct propctx </strong><em>*ctx</em><strong>, const char </strong><em>**names</em><strong>,</strong>
<strong>                  struct porpval </strong><em>*vals</em><strong>)</strong>

<strong>void prop_clear(struct propctx </strong><em>*ctx</em><strong>, int </strong><em>requests</em><strong>)</strong>

<strong>void prop_erase(struct propctx </strong><em>*ctx</em><strong>, const char </strong><em>*name</em><strong>)</strong>

<strong>void prop_dispose(struct propctx </strong><em>**ctx</em><strong>)</strong>

<strong>int prop_format(struct propctx </strong><em>*ctx</em><strong>, const char </strong><em>*sep</em><strong>, int </strong><em>seplen</em><strong>, </strong>
<strong>                char </strong><em>*outbuf</em><strong>, unsigned </strong><em>outmax</em><strong>, unsigned </strong><em>*outlen</em><strong>)</strong>

<strong>int prop_set(struct propctx </strong><em>*ctx</em><strong>, const char </strong><em>*name</em><strong>,</strong>
<strong>             const char </strong><em>*value</em><strong>, int </strong><em>vallen</em><strong>)</strong>

<strong>int prop_setvals(struct propctx </strong><em>*ctx</em><strong>, const char </strong><em>*name</em><strong>,</strong>
<strong>                 const char </strong><em>**values</em><strong>)</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>SASL auxiliary properties</strong> are used to obtain properties from external sources during the authentication process.  For example, a mechanism might need to query an LDAP server to obtain the authentication secret.  The application probably needs other information from there as well, such as home directory or UID.  The auxiliary property interface allows the two to cooperate, and only results in a single query against the LDAP server (or other property sources).</p><p>Property lookups take place directly after user canonicalization occurs. Therefore, all requests should be registered with he context before that time.  Note that requests can also be registered using the <a href="../man3/sasl_auxprop_request.3.html"><strong>sasl_auxprop_request</strong>(3)</a> function.  Most of the functions listed below, however, require a property context which can be obtained by calling <a href="../man3/sasl_auxprop_getctx.3.html"><strong>sasl_auxprop_getctx</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">API Description</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>struct propctx *prop_new(unsigned estimate)</p>
  </dt>
  <dd>
    <p>Create a new property context.  Probably unnecessary for application developers to call this at any point.</p><p><em>estimate</em> is the estimate of storage needed total for requests & responses. A value of 0 will imply the library default.</p>
  </dd>
  <dt>
    <p>int prop_dup(struct propctx *src_ctx, struct propctx *dst_ctx)</p>
  </dt>
  <dd>
    <p>Duplicate a given property context.</p>
  </dd>
  <dt>
    <p>int prop_request(struct propctx *ctx, const char **names)</p>
  </dt>
  <dd>
    <p>Add properties to the request list of a given context.</p><p><em>names</em> is the NULL-terminated array of property names, and must persist until the requests are cleared or the context is disposed of with a call to prop_dispose.</p>
  </dd>
  <dt>
    <p>const struct propval *prop_get(struct propctx *ctx)</p>
  </dt>
  <dd>
    <p>Returns a NULL-terminated array of struct propval from the given context.</p>
  </dd>
  <dt>
    <p>int prop_getnames(struct propctx *ctx, const char **names,</p>
  </dt>
  <dd>
    
<pre>
                  struct porpval *vals)
</pre>
<p>Fill in a (provided) array of struct propval based on a list of property names.  This implies that the vals array is at least as long as the names array. The values that are filled in by this call persist until next call to prop_request, prop_clear, or prop_dispose on context.  If a name specified here was never requested, that its associated values entry will be set to NULL.</p><p>Returns number of matching properties that were found, or a SASL error code.</p>
  </dd>
  <dt>
    <p>void prop_clear(struct propctx *ctx, int requests)</p>
  </dt>
  <dd>
    <p>Clear values and optionally requests from a property context.</p><p><em>requests</em> is 1 if the requests should be cleared, 0 otherwise.</p>
  </dd>
  <dt>
    <p>void prop_erase(struct propctx *ctx, const char *name)</p>
  </dt>
  <dd>
    <p>Securely erase the value of a property.</p><p><em>name</em> is the name of the property to erase.</p>
  </dd>
  <dt>
    <p>void prop_dispose(struct propctx **ctx)</p>
  </dt>
  <dd>
    <p>Disposes of a property context and NULLifys the pointer.</p>
  </dd>
  <dt>
    <p>int prop_format(struct propctx *ctx, const char *sep, int seplen,</p>
  </dt>
  <dd>
    
<pre>
                char *outbuf, unsigned outmax, unsigned *outlen)
</pre>
<p>Format the requested property names into a string.  This not intended for use by the application (only by auxprop plugins).</p><p><em>sep</em> Is the separator to use for the string</p><p><em>outbuf</em> Is the caller-allocated buffer of length <em>outmax</em> that the resulting string will be placed in (including NUL terminator).</p><p><em>outlen</em> if non-NULL, will contain the length of the resulting string (excluding NUL terminator).</p>
  </dd>
  <dt>
    <p>int prop_set(struct propctx *ctx, const char *name, const char *value,</p>
  </dt>
  <dd>
    
<pre>
             int vallen)
</pre>
<p>Adds a property value to the context.  This is intended for use by auxprop plugins only.</p><p><em>name</em> is the name of the property to receive the new value, or NULL, which implies that the value will be added to the same property as the last call to either prop_set or prop_setvals.</p><p><em>value</em> is a value for the property of length <em>vallen</em></p>
  </dd>
  <dt>
    <p>int prop_setvals(struct propctx *ctx, const char *name, const char **values)</p>
  </dt>
  <dd>
    <p>Adds multiple values to a single property.  This is intended for use by auxprop plugins only.</p><p><em>name</em> has the same meaning as in <strong>prop_set</strong></p><p><em>values</em> are a NULL-terminated array of values to be added the property.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>The property functions that return an int return SASL error codes. See <a href="../man3/sasl_errors.3.html"><strong>sasl_errors</strong>(3)</a>.  Those that return pointers will return a valid pointer on success, or NULL on any error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">
<p>RFC 4422</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sasl_auxprop&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/sasl.3.html"><strong>sasl</strong>(3)</a>, <a href="../man3/sasl_errors.3.html"><strong>sasl_errors</strong>(3)</a>, <a href="../man3/sasl_auxprop_request.3.html"><strong>sasl_auxprop_request</strong>(3)</a>, <a href="../man3/sasl_auxprop_getctx.3.html"><strong>sasl_auxprop_getctx</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sasl_authorize_t.3.html"><span aria-hidden="true">&larr;</span> sasl_authorize_t.3: The sasl authorization callback</a></li>
   <li class="next"><a href="sasl_auxprop_getctx.3.html">sasl_auxprop_getctx.3: Acquire an auxiliary property context <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
