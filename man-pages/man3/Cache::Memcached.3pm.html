<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cache::Memcached: Client library for memcached (memory cache daemon)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Client library for memcached (memory cache daemon)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Cache::Memcached (3pm) manual">
  <meta name="twitter:description" content="Client library for memcached (memory cache daemon)">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcache-memcached-perl-Cache::Memcached-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Cache::Memcached.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Cache::Memcached (3pm) manual" />
  <meta property="og:description" content="Client library for memcached (memory cache daemon)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcache-memcached-perl-Cache::Memcached-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Cache::Memcached<small> (3pm)</small></h1>
        <p class="lead">Client library for memcached (memory cache daemon)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Cache::Memcached.3pm.html">
      <span itemprop="name">Cache::Memcached: Client library for memcached (memory cache daemon)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcache-memcached-perl/">
      <span itemprop="name">libcache-memcached-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Cache::Memcached.3pm.html">
      <span itemprop="name">Cache::Memcached: Client library for memcached (memory cache daemon)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Cache::Memcached;

  $memd = new Cache::Memcached {
    &apos;servers&apos; =&gt; [ "10.0.0.15:11211", "10.0.0.15:11212", "/var/sock/memcached",
                   "10.0.0.17:11211", [ "10.0.0.17:11211", 3 ] ],
    &apos;debug&apos; =&gt; 0,
    &apos;compress_threshold&apos; =&gt; 10_000,
  };
  $memd-&gt;set_servers($array_ref);
  $memd-&gt;set_compress_threshold(10_000);
  $memd-&gt;<strong>enable_compress</strong>(0);

  $memd-&gt;set("my_key", "Some value");
  $memd-&gt;set("object_key", { &apos;complex&apos; =&gt; [ "object", 2, 4 ]});

  $val = $memd-&gt;get("my_key");
  $val = $memd-&gt;get("object_key");
  if ($val) { print $val-&gt;{&apos;complex&apos;}-&gt;[2]; }

  $memd-&gt;incr("key");
  $memd-&gt;decr("key");
  $memd-&gt;incr("key", 2);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This is the Perl \s-1API\s0 for memcached, a distributed memory cache daemon. More information is available at:</p><p>  http://www.danga.com/memcached/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">
<p>Takes one parameter, a hashref of options.  The most important key is \*(C`servers\*(C', but that can also be set later with the \*(C`set_servers\*(C' method.  The servers must be an arrayref of hosts, each of which is either a scalar of the form \*(C`10.0.0.10:11211\*(C' or an arrayref of the former and an integer weight value.  (The default weight if unspecified is 1.)  It's recommended that weight values be kept as low as possible, as this module currently allocates memory for bucket distribution proportional to the total host weights. Use \*(C`compress_threshold\*(C' to set a compression threshold, in bytes. Values larger than this threshold will be compressed by \*(C`set\*(C' and decompressed by \*(C`get\*(C'. Use \*(C`no_rehash\*(C' to disable finding a new memcached server when one goes down.  Your application may or may not need this, depending on your expirations and key usage. Use \*(C`readonly\*(C' to disable writes to backend memcached servers.  Only get and get_multi will work.  This is useful in bizarre debug and profiling cases only. Use \*(C`namespace\*(C' to prefix all keys with the provided namespace value. That is, if you set namespace to \*(L"app1:\*(R" and later do a set of \*(L"foo\*(R" to \*(L"bar\*(R", memcached is actually seeing you set \*(L"app1:foo\*(R" to \*(L"bar\*(R". Use \*(C`connect_timeout\*(C' and \*(C`select_timeout\*(C' to set connection and polling timeouts. The \*(C`connect_timeout\*(C' defaults to .25 second, and the \*(C`select_timeout\*(C' defaults to 1 second. The other useful key is \*(C`debug\*(C', which when set to true will produce diagnostics on \s-1STDERR\s0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>Sets the server list this module distributes key gets and sets between. The format is an arrayref of identical form as described in the \*(C`new\*(C' constructor. Sets the \*(C`debug\*(C' flag.  See \*(C`new\*(C' constructor for more information. Sets the \*(C`readonly\*(C' flag.  See \*(C`new\*(C' constructor for more information. Sets the \*(C`no_rehash\*(C' flag.  See \*(C`new\*(C' constructor for more information. Sets the compression threshold. See \*(C`new\*(C' constructor for more information. Sets the connect timeout. See \*(C`new\*(C' constructor for more information. Sets the select timeout. See \*(C`new\*(C' constructor for more information. Temporarily enable or disable compression.  Has no effect if \*(C`compress_threshold\*(C' isn't set, but has an overriding effect if it is. my $val = $memd-&gt;get($key); Retrieves a key from the memcache.  Returns the value (automatically thawed with Storable, if necessary) or undef. The $key can optionally be an arrayref, with the first element being the hash value, if you want to avoid making this module calculate a hash value.  You may prefer, for example, to keep all of a given user's objects on the same memcache server, so you could use the user's unique id as the hash value. my $hashref = $memd-&gt;get_multi(@keys); Retrieves multiple keys from the memcache doing just one query. Returns a hashref of key/value pairs that were available. This method is recommended over regular 'get' as it lowers the number of total packets flying around your network, reducing total latency, since your app doesn't have to wait for each round-trip of 'get' before sending the next one. $memd-&gt;set($key, $value[, $exptime]); Unconditionally sets a key to a given value in the memcache.  Returns true if it was stored successfully. The $key can optionally be an arrayref, with the first element being the hash value, as described above. The $exptime (expiration time) defaults to \*(L"never\*(R" if unspecified.  If you want the key to expire in memcached, pass an integer $exptime.  If value is less than 60*60*24*30 (30 days), time is assumed to be relative from the present.  If larger, it's considered an absolute Unix time. $memd-&gt;add($key, $value[, $exptime]); Like \*(C`set\*(C', but only stores in memcache if the key doesn't already exist. $memd-&gt;replace($key, $value[, $exptime]); Like \*(C`set\*(C', but only stores in memcache if the key already exists.  The opposite of \*(C`add\*(C'. $memd-&gt;delete($key[, $time]); Deletes a key.  You may optionally provide an integer time value (in seconds) to tell the memcached server to block new writes to this key for that many seconds. (Sometimes useful as a hacky means to prevent races.)  Returns true if key was found and deleted, and false otherwise. You may also use the alternate method name <strong>remove</strong>, so Cache::Memcached looks like the Cache::Cache \s-1API\s0. $memd-&gt;incr($key[, $value]); Sends a command to the server to atomically increment the value for $key by $value, or by 1 if $value is undefined.  Returns undef if $key doesn't exist on server, otherwise it returns the new value after incrementing.  Value should be zero or greater.  Overflow on server is not checked.  Be aware of values approaching 2**32.  See decr. $memd-&gt;decr($key[, $value]); Like incr, but decrements.  Unlike incr, underflow is checked and new values are capped at 0.  If server value is 1, a decrement of 2 returns 0, not -1. $memd-&gt;stats([$keys]); Returns a hashref of statistical data regarding the memcache server(s), the $memd object, or both.  $keys can be an arrayref of keys wanted, a single key wanted, or absent (in which case the default value is malloc, sizes, self, and the empty string).  These keys are the values passed to the 'stats' command issued to the memcached server(s), except for 'self' which is internal to the $memd object.  Allowed values are:</p><p>The stats returned by a 'stats' command:  pid, uptime, version, bytes, get_hits, etc. The stats returned by a 'stats malloc':  total_alloc, arena_size, etc. The stats returned by a 'stats sizes'. The stats for the $memd object itself (a copy of $memd-&gt;{'stats'}). The stats returned by a 'stats maps'. The stats returned by a 'stats cachedump'. The stats returned by a 'stats slabs'. The stats returned by a 'stats items'.</p><p>$memd-&gt;disconnect_all; Closes all cached sockets to all memcached servers.  You must do this if your program forks and the parent has used this module at all. Otherwise the children will try to use cached sockets and they'll fight (as children do) and garble the client/server protocol. $memd-&gt;flush_all; Runs the memcached \*(L"flush_all\*(R" command on all configured hosts, emptying all their caches.  (or rather, invalidating all items in the caches in an O(1) operation...)  Running stats will still show the item existing, they're just be non-existent and lazily destroyed next time you try to detch any of them.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>When a server goes down, this module does detect it, and re-hashes the request to the remaining servers, but the way it does it isn't very clean.  The result may be that it gives up during its rehashing and refuses to get/set something it could've, had it been done right.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>This module is Copyright (c) 2003 Brad Fitzpatrick. All rights reserved.</p><p>You may distribute under the terms of either the \s-1GNU\s0 General Public License or the Artistic License, as specified in the Perl \s-1README\s0 file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARRANTY</h2>
        <div class="sectioncontent">
<p>This is free software. \s-1IT\s0 \s-1COMES\s0 \s-1WITHOUT\s0 \s-1WARRANTY\s0 \s-1OF\s0 \s-1ANY\s0 \s-1KIND\s0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FAQ</h2>
        <div class="sectioncontent">
<p>See the memcached website:</p>
<pre>
   http://www.danga.com/memcached/
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Brad Fitzpatrick &lt;brad@danga.com&gt;</p><p>Anatoly Vorobey &lt;mellon@pobox.com&gt;</p><p>Brad Whitaker &lt;whitaker@danga.com&gt;</p><p>Jamie McCarthy &lt;jamie@mccarthy.vg&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Cache::Historical.3pm.html"><span aria-hidden="true">&larr;</span> Cache::Historical.3pm: Cache historical values</a></li>
   <li class="next"><a href="Cache::Memcached::Managed.3pm.html">Cache::Memcached::Managed.3pm: Provide api for managing cached information <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
