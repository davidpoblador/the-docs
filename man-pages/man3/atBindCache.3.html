<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>atBindCache: Version binding</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Version binding">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="atBindCache (3) manual">
  <meta name="twitter:description" content="Version binding">
  <meta name="twitter:image" content="https://www.carta.tech/images/atfs-dev-atBindCache-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/atBindCache.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="atBindCache (3) manual" />
  <meta property="og:description" content="Version binding" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/atfs-dev-atBindCache-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">atBindCache<small> (3)</small></h1>
        <p class="lead">Version binding</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/atBindCache.3.html">
      <span itemprop="name">atBindCache: Version binding</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/atfs-dev/">
      <span itemprop="name">atfs-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/atBindCache.3.html">
      <span itemprop="name">atBindCache: Version binding</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;atfs.h&gt;</p><p>#include &lt;atfstk.h&gt;</p><p>Af_key	*atBindVersion (char *name, *binding);</p><p>Af_set	*atBindSet (char *pattern, char *binding, int bindMode);</p><p>Af_set	*atBindCache (char *pattern, *binding);</p><p>int	atBindNoMsg;</p><p>int	atScanBinding (char *binding, char **resultStr, int *resultGen, int *resultRev, time_t *resultDate);</p><p>int	atBindTrace;</p><p>char	*(*atBindExpandMacro)(char *inputString);</p><p>int	atBindOptions (int argc, char **argv, int newArgc, char *(*newArgv[]));</p><p>int	atBindModeOption;</p><p>int	atBindSetArgv (int *argc, char *(*argv[]));</p><p>void	atBindUsage (char *extraText);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>atBindVersion</em> performs a version binding, that means, it selects a unique version from a named history. It expects <em>name</em> to be either a string of the form <em>historyName[binding]</em> or a plain name. With a version bind directive (binding) given in brackets after the history name, the second argument is ignored. Otherwise the second argument is taken as version bind directive. With no binding given, atBindVersion performs the default binding. This may be explicitly defined by afBindOptions (see below), or it selects the most recent (modification/saving date) version. See below a list of different forms of version bind directives. <em>atBindVersion</em> returns the appropriate version key, if the bind operation leads to a unique version selection, otherwise NULL.</p><p><em>atBindSet</em> works similar to atBindVersion, with the difference that the first argument may be a name <em>pattern</em> (a sh(1) pattern to be precise) instead of a unique file name. It uses the af_histories (manual page <a href="../man3/af_history.3.html"><strong>af_history</strong>(3)</a>) call, to generate a list of history names from the given pattern. After that, it performs a version binding for each name with a version bind directive given either in square brackets or as <em>binding</em> argument (see above). atBindSet returns a set of version keys containing all found versions, or a NULL pointer if something went wrong.</p><p>Another option of <em>atBindSet</em> is nonunique version selection within a history. In this case, multiple versions from one history may be included in the result set. In detail atBindSet supports four options:</p>
<dl class='dl-vertical'>
  <dt>
    <p>AT_BIND_UNIQUE</p>
  </dt>
  <dd>
    <p>Behave like atBindVersion for each name generated from <em>pattern</em>. Generates no error condition in case of nonunique or empty selection.</p>
  </dd>
  <dt>
    <p>AT_BIND_SET</p>
  </dt>
  <dd>
    <p>(default) Do not require uniqueness. If more than one version from a history meets the binding specifications, all these versions will be included in the result set.</p>
  </dd>
  <dt>
    <p>AT_BIND_LAST</p>
  </dt>
  <dd>
    <p>Selects the last (modification/saving date) version from the binding hit set of each history. The resulting hit set contains at most one version of each history involved in the bind operation.</p>
  </dd>
  <dt>
    <p>AT_BIND_LASTSAVED</p>
  </dt>
  <dd>
    <p>Similar to AT_BIND_LAST but ignores busy versions.</p>
  </dd>

</dl>
<p><em>atBindCache</em> tries to bind versions from the derived object cache. It expects a <em>pattern</em> and <em>binding</em> argument similar to atBindSet.</p><p>The <em>atBindNoMsg</em> switch allows the output of version binding rules, generated by predicates like 'msg` or 'confirm`, to be suppressed. This can be done by setting atBindNoMsg TRUE. Initially, it is set FALSE. When evaluating a 'confirm` predicate, where user input is expected, with atBindNoMsg set true, the version binding algorithm proceeds without halting as if the user had accepted the default input.</p><p><em>atScanBinding</em> scans the version bind directive <em>binding</em>. It returns the binding type, which is one of</p>
<dl class='dl-vertical'>
  <dt>
    <p>AT_BIND_ALIAS</p>
  </dt>
  <dd>
    <p>A version alias (symbolic name). Example <strong>foo[release-2]</strong>. The alias name returned in <em>resultStr</em> resides in allocated memory.</p>
  </dd>
  <dt>
    <p>AT_BIND_CACHEKEY</p>
  </dt>
  <dd>
    <p>A unique identifier for cached objects. This is automatically generated for each cached object and consists of three numbers (<strong>like foo.o[739564427.16390.22]</strong>).</p>
  </dd>
  <dt>
    <p>AT_BIND_DATE</p>
  </dt>
  <dd>
    <p>A date specification. (see stMktime (manual pape <a href="../man3/sttime.3.html"><strong>sttime</strong>(3)</a>) for a list of valid date formats) Examples: <strong>foo[Jan 8, 1993]</strong>, <strong>foo[8.1.93]</strong>. The date is returned in <em>resultDate</em>.</p>
  </dd>
  <dt>
    <p>AT_BIND_DEFAULT</p>
  </dt>
  <dd>
    <p>Default binding. This is the case when either an empty binding was given or something like <strong>foo[]</strong>.</p>
  </dd>
  <dt>
    <p>AT_BIND_RULE</p>
  </dt>
  <dd>
    <p>Version bind Rule. Example <strong>foo[bind_rule:]</strong>. A rule may also have the form <strong>foo[bind_rule(arg1,arg2,...argN):]</strong> additionally passing the given arguments to bind rule evaluation. The rule name returned in <em>resultStr</em> resides in allocated memory.</p>
  </dd>
  <dt>
    <p>AT_BIND_VNUM</p>
  </dt>
  <dd>
    <p>Version number. Example <strong>foo[1.2]</strong>. The resulting generation and revision number are returned in <em>resultGen</em> and <em>resultRev</em>.</p>
  </dd>

</dl>
<p>One important issue is, that each version alias will also be tried as rule name, if it turns out to be no known symbolic name. This implies that rule names may also be given without the trailing colon, when there are no naming conflicts with version aliases.</p><p>The <em>atBindTrace</em> switch enables tracing of each version bind operation when set TRUE. Trace output is sent to standard error. Initially, its value is FALSE.</p><p>The atBind module provides a hook for an external macro processor to preprocess any version bind rule just before applying it. The bind rule text may contain macro citations of the form <em>$C</em> or <em>$(macroName)</em> (like in Make-/Shapefiles) to be expanded by the external macro processor. This should expect any string containing macro citations as input and return a string with expanded macros. When assigned to the function variable <em>atBindExpandMacro</em>, the macro expansion routine will be invoked for each evaluated rule.</p><p><em>atBindOptions</em> calls stParseArgs (manual page <strong>atparseargs</strong>(3)) with an internally defined standard option vector for command line version binding options. The <a href="../man1/vbind.1.html"><strong>vbind</strong>(1)</a> manual page contains a description of these options. atBindOption should be called before parsing the application specific options It fetches the version binding options off the command line (input arguments <em>argc</em> and <em>argv</em>) and returns all remaining tokens (output arguments <em>newArgc</em> and <em>newArgv</em>). Return value is the number of erroneous options (e.g. with argument missing) found. A negative return value indicates an internal error, zero is returned un success.</p><p>atBindOptions defines the default version selection policy as given on the command line for the whole application. Each subsequent call of atBindVersion and atBindSet (see above) will conform to this policy unless an explicit version bind directive is given.</p><p><em>atBindSetArgv</em> preprocesses a command line (arguments <em>argc</em> and <em>argv</em>) by evaluating and fetching off version binding options and replacing all filename arguments by bound filenames (e.g. foo[1.4]). It returns the number of arguments remaining on the command line.</p><p><em>atBindUsage</em> calls stShortUsage (manual page <strong>atparseargs</strong>(3)) with the current program name, the bind standard options vector, and the given <em>extraText</em>. Result is a short usage description written to standard error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Upon error, the version binding functions (atBindVersion, atBindSet and atBindCache) return a null pointer. atScanBinding has no error conditions. atBindOptions and atBindSetArgv return -1 on error and a value greater or equal null on success. On any error, the variable <em>atBindError</em> is set true (non-zero), and an explaining message is copied to the <em>atBindErrorMsg</em> string buffer. The atBindError variable is cleared upon successfull calls, the message buffer remains unchanged.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>$SHAPETOOLS/BindRules</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO atBindCache&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/atfstkintro.3.html"><strong>atfstkintro</strong>(3)</a>, <a href="../man1/vbind.1.html"><strong>vbind</strong>(1)</a>, <a href="../man3/stparseargs.3.html"><strong>stparseargs</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="atBindAddRule.3.html"><span aria-hidden="true">&larr;</span> atBindAddRule.3: Version bind rule handling</a></li>
   <li class="next"><a href="atBindDelRule.3.html">atBindDelRule.3: Version bind rule handling <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
