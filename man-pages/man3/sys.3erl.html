<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sys: A functional interface to system messages</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A functional interface to system messages">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sys (3erl) manual">
  <meta name="twitter:description" content="A functional interface to system messages">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-sys-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/sys.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sys (3erl) manual" />
  <meta property="og:description" content="A functional interface to system messages" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-sys-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sys<small> (3erl)</small></h1>
        <p class="lead">A functional interface to system messages</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/sys.3erl.html">
      <span itemprop="name">sys: A functional interface to system messages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/sys.3erl.html">
      <span itemprop="name">sys: A functional interface to system messages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module contains functions for sending system messages used by programs, and messages used for debugging purposes.</p><p>Functions used for implementation of processes should also understand system messages such as debugging messages and code change. These functions must be used to implement the use of system messages for a process; either directly, or through standard behaviours, such as <em>gen_server</em>.</p><p>The default timeout is 5000 ms, unless otherwise specified. The <em>timeout</em> defines the time period to wait for the process to respond to a request. If the process does not respond, the function evaluates <em>exit({timeout, {M, F, A}})</em>.</p><p>The functions make reference to a debug structure. The debug structure is a list of <em>dbg_opt()</em>. <em>dbg_opt()</em> is an internal data type used by the <em>handle_system_msg/6</em> function. No debugging is performed if it is an empty list.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYSTEM MESSAGES</h2>
        <div class="sectioncontent">
<p>Processes which are not implemented as one of the standard behaviours must still understand system messages. There are three different messages which must be understood:</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>Plain system messages. These are received as <em>{system, From, Msg}</em>. The content and meaning of this message are not interpreted by the receiving process module. When a system message has been received, the function <em>sys:handle_system_msg/6</em> is called in order to handle the request.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>Shutdown messages. If the process traps exits, it must be able to handle an shut-down request from its parent, the supervisor. The message <em>{'EXIT', Parent, Reason}</em> from the parent is an order to terminate. The process must terminate when this message is received, normally with the same <em>Reason</em> as <em>Parent</em>.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>There is one more message which the process must understand if the modules used to implement the process change dynamically during runtime. An example of such a process is the <em>gen_event</em> processes. This message is <em>{get_modules, From}</em>. The reply to this message is <em>From ! {modules, Modules}</em>, where <em>Modules</em> is a list of the currently active modules in the process.</p><p>This message is used by the release handler to find which processes execute a certain module. The process may at a later time be suspended and ordered to perform a code change for one of its modules.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYSTEM EVENTS</h2>
        <div class="sectioncontent">
<p>When debugging a process with the functions of this module, the process generates <em>system_events</em> which are then treated in the debug function. For example, <em>trace</em> formats the system events to the tty.</p><p>There are three predefined system events which are used when a process receives or sends a message. The process can also define its own system events. It is always up to the process itself to format these events.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATA TYPES</h2>
        <div class="sectioncontent">

<pre>
<strong>name()</strong> = pid() | atom() | {global, atom()}

</pre>

<pre>
<strong>system_event()</strong> = {in, Msg :: term()}

               | {in, Msg :: term(), From :: term()}

               | {out, Msg :: term(), To :: term()}

               | term()

</pre>

<pre>
<strong>dbg_opt()</strong>

</pre>
<p>See <strong>above</strong>.</p>
<pre>
<strong>dbg_fun()</strong> =

    fun((FuncState :: term(),

         Event :: <strong>system_event()</strong>,

         ProcState :: term()) -&gt;

            done | (NewFuncState :: term()))

</pre>

<pre>
<strong>format_fun()</strong> =

    fun((Device :: <strong>io:device()</strong> | <strong>file:io_device()</strong>,

         Event :: <strong>system_event()</strong>,

         Extra :: term()) -&gt;

            any())

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">

<pre>
<strong></strong>
log(Name, Flag) -&gt; ok | {ok, [system_event()]}

</pre>

<pre>
<strong></strong>
log(Name, Flag, Timeout) -&gt; ok | {ok, [system_event()]}

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Flag = true | {true, N :: integer() &gt;= 1} | false | get | print</p><p>Timeout = timeout()</p><p>Turns the logging of system events On or Off. If On, a maximum of <em>N</em> events are kept in the debug structure (the default is 10). If <em>Flag</em> is <em>get</em>, a list of all logged events is returned. If <em>Flag</em> is <em>print</em>, the logged events are printed to <em>standard_io</em>. The events are formatted with a function that is defined by the process that generated the event (with a call to <em>sys:handle_debug/4</em>).</p>
<pre>
<strong></strong>
log_to_file(Name, Flag) -&gt; ok | {error, open_file}

</pre>

<pre>
<strong></strong>
log_to_file(Name, Flag, Timeout) -&gt; ok | {error, open_file}

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Flag = (FileName :: string()) | false</p><p>Timeout = timeout()</p><p>Enables or disables the logging of all system events in textual format to the file. The events are formatted with a function that is defined by the process that generated the event (with a call to <em>sys:handle_debug/4</em>).</p>
<pre>
<strong></strong>
statistics(Name, Flag) -&gt; ok | {ok, Statistics}

</pre>

<pre>
<strong></strong>
statistics(Name, Flag, Timeout) -&gt; ok | {ok, Statistics}

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Flag = true | false | get</p><p>Statistics = [StatisticsTuple] | no_statistics</p><p>StatisticsTuple = {start_time, DateTime1}</p>
<pre>
                | {current_time, DateTime2}
</pre>

<pre>
                | {reductions, integer() &gt;= 0}
</pre>

<pre>
                | {messages_in, integer() &gt;= 0}
</pre>

<pre>
                | {messages_out, integer() &gt;= 0}
</pre>
<p>DateTime1 = DateTime2 = <strong>file:date_time()</strong></p><p>Timeout = timeout()</p><p>Enables or disables the collection of statistics. If <em>Flag</em> is <em>get</em>, the statistical collection is returned.</p>
<pre>
<strong></strong>
trace(Name, Flag) -&gt; ok

</pre>

<pre>
<strong></strong>
trace(Name, Flag, Timeout) -&gt; ok

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Flag = boolean()</p><p>Timeout = timeout()</p><p>Prints all system events on <em>standard_io</em>. The events are formatted with a function that is defined by the process that generated the event (with a call to <em>sys:handle_debug/4</em>).</p>
<pre>
<strong></strong>
no_debug(Name) -&gt; ok

</pre>

<pre>
<strong></strong>
no_debug(Name, Timeout) -&gt; ok

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Timeout = timeout()</p><p>Turns off all debugging for the process. This includes functions that have been installed explicitly with the <em>install</em> function, for example triggers.</p>
<pre>
<strong></strong>
suspend(Name) -&gt; ok

</pre>

<pre>
<strong></strong>
suspend(Name, Timeout) -&gt; ok

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Timeout = timeout()</p><p>Suspends the process. When the process is suspended, it will only respond to other system messages, but not other messages.</p>
<pre>
<strong></strong>
resume(Name) -&gt; ok

</pre>

<pre>
<strong></strong>
resume(Name, Timeout) -&gt; ok

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Timeout = timeout()</p><p>Resumes a suspended process.</p>
<pre>
<strong></strong>
change_code(Name, Module, OldVsn, Extra) -&gt; ok | {error, Reason}

</pre>

<pre>
<strong></strong>
change_code(Name, Module, OldVsn, Extra, Timeout) -&gt;
<strong></strong>
               ok | {error, Reason}

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Module = module()</p><p>OldVsn = undefined | term()</p><p>Extra = term()</p><p>Timeout = timeout()</p><p>Reason = term()</p><p>Tells the process to change code. The process must be suspended to handle this message. The <em>Extra</em> argument is reserved for each process to use as its own. The function <em>Module:system_code_change/4</em> is called. <em>OldVsn</em> is the old version of the <em>Module</em>.</p>
<pre>
<strong></strong>
get_status(Name) -&gt; Status

</pre>

<pre>
<strong></strong>
get_status(Name, Timeout) -&gt; Status

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Timeout = timeout()</p><p>Status =</p>
<pre>
    {status, Pid :: pid(), {module, Module :: module()}, [SItem]}
</pre>
<p>SItem = (PDict :: [{Key :: term(), Value :: term()}])</p>
<pre>
      | (SysState :: running | suspended)
</pre>

<pre>
      | (Parent :: pid())
</pre>

<pre>
      | (Dbg :: [<strong>dbg_opt()</strong>])
</pre>

<pre>
      | (Misc :: term())
</pre>
<p>Gets the status of the process.</p><p>The value of <em>Misc</em> varies for different types of processes. For example, a <em>gen_server</em> process returns the callback module's state, a <em>gen_fsm</em> process returns information such as its current state name and state data, and a <em>gen_event</em> process returns information about each of its registered handlers. Callback modules for <em>gen_server</em>, <em>gen_fsm</em>, and <em>gen_event</em> can also customise the value of <em>Misc</em> by exporting a <em>format_status/2</em> function that contributes module-specific information; see <strong>gen_server:format_status/2</strong>, <strong>gen_fsm:format_status/2</strong>, and <strong>gen_event:format_status/2</strong> for more details.</p>
<pre>
<strong></strong>
get_state(Name) -&gt; State

</pre>

<pre>
<strong></strong>
get_state(Name, Timeout) -&gt; State

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Timeout = timeout()</p><p>State = term()</p><p>Gets the state of the process.</p><p><strong></strong> Note:</p><p>These functions are intended only to help with debugging. They are provided for convenience, allowing developers to avoid having to create their own state extraction functions and also avoid having to interactively extract state from the return values of <em></em><strong>get_status/1</strong> or <em></em><strong>get_status/2</strong> while debugging.</p><p>The value of <em>State</em> varies for different types of processes. For a <em>gen_server</em> process, the returned <em>State</em> is simply the callback module's state. For a <em>gen_fsm</em> process, <em>State</em> is the tuple <em>{CurrentStateName, CurrentStateData}</em>. For a <em>gen_event</em> process, <em>State</em> a list of tuples, where each tuple corresponds to an event handler registered in the process and contains <em>{Module, Id, HandlerState}</em>, where <em>Module</em> is the event handler's module name, <em>Id</em> is the handler's ID (which is the value <em>false</em> if it was registered without an ID), and <em>HandlerState</em> is the handler's state.</p><p>If the callback module exports a <em>system_get_state/1</em> function, it will be called in the target process to get its state. Its argument is the same as the <em>Misc</em> value returned by <strong>get_status/1,2</strong>, and the <em>system_get_state/1</em> function is expected to extract the callback module's state from it. The <em>system_get_state/1</em> function must return <em>{ok, State}</em> where <em>State</em> is the callback module's state.</p><p>If the callback module does not export a <em>system_get_state/1</em> function, <em>get_state/1,2</em> assumes the <em>Misc</em> value is the callback module's state and returns it directly instead.</p><p>If the callback module's <em>system_get_state/1</em> function crashes or throws an exception, the caller exits with error <em>{callback_failed, {Module, system_get_state}, {Class, Reason}}</em> where <em>Module</em> is the name of the callback module and <em>Class</em> and <em>Reason</em> indicate details of the exception.</p><p>The <em>system_get_state/1</em> function is primarily useful for user-defined behaviours and modules that implement OTP <strong>special processes</strong>. The <em>gen_server</em>, <em>gen_fsm</em>, and <em>gen_event</em> OTP behaviour modules export this function, and so callback modules for those behaviours need not supply their own.</p><p>To obtain more information about a process, including its state, see <strong>get_status/1</strong> and <strong>get_status/2</strong>.</p>
<pre>
<strong></strong>
replace_state(Name, StateFun) -&gt; NewState

</pre>

<pre>
<strong></strong>
replace_state(Name, StateFun, Timeout) -&gt; NewState

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>StateFun = fun((State :: term()) -&gt; NewState :: term())</p><p>Timeout = timeout()</p><p>NewState = term()</p><p>Replaces the state of the process, and returns the new state.</p><p><strong></strong> Note:</p><p>These functions are intended only to help with debugging, and they should not be be called from normal code. They are provided for convenience, allowing developers to avoid having to create their own custom state replacement functions.</p><p>The <em>StateFun</em> function provides a new state for the process. The <em>State</em> argument and <em>NewState</em> return value of <em>StateFun</em> vary for different types of processes. For a <em>gen_server</em> process, <em>State</em> is simply the callback module's state, and <em>NewState</em> is a new instance of that state. For a <em>gen_fsm</em> process, <em>State</em> is the tuple <em>{CurrentStateName, CurrentStateData}</em>, and <em>NewState</em> is a similar tuple that may contain a new state name, new state data, or both. For a <em>gen_event</em> process, <em>State</em> is the tuple <em>{Module, Id, HandlerState}</em> where <em>Module</em> is the event handler's module name, <em>Id</em> is the handler's ID (which is the value <em>false</em> if it was registered without an ID), and <em>HandlerState</em> is the handler's state. <em>NewState</em> is a similar tuple where <em>Module</em> and <em>Id</em> shall have the same values as in <em>State</em> but the value of <em>HandlerState</em> may be different. Returning a <em>NewState</em> whose <em>Module</em> or <em>Id</em> values differ from those of <em>State</em> will result in the event handler's state remaining unchanged. For a <em>gen_event</em> process, <em>StateFun</em> is called once for each event handler registered in the <em>gen_event</em> process.</p><p>If a <em>StateFun</em> function decides not to effect any change in process state, then regardless of process type, it may simply return its <em>State</em> argument.</p><p>If a <em>StateFun</em> function crashes or throws an exception, then for <em>gen_server</em> and <em>gen_fsm</em> processes, the original state of the process is unchanged. For <em>gen_event</em> processes, a crashing or failing <em>StateFun</em> function means that only the state of the particular event handler it was working on when it failed or crashed is unchanged; it can still succeed in changing the states of other event handlers registered in the same <em>gen_event</em> process.</p><p>If the callback module exports a <em>system_replace_state/2</em> function, it will be called in the target process to replace its state using <em>StateFun</em>. Its two arguments are <em>StateFun</em> and <em>Misc</em>, where <em>Misc</em> is the same as the <em>Misc</em> value returned by <strong>get_status/1,2</strong>. A <em>system_replace_state/2</em> function is expected to return <em>{ok, NewState, NewMisc}</em> where <em>NewState</em> is the callback module's new state obtained by calling <em>StateFun</em>, and <em>NewMisc</em> is a possibly new value used to replace the original <em>Misc</em> (required since <em>Misc</em> often contains the callback module's state within it).</p><p>If the callback module does not export a <em>system_replace_state/2</em> function, <em>replace_state/2,3</em> assumes the <em>Misc</em> value is the callback module's state, passes it to <em>StateFun</em> and uses the return value as both the new state and as the new value of <em>Misc</em>.</p><p>If the callback module's <em>system_replace_state/2</em> function crashes or throws an exception, the caller exits with error <em>{callback_failed, {Module, system_replace_state}, {Class, Reason}}</em> where <em>Module</em> is the name of the callback module and <em>Class</em> and <em>Reason</em> indicate details of the exception. If the callback module does not provide a <em>system_replace_state/2</em> function and <em>StateFun</em> crashes or throws an exception, the caller exits with error <em>{callback_failed, StateFun, {Class, Reason}}</em>.</p><p>The <em>system_replace_state/2</em> function is primarily useful for user-defined behaviours and modules that implement OTP <strong>special processes</strong>. The <em>gen_server</em>, <em>gen_fsm</em>, and <em>gen_event</em> OTP behaviour modules export this function, and so callback modules for those behaviours need not supply their own.</p>
<pre>
<strong></strong>
install(Name, FuncSpec) -&gt; ok

</pre>

<pre>
<strong></strong>
install(Name, FuncSpec, Timeout) -&gt; ok

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>FuncSpec = {Func, FuncState}</p><p>Func = <strong>dbg_fun()</strong></p><p>FuncState = term()</p><p>Timeout = timeout()</p><p>This function makes it possible to install other debug functions than the ones defined above. An example of such a function is a trigger, a function that waits for some special event and performs some action when the event is generated. This could, for example, be turning on low level tracing.</p><p><em>Func</em> is called whenever a system event is generated. This function should return <em>done</em>, or a new func state. In the first case, the function is removed. It is removed if the function fails.</p>
<pre>
<strong></strong>
remove(Name, Func) -&gt; ok

</pre>

<pre>
<strong></strong>
remove(Name, Func, Timeout) -&gt; ok

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Func = <strong>dbg_fun()</strong></p><p>Timeout = timeout()</p><p>Removes a previously installed debug function from the process. <em>Func</em> must be the same as previously installed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROCESS IMPLEMENTATION FUNCTIONS</h2>
        <div class="sectioncontent">
<p>The following functions are used when implementing a special process. This is an ordinary process which does not use a standard behaviour, but a process which understands the standard system messages.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">

<pre>
<strong></strong>
debug_options(Options) -&gt; [dbg_opt()]

</pre>
<p>Types:</p><p>Options = [Opt]</p><p>Opt = trace</p>
<pre>
    | log
</pre>

<pre>
    | {log, integer() &gt;= 1}
</pre>

<pre>
    | statistics
</pre>

<pre>
    | {log_to_file, FileName}
</pre>

<pre>
    | {install, FuncSpec}
</pre>
<p>FileName = <strong>file:name()</strong></p><p>FuncSpec = {Func, FuncState}</p><p>Func = <strong>dbg_fun()</strong></p><p>FuncState = term()</p><p>This function can be used by a process that initiates a debug structure from a list of options. The values of the <em>Opt</em> argument are the same as the corresponding functions.</p>
<pre>
<strong></strong>
get_debug(Item, Debug, Default) -&gt; term()

</pre>
<p>Types:</p><p>Item = log | statistics</p><p>Debug = [<strong>dbg_opt()</strong>]</p><p>Default = term()</p><p>This function gets the data associated with a debug option. <em>Default</em> is returned if the <em>Item</em> is not found. Can be used by the process to retrieve debug data for printing before it terminates.</p>
<pre>
<strong></strong>
handle_debug(Debug, FormFunc, Extra, Event) -&gt; [dbg_opt()]

</pre>
<p>Types:</p><p>Debug = [<strong>dbg_opt()</strong>]</p><p>FormFunc = <strong>format_fun()</strong></p><p>Extra = term()</p><p>Event = <strong>system_event()</strong></p><p>This function is called by a process when it generates a system event. <em>FormFunc</em> is a formatting function which is called as <em>FormFunc(Device, Event, Extra)</em> in order to print the events, which is necessary if tracing is activated. <em>Extra</em> is any extra information which the process needs in the format function, for example the name of the process.</p>
<pre>
<strong></strong>
handle_system_msg(Msg, From, Parent, Module, Debug, Misc) -&gt;
<strong></strong>
                     no_return()

</pre>
<p>Types:</p><p>Msg = term()</p><p>From = {pid(), Tag :: term()}</p><p>Parent = pid()</p><p>Module = module()</p><p>Debug = [<strong>dbg_opt()</strong>]</p><p>Misc = term()</p><p>This function is used by a process module that wishes to take care of system messages. The process receives a <em>{system, From, Msg}</em> message and passes the <em>Msg</em> and <em>From</em> to this function.</p><p>This function <em>never</em> returns. It calls the function <em>Module:system_continue(Parent, NDebug, Misc)</em> where the process continues the execution, or <em>Module:system_terminate(Reason, Parent, Debug, Misc)</em> if the process should terminate. The <em>Module</em> must export <em>system_continue/3</em>, <em>system_terminate/4</em>, <em>system_code_change/4</em>, <em>system_get_state/1</em> and <em>system_replace_state/2</em> (see below).</p><p>The <em>Misc</em> argument can be used to save internal data in a process, for example its state. It is sent to <em>Module:system_continue/3</em> or <em>Module:system_terminate/4</em></p>
<pre>
<strong></strong>
print_log(Debug) -&gt; ok

</pre>
<p>Types:</p><p>Debug = [<strong>dbg_opt()</strong>]</p><p>Prints the logged system events in the debug structure using <em>FormFunc</em> as defined when the event was generated by a call to <em>handle_debug/4</em>.</p><p><strong></strong> Mod:system_continue(Parent, Debug, Misc) -&gt; none()</p><p>Types:</p><p>Parent = pid()</p><p>Debug = [<strong>dbg_opt()</strong>]</p><p>Misc = term()</p><p>This function is called from <em>sys:handle_system_msg/6</em> when the process should continue its execution (for example after it has been suspended). This function never returns.</p><p><strong></strong> Mod:system_terminate(Reason, Parent, Debug, Misc) -&gt; none()</p><p>Types:</p><p>Reason = term()</p><p>Parent = pid()</p><p>Debug = [<strong>dbg_opt()</strong>]</p><p>Misc = term()</p><p>This function is called from <em>sys:handle_system_msg/6</em> when the process should terminate. For example, this function is called when the process is suspended and its parent orders shut-down. It gives the process a chance to do a clean-up. This function never returns.</p><p><strong></strong> Mod:system_code_change(Misc, Module, OldVsn, Extra) -&gt; {ok, NMisc}</p><p>Types:</p><p>Misc = term()</p><p>OldVsn = undefined | term()</p><p>Module = atom()</p><p>Extra = term()</p><p>NMisc = term()</p><p>Called from <em>sys:handle_system_msg/6</em> when the process should perform a code change. The code change is used when the internal data structure has changed. This function converts the <em>Misc</em> argument to the new data structure. <em>OldVsn</em> is the <em>vsn</em> attribute of the old version of the <em>Module</em>. If no such attribute was defined, the atom <em>undefined</em> is sent.</p><p><strong></strong> Mod:system_get_state(Misc) -&gt; {ok, State}</p><p>Types:</p><p>Misc = term()</p><p>State = term()</p><p>This function is called from <em>sys:handle_system_msg/6</em> when the process should return a term that reflects its current state. <em>State</em> is the value returned by <em>sys:get_state/2</em>.</p><p><strong></strong> Mod:system_replace_state(StateFun, Misc) -&gt; {ok, NState, NMisc}</p><p>Types:</p><p>StateFun = fun((State :: term()) -&gt; NState)</p><p>Misc = term()</p><p>NState = term()</p><p>NMisc = term()</p><p>This function is called from <em>sys:handle_system_msg/6</em> when the process should replace its current state. <em>NState</em> is the value returned by <em>sys:replace_state/3</em>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="supervisor_bridge.3erl.html"><span aria-hidden="true">&larr;</span> supervisor_bridge.3erl: Generic supervisor bridge behaviour.</a></li>
   <li class="next"><a href="system_information.3erl.html">system_information.3erl: System information <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
