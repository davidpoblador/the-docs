<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eliom_registration.server: Eliom services registration for various kinds of page content: eliom application, valid eliom_registration.html5, actions, redirections, static files, …</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Eliom services registration for various kinds of page content: eliom application, valid eliom_registration.html5, actions, redirections, static files, …">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Eliom_registration.server (3o) manual">
  <meta name="twitter:description" content="Eliom services registration for various kinds of page content: eliom application, valid eliom_registration.html5, actions, redirections, static files, …">
  <meta name="twitter:image" content="https://www.carta.tech/images/libeliom-ocaml-doc-Eliom_registration.server-3o.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3o/Eliom_registration.server.3o.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Eliom_registration.server (3o) manual" />
  <meta property="og:description" content="Eliom services registration for various kinds of page content: eliom application, valid eliom_registration.html5, actions, redirections, static files, …" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libeliom-ocaml-doc-Eliom_registration.server-3o.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Eliom_registration.server<small> (3o)</small></h1>
        <p class="lead">Eliom services registration for various kinds of page content: eliom application, valid eliom_registration.html5, actions, redirections, static files, …</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/Eliom_registration.server.3o.html">
      <span itemprop="name">Eliom_registration.server: Eliom services registration for various kinds of page content: eliom application, valid eliom_registration.html5, actions, redirections, static files, …</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libeliom-ocaml-doc/">
      <span itemprop="name">libeliom-ocaml-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/Eliom_registration.server.3o.html">
      <span itemprop="name">Eliom_registration.server: Eliom services registration for various kinds of page content: eliom application, valid eliom_registration.html5, actions, redirections, static files, …</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Module</h2>
        <div class="sectioncontent">
<p>Module   Eliom_registration</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Documentation</h2>
        <div class="sectioncontent">
<p>Module <strong>Eliom_registration</strong>  : <strong>sig end</strong></p><p>Eliom services registration for various kinds of page content: Eliom application, valid <strong>Eliom_registration.Html5</strong> , actions, redirections, static files, …</p><p><strong>=== Please read the Eliom manual before this page to learn how to use</strong> <strong>{% &lt;&lt;a_manual chapter="server-services" | services</strong> <strong>&gt;&gt; %} and {% &lt;&lt;a_manual chapter="server-outputs" | predefined outputs</strong> <strong>&gt;&gt; %}. ===</strong></p><p><strong>=== {% &lt;&lt;outline| &lt;&lt;header| **Table of contents** &gt;&gt; &gt;&gt; %} ===</strong></p><p><strong>===</strong> <strong>Type definitions</strong> <strong>===</strong></p><p><em>type</em> <strong>'a</strong> <em>kind</em></p><p>The type <strong>kind</strong> is an abstract type for the HTTP frame returned by a service. The type parameters are phantom types describing the content of the frame:</p><p>-The second parameter is the same as the last type parameters of the corresponding <strong>Eliom_service.service</strong> . Currently, one of the following types:</p><p>- <strong>Eliom_service.appl_service</strong></p><p>- <strong>Eliom_service.http_service</strong></p><p>- <strong>Eliom_service.ocaml_service</strong></p><p>-The first parameter is a refinement of the second parameter. Currently, one of the following types:</p><p>- <strong>Eliom_registration.application_content</strong></p><p>- <strong>Eliom_registration.browser_content</strong></p><p>- <strong>Eliom_registration.block_content</strong></p><p>- <strong>Eliom_registration.unknown_content</strong></p><p>- <strong>Eliom_registration.ocaml_content</strong></p><p><strong>===</strong> <strong>Return types for Eliom_service.service</strong> <strong>===</strong></p><p><strong>===</strong> <strong>Classical content</strong> <strong>===</strong></p><p><em>type http_service</em> = <strong>Eliom_service.http_service</strong></p><p>The type <strong>http_service</strong> is used as a phantom type parameters for <strong>Eliom_service.service</strong> and <strong>Eliom_registration.kind</strong> . It means the returned content is classical HTTP content described by the content type header. See <strong>Eliom_registration.kind</strong> for a list of others return types.</p><p><em>type browser_content</em> = <strong>[ `Browser ]</strong></p><p>The type <strong>browser_content</strong> is a refinement of <strong>Eliom_registration.http_service</strong> to be used as a phantom type parameters for <strong>Eliom_registration.kind</strong> . It means the returned content must be interpreted in the browser as stated by the content-type header. This is most common return type for an eliom service, see for example <strong>Eliom_registration.Html5</strong> , <strong>Eliom_registration.CssText</strong> , <strong>Eliom_registration.File</strong> , <strong>Eliom_registration.Redirection</strong> , ….</p><p><em>type block_content</em></p><p>The type <strong>block_content</strong> is a refinement of <strong>Eliom_registration.http_service</strong> to be used as a phantom type parameters for <strong>Eliom_registration.kind</strong> . It means the returned content is a subtree of an XML value. See for example <strong>Block5</strong> or <strong>Eliom_registration.Make_typed_xml_registration</strong> .</p><p><em>type unknown_content</em></p><p>The type <strong>unknown_content</strong> is a refinement of <strong>Eliom_registration.http_service</strong> to be used as a phantom type parameters for <strong>Eliom_registration.kind</strong> when the content-type can't be determined staticaly. See <strong>Text</strong> or <strong>Eliom_registration.Any</strong> .</p><p><strong>===</strong> <strong>Application content</strong> <strong>===</strong></p><p><em>type appl_service</em> = <strong>Eliom_service.appl_service</strong></p><p>The type <strong>appl_service</strong> is used as a phantom type parameters for <strong>Eliom_service.service</strong> and <strong>Eliom_registration.kind</strong> . It means the service is part of an Eliom application. See <strong>Eliom_registration.kind</strong> for a list of others return types.</p><p><em>type</em> <strong>'a</strong> <em>application_content</em> = <strong>[ `Appl of 'a ]</strong></p><p>The type <strong>application_content</strong> is a refinement of <strong>Eliom_registration.appl_service</strong> to be used as a phantom type parameters for <strong>Eliom_registration.kind</strong> . The parameter <strong>'a</strong> is phantom type that is unique for a given application.</p><p><strong>===</strong> <strong>OCaml content</strong> <strong>===</strong></p><p><em>type</em> <strong>'a</strong> <em>ocaml_content</em></p><p>The type <strong>ocaml_content</strong> is an synomyn for <strong>Eliom_service.ocaml_service</strong> to be used as a phantom type parameters for <strong>Eliom_registration.kind</strong> . See <strong>Eliom_registration.Ocaml</strong> .</p><p><em>type non_ocaml_service</em> = <strong>Eliom_service.non_ocaml_service</strong></p><p>The type <strong>non_ocaml_service</strong> is used as phantom type parameters for the <strong>Eliom_registration.kind</strong> . It used to type functions that operates over service that do not returns OCaml values, like <strong>Eliom_registration.appl_self_redirect</strong> .</p><p><strong>===</strong> <strong>Module signature</strong> <strong>===</strong></p><p><em>module type Registration =</em> <strong>sig end</strong></p><p>Abstract signature for service registration functions. For concrete instance see <strong>Eliom_registration.Html5</strong> , <strong>Eliom_registration.CssText</strong> , <strong>Eliom_registration.File</strong> , <strong>Eliom_registration.Redirection</strong> , …</p><p><strong>===</strong> <strong>Using HTML5 with services</strong> <strong>===</strong></p><p><em>module Html5_registration :</em> <strong>sig end</strong></p><p>Eliom service registration for services that returns HTML5 page. This is a subset of the <strong>Eliom_registration.Html5</strong> module and an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p><em>module Html5 :</em> <strong>sig end</strong></p><p>Eliom service registration for HTML5 page. This an instance the <strong>Eliom_registration.Registration</strong> abstract signatures.</p><p><strong>===</strong> <strong>Eliom client/server applications</strong> <strong>===</strong></p><p><em>module type APPL_PARAMS =</em> <strong>sig end</strong></p><p>Signature for application creation.</p><p><em>type appl_service_options</em> = {  do_not_launch : <strong>bool</strong> ;  }</p><p>Type for the options of an Eliom application service.</p><p>If you set <strong>do_not_launch</strong> to <strong>true</strong> when creating an application service, it will send the page without launching the client side program. However, if the program is already lanched, the client side process won't be stopped. Use this if some of your pages are not using the client side program and you want to make them load faster.</p><p><strong>=== Do not launch the client side program if it is not already</strong> <strong>launched. Default: false. ===</strong></p><p><em>val default_appl_service_options</em> : <strong>appl_service_options</strong></p><p>The default options record for an eliom service. See <strong>Eliom_registration.appl_service_options</strong> .</p><p><em>module type ELIOM_APPL =</em> <strong>sig end</strong></p><p><em>module App :</em> <strong>functor (Appl_params : APPL_PARAMS) -&gt; ELIOM_APPL</strong></p><p>Functor for application creation. The resulting module is an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p><em>module type TMPL_PARAMS =</em> <strong>sig end</strong></p><p><em>module Eliom_tmpl :</em> <strong>functor (Appl : ELIOM_APPL) -&gt; functor (Tmpl_param : TMPL_PARAMS) -&gt; sig end</strong></p><p><strong>===</strong> <strong>Services returning only fragment of HTML (or others TyXML tree)</strong> <strong>===</strong></p><p><em>module Flow5 :</em> <strong>sig end</strong></p><p>Eliom service registration and forms creation for fragment of HTML5 page. This is an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p>For Eliom application, prefers <strong>Eliom_registration.Ocaml</strong> services to send page fragments.</p><p><em>module Make_typed_xml_registration :</em> <strong>functor (Xml : Xml_sigs.Iterable) -&gt;</strong> <strong>functor (Typed_xml : sig end) -&gt; functor (E : sig end) -&gt; sig end</strong></p><p>Eliom service registration for services that returns fragment of TyXML's tree. The returned module is an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p><strong>===</strong> <strong>Untyped pages</strong> <strong>===</strong></p><p><em>module Html_text :</em> <strong>sig end</strong></p><p>Eliom service registration and forms creation for untyped HTML page. This an instance the <strong>Eliom_registration.Registration</strong> abstract signature. The page content is a <strong>string</strong> that must contains valid HTML and the content type is always <strong>text/html</strong> .</p><p><em>module CssText :</em> <strong>sig end</strong></p><p>Eliom service registration for services that returns CSS. The page content is a <strong>string</strong> that must contains valid CSS and the content type is always <strong>text/css</strong> . The option is the optional "Cache-policy: max-age" header value to be sent.</p><p>This an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p><strong>===</strong> <strong>Other kinds of services</strong> <strong>===</strong></p><p><em>module Action :</em> <strong>sig end</strong></p><p>Eliom service registration for services that only execute actions. See the Eliom manual for more information about .</p><p>If you give the optional parameter <strong>~options:`NoReload</strong> to the registration function, the action will executed and a <strong>204 No</strong> <strong>Content</strong> will be sent to the server.</p><p>This an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p><em>module Unit :</em> <strong>sig end</strong></p><p>Similar to <strong>Actions</strong> with <strong>`NoReload</strong> option.</p><p><em>module Redirection :</em> <strong>sig end</strong></p><p>Eliom service registration for services that returns a redirections towards another service. See the Eliom manual for more information about .</p><p>The default returned HTTP code is <strong>302 Found</strong> . You could use the optional parameter <strong>~options</strong> to change this value:</p><p>- <strong>`MovedPermanently</strong> to return <strong>301 Moved Permanently</strong> .</p><p>- <strong>`Found</strong> to return <strong>302 Found</strong> .</p><p>- <strong>`SeeOther</strong> to return <strong>303 See Other</strong> .</p><p>- <strong>`NotNodifed</strong> to return <strong>304 Not Modified</strong> .</p><p>- <strong>`UseProxy</strong> to return <strong>305 Use Proxy</strong> .</p><p>- <strong>`TemporaryRedirect</strong> to return <strong>307 Temporary Redirect</strong> .</p><p><em>module String_redirection :</em> <strong>sig end</strong></p><p>Eliom service registration for services that returns a redirections towards a string-URL. See the Eliom manual for more information about . The URL given must be an absolute URI.</p><p>The default returned HTTP code is <strong>302 Found</strong> . You could use the optional parameter <strong>~options</strong> to change this value, see <strong>Redirections</strong> for a detailled description.</p><p>This an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p><em>module File :</em> <strong>sig end</strong></p><p>Eliom service registration for services that returns file contents. The value returned by service handlers is the name of the file to send. See the Eliom manual for more information on . The option is the optional "Cache-policy: max-age" header value to be sent.</p><p><em>module File_ct :</em> <strong>sig end</strong></p><p>Same as file but makes possible to specify the content type for each file. The value returned by service handlers is a pair <strong>(file_name, content_type)</strong></p><p><em>module Ocaml :</em> <strong>sig end</strong></p><p>Eliom service registration for services that send marshalled OCaml values.</p><p>This an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p><em>module Any :</em> <strong>sig end</strong></p><p>Eliom service registration for services that choose dynamically what they want to send. The content is created using for example <strong>Eliom_registration.Html5.send</strong> or <strong>Eliom_registration.String.send</strong> functions. See the Eliom manual for more information about</p><p><em>val appl_self_redirect</em> : <strong>('page -&gt; [&lt; `Appl of 'a | `Browser ] kind Lwt.t) -&gt;</strong> <strong>'page -&gt;</strong> <strong>'appl application_content kind Lwt.t</strong></p><p>The function <strong>appl_self_redirect send page</strong> is an helper function required for defining <strong>Eliom_registration.Any</strong> service usable inside an Eliom application ( <strong>Eliom_registration.App</strong> ). It allows casting an Eliom senders that do not returns <strong>Eliom_registration.application_content</strong> (like <strong>Eliom_registration.File.send</strong> , <strong>Eliom_registration.String.send</strong> , ...) into a senders returns <strong>Eliom_registration.application_content</strong> .</p><p>When the service is called from an Eliom application, this is implemented with half-redirection (a redirection that leaves the application). Hence, the service may be called two times in a row and you should not use this function for service that use POST parameters.</p><p><em>module String :</em> <strong>sig end</strong></p><p>Eliom service registration for services that returns "byte"-string contents. The page content is a pair <strong>(raw_content,</strong> <strong>content_type)</strong> . See also <strong>Eliom_registration.Streamlist</strong> for another kind of service that returns "byte" contents. The option is the optional "Cache-policy: max-age" header value to be sent.</p><p>This an instance of the <strong>Eliom_registration.Registration</strong> abstract signature.</p><p><em>module Streamlist :</em> <strong>sig end</strong></p><p>Eliom service registration for services that returns "byte" contents with . The page content is a pair <strong>(stream_creator_list, content_type)</strong> . See also <strong>Eliom_registration.String</strong> for another kind of service that returns "byte" contents.</p><p>Streams are created by calling the functions in the list and is called at the end of the stream. If something goes wrong while processing a stream, the current stream is closed and the following streams are not created.</p><p><strong>===</strong> <strong>Customizing registration</strong> <strong>===</strong></p><p><em>module Customize :</em> <strong>functor (R : Registration) -&gt; functor (T : sig end) -&gt; sig end</strong></p><p>The <strong>Customize</strong> functor allows specialization of service registration functions by customizing the page type. See the  for example.</p><p><strong>===</strong> <strong>Using your own error pages</strong> <strong>===</strong></p><p><em>val set_exn_handler</em> : <strong>(exn -&gt; browser_content kind Lwt.t) -&gt;</strong> <strong>unit</strong></p><p>The <strong>set_exn_handler handler</strong> allows redefinition of error pages: <strong>404</strong> or any exception during page generation.</p><p>Note that you should not catch every exception here since some Eliom mechanisms are done using exceptions, like redirections. Do not catch exception defined in Eliom except <strong>Eliom_common.Eliom_404</strong> , <strong>Eliom_common.Eliom_Wrong_parameter</strong> <strong>Eliom_common.Eliom_Typing_Error</strong> .</p><p>Warning: This functions must be called when the site information is available, that is, either during a request or during the initialisation phase of the site.  Otherwise, it will raise the exception <strong>Eliom_common.Eliom_site_information_not_available</strong> .  If you are using static linking, you must delay the call to this function until the configuration file is read, using <strong>Eliom_service.register_eliom_module</strong> . Otherwise you will also get this exception.</p><p><em>val cast_unknown_content_kind</em> : <strong>unknown_content kind -&gt;</strong> <strong>'a kind</strong></p><p><strong>Unsafe cast of contents</strong></p><p><em>val cast_http_result</em> : <strong>Ocsigen_http_frame.result -&gt; 'a kind</strong></p><p>If you know that the content you generated using <strong>Text.send</strong> or <strong>Streamlist.send</strong> is the same as some other kind, you can cast it with <strong>cast_unknown_content_kind</strong> for use with <strong>Any</strong> module.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Eliom_registration.Unit.server.3o.html"><span aria-hidden="true">&larr;</span> Eliom_registration.Unit.server.3o: Similar to actions with `noreload option.</a></li>
   <li class="next"><a href="Eliom_request_info.server.3o.html">Eliom_request_info.server.3o: This module contains the functions you need to get (or set) information about current request. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
