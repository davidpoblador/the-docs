<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VUser::Google::ProvisioningAPI::V1_0: Perl module that implements version 1.0 of the google apps for your domain provisioning api</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Perl module that implements version 1.0 of the google apps for your domain provisioning api">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="VUser::Google::ProvisioningAPI::V1_0 (3pm) manual">
  <meta name="twitter:description" content="Perl module that implements version 1.0 of the google apps for your domain provisioning api">
  <meta name="twitter:image" content="https://www.carta.tech/images/libvuser-google-api-perl-VUser::Google::ProvisioningAPI::V1_0-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/VUser::Google::ProvisioningAPI::V1_0.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="VUser::Google::ProvisioningAPI::V1_0 (3pm) manual" />
  <meta property="og:description" content="Perl module that implements version 1.0 of the google apps for your domain provisioning api" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libvuser-google-api-perl-VUser::Google::ProvisioningAPI::V1_0-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">VUser::Google::ProvisioningAPI::V1_0<small> (3pm)</small></h1>
        <p class="lead">Perl module that implements version 1.0 of the google apps for your domain provisioning api</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/VUser::Google::ProvisioningAPI::V1_0.3pm.html">
      <span itemprop="name">VUser::Google::ProvisioningAPI::V1_0: Perl module that implements version 1.0 of the google apps for your domain provisioning api</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libvuser-google-api-perl/">
      <span itemprop="name">libvuser-google-api-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/VUser::Google::ProvisioningAPI::V1_0.3pm.html">
      <span itemprop="name">VUser::Google::ProvisioningAPI::V1_0: Perl module that implements version 1.0 of the google apps for your domain provisioning api</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use VUser::Google::ProvisioningAPI;
  my $google = new VUser::Google::ProvisioningAPI($domain,$admin,$password);

  $google-&gt;CreateAccount($userName, $firstName, $lastName, $password);
  $google-&gt;RetrieveAccount($userName);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REQUIREMENTS</h2>
        <div class="sectioncontent">
<p>VUser::Google::ProvisioningAPI requires the following modules to be installed:</p><ul>
<li><p>\*(C`LWP::UserAgent\*(C'</p></li><li><p>\*(C`HTTP::Request\*(C'</p></li><li><p>\*(C`Encode\*(C'</p></li><li><p>\*(C`XML::Simple\*(C'</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>VUser::Google::ProvisioningAPI provides a simple interface to the Google Apps for Your Domain Provisioning \s-1API\s0. It uses the \*(C`LWP::UserAgent\*(C' module for the \s-1HTTP\s0 transport, and the \*(C`HTTP::Request\*(C' module for the \s-1HTTP\s0 request and response.</p><h3>Examples</h3>
<p>For a complete description of the meaning of the following methods, see the Google \s-1API\s0 documentation referenced in the \s-1SEE\s0 \s-1ALSO\s0 section.</p><p>        #create the object         $google = new Google:ProvisioningAPI($domain,$admin,$password) || die "Cannot create google object";</p><p>        print &apos;Module version: &apos; . $google-&gt;VERSION . "&#92;nAPI Version: " . $google-&gt;version() . "&#92;n";</p><p>        #create a hosted account         if( $google-&gt;CreateAccount( $userName, $firstName, $lastName, $password ) )         {                 print "Account created!&#92;N";         }</p><p>        #add email services to the account         $google-&gt;UpdateAccountEmail($userName);</p><p>        #retrieving account data         if($google-&gt;RetrieveAccount($userName))         {                 print &apos;Username: &apos; . $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{userName} . "&#92;n";                 print &apos;firstName: &apos; . $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{firstName} . "&#92;n";                 print &apos;lastName: &apos; . $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{lastName} . "&#92;n";                 print &apos;accountStatus: &apos; . $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{accountStatus} . "&#92;n";</p><p>        }</p><p>        #see what the result hash after a request looks like         use Data::Dumper;         print Dumper($google-&gt;{result});</p><p>        #delete an account         $ret = DeleteAccount($userName);</p><p>        #accessing the HTML data as it was received from the Google servers:         print $google-&gt;replyheaders();         print $google-&gt;replycontent();</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">
<p>new ( $domain, $admin, $adminpassword )</p><p>This is the constructor for a new VUser::Google::ProvisioningAPI object. $domain is the domain name registered with Google Apps For Your Domain, $admin is an account in the above domain that has the right to manage that domain, and $adminpassword is the password for that account.</p><p>Note that the constructor will \s-1NOT\s0 attempt to perform the 'ClientLogin' call to the Google Provisioning \s-1API\s0 (see below). Authentication happens automatically when the first \s-1API\s0 call is performed. The token will be remembered for the duration of the object, and will be automatically refreshed as needed. If you want to verify that you can get a valid token before performing any operations, follow the constructor with a call to <em>IsAuthenticated()</em> as such:</p><p>        print "Authentication OK&#92;n" unless not $google-&gt;IsAuthenticated();</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>Below are all the methods available on the object. For the Google \s-1API\s0 specific methods, see the Google \s-1API\s0 documentation for more details. When a request is properly handled by Google's \s-1API\s0 engine, the webpost to the \s-1API\s0 succeeds. This results in a valid page being returned. The content of this page then defines whether the request succeeded or not. All pages returing the 'Success(2000)' status code will result in the \s-1API\s0 method succeeding, and returning a 1. All failures return 0. Please see the section below on how to access the result data, and how to determine the reasons for errors.</p><p>If the web post fails (as determined by the \*(C`HTTP::Request\*(C' method <em>IsSuccess()</em> ), the method returns 0, and the {reason} hash is set to a descriptive error. You can then examine the raw data to get an idea of what went wrong.</p><h3>Checking Authentication</h3>
<p><em>IsAuthenticated()</em></p><p>will check if the object has been able to authenticate with Google's api engine, and get an authentication ticket. Returns 1 if successful, 0 on failure. To see why it may fail, see the $@ variable, and the $google-&gt;{results}-&gt;{reason} hash, and parse the returned page (see the 'content' and 'header' variables.)</p>
<h3>Methods to Create/Retrieve/Delete</h3>
<p><em>'Hosted account' methods</em></p><p>CreateAccountEmail(  $userName, $firstName, $lastName, $password, $quota )</p><p>Creates a hosted account with email services in your domains name space. The first 4 arguments are required. The $quota argument is optional. If $quota is given, the &lt;quota&gt; tag will be sent with the request, otherwize is will be omitted. See the Google \s-1API\s0 docs for the \s-1API\s0 call for more details.</p><p>CreateAccount(  $userName, $firstName, $lastName, $password )</p><p>Creates a hosted account in your domains name space. This account does \s-1NOT\s0 have email services by default. You need to call <em>UpdateAccountEmail()</em> to add email services. \s-1NOTE:\s0 this \s-1API\s0 call may be discontinued! See <em>CreateAccountEmail()</em> for a replacement.</p><p>UpdateAccount( $username, $firstName, $lastName, $password )</p><p>$username is the mandatory name of the hosted account. The remaining paramaters are optional, and can be set to 'undef' if you do not wish to change them Eg. to change the password on an account, call this as;</p><p>        UpdateAccount( $username, undef, undef, &apos;newpassword&apos; );</p><p>to change names only, you would call it as such:</p><p>        UpdateAccount( $username, &apos;newfirstname&apos;, &apos;newlastname&apos;, undef );</p><p>UpdateAccountEmail( $userName )</p><p>Adds email services to a hosted account created with <em>CreateAccount()</em>. \s-1NOTE:\s0 this \s-1API\s0 call may be discontinued! See <em>CreateAccountEmail()</em> for a replacement.</p><p>UpdateAccountStatus( $userName, $status )</p><p>$status is either 'locked' or 'unlocked'</p><p>RetrieveAccount( $userName )</p><p>DeleteAccount( $userName )</p><p>RenameAccount( $oldName, $newName, $alias )</p><p>$alias is either '1' or '0' \s-1WARNING:\s0 this method is derived from the Python sample code provided by Google: (Ie. this may not work yet) "Username change. Note that this feature must be explicitly enabled by the domain administrator, and is not enabled by default. Args:</p><p>oldname: user to rename newname: new username to set for the user alias: if 1, create an alias of oldname for newname"</p><p><em>'Alias' methods</em></p><p>CreateAlias( $userName, $alias )</p><p>RetrieveAlias( $userName );</p><p>DeleteAlias( $alias );</p><p><em>'Mailing List' methods</em></p><p>CreateMailingList( $mailingListName )</p><p>UpdateMailingList( $mailingListName, $userName, $listOperation )</p><p>$listOperation is either 'add' or 'remove'</p><p>RetrieveMailingList( $mailingListName )</p><p>DeleteMailingList( $mailingListName )</p>
<h3>Methods to set/get variables</h3>
<p>After creating the object you can get/set the administrator account and set the password with these methods. Note this will cause a re-authentication next time a Google \s-1API\s0 method is called.</p><p>admin( $admin )</p><p>set the administrative user, and will return administator username.</p><p>password( $string )</p><p>set the password, returns an empty string</p>
<h3>Miscelleaneous statistics methods</h3>
<p>There are a few methods to access some statistics data that is collected while the object performing Google \s-1API\s0 calls.</p><p><em>authtime()</em></p><p>returns the time of last authentication, as generated by the <em>time()</em> function</p><p><em>ctime()</em></p><p>returns the create time of the object, as generated by the <em>time()</em> function</p><p><em>rtime()</em></p><p>returns the time of the most recent request, as generated by the <em>time()</em> function</p><p><em>logins()</em></p><p>returns the number of \s-1API\s0 logins that have been performed</p><p><em>requests()</em></p><p>returns the numbers of \s-1API\s0 requests that have been submitted to Google</p><p><em>success()</em></p><p>returns the numbers of successful api request performed</p><p>And finally,</p><p><em>version()</em></p><p>returns a string with the api version implemented. This is currently '1.0'</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESSING RESULTING DATA</h2>
        <div class="sectioncontent">
<p>Valid return data from Google is parsed into a hash named 'result', available through the object. In this hash you can find all elements as returned by Google. This hash is produced by XML::Simple. See the Google \s-1API\s0 documentation in the \s-1SEE\s0 \s-1ALSO\s0 section for complete details. Some of the more useful elements you may need to look at are:</p><p>        $google-&gt;{result}-&gt;{reason}             #this typically has the textual reason for a failure         $google-&gt;{result}-&gt;{extendedMessage}    #a more extensive description of the failure reason may be here         $google-&gt;{result}-&gt;{result}             #typically empty!         $google-&gt;{result}-&gt;{type}               #should be same of query type, eg &apos;Account&apos;, &apos;Alias&apos;, &apos;MailingList&apos;</p><p>The retrieval section contains data when you are querying. Here is what this section looks like when you call the RetrieveAccount method:</p><p>        $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{firstName}         $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{lastName}         $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{accountStatus}         $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{aliases}-&gt;{alias}         $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{emailLists}-&gt;{emailList}</p><p>To see the structure of the result hash, use the Data::Dumper module as such:</p><p>        use Data::Dumper;         print Dumper($google-&gt;{result});</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESSING RAW GOOGLE POST AND RESULT DATA</h2>
        <div class="sectioncontent">
<p>The data from the most recent post to the Google servers is available. You can access it as:</p><p>        print $google-&gt;requestcontent();</p><p>The most recent received \s-1HTML\s0 data is stored in two parts, the headers and the content. Both are strings. They can be accessed as such:</p><p>        print $google-&gt;replyheaders();         print $google-&gt;replycontent();</p><p>Note the headers are new-line separated and can easily be parsed:</p><p>        foreach my $headerline ( split/&#92;n/, $g-&gt;replyheaders() )         {                 my ($header, $value) = split/:/, $headerline;         }</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORT</h2>
        <div class="sectioncontent">
<p>None by default.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO VUser::Google::ProvisioningAPI::V1_0&hellip;</h2>
        <div class="sectioncontent">
<p>The official Google documentation can be found at http://code.google.com/apis/apps-for-your-domain/google_apps_provisioning_api_v1.0_reference.html</p><p>For support, see the Google Group at http://groups.google.com/group/apps-for-your-domain-apis</p><p>For additional support specific to this modules, email me at johan at reinalda dot net.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Johan Reinalda, johan at reinalda dot net</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2006 by Johan Reinalda, johan at reinalda dot net</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.8.5 or, at your option, any later version of Perl 5 you may have available.</p><p>If you make useful modification, kindly consider emailing then to me for inclusion in a future version of this module.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="VUser::Google::ProvisioningAPI.3pm.html"><span aria-hidden="true">&larr;</span> VUser::Google::ProvisioningAPI.3pm: Perl module that implements the google apps for your domain provisioning api</a></li>
   <li class="next"><a href="VUser::Google::ProvisioningAPI::V2_0.3pm.html">VUser::Google::ProvisioningAPI::V2_0.3pm: Perl module that implements version 2.0 of the google apps for your domain provisioning api <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
