<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test::LectroTest: Easy, automatic, specification-based tests</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Easy, automatic, specification-based tests">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Test::LectroTest (3pm) manual">
  <meta name="twitter:description" content="Easy, automatic, specification-based tests">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtest-lectrotest-perl-Test::LectroTest-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Test::LectroTest.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Test::LectroTest (3pm) manual" />
  <meta property="og:description" content="Easy, automatic, specification-based tests" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtest-lectrotest-perl-Test::LectroTest-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Test::LectroTest<small> (3pm)</small></h1>
        <p class="lead">Easy, automatic, specification-based tests</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::LectroTest.3pm.html">
      <span itemprop="name">Test::LectroTest: Easy, automatic, specification-based tests</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtest-lectrotest-perl/">
      <span itemprop="name">libtest-lectrotest-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::LectroTest.3pm.html">
      <span itemprop="name">Test::LectroTest: Easy, automatic, specification-based tests</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>version 0.5001</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    #!/usr/bin/perl -w

    use MyModule;  # contains code we want to test
    use Test::LectroTest;

    Property {
        ##[ x &lt;- Int, y &lt;- Int ]##
        MyModule::my_function( $x, $y ) &gt;= 0;
    }, name =&gt; "my_function output is non-negative" ;

    Property { ... }, name =&gt; "yet another property" ;

    # more properties to check here
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module provides a simple (yet full featured) interface to LectroTest, an automated, specification-based testing system for Perl. To use it, declare properties that specify the expected behavior of your software.  LectroTest then checks your software to see whether those properties hold.</p><p>Declare properties using the \*(C`Property\*(C' function, which takes a block of code and promotes it to a Test::LectroTest::Property:</p><p>    Property {         ##[ x &lt;- Int, y &lt;- Int ]##         MyModule::my_function( $x, $y ) &gt;= 0;     }, name =&gt; "my_function output is non-negative" ;</p><p>The first part of the block must contain a generator-binding declaration.  For example:</p><p>        ##[  x &lt;- Int, y &lt;- Int  ]##</p><p>(Note the special bracketing, which is required.)  This particular binding says, "For all integers <em>x</em> and <em>y</em>."  (By the way, you aren't limited to integers.  LectroTest also gives you booleans, strings, lists, hashes, and more, and it lets you define your own generator types.  See Test::LectroTest::Generator for more.)</p><p>The second part of the block is simply a snippet of code that makes use of the variables we bound earlier to test whether a property holds for the piece of software we are testing:</p><p>        MyModule::my_function( $x, $y ) &gt;= 0;</p><p>In this case, it asserts that \*(C`MyModule::my_function($x,$y)\*(C' returns a non-negative result.  (Yes, $x and $y refer to the same <em>x</em> and <em>y</em> that we bound to the generators earlier.  LectroTest automagically loads these lexically bound Perl variables with values behind the scenes.)</p><p><strong>Note:</strong> If you want to use testing assertions like \*(C`ok\*(C' from Test::Simple or \*(C`is\*(C', \*(C`like\*(C', or \*(C`cmp_ok\*(C' from Test::More (and the related family of Test::Builder-based testing modules), see Test::LectroTest::Compat, which lets you mix and match LectroTest with these modules.</p><p>Finally, we give the whole Property a name, in this case \*(L"my_function output is non-negative.\*(R"  It's a good idea to use a meaningful name because LectroTest refers to properties by name in its output.</p><p>Let's take a look at the finished property specification:</p><p>    Property {         ##[ x &lt;- Int, y &lt;- Int ]##         MyModule::my_function( $x, $y ) &gt;= 0;     }, name =&gt; "my_function output is non-negative" ;</p><p>It says, "For all integers <em>x</em> and <em>y</em>, we assert that my_function's output is non-negative."</p><p>To check whether this property holds, simply put it in a Perl program that uses the Test::LectroTest module.  (See the \*(L"\s-1SYNOPSIS\s0\*(R" for an example.)  When you run the program, LectroTest will load the property (and any others in the file) and check it by running random trials against the software you're testing.</p><p><strong>Note:</strong> If you want to place LectroTest property checks into a test plan managed by Test::Builder-based modules such as Test::Simple or Test::More, see Test::LectroTest::Compat.</p><p>If LectroTest is able to \*(L"break\*(R" your software during the property check, it will emit a counterexample to your property's assertions and stop.  You can plug the counterexample back into your software to debug the problem.  (You might also want to add the counterexample to a list of regression tests.)</p><p>A successful LectroTest looks like this:</p><p>  1..1   ok 1 - &apos;my_function output is non-negative&apos; (1000 attempts)</p><p>On the other hand, if you're not so lucky:</p><p>  1..1   not ok 1 - &apos;my_function output is non-negative&apos; falsified &#92;       in 324 attempts   # Counterexample:   # $x = -34   # $y = 0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT CODE</h2>
        <div class="sectioncontent">
<p>The exit code returned by running a suite of property checks is the number of failed checks.  The code is 0 if all properties passed their checks or <em>N</em> if <em>N</em> properties failed. (If more than 254 properties failed, the exit code will be 254.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADJUSTING THE TESTING PARAMETERS</h2>
        <div class="sectioncontent">
<p>There is one testing parameter (among others) that you might wish to change from time to time: the number of trials to run for each property checked.  By default it is 1,000.  If you want to try more or fewer trials, pass the \*(C`trials=&gt;\*(C'<em>N</em> flag:</p><p>  use Test::LectroTest trials =&gt; 10_000;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TESTING FOR REGRESSIONS AND CORNER CASES</h2>
        <div class="sectioncontent">
<p>LectroTest can record failure-causing test cases to a file, and it can play those test cases back as part of its normal testing strategy. The easiest way to take advantage of this feature is to set the <em>regressions</em> parameter when you \*(C`use\*(C' this module:</p><p>    use Test::LectroTest         regressions =&gt; "regressions.txt";</p><p>This tells LectroTest to use the file \*(L"regressions.txt\*(R" for both recording and playing back failures.  If you want to record and play back from separate files, or want only to record <em>or</em> play back, use the <em>record_failures</em> and/or <em>playback_failures</em> options:</p><p>    use Test::LectroTest         playback_failures =&gt; "regression_suite_for_my_module.txt",         record_failures   =&gt; "failures_in_the_field.txt";</p><p>See Test::LectroTest::RegressionTesting for more.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>When you use this module, it imports all of the generator-building functions from Test::LectroTest::Generator into the your code's namespace.  This is almost always what you want, but I figured I ought to say something about it here to reduce the possibility of surprise.</p><p>A Property specification must appear in the first column, i.e., without any indentation, in order for it to be automatically loaded and checked.  If this poses a problem, let me know, and this restriction can be lifted.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Test::LectroTest&hellip;</h2>
        <div class="sectioncontent">
<p>For a gentle introduction to LectroTest, see Test::LectroTest::Tutorial.  Also, the slides from my LectroTest talk for the Pittsburgh Perl Mongers make for a great introduction. Download a copy from the LectroTest home (see below).</p><p>Test::LectroTest::RegressionTesting explains how to test for regressions and corner cases using LectroTest.</p><p>Test::LectroTest::Compat lets you mix LectroTest with the popular family of Test::Builder-based modules such as Test::Simple and Test::More.</p><p>Test::LectroTest::Property explains in detail what you can put inside of your property specifications.</p><p>Test::LectroTest::Generator describes the many generators and generator combinators that you can use to define the test or condition space that you want LectroTest to search for bugs.</p><p>Test::LectroTest::TestRunner describes the objects that check your properties and tells you how to turn their control knobs.  You'll want to look here if you're interested in customizing the testing procedure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LECTROTEST HOME</h2>
        <div class="sectioncontent">
<p>The LectroTest home is http://community.moertel.com/LectroTest. There you will find more documentation, presentations, mailing-list archives, a wiki, and other helpful LectroTest-related resources.  It's also the best place to ask questions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Tom Moertel (tom@moertel.com)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSPIRATION</h2>
        <div class="sectioncontent">
<p>The LectroTest project was inspired by Haskell's QuickCheck module by Koen Claessen and John Hughes: http://www.cs.chalmers.se/~rjmh/QuickCheck/.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT and LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2004-05 by Thomas G Moertel.  All rights reserved.</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Test::JSON.3pm.html"><span aria-hidden="true">&larr;</span> Test::JSON.3pm: Test json data</a></li>
   <li class="next"><a href="Test::LectroTest::Compat.3pm.html">Test::LectroTest::Compat.3pm: Use lectrotest property checks in a test::simple world <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
