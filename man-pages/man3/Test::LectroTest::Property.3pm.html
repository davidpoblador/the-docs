<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test::LectroTest::Property: Properties that make testable claims about your software</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Properties that make testable claims about your software">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Test::LectroTest::Property (3pm) manual">
  <meta name="twitter:description" content="Properties that make testable claims about your software">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtest-lectrotest-perl-Test::LectroTest::Property-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Test::LectroTest::Property.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Test::LectroTest::Property (3pm) manual" />
  <meta property="og:description" content="Properties that make testable claims about your software" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtest-lectrotest-perl-Test::LectroTest::Property-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Test::LectroTest::Property<small> (3pm)</small></h1>
        <p class="lead">Properties that make testable claims about your software</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::LectroTest::Property.3pm.html">
      <span itemprop="name">Test::LectroTest::Property: Properties that make testable claims about your software</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtest-lectrotest-perl/">
      <span itemprop="name">libtest-lectrotest-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::LectroTest::Property.3pm.html">
      <span itemprop="name">Test::LectroTest::Property: Properties that make testable claims about your software</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>version 0.5001</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use MyModule;  # provides my_function_to_test

 use Test::LectroTest::Generator qw( :common );
 use Test::LectroTest::Property qw( Test );
 use Test::LectroTest::TestRunner;

 my $prop_non_neg = Property {
     ##[ x &lt;- Int, y &lt;- Int ]##
     $tcon-&gt;label("negative") if $x &lt; 0;
     $tcon-&gt;label("odd")      if $x % 2;
     $tcon-&gt;retry             if $y == 0;  # 0 can&apos;t be used in test
     my_function_to_test( $x, $y ) &gt;= 0;
 }, name =&gt; "my_function_to_test output is non-negative";

 my $runner = Test::LectroTest::TestRunner-&gt;new();
 $runner-&gt;run_suite(
     $prop_non_neg,
     # ... more properties here ...
 );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>\s-1STOP\s0!</strong> If you're just looking for an easy way to write and run unit tests, see Test::LectroTest first.  Once you're comfortable with what is presented there and ready to delve into the full offerings of properties, this is the document for you.</p><p>This module allows you to define Properties that can be checked automatically by Test::LectroTest.  A Property is a specification of your software's required behavior over a given set of conditions. The set of conditions is given by a generator-binding specification. The required behavior is defined implicitly by a block of code that tests your software for a given set of generated conditions; if your software matches the expected behavor, the block of code returns true; otherwise, false.</p><p>This documentation serves as reference documentation for LectroTest Properties.  If you don't understand the basics of Properties yet, see \*(L"\s-1OVERVIEW\s0\*(R" in Test::LectroTest::Tutorial before continuing.</p><h3>Two ways to create Properties</h3>
<p>There are two ways to create a property:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>Use the \*(C`Property\*(C' function to promote a block of code that contains both a generator-binding specification and a behavior test into a Test::LectroTest::Property object.  <strong>This is the preferred method.</strong> Example:   my $prop1 = Property {       ##[ x &lt;- Int ]##       thing_to_test($x) &gt;= 0;   }, name =&gt; "thing_to_test is non-negative";</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>Use the \*(C`new\*(C' method of Test::LectroTest::Property and provide it with the necessary ingredients via named parameters:   my $prop2 = Test::LectroTest::Property-&gt;new(       inputs =&gt; [ x =&gt; Int ],       test   =&gt; sub { my ($tcon,$x) = @_;                       thing_to_test($x) &gt;= 0 },       name   =&gt; "thing_to_test is non-negative"   );</p>
  </dd>

</dl>
<p>Both are equivalent, but the first is concise, easier to read, and lets LectroTest do some of the heavy lifting for you.  The second is probably better, however, if you are constructing property specifications programmatically.</p>
<h3>Generator-binding specification</h3>
<p>The generator-binding specification declares that certain variables are to be bound to certain kinds of random-value generators during the tests of your software's behavior.  The number and kind of generators define the \*(L"condition space\*(R" that is examined during property checks.</p><p>If you use the \*(C`Property\*(C' function to create your properties, your generator-binding specification must come first in your code block, and you must use the following syntax:</p><p>  ##[ var1 &lt;- gen1, var2 &lt;- gen2, ... ]##</p><p>Comments are not allowed within the specification, but you may break it across multiple lines:</p><p>  ##[ var1 &lt;- gen1,       var2 &lt;- gen2, ...   ]##</p><p>or</p><p>  ##[       var1 &lt;- gen1,       var2 &lt;- gen2, ...   ]##</p><p>Further, for better integration with syntax-highlighting IDEs, the terminating \*(C`]##\*(C' delimiter may be preceded by a hash symbol \*(C`#\*(C' and optional whitespace to make it appear like a comment:</p><p>  ##[       var1 &lt;- gen1,       var2 &lt;- gen2, ...   # ]##</p><p>On the other hand, if you use \*(C`Test::LectroTest::Property-&gt;new()\*(C' to create your objects, the generator-binding specification takes the form of an array reference containing variable-generator pairs that is passed to \*(C`new()\*(C' via the parameter named \*(C`inputs\*(C':</p><p>  inputs =&gt; [ var1 =&gt; gen1, var2 =&gt; gen2, ... ]</p><p>Normal Perl syntax applies here.</p>
<h3>Specifying multiple sets of generator bindings</h3>
<p>Sometimes you may want to repeat a property check with multiple sets of generator bindings.  This can happen, for instance, when your condition space is vast and you want to ensure that a particular portion of it receives focused coverage while still sampling the overall space.  For times like this, you can list multiple sets of bindings within the \*(C`##[\*(C' and \*(C`]##\*(C' delimiters, like so:</p><p>  ##[ var1 &lt;- gen1A, ... ],     [ var1 &lt;- gen1B, ... ],     ... more sets of bindings ...     [ var1 &lt;- gen1N, ... ]##</p><p>Note that only the first and last set need the special delimiters.</p><p>The equivalent when using \*(C`new()\*(C' is as follows:</p><p>  inputs =&gt; [ [ var1 =&gt; gen1A, ... ],               [ var1 =&gt; gen1B, ... ],               ...               [ var1 =&gt; gen1N, ... ] ]</p><p>Regardless of how you declare the sets of bindings, each set must provide bindings for the exact same set of variables.  (The generators, of course, can be different.)  For example, this kind of thing is illegal:</p><p>  ##[ x &lt;- Int ], [ y &lt;- Int ]##</p><p>The above is illegal because both sets of bindings must use <em>x</em> or both must use <em>y</em>; they can't each use a different variable.</p><p>  ##[ x &lt;- Int             ],     [ x &lt;- Int, y &lt;- Float ]##</p><p>The above is illegal because the second set has an extra variable that isn't present in the first.  Both sets must use exactly the same variables.  None of the variables may be extra, none may be missing, and all must be named identically across the sets of bindings.</p>
<h3>Behavior test</h3>
<p>The behavior test is a subroutine that accepts a test-controller object and a given set of input conditions, tests your software's observed behavior against the required behavior with respect to the input conditions, and returns true or false to indicate acceptance or rejection.  If you are using the \*(C`Property\*(C' function to create your property objects, lexically bound variables are created and loaded with values automatically, per your input-generator specification, so you can just go ahead and use the variables immediately:</p><p>  my $prop = Property {     ##[ i &lt;- Int, delta &lt;- Float(range=&gt;[0,1]) ]##     my $lo_val = my_thing_to_test($i);     my $hi_val = my_thing_to_test($i + $delta);     $lo_val == $hi_val;   }, name =&gt; "my_thing_to_test ignores fractions" ;</p><p>On the other hand, if you are using \*(C`Test::LectroTest::Property-&gt;new()\*(C', you must declare and initialize these variables manually from Perl's @_ variable <em>in</em> lexicographically increasing order after receiving $tcon, the test controller object.  (This inconvenience, by the way, is why the former method is preferred.)  The hard way:</p><p>  my $prop = Test::LectroTest::Property-&gt;new(     inputs =&gt; [ i =&gt; Int, delta =&gt; Float(range=&gt;[0,1]) ],     test =&gt; sub {         my ($tcon, $delta, $i) = @_;         my $lo_val = my_thing_to_test($i);         my $hi_val = my_thing_to_test($i + $delta);         $lo_val == $hi_val     },     name =&gt; "my_thing_to_test ignores fractions"   ) ;</p>
<h3>Control logic, retries, and labeling</h3>
<p>Inside the behavior test, you have access to a special variable $tcon that allows you to interact with the test controller. Through $tcon you can do the following:</p><ul>
<li><p>retry the current trial with different inputs (if you don't like the inputs you were given at first)</p></li><li><p>add labels to the current trial for reporting purposes</p></li><li><p>attach notes and variable dumps to the current trial for diagnostic purposes, should the trial fail</p></li>
</ul><p>(For the full details of what you can do with $tcon see the \*(L"testcontroller\*(R" section of Test::LectroTest::TestRunner.)</p><p>For example, let's say that we have written a function \*(C`my_sqrt\*(C' that returns the square root of its input.  In order to check whether our implementation fulfills the mathematical definition of square root, we might specify the following property:</p><p>  my $epsilon = 0.000_001;</p><p>  Property {       ##[ x &lt;- Float ]##       return $tcon-&gt;retry if $x &lt; 0;       $tcon-&gt;label("less than one") if $x &lt; 1;       my $sx = my_sqrt( $x );       abs($sx * $sx - $x) &lt; $epsilon;   }, name =&gt; "my_sqrt satisfies defn of square root";</p><p>Because we don't want to deal with imaginary numbers, our square-root function is defined only over non-negative numbers.  To make sure we don't accidentally check our property \*(L"at\*(R" a negative number, we use the following line to re-start the trial with a different input should the input we are given at first be negative:</p><p>      return $tcon-&gt;retry if $x &lt; 0;</p><p>An interesting fact is that for all values <em>x</em> between zero and one, the square root of <em>x</em> is larger than <em>x</em> itself.  Perhaps our implementation treats such values as a special case.  In order to be confident that we are checking this case, we added the following line:</p><p>      $tcon-&gt;label("less than one") if $x &lt; 1;</p><p>In the property-check output, we can see what percentage of the trials checked this case:</p><p>  1..1   ok 1 - &apos;my_sqrt satisfies defn of square root&apos; (1000 attempts)   #   1% less than one</p>
<h3>Trivial cases</h3>
<p>Random-input generators may create some inputs that are trivial and don't provide much testing value.  To make it easy to label such cases, you can use the following from within your behavior tests:</p><p>    $tcon-&gt;trivial if ... ;</p><p>The above is exactly equivalent to the following:</p><p>    $tcon-&gt;label("trivial") if ... ;</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Test::LectroTest::Property&hellip;</h2>
        <div class="sectioncontent">
<p>Test::LectroTest::Generator describes the many generators and generator combinators that you can use to define the test or condition spaces that you want LectroTest to search for bugs.</p><p>Test::LectroTest::TestRunner describes the objects that check your properties and tells you how to turn their control knobs.  You'll want to look here if you're interested in customizing the testing procedure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HERE BE SOURCE FILTERS</h2>
        <div class="sectioncontent">
<p>The special syntax used to specify generator bindings relies upon a source filter (see Filter::Util::Call).  If you don't want to use the syntax, you can disable the filter like so:</p><p>    use Test::LectroTest::Property qw( NO_FILTER );</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Tom Moertel (tom@moertel.com)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSPIRATION</h2>
        <div class="sectioncontent">
<p>The LectroTest project was inspired by Haskell's QuickCheck module by Koen Claessen and John Hughes: http://www.cs.chalmers.se/~rjmh/QuickCheck/.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT and LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2004-13 by Thomas G Moertel.  All rights reserved.</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Test::LectroTest::Generator.3pm.html"><span aria-hidden="true">&larr;</span> Test::LectroTest::Generator.3pm: Random value generators and combinators</a></li>
   <li class="next"><a href="Test::LectroTest::RegressionTesting.3pm.html">Test::LectroTest::RegressionTesting.3pm: How to do regression testing (for free!) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
