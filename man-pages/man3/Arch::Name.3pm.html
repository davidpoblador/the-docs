<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arch::Name: Parse, store and construct an arch name</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Parse, store and construct an arch name">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Arch::Name (3pm) manual">
  <meta name="twitter:description" content="Parse, store and construct an arch name">
  <meta name="twitter:image" content="https://www.carta.tech/images/libarch-perl-Arch::Name-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Arch::Name.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Arch::Name (3pm) manual" />
  <meta property="og:description" content="Parse, store and construct an arch name" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libarch-perl-Arch::Name-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Arch::Name<small> (3pm)</small></h1>
        <p class="lead">Parse, store and construct an arch name</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Arch::Name.3pm.html">
      <span itemprop="name">Arch::Name: Parse, store and construct an arch name</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libarch-perl/">
      <span itemprop="name">libarch-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Arch::Name.3pm.html">
      <span itemprop="name">Arch::Name: Parse, store and construct an arch name</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Arch::Name;

    my $version_spec = &apos;some@hacker.org--pub/bugzilla--main--1.2&apos;;
    my $name = Arch::Name-&gt;new($version_spec);
    die unless $name eq $version;
    die unless $name - 2 eq &apos;some@hacker.org--pub/bugzilla&apos;;
    die unless $name-&gt;branch eq &apos;main&apos;;


    # list other branches (latest versions) in the tree archive
    my $category = Arch::Name-&gt;new($tree-&gt;get_version)-&gt;<strong>go_up</strong>(2);

    foreach my $branch_str ($session-&gt;branches($category)) {
        my $branch = $category-&gt;child($branch_str);
        my $latest_version = ($session-&gt;versions($branch))[-1];

        print $branch-&gt;go_down($latest_version)-&gt;to_string, "&#92;n";
    }


    # another way to manipulate it
    my $category = Arch::Name-&gt;new($tree-&gt;get_version);
    $category-&gt;apply([undef, undef]);
    print $category-&gt;fqn, "&#92;n", $category-&gt;parent-&gt;to_hash, "&#92;n";


    # validate arch name from the user input
    # suppose we write a tool that accepts 3 command line args:
    #   * tree directory or branch+ (to get tree)
    #   * fully qualified revision (to get changeset)
    #   * archive+ (fully qualified category is ok too)
    my ($name_or_dir, $rvsn, $archv) = @ARGV;

    my $tree = Arch::Name-&gt;is_valid($name_or_dir, "branch+")?
        Arch::Session-&gt;new-&gt;get_tree($name_or_dir):
        Arch::Tree-&gt;new($name_or_dir);
    my $cset = $session-&gt;get_revision_changeset($rvsn)
        if Arch::Name-&gt;is_valid($rvsn, &apos;revision&apos;);
    my $possibly_archive = Arch::Name-&gt;new($archv);
    die "No archive" unless $possibly_archive-&gt;is_valid;
    my $archive = $possibly_archive-&gt;cast(&apos;archive&apos;);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This class represents the Arch name concept and provides useful methods to manipulate it.</p><p>The fully qualified Arch name looks like <em>archive</em>/<em>category</em>--<em>branch</em>--<em>version</em>--<em>revision</em> for revisions and some prefix of it for other hierarchy citizens. The branchless names have "--<em>branch</em>" part removed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>The following class methods are available:</p><p><strong>new</strong>, <strong>set</strong>, <strong>clone</strong>, <strong>apply</strong>, <strong>go_up</strong>, <strong>go_down</strong>, <strong>parent</strong>, <strong>child</strong>, <strong>to_string</strong>, <strong>to_nonarch_string</strong>, <strong>to_array</strong>, <strong>to_hash</strong>, <strong>fqn</strong>, <strong>nan</strong>, <strong>get</strong>, <strong>archive</strong>, <strong>category</strong>, <strong>branch</strong>, <strong>version</strong>, <strong>revision</strong>, <strong>error</strong>, <strong>level</strong>, <strong>cast</strong>, <strong>is_valid</strong>.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>new</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>new</strong> <em>init</em> [<em>on_error</em>=0]
  </dt>
  <dd>
    <p>Construct the \*(C`Arch::Name\*(C' instanse. If the optional <em>init</em> parameter is given, then <strong>set</strong> method is called with this parameter on the newly created instanse. By default (without <em>init</em>), the empty name is created that does not pass <strong>is_valid</strong> check. If <em>on_error</em> is set and positive, then die on any initialization error, i.e. when only a partial name is parsed or no name components are given. By default an object representing a partial name is returning, and <strong>error</strong> may be used. If <em>on_error</em> is set and is negative, then don't set any error. Please note, that passing \*(C`Arch::Name\*(C' object as the parameter does not construct a new instance, but returns this passed object. Use <strong>clone</strong> instead if you want to clone the passed object. Or explicitly call <strong>set</strong>.</p>
  </dd>
  <dt>
    <strong>set</strong> <em>object</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>set</strong> <em>string</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>set</strong> <em>arrayref</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>set</strong> <em>hashref</em>
  </dt>
  <dd>
    <p>Store the new content. Multiple argument types supported. <em>object</em> is another reference object of type \*(C`Arch::Name\*(C'. <em>string</em> is fully qualified name. <em>arrayref</em> contains subnames, like the ones returned by <strong>to_array</strong> method. <em>hashref</em> is hash with some or all keys <em>archive</em>, <em>category</em>, <em>branch</em>, <em>version</em> and <em>revision</em>, like the ones returned by <strong>to_hash</strong> method.</p>
  </dd>
  <dt>
    <strong>clone</strong> [<em>init</em> ..]
  </dt>
  <dd>
    <p>Create and return a new \*(C`Arch::Name\*(C' instanse that stores the same logical arch name. If the optional <em>init</em> parameter(s) given, then <strong>apply</strong> method is called with these parameters on the newly created instanse.</p>
  </dd>
  <dt>
    <strong>apply</strong> <em>hashref</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>apply</strong> [<em>reversed_arrayref</em>] [<em>subname</em> ..]
  </dt>
  <dd>
    <p>Similar to <strong>set</strong>, but enables to apply a partial change. For example:     my $name = Arch::Name-&gt;new("user@host--arch/cat--felix--1.2.3");</p><p>    $name-&gt;apply([ &apos;1.2.4&apos;, &apos;leo&apos; ]);        # ok, new branch-version or:     $name-&gt;apply({ branch =&gt; &apos;leo&apos;, version =&gt; &apos;1.2.4&apos; });  # ditto or:     $name-&gt;apply([ &apos;panther&apos; ]);             # error, invalid version or:     $name-&gt;apply([ undef, &apos;panther&apos; ]);      # ok, it is branch now or:     $name-&gt;apply({ category =&gt; &apos;dog&apos; });     # ok, it is category now or:     $name-&gt;apply({ branch =&gt; &apos;leo&apos; });       # ok, == [undef, &apos;leo&apos;] or:     $name-&gt;apply({ version =&gt; undef });      # ok, it is branch now or:     $name-&gt;apply({ revision =&gt; &apos;patch-6&apos; }); # ok, it is revision now or:     $name-&gt;apply([], &apos;patch-6&apos;);             # ditto or:     $name-&gt;apply([ &apos;1.2.4&apos; ], &apos;patch-6&apos;);    # ditto with new version or:     $branch-&gt;apply([], &apos;0&apos;, &apos;base-0&apos;);       # ok, go import revision or:     $branch-&gt;apply(&apos;0&apos;, &apos;base-0&apos;) ;          # ditto</p>
  </dd>
  <dt>
    <strong>go_up</strong> [<em>level</em>=1]
  </dt>
  <dd>
    <p>Remove one dimension (i.e. the last component) from the name, or more than one dimension if <em>level</em> is given. This is effectivelly just a convenient shortcut for \*(C`apply([ (undef) x <strong>level ])\*(C'</strong>.</p>
  </dd>
  <dt>
    <strong>go_down</strong> <em>string</em> ..
  </dt>
  <dd>
    <p>Add one more dimension (i.e. new component <em>string</em>) to the name. Multiple new dimentions are supported. This is effectivelly just an alias for \*(C`apply(<strong>string, .. )\*(C'</strong>.</p>
  </dd>
  <dt>
    <strong>parent</strong> [<em>level</em>=1]
  </dt>
  <dd>
    <p>Return object representing the parent arch name. This is just a shortcut for \*(C`clone-&gt;go_up(<strong>level)\*(C'</strong>.</p>
  </dd>
  <dt>
    <strong>child</strong> <em>string</em> ..
  </dt>
  <dd>
    <p>Return object representing the child arch name. This is just a shortcut for \*(C`clone-&gt;go_down(<strong>string)\*(C'</strong>.</p>
  </dd>
  <dt>
    <strong>to_string</strong>
  </dt>
  <dd>
    <p>Return the fully qualified name.</p>
  </dd>
  <dt>
    <strong>to_nonarch_string</strong>
  </dt>
  <dd>
    <p>Return the nonarch name (that is the fully qualified name without <em>archive/</em> part).</p>
  </dd>
  <dt>
    <strong>to_array</strong>
  </dt>
  <dd>
    <p>Return the components of the name starting from archive to revision. The returned array may contain 0 to 5 strings; the branch in branchless names is represented by empty string. Returns array or arrayref depending on context.</p>
  </dd>
  <dt>
    <strong>to_hash</strong>
  </dt>
  <dd>
    <p>Return the hash containing the components of the name with keys: <em>archive</em>, <em>category</em>, <em>branch</em>, <em>version</em> and <em>revision</em>. Returns hash or hashref depending on context.</p>
  </dd>
  <dt>
    <strong>fqn</strong>
  </dt>
  <dd>
    <p>This is an alias for <strong>to_string</strong>.</p>
  </dd>
  <dt>
    <strong>nan</strong>
  </dt>
  <dd>
    <p>This is an alias for <strong>to_nonarch_string</strong>.</p>
  </dd>
  <dt>
    <strong>get</strong>
  </dt>
  <dd>
    <p>This is an alias for <strong>to_array</strong>.</p>
  </dd>
  <dt>
    <strong>archive</strong> [<em>archive</em>]
  </dt>
  <dd>
    <p>Get or set the archive component only (the string). See also, <strong>to_array</strong> (getter) and <strong>apply</strong> (setter).</p>
  </dd>
  <dt>
    <strong>category</strong> [<em>category</em>]
  </dt>
  <dd>
    <p>Get or set the category component only (the string). See also, <strong>to_array</strong> (getter) and <strong>apply</strong> (setter).</p>
  </dd>
  <dt>
    <strong>branch</strong> [<em>branch</em>]
  </dt>
  <dd>
    <p>Get or set the branch component only (the string). See also, <strong>to_array</strong> (getter) and <strong>apply</strong> (setter).</p>
  </dd>
  <dt>
    <strong>version</strong> [<em>version</em>]
  </dt>
  <dd>
    <p>Get or set the version component only (the string). See also, <strong>to_array</strong> (getter) and <strong>apply</strong> (setter).</p>
  </dd>
  <dt>
    <strong>revision</strong> [<em>revision</em>]
  </dt>
  <dd>
    <p>Get or set the revision component only (the string). See also, <strong>to_array</strong> (getter) and <strong>apply</strong> (setter).</p>
  </dd>
  <dt>
    <strong>error</strong>
  </dt>
  <dd>
    <p>Return the last error string or undef. Some errors are fatal (like passing unexiting [<em>elem</em>] parameter to <strong>is_valid</strong>), then the module dies. Some errors are however not fatal (like setting malformed fully qualified name, or setting revision part when no version part is set). In this case the name is set to something adequate (usually empty name), and this method may be used to get the error message. This last error string is class global and it is (un)set on every <strong>set</strong> or <strong>apply</strong> method.</p>
  </dd>
  <dt>
    <strong>level</strong> [<em>stringify-flag</em>]
  </dt>
  <dd>
    <p>Return 0 if the name is not valid (empty). Return integer [1 .. 5] if the name is <em>archive</em>, <em>category</em>, <em>branch</em>, <em>version</em> and <em>revision</em> correspondingly. If <em>stringify-flag</em> is set, then return the same as a text, i.e. one of the values: \*(L"none\*(R", \*(L"archive\*(R", \*(L"category\*(R", \*(L"branch\*(R", \*(L"version\*(R", \*(L"revision\*(R".</p>
  </dd>
  <dt>
    <strong>cast</strong> <em>elem</em>
  </dt>
  <dd>
    <p>Similar to <strong>parent</strong> or <strong>clone</strong>, but requires argument that is one of the values that <strong>level</strong> returns (i.e. either integers 0 .. 5 or strings \*(L"none\*(R" .. \*(L"revision\*(R"). The returned cloned object contains only the number of components specified by <em>elem</em>. If the original object contains less components than requested, then undef if returned.</p>
  </dd>
  <dt>
    <strong>is_valid</strong> [<em>elem</em>]
  </dt>
  <dd>
    <p>Return true if the object contains the valid arch name (i.e. at least one component). If <em>elem</em> is given that is one of the strings \*(L"archive\*(R", \*(L"category\*(R", \*(L"branch\*(R", \*(L"version\*(R" and \*(L"revision\*(R", then return true if the object represents the given element (for example, category), and false otherwise. If <em>elem</em> is given that is one of the strings \*(L"archive+\*(R", \*(L"category+\*(R", \*(L"branch+\*(R", \*(L"version+\*(R" and \*(L"revision+\*(R", then return true if the object represents at least the given element, and false otherwise.</p>
  </dd>
  <dt>
    Arch::Name-&gt;<strong>is_valid</strong> <em>name</em> [<em>elem</em>]
  </dt>
  <dd>
    <p>This class method does two things, first constructs the \*(C`Arch::Name\*(C' object with <em>name</em> as the constructor parameter, and then calls the <strong>is_valid</strong> method on this created object with optional <em>elem</em> passed.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OVERLOADED OPERATORS</h2>
        <div class="sectioncontent">
<p>The following operators are overloaded:</p><p>    ""    # to_string     0+    # level     bool  # is_valid     =     # clone     +     # child     -     # parent     +=    # go_down     -=    # go_up</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>No known bugs.</p><p>\*(C`man perl | grep more\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Mikhael Goikhman (migo@homemail.com\*(--Perl-GPL/arch-perl\*(--devel).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Arch::Name&hellip;</h2>
        <div class="sectioncontent">
<p>For more information, see tla, Arch::Session, Arch::Library, Arch::Tree.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Arch::Log.3pm.html"><span aria-hidden="true">&larr;</span> Arch::Log.3pm: Class representing arch patch-log</a></li>
   <li class="next"><a href="Arch::Registry.3pm.html">Arch::Registry.3pm: Manage registered archives, search archives on the web <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
