<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shell: Run shell commands transparently within perl</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run shell commands transparently within perl">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Shell (3pm) manual">
  <meta name="twitter:description" content="Run shell commands transparently within perl">
  <meta name="twitter:image" content="https://www.carta.tech/images/libshell-perl-Shell-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Shell.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Shell (3pm) manual" />
  <meta property="og:description" content="Run shell commands transparently within perl" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libshell-perl-Shell-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Shell<small> (3pm)</small></h1>
        <p class="lead">Run shell commands transparently within perl</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Shell.3pm.html">
      <span itemprop="name">Shell: Run shell commands transparently within perl</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libshell-perl/">
      <span itemprop="name">libshell-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Shell.3pm.html">
      <span itemprop="name">Shell: Run shell commands transparently within perl</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
   use Shell qw(cat ps cp);
   $passwd = cat(&apos;&lt;/etc/passwd&apos;);
   @pslines = ps(&apos;-ww&apos;),
   cp("/etc/passwd", "/tmp/passwd");

   # object oriented
   my $sh = Shell-&gt;new;
   print $sh-&gt;ls(&apos;-l&apos;);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<h3>Caveats</h3>
<p>This package is included as a show case, illustrating a few Perl features. It shouldn't be used for production programs. Although it does provide a simple interface for obtaining the standard output of arbitrary commands, there may be better ways of achieving what you need.</p><p>Running shell commands while obtaining standard output can be done with the \*(C`qx/STRING/\*(C' operator, or by calling \*(C`open\*(C' with a filename expression that ends with \*(C`|\*(C', giving you the option to process one line at a time. If you don't need to process standard output at all, you might use \*(C`system\*(C' (in preference of doing a print with the collected standard output).</p><p>Since Shell.pm and all of the aforementioned techniques use your system's shell to call some local command, none of them is portable across different systems. Note, however, that there are several built in functions and library packages providing portable implementations of functions operating on files, such as: \*(C`glob\*(C', \*(C`link\*(C' and \*(C`unlink\*(C', \*(C`mkdir\*(C' and \*(C`rmdir\*(C', \*(C`rename\*(C', \*(C`File::Compare\*(C', \*(C`File::Copy\*(C', \*(C`File::Find\*(C' etc.</p><p>Using Shell.pm while importing \*(C`foo\*(C' creates a subroutine \*(C`foo\*(C' in the namespace of the importing package. Calling \*(C`foo\*(C' with arguments \*(C`arg1\*(C', \*(C`arg2\*(C',... results in a shell command \*(C`foo arg1 arg2...\*(C', where the function name and the arguments are joined with a blank. (See the subsection on Escaping magic characters.) Since the result is essentially a command line to be passed to the shell, your notion of arguments to the Perl function is not necessarily identical to what the shell treats as a command line token, to be passed as an individual argument to the program. Furthermore, note that this implies that \*(C`foo\*(C' is callable by file name only, which frequently depends on the setting of the program's environment.</p><p>Creating a Shell object gives you the opportunity to call any command in the usual \s-1OO\s0 notation without requiring you to announce it in the \*(C`use Shell\*(C' statement. Don't assume any additional semantics being associated with a Shell object: in no way is it similar to a shell process with its environment or current working directory or any other setting.</p>
<h3>Escaping Magic Characters</h3>
<p>It is, in general, impossible to take care of quoting the shell's magic characters. For some obscure reason, however, Shell.pm quotes apostrophes (\*(C`&apos;\*(C') and backslashes (\*(C`&#92;\*(C') on \s-1UNIX\s0, and spaces and quotes (\*(C`"\*(C') on Windows.</p>
<h3>Configuration</h3>
<p>If you set $Shell::capture_stderr to 1, the module will attempt to capture the standard error output of the process as well. This is done by adding \*(C`2&gt;&1\*(C' to the command line, so don't try this on a system not supporting this redirection.</p><p>Setting $Shell::capture_stderr to -1 will send standard error to the bit bucket (i.e., the equivalent of adding \*(C`2&gt;/dev/null\*(C' to the command line).  The same caveat regarding redirection applies.</p><p>If you set $Shell::raw to true no quoting whatsoever is done.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Quoting should be off by default.</p><p>It isn't possible to call shell built in commands, but it can be done by using a workaround, e.g. shell( '-c', 'set' ).</p><p>Capturing standard error does not work on some systems (e.g. \s-1VMS\s0).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>  Date: Thu, 22 Sep 94 16:18:16 -0700   Message-Id: &lt;9409222318.AA17072@scalpel.netlabs.com&gt;   To: perl5-porters@isu.edu   From: Larry Wall &lt;lwall@scalpel.netlabs.com&gt;   Subject: a new module I just wrote</p><p>Here's one that'll whack your mind a little out.</p><p>    #!/usr/bin/perl</p><p>    use Shell;</p><p>    $foo = echo("howdy", "&lt;funny&gt;", "world");     print $foo;</p><p>    $passwd = cat("&lt;/etc/passwd");     print $passwd;</p><p>    sub ps;     print ps -ww;</p><p>    cp("/etc/passwd", "/etc/passwd.orig");</p><p>That's maybe too gonzo.  It actually exports an \s-1AUTOLOAD\s0 to the current package (and uncovered a bug in Beta 3, by the way).  Maybe the usual usage should be</p><p>    use Shell qw(echo cat ps cp);</p><p>Larry Wall</p><p>Changes by Jenda@Krynicky.cz and Dave Cottle &lt;d.cottle@csc.canterbury.ac.nz&gt;.</p><p>Changes for \s-1OO\s0 syntax and bug fixes by Casey West &lt;casey@geeknest.com&gt;.</p><p>$Shell::raw and pod rewrite by Wolfgang Laun.</p><p>Rewritten to use closures rather than \*(C`eval "string"\*(C' by Adriano Ferreira.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Set::NestedGroups::Member.3pm.html"><span aria-hidden="true">&larr;</span> Set::NestedGroups::Member.3pm: Set of nested groups</a></li>
   <li class="next"><a href="Shell::Command.3pm.html">Shell::Command.3pm: Cross-platform functions emulating common shell commands <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
