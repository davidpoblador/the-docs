<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ExperimentFile: Manipulations of the experiment file format</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manipulations of the experiment file format">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ExperimentFile (3) manual">
  <meta name="twitter:description" content="Manipulations of the experiment file format">
  <meta name="twitter:image" content="https://www.carta.tech/images/libstaden-read-dev-ExperimentFile-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/ExperimentFile.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ExperimentFile (3) manual" />
  <meta property="og:description" content="Manipulations of the experiment file format" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libstaden-read-dev-ExperimentFile-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ExperimentFile<small> (3)</small></h1>
        <p class="lead">Manipulations of the experiment file format</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ExperimentFile.3.html">
      <span itemprop="name">ExperimentFile: Manipulations of the experiment file format</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libstaden-read-dev/">
      <span itemprop="name">libstaden-read-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ExperimentFile.3.html">
      <span itemprop="name">ExperimentFile: Manipulations of the experiment file format</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
#include &lt;expFileIO.h&gt;

Exp_info *exp_read_info(
	char *file);
</pre>

<pre>
Exp_info *exp_fread_info(
	FILE *fp);
</pre>

<pre>
Exp_info *exp_create_info();
</pre>

<pre>
void exp_destroy_info(
	Exp_info *e);
</pre>

<pre>
char *exp_create_range(
	char *str,
	int start,
	int end);
</pre>

<pre>
int exp_extract_range(
	char *str,
	int *start,
	int *end);
</pre>

<pre>
int exp_get_feature_index(
	char *e);
</pre>

<pre>
int exp_get_int(
	Exp_info *e,
	int id,
	int *val);
</pre>

<pre>
int exp_get_rng(
	Exp_info *e,
	int id,
	int *from,
	int *to);
</pre>

<pre>
int exp_get_str(
	Exp_info *e,
	int id,
	char *s,
	f_implicit s_l);
</pre>

<pre>
int exp_put_int(
	Exp_info *e,
	int id,
	int *val);
</pre>

<pre>
int exp_put_rng(
	Exp_info *e,
	int id,
	int *from,
	int *to);
</pre>

<pre>
int exp_put_str(
	Exp_info *e,
	int id,
	char *s,
	f_implicit s_l);
</pre>

<pre>
int exp_print_line(
	FILE *fp,
	Exp_info *e,
	int eflt,
	int i);
</pre>

<pre>
int exp_print_seq(
	FILE *fp,
	Exp_info *e,
	int eflt,
	int i);
</pre>

<pre>
void exp_print_file(
	FILE *fp,
	Exp_info *e);
</pre>

<pre>
char *opos2str(
	int2 *opos,
	int len,
	char *buf);
</pre>

<pre>
int str2opos(
	int2 *opos,
	char *buf);
</pre>

<pre>
char *conf2str(
	int1 *conf,
	int len,
	char *buf);
</pre>

<pre>
int str2conf(
	int1 *conf,
	char *buf);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>These functions manipulate Experiment Files. They include functions for reading, writing, and editing the files. The principle structure used by the routines is the <strong>Exp_info</strong> structure. This is as follows.</p>
<pre>
#define MAXIMUM_EFLT_LENGTH     4
#define MAXIMUM_EFLTS          48
#define EXP_FILE_LINE_LENGTH  128

typedef Array Exp_entries;

typedef struct {
    Array entries[MAXIMUM_EFLTS]; /* array of array of entries */
    int Nentries[MAXIMUM_EFLTS];  /* array of number of entries */
    FILE *fp;
} Exp_info;

#define NULL_Exp_info ( (Exp_info *) NULL )
</pre>
<p>For the purposes of simple and efficient coding, each line on an experiment file must be smaller than the defined EXP_FILE_LINE_LENGTH, which is 128 characters.</p><p>Many functions take an experiment file line type identifier as an argument. These functions are listed in the prototypes as taking <strong>int id</strong>. Here <strong>id</strong> should be specified using one of the macros defining in the header file. They take the form of <strong>EFLT_</strong>XX where XX is the line type. For instance, the <strong>ID</strong> line type identifier should be written as <strong>EFLT_ID</strong>.</p><p>The C functions available follow. Some FORTRAN interfaces are also available, but these are not documented. See the include file for their prototypes.</p><p><strong>exp_read_info</strong> and <strong>exp_fread_info</strong> read an experiment file into an allocated <strong>Exp_info</strong> structure. If successful, the structure pointer is return. Otherwise the null pointer is returned.</p><p><strong>exp_create_info</strong> allocates and initialises a new, blank, <strong>Exp_info</strong> structure. If successful, the structure pointer is return. Otherwise the null pointer is returned.</p><p><strong>exp_destroy_info</strong> deallocates an <strong>Exp_info</strong> structure.</p><p><strong>exp_create_range</strong> creates a string using the experiment file range format of "start..stop". This format is used by the AQ, ON, TG and TC line types. The buffer specified should be large enough to hold the string. The function returns the <strong>str</strong> pointer supplied as an argument.</p><p><strong>exp_extract_range</strong> extracts the start and end values from the string representation of a range; "start..stop". The values are stored in the integer pointers sent as arguments. If successful, the function returns 0. Otherwise -1 is returned.</p><p><strong>exp_get_feature_index</strong> converts from a string representation of an experiment file line type to the integer value. For example, <strong>exp_get_feature_index("SQ")</strong> returns the integer 22, which is the same as the <strong>EFLT_SQ</strong> definition.</p><p><strong>exp_get_int</strong> obtains the integer value held in a specific line type. The value is stored in the integer pointer <strong>val</strong>. If successful, the function returns 0. Otherwise 1 is returned.</p><p><strong>exp_get_rng</strong> obtains the range values held in a specific line type. The values are stored in the integer pointers <strong>from</strong> and <strong>to</strong>. If successful, the function returns 0. Otherwise 1 is returned.</p><p><strong>exp_get_str</strong> obtains the string value held in a specific line type. The value is stored in the string <strong>s</strong>. At most <strong>s_l</strong> characters are copied. If successful, the function returns 0. Otherwise 1 is returned.</p><p><strong>exp_put_int</strong> writes the integer pointed to by <strong>val</strong> to the specified line type. If successful, the function returns 0. Otherwise 1 is returned.</p><p><strong>exp_put_rng</strong> writes the range pointed to by <strong>from</strong> and <strong>to</strong> to the specified line type. If successful, the function returns 0. Otherwise 1 is returned.</p><p><strong>exp_put_str</strong> writes the string <strong>s</strong> of length <strong>s_l</strong> to the specified line type. If successful, the function returns 0. Otherwise 1 is returned.</p><p><strong>exp_print_line</strong> outputs all entries of the specified type to the specified file pointer.</p><p><strong>exp_print_seq</strong></p><p><strong>exp_print_file</strong> outputs all entries of all line types to the specified file pointer.</p><p><strong>opos2str</strong> converts an array of original positions held in <strong>opos</strong> with <strong>len</strong> elements to a string suitable for use in the ON line type. The <strong>buf</strong> should be large enough to hold the string, which in the worst case will be 4 * sequence length. Returns <strong>buf</strong>.</p><p><strong>str2opos</strong> converts the experiment file original position string held in <strong>buf</strong> to an array of original positions to be stored in <strong>opos</strong>. <strong>opos</strong> must be large enough to hold the data, hence it should be of the same length as the sequence. Returns the number of elements written to the <strong>opos</strong> array.</p><p><strong>conf2str</strong> converts an array of confidence values helf in <strong>conf\dR with </strong><strong>len</strong> elements to a string suitable for use in the AV line type. The <strong>buf</strong> should be large enough to hold the string, which in the worst case will be 4 * sequence length. Returns <strong>buf</strong>.</p><p><strong>str2conf</strong> convers the experiment file confidence values string held in <strong>buf</strong> to an array of confidence values to be stored in <strong>conf</strong>. <strong>conf</strong> must be large enough to hold the data, hence it should be of the same length as the sequence. Returns the number of elements written to the <strong>conf</strong> array.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ExperimentFile&hellip;</h2>
        <div class="sectioncontent">
<p><strong>ExperimentFile</strong>(4)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Error.3.html"><span aria-hidden="true">&larr;</span> Error.3: Retrieve error codes</a></li>
   <li class="next"><a href="Extract.3.html">Extract.3: Extract one field from a rectangular region of a volume <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
