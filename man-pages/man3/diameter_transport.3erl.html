<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>diameter_transport: Diameter transport interface.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Diameter transport interface.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="diameter_transport (3erl) manual">
  <meta name="twitter:description" content="Diameter transport interface.">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-diameter_transport-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/diameter_transport.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="diameter_transport (3erl) manual" />
  <meta property="og:description" content="Diameter transport interface." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-diameter_transport-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">diameter_transport<small> (3erl)</small></h1>
        <p class="lead">Diameter transport interface.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/diameter_transport.3erl.html">
      <span itemprop="name">diameter_transport: Diameter transport interface.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/diameter_transport.3erl.html">
      <span itemprop="name">diameter_transport: Diameter transport interface.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A module specified as a <em>transport_module</em> to <strong>diameter:add_transport/2</strong> must implement the interface documented here. The interface consists of a function with which diameter starts a transport process and a message interface with which the transport process communicates with the process that starts it (aka its parent).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATA TYPES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>message() = binary() | </em><strong>diameter_codec:packet()</strong>: A Diameter message as passed over the transport interface.</p><p>For an inbound message from a transport process, a <strong>diameter_codec:packet()</strong> must contain the received message in its <em>bin</em> field. In the case of an inbound request, any value set in the <em>transport_data</em> field will passed back to the transport module in the corresponding answer message, unless the sender supplies another value.</p><p>For an outbound message to a transport process, a <strong>diameter_codec:packet()</strong> has a value other than <em>undefined</em> in its <em>transport_data</em> field and has the binary() to send in its <em>bin</em> field.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> Mod:start({Type, Ref}, Svc, Config) -&gt; {ok, Pid} | {ok, Pid, LAddrs} | {error, Reason}</p><p>Types:</p><p>Type = connect | accept</p><p>Ref = <strong>diameter:transport_ref()</strong></p><p>Svc = #diameter_service{}</p><p>Config = term()</p><p>Pid = pid()</p><p>LAddrs = [<strong>inet:ip_address()</strong>]</p><p>Reason = term()</p><p>Start a transport process. Called by diameter as a consequence of a call to <strong>diameter:add_transport/2</strong> in order to establish or accept a transport connection respectively. A transport process maintains a connection with a single remote peer.</p><p><em>Type</em> indicates whether the transport process in question is being started for a connecting (<em>Type=connect</em>) or listening (<em>Type=accept</em>) transport. In the latter case, transport processes are started as required to accept connections from multiple peers.</p><p>Ref is the value that was returned from the call to <strong>diameter:add_transport/2</strong> that has lead to starting of a transport process.</p><p><em>Svc</em> contains capabilities passed to <strong>diameter:start_service/2</strong> and <strong>diameter:add_transport/2</strong>, values passed to the latter overriding those passed to the former.</p><p><em>Config</em> is as passed in <em>transport_config</em> tuple in the <strong>diameter:transport_opt()</strong> list passed to <strong>diameter:add_transport/2</strong>.</p><p>The start function should use the <em>Host-IP-Address</em> list in <em>Svc</em> and/or <em>Config</em> to select and return an appropriate list of local IP addresses. In the connecting case, the local address list can instead be communicated in a <em>connected</em> message (see <strong>MESSAGES</strong> below) following connection establishment. In either case, the local address list is used to populate <em>Host-IP-Address</em> AVPs in outgoing capabilities exchange messages if <em>Host-IP-Address</em> is unspecified.</p><p>A transport process must implement the message interface documented below. It should retain the pid of its parent, monitor the parent and terminate if it dies. It should not link to the parent. It should exit if its transport connection with its peer is lost.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MESSAGES</h2>
        <div class="sectioncontent">
<p>All messages sent over the transport interface are of the form <em>{diameter, term()}</em>.</p><p>A transport process can expect messages of the following types from its parent.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{diameter, {send, </em><strong>message()</strong>}}: An outbound Diameter message.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{diameter, {close, Pid}}</em>: A request to terminate the transport process after having received DPA in response to DPR. The transport process should exit. <em>Pid</em> is the pid() of the parent process.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{diameter, {tls, Ref, Type, Bool}}</em>: Indication of whether or not capabilities exchange has selected inband security using TLS. <em>Ref</em> is a reference() that must be included in the <em>{diameter, {tls, Ref}}</em> reply message to the transport's parent process (see below). <em>Type</em> is either <em>connect</em> or <em>accept</em> depending on whether the process has been started for a connecting or listening transport respectively. <em>Bool</em> is a boolean() indicating whether or not the transport connection should be upgraded to TLS.</p><p>If TLS is requested (<em>Bool=true</em>) then a connecting process should initiate a TLS handshake with the peer and an accepting process should prepare to accept a handshake. A successful handshake should be followed by a <em>{diameter, {tls, Ref}}</em> message to the parent process. A failed handshake should cause the process to exit.</p><p>This message is only sent to a transport process over whose <em>Inband-Security-Id</em> configuration has indicated support for TLS.</p>
  </dd>

</dl>
<p>A transport process should send messages of the following types to its parent.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{diameter, {self(), connected}}</em>: Inform the parent that the transport process with <em>Type=accept</em> has established a connection with the peer. Not sent if the transport process has <em>Type=connect</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{diameter, {self(), connected, Remote}}</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{diameter, {self(), connected, Remote, [LocalAddr]}}</em>: Inform the parent that the transport process with <em>Type=connect</em> has established a connection with a peer. Not sent if the transport process has <em>Type=accept</em>. <em>Remote</em> is an arbitrary term that uniquely identifies the remote endpoint to which the transport has connected. A <em>LocalAddr</em> list has the same semantics as one returned from <strong>start/3</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{diameter, {recv, </em><strong>message()</strong>}}: An inbound Diameter message.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{diameter, {tls, Ref}}</em>: Acknowledgment of a successful TLS handshake. <em>Ref</em> is the reference() received in the <em>{diameter, {tls, Ref, Type, Bool}}</em> message in response to which the reply is sent. A transport must exit if a handshake is not successful.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO diameter_transport&hellip;</h2>
        <div class="sectioncontent">
<p><strong>diameter_tcp(3erl)</strong>, <strong>diameter_sctp(3erl)</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="diameter_tcp.3erl.html"><span aria-hidden="true">&larr;</span> diameter_tcp.3erl: Diameter transport over tcp.</a></li>
   <li class="next"><a href="dict.3erl.html">dict.3erl: Key-value dictionary <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
