<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>afnix-csm: Standard cloud session management module</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Standard cloud session management module">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="afnix-csm (3) manual">
  <meta name="twitter:description" content="Standard cloud session management module">
  <meta name="twitter:image" content="https://www.carta.tech/images/afnix-afnix-csm-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/afnix-csm.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="afnix-csm (3) manual" />
  <meta property="og:description" content="Standard cloud session management module" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/afnix-afnix-csm-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">afnix-csm<small> (3)</small></h1>
        <p class="lead">Standard cloud session management module</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/afnix-csm.3.html">
      <span itemprop="name">afnix-csm: Standard cloud session management module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/afnix/">
      <span itemprop="name">afnix</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/afnix-csm.3.html">
      <span itemprop="name">afnix-csm: Standard cloud session management module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">STANDARD CLOUD SESSION MANAGEMENT MODULE</h2>
        <div class="sectioncontent">
<p>The Standard Cloud Session Management module is an original implementation of various objects dedicated to the management of events eventually associated with a session controller. In its classical way, the objects can be used to manage an agenda, schedule events and perform associated actions. In a more elaborated way, a session group can be used to manage different group of objects bound to one or several users or groups.</p><p><strong>General concepts</strong></p><p>The afnix-csm provides the support for manipulating cloud session data. Information data are generally personal information that are used to manage time and constraints or global session information bound to one or several users. In the time domain, the session management is related to the concept of time slot and agenda.</p><p><em>Slot</em></p><p>The concept of slot is central in the csm module. A slot is a combination of time and duration. A slot is allocated by an appointer to indicate the next available slot. For an agenda, the concept of slot can be derived to describe an appointment.</p><p><em>Appointer</em></p><p>An appointer is a slot generator. The appointer can be designed to respond automatically with respect to a certain number of rules. Common rules found in an appointer are closed days like week-end and time allocation period.</p><p><em>Assistant</em></p><p>An assistant is a combination of csm object like appointers. An assistant can be used for example, to manage several appointers.</p><p><strong>Appointer operations</strong></p><p>The Appointer class is designed to allocate slots with respect to a certain duration or from a certain time with a duration. The appointer operates with rules which describe the operating calendar and daily schedule. such rules are designed to mimic real-life situations like week-end blocked days or Christmas vacation day.</p><p><em>Slot allocation</em></p><p>A slot is allocated with the get-slot method. This method is common to the Appointer and Assistant classes.</p>
<pre>
# allocate a 1 hour slot
const slot (appt:get-slot 3600)
</pre>
<p>In the example above, a 1 hour slot is allocated at the current appointer time. Note that the time and duration are always given in seconds. If the slot needs to be allocated starting at a certain time, the 2 arguments form can be used.</p>
<pre>
# allocate a 1 hour slot starting at 2AM
const slot (appt:get-slot 7200 3600)
</pre>
<p>In the presence of an Assistant object the get-slot is the same but selects the appropriate appointer with the help of an internal index which rotated after each call. This method permits an equal distribution for all appointers within an assistant.</p><p><em>Appointer rules</em></p><p>There are basically, two types of appointer's rules. The first type of rule is used for blocking a day as a whole. The second type of rule is designed to describe valid periods of allocation time. The first type of rules is called the and rules since all rules must be valid in order to allocate a slot at the requested time. The second type is a called the or rules since only one rule needs to be valid in order to allocate a slot.</p>
<pre>
# create a reference appointer
const appt (afnix:csm:Appointer)
# add a saturday and sunday blocked day rule
appt:set-blocked-day 6
appt:set-blocked-day 0
# set the special days
appt:set-special-day  1  1
appt:set-special-day 12 25
</pre>
<p>The example above defines an appointer object. The first 2 rules defines Saturday and Sunday as blocked days. The other 2 rules, defines Jan 1st and Dec 25th as special days. No slot can be allocated in a blocked or special day.</p>
<pre>
# set a valid block time between 8AM to 12AM
const ambt (* 3600 8)
const amet (* 3600 12)
const pmbt (* 3600 14)
# set a valid block time between 2PM to 6PM
const pmet (* 3600 18)
appt:set-valid-block-time ambt amet
appt:set-valid-block-time pmbt pmet
</pre>
<p>the above example defines two valid periods for allocating time. The first period runs from 8AM to 12AM and the second one runs from 2PM to 6PM. Note that the time is also expressed in second. The time arguments are always rounded to the maximum number of seconds per day.</p><p><strong>Assistant operations</strong></p><p>An assistant object is build by adding object to it. In general, a reference object is created, and several of them are added to the assistant by cloning the reference object.</p><p><em>Assistant integration</em></p><p>Once an assistant object has been created, the object can be added by cloning.</p>
<pre>
# create an assistant
const name "Mr Smith"
const info "The super assistant"
const asst (afnix:csm:Assistant name info)
# create a reference appointer
const appt (afnix:csm:Appointer)
# add 2 appointers by cloning
asst:add-appointer (appt:clone)
asst:add-appointer (appt:clone)
</pre>
<p>In the case of an Appointer object, the appointer is cloned with all its rules attached to it. This method is particularly useful when an assistant needs to be setup for several person that shares the same calendar.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STANDARD CLOUD SESSION MANAGEMENT REFERENCE</h2>
        <div class="sectioncontent">
<p><strong>Slot</strong></p><p>The Slot class is a base class designed to handle a basic time slot event. The class is defined with a date and a duration. The slot class is primarily used to build an agenda.</p><p><em>Predicate</em></p><p>slot-p</p><p><em>Inheritance</em></p><p>Object</p><p><em>Constructors</em></p><p><strong>Slot (none)</strong></p><p>The Slot constructor creates an empty slot initialized at time 0 with duration 0.</p><p><strong>Slot (Integer Integer)</strong></p><p>The Slot constructor creates a slot with a time and duration. The first argument is the slot time. The second argument is the slot duration.</p><p><em>Methods</em></p><p><strong>reset -&gt; none (none)</strong></p><p>The reset method reset the slot to time 0 with duration 0.</p><p><strong>set-time -&gt; none (Integer)</strong></p><p>The set-time method sets the slot time.</p><p><strong>get-time -&gt; Integer (none)</strong></p><p>The get-time method returns the slot time.</p><p><strong>set-duration -&gt; none (Integer)</strong></p><p>The set-duration method sets the slot duration.</p><p><strong>get-duration -&gt; Integer (none)</strong></p><p>The get-duration method returns the slot duration.</p><p><strong>set-slot -&gt; none (Integer Integer)</strong></p><p>The set-slot method sets the slot time and duration at once. The first argument is the slot time. The second argument is the slot duration.</p><p><strong>Appointer</strong></p><p>The Appointer class is a class design to allocate time slot in a calendar in order to fill an agenda. The appointer do not store the slot but rather acts as a generator. the appointer algorithm operates with rules that permits to allocate the next available slot. The basic rules permits to define regular blocked days and special blocked days. Another rule permits to define an operating time period. Multiple time periods are allowed. A maximum daily slots rule is also available.</p><p><em>Predicate</em></p><p>appointer-p</p><p><em>Inheritance</em></p><p>Object</p><p><em>Constructors</em></p><p><strong>Appointer (none)</strong></p><p>The Appointer constructor creates a default appointer initialized at time 0. There is no rule installed by the constructor.</p><p><strong>Appointer (Integer)</strong></p><p>The Appointer constructor creates an appointer with an initial time. The time is set as he starting time to allocate slots. There is no rule installed by the constructor.</p><p><em>Methods</em></p><p><strong>reset -&gt; none (none)</strong></p><p>The reset method reset the appointer slot number and daily slot counter. The rules are not touched by this method.</p><p><strong>set-time -&gt; none (Integer)</strong></p><p>The set-time method set the appointer time. During the next operation, the newly allocated slots have their time starting at least at this time.</p><p><strong>get-time -&gt; Integer (none)</strong></p><p>The get-time method returns the current appointer time.</p><p><strong>set-date -&gt; none (Date)</strong></p><p>The set-date method set the appointer time by converting the date argument to a time.</p><p><strong>get-date -&gt; Integer (none)</strong></p><p>The get-date method returns the current appointer date.</p><p><strong>get-slot -&gt; Slot (Integer|Integer Integer)</strong></p><p>The get-slot method returns a new slot allocated by the appointer. with one argument the argument is taken as the slot duration. With 2 arguments, the first arguments is the requested slot time and the second argument is the slot duration. The slot allocation algorithm operates by finding the appropriate day and time which satisfies the appointer rules. If the slot cannot be found within one week, the allocation is assumed to have failed.</p><p><strong>get-slot-number -&gt; Integer (none)</strong></p><p>The get-slot-number method returns the total number of slots allocated by the appointer.</p><p><strong>set-blocked-day -&gt; none (Integer)</strong></p><p>The set-blocked-day method sets a regular weekly block day. The method uses the week day index as its argument. Sunday has index 0 and Saturday has index 6. No slot is allocated in a blocked day.</p><p><strong>set-special-day -&gt; none (Integer Integer)</strong></p><p>The set-special-day method sets a special year day. The method uses the year month and the month day index as its arguments. The first argument is the year month which must be in the range of 1 to 12. The second argument is the month day which must be in the range of 1 to 31. No slot is allocated in a special day.</p><p><strong>set-maximum-slots -&gt; none (Integer)</strong></p><p>The set-maximum-slots method sets a daily maximum slots number. When the daily maximum slot number is reached, the slot allocation proceed to the next day.</p><p><strong>set-valid-block-time -&gt; none (Integer Integer)</strong></p><p>The set-valid-block-time method sets a valid block time in which the slot can be allocated. By default, a slot can be allocated anytime during the day. When this rule is set, at least once, the slot is allocated in this block. Multiple valid block time can be defined. The first argument is the valid block time lower bound expressed in seconds from 12PM. The second argument is the valid block time upper bound. All time are expressed in seconds and rounded to a day second which is 84600 seconds in 24 hours. For example, a valid block time is from 8AM to 12AM. Another would be from 2PM to 6PM.</p><p><strong>Assistant</strong></p><p>The Assistant class class is a generic class designed to hold various csm component and manage them like an assistant will do. For example, the class can store several Appointer objects and distribute slot for all of them.</p><p><em>Predicate</em></p><p>assistant-p</p><p><em>Inheritance</em></p><p>Object</p><p><em>Constructors</em></p><p><strong>Assistant (none)</strong></p><p>The Assistant constructor creates a default assistant.</p><p><strong>Assistant (String)</strong></p><p>The Assistant constructor creates a default assistant by name.</p><p><strong>Assistant (String String)</strong></p><p>The Assistant constructor creates a default assistant by name and information. The first argument is the assistant name. the second argument is the assistant information string.</p><p><em>Methods</em></p><p><strong>reset -&gt; none (none)</strong></p><p>The reset method reset the assistant by. All objects attached to the assistant are reset by this method.</p><p><strong>get-name -&gt; String (none)</strong></p><p>The get-name method returns the assistant name.</p><p><strong>get-info -&gt; String (none)</strong></p><p>The get-info method returns the assistant information string.</p><p><strong>pushback -&gt; none (Slot)</strong></p><p>The pushback method pushbaks a slot in the appointer list. The assistant manages internally an index which is used to select the appointer where the slot is pushed-back.</p><p><strong>get-slot -&gt; Slot (Integer|Integer Integer)</strong></p><p>The get-slot method returns he next available slot from the appointer list. The assistant manages internally an index which is used to select the appointer from which the slot is obtained. With one argument, the method operates with a slot duration. with 2 arguments, the method operates by time and duration. The time is the minimum time for which the slot is allocated. If the slot cannot be allocated, an exception is raised.</p><p><strong>add-appointer -&gt; none (Appointer)</strong></p><p>The add-appointer method adds an appointer object to the assistant.</p><p><strong>get-appointer -&gt; Appointer (Integer)</strong></p><p>The get-appointer method returns an appointer object by index. If the appointer object cannot be found, an exception is raised.</p><p><strong>length-appointer -&gt; Integer (none)</strong></p><p>The length-appointer method returns the number of appointers attached to the assistant.</p><p><strong>get-slot-number -&gt; Integer (none)</strong></p><p>The get-slot-number method returns the total number of slot allocated by the assistant at the time of the call. The number is computed by summing all slot numbers for each appointers. attached to the assistant.</p><p><strong>get-appointer-time -&gt; Integer (none)</strong></p><p>The get-appointer-time method returns the average appointer time for the attached appointers. At the time of the call, each appointer has a time which corresponds to the next slot available time. The average time for all appointers is the result of this method which corresponds to the average time of the next available slot.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="af_version.3.html"><span aria-hidden="true">&larr;</span> af_version.3: Version control in atfs</a></li>
   <li class="next"><a href="afnix-gfx.3.html">afnix-gfx.3: Standard graph module <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
