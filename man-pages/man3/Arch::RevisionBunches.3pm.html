<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arch::RevisionBunches: Manage bunches of related revisions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manage bunches of related revisions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Arch::RevisionBunches (3pm) manual">
  <meta name="twitter:description" content="Manage bunches of related revisions">
  <meta name="twitter:image" content="https://www.carta.tech/images/libarch-perl-Arch::RevisionBunches-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Arch::RevisionBunches.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Arch::RevisionBunches (3pm) manual" />
  <meta property="og:description" content="Manage bunches of related revisions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libarch-perl-Arch::RevisionBunches-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Arch::RevisionBunches<small> (3pm)</small></h1>
        <p class="lead">Manage bunches of related revisions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Arch::RevisionBunches.3pm.html">
      <span itemprop="name">Arch::RevisionBunches: Manage bunches of related revisions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libarch-perl/">
      <span itemprop="name">libarch-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Arch::RevisionBunches.3pm.html">
      <span itemprop="name">Arch::RevisionBunches: Manage bunches of related revisions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Arch::RevisionBunches;
    use Arch::Tree;

    my $rb = Arch::RevisionBunches-&gt;new;
    my $tree = Arch::Tree-&gt;new(".", own_logs =&gt; 1);
    $rb-&gt;add_revision_descs($tree-&gt;get_history_revision_descs);
    $rb-&gt;rebunch(25);  # the default is 50
    foreach my $bunch ($rb-&gt;get) {
        print "$bunch-&gt;{version}&#92;n";
        print "    $_-&gt;{name}&#92;t$_-&gt;{summary}&#92;n"
            foreach @{$bunch-&gt;{revision_descs}};
    }
    foreach my $bunch ($rb-&gt;reverse_revision_descs-&gt;rebunch(30)) {
        print $bunch-&gt;{name1};
        print " .. $bunch-&gt;{name2}" if $bunch-&gt;{name2};
        print " ($bunch-&gt;{daysago1}";
        print " .. $bunch-&gt;{daysago2}" if $bunch-&gt;{name2};
        print " days ago)&#92;n";
    }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This class helps front-ends to group revisions. Such grouping is essential when, for example, the version to be shown contains thousands of revisions. The front-end may decide to show expandable bunches of 100 revisions each.</p><p>There is a support for revision descriptions (summary, date, creator, email, and in some cases associated the file name and/or the associated version). There is a constraint by convention, one bunch may only contain revisions of the same version, and the ones associated with the same file if applicable. It is possible to define an order of versions. It is possible to recreate bunches (rebunch) using a different number of revisions. The constraint defines the actual number of revisions in different bunches, it is not guaranteed to be the same.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>The following methods are available:</p><p><strong>new</strong>, <strong>init</strong>, <strong>add_revision_descs</strong>, <strong>versions</strong>, <strong>rebunch</strong>, <strong>get</strong>, <strong>clear</strong>, <strong>reverse_revision_descs</strong>, <strong>versions</strong>, <strong>filepaths</strong>. Construct Arch::RevisionBunches object. The <em></em><strong>%args</strong><em></em> are passed to <strong>init</strong> method. The <em></em><strong>%args</strong><em></em> keys may be <em>bunch_size</em> (to use as the default bunch size instead of 50), <em>max_sumlen</em> (maximal summary length to keep including trailing ellipsis, must be greater than 5), <em>version</em> (if set, then all revisions are assumed to be of one version, otherwise multiple versions are assumed), <em>final_revision</em> and <em>final_filepath</em> (the final revision and filepath for which the revision bunches are constructed). These last two <em></em><strong>%args</strong><em></em> keys are not really used yet. Add revision descriptions that is arrayref of hashes. See other classes that return such revision descriptions. If the <em></em><strong>%constant_fields</strong><em></em> is given, then add these to all revision descriptions (rarely needed). Return the object, this enables chaining of <strong>get</strong> or <strong>rebunch</strong> method call.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>rebunch</strong> [<em>bunch_size</em>]
  </dt>
  <dd>
    <p>Group newly added revisions if no <em>bunch_size</em> is specified. Otherwise regroup all revisions using a given <em>bunch_size</em>. The default bunch size may be specified in the constructor. Return the same <strong>get</strong> does.</p>
  </dd>
  <dt>
    <strong>get</strong>
  </dt>
  <dd>
    <p>Return bunches that is arrayref in scalar context, array in list context. Each bunch is hashref with keys:     revision_descs     name1 daysago1 time1 tz1     name2 daysago2 time2 tz2     size     num_creators     num_other_creators     main_creator     main_email     creator     name     date     summary and optionally \*(L"version\*(R", \*(L"is_missing\*(R" and \*(L"filepath\*(R" if applicable. This method implicitly calls <strong>rebunch</strong> with no parameter if new revision descriptions were added that are not bunched yet.</p>
  </dd>
  <dt>
    <strong>clear</strong>
  </dt>
  <dd>
    <p>Clear all bunches and their revision descriptions.</p>
  </dd>
  <dt>
    <strong>reverse_revision_descs</strong>
  </dt>
  <dd>
    <p>Effectivelly empty all revision descriptions (both old and new) and readd them in the reverse order. Return the object, this enables chaining of <strong>get</strong> or <strong>rebunch</strong> method call.</p>
  </dd>
  <dt>
    <strong>versions</strong>
  </dt>
  <dd>
    <p>Return distinct versions participated in all bunches. Return empty arrayref if not applicable, i.e. if <em>version</em> is given in the constructor.</p>
  </dd>
  <dt>
    <strong>filepaths</strong>
  </dt>
  <dd>
    <p>Return distinct filepaths participated in all bunches. Return empty arrayref if not applicable, i.e. if revision descriptions have no <em>filepath</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Waiting for your reports.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Mikhael Goikhman (migo@homemail.com\*(--Perl-GPL/arch-perl\*(--devel).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Arch::RevisionBunches&hellip;</h2>
        <div class="sectioncontent">
<p>For more information, see Arch::Tree, Arch::Log, Arch::Session, Arch::Library.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Arch::Registry.3pm.html"><span aria-hidden="true">&larr;</span> Arch::Registry.3pm: Manage registered archives, search archives on the web</a></li>
   <li class="next"><a href="Arch::Run.3pm.html">Arch::Run.3pm: Run subprocesses and capture output <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
