<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MIDI::Score: Midi scores</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Midi scores">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="MIDI::Score (3pm) manual">
  <meta name="twitter:description" content="Midi scores">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmidi-perl-MIDI::Score-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/MIDI::Score.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MIDI::Score (3pm) manual" />
  <meta property="og:description" content="Midi scores" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmidi-perl-MIDI::Score-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">MIDI::Score<small> (3pm)</small></h1>
        <p class="lead">Midi scores</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/MIDI::Score.3pm.html">
      <span itemprop="name">MIDI::Score: Midi scores</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmidi-perl/">
      <span itemprop="name">libmidi-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/MIDI::Score.3pm.html">
      <span itemprop="name">MIDI::Score: Midi scores</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  # it's a long story; see below
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module provides functions to do with with \s-1MIDI\s0 scores. It is used as the basis for all the functions in MIDI::Simple. (Incidentally, MIDI::Opus's <em>draw()</em> method also uses some of the functions in here.)</p><p>Whereas the events in a \s-1MIDI\s0 event structure are items whose timing is expressed in delta-times, the timing of items in a score is expressed as an absolute number of ticks from the track's start time. Moreover, pairs of 'note_on' and 'note_off' events in an event structure are abstracted into a single 'note' item in a score structure.</p><p>'note' takes the following form:</p><p> ('note_on', I&lt;start_time&gt;, I&lt;duration&gt;, I&lt;channel&gt;, I&lt;note&gt;, I&lt;velocity&gt;)</p><p>The problem that score structures are meant to solve is that 1) people definitely don't think in delta-times \*(-- they think in absolute times or in structures based on that (like 'time from start of measure'); 2) people think in notes, not note_on and note_off events.</p><p>So, given this event structure:</p><p> ['text_event', 0, 'www.ely.anglican.org/parishes/camgsm/chimes.html'],  ['text_event', 0, 'Lord through this hour/ be Thou our guide'],  ['text_event', 0, 'so, by Thy power/ no foot shall slide'],  ['patch_change', 0, 1, 8],  ['note_on', 0, 1, 25, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 29, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 27, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 20, 96],  ['note_off', 192, 0, 1, 0],  ['note_on', 0, 1, 25, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 27, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 29, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 25, 96],  ['note_off', 192, 0, 1, 0],  ['note_on', 0, 1, 29, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 25, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 27, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 20, 96],  ['note_off', 192, 0, 1, 0],  ['note_on', 0, 1, 20, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 27, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 29, 96],  ['note_off', 96, 0, 1, 0],  ['note_on', 0, 1, 25, 96],  ['note_off', 192, 0, 1, 0],</p><p>here is the corresponding score sctructure:</p><p> ['text_event', 0, 'www.ely.anglican.org/parishes/camgsm/chimes.html'],  ['text_event', 0, 'Lord through this hour/ be Thou our guide'],  ['text_event', 0, 'so, by Thy power/ no foot shall slide'],  ['patch_change', 0, 1, 8],  ['note', 0, 96, 1, 25, 96],  ['note', 96, 96, 1, 29, 96],  ['note', 192, 96, 1, 27, 96],  ['note', 288, 192, 1, 20, 96],  ['note', 480, 96, 1, 25, 96],  ['note', 576, 96, 1, 27, 96],  ['note', 672, 96, 1, 29, 96],  ['note', 768, 192, 1, 25, 96],  ['note', 960, 96, 1, 29, 96],  ['note', 1056, 96, 1, 25, 96],  ['note', 1152, 96, 1, 27, 96],  ['note', 1248, 192, 1, 20, 96],  ['note', 1440, 96, 1, 20, 96],  ['note', 1536, 96, 1, 27, 96],  ['note', 1632, 96, 1, 29, 96],  ['note', 1728, 192, 1, 25, 96]</p><p>Note also that scores aren't crucially ordered.  So this:</p><p> ['note', 768, 192, 1, 25, 96],  ['note', 960, 96, 1, 29, 96],  ['note', 1056, 96, 1, 25, 96],</p><p>means the same thing as:</p><p> ['note', 960, 96, 1, 29, 96],  ['note', 768, 192, 1, 25, 96],  ['note', 1056, 96, 1, 25, 96],</p><p>The only exception to this is in the case of things like:</p><p> ['patch_change', 200,     2, 15],  ['note',         200, 96, 2, 25, 96],</p><p>where two (or more) score items happen <em>at the same time</em> and where one affects the meaning of the other.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WHAT CAN BE IN A SCORE</h2>
        <div class="sectioncontent">
<p>Besides the new score structure item \*(C`note\*(C' (covered above), the possible contents of a score structure can be summarized thus: Whatever can appear in an event structure can appear in a score structure, save that its second parameter denotes not a delta-time in ticks, but instead denotes the absolute number of ticks from the start of the track.</p><p>To avoid the long periphrase \*(L"items in a score structure\*(R", I will occasionally refer to items in a score structure as \*(L"notes\*(R", whether or not they are actually \*(C`note\*(C' commands.  This leaves \*(L"event\*(R" to unambiguously denote items in an event structure.</p><p>These, below, are all the items that can appear in a score. This is basically just a repetition of the table in MIDI::Event, with starttime substituting for dtime \*(-- so refer to MIDI::Event for an explanation of what the data types (like \*(L"velocity\*(R" or \*(L"pitch_wheel\*(R"). As far as order, the first items are generally the most important:</p>
<dl class='dl-vertical'>
  <dt>
    ('note', <em>starttime</em>, <em>duration</em>, <em>channel</em>, <em>note</em>, <em>velocity</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('key_after_touch', <em>starttime</em>, <em>channel</em>, <em>note</em>, <em>velocity</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('control_change', <em>starttime</em>, <em>channel</em>, <em>controller(0-127)</em>, <em>value(0-127)</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('patch_change', <em>starttime</em>, <em>channel</em>, <em>patch</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('channel_after_touch', <em>starttime</em>, <em>channel</em>, <em>velocity</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('pitch_wheel_change', <em>starttime</em>, <em>channel</em>, <em>pitch_wheel</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('set_sequence_number', <em>starttime</em>, <em>sequence</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('copyright_text_event', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('track_name', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('instrument_name', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('lyric', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('marker', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('cue_point', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event_08', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event_09', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event_0a', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event_0b', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event_0c', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event_0d', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event_0e', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('text_event_0f', <em>starttime</em>, <em>text</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('end_track', <em>starttime</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('set_tempo', <em>starttime</em>, <em>tempo</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('smpte_offset', <em>starttime</em>, <em>hr</em>, <em>mn</em>, <em>se</em>, <em>fr</em>, <em>ff</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('time_signature', <em>starttime</em>, <em>nn</em>, <em>dd</em>, <em>cc</em>, <em>bb</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('key_signature', <em>starttime</em>, <em>sf</em>, <em>mi</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('sequencer_specific', <em>starttime</em>, <em>raw</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('raw_meta_event', <em>starttime</em>, <em>command</em>(0-255), <em>raw</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('sysex_f0', <em>starttime</em>, <em>raw</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('sysex_f7', <em>starttime</em>, <em>raw</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('song_position', <em>starttime</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('song_select', <em>starttime</em>, <em>song_number</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('tune_request', <em>starttime</em>)
  </dt>
  <dd>
    
  </dd>
  <dt>
    ('raw_data', <em>starttime</em>, <em>raw</em>)
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTIONS</h2>
        <div class="sectioncontent">
<p>This module provides these functions:</p>
<dl class='dl-vertical'>
  <dt>
    $score2_r = MIDI::Score::copy_structure($score_r)
  </dt>
  <dd>
    <p>This takes a <em>reference</em> to a score structure, and returns a <em>reference</em> to a copy of it. Example usage:           @new_score = @{ MIDI::Score::copy_structure( &#92;@old_score ) }; This takes a <em>reference</em> to a score structure, and converts it to an event structure, which it returns a <em>reference</em> to.  In list context, also returns a second value, a count of the number of ticks that structure takes to play (i.e., the end-time of the temporally last item). This takes a <em>reference</em> to a score structure, and returns a <em>reference</em> to a sorted (by time) copy of it. Example usage:           @sorted_score = @{ MIDI::Score::sort_score_r( &#92;@old_score ) }; This takes a <em>reference</em> to an event structure, converts it to a score structure, which it returns a <em>reference</em> to.  If called in list context, also returns a count of the number of ticks that structure takes to play (i.e., the end-time of the temporally last item). This takes a <em>reference</em> to a score structure, and returns a count of the number of ticks that structure takes to play (i.e., the end-time of the temporally last item). This dumps (via \*(C`print\*(C') a text representation of the contents of the event structure you pass a reference to.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 1998-2002 Sean M. Burke. All rights reserved.</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Sean M. Burke \*(C`sburke@cpan.org\*(C'</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="MIDI::Opus.3pm.html"><span aria-hidden="true">&larr;</span> MIDI::Opus.3pm: Functions and methods for midi opuses</a></li>
   <li class="next"><a href="MIDI::Simple.3pm.html">MIDI::Simple.3pm: Procedural/oop interface for midi composition <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
