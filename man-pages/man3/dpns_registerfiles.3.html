<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dpns_registerfiles: Register list of files with their corresponding replica entry</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Register list of files with their corresponding replica entry">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dpns_registerfiles (3) manual">
  <meta name="twitter:description" content="Register list of files with their corresponding replica entry">
  <meta name="twitter:image" content="https://www.carta.tech/images/libdpm-dev-dpns_registerfiles-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/dpns_registerfiles.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dpns_registerfiles (3) manual" />
  <meta property="og:description" content="Register list of files with their corresponding replica entry" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libdpm-dev-dpns_registerfiles-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dpns_registerfiles<small> (3)</small></h1>
        <p class="lead">Register list of files with their corresponding replica entry</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/dpns_registerfiles.3.html">
      <span itemprop="name">dpns_registerfiles: Register list of files with their corresponding replica entry</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libdpm-dev/">
      <span itemprop="name">libdpm-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/dpns_registerfiles.3.html">
      <span itemprop="name">dpns_registerfiles: Register list of files with their corresponding replica entry</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;sys/types.h&gt;</strong></p><p><strong>#include "dpns_api.h"</strong></p><p><strong>int dpns_registerfiles (int </strong><em>nbfiles</em><strong>,</strong> <strong>struct dpns_filereg *</strong><em>files</em><strong>,</strong> <strong>int *</strong><em>nbstatuses</em><strong>,</strong> <strong>int **</strong><em>statuses</em><strong>)</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>dpns_registerfiles</strong> registers a list of files with their corresponding replica entry. If the lfn is already registered, the guid is optional and only the replica is added (after checking that filesize and possibly checksum match). If the lfn is not registered yet, the guid is mandatory for the LFC. The lfn and the replica get registered.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>nbfiles</em></p>
  </dt>
  <dd>
    <p>specifies the number of files in the array <em>files</em>.</p>
  </dd>
  <dt>
    <p><em>files</em></p>
  </dt>
  <dd>
    <p>is a pointer to an array of dpns_filereg structures provided by the application.</p>
  </dd>

</dl>

<pre>
struct dpns_filereg {
	char		*lfn;
	char		*guid;
	mode_t		mode;
	u_signed64	size;
	char		*csumtype;
	char		*csumvalue;
	char		*server;
	char		*sfn;
};
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><em>nbstatuses</em></p>
  </dt>
  <dd>
    <p>will be set to the number of replies in the array of statuses.</p>
  </dd>
  <dt>
    <p><em>statuses</em></p>
  </dt>
  <dd>
    <p>will be set to the address of an array of integer statuses allocated by the API. The client application is responsible for freeing the array when not needed anymore. Individual statuses are 0 if the operation was successful or set to the serrno value in case of error.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>This routine returns 0 if the operation was successful or -1 if the operation failed. In the latter case, <strong>serrno</strong> is set appropriately.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>ENOENT</strong></p>
  </dt>
  <dd>
    <p>A component of <em>lfn</em> prefix does not exist or <em>lfn</em> is a null pathname.</p>
  </dd>
  <dt>
    <p><strong>E2BIG</strong></p>
  </dt>
  <dd>
    <p>Request too large (max 1 MB).</p>
  </dd>
  <dt>
    <p><strong>ENOMEM</strong></p>
  </dt>
  <dd>
    <p>Memory could not be allocated for marshalling the request or unmarshalling the reply.</p>
  </dd>
  <dt>
    <p><strong>EACCES</strong></p>
  </dt>
  <dd>
    <p>Search permission is denied on a component of the <em>lfn</em> prefix or the file does not exist and write permission on the parent directory is denied or write permission on the file itself is denied.</p>
  </dd>
  <dt>
    <p><strong>EFAULT</strong></p>
  </dt>
  <dd>
    <p><em>files</em>, <em>nbstatuses</em> or <em>statuses</em> is a NULL pointer.</p>
  </dd>
  <dt>
    <p><strong>EEXIST</strong></p>
  </dt>
  <dd>
    <p>The <em>sfn</em> exists already.</p>
  </dd>
  <dt>
    <p><strong>ENOTDIR</strong></p>
  </dt>
  <dd>
    <p>A component of <em>lfn</em> prefix is not a directory.</p>
  </dd>
  <dt>
    <p><strong>EISDIR</strong></p>
  </dt>
  <dd>
    <p>The <em>lfn</em> exists already and is not a regular file.</p>
  </dd>
  <dt>
    <p><strong>EINVAL</strong></p>
  </dt>
  <dd>
    <p><em>nbfiles</em> is not strictly positive, the length of one of the <em>guids</em> exceeds <strong>CA_MAXGUIDLEN</strong> or the length of <em>server</em> exceeds <strong>CA_MAXHOSTNAMELEN</strong> or lfn and guid are both given and they point at a different file.</p>
  </dd>
  <dt>
    <p><strong>ENOSPC</strong></p>
  </dt>
  <dd>
    <p>The name server database is full.</p>
  </dd>
  <dt>
    <p><strong>ENAMETOOLONG</strong></p>
  </dt>
  <dd>
    <p>The length of <em>lfn</em> exceeds <strong>CA_MAXPATHLEN</strong> or the length of an <em>lfn</em> component exceeds <strong>CA_MAXNAMELEN</strong> or the length of <em>sfn</em> exceeds <strong>CA_MAXSFNLEN</strong>.</p>
  </dd>
  <dt>
    <p><strong>SENOSSERV</strong></p>
  </dt>
  <dd>
    <p>Service unknown.</p>
  </dd>
  <dt>
    <p><strong>SEINTERNAL</strong></p>
  </dt>
  <dd>
    <p>Database error.</p>
  </dd>
  <dt>
    <p><strong>SECOMERR</strong></p>
  </dt>
  <dd>
    <p>Communication error.</p>
  </dd>
  <dt>
    <p><strong>ENSNACT</strong></p>
  </dt>
  <dd>
    <p>Name server is not running or is being shutdown.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dpns_registerfiles&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man4/Castor_limits.4.html"><strong>Castor_limits</strong>(4)</a></strong>, <a href="../man3/dpns_addreplica.3.html"><strong>dpns_addreplica</strong>(3)</a></strong>, <a href="../man3/dpns_creat.3.html"><strong>dpns_creat</strong>(3)</a></strong>, <a href="../man3/dpns_setfsize.3.html"><strong>dpns_setfsize</strong>(3)</a></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>LCG Grid Deployment</strong> Team</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dpns_readlink.3.html"><span aria-hidden="true">&larr;</span> dpns_readlink.3: Read value of a symbolic link in the dpns name server</a></li>
   <li class="next"><a href="dpns_rename.3.html">dpns_rename.3: Rename a dpns file or directory in the name server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
