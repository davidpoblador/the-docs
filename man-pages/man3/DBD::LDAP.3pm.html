<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DBD::LDAP: </title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="DBD::LDAP (3pm) manual">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="https://www.carta.tech/images/libdbd-ldap-perl-DBD::LDAP-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/DBD::LDAP.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="DBD::LDAP (3pm) manual" />
  <meta property="og:description" content="" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libdbd-ldap-perl-DBD::LDAP-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">DBD::LDAP<small> (3pm)</small></h1>
        <p class="lead"></p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/DBD::LDAP.3pm.html">
      <span itemprop="name">DBD::LDAP: </span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libdbd-ldap-perl/">
      <span itemprop="name">libdbd-ldap-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/DBD::LDAP.3pm.html">
      <span itemprop="name">DBD::LDAP: </span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>    This module is Copyright (C) 2000-2009 by</p><p>                Jim Turner</p><p>        Email:  turnerjw784 .att. yahoo.com</p><p>    All rights reserved Without Prejudice.</p><p>    You may distribute this module under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PREREQUISITES</h2>
        <div class="sectioncontent">
<p>        Convert::ANS1   (required by Net::LDAP)         Net::LDAP         DBI         - an LDAP database to connect to.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>     use DBI;      $dbh = DBI-&gt;connect("DBI:LDAP:ldapdb",&apos;user&apos;,&apos;password&apos;)  #USER LOGIN.          or die "Cannot connect as user: " . $DBI::errstr;</p><p>     $dbh = DBI-&gt;connect("DBI:LDAP:ldapdb")  #ANONYMOUS LOGIN (Read-only).          or die "Cannot connect as guest (readonly): " . $DBI::errstr;</p><p>     $sth = $dbh-&gt;prepare("select * from people where (cn like &apos;Smith%&apos;)")          or die "Cannot prepare: " . $dbh-&gt;errstr();      $sth-&gt;execute() or die "Cannot execute: " . $sth-&gt;errstr();          while ((@results) = $sth-&gt;fetchrow_array)          {                  print "--------------------------------------------------------&#92;n";                  ++$cnt;                  while (@results)                  {                          print "------&gt;".join(&apos;|&apos;,split(/&#92;0/, shift(@results)))."&#92;n";                  }          }      $sth-&gt;finish();      $dbh-&gt;disconnect();</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>\s-1DBD::LDAP\s0 is a \s-1DBI\s0 extension module adding an \s-1SQL\s0 database interface to standard \s-1LDAP\s0 databases to Perl's database-independent database interface. You will need access to an existing \s-1LDAP\s0 database or set up your own using an \s-1LDAP\s0 server, ie. \*(L"OpenLDAP\*(R", see (http://www.openldap.org).</p><p>The main advantage of \s-1DBD::LDAP\s0 is the ability to query \s-1LDAP\s0 databases via standard \s-1SQL\s0 queries in leu of cryptic \s-1LDAP\s0 \*(L"filters\*(R".  \s-1LDAP\s0 is optimized for quick lookup of existing data, but \s-1DBD::LDAP\s0 does support entry inserts, updates, and deletes with commit/rollback via the standard \s-1SQL\s0 commands!</p><p>\s-1LDAP\s0 databases are \*(L"heirarchical\*(R" in structure, whereas other DBD-supported databases are \*(L"relational\*(R" and there is no LDAP-equivalent to \s-1SQL\s0 \*(L"tables\*(R", so \s-1DBD::LDAP\s0 maps a \*(L"table\*(R" interface over the \s-1LDAP\s0 \*(L"tree\*(R" via a configuration file you must set up.  Each \*(L"table\*(R" is mapped to a common \*(L"base \s-1DN\s0\*(R".  For example, consider a typical \s-1LDAP\s0 database of employees within different departments within a company.  You might have a \*(L"company\*(R" names \*(L"Acme\*(R" and the root \*(L"dn\*(R" of \*(L"dc=Acme, dc=com\*(R" (Acme.com).  Below the company level, are divisions, ie. \*(L"Widgets\*(R", and \*(L"Blivets\*(R".  Each division would have an entry with a \*(L"dn\*(R" of \*(L"ou=Widgets, dc=Acme, dc=com\*(R".  Employees within each division could have a \*(L"dn\*(R" of \*(L"cn=John Doe, ou=Widgets, dc=Acme, dc=com\*(R". With \s-1DBD::LDAP\s0, we could create tables to access these different levels, ie. \*(L"top\*(R", which would have a \*(L"\s-1DN\s0\*(R" of \*(L"dc=Acme, dc=com\*(R", \*(L"WidgetDivision\*(R" for \*(L"dc=Acme, dc=com\*(R".  Tables can also be constained by additional attribute specifications (filters), ie constraining by \*(L"objectclass\*(R", ie. \*(L"(objectclass=person)\*(R".  Then, doing a \*(L"select * from WidgetDivision\*(R" would display all \*(L"person\*(R"s with a \*(L"dn\*(R" containing "\*(L"ou=Widgets, dc=Acme, dc=com\*(R".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSTALLATION</h2>
        <div class="sectioncontent">
<p>    Installing this module (and the prerequisites from above) is quite     simple. You just fetch the archive, extract it with</p><p>        gzip -cd DBD-LDAP-####.tar.gz | tar xf -</p><p>                -or-</p><p>                tar -xzvf DBD-LDAP-####.tar.gz</p><p>    (this is for Unix users, Windows users would prefer WinZip or something     similar) and then enter the following:</p><p>        cd DBD-LDAP-#.###         perl Makefile.PL         make         make test</p><p>    If any tests fail, let me know. Otherwise go on with</p><p>        make install</p><p>    Note that you almost definitely need root or administrator permissions.     If you don&apos;t have them, read the ExtUtils::MakeMaker man page for     details on installing in your own directories.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GETTING STARTED:</h2>
        <div class="sectioncontent">
<p>        1) Create a "database", ie. "foo" by creating a text file "foo.ldb".  The         general format of this file is:</p><p>---------------------------------------------------------- hostname[;port][:[root-dn][:[loginrule]]] tablename1:[basedn]:[basefilter]:dnattrs:[visableattrs]:[insertattrs]: &#92;&#92; [ldap_options] tablename2:[basedn]:[basefilter]:dnattrs:[visableattrs]:[insertattrs]: &#92;&#92; [ldap_options] ... ----------------------------------------------------------</p><p>        &lt;hostname&gt;              represents the ldap server host name.         &lt;port&gt;                  represents the server&apos;s port, default is 389.         &lt;root-dn&gt;                       if specified, is appended to the end of each tablename&apos;s                                 base-dn.         &lt;loginrule&gt;     if specified, converts single word "usernames" to the                                 appropriate DN, ie:</p><p>                        "cn=*,&lt;ROOT&gt;" would convert user name "foo" to "cn=foo, " and                         append the "&lt;root-dn&gt;" onto that.  The asterisk is converted to                         the user-name specified in the "connect" method.  If not specified,                         the username specified in the "connect" method must be a full DN.                         If the "&lt;root-dn&gt;" is not specified, then the "&lt;loginrule&gt;" would                         need to be a full DN.</p><p>        tablename       -       represents the name to be used in SQL statements for a given                         set of entries which make up a virtual "table".         basedn - if specified, is appended to the "&lt;root-dn&gt;" to make up the                         common base DN for all entries in this table.  If "&lt;root-dn&gt;" is                         not specified, then a full DN must be specified; otherwise, the                         default is the root-dn.         basefilter      - if specified, specifies a filter to be used if no "where"-                         clause is specified in SQL queries.  If a "where"-clause is                         specified, the resulting filter is "and"-ed with this one.  The                         default is "(objectclass=*)".         dnattrs - specifies which attributes that values for which are to be                         appended to the left of the basedn to create DNs for new entries                         being inserted into the table.         visableattrs - if specified, one or more attributes separated by commas                         which will be sought when the SQL statement does not specify                         attributes, ie. "select * from tablename".  If not specified, the                         attributes of the first matching entry are returned and used for                         all entries matching a given query.         insertattrs - if specified, one or more attribute/value combinations to be                         added to any new entry inserted into the table, usually needed for                         objectclass values.  The attributes and values usually correspond                         to those specivied in the "&lt;basefilter&gt;".  The general format is:                         attr1=value1[|value2...],attr2=value1...,...                         These attributes and values will be joined with any user-specified                         values for these attributes.         ldap_options - if specified, can be any one or more of the following:</p><p>                ldap_sizelimit - Limit the number of entries fetch by a query to this                                 number (0 = no limit) - default:  0.                 ldap_timelimit - Limit the search to this number of seconds per query.                                 (0 = no limit) - default:  0.                 ldap_scope - specify the "scope" of the search.  Values are:  "base",                                 "one", and "sub", see Net::LDAP docs.  Default is "one",                                 meaning the set of records one level below the basedn.  "base"                                 means search only the basedn, and "sub" means the union                                 of entries at the "base" level and "one" level below.                 ldap_inseparator - specify the separator character/string to be used                                 in queries to separate multiple values being specified for                                 a given attribute.  Default is "|".                 ldap_outseparator - specify the separator character/string to be used                                 in queryies to separate multiple values displayed as a result                                 of a query.  Default is "|".                 ldap_firstonly - only display the 1st value fetched for each attribute                                 per entry.  This makes "ldap_outseparator" unnecessary.</p><p>        2) write your script to use DBI, ie:</p><p>                #!/usr/bin/perl                 use DBI;</p><p>                $dbh = DBI-&gt;connect(&apos;DBD:LDAP:mydb&apos;,&apos;me&apos;,&apos;mypassword&apos;) ||                                 die "Could not connect (".$DBI-&gt;err.&apos;:&apos;.$DBI-&gt;errstr.")!";                 ...                 #CREATE A TABLE, INSERT SOME RECORDS, HAVE SOME FUN!</p><p>        3) get your application working.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSERTING, FETCHING AND MODIFYING DATA</h2>
        <div class="sectioncontent">
<p>        1st, we&apos;ll create a database called "ldapdb" with the tables previously         mentioned in the example in the DESCRIPTION section:</p><p>----------------- file \*(L"ldapdb.ldb\*(R" ---------------- ldapserver:dc=Acme, dc=com:cn=*,&lt;\s-1ROOT\s0&gt; top:::dc WidgetDivision:ou=Widgets, :&(objectclass=top)(objectclass=person): &#92;&#92; cn:cn,sn,ou,title,telephonenumber,description,objectclass,dn: &#92;&#92; objectclass=top|person|organizationalPerson:ldap_outseparator =&gt; \*(L":\*(R" ----------------------------------------------------</p><p>    The following examples insert some data in a table and fetch it back:     First all data in the string:</p><p>        $dbh-&gt;do(&lt;&lt;END_SQL);         INSERT INTO top (ou, cn, objectclass)         VALUES (&apos;Widgets&apos;, &apos;WidgetDivision&apos;, &apos;top|organizationalUnit&apos;) END_SQL</p><p>    Next an example using parameters:</p><p>        $dbh-&gt;do("INSERT INTO WidgetDivision (cn,sn,title,telephonenumber) VALUES (?, ?, ?, ?)",         &apos;John Doe&apos;,&apos;DoeJ&apos;,&apos;Manager&apos;,&apos;123-1111&apos;); END_SQL         $dbh-&gt;commit();</p><p>        NOTE:  Unlike most other DBD modules which support transactions, changes                 made do NOT show up until the "commit" function is called, unless                 "AutoCommit" is set.  This is due to the fact that fetches are done                 from the LDAP server and changes do not take effect there until the                 Net::LDAP "update" function is called, which is called by "commit".</p><p>        NOTE: The "dn" field is generated automatically from the base "dn" and the                 dn component fields specified by "dnattrs", If you try to insert a                 value directly into it, it will be ignored.  Also, if not specified,                 any attribute/value combinations specified in the "insertattrs"                 option will be added automatically.</p><p>    To retrieve data, you can use the following:</p><p>        my($query) = "SELECT * FROM WidgetDivision WHERE cn like &apos;John%&apos; ORDER BY cn";         my($sth) = $dbh-&gt;prepare($query);         $sth-&gt;execute();         while (my $entry = $sth-&gt;fetchrow_hashref) {             print("Found result record: cn = ", $entry-&gt;{&apos;cn&apos;},                   ", phone = ", $row-&gt;{&apos;telephonenumber&apos;});         }         $sth-&gt;finish();</p><p>        The SQL "SELECT" statement above (combined with the table information         in the "ldapdb.ldb" database file would generate and execute the following         equivalent LDAP Search:</p><p>                base =&gt; &apos;ou=Widgets, dc=Acme, dc=com&apos;,                 filter =&gt; &apos;(&(&(objectclass=top)(objectclass=person))(cn=John*))&apos;,                 scope =&gt; &apos;one&apos;,                 attrs =&gt; &apos;cn,sn,ou,title,telephonenumber,description,objectclass,dn&apos;</p><p>    See the <strong>DBI</strong>(3) manpage for details on these methods. See the</p><p>    Data rows are modified with the UPDATE statement:</p><p>        $dbh-&gt;do("UPDATE WidgetDivision SET description = &apos;Outstanding Employee&apos; WHERE cn = &apos;John Doe&apos;");</p><p>        NOTE:  You can NOT change the "dn" field directly - direct changes will be                 ignored.  You change the "rdn" component of the "dn" field by changing                 the value of the other field(s) which are appended to the base "dn".                 Also, if not specified, any attribute/value combinations specified in                 the "insertattrs" option will be added automatically.</p><p>    Likewise you use the DELETE statement for removing entries:</p><p>        $dbh-&gt;do("DELETE FROM WidgetDivision WHERE description = &apos;Outstanding Employee&apos;");</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METADATA</h2>
        <div class="sectioncontent">
<p>    The following attributes are handled by DBI itself and not by DBD::LDAP,     thus they should all work as expected.</p><p>        PrintError         RaiseError         Warn</p><p>    The following DBI attributes are handled by DBD::LDAP:</p><p>    AutoCommit         Works</p><p>    NUM_OF_FIELDS         Valid after &apos;$sth-&gt;execute&apos;</p><p>    NUM_OF_PARAMS         Valid after &apos;$sth-&gt;prepare&apos;</p><p>    NAME         Valid after &apos;$sth-&gt;execute&apos;; undef for Non-Select statements.</p><p>    NULLABLE         Not really working. Always returns an array ref of one&apos;s, as         DBD::LDAP always allows NULL (handled as an empty string).         Valid after &#96;$sth-&gt;execute&apos;.</p><p>    LongReadLen                 Should work</p><p>    LongTruncOk                 Should work</p><p>    These attributes and methods are not supported:</p><p>        bind_param_inout         CursorName</p><p>    In addition to the DBI attributes, you can use the following dbh     attributes.  These attributes are read-only after "connect".</p><p>        ldap_dbuser                 Current database user.</p><p>        ldap_HOME                 Environment variable specifying a path to search for LDAP                 databases (*.sdb) files.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DRIVER PRIVATE METHODS</h2>
        <div class="sectioncontent">
<p>    DBI-&gt;data_sources()         The &#96;data_sources&apos; method returns a list of "databases" (.ldb files)         found in the current directory and, if specified, the path in         the ldap_HOME environment variable.</p><p>    $dbh-&gt;tables()         This method returns a list of table names specified in the current         database.         Example:</p><p>            my($dbh) = DBI-&gt;connect("DBI:LDAP:mydatabase",&apos;me&apos;,&apos;mypswd&apos;);             my(@list) = $dbh-&gt;func(&apos;tables&apos;);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OTHER SUPPORTING UTILITIES</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESTRICTIONS</h2>
        <div class="sectioncontent">
<p>        DBD::LDAP currently treats all data as strings and all fields as         VARCHAR(255).</p><p>        Currently, you must define tables manually in the "&lt;database&gt;.ldb" file         using your favorite text editor.  I hope to add support for the SQL         "Create Table", "Alter Table", and "Drop Table" functions to handle this         eventually.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<p>        "Create Table", "Alter Table", and "Drop Table" SQL functions for         creating, altering, and deleting the tables defined in the         "&lt;database&gt;.ldb" file.</p><p>        Some kind of datatype support, ie. numeric (for sorting), CHAR for padding,         Long/Blob - for &gt;255 chars per field, etc.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN BUGS</h2>
        <div class="sectioncontent">
<p>        none - (yet).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO DBD::LDAP&hellip;</h2>
        <div class="sectioncontent">
<p>        Net::<a href="../man3/ldap.3.html"><strong>LDAP</strong>(3)</a>, <strong>DBI</strong>(3), <strong>perl</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="DBD::Excel.3pm.html"><span aria-hidden="true">&larr;</span> DBD::Excel.3pm: A class for dbi drivers that act on excel file.  this is still alpha version.</a></li>
   <li class="next"><a href="DBD::XBase.3pm.html">DBD::XBase.3pm: Dbi driver for xbase compatible database files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
