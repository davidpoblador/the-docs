<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shevek_crefbase: Circular-dependancy-protected reference-counting object base class.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Circular-dependancy-protected reference-counting object base class.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shevek_crefbase (3) manual">
  <meta name="twitter:description" content="Circular-dependancy-protected reference-counting object base class.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libshevek-doc-shevek_crefbase-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/shevek_crefbase.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shevek_crefbase (3) manual" />
  <meta property="og:description" content="Circular-dependancy-protected reference-counting object base class." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libshevek-doc-shevek_crefbase-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shevek_crefbase<small> (3)</small></h1>
        <p class="lead">Circular-dependancy-protected reference-counting object base class.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/shevek_crefbase.3.html">
      <span itemprop="name">shevek_crefbase: Circular-dependancy-protected reference-counting object base class.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libshevek-doc/">
      <span itemprop="name">libshevek-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/shevek_crefbase.3.html">
      <span itemprop="name">shevek_crefbase: Circular-dependancy-protected reference-counting object base class.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;crefptr.hh&gt;</p><h3>Public Member Functions</h3>
<p>void <strong>init_done</strong> (int code=0)</p><p><em>After calling this, the object is destroyed without references. </em></p>
<h3>Static Public Member Functions</h3>
<p>static int <strong>set_default_tag</strong> (int tag)</p><p><em>Set the default tag for when init_done is called. </em> static void <strong>check</strong> (bool fatal=true)</p><p><em>Check if all objects have called init_done. </em></p>
<h3>Protected Member Functions</h3>
<p><strong>crefbase</strong> ()</p><p><em>Constructor, which is called when an object is created. </em> virtual <strong>~crefbase</strong> ()</p><p><em>Virtual destructor, which does nothing except allowing derived class to have a virtual destructor. </em></p>
<h3>Friends</h3>
<p>template&lt;typename _T &gt; class <strong>crefptr</strong></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>Circular-dependancy-protected reference-counting object base class.</p><p>Objects which derive from this class are reference-counted in a way that detects dependency loops and destroys the entire loop when it is no longer externally referenced. For this, it is important that objects which contain pointers register them appropriately.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Member Function Documentation</h2>
        <div class="sectioncontent">
<h3>static void shevek::crefbase::check (boolfatal = \fCtrue\fP)\fC [inline]\fP, \fC [static]\fP</h3>
<p>Check if all objects have called init_done. When debugging is enabled, this function checks for all objects if they have called init_done. When debugging is not enabled, no list of objects is kept, and this check does nothing.</p>
<h3>void shevek::crefbase::init_done (intcode = \fC0\fP)\fC [inline]\fP</h3>
<p>After calling this, the object is destroyed without references. On creation, an object does not have any references. To prevent immediate destruction, it is first in an initialisation phase. During that phase, it will not be destroyed, even if it has no references. This function should be called immeiately after creating the object (normally through <strong>crefptr::init</strong>): <strong>shevek::crefptr</strong> &lt;foo&gt; bar = foo::create ().init (); If code is not given or 0, the default tag (set with set_default_tag) will be used.</p>
<h3>static int shevek::crefbase::set_default_tag (inttag)\fC [inline]\fP, \fC [static]\fP</h3>
<p>Set the default tag for when init_done is called. If the tag is not set to 1, a message will be printed to standard error on destruction. The previous tag is returned. If tag is set to 0, the old value is not changed. The initial default value is 1.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for libshevek from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="shevek_closure.3.html"><span aria-hidden="true">&larr;</span> shevek_closure.3: Block and resume without blocking the main loop.</a></li>
   <li class="next"><a href="shevek_crefptr.3.html">shevek_crefptr.3: Keep a pointer to an object derived from crefbase. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
