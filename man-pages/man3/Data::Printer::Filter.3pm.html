<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Data::Printer::Filter: Create powerful stand-alone filters for data::printer</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create powerful stand-alone filters for data::printer">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Data::Printer::Filter (3pm) manual">
  <meta name="twitter:description" content="Create powerful stand-alone filters for data::printer">
  <meta name="twitter:image" content="https://www.carta.tech/images/libdata-printer-perl-Data::Printer::Filter-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Data::Printer::Filter.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Data::Printer::Filter (3pm) manual" />
  <meta property="og:description" content="Create powerful stand-alone filters for data::printer" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libdata-printer-perl-Data::Printer::Filter-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Data::Printer::Filter<small> (3pm)</small></h1>
        <p class="lead">Create powerful stand-alone filters for data::printer</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Data::Printer::Filter.3pm.html">
      <span itemprop="name">Data::Printer::Filter: Create powerful stand-alone filters for data::printer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libdata-printer-perl/">
      <span itemprop="name">libdata-printer-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Data::Printer::Filter.3pm.html">
      <span itemprop="name">Data::Printer::Filter: Create powerful stand-alone filters for data::printer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Create your filter module:</p>
<pre>
  package Data::Printer::Filter::MyFilter;
  use strict;
  use warnings;

  use Data::Printer::Filter;

  # type filter
  filter &apos;SCALAR&apos;, sub {
      my ($ref, $properties) = @_;
      my $val = $$ref;

      if ($val &gt; 100) {
          return &apos;too big!!&apos;;
      }
      else {
          return $val;
      }
  };

  # you can also filter objects of any class
  filter &apos;Some::Class&apos;, sub {
      my ($object, $properties) = @_;

      return $ref-&gt;some_method;   # or whatever

      # see &apos;HELPER FUNCTIONS&apos; below for
      # customization options, including
      # proper indentation.
  };

  1;
</pre>
<p>Later, in your main code:</p><p>  use Data::Printer {       filters =&gt; {           -external =&gt; [ &apos;MyFilter&apos;, &apos;OtherFilter&apos; ],</p><p>          # you can still add regular (inline) filters           SCALAR =&gt; sub {               ...           }       },   };</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNING - ALPHA CODE (VERY LOOSE API)</h2>
        <div class="sectioncontent">
<p>We are still experimenting with the standalone filter syntax, so <strong>filters written like so may break in the future without any warning!</strong></p><p><strong>If you care, or have any suggestions</strong>, please drop me a line via \s-1RT\s0, email, or find me ('garu') on irc.perl.org.</p><p>You have been warned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Data::Printer lets you add custom filters to display data structures and objects, by either specifying them during \*(L"use\*(R", in the \*(C`.dataprinter\*(C' configuration file, or even in runtime customizations.</p><p>But there are times when you may want to group similar filters, or make them standalone in order to be easily reutilized in other environments and applications, or even upload them to \s-1CPAN\s0 so other people can benefit from a cleaner - and clearer - object/structure dump.</p><p>This is where \*(C`Data::Printer::Filter\*(C' comes in. It <strong>exports</strong> into your package's namespace the \*(L"filter\*(R" function, along with some helpers to create custom filter packages.</p><p>Data::Printer recognizes all filters in the \*(C`Data::Printer::Filter::*\*(C' namespace. You can load them by specifying them in the '-external' filter list (note the dash, to avoid clashing with a potential class or pragma labelled 'external'):</p><p>  use Data::Printer {       filters =&gt; {           -external =&gt; &apos;MyFilter&apos;,       },   };</p><p>This will load all filters defined by the \*(C`Data::Printer::Filter::MyFilter\*(C' module.</p><p>If there are more than one filter, use an array reference instead:</p><p>  -external =&gt; [ &apos;MyFilter&apos;, &apos;MyOtherFilter&apos; ]</p><p><strong>\s-1IMPORTANT:\s0 \s-1THIS\s0 \s-1WAY\s0 \s-1OF\s0 \s-1LOADING\s0 \s-1EXTERNAL\s0 \s-1PLUGINS\s0 \s-1IS\s0 \s-1EXPERIMENTAL\s0 \s-1AND\s0</strong> \s-1SUBJECT\s0 \s-1TO\s0 \s-1SUDDEN\s0 \s-1CHANGE\s0! \s-1IF\s0 \s-1YOU\s0 \s-1CARE\s0, \s-1AND/OR\s0 \s-1HAVE\s0 \s-1IDEAS\s0 \s-1ON\s0 A \s-1BETTER\s0 \s-1API\s0, \s-1PLEASE\s0 \s-1LET\s0 \s-1US\s0 \s-1KNOW\s0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HELPER FUNCTIONS</h2>
        <div class="sectioncontent">
<h3>filter \s-1TYPE\s0, sub { ... };</h3>
<p>The \*(C`filter\*(C' function creates a new filter for <em>\s-1TYPE\s0</em>, using the given subref. The subref receives two arguments: the item itself - be it an object or a reference to a standard Perl type - and the properties in effect (so you can inspect for certain options, etc). The subroutine is expected to return a string containing whatever it wants \*(C`Data::Printer\*(C' to display on screen.</p>
<h3>p()</h3>
<p>This is the same as \*(C`Data::Printer\*(C''s p(), only you can't rename it. You can use this to throw some data structures back at \*(C`Data::Printer\*(C' and use the results in your own return string - like when manipulating hashes or arrays.</p>
<h3>\fInewline()\fP</h3>
<p>This helper returns a string using the linebreak as specified by the caller's settings. For instance, it provides the proper indentation level of spaces for you and considers the \*(C`multiline\*(C' option to avoid line breakage.</p><p>In other words, if you do this:</p><p>   filter ARRAY =&gt; {        my ($ref, $p) = @_;        my $string = "Hey!! I got this array:";</p><p>       foreach my $val (@$ref) {            $string .= newline . p($val);        }</p><p>       return $string;    };</p><p>... your \*(C`p($val)\*(C' returns will be properly indented, vertically aligned to your level of the data structure, while simply using \*(L"&#92;n\*(R" would just make things messy if your structure has more than one level of depth.</p>
<h3>\fIindent()\fP</h3>

<h3>\fIoutdent()\fP</h3>
<p>These two helpers let you increase/decrease the indentation level of your data display, for \*(C`newline()\*(C' and nested \*(C`p()\*(C' calls inside your filters.</p><p>For example, the filter defined in the \*(C`newline\*(C' explanation above would show the values on the same (vertically aligned) level as the \*(L"I got this array\*(R" message. If you wanted your array to be one level further deep, you could use this instead:</p><p>  filter ARRAY =&gt; {       my ($ref, $p) = @_;       my $string = "Hey!! I got this array:";</p><p>      indent;       foreach my $val (@$ref) {           $string .= newline . p($val);       }       outdent;</p><p>      return $string;   };</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COLORIZATION</h2>
        <div class="sectioncontent">
<p>You can use Term::ANSIColor's \*(C`colored()\*(C'' for string colorization. Data::Printer will automatically enable/disable colors for you.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXISTING FILTERS</h2>
        <div class="sectioncontent">
<p>This is meant to provide a complete list of standalone filters for Data::Printer available on \s-1CPAN\s0. If you write one, please put it under the \*(C`Data::Printer::Filter::*\*(C' namespace, and drop me a line so I can add it to this list!</p><h3>Databases</h3>
<p>Data::Printer::Filter::DB provides filters for Database objects. So far only \s-1DBI\s0 is covered, but more to come!</p>
<h3>Dates & Times</h3>
<p>Data::Printer::Filter::DateTime pretty-prints several date and time objects (not just DateTime) for you on the fly, including duration/delta objects!</p>
<h3>Digest</h3>
<p>Data::Printer::Filter::Digest displays a string containing the hash of the actual message digest instead of the object. Works on \*(C`Digest::MD5\*(C', \*(C`Digest::SHA\*(C', any digest class that inherits from \*(C`Digest::base\*(C' and some others that implement their own thing!</p>
<h3>ClassicRegex</h3>
<p>Data::Printer::Filter::ClassicRegex changes the way Data::Printer dumps regular expressions, doing it the classic \*(C`qr//\*(C' way that got popular in \*(C`Data::Dumper\*(C'.</p>
<h3>\s-1URI\s0</h3>
<p>Data::Printer::Filter::URI pretty-prints \s-1URI\s0 objects, displaying the \s-1URI\s0 as a string instead of dumping the object.</p>
<h3>\s-1JSON\s0</h3>
<p>Data::Printer::Filter::JSON lets you see your \s-1JSON\s0 structures replacing boolean objects with simple \*(C`true/false\*(C' strings!</p>
<h3>URIs</h3>
<p>Data::Printer::Filter::URI filters through several \s-1URI\s0 manipulation classes and displays the \s-1URI\s0 as a colored string. A very nice addition by Stanislaw Pusep (\s-1SYP\s0).</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING MORE THAN ONE FILTER FOR THE SAME TYPE/CLASS</h2>
        <div class="sectioncontent">
<p>As of version 0.13, standalone filters let you stack together filters for the same type or class. Filters of the same type are called in order, until one of them returns a string. This lets you have several filters inspecting the same given value until one of them decides to actually treat it somehow.</p><p>If your filter catched a value and you don't want to treat it, simply return and the next filter will be called. If there are no other filters for that particular class or type available, the standard Data::Printer calls will be used.</p><p>For example:</p><p>  filter SCALAR =&gt; sub {       my ($ref, $properties) = @_;       if ( Scalar::Util::looks_like_number $$ref ) {           return sprintf "%.8d", $$ref;       }       return; # lets the other SCALAR filter have a go   };</p><p>  filter SCALAR =&gt; sub {       my ($ref, $properties) = @_;       return qq["$$ref"];   };</p><p>Note that this \*(L"filter stack\*(R" is not possible on inline filters, since it's a hash and keys with the same name are overwritten. Instead, you can pass them as an array reference:</p><p>  use Data::Printer filters =&gt; {       SCALAR =&gt; [ sub { ... }, sub { ... } ],   };</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Data::Printer::Filter&hellip;</h2>
        <div class="sectioncontent">
<p>Data::Printer</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE AND COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2011 Breno G. de Oliveira \*(C`&lt;garu at cpan.org&gt;\*(C'. All rights reserved.</p><p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See perlartistic.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Data::Printer.3pm.html"><span aria-hidden="true">&larr;</span> Data::Printer.3pm: Colored pretty-print of perl data structures and objects</a></li>
   <li class="next"><a href="Data::Printer::Filter::DB.3pm.html">Data::Printer::Filter::DB.3pm: Pretty printing database objects <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
