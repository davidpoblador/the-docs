<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mconv_define_coding: Define a coding system.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Define a coding system.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mconv_define_coding (3m17n) manual">
  <meta name="twitter:description" content="Define a coding system.">
  <meta name="twitter:image" content="https://www.carta.tech/images/m17n-docs-mconv_define_coding-3m17n.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3m17n/mconv_define_coding.3m17n.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mconv_define_coding (3m17n) manual" />
  <meta property="og:description" content="Define a coding system." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/m17n-docs-mconv_define_coding-3m17n.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mconv_define_coding<small> (3m17n)</small></h1>
        <p class="lead">Define a coding system.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3m17n/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3m17n/mconv_define_coding.3m17n.html">
      <span itemprop="name">mconv_define_coding: Define a coding system.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/m17n-docs/">
      <span itemprop="name">m17n-docs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3m17n/mconv_define_coding.3m17n.html">
      <span itemprop="name">mconv_define_coding: Define a coding system.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>MSymbol</strong> <strong>mconv_define_coding</strong> (const char * <em>name</em>, <strong>MPlist</strong> * <em>plist</em>, int(*)(<strong>MConverter</strong> *) <em>resetter</em>, int(*)(const unsigned char *, <em>int</em>, <strong>MText</strong> *, <strong>MConverter</strong> *) <em>decoder</em>, int(*)(<strong>MText</strong> *, <em>int</em>, <em>int</em>, unsigned char *, <em>int</em>, <strong>MConverter</strong> *) <em>encoder</em>, void * <em>extra_info</em>)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Define a coding system. The mconv_define_coding() function defines a new coding system and makes it accessible via a symbol whose name is name. plist specifies parameters of the coding system as below:</p><ul>
<li><p>Key is Mtype, value is a symbol</p></li>
</ul><p>The value specifies the type of the coding system. It must be Mcharset, Mutf, Miso_2022, or Mnil.</p><p>If the type is Mcharset, extra_info is ignored.</p><p>If the type is Mutf, extra_info must be a pointer to MCodingInfoUTF.</p><p>If the type is Miso_2022, extra_info must be a pointer to MCodingInfoISO2022.</p><p>If the type is Mnil, the argument resetter, decoder, and encoder must be supplied. extra_info is ignored. Otherwise, they can be NULL and the m17n library provides proper defaults.</p><ul>
<li><p>Key is Mcharsets, value is a plist</p></li>
</ul><p>The value specifies a list charsets supported by the coding system. The keys of the plist must be Msymbol, and the values must be symbols representing charsets.</p><ul>
<li><p>Key is Mflags, value is a plist</p></li>
</ul><p>If the type is Miso_2022, the values specifies flags to control the ISO 2022 interpreter. The keys of the plist must e Msymbol, and values must be one of the following.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mreset_at_eol</strong></p>
  </dd>

</dl>
<p>If this flag exists, designation and invocation status is reset to the initial state at the end of line.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mreset_at_cntl</strong></p>
  </dd>

</dl>
<p>If this flag exists, designation and invocation status is reset to the initial state at a control character.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Meight_bit</strong></p>
  </dd>

</dl>
<p>If this flag exists, the graphic plane right is used.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mlong_form</strong></p>
  </dd>

</dl>
<p>If this flag exists, the over-long escape sequences (ESC '$' '(' &lt;final_byte&gt;) are used for designating the CCS JISX0208.1978, GB2312, and JISX0208.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mdesignation_g0</strong></p>
  </dd>

</dl>
<p>If this flag and Mfull_support exists, designates charsets not listed in the charset list to the graphic register G0.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mdesignation_g1</strong></p>
  </dd>

</dl>
<p>If this flag and Mfull_support exists, designates charsets not listed in the charset list to the graphic register G1.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mdesignation_ctext</strong></p>
  </dd>

</dl>
<p>If this flag and Mfull_support exists, designates charsets not listed in the charset list to a graphic register G0 or G1 based on the criteria of the Compound Text.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mdesignation_ctext_ext</strong></p>
  </dd>

</dl>
<p>If this flag and Mfull_support exists, designates charsets not listed in the charset list to a graphic register G0 or G1, or use extended segment for such charsets based on the criteria of the Compound Text.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mlocking_shift</strong></p>
  </dd>

</dl>
<p>If this flag exists, use locking shift.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Msingle_shift</strong></p>
  </dd>

</dl>
<p>If this flag exists, use single shift.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Msingle_shift_7</strong></p>
  </dd>

</dl>
<p>If this flag exists, use 7-bit single shift code (0x19).</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Meuc_tw_shift</strong></p>
  </dd>

</dl>
<p>If this flag exists, use a special shifting according to EUC-TW.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Miso_6429</strong></p>
  </dd>

</dl>
<p>This flag is currently ignored.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mrevision_number</strong></p>
  </dd>

</dl>
<p>If this flag exists, use a revision number escape sequence to designate a charset that has a revision number.</p>
<dl class='dl-vertical'>
  <dt>
      &bull;
  </dt>
  <dd>
    <p><strong>Mfull_support</strong></p>
  </dd>

</dl>
<p>If this flag exists, support all charsets registered in the International Registry.</p><ul>
<li><p>Key is Mdesignation, value is a plist</p></li>
</ul><p>If the type is Miso_2022, the value specifies how to designate each supported characters. The keys of the plist must be Minteger, and the values must be numbers indicating a graphic registers. The Nth element value is for the Nth charset of the charset list. The value 0..3 means that it is assumed that a charset is already designated to the graphic register 0..3. The negative value G (-4..-1) means that a charset is not designated to any register at first, and if necessary, is designated to the (G+4) graphic register.</p><ul>
<li><p>Key is Minvocation, value is a plist</p></li>
</ul><p>If the type is Miso_2022, the value specifies how to invocate each graphic registers. The plist length must be one or two. The keys of the plist must be Minteger, and the values must be numbers indicating a graphic register. The value of the first element specifies which graphic register is invocated to the graphic plane left. If the length is one, no graphic register is invocated to the graphic plane right. Otherwise, the value of the second element specifies which graphic register is invocated to the graphic plane right.</p><ul>
<li><p>Key is Mcode_unit, value is an integer</p></li>
</ul><p>If the type is Mutf, the value specifies the bit length of a code-unit. It must be 8, 16, or 32.</p><ul>
<li><p>Key is Mbom, value is a symbol</p></li>
</ul><p>If the type is Mutf and the code-unit bit length is 16 or 32, it specifies whether or not to use BOM (Byte Order Mark). If the value is Mnil (default), BOM is not used, else if the value is Mmaybe, the existence of BOM is detected at decoding time, else BOM is used.</p><ul>
<li><p>Key is Mlittle_endian, value is a symbol</p></li>
</ul><p>If the type is Mutf and the code-unit bit length is 16 or 32, it specifies whether or not the encoding is little endian. If the value is Mnil (default), it is big endian, else it is little endian.</p><p><strong>resetter</strong> is a pointer to a function that resets a converter for the coding system to the initial status. The pointed function is called with one argument, a pointer to a converter object.</p><p><strong>decoder</strong> is a pointer to a function that decodes a byte sequence according to the coding system. The pointed function is called with four arguments:</p><ul>
<li><p>A pointer to the byte sequence to decode.</p></li><li><p>The number of bytes to decode.</p></li><li><p>A pointer to an M-text to which the decoded characters are appended.</p></li><li><p>A pointer to a converter object.</p></li>
</ul><p><strong>decoder</strong> must return 0 if it succeeds. Otherwise it must return -1.</p><p><strong>encoder</strong> is a pointer to a function that encodes an M-text according to the coding system. The pointed function is called with six arguments:</p><ul>
<li><p>A pointer to the M-text to encode.</p></li><li><p>The starting position of the encoding.</p></li><li><p>The ending position of the encoding.</p></li><li><p>A pointer to a memory area where the produced bytes are stored.</p></li><li><p>The size of the memory area.</p></li><li><p>A pointer to a converter object.</p></li>
</ul><p><strong>encoder</strong> must return 0 if it succeeds. Otherwise it must return -1.</p><p><strong>extra_info</strong> is a pointer to a data structure that contains extra information about the coding system. The type of the data structure depends on type.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>If the operation was successful, mconv_define_coding() returns a symbol whose name is name. If an error is detected, it returns Mnil and assigns an error code to the external variable merror_code.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>MERROR_CODING</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2001 Information-technology Promotion Agency (IPA)</p><p>Copyright (C) 2001-2011 National Institute of Advanced Industrial Science and Technology (AIST)</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License &lt;http://www.gnu.org/licenses/fdl.html&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mconv_decode_stream.3m17n.html"><span aria-hidden="true">&larr;</span> mconv_decode_stream.3m17n: Decode a stream input based on a coding system.</a></li>
   <li class="next"><a href="mconv_encode.3m17n.html">mconv_encode.3m17n: Encode an m-text into a byte sequence. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
