<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slurm_step_ctx_create_no_alloc: Slurm task spawn functions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Slurm task spawn functions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="slurm_step_ctx_create_no_alloc (3) manual">
  <meta name="twitter:description" content="Slurm task spawn functions">
  <meta name="twitter:image" content="https://www.carta.tech/images/libslurm-dev-slurm_step_ctx_create_no_alloc-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/slurm_step_ctx_create_no_alloc.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="slurm_step_ctx_create_no_alloc (3) manual" />
  <meta property="og:description" content="Slurm task spawn functions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libslurm-dev-slurm_step_ctx_create_no_alloc-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slurm_step_ctx_create_no_alloc<small> (3)</small></h1>
        <p class="lead">Slurm task spawn functions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/slurm_step_ctx_create_no_alloc.3.html">
      <span itemprop="name">slurm_step_ctx_create_no_alloc: Slurm task spawn functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libslurm-dev/">
      <span itemprop="name">libslurm-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/slurm_step_ctx_create_no_alloc.3.html">
      <span itemprop="name">slurm_step_ctx_create_no_alloc: Slurm task spawn functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">
<p>#include &lt;slurm/slurm.h&gt;</p><p>slurm_step_ctx <strong>slurm_step_ctx_create</strong> (</p><p>	slurm_step_ctx_params_t *<em>step_req</em></p><p>);</p><p>slurm_step_ctx <strong>slurm_step_ctx_create_no_alloc</strong> (</p><p>	slurm_step_ctx_params_t *<em>step_req</em></p><p>);</p><p>int <strong>slurm_step_ctx_daemon_per_node_hack</strong> (</p><p>	slurm_step_ctx_t *<em>ctx</em></p><p>);</p><p>int <strong>slurm_step_ctx_get</strong> (</p><p>	slurm_step_ctx_t *<em>ctx</em>,</p><p>	int <em>ctx_key</em>,</p><p>	...</p><p>);</p><p>int <strong>slurm_jobinfo_ctx_get</strong> (</p><p>	switch_jobinfo_t <em>jobinfo</em>,</p><p>	int <em>data_type</em>,</p><p>	void *<em>data</em></p><p>);</p><p>void <strong>slurm_step_ctx_params_t_init</strong> (</p><p>	slurm_step_ctx_params_t *<em>step_req</em></p><p>);</p><p>int <strong>slurm_spawn</strong> {</p><p>	slurm_step_ctx <em>ctx</em>,</p><p>	int *<em>fd_array</em></p><p>);</p><p>int <strong>slurm_spawn_kill</strong> {</p>
<pre>
        slurm_step_ctx <em>ctx</em>,
</pre>
<p>	uint16_t <em>signal</em></p><p>);</p><p>int <strong>slurm_step_ctx_destroy</strong> {</p><p>	slurm_step_ctx <em>ctx</em></p><p>);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>step_req</em></p>
  </dt>
  <dd>
    <p>Specifies the pointer to the structure with job step request specification. See slurm.h for full details on the data structure's contents.</p>
  </dd>
  <dt>
    <p><em>ctx</em></p>
  </dt>
  <dd>
    <p>Job step context. Created by <strong>slurm_step_ctx_create</strong>, or <strong>slurm_step_ctx_create_no_alloc</strong> used in subsequent function calls, and destroyed by <strong>slurm_step_ctx_destroy</strong>.</p>
  </dd>
  <dt>
    <p><em>ctx_key</em></p>
  </dt>
  <dd>
    <p>Identifies the fields in <em>ctx</em> to be collected by <strong>slurm_step_ctx_get</strong>.</p>
  </dd>
  <dt>
    <p><em>data</em></p>
  </dt>
  <dd>
    <p>Storage location for requested data. See <em>data_type</em> below.</p>
  </dd>
  <dt>
    <p><em>data_type</em></p>
  </dt>
  <dd>
    <p>Switch-specific data requested. The interpretation of this field depends upon the switch plugin in use.</p>
  </dd>
  <dt>
    <p><em>fd_array</em></p>
  </dt>
  <dd>
    <p>Array of socket file descriptors to be connected to the initiated tasks. Tasks will be connected to these file descriptors in order of their task id. This socket will carry standard input, output and error for the task. <em>jobinfo</em> Switch-specific job information as returned by <strong>slurm_step_ctx_get</strong>.</p>
  </dd>
  <dt>
    <p><em>signal</em></p>
  </dt>
  <dd>
    <p>Signal to be sent to the spawned tasks.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>slurm_jobinfo_ctx_get</strong> Get values from a <em>jobinfo</em> field as returned by <strong>slurm_step_ctx_get</strong>. The operation of this function is highly dependent upon the switch plugin in use.</p><p><strong>slurm_step_ctx_create</strong> Create a job step context. To avoid memory leaks call <strong>slurm_step_ctx_destroy</strong> when the use of this context is finished. NOTE: this function creates a slurm job step. Call <strong>slurm_spawn</strong> in a timely fashion to avoid having job step credentials time out. If <strong>slurm_spawn</strong> is not used, explicitly cancel the job step.</p><p><strong>slurm_step_ctx_create_no_alloc</strong> Same as above, only no allocation is made. To avoid memory leaks call <strong>slurm_step_ctx_destroy</strong> when the use of this context is finished.</p><p><strong>slurm_step_ctx_daemon_per_node_hack</strong> Hack the step context to run a single process per node, regardless of the settings selected at slurm_step_ctx_create time.</p><p><strong>slurm_step_ctx_get</strong> Get values from a job step context. <em>ctx_key</em> identifies the fields to be gathered from the job step context. Subsequent arguments to this function are dependent upon the value of <em>ctx_key</em>. See the <strong>CONTEXT KEYS</strong> section for details.</p><p><strong>slurm_step_ctx_params_t_init</strong> This initializes parameters in the structure that you will pass to slurm_step_ctx_create().</p><p><strong>slurm_spawn</strong> Spawn tasks based upon a job step context and establish communications with the tasks using the socket file descriptors specified. Note that this function can only be called once for each job step context. Establish a new job step context for each set of tasks to be spawned.</p><p><strong>slurm_spawn_kill</strong> Signal the tasks spawned for this context by <strong>slurm_spawn</strong>.</p><p><strong>slurm_step_ctx_destroy</strong> Destroy a job step context created by <strong>slurm_step_ctx_create</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONEXT KEYS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>SLURM_STEP_CTX_ARGS</strong></p>
  </dt>
  <dd>
    <p>Set the argument count and values for the executable. Accepts two additional arguments, the first of type int and the second of type char **.</p>
  </dd>
  <dt>
    <p><strong>SLURM_STEP_CTX_CHDIR</strong></p>
  </dt>
  <dd>
    <p>Have the remote process change directory to the specified location before beginning execution. Accepts one argument of type char * identifying the directory's pathname. By default the remote process will execute in the same directory pathname from which it is spawned. NOTE: This assumes that same directory pathname exists on the other nodes.</p>
  </dd>
  <dt>
    <p><strong>SLURM_STEP_CTX_ENV</strong></p>
  </dt>
  <dd>
    <p>Sets the environment variable count and values for the executable. Accepts two additional arguments, the first of type int and the second of type char **. By default the current environment variables are copied to started task's environment.</p>
  </dd>
  <dt>
    <p><strong>SLURM_STEP_CTX_RESP</strong></p>
  </dt>
  <dd>
    <p>Get the job step response message. Accepts one additional argument of type job_step_create_response_msg_t **.</p>
  </dd>
  <dt>
    <p><strong>SLURM_STEP_CTX_STEPID</strong></p>
  </dt>
  <dd>
    <p>Get the step id of the created job step. Accepts one additional argument of type uint32_t *.</p>
  </dd>
  <dt>
    <p><strong>SLURM_STEP_CTX_TASKS</strong></p>
  </dt>
  <dd>
    <p>Get the number of tasks per node for a given job. Accepts one additional argument of type uint32_t **. This argument will be set to point to an array with the task counts of each node in an element of the array. See <strong>SLURM_STEP_CTX_TID</strong> below to determine the task ID numbers associated with each of those tasks.</p>
  </dd>
  <dt>
    <p><strong>SLURM_STEP_CTX_TID</strong></p>
  </dt>
  <dd>
    <p>Get the task ID numbers associated with the tasks allocated to a specific node. Accepts two additional arguments, the first of type int and the second of type uint32_t **. The first argument identifies the node number of interest (zero origin). The second argument will be set to point to an array with the task ID numbers of each task allocated to the node (also zero origin). See <strong>SLURM_STEP_CTX_TASKS</strong> above to determine how many tasks are associated with each node.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>For <strong> slurm_step_ctx_create</strong> a context is return upon success. On error NULL is returned and the Slurm error code is set appropriately.</p><p>For all other functions zero is returned upon success. On error, -1 is returned, and the Slurm error code is set appropriately.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p><strong>EINVAL</strong> Invalid argument</p><p><strong>SLURM_PROTOCOL_VERSION_ERROR</strong> Protocol version has changed, re-link your code.</p><p><strong>ESLURM_INVALID_JOB_ID</strong> the requested job id does not exist.</p><p><strong>ESLURM_ALREADY_DONE</strong> the specified job has already completed and can not be modified.</p><p><strong>ESLURM_ACCESS_DENIED</strong> the requesting user lacks authorization for the requested action (e.g. trying to delete or modify another user's job).</p><p><strong>ESLURM_DISABLED</strong> the ability to create a job step is currently disabled. This is indicative of the job being suspended. Retry the call as desired.</p><p><strong>ESLURM_INTERCONNECT_FAILURE</strong> failed to configure the node interconnect.</p><p><strong>ESLURM_BAD_DIST</strong> task distribution specification is invalid.</p><p><strong>SLURM_PROTOCOL_SOCKET_IMPL_TIMEOUT</strong> Timeout in communicating with SLURM controller.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>SEE <a href="../man3/slurm_step_launch.3.html"><strong>slurm_step_launch</strong>(3)</a> man page for an example of slurm_step_ctx_create and slurm_step_launch in use together.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTE</h2>
        <div class="sectioncontent">
<p>These functions are included in the libslurm library, which must be linked to your process for use (e.g. "cc -lslurm myprog.c").</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2004-2007 The Regents of the University of California. Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER). CODE-OCEC-09-009. All rights reserved.</p><p>This file is part of SLURM, a resource management program. For details, see &lt;http://slurm.schedmd.com/&gt;.</p><p>SLURM is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>SLURM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO slurm_step_ctx_create_no_alloc&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/slurm_allocate_resources.3.html"><strong>slurm_allocate_resources</strong>(3)</a>, <a href="../man3/slurm_job_step_create.3.html"><strong>slurm_job_step_create</strong>(3)</a>, <a href="../man3/slurm_kill_job.3.html"><strong>slurm_kill_job</strong>(3)</a>, <a href="../man3/slurm_get_errno.3.html"><strong>slurm_get_errno</strong>(3)</a>, <a href="../man3/slurm_perror.3.html"><strong>slurm_perror</strong>(3)</a>, <a href="../man3/slurm_strerror.3.html"><strong>slurm_strerror</strong>(3)</a>, <a href="../man1/srun.1.html"><strong>srun</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slurm_step_ctx_create.3.html"><span aria-hidden="true">&larr;</span> slurm_step_ctx_create.3: Slurm task spawn functions</a></li>
   <li class="next"><a href="slurm_step_ctx_daemon_per_node_hack.3.html">slurm_step_ctx_daemon_per_node_hack.3: Slurm task spawn functions <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
