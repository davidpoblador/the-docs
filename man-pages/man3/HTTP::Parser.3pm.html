<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HTTP::Parser: Parse http/1.1 request into http::request/response object</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Parse http/1.1 request into http::request/response object">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="HTTP::Parser (3pm) manual">
  <meta name="twitter:description" content="Parse http/1.1 request into http::request/response object">
  <meta name="twitter:image" content="https://www.carta.tech/images/libhttp-parser-perl-HTTP::Parser-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/HTTP::Parser.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="HTTP::Parser (3pm) manual" />
  <meta property="og:description" content="Parse http/1.1 request into http::request/response object" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libhttp-parser-perl-HTTP::Parser-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">HTTP::Parser<small> (3pm)</small></h1>
        <p class="lead">Parse http/1.1 request into http::request/response object</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/HTTP::Parser.3pm.html">
      <span itemprop="name">HTTP::Parser: Parse http/1.1 request into http::request/response object</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libhttp-parser-perl/">
      <span itemprop="name">libhttp-parser-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/HTTP::Parser.3pm.html">
      <span itemprop="name">HTTP::Parser: Parse http/1.1 request into http::request/response object</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 my $parser = HTTP::Parser-&gt;new();

 ...

 my $status = $parser-&gt;add($text);

 if(0 == $status) {
   print "request: ".$parser-&gt;request()-&gt;as_string();  # HTTP::Request
 } elsif(-3 == $status) {
   print "no content length header!&#92;n";
 } elsif(-2 == $status) {
   print "need a line of data&#92;n";
 } elsif(-1 == $status) {
   print "need more data&#92;n";
 } else {  # $status &gt; 0
   print "need $status byte(s)&#92;n";
 }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This is an \s-1HTTP\s0 request parser.  It takes chunks of text as received and returns a 'hint' as to what is required, or returns the HTTP::Request when a complete request has been read.  \s-1HTTP/1\s0.1 chunking is supported.  It dies if it finds an error.</p><h3>new ( named params... )</h3>
<p>Create a new HTTP::Parser object.  Takes named parameters, e.g.:</p><p> my $parser = HTTP::Parser-&gt;new(request =&gt; 1);</p>
<dl class='dl-vertical'>
  <dt>
    request
  </dt>
  <dd>
    <p>Allows or denies parsing an \s-1HTTP\s0 request and returning an \*(C`HTTP::Request\*(C' object.</p>
  </dd>
  <dt>
    response
  </dt>
  <dd>
    <p>Allows or denies parsing an \s-1HTTP\s0 response and returning an \*(C`HTTP::Response\*(C' object.</p>
  </dd>

</dl>
<p>If you pass neither \*(C`request\*(C' nor \*(C`response\*(C', only requests are parsed (for backwards compatibility); if you pass either, the other defaults to false (disallowing both requests and responses is a fatal error).</p>
<h3>add ( string )</h3>
<p>Parse request.  Returns:</p>
<dl class='dl-vertical'>
  <dt>
    0
  </dt>
  <dd>
    <p>if finished (call \*(C`object\*(C' to get an HTTP::Request or Response object)</p>
  </dd>
  <dt>
    -1
  </dt>
  <dd>
    <p>if not finished but not sure how many bytes remain</p>
  </dd>
  <dt>
    -2
  </dt>
  <dd>
    <p>if waiting for a line (like 0 with a hint)</p>
  </dd>
  <dt>
    -3
  </dt>
  <dd>
    <p>if there was no content-length header, so we can't tell whether we are waiting for more data or not. If you are reading from a \s-1TCP\s0 stream, you can keep adding data until the connection closes gracefully (the \s-1HTTP\s0 \s-1RFC\s0 allows this). If you are reading from a file, you should keep adding until you have all the data. Once you have added all data, you may call \*(C`object\*(C'.  if you are not sure whether you have all the data, the HTTP::Response object might be incomplete.</p>
  </dd>
  <dt>
    count
  </dt>
  <dd>
    <p>if waiting for that many bytes</p>
  </dd>

</dl>
<p>Dies on error.</p><p>This method of parsing makes it easier to parse a request from an event-based system, on the other hand, it's quite alright to pass in the whole request. Ideally, the first chunk passed in is the header (up to the double newline), then whatever byte counts are requested.</p><p>When a request object is returned, the X-HTTP-Version header has the \s-1HTTP\s0 version, the <em>uri()</em> method will always return a \s-1URI\s0 object, not a string.</p><p>Note that a nonzero return is just a hint, and any amount of data can be passed in to a subsequent <em>add()</em> call.</p>
<h3>data</h3>
<p>Returns current data not parsed.  Mainly useful after a request has been parsed.  The data is not removed from the object's buffer, and will be seen before the data next passed to <em>add()</em>.</p>
<h3>extra</h3>
<p>Returns the count of extra bytes (length of <em>data()</em>) after a request.</p>
<h3>object</h3>
<p>Returns the object request.  Only useful after the parse has completed.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>David Robins &lt;dbrobins@davidrobins.net&gt; Fixes for 0.05 by David Cannings &lt;david@edeca.net&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO HTTP::Parser&hellip;</h2>
        <div class="sectioncontent">
<p>HTTP::Request, HTTP::Response.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="HTTP::OAI::UserAgent.3pm.html"><span aria-hidden="true">&larr;</span> HTTP::OAI::UserAgent.3pm: Extension of the lwp::useragent for oai http requests</a></li>
   <li class="next"><a href="HTTP::Recorder.3pm.html">HTTP::Recorder.3pm: Record interaction with websites <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
