<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>libcaca-migrating: Migrating from libcaca 0.x to the 1.0 api this section will guide you through the migration of a libcaca 0.x application to the latest api version.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Migrating from libcaca 0.x to the 1.0 api this section will guide you through the migration of a libcaca 0.x application to the latest api version.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="libcaca-migrating (3caca) manual">
  <meta name="twitter:description" content="Migrating from libcaca 0.x to the 1.0 api this section will guide you through the migration of a libcaca 0.x application to the latest api version.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcaca-dev-libcaca-migrating-3caca.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3caca/libcaca-migrating.3caca.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="libcaca-migrating (3caca) manual" />
  <meta property="og:description" content="Migrating from libcaca 0.x to the 1.0 api this section will guide you through the migration of a libcaca 0.x application to the latest api version." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcaca-dev-libcaca-migrating-3caca.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">libcaca-migrating<small> (3caca)</small></h1>
        <p class="lead">Migrating from libcaca 0.x to the 1.0 api this section will guide you through the migration of a libcaca 0.x application to the latest api version.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3caca/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3caca/libcaca-migrating.3caca.html">
      <span itemprop="name">libcaca-migrating: Migrating from libcaca 0.x to the 1.0 api this section will guide you through the migration of a libcaca 0.x application to the latest api version.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcaca-dev/">
      <span itemprop="name">libcaca-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3caca/libcaca-migrating.3caca.html">
      <span itemprop="name">libcaca-migrating: Migrating from libcaca 0.x to the 1.0 api this section will guide you through the migration of a libcaca 0.x application to the latest api version.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Overview</h2>
        <div class="sectioncontent">
<p>The most important change in the 1.0 API of <em>libcaca</em> is the object-oriented design. See these two examples for a rough idea of what changed:</p>
<pre>
#include &lt;caca.h&gt;

/* libcaca program - 0.x API */
int main(void)
{
    /* Initialise libcaca */
    caca_init();
    /* Set window title */
    caca_set_window_title("Window");
    /* Choose drawing colours */
    caca_set_color(CACA_COLOR_BLACK,
                   CACA_COLOR_WHITE);
    /* Draw a string at (0, 0) */
    caca_putstr(0, 0, "Hello world!");
    /* Refresh display */
    caca_refresh();
    /* Wait for a key press event */
    caca_wait_event(CACA_EVENT_KEY_PRESS);
    /* Clean up library */
    caca_end();

    return 0;
}
</pre>

<pre>
#include &lt;caca.h&gt;

/* libcaca program - 1.0 API */
int main(void)
{
    /* Initialise libcaca */
    caca_canvas_t *cv;
    caca_display_t *dp;
    dp = caca_create_display(NULL);
    cv = caca_get_canvas(dp);
    /* Set window title */
    caca_set_display_title(dp, "Window");
    /* Choose drawing colours */
    caca_set_color_ansi(cv, CACA_BLACK,
                            CACA_WHITE);
    /* Draw a string at (0, 0) */
    caca_put_str(cv, 0, 0, "Hello world!");
    /* Refresh display */
    caca_refresh_display();
    /* Wait for a key press event */
    caca_get_event(dp, CACA_EVENT_KEY_PRESS,
                   NULL, -1);
    /* Clean up library */
    caca_free_display(dp);

    return 0;
}

</pre>
<p>Note the following important things:</p><ul>
<li><p>Most functions now take an object handle as their first argument.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Migration strategy</h2>
        <div class="sectioncontent">
<p>You have two ways to migrate your application to use <em>libcaca</em> 1.x:</p><ul>
<li><p>Port your code using the function equivalence list. This is the preferred way because new functions are thread safe and offer much more features to both the programmer and the end user.</p></li><li><p>Use the legacy compatibility layer.</p></li>
</ul><p>Using the compatibility layer is as easy as adding the following three lines:</p>
<pre>
#include &lt;caca.h&gt;

/* libcaca program - 0.x API */
...
</pre>

<pre>
#include &lt;caca.h&gt;
#ifdef CACA_API_VERSION_1
#   include &lt;caca0.h&gt;
#endif

/* libcaca program - 0.x API */
...

</pre>
<p>The modified code is guaranteed to build both with <em>libcaca</em> 0.x and <em>libcaca</em> 1.0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Function equivalence list</h2>
        <div class="sectioncontent">
<h3>Basic functions</h3>
<ul>
<li><p><strong>caca_init()</strong>: use <strong>caca_create_canvas()</strong> to create a <em>libcaca</em> canvas, followed by <strong>caca_create_display()</strong> to attach a <em>libcaca</em> display to it. Alternatively, <strong>caca_create_display()</strong> with a NULL argument will create a canvas automatically.</p></li><li><p><strong>caca_set_delay()</strong>: use <strong>caca_set_display_time()</strong>.</p></li><li><p><strong>caca_get_feature()</strong>: deprecated.</p></li><li><p><strong>caca_set_feature()</strong>: deprecated, see <strong>caca_set_dither_antialias()</strong>, <strong>caca_set_dither_color()</strong> and caca_set_dither_mode() instead.</p></li><li><p><strong>caca_get_feature_name()</strong>: deprecated, see caca_get_dither_mode_list(), <strong>caca_get_dither_antialias_list()</strong> and <strong>caca_get_dither_color_list()</strong> instead.</p></li><li><p><strong>caca_get_rendertime()</strong>: use <strong>caca_get_display_time()</strong>.</p></li><li><p><strong>caca_get_width()</strong>: use <strong>caca_get_canvas_width()</strong>.</p></li><li><p><strong>caca_get_height()</strong>: use <strong>caca_get_canvas_height()</strong>.</p></li><li><p><strong>caca_set_window_title()</strong>: use <strong>caca_set_display_title()</strong>.</p></li><li><p><strong>caca_get_window_width()</strong>: use <strong>caca_get_display_width()</strong>.</p></li><li><p><strong>caca_get_window_height()</strong>: use <strong>caca_get_display_height()</strong>.</p></li><li><p><strong>caca_refresh()</strong>: use <strong>caca_refresh_display()</strong>.</p></li><li><p><strong>caca_end()</strong>: use <strong>caca_free_display()</strong> to detach the <em>libcaca</em> display, followed by <strong>caca_free_canvas()</strong> to free the underlying <em>libcaca</em> canvas. Alternatively, if the canvas was created by <strong>caca_create_display()</strong>, it will be automatically destroyed by <strong>caca_free_display()</strong>.</p></li>
</ul>
<h3>Event handling</h3>
<ul>
<li><p><strong></strong><strong>caca_get_event()</strong><strong></strong><strong>: unchanged, but the event information retrieval changed a lot.</strong></p></li><li><p><strong>caca_wait_event()</strong>: use <strong>caca_get_event()</strong> with a timeout<strong> argument of </strong><strong>-1</strong><strong>.</strong></p></li><li><p><strong></strong><strong>caca_get_mouse_x()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_get_mouse_y()</strong><strong></strong><strong>: unchanged.</strong></p></li>
</ul>
<h3>Character printing</h3>
<ul>
<li><p><strong>caca_set_color()</strong>: use <strong>caca_set_color_ansi()</strong> or <strong>caca_set_color_argb()</strong>.</p></li><li><p><strong>caca_get_fg_color()</strong>: use <strong>caca_get_attr()</strong>.</p></li><li><p><strong>caca_get_bg_color()</strong>: use <strong>caca_get_attr()</strong>.</p></li><li><p><strong>caca_get_color_name()</strong>: this function is now deprecated due to major uselessness.</p></li><li><p><strong>caca_putchar()</strong>: use <strong>caca_put_char()</strong>.</p></li><li><p><strong>caca_putstr()</strong>: use <strong>caca_put_str()</strong>.</p></li><li><p><strong></strong><strong>caca_printf()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong>caca_clear()</strong>: use <strong>caca_clear_canvas()</strong>.</p></li>
</ul>
<h3>Primitives drawing</h3>
<p>These functions are almost unchanged, except for Unicode support and the fact that they now act on a given canvas.</p><ul>
<li><p><strong></strong><strong>caca_draw_line()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_draw_polyline()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_draw_thin_line()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_draw_thin_polyline()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_draw_circle()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_draw_ellipse()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_draw_thin_ellipse()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_fill_ellipse()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_draw_box()</strong><strong></strong><strong>: unchanged, but the argument meaning changed (width and height instead of corner coordinates).</strong></p></li><li><p><strong></strong><strong>caca_draw_thin_box()</strong><strong></strong><strong>: use </strong><strong>caca_draw_thin_box()</strong><strong> or </strong><strong>caca_draw_cp437_box()</strong><strong>, also the argument meaning changed (width and height instead of corner coordinates).</strong></p></li><li><p><strong></strong><strong>caca_fill_box()</strong><strong></strong><strong>: unchanged, but the argument meaning changed (width and height instead of corner coordinates).</strong></p></li><li><p><strong></strong><strong>caca_draw_triangle()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_draw_thin_triangle()</strong><strong></strong><strong>: unchanged.</strong></p></li><li><p><strong></strong><strong>caca_fill_triangle()</strong><strong></strong><strong>: unchanged.</strong></p></li>
</ul>
<h3>Mathematical functions</h3>
<ul>
<li><p><strong>caca_rand()</strong>: unchanged, but the second argument is different, make sure you take that into account.</p></li><li><p><strong>caca_sqrt()</strong>: this function is now deprecated, use your system's <strong>sqrt()</strong> call instead.</p></li>
</ul>
<h3>Sprite handling</h3>
<p>The newly introduced canvases can have several frames. Sprites are hence completely deprecated.</p><ul>
<li><p><strong>caca_load_sprite()</strong>: use caca_import_file().</p></li><li><p><strong>caca_get_sprite_frames()</strong>: use <strong>caca_get_frame_count()</strong>.</p></li><li><p><strong>caca_get_sprite_width()</strong>: use <strong>caca_get_canvas_width()</strong>.</p></li><li><p><strong>caca_get_sprite_height()</strong>: use <strong>caca_get_canvas_height()</strong>.</p></li><li><p><strong>caca_get_sprite_dx()</strong>: use <strong>caca_get_canvas_handle_x()</strong>.</p></li><li><p><strong>caca_get_sprite_dy()</strong>: use <strong>caca_get_canvas_handle_y()</strong>.</p></li><li><p><strong>caca_draw_sprite()</strong>: use <strong>caca_set_frame()</strong> and <strong>caca_blit()</strong>.</p></li><li><p><strong>caca_free_sprite()</strong>: use <strong>caca_free_canvas()</strong>.</p></li>
</ul>
<h3>Bitmap handling</h3>
<p>Bitmaps have been renamed to dithers, because these objects do not in fact store any pixels, they just have information on how bitmaps will be dithered.</p><ul>
<li><p><strong>caca_create_bitmap()</strong>: use <strong>caca_create_dither()</strong>.</p></li><li><p><strong>caca_set_bitmap_palette()</strong>: use <strong>caca_set_dither_palette()</strong>.</p></li><li><p><strong>caca_draw_bitmap()</strong>: use <strong>caca_dither_bitmap()</strong>.</p></li><li><p><strong>caca_free_bitmap()</strong>: use <strong>caca_free_dither()</strong>.</p></li>
</ul>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Compilation</h2>
        <div class="sectioncontent">
<p>The caca-config utility is deprecated in favour of the standard pkg-config interface:</p>
<pre>
gcc -c foobar.c -o foobar.o `pkg-config --cflags caca`
gcc foobar.o -o foobar `pkg-config --libs caca`
</pre>
<p>caca-config is still provided as a convenience tool but may be removed in the future.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="libcaca-font.3caca.html"><span aria-hidden="true">&larr;</span> libcaca-font.3caca: The libcaca font format (version 1) all types are big endian.</a></li>
   <li class="next"><a href="libcaca-news.3caca.html">libcaca-news.3caca: Libcaca news <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
