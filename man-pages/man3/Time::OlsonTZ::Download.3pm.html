<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Time::OlsonTZ::Download: Olson timezone database from source</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Olson timezone database from source">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Time::OlsonTZ::Download (3pm) manual">
  <meta name="twitter:description" content="Olson timezone database from source">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtime-olsontz-download-perl-Time::OlsonTZ::Download-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Time::OlsonTZ::Download.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Time::OlsonTZ::Download (3pm) manual" />
  <meta property="og:description" content="Olson timezone database from source" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtime-olsontz-download-perl-Time::OlsonTZ::Download-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Time::OlsonTZ::Download<small> (3pm)</small></h1>
        <p class="lead">Olson timezone database from source</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Time::OlsonTZ::Download.3pm.html">
      <span itemprop="name">Time::OlsonTZ::Download: Olson timezone database from source</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtime-olsontz-download-perl/">
      <span itemprop="name">libtime-olsontz-download-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Time::OlsonTZ::Download.3pm.html">
      <span itemprop="name">Time::OlsonTZ::Download: Olson timezone database from source</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
        use Time::OlsonTZ::Download;

        $version = Time::OlsonTZ::Download-&gt;latest_version;

        $download = Time::OlsonTZ::Download-&gt;new;

        $version = $download-&gt;version;
        $version = $download-&gt;code_version;
        $version = $download-&gt;data_version;
        $dir = $download-&gt;dir;
        $dir = $download-&gt;unpacked_dir;

        $names = $download-&gt;canonical_names;
        $names = $download-&gt;link_names;
        $names = $download-&gt;all_names;
        $links = $download-&gt;raw_links;
        $links = $download-&gt;threaded_links;
        $countries = $download-&gt;country_selection;

        $files = $download-&gt;data_files;
        $zic = $download-&gt;zic_exe;
        $dir = $download-&gt;zoneinfo_dir;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>An object of this class represents a local copy of the source of the Olson timezone database, possibly used to build binary tzfiles. The source copy always begins by being downloaded from the canonical repository of the Olson database.  This class provides methods to help with extracting useful information from the source.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CLASS METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    Time::OlsonTZ::Download-&gt;latest_version
  </dt>
  <dd>
    <p>Returns the version number of the latest available version of the Olson timezone database.  This requires consulting the repository, but is much cheaper than actually downloading the database.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    Time::OlsonTZ::Download-&gt;new([\s-1VERSION\s0])
  </dt>
  <dd>
    <p>Downloads a copy of the source of the Olson database, and returns an object representing that copy. <em>\s-1VERSION\s0</em>, if supplied, is a version number specifying which version of the database is to be downloaded.  If not supplied, the latest available version will be downloaded.  Version numbers for the Olson database currently consist of a year number and a lowercase letter, such as "\*(C`2010k\*(C'".  Availability of versions other than the latest is limited: until 2011 there was no official archive, so this module is at the mercy of historical mirror administrators' whims.</p>
  </dd>
  <dt>
    Time::OlsonTZ::Download-&gt;new_from_local_source(\s-1ATTR\s0 =&gt; \s-1VALUE\s0)
  </dt>
  <dd>
    <p>Acquires Olson database source locally, without downloading, and returns an object representing a copy of it ready to use like a download. This can be used to work with locally-modified versions of the database. The following attributes may be given:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>source_dir</strong>
  </dt>
  <dd>
    <p>Local directory containing Olson source files.  Must be supplied. The entire directory will be copied into a temporary location to be worked on.</p>
  </dd>
  <dt>
    <strong>version</strong>
  </dt>
  <dd>
    <p>Olson version number to attribute to the source files.  Must be supplied.</p>
  </dd>
  <dt>
    <strong>code_version</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>data_version</strong>
  </dt>
  <dd>
    <p>Olson version number to attribute to the code and data parts of the source files.  Both default to the main version number.</p>
  </dd>

</dl>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<h3>Basic information</h3>
<p>Returns the version number of the database of which a copy is represented by this object. The database consists of code and data parts which are updated semi-independently.  The latest version of the database as a whole consists of the latest version of the code and the latest version of the data.  If both parts are updated at once then they will both get the same version number, and that will be the version number of the database as a whole.  However, in general they may be updated at different times, and a single version of the database may be made up of code and data parts that have different version numbers.  The version number of the database as a whole will then be the version number of the most recently updated part. Returns the version number of the code part of the database of which a copy is represented by this object. Returns the version number of the data part of the database of which a copy is represented by this object. Returns the pathname of the directory in which the files of this download are located.  With this method, there is no guarantee of particular files being available in the directory; see other directory-related methods below that establish particular directory contents. The directory does not move during the lifetime of the download object: this method will always return the same pathname.  The directory and all of its contents, including subdirectories, will be automatically deleted when this object is destroyed.  This will be when the main program terminates, if it is not otherwise destroyed.  Any files that it is desired to keep must be copied to a permanent location. Returns the pathname of the directory in which the downloaded source files have been unpacked.  This is the local temporary directory used by this download.  This method will unpack the files there if they have not already been unpacked.</p>
<h3>Zone metadata</h3>
<p>Returns the set of timezone names that this version of the database defines as canonical.  These are the timezone names that are directly associated with a set of observance data.  The return value is a reference to a hash, in which the keys are the canonical timezone names and the values are all \*(C`undef\*(C'. Returns the set of timezone names that this version of the database defines as links.  These are the timezone names that are aliases for other names.  The return value is a reference to a hash, in which the keys are the link timezone names and the values are all \*(C`undef\*(C'. Returns the set of timezone names that this version of the database defines.  These are the \*(L"canonical_names\*(R" and the \*(L"link_names\*(R". The return value is a reference to a hash, in which the keys are the timezone names and the values are all \*(C`undef\*(C'. Returns details of the timezone name links in this version of the database.  Each link defines one timezone name as an alias for some other timezone name.  The return value is a reference to a hash, in which the keys are the aliases and each value is the preferred timezone name to which that alias directly refers.  It is possible for an alias to point to another alias, or to point to a non-existent name.  For a more processed view of links, see \*(L"threaded_links\*(R". Returns details of the timezone name links in this version of the database.  Each link defines one timezone name as an alias for some other timezone name.  The return value is a reference to a hash, in which the keys are the aliases and each value is the canonical name of the timezone to which that alias refers.  All such canonical names can be found in the \*(L"canonical_names\*(R" hash. Returns information about how timezones relate to countries, intended to aid humans in selecting a geographical timezone.  This information is derived from the \*(C`zone.tab\*(C' and \*(C`iso3166.tab\*(C' files in the database source. The return value is a reference to a hash, keyed by (\s-1ISO\s0 3166 alpha-2 uppercase) country code.  The value for each country is a hash containing these values:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>alpha2_code</strong>
  </dt>
  <dd>
    <p>The \s-1ISO\s0 3166 alpha-2 uppercase country code.</p>
  </dd>
  <dt>
    <strong>olson_name</strong>
  </dt>
  <dd>
    <p>An English name for the country, possibly in a modified form, optimised to help humans find the right entry in alphabetical lists.  This is not necessarily identical to the country's standard short or long name. (For other forms of the name, consult a database of countries, keying by the country code.)</p>
  </dd>
  <dt>
    <strong>regions</strong>
  </dt>
  <dd>
    <p>Information about the regions of the country that use distinct timezones.  This is a hash, keyed by English description of the region. The description is empty if there is only one region.  The value for each region is a hash containing these values:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>olson_description</strong>
  </dt>
  <dd>
    <p>Brief English description of the region, used to distinguish between the regions of a single country.  Empty string if the country has only one region for timezone purposes.  (This is the same string used as the key in the <strong>regions</strong> hash.)</p>
  </dd>
  <dt>
    <strong>timezone_name</strong>
  </dt>
  <dd>
    <p>Name of the Olson timezone used in this region.  This is not necessarily a canonical name (it may be a link).  Typically, where there are aliases or identical canonical zones, a name is chosen that refers to a location in the country of interest.  It is not guaranteed that the named timezone exists in the database (though it always should).</p>
  </dd>
  <dt>
    <strong>location_coords</strong>
  </dt>
  <dd>
    <p>Geographical coordinates of some point within the location referred to in the timezone name.  This is a latitude and longitude, in \s-1ISO\s0 6709 format.</p>
  </dd>

</dl>

  </dd>

</dl>
<p>This data structure is intended to help a human select the appropriate timezone based on political geography, specifically working from a selection of country.  It is of essentially no use for any other purpose. It is not strictly guaranteed that every geographical timezone in the database is listed somewhere in this structure, so it is of limited use in providing information about an already-selected timezone.  It does not include non-geographic timezones at all.  It also does not claim to be a comprehensive list of countries, and does not make any claims regarding the political status of any entity listed: the \*(L"country\*(R" classification is loose, and used only for identification purposes.</p>
<h3>Compiling zone data</h3>
<p>Returns a reference to an array containing the pathnames of all the source data files in the database.  These are located in the local temporary directory used by this download. There is approximately one source data file per continent.  Each data file, in a human-editable textual format, describes the known civil timezones used on the file's continent.  The textual format is not standardised, and is peculiar to the Olson database, so parsing it directly is in principle a dubious proposition, but in practice it is very stable. Returns the pathname of the \*(C`zic\*(C' executable that has been built from the downloaded source.  This is located in the local temporary directory used by this download.  This method will build \*(C`zic\*(C' if it has not already been built. Returns the pathname of the directory containing binary tzfiles (in <em>tzfile</em>\|(5) format) that have been generated from the downloaded source. This is located in the local temporary directory used by this download, and the files within it have names that match the timezone names (as returned by \*(L"all_names\*(R").  This method will generate the tzfiles if they have not already been generated. The optional parameter <em>\s-1OPTIONS\s0</em> controls which kind of tzfiles are desired.  If supplied, it must be a reference to a hash, in which these keys are permitted:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>leaps</strong>
  </dt>
  <dd>
    <p>Truth value, controls whether the tzfiles incorporate information about known leap seconds offsets that account for the known leap seconds. If false (which is the default), the tzfiles have no knowledge of leap seconds, and are intended to be used on a system where \*(C`time_t\*(C' is some flavour of \s-1UT\s0 (as is conventional on Unix and is the \s-1POSIX\s0 standard). If true, the tzfiles know about leap seconds that have occurred between 1972 and the date of the database, and are intended to be used on a system where \*(C`time_t\*(C' is (from 1972 onwards) a linear count of \s-1TAI\s0 seconds (which is a non-standard arrangement).</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Most of what this class does will only work on Unix platforms.  This is largely because the Olson database source is heavily Unix-oriented.</p><p>It also won't be much good if you're not connected to the Internet.</p><p>This class is liable to break if the format of the Olson database source ever changes substantially.  If that happens, an update of this class will be required.  It should at least recognise that it can't perform, rather than do the wrong thing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Time::OlsonTZ::Download&hellip;</h2>
        <div class="sectioncontent">
<p>DateTime::TimeZone::Tzfile, Time::OlsonTZ::Data, <em>tzfile</em>\|(5)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Andrew Main (Zefram) &lt;zefram@fysh.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2010, 2011, 2012 Andrew Main (Zefram) &lt;zefram@fysh.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Time::Format.3pm.html"><span aria-hidden="true">&larr;</span> Time::Format.3pm: Easy-to-use date/time formatting.</a></li>
   <li class="next"><a href="Time::Period.3pm.html">Time::Period.3pm: A perl module to deal with time periods. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
