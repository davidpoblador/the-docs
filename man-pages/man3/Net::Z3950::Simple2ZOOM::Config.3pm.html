<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Net::Z3950::Simple2ZOOM::Config: Configuration file for the simple2zoom gateway</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file for the simple2zoom gateway">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Net::Z3950::Simple2ZOOM::Config (3pm) manual">
  <meta name="twitter:description" content="Configuration file for the simple2zoom gateway">
  <meta name="twitter:image" content="https://www.carta.tech/images/libnet-z3950-simple2zoom-perl-Net::Z3950::Simple2ZOOM::Config-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Net::Z3950::Simple2ZOOM::Config.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Net::Z3950::Simple2ZOOM::Config (3pm) manual" />
  <meta property="og:description" content="Configuration file for the simple2zoom gateway" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libnet-z3950-simple2zoom-perl-Net::Z3950::Simple2ZOOM::Config-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Net::Z3950::Simple2ZOOM::Config<small> (3pm)</small></h1>
        <p class="lead">Configuration file for the simple2zoom gateway</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::Z3950::Simple2ZOOM::Config.3pm.html">
      <span itemprop="name">Net::Z3950::Simple2ZOOM::Config: Configuration file for the simple2zoom gateway</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libnet-z3950-simple2zoom-perl/">
      <span itemprop="name">libnet-z3950-simple2zoom-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::Z3950::Simple2ZOOM::Config.3pm.html">
      <span itemprop="name">Net::Z3950::Simple2ZOOM::Config: Configuration file for the simple2zoom gateway</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 &lt;client&gt;
   &lt;authentication&gt;http://some.url/{user}/pwd={pass}&lt;authentication&gt;
   &lt;database name="srubooks"&gt;
     &lt;zurl&gt;http://z3950.loc.gov:7090/voyager&lt;/zurl&gt;
     &lt;option name="sru"&gt;get&lt;/option&gt;
     &lt;charset&gt;marc-8&lt;/charset&gt;
     &lt;search&gt;
       &lt;querytype&gt;cql&lt;/querytype&gt;
       &lt;map use="4"&gt;&lt;index&gt;title&lt;/index&gt;&lt;/map&gt;
       &lt;map use="1003"&gt;&lt;index&gt;creator&lt;/index&gt;&lt;/map&gt;
     &lt;/search&gt;
   &lt;/database&gt;
 &lt;/client&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The universal Swiss Army Gateway \*(C`simple2zoom\*(C' is configured by a single file, named on the command-line, and expressed in \s-1XML\s0.  This file specifies which back-end databases are supported, how the back-ends are contacted, what character-sets they provide records in, and how to map Z39.50 searches to \s-1CQL\s0.</p><p>The structure of the file is pretty simple.</p><h3>Top Level</h3>

<dl class='dl-vertical'>
  <dt>
    &lt;client&gt;
  </dt>
  <dd>
    <p>The top-level element is &lt;client&gt;.  It contains a single optional &lt;authentication&gt; element, any number of &lt;database&gt; elements and a single optional &lt;search&gt; element.  The second of these specifies how to interpret requests to search in the configured databases; the last provides query mapping specifications for dynamically specified databases.</p>
  </dd>
  <dt>
    &lt;authentication&gt;
  </dt>
  <dd>
    <p>This element contains a \s-1URL\s0 template, specifying the address of an \s-1HTTP\s0 authentication server.  The template must include the special strings \*(C`{user}\*(C' and \*(C`{pass}\*(C', which are substituted with the username and password supplied in the Init request, if any.  The resulting \s-1URL\s0 is actioned and the result examined: any successful response (\s-1HTTP\s0 status 200) indicates that the username/password combination is acceptable, and that the session can continue; any other response (e.g. 401 Authorization Required) results in the Init request being refused with \s-1BIB-1\s0 diagnostic 1014 (Init/AC: Authentication System error). If the &lt;authentication&gt; element is omitted from the configuration, no authentication credentials are required, and any that are provided are ignored. (A trivial example of an authentication server script is included in the Simple2ZOOM distribution, as \*(C`etc/sru-auth\*(C'.)</p>
  </dd>
  <dt>
    &lt;database&gt;
  </dt>
  <dd>
    <p>The &lt;database&gt; element carries a \*(C`name\*(C' attribute specifying the Z39.50 database name by which is it is known to clients.  It contains several complex elements, and is discussed in more detail below.</p>
  </dd>
  <dt>
    &lt;search&gt;
  </dt>
  <dd>
    <p>Each &lt;search&gt; element, whether contained within a specific &lt;database&gt; (see below) or at the top level, consists of a single mandatory &lt;querytype&gt; element followed by any number of &lt;map&gt;s.  The content of &lt;querytype&gt; indicates the type of query that should be sent to the back-end server, with Simple2ZOOM reposible for translating incoming queries as required into that format.  At present, the only supported value is \*(C`cql\*(C'.</p>
  </dd>
  <dt>
    &lt;map&gt;
  </dt>
  <dd>
    <p>Each &lt;map&gt; element carries a \*(C`use\*(C' attribute, which is the numeric value of \s-1BIB-1\s0 use attribute to be supported, and optionally contains a single &lt;index&gt; element which in turn contains the name of the corresponding \s-1CQL\s0 index.  Type-1 searches against the specified \s-1BIB-1\s0 access point are mapped to \s-1CQL\s0 searches against the specified index. If the &lt;index&gt; is omitted within a &lt;map&gt;, then the generated \s-1CQL\s0 query term has no index specified.  This can be useful for \s-1BIB-1\s0 attributes such as 1016 (any) and 1035 (anywhere).</p>
  </dd>

</dl>

<h3>Databases</h3>
<p>The &lt;database&gt; element which describes each database contains the following elements in the specified order.</p><p>In general, &lt;database&gt; entries are of two kinds: those connecting through to a Z39.50 database will have no &lt;search&gt; element, since no query mapping is necessary to translate an incoming Type-1 query; but those connecting to an \s-1SRU\s0 or \s-1SRW\s0 database will have a &lt;search&gt; element with &lt;querytype&gt; set to \*(C`cql\*(C' and containing information on how to map from specified \s-1BIB-1\s0 use attributes to \s-1CQL\s0 indexes.</p>
<dl class='dl-vertical'>
  <dt>
    &lt;zurl&gt;
  </dt>
  <dd>
    <p>Contains the target address of the back-end database (e.g. \*(C`tcp:z3950.indexdata.com/gils\*(C' or \*(C`http://z3950.loc.gov:7090/voyager\*(C').</p>
  </dd>
  <dt>
    &lt;resultsetid&gt;
  </dt>
  <dd>
    <p>Optional.  If provided, it must take one of the following values, and if it is omitted then the value \*(C`fallback\*(C' is assumed:</p><p>When queries are received that include references to existing result-sets, these are translated into result-set references using the \*(C`cql.resultSetId\*(C' index.  It is an error if the server does not support this facility. References to existing result-sets are rewritten as resubmissions of the query.  This works on all servers, but does not reliably give precisely correct results if the database is updated between searches. Result-set references are used when supported, but resubmissions of prior queries are used when this facility is unavailable.</p>
  </dd>
  <dt>
    &lt;nonamedresultsets&gt;
  </dt>
  <dd>
    <p>This is optional.  If provided, it is empty and indicates that the back-end database does not support named result sets.</p>
  </dd>
  <dt>
    &lt;option&gt;
  </dt>
  <dd>
    <p>There may be any number of these. Each &lt;option&gt; element carries a \*(C`name\*(C' attribute and contains a corresponding value.  These are \s-1ZOOM\s0 options which are applied to the connection when it is first created, and can be used to control, for example, the desired \*(C`elementSetName\*(C' or \*(C`schema\*(C' of the records provided by the back-end.  A particularly important option is \*(C`sru\*(C', which may be set to \*(C`get\*(C', \*(C`post\*(C' or \*(C`soap\*(C' to request vanilla \s-1SRU\s0, \s-1SRU\s0 over \s-1POST\s0 and \s-1SRW\s0 respectively.</p>
  </dd>
  <dt>
    &lt;charset&gt;
  </dt>
  <dd>
    <p>Optional.  Contains the name of the character-set in which the back-end target supplies records (e.g. \*(C`marc-8\*(C')</p>
  </dd>
  <dt>
    &lt;search&gt;
  </dt>
  <dd>
    <p>Optional.  Provides specifications for how to search the database, exactly like the top-level &lt;search&gt; element described above.</p>
  </dd>
  <dt>
    &lt;schema&gt;
  </dt>
  <dd>
    <p>Optional and repeatable: each element indicates special handling for when records are requested in a particular schema.  See below.</p>
  </dd>
  <dt>
    &lt;sutrs-record&gt;, &lt;usmarc-record&gt;, &lt;grs1-record&gt;.
  </dt>
  <dd>
    <p>Optional.  Provides specifications for how to construct records in the relevant syntaxes when they are requested by clients. The format is the same in all cases: the specification contains a list of &lt;field&gt; elements, each of which has an \*(C`xpath\*(C' attribute and textual content.  Records are built by accessing the data addressed by the specified XPath expressions, and encoding each as an element addressed as specified by the element content.  The interpretation of the content is different for different record-syntaxes:</p>
<dl class='dl-vertical'>
  <dt>
    \s-1SUTRS\s0
  </dt>
  <dd>
    <p>The content is ignored.</p>
  </dd>
  <dt>
    \s-1USMARC\s0
  </dt>
  <dd>
    <p>The content indicates a \s-1MARC\s0 field by a string consisting of the following parts, in order: a three-digit field number; optionally a slash followed by the first indicator; optionally another slash followed by the second indicator; optionally a dollar sign followed by a subfield tag.  In other words, \s-1MARC\s0 field specifications much match the regular expression \*(C`/^&#92;d&#92;d&#92;d(/w)?(/w?)(&#92;$&#92;w)?$/\*(C'.  It is impossible to specify the second indicator without the first, but a subfield may be specified along with zero, one or two indicators. As usual, a few examples are worth any amount of explanation:         001         260$c         500$a         100/1$a         245/1/0$a</p>
  </dd>
  <dt>
    \s-1GRS-1\s0
  </dt>
  <dd>
    <p>The content indicates an address within a \s-1GRS-1\s0 record in the form of one or more consecutive (type,value) pairs, each enclosed in parentheses.  For example, \*(C`(1,14)\*(C' would indicate an element of type 1 (tagSet-M) with value 14 (localControlNumber).  A longer path such as \*(C`(3,admin)(2,6)\*(C' indicates an abstract field (tagSet-G element 6) within an \*(L"admin\*(R" sub-record.</p>
  </dd>

</dl>

  </dd>

</dl>

<h3>Schemas</h3>
<p>Each &lt;schema&gt; element is empty, but carries the following attributes, which are used to provide records to Z39.50 clients in \s-1MARC\s0 formats.</p>
<dl class='dl-vertical'>
  <dt>
    oid
  </dt>
  <dd>
    <p>Mandatory.  This is the \s-1OID\s0 of a Z39.50 record-syntax which is to be handled by schema mapping.  Requests in this database for this record-syntax are handled as specified. Example value: 1.2.840.10003.5.10</p>
  </dd>
  <dt>
    sru
  </dt>
  <dd>
    <p>Mandatory.  This is the \s-1URI\s0 of an \s-1SRU/W\s0 schema which is requested from the \s-1SRU\s0 or \s-1SRW\s0 back-end in order to fulfill the request. Example value: \*(C`info:srw/schema/1/marcxml-v1.1\*(C'</p>
  </dd>
  <dt>
    format
  </dt>
  <dd>
    <p>Optional.  Indicates which of the \s-1MARC\s0 variants is in use, so that the record can be formatted correctly.  Defaults to \*(C`MARC21\*(C' if omitted. Example values: \*(C`MARC21\*(C', \*(C`USMARC\*(C', \*(C`UNIMARC\*(C'</p>
  </dd>
  <dt>
    encoding
  </dt>
  <dd>
    <p>Optional.  Indicates which character-set to use for the formatted record.  Defaults to \*(C`UTF-8\*(C' if omitted. Example values: \*(C`UTF-8\*(C', &lt;\s-1MARC-8\s0&gt;</p>
  </dd>

</dl>
<p><strong>\s-1NOTE\s0</strong> that in its current form this schema-mapping only works for the specific though common combination of Z39.50 front-end, \s-1SRU\s0 back-end and \s-1MARC\s0 record syntax.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILE SCHEMA</h2>
        <div class="sectioncontent">
<p>The Simple2ZOOM distribution includes, in the \*(C`etc\*(C' directory, an \s-1XML\s0 schema which can be used to validate configuration files.  This schema is provided in four formats:</p>
<dl class='dl-vertical'>
  <dt>
    simple2zoom.rnc
  </dt>
  <dd>
    <p>Relax-NG compact format: a simple, elegant, terse and wholly comprehensible \s-1XML\s0 constraint language that you don't even need to learn in order to understand.  This is the master version: the others are automatically generated from it.</p>
  </dd>
  <dt>
    simple2zoom.rng
  </dt>
  <dd>
    <p>Relax-NG \s-1XML\s0 format: the world seems to have this zany fetish that everything must be specified in \s-1XML\s0, so Relax-NG has an \s-1XML\s0 syntax that corresponds trivially with the much nicer compact syntax.  The principle value of this is that \*(C`xmllint\*(C' understands it.</p>
  </dd>
  <dt>
    simple2zoom.dtd
  </dt>
  <dd>
    <p>An old-fashioned \s-1DTD\s0 (document type definition).</p>
  </dd>
  <dt>
    simple2zoom.xsd
  </dt>
  <dd>
    <p>If you must.</p>
  </dd>

</dl>
<p>Use whichever you like.  For example,</p><p> xmllint --relaxng simple2zoom.rng --noout test.xml  xmllint --dtdvalid simple2zoom.dtd --noout test.xml  xmllint --schema simple2zoom.xsd --noout test.xml</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Net::Z3950::Simple2ZOOM::Config&hellip;</h2>
        <div class="sectioncontent">
<p>The \*(C`simple2zoom\*(C' program.</p><p>The \*(C`Net::Z3950::Simple2ZOOM\*(C' module.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Mike Taylor &lt;mike@indexdata.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENCE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2007 by Index Data.</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.8.8 or, at your option, any later version of Perl 5 you may have available.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Net::Z3950::Simple2ZOOM.3pm.html"><span aria-hidden="true">&larr;</span> Net::Z3950::Simple2ZOOM.3pm: Gateway between z39.50 and sru/srw</a></li>
   <li class="next"><a href="Net::xAP.3pm.html">Net::xAP.3pm: A base class for protocols such as imap, acap, imsp, and icap. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
