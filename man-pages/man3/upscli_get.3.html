<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>upscli_get: Retrieve data from a ups</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Retrieve data from a ups">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="upscli_get (3) manual">
  <meta name="twitter:description" content="Retrieve data from a ups">
  <meta name="twitter:image" content="https://www.carta.tech/images/libupsclient-dev-upscli_get-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/upscli_get.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="upscli_get (3) manual" />
  <meta property="og:description" content="Retrieve data from a ups" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libupsclient-dev-upscli_get-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">upscli_get<small> (3)</small></h1>
        <p class="lead">Retrieve data from a ups</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/upscli_get.3.html">
      <span itemprop="name">upscli_get: Retrieve data from a ups</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libupsclient-dev/">
      <span itemprop="name">libupsclient-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/upscli_get.3.html">
      <span itemprop="name">upscli_get: Retrieve data from a ups</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
#include &lt;upsclient.h&gt;
</pre>

<pre>
int upscli_get(UPSCONN_t *ups, int numq, const char **query,
                       int *numa, char ***answer)
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>upscli_get()</strong> function takes the pointer <em>ups</em> to a UPSCONN_t state structure, and the pointer <em>query</em> to an array of <em>numq</em> query elements. It builds a properly-formatted request from those elements and transmits it to <a href="../man8/upsd.8.html"><strong>upsd</strong>(8)</a>.</p><p>Upon success, the response will be split into separate components. A pointer to those components will be returned in <em>answer</em>. The number of usable answer components will be returned in <em>numa</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USES</h2>
        <div class="sectioncontent">
<p>This function implements the "GET" command in the protocol. As a result, you can use it to request many different things from the server. Some examples are:</p><p>GET NUMLOGINS &lt;ups&gt;</p><p>GET UPSDESC &lt;ups&gt;</p><p>GET VAR &lt;ups&gt; &lt;var&gt;</p><p>GET TYPE &lt;ups&gt; &lt;var&gt;</p><p>GET DESC &lt;ups&gt; &lt;var&gt;</p><p>GET CMDDESC &lt;ups&gt; &lt;cmd&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">QUERY FORMATTING</h2>
        <div class="sectioncontent">
<p>To generate a request for GET NUMLOGINS su700, you would populate query and numq as follows:</p>
<pre>
int numq;
const char *query[2];
</pre>

<pre>
query[0] = "NUMLOGINS";
query[1] = "su700";
numq = 2;
</pre>
<p>All escaping of special characters and quoting of elements with spaces is handled for you inside this function.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ANSWER FORMATTING</h2>
        <div class="sectioncontent">
<p>The raw response from upsd to the above query would be NUMLOGINS su700 1. Since this is split up for you, the values work out like this:</p>
<pre>
numa = 3;
answer[0] = "NUMLOGINS"
answer[1] = "su700"
answer[2] = "1"
</pre>
<p>Notice that the value which you seek typically starts at answer[numq].</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERROR CHECKING</h2>
        <div class="sectioncontent">
<p>This function will check your query against the response from <a href="../man8/upsd.8.html"><strong>upsd</strong>(8)</a>. For example, if you send "VAR" "su700" "ups.status", it will expect to see those at the beginning of the response.</p><p>If the results from <strong>upsd</strong> do not pass this case-insensitive test against your request, this function will return an error. When this happens, <a href="../man3/upscli_upserror.3.html"><strong>upscli_upserror</strong>(3)</a> will return <em>UPSCLI_ERR_PROTOCOL</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ANSWER ARRAY LIFETIME</h2>
        <div class="sectioncontent">
<p>The pointers contained within the <em>answer</em> array are only valid until the next call to a <em>upsclient</em> function which references them. If you need to use data from multiple calls, you must copy it somewhere else first.</p><p>The <em>answer</em> array and its elements may change locations, so you must not rely on previous addresses. You must only use the addresses which were returned by the most recent call. You also must not attempt to use more than <em>numa</em> elements in <em>answer</em>. Such behavior is undefined, and may yield bogus data or a crash.</p><p>The array will be deleted after calling <a href="../man3/upscli_disconnect.3.html"><strong>upscli_disconnect</strong>(3)</a>. Any access after that point is also undefined.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>The <strong>upscli_get()</strong> function returns 0 on success, or -1 if an error occurs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO upscli_get&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/upscli_list_start.3.html"><strong>upscli_list_start</strong>(3)</a>, <a href="../man3/upscli_list_next.3.html"><strong>upscli_list_next</strong>(3)</a>, <a href="../man3/upscli_strerror.3.html"><strong>upscli_strerror</strong>(3)</a>, <a href="../man3/upscli_upserror.3.html"><strong>upscli_upserror</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="upscli_fd.3.html"><span aria-hidden="true">&larr;</span> upscli_fd.3: Get file descriptor for connection</a></li>
   <li class="next"><a href="upscli_init.3.html">upscli_init.3: Initialize upsclient module specifying security properties. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
