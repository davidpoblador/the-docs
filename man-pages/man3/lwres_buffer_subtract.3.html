<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lwres_buffer_subtract: Lightweight resolver buffer management</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Lightweight resolver buffer management">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lwres_buffer_subtract (3) manual">
  <meta name="twitter:description" content="Lightweight resolver buffer management">
  <meta name="twitter:image" content="https://www.carta.tech/images/libbind-dev-lwres_buffer_subtract-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/lwres_buffer_subtract.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lwres_buffer_subtract (3) manual" />
  <meta property="og:description" content="Lightweight resolver buffer management" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libbind-dev-lwres_buffer_subtract-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lwres_buffer_subtract<small> (3)</small></h1>
        <p class="lead">Lightweight resolver buffer management</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/lwres_buffer_subtract.3.html">
      <span itemprop="name">lwres_buffer_subtract: Lightweight resolver buffer management</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libbind-dev/">
      <span itemprop="name">libbind-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/lwres_buffer_subtract.3.html">
      <span itemprop="name">lwres_buffer_subtract: Lightweight resolver buffer management</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
#include &lt;lwres/lwbuffer.h&gt;
</pre>
<p><strong>void lwres_buffer_init(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, void&nbsp;*</strong><em>base</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>length</em><strong>);</strong> <strong>void lwres_buffer_invalidate(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>);</strong> <strong>void lwres_buffer_add(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>n</em><strong>);</strong> <strong>void lwres_buffer_subtract(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>n</em><strong>);</strong> <strong>void lwres_buffer_clear(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>);</strong> <strong>void lwres_buffer_first(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>);</strong> <strong>void lwres_buffer_forward(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>n</em><strong>);</strong> <strong>void lwres_buffer_back(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>n</em><strong>);</strong> <strong>lwres_uint8_t lwres_buffer_getuint8(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>);</strong> <strong>void lwres_buffer_putuint8(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, lwres_uint8_t&nbsp;</strong><em>val</em><strong>);</strong> <strong>lwres_uint16_t lwres_buffer_getuint16(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>);</strong> <strong>void lwres_buffer_putuint16(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, lwres_uint16_t&nbsp;</strong><em>val</em><strong>);</strong> <strong>lwres_uint32_t lwres_buffer_getuint32(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>);</strong> <strong>void lwres_buffer_putuint32(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, lwres_uint32_t&nbsp;</strong><em>val</em><strong>);</strong> <strong>void lwres_buffer_putmem(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, const&nbsp;unsigned&nbsp;char&nbsp;*</strong><em>base</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>length</em><strong>);</strong> <strong>void lwres_buffer_getmem(lwres_buffer_t&nbsp;*</strong><em>b</em><strong>, unsigned&nbsp;char&nbsp;*</strong><em>base</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>length</em><strong>);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>These functions provide bounds checked access to a region of memory where data is being read or written. They are based on, and similar to, the isc_buffer_ functions in the ISC library.</p><p>A buffer is a region of memory, together with a set of related subregions. The <em>used region</em> and the <em>available</em> region are disjoint, and their union is the buffer's region. The used region extends from the beginning of the buffer region to the last used byte. The available region extends from one byte greater than the last used byte to the end of the buffer's region. The size of the used region can be changed using various buffer commands. Initially, the used region is empty.</p><p>The used region is further subdivided into two disjoint regions: the <em>consumed region</em> and the <em>remaining region</em>. The union of these two regions is the used region. The consumed region extends from the beginning of the used region to the byte before the <em>current</em> offset (if any). The <em>remaining</em> region the current pointer to the end of the used region. The size of the consumed region can be changed using various buffer commands. Initially, the consumed region is empty.</p><p>The <em>active region</em> is an (optional) subregion of the remaining region. It extends from the current offset to an offset in the remaining region. Initially, the active region is empty. If the current offset advances beyond the chosen offset, the active region will also be empty.</p>
<pre>
   /------------entire length---------------&#92;&#92;
   /----- used region -----&#92;&#92;/-- available --&#92;&#92;
   +----------------------------------------+
   | consumed  | remaining |                |
   +----------------------------------------+
   a           b     c     d                e
</pre>

<pre>
  a == base of buffer.
  b == current pointer.  Can be anywhere between a and d.
  c == active pointer.  Meaningful between b and d.
  d == used pointer.
  e == length of buffer.
</pre>

<pre>
  a-e == entire length of buffer.
  a-d == used region.
  a-b == consumed region.
  b-d == remaining region.
  b-c == optional active region.
</pre>
<p><strong>lwres_buffer_init()</strong> initializes the <strong>lwres_buffer_t</strong> <em>*b</em> and assocates it with the memory region of size <em>length</em> bytes starting at location <em>base.</em></p><p><strong>lwres_buffer_invalidate()</strong> marks the buffer <em>*b</em> as invalid. Invalidating a buffer after use is not required, but makes it possible to catch its possible accidental use.</p><p>The functions <strong>lwres_buffer_add()</strong> and <strong>lwres_buffer_subtract()</strong> respectively increase and decrease the used space in buffer <em>*b</em> by <em>n</em> bytes. <strong>lwres_buffer_add()</strong> checks for buffer overflow and <strong>lwres_buffer_subtract()</strong> checks for underflow. These functions do not allocate or deallocate memory. They just change the value of used.</p><p>A buffer is re-initialised by <strong>lwres_buffer_clear()</strong>. The function sets used, current and active to zero.</p><p><strong>lwres_buffer_first</strong> makes the consumed region of buffer <em>*p</em> empty by setting current to zero (the start of the buffer).</p><p><strong>lwres_buffer_forward()</strong> increases the consumed region of buffer <em>*b</em> by <em>n</em> bytes, checking for overflow. Similarly, <strong>lwres_buffer_back()</strong> decreases buffer <em>b</em>'s consumed region by <em>n</em> bytes and checks for underflow.</p><p><strong>lwres_buffer_getuint8()</strong> reads an unsigned 8-bit integer from <em>*b</em> and returns it. <strong>lwres_buffer_putuint8()</strong> writes the unsigned 8-bit integer <em>val</em> to buffer <em>*b</em>.</p><p><strong>lwres_buffer_getuint16()</strong> and <strong>lwres_buffer_getuint32()</strong> are identical to <strong>lwres_buffer_putuint8()</strong> except that they respectively read an unsigned 16-bit or 32-bit integer in network byte order from <em>b</em>. Similarly, <strong>lwres_buffer_putuint16()</strong> and <strong>lwres_buffer_putuint32()</strong> writes the unsigned 16-bit or 32-bit integer <em>val</em> to buffer <em>b</em>, in network byte order.</p><p>Arbitrary amounts of data are read or written from a lightweight resolver buffer with <strong>lwres_buffer_getmem()</strong> and <strong>lwres_buffer_putmem()</strong> respectively. <strong>lwres_buffer_putmem()</strong> copies <em>length</em> bytes of memory at <em>base</em> to <em>b</em>. Conversely, <strong>lwres_buffer_getmem()</strong> copies <em>length</em> bytes of memory from <em>b</em> to <em>base</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2004, 2005, 2007 Internet Systems Consortium, Inc. ("ISC")</p><p>Copyright &copy; 2000, 2001 Internet Software Consortium.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lwres_buffer_putuint8.3.html"><span aria-hidden="true">&larr;</span> lwres_buffer_putuint8.3: Lightweight resolver buffer management</a></li>
   <li class="next"><a href="lwres_conf_clear.3.html">lwres_conf_clear.3: Lightweight resolver configuration <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
