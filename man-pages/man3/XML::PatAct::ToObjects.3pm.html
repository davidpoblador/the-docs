<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XML::PatAct::ToObjects: An action module for creating perl objects</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="An action module for creating perl objects">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="XML::PatAct::ToObjects (3pm) manual">
  <meta name="twitter:description" content="An action module for creating perl objects">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxml-perl-XML::PatAct::ToObjects-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/XML::PatAct::ToObjects.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="XML::PatAct::ToObjects (3pm) manual" />
  <meta property="og:description" content="An action module for creating perl objects" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxml-perl-XML::PatAct::ToObjects-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">XML::PatAct::ToObjects<small> (3pm)</small></h1>
        <p class="lead">An action module for creating perl objects</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/XML::PatAct::ToObjects.3pm.html">
      <span itemprop="name">XML::PatAct::ToObjects: An action module for creating perl objects</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxml-perl/">
      <span itemprop="name">libxml-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/XML::PatAct::ToObjects.3pm.html">
      <span itemprop="name">XML::PatAct::ToObjects: An action module for creating perl objects</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use XML::PatAct::ToObjects;

 my $patterns = [ PATTERN =&gt; [ OPTIONS ],
                  PATTERN =&gt; "PERL-CODE",
                  ... ];

 my $matcher = XML::PatAct::ToObjects-&gt;new( Patterns =&gt; $patterns,
                                            Matcher =&gt; $matcher,
                                            CopyId =&gt; 1,
                                            CopyAttributes =&gt; 1 );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>XML::PatAct::ToObjects is a PerlSAX handler for applying pattern-action lists to \s-1XML\s0 parses or trees.  XML::PatAct::ToObjects creates Perl objects of the types and contents of the action items you define.</p><p>New XML::PatAct::ToObject instances are creating by calling `<em>new()</em>'. Parameters can be passed as a list of key, value pairs or a hash. `<em>new()</em>' requires the Patterns and Matcher parameters, the rest are optional:</p>
<dl class='dl-vertical'>
  <dt>
    Patterns
  </dt>
  <dd>
    <p>The pattern-action list to apply.</p>
  </dd>
  <dt>
    Matcher
  </dt>
  <dd>
    <p>An instance of the pattern or query matching module.</p>
  </dd>
  <dt>
    CopyId
  </dt>
  <dd>
    <p>Causes the `\s-1ID\s0' attribute, if any, in a source \s-1XML\s0 element to be copied to an `\s-1ID\s0' attribute in newly created objects.  Note that IDs may be lost of no pattern matches that element or an object is not created (\*(C`-make\*(C') for that element.</p>
  </dd>
  <dt>
    CopyAttributes
  </dt>
  <dd>
    <p>Causes all attributes of the element to be copied to the newly created objects.</p>
  </dd>

</dl>
<p>Each action can either be a list of options defined below or a string containing a fragment of Perl code.  If the action is a string of Perl code then simple then some simple substitutions are made as described further below.</p><p>Options that can be used in an action item containing an option-list:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>-holder</strong>
  </dt>
  <dd>
    <p>Ignore this element, but continue processing it's children (compare to <strong>-ignore</strong>).  \*(C`-pcdata\*(C' may be used with this option.</p>
  </dd>
  <dt>
    <strong>-ignore</strong>
  </dt>
  <dd>
    <p>Ignore (discard) this element and it's children (compare to <strong>-holder</strong>).</p>
  </dd>
  <dt>
    <strong>-pcdata</strong>
  </dt>
  <dd>
    <p>Character data in this element should be copied to the \*(C`Contents\*(C' field.</p>
  </dd>
  <dt>
    <strong>-make</strong> <em>\s-1PACKAGE\s0</em>
  </dt>
  <dd>
    <p>Create an object blessed into <em>\s-1PACKAGE\s0</em>, and continue processing this element and it's children.  <em>\s-1PACKAGE\s0</em> may be the type `\*(C`HASH\*(C'' to simply create an anonyous hash.</p>
  </dd>
  <dt>
    <strong>-args</strong> <em>\s-1ARGUMENTS\s0</em>
  </dt>
  <dd>
    <p>Use <em>\s-1ARGUMENTS\s0</em> in creating the object specified by <strong>-make</strong>.  This is commonly used to copy element attributes into fields in the newly created object.  For example:   -make =&gt; &apos;HASH&apos;, -args =&gt; &apos;URL =&gt; %{href}&apos; would copy the `\*(C`href\*(C'' attribute in an element to the `\*(C`URL\*(C'' field of the newly created hash.</p>
  </dd>
  <dt>
    <strong>-field</strong> <em>\s-1FIELD\s0</em>
  </dt>
  <dd>
    <p>Store this element, object, or children of this element in the parent object's field named by <em>\s-1FIELD\s0</em>.</p>
  </dd>
  <dt>
    <strong>-push-field</strong> <em>\s-1FIELD\s0</em>
  </dt>
  <dd>
    <p>Similar to <strong>-field</strong>, except that <em>\s-1FIELD\s0</em> is an array and the contents are pushed onto that array.</p>
  </dd>
  <dt>
    <strong>-value</strong> <em>\s-1VALUE\s0</em>
  </dt>
  <dd>
    <p>Use <em>\s-1VALUE\s0</em> as a literal value to store in <em>\s-1FIELD\s0</em>, otherwise ignoring this element and it's children.  Only valid with <strong>-field</strong> or <strong>-push-field</strong>.  `\*(C`%{<strong>ATTRIBUTE}\*(C'</strong>' notation can be used to substitute the value of an attribute into the literal value.</p>
  </dd>
  <dt>
    <strong>-as-string</strong>
  </dt>
  <dd>
    <p>Convert the contents of this element to a string (as in \*(C`XML::Grove::AsString\*(C') and store in <em>\s-1FIELD\s0</em>.  Only valid with <strong>-field</strong> or <strong>-push-field</strong>.</p>
  </dd>
  <dt>
    <strong>-grove</strong>
  </dt>
  <dd>
    <p>Copy this element to <em>\s-1FIELD\s0</em> without further processing.  The element can then be processed later as the Perl objects are manipulated.  Only valid with <strong>-field</strong> or <strong>-push-field</strong>.  If ToObjects is used with PerlSAX, this will use XML::Grove::Builder to build the grove element.</p>
  </dd>
  <dt>
    <strong>-grove-contents</strong>
  </dt>
  <dd>
    <p>Used with <strong>-make</strong>, <strong>-grove-contents</strong> creates an object but then takes all of the content of that element and stores it in Contents.</p>
  </dd>

</dl>
<p>If an action item is a string, that string is treated as a fragment of Perl code.  The following simple substitutions are performed on the fragment to provide easy access to the information being converted: The object that caused this action to be called.  If ToObjects is used with PerlSAX this will be a hash with the element name and attributes, with XML::Grove this will be the element object, with Data::Grove it will be the matching object, and with \s-1XML::DOM\s0 it will be an XML::DOM::Element.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The example pattern-action list below will convert the following \s-1XML\s0 representing a Database schema:</p><p>    &lt;schema&gt;       &lt;table&gt;         &lt;name&gt;MyTable&lt;/name&gt;         &lt;summary&gt;A short summary&lt;/summary&gt;         &lt;description&gt;A long description that may           contain a subset of HTML&lt;/description&gt;         &lt;column&gt;           &lt;name&gt;MyColumn1&lt;/name&gt;           &lt;summary&gt;A short summary&lt;/summary&gt;           &lt;description&gt;A long description&lt;/description&gt;           &lt;unique/&gt;           &lt;non-null/&gt;           &lt;default&gt;42&lt;/default&gt;         &lt;/column&gt;       &lt;/table&gt;     &lt;/schema&gt;</p><p>into Perl objects looking like:</p><p>    [       { Name =&gt; "MyTable",         Summary =&gt; "A short summary",         Description =&gt; $grove_object,         Columns =&gt; [           { Name =&gt; "MyColumn1",             Summary =&gt; "A short summary",             Description =&gt; $grove_object,             Unique =&gt; 1,             NonNull =&gt; 1,             Default =&gt; 42           }         ]       }     ]</p><p>Here is a Perl script and pattern-action list that will perform the conversion using the simple name matching pattern module XML::PatAct::MatchName.  The script accepts a Schema \s-1XML\s0 file as an argument ($ARGV[0]) to the script.  This script creates a grove as one of it's objects, so it requires the XML::Grove module.</p><p>    use XML::Parser::PerlSAX;     use XML::PatAct::MatchName;     use XML::PatAct::ToObjects;</p><p>    my $patterns = [       &apos;schema&apos;      =&gt; [ qw{ -holder                                  } ],       &apos;table&apos;       =&gt; [ qw{ -make Schema::Table                      } ],       &apos;name&apos;        =&gt; [ qw{ -field Name -as-string                   } ],       &apos;summary&apos;     =&gt; [ qw{ -field Summary -as-string                } ],       &apos;description&apos; =&gt; [ qw{ -field Description -grove                } ],       &apos;column&apos;      =&gt; [ qw{ -make Schema::Column -push-field Columns } ],       &apos;unique&apos;      =&gt; [ qw{ -field Unique -value 1                   } ],       &apos;non-null&apos;    =&gt; [ qw{ -field NonNull -value 1                  } ],       &apos;default&apos;     =&gt; [ qw{ -field Default -as-string                } ],     ];</p><p>    my $matcher = XML::PatAct::MatchName-&gt;new( Patterns =&gt; $patterns );     my $handler = XML::PatAct::ToObjects-&gt;new( Patterns =&gt; $patterns,                                                Matcher =&gt; $matcher);</p><p>    my $parser = XML::Parser::PerlSAX-&gt;new( Handler =&gt; $handler );     my $schema = $parser-&gt;parse(Source =&gt; { SystemId =&gt; $ARGV[0] } );</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<ul>
<li><p>It'd be nice if patterns could be applied even in <strong>-as-string</strong> and <strong>-grove</strong>.</p></li><li><p>Implement Perl code actions.</p></li><li><p><strong>-as-xml</strong> to write \s-1XML\s0 into the field.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Ken MacLeod, ken@bitsko.slc.ut.us</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO XML::PatAct::ToObjects&hellip;</h2>
        <div class="sectioncontent">
<p><em>perl</em>\|(1), <em>Data::Grove</em>\|(3)</p><p>``Using PatAct Modules'' and ``Creating PatAct Modules'' in libxml-perl.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XML::PatAct::PatternTempl.3pm.html"><span aria-hidden="true">&larr;</span> XML::PatAct::PatternTempl.3pm: A pattern module for</a></li>
   <li class="next"><a href="XML::Perl2SAX.3pm.html">XML::Perl2SAX.3pm: Translate perl sax methods to java/corba style methods <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
