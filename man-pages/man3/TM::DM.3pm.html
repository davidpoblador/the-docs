<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TM::DM: Topic maps, read-only tmdm layer</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Topic maps, read-only tmdm layer">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="TM::DM (3pm) manual">
  <meta name="twitter:description" content="Topic maps, read-only tmdm layer">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtm-perl-TM::DM-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/TM::DM.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TM::DM (3pm) manual" />
  <meta property="og:description" content="Topic maps, read-only tmdm layer" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtm-perl-TM::DM-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">TM::DM<small> (3pm)</small></h1>
        <p class="lead">Topic maps, read-only tmdm layer</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/TM::DM.3pm.html">
      <span itemprop="name">TM::DM: Topic maps, read-only tmdm layer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtm-perl/">
      <span itemprop="name">libtm-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/TM::DM.3pm.html">
      <span itemprop="name">TM::DM: Topic maps, read-only tmdm layer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
   # somehow acquire a map (see TM and its subclasses)
   my $tm = ....

   # put a TMDM layer on top of it
   use TM::DM;
   my $tmdm = new TM::DM (map =&gt; $tm);

   # get the TMDM topic map item
   my $topicmap = $tmdm-&gt;topicmap;

   # ask for all topics
   my @topics = $topicmap-&gt;topics;
   # for all associations
   my @assocs = $topicmap-&gt;associations;

   # get a particular topic
   my $adam = $topicmap-&gt;topic (&apos;adam&apos;);

   # get some of its properties
   $adam-&gt;id;
   $adam-&gt;subjectLocators;
   $adam-&gt;subjectIdentifiers;
   $adam-&gt;parent;
   my @ns = $adam-&gt;names;
   my @os = $adam-&gt;occurrences;

   # similar for assocs
   my @as = $topicmap-&gt;associations (iplayer =&gt; &apos;adam&apos;);
   $as[0]-&gt;type;
   $as[0]-&gt;parent;
   my @rs = $as[0]-&gt;roles;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ABSTRACT</h2>
        <div class="sectioncontent">
<p>This package provides a TMDM-ish (read-only) view on an existing topic map.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>\s-1TMDM\s0, the Topic Maps Data Model</p><p>   http://www.isotopicmaps.org/sam/sam-model/</p><p>is the \s-1ISO\s0 standard for the <em>high-level</em> model for Topic Maps.</p><h3>\s-1TMDM\s0 Concepts</h3>
<p>\s-1TMDM\s0's main concepts are the</p>
<dl class='dl-vertical'>
  <dt>
    <em>topic map item</em>
  </dt>
  <dd>
    <p>containing any number of topic and association items</p>
  </dd>
  <dt>
    <em>topic item</em>
  </dt>
  <dd>
    <p>containing any number of names, occurrence items, subject locators and subject identifiers</p>
  </dd>
  <dt>
    <em>association item</em>
  </dt>
  <dd>
    <p>containing a type, a scope and any number of role items</p>
  </dd>
  <dt>
    <em>name item</em>
  </dt>
  <dd>
    <p>containing a string, a type and a scope</p>
  </dd>
  <dt>
    <em>occurrence item</em>
  </dt>
  <dd>
    <p>containing a data value (together with its data type), a type and a scope</p>
  </dd>
  <dt>
    <em>role item</em>
  </dt>
  <dd>
    <p>containing a type and a player</p>
  </dd>

</dl>
<p>All items have an <em>item id</em> and all (except the map) have a parent which links back to where the item belongs.</p><p>This package implements for each of the above a class and access methods to retrieve actual structure and values from an existing map. Nota bene, there are some deviations from \s-1TMDM:\s0</p><ul>
<li><p>only \s-1ONE\s0 identifier per item is supported</p></li><li><p>at most \s-1ONE\s0 subject locator per topic is supported</p></li><li><p>no variants are supported (might be added at some stage, poke me)</p></li><li><p>a scope consists only of a single topic</p></li><li><p>role items do not have an identity, so they also cannot be reified</p></li>
</ul>
<h3>Modus Operandi</h3>
<p>Before you can use the \s-1TMDM\s0 layer, you need \s-1TM\s0 information in the form of a \s-1TM\s0 object. Any subclass should do, materialized and non-materialized maps should both be fine. Only with such a map you can instantiate a \s-1TMDM\s0 layer:</p><p>  use TM::Materialized::AsTMa;   my $tm = new TM::Materialized::AsTMa (file =&gt; &apos;test.atm&apos;);</p><p>  use TM::DM;   my $tmdm = new TM::DM (map =&gt; $tm);</p><p>Probably the first thing you need to do is to get a handle on the whole topic map:</p><p>  my $topicmap = $tmdm-&gt;topicmap;</p><p>That is delivered as an instance of TM::DM::TopicMap as described below. From there you start to extract topics and associations and that way you then further drill down.</p>
<h3>Implementation Notes</h3>
<p>This implementation only supports <strong>reading</strong> map information, not changing it or modifying the structure of the map. Not that it is impossible to do, but many applications get their map content from elsewhere and a read/write interface is an overkill in these cases.</p><p>All objects generated here are <strong>ephemeral</strong>, i.e. they are only instantiated because you wanted the map information embedded into them. This implies that if you ask for one and the same topic twice, you are getting two copies of the topic information. The following will not work as expected:</p><p>   my $t0 = $topicmap-&gt;topic (&apos;adam&apos;);    my $t1 = $topicmap-&gt;topic (&apos;adam&apos;);</p><p>   warn "have the same topic!" if $t0 == $t1;</p><p>This will work:</p><p>   warn "have the same topic!" if $t0-&gt;id eq $t1-&gt;id;</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERFACES</h2>
        <div class="sectioncontent">
<h3>\s-1TM::DM\s0</h3>
<p>The \s-1TM::DM\s0 class itself does not offer much functionality itself. It only keeps the connection to the background map.</p><p><em>Constructor</em></p><p>The constructor expects exactly one parameter, namely the background map.</p><p><em></em><strong>$tmdm</strong><em></em> = new \s-1TM::DM\s0 (map =&gt; <em></em><strong>$tm</strong><em></em>)</p><p><em>Methods</em></p>
<dl class='dl-vertical'>
  <dt>
    <strong>topicmap</strong>
  </dt>
  <dd>
    <p><em></em><strong>$topicmap</strong><em></em> = <em></em><strong>$tmdm</strong><em></em>-&gt;topicmap This method generates a Topic Map item. See TM::DM::TopicMap .</p>
  </dd>

</dl>

<h3>TM::DM::TopicMap</h3>
<p>This class provides access to all \s-1TMDM\s0 properties:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>id</strong>
  </dt>
  <dd>
    <p>This returns the item identifier.</p>
  </dd>
  <dt>
    <strong>topics</strong>
  </dt>
  <dd>
    <p><em></em><strong>@topics</strong><em></em> = <em></em><strong>$topicmap</strong><em></em>-&gt;topics (<em></em><strong>@list</strong><em>-of-ids</em>) <em></em><strong>@topics</strong><em></em> = <em></em><strong>$topicmap</strong><em></em>-&gt;topics <em></em><strong>@topics</strong><em></em> = <em></em><strong>$topicmap</strong><em></em>-&gt;topics (<em></em><strong>$selection</strong><em>-spec</em>) This method expects a list containing topic valid identifiers and returns for each of the topics a \*(C`TM::DM::Topic\*(C' reference. If any of the input identifiers do not denote a valid topic in the map, undef will be returned in its place. If the parameter list is empty, <strong>all</strong> topics will be returned. Have fun, I mean, use with care. Examples:     # round tripping topic ids     print map { $_-&gt;id } $topicmap-&gt;topics (&apos;abel&apos;, &apos;cain&apos; );</p><p>    print "he again" if $topicmap-&gt;topics (&apos;god&apos;); If a selection is specified then the same language as in \s-1TM\s0 (method \*(C`toplets\*(C') can be used.</p>
  </dd>
  <dt>
    <strong>associations</strong>
  </dt>
  <dd>
    <p><em></em><strong>@as</strong><em></em> = <em></em><strong>$topicmap</strong><em></em>-&gt;associations <em></em><strong>@as</strong><em></em> = <em></em><strong>$topicmap</strong><em></em>-&gt;associations (<em></em><strong>%search_spec</strong><em></em>); This method retrieves the list of \s-1ALL\s0 associations when it is invoked without a search specification. See \s-1TM\s0 for that.</p>
  </dd>
  <dt>
    <strong>reifier</strong>
  </dt>
  <dd>
    <p>This returns the topic item which reifies the association. \*(C`undef\*(C' is returned if there is none.</p>
  </dd>
  <dt>
    <strong>topic</strong>
  </dt>
  <dd>
    <p>This returns a topic item with that id. This method will die if the id is invalid. Note that always new copies are made.</p>
  </dd>

</dl>

<h3>TM::DM::Topic</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>subjectLocators</strong>
  </dt>
  <dd>
    <p>Returns the (only) subject locator (\s-1URI\s0 string) in the topic item or \*(C`undef\*(C' if there is none.</p>
  </dd>
  <dt>
    <strong>subjectIdentifiers</strong>
  </dt>
  <dd>
    <p>Returns a list of \s-1URI\s0 strings. Might be empty.</p>
  </dd>
  <dt>
    <strong>id</strong>
  </dt>
  <dd>
    <p>Returns the item id.</p>
  </dd>
  <dt>
    <strong>parent</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::TopicMap item in which this topic is embedded.</p>
  </dd>
  <dt>
    <strong>names</strong>
  </dt>
  <dd>
    <p><em></em><strong>@names</strong><em></em> = <em></em><strong>$topic</strong><em></em>-&gt;names Returns a list of \s-1TMDM\s0 name items.</p>
  </dd>
  <dt>
    <strong>occurrences</strong>
  </dt>
  <dd>
    <p><em></em><strong>@occurrences</strong><em></em> = <em></em><strong>$topic</strong><em></em>-&gt;occurrences Returns a list of \s-1TMDM\s0 occurrences items.</p>
  </dd>
  <dt>
    <strong>roles</strong>
  </dt>
  <dd>
    <p><em></em><strong>@roles</strong><em></em> = <em></em><strong>$topic</strong><em></em>-&gt;roles Returns a list of TM::DM::Role items where this topic plays any role.</p>
  </dd>

</dl>

<h3>TM::DM::Association</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>id</strong>
  </dt>
  <dd>
    <p>Returns the item id.</p>
  </dd>
  <dt>
    <strong>type</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Topic item which is the type of the association. This is always defined.</p>
  </dd>
  <dt>
    <strong>scope</strong>
  </dt>
  <dd>
    <p>Returns the scope of the association in the form of a single TM::DM::Topic item. This is always defined as for the <em>unconstrained scope</em> the topic \*(C`us\*(C' is used (see \s-1TM::PSI\s0).</p>
  </dd>
  <dt>
    <strong>roles</strong>
  </dt>
  <dd>
    <p><em></em><strong>@roles</strong><em></em> = <em></em><strong>$assoc</strong><em></em>-&gt;roles Returns a list of roles of the association. Each role is a TM::DM::Role item.</p>
  </dd>
  <dt>
    <strong>parent</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::TopicMap item for the embedding map.</p>
  </dd>
  <dt>
    <strong>reifier</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Topic item if this association is reified. \*(C`undef\*(C' otherwise.</p>
  </dd>

</dl>

<h3>TM::DM::Occurrence</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>id</strong>
  </dt>
  <dd>
    <p>Returns the item id.</p>
  </dd>
  <dt>
    <strong>value</strong>
  </dt>
  <dd>
    <p>Returns the value (together with the data type) in the form of a TM::Literal object.</p>
  </dd>
  <dt>
    <strong>type</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Topic item which is the type of the occurrence.  This is always defined.</p>
  </dd>
  <dt>
    <strong>scope</strong>
  </dt>
  <dd>
    <p>Returns the scope of the occurrence in the form of a single TM::DM::Topic item. This is always defined.</p>
  </dd>
  <dt>
    <strong>reifier</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Topic item if this occurrence is reified. \*(C`undef\*(C' otherwise.</p>
  </dd>
  <dt>
    <strong>parent</strong>
  </dt>
  <dd>
    <p>Returns the TM::DM::Topic item of the topic where this occurrence is part of.</p>
  </dd>

</dl>

<h3>TM::DM::Name</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>id</strong>
  </dt>
  <dd>
    <p>Returns the item id.</p>
  </dd>
  <dt>
    <strong>value</strong>
  </dt>
  <dd>
    <p>Returns the string value of the name.</p>
  </dd>
  <dt>
    <strong>type</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Topic item which is the type of the name. This is always defined.</p>
  </dd>
  <dt>
    <strong>scope</strong>
  </dt>
  <dd>
    <p>Returns the scope of the name in the form of a single TM::DM::Topic item. This is always defined.</p>
  </dd>
  <dt>
    <strong>reifier</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Topic item if this name is reified. \*(C`undef\*(C' otherwise.</p>
  </dd>
  <dt>
    <strong>parent</strong>
  </dt>
  <dd>
    <p>Returns the TM::DM::Topic item of the topic where this name is part of.</p>
  </dd>

</dl>

<h3>TM::DM::Role</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>player</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Topic item for the topic which is the player in this role.</p>
  </dd>
  <dt>
    <strong>type</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Topic item for the topic which is the type of this role.</p>
  </dd>
  <dt>
    <strong>parent</strong>
  </dt>
  <dd>
    <p>Returns a TM::DM::Association item of the association where this role is in.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO TM::DM&hellip;</h2>
        <div class="sectioncontent">
<p>\s-1TM\s0, TM::Easy</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 200[68] by Robert Barta, &lt;drrho@cpan.org&gt;</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="TM::Coverage.3pm.html"><span aria-hidden="true">&larr;</span> TM::Coverage.3pm: Topic maps, code coverage</a></li>
   <li class="next"><a href="TM::FAQ.3pm.html">TM::FAQ.3pm: Topic maps, frequently angering quirks <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
