<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PAR: Perl archive toolkit</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Perl archive toolkit">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="PAR (3pm) manual">
  <meta name="twitter:description" content="Perl archive toolkit">
  <meta name="twitter:image" content="https://www.carta.tech/images/libpar-perl-PAR-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/PAR.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="PAR (3pm) manual" />
  <meta property="og:description" content="Perl archive toolkit" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libpar-perl-PAR-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">PAR<small> (3pm)</small></h1>
        <p class="lead">Perl archive toolkit</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/PAR.3pm.html">
      <span itemprop="name">PAR: Perl archive toolkit</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libpar-perl/">
      <span itemprop="name">libpar-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/PAR.3pm.html">
      <span itemprop="name">PAR: Perl archive toolkit</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>(If you want to make an executable that contains all module, scripts and data files, please consult the pp utility instead. pp used to be part of the \s-1PAR\s0 distribution but is now shipped as part of the PAR::Packer distribution instead.)</p><p>Following examples assume a <em>foo.par</em> file in Zip format.</p><p>To use <em>Hello.pm</em> from <em>./foo.par</em>:</p>
<pre>
    % perl -MPAR=./foo.par -MHello
    % perl -MPAR=./foo -MHello          # the .par part is optional
</pre>
<p>Same thing, but search <em>foo.par</em> in the @INC;</p><p>    % perl -MPAR -Ifoo.par -MHello     % perl -MPAR -Ifoo -MHello          # ditto</p><p>Following paths inside the \s-1PAR\s0 file are searched:</p><p>    /lib/     /arch/     /i386-freebsd/              # i.e. $Config{archname}     /5.8.0/                     # i.e. $Config{version}     /5.8.0/i386-freebsd/        # both of the above     /</p><p>\s-1PAR\s0 files may also (recursively) contain other \s-1PAR\s0 files. All files under following paths will be considered as \s-1PAR\s0 files and searched as well:</p><p>    /par/i386-freebsd/          # i.e. $Config{archname}     /par/5.8.0/                 # i.e. $Config{version}     /par/5.8.0/i386-freebsd/    # both of the above     /par/</p><p>Run <em>script/test.pl</em> or <em>test.pl</em> from <em>foo.par</em>:</p><p>    % perl -MPAR foo.par test.pl        # only when $0 ends in &apos;.par&apos;</p><p>However, if the <em>.par</em> archive contains either <em>script/main.pl</em> or <em>main.pl</em>, then it is used instead:</p><p>    % perl -MPAR foo.par test.pl        # runs main.pl; @ARGV is &apos;test.pl&apos;</p><p>Use in a program:</p><p>    use PAR &apos;foo.par&apos;;     use Hello; # reads within foo.par</p><p>    # PAR::read_file() returns a file inside any loaded PARs     my $conf = PAR::read_file(&apos;data/MyConfig.yaml&apos;);</p><p>    # PAR::par_handle() returns an Archive::Zip handle     my $zip = PAR::par_handle(&apos;foo.par&apos;)     my $src = $zip-&gt;memberNamed(&apos;lib/Hello.pm&apos;)-&gt;contents;</p><p>You can also use wildcard characters:</p><p>    use PAR &apos;/home/foo/*.par&apos;;  # loads all PAR files in that directory</p><p>Since version 0.950, you can also use a different syntax for loading <em>.par</em> archives:</p><p>    use PAR { file =&gt; &apos;foo.par&apos; }, { file =&gt; &apos;otherfile.par&apos; };</p><p>Why? Because you can also do this:</p><p>    use PAR { file =&gt; &apos;foo.par, fallback =&gt; 1 };     use Foo::Bar;</p><p>Foo::Bar will be searched in the system libs first and loaded from <em>foo.par</em> if it wasn't found!</p><p>    use PAR { file =&gt; &apos;foo.par&apos;, run =&gt; &apos;myscript&apos; };</p><p>This will load <em>foo.par</em> as usual and then execute the <em>script/myscript</em> file from the archive. Note that your program will not regain control. When <em>script/myscript</em> exits, so does your main program. To make this more useful, you can defer this to runtime: (otherwise equivalent)</p><p>    require PAR;     PAR-&gt;import( { file =&gt; &apos;foo.par&apos;, run =&gt; &apos;myscript&apos; } );</p><p>If you have PAR::Repository::Client installed, you can do this:</p><p>    use PAR { repository =&gt; &apos;http://foo/bar/&apos; };     use Module; # not locally installed!</p><p>And \s-1PAR\s0 will fetch any modules you don't have from the specified \s-1PAR\s0 repository. For details on how this works, have a look at the \s-1SEE\s0 \s-1ALSO\s0 section below. Instead of an \s-1URL\s0 or local path, you can construct an PAR::Repository::Client object manually and pass that to \s-1PAR\s0. If you specify the \*(C`install =&gt; 1\*(C' option in the \*(C`use PAR\*(C' line above, the distribution containing \*(C`Module\*(C' will be permanently installed on your system. (\*(C`use PAR { repository =&gt; &apos;http://foo/bar&apos;, install =&gt; 1 };\*(C')</p><p>Furthermore, there is an \*(C`upgrade =&gt; 1\*(C' option that checks for upgrades in the repository in addition to installing. Please note that an upgraded version of a module is only loaded on the next run of your application.</p><p>Adding the \*(C`dependencies =&gt; 1\*(C' option will enable PAR::Repository::Client's static dependency resolution (PAR::Repository::Client 0.23 and up).</p><p>Finally, you can combine the \*(C`run\*(C' and \*(C`repository\*(C' options to run an application directly from a repository! (And you can add the \*(C`install\*(C' option, too.)</p><p>  use PAR { repository =&gt; &apos;http://foo/bar/&apos;, run =&gt; &apos;my_app&apos; };   # Will not reach this point as we executed my_app,</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module lets you use special zip files, called <strong>P</strong>erl <strong>Ar</strong>chives, as libraries from which Perl modules can be loaded.</p><p>It supports loading \s-1XS\s0 modules by overriding <strong>DynaLoader</strong> bootstrapping methods; it writes shared object file to a temporary file at the time it is needed.</p><p>A <em>.par</em> file is mostly a zip of the <em>blib/</em> directory after the build process of a \s-1CPAN\s0 distribution. To generate a <em>.par</em> file yourself, all you have to do is compress the modules under <em>arch/</em> and <em>lib/</em>, e.g.:</p><p>    % perl Makefile.PL     % make     % cd blib     % zip -r mymodule.par arch/ lib/</p><p>Afterward, you can just use <em>mymodule.par</em> anywhere in your @INC, use <strong>\s-1PAR\s0</strong>, and it will Just Work. Support for generating <em>.par</em> files is going to be in the next (beyond 0.2805) release of Module::Build.</p><p>For convenience, you can set the \*(C`PERL5OPT\*(C' environment variable to \*(C`-MPAR\*(C' to enable \*(C`PAR\*(C' processing globally (the overhead is small if not used); setting it to \*(C`-MPAR=/path/to/mylib.par\*(C' will load a specific \s-1PAR\s0 file.  Alternatively, consider using the <em>par.pl</em> utility bundled with the PAR::Packer distribution, or using the self-contained <em>parl</em> utility which is also distributed with PAR::Packer on machines without \s-1PAR\s0.pm installed.</p><p>Note that self-containing scripts and executables created with <em>par.pl</em> and <em>pp</em> may also be used as <em>.par</em> archives:</p><p>    % pp -o packed.exe source.pl        # generate packed.exe (see PAR::Packer)     % perl -MPAR=packed.exe other.pl    # this also works     % perl -MPAR -Ipacked.exe other.pl  # ditto</p><p>Please see \*(L"\s-1SYNOPSIS\s0\*(R" for most typical use cases.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Settings in <em>\s-1META\s0.yml</em> packed inside the \s-1PAR\s0 file may affect \s-1PAR\s0's operation.  For example, <em>pp</em> provides the \*(C`-C\*(C' (\*(C`--clean\*(C') option to control the default behavior of temporary file creation.</p><p>Currently, <em>pp</em>-generated \s-1PAR\s0 files may attach four PAR-specific attributes in <em>\s-1META\s0.yml</em>:</p><p>    par:       clean: 0          # default value of PAR_CLEAN       signature: &apos;&apos;     # key ID of the SIGNATURE file       verbatim: 0       # was packed prerequisite&apos;s PODs preserved?       version: x.xx     # PAR.pm version that generated this PAR</p><p>User-defined environment variables, like <em>\s-1PAR_GLOBAL_CLEAN\s0</em>, always overrides the ones set in <em>\s-1META\s0.yml</em>.  The algorithm for generating caching/temporary directory is as follows:</p><ul>
<li><p>If <em>\s-1PAR_GLOBAL_TEMP\s0</em> is specified, use it as the cache directory for extracted libraries, and do not clean it up after execution.</p></li><li><p>If <em>\s-1PAR_GLOBAL_TEMP\s0</em> is not set, but <em>\s-1PAR_CLEAN\s0</em> is specified, set <em>\s-1PAR_GLOBAL_TEMP\s0</em> to \*(C`<strong>TEMP/par-</strong><strong>USER/temp-</strong><strong>PID/\*(C'</strong>, cleaning it after execution.</p></li><li><p>If both are not set,  use \*(C`<strong>TEMP/par-</strong><strong>USER/cache-</strong><strong>HASH/\*(C'</strong> as the <em>\s-1PAR_GLOBAL_TEMP\s0</em>, reusing any existing files inside.</p></li>
</ul><p>Here is a description of the variables the previous paths.</p><ul>
<li><p><em>\s-1TEMP\s0</em> is a temporary directory, which can be set via $ENV{PAR_GLOBAL_TMPDIR}, $ENV{TMPDIR}, $ENV{TEMPDIR}, $ENV{TEMP} or $ENV{TMP}, in that order of priority. If none of those are set, <em>C:&#92;TEMP</em>, <em>/tmp</em> are checked.  If neither of them exists, <em>.</em> is used.</p></li><li><p><em>\s-1USER\s0</em> is the user name, or \s-1SYSTEM\s0 if none can be found.  On Win32, this is $Win32::LoginName.  On Unix, this is $ENV{USERNAME} or $ENV{USER}.</p></li><li><p><em>\s-1PID\s0</em> is the process \s-1ID\s0.  Forked children use the parent's \s-1PID\s0.</p></li><li><p><em>\s-1HASH\s0</em> is a crypto-hash of the entire par file or executable, calculated at creation time.  This value can be overloaded with \*(C`pp\*(C''s --tempdir parameter.</p></li>
</ul><p>By default, \s-1PAR\s0 strips \s-1POD\s0 sections from bundled modules. In case that causes trouble, you can turn this off by setting the environment variable \*(C`PAR_VERBATIM\*(C' to 1.</p><h3>import options</h3>
<p>When you \*(L"use \s-1PAR\s0 {...}\*(R" or call \s-1PAR-\s0&gt;import({...}), the following options are available.</p><p>  PAR-&gt;import({ file =&gt; &apos;foo.par&apos; });   # or   PAR-&gt;import({ repository =&gt; &apos;http://foo/bar/&apos; });</p>
<dl class='dl-vertical'>
  <dt>
    file
  </dt>
  <dd>
    <p>The par filename. You must pass <em>one</em> option of either 'file' or 'repository'.</p>
  </dd>
  <dt>
    repository
  </dt>
  <dd>
    <p>A par repository (exclusive of file)</p>
  </dd>
  <dt>
    fallback
  </dt>
  <dd>
    <p>Search the system @INC before the par. Off by default for loading <em>.par</em> files via \*(C`file =\*(C' ...&gt;. On by default for \s-1PAR\s0 repositories. To prefer loading modules from a repository over the locally installed modules, you can load the repository as follows:   use PAR { repository =&gt; &apos;http://foo/bar/&apos;, fallback =&gt; 0 };</p>
  </dd>
  <dt>
    run
  </dt>
  <dd>
    <p>The name of a script to run in the par.  Exits when done.</p>
  </dd>
  <dt>
    no_shlib_unpack
  </dt>
  <dd>
    <p>Skip unpacking bundled dynamic libraries from shlib/$archname.  The client may have them installed, or you may wish to cache them yourself. In either case, they must end up in the standard install location (such as /usr/local/lib/) or in $ENV{\s-1PAR_TEMP\s0} <em>before</em> you require the module which needs them.  If they are not accessible before you require the dependent module, perl will die with a message such as \*(L"cannot open shared object file...\*(R"</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO PAR&hellip;</h2>
        <div class="sectioncontent">
<p>The \s-1PAR\s0 homepage at &lt;http://par.perl.org&gt;.</p><p>PAR::Tutorial, \s-1PAR::FAQ\s0 (For a more current \s-1FAQ\s0, refer to the homepage.)</p><p>The PAR::Packer distribution which contains the packaging utilities: par.pl, parl, pp.</p><p>PAR::Dist for details on \s-1PAR\s0 distributions.</p><p>PAR::Repository::Client for details on accessing \s-1PAR\s0 repositories. PAR::Repository for details on how to set up such a repository.</p><p>Archive::Zip, \*(L"require\*(R" in perlfunc</p><p>ex::lib::zip, Acme::use::strict::with::pride</p><p>Steffen Mueller has detailed slides on using \s-1PAR\s0 for application deployment at http://steffen-mueller.net/talks/appdeployment/ &lt;http://steffen-mueller.net/talks/appdeployment/&gt;.</p><p>\s-1PAR\s0 supports the prefork module. It declares various run-time dependencies so you can use the prefork module to get streamlined processes in a forking environment.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGMENTS</h2>
        <div class="sectioncontent">
<p>Nicholas Clark for pointing out the mad source filter hook within the (also mad) coderef @INC hook, as well as (even madder) tricks one can play with PerlIO to avoid source filtering.</p><p>Ton Hospel for convincing me to ditch the \*(C`Filter::Simple\*(C' implementation.</p><p>Uri Guttman for suggesting \*(C`read_file\*(C' and \*(C`par_handle\*(C' interfaces.</p><p>Antti Lankila for making me implement the self-contained executable options via \*(C`par.pl -O\*(C'.</p><p>See the <em>\s-1AUTHORS\s0</em> file in the distribution for a list of people who have sent helpful patches, ideas or comments.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Audrey Tang &lt;cpan@audreyt.org&gt;</p><p>Steffen Mueller &lt;smueller@cpan.org&gt;</p><p>&lt;http://par.perl.org/&gt; is the official \s-1PAR\s0 website.  You can write to the mailing list at &lt;par@perl.org&gt;, or send an empty mail to &lt;par-subscribe@perl.org&gt; to participate in the discussion.</p><p>Please submit bug reports to &lt;bug-par@rt.cpan.org&gt;. If you need support, however, joining the &lt;par@perl.org&gt; mailing list is preferred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2002-2010 by Audrey Tang &lt;cpan@audreyt.org&gt;. Copyright 2005-2010 by Steffen Mueller &lt;smueller@cpan.org&gt;</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p><p>See &lt;http://www.perl.com/perl/misc/Artistic.html&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="OpaL::where.3pm.html"><span aria-hidden="true">&larr;</span> OpaL::where.3pm: Perl extension for locating system resources.</a></li>
   <li class="next"><a href="PAR::Environment.3pm.html">PAR::Environment.3pm: Index and reference of par environment variables <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
