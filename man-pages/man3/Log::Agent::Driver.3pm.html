<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Log::Agent::Driver: Ancestor class for all log::agent drivers</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ancestor class for all log::agent drivers">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Log::Agent::Driver (3pm) manual">
  <meta name="twitter:description" content="Ancestor class for all log::agent drivers">
  <meta name="twitter:image" content="https://www.carta.tech/images/liblog-agent-perl-Log::Agent::Driver-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Log::Agent::Driver.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Log::Agent::Driver (3pm) manual" />
  <meta property="og:description" content="Ancestor class for all log::agent drivers" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liblog-agent-perl-Log::Agent::Driver-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Log::Agent::Driver<small> (3pm)</small></h1>
        <p class="lead">Ancestor class for all log::agent drivers</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Agent::Driver.3pm.html">
      <span itemprop="name">Log::Agent::Driver: Ancestor class for all log::agent drivers</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liblog-agent-perl/">
      <span itemprop="name">liblog-agent-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Agent::Driver.3pm.html">
      <span itemprop="name">Log::Agent::Driver: Ancestor class for all log::agent drivers</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 @Log::Agent::Driver::XXX::ISA = qw(Log::Agent::Driver);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Log::Agent::Driver class is the root class from which all Log::Agent drivers inherit. It is a <em>deferred</em> class, meaning that it cannot be instantiated directly. All the deferred routines need to be implemented by its heirs to form a valid driver.</p><p>A <em>deferred</em> routine is a routine whose signature and semantics (pre and post conditions, formally) are specified, but not implemented. It allows specification of high-level processings in terms of them, thereby factorizing common code in the ancestors without loosing specialization benefits.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DRIVER LIST</h2>
        <div class="sectioncontent">
<p>The following drivers are currently fully implemented:</p>
<dl class='dl-vertical'>
  <dt>
    Log::Agent::Driver::Default
  </dt>
  <dd>
    <p>This is the default driver which remaps to simple <em>print()</em>, <em>warn()</em> and <em>die()</em> Perl calls.</p>
  </dd>
  <dt>
    Log::Agent::Driver::File
  </dt>
  <dd>
    <p>This driver redirects logs to files. Each logging channel may go to a dedicated file.</p>
  </dd>
  <dt>
    Log::Agent::Driver::Silent
  </dt>
  <dd>
    <p>Silence all the <em>logxxx()</em> routines.</p>
  </dd>
  <dt>
    Log::Agent::Driver::Syslog
  </dt>
  <dd>
    <p>This driver redirects logs to the <em>syslogd</em>\|(8) daemon, which will then handle the dispatching to various logfiles, based on its own configuration.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERFACE</h2>
        <div class="sectioncontent">
<p>You need not read this section if you're only <strong>using</strong> Log::Agent.  However, if you wish to <strong>implement</strong> another driver, then you should probably read it a few times.</p><p>The following routines are <strong>deferred</strong> and therefore need to be defined by the heir: Returns true when both channels $chan1 and $chan2 send their output to the same place.  The purpose is not to have a 100% accurate comparison, which is almost impossible for the Log::Agent::Driver::File driver, but to reasonably detect similarities to avoid duplicating messages to the same output when Carp::Datum is installed and activated. Emit the log entry held in $logstring, at priority $priority and through the specfied $channel name. A trailing \*(L"&#92;n\*(R" is to be added if needed, but the $logstring should not already have one. The $channel name is just a string, and it is up to the driver to map that name to an output device using its own configuration information. The generic <em>logxxx()</em> routines use only \*(C`error\*(C', \*(C`output\*(C' or \*(C`debug\*(C' for channel names. The $priority entry is assumed to have passed through the <em>map_pri()</em> routine, which by default returns an empty string (only the Log::Agent::Driver::Syslog driver needs a priority, for now). Ignore if you don't need that, or redefine <em>map_pri()</em>. The $logstring may not really be a plain string. It can actually be a Log::Agent::Message object with an overloaded stringification routine, so the illusion should be complete.</p>
<dl class='dl-vertical'>
  <dt>
    make
  </dt>
  <dd>
    <p>This is the creation routine. Its signature varies for each driver, naturally.</p>
  </dd>
  <dt>
    prefix_msg($str)
  </dt>
  <dd>
    <p>Prefix the log message string (a Log::Agent::Message object) with driver-specific information (like the configured prefix, the \s-1PID\s0 of the process, etc...). Must return the prefixed string, either as a Log::Agent::Message object or as a plain string. This means you may use normal string operations on the $str variable and let the overloaded stringification perform its magic. Or you may return the $str parameter without modification. There is no default implementation here because this is too driver-specific to choose one good default. And I like making things explicit sometimes.</p>
  </dd>

</dl>
<p>The following routines are implemented in terms of <em>write()</em>, <em>map_pri()</em> and <em>prefix_msg()</em>. The default implementation may need to be redefined for performance or tuning reasons, but simply defining the deferred routines above should bring a reasonable behaviour.</p><p>As an example, here is the default <em>logsay()</em> implementation, which uses the <em>emit()</em> wrapper (see below):</p><p>    sub logsay {         my $self = shift;         my ($str) = @_;         $self-&gt;emit(&apos;output&apos;, &apos;notice&apos;, $str);     }</p><p>Yes, we do show the gory details in a manpage, but inheriting from a class is not for the faint of heart, and requires getting acquainted with the implementation, most of the time.</p><p>The order is not alphabetical here but by increased level of severity (as expected, anyway): Log message to the given channel, at the specified priority/level, obtained through a call to <em>map_pri()</em>.</p>
<dl class='dl-vertical'>
  <dt>
    logsay($str)
  </dt>
  <dd>
    <p>Log message to the \*(C`output\*(C' channel, at the \*(C`notice\*(C' priority.</p>
  </dd>
  <dt>
    logwarn($str)
  </dt>
  <dd>
    <p>Log warning to the \*(C`error\*(C' channel at the \*(C`warning\*(C' priority. Log warning to the \*(C`error\*(C' channel at the \*(C`warning\*(C' priority, from the perspective of the caller.  An additional $offset stack frames are skipped to find the caller (added to the hardwired fixed offset imposed by the overall Log::Agent architecture).</p>
  </dd>
  <dt>
    logerr($str)
  </dt>
  <dd>
    <p>Log error to the \*(C`error\*(C' channel at the \*(C`error\*(C' priority.</p>
  </dd>
  <dt>
    logdie($str)
  </dt>
  <dd>
    <p>Log fatal error to the \*(C`error\*(C' channel at the \*(C`critical\*(C' priority and then call <em>die()</em> with \*(L"$str&#92;n\*(R" as argument. Log a fatal error, from the perspective of the caller. The error is logged to the \*(C`error\*(C' channel at the \*(C`critical\*(C' priority and then <em>Carp::croak()</em> is called with \*(L"$str&#92;n\*(R" as argument.  An additional $offset stack frames are skipped to find the caller (added to the hardwired fixed offset imposed by the overall Log::Agent architecture).</p>
  </dd>
  <dt>
    logconfess($str)
  </dt>
  <dd>
    <p>Confess a fatal error. The error is logged to the \*(C`error\*(C' channel at the \*(C`critical\*(C' priority and then <em>Carp::confess()</em> is called with \*(L"$str&#92;n\*(R" as argument.</p>
  </dd>

</dl>
<p>The following routines have a default implementation but may be redefined for specific drivers: This is a convenient wrapper that calls:  write($channel, $self-&gt;priority($prio), $self-&gt;prefix_msg($str)) using dynamic binding. Converts a (\*(L"priority\*(R", level) tupple to a single priority token suitable for <em>emit()</em>. By default, returns an empty string, which is \s-1OK\s0 only when <em>emit()</em> does not care!</p><p>The following routine is <strong>frozen</strong>. There is no way in Perl to freeze a routine, i.e. to explicitly forbid any redefinition, so this is an informal notification:</p>
<dl class='dl-vertical'>
  <dt>
    priority($priority)
  </dt>
  <dd>
    <p>This routine returns the proper priority for <em>emit()</em> for each of the following strings: \*(L"critical\*(R", \*(L"error\*(R", \*(L"warning\*(R" and \*(L"notice\*(R", which are the hardwired priority strings, as documented above. It derives a logging level from the $priority given and then returns the result of:     map_pri($priority, $level); Therefore, only <em>map_pri()</em> should be redefined.</p>
  </dd>

</dl>
<p>Finally, the following initialization routine is provided: to record the Records the \*(C`prefix\*(C' attribute, as well as the Carp \*(C`penalty\*(C' (amount of extra stack frames to skip). Should be called in the constructor of all the drivers.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Originally written by Raphael Manfredi &lt;Raphael_Manfredi@pobox.com&gt;, currently maintained by Mark Rogaski &lt;mrogaski@cpan.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>  Copyright (C) 1999 Raphael Manfredi.   Copyright (C) 2002 Mark Rogaski; all rights reserved.</p><p>See <em>Log::Agent</em>\|(3) or the \s-1README\s0 file included with the distribution for license information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Log::Agent::Driver&hellip;</h2>
        <div class="sectioncontent">
<p><em>Log::Agent</em>\|(3), <em>Log::Agent::Driver::Default</em>\|(3), <em>Log::Agent::Driver::File</em>\|(3), <em>Log::Agent::Driver::Fork</em>\|(3), <em>Log::Agent::Driver::Silent</em>\|(3), <em>Log::Agent::Driver::Syslog</em>\|(3), <em>Carp::Datum</em>\|(3).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Log::Agent::Channel::Syslog.3pm.html"><span aria-hidden="true">&larr;</span> Log::Agent::Channel::Syslog.3pm: Syslog logging channel for log::agent::logger</a></li>
   <li class="next"><a href="Log::Agent::Driver::Datum.3pm.html">Log::Agent::Driver::Datum.3pm: Interceptor driver to cooperate with carp::datum <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
