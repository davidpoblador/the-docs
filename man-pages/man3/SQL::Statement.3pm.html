<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SQL::Statement: Sql parsing and processing engine</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Sql parsing and processing engine">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="SQL::Statement (3pm) manual">
  <meta name="twitter:description" content="Sql parsing and processing engine">
  <meta name="twitter:image" content="https://www.carta.tech/images/libsql-statement-perl-SQL::Statement-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/SQL::Statement.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="SQL::Statement (3pm) manual" />
  <meta property="og:description" content="Sql parsing and processing engine" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libsql-statement-perl-SQL::Statement-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">SQL::Statement<small> (3pm)</small></h1>
        <p class="lead">Sql parsing and processing engine</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/SQL::Statement.3pm.html">
      <span itemprop="name">SQL::Statement: Sql parsing and processing engine</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libsql-statement-perl/">
      <span itemprop="name">libsql-statement-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/SQL::Statement.3pm.html">
      <span itemprop="name">SQL::Statement: Sql parsing and processing engine</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  # ... depends on what you want to do, see below
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The SQL::Statement module implements a pure Perl \s-1SQL\s0 parsing and execution engine. While it by no means implements full \s-1ANSI\s0 standard, it does support many features including column and table aliases, built-in and user-defined functions, implicit and explicit joins, complex nested search conditions, and other features.</p><p>SQL::Statement is a small embeddable Database Management System (\s-1DBMS\s0). This means that it provides all of the services of a simple \s-1DBMS\s0 except that instead of a persistent storage mechanism, it has two things: 1) an in-memory storage mechanism that allows you to prepare, execute, and fetch from \s-1SQL\s0 statements using temporary tables and 2) a set of software sockets where any author can plug in any storage mechanism.</p><p>There are three main uses for SQL::Statement. One or another (hopefully not all) may be irrelevant for your needs: 1) to access and manipulate data in \s-1CSV\s0, \s-1XML\s0, and other formats 2) to build your own \s-1DBD\s0 for a new data source 3) to parse and examine the structure of \s-1SQL\s0 statements.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSTALLATION</h2>
        <div class="sectioncontent">
<p>There are no prerequisites for using this as a standalone parser. If you want to access persistent stored data, you either need to write a subclass or use one of the \s-1DBI\s0 \s-1DBD\s0 drivers.  You can install this module using \s-1CPAN\s0.pm, \s-1CPANPLUS\s0.pm, \s-1PPM\s0, apt-get, or other packaging tools or you can download the tar.gz file from \s-1CPAN\s0 and use the standard perl mantra:</p><p>  perl Makefile.PL   make   make test   make install</p><p>It works fine on all platforms it has been tested on. On Windows, you can use ppm or with the mantra use nmake, dmake, or make depending on which is available.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<h3>How can I use SQL::Statement to access and modify data?</h3>
<p>SQL::Statement provides the \s-1SQL\s0 engine for a number of existing \s-1DBI\s0 drivers including \s-1DBD::CSV\s0, \s-1DBD::DBM\s0, DBD::AnyData, DBD::Excel, DBD::Amazon, and others.</p><p>These modules provide access to Comma Separated Values, Fixed Length, \s-1XML\s0, \s-1HTML\s0 and many other kinds of text files, to Excel Spreadsheets, to BerkeleyDB and other \s-1DBM\s0 formats, and to non-traditional data sources like on-the-fly Amazon searches.</p><p>If you are interested in accessing and manipulating persistent data, you may not really want to use SQL::Statement directly, but use \s-1DBI\s0 along with one of the DBDs mentioned above instead. You will be using SQL::Statement, but under the hood of the \s-1DBD\s0. See &lt;http://dbi.perl.org&gt; for help with \s-1DBI\s0 and see SQL::Statement::Syntax for a description of the \s-1SQL\s0 syntax that SQL::Statement provides for these modules and see the documentation for whichever \s-1DBD\s0 you are using for additional details.</p>
<h3>How can I use it to parse and examine the structure of \s-1SQL\s0 statements?</h3>
<p>SQL::Statement can be used stand-alone (without a subclass and without \s-1DBI\s0) to parse and examine the structure of \s-1SQL\s0 statements.  See SQL::Statement::Structure for details.</p>
<h3>How can I use it to embed a \s-1SQL\s0 engine in a \s-1DBD\s0 or other module?</h3>
<p>SQL::Statement is designed to be easily embedded in other modules and is especially suited for developing new \s-1DBI\s0 drivers (DBDs). See SQL::Statement::Embed.</p>
<h3>What \s-1SQL\s0 Syntax is supported?</h3>
<p>SQL::Statement supports a small but powerful subset of \s-1SQL\s0 commands. See SQL::Statement::Syntax.</p>
<h3>How can I extend the supported \s-1SQL\s0 syntax?</h3>
<p>You can modify and extend the \s-1SQL\s0 syntax either by issuing \s-1SQL\s0 commands or by subclassing SQL::Statement.  See SQL::Statement::Syntax.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">How can I participate in ongoing development?</h2>
        <div class="sectioncontent">
<p>SQL::Statement is a large module with many potential future directions. You are invited to help plan, code, test, document, or kibbitz about these directions. If you want to join the development team, or just hear more about the development, write Jeff (&lt;jzuckerATcpan.org&gt;) or Jens (&lt;rehsackATcpan.org&gt;) a note.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>The following methods can or must be overridden by derived classes.</p><h3>capability</h3>
<p>  $has_capability = $h-&gt;capability(&apos;capability_name&apos;);</p><p>Returns a true value if the specified capability is available.</p><p>Currently no capabilities are defined and this is a placeholder for future use. It is envisioned it will be used like \*(C`SQL::Eval::Table::capability\*(C'.</p>
<h3>open_table</h3>
<p>The \*(C`open_table\*(C' method must be overridden by derived classes to provide the capability of opening data tables. This is a necessity.</p><p>Arguments given to open_table call: The database memo parameter. See \*(L"execute\*(R". The name of the table to open as parsed from \s-1SQL\s0 statement. A flag indicating the mode (\*(C`CREATE TABLE ...\*(C') the table should be opened with. Set to a true value in create mode. A flag indicating whether the table should be opened for writing (any other than \*(C`SELECT ...\*(C').  Set to a true value if the table is to be opened for write access.</p><p>The following methods are required to use SQL::Statement in a \s-1DBD\s0 (for example).</p>
<h3>new</h3>
<p>Instantiates a new SQL::Statement object.</p><p>Arguments: The \s-1SQL\s0 statement for later actions. An instance of a SQL::Parser object or flags for it's instantiation. If omitted, default flags are used.</p><p>When the basic initialization is completed, \*(C`$self-&gt;prepare($sql, $parser)\*(C' is invoked.</p>
<h3>prepare</h3>
<p>Prepares SQL::Statement to execute a \s-1SQL\s0 statement.</p><p>Arguments: The \s-1SQL\s0 statement to parse and prepare. Instance of a SQL::Parser object to parse the provided \s-1SQL\s0 statement.</p>
<h3>execute</h3>
<p>Executes a prepared statement.</p><p>Arguments: Memo field passed through to calls of the instantiated $table objects or \*(C`open_table\*(C' calls. In \*(C`CREATE\*(C' with subquery, \*(C`$data-&gt;{Database}\*(C' must be a \s-1DBI\s0 database handle object. Bound params via \s-1DBI\s0 ...</p>
<h3>errstr</h3>
<p>Gives the error string of the last error, if any.</p>
<h3>fetch_row</h3>
<p>Fetches the next row from the result data set (implies removing the fetched row from the result data set).</p>
<h3>fetch_rows</h3>
<p>Fetches all (remaining) rows from the result data set.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORT</h2>
        <div class="sectioncontent">
<p>You can find documentation for this module with the perldoc command.</p><p>    perldoc SQL::Statement</p><p>You can also look for information at:</p><ul>
<li><p>\s-1RT:\s0 \s-1CPAN\s0's request tracker http://rt.cpan.org/NoAuth/Bugs.html?Dist=SQL-Statement &lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=SQL-Statement&gt;</p></li><li><p>AnnoCPAN: Annotated \s-1CPAN\s0 documentation http://annocpan.org/dist/SQL-Statement &lt;http://annocpan.org/dist/SQL-Statement&gt;</p></li><li><p>\s-1CPAN\s0 Ratings http://cpanratings.perl.org/s/SQL-Statement &lt;http://cpanratings.perl.org/s/SQL-Statement&gt;</p></li><li><p>\s-1CPAN\s0 Search http://search.cpan.org/dist/SQL-Statement/ &lt;http://search.cpan.org/dist/SQL-Statement/&gt;</p></li>
</ul><h3>Where can I go for help?</h3>
<p>For questions about installation or usage, please ask on the dbi-users@perl.org mailing list (see http://dbi.perl.org) or post a question on PerlMonks (&lt;http://www.perlmonks.org/&gt;, where Jeff is known as jZed).  Jens does not visit PerlMonks on a regular basis.</p><p>If you have a bug report, a patch or a suggestion, please open a new report ticket at \s-1CPAN\s0 (but please check previous reports first in case your issue has already been addressed). You can mail any of the module maintainers, but you are more assured of an answer by posting to the dbi-users list or reporting the issue in \s-1RT\s0.</p><p>Report tickets should contain a detailed description of the bug or enhancement request and at least an easily verifiable way of reproducing the issue or fix. Patches are always welcome, too.</p>
<h3>Where can I go for help with a concrete version?</h3>
<p>Bugs and feature requests are accepted against the latest version only. To get patches for earlier versions, you need to get an agreement with a developer of your choice - who may or not report the issue and a suggested fix upstream (depends on the license you have chosen).</p>
<h3>Business support and maintenance</h3>
<p>For business support you can contact Jens via his \s-1CPAN\s0 email address rehsackATcpan.org. Please keep in mind that business support is neither available for free nor are you eligible to receive any support based on the license distributed with this package.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p>Jochen Wiedmann created the original module as an \s-1XS\s0 (C) extension in 1998. Jeff Zucker took over the maintenance in 2001 and rewrote all of the C portions in Perl and began extending the \s-1SQL\s0 support.  More recently Ilya Sterin provided help with SQL::Parser, Tim Bunce provided both general and specific support, Dan Wright and Dean Arnold have contributed extensively to the code, and dozens of people from around the world have submitted patches, bug reports, and suggestions.</p><p>In 2008 Jens Rehsack took over the maintenance of the extended module from Jeff.  Together with H.Merijn Brand (who has taken \s-1DBD::CSV\s0), Detlef Wartke and Volker Schubbert (especially between 1.16 developer versions until 1.22) and all submitters of bug reports via \s-1RT\s0 a lot of issues have been fixed.</p><p>Thanks to all!</p><p>If you're interested in helping develop SQL::Statement or want to use it with your own modules, feel free to contact Jeff or Jens.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS AND LIMITATIONS</h2>
        <div class="sectioncontent">
<ul>
<li><p>Currently we treat \s-1NULL\s0 and '' as the same in AnyData/CSV mode - eventually fix.</p></li><li><p>No nested C-style comments allowed as \s-1SQL99\s0 says.</p></li><li><p>There are some issues regarding combining outer joins with where clauses.</p></li><li><p>Aggregate functions cannot be used in where clause.</p></li><li><p>Some \s-1SQL\s0 commands/features are not supported (most of them cannot by design), as \*(C`LOCK TABLE\*(C', using indices, sub-selects etc. Currently the statement for missing features is: I plan to create a SQL::Statement v2.00 based on a pure Backus-Naur-Form parser and a fully object oriented command pattern based engine implementation. When the time is available, I will do it. Until then bugs will be fixed or other Perl modules under my maintainership will receive my time. Features which can be added without deep design changes might be applied earlier - especially when their addition allows studying effective ways to implement the feature in upcoming 2.00.</p></li><li><p>Some people report that SQL::Statement is slower since the \s-1XS\s0 parts were implemented in pure Perl. This might be true, but on the other hand a large number of features have been added including support for \s-1ANSI\s0 \s-1SQL\s0 99. For SQL::Statement 1.xx it's not planned to add new \s-1XS\s0 parts.</p></li><li><p>Wildcards are expanded to lower cased identifiers. This might confuse some people, but it was easier to implement. The warning in \s-1DBI\s0 to never trust the case of returned column names should be read more often. If you need to rely on identifiers, always use \*(C`sth-&gt;{NAME_lc}\*(C' or \*(C`sth-&gt;{NAME_uc}\*(C' - never rely on \*(C`sth-&gt;{NAME}\*(C':   $dbh-&gt;{FetchHashKeyName} = &apos;NAME_lc&apos;;   $sth = $dbh-&gt;prepare("SELECT FOO, BAR, ID, NAME, BAZ FROM TABLE");   $sth-&gt;execute;   $hash_ref = $sth-&gt;fetchall_hashref(&apos;id&apos;);   print "Name for id 42 is $hash_ref-&gt;{42}-&gt;{name}&#92;n"; See \*(L"FetchHashKeyName\*(R" in \s-1DBI\s0 for more information.</p></li><li><p>Unable to use the same table twice with different aliases. <strong>Workaround</strong>: Temporary tables: \*(C`CREATE TEMP TABLE t_foo AS SELECT * FROM foo\*(C'. Than both tables can be used independently.</p></li>
</ul><p>Patches to fix bugs/limitations (or a grant to do it) would be very welcome. Please note, that any patches <strong>must</strong> successfully pass all the \*(C`SQL::Statement\*(C', DBD::File and \s-1DBD::CSV\s0 tests and must be a general improvement.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR AND COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Jochen Wiedmann created the original module as an \s-1XS\s0 (C) extension in 1998. Jeff Zucker took over the maintenance in 2001 and rewrote all of the C portions in perl and began extending the \s-1SQL\s0 support. Since 2008, Jens Rehsack is the maintainer.</p><p>Copyright (c) 2001,2005 by Jeff Zucker: jzuckerATcpan.org Copyright (c) 2007-2010 by Jens Rehsack: rehsackATcpan.org</p><p>Portions Copyright (C) 1998 by Jochen Wiedmann: jwiedATcpan.org</p><p>All rights reserved.</p><p>You may distribute this module under the terms of either the \s-1GNU\s0 General Public License or the Artistic License, as specified in the Perl \s-1README\s0 file.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="SQL::ReservedWords::Sybase.3pm.html"><span aria-hidden="true">&larr;</span> SQL::ReservedWords::Sybase.3pm: Reserved sql words by sybase</a></li>
   <li class="next"><a href="SQL::Statement::Embed.3pm.html">SQL::Statement::Embed.3pm: Embed a sql engine in a dbd or module <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
