<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SVN::Notify::Mirror::Rsync: Mirror a repository path via rsync</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Mirror a repository path via rsync">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="SVN::Notify::Mirror::Rsync (3pm) manual">
  <meta name="twitter:description" content="Mirror a repository path via rsync">
  <meta name="twitter:image" content="https://www.carta.tech/images/libsvn-notify-mirror-perl-SVN::Notify::Mirror::Rsync-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/SVN::Notify::Mirror::Rsync.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="SVN::Notify::Mirror::Rsync (3pm) manual" />
  <meta property="og:description" content="Mirror a repository path via rsync" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libsvn-notify-mirror-perl-SVN::Notify::Mirror::Rsync-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">SVN::Notify::Mirror::Rsync<small> (3pm)</small></h1>
        <p class="lead">Mirror a repository path via rsync</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/SVN::Notify::Mirror::Rsync.3pm.html">
      <span itemprop="name">SVN::Notify::Mirror::Rsync: Mirror a repository path via rsync</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libsvn-notify-mirror-perl/">
      <span itemprop="name">libsvn-notify-mirror-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/SVN::Notify::Mirror::Rsync.3pm.html">
      <span itemprop="name">SVN::Notify::Mirror::Rsync: Mirror a repository path via rsync</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Use <em>svnnotify</em> in <em>post-commit</em>:</p>
<pre>
  svnnotify --repos-path "$1" --revision "$2" &#92;
   --handler Mirror::Rsync --to "/path/to/local/htdocs" &#92;
   [--svn-binary /full/path/to/svn] &#92;
   --rsync-host remote_server &#92;
   [--rsync-delete=[yes|no]] &#92;
   [--rsync-dest "/path/on/remote/server"] &#92;
   [--rsync-args arg1 [--rsync-args arg2...]]
   [[--rsync-ssh] [--ssh-user remote_user] &#92;
   [--ssh-identity /home/user/.ssh/id_rsa]]
</pre>
<p>or better yet, use SVN::Notify::Config for a more sophisticated setup:</p><p>  #!/usr/bin/perl -MSVN::Notify::Config=$0   --- #YAML:1.0   &apos;&apos;:     PATH: "/usr/bin:/usr/local/bin"   &apos;path/in/repository&apos;:     handler: Mirror     to: "/path/to/www/htdocs"   &apos;some/other/path/in/repository&apos;:     handler: Mirror     to: "/path/to/local/www/htdocs"     rsync-host: "remote_host"     rsync-dest: "/path/on/remote/www/htdocs"     ssh-user: "remote_user"     ssh-identity: "/home/user/.ssh/id_rsa"</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Keep a directory in sync with a portion of a Subversion repository. Typically used to keep a development web server in sync with the changes made to the repository.  This directory can either be on the same box as the repository itself, or it can be remote (via \s-1SSH\s0 connection).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>Depending on whether the target is a \*(L"Local Mirror\*(R" or a Remote Mirror, there are different options available.  All options are available either as a commandline option to svnnotify or as a hash key in SVN::Notify::Config (see their respective documentation for more details).</p><h3>Working Copy on Local host</h3>
<p>Because 'svn export' is not able to be consistently updated, the local rsync'd directory must be a full working copy.  The remote server will only contain the ordinary files (no Subversion admin files).</p><p>The files in the working copy must be writeable (preferrably owned) by the user identity executing the hook script (this is the user identity that is running Apache or svnserve respectively).</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Local Mirror</h2>
        <div class="sectioncontent">
<p>Please see \*(L" SVN::Notify::Mirror \*(R" for details.</p><h3>Remote Mirror</h3>
<p>Used for directories not located on the same machine as the repository itself.  Typically, this might be a production web server located in a \s-1DMZ\s0, so special consideration must be paid to security concerns.  In particular, the remote mirror server may not be able to directly access the repository box.</p><ul>
<li><p>rsync-host This value is required and must be the hostname or \s-1IP\s0 address of the remote host (where the mirror directories reside).</p></li><li><p>rsync-delete The default mode of operation is to delete remote files which are not present in the local working copy.  \s-1NOTE:\s0 this will <strong>delete</strong> any unversioned files in the remote directory tree.  Unless you have all of your files under version control, you should pass the \*(C`--no-rsync-delete\*(C' or \*(C`--rsync-delete no\*(C' option.</p></li><li><p>rsync-dest This optional value specifies the path to update on the remote host.  If you do not specify this value, the same path as passed in as the \*(C`--to\*(C' parameter will be used (this may not be what you meant to do).</p></li><li><p>rsync-args This optional parameter can be used to pass additional commandline options to the rsync command.  You can use this multiple times in order to pass multiple options.  The default args are \*(C`--archive --compress\*(C'.  See the \*(C`rsync-ssh\*(C' options for using \s-1SSH\s0 instead of \s-1RSH\s0 (rather than pass those commands via \*(C`--rsync-args\*(C'</p></li><li><p>rsync-ssh This optional parameter signals that you wish to use \s-1SSH\s0 instead of whatever the default remote shell program is configured in your copy of rsync.  You may need to set one or more of the \*(C`ssh-*\*(C' parameters as well.</p></li><li><p>ssh-user If the remote user is different than the local user executing the postcommit script, you can specify it with this parameter.  You would often use this in conjunction with the next parameter.</p></li><li><p>ssh-identity This value may be optional and should be the full path to the local identity file being used to authenticate with the remote host. If you are setting the ssh-user to be something other than the local user name, you will typically also have to set the ssh-identity.</p></li>
</ul>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>John Peacock &lt;jpeacock@cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2005-2008 John Peacock</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p><p>The full text of the license can be found in the \s-1LICENSE\s0 file included with this module.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO SVN::Notify::Mirror::Rsync&hellip;</h2>
        <div class="sectioncontent">
<p>SVN::Notify, SVN::Notify::Config, SVN::Notify::Mirror</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="SVN::Notify::Mirror::ConfigData.3pm.html"><span aria-hidden="true">&larr;</span> SVN::Notify::Mirror::ConfigData.3pm: Configuration for svn::notify::mirror</a></li>
   <li class="next"><a href="SVN::Notify::Mirror::SSH.3pm.html">SVN::Notify::Mirror::SSH.3pm: Mirror a repository path via ssh <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
