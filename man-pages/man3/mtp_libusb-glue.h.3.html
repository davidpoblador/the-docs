<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mtp_libusb-glue.h: Libusb-glue.h</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Libusb-glue.h">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mtp_libusb-glue.h (3) manual">
  <meta name="twitter:description" content="Libusb-glue.h">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmtp-doc-mtp_libusb-glue.h-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/mtp_libusb-glue.h.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mtp_libusb-glue.h (3) manual" />
  <meta property="og:description" content="Libusb-glue.h" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmtp-doc-mtp_libusb-glue.h-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mtp_libusb-glue.h<small> (3)</small></h1>
        <p class="lead">Libusb-glue.h</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/mtp_libusb-glue.h.3.html">
      <span itemprop="name">mtp_libusb-glue.h: Libusb-glue.h</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmtp-doc/">
      <span itemprop="name">libmtp-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/mtp_libusb-glue.h.3.html">
      <span itemprop="name">mtp_libusb-glue.h: Libusb-glue.h</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include 'ptp.h'</p><p>#include 'libmtp.h'</p><p>#include 'device-flags.h'</p><h3>Data Structures</h3>
<p>struct <strong>_PTP_USB</strong></p>
<h3>Macros</h3>
<p>#define <strong>LIBMTP_USB_DEBUG</strong>(format, args...)</p><p>#define <strong>LIBMTP_USB_DATA</strong>(buffer, length, base)</p><p>#define <strong>FLAG_BROKEN_MTPGETOBJPROPLIST_ALL</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_BROKEN_MTPGETOBJPROPLIST_ALL</strong>)</p><p>#define <strong>FLAG_UNLOAD_DRIVER</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_UNLOAD_DRIVER</strong>)</p><p>#define <strong>FLAG_BROKEN_MTPGETOBJPROPLIST</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_BROKEN_MTPGETOBJPROPLIST</strong>)</p><p>#define <strong>FLAG_NO_ZERO_READS</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_NO_ZERO_READS</strong>)</p><p>#define <strong>FLAG_IRIVER_OGG_ALZHEIMER</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_IRIVER_OGG_ALZHEIMER</strong>)</p><p>#define <strong>FLAG_ONLY_7BIT_FILENAMES</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_ONLY_7BIT_FILENAMES</strong>)</p><p>#define <strong>FLAG_NO_RELEASE_INTERFACE</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_NO_RELEASE_INTERFACE</strong>)</p><p>#define <strong>FLAG_IGNORE_HEADER_ERRORS</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_IGNORE_HEADER_ERRORS</strong>)</p><p>#define <strong>FLAG_BROKEN_SET_OBJECT_PROPLIST</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_BROKEN_SET_OBJECT_PROPLIST</strong>)</p><p>#define <strong>FLAG_OGG_IS_UNKNOWN</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_OGG_IS_UNKNOWN</strong>)</p><p>#define <strong>FLAG_BROKEN_SET_SAMPLE_DIMENSIONS</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_BROKEN_SET_SAMPLE_DIMENSIONS</strong>)</p><p>#define <strong>FLAG_ALWAYS_PROBE_DESCRIPTOR</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_ALWAYS_PROBE_DESCRIPTOR</strong>)</p><p>#define <strong>FLAG_PLAYLIST_SPL_V1</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_PLAYLIST_SPL_V1</strong>)</p><p>#define <strong>FLAG_PLAYLIST_SPL_V2</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_PLAYLIST_SPL_V2</strong>)</p><p>#define <strong>FLAG_PLAYLIST_SPL</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & (<strong>DEVICE_FLAG_PLAYLIST_SPL_V1</strong> | <strong>DEVICE_FLAG_PLAYLIST_SPL_V2</strong>))</p><p>#define <strong>FLAG_CANNOT_HANDLE_DATEMODIFIED</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_CANNOT_HANDLE_DATEMODIFIED</strong>)</p><p>#define <strong>FLAG_BROKEN_SEND_OBJECT_PROPLIST</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_BROKEN_SEND_OBJECT_PROPLIST</strong>)</p><p>#define <strong>FLAG_BROKEN_BATTERY_LEVEL</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_BROKEN_BATTERY_LEVEL</strong>)</p><p>#define <strong>FLAG_FLAC_IS_UNKNOWN</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_FLAC_IS_UNKNOWN</strong>)</p><p>#define <strong>FLAG_UNIQUE_FILENAMES</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_UNIQUE_FILENAMES</strong>)</p><p>#define <strong>FLAG_SWITCH_MODE_BLACKBERRY</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_SWITCH_MODE_BLACKBERRY</strong>)</p><p>#define <strong>FLAG_LONG_TIMEOUT</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_LONG_TIMEOUT</strong>)</p><p>#define <strong>FLAG_FORCE_RESET_ON_CLOSE</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_FORCE_RESET_ON_CLOSE</strong>)</p><p>#define <strong>FLAG_BROKEN_GET_OBJECT_PROPVAL</strong>(a)   ((a)-&gt;rawdevice.device_entry.device_flags & <strong>DEVICE_FLAG_BROKEN_GET_OBJECT_PROPVAL</strong>)</p><p>#define <strong>PTP_CD_RC_CONNECTED</strong>   0</p><p>#define <strong>PTP_CD_RC_NO_DEVICES</strong>   1</p><p>#define <strong>PTP_CD_RC_ERROR_CONNECTING</strong>   2</p>
<h3>Typedefs</h3>
<p>typedef struct <strong>_PTP_USB</strong> <strong>PTP_USB</strong></p>
<h3>Functions</h3>
<p>void <strong>dump_usbinfo</strong> (<strong>PTP_USB</strong> *ptp_usb)</p><p>const char * <strong>get_playlist_extension</strong> (<strong>PTP_USB</strong> *ptp_usb)</p><p>void <strong>close_device</strong> (<strong>PTP_USB</strong> *ptp_usb, <strong>PTPParams</strong> *params)</p><p><strong>LIBMTP_error_number_t</strong> <strong>configure_usb_device</strong> (<strong>LIBMTP_raw_device_t</strong> *device, <strong>PTPParams</strong> *params, void **usbinfo)</p><p>void <strong>set_usb_device_timeout</strong> (<strong>PTP_USB</strong> *ptp_usb, int timeout)</p><p>void <strong>get_usb_device_timeout</strong> (<strong>PTP_USB</strong> *ptp_usb, int *timeout)</p><p>int <strong>guess_usb_speed</strong> (<strong>PTP_USB</strong> *ptp_usb)</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>Low-level USB interface glue towards libusb.</p><p>Copyright (C) 2005-2007 Richard A. Low richard@wentnet.com Copyright (C) 2005-2012 Linus Walleij triad@df.lth.se Copyright (C) 2006-2011 Marcus Meissner Copyright (C) 2007 Ted Bullock Copyright (C) 2008 Chris Bagwell chris@cnpbagwell.com</p><p>This library is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p><p>You should have received a copy of the GNU Lesser General Public License along with this library; if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</p><p>Created by Richard Low on 24/12/2005. Modified by Linus Walleij</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Macro Definition Documentation</h2>
        <div class="sectioncontent">
<h3>#define LIBMTP_USB_DATA(buffer, length, base)</h3>
<p><strong>Value:</strong></p>
<pre>
do {      if ((LIBMTP_debug & LIBMTP_DEBUG_DATA) != 0) &#92;
      data_dump_ascii (stdout, buffer, length, base);    } while (0)
</pre>

<h3>#define LIBMTP_USB_DEBUG(format, args...)</h3>
<p><strong>Value:</strong></p>
<pre>
do {      if ((LIBMTP_debug & LIBMTP_DEBUG_USB) != 0)        fprintf(stdout, "LIBMTP %s[%d]: " format, __FUNCTION__, __LINE__, ##args);    } while (0)
</pre>
<p>Debug macro</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Typedef Documentation</h2>
        <div class="sectioncontent">
<h3>typedef struct \fB_PTP_USB\fP \fBPTP_USB\fP</h3>
<p>Internal USB struct.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Function Documentation</h2>
        <div class="sectioncontent">
<h3>\fBLIBMTP_error_number_t\fP configure_usb_device (\fBLIBMTP_raw_device_t\fP *device, \fBPTPParams\fP *params, void **usbinfo)</h3>
<p>This function assigns params and usbinfo given a raw device as input.</p><p><strong>Parameters:</strong></p><p><em>device</em> the device to be assigned.</p><p><em>usbinfo</em> a pointer to the new usbinfo.</p><p><strong>Returns:</strong></p><p>an error code.</p><p>References LIBMTP_raw_device_struct::device_entry, LIBMTP_device_entry_struct::product_id, _PTP_USB::rawdevice, and LIBMTP_device_entry_struct::vendor_id.</p><p>Referenced by LIBMTP_Open_Raw_Device_Uncached().</p>
<h3>void dump_usbinfo (\fBPTP_USB\fP *ptp_usb)</h3>
<p>This routine just dumps out low-level USB information about the current device.</p><p><strong>Parameters:</strong></p><p><em>ptp_usb</em> the USB device to get information from.</p><p>References LIBMTP_raw_device_struct::bus_location, LIBMTP_raw_device_struct::device_entry, LIBMTP_device_entry_struct::device_flags, LIBMTP_raw_device_struct::devnum, LIBMTP_device_entry_struct::product, LIBMTP_device_entry_struct::product_id, _PTP_USB::rawdevice, LIBMTP_device_entry_struct::vendor, and LIBMTP_device_entry_struct::vendor_id.</p><p>Referenced by LIBMTP_Dump_Device_Info().</p>
<h3>const char* get_playlist_extension (\fBPTP_USB\fP *ptp_usb)</h3>
<p>Retrieve the apropriate playlist extension for this device. Rather hacky at the moment. This is probably desired by the managing software, but when creating lists on the device itself you notice certain preferences.</p><p><strong>Parameters:</strong></p><p><em>ptp_usb</em> the USB device to get suggestion for.</p><p><strong>Returns:</strong></p><p>the suggested playlist extension.</p><p>Referenced by LIBMTP_Create_New_Playlist().</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for libmtp from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mtp_libmtp.h.3.html"><span aria-hidden="true">&larr;</span> mtp_libmtp.h.3: Libmtp.h</a></li>
   <li class="next"><a href="mtp_lv_data_header.3.html">mtp_lv_data_header.3: Lv_data_header <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
