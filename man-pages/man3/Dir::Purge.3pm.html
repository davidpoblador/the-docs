<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dir::Purge: Purge directories to a given number of files.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Purge directories to a given number of files.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Dir::Purge (3pm) manual">
  <meta name="twitter:description" content="Purge directories to a given number of files.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libdir-purge-perl-Dir::Purge-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Dir::Purge.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Dir::Purge (3pm) manual" />
  <meta property="og:description" content="Purge directories to a given number of files." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libdir-purge-perl-Dir::Purge-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Dir::Purge<small> (3pm)</small></h1>
        <p class="lead">Purge directories to a given number of files.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Dir::Purge.3pm.html">
      <span itemprop="name">Dir::Purge: Purge directories to a given number of files.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libdir-purge-perl/">
      <span itemprop="name">libdir-purge-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Dir::Purge.3pm.html">
      <span itemprop="name">Dir::Purge: Purge directories to a given number of files.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  perl -MDir::Purge -e &apos;purgedir (5, @ARGV)&apos; /spare/backups
</pre>
<p>  use Dir::Purge;   purgedir ({keep =&gt; 5, strategy =&gt; "by_age", verbose =&gt; 1}, "/spare/backups");</p><p>  use Dir::Purge qw(purgedir_by_age);   purgedir_by_age (5, "/spare/backups");</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Dir::Purge implements functions to reduce the number of files in a directory according to a strategy. It currently provides one strategy: removal of files by age.</p><p>By default, the module exports one user subroutine: \*(C`purgedir\*(C'.</p><p>The first argument of \*(C`purgedir\*(C' should either be an integer, indicating the number of files to keep in each of the directories, or a reference to a hash with options. In either case, a value for the number of files to keep is mandatory.</p><p>The other arguments are the names of the directories that must be purged. Note that this process is not recursive. Also, hidden files (name starts with a \*(C`.\*(C') and non-plain files (e.g., directories, symbolic links) are not taken into account.</p><p>All directory arguments and options are checked before anything else is done. In particular, all arguments should point to existing directories and the program must have read, write, and search (execute) access to the directories.</p><p>One additional function, \*(C`purgedir_by_age\*(C', can be exported on demand, or called by its fully qualified name. \*(C`purgedir_by_age\*(C' calls \*(C`purgedir\*(C' with the \*(L"by age\*(R" purge strategy preselected. Since this happens to be the default strategy for \*(C`purgedir\*(C', calling \*(C`purgedir_by_age\*(C' is roughly equivalent to calling \*(C`purgedir\*(C'.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNING</h2>
        <div class="sectioncontent">
<p>Removing files is a quite destructive operation. Supply the \*(C`test\*(C' option, described below, to dry-run before production.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Options are suppled by providing a hash reference as the first argument. The following calls are equivalent:</p><p>  purgedir ({keep =&gt; 3, test =&gt; 1}, "/spare/backups");   purgedir_by_age ({keep =&gt; 3, test =&gt; 1}, "/spare/backups");   purgedir ({strategy =&gt; "by_age", keep =&gt; 3, test =&gt; 1}, "/spare/backups");</p><p>All subroutines take the same arguments.</p>
<dl class='dl-vertical'>
  <dt>
    keep
  </dt>
  <dd>
    <p>The number of files to keep. A negative number will reverse the strategy. See option \*(C`reverse\*(C' below.</p>
  </dd>
  <dt>
    strategy
  </dt>
  <dd>
    <p>Specifies the purge strategy. Default (and only allowed) value is \*(L"by_age\*(R". This option is for \*(C`purgedir\*(C' only. The other subroutines should not be provided with a \*(C`strategy\*(C' option.</p>
  </dd>
  <dt>
    include
  </dt>
  <dd>
    <p>If this is a reference to a subroutine, this subroutine is called with arguments ($file,$dir) and must return true for the file to be included in the list of candidates, If this is a regular expression, the file file will be included only if the expression matches the file name.</p>
  </dd>
  <dt>
    reverse
  </dt>
  <dd>
    <p>If true, the strategy will be reversed. For example, if the strategy is \*(L"by_age\*(R", the oldest files will be kept instead of the newest files. Another way to reverse the strategy is using a negative \*(C`keep\*(C' value. This is not unlike Perl's array subscripts, which count from the end if negative. A negative \*(C`keep\*(C' value can be combined with \*(C`reverse\*(C' to reverse the reversed strategy again.</p>
  </dd>
  <dt>
    verbose
  </dt>
  <dd>
    <p>Verbosity of messages. Default value is 1, which will report the names of the files being removed. A value greater than 1 will produce more messages about what's going on. A value of 0 (zero) will suppress messages.</p>
  </dd>
  <dt>
    debug
  </dt>
  <dd>
    <p>For internal debugging only.</p>
  </dd>
  <dt>
    test
  </dt>
  <dd>
    <p>If true, no files will be removed. For testing.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORT</h2>
        <div class="sectioncontent">
<p>Subroutine \*(C`purgedir\*(C' is exported by default.</p><p>Subroutine \*(C`purgedir_by_age\*(C' may be exported on demand.</p><p>Calling <em>purgedir_by_age()</em> is roughly equivalent to calling <em>purgedir()</em> with an options hash that includes \*(C`strategy =\*(C' \*(L"by_age\*(R"&gt;.</p><p>The variable $Dir::Purge::VERSION may be used to inspect the version of the module.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Johan Vromans (jvromans@squirrel.nl) wrote this module.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND DISCLAIMER</h2>
        <div class="sectioncontent">
<p>This program is Copyright 2000 by Squirrel Consultancy. All rights reserved.</p><p>This program is free software; you can redistribute it and/or modify it under the terms of either: a) the \s-1GNU\s0 General Public License as published by the Free Software Foundation; either version 1, or (at your option) any later version, or b) the \*(L"Artistic License\*(R" which comes with Perl.</p><p>This program is distributed in the hope that it will be useful, but \s-1WITHOUT\s0 \s-1ANY\s0 \s-1WARRANTY\s0; without even the implied warranty of \s-1MERCHANTABILITY\s0 or \s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0 \s-1PURPOSE\s0. See either the \s-1GNU\s0 General Public License or the Artistic License for more details.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Digest::file.3pm.html"><span aria-hidden="true">&larr;</span> Digest::file.3pm: Calculate digests of files</a></li>
   <li class="next"><a href="Directory::Scratch.3pm.html">Directory::Scratch.3pm: Easy-to-use self-cleaning scratch space. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
