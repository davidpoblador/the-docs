<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmiaddmetric: Add a new metric definition to a logimport context</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Add a new metric definition to a logimport context">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmiaddmetric<small> (3)</small></h1>
        <p class="lead">Add a new metric definition to a logimport context</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/pmiaddmetric.3.html">
      <span itemprop="name">pmiaddmetric: Add a new metric definition to a logimport context</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pcp/">
      <span itemprop="name">pcp</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/pmiaddmetric.3.html">
      <span itemprop="name">pmiaddmetric: Add a new metric definition to a logimport context</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">C SYNOPSIS</h2>
        <div class="sectioncontent">

<p>#include &lt;pcp/pmapi.h&gt;</p>
<p class='spacer'>

<p>#include &lt;pcp/impl.h&gt;</p>
<p class='spacer'>

<p>#include &lt;pcp/import.h&gt;</p>
<p class='spacer'>

<p>int pmiAddMetric(const char *<em>name</em>, pmID <em>pmid</em>, int&nbsp;<em>type</em>, pmInDom&nbsp;<em>indom</em>, int&nbsp;<em>sem</em>, pmUnits&nbsp;<em>units</em>);</p>
<p class='spacer'>

<p>cc ... -lpcp_import -lpcp</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Perl SYNOPSIS</h2>
        <div class="sectioncontent">

<p>use PCP::LogImport;</p>
<p class='spacer'>

<p>pmiAddMetric($<em>name</em>, $<em>pmid</em>, $<em>type</em>, $<em>indom</em>, $<em>sem</em>, $<em>units</em>);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>As part of the Performance Co-Pilot Log Import API (see <strong>LOGIMPORT</strong>(3)), <strong>pmiAddMetric</strong> is used to define a new metric.  The metric's <em>name</em> must follow the naming conventions described in <strong>PCPIntro</strong>(1) and should be unique for each LOGIMPORT context.</p>
<p class='spacer'>

<p>The other arguments are in effect the fields of a <strong>pmDesc</strong> structure. Refer to <strong>pmLookupDesc</strong>(3) for a complete description of the values and semantics of the components of this structure, and hence the valid argument values for <strong>pmiAddMetrics</strong>.</p>
<p class='spacer'>

<p>The internal identifier for the metric may be given using the <em>pmid</em> argument and must be unique for each LOGIMPORT context. The value for <em>pmid</em> which would typically be constructed using the <strong>pmid_build</strong> macro, e.g. pmid_build(PMI_DOMAIN, 0, 3) for the fourth metric in first ``cluster'' of metrics in the Performance Metrics Domain PMI_DOMAIN (which is the default for all meta data created by the LOGIMPORT library). Alternatively, <em>pmid</em> may be <strong>PM_IN_NULL</strong> and <strong>pmiAddMetric</strong> will assign a unique <em>pmid</em> (although this means the <em>pmid</em> remains opaque and the application must use <strong>pmiPutValue</strong>(3) or <strong>pmiPutValueHandle</strong>(3) and cannot use <strong>pmiPutResult</strong>(3) to add data values to the PCP archive).</p>
<p class='spacer'>

<p><em>type</em> defines the data type of the metric and must be one of the <strong>PM_TYPE_...</strong> values defined in <strong>&lt;pcp/import.h&gt;</strong>.</p>
<p class='spacer'>

<p>The instance domain for the metric is defined by <em>indom</em> and may be <strong>PM_INDOM_NULL</strong> for a metric with a singular value, else the value for <em>indom</em> would normally be constructed using the <strong>pmInDom_build</strong> macro, e.g. pmInDom_build(LOGIMPORT,0) for the first instance domain in the Performance Metrics Domain LOGIMPORT (which is the default for all meta data created by the LOGIMPORT library). Multiple metrics can share the same instance domain if they have values for a similar (or more usually, identical) set of instances.</p>
<p class='spacer'>

<p>The semantics of the metric (counter, instantaneous value, etc.) is specified by the <em>sem</em> argument which would normally be the result of a call to the convenience constructor method <strong>pmiUnits</strong>(3).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<p><strong>pmiAddMetric</strong> returns zero on success else a negative value that can be turned into an error message by calling <strong>pmiErrStr</strong>(3).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pmiaddmetric&hellip;</h2>
        <div class="sectioncontent">

<p><strong>PCPIntro</strong>(1), <strong>LOGIMPORT</strong>(3), <strong>pmiErrStr</strong>(3), <strong>pmiPutResult</strong>(3), <strong>pmiPutValue</strong>(3), <strong>pmiPutValueHandle</strong>(3), <strong>pmiUnits</strong>(3) and <strong>pmLookupDesc</strong>(3).</p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="pmiaddinstance.3.html"><span aria-hidden="true">&larr;</span> pmiaddinstance.3: Add an element to an instance domain in a logimport context</a></li>
   <li class="next"><a href="pmiend.3.html">pmiend.3: Finish up a logimport archive <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
