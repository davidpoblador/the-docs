<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AnyEvent::IRC::Util: Common utilities that help with irc protocol handling</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Common utilities that help with irc protocol handling">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="AnyEvent::IRC::Util (3pm) manual">
  <meta name="twitter:description" content="Common utilities that help with irc protocol handling">
  <meta name="twitter:image" content="https://www.carta.tech/images/libanyevent-irc-perl-AnyEvent::IRC::Util-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/AnyEvent::IRC::Util.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="AnyEvent::IRC::Util (3pm) manual" />
  <meta property="og:description" content="Common utilities that help with irc protocol handling" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libanyevent-irc-perl-AnyEvent::IRC::Util-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">AnyEvent::IRC::Util<small> (3pm)</small></h1>
        <p class="lead">Common utilities that help with irc protocol handling</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/AnyEvent::IRC::Util.3pm.html">
      <span itemprop="name">AnyEvent::IRC::Util: Common utilities that help with irc protocol handling</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libanyevent-irc-perl/">
      <span itemprop="name">libanyevent-irc-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/AnyEvent::IRC::Util.3pm.html">
      <span itemprop="name">AnyEvent::IRC::Util: Common utilities that help with irc protocol handling</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
   use AnyEvent::IRC::Util qw/parse_irc_msg mk_msg/;

   my $msgdata = mk_msg (undef, PRIVMSG =&gt; "mcmanus", "my hands glow!");
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTIONS</h2>
        <div class="sectioncontent">
<p>These are some utility functions that might come in handy when handling the \s-1IRC\s0 protocol.</p><p>You can export these with eg.:</p><p>   use AnyEvent::IRC::Util qw/parse_irc_msg/;</p>
<dl class='dl-vertical'>
  <dt>
    <strong>parse_irc_msg ($ircline)</strong>
  </dt>
  <dd>
    <p>This method parses the $ircline, which is one line of the \s-1IRC\s0 protocol without the trailing \*(L"&#92;015&#92;012\*(R". It returns a hash which has the following entrys:</p>
<dl class='dl-vertical'>
  <dt>
    prefix
  </dt>
  <dd>
    <p>The message prefix.</p>
  </dd>
  <dt>
    command
  </dt>
  <dd>
    <p>The \s-1IRC\s0 command.</p>
  </dd>
  <dt>
    params
  </dt>
  <dd>
    <p>The parameters to the \s-1IRC\s0 command in a array reference, this includes the trailing parameter (the one after the ':' or the 14th parameter).</p>
  </dd>

</dl>
<p>This function assembles a \s-1IRC\s0 message. The generated message will look like (pseudo code!)    :&lt;prefix&gt; &lt;command&gt; &lt;params&gt; :&lt;trail&gt; Please refer to \s-1RFC\s0 1459 how \s-1IRC\s0 messages normally look like. The prefix will be omitted if they are \*(C`undef\*(C'. Please note that only the last parameter may contain spaces, and if it contains spaces it will be quoted as the trailing part of the \s-1IRC\s0 message. \s-1NOTE:\s0 The trailing \*(L"&#92;015&#92;012\*(R" is \s-1NOT\s0 added by this function! \s-1EXAMPLES:\s0    mk_msg (undef, "PRIVMSG", "magnus", "you suck!");    # will return: "PRIVMSG magnus :you suck!"</p><p>   mk_msg (undef, "PRIVMSG", "magnus", "Hi!");    # will return: "PRIVMSG magnus :Hi!"</p><p>   mk_msg (undef, "JOIN", "#test");    # will return: "JOIN #test"</p>
  </dd>
  <dt>
    <strong>decode_ctcp ($data)</strong>
  </dt>
  <dd>
    <p>This function decodes \s-1CTCP\s0 messages contained in an \s-1IRC\s0 message. $data should be the last parameter of a \s-1IRC\s0 \s-1PRIVMSG\s0 or \s-1NOTICE\s0. It will first unescape the lower layer, extract \s-1CTCP\s0 messages and then return a list with two elements: the line without the \s-1CTCP\s0 messages and an array reference which contains array references of \s-1CTCP\s0 messages. Those \s-1CTCP\s0 message array references will have the \s-1CTCP\s0 message tag as first element (eg. \*(L"\s-1VERSION\s0\*(R") and the rest of the \s-1CTCP\s0 message as the second element.</p>
  </dd>
  <dt>
    <strong>encode_ctcp (@msg)</strong>
  </dt>
  <dd>
    <p>This function encodes a \s-1CTCP\s0 message for the transmission via the \s-1NOTICE\s0 or \s-1PRIVMSG\s0 command. @msg is an array of strings or array references. If an array reference occurs in the @msg array it's first element will be interpreted as \s-1CTCP\s0 \s-1TAG\s0 (eg. one of \s-1PING\s0, \s-1VERSION\s0, .. whatever) the rest of the array ref will be appended to the tag and separated by spaces. All parts of the message will be concatenated and lowlevel quoted. That means you can embed _any_ character from 0 to 255 in this message (thats what the lowlevel quoting allows).</p>
  </dd>
  <dt>
    <strong>filter_colors ($line)</strong>
  </dt>
  <dd>
    <p>This function will filter out any mIRC colors and (most) ansi escape sequences. Unfortunately the mIRC color coding will destroy improper colored numbers. So this function may destroy the message in some occasions a bit.</p>
  </dd>
  <dt>
    <strong>split_prefix ($prefix)</strong>
  </dt>
  <dd>
    <p>This function splits an \s-1IRC\s0 user prefix as described by \s-1RFC\s0 2817 into the three parts: nickname, user and host. Which will be returned as a list with that order. $prefix can also be a hash like it is returned by \*(C`parse_irc_msg\*(C'.</p>
  </dd>
  <dt>
    <strong>is_nick_prefix ($prefix)</strong>
  </dt>
  <dd>
    <p>Returns true if the prefix is a nick prefix, containing user and host. Joins $nick, $user and $host together to form a prefix.</p>
  </dd>
  <dt>
    <strong>prefix_nick ($prefix)</strong>
  </dt>
  <dd>
    <p>A shortcut to extract the nickname from the $prefix. $prefix can also be a hash like it is returned by \*(C`parse_irc_msg\*(C'.</p>
  </dd>
  <dt>
    <strong>prefix_user ($prefix)</strong>
  </dt>
  <dd>
    <p>A shortcut to extract the username from the $prefix. $prefix can also be a hash like it is returned by \*(C`parse_irc_msg\*(C'.</p>
  </dd>
  <dt>
    <strong>prefix_host ($prefix)</strong>
  </dt>
  <dd>
    <p>A shortcut to extract the hostname from the $prefix. $prefix can also be a hash like it is returned by \*(C`parse_irc_msg\*(C'.</p>
  </dd>
  <dt>
    <strong>rfc_code_to_name ($code)</strong>
  </dt>
  <dd>
    <p>This function is a interface to the internal mapping or numeric replies to the reply name in \s-1RFC\s0 2812 (which you may also consult). $code is returned if no name for $code exists (as some server may extended the protocol). This function splits up $string into multiple @lines which are not longer than $maxlinebytes bytes. Encoding can be given in $encoding. (eg. 'utf-8'). But the output will not be encoded. This function takes care that your characters are not garbled.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Robin Redeker, \*(C`&lt;elmex@ta-sa.org&gt;\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO AnyEvent::IRC::Util&hellip;</h2>
        <div class="sectioncontent">
<p>Internet Relay Chat Client To Client Protocol from February 2, 1997 http://www.invlogic.com/irc/ctcp.html</p><p>\s-1RFC\s0 1459 - Internet Relay Chat: Client Protocol</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT & LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2006-2009 Robin Redeker, all rights reserved.</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="AnyEvent::IRC::Connection.3pm.html"><span aria-hidden="true">&larr;</span> AnyEvent::IRC::Connection.3pm: An irc connection abstraction</a></li>
   <li class="next"><a href="AnyEvent::README.3pm.html">AnyEvent::README.3pm: Callback aggregator for anyevent watchers. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
