<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>URI::Query: Class providing uri query string manipulation</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Class providing uri query string manipulation">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="URI::Query (3pm) manual">
  <meta name="twitter:description" content="Class providing uri query string manipulation">
  <meta name="twitter:image" content="https://www.carta.tech/images/liburi-query-perl-URI::Query-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/URI::Query.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="URI::Query (3pm) manual" />
  <meta property="og:description" content="Class providing uri query string manipulation" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liburi-query-perl-URI::Query-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">URI::Query<small> (3pm)</small></h1>
        <p class="lead">Class providing uri query string manipulation</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/URI::Query.3pm.html">
      <span itemprop="name">URI::Query: Class providing uri query string manipulation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liburi-query-perl/">
      <span itemprop="name">liburi-query-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/URI::Query.3pm.html">
      <span itemprop="name">URI::Query: Class providing uri query string manipulation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    # Constructor - using a GET query string
    $qq = URI::Query-&gt;new($query_string);
    # OR Constructor - using a hashref of key =&gt; value parameters
    $qq = URI::Query-&gt;new($cgi-&gt;Vars);
    # OR Constructor - using an array of successive keys and values
    $qq = URI::Query-&gt;new(@params);

    # Revert back to the initial constructor state (to do it all again)
    $qq-&gt;revert;

    # Remove all occurrences of the given parameters
    $qq-&gt;strip(&apos;page&apos;, &apos;next&apos;);

    # Remove all parameters except the given ones
    $qq-&gt;strip_except(&apos;pagesize&apos;, &apos;order&apos;);

    # Remove all empty/undefined parameters
    $qq-&gt;strip_null;

    # Replace all occurrences of the given parameters
    $qq-&gt;replace(page =&gt; $page, foo =&gt; &apos;bar&apos;);

    # Set the argument separator to use for output (default: unescaped &apos;&&apos;)
    $qq-&gt;separator(&apos;;&apos;);

    # Output the current query string
    print "$qq";           # OR $qq-&gt;stringify;
    # Stringify with explicit argument separator
    $qq-&gt;stringify(&apos;;&apos;);

    # Get a flattened hash/hashref of the current parameters
    #   (single item parameters as scalars, multiples as an arrayref)
    my %qq = $qq-&gt;hash;

    # Get a non-flattened hash/hashref of the current parameters
    #   (parameter =&gt; arrayref of values)
    my %qq = $qq-&gt;hash_arrayref;

    # Get the current query string as a set of hidden input tags
    print $qq-&gt;hidden;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>URI::Query provides simple \s-1URI\s0 query string manipulation, allowing you to create and manipulate \s-1URI\s0 query strings from \s-1GET\s0 and \s-1POST\s0 requests in web applications. This is primarily useful for creating links where you wish to preserve some subset of the parameters to the current request, and potentially add or replace others. Given a query string this is doable with regexes, of course, but making sure you get the anchoring and escaping right is tedious and error-prone - this module is simpler.</p><h3>\s-1CONSTRUCTOR\s0</h3>
<p>URI::Query objects can be constructed from scalar query strings ('foo=1&bar=2&bar=3'), from a hashref which has parameters as keys, and values either as scalars or arrayrefs of scalars (to handle the case of parameters with multiple values e.g. { foo =&gt; '1', bar =&gt; [ '2', '3' ] }), or arrays composed of successive parameters-value pairs e.g. ('foo', '1', 'bar', '2', 'bar', '3'). For instance:</p><p>    # Constructor - using a GET query string     $qq = URI::Query-&gt;new($query_string);</p><p>    # Constructor - using an array of successive keys and values     $qq = URI::Query-&gt;new(@params);</p><p>    # Constructor - using a hashref of key =&gt; value parameters,     # where values are either scalars or arrayrefs of scalars     $qq = URI::Query-&gt;new($cgi-&gt;Vars);</p><p>URI::Query also handles \s-1CGI\s0.pm-style hashrefs, where multiple values are packed into a single string, separated by the \*(L"&#92;0\*(R" (null) character.</p><p>All keys and values are \s-1URI\s0 unescaped at construction time, and are stored and referenced unescaped. So a query string like:</p><p>    group=prod%2Cinfra%2Ctest&op%3Aset=x%3Dy</p><p>is stored as:</p><p>    &apos;group&apos;     =&gt; &apos;prod,infra,test&apos;     &apos;op:set&apos;    =&gt; &apos;x=y&apos;</p><p>You should always use the unescaped/normal variants in methods i.e.</p><p>     $qq-&gt;replace(&apos;op:set&apos;  =&gt; &apos;x=z&apos;);</p><p>\s-1NOT:\s0</p><p>     $qq-&gt;replace(&apos;op%3Aset&apos;  =&gt; &apos;x%3Dz&apos;);</p>
<h3>\s-1MODIFIER\s0 \s-1METHODS\s0</h3>
<p>All modifier methods change the state of the URI::Query object in some way, and return $self, so they can be used in chained style e.g.</p><p>    $qq-&gt;revert-&gt;strip(&apos;foo&apos;)-&gt;replace(bar =&gt; 123);</p><p>Note that URI::Query stashes a copy of the parameter set that existed at construction time, so that any changes made by these methods can be rolled back using '<em>revert()</em>'. So you don't (usually) need to keep multiple copies around to handle incompatible changes.</p>
<dl class='dl-vertical'>
  <dt>
    <em>revert()</em>
  </dt>
  <dd>
    <p>Revert the current parameter set back to that originally given at construction time i.e. discard all changes made since construction. Remove all occurrences of the given parameters and their values from the current parameter set. Remove all parameters \s-1EXCEPT\s0 those given from the current parameter set.</p>
  </dd>
  <dt>
    <em>strip_null()</em>
  </dt>
  <dd>
    <p>Remove all parameters that have a value of undef from the current parameter set. Replace the values of the given parameters in the current parameter set with these new ones. Parameter names must be scalars, but values can be either scalars or arrayrefs of scalars, when multiple values are desired. Note that 'replace' can also be used to add or append, since there's no requirement that the parameters already exist in the current parameter set.</p>
  </dd>
  <dt>
    separator($separator)
  </dt>
  <dd>
    <p>Set the argument separator to use for output. Default: '&'.</p>
  </dd>

</dl>

<h3>\s-1OUTPUT\s0 \s-1METHODS\s0</h3>
<p>Return the current parameter set as a conventional param=value query string, using $separator as the separator if given. e.g.     foo=1&bar=2&bar=3 Note that all parameters and values are \s-1URI\s0 escaped by <em>stringify()</em>, so that query-string reserved characters do not occur within elements. For instance, a parameter set of:     &apos;group&apos;     =&gt; &apos;prod,infra,test&apos;     &apos;op:set&apos;    =&gt; &apos;x=y&apos; will be stringified as:     group=prod%2Cinfra%2Ctest&op%3Aset=x%3Dy</p>
<dl class='dl-vertical'>
  <dt>
    <em>hash()</em>
  </dt>
  <dd>
    <p>Return a hash (in list context) or hashref (in scalar context) of the current parameter set. Single-item parameters have scalar values, while while multiple-item parameters have arrayref values e.g.     {         foo =&gt; 1,         bar =&gt; [ 2, 3 ],     }</p>
  </dd>
  <dt>
    <em>hash_arrayref()</em>
  </dt>
  <dd>
    <p>Return a hash (in list context) or hashref (in scalar context) of the current parameter set. All values are returned as arrayrefs, including those with single values e.g.     {         foo =&gt; [ 1 ],         bar =&gt; [ 2, 3 ],     }</p>
  </dd>
  <dt>
    <em>hidden()</em>
  </dt>
  <dd>
    <p>Returns the current parameter set as a concatenated string of hidden input tags, one per parameter-value e.g.     &lt;input type="hidden" name="foo" value="1" /&gt;     &lt;input type="hidden" name="bar" value="2" /&gt;     &lt;input type="hidden" name="bar" value="3" /&gt;</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS AND CAVEATS</h2>
        <div class="sectioncontent">
<p>Please report bugs and/or feature requests to \*(C`bug-uri-query at rt.cpan.org\*(C', or through the web interface at http://rt.cpan.org/NoAuth/ReportBug.html?Queue=URI-Query &lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=URI-Query&gt;.</p><p>Should allow unescaping of input to be turned off, for situations in which it's already been done. Please let me know if you find you actually need this.</p><p>I don't think it makes sense on the output side though, since you need to understand the structure of the query to escape elements correctly.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PATCHES</h2>
        <div class="sectioncontent">
<p>URI::Query code lives at https://github.com/gavincarr/URI-Query &lt;https://github.com/gavincarr/URI-Query&gt;. Patches / pull requests welcome!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Gavin Carr &lt;gavin@openfusion.com.au&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2004-2011, Gavin Carr. All Rights Reserved.</p><p>This program is free software. You may copy or redistribute it under the same terms as perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="URI::FromHash.3pm.html"><span aria-hidden="true">&larr;</span> URI::FromHash.3pm: Build a uri from a set of named parameters</a></li>
   <li class="next"><a href="URI::SmartURI.3pm.html">URI::SmartURI.3pm: Subclassable and hostless uris <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
