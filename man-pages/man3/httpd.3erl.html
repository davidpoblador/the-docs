<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>httpd: An implementation of an http</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="An implementation of an http">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="httpd (3erl) manual">
  <meta name="twitter:description" content="An implementation of an http">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-httpd-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/httpd.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="httpd (3erl) manual" />
  <meta property="og:description" content="An implementation of an http" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-httpd-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">httpd<small> (3erl)</small></h1>
        <p class="lead">An implementation of an http</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/httpd.3erl.html">
      <span itemprop="name">httpd: An implementation of an http</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/httpd.3erl.html">
      <span itemprop="name">httpd: An implementation of an http</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Documents the HTTP server start options, some administrative functions and also specifies the Erlang Web server callback API</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMON DATA TYPES </h2>
        <div class="sectioncontent">
<p>Type definitions that are used more than once in this module:</p><p><em>boolean() = true | false </em></p><p><em>string() = list of ASCII characters</em></p><p><em>path() = string() - representing a file or directory path.</em></p><p><em> ip_address() = {N1,N2,N3,N4} % IPv4 | {K1,K2,K3,K4,K5,K6,K7,K8} % IPv6</em></p><p><em>hostname() = string() - representing a host ex "foo.bar.com"</em></p><p><em>property() = atom()</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERLANG HTTP SERVER SERVICE START/STOP </h2>
        <div class="sectioncontent">
<p>A web server can be configured to start when starting the inets application or started dynamically in runtime by calling the Inets application API <em>inets:start(httpd, ServiceConfig)</em>, or <em>inets:start(httpd, ServiceConfig, How)</em>, see <strong>inets(3erl)</strong> Below follows a description of the available configuration options, also called properties.</p><p><em>File properties</em></p><p>When the web server is started at application start time the properties should be fetched from a configuration file that could consist of a regular erlang property list, e.i. <em>[{Option, Value}] </em> where <em> Option = property() </em> and <em>Value = term()</em>, followed by a full stop, or for backwards compatibility an Apache like configuration file. If the web server is started dynamically at runtime you may still specify a file but you could also just specify the complete property list.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{proplist_file, path()}: If this property is defined inets will expect to find all other properties defined in this file. Note that the file must include all properties listed under mandatory properties.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{file, path()}: If this property is defined inets will expect to find all other properties defined in this file, that uses Apache like syntax. Note that the file must include all properties listed under mandatory properties. The Apache like syntax is the property, written as one word where each new word begins with a capital, followed by a white-space followed by the value followed by a new line. Ex:</p>
  </dd>

</dl>

<pre>
{server_root, "/urs/local/www"} -&gt; ServerRoot /usr/local/www

</pre>
<p>With a few exceptions, that are documented for each property that behaves differently, and the special case {directory, {path(), PropertyList}} and {security_directory, {Dir, PropertyList}} that are represented as:</p>
<pre>
&lt;Directory Dir&gt;
 &lt;Properties handled as described above&gt;
&lt;/Directory&gt;


</pre>
<p><strong></strong> Note:</p><p>The properties proplist_file and file are mutually exclusive.</p><p><em>Mandatory properties</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{port, integer()} : The port that the HTTP server shall listen on. If zero is specified as port, an arbitrary available port will be picked and you can use the httpd:info/2 function to find out which port was picked.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{server_name, string()} : The name of your server, normally a fully qualified domain name.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{server_root, path()} : Defines the server's home directory where log files etc can be stored. Relative paths specified in other properties refer to this directory.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{document_root, path()}:  Defines the top directory for the documents that are available on the HTTP server.</p>
  </dd>

</dl>
<p><em>Communication properties</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{bind_address, ip_address() | hostname() | any} : Defaults to <em>any</em>. Note that <em>any</em> is denoted <em>*</em> in the apache like configuration file.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{socket_type, ip_comm | {essl, Config::proplist()}}: For ssl configuration options see <strong>ssl:listen/2</strong></p><p>Defaults to <em>ip_comm</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{ipfamily, inet | inet6 | inet6fb4}: Defaults to <em>inet6fb4. </em></p><p>Note that this option is only used when the option <em>socket_type</em> has the value <em>ip_comm</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{minimum_bytes_per_second, integer()}: If given, sets a minimum bytes per second value for connections.</p><p>If the value is not reached, the socket will close for that connection.</p><p>The option is good for reducing the risk of "slow dos" attacks.</p>
  </dd>

</dl>
<p><em>Erlang Web server API modules</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{modules, [atom()]} : Defines which modules the HTTP server will use to handle requests. Defaults to: <em>[mod_alias, mod_auth, mod_esi, mod_actions, mod_cgi, mod_dir, mod_get, mod_head, mod_log, mod_disk_log] </em> Note that some mod-modules are dependent on others, so the order can not be entirely arbitrary. See the <strong> Inets Web server Modules in the Users guide</strong> for more information.</p>
  </dd>

</dl>
<p><em>Limit properties</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{disable_chunked_transfer_encoding_send, boolean()}: This property allows you to disable chunked transfer-encoding when sending a response to a HTTP/1.1 client, by default this is false.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{keep_alive, boolean()}: Instructs the server whether or not to use persistent connections when the client claims to be HTTP/1.1 compliant, default is true.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{keep_alive_timeout, integer()}: The number of seconds the server will wait for a subsequent request from the client before closing the connection. Default is 150.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{max_body_size, integer()}: Limits the size of the message body of HTTP request. By the default there is no limit.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{max_clients, integer()}: Limits the number of simultaneous requests that can be supported. Defaults to 150.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{max_header_size, integer()}: Limits the size of the message header of HTTP request. Defaults to 10240.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{max_uri_size, integer()}: Limits the size of the HTTP request URI. By default there is no limit.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{max_keep_alive_request, integer()}: The number of request that a client can do on one connection. When the server has responded to the number of requests defined by max_keep_alive_requests the server close the connection. The server will close it even if there are queued request. Defaults to no limit.</p>
  </dd>

</dl>
<p><em>Administrative properties</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{mime_types, [{MimeType, Extension}] | path()}: Where MimeType = string() and Extension = string(). Files delivered to the client are MIME typed according to RFC 1590. File suffixes are mapped to MIME types before file delivery. The mapping between file suffixes and MIME types can be specified as an Apache like file as well as directly in the property list. Such a file may look like:</p>
  </dd>

</dl>

<pre>
# MIME type	Extension
text/html	html htm
text/plain	asc txt

</pre>
<p>Defaults to [{"html","text/html"},{"htm","text/html"}]</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{mime_type, string()}: When the server is asked to provide a document type which cannot be determined by the MIME Type Settings, the server will use this default type.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{server_admin, string()}: ServerAdmin defines the email-address of the server administrator, to be included in any error messages returned by the server.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{server_tokens, prod|major|minor|minimal|os|full|{private, string()}}: ServerTokens defines how the value of the server header should look.</p><p>Example: Assuming the version of inets is 5.8.1, here is what the server header string could look like for the different values of server-tokens:</p>
  </dd>

</dl>

<pre>
prod                  "inets"
major                 "inets/5"
minor                 "inets/5.8"
minimal               "inets/5.8.1"
os                    "inets/5.8.1 (unix)"
full                  "inets/5.8.1 (unix/linux) OTP/R15B"
{private, "foo/bar"}  "foo/bar"

</pre>
<p>By default, the value is as before, which is <em>minimal</em>.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{log_format, common | combined}: Defines if access logs should be written according to the common log format or to the extended common log format. The <em>common</em> format is one line that looks like this: <em>remotehost rfc931 authuser [date] "request" status bytes</em></p>
  </dd>

</dl>

<pre>
remotehost
	Remote
rfc931
	The client's remote username (RFC 931).
authuser
	The username with which the user authenticated
        himself.
[date]
	Date and time of the request (RFC 1123).
"request"
	The request line exactly as it came from the client
        (RFC 1945).
status
	The HTTP status code returned to the client
        (RFC 1945).
bytes
	The content-length of the document transferred.

</pre>
<p>The <em>combined</em> format is on line that look like this: <em>remotehost rfc931 authuser [date] "request" status bytes "referer" "user_agent" </em></p>
<pre>
"referer"
	The url the client was on before
	requesting your url. (If it could not be determined
	a minus sign will be placed in this field)
"user_agent"
	The software the client claims to be using. (If it
	could not be determined a minus sign will be placed in
	this field)

</pre>
<p>This affects the access logs written by mod_log and mod_disk_log.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{error_log_format, pretty | compact}: Defaults to pretty. If the error log is meant to be read directly by a human <em>pretty</em> will be the best option. <em>pretty</em> has the format corresponding to:</p>
  </dd>

</dl>

<pre>
io:format("[~s] ~s, reason: ~n ~p ~n~n", [Date, Msg, Reason]).

</pre>
<p><em>compact</em> has the format corresponding to:</p>
<pre>
io:format("[~s] ~s, reason: ~w ~n", [Date, Msg, Reason]).

</pre>
<p>This affects the error logs written by mod_log and mod_disk_log.</p><p><em>URL aliasing properties - requires mod_alias</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{alias, {Alias, RealName}}: Where Alias = string() and RealName = string(). The Alias property allows documents to be stored in the local file system instead of the document_root location. URLs with a path that begins with url-path is mapped to local files that begins with directory-filename, for example:</p>
  </dd>

</dl>

<pre>
{alias, {"/image", "/ftp/pub/image"}}
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{re_write, {Re, Replacement}}: Where Re = string() and Replacement = string(). The ReWrite property allows documents to be stored in the local file system instead of the document_root location. URLs are rewritten by re:replace/3 to produce a path in the local filesystem. For example:</p>
  </dd>

</dl>

<pre>
{re_write, {"^/[~]([^/]+)(.*)$", "/home/&#92;&#92;1/public&#92;&#92;2"}}
</pre>

<pre>
ReWrite ^/[~]([^/]+)(.*)$ /home/&#92;1/public&#92;2
</pre>

<pre>
&#92;040
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{directory_index, [string()]}: DirectoryIndex specifies a list of resources to look for if a client requests a directory using a / at the end of the directory name. file depicts the name of a file in the directory. Several files may be given, in which case the server will return the first it finds, for example:</p>
  </dd>

</dl>

<pre>
{directory_index, ["index.hml", "welcome.html"]}
</pre>
<p><em>CGI properties - requires mod_cgi</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{script_alias, {Alias, RealName}}: Where Alias = string() and RealName = string(). Has the same behavior as the Alias property, except that it also marks the target directory as containing CGI scripts. URLs with a path beginning with url-path are mapped to scripts beginning with directory-filename, for example:</p>
  </dd>

</dl>

<pre>
{script_alias, {"/cgi-bin/", "/web/cgi-bin/"}}
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{script_re_write, {Re, Replacement}}: Where Re = string() and Replacement = string(). Has the same behavior as the ReWrite property, except that it also marks the target directory as containing CGI scripts. URLs with a path beginning with url-path are mapped to scripts beginning with directory-filename, for example:</p>
  </dd>

</dl>

<pre>
{script_re_write, {"^/cgi-bin/(&#92;&#92;d+)/", "/web/&#92;&#92;1/cgi-bin/"}}
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{script_nocache, boolean()}: If ScriptNoCache is set to true the HTTP server will by default add the header fields necessary to prevent proxies from caching the page. Generally this is something you want. Defaults to false.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{script_timeout, integer()}: The time in seconds the web server will wait between each chunk of data from the script. If the CGI-script not delivers any data before the timeout the connection to the client will be closed. Defaults to 15.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{action, {MimeType, CgiScript}} - requires mod_action: Where MimeType = string() and CgiScript = string(). Action adds an action, which will activate a cgi-script whenever a file of a certain mime-type is requested. It propagates the URL and file path of the requested document using the standard CGI PATH_INFO and PATH_TRANSLATED environment variables.</p>
  </dd>

</dl>

<pre>
{action, {"text/plain", "/cgi-bin/log_and_deliver_text"}}
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{script, {Method, CgiScript}} - requires mod_action: Where Method = string() and CgiScript = string(). Script adds an action, which will activate a cgi-script whenever a file is requested using a certain HTTP method. The method is either GET or POST as defined in RFC 1945. It propagates the URL and file path of the requested document using the standard CGI PATH_INFO and PATH_TRANSLATED environment variables.</p>
  </dd>

</dl>

<pre>
{script, {"PUT", "/cgi-bin/put"}}
</pre>
<p><em>ESI properties - requires mod_esi</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{erl_script_alias, {URLPath, [AllowedModule]}}: Where URLPath = string() and AllowedModule = atom(). erl_script_alias marks all URLs matching url-path as erl scheme scripts. A matching URL is mapped into a specific module and function. For example:</p>
  </dd>

</dl>

<pre>
{erl_script_alias, {"/cgi-bin/example", [httpd_example]}}

</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{erl_script_nocache, boolean()}: If erl_script_nocache is set to true the server will add http header fields that prevents proxies from caching the page. This is generally a good idea for dynamic content, since the content often vary between each request. Defaults to false.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{erl_script_timeout, integer()}: If erl_script_timeout sets the time in seconds the server will wait between each chunk of data to be delivered through mod_esi:deliver/2. Defaults to 15. This is only relevant for scripts that uses the erl scheme.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{eval_script_alias, {URLPath, [AllowedModule]}}: Where URLPath = string() and AllowedModule = atom(). Same as erl_script_alias but for scripts using the eval scheme. Note that this is only supported for backwards compatibility. The eval scheme is deprecated.</p>
  </dd>

</dl>
<p><em>Log properties - requires mod_log</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{error_log, path()}: Defines the filename of the error log file to be used to log server errors. If the filename does not begin with a slash (/) it is assumed to be relative to the server_root.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{security_log, path()}: Defines the filename of the access log file to be used to log security events. If the filename does not begin with a slash (/) it is assumed to be relative to the server_root.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{transfer_log, path()}: Defines the filename of the access log file to be used to log incoming requests. If the filename does not begin with a slash (/) it is assumed to be relative to the server_root.</p>
  </dd>

</dl>
<p><em>Disk Log properties - requires mod_disk_log</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{disk_log_format, internal | external}: Defines the file-format of the log files see disk_log for more information. If the internal file-format is used, the logfile will be repaired after a crash. When a log file is repaired data might get lost. When the external file-format is used httpd will not start if the log file is broken. Defaults to external.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{error_disk_log, path()}: Defines the filename of the (disk_log(3erl)) error log file to be used to log server errors. If the filename does not begin with a slash (/) it is assumed to be relative to the server_root.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{error_disk_log_size, {MaxBytes, MaxFiles}}: Where MaxBytes = integer() and MaxFiles = integer(). Defines the properties of the (disk_log(3erl)) error log file. The disk_log(3erl) error log file is of type wrap log and max-bytes will be written to each file and max-files will be used before the first file is truncated and reused.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{security_disk_log, path()}: Defines the filename of the (disk_log(3erl)) access log file which logs incoming security events i.e authenticated requests. If the filename does not begin with a slash (/) it is assumed to be relative to the server_root.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{security_disk_log_size, {MaxBytes, MaxFiles}}: Where MaxBytes = integer() and MaxFiles = integer(). Defines the properties of the disk_log(3erl) access log file. The disk_log(3erl) access log file is of type wrap log and max-bytes will be written to each file and max-files will be used before the first file is truncated and reused.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{transfer_disk_log, path()}: Defines the filename of the (disk_log(3erl)) access log file which logs incoming requests. If the filename does not begin with a slash (/) it is assumed to be relative to the server_root.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{transfer_disk_log_size, {MaxBytes, MaxFiles}}: Where MaxBytes = integer() and MaxFiles = integer(). Defines the properties of the disk_log(3erl) access log file. The disk_log(3erl) access log file is of type wrap log and max-bytes will be written to each file and max-files will be used before the first file is truncated and reused.</p>
  </dd>

</dl>
<p><em>Authentication properties - requires mod_auth</em></p><p><em>{directory, {path(), [{property(), term()}]}}</em></p><p>Here follows the valid properties for directories</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{allow_from, all | [RegxpHostString]}: Defines a set of hosts which should be granted access to a given directory. For example:</p>
  </dd>

</dl>

<pre>
{allow_from, ["123.34.56.11", "150.100.23"]}
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{deny_from, all | [RegxpHostString]}: Defines a set of hosts which should be denied access to a given directory. For example:</p>
  </dd>

</dl>

<pre>
{deny_from, ["123.34.56.11", "150.100.23"]}
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{auth_type, plain | dets | mnesia}: Sets the type of authentication database that is used for the directory.The key difference between the different methods is that dynamic data can be saved when Mnesia and Dets is used. This property is called AuthDbType in the Apache like configuration files.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{auth_user_file, path()}: Sets the name of a file which contains the list of users and passwords for user authentication. filename can be either absolute or relative to the <em>server_root</em>. If using the plain storage method, this file is a plain text file, where each line contains a user name followed by a colon, followed by the non-encrypted password. If user names are duplicated, the behavior is undefined. For example:</p>
  </dd>

</dl>

<pre>
 ragnar:s7Xxv7
 edward:wwjau8
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{auth_group_file, path()}: Sets the name of a file which contains the list of user groups for user authentication. Filename can be either absolute or relative to the <em>server_root</em>. If you use the plain storage method, the group file is a plain text file, where each line contains a group name followed by a colon, followed by the member user names separated by spaces. For example:</p>
  </dd>

</dl>

<pre>
group1: bob joe ante
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{auth_name, string()}: Sets the name of the authorization realm (auth-domain) for a directory. This string informs the client about which user name and password to use.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{auth_access_password, string()}: If set to other than "NoPassword" the password is required for all API calls. If the password is set to "DummyPassword" the password must be changed before any other API calls. To secure the authenticating data the password must be changed after the web server is started since it otherwise is written in clear text in the configuration file.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{require_user, [string()]}: Defines users which should be granted access to a given directory using a secret password.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{require_group, [string()]}: Defines users which should be granted access to a given directory using a secret password.</p>
  </dd>

</dl>
<p><em>Htaccess authentication properties - requires mod_htaccess</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{access_files, [path()]}: Specify which filenames that are used for access-files. When a request comes every directory in the path to the requested asset will be searched after files with the names specified by this parameter. If such a file is found the file will be parsed and the restrictions specified in it will be applied to the request.</p>
  </dd>

</dl>
<p><em>Security properties - requires mod_security </em></p><p><em>{security_directory, {path(), [{property(), term()}]}}</em></p><p>Here follows the valid properties for security directories</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{data_file, path()}: Name of the security data file. The filename can either absolute or relative to the server_root. This file is used to store persistent data for the mod_security module.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{max_retries, integer()}: Specifies the maximum number of tries to authenticate a user has before the user is blocked out. If a user successfully authenticates when the user has been blocked, the user will receive a 403 (Forbidden) response from the server. If the user makes a failed attempt while blocked the server will return 401 (Unauthorized), for security reasons. Defaults to 3 may also be set to infinity.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{block_time, integer()}: Specifies the number of minutes a user is blocked. After this amount of time, he automatically regains access. Defaults to 60.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{fail_expire_time, integer()}: Specifies the number of minutes a failed user authentication is remembered. If a user authenticates after this amount of time, his previous failed authentications are forgotten. Defaults to 30.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>{auth_timeout, integer()}:  Specifies the number of seconds a successful user authentication is remembered. After this time has passed, the authentication will no longer be reported. Defaults to 30.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> info(Pid) -&gt;</p><p><strong></strong> info(Pid, Properties) -&gt; [{Option, Value}]</p><p>Types:</p><p>Properties = [property()]</p><p>Option = property()</p><p>Value = term()</p><p>Fetches information about the HTTP server. When called with only the pid all properties are fetched, when called with a list of specific properties they are fetched. Available properties are the same as the server's start options.</p><p><strong></strong> Note:</p><p>Pid is the pid returned from inets:start/[2,3]. Can also be retrieved form inets:services/0, inets:services_info/0 see <strong>inets(3erl)</strong></p><p><strong></strong> info(Address, Port) -&gt;</p><p><strong></strong> info(Address, Port, Properties) -&gt; [{Option, Value}]</p><p>Types:</p><p>Address = ip_address()</p><p>Port = integer()</p><p>Properties = [property()]</p><p>Option = property()</p><p>Value = term()</p><p>Fetches information about the HTTP server. When called with only the Address and Port all properties are fetched, when called with a list of specific properties they are fetched. Available properties are the same as the server's start options.</p><p><strong></strong> Note:</p><p>Address has to be the ip-address and can not be the hostname.</p><p><strong></strong> reload_config(Config, Mode) -&gt; ok | {error, Reason}</p><p>Types:</p><p>Config = path() | [{Option, Value}]</p><p>Option = property()</p><p>Value = term()</p><p>Mode = non_disturbing | disturbing</p><p>Reloads the HTTP server configuration without restarting the server. Incoming requests will be answered with a temporary down message during the time the it takes to reload.</p><p><strong></strong> Note:</p><p>Available properties are the same as the server's start options, although the properties bind_address and port can not be changed.</p><p>If mode is disturbing, the server is blocked forcefully and all ongoing requests are terminated and the reload will start immediately. If mode is non-disturbing, no new connections are accepted, but the ongoing requests are allowed to complete before the reload is done.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERLANG WEB SERVER API DATA TYPES </h2>
        <div class="sectioncontent">

<pre>
      ModData = #mod{}

      -record(mod, {
		data = [],
		socket_type = ip_comm,
		socket,
		config_db,
		method,
		absolute_uri,
		request_uri,
		http_version,
		request_line,
		parsed_header = [],
		entity_body,
		connection
	}).

</pre>
<p>To acess the record in your callback-module use</p>
<pre>
 -include_lib("inets/include/httpd.hrl").
</pre>
<p>The fields of the <em>mod</em> record has the following meaning:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>data</em>: Type <em>[{InteractionKey,InteractionValue}]</em> is used to propagate data between modules. Depicted <em>interaction_data()</em> in function type declarations.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>socket_type</em>: <em>socket_type()</em>, Indicates whether it is an ip socket or a ssl socket.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>socket</em>: The actual socket in <em>ip_comm</em> or <em>ssl</em> format depending on the <em>socket_type</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>config_db</em>: The config file directives stored as key-value tuples in an ETS-table. Depicted <em>config_db()</em> in function type declarations.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>method</em>: Type <em>"GET" | "POST" | "HEAD" | "TRACE"</em>, that is the HTTP method.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>absolute_uri</em>: If the request is a HTTP/1.1 request the URI might be in the absolute URI format. In that case httpd will save the absolute URI in this field. An Example of an absolute URI could be<em>"http://ServerName:Part/cgi-bin/find.pl?person=jocke"</em></p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>request_uri</em>: The <em>Request-URI</em> as defined in RFC 1945, for example <em>"/cgi-bin/find.pl?person=jocke"</em></p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>http_version</em>: The <em>HTTP</em> version of the request, that is "HTTP/0.9", "HTTP/1.0", or "HTTP/1.1".</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>request_line</em>: The <em>Request-Line</em> as defined in RFC 1945, for example <em>"GET /cgi-bin/find.pl?person=jocke HTTP/1.0"</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>parsed_header</em>: Type <em>[{HeaderKey,HeaderValue}]</em>, <em>parsed_header</em> contains all HTTP header fields from the HTTP-request stored in a list as key-value tuples. See RFC 2616 for a listing of all header fields. For example the date field would be stored as: <em>{"date","Wed, 15 Oct 1997 14:35:17 GMT"} </em>. RFC 2616 defines that HTTP is a case insensitive protocol and the header fields may be in lower case or upper case. Httpd will ensure that all header field names are in lower case.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>entity_body</em>: The <em>Entity-Body</em> as defined in RFC 2616, for example data sent from a CGI-script using the POST method.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>connection</em>: <em>true | false</em> If set to true the connection to the client is a persistent connection and will not be closed when the request is served.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERLANG WEB SERVER API CALLBACK FUNCTIONS</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> Module:do(ModData)-&gt; {proceed, OldData} | {proceed, NewData} | {break, NewData} | done</p><p>Types:</p><p>OldData = list()</p><p>NewData = [{response,{StatusCode,Body}}] | [{response,{response,Head,Body}}] | [{response,{already_sent,Statuscode,Size}}]</p><p>StatusCode = integer()</p><p>Body = io_list() | nobody | {Fun, Arg}</p><p>Head = [HeaderOption]</p><p>HeaderOption = {Option, Value} | {code, StatusCode}</p><p>Option = accept_ranges | allow | cache_control | content_MD5 | content_encoding | content_language | content_length | content_location | content_range | content_type | date | etag | expires | last_modified | location | pragma | retry_after | server | trailer | transfer_encoding</p><p>Value = string()</p><p>Fun = fun( Arg ) -&gt; sent| close | Body</p><p>Arg = [term()]</p><p>When a valid request reaches httpd it calls <em>do/1</em> in each module defined by the Modules configuration option. The function may generate data for other modules or a response that can be sent back to the client.</p><p>The field <em>data</em> in ModData is a list. This list will be the list returned from the last call to <em>do/1</em>.</p><p><em>Body</em> is the body of the http-response that will be sent back to the client an appropriate header will be appended to the message. <em>StatusCode</em> will be the status code of the response see RFC2616 for the appropriate values.</p><p><em>Head</em> is a key value list of HTTP header fields. The server will construct a HTTP header from this data. See RFC 2616 for the appropriate value for each header field. If the client is a HTTP/1.0 client then the server will filter the list so that only HTTP/1.0 header fields will be sent back to the client.</p><p>If <em>Body</em> is returned and equal to <em>{Fun,Arg}</em>, the Web server will try <em>apply/2</em> on <em>Fun</em> with <em>Arg</em> as argument and expect that the fun either returns a list <em>(Body)</em> that is a HTTP-repsonse or the atom sent if the HTTP-response is sent back to the client. If close is returned from the fun something has gone wrong and the server will signal this to the client by closing the connection.</p><p><strong></strong> Module:load(Line, AccIn)-&gt; eof | ok | {ok, AccOut} | {ok, AccOut, {Option, Value}} | {ok, AccOut, [{Option, Value}]} | {error, Reason}</p><p>Types:</p><p>Line = string()</p><p>AccIn = [{Option, Value}]</p><p>AccOut = [{Option, Value}]</p><p>Option = property()</p><p>Value = term()</p><p>Reason = term()</p><p>Load is used to convert a line in a Apache like configuration file to a <em>{Option, Value}</em> tuple. Some more complex configuration options such as <em>directory</em> and <em>security_directory</em> will create an accumulator.This function does only need clauses for the options implemented by this particular callback module.</p><p><strong></strong> Module:store({Option, Value}, Config)-&gt; {ok, {Option, NewValue}} | {error, Reason}</p><p>Types:</p><p>Line = string()</p><p>Option = property()</p><p>Config = [{Option, Value}]</p><p>Value = term()</p><p>Reason = term()</p><p>This function is used to check the validity of the configuration options before saving them in the internal database. This function may also have a side effect e.i. setup necessary extra resources implied by the configuration option. It can also resolve possible dependencies among configuration options by changing the value of the option. This function does only need clauses for the options implemented by this particular callback module.</p><p><strong></strong> Module:remove(ConfigDB) -&gt; ok | {error, Reason}</p><p>Types:</p><p>ConfigDB = ets_table()</p><p>Reason = term()</p><p>When httpd is shutdown it will try to execute <em>remove/1</em> in each Erlang web server callback module. The programmer may use this function to clean up resources that may have been created in the store function.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERLANG WEB SERVER API HELP FUNCTIONS</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> parse_query(QueryString) -&gt; [{Key,Value}]</p><p>Types:</p><p>QueryString = string()</p><p>Key = string()</p><p>Value = string()</p><p><em>parse_query/1</em> parses incoming data to <em>erl</em> and <em>eval</em> scripts (See <strong>mod_esi(3erl)</strong>) as defined in the standard URL format, that is '+' becomes 'space' and decoding of hexadecimal characters (<em>%xx</em>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO httpd&hellip;</h2>
        <div class="sectioncontent">
<p>RFC 2616, <strong>inets(3erl)</strong>, <strong>ssl(3erl)</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="httpc.3erl.html"><span aria-hidden="true">&larr;</span> httpc.3erl: An http/1.1 client</a></li>
   <li class="next"><a href="httpd_conf.3erl.html">httpd_conf.3erl: Configuration utility functions to be used by the erlang <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
