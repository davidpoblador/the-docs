<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SoCache: The socache class is the superclass for all internal cache classes.  it organizes reference counting to make it possible to share cache instances. it also organizes a list of elements that will affect the cache. if any of the elements have changed since the cache was created, the cache is invalid.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The socache class is the superclass for all internal cache classes.  it organizes reference counting to make it possible to share cache instances. it also organizes a list of elements that will affect the cache. if any of the elements have changed since the cache was created, the cache is invalid.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="SoCache (3) manual">
  <meta name="twitter:description" content="The socache class is the superclass for all internal cache classes.  it organizes reference counting to make it possible to share cache instances. it also organizes a list of elements that will affect the cache. if any of the elements have changed since the cache was created, the cache is invalid.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcoin80-doc-SoCache-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/SoCache.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="SoCache (3) manual" />
  <meta property="og:description" content="The socache class is the superclass for all internal cache classes.  it organizes reference counting to make it possible to share cache instances. it also organizes a list of elements that will affect the cache. if any of the elements have changed since the cache was created, the cache is invalid." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcoin80-doc-SoCache-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">SoCache<small> (3)</small></h1>
        <p class="lead">The socache class is the superclass for all internal cache classes.  it organizes reference counting to make it possible to share cache instances. it also organizes a list of elements that will affect the cache. if any of the elements have changed since the cache was created, the cache is invalid.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/SoCache.3.html">
      <span itemprop="name">SoCache: The socache class is the superclass for all internal cache classes.  it organizes reference counting to make it possible to share cache instances. it also organizes a list of elements that will affect the cache. if any of the elements have changed since the cache was created, the cache is invalid.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcoin80-doc/">
      <span itemprop="name">libcoin80-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/SoCache.3.html">
      <span itemprop="name">SoCache: The socache class is the superclass for all internal cache classes.  it organizes reference counting to make it possible to share cache instances. it also organizes a list of elements that will affect the cache. if any of the elements have changed since the cache was created, the cache is invalid.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;Inventor/caches/SoCache.h&gt;</p><p>Inherited by <strong>SoBoundingBoxCache</strong>, <strong>SoConvexDataCache</strong>, <strong>SoGLRenderCache</strong>, <strong>SoNormalCache</strong>, <strong>SoPrimitiveVertexCache</strong>, and <strong>SoTextureCoordinateCache</strong>.</p><h3>Public Member Functions</h3>
<p><strong>SoCache</strong> (<strong>SoState</strong> *const state)</p><p>void <strong>ref</strong> (void)</p><p>void <strong>unref</strong> (<strong>SoState</strong> *state=NULL)</p><p>void <strong>addElement</strong> (const <strong>SoElement</strong> *const elem)</p><p>virtual void <strong>addCacheDependency</strong> (const <strong>SoState</strong> *state, <strong>SoCache</strong> *cache)</p><p>virtual SbBool <strong>isValid</strong> (const <strong>SoState</strong> *state) const </p><p>const <strong>SoElement</strong> * <strong>getInvalidElement</strong> (const <strong>SoState</strong> *const state) const </p><p>void <strong>invalidate</strong> (void)</p>
<h3>Protected Member Functions</h3>
<p>virtual void <strong>destroy</strong> (<strong>SoState</strong> *state)</p><p>virtual <strong>~SoCache</strong> ()</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>The <strong>SoCache</strong> class is the superclass for all internal cache classes.</p><p>It organizes reference counting to make it possible to share cache instances. It also organizes a list of elements that will affect the cache. If any of the elements have changed since the cache was created, the cache is invalid.</p><p>The cache element test algorithm in Coin works like this:</p><p>Every element that is read before it's written when a cache is created is stored in the <strong>SoCache</strong>'s element list. This is done to detect when something outside the cache changes.</p><p>Example: you have a <strong>SoCoordinate3</strong> node outside an <strong>SoSeparator</strong>, but an <strong>SoIndexedFaceSet</strong> inside the <strong>SoSeparator</strong>. If the <strong>SoSeparator</strong> creates a cache, <strong>SoIndexedFaceSet</strong> will read <strong>SoCoordinateElement</strong>, and since <strong>SoCoordinateElement</strong> hasn't been set after the cache was opened, the cache stores that element in the cache's list of element dependencies.</p><p>At the next frame, the <strong>SoSeparator</strong> will test if the cache is valid, and will then test all dependency elements. If one of the elements doesn't match, the cache is not valid and can't be used.</p><p>That's the basics. There are some steps you have to do when creating a cache to make the cache dependencies work. Basically you have to do it like this:</p>
<pre>
SbBool storedinvalid = SoCacheElement::setInvalid(FALSE);
state-&gt;push();
SoMyCache * cache = new SoMyCache(state);
cache-&gt;ref();
SoCacheElement::set(state, cache);
buildMyCache();
state-&gt;pop();
SoCacheElement::setInvalid(storedinvalid);
</pre>
<p>First you reset and store the old value of the cache invalid-flag. Then you push the state so that the cache can detect when something outside the cache is changed (and to be able to change the cache element). Next, you create the cache - don't forget to ref it. Finally, set the current cache in the cache element and build the cache. After building the cache, you pop the state and restore the invalid-cache flag.</p><p>When building the cache, all elements that are read will be copied into the cache (using <strong>SoElement::copyMatchInfo()</strong>), and these copied elements are used to test the validity of the cache (in <strong>SoCache::isValid()</strong>).</p><p>You don't have to manually add element dependencies. They will automatically be picked up when creating the cache. This is handled in <strong>SoElement::getConstElement()</strong>.</p><p>If you want the cache to be invalidated when some field inside your node is changed, it's common to overload the notify()-method, and call <strong>SoCache::invalidate()</strong> whenever the notify()-method for your node is called. See for instance <strong>SoShape::notify()</strong>.</p><p>Also, don't delete the cache in your notify() method. Wait until the next time the cache is needed before unref-ing the old cache.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Constructor & Destructor Documentation</h2>
        <div class="sectioncontent">
<h3>SoCache::SoCache (\fBSoState\fP *conststate)</h3>
<p>Constructor with <em>state</em> being the current state.</p>
<h3>SoCache::~SoCache ()\fC [protected]\fP, \fC [virtual]\fP</h3>
<p>Destructor</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Member Function Documentation</h2>
        <div class="sectioncontent">
<h3>void SoCache::ref (void)</h3>
<p>Increases the reference count by one.</p>
<h3>void SoCache::unref (\fBSoState\fP *state = \fCNULL\fP)</h3>
<p>Decreases the reference count by one. When the reference count reaches zero, the cache is deleted. The <strong>SoCache::destroy()</strong> method is called before the destructor is called.</p>
<h3>void SoCache::addElement (const \fBSoElement\fP *constelem)</h3>
<p>Adds <em>elem</em> to the list of elements this cache depends on.</p>
<h3>void SoCache::addCacheDependency (const \fBSoState\fP *state, \fBSoCache\fP *cache)\fC [virtual]\fP</h3>
<p>Adds dependencies from <em>cache</em> to this cache.</p>
<h3>SbBool SoCache::isValid (const \fBSoState\fP *state) const\fC [virtual]\fP</h3>
<p>Return <em>TRUE</em> if this cache is valid, <em>FALSE</em> otherwise.</p><p>Reimplemented in <strong>SoPrimitiveVertexCache</strong>, and <strong>SoGLRenderCache</strong>.</p>
<h3>const \fBSoElement\fP * SoCache::getInvalidElement (const \fBSoState\fP *conststate) const</h3>
<p>Returns the element that caused the invalidation. Returns <em>NULL</em> if the cache is valid, or if the cache was not invalidated bacause of an element.</p>
<h3>void SoCache::invalidate (void)</h3>
<p>Forces a cache to be invalid.</p>
<h3>void SoCache::destroy (\fBSoState\fP *state)\fC [protected]\fP, \fC [virtual]\fP</h3>
<p>Can be overridden by subclasses to clean up before they are deleted. Default method does nothing.</p><p>Reimplemented in <strong>SoGLRenderCache</strong>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for Coin from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="SoButtonEvent.3.html"><span aria-hidden="true">&larr;</span> SoButtonEvent.3: The sobuttonevent class is the base class for all button events.  the event classes which results from the user pushing buttons on some device (keyboard, mouse or spaceball) all inherit this class. the sobuttonevent class contains methods for setting and getting the state of the button(s).</a></li>
   <li class="next"><a href="SoCacheElement.3.html">SoCacheElement.3: The socacheelement class stores and manages the open caches. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
