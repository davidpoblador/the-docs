<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sam_initialize: Initialize health checking</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Initialize health checking">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sam_initialize (3) manual">
  <meta name="twitter:description" content="Initialize health checking">
  <meta name="twitter:image" content="https://www.carta.tech/images/corosync-dev-sam_initialize-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/sam_initialize.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sam_initialize (3) manual" />
  <meta property="og:description" content="Initialize health checking" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/corosync-dev-sam_initialize-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sam_initialize<small> (3)</small></h1>
        <p class="lead">Initialize health checking</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/sam_initialize.3.html">
      <span itemprop="name">sam_initialize: Initialize health checking</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/corosync-dev/">
      <span itemprop="name">corosync-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/sam_initialize.3.html">
      <span itemprop="name">sam_initialize: Initialize health checking</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;corosync/sam.h&gt;</strong></p><p><strong>cs_error_t sam_initialize (int</strong> <em>time_interval</em><strong>, sam_recovery_policy_t </strong><em>recovery_policy</em>);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>sam_initialize</strong> function is used to initialize health checking of a process.</p><p>Application can have only one instance of SAM. This function must be called before any other of SAM functions.  It is recommended to initialize before the process begins any process initialization.</p><p>The <em>time_interval</em> parameter is a timeout in milliseconds before taking recovery action after having not received a healthcheck.</p><p>If <em>time_interval</em> parameter is zero, there is no time limit and no healthcheck must be sent by the process.  In this operational mode, a process failure will continue to execute the recovery policy.</p><p>The <em>recovery_policy</em> is defined as type:</p>
<pre>
  typedef enum {
  	SAM_RECOVERY_POLICY_QUIT = 1,
  	SAM_RECOVERY_POLICY_RESTART = 2,
  } sam_recovery_policy_t;
</pre>
<p>where</p>
<dl class='dl-vertical'>
  <dt>
    <p>SAM_RECOVERY_POLICY_QUIT</p>
  </dt>
  <dd>
    <p>on failure, the process will terminate.</p>
  </dd>
  <dt>
    <p>SAM_RECOVERY_POLICY_RESTART</p>
  </dt>
  <dd>
    <p>on failure, the process will restart.</p>
  </dd>

</dl>
<p>To perform event driven healthchecking, <a href="../man3/sam_register.3.html"><strong>sam_register</strong>(3)</a></strong> and <a href="../man3/sam_start.3.html"><strong>sam_start</strong>(3)</a></strong> functions must called.  Event driven healthchecking causes the duplicate standby process running the SAM serve rto periodically request healthchecks from the active process.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>This call return CS_OK value if successful, otherwise and error is returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>CS_ERR_BAD_HANDLE</p>
  </dt>
  <dd>
    <p>can happened in case of double initialization.</p>
  </dd>
  <dt>
    <p>CS_ERR_INVALID_PARAM</p>
  </dt>
  <dd>
    <p><em>recovery_policy</em> has invalid value.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sam_initialize&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/sam_register.3.html"><strong>sam_register</strong>(3)</a>, <a href="../man3/sam_start.3.html"><strong>sam_start</strong>(3)</a>, <a href="../man3/sam_hc_callback_register.3.html"><strong>sam_hc_callback_register</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sam_hc_send.3.html"><span aria-hidden="true">&larr;</span> sam_hc_send.3: Send health check confirmation</a></li>
   <li class="next"><a href="sam_register.3.html">sam_register.3: Register component for health checking <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
