<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>using_tools: Using the gnu tools this is a short summary of the avr-specific aspects of using the gnu tools. normally, the generic documentation of these tools is fairly large and maintained in texinfo files. command-line options are explained in detail in the manual page.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Using the gnu tools this is a short summary of the avr-specific aspects of using the gnu tools. normally, the generic documentation of these tools is fairly large and maintained in texinfo files. command-line options are explained in detail in the manual page.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="using_tools (3avr) manual">
  <meta name="twitter:description" content="Using the gnu tools this is a short summary of the avr-specific aspects of using the gnu tools. normally, the generic documentation of these tools is fairly large and maintained in texinfo files. command-line options are explained in detail in the manual page.">
  <meta name="twitter:image" content="https://www.carta.tech/images/avr-libc-using_tools-3avr.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3avr/using_tools.3avr.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="using_tools (3avr) manual" />
  <meta property="og:description" content="Using the gnu tools this is a short summary of the avr-specific aspects of using the gnu tools. normally, the generic documentation of these tools is fairly large and maintained in texinfo files. command-line options are explained in detail in the manual page." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/avr-libc-using_tools-3avr.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">using_tools<small> (3avr)</small></h1>
        <p class="lead">Using the gnu tools this is a short summary of the avr-specific aspects of using the gnu tools. normally, the generic documentation of these tools is fairly large and maintained in texinfo files. command-line options are explained in detail in the manual page.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3avr/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3avr/using_tools.3avr.html">
      <span itemprop="name">using_tools: Using the gnu tools this is a short summary of the avr-specific aspects of using the gnu tools. normally, the generic documentation of these tools is fairly large and maintained in texinfo files. command-line options are explained in detail in the manual page.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/avr-libc/">
      <span itemprop="name">avr-libc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3avr/using_tools.3avr.html">
      <span itemprop="name">using_tools: Using the gnu tools this is a short summary of the avr-specific aspects of using the gnu tools. normally, the generic documentation of these tools is fairly large and maintained in texinfo files. command-line options are explained in detail in the manual page.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Options for the C compiler avr-gcc</h2>
        <div class="sectioncontent">
<h3>Machine-specific options for the AVR</h3>
<p>The following machine-specific options are recognized by the C compiler frontend. In addition to the preprocessor macros indicated in the tables below, the preprocessor will define the macros <strong>AVR and __AVR</strong> (to the value 1) when compiling for an AVR target. The macro AVR will be defined as well when using the standard levels gnu89 (default) and gnu99 but not with c89 and c99.</p><ul>
<li><p>-mmcu=<em>architecture</em></p></li>
</ul><p>Compile code for <em>architecture</em>. Currently known architectures are</p><p>Architecture Macros Description  avr1 <strong>AVR_ARCH</strong>=1</p><p> <strong>AVR_ASM_ONLY</strong></p><p> <strong>AVR_2_BYTE_PC</strong> [2]  Simple CPU core, only assembler support  avr2 <strong>AVR_ARCH</strong>=2</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Classic' CPU core, up to 8 KB of ROM  avr25 [1] <strong>AVR_ARCH</strong>=25</p><p> <strong>AVR_HAVE_MOVW</strong> [1]</p><p> <strong>AVR_HAVE_LPMX</strong> [1]</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Classic' CPU core with 'MOVW' and 'LPM Rx, Z[+]' instruction, up to 8 KB of ROM  avr3 <strong>AVR_ARCH</strong>=3</p><p> <strong>AVR_MEGA</strong> [5]</p><p> <strong>AVR_HAVE_JMP_CALL</strong> [4]</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Classic' CPU core, 16 KB to 64 KB of ROM  avr31 <strong>AVR_ARCH</strong>=31</p><p> <strong>AVR_MEGA</strong> [5]</p><p> <strong>AVR_HAVE_JMP_CALL</strong> [4]</p><p> <strong>AVR_HAVE_RAMPZ</strong> [4]</p><p> <strong>AVR_HAVE_ELPM</strong> [4]</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Classic' CPU core, 128 KB of ROM  avr35 [3] <strong>AVR_ARCH</strong>=35</p><p> <strong>AVR_MEGA</strong> [5]</p><p> <strong>AVR_HAVE_JMP_CALL</strong> [4]</p><p> <strong>AVR_HAVE_MOVW</strong> [1]</p><p> <strong>AVR_HAVE_LPMX</strong> [1]</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Classic' CPU core with 'MOVW' and 'LPM Rx, Z[+]' instruction, 16 KB to 64 KB of ROM  avr4 <strong>AVR_ARCH</strong>=4</p><p> <strong>AVR_ENHANCED</strong> [5]</p><p> <strong>AVR_HAVE_MOVW</strong> [1]</p><p> <strong>AVR_HAVE_LPMX</strong> [1]</p><p> <strong>AVR_HAVE_MUL</strong> [1]</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Enhanced' CPU core, up to 8 KB of ROM  avr5 <strong>AVR_ARCH</strong>=5</p><p> <strong>AVR_MEGA</strong> [5]</p><p> <strong>AVR_ENHANCED</strong> [5]</p><p> <strong>AVR_HAVE_JMP_CALL</strong> [4]</p><p> <strong>AVR_HAVE_MOVW</strong> [1]</p><p> <strong>AVR_HAVE_LPMX</strong> [1]</p><p> <strong>AVR_HAVE_MUL</strong> [1]</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Enhanced' CPU core, 16 KB to 64 KB of ROM  avr51 <strong>AVR_ARCH</strong>=51</p><p> <strong>AVR_MEGA</strong> [5]</p><p> <strong>AVR_ENHANCED</strong> [5]</p><p> <strong>AVR_HAVE_JMP_CALL</strong> [4]</p><p> <strong>AVR_HAVE_MOVW</strong> [1]</p><p> <strong>AVR_HAVE_LPMX</strong> [1]</p><p> <strong>AVR_HAVE_MUL</strong> [1]</p><p> <strong>AVR_HAVE_RAMPZ</strong> [4]</p><p> <strong>AVR_HAVE_ELPM</strong> [4]</p><p> <strong>AVR_HAVE_ELPMX</strong> [4]</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Enhanced' CPU core, 128 KB of ROM  avr6 [2] <strong>AVR_ARCH</strong>=6</p><p> <strong>AVR_MEGA</strong> [5]</p><p> <strong>AVR_ENHANCED</strong> [5]</p><p> <strong>AVR_HAVE_JMP_CALL</strong> [4]</p><p> <strong>AVR_HAVE_MOVW</strong> [1]</p><p> <strong>AVR_HAVE_LPMX</strong> [1]</p><p> <strong>AVR_HAVE_MUL</strong> [1]</p><p> <strong>AVR_HAVE_RAMPZ</strong> [4]</p><p> <strong>AVR_HAVE_ELPM</strong> [4]</p><p> <strong>AVR_HAVE_ELPMX</strong> [4]</p><p> <strong>AVR_3_BYTE_PC</strong> [2]  'Enhanced' CPU core, 256 KB of ROM  avr7 [2] <strong>AVR_ARCH</strong>=7</p><p> <strong>AVR_MEGA</strong> [5]</p><p> <strong>AVR_ENHANCED</strong> [5]</p><p> <strong>AVR_HAVE_JMP_CALL</strong> [4]</p><p> <strong>AVR_HAVE_MOVW</strong> [1]</p><p> <strong>AVR_HAVE_LPMX</strong> [1]</p><p> <strong>AVR_HAVE_MUL</strong> [1]</p><p> <strong>AVR_2_BYTE_PC</strong> [2]  'Enhanced' CPU core, 20K of Flash that starts at 0x8000</p><p>[1] New in GCC 4.2</p><p> [2] Unofficial patch for GCC 4.1</p><p> [3] New in GCC 4.2.3</p><p> [4] New in GCC 4.3</p><p> [5] Obsolete.</p><p>By default, code is generated for the avr2 architecture.</p><p>Note that when only using -mmcu=<em>architecture</em> but no -mmcu=<em></em><em>MCU type</em><em>, including the file &lt;</em><strong>avr/io.h</strong><em>&gt;</em><strong> cannot work since it cannot decide which device's definitions to select.</strong></p><ul>
<li><p>-mmcu=<em>MCU type</em></p></li>
</ul><p>The following MCU types are currently understood by avr-gcc. The table matches them against the corresponding avr-gcc architecture name, and shows the preprocessor symbol declared by the -mmcu option.</p><p>ArchitectureMCU nameMacro</p><p>avr1at90s1200__AVR_AT90S1200__ avr1attiny11__AVR_ATtiny11__ avr1attiny12__AVR_ATtiny12__ avr1attiny15__AVR_ATtiny15__ avr1attiny28__AVR_ATtiny28__</p><p>avr2at90s2313__AVR_AT90S2313__ avr2at90s2323__AVR_AT90S2323__ avr2at90s2333__AVR_AT90S2333__ avr2at90s2343__AVR_AT90S2343__ avr2attiny22__AVR_ATtiny22__ avr2attiny26__AVR_ATtiny26__ avr2at90s4414__AVR_AT90S4414__ avr2at90s4433__AVR_AT90S4433__ avr2at90s4434__AVR_AT90S4434__ avr2at90s8515__AVR_AT90S8515__ avr2at90c8534__AVR_AT90C8534__ avr2at90s8535__AVR_AT90S8535__</p><p>avr2/avr25 [1]at86rf401__AVR_AT86RF401__ avr2/avr25 [1]ata6289__AVR_ATA6289__ avr2/avr25 [1]ata5272__AVR_ATA5272__ avr2/avr25 [1]ata6616c__AVR_ATA6616C__ avr2/avr25 [1]attiny13__AVR_ATtiny13__ avr2/avr25 [1]attiny13a__AVR_ATtiny13A__ avr2/avr25 [1]attiny2313__AVR_ATtiny2313__ avr2/avr25 [1]attiny2313a__AVR_ATtiny2313A__ avr2/avr25 [1]attiny24__AVR_ATtiny24__ avr2/avr25 [1]attiny24a__AVR_ATtiny24A__ avr2/avr25 [1]attiny25__AVR_ATtiny25__ avr2/avr25 [1]attiny261__AVR_ATtiny261__ avr2/avr25 [1]attiny261a__AVR_ATtiny261A__ avr2/avr25 [1]attiny4313__AVR_ATtiny4313__ avr2/avr25 [1]attiny43u__AVR_ATtiny43U__ avr2/avr25 [1]attiny44__AVR_ATtiny44__ avr2/avr25 [1]attiny44a__AVR_ATtiny44A__ avr2/avr25 [1]attiny441__AVR_ATtiny441__ avr2/avr25 [1]attiny45__AVR_ATtiny45__ avr2/avr25 [1]attiny461__AVR_ATtiny461__ avr2/avr25 [1]attiny461a__AVR_ATtiny461A__ avr2/avr25 [1]attiny48__AVR_ATtiny48__ avr2/avr25 [1]attiny828__AVR_ATtiny828__ avr2/avr25 [1]attiny84__AVR_ATtiny84__ avr2/avr25 [1]attiny84a__AVR_ATtiny84A__ avr2/avr25 [1]attiny841__AVR_ATtiny841__ avr2/avr25 [1]attiny85__AVR_ATtiny85__ avr2/avr25 [1]attiny861__AVR_ATtiny861__ avr2/avr25 [1]attiny861a__AVR_ATtiny861A__ avr2/avr25 [1]attiny87__AVR_ATtiny87__ avr2/avr25 [1]attiny88__AVR_ATtiny88__</p><p>avr3atmega603__AVR_ATmega603__ avr3at43usb355__AVR_AT43USB355__</p><p>avr3/avr31 [3]atmega103__AVR_ATmega103__ avr3/avr31 [3]at43usb320__AVR_AT43USB320__</p><p>avr3/avr35 [2]at90usb82__AVR_AT90USB82__ avr3/avr35 [2]at90usb162__AVR_AT90USB162__ avr3/avr35 [2]ata5505__AVR_ATA5505__ avr3/avr35 [2]ata6617c__AVR_ATA6617C__ avr3/avr35 [2]ata664251__AVR_ATA664251__ avr3/avr35 [2]atmega8u2__AVR_ATmega8U2__ avr3/avr35 [2]atmega16u2__AVR_ATmega16U2__ avr3/avr35 [2]atmega32u2__AVR_ATmega32U2__ avr3/avr35 [2]attiny167__AVR_ATtiny167__ avr3/avr35 [2]attiny1634__AVR_ATtiny1634__</p><p>avr3at76c711__AVR_AT76C711__ avr4ata6285__AVR_ATA6285__ avr4ata6286__AVR_ATA6286__ avr4ata6612c__AVR_ATA6612C__ avr4atmega48__AVR_ATmega48__ avr4atmega48a__AVR_ATmega48A__ avr4atmega48pa__AVR_ATmega48PA__ avr4atmega48p__AVR_ATmega48P__ avr4atmega8__AVR_ATmega8__ avr4atmega8a__AVR_ATmega8A__ avr4atmega8515__AVR_ATmega8515__ avr4atmega8535__AVR_ATmega8535__ avr4atmega88__AVR_ATmega88__ avr4atmega88a__AVR_ATmega88A__ avr4atmega88p__AVR_ATmega88P__ avr4atmega88pa__AVR_ATmega88PA__ avr4atmega8hva__AVR_ATmega8HVA__ avr4at90pwm1__AVR_AT90PWM1__ avr4at90pwm2__AVR_AT90PWM2__ avr4at90pwm2b__AVR_AT90PWM2B__ avr4at90pwm3__AVR_AT90PWM3__ avr4at90pwm3b__AVR_AT90PWM3B__ avr4at90pwm81__AVR_AT90PWM81__</p><p>avr5at90can32__AVR_AT90CAN32__ avr5at90can64__AVR_AT90CAN64__ avr5at90pwm161__AVR_AT90PWM161__ avr5at90pwm216__AVR_AT90PWM216__ avr5at90pwm316__AVR_AT90PWM316__ avr5at90scr100__AVR_AT90SCR100__ avr5at90usb646__AVR_AT90USB646__ avr5at90usb647__AVR_AT90USB647__ avr5at94k__AVR_AT94K__ avr5atmega16__AVR_ATmega16__ avr5ata5790__AVR_ATA5790__ avr5ata5702m322__AVR_ATA5702M322__ avr5ata6613c__AVR_ATA6613C__ avr5ata6614q__AVR_ATA6614Q__ avr5ata5790n__AVR_ATA5790N__ avr5ata5795__AVR_ATA5795__ avr5atmega161__AVR_ATmega161__ avr5atmega162__AVR_ATmega162__ avr5atmega163__AVR_ATmega163__ avr5atmega164a__AVR_ATmega164A__ avr5atmega164p__AVR_ATmega164P__ avr5atmega164pa__AVR_ATmega164PA__ avr5atmega165__AVR_ATmega165__ avr5atmega165a__AVR_ATmega165A__ avr5atmega165p__AVR_ATmega165P__ avr5atmega165pa__AVR_ATmega165PA__ avr5atmega168__AVR_ATmega168__ avr5atmega168a__AVR_ATmega168A__ avr5atmega168p__AVR_ATmega168P__ avr5atmega168pa__AVR_ATmega168PA__ avr5atmega169__AVR_ATmega169__ avr5atmega169a__AVR_ATmega169A__ avr5atmega169p__AVR_ATmega169P__ avr5atmega169pa__AVR_ATmega169PA__ avr5atmega16a__AVR_ATmega16A__ avr5atmega16hva__AVR_ATmega16HVA__ avr5atmega16hva2__AVR_ATmega16HVA2__ avr5atmega16hvb__AVR_ATmega16HVB__ avr5atmega16hvbrevb__AVR_ATmega16HVBrevB__ avr5atmega16m1__AVR_ATmega16M1__ avr5atmega16u4__AVR_ATmega16U4__ avr5atmega32__AVR_ATmega32__ avr5atmega32a__AVR_ATmega32A__ avr5atmega323__AVR_ATmega323__ avr5atmega324a__AVR_ATmega324A__ avr5atmega324p__AVR_ATmega324P__ avr5atmega324pa__AVR_ATmega324PA__ avr5atmega325__AVR_ATmega325__ avr5atmega325a__AVR_ATmega325A__ avr5atmega325p__AVR_ATmega325P__ avr5atmega325pa__AVR_ATmega325PA__ avr5atmega3250__AVR_ATmega3250__ avr5atmega3250a__AVR_ATmega3250A__ avr5atmega3250p__AVR_ATmega3250P__ avr5atmega3250pa__AVR_ATmega3250PA__ avr5atmega328__AVR_ATmega328__ avr5atmega328p__AVR_ATmega328P__ avr5atmega329__AVR_ATmega329__ avr5atmega329a__AVR_ATmega329A__ avr5atmega329p__AVR_ATmega329P__ avr5atmega329pa__AVR_ATmega329PA__ avr5atmega3290__AVR_ATmega3290__ avr5atmega3290a__AVR_ATmega3290A__ avr5atmega3290p__AVR_ATmega3290P__ avr5atmega3290pa__AVR_ATmega3290PA__ avr5atmega32c1__AVR_ATmega32C1__ avr5atmega32hvb__AVR_ATmega32HVB__ avr5atmega32hvbrevb__AVR_ATmega32HVBrevB__ avr5atmega32m1__AVR_ATmega32M1__ avr5atmega32u4__AVR_ATmega32U4__ avr5atmega32u6__AVR_ATmega32U6__ avr5atmega406__AVR_ATmega406__ avr5atmega64rfr2__AVR_ATmega64RFR2__ avr5atmega644rfr2__AVR_ATmega644RFR2__ avr5atmega64__AVR_ATmega64__ avr5atmega64a__AVR_ATmega64A__ avr5atmega640__AVR_ATmega640__ avr5atmega644__AVR_ATmega644__ avr5atmega644a__AVR_ATmega644A__ avr5atmega644p__AVR_ATmega644P__ avr5atmega644pa__AVR_ATmega644PA__ avr5atmega645__AVR_ATmega645__ avr5atmega645a__AVR_ATmega645A__ avr5atmega645p__AVR_ATmega645P__ avr5atmega6450__AVR_ATmega6450__ avr5atmega6450a__AVR_ATmega6450A__ avr5atmega6450p__AVR_ATmega6450P__ avr5atmega649__AVR_ATmega649__ avr5atmega649a__AVR_ATmega649A__ avr5atmega6490__AVR_ATmega6490__ avr5atmega6490a__AVR_ATmega6490A__ avr5atmega6490p__AVR_ATmega6490P__ avr5atmega649p__AVR_ATmega649P__ avr5atmega64c1__AVR_ATmega64C1__ avr5atmega64hve__AVR_ATmega64HVE__ avr5atmega64hve2__AVR_ATmega64HVE2__ avr5atmega64m1__AVR_ATmega64M1__ avr5m3000__AVR_M3000__</p><p>avr5/avr51 [3]at90can128__AVR_AT90CAN128__ avr5/avr51 [3]at90usb1286__AVR_AT90USB1286__ avr5/avr51 [3]at90usb1287__AVR_AT90USB1287__ avr5/avr51 [3]atmega128__AVR_ATmega128__ avr5/avr51 [3]atmega128a__AVR_ATmega128A__ avr5/avr51 [3]atmega1280__AVR_ATmega1280__ avr5/avr51 [3]atmega1281__AVR_ATmega1281__ avr5/avr51 [3]atmega1284__AVR_ATmega1284__ avr5/avr51 [3]atmega1284p__AVR_ATmega1284P__ avr5/avr51 [3]atmega128rfr2__AVR_ATmega128RFR2__ avr5/avr51 [3]atmega1284rfr2__AVR_ATmega1284RFR2__</p><p>avr6atmega2560__AVR_ATmega2560__ avr6atmega2561__AVR_ATmega2561__ avr6atmega256rfr2__AVR_ATmega256RFR2__ avr6atmega2564rfr2__AVR_ATmega2564RFR2__ avr7ata5782__AVR_ATA5782__ avr7ata5831__AVR_ATA5831__</p><p>avrxmega2atxmega16a4__AVR_ATxmega16A4__ avrxmega2atxmega16a4u__AVR_ATxmega16A4U__ avrxmega2atxmega16c4__AVR_ATxmega16C4__ avrxmega2atxmega16d4__AVR_ATxmega16D4__ avrxmega2atxmega32a4__AVR_ATxmega32A4__ avrxmega2atxmega32a4u__AVR_ATxmega32A4U__ avrxmega2atxmega32c3__AVR_ATxmega32C3__ avrxmega2atxmega32c4__AVR_ATxmega32C4__ avrxmega2atxmega32d3__AVR_ATxmega32D3__ avrxmega2atxmega32d4__AVR_ATxmega32D4__ avrxmega2atxmega8e5__AVR_ATxmega8E5__ avrxmega2atxmega16e5__AVR_ATxmega16E5__ avrxmega2atxmega32e5__AVR_ATxmega32E5__</p><p>avrxmega4atxmega64a3__AVR_ATxmega64A3__ avrxmega4atxmega64a3u__AVR_ATxmega64A3U__ avrxmega4atxmega64a4u__AVR_ATxmega64A4U__ avrxmega4atxmega64b1__AVR_ATxmega64B1__ avrxmega4atxmega64b3__AVR_ATxmega64B3__ avrxmega4atxmega64c3__AVR_ATxmega64C3__ avrxmega4atxmega64d3__AVR_ATxmega64D3__ avrxmega4atxmega64d4__AVR_ATxmega64D4__</p><p>avrxmega5atxmega64a1__AVR_ATxmega64A1__ avrxmega5atxmega64a1u__AVR_ATxmega64A1U__</p><p>avrxmega6atxmega128a3__AVR_ATxmega128A3__ avrxmega6atxmega128a3u__AVR_ATxmega128A3U__ avrxmega6atxmega128b1__AVR_ATxmega128B1__ avrxmega6atxmega128b3__AVR_ATxmega128B3__ avrxmega6atxmega128c3__AVR_ATxmega128C3__ avrxmega6atxmega128d3__AVR_ATxmega128D3__ avrxmega6atxmega128d4__AVR_ATxmega128D4__ avrxmega6atxmega192a3__AVR_ATxmega192A3__ avrxmega6atxmega192a3u__AVR_ATxmega192A3U__ avrxmega6atxmega192c3__AVR_ATxmega192C3__ avrxmega6atxmega192d3__AVR_ATxmega192D3__ avrxmega6atxmega256a3__AVR_ATxmega256A3__ avrxmega6atxmega256a3u__AVR_ATxmega256A3U__ avrxmega6atxmega256a3b__AVR_ATxmega256A3B__ avrxmega6atxmega256a3bu__AVR_ATxmega256A3BU__ avrxmega6atxmega256c3__AVR_ATxmega256C3__ avrxmega6atxmega256d3__AVR_ATxmega256D3__ avrxmega6atxmega384c3__AVR_ATxmega384C3__ avrxmega6atxmega384d3__AVR_ATxmega384D3__</p><p>avrxmega7atxmega128a1__AVR_ATxmega128A1__ avrxmega7atxmega128a1u__AVR_ATxmega128A1U__ avrxmega7atxmega128a4u__AVR_ATxmega128A4U__</p><p>avrtiny10attiny4__AVR_ATtiny4__ avrtiny10attiny5__AVR_ATtiny5__ avrtiny10attiny9__AVR_ATtiny9__ avrtiny10attiny10__AVR_ATtiny10__ avrtiny10attiny20__AVR_ATtiny20__ avrtiny10attiny40__AVR_ATtiny40__</p><p>[1] 'avr25' architecture is new in GCC 4.2</p><p> [2] 'avr35' architecture is new in GCC 4.2.3</p><p> [3] 'avr31' and 'avr51' architectures is new in GCC 4.3</p><ul>
<li><p>-morder1</p></li><li><p>-morder2</p></li>
</ul><p>Change the order of register assignment. The default is</p><p>r24, r25, r18, r19, r20, r21, r22, r23, r30, r31, r26, r27, r28, r29, r17, r16, r15, r14, r13, r12, r11, r10, r9, r8, r7, r6, r5, r4, r3, r2, r0, r1</p><p>Order 1 uses</p><p>r18, r19, r20, r21, r22, r23, r24, r25, r30, r31, r26, r27, r28, r29, r17, r16, r15, r14, r13, r12, r11, r10, r9, r8, r7, r6, r5, r4, r3, r2, r0, r1</p><p>Order 2 uses</p><p>r25, r24, r23, r22, r21, r20, r19, r18, r30, r31, r26, r27, r28, r29, r17, r16, r15, r14, r13, r12, r11, r10, r9, r8, r7, r6, r5, r4, r3, r2, r1, r0</p><ul>
<li><p>-mint8</p></li>
</ul><p>Assume int to be an 8-bit integer. Note that this is not really supported by avr-libc, so it should normally not be used. The default is to use 16-bit integers.</p><ul>
<li><p>-mno-interrupts</p></li>
</ul><p>Generates code that changes the stack pointer without disabling interrupts. Normally, the state of the status register SREG is saved in a temporary register, interrupts are disabled while changing the stack pointer, and SREG is restored.</p><p>Specifying this option will define the preprocessor macro <strong>NO_INTERRUPTS</strong><strong> to the value 1.</strong></p><ul>
<li><p>-mcall-prologues</p></li>
</ul><p>Use subroutines for function prologue/epilogue. For complex functions that use many registers (that needs to be saved/restored on function entry/exit), this saves some space at the cost of a slightly increased execution time.</p><ul>
<li><p>-mtiny-stack</p></li>
</ul><p>Change only the low 8 bits of the stack pointer.</p><ul>
<li><p>-mno-tablejump</p></li>
</ul><p>Deprecated, use -fno-jump-tables instead.</p><ul>
<li><p>-mshort-calls</p></li>
</ul><p>Use rjmp/rcall (limited range) on &gt;8K devices. On avr2 and avr4 architectures (less than 8 KB or flash memory), this is always the case. On avr3 and avr5 architectures, calls and jumps to targets outside the current function will by default use jmp/call instructions that can cover the entire address range, but that require more flash ROM and execution time.</p><ul>
<li><p>-mrtl</p></li>
</ul><p>Dump the internal compilation result called 'RTL' into comments in the generated assembler code. Used for debugging avr-gcc.</p><ul>
<li><p>-msize</p></li>
</ul><p>Dump the address, size, and relative cost of each statement into comments in the generated assembler code. Used for debugging avr-gcc.</p><ul>
<li><p>-mdeb</p></li>
</ul><p>Generate lots of debugging information to stderr.</p>
<h3>Selected general compiler options</h3>
<p>The following general gcc options might be of some interest to AVR users.</p><ul>
<li><p>-O<em>n</em></p></li>
</ul><p> Optimization level <em>n</em>. Increasing <em>n</em> is meant to optimize more, an optimization level of 0 means no optimization at all, which is the default if no -O<em> option is present. The special option -Os</em> is meant to turn on all -O2<em> optimizations that are not expected to increase code size.</em></p><p>Note that at -O3, gcc attempts to inline all 'simple' functions. For the AVR target, this will normally constitute a large pessimization due to the code increasement. The only other optimization turned on with -O3 is -frename-registers, which could rather be enabled manually instead.</p><p>A simple -O option is equivalent to -O1.</p><p>Note also that turning off all optimizations will prevent some warnings from being issued since the generation of those warnings depends on code analysis steps that are only performed when optimizing (unreachable code, unused variables).</p><p>See also the <strong>appropriate FAQ entry</strong> for issues regarding debugging optimized code.</p><ul>
<li><p>-Wa,<em>assembler-options</em></p></li><li><p>-Wl,<em>linker-options</em></p></li>
</ul><p> Pass the listed options to the assembler, or linker, respectively.</p><ul>
<li><p>-g</p></li>
</ul><p>Generate debugging information that can be used by avr-gdb.</p><ul>
<li><p>-ffreestanding</p></li>
</ul><p>Assume a 'freestanding' environment as per the C standard. This turns off automatic builtin functions (though they can still be reached by prepending __builtin_ to the actual function name). It also makes the compiler not complain when main() is declared with a void return type which makes some sense in a microcontroller environment where the application cannot meaningfully provide a return value to its environment (in most cases, main() won't even return anyway). However, this also turns off all optimizations normally done by the compiler which assume that functions known by a certain name behave as described by the standard. E. g., applying the function <strong>strlen()</strong> to a literal string will normally cause the compiler to immediately replace that call by the actual length of the string, while with -ffreestanding<strong>, it will always call </strong><strong>strlen()</strong><strong> at run-time.</strong></p><ul>
<li><p>-funsigned-char</p></li>
</ul><p>Make any unqualfied char type an unsigned char. Without this option, they default to a signed char.</p><ul>
<li><p>-funsigned-bitfields</p></li>
</ul><p>Make any unqualified bitfield type unsigned. By default, they are signed.</p><ul>
<li><p>-fshort-enums</p></li>
</ul><p>Allocate to an enum type only as many bytes as it needs for the declared range of possible values. Specifically, the enum type will be equivalent to the smallest integer type which has enough room.</p><ul>
<li><p>-fpack-struct</p></li>
</ul><p>Pack all structure members together without holes.</p><ul>
<li><p>-fno-jump-tables</p></li>
</ul><p>Do not generate tablejump instructions. By default, jump tables can be used to optimize switch statements. When turned off, sequences of compare statements are used instead. Jump tables are usually faster to execute on average, but in particular for switch statements, where most of the jumps would go to the default label, they might waste a bit of flash memory.</p><p>NOTE: The tablejump instructions use the LPM assembler instruction for access to jump tables. Always use -fno-jump-tables switch, if compiling a bootloader for devices with more than 64 KB of code memory.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Options for the assembler avr-as</h2>
        <div class="sectioncontent">
<h3>Machine-specific assembler options</h3>
<ul>
<li><p>-mmcu=<em>architecture</em></p></li><li><p>-mmcu=<em>MCU name</em></p></li>
</ul><p>avr-as understands the same -mmcu= options as <strong>avr-gcc</strong>. By default, avr2 is assumed, but this can be altered by using the appropriate <strong>.arch pseudo-instruction inside the assembler source file.</strong></p><ul>
<li><p>-mall-opcodes</p></li>
</ul><p>Turns off opcode checking for the actual MCU type, and allows any possible AVR opcode to be assembled.</p><ul>
<li><p>-mno-skip-bug</p></li>
</ul><p>Don't emit a warning when trying to skip a 2-word instruction with a CPSE/SBIC/SBIS/SBRC/SBRS instruction. Early AVR devices suffered from a hardware bug where these instructions could not be properly skipped.</p><ul>
<li><p>-mno-wrap</p></li>
</ul><p>For RJMP/RCALL instructions, don't allow the target address to wrap around for devices that have more than 8 KB of memory.</p><ul>
<li><p>--gstabs</p></li>
</ul><p>Generate .stabs debugging symbols for assembler source lines. This enables avr-gdb to trace through assembler source files. This option <em>must not</em> be used when assembling sources that have been generated by the C compiler; these files already contain the appropriate line number information from the C source files.</p><ul>
<li><p>-a[cdhlmns=<em>file</em>]<em></em></p></li>
</ul><p>Turn on the assembler listing. The sub-options are:</p><ul>
<li><p>c omit false conditionals</p></li><li><p>d omit debugging directives</p></li><li><p>h include high-level source</p></li><li><p>l include assembly</p></li><li><p>m include macro expansions</p></li><li><p>n omit forms processing</p></li><li><p>s include symbols</p></li><li><p>=<em>file</em> set the name of the listing file</p></li>
</ul><p>The various sub-options can be combined into a single -a option list; <em>=file</em> must be the last one in that case.</p>
<h3>Examples for assembler options passed through the C compiler</h3>
<p>Remember that assembler options can be passed from the C compiler frontend using -Wa (see <strong>above</strong>), so in order to include the C source code into the assembler listing in file foo.lst<strong>, when compiling foo.c</strong>, the following compiler command-line can be used:</p>
<pre>
        $ avr-gcc -c -O foo.c -o foo.o -Wa,-ahls=foo.lst
</pre>
<p>In order to pass an assembler file through the C preprocessor first, and have the assembler generate line number debugging information for it, the following command can be used:</p>
<pre>
        $ avr-gcc -c -x assembler-with-cpp -o foo.o foo.S -Wa,--gstabs
</pre>
<p>Note that on Unix systems that have case-distinguishing file systems, specifying a file name with the suffix .S (upper-case letter S) will make the compiler automatically assume -x assembler-with-cpp, while using .s would pass the file directly to the assembler (no preprocessing done).</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Controlling the linker avr-ld</h2>
        <div class="sectioncontent">
<h3>Selected linker options</h3>
<p>While there are no machine-specific options for avr-ld, a number of the standard options might be of interest to AVR users.</p><ul>
<li><p>-l<em>name</em></p></li>
</ul><p>Locate the archive library named lib<em>name</em>.a<em>, and use it to resolve currently unresolved symbols from it. The library is searched along a path that consists of builtin pathname entries that have been specified at compile time (e. g. /usr/local/avr/lib</em> on Unix systems), possibly extended by pathname entries as specified by -L<em> options (that must precede the -l</em> options on the command-line).</p><ul>
<li><p>-L<em>path</em></p></li>
</ul><p>Additional location to look for archive libraries requested by -l options.</p><ul>
<li><p>--defsym <em>symbol=expr</em></p></li>
</ul><p>Define a global symbol <em>symbol</em> using <em>expr</em> as the value.</p><ul>
<li><p>-M</p></li>
</ul><p>Print a linker map to stdout.</p><ul>
<li><p>-Map <em>mapfile</em></p></li>
</ul><p>Print a linker map to <em>mapfile</em>.</p><ul>
<li><p>--cref</p></li>
</ul><p>Output a cross reference table to the map file (in case -Map is also present), or to stdout.</p><ul>
<li><p>--section-start <em>sectionname=org</em></p></li>
</ul><p>Start section <em>sectionname</em> at absolute address <em>org</em>.</p><ul>
<li><p>-Tbss <em>org</em></p></li><li><p>-Tdata <em>org</em></p></li><li><p>-Ttext <em>org</em></p></li>
</ul><p>Start the bss, data, or text section at <em>org</em>, respectively.</p><ul>
<li><p>-T <em>scriptfile</em></p></li>
</ul><p>Use <em>scriptfile</em> as the linker script, replacing the default linker script. Default linker scripts are stored in a system-specific location (e. g. under /usr/local/avr/lib/ldscripts<em> on Unix systems), and consist of the AVR architecture name (avr2 through avr5) with the suffix </em>.x appended. They describe how the various <strong>memory sections</strong> will be linked together.</p>
<h3>Passing linker options from the C compiler</h3>
<p>By default, all unknown non-option arguments on the avr-gcc command-line (i. e., all filename arguments that don't have a suffix that is handled by avr-gcc) are passed straight to the linker. Thus, all files ending in .o (object files) and .a (object libraries) are provided to the linker.</p><p>System libraries are usually not passed by their explicit filename but rather using the -l option which uses an abbreviated form of the archive filename (see above). avr-libc ships two system libraries, libc.a, and libm.a. While the standard library libc.a will always be searched for unresolved references when the linker is started using the C compiler frontend (i. e., there's always at least one implied -lc option), the mathematics library libm.a needs to be explicitly requested using -lm. See also the <strong>entry in the FAQ</strong> explaining this.</p><p>Conventionally, Makefiles use the make macro LDLIBS to keep track of -l (and possibly -L) options that should only be appended to the C compiler command-line when linking the final binary. In contrast, the macro LDFLAGS is used to store other command-line options to the C compiler that should be passed as options during the linking stage. The difference is that options are placed early on the command-line, while libraries are put at the end since they are to be used to resolve global symbols that are still unresolved at this point.</p><p>Specific linker flags can be passed from the C compiler command-line using the -Wl compiler option, see <strong>above</strong>. This option requires that there be no spaces in the appended linker option, while some of the linker options above (like -Map<strong> or --defsym</strong>) would require a space. In these situations, the space can be replaced by an equal sign as well. For example, the following command-line can be used to compile foo.c<strong> into an executable, and also produce a link map that contains a cross-reference list in the file foo.map:</strong></p>
<pre>
        $ avr-gcc -O -o foo.out -Wl,-Map=foo.map -Wl,--cref foo.c
</pre>
<p>Alternatively, a comma as a placeholder will be replaced by a space before passing the option to the linker. So for a device with external SRAM, the following command-line would cause the linker to place the data segment at address 0x2000 in the SRAM:</p>
<pre>
        $ avr-gcc -mmcu=atmega128 -o foo.out -Wl,-Tdata,0x802000
</pre>
<p>See the explanation of the <strong>data section</strong> for why 0x800000 needs to be added to the actual value. Note that the stack will still remain in internal RAM, through the symbol __stack<strong> that is provided by the run-time startup code. This is probably a good idea anyway (since internal RAM access is faster), and even required for some early devices that had hardware bugs preventing them from using a stack in external RAM. Note also that the heap for </strong><strong>malloc()</strong><strong></strong><strong> will still be placed after all the variables in the data section, so in this situation, no stack/heap collision can occur.</strong></p><p>In order to relocate the stack from its default location at the top of interns RAM, the value of the symbol __stack can be changed on the linker command-line. As the linker is typically called from the compiler frontend, this can be achieved using a compiler option like</p>
<pre>
-Wl,--defsym=__stack=0x8003ff
</pre>
<p>The above will make the code use stack space from RAM address 0x3ff downwards. The amount of stack space available then depends on the bottom address of internal RAM for a particular device. It is the responsibility of the application to ensure the stack does not grow out of bounds, as well as to arrange for the stack to not collide with variable allocations made by the compiler (sections .data and .bss).</p>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ultoa.3avr.html"><span aria-hidden="true">&larr;</span> ultoa.3avr: Stdlib.h: general utilities -</a></li>
   <li class="next"><a href="util_atomic.3avr.html">util_atomic.3avr: Util/atomic.h atomically and non-atomically executed code blocks - <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
