<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>erl_marshal: Encoding and decoding of erlang terms</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Encoding and decoding of erlang terms">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="erl_marshal (3erl) manual">
  <meta name="twitter:description" content="Encoding and decoding of erlang terms">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-erl_marshal-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/erl_marshal.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="erl_marshal (3erl) manual" />
  <meta property="og:description" content="Encoding and decoding of erlang terms" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-erl_marshal-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">erl_marshal<small> (3erl)</small></h1>
        <p class="lead">Encoding and decoding of erlang terms</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/erl_marshal.3erl.html">
      <span itemprop="name">erl_marshal: Encoding and decoding of erlang terms</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/erl_marshal.3erl.html">
      <span itemprop="name">erl_marshal: Encoding and decoding of erlang terms</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module contains functions for encoding Erlang terms into a sequence of bytes, and for decoding Erlang terms from a sequence of bytes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> int erl_compare_ext(bufp1, bufp2)</p><p>Types:</p><p>unsigned char *bufp1,*bufp2;</p><p>This function compares two encoded terms.</p><p><em>bufp1</em> is a buffer containing an encoded Erlang term term1.</p><p><em>bufp2</em> is a buffer containing an encoded Erlang term term2.</p><p>The function returns 0 if the terms are equal, -1 if term1 is less than term2, or 1 if term2 is less than term1.</p><p><strong></strong> ETERM *erl_decode(bufp)</p><p><strong></strong> ETERM *erl_decode_buf(bufpp)</p><p>Types:</p><p>unsigned char *bufp;</p><p>unsigned char **bufpp;</p><p><em>erl_decode()</em> and <em>erl_decode_buf()</em> decode the contents of a buffer and return the corresponding Erlang term. <em>erl_decode_buf()</em> provides a simple mechanism for dealing with several encoded terms stored consecutively in the buffer.</p><p><em>bufp</em> is a pointer to a buffer containing one or more encoded Erlang terms.</p><p><em>bufpp</em> is the address of a buffer pointer. The buffer contains one or more consecutively encoded Erlang terms. Following a successful call to <em>erl_decode_buf()</em>, <em>bufpp</em> will be updated so that it points to the next encoded term.</p><p><em>erl_decode()</em> returns an Erlang term corresponding to the contents of <em>bufp</em> on success, or NULL on failure. <em>erl_decode_buf()</em> returns an Erlang term corresponding to the first of the consecutive terms in <em>bufpp</em> and moves <em>bufpp</em> forward to point to the next term in the buffer. On failure, each of the functions returns NULL.</p><p><strong></strong> int erl_encode(term, bufp)</p><p><strong></strong> int erl_encode_buf(term, bufpp)</p><p>Types:</p><p>ETERM *term;</p><p>unsigned char *bufp;</p><p>unsigned char **bufpp;</p><p><em>erl_encode()</em> and <em>erl_encode_buf()</em> encode Erlang terms into external format for storage or transmission. <em>erl_encode_buf()</em> provides a simple mechanism for encoding several terms consecutively in the same buffer.</p><p><em>term</em> is an Erlang term to be encoded.</p><p><em>bufp</em> is a pointer to a buffer containing one or more encoded Erlang terms.</p><p><em>bufpp</em> is a pointer to a pointer to a buffer containing one or more consecutively encoded Erlang terms. Following a successful call to <em>erl_encode_buf()</em>, <em>bufpp</em> will be updated so that it points to the position for the next encoded term.</p><p>These functions returns the number of bytes written to buffer if successful, otherwise returns 0.</p><p>Note that no bounds checking is done on the buffer. It is the caller's responsibility to make sure that the buffer is large enough to hold the encoded terms. You can either use a static buffer that is large enough to hold the terms you expect to need in your program, or use <em>erl_term_len()</em> to determine the exact requirements for a given term.</p><p>The following can help you estimate the buffer requirements for a term. Note that this information is implementation specific, and may change in future versions. If you are unsure, use <em>erl_term_len()</em>.</p><p>Erlang terms are encoded with a 1 byte tag that identifies the type of object, a 2- or 4-byte length field, and then the data itself. Specifically:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>Tuples</em>: need 5 bytes, plus the space for each element.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>Lists</em>: need 5 bytes, plus the space for each element, and 1 additional byte for the empty list at the end.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>Strings and atoms</em>: need 3 bytes, plus 1 byte for each character (the terminating 0 is not encoded). Really long strings (more than 64k characters) are encoded as lists. Atoms cannot contain more than 256 characters.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>Integers</em>: need 5 bytes.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>Characters</em>: (integers &lt; 256) need 2 bytes.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>Floating point numbers</em>: need 32 bytes.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>Pids</em>: need 10 bytes, plus the space for the node name, which is an atom.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>Ports and Refs</em>: need 6 bytes, plus the space for the node name, which is an atom.</p>
  </dd>

</dl>
<p>The total space required will be the result calculated from the information above, plus 1 additional byte for a version identifier.</p><p><strong></strong> int erl_ext_size(bufp)</p><p>Types:</p><p>unsigned char *bufp;</p><p>This function returns the number of elements in an encoded term.</p><p><strong></strong> unsigned char erl_ext_type(bufp)</p><p>Types:</p><p>unsigned char *bufp;</p><p>This function identifies and returns the type of Erlang term encoded in a buffer. It will skip a trailing <em>magic</em> identifier. Returns <em>0</em> if the type can't be determined or one of</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_INTEGER</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_ATOM</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_PID <em>/* Erlang process identifier */</em></p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_PORT</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_REF <em>/* Erlang reference */</em></p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_EMPTY_LIST</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_LIST</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_TUPLE</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_FLOAT</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_BINARY</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>ERL_FUNCTION</p>
  </dd>

</dl>
<p><strong></strong> unsigned char *erl_peek_ext(bufp, pos)</p><p>Types:</p><p>unsigned char *bufp;</p><p>int pos;</p><p>This function is used for stepping over one or more encoded terms in a buffer, in order to directly access a later term.</p><p><em>bufp</em> is a pointer to a buffer containing one or more encoded Erlang terms.</p><p><em>pos</em> indicates how many terms to step over in the buffer.</p><p>The function returns a pointer to a sub-term that can be used in a subsequent call to <em>erl_decode()</em> in order to retrieve the term at that position. If there is no term, or <em>pos</em> would exceed the size of the terms in the buffer, NULL is returned.</p><p><strong></strong> int erl_term_len(t)</p><p>Types:</p><p>ETERM *t;</p><p>This function determines the buffer space that would be needed by <em>t</em> if it were encoded into Erlang external format by <em>erl_encode()</em>.</p><p>The size in bytes is returned.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="erl_malloc.3erl.html"><span aria-hidden="true">&larr;</span> erl_malloc.3erl: Memory allocation functions</a></li>
   <li class="next"><a href="erl_nif.3erl.html">erl_nif.3erl: Api functions for an erlang nif library <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
