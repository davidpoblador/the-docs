<!DOCTYPE html>
<html lang="en">
<head>
  <link href='https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction|shadow-multiple' rel='stylesheet' type='text/css'>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mq_send, mq_timedsend - send a message to a message queue</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="${metadescription}">
  
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mq_send<small> (3)</small></h1>
        <p class="lead">send a message to a message queue</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href=".."><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="../man3"><span itemprop="title">Library calls</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href=""><span itemprop="title">mq_send</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple" id="$section">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong></strong>

<strong>int mq_send(mqd_t </strong><em>mqdes</em><strong>, const char *</strong><em>msg_ptr</em><strong>,</strong>
<strong>              size_t </strong><em>msg_len</em><strong>, unsigned int </strong><em>msg_prio</em><strong>);</strong>

<strong></strong>
<strong></strong>

<strong>int mq_timedsend(mqd_t </strong><em>mqdes</em><strong>, const char *</strong><em>msg_ptr</em><strong>,</strong>
<strong>              size_t </strong><em>msg_len</em><strong>, unsigned int </strong><em>msg_prio</em><strong>,</strong>
<strong>              const struct timespec *</strong><em>abs_timeout</em><strong>);</strong></pre>

<p class='spacer'>

<p>Link with <em>-lrt</em>.</p>
<p class='spacer'>

<p>Feature Test Macro Requirements for glibc (see <a href="../man7/feature_test_macros.7.html"><strong>feature_test_macros</strong>(7)</a>):</p>
<p class='spacer'>

<p><strong>mq_timedsend</strong>(): _POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200112L</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple" id="$section">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>mq_send</strong>() adds the message pointed to by <em>msg_ptr</em> to the message queue referred to by the message queue descriptor <em>mqdes</em>. The <em>msg_len</em> argument specifies the length of the message pointed to by <em>msg_ptr</em>; this length must be less than or equal to the queue's <em>mq_msgsize</em> attribute. Zero-length messages are allowed.</p>
<p class='spacer'>

<p>The <em>msg_prio</em> argument is a nonnegative integer that specifies the priority of this message. Messages are placed on the queue in decreasing order of priority, with newer messages of the same priority being placed after older messages with the same priority.</p>
<p class='spacer'>

<p>If the message queue is already full (i.e., the number of messages on the queue equals the queue's <em>mq_maxmsg</em> attribute), then, by default, <strong>mq_send</strong>() blocks until sufficient space becomes available to allow the message to be queued, or until the call is interrupted by a signal handler. If the <strong>O_NONBLOCK</strong> flag is enabled for the message queue description, then the call instead fails immediately with the error <strong>EAGAIN</strong>.</p>
<p class='spacer'>

<p><strong>mq_timedsend</strong>() behaves just like <strong>mq_send</strong>(), except that if the queue is full and the <strong>O_NONBLOCK</strong> flag is not enabled for the message queue description, then <em>abs_timeout</em> points to a structure which specifies how long the call will block. This value is an absolute timeout in seconds and nanoseconds since the Epoch, 1970-01-01 00:00:00 +0000 (UTC), specified in the following structure:</p>
<p class='spacer'>

<pre>struct timespec {
    time_t tv_sec;        /* seconds */
    long   tv_nsec;       /* nanoseconds */
};
</pre>

<p>If the message queue is full, and the timeout has already expired by the time of the call, <strong>mq_timedsend</strong>() returns immediately.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple" id="$section">RETURN VALUE</h2>
        <div class="sectioncontent">

<p>On success, <strong>mq_send</strong>() and <strong>mq_timedsend</strong>() return zero; on error, -1 is returned, with <em>errno</em> set to indicate the error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple" id="$section">ERRORS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>EAGAIN</strong></dt>
    <dd>
  <p>The queue was full, and the <strong>O_NONBLOCK</strong> flag was set for the message queue description referred to by <em>mqdes</em>.</p>
    </dd>
    <dt><strong>EBADF</strong></dt>
    <dd>
  <p>The file descriptor specified in <em>mqdes</em> was invalid.</p>
    </dd>
    <dt><strong>EINTR</strong></dt>
    <dd>
  <p>The call was interrupted by a signal handler; see <a href="../man7/signal.7.html"><strong>signal</strong>(7)</a>.</p>
    </dd>
    <dt><strong>EINVAL</strong></dt>
    <dd>
  <p>The call would have blocked, and <em>abs_timeout</em> was invalid, either because <em>tv_sec</em> was less than zero, or because <em>tv_nsec</em> was less than zero or greater than 1000 million.</p>
    </dd>
    <dt><strong>EMSGSIZE</strong></dt>
    <dd>
  <p><em>msg_len</em> was greater than the <em>mq_msgsize</em> attribute of the message queue.</p>
    </dd>
    <dt><strong>ETIMEDOUT</strong></dt>
    <dd>
  <p>The call timed out before a message could be transferred.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple" id="$section">ATTRIBUTES</h2>
        <div class="sectioncontent">

<p>For an explanation of the terms used in this section, see <a href="../man7/attributes.7.html"><strong>attributes</strong>(7)</a>.</p>
<table class="table table-striped">
<tr>
<th>Interface</th>
<th>Attribute</th>
<th>Value</th></tr>

<tr>
<td><strong>mq_send</strong>(),   <strong>mq_timedsend</strong>()  </td>
<td>Thread safety</td>
<td>MT-Safe</td></tr>
</table>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple" id="$section">CONFORMING TO</h2>
        <div class="sectioncontent">

<p>POSIX.1-2001, POSIX.1-2008.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple" id="$section">NOTES</h2>
        <div class="sectioncontent">

<p>On Linux, <strong>mq_timedsend</strong>() is a system call, and <strong>mq_send</strong>() is a library function layered on top of that system call.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple" id="$section">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man3/mq_close.3.html"><strong>mq_close</strong>(3)</a>, <a href="../man3/mq_getattr.3.html"><strong>mq_getattr</strong>(3)</a>, <a href="../man3/mq_notify.3.html"><strong>mq_notify</strong>(3)</a>, <a href="../man3/mq_open.3.html"><strong>mq_open</strong>(3)</a>, <a href="../man3/mq_receive.3.html"><strong>mq_receive</strong>(3)</a>, <a href="../man3/mq_unlink.3.html"><strong>mq_unlink</strong>(3)</a>, <a href="../man7/mq_overview.7.html"><strong>mq_overview</strong>(7)</a>, <a href="../man7/time.7.html"><strong>time</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
  <li class="previous"><a href="mq_receive.3.html"><span aria-hidden="true">&larr;</span> mq_receive.3: receive a message from a message queue</a></li><li class="next"><a href="mq_setattr.3.html">mq_setattr.3: get/set message queue attributes <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
