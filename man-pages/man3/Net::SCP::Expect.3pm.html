<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Net::SCP::Expect: Wrapper for scp that allows passwords via expect.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Wrapper for scp that allows passwords via expect.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Net::SCP::Expect (3pm) manual">
  <meta name="twitter:description" content="Wrapper for scp that allows passwords via expect.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libnet-scp-expect-perl-Net::SCP::Expect-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Net::SCP::Expect.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Net::SCP::Expect (3pm) manual" />
  <meta property="og:description" content="Wrapper for scp that allows passwords via expect." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libnet-scp-expect-perl-Net::SCP::Expect-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Net::SCP::Expect<small> (3pm)</small></h1>
        <p class="lead">Wrapper for scp that allows passwords via expect.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::SCP::Expect.3pm.html">
      <span itemprop="name">Net::SCP::Expect: Wrapper for scp that allows passwords via expect.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libnet-scp-expect-perl/">
      <span itemprop="name">libnet-scp-expect-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::SCP::Expect.3pm.html">
      <span itemprop="name">Net::SCP::Expect: Wrapper for scp that allows passwords via expect.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>Example 1 - uses login method, longhand scp:</strong></p>
<pre>
 my $scpe = Net::SCP::Expect-&gt;new;
 $scpe-&gt;login(&apos;user name&apos;, &apos;password&apos;);
 $scpe-&gt;scp(&apos;file&apos;,&apos;host:/some/dir&apos;);
</pre>
<p><strong>Example 2 - uses constructor, shorthand scp:</strong></p><p> my $scpe = Net::SCP::Expect-&gt;new(host=&gt;&apos;host&apos;, user=&gt;&apos;user&apos;, password=&gt;&apos;xxxx&apos;);  $scpe-&gt;scp(&apos;file&apos;,&apos;/some/dir&apos;); # &apos;file&apos; copied to &apos;host&apos; at &apos;/some/dir&apos;</p><p><strong>Example 3 - copying from remote machine to local host</strong></p><p> my $scpe = Net::SCP::Expect-&gt;new(user=&gt;&apos;user&apos;,password=&gt;&apos;xxxx&apos;);  $scpe-&gt;scp(&apos;host:/some/dir/filename&apos;,&apos;newfilename&apos;);</p><p><strong>Example 4 - uses login method, longhand scp, IPv6 compatible:</strong></p><p> my $scpe = Net::SCP::Expect-&gt;new;  $scpe-&gt;login(&apos;user name&apos;, &apos;password&apos;);  $scpe-&gt;scp(&apos;file&apos;,&apos;[ipv6-host]:/some/dir&apos;); # &lt;-- Important: scp() with explicit IPv6 host in to or from address must use square brackets</p><p>See the <strong></strong><strong>scp()</strong><strong></strong> method for more information on valid syntax.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PREREQUISITES</h2>
        <div class="sectioncontent">
<p>Expect 1.14.  May work with earlier versions, but was tested with 1.14 (and now 1.15) only.</p><p>Term::ReadPassword 0.01 is required if you want to execute the interactive test script.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module is simply a wrapper around the scp call.  The primary difference between this module and <em>Net::SCP</em> is that you may send a password programmatically, instead of being forced to deal with interactive sessions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<h3>\fBNet::SCP::Expect-&gt;new(\fP\fIoption=&gt;val\fP, ...\fB)\fP</h3>
<p>Creates a new object and optionally takes a series of options (see \*(L"\s-1OPTIONS\s0\*(R" below). All \*(L"\s-1OBJECT\s0 \s-1METHODS\s0\*(R" apply to this constructor.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OBJECT METHODS</h2>
        <div class="sectioncontent">
<h3>\fBauto_yes\fP</h3>
<p>Set this to 1 if you want to automatically pass a 'yes' string to any yes or no questions that you may encounter before actually being asked for a password, e.g. \*(L"Are you sure you want to continue connecting (yes/no)?\*(R" for first time connections, etc.</p>
<h3>\fBerror_handler(\fP\fIsub ref\fP\fB)\fP</h3>
<p>This sets up an error handler to catch any problems with a call to '<em>scp()</em>'.  If you do not define an error handler, then a simple '<em>croak()</em>' call will occur, with the last line sent to the terminal added as part of the error message.</p><p>The method will immediately return with a void value after your error handler has been called.</p>
<h3>\fBhost(\fP\fIhost\fP\fB)\fP</h3>
<p>Sets the host for the current object</p>
<h3>\fBlogin(\fP\fIlogin, password\fP\fB)\fP</h3>
<p>If the login and password are not passed as options to the constructor, they must be passed with this method (or set individually - see 'user' and 'password' methods).  If they were already set, this method will overwrite them with the new values.  Password will not be changed if only one argument is passed (user).</p>
<h3>\fBpassword(\fP\fIpassword\fP\fB)\fP</h3>
<p>Sets the password for the current user, or the passphrase for the identify file if identity_file option is specified in the constructor</p>
<h3>\fBuser(\fP\fIuser\fP\fB)\fP</h3>
<p>Sets the user for the current object</p>
<h3>\fB\fP\f(BIscp()\fP\fB\fP</h3>
<p>Copies the file from source to destination.  If no host is specified, you will be using 'scp' as an expensive form of 'cp'.</p><p>There are several valid ways to use this method</p><p><em>Local to Remote</em></p><p><strong>scp(</strong><em>source, user@host:destination</em><strong>);</strong></p><p><strong>scp(</strong><em>source, user@[ipv6-host]:destination</em><strong>);</strong>  # Same as previous, with IPv6 host</p><p><strong>scp(</strong><em>source, host:destination</em><strong>);</strong> # User already defined</p><p><strong>scp(</strong><em>source, [ipv6-host]:destination</em><strong>);</strong> # Same as previous, with IPv6 host</p><p><strong>scp(</strong><em>source, :destination</em><strong>);</strong> # User and host already defined</p><p><strong>scp(</strong><em>source, destination</em><strong>);</strong> # Same as previous</p><p><strong>scp(</strong><em>source</em><strong>);</strong> # Same as previous; destination will use base name of source</p><p><em>Remote to Local</em></p><p><strong>scp(</strong><em>user@host:source, destination</em><strong>);</strong></p><p><strong>scp(</strong><em>user@[ipv6-host]:source, destination</em><strong>);</strong> # Same as previous, with IPv6 host</p><p><strong>scp(</strong><em>host:source, destination</em><strong>);</strong></p><p><strong>scp(</strong><em>[ipv6-host]:source, destination</em><strong>);</strong> # Same as previous, with IPv6 host</p><p><strong>scp(</strong><em>:source, destination</em><strong>);</strong></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>auto_quote</strong> - Auto-encapsulate all option values and scp from/to arguments in single-quotes to insure that special characters, such as spaces in file names, do not cause inadvertant shell exceptions.  Default is enabled. Note: Be aware that this feature may break backward compatibility with scripts that manually quoted input arguments to work around unquoted argument limitations in 0.12 or earlier of this module; in such cases, try disabling it or update your script to take advantage of the auto_quote feature.</p><p><strong>auto_yes</strong> - Set this to 1 if you want to automatically pass a 'yes' string to any yes or no questions that you may encounter before actually being asked for a password, e.g. \*(L"Are you sure you want to continue connecting (yes/no)?\*(R" for first time connections, etc.</p><p><strong>cipher</strong> - Selects the cipher to use for encrypting the data transfer.</p><p><strong>compress</strong> - Compression enable.  Passes the -C flag to <em>ssh</em>\|(1) to enable compression.</p><p><strong>force_ipv4</strong> - Forces scp to use IPv4 addresses only.</p><p><strong>force_ipv6</strong> - Forces scp to use IPv6 addresses only.</p><p><strong>host</strong> - Specify the host name.  This is now useful for both local-to-remote and remote-to-local transfers.  For IPv6 addresses, either regular or square-bracket encapsulated host are allowed (since command-line scp normally expects IPv6 addresses to be encapsulated in square brackets).</p><p><strong>identity_file</strong> - Specify the identify file to use.</p><p><strong>no_check</strong> - Set this to 1 if you want to turn off error checking.  Use this if you're absolutely positive you won't encounter any errors and you want to speed up your scp calls - up to 2 seconds per call (based on the defaults).</p><p><strong>option</strong> - Specify options from the config file.  This is the equivalent of -o.</p><p><strong>password</strong> - The password for the given login.  If not specified, then identity_file must be specified or an error will occur on login.  If both identity_file and password are specified, the password will be treated as the passphrase for the identity file.</p><p><strong>port</strong> - Use the specified port.</p><p><strong>preserve</strong> - Preserves modification times, access times, and modes from the original file.</p><p><strong>protocol</strong> - Specify the ssh protocol to use for scp.  The default is undef, which simply means scp will use whatever it normally would use.</p><p><strong>recursive</strong> - Set to 1 if you want to recursively copy entire directories.</p><p><strong>scp_path</strong> - The path for the scp binary to use, i.e.: /usr/bin/scp, defaults to use the first scp on your $PATH variable.</p><p><strong>subsystem</strong> - Specify a subsystem to invoke on the remote system.  This option is only valid with ssh2 and openssh afaik.</p><p><strong>terminator</strong> - Set the string terminator that is attached to the end of the password.  The default is a newline.</p><p><strong>timeout</strong> - Sets the timeout value for your scp operation. The default is 10 seconds.</p><p><strong>timeout_auto</strong> - Sets the timeout for the 'auto_yes' option.  I separated this from the standard timeout because generally you won't need nearly as much time as you would for a standard timeout, otherwise your script will drag considerably.  The default is 1 second (which should be plenty).</p><p><strong>timeout_err</strong> - Sets the timeout for the additional error checking that the module does.  Because errors come back almost instantaneously, I thought it best to make this a separate option for the same reasons as the 'timeout_auto' option above.  The default is 'undef'.</p><p>Setting it to any integer value means that your program will exit after that many seconds *whether or not the operation has completed*.  Caveat programmor.</p><p><strong>user</strong> - The login name you wish to use.</p><p><strong>verbose</strong> - Set to 1 if you want verbose output sent to \s-1STDOUT\s0.  Note that this disables some error checking (ala no_check) because the verbose output could otherwise be picked up by expect itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The -q option (disable progress meter) is automatically passed to scp.</p><p>The -B option may \s-1NOT\s0 be set.  If you don't plan to send passwords or use identity files (with passphrases), consider using <em>Net::SCP</em> instead.</p><p>In the event a new version of <em>Net::SSH::Perl</em> is released that supports scp, I recommend using that instead.  Why?  First, it should be a more secure way to perform scp.  Second, this module is not the fastest, even with error checking turned off.  Both reasons have to do with \s-1TTY\s0 interaction.</p><p>Also, please see the Net::SFTP module from Dave Rolsky.  If this suits your needs, use it instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUTURE PLANS</h2>
        <div class="sectioncontent">
<p>There are a few options I haven't implemented.  If you *really* want to see them added, let me know and I'll see what I can do.</p><p>Add exception handling tests to the interactive test suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN ISSUES</h2>
        <div class="sectioncontent">
<p>At least one user has reported warnings related to \s-1POD\s0 parsing with Perl 5.00503. These can be safely ignored.  They do not appear in Perl 5.6 or later.</p><p>Probably not thread safe. See \s-1RT\s0 bug #7567 from Adam Ruck.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THANKS</h2>
        <div class="sectioncontent">
<p>Thanks to Roland Giersig (and Austin Schutz) for the Expect module.  Very handy.</p><p>Thanks also go out to all those who have submitted bug reports and/or patches. See the \s-1CHANGES\s0 file for specifics.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>Net::SCP::Expect is licensed under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>2005-2008 Eric Rybski &lt;rybskej@yahoo.com&gt;, 2003-2004 Daniel J. Berger.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CURRENT AUTHOR AND MAINTAINER</h2>
        <div class="sectioncontent">
<p>Eric Rybski &lt;rybskej@yahoo.com&gt;.  Please send all module inquries to me.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ORIGINAL AUTHOR</h2>
        <div class="sectioncontent">
<p>Daniel Berger</p><p>djberg96 at yahoo dot com</p><p>imperator on \s-1IRC\s0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Net::SCP::Expect&hellip;</h2>
        <div class="sectioncontent">
<p>Net::SCP, Net::SFTP, Net::SSH::Perl, Net::SSH2</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Net::SCP.3pm.html"><span aria-hidden="true">&larr;</span> Net::SCP.3pm: Perl extension for secure copy protocol</a></li>
   <li class="next"><a href="Net::SMPP.3pm.html">Net::SMPP.3pm: Pure perl implementation of smpp 3.4 over tcp <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
