<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Data::BitMask: Bitmask manipulation</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Bitmask manipulation">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Data::BitMask (3pm) manual">
  <meta name="twitter:description" content="Bitmask manipulation">
  <meta name="twitter:image" content="https://www.carta.tech/images/libdata-bitmask-perl-Data::BitMask-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Data::BitMask.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Data::BitMask (3pm) manual" />
  <meta property="og:description" content="Bitmask manipulation" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libdata-bitmask-perl-Data::BitMask-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Data::BitMask<small> (3pm)</small></h1>
        <p class="lead">Bitmask manipulation</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Data::BitMask.3pm.html">
      <span itemprop="name">Data::BitMask: Bitmask manipulation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libdata-bitmask-perl/">
      <span itemprop="name">libdata-bitmask-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Data::BitMask.3pm.html">
      <span itemprop="name">Data::BitMask: Bitmask manipulation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Data::BitMask;

  my $FileMask = Data::BitMask-&gt;new(
      READ =&gt;    1,
      WRITE =&gt;   2,
      EXECUTE =&gt; 4,
      RX =&gt;      5,
      RWX =&gt;     7,
      FULL =&gt;    7,
    );

  my $mask = $FileMask-&gt;build_mask(&apos;READ|WRITE&apos;);
  print Data::Dumper-&gt;Dump([
      $FileMask-&gt;explain_mask($mask),
      $FileMask-&gt;break_mask($mask)
    ]);

  my $mask2 = $FileMask-&gt;build_mask({FULL =&gt; 1, WRITE =&gt; 0});
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module allows one to create bitmask manipulator objects that can be used to create bitmask values based on a list of constants, as well as to break apart masks using those constants.  The advantages are that you don't have to pollute namespaces to use constants, you can ensure that only appropriate constants are used for specific masks, you can easily break apart and explain masks, and in general it is much easier for the user to interact with masks.</p><p>The module only interacts with masks that fit in Perl integers.  In some places, it presumes that you are using 32 bit integers (i.e. canonicalizing negative values).</p><p>The module expends a modest amount of overhead in creating the \*(C`Data::BitMask\*(C' object so as to speed up future mask manipulations.</p><h3>Installation instructions</h3>
<p>This module requires \*(C`Module::Build 0.24\*(C' to use the automated installation procedures.  With \*(C`Module::Build\*(C' installed:</p><p>  Build.PL   perl build test   perl build install</p><p>It can also be installed manually by copying \*(C`lib/Data/Bitmask.pm\*(C' to \*(C`perl/site/lib/Data/Bitmask.pm\*(C'.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Suggest Module Implementation</h2>
        <div class="sectioncontent">
<p>Here is one suggested approach to using bitmask manipulators in a module.</p><p>  {   my $cache;   sub SECURITY_INFORMATION {     $cache ||= Data::BitMask-&gt;new(         OWNER_SECURITY_INFORMATION =&gt; 0x1,         GROUP_SECURITY_INFORMATION =&gt; 0x2,         DACL_SECURITY_INFORMATION  =&gt; 0x4,         SACL_SECURITY_INFORMATION  =&gt; 0x8,       );   }   }</p><p>The bitmask manipulator can then be accessed as:</p><p>  &SECURITY_INFORMATION-&gt;build_mask(&apos;DACL_SECURITY_INFORMATION&apos;);</p><p>Or, if you are outside of the module, as:</p><p>  &Win32::Security::SECURITY_INFORMATION-&gt;build_mask(&apos;DACL_SECURITY_INFORMATION&apos;);</p><p>This has several advantages:</p><ul>
<li><p>Demand creation of the \*(C`Data::Bitmask\*(C' object.  Creating objects with huge numbers of constants (i.e. hundreds or thousands) can be a bit time consuming, so this delays creation until the object actually gets used.  At the same time, the created object is cached.</p></li><li><p>Easy access from within in the module, reasonably easy access from outside the module.</p></li><li><p>If the user wants even easier access from outside the module, you can support Exporter and let the sub be exported.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Method Reference</h2>
        <div class="sectioncontent">
<h3>new</h3>
<p>Creates a new bitmask manipulator.  Pass a list of constant and value pairs. The constants do not have to be disjoint, but order does matter.  When executing \*(C`explain_mask\*(C' or \*(C`explain_const\*(C', constants that are earlier in the list take precedence over those later in the list.  Constant names are not allowed to have space or pipes in them, and constant values have to be integers. Constant names are case insensitive but preserving.</p><p>If the passed value for the constant name is an anonymous array, then it is presumed that the name is the first value and that the remainder consists of name-value pairs of parameters.  The only currently supported parameter is \*(C`full_match\*(C', which implies that the constant should only be returned from \*(C`break_mask\*(C' or \*(C`explain_mask\*(C' if it perfectly matches the mask being explained.  For example:</p><p>      [qw(FILES_ONLY_NO_INHERIT full_match 1)] =&gt;    1,</p>
<h3>add_constants</h3>
<p>Adds constants to an existing bitmask manipulator.  Pass a list of constant and value pairs as for \*(C`new\*(C'.  Constants will be added to the end of the list (see \*(C`new\*(C' for an explanation of ordering concerns).</p><p>The main use for \*(C`add_constants\*(C' is adding aggregate constants created by using \*(C`build_mask\*(C'.</p>
<h3>build_mask</h3>
<p>This takes one of three things as a parameter:</p><ul>
<li><p>scalar - string is split on '\*(C`|\*(C'' and/or whitespace to generate a list of constants</p></li><li><p>\s-1ARRAY\s0 ref - elements are the list of constants</p></li><li><p>\s-1HASH\s0 ref - keys with true values are the list of constants; keys with false values are subtracted from the resultant mask</p></li>
</ul><p>In all situations, integers are legal in place of constant names and are treated as the value, after adding 2**32 to any negative integers.</p>
<h3>break_mask</h3>
<p>Breaks a mask apart.  Pass a mask value as an integer.  Returns a hash of all constants whose values are subsets of the passed mask.  Values are set to 1 so the result can safely be passed to \*(C`build_mask\*(C'.</p><p>Commonly used for operations like:</p><p>        if ($MaskManipulator-&gt;break_mask($my_mask_value)-&gt;{CONSTANT}) {</p><p>Note that \*(C`break_mask\*(C' accepts</p><p>To eliminate a constant from explain_mask or break_mask unless it perfectly matches, use \*(C`full_match\*(C' constants.</p>
<h3>explain_mask</h3>
<p>Explains a mask in terms of a relatively minimal set of constants.  Pass either a mask value as an integer or any valid parameter for \*(C`build_mask\*(C'.  Returns a hash of constants that will recreate the mask. Many times, this will be the minimum number of constants necessary to describe the mask.  Note that creating the true minimum set of constants is somewhat painful (see Knapsack problem).</p><p>The algorithm used by \*(C`explain_mask\*(C' is to first test for a constant that perfectly matches the mask.  If one is found, this is the obvious answer.  In the absence of a perfect match, \*(C`break_mask\*(C' is used to generate a maximal solution.  All simply occluded constants are then eliminated (that is to say, all constants in the list whose values are subsets of another single constant). This means, for instance, that if you had only three constants, \s-1AB\s0 =&gt; 3, \s-1BC\s0 =&gt; 6, and \s-1AC\s0 =&gt; 5, \*(C`explain_mask\*(C' would return all three when passed the value 7 because no one constant is a subset of any single one of the others.</p><p>To eliminate a constant from explain_mask or break_mask unless it perfectly matches, use \*(C`full_match\*(C' constants.</p>
<h3>build_const</h3>
<p>This takes one of two things as a parameter:</p><ul>
<li><p>scalar integer - if a scalar integer is passed, then the value is simply returned, after adding 2**32 to any negative integers</p></li><li><p>scalar - string is looked up in the list of constants</p></li>
</ul>
<h3>explain_const</h3>
<p>Looks for a perfect match for the passed mask value.  Pass either a mask value as an integer or any valid parameter for \*(C`build_mask\*(C'.  If one is not found, it croaks.</p>
<h3>get_constants</h3>
<p>Returns all constants passed either to \*(C`new\*(C' or \*(C`add_constants\*(C'.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Toby Ovod-Everett, toby@ovod-everett.org</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2003, 2004 Toby Ovod-Everett.  All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Danga::Socket.3pm.html"><span aria-hidden="true">&larr;</span> Danga::Socket.3pm: Event loop and event-driven async socket base class</a></li>
   <li class="next"><a href="Data::Buffer.3pm.html">Data::Buffer.3pm: Read/write buffer class <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
