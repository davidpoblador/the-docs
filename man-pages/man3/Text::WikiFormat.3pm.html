<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Text::WikiFormat: Module for translating wiki formatted text into other formats</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Module for translating wiki formatted text into other formats">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Text::WikiFormat (3pm) manual">
  <meta name="twitter:description" content="Module for translating wiki formatted text into other formats">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtext-wikiformat-perl-Text::WikiFormat-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Text::WikiFormat.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Text::WikiFormat (3pm) manual" />
  <meta property="og:description" content="Module for translating wiki formatted text into other formats" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtext-wikiformat-perl-Text::WikiFormat-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Text::WikiFormat<small> (3pm)</small></h1>
        <p class="lead">Module for translating wiki formatted text into other formats</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Text::WikiFormat.3pm.html">
      <span itemprop="name">Text::WikiFormat: Module for translating wiki formatted text into other formats</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtext-wikiformat-perl/">
      <span itemprop="name">libtext-wikiformat-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Text::WikiFormat.3pm.html">
      <span itemprop="name">Text::WikiFormat: Module for translating wiki formatted text into other formats</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
        use Text::WikiFormat;
        my $html = Text::WikiFormat::format($raw);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The original Wiki web site had a very simple interface to edit and to add pages.  Its formatting rules are simple and easy to use.  They are also easy to translate into other, more complicated markup languages with this module.  It creates \s-1HTML\s0 by default, but can produce valid \s-1POD\s0, DocBook, \s-1XML\s0, or any other format imaginable.</p><p>The most important function is \*(C`format()\*(C'.  It is not exported by default.</p><h3>\fIformat()\fP</h3>
<p>\*(C`format()\*(C' takes one required argument, the text to convert, and returns the converted text.  It allows two optional arguments.  The first is a reference to a hash of tags.  Anything passed in here will override the default tag behavior.  The second argument is a hash reference of options.  They are currently:</p><ul>
<li><p>prefix The prefix of any links.  In \s-1HTML\s0 mode, this is the path to the Wiki.  The actual linked item itself will be appended to the prefix.  This is useful to create full URIs:         { prefix =&gt; &apos;http://example.com/wiki.pl?page=&apos; }</p></li><li><p>extended A boolean flag, false by default, to use extended linking semantics.  This comes from the Everything Engine (http://everydevel.com/), which marks links with square brackets.  An optional title may occur after the link target, preceded by an open pipe.  These are valid extended links:         [a valid link]         [link|title] Where the linking semantics of the destination format allow it, the result will display the title instead of the \s-1URI\s0.  In \s-1HTML\s0 terms, the title is the content of an \*(C`A\*(C' element (not the content of its \*(C`HREF\*(C' attribute). You can use delimiters other than single square brackets for marking extended links by passing a value for \*(C`extended_link_delimiters\*(C' in the %tags hash when calling \*(C`format\*(C'.</p></li><li><p>implicit_links A boolean flag, true by default, to create links from StudlyCapsStringsNote that if you disable this flag, you should probably enable the \*(C`extended\*(C' one also, or there will be no way of creating links in your documents.  To disable it, use the pair:         { implicit_links =&gt; 0 }</p></li><li><p>absolute_links A boolean flag, false by default, which treats any links that are absolute URIs (such as http://www.cpan.org/) specially. Any prefix will not apply and the URIs aren't quoted. Use this in conjunction with the \*(C`extended\*(C' option to detect the link. A link is any text that starts with a known schema followed by a colon and one or more non-whitespace characters.  This is a distinct subset of what \s-1URI\s0 recognizes as a \s-1URI\s0, but is a good first-order approximation.  If you need to recognize more complex URIs, use the standard wiki formatting explained earlier. The recognized schemas are those defined in the \*(C`schema\*(C' value in the %tags hash. The defaults are \*(C`http\*(C', \*(C`https\*(C', \*(C`ftp\*(C', \*(C`mailto\*(C', and \*(C`gopher\*(C'.</p></li>
</ul>
<h3>Wiki Format</h3>
<p>Wiki formatting is very simple.  An item wrapped in three single quotes is <strong>strong</strong>.  An item wrapped in two single quotes is <em>emphasized</em>.  Any word with multiple CapitalLetters (e. g., StudlyCaps) will become a link.  Four or more hyphen characters at the start of a line create a horizontal line. Newlines turn into the appropriate tags.  Headers are matching equals signs around the header text \*(-- the more signs, the lesser the header.</p><p>Lists are indented text, by one tab or four spaces by default.  You may disable indentation.  In unordered lists, where each item has its own bullet point, each item needs a leading asterisk and space.  Ordered lists consist of items marked with combination of one or more alphanumeric characters followed by a period and an optional space.  Any indented text without either marking is code, handled literally.  You can nest lists.</p><p>The following is valid Wiki formatting, with an extended link as marked.</p><p>        = my interesting text =</p><p>        ANormalLink         [let the Sun shine|AnExtendedLink]</p><p>        == my interesting lists ==</p><p>            * unordered one             * unordered two</p><p>            1. ordered one             2. ordered two                         a. nested one                         b. nested two</p><p>            code one             code two</p><p>        The first line of a normal paragraph.         The second line of a normal paragraph.  Whee.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORT</h2>
        <div class="sectioncontent">
<p>If you'd like to make your life more convenient, you can optionally import a subroutine that already has default tags and options set up.  This is especially handy if you use a prefix:</p><p>        use Text::WikiFormat prefix =&gt; &apos;http://www.example.com/&apos;;         wikiformat( &apos;some text&apos; );</p><p>Tags are interpreted as, well, tags, except for five special keys:</p><ul>
<li><p>\*(C`prefix\*(C', interpreted as a link prefix</p></li><li><p>\*(C`extended\*(C', interpreted as the extended link flag</p></li><li><p>\*(C`implicit_links\*(C', interpreted as the flag to control implicit links</p></li><li><p>\*(C`absolute_links\*(C', interpreted as the flag to control absolute links</p></li><li><p>\*(C`as\*(C', interpreted as an alias for the imported function</p></li>
</ul><p>Use the \*(C`as\*(C' flag to control the name by which your code calls the imported functionFor example,</p><p>        use Text::WikiFormat as =&gt; &apos;formatTextInWikiStyle&apos;;         formatTextInWikiStyle( &apos;some text&apos; );</p><p>You might choose a better name, though.</p><p>The calling semantics are effectively the same as those of the <em>format()</em> function.  Any additional tags or options to the imported function will override the defaults.  This code:</p><p>        use Text::WikiFormat as =&gt; &apos;wf&apos;, extended =&gt; 0;         wf( &apos;some text&apos;, {}, { extended =&gt; 1 });</p><p>enables extended links, though the default is to disable them.</p><p>Tony Bowden &lt;tony@kasei.com&gt; suggested this feature, but all implementation blame rests solely with me.  Kate L Pugh (&lt;kake@earth.li&gt;) pointed out that it didn't work, with tests.  It works now.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GORY DETAILS</h2>
        <div class="sectioncontent">
<h3>Tags</h3>
<p>There are two types of Wiki markup: line items and blocks.  Blocks include lists, which are made up of lines and can also contain other lists.</p><p><em>Line items</em></p><p>There are two classes of line items: simple tags, and tags that contain data. The simple tags are \*(C`newline\*(C' and \*(C`line\*(C'.  The module inserts a newline tag whenever it encounters a newline character (\*(C`&#92;n\*(C').  It inserts a line tag whenever four or more dash characters (\*(C`----\*(C') occur at the start of a line. No whitespace is allowed.  These default to the &lt;br&gt; and &lt;hr&gt; \s-1HTML\s0 tags, respectively.  To override either, simply pass tags such as:</p><p>        my $html = format($text, { newline =&gt; "&#92;n" });</p><p>The three line items are more complex, and require subroutine references. This category includes the \*(C`strong\*(C' and \*(C`emphasized\*(C' tags as well as \*(C`link\*(C's. The first argument passed to the subref will be the data found in between the marks.  The second argument is the $opts hash reference.  The default action for a strong tag is equivalent to:</p><p>        my $html = format($text, { strong =&gt; sub { "&lt;b&gt;$_[0]&lt;/b&gt;" } });</p><p>As of version 0.70, you can change the regular expressions used to find strong and emphasized tags:</p><p>        %tags = (                 strong_tag     =&gt; qr/&#92;*(.+?)&#92;*/,                 emphasized_tag =&gt; qr|(?&lt;!&lt;)/(.+?)/|,         );</p><p>        $wikitext = &apos;this is *strong*, /emphasized/, and */emphasized strong/*&apos;;         $htmltext = Text::WikiFormat::format( $wikitext, &#92;%tags, {} );</p><p>Be aware that using forward slashes to mark anything leads to the hairy regular expression \*(-- use something else.  <strong>This interface is experimental</strong> and may change if I find something better.  It's nice to be able to override those tags, though.</p><p>Finally, there are \*(C`extended_link_delimiters\*(C', which allow you to use delimiters other than single square brackets for marking extended links.  Pass the tags as:</p><p>        my $html = format( $text, { extended_link_delimiters =&gt; [ &apos;[[&apos;, &apos;]]&apos; ] });</p><p>This allows you to use double square brackets as UseMod supports:</p><p>        [[an extended link]]         [[a titled extended link|title]]</p><p><em>Blocks</em></p><p>There are five default block types: \*(C`paragraph\*(C', \*(C`header\*(C', \*(C`code\*(C', \*(C`unordered\*(C', and \*(C`ordered\*(C'.  The parser usually finds these by indentation, either one or more tabs or four or more whitespace characters.  (This does not include newlines, however.)  Any line that does not fall in any of these three categories is a \*(C`paragraph\*(C'.</p><p>Code, unordered, and ordered blocks do not <em>require</em> indentation, but the parser uses it to control nesting in lists.  Be careful.  To mark a block as requiring indentation, use the \*(C`indented\*(C' tag, which contains a reference to a hash:</p><p>        my $html = format($text, {                 indented    =&gt; { map { $_ =&gt; 1 } qw( ordered unordered code )}         });</p><p>Block entries in the tag hashes must contain array references.  The first two items are the tags used at the start and end of the block.  The last items contain the tags used at the start and end of each line.  Where there needs to be more processing of individual lines, use a subref as the third item.  This is how the module numbers ordered lines in \s-1HTML\s0 lists:</p><p>        my $html = format($text, { ordered =&gt; [ &apos;&lt;ol&gt;&apos;, "&lt;/ol&gt;&#92;n",                 sub { qq|&lt;li value="$_[2]"&gt;$_[0]&lt;/li&gt;&#92;n| } ] });</p><p>The first argument to these subrefs is the post-processed text of the line itself.  (Processing removes the indentation and tokens used to mark this as a list and checks the rest of the line for other line formattings.)  The second argument is the indentation level.  The subsequent arguments are captured variables in the regular expression used to find this list type.  The regexp for ordered lists is:</p><p>        qr/^([&#92;dA-Za-z]+)&#92;.&#92;s*/;</p><p>The module processes indentation first, if applicable, and stores the indentation level (the length of the indentation removed).  The line must contain one or more alphanumeric character followed by a single period and optional whitespace to be an ordered list item.  The module saves the contents of this last group, the value of the list item, and passes it to the subref as the third argument.</p><p>Lists automatically start and end as necessary.</p><p>Because of the indentation issue, there is a specific blocks processing in a specific order.  The \*(C`blockorder\*(C' tag governs this order.  It contains a reference to an array of the names of the appropriate blocks to process.  If you add a block type, be sure to add an entry for it in \*(C`blockorder\*(C':</p><p>        my $html = format($text, {                 escaped       =&gt; [ &apos;&apos;, &apos;&apos;, &apos;&apos;, &apos;&apos; ],                 blocks        =&gt; {                         invisible =&gt; qr!^--(.*?)--$!,                 },                 blockorder    =&gt;                         [qw( header line ordered unordered code paragraph invisible )],         });</p><p><em>Finding blocks</em></p><p>Text::WikiFormat uses regular expressions to find blocks.  These are in the %tags hash under the \*(C`blocks\*(C' key.  To change the regular expression to find code block items, use:</p><p>        my $html     =  format($wikitext, {                 blocks   =&gt; {                         code =&gt; qr/^:&#92;s+/,                 },                 indented =&gt; {                         code =&gt; 1,                 },         );</p><p>This will require indentation and a colon to mark code lines.  A potential shortcut is to use the \*(C`indent\*(C' tag to match or to change the indentation marker.</p><p><strong>Note</strong>: if you want to mark a block type as non-indented, you <strong>cannot</strong> use an empty regex such as \*(C`qr//\*(C'.  Use a mostly-empty, always-true regex such as \*(C`qr/^/\*(C' instead.</p><p><em>Finding Blocks in the Correct Order</em></p><p>As intrepid bug reporter Tom Hukins pointed out in \s-1CPAN\s0 \s-1RT\s0 bug #671, the order in which Text::WikiFormat searches for blocks varies by platform and version of Perl.  Because some block-finding regular expressions are more specific than others, what you intend to be one type of block may turn into a different list type.</p><p>If you're adding new block types, be aware of this.  The \*(C`blockorder\*(C' entry in %tags exists to force Text::WikiFormat to apply its regexes from most specific to least specific.  It contains an array reference.  By default, it looks for ordered lists first, unordered lists second, and code references at the end.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>chromatic, \*(C`chromatic@wgz.org\*(C', with much input from the Jellybean team (including Jonathan Paulett).  Kate L Pugh has also provided several patches, many failing tests, and is usually the driving force behind new features and releases.  If you think this module is worth buying me a beer, she deserves at least half of it.</p><p>Alex Vandiver added a nice patch and tests for extended links.</p><p>Tony Bowden, Tom Hukins, and Andy H. all suggested useful features that are now implemented.</p><p>Sam Vilain, Chris Winters, Paul Schmidt, and Art Henry have all found and reported silly bugs.</p><p>Blame me for the implementation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The link checker in \*(C`format_line()\*(C' may fail to detect existing links that do not follow \s-1HTML\s0, \s-1XML\s0, or \s-1SGML\s0 style.  They may die with some \s-1SGML\s0 styles too. <em>Sic transit gloria mundi</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<ul>
<li><p>Find a nicer way to mark list as having unformatted lines</p></li><li><p>Optimize \*(C`format_line()\*(C' to work on a list of lines</p></li><li><p>Handle nested \*(C`strong\*(C' and \*(C`emphasized\*(C' markings better</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OTHER MODULES</h2>
        <div class="sectioncontent">
<p>Brian \*(L"Ingy\*(R" Ingerson's CGI::Kwiki has a fairly nice parser.</p><p>John McNamara's Pod::Simple::Wiki looks like a good project.</p><p>Matt Sergeant keeps threatening to write a nice SAX-throwing Wiki formatter.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2002 - 2006, chromatic.  All rights reserved.  This module is distributed under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Text::WikiCreole.3pm.html"><span aria-hidden="true">&larr;</span> Text::WikiCreole.3pm: Convert wiki creole 1.0 markup to xhtml</a></li>
   <li class="next"><a href="Text::WikiFormat::Blocks.3pm.html">Text::WikiFormat::Blocks.3pm: Blocktypes for text::wikiformat <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
