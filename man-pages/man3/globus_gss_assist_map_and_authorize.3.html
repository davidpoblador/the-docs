<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>globus_gss_assist_map_and_authorize: Gridmap authorization and local user mapping.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Gridmap authorization and local user mapping.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="globus_gss_assist_map_and_authorize (3) manual">
  <meta name="twitter:description" content="Gridmap authorization and local user mapping.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libglobus-gss-assist-doc-globus_gss_assist_map_and_authorize-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/globus_gss_assist_map_and_authorize.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="globus_gss_assist_map_and_authorize (3) manual" />
  <meta property="og:description" content="Gridmap authorization and local user mapping." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libglobus-gss-assist-doc-globus_gss_assist_map_and_authorize-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">globus_gss_assist_map_and_authorize<small> (3)</small></h1>
        <p class="lead">Gridmap authorization and local user mapping.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/globus_gss_assist_map_and_authorize.3.html">
      <span itemprop="name">globus_gss_assist_map_and_authorize: Gridmap authorization and local user mapping.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libglobus-gss-assist-doc/">
      <span itemprop="name">libglobus-gss-assist-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/globus_gss_assist_map_and_authorize.3.html">
      <span itemprop="name">globus_gss_assist_map_and_authorize: Gridmap authorization and local user mapping.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>Gridmap Authorization and Local User Mapping.</p><p>Functions in this group are used to authorize a GSSAPI credential to perform some action on the local machine. In addition to checking whether a credential is authorized, it can also be mapped to a local user name.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Macro Definition Documentation</h2>
        <div class="sectioncontent">
<h3>#define GlobusGssAssistFreeDNArray(dn_a)</h3>
<p>Free array of distinguished names. Free the contents of a name array created during a successful call to <strong>globus_gss_assist_lookup_all_globusid()</strong></p><p><strong>Parameters:</strong></p><p><em>dn_a</em> Array of names to free.</p><p><strong>Return values:</strong></p><p><em>void</em></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Function Documentation</h2>
        <div class="sectioncontent">
<h3>int globus_gss_assist_gridmap (char *globusidp, char **useridp)</h3>
<p>Look up the default mapping for a Grid identity in a gridmap file. The <strong>globus_gss_assist_gridmap()</strong> function parses the default gridmap file and modifies its <em>useridp</em> parameter to point to a copy of the string containing the default local identity that the grid identity is mapped to. If successful, the caller is responsible for freeing the string pointed to by <em>useridp</em>.</p><p>By default, <strong>globus_gss_assist_gridmap()</strong> looks for the default gridmap file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p><p><strong>Parameters:</strong></p><p><em>globusidp</em> The GSSAPI name string of the identity who requested authorization</p><p><em>useridp</em> A pointer to a string to be set to the default user ID for the local system. No validation is done to check that such a user exists.</p><p><strong>Returns:</strong></p><p>On success, <strong>globus_gss_assist_gridmap()</strong> returns 0 and modifies the the string pointed to by the <em>useridp</em> parameter. If an error occurs, a non-zero value is returned and the value pointed to by <em>useridp</em> is undefined.</p><p><strong>Return values:</strong></p><p><em>GLOBUS_SUCCESS</em> Success</p><p><em>1</em> Error</p>
<h3>globus_result_t globus_gss_assist_lookup_all_globusid (char *username, char **dns[], int *dn_count)</h3>
<p>Look up all Grid IDs associated with a local user ID. The <strong>globus_gss_assist_lookup_all_globusid()</strong> function parses a gridmap file and finds all Grid IDs that map to a local user ID. The <em>dns</em> parameter is modified to point to an array of Grid ID strings from the gridmap file, and the <em>dn_count</em> parameter is modified to point to the number of Grid ID strings in the array. The caller is responsible for freeing the array using the macro <em></em><strong>GlobusGssAssistFreeDNArray()</strong><em></em><strong>.</strong></p><p>By default, <strong>globus_gss_assist_lookup_all_globusid()</strong> looks for the default gridmap file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p><p><strong>Parameters:</strong></p><p><em>username</em> The local username to look up in the gridmap file.</p><p><em>dns</em> A pointer to an array of strings. This function modifies this to point to a newly allocated array of strings. The caller must use the macro <em></em><strong>GlobusGssAssistFreeDNArray()</strong><em></em><strong> to free this memory.</strong></p><p><em>dn_count</em> A pointer to an integer that is modified to contain the number of entries in the array returned via the <em>dns</em> parameter.</p><p><strong>Returns:</strong></p><p>On success, <strong>globus_gss_assist_lookup_all_globusid()</strong> returns GLOBUS_SUCCESS and modifies its <em>dns</em> and <em>dn_count</em> parameters as described above. If an error occurs, <strong>globus_gss_assist_lookup_all_globusid()</strong> returns a globus_result_t that can be resolved to an error object and the values pointed to by <em>dns</em> and <em>dn_count</em> are undefined.</p><p><strong>Return values:</strong></p><p><em>GLOBUS_SUCCESS</em> Success</p><p><em>GLOBUS_GSI_GSS_ASSIST_ERROR_WITH_ARGUMENTS</em> Error with arguments</p><p><em>GLOBUS_GSI_GSS_ASSIST_ERROR_WITH_GRIDMAP</em> Invalid path to gridmap</p><p><em>GLOBUS_GSI_GSS_ASSIST_ERROR_ERRNO</em> System error</p>
<h3>globus_result_t globus_gss_assist_map_and_authorize (gss_ctx_id_tcontext, char *service, char *desired_identity, char *identity_buffer, unsigned intidentity_buffer_length)</h3>
<p>Authorize the peer of a security context to use a service. The <strong>globus_gss_assist_map_and_authorize()</strong> function attempts to authorize the peer of a security context to use a particular service. If the <em>desired_identity</em> parameter is non-NULL, the authorization will succeed only if the peer is authorized for that identity. Otherwise, any valid authorized local user name will be used. If authorized, the local user name will be copied to the string pointed to by the <em>identity_buffer</em> parameter, which must be at least as long as the value passed as the <em>identity_buffer_length</em> parameter.</p><p>If authorization callouts are defined in the callout configuration file, <strong>globus_gss_assist_map_and_authorize()</strong> will invoke both the GLOBUS_GENERIC_MAPPING_TYPE callout and the GLOBUS_GENERIC_AUTHZ_TYPE callout; otherwise the default gridmap file will be used for mapping and no service-specific authorization will be done.</p><p>If <strong>globus_gss_assist_map_and_authorize()</strong> uses a gridmap file, it first looks for a file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p><p><strong>Parameters:</strong></p><p><em>context</em> Security context to inspect for peer identity information.</p><p><em>service</em> A NULL-terminated string containing the name of the service that an authorization decision is being made for.</p><p><em>desired_identity</em> Optional. If non-NULL, perform an authorization to act as the local user named by this NULL-terminated string.</p><p><em>identity_buffer</em> A pointer to a string buffer into which will be copied the local user name that the peer of the context is authorized to act as.</p><p><em>identity_buffer_length</em> Length of the <em>identity_buffer</em> array.</p><p><strong>Returns:</strong></p><p>On success, <strong>globus_gss_assist_map_and_authorize()</strong> returns GLOBUS_SUCCESS and copies the authorized local identity to the <em>identity_buffer</em> parameter. If an error occurs, <strong>globus_gss_assist_map_and_authorize()</strong> returns a globus_result_t that can be resolved to an error object.</p><p><strong>Return values:</strong></p><p><em>GLOBUS_SUCCESS</em> Success</p><p><em>GLOBUS_GSI_GSS_ASSIST_ERROR_WITH_CALLOUT_CONFIG</em> Invalid authorization configuration file</p><p><em>GLOBUS_CALLOUT_ERROR_WITH_HASHTABLE</em> Hash table operation failed.</p><p><em>GLOBUS_CALLOUT_ERROR_CALLOUT_ERROR</em> The callout itself returned a error.</p><p><em>GLOBUS_CALLOUT_ERROR_WITH_DL</em> Dynamic library operation failed.</p><p><em>GLOBUS_CALLOUT_ERROR_OUT_OF_MEMORY</em> Out of memory</p><p><em>GLOBUS_GSI_GSS_ASSIST_GSSAPI_ERROR</em> A GSSAPI function returned an error</p><p><em>GLOBUS_GSI_GSS_ASSIST_GRIDMAP_LOOKUP_FAILED</em> Gridmap lookup failure</p><p><em>GLOBUS_GSI_GSS_ASSIST_BUFFER_TOO_SMALL</em> Caller provided insufficient buffer space for local identity</p>
<h3>globus_result_t globus_gss_assist_map_and_authorize_sharing (char *shared_user_certificate, gss_ctx_id_tcontext, char *desired_identity, char *identity_buffer, unsigned intidentity_buffer_length)</h3>
<p>Authorize a particular credential for shared access. The <strong>globus_gss_assist_map_and_authorize_sharing()</strong> function attempts to authorize a particular credential for shared access. the <em>desired_identity</em> parameter is non-NULL, the authorization will succeed only if the credential is authorized for that identity. Otherwise, any valid authorized local user name will be used. If authorized, the local user name will be copied to the string pointed to by the <em>identity_buffer</em> parameter, which must be at least as long as the value passed as the <em>identity_buffer_length</em> parameter.</p><p>If authorization callouts are defined in the callout configuration file, <strong>globus_gss_assist_map_and_authorize_sharing()</strong> will invoke both the GLOBUS_GENERIC_MAPPING_TYPE callout and the GLOBUS_GENERIC_AUTHZ_TYPE callout; otherwise the default gridmap file will be used for mapping and no service-specific authorization will be done.</p><p>If <strong>globus_gss_assist_map_and_authorize_sharing()</strong> uses a gridmap file, it first looks for a file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p><p><strong>Parameters:</strong></p><p><em>shared_user_certificate</em> cert and cert chain of user that owns the resources to be shared, in PEM format. This will be parsed to find the identity that should be mapped.</p><p><em>context</em> Security context of the underlying connection. This should generally be ignored.</p><p><em>desired_identity</em> Optional. If non-NULL, perform an authorization to act as the local user named by this NULL-terminated string.</p><p><em>identity_buffer</em> A pointer to a string buffer into which will be copied the local user name that the peer of the context is authorized to act as.</p><p><em>identity_buffer_length</em> Length of the <em>identity_buffer</em> array.</p><p><strong>Returns:</strong></p><p>On success, <strong>globus_gss_assist_map_and_authorize_sharing()</strong> returns GLOBUS_SUCCESS and copies the authorized local identity to the <em>identity_buffer</em> parameter. If an error occurs, <strong>globus_gss_assist_map_and_authorize_sharing()</strong> returns a globus_result_t that can be resolved to an error object.</p><p><strong>Return values:</strong></p><p><em>GLOBUS_SUCCESS</em> Success</p><p><em>GLOBUS_GSI_GSS_ASSIST_ERROR_WITH_CALLOUT_CONFIG</em> Invalid authorization configuration file</p><p><em>GLOBUS_CALLOUT_ERROR_WITH_HASHTABLE</em> Hash table operation failed.</p><p><em>GLOBUS_CALLOUT_ERROR_CALLOUT_ERROR</em> The callout itself returned a error.</p><p><em>GLOBUS_CALLOUT_ERROR_WITH_DL</em> Dynamic library operation failed.</p><p><em>GLOBUS_CALLOUT_ERROR_OUT_OF_MEMORY</em> Out of memory</p><p><em>GLOBUS_GSI_GSS_ASSIST_GSSAPI_ERROR</em> A GSSAPI function returned an error</p><p><em>GLOBUS_GSI_GSS_ASSIST_GRIDMAP_LOOKUP_FAILED</em> Gridmap lookup failure</p><p><em>GLOBUS_GSI_GSS_ASSIST_BUFFER_TOO_SMALL</em> Caller provided insufficient buffer space for local identity</p>
<h3>int globus_gss_assist_map_local_user (char *local_user, char **globusidp)</h3>
<p>Look up the default Grid identity associated with a local user name. The <strong>globus_gss_assist_map_local_user()</strong> function parses the gridmap file to determine a if the user name passed as the <em>local_user</em> parameter is the default local user for a Grid ID in the gridmap file. If so, it modifies <em>globusidp</em> to point to a copy of that ID. Otherwise, it searches the gridmap file for a Grid ID that has a non-default mapping for <em>local_user</em> and modifies <em>globusidp</em> to point to a copy of that ID. If successful, the caller is responsible for freeing the string pointed to by the <em>globusidp</em> pointer.</p><p>By default, <strong>globus_gss_assist_map_local_user()</strong> looks for the default gridmap file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p><p><strong>Parameters:</strong></p><p><em>local_user</em> The local username to find a Grid ID for</p><p><em>globusidp</em> A Grid ID that maps from the local_user.</p><p><strong>Returns:</strong></p><p>On success, <strong>globus_gss_assist_map_local_user()</strong> returns 0 and modifies <em>globusidp</em> to point to a Grid ID that maps to <em>local_user</em>; otherwise, <strong>globus_gss_assist_map_local_user()</strong> returns 1 and the value pointed to by <em>globusidp</em> is undefined.</p><p><strong>Return values:</strong></p><p><em>GLOBUS_SUCCESS</em> Success</p><p><em>1</em> Error</p>
<h3>int globus_gss_assist_userok (char *globusid, char *userid)</h3>
<p>Gridmap entry existence check. The <strong>globus_gss_assist_userok()</strong> function parses the default gridmap file and checks whether any mapping exists for the grid identity passed as the <em>globusid</em> parameter and the local user identity passed as the @ userid parameter.</p><p>By default, <strong>globus_gss_assist_userok()</strong> looks for the default gridmap file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p><p><strong>Parameters:</strong></p><p><em>globusid</em> The GSSAPI name string of the identity who requested authorization</p><p><em>userid</em> The local account name that access is sought for.</p><p><strong>Returns:</strong></p><p>If <strong>globus_gss_assist_userok()</strong> is able to find a mapping between <em>globusid</em> and <em>userid</em>, it returns 0; otherwise it returns 1.</p><p><strong>Return values:</strong></p><p><em>GLOBUS_SUCCESS</em> Success</p><p><em>1</em> Error</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for globus_gss_assist from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="globus_gss_assist_lookup_all_globusid.3.html"><span aria-hidden="true">&larr;</span> globus_gss_assist_lookup_all_globusid.3: Gridmap authorization and local user mapping.</a></li>
   <li class="next"><a href="globus_gss_assist_map_and_authorize_sharing.3.html">globus_gss_assist_map_and_authorize_sharing.3: Gridmap authorization and local user mapping. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
