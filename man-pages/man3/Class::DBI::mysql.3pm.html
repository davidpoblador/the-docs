<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Class::DBI::mysql: Extensions to class::dbi for mysql</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Extensions to class::dbi for mysql">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Class::DBI::mysql (3pm) manual">
  <meta name="twitter:description" content="Extensions to class::dbi for mysql">
  <meta name="twitter:image" content="https://www.carta.tech/images/libclass-dbi-mysql-perl-Class::DBI::mysql-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Class::DBI::mysql.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Class::DBI::mysql (3pm) manual" />
  <meta property="og:description" content="Extensions to class::dbi for mysql" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libclass-dbi-mysql-perl-Class::DBI::mysql-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Class::DBI::mysql<small> (3pm)</small></h1>
        <p class="lead">Extensions to class::dbi for mysql</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Class::DBI::mysql.3pm.html">
      <span itemprop="name">Class::DBI::mysql: Extensions to class::dbi for mysql</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libclass-dbi-mysql-perl/">
      <span itemprop="name">libclass-dbi-mysql-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Class::DBI::mysql.3pm.html">
      <span itemprop="name">Class::DBI::mysql: Extensions to class::dbi for mysql</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  package Film;
  use base &apos;Class::DBI::mysql&apos;;
  _\|_PACKAGE_\|_-&gt;set_db(&apos;Main&apos;, &apos;dbi:mysql:dbname&apos;, &apos;user&apos;, &apos;password&apos;);
  _\|_PACKAGE_\|_-&gt;set_up_table("film");

  _\|_PACKAGE_\|_-&gt;autoinflate(dates =&gt; &apos;Time::Piece&apos;);

  # Somewhere else ...

  my $type = $class-&gt;column_type(&apos;column_name&apos;);
  my @allowed = $class-&gt;enum_vals(&apos;column_name&apos;);

  my $tonights_viewing  = Film-&gt;retrieve_random;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This is an extension to Class::DBI, containing several functions and optimisations for the MySQL database. Instead of setting Class::DBI as your base class, use this instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<h3>set_up_table</h3>
<p>        _\|_PACKAGE_\|_-&gt;set_up_table("table_name");</p><p>Traditionally, to use Class::DBI, you have to set up the columns:</p><p>        _\|_PACKAGE_\|_-&gt;columns(All =&gt; qw/list of columns/);         _\|_PACKAGE_\|_-&gt;columns(Primary =&gt; &apos;column_name&apos;);</p><p>Whilst this allows for more flexibility if you're going to arrange your columns into a variety of groupings, sometimes you just want to create the 'all columns' list. Well, this information is really simple to extract from MySQL itself, so why not just use that?</p><p>This call will extract the list of all the columns, and the primary key and set them up for you. It will die horribly if the table contains no primary key, or has a composite primary key.</p>
<h3>autoinflate</h3>
<p>  _\|_PACKAGE_\|_-&gt;autoinflate(column_type =&gt; &apos;Inflation::Class&apos;);</p><p>  _\|_PACKAGE_\|_-&gt;autoinflate(timestamp =&gt; &apos;Time::Piece&apos;);   _\|_PACKAGE_\|_-&gt;autoinflate(dates =&gt; &apos;Time::Piece&apos;);</p><p>This will automatically set up <em>has_a()</em> relationships for all columns of the specified type to the given class.</p><p>We currently assume that all classess passed will be able to inflate and deflate without needing extra has_a arguments, with the example of Time::Piece objects, which we deal with using Time::Piece::mysql (which you'll have to have installed!).</p><p>The special type 'dates' will autoinflate all columns of type date, datetime or timestamp.</p>
<h3>create_table</h3>
<p>        $class-&gt;create_table(q{                 name    VARCHAR(40)     NOT NULL PRIMARY KEY,                 rank    VARCHAR(20)     NOT NULL DEFAULT &apos;Private&apos;,                 serial  INTEGER         NOT NULL         });</p><p>This creates the table for the class, with the given schema. If the table already exists we do nothing.</p><p>A typical use would be:</p><p>        Music::CD-&gt;table(&apos;cd&apos;);         Music::CD-&gt;create_table(q{           cdid   MEDIUMINT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,           artist MEDIUMINT UNSIGNED NOT NULL,                 title  VARCHAR(255),                 year   YEAR,                 INDEX (artist),                 INDEX (title)         });         Music::CD-&gt;set_up_table;</p>
<h3>drop_table</h3>
<p>        $class-&gt;drop_table;</p><p>Drops the table for this class, if it exists.</p>
<h3>column_type</h3>
<p>        my $type = $class-&gt;column_type(&apos;column_name&apos;);</p><p>This returns the 'type' of this table (\s-1VARCHAR\s0(20), \s-1BIGINT\s0, etc.)</p>
<h3>enum_vals</h3>
<p>        my @allowed = $class-&gt;enum_vals(&apos;column_name&apos;);</p><p>This returns a list of the allowable values for an \s-1ENUM\s0 column.</p>
<h3>retrieve_random</h3>
<p>        my $film = Film-&gt;retrieve_random;</p><p>This will select a random row from the database, and return you the relevant object.</p><p>(MySQL 3.23 and higher only, at this point)</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Class::DBI::mysql&hellip;</h2>
        <div class="sectioncontent">
<p>Class::DBI. MySQL (http://www.mysql.com/)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Tony Bowden</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS and QUERIES</h2>
        <div class="sectioncontent">
<p>Please direct all correspondence regarding this module to:</p>
<pre>
  bug-Class-DBI-mysql@rt.cpan.org
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>  Copyright (C) 2001-2005 Tony Bowden.</p><p>  This program is free software; you can redistribute it and/or modify it under   the terms of the GNU General Public License; either version 2 of the License,   or (at your option) any later version.</p><p>  This program is distributed in the hope that it will be useful, but WITHOUT   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS   FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Class::DBI::Test::SQLite.3pm.html"><span aria-hidden="true">&larr;</span> Class::DBI::Test::SQLite.3pm: Base class for class::dbi tests</a></li>
   <li class="next"><a href="Class::Data::Accessor.3pm.html">Class::Data::Accessor.3pm: Inheritable, overridable class and instance data accessor creation <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
