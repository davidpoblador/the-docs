<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>erl_prim_loader: Low level erlang loader</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Low level erlang loader">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="erl_prim_loader (3erl) manual">
  <meta name="twitter:description" content="Low level erlang loader">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-erl_prim_loader-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/erl_prim_loader.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="erl_prim_loader (3erl) manual" />
  <meta property="og:description" content="Low level erlang loader" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-erl_prim_loader-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">erl_prim_loader<small> (3erl)</small></h1>
        <p class="lead">Low level erlang loader</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/erl_prim_loader.3erl.html">
      <span itemprop="name">erl_prim_loader: Low level erlang loader</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/erl_prim_loader.3erl.html">
      <span itemprop="name">erl_prim_loader: Low level erlang loader</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>erl_prim_loader</em> is used to load all Erlang modules into the system. The start script is also fetched with this low level loader.</p><p><em>erl_prim_loader</em> knows about the environment and how to fetch modules. The loader could, for example, fetch files using the file system (with absolute file names as input), or a database (where the binary format of a module is stored).</p><p>The <em>-loader Loader</em> command line flag can be used to choose the method used by the <em>erl_prim_loader</em>. Two <em>Loader</em> methods are supported by the Erlang runtime system: <em>efile</em> and <em>inet</em>. If another loader is required, then it has to be implemented by the user. The <em>Loader</em> provided by the user must fulfill the protocol defined below, and it is started with the <em>erl_prim_loader</em> by evaluating <em>open_port({spawn,Loader},[binary])</em>.</p><p><strong></strong> Warning:</p><p>The support for loading of code from archive files is experimental. The sole purpose of releasing it before it is ready is to obtain early feedback. The file format, semantics, interfaces etc. may be changed in a future release. The functions <em>list_dir/1</em> and <em>read_file_info/1</em> as well as the flag <em>-loader_debug</em> are also experimental</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATA TYPES</h2>
        <div class="sectioncontent">

<pre>
<strong>host()</strong> = atom()

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">

<pre>
<strong></strong>
start(Id, Loader, Hosts) -&gt; {ok, Pid} | {error, What}

</pre>
<p>Types:</p><p>Id = term()</p><p>Loader = atom() | string()</p><p>Hosts = Host | [Host]</p><p>Host = <strong>host()</strong></p><p>Pid = pid()</p><p>What = term()</p><p>Starts the Erlang low level loader. This function is called by the <em>init</em> process (and module). The <em>init</em> process reads the command line flags <em>-id Id</em>, <em>-loader Loader</em>, and <em>-hosts Hosts</em>. These are the arguments supplied to the <em>start/3</em> function.</p><p>If <em>-loader</em> is not given, the default loader is <em>efile</em> which tells the system to read from the file system.</p><p>If <em>-loader</em> is <em>inet</em>, the <em>-id Id</em>, <em>-hosts Hosts</em>, and <em>-setcookie Cookie</em> flags must also be supplied. <em>Hosts</em> identifies hosts which this node can contact in order to load modules. One Erlang runtime system with a <em>erl_boot_server</em> process must be started on each of hosts given in <em>Hosts</em> in order to answer the requests. See <strong>erl_boot_server(3erl)</strong>.</p><p>If <em>-loader</em> is something else, the given port program is started. The port program is supposed to follow the protocol specified below.</p>
<pre>
<strong></strong>
get_file(Filename) -&gt; {ok, Bin, FullName} | error

</pre>
<p>Types:</p><p>Filename = atom() | string()</p><p>Bin = binary()</p><p>FullName = string()</p><p>This function fetches a file using the low level loader. <em>Filename</em> is either an absolute file name or just the name of the file, for example <em>"lists.beam"</em>. If an internal path is set to the loader, this path is used to find the file. If a user supplied loader is used, the path can be stripped off if it is obsolete, and the loader does not use a path. <em>FullName</em> is the complete name of the fetched file. <em>Bin</em> is the contents of the file as a binary.</p><p>The <em>Filename</em> can also be a file in an archive. For example <em>$OTPROOT/lib/</em><em>mnesia-4.4.7.ez/mnesia-4.4.7/ebin/</em><em>mnesia.beam</em>. See <strong>code(3erl)</strong> about archive files.</p>
<pre>
<strong></strong>
get_path() -&gt; {ok, Path}

</pre>
<p>Types:</p><p>Path = [Dir :: string()]</p><p>This function gets the path set in the loader. The path is set by the <em>init</em> process according to information found in the start script.</p>
<pre>
<strong></strong>
list_dir(Dir) -&gt; {ok, Filenames} | error

</pre>
<p>Types:</p><p>Dir = string()</p><p>Filenames = [Filename :: string()]</p><p>Lists all the files in a directory. Returns <em>{ok, Filenames}</em> if successful. Otherwise, it returns <em>error</em>. <em>Filenames</em> is a list of the names of all the files in the directory. The names are not sorted.</p><p>The <em>Dir</em> can also be a directory in an archive. For example <em>$OTPROOT/lib/</em><em>mnesia-4.4.7.ez/mnesia-4.4.7/ebin</em>. See <strong>code(3erl)</strong> about archive files.</p>
<pre>
<strong></strong>
read_file_info(Filename) -&gt; {ok, FileInfo} | error

</pre>
<p>Types:</p><p>Filename = string()</p><p>FileInfo = <strong>file:file_info()</strong></p><p>Retrieves information about a file. Returns <em>{ok, FileInfo}</em> if successful, otherwise <em>error</em>. <em>FileInfo</em> is a record <em>file_info</em>, defined in the Kernel include file <em>file.hrl</em>. Include the following directive in the module from which the function is called:</p>
<pre>
-include_lib("kernel/include/file.hrl").
</pre>
<p>See <strong>file(3erl)</strong> for more info about the record <em>file_info</em>.</p><p>The <em>Filename</em> can also be a file in an archive. For example <em>$OTPROOT/lib/</em><em>mnesia-4.4.7.ez/mnesia-4.4.7/ebin/</em><em>mnesia</em>. See <strong>code(3erl)</strong> about archive files.</p>
<pre>
<strong></strong>
read_link_info(Filename) -&gt; {ok, FileInfo} | error

</pre>
<p>Types:</p><p>Filename = string()</p><p>FileInfo = <strong>file:file_info()</strong></p><p>This function works like <strong>read_file_info/1</strong> except that if <em>Filename</em> is a symbolic link, information about the link will be returned in the <em>file_info</em> record and the <em>type</em> field of the record will be set to <em>symlink</em>.</p><p>If <em>Filename</em> is not a symbolic link, this function returns exactly the same result as <em>read_file_info/1</em>. On platforms that do not support symbolic links, this function is always equivalent to <em>read_file_info/1</em>.</p>
<pre>
<strong></strong>
set_path(Path) -&gt; ok

</pre>
<p>Types:</p><p>Path = [Dir :: string()]</p><p>This function sets the path of the loader if <em>init</em> interprets a <em>path</em> command in the start script.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROTOCOL</h2>
        <div class="sectioncontent">
<p>The following protocol must be followed if a user provided loader port program is used. The <em>Loader</em> port program is started with the command <em>open_port({spawn,Loader},[binary])</em>. The protocol is as follows:</p>
<pre>
Function          Send               Receive
-------------------------------------------------------------
get_file          [102 | FileName]   [121 | BinaryFile] (on success)
                                     [122]              (failure)

stop              eof                terminate
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND LINE FLAGS</h2>
        <div class="sectioncontent">
<p>The <em>erl_prim_loader</em> module interprets the following command line flags:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>-loader Loader</em>: Specifies the name of the loader used by <em>erl_prim_loader</em>. <em>Loader</em> can be <em>efile</em> (use the local file system), or <em>inet</em> (load using the <em>boot_server</em> on another Erlang node). If <em>Loader</em> is user defined, the defined <em>Loader</em> port program is started.</p><p>If the <em>-loader</em> flag is omitted, it defaults to <em>efile</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>-loader_debug</em>: Makes the <em>efile</em> loader write some debug information, such as the reason for failures, while it handles files.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>-hosts Hosts</em>: Specifies which other Erlang nodes the <em>inet</em> loader can use. This flag is mandatory if the <em>-loader inet</em> flag is present. On each host, there must be on Erlang node with the <em>erl_boot_server</em> which handles the load requests. <em>Hosts</em> is a list of IP addresses (hostnames are not acceptable).</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>-id Id</em>: Specifies the identity of the Erlang runtime system. If the system runs as a distributed node, <em>Id</em> must be identical to the name supplied with the <em>-sname</em> or <em>-name</em> distribution flags.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>-setcookie Cookie</em>: Specifies the cookie of the Erlang runtime system. This flag is mandatory if the <em>-loader inet</em> flag is present.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO erl_prim_loader&hellip;</h2>
        <div class="sectioncontent">
<p><strong>init(3erl)</strong>, <strong>erl_boot_server(3erl)</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="erl_prettypr.3erl.html"><span aria-hidden="true">&larr;</span> erl_prettypr.3erl: Pretty printing of abstract erlang syntax trees.</a></li>
   <li class="next"><a href="erl_prim_loader_stub.3erl.html">erl_prim_loader_stub.3erl: Low level erlang loader <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
