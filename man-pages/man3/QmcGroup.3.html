<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QmcGroup: Container representing a single fetch group of metrics from multiple sources</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Container representing a single fetch group of metrics from multiple sources">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="QmcGroup (3) manual">
  <meta name="twitter:description" content="Container representing a single fetch group of metrics from multiple sources">
  <meta name="twitter:image" content="https://www.carta.tech/images/pcp-QmcGroup-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/QmcGroup.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="QmcGroup (3) manual" />
  <meta property="og:description" content="Container representing a single fetch group of metrics from multiple sources" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pcp-QmcGroup-3.png" />

</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">QmcGroup<small> (3)</small></h1>
        <p class="lead">Container representing a single fetch group of metrics from multiple sources</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/QmcGroup.3.html">
      <span itemprop="name">QmcGroup: Container representing a single fetch group of metrics from multiple sources</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pcp/">
      <span itemprop="name">pcp</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/QmcGroup.3.html">
      <span itemprop="name">QmcGroup: Container representing a single fetch group of metrics from multiple sources</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">C++ SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;QmcGroup.h&gt;</p><p>CC ... -lqmc -lpcp</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A <strong>QmcGroup</strong> object is a container for contexts and metrics that should be fetched at the same time.  The class manages the <a href="../man3/QmcContext.3.html"><strong>QmcContext</strong>(3)</a> objects, timezones and bounds for every context created with <strong>QmcGroup::use</strong> and <strong>QmcGroup::addMetric</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTORS & DESTRUCTOR</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>~QmcGroup();</strong></p>
  </dt>
  <dd>
    <p>Destructor which destroys all metrics and contexts created by this group.</p>
  </dd>
  <dt>
    <p><strong>QmcGroup(bool restrictArchives = false);</strong></p>
  </dt>
  <dd>
    <p>Construct a new fetch group. <em>restrictArchives</em> will restrict the creating of multiple archive contexts created from the same host.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONTEXTS</h2>
        <div class="sectioncontent">
<p>The default context of the group is defined as the first context created with <strong>QmcGroup::use</strong> before the first call to <strong>QmcGroup::addMetric</strong>. If no context is created before the first metric is added, the localhost is used as the default context.  Therefore, if any metrics specifications contain archive sources, an archive source must have been created with <strong>QmcGroup::use</strong> to avoid an error for mixing context types.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>uint_t numContexts() const;</strong></p>
  </dt>
  <dd>
    <p>The number of valid contexts created in this group.</p>
  </dd>
  <dt>
    <p><strong>QmcContext const& context(uint_t index) const</strong></p>
  </dt>
  <dd>
    <p>Return a handle to a context.</p>
  </dd>
  <dt>
    <p><strong>QmcContext& context(uint_t index);</strong></p>
  </dt>
  <dd>
    <p>Return a modifiable handle to a context.</p>
  </dd>
  <dt>
    <p><strong>int mode() const;</strong></p>
  </dt>
  <dd>
    <p>Return the type of context, either <strong>PM_CONTEXT_LOCAL</strong>, <strong>PM_CONTEXT_HOST</strong> or <strong>PM_CONTEXT_ARCHIVE</strong>.</p>
  </dd>
  <dt>
    <p><strong>QmcContext* which() const;</strong></p>
  </dt>
  <dd>
    <p>Return a handle to the current context of this group. This does not call <a href="../man3/pmusecontext.3.html"><strong>pmUseContext</strong>(3)</a> so it may not be the current <a href="../man3/pmapi.3.html"><strong>PMAPI</strong>(3)</a> context.</p>
  </dd>
  <dt>
    <p><strong>uint_t whichIndex() const</strong></p>
  </dt>
  <dd>
    <p>The index to the current group context.</p>
  </dd>
  <dt>
    <p><strong>int use(int type, char const* source);</strong></p>
  </dt>
  <dd>
    <p>Use the context of <em>type</em> from <em>source</em>. If a context to this <em>source</em> already exists in this group, that context will become the current <a href="../man3/pmapi.3.html"><strong>PMAPI</strong>(3)</a> context.  Otherwise a new context will be created.  The result is the <a href="../man3/pmapi.3.html"><strong>PMAPI</strong>(3)</a> context handle for the <strong>QmcGroup::context</strong> or a <a href="../man3/pmapi.3.html"><strong>PMAPI</strong>(3)</a> error code if the context failed.</p>
  </dd>
  <dt>
    <p><strong>bool defaultDefined() const;</strong></p>
  </dt>
  <dd>
    <p>Returns <strong>true</strong> if a default context has been determined.</p>
  </dd>
  <dt>
    <p><strong>int useDefault();</strong></p>
  </dt>
  <dd>
    <p>Use the default context. If a default context has not been created, the context to the local host will be attempted.  A result less than zero indicates that the method failed with the <a href="../man3/pmapi.3.html"><strong>PMAPI</strong>(3)</a> error encoded in the result.</p>
  </dd>
  <dt>
    <p><strong>void createLocalContext();</strong></p>
  </dt>
  <dd>
    <p>Create and use a context to the local host.  A result less than zero indicates that the method failed with the <a href="../man3/pmapi.3.html"><strong>PMAPI</strong>(3)</a> error encoded in the result.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METRICS</h2>
        <div class="sectioncontent">
<p>These <strong>addMetric</strong> methods should be used to create new metrics as the <strong>QmcMetric</strong> constructors are private. These methods will always return a pointer to a <strong>QmcMetric</strong> object, however the <strong>QmcMetric::status()</strong> field should be checked to ensure the metric is valid.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>QmcMetric* addMetric(char const* str, double theScale = 0.0,</strong></p>
  </dt>
  <dd>
    <p><strong>bool active = false);</strong></p><p>Add the metric <em>str</em> to the group, with a scaling factor of <em>scale</em>. If <em>active</em> is set the metric will use only active instances (see <a href="../man3/QmcMetric.3.html"><strong>QmcMetric</strong>(3)</a>).</p>
  </dd>
  <dt>
    <p><strong>QmcMetric* addMetric(pmMetricSpec* theMetric, double theScale</strong></p>
  </dt>
  <dd>
    <p><strong>= 0.0, bool active);</strong></p><p>Add the metric <em>theMetric</em> to the group, with a scaling factor of <em>scale</em>. If <em>active</em> is set the metric will use only active instances (see <a href="../man3/QmcMetric.3.html"><strong>QmcMetric</strong>(3)</a>).</p>
  </dd>
  <dt>
    <p><strong>int fetch(bool update = true);</strong></p>
  </dt>
  <dd>
    <p>Fetch all the metrics in all the contexts in this group.  If <em>update</em> is equal to <strong>true</strong>, all counter metrics will be automatically converted to rates (see <a href="../man3/QmcMetric.3.html"><strong>QmcMetric</strong>(3)</a>).</p>
  </dd>
  <dt>
    <p><strong>int setArchiveMode(int mode, const struct timeval *when,</strong></p>
  </dt>
  <dd>
    <p><strong>int interval);</strong></p><p>Set the mode and time to access all archive contexts in this group.  See <a href="../man3/pmsetmode.3.html"><strong>pmSetmode</strong>(3)</a> for more details.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TIMEZONES</h2>
        <div class="sectioncontent">
<p>These methods assist in the management of multiple timezones and help to control the current timezone.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>enum TimeZoneFlag { localTZ, userTZ, groupTZ, unknownTZ };</strong></p>
  </dt>
  <dd>
    <p>Enumeration used to describe the origin of the default timezone. <strong>localTZ</strong>, <strong>userTZ</strong> and <strong>groupTZ</strong> indicate that the timezone was set with <strong>QmcGroup::useLocalTZ</strong>, <strong>QmcGroup::useTZ(QString const&)</strong> and <strong>QmcGroup::useTZ()</strong> respectively. <strong>unknownTZ</strong> indicates that a timezone has not been set. <strong>userTZ</strong> indicates that the timezone was</p>
  </dd>
  <dt>
    <p><strong>int useTZ();</strong></p>
  </dt>
  <dd>
    <p>Use the timezone of the current group context as the default.</p>
  </dd>
  <dt>
    <p><strong>int useTZ(const QString &tz);</strong></p>
  </dt>
  <dd>
    <p>Add and use <em>tz</em> as the default timezone of this group.</p>
  </dd>
  <dt>
    <p><strong>int useLocalTZ();</strong></p>
  </dt>
  <dd>
    <p>Use the timezone of the localhost as the default for this group.</p>
  </dd>
  <dt>
    <p><strong>void defaultTZ(QString &label, QString &tz);</strong></p>
  </dt>
  <dd>
    <p>Return the <em>label</em> and <em>tz</em> string of the default timezone of this group.</p>
  </dd>
  <dt>
    <p><strong>TimeZoneFlag defaultTZ() const</strong></p>
  </dt>
  <dd>
    <p>Return the origin of the default timezone.</p>
  </dd>
  <dt>
    <p><strong>int useDefaultTZ();</strong></p>
  </dt>
  <dd>
    <p>Set the timezone to be the default timezone as defined in a previous call to <strong>QmcGroup::useTZ</strong> or <strong>QmcGroup::useLocalTZ</strong>.</p>
  </dd>
  <dt>
    <p><strong>struct timeval const& logStart() const;</strong></p>
  </dt>
  <dd>
    <p>Return the earliest starting time of any archives in this group.  Assumes that <strong>QmcGroup::updateBounds</strong> has been called.</p>
  </dd>
  <dt>
    <p><strong>struct timeval const& logEnd() const;</strong></p>
  </dt>
  <dd>
    <p>Return the latest finish time of any archives in this group.  Assumes that <strong>QmcGroup::updateBounds</strong> has been called.</p>
  </dd>
  <dt>
    <p><strong>void updateBounds();</strong></p>
  </dt>
  <dd>
    <p>Determine the earliest start and latest finish times of all archives in this group.</p>
  </dd>
  <dt>
    <p><strong>int sendTimezones();</strong></p>
  </dt>
  <dd>
    <p>Send the current timezones to <strong>kmtime (3).</strong></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEBUGGING</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>void dump(ostream &os);</strong></p>
  </dt>
  <dd>
    <p>Dump state information about this group to <em>os</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO QmcGroup&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/pmapi.3.html"><strong>PMAPI</strong>(3)</a>, <a href="../man3/QMC.3.html"><strong>QMC</strong>(3)</a>, <a href="../man3/QmcContext.3.html"><strong>QmcContext</strong>(3)</a>, <a href="../man3/QmcMetric.3.html"><strong>QmcMetric</strong>(3)</a>, <strong>pmflush</strong>(3), <a href="../man3/pmprintf.3.html"><strong>pmprintf</strong>(3)</a> and <a href="../man3/pmsetmode.3.html"><strong>pmSetMode</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Error messages are generated using <a href="../man3/pmprintf.3.html"><strong>pmprintf</strong>(3)</a> but are not flushed. It is the responsibility of the user to call <strong>pmflush</strong>(3) to output any messages.</p><p>Additional diagnostics may be activated by adding <strong>DBG_TRACE_PMC</strong> to the global <em>pmDebug</em>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="QmcDesc.3.html"><span aria-hidden="true">&larr;</span> QmcDesc.3: Container for a metric description</a></li>
   <li class="next"><a href="QmcIndom.3.html">QmcIndom.3: Container for a instance domain description <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
