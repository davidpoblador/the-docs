<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>afterimage: Afterimage- overview of libafterimage image library libafterimage/libafterimage</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Afterimage- overview of libafterimage image library libafterimage/libafterimage">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="afterimage (3x) manual">
  <meta name="twitter:description" content="Afterimage- overview of libafterimage image library libafterimage/libafterimage">
  <meta name="twitter:image" content="https://www.carta.tech/images/libafterimage-dev-afterimage-3x.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3x/afterimage.3x.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="afterimage (3x) manual" />
  <meta property="og:description" content="Afterimage- overview of libafterimage image library libafterimage/libafterimage" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libafterimage-dev-afterimage-3x.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">afterimage<small> (3x)</small></h1>
        <p class="lead">Afterimage- overview of libafterimage image library libafterimage/libafterimage</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/afterimage.3x.html">
      <span itemprop="name">afterimage: Afterimage- overview of libafterimage image library libafterimage/libafterimage</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libafterimage-dev/">
      <span itemprop="name">libafterimage-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/afterimage.3x.html">
      <span itemprop="name">afterimage: Afterimage- overview of libafterimage image library libafterimage/libafterimage</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NAMElibAfterImage</h2>
        <div class="sectioncontent">
<p>- generic imaging library originally designed for AfterStep X Window Manager.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PURPOSE</h2>
        <div class="sectioncontent">
<p>libAfterImage is the imaging library implemented for AfterStep X Window Manager. It has been generalized to be suitable for any application in need of robust graphics engine.</p><p>It provides facilities for loading images from files of different formats, compressed in memory storage of images, scaling, tinting/shading, flipping and superimposition of arbitrary number of images over each other. In addition it allows for linear gradients drawing, and antialiased/smoothed text drawing using both  FreeType library and X Window fonts.</p><p>Primary goals of this library are to achieve exceptional quality of images and text, making code fast and small at the same time. Additional steps are taken to compensate for screen colordepth limitation, and different error diffusion algorithms are used to provide for smooth images even in low colordepth modes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>libAfterImage has been implemented as an attempt to address several issues. First one, and most important is that X Window System completely lacks any tools for image manipulation, except for very rudimentary operations. With Introduction of Render extentions in XFree86 4.0 that situation is changing, but still is far from perfect. There need is therefore to implement client side image manipulation. That inturn creates a problem of image data transfer between Server and client.</p><p>To avoid that full-time image storage on the client side is needed. Which is memory extensive. So there appears to be a need for some in-memory compression.</p><p>On the other side there is an image quality issue. Its easy to write a scaling function by simply dropping out or duplicating pixels, but quality is awfull. What is needed is very fast averaging/interpolation code. That brings us to the issue of 8 bits per channel. Add two pixels together and you get overflow. So all the math has to be performed in different colorspace and then converted back. On the other side, such a conversion may discard valuable bits, so some compensation method has to be implemented.</p><p>On the text drawing side of things, there are numerous problems just as well. Native X fonts look ugly as soon as you try to show any decently sized text. That is supposed to be solved with said Render extensions to XFree86, but as experiense has shown, things aren't as easy as it looks, besides one wants his app to run well under any X Server. FreeType library provides a solution, but not always available. Another problem is that if you keep all your images on the client side, you want to draw text on client side as well.</p><p>The solution is to provide transparent interface that could use both X fonts and FreeType, cache glyphs on the client side and possibly perform smoothing of ugly X fonts.</p><p>There is no library solving all this problems in one fell swoop, except for monstrous ones, like ImLib.</p><p>Hence libAfterImage has come to life.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>libAfterStep provides sevarl facilities.</p><p>1. X Visual abstruction layer via ASVisual. This layer handles color management, transfer of data to and from X Server, and other screen related stuff.</p><p>2. Scanline handling facility via ASScanline. ASScanline is the most widely used structure since image handling is implemented on per-scanline basis.</p><p>3. Image storage, trasformation and rendering via ASImage. ASImage provides for generic container used for any image or text manipulation. It incorporates such a robust facilities as in-memory RLE compression, separate channel storage of 4 channels ( Alpha, Red, Green, and Blue ) with 8 bit per channel.</p><p>4. Simplified font handling facility via ASFont and ASFointManager. All the font handling is done using ASFont structure, no matter what type of font is used. Any font supported by X11 and FreeType can be used.</p><p>5. Transparent image file reading for many different formats. Included built-in XPM reading code and XCF ( GIMP's native format ). Overall supported: via external libraries : XPM, JPEG, PNG, TIFF, GIF via built in code : XPM, XCF, PNM, PPM, BMP, ICO, CUR Note that XPM can be supported both via built-in code or via libXpm, depending on compilation configuration. Actuall image file format is autodetected from the file contents - file name extension is not used and can be anything at all.</p><p>6. Image export into many popular file formats. Currently implemented : XPM, JPEG, PNG, GIF. Work is underway to implement support for TIFF, XCF, BMP, ICO.</p><p>7. Image quantization to arbitrary size colormap.</p><p>8. libAfterImage could be used without X window system, which is coninient for such thing as web development. XML Image manipulation tool, that could be used in such activity is included (see ascompose.c)</p><p>9. Image reference counting</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USES</h2>
        <div class="sectioncontent">
<p>libAfterBase - AfterStep basic functionality library. That Includes Hash tables, file search methods, message output, generic types. However effort has been made to allow for standalone configuration as well. If libAfterBase is not found at compilation time - libAfterImage will use extract from libAfterBase included with libAfterImage.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO afterimage&hellip;</h2>
        <div class="sectioncontent">
<p>Examples API Reference</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<p>Implement support for Targa and PCX image format and maybe some other formats as well.</p><p>Implement complete support for I18N internationalization.</p><p>Implement color&lt;-&gt;pixel conversion for all colordepths.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Sasha Vasko &lt;sasha at aftercode dot net&gt; libAfterImage/Examples</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>ASView  - image loading from the file and displaying in window. ASScale - image loading from file and scaling to arbitrary size. ASTile  - image loading from file, tiling and tinting to arbitrary</p>
<pre>
          size and color.
</pre>
<p>ASMerge - imgae loading and merging with another image. ASGrad  - mutlipoint gradient drawing. ASFlip  - image loading from file and rotation. ASText  - trexturized semitransparent antialised text drawing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO afterimage&hellip;</h2>
        <div class="sectioncontent">
<p>API Reference libAfterImage/API Reference</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHILDREN</h2>
        <div class="sectioncontent">
<p>Headers :</p>
<pre>
         ascmap.h asfont.h asimage.h asvisual.h blender.h export.h
         import.h transform.h ximage.h
</pre>
<p>Structures :</p>
<pre>
         ColorPair
         ASScanline
         ASVisual
         ASImage
         ASImageManager
         ASImageBevel
         ASImageDecoder
         ASImageOutput
         ASImageLayer
         ASGradient
         ASFontManager
         ASFont
         ASGlyph
         ASGlyphRange
         ASColormap
         ASImageExportParams
         ASVectorPalette
</pre>
<p>Functions :</p>
<pre>
  ASScanline handling:
        prepare_scanline(), free_scanline()
</pre>

<pre>
  ASVisual initialization :
        query_screen_visual(), setup_truecolor_visual(),
        setup_pseudo_visual(), setup_as_colormap(),
         create_asvisual(), create_asvisual_for_id(),
        destroy_asvisual()
</pre>

<pre>
  ASVisual encoding/decoding :
        visual2visual_prop(), visual_prop2visual()
</pre>

<pre>
  ASVisual convenience functions :
        create_visual_window(), create_visual_pixmap(),
        create_visual_ximage(), create_visual_gc()
</pre>

<pre>
  Colorspace conversion :
         rgb2value(), rgb2saturation(), rgb2hue(), rgb2luminance(),
         rgb2hsv(), rgb2hls(), hsv2rgb(), hls2rgb(),
         degrees2hue16(), hue162degrees(), normalize_degrees_val()
</pre>

<pre>
  Image quantization :
         colormap_asimage(), destroy_colormap()
</pre>

<pre>
  merge_scanline methods :
         alphablend_scanlines(), allanon_scanlines(),
         tint_scanlines(), add_scanlines(), sub_scanlines(),
         diff_scanlines(), darken_scanlines(), lighten_scanlines(),
         screen_scanlines(), overlay_scanlines(), hue_scanlines(),
         saturate_scanlines(), value_scanlines(),
         colorize_scanlines(), dissipate_scanlines().
</pre>

<pre>
  ASImage handling :
         asimage_init(), asimage_start(), create_asimage(),
         clone_asimage(), destroy_asimage()
</pre>

<pre>
  ASImage channel data manipulations :
         get_asimage_chanmask(), move_asimage_channel(),
         copy_asimage_channel(), copy_asimage_lines()
</pre>

<pre>
  ImageManager Reference counting and managing :
         create_image_manager(), destroy_image_manager(),
         store_asimage(), fetch_asimage(), dup_asimage(),
         release_asimage(), release_asimage_by_name()
</pre>

<pre>
  Layers helper functions :
         init_image_layers(), create_image_layers(),
         destroy_image_layers()
</pre>

<pre>
  Encoding :
         asimage_add_line(),    asimage_add_line_mono(),
         asimage_print_line()
</pre>

<pre>
  Decoding :
         start_image_decoding(), stop_image_decoding(),
         asimage_decode_line (), set_decoder_shift(),
         set_decoder_bevel_geom(), set_decoder_back_color()
</pre>

<pre>
  ASImage from scientific data :
         set_asimage_vector(), colorize_asimage_vector(),
         create_asimage_from_vector()
</pre>

<pre>
  Output :
         start_image_output(), set_image_output_back_color(),
         toggle_image_output_direction(), stop_image_output()
</pre>

<pre>
  X11 conversions :
         ximage2asimage(), pixmap2asimage(), asimage2ximage(),
         asimage2mask_ximage(), asimage2pixmap(), asimage2mask()
</pre>

<pre>
  Transformations :
         scale_asimage(), tile_asimage(), merge_layers(),
            make_gradient(),
         flip_asimage(), mirror_asimage(), pad_asimage(),
         blur_asimage_gauss(), fill_asimage(), adjust_asimage_hsv()
</pre>

<pre>
  Import :
         file2ASImage(), file2pixmap()
  Export :
        ASImage2file()
</pre>

<pre>
  Text Drawing :
         create_font_manager(), destroy_font_manager(),
         open_freetype_font(), open_X11_font(), get_asfont(),
         release_font(), print_asfont(), print_asglyph(),
         draw_text(), draw_fancy_text()
</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="next"><a href="ascmap.3x.html">ascmap.3x: Ascmap- defines main structures and function for image quantization libafterimage/ascmap.h <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
