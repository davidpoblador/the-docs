<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VolumeNormals: Compute surface normal vectors and gradient magnitudes for a volume</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Compute surface normal vectors and gradient magnitudes for a volume">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="VolumeNormals (3) manual">
  <meta name="twitter:description" content="Compute surface normal vectors and gradient magnitudes for a volume">
  <meta name="twitter:image" content="https://www.carta.tech/images/libvolpack1-dev-VolumeNormals-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/VolumeNormals.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="VolumeNormals (3) manual" />
  <meta property="og:description" content="Compute surface normal vectors and gradient magnitudes for a volume" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libvolpack1-dev-VolumeNormals-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">VolumeNormals<small> (3)</small></h1>
        <p class="lead">Compute surface normal vectors and gradient magnitudes for a volume</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/VolumeNormals.3.html">
      <span itemprop="name">VolumeNormals: Compute surface normal vectors and gradient magnitudes for a volume</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libvolpack1-dev/">
      <span itemprop="name">libvolpack1-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/VolumeNormals.3.html">
      <span itemprop="name">VolumeNormals: Compute surface normal vectors and gradient magnitudes for a volume</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;volpack.h&gt;</p><p>&#92;$1 <strong>vpVolumeNormals(</strong><em>vpc, scalar_data, length, scalar_field,</em> grad_field, norm_field<strong>)</strong></p><ul>
<li><p>vpContext *<em>vpc;</em> unsigned char *<em>scalar_data;</em> int <em>length;</em> int <em>scalar_field;</em> int <em>grad_field;</em> int <em>norm_field;</em></p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <em>vpc</em>
  </dt>
  <dd>
    <p>VolPack context from <strong>vpCreateContext.</strong></p>
  </dd>
  <dt>
    <em>scalar_data</em>
  </dt>
  <dd>
    <p>3D array of scalar samples.</p>
  </dd>
  <dt>
    <em>length</em>
  </dt>
  <dd>
    <p>Size of <em>scalar_data</em> array in bytes.</p>
  </dd>
  <dt>
    <em>scalar_field</em>
  </dt>
  <dd>
    <p>Voxel field number indicating the field in which to store the scalar samples.</p>
  </dd>
  <dt>
    <em>grad_field</em>
  </dt>
  <dd>
    <p>Voxel field number indicating the field in which to store the gradient magnitudes of the scalar samples.</p>
  </dd>
  <dt>
    <em>norm_field</em>
  </dt>
  <dd>
    <p>Voxel field number indicating the field in which to store encoded surface normal vectors.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>vpVolumeNormals</strong> is used to precompute values for voxel fields used in classification and shading algorithms.  The input is a 3D array of scalar values; a separate routine is provided for processing scanlines of voxel data (see <strong>vpScanlineNormals</strong>(3)).  For each voxel, the routine computes an approximation for the gradient of the scalar field (using a central-difference operator).  From this vector the routine can compute the magnitude of the gradient, which is useful for some classification schemes (see <strong>vpSetClassifierTable</strong>(3)), and a surface normal vector in the direction of the gradient vector, which is used to implement lighting models (see <strong>vpShadeTable</strong>(3)).  The scalar value, gradient magnitude and surface normal vector are then stored into the fields of the voxel array, which is separate from the array of scalar values.</p><p>The scalar array must be an array of 8-bit values (other sizes are not currently supported).  The dimensions of the array must match the volume dimensions previously specified with <strong>vpSetVolumeSize</strong>. The <em>size</em> argument is used to make sure the array has the correct size.  The voxel array must also be initialized by calling <strong>vpSetRawVoxels</strong> prior to calling <strong>vpVolumeNormals</strong>.</p><p>The three voxel field number arguments indicate which voxel fields the computed information should be stored into, and which field the scalar samples should be copied to.  The field numbers must correspond to appropriately-sized voxel fields previously specified with <strong>vpSetVoxelField</strong>.  Any of these arguments can be the constant VP_SKIP_FIELD, in which case the corresponding quantity is not computed or copied.  The voxel fields for the scalar value and the gradient magnitude must be one-byte fields, and the field for the surface normal vector must be a two-byte field.  The constants VP_SCALAR_MAX, VP_GRAD_MAX and VP_NORM_MAX give the maximum value that might be stored in each field, respectively.  The value stored in the surface normal vector field is actually an encoded surface normal; see <strong>vpNormalIndex</strong>(3).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>The normal return value is VP_OK.  The following error return values are possible:</p>
<dl class='dl-vertical'>
  <dt>
    VPERROR_BAD_SIZE
  </dt>
  <dd>
    <p>The size of the scalar array does not match the volume dimensions.</p>
  </dd>
  <dt>
    VPERROR_BAD_VALUE
  </dt>
  <dd>
    <p>One or more of the voxel fields specified is invalid, or the corresponding voxel field has the wrong size.</p>
  </dd>
  <dt>
    VPERROR_BAD_VOXEL
  </dt>
  <dd>
    <p>The voxel size or the voxel fields have not been specified or have been incorrectly specified.</p>
  </dd>
  <dt>
    VPERROR_BAD_VOLUME
  </dt>
  <dd>
    <p>The volume array or volume dimensions have not been specified, or the size of the volume array does not match the volume dimensions.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO VolumeNormals&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/VolPack.3.html"><strong>VolPack</strong>(3)</a>, <strong>vpCreateContext</strong>(3), <strong>vpNormalIndex</strong>(3), <strong>vpScanlineNormals</strong>(3), <strong>vpSetClassifierTable</strong>(3), <strong>vpSetLookupShader</strong>(3)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="VolPack.3.html"><span aria-hidden="true">&larr;</span> VolPack.3: Introduction to volpack, a library for volume rendering</a></li>
   <li class="next"><a href="VolumeSize.3.html">VolumeSize.3: Define the dimensions of a volume <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
