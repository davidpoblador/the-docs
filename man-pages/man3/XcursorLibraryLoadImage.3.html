<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XcursorLibraryLoadImage: Cursor management library</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Cursor management library">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="XcursorLibraryLoadImage (3) manual">
  <meta name="twitter:description" content="Cursor management library">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxcursor-dev-XcursorLibraryLoadImage-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/XcursorLibraryLoadImage.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="XcursorLibraryLoadImage (3) manual" />
  <meta property="og:description" content="Cursor management library" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxcursor-dev-XcursorLibraryLoadImage-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">XcursorLibraryLoadImage<small> (3)</small></h1>
        <p class="lead">Cursor management library</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/XcursorLibraryLoadImage.3.html">
      <span itemprop="name">XcursorLibraryLoadImage: Cursor management library</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxcursor-dev/">
      <span itemprop="name">libxcursor-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/XcursorLibraryLoadImage.3.html">
      <span itemprop="name">XcursorLibraryLoadImage: Cursor management library</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;X11/Xcursor/Xcursor.h&gt;</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Xcursor</strong> is a simple library designed to help locate and load cursors.  Cursors can be loaded from files or memory.  A library of common cursors exists which map to the standard X cursor names.  Cursors can exist in several sizes and the library automatically picks the best size.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTIONAL OVERVIEW</h2>
        <div class="sectioncontent">
<p>Xcursor is built in a couple of layers; at the bottom layer is code which can load cursor images from files.  Above that is a layer which locates cursor files based on the library path and theme.  At the top is a layer which builds cursors either out of an image loaded from a file or one of the standard X cursors.  When using images loaded from files, Xcursor prefers to use the Render extension CreateCursor request if supported by the X server.  Where not supported, Xcursor maps the cursor image to a standard X cursor and uses the core CreateCursor request.</p><h3>CURSOR FILES</h3>
<p>Xcursor defines a new format for cursors on disk.  Each file holds one or more cursor images.  Each cursor image is tagged with a nominal size so that the best size can be selected automatically.  Multiple cursors of the same nominal size can be loaded together; applications are expected to use them as an animated sequence.</p><p>Cursor files are stored as a header containing a table of contents followed by a sequence of chunks.  The table of contents indicates the type, subtype and position in the file of each chunk.  The file header looks like:</p><p><em>magic</em>\^: CARD32 'Xcur' (0x58, 0x63, 0x75, 0x72)</p><p><em>header</em>\^: CARD32 bytes in this header</p><p><em>version</em>\^: CARD32 file version number</p><p><em>ntoc</em>\^: CARD32 number of toc entries</p><p><em>toc</em>\^: LISTofTOC table of contents</p><p>Each table of contents entry looks like:</p><p><em>type</em>\^: CARD32 entry type</p><p><em>subtype</em>\^: CARD32 type-specific label - size for images</p><p><em>position</em>\^: CARD32 absolute byte position of table in file</p><p>Each chunk in the file has set of common header fields followed by additional type-specific fields:</p><p><em>header</em>\^: CARD32 bytes in chunk header (including type-specific fields)</p><p><em>type</em>\^: CARD32 must match type in TOC for this chunk</p><p><em>subtype</em>\^: CARD32 must match subtype in TOC for this chunk</p><p><em>version</em>\^: CARD32 version number for this chunk type</p><p>There are currently two chunk types defined for cursor files; comments and images.  Comments look like:</p><p><em>header</em>\^: 20 Comment headers are 20 bytes</p><p><em>type</em>\^: 0xfffe0001 Comment type is 0xfffe0001</p><p><em>subtype</em>\^: { 1 (COPYRIGHT), 2 (LICENSE), 3 (OTHER) }</p><p><em>version</em>\^: 1</p><p><em>length</em>\^: CARD32 byte length of UTF-8 string</p><p><em>string</em>\^: LISTofCARD8 UTF-8 string</p><p>Images look like:</p><p><em>header</em>\^: 36 Image headers are 36 bytes</p><p><em>type</em>\^: 0xfffd0002 Image type is 0xfffd0002</p><p><em>subtype</em>\^: CARD32 Image subtype is the nominal size</p><p><em>version</em>\^: 1</p><p><em>width</em>\^: CARD32 Must be less than or equal to 0x7fff</p><p><em>height</em>\^: CARD32 Must be less than or equal to 0x7fff</p><p><em>xhot</em>\^: CARD32 Must be less than or equal to width</p><p><em>yhot</em>\^: CARD32 Must be less than or equal to height</p><p><em>delay</em>\^: CARD32 Delay between animation frames in milliseconds</p><p><em>pixels</em>\^: LISTofCARD32 Packed ARGB format pixels</p>
<h3>THEMES</h3>
<p>Xcursor (mostly) follows the freedesktop.org spec for theming icons.  The default search path it uses is ~/.icons, /usr/share/icons, /usr/share/pixmaps.  Within each of these directories, it searches for a directory using the theme name.  Within the theme directory, it looks for cursor files in the 'cursors' subdirectory. It uses the first cursor file found along  the path.</p><p>If necessary, Xcursor also looks for a "index.theme" file in each theme directory to find inherited themes and searches along the path for those themes as well.</p><p>If no theme is set, or if no cursor is found for the specified theme, Xcursor checks the "default" theme.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATATYPES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>XcursorImage</strong></p>
  </dt>
  <dd>
    <p>holds a single cursor image in memory.  Each pixel in the cursor is a 32-bit value containing ARGB with A in the high byte.</p>
<pre>
    typedef struct _XcursorImage {
        XcursorDim	size;	    /\(** nominal size for matching */
        XcursorDim	width;	    /\(** actual width */
        XcursorDim	height;	    /\(** actual height */
        XcursorDim	xhot;	    /\(** hot spot x (must be inside image) */
        XcursorDim	yhot;       /\(** hot spot y (must be inside image) */
        XcursorPixel    *pixels;    /\(** pointer to pixels */
    } XcursorImage;
</pre>

  </dd>
  <dt>
    <p><strong>XcursorImages</strong></p>
  </dt>
  <dd>
    <p>holds multiple XcursorImage structures.  They're all freed when the XcursorImages is freed.</p>
<pre>
    typedef struct _XcursorImages {
        int             nimage;	    /\(** number of images */
        XcursorImage    **images;   /\(** array of XcursorImage pointers */
    } XcursorImages;
</pre>

  </dd>
  <dt>
    <p><strong>XcursorCursors</strong></p>
  </dt>
  <dd>
    <p>Holds multiple Cursor objects.  They're all freed when the XcursorCursors is freed.  These are reference counted so that multiple XcursorAnimate structures can use the same XcursorCursors.</p>
<pre>
    typedef struct _XcursorCursors {
        Display     *dpy;	/\(** Display holding cursors */
        int	    ref;	/\(** reference count */
        int	    ncursor;	/\(** number of cursors */
        Cursor	    *cursors;	/\(** array of cursors */
    } XcursorCursors;
</pre>

  </dd>
  <dt>
    <p><strong>XcursorAnimate</strong></p>
  </dt>
  <dd>
    <p>References a set of cursors and a sequence within that set.  Multiple XcursorAnimate structures may reference the same XcursorCursors; each holds a reference which is removed when the XcursorAnimate is freed.</p>
<pre>
    typedef struct _XcursorAnimate {
        XcursorCursors   *cursors;  /\(** list of cursors to use */
        int		 sequence;  /\(** which cursor is next */
    } XcursorAnimate;
</pre>

  </dd>
  <dt>
    <p><strong>XcursorFile</strong></p>
  </dt>
  <dd>
    <p>Xcursor provides an abstract API for accessing the file data.  Xcursor provides a stdio implementation of this abstract API; applications are free to create additional implementations.  These functions parallel the stdio functions in return value and expected argument values; the read and write functions flip the arguments around to match the POSIX versions.</p>
<pre>
    typedef struct _XcursorFile {
        void	*closure;
        int	(*read)  (XcursorFile *file, unsigned char *buf, int len);
        int	(*write) (XcursorFile *file, unsigned char *buf, int len);
        int	(*seek)  (XcursorFile *file, long offset, int whence);
    };
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTIONS</h2>
        <div class="sectioncontent">
<h3>Object Management</h3>

<dl class='dl-vertical'>
  <dt>
    <p>XcursorImage *XcursorImageCreate (int width, int height)</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>void XcursorImageDestroy (XcursorImage *image)</p>
  </dt>
  <dd>
    <p>Allocate and free images.  On allocation, the hotspot and the pixels are left uninitialized.  The size is set to the maximum of width and height.</p>
  </dd>
  <dt>
    <p>XcursorImages *XcursorImagesCreate (int size)</p>
  </dt>
  <dd>
    <p>void XcursorImagesDestroy (XcursorImages *images) Allocate and free arrays to hold multiple cursor images.  On allocation, nimage is set to zero.</p>
  </dd>
  <dt>
    <p>XcursorCursors *XcursorCursorsCreate (Display *dpy, int size)</p>
  </dt>
  <dd>
    <p>void XcursorCursorsDestroy (XcursorCursors *cursors) Allocate and free arrays to hold multiple cursors.  On allocation, ncursor is set to zero, ref is set to one.</p>
  </dd>

</dl>

<h3>Reading and writing images.</h3>

<dl class='dl-vertical'>
  <dt>
    <p>XcursorImage *XcursorXcFileLoadImage (XcursorFile *file, int size)</p>
  </dt>
  <dd>
    <p>XcursorImages *XcursorXcFileLoadImages (XcursorFile *file, int size) XcursorImages *XcursorXcFileLoadAllImages (XcursorFile *file) XcursorBool XcursorXcFileLoad (XcursorFile *file, XcursorComments **commentsp, XcursorImages **imagesp) XcursorBool XcursorXcFileSave (XcursorFile *file, const XcursorComments *comments, const XcursorImages *images) These read and write cursors from an XcursorFile handle.  After reading, the file pointer will be left at some random place in the file.</p>
  </dd>
  <dt>
    <p>XcursorImage *XcursorFileLoadImage (FILE *file, int size)</p>
  </dt>
  <dd>
    <p>XcursorImages *XcursorFileLoadImages (FILE *file, int size) XcursorImages *XcursorFileLoadAllImages (FILE *file) XcursorBool XcursorFileLoad (FILE *file, XcursorComments **commentsp, XcursorImages **imagesp) XcursorBool XcursorFileSaveImages (FILE *file, const XcursorImages *images) XcursorBool XcursorFileSave (FILE * file, const XcursorComments *comments, const XcursorImages *images) These read and write cursors from a stdio FILE handle.  Writing flushes before returning so that any errors should be detected.</p>
  </dd>
  <dt>
    <p>XcursorImage *XcursorFilenameLoadImage (const char *filename, int size)</p>
  </dt>
  <dd>
    <p>XcursorImages *XcursorFilenameLoadImages (const char *filename, int size) XcursorImages *XcursorFilenameLoadAllImages (FILE *file) XcursorBool XcursorFilenameLoad (const char *file, XcursorComments **commentsp, XcursorImages **imagesp) XcursorBool XcursorFilenameSaveImages (const char *filename, const XcursorImages *images) XcursorBool XcursorFilenameSave (const char *file, const XcursorComments *comments, const XcursorImages *images) These parallel the stdio FILE interfaces above, but take filenames.</p>
  </dd>

</dl>

<h3>Reading library images</h3>

<dl class='dl-vertical'>
  <dt>
    <p>XcursorImage *XcursorLibraryLoadImage (const char *name, const char *theme, int size)</p>
  </dt>
  <dd>
    <p>XcursorImages *XcursorLibraryLoadImages (const char *name, const char *theme, int size) These search the library path, loading the first file found.  If 'theme' is not NULL, these functions first try appending -theme to name and then name alone.</p>
  </dd>

</dl>

<h3>Cursor APIs</h3>

<dl class='dl-vertical'>
  <dt>
    <p>Cursor XcursorFilenameLoadCursor (Display *dpy, const char *file)</p>
  </dt>
  <dd>
    <p>XcursorCursors *XcursorFilenameLoadCursors (Display *dpy, const char *file) These load cursors from the specified file.</p>
  </dd>
  <dt>
    <p>Cursor XcursorLibraryLoadCursor (Display *dpy, const char *name)</p>
  </dt>
  <dd>
    <p>XcursorCursors *XcursorLibraryLoadCursors (Display *dpy, const char *name) These load cursors using the specified library name.  The theme comes from the display.</p>
  </dd>

</dl>

<h3>X Cursor Name APIs</h3>

<dl class='dl-vertical'>
  <dt>
    <p>XcursorImage *XcursorShapeLoadImage (unsigned int shape, const char *theme, int size)</p>
  </dt>
  <dd>
    <p>XcursorImages *XcursorShapeLoadImages (unsigned int shape, const char *theme, int size) These map 'shape' to a library name using the standard X cursor names and then load the images.</p>
  </dd>
  <dt>
    <p>Cursor XcursorShapeLoadCursor (Display *dpy, unsigned int shape)</p>
  </dt>
  <dd>
    <p>XcursorCursors *XcursorShapeLoadCursors (Display *dpy, unsigned int shape) These map 'shape' to a library name and then load the cursors.</p>
  </dd>

</dl>

<h3>Display Information APIs</h3>

<dl class='dl-vertical'>
  <dt>
    <p>XcursorBool XcursorSupportsARGB (Display *dpy)</p>
  </dt>
  <dd>
    <p>Returns whether the display supports ARGB cursors or whether cursors will be mapped to a core X cursor.</p>
  </dd>
  <dt>
    <p>XcursorBool XcursorSetDefaultSize (Display *dpy, int size)</p>
  </dt>
  <dd>
    <p>Sets the default size for cursors on the specified display. When loading cursors, those whose nominal size is closest to this size will be preferred.</p>
  </dd>
  <dt>
    <p>int XcursorGetDefaultSize (Display *dpy)</p>
  </dt>
  <dd>
    <p>Gets the default cursor size.</p>
  </dd>
  <dt>
    <p>XcursorBool XcursorSetTheme (Display *dpy, const char *theme)</p>
  </dt>
  <dd>
    <p>Sets the current theme name.</p>
  </dd>
  <dt>
    <p>char *XcursorGetTheme (Display *dpy)</p>
  </dt>
  <dd>
    <p>Gets the current theme name.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>XCURSOR_PATH</strong></p>
  </dt>
  <dd>
    <p>This variable sets the list of paths to look for cursors in. Directories in this path are separated by colons (:).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESTRICTIONS</h2>
        <div class="sectioncontent">
<p><strong>Xcursor</strong> will probably change radically in the future; weak attempts will be made to retain some level of source-file compatibility.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Keith Packard</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XcursorLibraryLoadCursors.3.html"><span aria-hidden="true">&larr;</span> XcursorLibraryLoadCursors.3: Cursor management library</a></li>
   <li class="next"><a href="XcursorLibraryLoadImages.3.html">XcursorLibraryLoadImages.3: Cursor management library <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
