<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>astext: Astext- demonstrates antialiased texturized text rendering libafterimage/tutorials/astext</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Astext- demonstrates antialiased texturized text rendering libafterimage/tutorials/astext">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="astext (3x) manual">
  <meta name="twitter:description" content="Astext- demonstrates antialiased texturized text rendering libafterimage/tutorials/astext">
  <meta name="twitter:image" content="https://www.carta.tech/images/libafterimage-dev-astext-3x.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3x/astext.3x.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="astext (3x) manual" />
  <meta property="og:description" content="Astext- demonstrates antialiased texturized text rendering libafterimage/tutorials/astext" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libafterimage-dev-astext-3x.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">astext<small> (3x)</small></h1>
        <p class="lead">Astext- demonstrates antialiased texturized text rendering libafterimage/tutorials/astext</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/astext.3x.html">
      <span itemprop="name">astext: Astext- demonstrates antialiased texturized text rendering libafterimage/tutorials/astext</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libafterimage-dev/">
      <span itemprop="name">libafterimage-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/astext.3x.html">
      <span itemprop="name">astext: Astext- demonstrates antialiased texturized text rendering libafterimage/tutorials/astext</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASText</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>libAfterImage application for rendering texturized text.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>In this tutorial we will attempt to render arbitrary text in window, with optional texturized background and foreground. We shall also surround rendered text with beveled frame, creating an illusion of a button.</p><p>New steps described in this tutorial are : ASText.1. Openning and closing fonts. ASText.2. Approximating rendered text size. ASText.3. Rendering texturized text. ASText.4. Merging foreground and background with bevel.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO astext&hellip;</h2>
        <div class="sectioncontent">
<p>Tutorial 1: ASView  - explanation of basic steps needed to use</p>
<pre>
                      libAfterImage and some other simple things.
</pre>
<p>Tutorial 2: ASScale - image scaling basics. Tutorial 3: ASTile  - image tiling and tinting. Tutorial 4: ASMerge - scaling and blending of arbitrary number of</p>
<pre>
                      images.
</pre>
<p>Tutorial 5: ASGrad  - drawing multipoint linear gradients. Tutorial 6: ASFlip  - image rotation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>#include "../afterbase.h" #include "../afterimage.h" #include "common.h"</p><p>/* Usage:  astext [-f font] [-s size] [-t text] [-S 3D_style]</p>
<pre>
                  [-c text_color] [-b background_color]
                  [-T foreground_texture] [-B background_image]
                  [-r foreground_resize_type] [-R background_resize_type]
</pre>
<p> */</p><p>#define BEVEL_HI_WIDTH 20 #define BEVEL_LO_WIDTH 30 #define BEVEL_ADDON    (BEVEL_HI_WIDTH+BEVEL_LO_WIDTH)</p><p>void usage() {</p>
<pre>
    printf( "  Usage:   astext [-h] [-f font] [-s size] [-t text] "
            "[-S 3D_style] &#92;n");
    printf( "                  [-c text_color] [-b background_color]&#92;n");
    printf( "                  [-T foreground_texture] "
            "[-B background_image]&#92;n");
    printf( "                  [-r foreground_resize_type] "
            "[-R background_resize_type]&#92;n");
    printf( "                  [-m ]&#92;n");
    printf( "  Where: font - TrueType font's filename or X font spec or "
            "alias;&#92;n");
    printf( "         size - size in points for TrueType fonts;&#92;n");
    printf( "         text - text to be drawn;&#92;n");
    printf( "         3D_style - 3D style of text. "
            "One of the following:&#92;n");
    printf( "             0 - plain 2D tetx, 1 - embossed, 2 - sunken, "
            "3 - shade above,&#92;n");
    printf( "             4 - shade below, 5 - embossed thick, "
            "6 - sunken thick.&#92;n");
    printf( "             7 - ouline above, 8 - ouline below, "
            "9 - full ouline.&#92;n");
    printf( "         resize_type - tells how texture/image should be "
            "transformed to fit&#92;n");
    printf( "         the text size. Could be: scale or tile."
            "Default is tile&#92;n");
    printf( "         -m make font monospaced. &#92;n");
</pre>
<p>}</p><p>int main(int argc, char* argv[]) {</p>
<pre>
    Display *dpy = NULL;
    ASVisual *asv = NULL ;
    int screen = 0, depth = 0;
    char *font_name = "test.ttf";
    int size = 32 ;
</pre>
<p>#if 0</p>
<pre>
    char *text = "ããè¿~æ²¡æ";  /* chinese */
</pre>
<p>#else</p>
<pre>
    char *text = "Smart Brown Dog jumps&#92;nOver The Lazy Fox,&#92;n"
                 "and falls into the ditch.";
</pre>
<p>#endif</p>
<pre>
    ARGB32 text_color = ARGB32_White, back_color = ARGB32_Black;
    char *text_color_name = "#FFFFFFFF", *back_color_name = "#FF000000";
    char *fore_image_file = "fore.xpm" ;
    char *back_image_file = "back.xpm" ;
    Bool scale_fore_image = False, scale_back_image = False ;
    ASImage *fore_im = NULL, *back_im = NULL;
    ASImage *text_im = NULL ;
    struct ASFontManager *fontman = NULL;
    struct ASFont  *font = NULL;
    unsigned int width, height ;
    int i ;
    int text_margin = size/2 ;
    Bool monospaced = False ;
    char * font_path = NULL;
    ASTextAttributes attr = {ASTA_VERSION_1, ASTA_UseTabStops,
                             AST_ShadeBelow, ASCT_UTF8, 8, 0,
                             NULL, 0, ARGB32_White };
</pre>

<pre>
    /* see ASView.1 : */
    set_application_name( argv[0] );
</pre>
<p>#if (HAVE_AFTERBASE_FLAG==1)</p>
<pre>
    set_output_threshold(OUTPUT_LEVEL_DEBUG);
</pre>
<p>#endif</p>
<pre>
    if( argc == 1 )
        usage();
    else for( i = 1 ; i &lt; argc ; i++ )
    {
        if( strncmp( argv[i], "-h", 2 ) == 0 )
        {
            usage();
            return 0;
        }
        if( strncmp( argv[i], "-m", 2 ) == 0 )
        {
            monospaced = True ;
        }else if( i+1 &lt; argc )
        {
            if( strncmp( argv[i], "-f", 2 ) == 0 )
                font_name = argv[i+1] ;
            else if( strncmp( argv[i], "-s", 2 ) == 0 )
            {
                size = atoi(argv[i+1]);
                text_margin = size/2 ;
            }else if( strncmp( argv[i], "-t", 2 ) == 0 )
                text = argv[i+1] ;
            else if( strncmp( argv[i], "-S", 2 ) == 0 )
            {
                attr.type = atoi(argv[i+1]);
                if( attr.type &gt;= AST_3DTypes )
                {
                    show_error( "3D type is wrong. "
                                "Using 2D Plain instead.");
                    attr.type = AST_Plain ;
                }
</pre>

<pre>
            }else if( strncmp( argv[i], "-c", 2 ) == 0 )
                text_color_name = argv[i+1] ;
            else if( strncmp( argv[i], "-b", 2 ) == 0 )
                back_color_name = argv[i+1] ;
            else if( strncmp( argv[i], "-T", 2 ) == 0 )
                fore_image_file = argv[i+1] ;
            else if( strncmp( argv[i], "-B", 2 ) == 0 )
                back_image_file = argv[i+1] ;
            else if( strncmp( argv[i], "-r", 2 ) == 0 )
                scale_fore_image = (strcmp( argv[i+1], "scale") == 0);
            else if( strncmp( argv[i], "-R", 2 ) == 0 )
                scale_back_image = (strcmp( argv[i+1], "scale") == 0);
        }
    }
</pre>
<p>#ifndef X_DISPLAY_MISSING</p>
<pre>
    dpy = XOpenDisplay(NULL);
    _XA_WM_DELETE_WINDOW = XInternAtom( dpy, "WM_DELETE_WINDOW", False);
    screen = DefaultScreen(dpy);
    depth = DefaultDepth( dpy, screen );
</pre>
<p>#endif</p>
<pre>
    /* see ASText.1 : */
    if( getenv("FONT_PATH") != NULL )
    {
        font_path = safemalloc( strlen(getenv("FONT_PATH"))+1+2+1);
        sprintf( font_path, "%s:./", getenv("FONT_PATH") );
</pre>

<pre>
    }
    if( (fontman = create_font_manager( dpy, font_path, NULL )) != NULL )
        font = get_asfont( fontman, font_name, 0, size,
                           ASF_GuessWho|(monospaced?ASF_Monospaced:0) );
</pre>

<pre>
    if( font == NULL )
    {
        show_error( "unable to load requested font                      "Falling back to          font = get_asfont( fontman, "fixed", 0, size, ASF_GuessWho );
        if( font == NULL )
        {
            show_error("font              return 1;
        }
    }
</pre>

<pre>
    /*for( i = 0 ; i &lt; 128 ; ++i )
        print_asglyph( stderr, font, i); */
</pre>

<pre>
    parse_argb_color( text_color_name, &text_color );
    parse_argb_color( back_color_name, &back_color );
</pre>

<pre>
    attr.fore_color = text_color ;
    if( attr.type &gt;= AST_OutlineAbove )
        fore_image_file = NULL ;
</pre>

<pre>
    /* see ASView.3 : */
    asv = create_asvisual( dpy, screen, depth, NULL );
</pre>

<pre>
    /* see ASText.2 : */
    /*set_asfont_glyph_spacing( font, 10, 40 );*/
    /*Simple way:get_text_size( text, font, attr.type, &width, &height ); */
    /*Fancy way : */
    get_fancy_text_size( text, font, &attr, &width, &height, 0, NULL );
</pre>
<p>/* show_progress( "extimated text size = %dx%d", width, height ); */</p>
<pre>
    if( fore_image_file )
    {
        ASImage *tmp = file2ASImage( fore_image_file, 0xFFFFFFFF,
                                     SCREEN_GAMMA, 0, getenv("IMAGE_PATH"), NULL );
        if( tmp )
        {
            if( tmp-&gt;width != width || tmp-&gt;height != height )
            {   /* see ASScale.2 : */
                if( scale_fore_image )
                    fore_im = scale_asimage( asv, tmp, width, height,
                                             ASA_ASImage, 0,
                                             ASIMAGE_QUALITY_DEFAULT );
                else
                    fore_im = tile_asimage( asv, tmp, 0, 0,
                                            width, height, 0,
                                            ASA_ASImage, 0,
                                            ASIMAGE_QUALITY_DEFAULT );
                destroy_asimage( &tmp );
            }else
                fore_im = tmp ;
        }else
            fore_im = NULL ;
    }
    width  += text_margin*2 + BEVEL_ADDON;
    height += text_margin*2 + BEVEL_ADDON;
    if( back_image_file )
    { /* see ASView.2 : */
        ASImage *tmp = file2ASImage( back_image_file, 0xFFFFFFFF,
                                    SCREEN_GAMMA, 0, getenv("IMAGE_PATH"), NULL );
        if( tmp )
        {
            if( scale_back_image &&
                (tmp-&gt;width != width || tmp-&gt;height != height) )
            {   /* see ASScale.2 : */
                back_im = scale_asimage( asv, tmp, width, height,
                                         ASA_ASImage, 0,
                                         ASIMAGE_QUALITY_DEFAULT );
                destroy_asimage( &tmp );
            }else
                back_im = tmp ;
        }else
            back_im = NULL ;
    }
</pre>

<pre>
    /* see ASText.3 : */
    /* simple way : text_im = draw_text( text, font, attr.type, 0 ); */
    text_im = draw_fancy_text( text, font, &attr, 0, 0 );
    if( fore_im )
    {
        move_asimage_channel( fore_im, IC_ALPHA, text_im, IC_ALPHA );
        destroy_asimage( &text_im );
    }else
        fore_im = text_im ;
</pre>

<pre>
    /* see ASText.1 : */
    release_font( font );
    destroy_font_manager( fontman, False );
</pre>

<pre>
    if( fore_im )
    {
        ASImage *rendered_im ;
        ASImageLayer layers[2] ;
        ASImageBevel bevel = {0/*BEVEL_SOLID_INLINE*/, 0xFFDDDDDD,
                              0xFF555555, 0xFFFFFFFF,
                              0xFF777777, 0xFF222222,
                              BEVEL_HI_WIDTH, BEVEL_HI_WIDTH,
                              BEVEL_LO_WIDTH, BEVEL_LO_WIDTH,
                              BEVEL_HI_WIDTH, BEVEL_HI_WIDTH,
                              BEVEL_LO_WIDTH, BEVEL_LO_WIDTH } ;
</pre>

<pre>
        /* see ASText.4 : */
        init_image_layers( &(layers[0]), 2 );
        if( back_im )
            back_im-&gt;back_color = back_color ;
        if( fore_im )
            fore_im-&gt;back_color = text_color ;
        layers[0].im = back_im ;
        layers[0].dst_x = 0 ;
        layers[0].dst_y = 0 ;
        layers[0].clip_width = width ;
        layers[0].clip_height = height ;
        layers[0].bevel = &bevel ;
        layers[1].im = fore_im ;
        layers[1].dst_x = text_margin+BEVEL_HI_WIDTH*2 ;
        layers[1].dst_y = text_margin+
                            MIN( (int)text_margin,
                                ((int)font-&gt;max_height-
                                 (int)font-&gt;max_ascend))/2+
                                 BEVEL_HI_WIDTH*2;
        if( fore_im )
        {
            layers[1].clip_width = fore_im-&gt;width ;
            layers[1].clip_height = fore_im-&gt;height ;
        }
        rendered_im = merge_layers( asv, &(layers[0]), 2,
                                    width+BEVEL_ADDON, height+BEVEL_ADDON,
</pre>
<p>#ifndef X_DISPLAY_MISSING</p>
<pre>
                                    ASA_XImage,
</pre>
<p>#else</p>
<pre>
                                    ASA_ASImage,
</pre>
<p>#endif</p>
<pre>
                                    0, ASIMAGE_QUALITY_DEFAULT);
        destroy_asimage( &fore_im );
        destroy_asimage( &back_im );
</pre>

<pre>
        if( rendered_im )
        {
</pre>
<p>#ifndef X_DISPLAY_MISSING</p>
<pre>
            Window w;
            /* see ASView.4 : */
            w = create_top_level_window( asv, DefaultRootWindow(dpy),
                                         32, 32,
                                         width+BEVEL_ADDON,
                                         height+BEVEL_ADDON,
                                         1, 0, NULL,
                                         "ASText", text );
            if( w != None )
            {
                Pixmap p ;
</pre>

<pre>
                XMapRaised   (dpy, w);
</pre>

<pre>
                /* see ASView.5 : */
                p = asimage2pixmap( asv, DefaultRootWindow(dpy),
                                    rendered_im, NULL, True );
                destroy_asimage( &rendered_im );
                /* see common.c: set_window_background_and_free() : */
                p = set_window_background_and_free( w, p );
                /* see common.c: wait_closedown() : */
            }
            wait_closedown(w);
            dpy = NULL;
</pre>
<p>#else</p>
<pre>
            /* writing result into the file */
            ASImage2file( rendered_im, NULL, "astext.jpg", ASIT_Jpeg,
                          NULL );
            destroy_asimage( &rendered_im );
</pre>
<p>#endif</p>
<pre>
        }
    }
    return 0 ;
</pre>
<p>}</p><p>libAfterImage/tutorials/ASText.1 [7.1]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Step 1. Openning and closing fonts.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Before any text can be rendered using libAfterImage - desired font has to be opened for use. Font opening process is two-step. At first we need to create font manager ( ASFontManager ). That is done once, and same font manager can be used throughout entire application. It contains information about used external libraries, hash of opened fonts, and some other info.</p><p>When ASFontManager is created it could be used to obtain actuall fonts. get_asfont() call is used to query cahce of the ASFontManager, to see if the font has been loaded already, and if not - then it will load the font and prepare it for drawing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
    if( (fontman = create_font_manager( dpy, NULL, NULL )) != NULL )
        font = get_asfont( fontman, font_name, 0, size, ASF_GuessWho);
    if( font == NULL )
    {
        font = get_asfont( fontman, "fixed", 0, size, ASF_GuessWho );
        if( font == NULL )
        {
            show_error( "font                              Aborting.");
            return 1;
        }
    }
    ...
    destroy_font( font );
    destroy_font_manager( fontman, False );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO astext&hellip;</h2>
        <div class="sectioncontent">
<p>create_font_manager(), get_asfont(), destroy_font(), destroy_font_manager() libAfterImage/tutorials/ASText.2 [7.2]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Step 2. Approximating rendered text size.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Prior to actually drawing the text it is useful to estimate the size of the image, that rendered text will occupy, So that window can be created of appropriate size, and othe interface elements laid out accordingly. get_text_size() could be used to obtain rendered text size without actually drawing it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
    get_text_size( text, font, type_3d, &width, &height );
    if( fore_image_file )
    {
        ASImage *tmp = file2ASImage( fore_image_file, 0xFFFFFFFF,
                                     SCREEN_GAMMA, 0, NULL );
        if( tmp )
        {
            if( tmp-&gt;width != width || tmp-&gt;height != height )
            {
                if( scale_fore_image )
                    fore_im = scale_asimage( asv, tmp, width, height,
                                             ASA_ASImage, 0,
                                             ASIMAGE_QUALITY_DEFAULT );
                else
                    fore_im = tile_asimage( asv, tmp, 0, 0,
                                            width, height, 0,
                                            ASA_ASImage, 0,
                                            ASIMAGE_QUALITY_DEFAULT );
                destroy_asimage( &tmp );
            }else
                fore_im = tmp ;
        }
    }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>In this particular example we either tile or scale foreground texture to fit the text. In order to texturize the text  - we need to use rendered text as an alpha channel on texture image. That can easily be done only if both images are the same size.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO astext&hellip;</h2>
        <div class="sectioncontent">
<p>get_text_size(), scale_asimage(), tile_asimage(), ASText.3 libAfterImage/tutorials/ASText.3 [7.3]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Step 3. Rendering texturized text.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The most effective text texturization technique provided by libAfterImage consists of substitution of the alpha channel of the texture, with rendered text. That is possible since all the text is rendered into alpha channel only. move_asimage_channel() call is used to accomplish this operation. This call actually removes channel data from the original image and stores it in destination image. If there was something in destination image's channel  already - it will be destroyed. All kinds of nifty things could be done using this call, actually. Like, for example, rendered text can be moved into green channel of the texture, creating funky effect.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
    text_im = draw_text( text, font, 0 );
    if( fore_im )
    {
        move_asimage_channel( fore_im, IC_ALPHA, text_im, IC_ALPHA );
        destroy_asimage( &text_im );
    }else
        fore_im = text_im ;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>move_asimage_channel() will only work if both images have exactly the same size. It will do nothing otherwise.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO astext&hellip;</h2>
        <div class="sectioncontent">
<p>draw_text(), move_asimage_channel() libAfterImage/tutorials/ASText.4 [7.4]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Step 4. Merging foreground and background with bevel.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>On this step we have 2 images ready for us - background and texturized text. At this point we need to merge them together by alpha-blending text over background (remeber - text is alpha-channel of foreground texture). At the same time we would like to add some nice bevel border around entire image. To accomplish that task all we have to do is setup ASImageLayer structure for both background and foreground, and apply merge_layers on them. When it is done - we no longer need original images and we destroy them to free up some memory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
    ASImageLayer layers[2] ;
    ASImageBevel bevel = {0, 0xFFDDDDDD, 0xFF555555,
                             0xFFFFFFFF, 0xFF777777, 0xFF444444,
                          BEVEL_HI_WIDTH, BEVEL_HI_WIDTH,
                          BEVEL_LO_WIDTH, BEVEL_LO_WIDTH,
                          BEVEL_HI_WIDTH, BEVEL_HI_WIDTH,
                          BEVEL_LO_WIDTH, BEVEL_LO_WIDTH } ;
    memset( &(layers[0]), 0x00, sizeof(layers) );
    layers[0].im = back_im ;
    layers[0].clip_width = width ;
    layers[0].clip_height = height ;
    layers[0].merge_scanlines = alphablend_scanlines ;
    layers[0].bevel = &bevel ;
    layers[1].im = fore_im ;
    layers[1].dst_x = TEXT_MARGIN ;
    layers[1].dst_y = TEXT_MARGIN ;
    layers[1].clip_width = fore_im-&gt;width ;
    layers[1].clip_height = fore_im-&gt;height ;
    layers[1].back_color = text_color ;
    layers[1].merge_scanlines = alphablend_scanlines ;
    rendered_im = merge_layers( asv, &(layers[0]), 2,
                                width+BEVEL_ADDON, height+BEVEL_ADDON,
                                ASA_XImage, 0, ASIMAGE_QUALITY_DEFAULT);
    destroy_asimage( &fore_im );
    destroy_asimage( &back_im );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>We have to remember that outside bevel border will addup to the image size, hence we have to use width+BEVEL_ADDON , height+BEVEL_ADDON as desired image size.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO astext&hellip;</h2>
        <div class="sectioncontent">
<p>ASImageLayer, ASImageBevel, merge_layers()</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="asscale.3x.html"><span aria-hidden="true">&larr;</span> asscale.3x: Asscale- demonstrates image loading and scaling libafterimage/tutorials/asscale</a></li>
   <li class="next"><a href="astile.3x.html">astile.3x: Astile- demonstrates image tiling/cropping and tinting libafterimage/tutorials/astile <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
