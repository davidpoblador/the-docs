<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>String::BufferStack: Nested buffers for templating systems</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Nested buffers for templating systems">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="String::BufferStack (3pm) manual">
  <meta name="twitter:description" content="Nested buffers for templating systems">
  <meta name="twitter:image" content="https://www.carta.tech/images/libstring-bufferstack-perl-String::BufferStack-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/String::BufferStack.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="String::BufferStack (3pm) manual" />
  <meta property="og:description" content="Nested buffers for templating systems" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libstring-bufferstack-perl-String::BufferStack-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">String::BufferStack<small> (3pm)</small></h1>
        <p class="lead">Nested buffers for templating systems</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/String::BufferStack.3pm.html">
      <span itemprop="name">String::BufferStack: Nested buffers for templating systems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libstring-bufferstack-perl/">
      <span itemprop="name">libstring-bufferstack-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/String::BufferStack.3pm.html">
      <span itemprop="name">String::BufferStack: Nested buffers for templating systems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  my $stack = String::BufferStack-&gt;new;
  $stack-&gt;push( filter =&gt; sub {return uc shift} );
  $stack-&gt;append("content");
  $stack-&gt;flush_output;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>\*(C`String::BufferStack\*(C' provides a framework for storing nested buffers.  By default, all of the buffers flow directly to the output method, but individual levels of the stack can apply filters, or store their output in a scalar reference.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<h3>new \s-1PARAMHASH\s0</h3>
<p>Creates a new buffer stack and returns it.  Possible arguments include:</p>
<dl class='dl-vertical'>
  <dt>
    prealoc
  </dt>
  <dd>
    <p>Preallocate this many bytes in the output buffer.  This can reduce reallocations, and thus speed up appends.</p>
  </dd>
  <dt>
    out_method
  </dt>
  <dd>
    <p>The method to call when output trickles down to the bottom-most buffer and is flushed via flush_output.  The default \*(C`out_method\*(C' prints the content to \*(C`STDOUT\*(C'.  This method will always be called with non-undef, non-zero length content.</p>
  </dd>
  <dt>
    use_length
  </dt>
  <dd>
    <p>Calculate length of each buffer as it is built.  This imposes a significant runtime cost, so should be avoided if at all possible. Defaults to off.</p>
  </dd>

</dl>

<h3>push \s-1PARAMHASH\s0</h3>
<p>Pushes a new frame onto the buffer stack.  By default, the output from this new frame connects to the input of the previous frame.  There are a number of possible options:</p>
<dl class='dl-vertical'>
  <dt>
    buffer
  </dt>
  <dd>
    <p>A string reference, into which the output from this stack frame will appear.  By default, this is the input buffer of the previous frame.</p>
  </dd>
  <dt>
    private
  </dt>
  <dd>
    <p>If a true value is passed for \*(C`private\*(C', it creates a private string reference, and uses that as the buffer \*(-- this is purely for convenience.  That is, the following blocks are equivilent:   my $buffer = "";   $stack-&gt;push( buffer =&gt; &#92;$buffer );   # ...   $stack-&gt;pop;   print $buffer;</p><p>  $stack-&gt;push( private =&gt; 1 );   # ...   print $stack-&gt;pop;</p>
  </dd>
  <dt>
    pre_append
  </dt>
  <dd>
    <p>A callback, which will be called with a reference to the \*(C`String::BufferStack\*(C' object, and the arguments to append, whenever this stack frame has anything appended to the input buffer, directly or indirectly. Within the context of the pre-append callback, \*(L"append\*(R", \*(L"direct_append\*(R", and \*(L"set_pre_append\*(R" function on the frame the pre-append is attached to, not the topmost trame.  Using \*(L"append\*(R" within the pre-append callback is not suggested; use \*(L"direct_append\*(R" instead.  \*(L"set_pre_append\*(R" can be used to alter or remove the pre-append callback itself \*(-- this is not uncommon, in the case where the first append is the only one which needs be watched for, for instance.</p>
  </dd>
  <dt>
    filter
  </dt>
  <dd>
    <p>A callback, used to process data which is appended to the stack frame. By default, filters are lazy, being called only when a frame is popped.  They can be forced at any time by calling \*(L"flush_filters\*(R", however.</p>
  </dd>

</dl>

<h3>depth</h3>
<p>Returns the current depth of the stack.  This starts at 0, when no frames have been pushed, and increases by one for each frame pushed.</p>
<h3>append \s-1STRING\s0 [, \s-1STRING\s0, ...]</h3>
<p>Appends the given strings to the input side of the topmost buffer. This will call all pre-append hooks attached to it, as well.  Note that if the frame has a filter, the filter will not immediately run, but will be delayed until the frame is \*(L"pop\*(R"'d, or \*(L"flush_filters\*(R" is called.</p><p>When called with no frames on the stack, appends the stringins directly to the \*(L"output_buffer\*(R".</p>
<h3>direct_append \s-1STRING\s0 [, \s-1STRING\s0, ...]</h3>
<p>Similar to \*(L"append\*(R", but appends the strings to the output side of the frame, skipping pre-append callbacks and filters.</p><p>When called with no frames on the stack, appends the strings directly to the \*(L"output_buffer\*(R".</p>
<h3>pop</h3>
<p>Removes the topmost frame on the stack, flushing the topmost filters in the process.  Returns the output buffer of the frame \*(-- note that this may not contain only strings appended in the current frame, but also those from before, as a speed optimization.  That is:</p><p>   $stack-&gt;append("one");    $stack-&gt;push;    $stack-&gt;append(" two");    $stack-&gt;pop;   # returns "one two"</p><p>This operation is a no-op if there are no frames on the stack.</p>
<h3>set_pre_append \s-1CALLBACK\s0</h3>
<p>Alters the pre-append callback on the topmost frame.  The callback will be called before text is appended to the input buffer of the frame, and will be passed the \*(C`String::BufferStack\*(C' and the arguments to \*(L"append\*(R".</p>
<h3>set_filter \s-1FILTER\s0</h3>
<p>Alters the filter on the topmost frame.  Doing this flushes the filters on the topmost frame.</p>
<h3>filter</h3>
<p>Filters the topmost stack frame, if it has outstanding unfiltered data.  This will propagate content to lower frames, possibly calling their pre-append hooks.</p>
<h3>flush</h3>
<p>If there are no frames on the stack, calls \*(L"flush_output\*(R". Otherwise, calls \*(L"flush_filters\*(R".</p>
<h3>flush_filters</h3>
<p>Flushes all filters.  This does not flush output from the output buffer; see \*(L"flush_output\*(R".</p>
<h3>buffer</h3>
<p>Returns the contents of the output buffer of the topmost frame; if there are no frames, returns the output buffer.</p>
<h3>buffer_ref</h3>
<p>Returns a reference to the output buffer of the topmost frame; if there are no frames, returns a reference to the output buffer.  Note that adjusting this skips pre-append and filter hooks.</p>
<h3>length</h3>
<p>If \*(C`use_length\*(C' was enabled in the buffer stack's constructor, returns the number of characters appended to the current frame; if there are no frames, returns the length of the output buffer.</p><p>If \*(C`use_length\*(C' was not enabled, warns and returns 0.</p>
<h3>flush_output</h3>
<p>Flushes all filters using \*(L"flush_filters\*(R", then flushes output from the output buffer, using the configured \*(L"out_method\*(R".</p>
<h3>output_buffer</h3>
<p>Returns the pending output buffer, which sits below all existing frames.</p>
<h3>output_buffer_ref</h3>
<p>Returns a reference to the pending output buffer, allowing you to modify it.</p>
<h3>clear</h3>
<p>Clears <em>all</em> buffers in the stack, including the output buffer.</p>
<h3>clear_top</h3>
<p>Clears the topmost buffer in the stack; if there are no frames on the stack, clears the output buffer.</p>
<h3>out_method [\s-1CALLBACK\s0]</h3>
<p>Gets or sets the output method callback, which is given content from the pending output buffer, which sits below all frames.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO String::BufferStack&hellip;</h2>
        <div class="sectioncontent">
<p>Many concepts were originally taken from HTML::Mason's internal buffer stack.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Alex Vandiver \*(C`alexmv@bestpractical.com\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2008-2009, Best Practical Solutions.</p><p>This package is distributed under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Stone::GB_Sequence.3pm.html"><span aria-hidden="true">&larr;</span> Stone::GB_Sequence.3pm: Specialized access to genbank records</a></li>
   <li class="next"><a href="String::CRC::Cksum.3pm.html">String::CRC::Cksum.3pm: Perl extension for calculating checksums in a manner compatible with the posix cksum program. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
