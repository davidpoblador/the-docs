<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XmPrintShell: Xmprintshell  a shell widget class used for printing in motif</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Xmprintshell  a shell widget class used for printing in motif">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="XmPrintShell (3) manual">
  <meta name="twitter:description" content="Xmprintshell  a shell widget class used for printing in motif">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmotif-dev-XmPrintShell-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/XmPrintShell.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="XmPrintShell (3) manual" />
  <meta property="og:description" content="Xmprintshell  a shell widget class used for printing in motif" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmotif-dev-XmPrintShell-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">XmPrintShell<small> (3)</small></h1>
        <p class="lead">Xmprintshell  a shell widget class used for printing in motif</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/XmPrintShell.3.html">
      <span itemprop="name">XmPrintShell: Xmprintshell  a shell widget class used for printing in motif</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmotif-dev/">
      <span itemprop="name">libmotif-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/XmPrintShell.3.html">
      <span itemprop="name">XmPrintShell: Xmprintshell  a shell widget class used for printing in motif</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
#include &lt;Xm/Print.h&gt;
<strong>Boolean </strong><strong>XmIsPrintShell</strong><strong></strong>(
<strong>Widget</strong>);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>XmPrintShell</strong> provides the Motif application programmer with an Xt widget oriented API to some of the X Print resources and a callback to drive the pagination.</p><p>The <strong>XmPrintShell</strong> provides a simple callback to handle the pagination logic, and a set of resources to get and set common printer attributes.</p><p>If not created on an <strong>XPrint</strong> connection, <strong>XmPrintShell</strong> behaves as a regular applicationShell.</p><p>The <strong>XmPrintShell</strong> also initializes the <strong>Xp</strong> extension event handling mechanism, by registering an extension selector that calls <strong>XpSelectInput</strong> and event dispatcher for print and attributes <strong>Xp</strong> events, so applications can use <strong>XtInsertEventTypeHandler</strong> to register their own handler with the <strong>Xp</strong> events.</p><h3>Arguments</h3>
<p>No <strong>XmCreate</strong> function is provided, since this is a toplevel shell, most likely created thru some <strong>Xt</strong> shell creation routine or <strong>XmPrintSetup</strong>.</p>
<h3>Classes</h3>
<p><strong>XmPrintShell</strong> is a subclass of <strong>ApplicationShell</strong>; it inherits behavior, resources and traits from all its superclasses. The class pointer is <strong>XmPrintShellWidgetClass</strong>.</p>
<h3>New Resources</h3>
<table class="table table-striped">
<tr>
<th><strong>XmPrintShell Resource Set</strong></th>
<th></th>
<th></th>
<th></th>
<th></th></tr>

<tr>
<td><strong>Name</strong></td>
<td><strong>Class</strong></td>
<td><strong>Type</strong></td>
<td><strong>Default</strong></td>
<td><strong>Access</strong></td></tr>

<tr>
<td><strong>XmNstartJobCallback</strong></td>
<td><strong>XmCCallback</strong></td>
<td><strong>XtCallbackList</strong></td>
<td><strong>NULL</strong></td>
<td><strong>CSG</strong></td></tr>

<tr>
<td><strong>XmNendJobCallback</strong></td>
<td><strong>XmCCallback</strong></td>
<td><strong>XtCallbackList</strong></td>
<td><strong>NULL</strong></td>
<td><strong>CSG</strong></td></tr>

<tr>
<td><strong>XmNpageSetupCallback</strong></td>
<td><strong>XmCCallback</strong></td>
<td><strong>XtCallbackList</strong></td>
<td><strong>NULL</strong></td>
<td><strong>CSG</strong></td></tr>

<tr>
<td><strong>XmNminX</strong></td>
<td><strong>XmCMinX</strong></td>
<td><strong>Dimension</strong></td>
<td><strong>dynamic</strong></td>
<td><strong>G</strong></td></tr>

<tr>
<td><strong>XmNminY</strong></td>
<td><strong>XmCMinY</strong></td>
<td><strong>Dimension</strong></td>
<td><strong>dynamic</strong></td>
<td><strong>G</strong></td></tr>

<tr>
<td><strong>XmNmaxX</strong></td>
<td><strong>XmCMaxX</strong></td>
<td><strong>Dimension</strong></td>
<td><strong>dynamic</strong></td>
<td><strong>G</strong></td></tr>

<tr>
<td><strong>XmNmaxY</strong></td>
<td><strong>XmCMaxY</strong></td>
<td><strong>Dimension</strong></td>
<td><strong>dynamic</strong></td>
<td><strong>G</strong></td></tr>

<tr>
<td><strong>XmNdefaultPixmapResolution</strong></td>
<td><strong>XmCDefaultPixmapResolution</strong></td>
<td><strong>unsigned short</strong></td>
<td><strong>100</strong></td>
<td><strong>CSG</strong></td></tr>

<tr>
<td><strong>XmNpdmNotificationCallback</strong></td>
<td><strong>XmCCallback</strong></td>
<td><strong>XtCallbackList</strong></td>
<td><strong>NULL</strong></td>
<td><strong>CSG</strong></td></tr>
</table>
<dl class='dl-vertical'>
  <dt>
    <em>XmNstartJobCallback</em>
  </dt>
  <dd>
    <p>Specifies the callback driving the beginning of rendering. It is safe for an application to start rendering after this callback has been activated. <strong>XpStartJob</strong> must be called to trigger this callback.</p>
  </dd>
  <dt>
    <em>XmNendJobCallback</em>
  </dt>
  <dd>
    <p>Specifies the callback driving the end of rendering. Notify the client that all rendering has been processed (whether on print-to-file or regular spool). <strong>XpEndJob</strong> is called by the print shell to trigger this callback.</p>
  </dd>
  <dt>
    <em>XmNpageSetupCallback</em>
  </dt>
  <dd>
    <p>Specifies the callback driving the page layout. It is safe for an app to start rendering from this callback even if the <strong>XmNstartJobCallback</strong> is not used.</p>
  </dd>
  <dt>
    <em>XmNminX, XmNminY, XmNmaxX, XmNmaxY</em>
  </dt>
  <dd>
    <p>Specify the imageable area of the page in the current print context. <strong>XmPrintShell</strong> also maintains a proper size at all times by updating its own widget dimension whenever an attribute, such as resolution or orientation, changes. It is sized in its <strong>Initialize</strong> routine so that the application can rely on a proper size before the first <strong>StartPage</strong> call is issued.</p>
  </dd>
  <dt>
    <em>XmNdefaultPixmapResolution</em>
  </dt>
  <dd>
    <p>Indicates the resolution in dpi (dot per inch) of the image files read and converted by Motif for the widget descendants of this shell. It is used to determine a scaling ratio to be applied to pixmap created thru regular pixmap/icon conversion of the following Widget resources:</p>
<dl class='dl-vertical'>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmLabel</strong>.label*Pixmap, <strong>XmIconG</strong>.*IconPixmap <strong>XmToggleB</strong>.selectPixmap, <strong>XmPushBG</strong>.armPixmap, <strong>XmIconG</strong>.*IconMask, <strong>XmMessageBox</strong>.symbolPixmap, <strong>XmContainer</strong>.*StatePixmap, ...</p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p>Leaving out the pixmap resources being used for tiling (XmNhighlightPixmap, XmNtopShadowPixmap, XmNbottomShadowPixmap, XmNbackgroundPixmap, ...)</p>
  </dd>

</dl>

  </dd>
  <dt>
    <em>XmNpdmNotificationCallback</em>
  </dt>
  <dd>
    <p>A callback notifying the application about the status of the PDM (see XmPrintPopupPDM). A XmPrintShellCallbackStruct is used, with reason:</p>
<dl class='dl-vertical'>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmCR_PDM_NONE</strong>: no PDM available on this display for the named selection (provided in detail)</p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmCR_PDM_START_VXAUTH</strong> : the PDM is not authorized to connect to the video display.</p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmCR_PDM_START_PXAUTH</strong> : the PDM is not authorized to connect to the print display.</p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmCR_PDM_UP</strong> : the PDM is up and running</p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmCR_PDM_OK</strong> : the PDM has exited with OK status</p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmCR_PDM_CANCEL</strong> : the PDM has exited with CANCEL</p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmCR_PDM_START_ERROR</strong> : the PDM cannot start due to some error (usually logged)</p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>XmCR_PDM_EXIT_ERROR</strong> : the PDM has exited with an error</p>
  </dd>

</dl>

  </dd>

</dl>

<h3>Callback Information</h3>
<p>The <strong>XmNstartJobCallback</strong>, <strong>XmNendJobCallback,</strong> <strong>XmNpageSetupCallback</strong> and <strong>XmNpdmNotificationCallback</strong> operate on a <strong>XmPrintShellCallbackStruct</strong>, which is defined as follow:</p>
<pre>
typedef struct
{
    int     reason;  /* XmCR_START_JOB, XmCR_END_JOB,
                        XmCR_PAGE_SETUP, XmCR_PDM_* */
    XEvent  *event;
    XPContext print_context;
    Boolean last_page; /* in_out */
    XtPointer detail;
} XmPrintShellCallbackStruct;
</pre>

<h3>Additional Behavior</h3>
<p>The <strong>last_page</strong> field is only meaningful when the reason is <strong>XmCR_PAGE_SETUP</strong>.</p><p>The page setup callback is called with <strong>last_page</strong> <strong>False</strong> to notify the application that it has to get its internal layout state ready for the next page. Typically, a widget based application will change the content of a <strong>Label</strong> showing the page number, or scroll the content of the <strong>Text</strong> widget.</p><p>When the application has processed its last page, it should set the <strong>last_page</strong> field in the callback struct to <strong>True</strong>. The callback will be called a last time after that with <strong>last_page</strong> <strong>False</strong> to notify the application that it can safely clean-up its internal state (e.g., destroy widgets).</p><p>No drawing should occur from within the callback function in the application, this is an Exposure event-driven programming model where widgets render themselves from their expose methods.</p><p>The print shell calls <strong>XpStartPage</strong> after the <strong>pageSetupCallback</strong> returns, and <strong>XpEndPage</strong> upon reception of <strong>StartPageNotify</strong>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS/WARNINGS</h2>
        <div class="sectioncontent">
<p><strong>XmPrintShell</strong> can generate the following warnings:</p>
<dl class='dl-vertical'>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>Not connected to a valid X Print Server: behavior undefined.</strong></p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>Attempt to set an invalid resolution on a printer: %s</strong></p>
  </dd>
  <dt>
       &bull;
  </dt>
  <dd>
    <p><strong>Attempt to set an invalid orientation on a printer: %s</strong></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Not applicable</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
PrintOnePageCB(Widget pshell, XtPointer npages,
/*----------*/ XmPrintSetPageCBStruct psp)
{
    static int cur_page = 0;
    cur_page++;

    if (! psp-&gt;last_page
        && curPage &gt; 1) /* no need to scroll for the first page */
    {

        XmTextScroll(ptext, prows);  /* get ready for next page */

    } else {    /**** I'm done */

       XtDestroyWidget(pshell);
       XtCloseDisplay(XtDisplay(pshell));
    }

    if (cur_page == (int) n_pages) psp-&gt;last_page = True;
}

PrintOKCallback(...)
/*-------------*/
{
    pshell = XmPrintSetup (widget, pbs-&gt;print_screen,
                                   "Print", NULL, 0);

    XpStartJob(XtDisplay(pshell), XPSpool);

    /**** here I get the size of the shell, create my widget
          hierarchy: a bulleting board, and then a text widget,
          that I stuff with the video text widget buffer */

    /* get the total number of pages to print */
    /* same code as previous example to get n_pages */

    /****  set up my print callback */
    XtAddCallback(pshell,  XmNpageSetUpCallback,
                           PrintOnePageCB, n_pages);
}
</pre>
<p>Examples of <strong>XmNdefaultPixmapResolution</strong> usage:</p>
<dl class='dl-vertical'>
  <dt>
       &bull;
  </dt>
  <dd>
    <p>An application reuses the same image sources it uses for the video interface, in XBM, XPM, PNG ot JPEG, to layout on its printed pages. In this case, scaling is seamless.</p>
  </dd>

</dl>

<pre>
    ! icon.xpm is 30x30 pixels
    app*dialog.pushb.labelPixmap:icon.xpm
    ! print is 400dpi
    app.print*form.lab.labelPixmap:icon.xpm
    ! 120x120 pixels on the paper (auto scaling)
</pre>

<dl class='dl-vertical'>
  <dt>
       &bull;
  </dt>
  <dd>
    <p>An application provides a new set of image files, for a given printer resolution (say 300). It doesn't want automatic scaling by the toolkit for that resolution, it wants scaling based on these 300dpi images for higher resolution. It creates its print shell inside using the name "printHiRes" and adds the following in its resource file:</p>
  </dd>

</dl>

<pre>
    app.printHiRes.defaultPixmapResolution:300
    ! icon300.xpm is 120x120 pixels
    app.printHiRes*form.lab.labelPixmap:icon300.xpm
    ! 120x120 pixels on the paper (no scaling)
</pre>
<p>This way a printer resolution of 600 will result in a scale of a 300 dpi image by 2 (dpi=600 divided by base=300), while a printer resolution of 150 (using default print shell name "print") will use the 100 dpi icon scaled by 1.5 (dpi=150 divided by default base=100).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO XmPrintShell&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/XmPrintSetup.3.html"><strong>XmPrintSetup</strong>(3)</a>, <a href="../man3/XmRedisplayWidget.3.html"><strong>XmRedisplayWidget</strong>(3)</a>, <a href="../man3/XmPrintToFile.3.html"><strong>XmPrintToFile</strong>(3)</a>, <a href="../man3/XmPrintPopupPDM.3.html"><strong>XmPrintPopupPDM</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XmPrintSetup.3.html"><span aria-hidden="true">&larr;</span> XmPrintSetup.3: Xmprintsetup  setup and create a print shell widget</a></li>
   <li class="next"><a href="XmPrintToFile.3.html">XmPrintToFile.3: Xmprinttofile  retrieves and saves data that would normally be printed by the x print server. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
