<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test::Assertions: A simple set of building blocks for both unit and runtime testing</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A simple set of building blocks for both unit and runtime testing">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Test::Assertions (3pm) manual">
  <meta name="twitter:description" content="A simple set of building blocks for both unit and runtime testing">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtest-assertions-perl-Test::Assertions-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Test::Assertions.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Test::Assertions (3pm) manual" />
  <meta property="og:description" content="A simple set of building blocks for both unit and runtime testing" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtest-assertions-perl-Test::Assertions-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Test::Assertions<small> (3pm)</small></h1>
        <p class="lead">A simple set of building blocks for both unit and runtime testing</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::Assertions.3pm.html">
      <span itemprop="name">Test::Assertions: A simple set of building blocks for both unit and runtime testing</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtest-assertions-perl/">
      <span itemprop="name">libtest-assertions-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::Assertions.3pm.html">
      <span itemprop="name">Test::Assertions: A simple set of building blocks for both unit and runtime testing</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
        #ASSERT does nothing
        use Test::Assertions;

        #ASSERT warns "Assertion failure"...
        use Test::Assertions qw(warn);

        #ASSERT dies with "Assertion failure"...
        use Test::Assertions qw(die);

        #ASSERT warns "Assertion failure"... with stack trace
        use Test::Assertions qw(cluck);

        #ASSERT dies with "Assertion failure"... with stack trace
        use Test::Assertions qw(confess);

        #ASSERT prints ok/not ok
        use Test::Assertions qw(test);

        #Will cause an assertion failure
        ASSERT(1 == 0);

        #Optional message
        ASSERT(0 == 1, "daft");

        #Checks if coderef dies
        ASSERT(
                DIED( sub {die()} )
        );

        #Check if perl compiles OK
        ASSERT(
                COMPILES(&apos;program.pl&apos;)
        );

        #Deep comparisons
        ASSERT(
                EQUAL(&#92;@a, &#92;@b),
                "lists of widgets match"        # an optional message
        );
        ASSERT(
                EQUAL(&#92;%a, &#92;%b)
        );

        #Compare to a canned value
        ASSERT(
                EQUALS_FILE($foo, &apos;bar.dat&apos;),
                "value matched stored value"
        );

        #Compare to a canned value (regex match using file contents as regex)
        ASSERT(
                MATCHES_FILE($foo, &apos;bar.regex&apos;)
        );

        #Compare file contents
        ASSERT(
                FILES_EQUAL(&apos;foo.dat&apos;, &apos;bar.dat&apos;)
        );

        #returns &apos;not ok for Foo::Bar Tests (1 errors in 3 tests)&apos;
        ASSESS(
                 [&apos;ok 1&apos;, &apos;not ok 2&apos;, &apos;A comment&apos;, &apos;ok 3&apos;], &apos;Foo::Bar Tests&apos;, 0
        );

        #Collate results from another test script
        ASSESS_FILE("test.pl");

        #File routines
        $success = WRITE_FILE(&apos;bar.dat&apos;, &apos;hello world&apos;);
        ASSERT( WRITE_FILE(&apos;bar.dat&apos;, &apos;hello world&apos;), &apos;file was written&apos;);
        $string = READ_FILE(&apos;example.out&apos;);
        ASSERT( READ_FILE(&apos;example.out&apos;), &apos;file has content&apos; );
</pre>
<p>The helper routines don't need to be used inside \s-1<em>ASSERT\s0()</em>:</p><p>        if ( EQUALS_FILE($string, $filename) ) {                 print "File hasn&apos;t changed - skipping&#92;n";         } else {                 my $rc = run_complex_process($string);                 print "File changed - string was reprocessed with result &apos;$rc&apos;&#92;n";         }</p><p>        ($boolean, $output) = COMPILES(&apos;file.pl&apos;);         # or...         my $string;         ($boolean, $standard_output) = COMPILES(&apos;file.pl&apos;, 1, &#92;$string);         # $string now contains standard error, separate from $standard_output</p><p>In test mode:</p><p>        use Test::Assertions qw(test);         plan tests =&gt; 4;         plan tests;                                     #will attempt to deduce the number         only (1,2);                                     #Only report ok/not ok for these tests         ignore 2;                                       #Skip this test</p><p>        #In test/ok mode...         use Test::Assertions qw(test/ok);         ok(1);                                          #synonym for ASSERT</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Test::Assertions provides a convenient set of tools for constructing tests, such as unit tests or run-time assertion checks (like C's \s-1ASSERT\s0 macro). Unlike some of the Test:: modules available on \s-1CPAN\s0, Test::Assertions is not limited to unit test scripts; for example it can be used to check output is as expected within a benchmarking script. When it is used for unit tests, it generates output in the standard form for \s-1CPAN\s0 unit testing (under Test::Harness).</p><p>The package's import method is used to control the behaviour of \s-1ASSERT:\s0 whether it dies, warns, prints 'ok'/'not ok', or does nothing.</p><p>In 'test' mode the script also exports <em>plan()</em>, <em>only()</em> and <em>ignore()</em> functions. In 'test/ok' mode an <em>ok()</em> function is also exported for compatibility with Test/Test::Harness. The plan function attempts to count the number of tests if it isn't told a number (this works fine in simple test scripts but not in loops/subroutines). In either mode, a warning will be emitted if the planned number of tests is not the same as the number of tests actually run, e.g.</p><p>        # Looks like you planned 2 tests but actually ran 1.</p><h3>\s-1METHODS\s0</h3>
<p>Specify the number of tests to expect. If $number_of_tests isn't supplied, \s-1ASSERTION\s0 tries to deduce the number itself by parsing the calling script and counting the number of calls to \s-1ASSERT\s0. It also returns the number of tests, should you wish to make use of that figure at some point. In 'test' and 'test/ok' mode a warning will be emitted if the actual number of tests does not match the number planned, similar to Test::More.</p>
<dl class='dl-vertical'>
  <dt>
    only(@test_numbers)
  </dt>
  <dd>
    <p>Only display the results of these tests</p>
  </dd>
  <dt>
    ignore(@test_numbers)
  </dt>
  <dd>
    <p>Don't display the results of these tests The workhorse function.  Behaviour depends on how the module was imported. $comment is optional.</p>
  </dd>
  <dt>
    \s-1ASSESS\s0(@result_strings)
  </dt>
  <dd>
    <p>Collate the results from a set of tests. In a scalar context returns a result string starting with \*(L"ok\*(R" or \*(L"not ok\*(R"; in a list context returns 1=pass or 0=fail, followed by a description.  ($bool, $desc) = ASSESS(@args) is equivalent to  ($bool, $desc) = INTERPRET(scalar ASSESS(@args))  $verbose is an optional boolean  default timeout is 60 seconds (0=never timeout) In a scalar context returns a result string; in a list context returns 1=pass or 0=fail, followed by a description. The timeout uses <em>alarm()</em>, but has no effect on platforms which do not implement <em>alarm()</em>. Inteprets a result string.  $bool indicates 1=pass/0=fail; $desc is an optional description. Deep comparison of 2 data structures (i.e. references to some kind of structure) or scalars. Compares a string with a canned value in a file. Compares a value with a regex that is read from a file. The regex has the '^' anchor prepended and the '$' anchor appended, after being read in from the file. Handy if you have random numbers or dates in your output. Test if 2 files' contents are identical Test if the coderef died Test if the perl code in $filename compiles \s-1OK\s0, like perl -c. If $strict is true, tests with the options -Mstrict -w. In scalar context it returns 1 if the code compiled, 0 otherwise. In list context it returns the same boolean, followed by the output (that is, standard output and standard error <strong>combined</strong>) of the syntax check. If $scalar_reference is supplied and is a scalar reference then the standard output and standard error of the syntax check subprocess will be captured <strong>separately</strong>. Standard error will be put into this scalar - IO::CaptureOutput is loaded on demand to do this - and standard output will be returned as described above. Reads the specified file and returns the contents. Returns undef if file cannot be read. Writes the given contents to the specified file. Returns undef if file cannot be written.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OVERHEAD</h2>
        <div class="sectioncontent">
<p>When Test::Assertions is imported with no arguments, \s-1ASSERT\s0 is aliased to an empty coderef. If this is still too much runtime overhead for you, you can use a constant to optimise out \s-1ASSERT\s0 statements at compile time. See the section on runtime testing in Test::Assertions::Manual for a discussion of overheads, some examples and some benchmark results.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPENDENCIES</h2>
        <div class="sectioncontent">
<p>The following modules are loaded on demand:</p><p> Carp  File::Spec  Test::More  File::Compare  IO::CaptureOutput</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED MODULES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    Test and Test::Simple
  </dt>
  <dd>
    <p>Minimal unit testing modules</p>
  </dd>
  <dt>
    Test::More
  </dt>
  <dd>
    <p>Richer unit testing toolkit compatible with Test and Test::Simple</p>
  </dd>
  <dt>
    Carp::Assert
  </dt>
  <dd>
    <p>Runtime testing toolkit</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<p>        - Declare ASSERT() with :assertions attribute in versions of perl &gt;= 5.9           so it can be optimised away at runtime. It should be possible to declare           the attribute conditionally in a BEGIN block (with eval) for backwards           compatibility</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Test::Assertions&hellip;</h2>
        <div class="sectioncontent">
<p>Test::Assertions::Manual - A guide to using Test::Assertions</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>$Revision: 1.54 $ on $Date: 2006/08/07 10:44:42 $ by $Author: simonf $</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>John Alden with additions from Piers Kent and Simon Flack &lt;cpan _at_ bbc _dot_ co _dot_ uk&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>(c) \s-1BBC\s0 2005. This program is free software; you can redistribute it and/or modify it under the \s-1GNU\s0 \s-1GPL\s0.</p><p>See the file \s-1COPYING\s0 in this distribution, or http://www.gnu.org/licenses/gpl.txt</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Term::Visual.3pm.html"><span aria-hidden="true">&larr;</span> Term::Visual.3pm: Split-terminal user interface</a></li>
   <li class="next"><a href="Test::Assertions::Manual.3pm.html">Test::Assertions::Manual.3pm: A guide to using test::assertions <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
