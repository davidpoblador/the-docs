<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>File::Rsync: Perl module interface to rsync(1) http://rsync.samba.org/rsync/</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Perl module interface to rsync(1) http://rsync.samba.org/rsync/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="File::Rsync (3pm) manual">
  <meta name="twitter:description" content="Perl module interface to rsync(1) http://rsync.samba.org/rsync/">
  <meta name="twitter:image" content="https://www.carta.tech/images/libfile-rsync-perl-File::Rsync-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/File::Rsync.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="File::Rsync (3pm) manual" />
  <meta property="og:description" content="Perl module interface to rsync(1) http://rsync.samba.org/rsync/" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libfile-rsync-perl-File::Rsync-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">File::Rsync<small> (3pm)</small></h1>
        <p class="lead">Perl module interface to rsync(1) http://rsync.samba.org/rsync/</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/File::Rsync.3pm.html">
      <span itemprop="name">File::Rsync: Perl module interface to rsync(1) http://rsync.samba.org/rsync/</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libfile-rsync-perl/">
      <span itemprop="name">libfile-rsync-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/File::Rsync.3pm.html">
      <span itemprop="name">File::Rsync: Perl module interface to rsync(1) http://rsync.samba.org/rsync/</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>use File::Rsync;</p><p>$obj = File::Rsync-&gt;new( { archive =&gt; 1, compress =&gt; 1,</p>
<pre>
         rsh =&gt; '/usr/local/bin/ssh',
         'rsync-path' =&gt; '/usr/local/bin/rsync' } );
</pre>
<p>$obj-&gt;exec( { src =&gt; 'localdir', dest =&gt; 'rhost:remdir' } )</p>
<pre>
         or warn \*(L"rsync failed&#92;n\*(R";
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Perl Convenience wrapper for the <em>rsync</em>\|(1) program.  Written for <em>rsync-2.3.2</em> and updated for <em>rsync-2.6.0</em> but should perform properly with most recent versions.</p>
<dl class='dl-vertical'>
  <dt>
    File::Rsync::new
  </dt>
  <dd>
    <p>$obj = <em>new</em> File::Rsync;</p>
<pre>
   or
</pre>
<p>$obj = File::Rsync-&gt;<em>new</em>;    or $obj = File::Rsync-&gt;new(@options);    or $obj = File::Rsync-&gt;new(&#92;%options); Create a <em>File::Rsync</em> object.  Any options passed at creation are stored in the object as defaults for all future <em>exec</em> calls on that object. Options may be passed in the form of a hash and are the same as the long options in <em></em><em>rsync</em><em>\|(1)</em> with the leading double-dash removed.  An additional option of <strong>path-to-rsync</strong> also exists which can be used to override the hardcoded path to the rsync binary that is defined when the module is installed, and <strong>debug</strong> which causes the module methods to print some debugging information to \s-1STDERR\s0.  There are also 2 options to wrap the source and/or destination paths in double-quotes.  They are <strong>quote-src</strong> and <strong>quote-dst</strong>, and may be useful in protecting the paths from shell expansion (particularly useful for paths containing spaces).  The <strong>outfun</strong> and <strong>errfun</strong> options take a function reference.  The function is called once for each line of output from the <em>rsync</em> program with the output line passed in as the first argument, the second arg is either 'out' or 'err' depending on the source.  This makes it possible to use the same function for both and still determine where the output came from. Options may also be passed as a reference to a hash.  The <strong>exclude</strong> option needs an array reference as its value, since there cannot be duplicate keys in a hash.  There is an equivalent <strong>include</strong> option.  Only an <strong>exclude</strong> or <strong>include</strong> option should be used, not both.  Use the '+ ' or '- ' prefix trick to put includes in an <strong>exclude</strong> array, or to put excludes in an <strong>include</strong> array (see <em></em><em>rsync</em><em>\|(1)</em> for details). Include/exclude options form an ordered list.  The order must be retained for proper execution.  There are also <strong>source</strong> and <strong>dest</strong> keys.  The key <strong>src</strong> is also accepted as an equivalent to <strong>source</strong>, and <strong>dst</strong> or <strong>destination</strong> may be used as equivalents to <strong>dest</strong>.  The <strong>source</strong> option may take a scalar or an array reference.  If the source is the local system then multiple <strong>source</strong> paths are allowed.  In this case an array reference should be used.  There is also a method for passing multiple source paths to a remote system.  This method may be triggered in this module by passing the remote hostname to the <strong>srchost</strong> key and passing an array reference to the <strong>source</strong> key.  If the source host is being accessed via an Rsync server, the remote hostname should have a single trailing colon on the name.  When rsync is called, the <strong>srchost</strong> value and the values in the <strong>source</strong> array will be joined with a colon resulting in the double-colon required for server access.  The <strong>dest</strong> key only takes a scalar since <em>rsync</em> only accepts a single destination path. Version 2.6.0 of <em></em><em>rsync</em><em>\|(1)</em> provides a new <strong>files-from</strong> option along with a few other supporting options (<strong>from0</strong>, <strong>no-relative</strong>, and <strong>no-implied-dirs</strong>).  To support this wonderful new option at the level it deserves, this module now has an additional parameter.  If <strong>files-from</strong> is set to '-' (meaning read from stdin) you can define <strong>infun</strong> to be a reference to a function that prints your file list to the default file handle. The output from the function is attached to stdin of the rsync call during exec.  If <strong>infun</strong> is defined it will be called regardless of the value of <strong>files-from</strong>, so it can provide any data expected on stdin, but keep in mind that stdin will not be attached to a tty so it is not very useful for sending passwords (see the <em></em><em>rsync</em><em>\|(1)</em> and <em></em><em>ssh</em><em>\|(1)</em> man pages for ways to handle authentication).  The <em></em><em>rsync</em><em>\|(1)</em> man page has a more complete description of <strong>files-from</strong>.  Also see File::Find for ideas to use with <strong>files-from</strong> and <strong>infun</strong>.  The <strong>infun</strong> option may also be used with the <strong>include-from</strong> or <strong>exclude-from</strong> settings, but this is generally more clumsy than using the <strong>include</strong> or <strong>exclude</strong> arrays. Version 2.6.3 of <em></em><em>rsync</em><em>\|(1)</em> provides new options <strong>partial-dir</strong>, <strong>checksum-seed</strong>, <strong>keep-dirlinks</strong>, <strong>inplace</strong>, <strong>ipv4</strong>, and <strong>ipv6</strong>. Version 2.6.4 of <em></em><em>rsync</em><em>\|(1)</em> provides new options <strong>del</strong>, <strong>delete-before</strong> <strong>delete-during</strong>, <strong>delay-updates</strong>, <strong>dirs</strong>, <strong>filter</strong>, <strong>fuzzy</strong>, <strong>itemize-changes</strong>, <strong>list-only</strong>, <strong>omit-dir-times</strong>, <strong>remove-sent-files</strong>, <strong>max-size</strong>, and <strong>protocol</strong>. Version 0.38 of this module also adds support for the <strong>acls</strong> option that is not part of <em></em><em>rsync</em><em>\|(1)</em> unless the patch has been applied, but people do use it.  It also includes a new <strong>literal</strong> option that takes an array reference similar to <strong>include</strong>, <strong>exclude</strong>, and <strong>filter</strong>.  Any arguments in the array are passed as literal arguments to rsync, and are passed first.  They should have the proper single or double hyphen prefixes and the elements should be split up the way you want them passed to exec.  The purpose of this option is to allow the use of arbitrary options added by patches, and/or to allow the use of new options in rsync without needing an imediate update to the module in addtition to <em></em><em>rsync</em><em>\|(1)</em> itself.</p>
  </dd>
  <dt>
    File::Rsync::defopts
  </dt>
  <dd>
    <p>$obj-&gt;defopts(@options);    or $obj-&gt;defopts(&#92;%options); Set default options for future exec calls for the object.  See <em></em><em>rsync</em><em>\|(1)</em> for a complete list of valid options.  This is really the internal method that <em>new</em> calls but you can use it too.  The <strong>verbose</strong> and <strong>quiet</strong> options to rsync are actually counters.  When assigning the perl hash-style options you may specify the counter value directly and the module will pass the proper number of options to rsync.</p>
  </dd>
  <dt>
    File::Rsync::getcmd
  </dt>
  <dd>
    <p>my $cmd = $obj-&gt;getcmd(@options);    or my $cmd = $obj-&gt;getcmd(&#92;%options);    or my ($cmd, $infun, $outfun, $errfun, $debug) = $obj-&gt;getcmd(&#92;%options); <em>getcmd</em> returns a reference to an array containing the real rsync command that would be called if the exec function were called.  The last example above includes a reference to the optional stdin function, stdout function, stderr function, and the debug setting.  This is the form used by the <em>exec</em> method to get the extra parameters it needs to do its job.  The function is exposed to allow a user-defined exec function to be used, or for debugging purposes.</p>
  </dd>
  <dt>
    File::Rsync::exec
  </dt>
  <dd>
    <p>$obj-&gt;exec(@options) or warn \*(L"rsync failed&#92;n\*(R";    or $obj-&gt;exec(&#92;%options) or warn \*(L"rsync failed&#92;n\*(R"; This is the method that does the real work.  Any options passed to this routine are appended to any pre-set options and are not saved.  They effect the current execution of <em>rsync</em> only.  In the case of conflicts, the options passed directly to <em>exec</em> take precedence.  It returns <strong>1</strong> if the return status was zero (or true), if the <em>rsync</em> return status was non-zero it returns <strong>0</strong> and stores the return status.  You can examine the return status from <em>rsync</em> and any output to stdout and stderr with the methods listed below.</p>
  </dd>
  <dt>
    File::Rsync::list
  </dt>
  <dd>
    <p>$out = $obj-&gt;list(@options);    or $out = $obj-&gt;list(&#92;%options);    or @out = $obj-&gt;list(&#92;%options); This is a wrapper for <em>exec</em> called without a destination to get a listing. It returns the output of stdout like the <em>out</em> function below.  When no destination is given rsync returns the equivalent of 'ls -l' or 'ls -lr' modified by any include/exclude/filter parameters you specify.  This is useful for manual comparison without actual changes to the destination or for comparing against another listing taken at a different point in time. (As of rsync version 2.6.4-pre1 this can also be accomplished with the 'list-only' option regardless of whether a destination is given.)</p>
  </dd>
  <dt>
    File::Rsync::status
  </dt>
  <dd>
    <p>$rval = $obj-&gt;<em>status</em>; Returns the status from last <em>exec</em> call right shifted 8 bits.</p>
  </dd>
  <dt>
    File::Rsync::realstatus
  </dt>
  <dd>
    <p>$rval = $obj-&gt;<em>realstatus</em>; Returns the real status from last <em>exec</em> call (not right shifted).</p>
  </dd>
  <dt>
    File::Rsync::err
  </dt>
  <dd>
    <p>$aref = $obj-&gt;<em>err</em>; In a scalar context this method will return a reference to an array containing all output to stderr from the last <em>exec</em> call, or zero (false) if there was no output.  In an array context it will return an array of all output to stderr or an empty list.  The scalar context can be used to efficiently test for the existance of output.  <em>rsync</em> sends all messages from the remote <em>rsync</em> process and any error messages to stderr.  This method's purpose is to make it easier for you to parse that output for appropriate information.</p>
  </dd>
  <dt>
    File::Rsync::out
  </dt>
  <dd>
    <p>$aref = $obj-&gt;<em>out</em>; Similar to the <em>err</em> method, in a scalar context it returns a reference to an array containing all output to stdout from the last <em>exec</em> call, or zero (false) if there was no output.  In an array context it returns an array of all output to stdout or an empty list.  <em>rsync</em> sends all informational messages (<strong>verbose</strong> option) from the local <em>rsync</em> process to stdout.</p>
  </dd>
  <dt>
    File::Rsync::lastcmd
  </dt>
  <dd>
    <p>$aref = $obj-&gt;<em>lastcmd</em>; Returns the actual system command used by the last <em>exec</em> call, or '' before any calls to <em>exec</em> for the object.  This can be useful in the case of an error condition to give a more informative message or for debugging purposes. In an array context it return an array of args as passed to the system, in a scalar context it returns a space-seperated string.  See <em>getcmd</em> for access to the command before execution.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Lee Eakin &lt;leakin@dfw.nostrum.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Credits</h2>
        <div class="sectioncontent">
<p>The following people have contributed ideas, bug fixes, code or helped out by reporting or tracking down bugs in order to improve this module since it's initial release.  See the Changelog for details:</p><p>Greg Ward</p><p>Boris Goldowsky</p><p>James Mello</p><p>Andreas Koenig</p><p>Joe Smith</p><p>Jonathan Pelletier</p><p>Heiko Jansen</p><p>Tong Zhu</p><p>Paul Egan</p><p>Ronald J Kimball</p><p>James \s-1CE\s0 Johnson</p><p>Bill Uhl</p><p>Peter teStrake</p><p>Harald Flaucher</p><p>Simon Myers</p><p>Gavin Carr</p><p>Petya Kohts</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Inspiration and Assistance</h2>
        <div class="sectioncontent">
<p>Gerard Hickey                             \*(C`PGP::Pipe\*(C'</p><p>Russ Allbery                              \*(C`PGP::Sign\*(C'</p><p>Graham Barr                               \*(C`Net::*\*(C'</p><p>Andrew Tridgell and Paul Mackerras        <em>rsync</em>\|(1)</p><p>John Steele   &lt;steele@nostrum.com&gt;</p><p>Philip Kizer  &lt;pckizer@nostrum.com&gt;</p><p>Larry Wall                                <em>perl</em>\|(1)</p><p>I borrowed many clues on wrapping an external program from the \s-1PGP\s0 modules, and I would not have had such a useful tool to wrap except for the great work of the <strong>rsync</strong> authors.  Thanks also to Graham Barr, the author of the libnet modules and many others, for looking over this code.  Of course I must mention the other half of my brain, John Steele, and his good friend Philip Kizer for finding <strong>rsync</strong> and bringing it to my attention.  And I would not have been able to enjoy writing useful tools if not for the creator of the <strong>perl</strong> language.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Copyrights</h2>
        <div class="sectioncontent">
<p>      Copyright (c) 1999-2005 Lee Eakin.  All rights reserved.</p><p>      This program is free software; you can redistribute it and/or modify       it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="File::Remove.3pm.html"><span aria-hidden="true">&larr;</span> File::Remove.3pm: Remove files and directories</a></li>
   <li class="next"><a href="File::Save::Home.3pm.html">File::Save::Home.3pm: Place file safely under user home directory <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
