<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lfc_readdirg: Read lfc directory opened by lfc_opendir in the name server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Read lfc directory opened by lfc_opendir in the name server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lfc_readdirg (3) manual">
  <meta name="twitter:description" content="Read lfc directory opened by lfc_opendir in the name server">
  <meta name="twitter:image" content="https://www.carta.tech/images/liblfc-dev-lfc_readdirg-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/lfc_readdirg.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lfc_readdirg (3) manual" />
  <meta property="og:description" content="Read lfc directory opened by lfc_opendir in the name server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liblfc-dev-lfc_readdirg-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lfc_readdirg<small> (3)</small></h1>
        <p class="lead">Read lfc directory opened by lfc_opendir in the name server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/lfc_readdirg.3.html">
      <span itemprop="name">lfc_readdirg: Read lfc directory opened by lfc_opendir in the name server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liblfc-dev/">
      <span itemprop="name">liblfc-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/lfc_readdirg.3.html">
      <span itemprop="name">lfc_readdirg: Read lfc directory opened by lfc_opendir in the name server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;sys/types.h&gt;</strong></p><p><strong>#include "lfc_api.h"</strong></p><p><strong>struct lfc_direnstatg *lfc_readdirg (lfc_DIR *</strong><em>dirp</em><strong>)</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>lfc_readdirg</strong> reads the LFC directory opened by <strong>lfc_opendir</strong> in the name server. This routine returns a pointer to a structure containing the current directory entry including the GUID associated.</p>
<pre>
struct lfc_direnstatg {
	u_signed64	fileid;
	char		guid[CA_MAXGUIDLEN+1];
	mode_t		filemode;
	int		nlink;		/* number of files in a directory */
	uid_t		uid;
	gid_t		gid;
	u_signed64	filesize;
	time_t		atime;		/* last access to file */
	time_t		mtime;		/* last file modification */
	time_t		ctime;		/* last metadata modification */
	short		fileclass;	/* not used */
	char		status;		/* ' ' --&gt; online, 'm' --&gt; migrated */
	char		csumtype[3];	/* "CS", "AD" or "MD" */
	char		csumvalue[33];
	unsigned short	d_reclen;	/* length of this entry */
	char		d_name[1];	/* basename in variable length */
};
</pre>
<p><strong>lfc_readdirg</strong> caches a variable number of such entries, depending on the filename size, to minimize the number of requests to the name server.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>dirp</em></p>
  </dt>
  <dd>
    <p>specifies the pointer value returned by <strong>lfc_opendir</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>This routine returns a pointer to a structure containing the current directory entry if the operation was successful or NULL if the end of the directory was reached or if the operation failed. When the end of the directory is encountered, serrno is not changed. If the operation failed, <strong>serrno</strong> is set appropriately.</p><p>As lfc_readdirg returns a null pointer both at the end of the directory and on error, an application wishing to check for error situations should set <strong>serrno</strong> to 0, then call lfc_readdirg, then check <strong>serrno</strong> and if it is non-zero, assume an error has occurred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>EBADF</strong></p>
  </dt>
  <dd>
    <p>File descriptor in DIR structure is invalid.</p>
  </dd>
  <dt>
    <p><strong>EFAULT</strong></p>
  </dt>
  <dd>
    <p><em>dirp</em> is a NULL pointer.</p>
  </dd>
  <dt>
    <p><strong>SECOMERR</strong></p>
  </dt>
  <dd>
    <p>Communication error.</p>
  </dd>
  <dt>
    <p><strong>ENSNACT</strong></p>
  </dt>
  <dd>
    <p>Name server is not running or is being shutdown.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lfc_readdirg&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/lfc_closedir.3.html"><strong>lfc_closedir</strong>(3)</a></strong>, <a href="../man3/lfc_opendirg.3.html"><strong>lfc_opendirg</strong>(3)</a></strong>, <a href="../man3/lfc_rewinddir.3.html"><strong>lfc_rewinddir</strong>(3)</a></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>LCG Grid Deployment</strong> Team</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lfc_readdirc.3.html"><span aria-hidden="true">&larr;</span> lfc_readdirc.3: Read lfc directory opened by lfc_opendir in the name server</a></li>
   <li class="next"><a href="lfc_readdirxc.3.html">lfc_readdirxc.3: Read lfc directory opened by lfc_opendir in the name server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
