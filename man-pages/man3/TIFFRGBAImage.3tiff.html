<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TIFFRGBAImage: Read and decode an image into a raster</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Read and decode an image into a raster">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="TIFFRGBAImage (3tiff) manual">
  <meta name="twitter:description" content="Read and decode an image into a raster">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtiff5-dev-TIFFRGBAImage-3tiff.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3tiff/TIFFRGBAImage.3tiff.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TIFFRGBAImage (3tiff) manual" />
  <meta property="og:description" content="Read and decode an image into a raster" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtiff5-dev-TIFFRGBAImage-3tiff.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">TIFFRGBAImage<small> (3tiff)</small></h1>
        <p class="lead">Read and decode an image into a raster</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3tiff/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3tiff/TIFFRGBAImage.3tiff.html">
      <span itemprop="name">TIFFRGBAImage: Read and decode an image into a raster</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtiff5-dev/">
      <span itemprop="name">libtiff5-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3tiff/TIFFRGBAImage.3tiff.html">
      <span itemprop="name">TIFFRGBAImage: Read and decode an image into a raster</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;tiffio.h&gt;</strong></p><p><strong>typedef unsigned char TIFFRGBValue;</strong> <strong>typedef struct _TIFFRGBAImage TIFFRGBAImage;</strong></p><p><strong>int TIFFRGBAImageOK(TIFF *</strong><em>tif</em><strong>, char </strong><em>emsg[1024]</em><strong>)</strong></p><p><strong>int TIFFRGBAImageBegin(TIFFRGBAImage *</strong><em>img</em><strong>, TIFF* </strong><em>tif</em><strong>, int </strong><em>stopOnError</em><strong>, char </strong><em>emsg[1024]</em><strong>)</strong></p><p><strong>int TIFFRGBAImageGet(TIFFRGBAImage *</strong><em>img</em><strong>, uint32* </strong><em>raster</em><strong>, uint32 </strong><em>width</em><strong> , uint32 </strong><em>height</em><strong>)</strong></p><p><strong>void TIFFRGBAImageEnd(TIFFRGBAImage *</strong><em>img</em><strong>)</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The routines described here provide a high-level interface through which <small>TIFF</small> images may be read into memory. Images may be strip- or tile-based and have a variety of different characteristics: bits/sample, samples/pixel, photometric, etc. Decoding state is encapsulated in a <em>TIFFRGBAImage</em> structure making it possible to capture state for multiple images and quickly switch between them. The target raster format can be customized to a particular application's needs by installing custom routines that manipulate image data according to application requirements.</p><p>The default usage for these routines is: check if an image can be processed using <em>TIFFRGBAImageOK</em>, construct a decoder state block using <em>TIFFRGBAImageBegin</em>, read and decode an image into a target raster using <em>TIFFRGBAImageGet</em>, and then release resources using <em>TIFFRGBAImageEnd</em>. <em>TIFFRGBAImageGet</em> can be called multiple times to decode an image using different state parameters. If multiple images are to be displayed and there is not enough space for each of the decoded rasters, multiple state blocks can be managed and then calls can be made to <em>TIFFRGBAImageGet</em> as needed to display an image.</p><p>The generated raster is assumed to be an array of <em>width</em> times <em>height</em> 32-bit entries, where <em>width</em> must be less than or equal to the width of the image ( .I height may be any non-zero size). If the raster dimensions are smaller than the image, the image data is cropped to the raster bounds. If the raster height is greater than that of the image, then the image data are placed in the lower part of the raster. (Note that the raster is assume to be organized such that the pixel at location (<em>x</em>,<em>y</em>) is <em>raster</em>[<em>y</em>*<em>width</em>+<em>x</em>]; with the raster origin in the <strong>lower-left</strong> hand corner.)</p><p>Raster pixels are 8-bit packed red, green, blue, alpha samples. The macros <em>TIFFGetR</em>, <em>TIFFGetG</em>, <em>TIFFGetB</em>, and <em>TIFFGetA</em> should be used to access individual samples. Images without Associated Alpha matting information have a constant Alpha of 1.0 (255).</p><p><em>TIFFRGBAImageGet</em> converts non-8-bit images by scaling sample values. Palette, grayscale, bilevel, <small>CMYK , and YCbCr images are converted to</small> <small>RGB</small> transparently. Raster pixels are returned uncorrected by any colorimetry information present in the directory.</p><p>The parameter <em>stopOnError</em> specifies how to act if an error is encountered while reading the image. If <em>stopOnError</em> is non-zero, then an error will terminate the operation; otherwise <em>TIFFRGBAImageGet</em> will continue processing data until all the possible data in the image have been requested.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ALTERNATE RASTER FORMATS</h2>
        <div class="sectioncontent">
<p>To use the core support for reading and processing <small>TIFF</small> images, but write the resulting raster data in a different format one need only override the ``<em>put methods</em>'' used to store raster data. These methods are are defined in the <em>TIFFRGBAImage</em> structure and initially setup by <em>TIFFRGBAImageBegin</em> to point to routines that pack raster data in the default <small>ABGR</small> pixel format. Two different routines are used according to the physical organization of the image data in the file: <em>PlanarConfiguration</em>=1 (packed samples), and <em>PlanarConfiguration</em>=2 (separated samples). Note that this mechanism can be used to transform the data before storing it in the raster. For example one can convert data to colormap indices for display on a colormap display.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIMULTANEOUS RASTER STORE AND DISPLAY</h2>
        <div class="sectioncontent">
<p>It is simple to display an image as it is being read into memory by overriding the put methods as described above for supporting alternate raster formats. Simply keep a reference to the default put methods setup by <em>TIFFRGBAImageBegin</em> and then invoke them before or after each display operation. For example, the <a href="../man1/tiffgt.1.html"><strong>tiffgt</strong>(1)</a> utility uses the following put method to update the display as the raster is being filled:</p>
<pre>
static void
putContigAndDraw(TIFFRGBAImage* img, uint32* raster,
    uint32 x, uint32 y, uint32 w, uint32 h,
    int32 fromskew, int32 toskew,
    unsigned char* cp)
{
    (*putContig)(img, raster, x, y, w, h, fromskew, toskew, cp);
    if (x+w == width) {
	w = width;
	if (img-&gt;orientation == ORIENTATION_TOPLEFT)
	    lrectwrite(0, y-(h-1), w-1, y, raster-x-(h-1)*w);
	else
	    lrectwrite(0, y, w-1, y+h-1, raster);
    }
}
</pre>
<p>(the original routine provided by the library is saved in the variable <em>putContig</em>.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTING ADDITIONAL TIFF FORMATS</h2>
        <div class="sectioncontent">
<p>The <em>TIFFRGBAImage</em> routines support the most commonly encountered flavors of <small>TIFF.</small> It is possible to extend this support by overriding the ``<em>get method</em>'' invoked by <em>TIFFRGBAImageGet</em> to read <small>TIFF</small> image data. Details of doing this are a bit involved, it is best to make a copy of an existing get method and modify it to suit the needs of an application.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Samples must be either 1, 2, 4, 8, or 16 bits. Colorimetric samples/pixel must be either 1, 3, or 4 (i.e. <em>SamplesPerPixel</em> minus <em>ExtraSamples</em>).</p><p>Palette image colormaps that appear to be incorrectly written as 8-bit values are automatically scaled to 16-bits.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p>All routines return 1 if the operation was successful. Otherwise, 0 is returned if an error was encountered and <em>stopOnError</em> is zero.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>All error messages are directed to the <em>TIFFError</em>(3TIFF) routine.</p><p><strong>Sorry, can not handle %d-bit pictures</strong>. The image had <em>BitsPerSample</em> other than 1, 2, 4, 8, or 16.</p><p><strong>Sorry, can not handle %d-channel images</strong>. The image had <em>SamplesPerPixel</em> other than 1, 3, or 4.</p><p><strong>Missing needed "PhotometricInterpretation" tag</strong>. The image did not have a tag that describes how to display the data.</p><p><strong>No "PhotometricInterpretation" tag, assuming RGB</strong>. The image was missing a tag that describes how to display it, but because it has 3 or 4 samples/pixel, it is assumed to be <small>RGB.</small></p><p><strong>No "PhotometricInterpretation" tag, assuming min-is-black</strong>. The image was missing a tag that describes how to display it, but because it has 1 sample/pixel, it is assumed to be a grayscale or bilevel image.</p><p><strong>No space for photometric conversion table</strong>. There was insufficient memory for a table used to convert image samples to 8-bit <small>RGB.</small></p><p><strong>Missing required "Colormap" tag</strong>. A Palette image did not have a required <em>Colormap</em> tag.</p><p><strong>No space for tile buffer</strong>. There was insufficient memory to allocate an i/o buffer.</p><p><strong>No space for strip buffer</strong>. There was insufficient memory to allocate an i/o buffer.</p><p><strong>Can not handle format</strong>. The image has a format (combination of <em>BitsPerSample</em>, <em>SamplesPerPixel</em>, and <em>PhotometricInterpretation</em>) that can not be handled.</p><p><strong>No space for B&W mapping table</strong>. There was insufficient memory to allocate a table used to map grayscale data to <small>RGB.</small></p><p><strong>No space for Palette mapping table</strong>. There was insufficient memory to allocate a table used to map data to 8-bit <small>RGB.</small></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO TIFFRGBAImage&hellip;</h2>
        <div class="sectioncontent">
<p><strong>TIFFOpen</strong>(3TIFF), <strong>TIFFReadRGBAImage</strong>(3TIFF), <strong>TIFFReadRGBAImageOriented</strong>(3TIFF), <strong>TIFFReadRGBAStrip</strong>(3TIFF), <strong>TIFFReadRGBATile</strong>(3TIFF), <strong>libtiff</strong>(3TIFF)</p><p>Libtiff library home page: <strong>http://www.remotesensing.org/libtiff/</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="TIFFPrintDirectory.3tiff.html"><span aria-hidden="true">&larr;</span> TIFFPrintDirectory.3tiff: Print a description of a tiff directory</a></li>
   <li class="next"><a href="TIFFReadDirectory.3tiff.html">TIFFReadDirectory.3tiff: Get the contents of the next directory in an open tiff file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
