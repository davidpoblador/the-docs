<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>net_kernel: Erlang networking kernel</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Erlang networking kernel">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="net_kernel (3erl) manual">
  <meta name="twitter:description" content="Erlang networking kernel">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-net_kernel-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/net_kernel.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="net_kernel (3erl) manual" />
  <meta property="og:description" content="Erlang networking kernel" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-net_kernel-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">net_kernel<small> (3erl)</small></h1>
        <p class="lead">Erlang networking kernel</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/net_kernel.3erl.html">
      <span itemprop="name">net_kernel: Erlang networking kernel</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/net_kernel.3erl.html">
      <span itemprop="name">net_kernel: Erlang networking kernel</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The net kernel is a system process, registered as <em>net_kernel</em>, which must be running for distributed Erlang to work. The purpose of this process is to implement parts of the BIFs <em>spawn/4</em> and <em>spawn_link/4</em>, and to provide monitoring of the network.</p><p>An Erlang node is started using the command line flag <em>-name</em> or <em>-sname</em>:</p>
<pre>
$ erl -sname foobar
</pre>
<p>It is also possible to call <em>net_kernel:start([foobar])</em> directly from the normal Erlang shell prompt:</p>
<pre>
1&gt; net_kernel:start([foobar, shortnames]).
{ok,&lt;0.64.0&gt;}
(foobar@gringotts)2&gt;
</pre>
<p>If the node is started with the command line flag <em>-sname</em>, the node name will be <em>foobar@Host</em>, where <em>Host</em> is the short name of the host (not the fully qualified domain name). If started with the <em>-name</em> flag, <em>Host</em> is the fully qualified domain name. See <a href="../man1/erl.1.html"><strong>erl</strong>(1)</a></em>.</p><p>Normally, connections are established automatically when another node is referenced. This functionality can be disabled by setting the Kernel configuration parameter <em>dist_auto_connect</em> to <em>false</em>, see <a href="../man7/kernel.7.html"><strong>kernel</strong>(7)</a></strong>. In this case, connections must be established explicitly by calling <em>net_kernel:connect_node/1</em>.</p><p>Which nodes are allowed to communicate with each other is handled by the magic cookie system, see <strong>Distributed Erlang</strong> in the Erlang Reference Manual.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">

<pre>
<strong></strong>
allow(Nodes) -&gt; ok | error

</pre>
<p>Types:</p><p>Nodes = [node()]</p><p>Limits access to the specified set of nodes. Any access attempts made from (or to) nodes not in <em>Nodes</em> will be rejected.</p><p>Returns <em>error</em> if any element in <em>Nodes</em> is not an atom.</p>
<pre>
<strong></strong>
connect_node(Node) -&gt; boolean() | ignored

</pre>
<p>Types:</p><p>Node = node()</p><p>Establishes a connection to <em>Node</em>. Returns <em>true</em> if successful, <em>false</em> if not, and <em>ignored</em> if the local node is not alive.</p>
<pre>
<strong></strong>
monitor_nodes(Flag) -&gt; ok | Error

</pre>

<pre>
<strong></strong>
monitor_nodes(Flag, Options) -&gt; ok | Error

</pre>
<p>Types:</p><p>Flag = boolean()</p><p>Options = [Option]</p><p>Option = {node_type, NodeType} | nodedown_reason</p><p>NodeType = visible | hidden | all</p><p>Error = error | {error, term()}</p><p>The calling process subscribes or unsubscribes to node status change messages. A <em>nodeup</em> message is delivered to all subscribing process when a new node is connected, and a <em>nodedown</em> message is delivered when a node is disconnected.</p><p>If <em>Flag</em> is <em>true</em>, a new subscription is started. If <em>Flag</em> is <em>false</em>, all previous subscriptions -- started with the same <em>Options</em> -- are stopped. Two option lists are considered the same if they contain the same set of options.</p><p>As of <em>kernel</em> version 2.11.4, and <em>erts</em> version 5.5.4, the following is guaranteed:</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>nodeup</em> messages will be delivered before delivery of any message from the remote node passed through the newly established connection.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>nodedown</em> messages will not be delivered until all messages from the remote node that have been passed through the connection have been delivered.</p>
  </dd>

</dl>
<p>Note, that this is <em>not</em> guaranteed for <em>kernel</em> versions before 2.11.4.</p><p>As of <em>kernel</em> version 2.11.4 subscriptions can also be made before the <em>net_kernel</em> server has been started, i.e., <em>net_kernel:monitor_nodes/[1,2]</em> does not return <em>ignored</em>.</p><p>As of <em>kernel</em> version 2.13, and <em>erts</em> version 5.7, the following is guaranteed:</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>nodeup</em> messages will be delivered after the corresponding node appears in results from <em>erlang:nodes/X</em>.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>nodedown</em> messages will be delivered after the corresponding node has disappeared in results from <em>erlang:nodes/X</em>.</p>
  </dd>

</dl>
<p>Note, that this is <em>not</em> guaranteed for <em>kernel</em> versions before 2.13.</p><p>The format of the node status change messages depends on <em>Options</em>. If <em>Options</em> is [], which is the default, the format is:</p>
<pre>
{nodeup, Node} | {nodedown, Node}
  Node = node()
</pre>
<p>If <em>Options /= []</em>, the format is:</p>
<pre>
{nodeup, Node, InfoList} | {nodedown, Node, InfoList}
  Node = node()
  InfoList = [{Tag, Val}]
</pre>
<p><em>InfoList</em> is a list of tuples. Its contents depends on <em>Options</em>, see below.</p><p>Also, when <em>OptionList == []</em> only visible nodes, that is, nodes that appear in the result of <strong>nodes/0</strong>, are monitored.</p><p><em>Option</em> can be any of the following:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{node_type, NodeType}</em>: Currently valid values for <em>NodeType</em> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>visible</em>: Subscribe to node status change messages for visible nodes only. The tuple <em>{node_type, visible}</em> is included in <em>InfoList</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>hidden</em>: Subscribe to node status change messages for hidden nodes only. The tuple <em>{node_type, hidden}</em> is included in <em>InfoList</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>all</em>: Subscribe to node status change messages for both visible and hidden nodes. The tuple <em>{node_type, visible | hidden}</em> is included in <em>InfoList</em>.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>nodedown_reason</em>: The tuple <em>{nodedown_reason, Reason}</em> is included in <em>InfoList</em> in <em>nodedown</em> messages. <em>Reason</em> can be:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>connection_setup_failed</em>: The connection setup failed (after <em>nodeup</em> messages had been sent).</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>no_network</em>: No network available.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>net_kernel_terminated</em>: The <em>net_kernel</em> process terminated.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>shutdown</em>: Unspecified connection shutdown.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>connection_closed</em>: The connection was closed.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>disconnect</em>: The connection was disconnected (forced from the current node).</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>net_tick_timeout</em>: Net tick timeout.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>send_net_tick_failed</em>: Failed to send net tick over the connection.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>get_status_failed</em>: Status information retrieval from the <em>Port</em> holding the connection failed.</p>
  </dd>

</dl>

  </dd>

</dl>

<pre>
<strong></strong>
get_net_ticktime() -&gt; Res

</pre>
<p>Types:</p><p>Res = NetTicktime | {ongoing_change_to, NetTicktime} | ignored</p><p>NetTicktime = integer() &gt;= 1</p><p>Gets <em>net_ticktime</em> (see <a href="../man7/kernel.7.html"><strong>kernel</strong>(7)</a></strong>).</p><p>Currently defined return values (<em>Res</em>):</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>NetTicktime</em>: <em>net_ticktime</em> is <em>NetTicktime</em> seconds.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{ongoing_change_to, NetTicktime}</em>: <em>net_kernel</em> is currently changing <em>net_ticktime</em> to <em>NetTicktime</em> seconds.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>ignored</em>: The local node is not alive.</p>
  </dd>

</dl>

<pre>
<strong></strong>
set_net_ticktime(NetTicktime) -&gt; Res

</pre>

<pre>
<strong></strong>
set_net_ticktime(NetTicktime, TransitionPeriod) -&gt; Res

</pre>
<p>Types:</p><p>NetTicktime = integer() &gt;= 1</p><p>TransitionPeriod = integer() &gt;= 0</p><p>Res = unchanged</p>
<pre>
    | change_initiated
</pre>

<pre>
    | {ongoing_change_to, NewNetTicktime}
</pre>
<p>NewNetTicktime = integer() &gt;= 1</p><p>Sets <em>net_ticktime</em> (see <a href="../man7/kernel.7.html"><strong>kernel</strong>(7)</a></strong>) to <em>NetTicktime</em> seconds. <em>TransitionPeriod</em> defaults to 60.</p><p>Some definitions:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>The minimum transition traffic interval (<em>MTTI</em>): <em>minimum(NetTicktime, PreviousNetTicktime)*1000 div 4</em> milliseconds.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>The transition period: The time of the least number of consecutive <em>MTTI</em>s to cover <em>TransitionPeriod</em> seconds following the call to <em>set_net_ticktime/2</em> (i.e. ((<em>TransitionPeriod*1000 - 1) div MTTI + 1)*MTTI</em> milliseconds).</p>
  </dd>

</dl>
<p>If <em>&lt;anno&gt;NetTicktime&lt;/anno&gt; &lt; PreviousNetTicktime</em>, the actual <em>net_ticktime</em> change will be done at the end of the transition period; otherwise, at the beginning. During the transition period, <em>net_kernel</em> will ensure that there will be outgoing traffic on all connections at least every <em>MTTI</em> millisecond.</p><p><strong></strong> Note:</p><p>The <em>net_ticktime</em> changes have to be initiated on all nodes in the network (with the same <em>NetTicktime</em>) before the end of any transition period on any node; otherwise, connections may erroneously be disconnected.</p><p>Returns one of the following:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>unchanged</em>: <em>net_ticktime</em> already had the value of <em>NetTicktime</em> and was left unchanged.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>change_initiated</em>: <em>net_kernel</em> has initiated the change of <em>net_ticktime</em> to <em>NetTicktime</em> seconds.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{ongoing_change_to, NewNetTicktime}</em>: The request was <em>ignored</em>; because, <em>net_kernel</em> was busy changing <em>net_ticktime</em> to <em>NewNetTicktime</em> seconds.</p>
  </dd>

</dl>
<p><strong></strong> start([Name]) -&gt; {ok, pid()} | {error, Reason}</p><p><strong></strong> start([Name, NameType]) -&gt; {ok, pid()} | {error, Reason}</p><p><strong></strong> start([Name, NameType, Ticktime]) -&gt; {ok, pid()} | {error, Reason}</p><p>Types:</p><p>Name = atom()</p><p>NameType = shortnames | longnames</p><p>Reason = {already_started, pid()} | term()</p><p>Note that the argument is a list with exactly one, two or three arguments. <em>NameType</em> defaults to <em>longnames</em> and <em>Ticktime</em> to 15000.</p><p>Turns a non-distributed node into a distributed node by starting <em>net_kernel</em> and other necessary processes.</p>
<pre>
<strong></strong>
stop() -&gt; ok | {error, Reason}

</pre>
<p>Types:</p><p>Reason = not_allowed | not_found</p><p>Turns a distributed node into a non-distributed node. For other nodes in the network, this is the same as the node going down. Only possible when the net kernel was started using <em>start/1</em>, otherwise returns <em>{error, not_allowed}</em>. Returns <em>{error, not_found}</em> if the local node is not alive.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="net_adm.3erl.html"><span aria-hidden="true">&larr;</span> net_adm.3erl: Various erlang net administration routines</a></li>
   <li class="next"><a href="nteventlog.3erl.html">nteventlog.3erl: Interface to windows event log <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
