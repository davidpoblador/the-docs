<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>af_attrs: Atfs attribute handling</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Atfs attribute handling">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="af_attrs (3) manual">
  <meta name="twitter:description" content="Atfs attribute handling">
  <meta name="twitter:image" content="https://www.carta.tech/images/atfs-dev-af_attrs-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/af_attrs.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="af_attrs (3) manual" />
  <meta property="og:description" content="Atfs attribute handling" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/atfs-dev-af_attrs-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">af_attrs<small> (3)</small></h1>
        <p class="lead">Atfs attribute handling</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/af_attrs.3.html">
      <span itemprop="name">af_attrs: Atfs attribute handling</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/atfs-dev/">
      <span itemprop="name">atfs-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/af_attrs.3.html">
      <span itemprop="name">af_attrs: Atfs attribute handling</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;atfs.h&gt;</p><p>char	*af_retattr (Af_key *aso, char *attrName)</p><p>int	af_retnumattr (Af_key *aso, char *attrName)</p><p>Af_user	af_retuserattr (Af_key *aso, char *attrName)</p><p>time_t	af_rettimeattr (Af_key *aso, char *attrName)</p><p>int	af_setattr (Af_key *aso, int mode, char *attrName)</p><p>int	af_allattrs (Af_key *aso, Af_attrs *attrBuf)</p><p>void	af_freeattr (char *attrValue);</p><p>void	af_freeattrbuf (Af_attrs *attrBuf);</p><p>int	af_isstdval (char *attrValue);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>af_retattr</em> returns the value of any ASO attribute in string representation. The <em>attrName</em> argument denotes either a standard attribute (according to the list below) or a user defined attribute. Standard attributes are converted to a meaningful string representation if necessary. If the attribute name given to af_retattr contains an equal sign (this may be the case with user defined attributes), only the part before the equal sign will be interpreted as name. If the named attribute is a user defined attribute carrying multiple values, these will be returned in <em>one</em> string, with the values separated by newline ('&#92;n') characters. If the named attribute does not exist, af_retattr returns a null pointer. If the value is empty, an empty string is returned. <strong>Note:</strong> The result string of af_retattr may reside in static memory which is overwritten on subsequent calls of af_retattr.</p><p><em>af_retnumattr</em>, <em>af_retuserattr</em>, and <em>af_rettimeattr</em> return the value of the named attribute as integer, user structure or time value. These functions only apply to standard attributes with a matching type.</p><p><em>Af_setattr</em> sets, modifies, or deletes user defined attributes of the ASO identified by <em>aso</em>. The <em>attr</em> parameter is a string of the form: <em>name=value</em>. The name may consist of any characters (even non-printable) but it may not contain Ctrl-A (&#92;001) characters. The first equal sign that appears in the string is interpreted as the delimiter between name and value. If the string does not contain an equal sign, it is interpreted as just an attribute name without value. The <em>mode</em> parameter is one of the following:</p>
<dl class='dl-vertical'>
  <dt>
    <p>AF_ADD</p>
  </dt>
  <dd>
    <p>Attach the given attribute to the identified ASO. If an attribute with the given name already exists, add just the value to the existing attribute. Subsequent calls of af_setattr with the same attribute name construct attributes with multiple (any number) values.</p>
  </dd>
  <dt>
    <p>AF_REMOVE</p>
  </dt>
  <dd>
    <p>Remove the named attribute. This mode requires only the attribute name to be given as attr parameter. Removal of single values is not supported.</p>
  </dd>
  <dt>
    <p>AF_REPLACE</p>
  </dt>
  <dd>
    <p>Replace an existing user defined attribute. The replacement fails, if no attribute with the given name exists.</p>
  </dd>

</dl>
<p><em>af_allattrs</em> returns the complete attribute buffer (<em>attrBuf</em>) of the ASO identified by <em>aso</em> including standard and user defined attributes. The <a href="../man3/af_retrieve.3.html"><strong>af_retrieve</strong>(3)</a> manual page shows the structure of the attribute buffer.</p><p><em>af_freeattr</em> and <em>af_freeattrbuf</em> release memory eventually allocated during a af_retattr or af_allattrs call. As the result of af_retattr may reside either in static or dynamic (<a href="../man3/malloc.3.html"><strong>malloc</strong>(3)</a>) memory, you should not use <a href="../man3/free.3.html"><strong>free</strong>(3)</a> for releasing attribute value memory.</p><p><em>af_isstdval</em> returns TRUE if the given <em>attrValue</em> string is the return value of an af_retattr call where the result was written to static rather than allocated memory. Otherwise it returns FALSE.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AtFS STANDARD ATTRIBUTES</h2>
        <div class="sectioncontent">
<p>The following is an alphabetically ordered list of all known standard attributes. AF_ATT... are string constants that may be used as <em>attrName</em> argument for any of the function calls described on this manual page. In parenthesis behind each symbolic constant, the type of the attribute is shown.</p>
<dl class='dl-vertical'>
  <dt>
    <p>AF_ATTAUTHOR (user)</p>
  </dt>
  <dd>
    <p>The versions author.</p>
  </dd>
  <dt>
    <p>AF_ATTATIME (time)</p>
  </dt>
  <dd>
    <p>The date of last access (read or write) to the version contents.</p>
  </dd>
  <dt>
    <p>AF_ATTBOUND (string)</p>
  </dt>
  <dd>
    <p>The version name in bound version notation (e.g. <em>foo.c[1.2]</em>).</p>
  </dd>
  <dt>
    <p>AF_ATTBOUNDPATH (string)</p>
  </dt>
  <dd>
    <p>Absolute pathname of the version in bound version notation (e.g. <em>/usr/andy/foo.c[1.2]</em>).</p>
  </dd>
  <dt>
    <p>AF_ATTCTIME (time)</p>
  </dt>
  <dd>
    <p>The date of last status change. Updated, when an attributes value is changed.</p>
  </dd>
  <dt>
    <p>AF_ATTDSIZE (numeric)</p>
  </dt>
  <dd>
    <p>The size of the delta if there is any. If the version is not stored as delta, -1 is returned.</p>
  </dd>
  <dt>
    <p>AF_ATTGEN (numeric)</p>
  </dt>
  <dd>
    <p>The generation number.</p>
  </dd>
  <dt>
    <p>AF_ATTHOST (string)</p>
  </dt>
  <dd>
    <p>The host from where the version was accessed (this attribute is quite useless, as this is always the current host).</p>
  </dd>
  <dt>
    <p>AF_ATTLOCKER (user)</p>
  </dt>
  <dd>
    <p>The user who has set a lock on the version (if any).</p>
  </dd>
  <dt>
    <p>AF_ATTLTIME (time)</p>
  </dt>
  <dd>
    <p>The date of last lock change. This is empty, when there was never a lock set.</p>
  </dd>
  <dt>
    <p>AF_ATTMODE (numeric)</p>
  </dt>
  <dd>
    <p>The version file type and protection. Same as st_mode in struct stat (see <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a>).</p>
  </dd>
  <dt>
    <p>AF_ATTMTIME (time)</p>
  </dt>
  <dd>
    <p>The date of the last contents modification.</p>
  </dd>
  <dt>
    <p>AF_ATTNAME (string)</p>
  </dt>
  <dd>
    <p>The AtFS name of the version. This has the filename extension, if there is any, stripped off.</p>
  </dd>
  <dt>
    <p>AF_ATTOWNER (user)</p>
  </dt>
  <dd>
    <p>The versions owner.</p>
  </dd>
  <dt>
    <p>AF_ATTREV (numeric)</p>
  </dt>
  <dd>
    <p>The revision number.</p>
  </dd>
  <dt>
    <p>AF_ATTSIZE (numeric)</p>
  </dt>
  <dd>
    <p>The file size. This may be independent of the real storage size, as most saved versions are stored as deltas (see also AF_ATTDSIZE).</p>
  </dd>
  <dt>
    <p>AF_ATTSPATH (string)</p>
  </dt>
  <dd>
    <p>The UNIX pathname leading to the version. This may be different when accessing the version from different hosts.</p>
  </dd>
  <dt>
    <p>AF_ATTSTATE (numeric)</p>
  </dt>
  <dd>
    <p>The version state. States are numbered 0 trough 5 from <em>busy</em> to <em>frozen</em>.</p>
  </dd>
  <dt>
    <p>AF_ATTSTIME (time)</p>
  </dt>
  <dd>
    <p>The save date. This date is not set for busy versions.</p>
  </dd>
  <dt>
    <p>AF_ATTTYPE (string)</p>
  </dt>
  <dd>
    <p>The filename extension (the string behind the rightmost period in the versions full name). See <a href="../man3/af_misc.3.html"><strong>af_misc</strong>(3)</a> for details.</p>
  </dd>
  <dt>
    <p>AF_ATTUNIXNAME (string)</p>
  </dt>
  <dd>
    <p>The full UNIX name (without path).</p>
  </dd>
  <dt>
    <p>AF_ATTUNIXPATH (string)</p>
  </dt>
  <dd>
    <p>The full UNIX path.</p>
  </dd>
  <dt>
    <p>AF_ATTVERSION (string)</p>
  </dt>
  <dd>
    <p>The complete version number <em>generation.revision</em> .</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO af_attrs&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man2/stat.2.html"><strong>stat</strong>(2)</a>, <a href="../man3/free.3.html"><strong>free</strong>(3)</a>, <a href="../man3/af_misc.3.html"><strong>af_misc</strong>(3)</a>, <a href="../man3/af_retrieve.3.html"><strong>af_retrieve</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Upon error, -1 or a nil pointer (depending on the return type) is returned and <em>af_errno</em> is set to the corresponding error number.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITS</h2>
        <div class="sectioncontent">
<p>Although AtFS promises the storage of an arbitrary number of user defined attributes, the current implementation limits their number to 255. af_setattr sets the corresponding error condition if the limit is reached.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="af_allattrs.3.html"><span aria-hidden="true">&larr;</span> af_allattrs.3: Atfs attribute handling</a></li>
   <li class="next"><a href="af_cache.3.html">af_cache.3: Atfs derived object cache handling <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
