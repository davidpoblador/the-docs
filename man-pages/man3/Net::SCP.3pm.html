<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Net::SCP: Perl extension for secure copy protocol</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Perl extension for secure copy protocol">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Net::SCP (3pm) manual">
  <meta name="twitter:description" content="Perl extension for secure copy protocol">
  <meta name="twitter:image" content="https://www.carta.tech/images/libnet-scp-perl-Net::SCP-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Net::SCP.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Net::SCP (3pm) manual" />
  <meta property="og:description" content="Perl extension for secure copy protocol" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libnet-scp-perl-Net::SCP-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Net::SCP<small> (3pm)</small></h1>
        <p class="lead">Perl extension for secure copy protocol</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::SCP.3pm.html">
      <span itemprop="name">Net::SCP: Perl extension for secure copy protocol</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libnet-scp-perl/">
      <span itemprop="name">libnet-scp-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::SCP.3pm.html">
      <span itemprop="name">Net::SCP: Perl extension for secure copy protocol</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  #procedural interface
  use Net::SCP qw(scp iscp);
  scp($source, $destination);
  iscp($source, $destination); #shows command, asks for confirmation, and
                               #allows user to type a password on tty

  #OO interface
  $scp = Net::SCP-&gt;new( "hostname", "username" );
  #with named params
  $scp = Net::SCP-&gt;new( { "host"=&gt;$hostname, "user"=&gt;$username } );
  $scp-&gt;get("filename") or die $scp-&gt;{errstr};
  $scp-&gt;put("filename") or die $scp-&gt;{errstr};
  #tmtowtdi
  $scp = new Net::SCP;
  $scp-&gt;scp($source, $destination);

  #Net::FTP-style
  $scp = Net::SCP-&gt;new("hostname");
  $scp-&gt;login("user");
  $scp-&gt;cwd("/dir");
  $scp-&gt;size("file");
  $scp-&gt;get("file");
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Simple wrappers around ssh and scp commands.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUBROUTINES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    scp \s-1SOURCE\s0, \s-1DESTINATION\s0
  </dt>
  <dd>
    <p>Can be called either as a subroutine or a method; however, the subroutine interface is deprecated. Calls scp in batch mode, with the <strong>-B</strong> <strong>-p</strong> <strong>-q</strong> and <strong>-r</strong> options. Returns false upon error, with a text error message accessible in $scp-&gt;{errstr}. Returns false and sets the <strong>errstr</strong> attribute if there is an error.</p>
  </dd>
  <dt>
    iscp \s-1SOURCE\s0, \s-1DESTINATION\s0
  </dt>
  <dd>
    <p>Can be called either as a subroutine or a method; however, the subroutine interface is deprecated. Prints the scp command to be execute, waits for the user to confirm, and (optionally) executes scp, with the <strong>-p</strong> and <strong>-r</strong> flags. Returns false and sets the <strong>errstr</strong> attribute if there is an error.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    new \s-1HOSTNAME\s0 [ \s-1USER\s0 ] | \s-1HASHREF\s0
  </dt>
  <dd>
    <p>This is the constructor for a new Net::SCP object.  You must specify a hostname, and may optionally provide a user.  Alternatively, you may pass a hashref of named params, with the following keys:     host - hostname     user - username     interactive - bool     cwd - current working directory on remote server</p>
  </dd>
  <dt>
    login [\s-1USER\s0]
  </dt>
  <dd>
    <p>Compatibility method.  Optionally sets the user.</p>
  </dd>
  <dt>
    cwd \s-1CWD\s0
  </dt>
  <dd>
    <p>Sets the cwd (used for a subsequent get or put request without a full pathname).</p>
  </dd>
  <dt>
    get \s-1REMOTE_FILE\s0 [, \s-1LOCAL_FILE\s0]
  </dt>
  <dd>
    <p>Uses scp to transfer \s-1REMOTE_FILE\s0 from the remote host.  If a local filename is omitted, uses the basename of the remote file.</p>
  </dd>
  <dt>
    mkdir \s-1DIRECTORY\s0
  </dt>
  <dd>
    <p>Makes a directory on the remote server.  Returns false and sets the <strong>errstr</strong> attribute on errors. (Implementation note: An ssh connection is established to the remote machine and '/bin/mkdir <strong>-p</strong>' is used to create the directory.)</p>
  </dd>
  <dt>
    size \s-1FILE\s0
  </dt>
  <dd>
    <p>Returns the size in bytes for the given file as stored on the remote server. Returns 0 on error, and sets the <strong>errstr</strong> attribute.  In the case of an actual zero-length file on the remote server, the special value '0e0' is returned, which evaluates to zero when used as a number, but is true. (Implementation note: An ssh connection is established to the remote machine and wc is used to determine the file size.)</p>
  </dd>
  <dt>
    put \s-1LOCAL_FILE\s0 [, \s-1REMOTE_FILE\s0]
  </dt>
  <dd>
    <p>Uses scp to trasnfer \s-1LOCAL_FILE\s0 to the remote host.  If a remote filename is omitted, uses the basename of the local file.</p>
  </dd>
  <dt>
    binary
  </dt>
  <dd>
    <p>Compatibility method: does nothing; returns true.</p>
  </dd>
  <dt>
    quit
  </dt>
  <dd>
    <p>Compatibility method: does nothing; returns true.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FREQUENTLY ASKED QUESTIONS</h2>
        <div class="sectioncontent">
<p>Q: How do you supply a password to connect with ssh within a perl script using the Net::SSH module?</p><p>A: You don't (at least not with this module).  Use \s-1RSA\s0 or \s-1DSA\s0 keys.  See the</p>
<pre>
   quick help in the next section and the <em>ssh-keygen</em>\|(1) manpage.
</pre>
<p>A #2: See Net::SCP::Expect instead.</p><p>Q: My script is \*(L"leaking\*(R" scp processes.</p><p>A: See \*(L"How do I avoid zombies on a Unix system\*(R" in perlfaq8, IPC::Open2, IPC::Open3 and \*(L"waitpid\*(R" in perlfunc.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERATING AND USING SSH KEYS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    1 Generate keys
  </dt>
  <dd>
    <p>Type:    ssh-keygen -t rsa And do not enter a passphrase unless you wanted to be prompted for one during file copying. Here is what you will see:    $ ssh-keygen -t rsa    Generating public/private rsa key pair.    Enter file in which to save the key (/home/User/.ssh/id_rsa):    Enter passphrase (empty for no passphrase):</p><p>   Enter same passphrase again:</p><p>   Your identification has been saved in /home/User/.ssh/id_rsa.    Your public key has been saved in /home/User/.ssh/id_rsa.pub.    The key fingerprint is:    5a:cd:2b:0a:cd:d9:15:85:26:79:40:0c:55:2a:f4:23 User@JEFF-CPU</p>
  </dd>
  <dt>
    2 Copy public to machines you want to upload to
  </dt>
  <dd>
    <p>\*(C`id_rsa.pub\*(C' is your public key. Copy it to \*(C`~/.ssh\*(C' on target machine. Put a copy of the public key file on each machine you want to log into. Name the copy \*(C`authorized_keys\*(C' (some implementations name this file \*(C`authorized_keys2\*(C') Then type:      chmod 600 authorized_keys Then make sure your home dir on the remote machine is not group or world writeable.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Could really use a maintainer with enough time to at least review and apply patches more patches.  Or the module should just be deprecated in favor of Net::SFTP::Expect or Net::SFTP::Foreign and made into a simple compatiblity wrapper.</p><p>Ivan Kohler &lt;ivan-netscp_pod@420.am&gt;</p><p>Major updates Anthony Deaver &lt;bishop@projectmagnus.org&gt;</p><p>Thanks to Jon Gunnip &lt;jon@soundbite.com&gt; for fixing a bug with <em>size()</em>.</p><p>Patch for the mkdir method by Anthony Awtrey &lt;tony@awtrey.com&gt;.</p><p>Thanks to terrence brannon &lt;tbone@directsynergy.com&gt; for the documentation in the \s-1GENERATING\s0 \s-1AND\s0 \s-1USING\s0 \s-1SSH\s0 \s-1KEYS\s0 section.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2000 Ivan Kohler Copyright (c) 2007 Freeside Internet Services, Inc. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Still has no-OO cruft.</p><p>In order to work around some problems with commercial \s-1SSH2\s0, if the source file is on the local system, and is not a directory, the <strong>-r</strong> flag is omitted. It's probably better just to use OpenSSH &lt;http://www.openssh.com/&gt; which is the de-facto standard these days anyway.</p><p>The Net::FTP-style \s-1OO\s0 stuff is kinda lame.  And incomplete.</p><p>iscp doesnt expect you to be logging into the box that you are copying to for the first time. so it's completely clueless about how to handle  the whole 'add this file to known hosts' message so it just hangs after the user hits y.  (Thanks to John L. Utz \s-1III\s0).  To avoid this, \s-1SSH\s0 to the box once first.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Net::SCP&hellip;</h2>
        <div class="sectioncontent">
<p>For a perl implementation that does not require the system <strong>scp</strong> command, see Net::SFTP instead.</p><p>For a wrapper version that allows you to use passwords, see Net::SCP::Expect instead.</p><p>For a wrapper version of the newer \s-1SFTP\s0 protocol, see Net::SFTP::Foreign instead.</p><p>Net::SSH, Net::SSH::Perl, Net::SSH::Expect, Net::SSH2, IPC::PerlSSH</p><p><em>scp</em>\|(1), <em>ssh</em>\|(1), IO::File, IPC::Open2, IPC::Open3</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Net::Rendezvous::Publish::Backend::Avahi.3pm.html"><span aria-hidden="true">&larr;</span> Net::Rendezvous::Publish::Backend::Avahi.3pm: Publish zeroconf data via avahi</a></li>
   <li class="next"><a href="Net::SCP::Expect.3pm.html">Net::SCP::Expect.3pm: Wrapper for scp that allows passwords via expect. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
