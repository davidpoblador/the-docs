<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RoPkg::DB: A singleton database pool class</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A singleton database pool class">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="RoPkg::DB (3pm) manual">
  <meta name="twitter:description" content="A singleton database pool class">
  <meta name="twitter:image" content="https://www.carta.tech/images/libropkg-perl-RoPkg::DB-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/RoPkg::DB.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="RoPkg::DB (3pm) manual" />
  <meta property="og:description" content="A singleton database pool class" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libropkg-perl-RoPkg::DB-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">RoPkg::DB<small> (3pm)</small></h1>
        <p class="lead">A singleton database pool class</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/RoPkg::DB.3pm.html">
      <span itemprop="name">RoPkg::DB: A singleton database pool class</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libropkg-perl/">
      <span itemprop="name">libropkg-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/RoPkg::DB.3pm.html">
      <span itemprop="name">RoPkg::DB: A singleton database pool class</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>0.1.12</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>RoPkg::DB is a database pool class. Using this class you can have access to multiple databases (no matter what kind of database), from a single object. RoPkg::DB is ideal in persistent environments because at base, is a singleton class. This class is intensively used by Simba but it can be used in any other project.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use RoPkg::DB;
</pre>
<p> sub main {    my $dbp = new RoPkg::DB();</p><p>   eval {      $dbp-&gt;Add('dbi:mysql:database=mysql;host=localhost',                'root',                '',                'local');      $dbp-&gt;Add('dbi:mysql:database=somedb;host=somehost',                'username',                'mypass',                'somedb');    };</p><p>   die($@-&gt;package . ' said: ' . $@-&gt;message) if ref($@);</p><p>   print 'Conn to localhost is:',$dbp-&gt;db_local,$/,          'Conn to remote is:',$dbp-&gt;db_somedb,$/;</p><p>   $dbp-&gt;Del('somedb');</p><p> }</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUBROUTINES/METHODS</h2>
        <div class="sectioncontent">
<p>All methods (besides new), raise OutsideClass exception when are not called within a class instance. Also, each method may raise diferent exceptions from one case to another. Please read the documentation for each method to find out what are the exceptions raised by each method.</p><p><strong>&#92;$1</strong></p><p>new is the contructor of the class. It does not do anything. add and initialize a new connection to the pool. $dsn must be in the \s-1DBI\s0 format. $dsn and $dbpass are the username and password used to connect to the database. $conn_name is the method who will be used to access the database handle. Please note that the method that will be created will be prefixed with \*(L"db_\*(R" .</p><p>Example:</p><p> $dbp-&gt;Add('dbi:mysql:database=mysql;host=localhost','root',q{},'local');</p><p>The method that will be used to get the database handle for this connection is db_local .</p><p><em>Add()</em> may raise the following exceptions:</p>
<dl class='dl-vertical'>
  <dt>
    *) Param::Missing
  </dt>
  <dd>
    
  </dd>
  <dt>
    *) DB::ConnExists
  </dt>
  <dd>
    
  </dd>
  <dt>
    *) DB::Connect
  </dt>
  <dd>
    
  </dd>

</dl>
<p><em>Param::Missing</em> is raised when $dsn, $dbuser or $conn_name are not defined. <em>DB::ConnExists</em> is raised when a connection with the name $conn_name already exists. <em>DB::Connect</em> is raised when the connection with the database could not be established. Besides this exceptions, each database handler has RaiseError set to 1 and PrintError set to 0. Also, when errors occurs, \s-1DBI\s0 will raise a <em>\s-1DB\s0</em> exception. The method always returns 1. removes the connection named $name from the pool. The connection is closed first in a civilised manner. If the connection $name is not found, DB::ConnNotFound is raised. Returns 0 if the connection named $name does not exists, 1 otherwise. Param::Missing exception is raised if $name is not defined. Force a reconnect of the connection named $name. If $name is not defined, Param::Missing is raised. If a connection named $name does not exists, DB::ConnNotFound is raised. This method always returns 1. Returns 1 if the table $table_name exists in the database specified by the connection named $name, 0 otherwise. If $name or $table_name parameters are not defined, a Param::Missing exception is raised. If the connection $name does not exists, DB::ConnNotFound is raised.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPENDENCIES</h2>
        <div class="sectioncontent">
<p>RoPkg::DB requires perl 5.008 or later and the following modules:</p>
<dl class='dl-vertical'>
  <dt>
    RoPkg &gt;= 0.4.4
  </dt>
  <dd>
    
  </dd>
  <dt>
    \s-1DBI\s0
  </dt>
  <dd>
    
  </dd>
  <dt>
    Class::Singleton
  </dt>
  <dd>
    
  </dd>
  <dt>
    English
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>This module comes with tests. To run the tests, unpack the source and run 'make test'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PERL CRITIC</h2>
        <div class="sectioncontent">
<p>This module is perl critic level 2 compliant (with 1 exception)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION AND ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>This module does not use any configuration files or environment variables. The used modules however may use such things. Please refer to each module man page for more information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INCOMPATIBILITIES</h2>
        <div class="sectioncontent">
<p>None known to the author</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS AND LIMITATIONS</h2>
        <div class="sectioncontent">
<p>None known to the author</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO RoPkg::DB&hellip;</h2>
        <div class="sectioncontent">
<p>RoPkg::DBObject RoPkg::Exceptions RoPkg::Utils</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Subredu Manuel &lt;diablo@iasi.roedu.net&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE AND COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2005 Subredu Manuel.  All Rights Reserved. This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. The \s-1LICENSE\s0 file contains the full text of the license.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="RoPkg.3pm.html"><span aria-hidden="true">&larr;</span> RoPkg.3pm: Collection of perl classes.</a></li>
   <li class="next"><a href="RoPkg::DBCollection.3pm.html">RoPkg::DBCollection.3pm: Base class who can be used for collections of database objects <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
