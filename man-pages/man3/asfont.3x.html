<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>asfont: Asfont- text drawing functionality and handling of ttf and x11 fonts libafterimage/asfont.h</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Asfont- text drawing functionality and handling of ttf and x11 fonts libafterimage/asfont.h">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="asfont (3x) manual">
  <meta name="twitter:description" content="Asfont- text drawing functionality and handling of ttf and x11 fonts libafterimage/asfont.h">
  <meta name="twitter:image" content="https://www.carta.tech/images/libafterimage-dev-asfont-3x.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3x/asfont.3x.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="asfont (3x) manual" />
  <meta property="og:description" content="Asfont- text drawing functionality and handling of ttf and x11 fonts libafterimage/asfont.h" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libafterimage-dev-asfont-3x.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">asfont<small> (3x)</small></h1>
        <p class="lead">Asfont- text drawing functionality and handling of ttf and x11 fonts libafterimage/asfont.h</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/asfont.3x.html">
      <span itemprop="name">asfont: Asfont- text drawing functionality and handling of ttf and x11 fonts libafterimage/asfont.h</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libafterimage-dev/">
      <span itemprop="name">libafterimage-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/asfont.3x.html">
      <span itemprop="name">asfont: Asfont- text drawing functionality and handling of ttf and x11 fonts libafterimage/asfont.h</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NAMEasfont</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Text drawing functionality. Text is drawn as an ASImage with only alpha channel. Since alpha channel is 8 bit widths that allows for 256 shades to be used in rendered glyphs. That in turn allows for smoothing and antialiasing of the drawn text. Such an approcah allows for easy manipulation of the drawn text, such as changing color, making it transparent, texturizing, rotation, etc.</p><p>libAfterImage supports two types of fonts : Fonts that could be rendered using standard Xlib functionality, and fonts rendered by FreeType 2 library. That may include TrueType fonts. When fonts are obtained via Xlib special processing is performed in order to smooth its shape and leverage 256 shades palette available.</p><p>Any font being used is has to be opened first. At that time its properties are analysed and glyphs are cached in clients memory. Special RLE compression method is used for font glyphs, significantly reducing memory utilization without any effect on performance.</p><p>Font management and drawing functionality has been designed with internatiolization in mind, althou support for locales is not complete yet.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO asfont&hellip;</h2>
        <div class="sectioncontent">
<p>Structures :</p>
<pre>
         ASFontManager
         ASFont
         ASGlyph
         ASGlyphRange
</pre>
<p>Functions :</p>
<pre>
         create_font_manager(), destroy_font_manager(),
         open_freetype_font(), open_X11_font(), get_asfont(),
         destroy_font(), print_asfont(), print_asglyph(),
         draw_text(),
         get_asfont_glyph_spacing(), set_asfont_glyph_spacing()
</pre>
<p>Other libAfterImage modules :</p>
<pre>
         ascmap.h asfont.h asimage.h asvisual.h blender.h export.h
         import.h transform.h ximage.h
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Sasha Vasko &lt;sasha at aftercode dot net&gt; libAfterImage/MAX_GLYPHS_PER_FONT</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEMAX_GLYPHS_PER_FONT</h2>
        <div class="sectioncontent">
<p>- Max value of glyphs per font allowed. We need that so we can detect and avoid broken fonts somehow.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>#define MAX_GLYPHS_PER_FONT  2048</p><p>libAfterImage/ASFontType</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASFontType</h2>
        <div class="sectioncontent">
<p>- Supported types of fonts - Xlib or FreeType 2 ASF_GuessWho will enable autodetection of the font type. It is attempted to be opened as FreeType font first, and if that fails - it will be opened as Xlib font.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef enum {</p>
<pre>
    ASF_X11         = 0,
    ASF_Freetype    = (0x01&lt;&lt;0),
    ASF_GuessWho    = (0x01&lt;&lt;1),
</pre>
<p>#define ASF_TypeMask  (ASF_GuessWho|ASF_Freetype)</p>
<pre>
    /* flags below should be combined with one of the above values */
    ASF_Monospaced  = (0x01&lt;&lt;2),
    ASF_RightToLeft = (0x01&lt;&lt;3),  /* direction of the text flow */
    ASF_HasKerning  = (0x01&lt;&lt;4)
</pre>
<p>}ASFontType;</p><p>libAfterImage/ASGlyph</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASGlyph</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Stores glyph's image, as well as width, height and other characteristics of the glyph.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef struct ASGlyph {</p>
<pre>
    CARD8          *pixmap ;        /* glyph's RLE encoded pixmap */
    short   width, height ; /* meaningfull width and height
                                     * of the glyphs pixmap */
    short  lead, step ;             /* distance pen position to glyph
                                     * beginning and to the next glyph */
                                    /* in XRender it should be used as so:
                                     * x = -lead, xOff = step
                                     */
    short  ascend, descend ;        /* distance of the top of the
                                     * glyph from the baseline */
                                    /* in XRender it should be used as so:
                                     * y = -ascend, yOff = 0
                                     */
    unsigned int font_gid ;         /* index of the glyph inside the font( TTF only ) */
    long         xrender_gid ;      /* Used only with XRender  - gid of the glyph in GlyphSet */
</pre>
<p>}ASGlyph;</p><p>libAfterImage/ASGlyphRange</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASGlyphRange</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Organizes glyphs that belongs to the continuos range of char codes. ASGlyphRange structures could be tied together to cover entire codeset supported by the font.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef struct ASGlyphRange {</p>
<pre>
    unsigned long   min_char, max_char; /* Code range.
                                         * for some locales that would
                                         * be sufficient to simply set
                                         * range of characteres
                                         * supported by font */
    ASGlyph *glyphs;                    /* array of glyphs belonging to
                                         * that code range */
    struct ASGlyphRange *below, *above;
</pre>
<p>}ASGlyphRange;</p><p>libAfterImage/ASFont</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASFont</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Structure to contain all the font characteristics, as well as set of glyph images. Such structure has to be created/opened prior to being able to draw characters with any font.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef struct ASFont {</p>
<pre>
    unsigned long   magic ;
    int             ref_count ;
</pre>

<pre>
    struct ASFontManager *fontman;  /* our owner */
    char                 *name;
</pre>

<pre>
    ASFontType      type ;
    ASFlagType      flags ;
</pre>

<pre>
    ASGlyphRange   *codemap; /* linked list of glyphsets, each
                              * representing continuos range of
                              * available codes - used for ASCII
                              * codes */
    ASHashTable    *locale_glyphs;  /* hash of locale specific glyphs */
</pre>

<pre>
    ASGlyph         default_glyph;  /* valid glyph to be drawn when
                                     * code is not valid */
</pre>

<pre>
    int             max_height;  /* maximiu height of the character
                                  * glyph */
    int             max_ascend,  /* maximum distance from the baseline
                                  * to the top of the character glyph */
                    max_descend; /* need both descend and ascend to be
                                    able to dynamically recalculate font
                                    height while adding new characters */
    int             space_size;  /* fixed width value to be used when
                                  * rendering spaces and tabs */
    int             spacing_x, spacing_y;
    /* If these are set to anything above 0 then all the glyphs has to be
     * padded ( if its smaller then the cell ) or scaled down
     * ( if its bigger then the cell )
     */
    int    cell_width, cell_height ;
</pre>
<p>#ifdef HAVE_FREETYPE</p>
<pre>
    FT_Face         ft_face;        /* free type font handle */
</pre>
<p>#else</p>
<pre>
    CARD32         *pad;
</pre>
<p>#endif</p>
<pre>
    unsigned long   xrender_glyphset ;  /* GlyphSet is the actuall datatype,
                                         * but for easier compilation -
                                         * we use generic which is the same */
</pre>
<p>}ASFont;</p><p>libAfterImage/ASFontManager</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASFontManager</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Global data identifying connection to external libraries, as well as fonts location paths. This structure has to be created/initialized prior to any font being loaded. It also holds list of fonts that are currently open, allowing for easy access to fonts. When ASFontManagaer object is destroyd it automagically closes all the open fonts.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef struct ASFontManager {</p>
<pre>
    Display    *dpy;
    char       *font_path ;
</pre>

<pre>
    ASHashTable *fonts_hash ;
</pre>

<pre>
    size_t       unicode_used;
    CARD32      *local_unicode; /* list of unicodes from current locale
                                 * - we use it to limit number of glyphs
                                 * we load */
    Bool        ft_ok ;
</pre>
<p>#ifdef HAVE_FREETYPE</p>
<pre>
    FT_Library  ft_library;     /* free type library handle */
</pre>
<p>#else</p>
<pre>
    void       *pad ;
</pre>
<p>#endif }ASFontManager;</p><p>libAfterImage/ASText3DType</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASText3DType</h2>
        <div class="sectioncontent">
<p>- Available types of 3D text to be drawn.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef enum ASText3DType{</p>
<pre>
    AST_Plain =0,                              /* regular 2D text */
    AST_Embossed,
    AST_Sunken,
    AST_ShadeAbove,
    AST_ShadeBelow,
    AST_EmbossedThick,
    AST_SunkenThick,
    AST_OutlineAbove,
    AST_OutlineBelow,
    AST_OutlineFull,
    AST_3DTypes
</pre>
<p>}ASText3DType;</p><p>libAfterImage/ASTextAttributes</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASTextAttributes</h2>
        <div class="sectioncontent">
<p>- Attributes for text rendering</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef struct ASTextAttributes { #define ASTA_UseTabStops    (0x01&lt;&lt;0)</p>
<pre>
    unsigned int version ;
                    /* structure version, so we can implement future
                     * extensions without breaking binary apps */
    ASFlagType   rendition_flags ;
    ASText3DType type;
    ASCharType   char_type;
    unsigned int tab_size ;   /* tab size in chars  - defaults to 8 */
    unsigned int origin ;     /* distance from the left margin
                               * (in pixels) */
    unsigned int *tab_stops ; /* tab stops in pixels where
                               * left margin is 0 */
    unsigned int tab_stops_num ;
</pre>

<pre>
    ARGB32      fore_color ;   /* used with 3D type of Outlined */
  unsigned int width;
</pre>
<p>#define ASTA_VERSION_1  1</p><p>#define ASTA_VERSION_INTERNAL   ASTA_VERSION_1 }ASTextAttributes;</p><p>libAfterImage/asfont/create_font_manager()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEcreate_font_manager()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>ASFontManager *create_font_manager( Display *dpy,</p>
<pre>
                                    const char *font_path,
                                    ASFontManager *reusable_memory );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    dpy
  </dt>
  <dd>
    <p>- pointer to valid and opened Display.</p>
  </dd>
  <dt>
    font_path
  </dt>
  <dd>
    <p>- string, representing colon separated list of directories to search for FreeType fonts.</p>
  </dd>
  <dt>
    reusable_memory
  </dt>
  <dd>
    <p>- optional preallocated memory for the ASFontMagaer object</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Pointer to Initialized ASFontManager object on success. NULL otherwise.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>create_font_manager() will create new ASFontManager structure if needed. It wioll then store copy of font_path and supplied pointer to Display in it. At that time Hash table of loaded fonts is initialized, and if needed FreeType library is initialized as well. ASFontManager object returned by this functions has to be open at all times untill text drawing is no longer needed. libAfterImage/asfont/destroy_font_manager()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEdestroy_font_manager()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>void destroy_font_manager( ASFontManager *fontman,</p>
<pre>
                           Bool reusable );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    fontman
  </dt>
  <dd>
    <p>- pointer to valid ASFontManager object to be deallocated.</p>
  </dd>
  <dt>
    reusable
  </dt>
  <dd>
    <p>- If True, then memory holding object itself will not be freed - only resources will be deallocated. That is useful for structures created on stack.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>destroy_font_manager() closes all the fonts open with this ASFontManager. It will also close connection to FreeType library, and deallocate all cached data. If reusable is False - then memory used for object itself will not be freed. libAfterImage/asfont/open_freetype_font()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEopen_freetype_font()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>ASFont *open_freetype_font( ASFontManager *fontman,</p>
<pre>
                            const char *font_string,
                            int face_no,
                            int size, Bool verbose);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    fontman
  </dt>
  <dd>
    <p>- pointer to previously created ASFontManager. Needed for connection to FreeType library, as well as path to search fonts in.</p>
  </dd>
  <dt>
    font_string
  </dt>
  <dd>
    <p>- filename of the file containing font's data.</p>
  </dd>
  <dt>
    face_no
  </dt>
  <dd>
    <p>- number of face within the font file</p>
  </dd>
  <dt>
    size
  </dt>
  <dd>
    <p>- font size in points. Applicable only to scalable fonts, such as TrueType.</p>
  </dd>
  <dt>
    verbose
  </dt>
  <dd>
    <p>- if True, extensive error messages will be printed if problems encountered.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>pointer to Opened ASFont structure, containing all the glyphs of the font, as well as other relevant info. On failure returns NULL.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>open_freetype_font() will attempt to find font file in any of the directories specified in ASFontManager's font_path. If it fails to do so - then it will check if filename has alldigit extentions. It will then try to interpret that extension as a face number, and try and find the file with extension stripped off. If file was found function will atempt to read it using FreeType library. If requested face is not available in the font - face 0 will be used. On success all the font's glyphs will be rendered and cached, and needed font geometry info collected. When FreeType Library is not available that function does nothing. libAfterImage/asfont/open_X11_font()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEopen_X11_font()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>ASFont *open_X11_font( ASFontManager *fontman,</p>
<pre>
                       const char *font_string);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    fontman
  </dt>
  <dd>
    <p>- pointer to previously created ASFontManager. Needed for connection X Server.</p>
  </dd>
  <dt>
    font_string
  </dt>
  <dd>
    <p>- name of the font as recognized by Xlib.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>pointer to Opened ASFont structure, containing all the glyphs of the font, as well as other relevant info. On failure returns NULL.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>open_X11_font() attempts to load and query font using Xlib calls. On success it goes thgroughthe codemap of the font and renders all the glyphs available. Glyphs then gets transferred to the client's memory and encoded using RLE compression. At this time smoothing filters are applied on glyph pixmaps, if its size exceeds threshold.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<p>implement proper XFontSet support, when used with I18N enabled. libAfterImage/asfont/get_asfont()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEget_asfont()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>ASFont *get_asfont( ASFontManager *fontman,</p>
<pre>
                    const char *font_string,
                    int face_no, int size,
                    ASFontType type );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    fontman
  </dt>
  <dd>
    <p>- pointer to previously created ASFontManager. Needed for connection to FreeType library, path to search fonts in, and X Server connection.</p>
  </dd>
  <dt>
    font_string
  </dt>
  <dd>
    <p>- font name or filename of the file containing font's data.</p>
  </dd>
  <dt>
    face_no
  </dt>
  <dd>
    <p>- number of face within the font file</p>
  </dd>
  <dt>
    size
  </dt>
  <dd>
    <p>- font size in points. Applicable only to scalable fonts, such as TrueType.</p>
  </dd>
  <dt>
    type
  </dt>
  <dd>
    <p>- specifies the type of the font, or GuessWho for autodetection.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>pointer to Opened ASFont structure, containing all the glyphs of the font, as well as other relevant info. On failure returns NULL.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This function provides unified interface to font loading. It performs search in ASFontManager's list to see if this specific font has been loaded already, and if so - returns pointer to relevant structure. Otherwise it tryes to load font as FreeType font first, and then Xlib font, unless exact font type is specifyed. libAfterImage/asfont/release_font()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMErelease_font()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>void release_font( ASFont *font );</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    font
  </dt>
  <dd>
    <p>- pointer to the valid ASFont structure containing loaded font.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>returns current reference count. -1 means that object has been destroyed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This function will decrement reference count on loaded font and if reference count will be less then 0 ( meaning that release_font() has been called more times then get_asfont() ) it will close the font, remove it from ASFontManager's list, destroy all the glyphs and generally free everything else used by ASFont. Otherwise font will remain in memory for faster reuse. libAfterImage/asfont/print_asfont()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEprint_asfont()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>void    print_asfont( FILE* stream,</p>
<pre>
                      ASFont* font);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    stream
  </dt>
  <dd>
    <p>- output file pointer</p>
  </dd>
  <dt>
    font
  </dt>
  <dd>
    <p>- pointer to ASFont structure to print.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>prints all the geometry information about font. libAfterImage/asfont/print_asglyph()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEprint_asglyph()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>void    print_asglyph( FILE* stream,</p>
<pre>
                        ASFont* font, unsigned long c);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    stream
  </dt>
  <dd>
    <p>- output file pointer</p>
  </dd>
  <dt>
    font
  </dt>
  <dd>
    <p>- pointer to ASFont structure to print.</p>
  </dd>
  <dt>
    c
  </dt>
  <dd>
    <p>- character code to print glyph for</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>prints out contents of the cached glyph for specifyed character code. libAfterImage/asfont/draw_text()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEdraw_text()</h2>
        <div class="sectioncontent">
<p>draw_fancy_text()</p><p>get_text_size()</p><p>get_fancy_text_size();</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>ASImage *draw_text( const char *text,</p>
<pre>
                    ASFont *font, ASText3DType type,
                    int compression );
</pre>
<p>ASImage *draw_fancy_text( const void *text,</p>
<pre>
                         struct ASFont *font, ASTextAttributes *attr,
                             int compression,
                             int length );
</pre>
<p>Bool get_text_size( const char *text,</p>
<pre>
                    ASFont *font, ASText3DType type,
                    unsigned int *width, unsigned int *height );
</pre>
<p>Bool get_fancy_text_size( const void *text,</p>
<pre>
                             struct ASFont *font, ASTextAttributes *attr,
                         unsigned int *width, unsigned int *height,
                             int length,
                             int *x_positions );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    text
  </dt>
  <dd>
    <p>- actuall text to render</p>
  </dd>
  <dt>
    font
  </dt>
  <dd>
    <p>- pointer to ASFont to render text with</p>
  </dd>
  <dt>
    type
  </dt>
  <dd>
    <p>- one of the few available types of 3D text.</p>
  </dd>
  <dt>
    compression
  </dt>
  <dd>
    <p>- compression level to attempt on resulting ASImage.</p>
  </dd>
  <dt>
    width
  </dt>
  <dd>
    <p>- pointer to value to be set to text width.</p>
  </dd>
  <dt>
    height
  </dt>
  <dd>
    <p>- pointer to value to be set to text height.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Pointer to new ASImage containing rendered text on success. NULL on failure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>draw_text() creates new ASImage of the size big enough to contain entire text. It then renders the text using supplied font as an alpha channel of ASImage. get_text_size() can be used to determine the size of the text about to be drawn, so that appropriate drawable can be prepared. libAfterImage/asfont/get_asfont_glyph_spacing()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEget_asfont_glyph_spacing()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Bool get_asfont_glyph_spacing( ASFont* font, int *x, int *y );</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    font
  </dt>
  <dd>
    <p>- Loaded ASFont structure.</p>
  </dd>
  <dt>
    x
  </dt>
  <dd>
    <p>- pointer to the variable to receive horizontal spacing value.</p>
  </dd>
  <dt>
    y
  </dt>
  <dd>
    <p>- pointer to the variable to receive vertical spacing value.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>True if meaningfull information has been returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Returns inter-glyph spacing of specified font. libAfterImage/asfont/set_asfont_glyph_spacing()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEset_asfont_glyph_spacing()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Bool set_asfont_glyph_spacing( ASFont* font, int x, int y );</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    font
  </dt>
  <dd>
    <p>- Loaded ASFont structure.</p>
  </dd>
  <dt>
    x
  </dt>
  <dd>
    <p>- new horizontal spacing value.</p>
  </dd>
  <dt>
    y
  </dt>
  <dd>
    <p>- new vertical spacing value.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>TRue on success.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Changes inter-glyph spacing of the specified font.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="asflip.3x.html"><span aria-hidden="true">&larr;</span> asflip.3x: Asflip- demonstrates flipping image in 90 degree increments libafterimage/tutorials/asflip</a></li>
   <li class="next"><a href="asgrad.3x.html">asgrad.3x: Asgrad- demonstrates rendering of multi point linear gradients libafterimage/tutorials/asgrad <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
