<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ares_init_options: Initialize a resolver channel</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Initialize a resolver channel">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ares_init_options (3) manual">
  <meta name="twitter:description" content="Initialize a resolver channel">
  <meta name="twitter:image" content="https://www.carta.tech/images/libc-ares-dev-ares_init_options-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/ares_init_options.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ares_init_options (3) manual" />
  <meta property="og:description" content="Initialize a resolver channel" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libc-ares-dev-ares_init_options-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ares_init_options<small> (3)</small></h1>
        <p class="lead">Initialize a resolver channel</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ares_init_options.3.html">
      <span itemprop="name">ares_init_options: Initialize a resolver channel</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libc-ares-dev/">
      <span itemprop="name">libc-ares-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ares_init_options.3.html">
      <span itemprop="name">ares_init_options: Initialize a resolver channel</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;ares.h&gt;</strong>

<strong>int ares_init(ares_channel *</strong><em>channelptr</em><strong>)</strong>
<strong>int ares_init_options(ares_channel *</strong><em>channelptr</em><strong>,</strong>
<strong>struct ares_options *</strong><em>options</em><strong>, int </strong><em>optmask</em><strong>)</strong>

<strong>cc file.c -lcares</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>ares_init</strong> function initializes a communications channel for name service lookups.  If it returns successfully, <strong>ares_init</strong> will set the variable pointed to by <em>channelptr</em> to a handle used to identify the name service channel.  The caller should invoke <a href="../man3/ares_destroy.3.html"><strong>ares_destroy</strong>(3)</a> on the handle when the channel is no longer needed.</p><p>The <strong>ares_init_options</strong> function also initializes a name service channel, with additional options useful for applications requiring more control over name service configuration. The <em>optmask</em> parameter specifies which fields in the structure pointed to by <em>options</em> are set, as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ARES_OPT_FLAGS</strong></p>
  </dt>
  <dd>
    <p><strong>int </strong><em>flags</em><strong>;</strong></p><p>Flags controlling the behavior of the resolver.  See below for a description of possible flag values.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_TIMEOUT</strong></p>
  </dt>
  <dd>
    <p><strong>int </strong><em>timeout</em><strong>;</strong></p><p>The number of seconds each name server is given to respond to a query on the first try.  (After the first try, the timeout algorithm becomes more complicated, but scales linearly with the value of <em>timeout</em>.)  The default is five seconds. This option is being deprecated by <em>ARES_OPT_TIMEOUTMS</em> starting in c-ares 1.5.2.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_TIMEOUTMS</strong></p>
  </dt>
  <dd>
    <p><strong>int </strong><em>timeout</em><strong>;</strong></p><p>The number of milliseconds each name server is given to respond to a query on the first try.  (After the first try, the timeout algorithm becomes more complicated, but scales linearly with the value of <em>timeout</em>.)  The default is five seconds. Note that this option is specified with the same struct field as the former <em>ARES_OPT_TIMEOUT</em>, it is but the option bits that tell c-ares how to interpret the number. This option was added in c-ares 1.5.2.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_TRIES</strong></p>
  </dt>
  <dd>
    <p><strong>int </strong><em>tries</em><strong>;</strong></p><p>The number of tries the resolver will try contacting each name server before giving up.  The default is four tries.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_NDOTS</strong></p>
  </dt>
  <dd>
    <p><strong>int </strong><em>ndots</em><strong>;</strong></p><p>The number of dots which must be present in a domain name for it to be queried for "as is" prior to querying for it with the default domain extensions appended.  The default value is 1 unless set otherwise by resolv.conf or the RES_OPTIONS environment variable.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_PORT</strong></p>
  </dt>
  <dd>
    <p><strong>unsigned short </strong><em>port</em><strong>;</strong></p><p>The port to use for queries (both TCP and UDP), in network byte order. The default value is 53 (in network byte order), the standard name service port.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_SERVERS</strong></p>
  </dt>
  <dd>
    <p><strong>struct in_addr *</strong><em>servers</em><strong>;</strong></p><p><strong>int </strong><em>nservers</em><strong>;</strong></p><p>The list of IPv4 servers to contact, instead of the servers specified in resolv.conf or the local named. In order to allow specification of either IPv4 or IPv6 name servers, the <a href="../man3/ares_set_servers.3.html"><strong>ares_set_servers</strong>(3)</a></strong> function must be used instead.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_DOMAINS</strong></p>
  </dt>
  <dd>
    <p><strong>char **</strong><em>domains</em><strong>;</strong></p><p><strong>int </strong><em>ndomains</em><strong>;</strong></p><p>The domains to search, instead of the domains specified in resolv.conf or the domain derived from the kernel hostname variable.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_LOOKUPS</strong></p>
  </dt>
  <dd>
    <p><strong>char *</strong><em>lookups</em><strong>;</strong></p><p>The lookups to perform for host queries. <em>lookups</em> should be set to a string of the characters "b" or "f", where "b" indicates a DNS lookup and "f" indicates a lookup in the hosts file.</p>
  </dd>
  <dt>
    <p><strong>ARES_OPT_SOCK_STATE_CB</strong></p>
  </dt>
  <dd>
    <p><strong>void (*</strong><em>sock_state_cb</em><strong>)(void *data, int s, int read, int write);</strong></p><p><strong>void *</strong><em>sock_state_cb_data</em><strong>;</strong></p><p>A callback function to be invoked when a socket changes state. <em>s</em> will be passed the socket whose state has changed; <em>read</em> will be set to true if the socket should listen for read events, and <em>write</em> will be set to true if the socket should listen for write events. The value of <em>sock_state_cb_data</em> will be passed as the <em>data</em> argument.</p>
  </dd>

</dl>
<p>The <em>flags</em> field should be the bitwise or of some subset of the following values:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ARES_FLAG_USEVC</strong></p>
  </dt>
  <dd>
    <p>Always use TCP queries (the "virtual circuit") instead of UDP queries.  Normally, TCP is only used if a UDP query yields a truncated result.</p>
  </dd>
  <dt>
    <p><strong>ARES_FLAG_PRIMARY</strong></p>
  </dt>
  <dd>
    <p>Only query the first server in the list of servers to query.</p>
  </dd>
  <dt>
    <p><strong>ARES_FLAG_IGNTC</strong></p>
  </dt>
  <dd>
    <p>If a truncated response to a UDP query is received, do not fall back to TCP; simply continue on with the truncated response.</p>
  </dd>
  <dt>
    <p><strong>ARES_FLAG_NORECURSE</strong></p>
  </dt>
  <dd>
    <p>Do not set the "recursion desired" bit on outgoing queries, so that the name server being contacted will not try to fetch the answer from other servers if it doesn't know the answer locally. Be aware that ares will not do the recursion for you.  Recursion must be handled by the application calling ares if <em>ARES_FLAG_NORECURSE</em> is set.</p>
  </dd>
  <dt>
    <p><strong>ARES_FLAG_STAYOPEN</strong></p>
  </dt>
  <dd>
    <p>Do not close communications sockets when the number of active queries drops to zero.</p>
  </dd>
  <dt>
    <p><strong>ARES_FLAG_NOSEARCH</strong></p>
  </dt>
  <dd>
    <p>Do not use the default search domains; only query hostnames as-is or as aliases.</p>
  </dd>
  <dt>
    <p><strong>ARES_FLAG_NOALIASES</strong></p>
  </dt>
  <dd>
    <p>Do not honor the HOSTALIASES environment variable, which normally specifies a file of hostname translations.</p>
  </dd>
  <dt>
    <p><strong>ARES_FLAG_NOCHECKRESP</strong></p>
  </dt>
  <dd>
    <p>Do not discard responses with the SERVFAIL, NOTIMP, or REFUSED response code or responses whose questions don't match the questions in the request.  Primarily useful for writing clients which might be used to test or debug name servers.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p><em>ares_init</em> or <em>ares_init_options</em> can return any of the following values:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ARES_SUCCESS</strong></p>
  </dt>
  <dd>
    <p>Initialization succeeded.</p>
  </dd>
  <dt>
    <p><strong>ARES_EFILE</strong></p>
  </dt>
  <dd>
    <p>A configuration file could not be read.</p>
  </dd>
  <dt>
    <p><strong>ARES_ENOMEM</strong></p>
  </dt>
  <dd>
    <p>The process's available memory was exhausted.</p>
  </dd>
  <dt>
    <p><strong>ARES_ENOTINITIALIZED</strong></p>
  </dt>
  <dd>
    <p>c-ares library initialization not yet performed.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>When initializing from <strong>/etc/resolv.conf,</strong> <a href="../man3/ares_init.3.html"><strong>ares_init</strong>(3)</a> reads the <em>domain</em> and <em>search</em> directives to allow lookups of short names relative to the domains specified. The <em>domain</em> and <em>search</em> directives override one another. If more that one instance of either <em>domain</em> or <em>search</em> directives is specified, the last occurence wins. For more information, please see the <a href="../man5/resolv.conf.5.html"><strong>resolv.conf</strong>(5)</a> manual page.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ares_init_options&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/ares_destroy.3.html"><strong>ares_destroy</strong>(3)</a>,</strong> <a href="../man3/ares_dup.3.html"><strong>ares_dup</strong>(3)</a>,</strong> <a href="../man3/ares_library_init.3.html"><strong>ares_library_init</strong>(3)</a>,</strong> <a href="../man3/ares_set_servers.3.html"><strong>ares_set_servers</strong>(3)</a></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Greg Hudson, MIT Information Systems</p><p>Copyright 1998 by the Massachusetts Institute of Technology.</p><p>Copyright (C) 2004-2010 by Daniel Stenberg.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ares_init.3.html"><span aria-hidden="true">&larr;</span> ares_init.3: Initialize a resolver channel</a></li>
   <li class="next"><a href="ares_library_cleanup.3.html">ares_library_cleanup.3: C-ares library deinitialization <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
