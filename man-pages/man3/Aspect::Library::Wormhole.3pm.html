<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Aspect::Library::Wormhole: A wormhole between call frames</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A wormhole between call frames">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Aspect::Library::Wormhole (3pm) manual">
  <meta name="twitter:description" content="A wormhole between call frames">
  <meta name="twitter:image" content="https://www.carta.tech/images/libaspect-perl-Aspect::Library::Wormhole-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Aspect::Library::Wormhole.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Aspect::Library::Wormhole (3pm) manual" />
  <meta property="og:description" content="A wormhole between call frames" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libaspect-perl-Aspect::Library::Wormhole-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Aspect::Library::Wormhole<small> (3pm)</small></h1>
        <p class="lead">A wormhole between call frames</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Aspect::Library::Wormhole.3pm.html">
      <span itemprop="name">Aspect::Library::Wormhole: A wormhole between call frames</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libaspect-perl/">
      <span itemprop="name">libaspect-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Aspect::Library::Wormhole.3pm.html">
      <span itemprop="name">Aspect::Library::Wormhole: A wormhole between call frames</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  package A;
  sub new { bless {}, shift }
  sub a { B-&gt;new-&gt;b }

  package B;
  sub new { bless {}, shift }
  sub b { C-&gt;new-&gt;c }

  package C;
  sub new { bless {}, shift }
  sub c { ref pop }

  package main;

  print ref A-&gt;new-&gt;a; # without aspect, prints C

  use Aspect::Library::Wormhole;
  aspect Wormhole =&gt; &apos;A::a&apos;, &apos;C::c&apos;;
  print ref A-&gt;new-&gt;a; # with aspect, prints A
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A reusable aspect for passing objects down a call flow, without adding extra arguments to the frames between the source and the target. It is a tool for acquiring implicit context.</p><p>Suppose \*(C`A::a()\*(C' calls \*(C`B::b()\*(C' calls \*(C`C::c()\*(C'... until \*(C`Z::z()\*(C'.</p><p>All is well, until one day you get a requirement with a crosscutting implication- \*(C`Z::Z()\*(C' requires one extra argument. It requires an instance of the class \*(C`A\*(C'. The very same instance on which the method \*(C`a()\*(C' was called, high up the call chain of \*(C`Z::z()\*(C'.</p><p>Without this aspect you can either add a global $Current_A (very problematic), or make \*(C`A::a()\*(C' send \*(C`B::b()\*(C' its $self, make \*(C`B::b()\*(C' pass it on to \*(C`C::c()\*(C', and so on until \*(C`Z::z()\*(C'. You are forced to add many arguments to many methods.</p><p>Show me a developer who has never encountered this situation: you need to add an argument to a long call flow, just because someone at the bottom needs it, yet only someone on the top has it. The monkey code required <em>on each call frame</em> in the call flow, <em>for each argument</em> that <em>each target</em> requires, is suffering from <strong>\s-1EEK\s0</strong>- Extraneous Embedded Knowledge (&lt;http://citeseer.ist.psu.edu/254612.html&gt;).</p><p>The code for the frames between the two ends of the wormhole, knows more about the world than it should. This extraneous knowledge is embedded in each method on the call flow, and there is no easy way to remove it.</p><p>This aspect removes the \s-1EEK\s0 by allowing you to setup a wormhole between the source and target frames in the call flow. The only effect the wormhole has on the call flow, is that the target gets called with one extra argument: the calling source object. Thus the target acquires implicit context.</p><p>So this wormhole:</p><p>  aspect Wormhole =&gt; &apos;A::a&apos;, &apos;Z::z&apos;;</p><p>Means: before the method \*(C`Z::z()\*(C' is called, <em>if</em> \*(C`A::a()\*(C' exists in the call flow, <em>then</em> append one argument to the argument list of \*(C`Z::z()\*(C'. The argument appended is the calling \*(C`A\*(C' object.</p><p>No method in the call flow is required to pass the source object, but \*(C`Z::z()\*(C' will still receive it.</p><p>  +--------+                                       +--------+   | source |    +--------+    +--------+           | target |   +--------+--&gt; | B::b() |--&gt; | C::c() |--&gt; ...--&gt; +--------+   | A::a() |    +--------+    +--------+           | Z::z() |   +--------+                                       +--------+       .                                                ,       |                                               /|&#92;       |                                              / | &#92;       |                                                |       +------------- The Bajoran Wormhole -------------+</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING</h2>
        <div class="sectioncontent">
<p>The aspect constructor takes two pointcut specs, a source and a target. The spec can be a string (full sub name), a regex (sub will match if rexep matches), or a coderef (called with sub name, will match if returns true).</p><p>For example, this will append a calling \*(C`Printer\*(C' to any call to a sub defined on \*(C`Page\*(C', if it is in the call flow of \*(C`Printer::print\*(C':</p><p>  aspect Wormhole =&gt; &apos;Printer::Print&apos;, qr/^Page::/;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Adam Kennedy &lt;adamk@cpan.org&gt;</p><p>Marcel Gru\*:nauer &lt;marcel@cpan.org&gt;</p><p>Ran Eilam &lt;eilara@cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2001 by Marcel Gru\*:nauer</p><p>Some parts copyright 2009 - 2013 Adam Kennedy.</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Aspect::Library::Singleton.3pm.html"><span aria-hidden="true">&larr;</span> Aspect::Library::Singleton.3pm: A singleton aspect</a></li>
   <li class="next"><a href="Aspect::Modular.3pm.html">Aspect::Modular.3pm: First generation base class for reusable aspects <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
