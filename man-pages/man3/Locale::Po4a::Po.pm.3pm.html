<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Locale::Po4a::Po.pm: Po file manipulation module</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Po file manipulation module">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Locale::Po4a::Po.pm (3pm) manual">
  <meta name="twitter:description" content="Po file manipulation module">
  <meta name="twitter:image" content="https://www.carta.tech/images/po4a-Locale::Po4a::Po.pm-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Locale::Po4a::Po.pm.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Locale::Po4a::Po.pm (3pm) manual" />
  <meta property="og:description" content="Po file manipulation module" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/po4a-Locale::Po4a::Po.pm-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Locale::Po4a::Po.pm<small> (3pm)</small></h1>
        <p class="lead">Po file manipulation module</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Locale::Po4a::Po.pm.3pm.html">
      <span itemprop="name">Locale::Po4a::Po.pm: Po file manipulation module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/po4a/">
      <span itemprop="name">po4a</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Locale::Po4a::Po.pm.3pm.html">
      <span itemprop="name">Locale::Po4a::Po.pm: Po file manipulation module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Locale::Po4a::Po;
    my $pofile=Locale::Po4a::Po-&gt;new();

    # Read PO file
    $pofile-&gt;read(&apos;file.po&apos;);

    # Add an entry
    $pofile-&gt;push(&apos;msgid&apos; =&gt; &apos;Hello&apos;, &apos;msgstr&apos; =&gt; &apos;bonjour&apos;,
                  &apos;flags&apos; =&gt; "wrap", &apos;reference&apos;=&gt;&apos;file.c:46&apos;);

    # Extract a translation
    $pofile-&gt;gettext("Hello"); # returns &apos;bonjour&apos;

    # Write back to a file
    $pofile-&gt;write(&apos;otherfile.po&apos;);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Locale::Po4a::Po is a module that allows you to manipulate message catalogs. You can load and write from/to a file (which extension is often <em>po</em>), you can build new entries on the fly or request for the translation of a string.</p><p>For a more complete description of message catalogs in the \s-1PO\s0 format and their use, please refer to the documentation of the gettext program.</p><p>This module is part of the po4a project, which objective is to use \s-1PO\s0 files (designed at origin to ease the translation of program messages) to translate everything, including documentation (man page, info manual), package description, debconf templates, and everything which may benefit from this.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS ACCEPTED BY THIS MODULE</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>porefs</strong> <em>type</em>[,<strong>wrap</strong>|<strong>nowrap</strong>]
  </dt>
  <dd>
    <p>Specify the reference format. Argument <em>type</em> can be one of <strong>none</strong> to not produce any reference, <strong>noline</strong> to not specify the line number (more accurately all line numbers are replaced by 1), <strong>counter</strong> to replace line number by an increasing counter, and <strong>full</strong> to include complete references. Argument can be followed by a comma and either <strong>wrap</strong> or <strong>nowrap</strong> keyword. References are written by default on a single line.  The <strong>wrap</strong> option wraps references on several lines, to mimic <strong>gettext</strong> tools (<strong>xgettext</strong> and <strong>msgmerge</strong>).  This option will become the default in a future release, because it is more sensible.  The <strong>nowrap</strong> option is available so that users who want to keep the old behavior can do so.</p>
  </dd>
  <dt>
    <strong>--msgid-bugs-address</strong> <em>email@address</em>
  </dt>
  <dd>
    <p>Set the report address for msgid bugs. By default, the created \s-1POT\s0 files have no Report-Msgid-Bugs-To fields.</p>
  </dd>
  <dt>
    <strong>--copyright-holder</strong> <em>string</em>
  </dt>
  <dd>
    <p>Set the copyright holder in the \s-1POT\s0 header. The default value is \*(L"Free Software Foundation, Inc.\*(R"</p>
  </dd>
  <dt>
    <strong>--package-name</strong> <em>string</em>
  </dt>
  <dd>
    <p>Set the package name for the \s-1POT\s0 header. The default is \*(L"\s-1PACKAGE\s0\*(R".</p>
  </dd>
  <dt>
    <strong>--package-version</strong> <em>string</em>
  </dt>
  <dd>
    <p>Set the package version for the \s-1POT\s0 header. The default is \*(L"\s-1VERSION\s0\*(R".</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Functions about whole message catalogs</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <em>new()</em>
  </dt>
  <dd>
    <p>Creates a new message catalog. If an argument is provided, it's the name of a \s-1PO\s0 file we should load.</p>
  </dd>
  <dt>
    read($)
  </dt>
  <dd>
    <p>Reads a \s-1PO\s0 file (which name is given as argument).  Previously existing entries in self are not removed, the new ones are added to the end of the catalog.</p>
  </dd>
  <dt>
    write($)
  </dt>
  <dd>
    <p>Writes the current catalog to the given file.</p>
  </dd>
  <dt>
    write_if_needed($$)
  </dt>
  <dd>
    <p>Like write, but if the \s-1PO\s0 or \s-1POT\s0 file already exists, the object will be written in a temporary file which will be compared with the existing file to check if the update is needed (this avoids to change a \s-1POT\s0 just to update a line reference or the POT-Creation-Date field).</p>
  </dd>
  <dt>
    gettextize($$)
  </dt>
  <dd>
    <p>This function produces one translated message catalog from two catalogs, an original and a translation. This process is described in <em>po4a</em>\|(7), section <em>Gettextization: how does it work?</em>.</p>
  </dd>
  <dt>
    filter($)
  </dt>
  <dd>
    <p>This function extracts a catalog from an existing one. Only the entries having a reference in the given file will be placed in the resulting catalog. This function parses its argument, converts it to a Perl function definition, evals this definition and filters the fields for which this function returns true. I love Perl sometimes ;)</p>
  </dd>
  <dt>
    <em>to_utf8()</em>
  </dt>
  <dd>
    <p>Recodes to \s-1UTF-8\s0 the \s-1PO\s0's msgstrs. Does nothing if the charset is not specified in the \s-1PO\s0 file (\*(L"\s-1CHARSET\s0\*(R" value), or if it's already \s-1UTF-8\s0 or \s-1ASCII\s0.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Functions to use a message catalog for translations</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    gettext($%)
  </dt>
  <dd>
    <p>Request the translation of the string given as argument in the current catalog. The function returns the original (untranslated) string if the string was not found. After the string to translate, you can pass a hash of extra arguments. Here are the valid entries:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>wrap</strong>
  </dt>
  <dd>
    <p>boolean indicating whether we can consider that whitespaces in string are not important. If yes, the function canonizes the string before looking for a translation, and wraps the result.</p>
  </dd>
  <dt>
    <strong>wrapcol</strong>
  </dt>
  <dd>
    <p>the column at which we should wrap (default: 76).</p>
  </dd>

</dl>

  </dd>
  <dt>
    <em>stats_get()</em>
  </dt>
  <dd>
    <p>Returns statistics about the hit ratio of gettext since the last time that <em>stats_clear()</em> was called. Please note that it's not the same statistics than the one printed by msgfmt --statistic. Here, it's statistics about recent usage of the \s-1PO\s0 file, while msgfmt reports the status of the file.  Example of use:     [some use of the PO file to translate stuff]</p><p>    ($percent,$hit,$queries) = $pofile-&gt;stats_get();     print "So far, we found translations for $percent&#92;%  ($hit of $queries) of strings.&#92;n";</p>
  </dd>
  <dt>
    <em>stats_clear()</em>
  </dt>
  <dd>
    <p>Clears the statistics about gettext hits.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Functions to build a message catalog</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    push(%)
  </dt>
  <dd>
    <p>Push a new entry at the end of the current catalog. The arguments should form a hash table. The valid keys are:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>msgid</strong>
  </dt>
  <dd>
    <p>the string in original language.</p>
  </dd>
  <dt>
    <strong>msgstr</strong>
  </dt>
  <dd>
    <p>the translation.</p>
  </dd>
  <dt>
    <strong>reference</strong>
  </dt>
  <dd>
    <p>an indication of where this string was found. Example: file.c:46 (meaning in 'file.c' at line 46). It can be a space-separated list in case of multiple occurrences.</p>
  </dd>
  <dt>
    <strong>comment</strong>
  </dt>
  <dd>
    <p>a comment added here manually (by the translators). The format here is free.</p>
  </dd>
  <dt>
    <strong>automatic</strong>
  </dt>
  <dd>
    <p>a comment which was automatically added by the string extraction program. See the <strong>--add-comments</strong> option of the <strong>xgettext</strong> program for more information.</p>
  </dd>
  <dt>
    <strong>flags</strong>
  </dt>
  <dd>
    <p>space-separated list of all defined flags for this entry. Valid flags are: <strong>c-text</strong>, <strong>python-text</strong>, <strong>lisp-text</strong>, <strong>elisp-text</strong>, <strong>librep-text</strong>, <strong>smalltalk-text</strong>, <strong>java-text</strong>, <strong>awk-text</strong>, <strong>object-pascal-text</strong>, <strong>ycp-text</strong>, <strong>tcl-text</strong>, <strong>wrap</strong>, <strong>no-wrap</strong> and <strong>fuzzy</strong>. See the gettext documentation for their meaning.</p>
  </dd>
  <dt>
    <strong>type</strong>
  </dt>
  <dd>
    <p>this is mostly an internal argument: it is used while gettextizing documents. The idea here is to parse both the original and the translation into a \s-1PO\s0 object, and merge them, using one's msgid as msgid and the other's msgid as msgstr. To make sure that things get ok, each msgid in \s-1PO\s0 objects are given a type, based on their structure (like \*(L"chapt\*(R", \*(L"sect1\*(R", \*(L"p\*(R" and so on in DocBook). If the types of strings are not the same, that means that both files do not share the same structure, and the process reports an error. This information is written as automatic comment in the \s-1PO\s0 file since this gives to translators some context about the strings to translate.</p>
  </dd>
  <dt>
    <strong>wrap</strong>
  </dt>
  <dd>
    <p>boolean indicating whether whitespaces can be mangled in cosmetic reformattings. If true, the string is canonized before use. This information is written to the \s-1PO\s0 file using the <strong>wrap</strong> or <strong>no-wrap</strong> flag.</p>
  </dd>
  <dt>
    <strong>wrapcol</strong>
  </dt>
  <dd>
    <p>the column at which we should wrap (default: 76). This information is not written to the \s-1PO\s0 file.</p>
  </dd>

</dl>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Miscellaneous functions</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <em>count_entries()</em>
  </dt>
  <dd>
    <p>Returns the number of entries in the catalog (without the header).</p>
  </dd>
  <dt>
    <em>count_entries_doc()</em>
  </dt>
  <dd>
    <p>Returns the number of entries in document. If a string appears multiple times in the document, it will be counted multiple times</p>
  </dd>
  <dt>
    msgid($)
  </dt>
  <dd>
    <p>Returns the msgid of the given number.</p>
  </dd>
  <dt>
    msgid_doc($)
  </dt>
  <dd>
    <p>Returns the msgid with the given position in the document.</p>
  </dd>
  <dt>
    <em>get_charset()</em>
  </dt>
  <dd>
    <p>Returns the character set specified in the \s-1PO\s0 header. If it hasn't been set, it will return \*(L"\s-1CHARSET\s0\*(R".</p>
  </dd>
  <dt>
    set_charset($)
  </dt>
  <dd>
    <p>This sets the character set of the \s-1PO\s0 header to the value specified in its first argument. If you never call this function (and no file with a specified character set is read), the default value is left to \*(L"\s-1CHARSET\s0\*(R". This value doesn't change the behavior of this module, it's just used to fill that field in the header, and to return it in <em>get_charset()</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p> Denis Barbier &lt;barbier@linuxfr.org&gt;  Martin Quinson (mquinson#debian.org)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Locale::Po4a::Po.3pm.html"><span aria-hidden="true">&larr;</span> Locale::Po4a::Po.3pm: Po file manipulation module</a></li>
   <li class="next"><a href="Locale::Po4a::Pod.3pm.html">Locale::Po4a::Pod.3pm: Convert pod data from/to po files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
