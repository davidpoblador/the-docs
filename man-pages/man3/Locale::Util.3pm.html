<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Locale::Util: Portable l10n and i10n functions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Portable l10n and i10n functions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Locale::Util (3pm) manual">
  <meta name="twitter:description" content="Portable l10n and i10n functions">
  <meta name="twitter:image" content="https://www.carta.tech/images/libintl-perl-Locale::Util-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Locale::Util.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Locale::Util (3pm) manual" />
  <meta property="og:description" content="Portable l10n and i10n functions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libintl-perl-Locale::Util-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Locale::Util<small> (3pm)</small></h1>
        <p class="lead">Portable l10n and i10n functions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Locale::Util.3pm.html">
      <span itemprop="name">Locale::Util: Portable l10n and i10n functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libintl-perl/">
      <span itemprop="name">libintl-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Locale::Util.3pm.html">
      <span itemprop="name">Locale::Util: Portable l10n and i10n functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Locale::Util;

  my @linguas = parse_http_accept_language $ENV{HTTP_ACCEPT_LANGUAGE};

  my @charsets = parse_http_accept_charset $ENV{HTTP_ACCEPT_CHARSET};

  # Trie to set the locale to Brasilian Portuguese in UTF-8.
  my $set_locale = set_locale LC_ALL, &apos;pt&apos;, &apos;BR&apos;, &apos;utf-8&apos;;

  set_locale_cache $last_cache;

  my $cache = get_locale_cache;

  web_set_locale ($ENV{HTTP_ACCEPT_LANGUAGE}, $ENV_ACCEPT_CHARSET);

  web_set_locale ([&apos;fr-BE&apos;, &apos;fr&apos;, &apos;it&apos;], [&apos;cp1252&apos;, &apos;utf-8&apos;]);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module provides portable functions dealing with localization (l10n) and internationalization(i10n).  It doesn't export anything by default, you have to specify each function you need in the import list, or use the fully qualified name.</p><p>The functions here have a focus on web development, although they are general enough to have them in the Locale:: namespace.</p><p>This module is considered alpha code.  The interface is not stable. Please contact the author if you want to use it in production code.</p><p>This module was introduced in libintl-perl 1.17.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>parse_http_accept_language \s-1STRING\s0</strong>
  </dt>
  <dd>
    <p>Parses a string as passed in the \s-1HTTP\s0 header \*(L"Accept-Language\*(R". It returns a list of tokens sorted by the quality value, see \s-1RFC\s0 2616 for details. Example:   parse_http_accept ("fr-fr, fr; q=0.7, de; q=0.3"); This means: Give me French for France with a quality value of 1.0 (the maximum).  Otherwise I will take any other French version (quality 0.7), German has a quality of 0.3 for me. The function will return a list of tokens in the order of their quality values, in this case \*(L"fr-fr\*(R", \*(L"fr\*(R" and \*(L"de\*(R". The function is more forgiving than \s-1RFC\s0 2616.  It accepts quality values greater than 1.0 and with more than 3 decimal places.  It also accepts languages and country names with more than 8 characters. The language \*(L"*\*(R" is translated into \*(L"C\*(R".</p>
  </dd>
  <dt>
    <strong>parse_http_accept_charset \s-1STRING\s0</strong>
  </dt>
  <dd>
    <p>Parses a string as passed in the \s-1HTTP\s0 header \*(L"Accept-Charset\*(R". It returns a list of tokens sorted by the quality value, see \s-1RFC\s0 2616 for details. The special character set \*(L"*\*(R" (means all character sets) will be translated to the undefined value.</p>
  </dd>
  <dt>
    <strong>set_locale \s-1CATEGORY\s0, LANGUAGE[, \s-1COUNTRY\s0, \s-1CHARSET\s0]</strong>
  </dt>
  <dd>
    <p>Tries to set the user locale by means of <em>POSIX::setlocale()</em>.  The latter function has the disadvantage, that its second argument (the locale description string) is completely non-standard and system-dependent. This function tries its best at guessing the system's notion of a locale dientifier, with the arguments supplied:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>\s-1CATEGORY\s0</strong>
  </dt>
  <dd>
    <p>An integer argument for a valid locale category.  These are the LC_* constants (\s-1LC_ALL\s0, \s-1LC_CTIME\s0, \s-1LC_COLLATE\s0, ...) defined in both <em>Locale::Messages</em>\|(3pm) and \s-1<em>POSIX\s0</em>\|(3pm).</p>
  </dd>
  <dt>
    <strong>\s-1LANGUAGE\s0</strong>
  </dt>
  <dd>
    <p>A 2-letter language identifier as per \s-1ISO\s0 639.  Case doesn't matter, but an unchanged version (ie. not lower-cased) of the language you provided will always be tried to.</p>
  </dd>
  <dt>
    <strong>\s-1COUNTRY\s0</strong>
  </dt>
  <dd>
    <p>A 2-letter language identifier as per \s-1ISO\s0 639.  Case doesn't matter, but an unchanged version (ie. not lower-cased) of the language you provided will always be tried to. This parameter is optional.  If it is not defined, the function will try to guess an appropriate country, otherwise leave it to the operating system.</p>
  </dd>
  <dt>
    <strong>\s-1CHARSET\s0</strong>
  </dt>
  <dd>
    <p>A valid charset name.  Valid means valid!  The charset \*(L"utf8\*(R" is not valid (it is \*(L"utf-8\*(R").  Charset names that are accepted by the guessing algorithms in <em>Encode</em>\|(3pm) are also not necessarily valid. If the parameter is undefined, it is ignored.  It is always ignored under Windows.</p>
  </dd>

</dl>
<p>The function tries to approach the desired locale in loops, refining it on every success.  It will first try to set the language (for any country), then try to select the correct language, and finally try to select the correct charset. The return value is false in case of failure, or the return value of the underlying <em>POSIX::setlocale()</em> call in case of success. In array context, the function returns the country name that was passed in the successful call to <em>POSIX::setlocale()</em>.  If this string is equal to the country name you passed as an argument, you can be reasonably sure that the settings for this country are really used.  If it is not equal, the function has taken a guess at the country (it has a list of \*(L"default\*(R" countries for each language).  It seems that under Windows, <em>POSIX::setlocale()</em> also succeeds, if you pass a country name that is actually not supported.  Therefore, the information is not completely reliable. Please note that this function is intended for server processes (especially web applications) that need to switch in a portable way to a certain locale.  It is <strong>not</strong> the recommended way to set the program locale for a regular application.  In a regular application you should do the following:     use POSIX qw (setlocale LC_ALL);     setlocale LC_ALL, &apos;&apos;; The empty string as the second argument means, that the system should switch to the user's default locale.</p>
  </dd>
  <dt>
    <strong>get_locale_cache</strong>
  </dt>
  <dd>
    <p>The function <em>set_locale()</em> is potentially expansive, especially when it fails, because it can try a lot of different combinations, and the system may have to load a lot of locale definitions from its internal database. In order to speed up things, results are internally cached in a hash, keys are the languages, subkeys countries, subsubkeys the charsets.  You can get a reference to this hash with <em>get_locale_cache()</em>. The function cannot fail.</p>
  </dd>
  <dt>
    <strong>set_locale_cache \s-1HASH\s0</strong>
  </dt>
  <dd>
    <p>Sets the internal cache.  You can either pass a hash or a hash reference. The function will use this as its cache, discarding its old cache. This allows you to keep the hash persistent. The function cannot fail.</p>
  </dd>
  <dt>
    <strong>web_set_locale (\s-1ACCEPT_LANGUAGE\s0, \s-1ACCEPT_CHARSET\s0, \s-1CATEGORY\s0, \s-1AVAILABLE\s0)</strong>
  </dt>
  <dd>
    <p>Try to change the locale to the settings described by \s-1ACCEPT_LANGUAGE\s0 and \s-1ACCEPT_CHARSET\s0.  For each argument you can either pass a string as in the corresponding http header, or a reference to an array of language resp. charset identifiers. Currently only the first charset passed is used as an argument. You are strongly encouraged to pass a hard-coded value here, so that you have control about your output. The argument <strong>\s-1CATEGORY\s0</strong> specifies the category (one of the LC_* constants as defined in <em>Locale::Messages</em>\|(3pm) or in \s-1<em>POSIX\s0</em>\|(3pm)). The category defaults to \s-1LC_ALL\s0. You can pass an optional reference to a list of locales in \s-1XPG4\s0 format that are available in your application.  This is useful if you know which languages are supported by your application. In fact, only the language part of the values in the list are considered (for example for \*(L"en_US\*(R", only \*(L"en\*(R" is used).  The country or other parts are ignored. The function returns the return value of the underlying <em>set_locale()</em> call, or false on failure. The function returns false on failure.  On success it returns the return value of the underlying <em>set_locale()</em> call.  This value can be used directly in subsequent calls to <em>POSIX::setlocale()</em>.  In array context, it additionally returns the identifiers for the language, the country, and the charset actually used.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The function <em>set_locale()</em> probably fails to guess the correct locale identifier on a lot of systems.  If you have found such a case, please submit it as a bug report.</p><p>The bug tracking system for this packags is at http://rt.cpan.org/NoAuth/Bugs.html?libintl-perl</p><p>Please note that this module is considered alpha code, and the interface is not stable.  Please contact the author, if you want to use it in production code.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2002-2013, Guido Flohr &lt;guido@imperia.net&gt;, all rights reserved.  See the source code for details.</p><p>This software is contributed to the Perl community by Imperia (&lt;http://www.imperia.net/&gt;).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Locale::Util&hellip;</h2>
        <div class="sectioncontent">
<p>\s-1<em>POSIX\s0</em>\|(3pm), <em>perl</em>\|(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">POD ERRORS</h2>
        <div class="sectioncontent">
<p>Hey! <strong>The above document had some coding errors, which are explained below:</strong></p>
<dl class='dl-vertical'>
  <dt>
    Around line 1213:
  </dt>
  <dd>
    <p>=cut found outside a pod block.  Skipping to next block.</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Locale::US.3pm.html"><span aria-hidden="true">&larr;</span> Locale::US.3pm: Two letter codes for state identification in the united states and vice versa.</a></li>
   <li class="next"><a href="Locale::gettext_dumb.3pm.html">Locale::gettext_dumb.3pm: Locale unaware implementation of uniforum message translation <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
