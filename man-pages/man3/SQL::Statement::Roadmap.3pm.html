<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SQL::Statement::Roadmap: Planned enhancements for sql::statement and sql::parser  jens rehsack - june 2010</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Planned enhancements for sql::statement and sql::parser  jens rehsack - june 2010">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="SQL::Statement::Roadmap (3pm) manual">
  <meta name="twitter:description" content="Planned enhancements for sql::statement and sql::parser  jens rehsack - june 2010">
  <meta name="twitter:image" content="https://www.carta.tech/images/libsql-statement-perl-SQL::Statement::Roadmap-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/SQL::Statement::Roadmap.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="SQL::Statement::Roadmap (3pm) manual" />
  <meta property="og:description" content="Planned enhancements for sql::statement and sql::parser  jens rehsack - june 2010" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libsql-statement-perl-SQL::Statement::Roadmap-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">SQL::Statement::Roadmap<small> (3pm)</small></h1>
        <p class="lead">Planned enhancements for sql::statement and sql::parser  jens rehsack - june 2010</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/SQL::Statement::Roadmap.3pm.html">
      <span itemprop="name">SQL::Statement::Roadmap: Planned enhancements for sql::statement and sql::parser  jens rehsack - june 2010</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libsql-statement-perl/">
      <span itemprop="name">libsql-statement-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/SQL::Statement::Roadmap.3pm.html">
      <span itemprop="name">SQL::Statement::Roadmap: Planned enhancements for sql::statement and sql::parser  jens rehsack - june 2010</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>This document gives a high level overview of the future of SQL::Statement, SQL::Parser and its impact.</p><p>The planned enhancements cover testing, performance, reliability, extensibility and more.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHANGES AND ENHANCEMENTS</h2>
        <div class="sectioncontent">
<h3>Enhancements in SQL::Statement 1.xx</h3>
<p>SQL::Statement 1.xx will not receive big changes, but a few enhancements may help us to design SQL::Statement 2.xx much better.</p><p><em>\s-1CREATE\s0 and \s-1DROP\s0 of \s-1FUNCTION\s0, \s-1KEYWORD\s0, \s-1OPERATOR\s0, \s-1TYPE\s0</em></p><p>SQL::Statement is missing some functions, types, operators etc. It's supported to add missing functionality - but the implementation wasn't picked up during the modernizing of column evaluation. See RT#52397 for some more information.</p><p>This should be done before SQL::Statement 1.xx reaches the end of its road.</p><p><em>Parser improvements</em></p><p>The SQL::Parser is implemented based on a lot of regular expressions and some manually developed logic. This creates some issues like RT#53416 or RT#55190. Further, trailing \*(C`;\*(C' causes SQL::Parser to croak. We need to decide what can be fixed without internal design changes and what has to wait.</p><p><em>Performance</em></p><p>There is no intention to work on performance improvements in SQL::Statement 1.xx. The performance is good as it is and improvement requires design changes.</p><p><em>Reliability</em></p><p>Bugs will be fixed - where possible. SQL::Statement 1.28 is much more reliable than SQL::Statement 1.15. Even if a bug cannot be fixed all issues are gratefully received as they will be considered in the design process for SQL::Statement 2.xx better.</p><p><em>Extensibility</em></p><p>SQL::Statement 1.xx is highly extensible, even if a more object oriented design would improve that. The 1.xx branch will not be redesigned for greater extensibility on a coding level.</p>
<h3>Enhancements in SQL::Statement 2.xx</h3>
<p>Concerning the procedural design of SQL::Statement 1.xx a rewrite of the basic components is required.</p><p><em>SQL::Parser rewrite</em></p><p>The SQL::Parser needs to be modified to be able to use a Backus Naur Form &lt;http://en.wikipedia.org/wiki/Backus_Naur_Form&gt;. This would allow users and developers to rely on many different \s-1SQL\s0 dialects.  This will allow better extensibility from a feature point of view without losing \s-1ANSI\s0 \s-1SQL\s0 compatibility.</p><p><em>SQL::Statement rewrite</em></p><p>SQL::Statement should be reduced to a simple coordinating engine. The executing tasks should be organized into separated commands. This will reduce side effects and will open the door for higher level optimizations, reliability improvements or sub-selects (or other calculated tables).</p><p><em>Features</em></p><p>There is a large list of missing features but not all table backends will be able to support each new feature. The most popular requested features need additional discussion and everyone is welcome to do it on the mailto:dbi-dev@perl.org.</p><p>\s-1LOCK\s0 \s-1TABLE\s0</p><p>Locking table within \s-1SQL\s0 scripts to manually control table consistence over several operations. The current locking support is restricted to one statement.</p><p>Transaction support</p><p>Executing statements on a temporary copy of the table data.</p><p>The easiest way to implement this would be to create a SQL::Statement::RAM on \*(C`BEGIN TRANSACTION\*(C' and write the entire table back on \*(C`COMMIT\*(C' or discard on \*(C`ROLLBACK\*(C'.</p><p>Better performance could be achieved in cases where the implementation is enabled to memorize pending modifications and apply them at \*(C`COMMIT\*(C'. On the other hand there are already capabilities to improve some operations, which might create confusion in case of transactions.</p><p>This needs more discussion.</p><p>\s-1ALTER\s0 \s-1TABLE\s0</p><p>Adding, removing or modifying columns is not supported for created tables. A generic \*(C`ALTER TABLE\*(C' seems to rely on the implementation of the transaction support - until better ideas are provided.</p><p>Indices</p><p>Currently some table backends have implicit support to access specified rows quicker than fetching each row and evaluating the where clause against the row data.</p><p>An interface would be required to configure fetching to return only rows matching a restricted where clause. Another (probably better) way to support indices would be to fetch index entries at first and have an interface to the table fetching lines based on an index key.</p><p>Sub-Selects</p><p>In most cases queries can be re-expressed without using sub-selects. But in any case, there are circumstances where sub-selects are required.</p><p>The first implementation will do the sub-select before the primary statement is executed without any further optimization. Hopefully a later version will provide better Performance with some optimization.</p><p>Query based variables</p><p>Currently the only variable I can imagine is \*(C`ROWNUM\*(C'. More suggestions are very welcome.</p><p>Better \s-1SQL\s0 Script support</p><p>In SQL::Statement 1.xx the function \*(C`RUN ()\*(C' provides \s-1SQL\s0 script execution. This function may have limitations and side effects (at least when the executed \s-1SQL\s0 touched the same tables as the primary statement).</p><p>I plan to improve the \s-1SQL\s0 script support to remove the side effects on the one hand and have a more flexible and easier way to execute them.</p><p>Finally it should be possible to execute a script via:</p>
<pre>
    $dbh-&gt;do( join( ";", @script ) );
</pre>
<p>Trigger support</p><p>Most important when doing complicated things is having callback functions for several events. While real triggers will not be possible for SQL::Statement and underlying pseudo-databases, callbacks could be provided via triggers.</p><p><em>Performance</em></p><p>There are several performance optimizations required for SQL::Statement 2.xx.</p><p>The first one should be done on a very high level (query optimization) by implementing algebraic evaluation of queries and clean implementation of typical database algorithms. With respect to the basic optimization rule <em>premature optimization is the root of all</em> evil, it is primarily targeted to have an adequately fast, reliable implementation of many algorithms (e.g. early incomplete evaluation to reduce amount of rows, transpose where clause to evaluate constants first) and a clever controller choosing the right algorithm for a specific query.</p><p>The second optimization goal means: implementing most expensive methods in \s-1XS\s0. This requires a good performance test suite as well as some real world useage cases.</p><p><em>Reliability</em></p><p>This is one of the primary goals of SQL::Statement. I hope to reach it using test driven development and I hope I get some more todo's from the users for this.</p><p><em>Extensibility</em></p><p>The currently high level of extensibility should be increased on a coding level. This will be done by redesigning the entire parser and execution engine using object oriented techniques and design patterns.</p><p><em>Testing</em></p><p>Many tests in SQL::Statement are not well organized. The tests should be reorganized into several parts:</p>
<dl class='dl-vertical'>
  <dt>
    Basic \s-1API\s0
  </dt>
  <dd>
    <p>This part should test the entire basic \s-1API\s0 of SQL::Statement, SQL::Parser and probably the entire engine command classes.</p>
  </dd>
  <dt>
    \s-1DBI\s0 / Table \s-1API\s0
  </dt>
  <dd>
    <p>This part should test if the \s-1API\s0 to \s-1DBI\s0 drivers work (maybe an empty test driver will be needed for that).</p>
  </dd>
  <dt>
    Functionality
  </dt>
  <dd>
    <p>This part should test the functionality of the SQL::Parser and the SQL::Statement engine.</p>
  </dd>
  <dt>
    Performance
  </dt>
  <dd>
    <p>This part should be used to implement full useage cases (ideally from real world projects) to allow for testing optimizations.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PRIORITIES</h2>
        <div class="sectioncontent">
<p>Our priorities are localized to our current issues and proof of concept fixes for upcoming SQL::Statement 2.xx.</p><p>Any additional priorities (as missing features, the SQL::Statement rewrite) will come later and can be modified by (paying) users.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESOURCES AND CONTRIBUTIONS</h2>
        <div class="sectioncontent">
<p>See &lt;http://dbi.perl.org/contributing&gt; for <em>how you can help</em>.</p><p>If your company has benefited from the \s-1DBI\s0 or SQL::Statement, please consider if it could make a donation to The Perl Foundation \*(L"\s-1DBI\s0 Development\*(R" or \*(L"SQL::Statement Development\*(R" fund at &lt;http://dbi.perl.org/donate&gt; to secure future development.</p><p>Alternatively, if your company would benefit from a specific new \s-1DBI\s0 or SQL::Statement feature, please consider sponsoring its development through the options listed in the section \*(L"Commercial Support from the Author\*(R" on &lt;http://dbi.perl.org/support/&gt;.</p><p>Using such targeted financing allows you to contribute to \s-1DBI\s0 development (including SQL::Statement and PurePerl \s-1DBI\s0 drivers) and rapidly get something specific and directly valuable to you in return.</p><p>Thank you.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="SQL::Statement::Placeholder.3pm.html"><span aria-hidden="true">&larr;</span> SQL::Statement::Placeholder.3pm: Implements getting the next placeholder value</a></li>
   <li class="next"><a href="SQL::Statement::Structure.3pm.html">SQL::Statement::Structure.3pm: Parse and examine structure of sql queries <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
