<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Unidraw: One-of-a-kind object for coordinating and controlling a unidraw application</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="One-of-a-kind object for coordinating and controlling a unidraw application">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Unidraw (3U) manual">
  <meta name="twitter:description" content="One-of-a-kind object for coordinating and controlling a unidraw application">
  <meta name="twitter:image" content="https://www.carta.tech/images/ivtools-dev-Unidraw-3U.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3U/Unidraw.3U.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Unidraw (3U) manual" />
  <meta property="og:description" content="One-of-a-kind object for coordinating and controlling a unidraw application" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ivtools-dev-Unidraw-3U.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Unidraw<small> (3U)</small></h1>
        <p class="lead">One-of-a-kind object for coordinating and controlling a unidraw application</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/Unidraw.3U.html">
      <span itemprop="name">Unidraw: One-of-a-kind object for coordinating and controlling a unidraw application</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ivtools-dev/">
      <span itemprop="name">ivtools-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/Unidraw.3U.html">
      <span itemprop="name">Unidraw: One-of-a-kind object for coordinating and controlling a unidraw application</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;Unidraw/unidraw.h&gt;</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Unidraw applications create a single instance of a Unidraw object, which does several things.  It creates a World, establishing the connection to the underlying window system.  It initializes the catalog and other objects, manages editor instances, and defines the application main loop.  It also maintains histories of commands that have be executed and reverse-executed for each component hierarchy being edited.  Finally, it cleans up internal state when it is deleted to ensure orderly program termination.</p><p>The Unidraw object must be created before opening any editors but after creating a catalog.  Below is the main program for a typical Unidraw application:</p>
<dl class='dl-vertical'>
  <dt>
    <p>int main (int argc, char** argv) {</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
    AppSpecificCreator creator;
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
    Unidraw* unidraw = new Unidraw(
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
        new Catalog("appName", &creator),
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
        argc, argv, options, properties
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
    );
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
    unidraw-&gt;Open(new AppSpecificEditor);
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
    unidraw-&gt;Run();
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
    delete unidraw;
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    
<pre>
    return 0;
</pre>

  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>}</p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PUBLIC OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>Unidraw(</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>    Catalog*, int argc, char** argv,</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>    OptionDesc* = nil, PropertyData* = nil</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Unidraw(Catalog*, World*)</strong></p>
  </dt>
  <dd>
    <p>The first constructor form requires a catalog object and command line argument information.  Other arguments include pointers to PropertyData and OptionDesc arrays.  This constructor creates a World instance, passing whichever of these arguments are supplied (except the catalog).  To specify a World instance explicitly, use the second constructor form.</p>
  </dd>
  <dt>
    <p><strong>virtual void Run()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Quit()</strong></p>
  </dt>
  <dd>
    <p>Run initiates the main loop of the program.  The call to Run returns when Quit is called.</p>
  </dd>
  <dt>
    <p><strong>virtual void Update(boolean immedate = false)</strong></p>
  </dt>
  <dd>
    <p>Bring the screen up to date with the state of the application's objects.  By default, this involves moving connectors to their proper positions (by calling Solve on the global csolver object) and telling editors to update themselves (by calling their Update functions). Because Update may carry out potentially lengthy operations, Unidraw batches Update calls by default.  This ensures that multiple consecutive calls do not induce redundant computations.  To force an immediate update, simply call Update(<em>true</em>).</p>
  </dd>
  <dt>
    <p><strong>virtual void Open(Editor*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual boolean Opened(Editor*)</strong></p>
  </dt>
  <dd>
    <p>Open inserts an editor into the world, making it visible on the display.  The user positions the editor's window by default.  Opened returns whether an editor has been opened already.</p>
  </dd>
  <dt>
    <p><strong>virtual void Close(Editor*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void CloseDependents(Component*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void CloseAll()</strong></p>
  </dt>
  <dd>
    <p>Close closes a specified editor, removing it from the user's view <em>and deleting it</em>.  CloseDependents closes those editors that report a dependence on the given component via their DependsOn operation. CloseAll closes all open editors.  ~Unidraw calls CloseAll.</p>
  </dd>
  <dt>
    <p><strong>void First(Iterator&)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void Next(Iterator&)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>boolean Done(Iterator)</strong></p>
  </dt>
  <dd>
    <p>Operations for iterating over the Unidraw object's list of open editors.  First initializes an iterator to point to the beginning of the list, Next increments the iterator to point to the following editor, and Done returns whether or not the iterator points beyond the first or last editor in the list.</p>
  </dd>
  <dt>
    <p><strong>Editor* GetEditor(Iterator)</strong></p>
  </dt>
  <dd>
    <p>Return the editor to which an iterator points.</p>
  </dd>
  <dt>
    <p><strong>Editor* Find(Component*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Editor* FindAny(Component*)</strong></p>
  </dt>
  <dd>
    <p>Operations for finding an (or the) editor associated with a given component.  Find searches the list of editors for the one whose GetComponent operation returns the given component.  FindAny returns the first editor in the list whose GetComponent operation returns a component in the same hierarchy as the the given component.</p>
  </dd>
  <dt>
    <p><strong>Catalog* GetCatalog()</strong></p>
  </dt>
  <dd>
    <p>Return the catalog passed to the constructor.</p>
  </dd>
  <dt>
    <p><strong>World* GetWorld()</strong></p>
  </dt>
  <dd>
    <p>Return the world object, which the Unidraw object creates when it is instantiated.</p>
  </dd>
  <dt>
    <p><strong>void Log(Command*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void Undo(Component*, int i = 1)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void Redo(Component*, int i = 1)</strong></p>
  </dt>
  <dd>
    <p>The Unidraw object maintains histories of commands associated with a given component hierarchy.  There are two command histories per hierarchy: the <em>past</em> history and the <em>future</em> history.  These histories normally contain commands that have been executed and unexecuted to support arbitrary level undo and redo.  For example, after a viewer executes the command that a tool generates by interpreting a manipulator, it will record that command in a past history for possible undoing in the future.</p><p>The Log operation logs a command, placing it on the past history for the component hierarchy being edited.  Log determines the past that is approprate from the command's editor, which specifies the component (hence the hierarchy) that it is editing.  Undo reverse-executes the last <em>i</em> commands that were logged for a given component's hierarchy and moves them from their past history to the corresponding future history.  Redo re-executes the future <em>i</em> commands and moves them to the past.  Note that calling Redo without a preceding Undo is meaningless; thus calling Log will clear the future history associated with the affected component hierarchy.</p>
  </dd>
  <dt>
    <p><strong>void SetHistoryLength(int)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>int GetHistoryLength()</strong></p>
  </dt>
  <dd>
    <p>Assign and retrieve the maximum command history length.  No more than this many commands can be undone and redone.  The default length is 20.  Older commands are deleted automatically as new commands are logged.</p>
  </dd>
  <dt>
    <p><strong>void ClearHistory(Component* = nil)</strong></p>
  </dt>
  <dd>
    <p>Clear the past and future for a given component hierarchy, deleting the corresponding commands.  All histories are cleared if no component is specified.</p>
  </dd>
  <dt>
    <p><strong>void ClearHistory(Editor*)</strong></p>
  </dt>
  <dd>
    <p>Clear the history associated with the given editor's component if no other editor is editing the same hierarchy.  For example, Unidraw::Close calls this operation to avoid clearing histories when a component hierarchy is being edited in multiple editors.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROTECTED OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>virtual void Process()</strong></p>
  </dt>
  <dd>
    <p>Process is called once in the main loop defined by the Run operation. It does nothing by default.  Subclasses may redefine Process to carry out any processing that should be done in each pass through the main loop.</p>
  </dd>
  <dt>
    <p><strong>boolean IsClean(Editor*)</strong></p>
  </dt>
  <dd>
    <p>This convenience function queries the given editor for a ModifStatusVar instance.  If it has one, then it returns its status (modified or unmodified); otherwise it returns <em>false</em>.</p>
  </dd>
  <dt>
    <p><strong>void Mark(Editor*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void Sweep(Editor*)</strong></p>
  </dt>
  <dd>
    <p>These operations support deferred editor deletion, a mechanism to avoid deleting editors prematurely.  For example, if a command to close the editor is invoked from a pull-down menu, then the command must not delete the editor, since that will delete the pull-down menu before it has a chance to close.  Thus Close and similar operations do not delete editors directly; instead, they call Mark to indicate that an editor should be deleted sometime in the future.  Sweep actually deletes the editors that have been marked.  By default, Unidraw::Run calls Sweep each time an event is handled.</p>
  </dd>
  <dt>
    <p><strong>void DoUpdate()</strong></p>
  </dt>
  <dd>
    <p>A helper function that performs an immediate update independent of the batching mechanism.</p>
  </dd>
  <dt>
    <p><strong>void GetHistory(Component*, UList*& past, UList*& future)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void ClearHistory(UList*, int i = 1)</strong></p>
  </dt>
  <dd>
    <p>Command histories are stored as ULists.  These operations provide a low-level interface to the lists themselves; the corresponding public operations are built on top.  GetHistory returns the past and future lists for a given component, while ClearHistory deletes the first <em>i</em> commands on the given list.</p>
  </dd>
  <dt>
    <p><strong>UList* elem(Iterator)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Command* command(UList*)</strong></p>
  </dt>
  <dd>
    <p>Convenience functions for extracting the list element in an iterator and the command object from the list element.  These are useful in conjunction with protected history operations described above.</p>
  </dd>
  <dt>
    <p><strong>boolean updated()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void updated(boolean)</strong></p>
  </dt>
  <dd>
    <p>The first form of this function returns <em>true</em> if there are pending Update(s) to be performed.  The second form sets this value explicitly.</p>
  </dd>
  <dt>
    <p><strong>boolean alive()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void alive(boolean)</strong></p>
  </dt>
  <dd>
    <p>The first form of this function returns <em>true</em> if the program is in the run loop defined by Run.  The second form sets this value explicitly.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Unidraw&hellip;</h2>
        <div class="sectioncontent">
<p>Catalog(3U), Creator(3U), Editor(3U), Interactor(3U), Iterator(3U), Viewer(3I), UList(3U), World(3I), statevars(3U)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="UStencil.3U.html"><span aria-hidden="true">&larr;</span> UStencil.3U: Structured graphic displaying a bitmap</a></li>
   <li class="next"><a href="UnidrawIntro.3U.html">UnidrawIntro.3U: Unidraw library for graphical object editor development <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
