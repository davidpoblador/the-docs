<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test::MockModule: Override subroutines in a module for unit testing</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Override subroutines in a module for unit testing">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Test::MockModule (3pm) manual">
  <meta name="twitter:description" content="Override subroutines in a module for unit testing">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtest-mockmodule-perl-Test::MockModule-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Test::MockModule.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Test::MockModule (3pm) manual" />
  <meta property="og:description" content="Override subroutines in a module for unit testing" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtest-mockmodule-perl-Test::MockModule-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Test::MockModule<small> (3pm)</small></h1>
        <p class="lead">Override subroutines in a module for unit testing</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::MockModule.3pm.html">
      <span itemprop="name">Test::MockModule: Override subroutines in a module for unit testing</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtest-mockmodule-perl/">
      <span itemprop="name">libtest-mockmodule-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::MockModule.3pm.html">
      <span itemprop="name">Test::MockModule: Override subroutines in a module for unit testing</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
   use Module::Name;
   use Test::MockModule;

   {
       my $module = new Test::MockModule(&apos;Module::Name&apos;);
       $module-&gt;mock(&apos;subroutine&apos;, sub { ... });
       Module::Name::subroutine(@args); # mocked
   }

   Module::Name::subroutine(@args); # original subroutine
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>\*(C`Test::MockModule\*(C' lets you temporarily redefine subroutines in other packages for the purposes of unit testing.</p><p>A \*(C`Test::MockModule\*(C' object is set up to mock subroutines for a given module. The object remembers the original subroutine so it can be easily restored. This happens automatically when all MockModule objects for the given module go out of scope, or when you \*(C`unmock()\*(C' the subroutine.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>Returns an object that will mock subroutines in the specified $package. If there is no $VERSION defined in $package, the module will be automatically loaded. You can override this behaviour by setting the \*(C`no_auto\*(C' option:     my $mock = new Test::MockModule(&apos;Module::Name&apos;, no_auto =&gt; 1);</p>
<dl class='dl-vertical'>
  <dt>
    <em>get_package()</em>
  </dt>
  <dd>
    <p>Returns the target package name for the mocked subroutines</p>
  </dd>
  <dt>
    is_mocked($subroutine)
  </dt>
  <dd>
    <p>Returns a boolean value indicating whether or not the subroutine is currently mocked</p>
  </dd>
  <dt>
    mock($subroutine =&gt; &#92;&coderef)
  </dt>
  <dd>
    <p>Temporarily replaces one or more subroutines in the mocked module. A subroutine can be mocked with a code reference or a scalar. A scalar will be recast as a subroutine that returns the scalar. The following statements are equivalent:     $module-&gt;mock(purge =&gt; &apos;purged&apos;);     $module-&gt;mock(purge =&gt; sub { return &apos;purged&apos;});</p><p>    $module-&gt;mock(updated =&gt; [localtime()]);     $module-&gt;mock(updated =&gt; sub { return [localtime()]}); However, \*(C`undef\*(C' is a special case. If you mock a subroutine with \*(C`undef\*(C' it will install an empty subroutine     $module-&gt;mock(purge =&gt; undef);     $module-&gt;mock(purge =&gt; sub { }); rather than a subroutine that returns \*(C`undef\*(C':     $module-&gt;mock(purge =&gt; sub { undef }); You can call \*(C`mock()\*(C' for the same subroutine many times, but when you call \*(C`unmock()\*(C', the original subroutine is restored (not the last mocked instance).</p>
  </dd>
  <dt>
    original($subroutine)
  </dt>
  <dd>
    <p>Returns the original (unmocked) subroutine</p>
  </dd>
  <dt>
    unmock($subroutine [, ...])
  </dt>
  <dd>
    <p>Restores the original $subroutine. You can specify a list of subroutines to \*(C`unmock()\*(C' in one go.</p>
  </dd>
  <dt>
    <em>unmock_all()</em>
  </dt>
  <dd>
    <p>Restores all the subroutines in the package that were mocked. This is automatically called when all \*(C`Test::MockObject\*(C' objects for the given package go out of scope.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Test::MockModule&hellip;</h2>
        <div class="sectioncontent">
<p>Test::MockObject::Extends</p><p>Sub::Override</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Simon Flack &lt;simonflk _AT_ cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2004 Simon Flack &lt;simonflk _AT_ cpan.org&gt;. All rights reserved</p><p>You may distribute under the terms of either the \s-1GNU\s0 General Public License or the Artistic License, as specified in the Perl \s-1README\s0 file.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Test::Memory::Cycle.3pm.html"><span aria-hidden="true">&larr;</span> Test::Memory::Cycle.3pm: Check for memory leaks and circular memory references</a></li>
   <li class="next"><a href="Test::MockTime::DateCalc.3pm.html">Test::MockTime::DateCalc.3pm: Fake time for date::calc functions <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
