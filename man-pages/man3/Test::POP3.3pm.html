<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test::POP3: Automate email delivery tests</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Automate email delivery tests">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Test::POP3 (3pm) manual">
  <meta name="twitter:description" content="Automate email delivery tests">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtest-email-perl-Test::POP3-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Test::POP3.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Test::POP3 (3pm) manual" />
  <meta property="og:description" content="Automate email delivery tests" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtest-email-perl-Test::POP3-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Test::POP3<small> (3pm)</small></h1>
        <p class="lead">Automate email delivery tests</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::POP3.3pm.html">
      <span itemprop="name">Test::POP3: Automate email delivery tests</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtest-email-perl/">
      <span itemprop="name">libtest-email-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::POP3.3pm.html">
      <span itemprop="name">Test::POP3: Automate email delivery tests</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Test::POP3;

  my $pop = Test::POP3-&gt;new({
      host =&gt; $host,
      user =&gt; $user,
      pass =&gt; $pass,
  });

  # this will delete all messages from the server
  ok($count == $pop-&gt;wait_for_email_count($count,$timeout),"got $count");

  # find and delete a single email message which matches these rules
  # see Test::Email for more information
  $pop-&gt;ok({
    # optional search parameters
    to         =&gt; ($is or qr/is like/),
    from       =&gt; ($is or qr/is like/),
    subject    =&gt; ($is or qr/is like/),
    body       =&gt; ($is or qr/is like/),
    headername =&gt; ($is or qr/is like/),
  }, "got message");

  ok($pop-&gt;get_email_count() == $count, "$count emails in cache");

  # get the Test::Email object
  my @email = $pop-&gt;get_email();

  ok($pop-&gt;delete_all() == 2, "deleted 2 messages");

  # tweak MIME::Parser settings
  my $parser = $pop-&gt;get_parser();
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Please note that this is \s-1ALPHA\s0 \s-1CODE\s0. As such, the interface is likely to change.</p><p>This module can help you to create automated tests of email delivered to a \s-1POP3\s0 account.</p><p>Messages retrieved from the server but not yet matched by a test will be cached until either that message is the first to pass a test, or is returned by \*(C`$pop3-&gt;get_email()\*(C'. Messages returned are Test::Email objects.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>The arguments passed in the href are host, user, and pass. <strong>Calling this method will result in all messages being deleted from the server.</strong> This will wait up to $timeout seconds for there to be $count unprocessed messages found on the server. After $count or more messages are found, or after $timeout seconds, the current email count will be returned. $timeout_seconds defaults to 30. Get all of the email messages currently in local cache. You should call \*(C`$pop3-&gt;wait_for_email_count($count)\*(C' before calling this method if you think that there may be messages on the server yet to be retrieved. Calling this method will cause the local cache to be emptied. Email messages returned will be Test::Email objects. This will return the number of email messages in the cache. If $check_server is true, then the server will be checked once before the count is determined. If you would like to wait for messages to arrive on the server, and then be downloaded prior to counting, use \*(C`$pop3-&gt;wait_for_email_count()\*(C'. Calling this method will cause the email in the local cache to be tested, according to the contents of $test_href. The first email which passes all tests will be deleted from the local cache. Since this method only checks the local cache, you will want to call \*(C`$pop3-&gt;wait_for_email_count()\*(C' before calling this method. \*(C`ok\*(C' will produce \s-1TAP\s0 output, identical to \*(C`Test::Simple::ok\*(C' and \*(C`Test::More::ok\*(C'. Test::POP3 uses MIME::Parser to process the messages. (\s-1MIME\s0 is not yet handled by \*(C`Test::Email\*(C', it will be soon.) Use this method if you want to manage the parser.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORT</h2>
        <div class="sectioncontent">
<p>None.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Test::POP3&hellip;</h2>
        <div class="sectioncontent">
<p>Test::Builder, Test::Simple, Test::More, MIME::Parser</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>James Tolley, &lt;james@cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2007 by James Tolley</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.8.8 or, at your option, any later version of Perl 5 you may have available.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Test::POE::Server::TCP.3pm.html"><span aria-hidden="true">&larr;</span> Test::POE::Server::TCP.3pm: A poe component providing tcp server services for test cases</a></li>
   <li class="next"><a href="Test::Perl::Critic.3pm.html">Test::Perl::Critic.3pm: Use perl::critic in test programs <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
