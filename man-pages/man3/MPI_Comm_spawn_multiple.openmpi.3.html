<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MPI_Comm_spawn_multiple.openmpi: Spawns multiple binaries, or the same binary with multiple sets of arguments.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Spawns multiple binaries, or the same binary with multiple sets of arguments.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="MPI_Comm_spawn_multiple.openmpi (3) manual">
  <meta name="twitter:description" content="Spawns multiple binaries, or the same binary with multiple sets of arguments.">
  <meta name="twitter:image" content="https://www.carta.tech/images/openmpi-doc-MPI_Comm_spawn_multiple.openmpi-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/MPI_Comm_spawn_multiple.openmpi.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MPI_Comm_spawn_multiple.openmpi (3) manual" />
  <meta property="og:description" content="Spawns multiple binaries, or the same binary with multiple sets of arguments." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/openmpi-doc-MPI_Comm_spawn_multiple.openmpi-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">MPI_Comm_spawn_multiple.openmpi<small> (3)</small></h1>
        <p class="lead">Spawns multiple binaries, or the same binary with multiple sets of arguments.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/MPI_Comm_spawn_multiple.openmpi.3.html">
      <span itemprop="name">MPI_Comm_spawn_multiple.openmpi: Spawns multiple binaries, or the same binary with multiple sets of arguments.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/openmpi-doc/">
      <span itemprop="name">openmpi-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/MPI_Comm_spawn_multiple.openmpi.3.html">
      <span itemprop="name">MPI_Comm_spawn_multiple.openmpi: Spawns multiple binaries, or the same binary with multiple sets of arguments.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C Syntax</h2>
        <div class="sectioncontent">

<pre>
#include &lt;mpi.h&gt;
int MPI_Comm_spawn_multiple(int <em>count</em>, char *<em>array_of_commands</em>[],
	char **<em>array_of_argv</em>[], int <em>array_of_maxprocs</em>[], MPI_Info
	<em>array_of_info</em>[], int <em>root</em>, MPI_Comm <em>comm</em>, MPI_Comm *<em>intercomm</em>,
	int <em>array_of_errcodes</em>[])

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Fortran Syntax</h2>
        <div class="sectioncontent">

<pre>
INCLUDE 'mpif.h'
MPI_COMM_SPAWN_MULTIPLE(<em>COUNT, ARRAY_OF_COMMANDS, ARRAY_OF_ARGV,</em>
	ARRAY_OF_MAXPROCS, ARRAY_OF_INFO, ROOT, COMM, INTERCOMM,
	ARRAY_OF_ERRCODES, IERROR)
	INTEGER	<em>COUNT, ARRAY_OF_INFO(*), ARRAY_OF_MAXPROCS(*), ROOT,</em>
		COMM, INTERCOMM, ARRAY_OF_ERRCODES(*), IERROR
	CHARACTER*(*) <em>ARRAY_OF_COMMANDS</em>(*), <em>ARRAY_OF_ARGV</em>(<em>COUNT</em>, *)

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C++ Syntax</h2>
        <div class="sectioncontent">

<pre>
#include &lt;mpi.h&gt;
MPI::Intercomm MPI::Intracomm::Spawn_multiple(int <em>count</em>,
	const char* <em>array_of_commands</em>[], const char** <em>array_of_argv</em>[],
	const int <em>array_of_maxprocs</em>[], const MPI::Info <em>array_of_info</em>[],
	int <em>root</em>, int <em>array_of_errcodes</em>[])

MPI::Intercomm MPI::Intracomm::Spawn_multiple(int <em>count</em>,
	const char* <em>array_of_commands</em>[], const char** <em>array_of_argv</em>[],
	const int <em>array_of_maxprocs</em>[], const MPI::Info <em>array_of_info</em>[],
	int <em>root</em>)

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>count</p>
  </dt>
  <dd>
    <p>Number of commands (positive integer, significant to MPI only at <em>root</em> -- see NOTES).</p>
  </dd>
  <dt>
    <p>array_of_commands</p>
  </dt>
  <dd>
    <p>Programs to be executed (array of strings, significant only at <em>root</em>).</p>
  </dd>
  <dt>
    <p>array_of_argv</p>
  </dt>
  <dd>
    <p>Arguments for <em>commands</em> (array of array of strings,  significant only at <em>root</em>).</p>
  </dd>
  <dt>
    <p>array_of_maxprocs</p>
  </dt>
  <dd>
    <p>Maximum number of processes to start for each command (array of integers, significant only at <em>root</em>).</p>
  </dd>
  <dt>
    <p>array_of_info</p>
  </dt>
  <dd>
    <p>Info objects telling the runtime system where and how to start processes (array of handles, significant only at <em>root</em>).</p>
  </dd>
  <dt>
    <p>root</p>
  </dt>
  <dd>
    <p>Rank of process in which previous arguments are examined (integer).</p>
  </dd>
  <dt>
    <p>comm</p>
  </dt>
  <dd>
    <p>Intracommunicator containing group of spawning processes (handle).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OUTPUT PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>intercomm</p>
  </dt>
  <dd>
    <p>Intercommunicator between original group and the newly spawned group (handle).</p>
  </dd>
  <dt>
    <p>array_of_errcodes</p>
  </dt>
  <dd>
    <p>One code per process (array of integers).</p>
  </dd>
  <dt>
    <p>IERROR</p>
  </dt>
  <dd>
    <p>Fortran only: Error status (integer).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>MPI_Comm_spawn_multiple is identical to <a href="../man3/MPI_Comm_spawn.3.html"><strong>MPI_Comm_spawn</strong>(3)</a> except that it can specify multiple executables. The first argument, <em>count</em>, indicates the number of executables. The next three arguments are arrays of the corresponding arguments in <a href="../man3/MPI_Comm_spawn.3.html"><strong>MPI_Comm_spawn</strong>(3)</a>. The next argument, <em>array_of_info</em>, is an array of <em>info</em> arguments, one for each executable. See the INFO ARGUMENTS section for more information.</p><p>For the Fortran version of <em>array_of_argv</em>, the element <em>array_of_argv</em>(i,j) is the jth argument to command number i.</p><p>In any language, an application may use the constant MPI_ARGVS_NULL (which is likely to be (char ***)0 in C) to specify that no arguments should be passed to any commands. The effect of setting individual elements of <em>array_of_argv</em> to MPI_ARGV_NULL is not defined. To specify arguments for some commands but not others, the commands without arguments should have a corresponding <em>argv</em> whose first element is null ((char *)0 in C and empty string in Fortran).</p><p>All of the spawned processes have the same MPI_COMM_WORLD. Their ranks in MPI_COMM_WORLD correspond directly to the order in which the commands are specified in MPI_Comm_spawn_multiple. Assume that m1 processes are generated by the first command, m2 by the second, etc. The processes corresponding to the first command have ranks 0, 1,..., m1-1. The processes in the second command have ranks m1, m1+1, ..., m1+m2-1. The processes in the third have ranks m1+m2, m1+m2+1, ..., m1+m2+m3-1, etc.</p><p>The <em>array_of_errcodes</em> argument is 1-dimensional array of size</p>
<pre>
	 _ count
	nbsp;      n ,
	/_ i=1   i
</pre>
<p>where i is the ith element of <em>array_of_maxprocs</em>. Command number <em>i</em> corresponds to the i contiguous slots in this array from element</p>
<pre>
                      _              _
	 _ <em>i</em>-1          |   _ <em>i</em>          |
	nbsp;      n ,  to |  nbsp;     n      | -1
	/_ <em>j</em>=1   i      |  /_ <em>j</em>=1  j     |
                     |_              _|
</pre>
<p>Error codes are treated as for <a href="../man3/MPI_Comm_spawn.3.html"><strong>MPI_Comm_spawn</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INFO ARGUMENTS</h2>
        <div class="sectioncontent">
<p>The following keys for <em>info</em> are recognized in "Open MPI". (The reserved values mentioned in Section 5.3.4 of the MPI-2 standard are not implemented.)</p>
<pre>
Key                             Type      Description
---                             ----      -----------

host                            char *    Comma-separated list of hosts on which
                                          the processes should be spawned.  See
                                          the <em>orte_host</em> man page for an
                                          explanation of how this will be used.
hostfile                        char *    Hostfile containing the hosts on which
                                          the processes are to be spawned. See
                                          the <em>orte_hostfile</em> man page for an
                                          explanation of how this will be used.
add-host                        char *    Add the specified hosts to the list of
                                          hosts known to this job and use it
                                          for the associated processes. This will
                                          be used similarly to the -host option.
add-hostfile                    char *    Hostfile containing hosts to be added
                                          to the list of hosts known to this job and
                                          use it for the associated processes. This will
                                          be used similarly to the -hostfile option.
wdir                            char *    Directory where the executable is located. If
                                          files are to be pre-positioned, then this
                                          location is the desired working directory
                                          at time of execution - if not specified,
                                          then it will automatically be set to
                                          <em>ompi_preload_files_dest_dir</em>.
ompi_prefix                     char *    Same as the --prefix command line argument
                                          to mpirun.
ompi_local_slave                bool      If set to true, launch the specified process
                                          as a local <em>slave</em> to the calling process.
                                          The new process will only be known to the caller,
                                          and will only be able to communicate with the caller.
ompi_preload_binary             bool      If set to true, pre-position the specified
                                          executable onto the remote host. A destination
                                          directory must also be provided.
ompi_preload_files_dest_dir     char *    Target directory where pre-positioned files
                                          are to be placed.
ompi_preload_files              char *    A comma-separated list of files that are to
                                          be pre-positioned in addition to the executable.
                                          Note that this option does not depend upon
                                          <em>ompi_preload_binary</em> - files can be moved
                                          to the target even if an executable is not moved.
ompi_preload_files_src_dir      char *    Source directory where files and executables
                                          that are to be pre-positioned can be found. If
                                          not specified, the current working directory
                                          will be used.
ompi_non_mpi                    bool      If set to true, launching a non-MPI
                                          application; the returned communicator
                                          will be MPI_COMM_NULL. Failure to set
                                          this flag when launching a non-MPI
                                          application will cause both the child
                                          and parent jobs to "hang".
ompi_param                      char *    Pass an OMPI MCA parameter to the child job.
                                          If that parameter already exists in the
                                          environment, the value will be overwritten
                                          by the provided value.
map_bynode                      bool      If set to true, the processes are mapped bynode.
                                          If set to false, the processes are mapped byslot.
                                          By default, mapping is determined by the default
                                          mapping policy set when the job was started.
</pre>
<p><em>bool</em> info keys are actually strings but are evaluated as follows: if the string value is a number, it is converted to an integer and cast to a boolean (meaning that zero integers are false and non-zero values are true).  If the string value is (case-insensitive) "yes" or "true", the boolean is true.  If the string value is (case-insensitive) "no" or "false", the boolean is false.  All other string values are unrecognized, and therefore false.</p><p>Note that if any of the info handles have <em>ompi_non_mpi</em> set to true, then all info handles must have it set to true.  If some are set to true, but others are set to false (or are unset), MPI_ERR_INFO will be returned.</p><p>Note that in "Open MPI", the first array location in <em>array_of_info</em> is applied to all the commands in <em>array_of_commands</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The argument <em>count</em> is interpreted by MPI only at the root, as is <em>array_of_argv</em>. Since the leading dimension of <em>array_of_argv</em> is <em>count</em>, a nonpositive value of <em>count</em> at a nonroot node could theoretically cause a runtime bounds check error, even though <em>array_of_argv</em> should be ignored by the subroutine. If this happens, you should explicitly supply a reasonable value of <em>count</em> on the nonroot nodes.</p><p>Similar to <a href="../man3/MPI_Comm_spawn.3.html"><strong>MPI_Comm_spawn</strong>(3)</a>, it is the application's responsibility to terminate each individual set of argv in the <em>array_of_argv</em> argument.  In C, each argv array is terminated by a NULL pointer.  In Fortran, each argv array is terminated by an empty string (note that compilers will not automatically insert this blank string; the application must ensure to have enough space for an empty string entry as the last element of the array).</p><p>Other restrictions apply to the <em>array_of_argv</em> parameter; see <a href="../man3/MPI_Comm_spawn.3.html"><strong>MPI_Comm_spawn</strong>(3)</a>'s description of the <em>argv</em> parameter for more details.</p><p>Calling <a href="../man3/MPI_Comm_spawn.3.html"><strong>MPI_Comm_spawn</strong>(3)</a> many times would create many sets of children with different MPI_COMM_WORLDs, whereas MPI_Comm_spawn_multiple creates children with a single MPI_COMM_WORLD, so the two methods are not completely equivalent. Also if you need to spawn multiple executables, you may get better performance by using MPI_Comm_spawn_multiple instead of calling <a href="../man3/MPI_Comm_spawn.3.html"><strong>MPI_Comm_spawn</strong>(3)</a> several times.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>Almost all MPI routines return an error value; C routines as the value of the function and Fortran routines in the last argument. C++ functions do not return errors. If the default error handler is set to MPI::ERRORS_THROW_EXCEPTIONS, then on error the C++ exception mechanism will be used to throw an MPI:Exception object.</p><p>Before the error value is returned, the current MPI error handler is called. By default, this error handler aborts the MPI job, except for I/O function errors. The error handler may be changed with MPI_Comm_set_errhandler; the predefined error handler MPI_ERRORS_RETURN may be used to cause error values to be returned. Note that MPI does not guarantee that an MPI program can continue past an error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO MPI_Comm_spawn_multiple.openmpi&hellip;</h2>
        <div class="sectioncontent">

<pre>
<a href="../man3/MPI_Comm_spawn.3.html"><strong>MPI_Comm_spawn</strong>(3)</a>
<a href="../man3/MPI_Comm_get_parent.3.html"><strong>MPI_Comm_get_parent</strong>(3)</a>
<strong>mpirun</strong>(1)
</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mpich-doc-MPI_Comm_spawn_multiple.3.html"><span aria-hidden="true">&larr;</span> MPI_Comm_spawn_multiple.3: Short description</a></li>
   <li class="next"><a href="lam-mpidoc-MPI_Comm_split.3.html">MPI_Comm_split.3: Creates new communicators based on colors and keys <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
