<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ost_MappedFile: Create and map a disk file into memory.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create and map a disk file into memory.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ost_MappedFile (3) manual">
  <meta name="twitter:description" content="Create and map a disk file into memory.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcommoncpp2-doc-ost_MappedFile-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/ost_MappedFile.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ost_MappedFile (3) manual" />
  <meta property="og:description" content="Create and map a disk file into memory." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcommoncpp2-doc-ost_MappedFile-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ost_MappedFile<small> (3)</small></h1>
        <p class="lead">Create and map a disk file into memory.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ost_MappedFile.3.html">
      <span itemprop="name">ost_MappedFile: Create and map a disk file into memory.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcommoncpp2-doc/">
      <span itemprop="name">libcommoncpp2-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ost_MappedFile.3.html">
      <span itemprop="name">ost_MappedFile: Create and map a disk file into memory.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;file.h&gt;</p><p>Inherits <strong>ost::RandomFile</strong>.</p><h3>Public Member Functions</h3>
<p><strong>MappedFile</strong> (const char *fname, <strong>Access</strong> mode)</p><p><em>Open a file for mapping. </em> <strong>MappedFile</strong> (const char *fname, <strong>Access</strong> mode, size_t size)</p><p><em>Create if not exists, and map a file of specified size into memory. </em> <strong>MappedFile</strong> (const char *fname, <strong>pos_t</strong> offset, size_t size, <strong>Access</strong> mode)</p><p><em>Map a portion or all of a specified file in the specified shared memory access mode. </em> virtual <strong>~MappedFile</strong> ()</p><p><em>Release a mapped section of memory associated with a file. </em> void <strong>sync</strong> (void)</p><p><em>Synchronize the contents of the mapped portion of memory with the disk file and wait for completion. </em> void <strong>sync</strong> (caddr_t address, size_t len)</p><p><em>Synchronize a segment of memory mapped from a segment fetch. </em> void <strong>update</strong> (size_t offset=0, size_t len=0)</p><p><em>Map a portion of the memory mapped from the file back to the file and do not wait for completion. </em> void <strong>update</strong> (caddr_t address, size_t len)</p><p><em>Update a mapped region back to disk as specified by address and length. </em> void <strong>release</strong> (caddr_t address, size_t len)</p><p><em>Release (unmap) a memory segment. </em> caddr_t <strong>fetch</strong> (size_t offset=0)</p><p><em>Fetch a pointer to an offset within the memory mapped portion of the disk file. </em> caddr_t <strong>fetch</strong> (off_t pos, size_t len)</p><p><em>Fetch and map a portion of a disk file to a logical memory block. </em> bool <strong>lock</strong> (void)</p><p><em>Lock the currently mapped portion of a file. </em> void <strong>unlock</strong> (void)</p><p><em>Unlock a locked mapped portion of a file. </em> size_t <strong>pageAligned</strong> (size_t size)</p><p><em>Compute map size to aligned page boundry. </em></p>
<h3>Additional Inherited Members</h3>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>Create and map a disk file into memory.</p><p>This portable class works under both Posix via mmap and under the win32 API. A mapped file can be referenced directly by it's memory segment. One can map and unmap portions of a file on demand, and update changed memory pages mapped from files immediately through <strong>sync()</strong>.</p><p><strong>Author:</strong></p><p>David Sugar dyfet@ostel.com Map a named disk file into memory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Constructor & Destructor Documentation</h2>
        <div class="sectioncontent">
<h3>ost::MappedFile::MappedFile (const char *fname, \fBAccess\fPmode)</h3>
<p>Open a file for mapping. More than one segment of a file may be mapped into separate regions of memory.</p><p><strong>Parameters:</strong></p><p><em>fname</em> file name to access for mapping.</p><p><em>mode</em> access mode to map file.</p>
<h3>ost::MappedFile::MappedFile (const char *fname, \fBAccess\fPmode, size_tsize)</h3>
<p>Create if not exists, and map a file of specified size into memory.</p><p><strong>Parameters:</strong></p><p><em>fname</em> file name to access for mapping.</p><p><em>mode</em> access mode to map file.</p><p><em>size</em> of file to map.</p>
<h3>ost::MappedFile::MappedFile (const char *fname, \fBpos_t\fPoffset, size_tsize, \fBAccess\fPmode)</h3>
<p>Map a portion or all of a specified file in the specified shared memory access mode. Valid mapping modes include mappedRead, mappedWrite, and mappedReadWrite.</p><p><strong>Parameters:</strong></p><p><em>fname</em> pathname of file to map into memory.</p><p><em>offset</em> from start of file to begin mapping in bytes.</p><p><em>size</em> of mapped area in bytes.</p><p><em>mode</em> to map file.</p>
<h3>virtual ost::MappedFile::~MappedFile ()\fC [virtual]\fP</h3>
<p>Release a mapped section of memory associated with a file. The mapped area is updated back to disk.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Member Function Documentation</h2>
        <div class="sectioncontent">
<h3>caddr_t ost::MappedFile::fetch (size_toffset = \fC0\fP)\fC [inline]\fP</h3>
<p>Fetch a pointer to an offset within the memory mapped portion of the disk file. This really is used for convience of matching operations between Update and Fetch, as one could simply have accessed the base pointer where the file was mapped directly.</p><p><strong>Parameters:</strong></p><p><em>offset</em> from start of mapped memory.</p>
<h3>caddr_t ost::MappedFile::fetch (off_tpos, size_tlen)</h3>
<p>Fetch and map a portion of a disk file to a logical memory block.</p><p><strong>Returns:</strong></p><p>pointer to memory segment.</p><p><strong>Parameters:</strong></p><p><em>pos</em> offset of file segment to map.</p><p><em>len</em> size of memory segment to map.</p>
<h3>bool ost::MappedFile::lock (void)</h3>
<p>Lock the currently mapped portion of a file.</p><p><strong>Returns:</strong></p><p>true if pages are locked.</p>
<h3>size_t ost::MappedFile::pageAligned (size_tsize)</h3>
<p>Compute map size to aligned page boundry.</p><p><strong>Parameters:</strong></p><p><em>size</em> request.</p><p><strong>Returns:</strong></p><p>page aligned size.</p>
<h3>void ost::MappedFile::release (caddr_taddress, size_tlen)</h3>
<p>Release (unmap) a memory segment.</p><p><strong>Parameters:</strong></p><p><em>address</em> address of memory segment to release.</p><p><em>len</em> length of memory segment to release.</p>
<h3>void ost::MappedFile::sync (void)</h3>
<p>Synchronize the contents of the mapped portion of memory with the disk file and wait for completion. This assures the memory mapped from the file is written back.</p>
<h3>void ost::MappedFile::sync (caddr_taddress, size_tlen)</h3>
<p>Synchronize a segment of memory mapped from a segment fetch.</p><p><strong>Parameters:</strong></p><p><em>address</em> memory address to update.</p><p><em>len</em> size of segment.</p>
<h3>void ost::MappedFile::unlock (void)</h3>
<p>Unlock a locked mapped portion of a file.</p>
<h3>void ost::MappedFile::update (size_toffset = \fC0\fP, size_tlen = \fC0\fP)</h3>
<p>Map a portion of the memory mapped from the file back to the file and do not wait for completion. This is useful when mapping a database file and updating a single record.</p><p><strong>Parameters:</strong></p><p><em>offset</em> offset into the mapped region of memory.</p><p><em>len</em> length of partial region (example, record length).</p>
<h3>void ost::MappedFile::update (caddr_taddress, size_tlen)</h3>
<p>Update a mapped region back to disk as specified by address and length.</p><p><strong>Parameters:</strong></p><p><em>address</em> address of segment.</p><p><em>len</em> length of segment.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for GNU CommonC++ from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ost_MapTable.3.html"><span aria-hidden="true">&larr;</span> ost_MapTable.3: A map table allows for entities to be mapped (hash index) onto it.</a></li>
   <li class="next"><a href="ost_MemPager.3.html">ost_MemPager.3: The memory pager is used to allocate cumulative memory pages for storing object specific 'persistant' data that is presumed to persist during the life of a given derived object. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
