<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TM::IndexAble: Topic maps, trait to provide lazy and eager indices</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Topic maps, trait to provide lazy and eager indices">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="TM::IndexAble (3pm) manual">
  <meta name="twitter:description" content="Topic maps, trait to provide lazy and eager indices">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtm-perl-TM::IndexAble-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/TM::IndexAble.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TM::IndexAble (3pm) manual" />
  <meta property="og:description" content="Topic maps, trait to provide lazy and eager indices" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtm-perl-TM::IndexAble-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">TM::IndexAble<small> (3pm)</small></h1>
        <p class="lead">Topic maps, trait to provide lazy and eager indices</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/TM::IndexAble.3pm.html">
      <span itemprop="name">TM::IndexAble: Topic maps, trait to provide lazy and eager indices</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtm-perl/">
      <span itemprop="name">libtm-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/TM::IndexAble.3pm.html">
      <span itemprop="name">TM::IndexAble: Topic maps, trait to provide lazy and eager indices</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
      my $tm = new TM...                           # get any map
      use Class::Trait;
      Class::Trait-&gt;apply ($tm, "TM::IndexAble");  # apply the trait

      # add a lazy cache for subclassing and instanceOf
      $tm-&gt;index ({ axis =&gt; &apos;taxo&apos; });
      $tm-&gt;index ({ axis =&gt; &apos;taxo&apos;, closed =&gt; 0}); # the same, lazy is NOT closed

      # add eager cache (= index) for taxonometrics
      $tm-&gt;index ({ axis =&gt; &apos;taxo&apos;, closed =&gt; 1}); # eager is closed, will take some time

      # add index for characteristics
      $tm-&gt;index ({ axis =&gt; &apos;char&apos;});
      $tm-&gt;index ({ axis =&gt; &apos;char&apos;, closed =&gt; 1}); # can be closed as well

      # ditto for reification
      $tm-&gt;index ({ axis =&gt; &apos;reify&apos;});
      $tm-&gt;index ({ axis =&gt; &apos;reify&apos;, closed =&gt; 1});

      # create index/caches, but separate from map itself
      $tm-&gt;index ({ axis =&gt; &apos;reify&apos;, closed =&gt; 0, detached =&gt; {} });


      my %stats = $tm-&gt;index;                      # get current indices + statistics
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Like TM::Index, this package also adds index/caching capabilities to any topic map stored via \s-1TM\s0 (or any of its subclasses). The difference, though, is that the index/caching functionality is added as a trait, and not via an explicit attachment. The indices are - by default - part of the map, and not standalone objects as with TM::Index.</p><p>When you add an index/cache then you simply use precomputed navigation results for the \s-1TM\s0 methods \*(C`match_forall\*(C' and \*(C`is_reified\*(C' (but not used for \*(C`reifies\*(C').</p><p>As with TM::Index you can create caching (lazy indexing) and full indices (eager precaching).</p><h3>Map Attachment</h3>
<p>To enrich a map with an index/cache, you call the method \*(C`index\*(C' provided here. The index/cache will by default be stored <em>inside</em> the map. That may be convenient in most cases.</p><p>If not - as with some storage techniques - you can detach the index to live within your scope. For that purpose you simply pass in an empty hash reference. It is then your responsibility to get rid of it afterwards.</p><p>Having the index detached also opens the way for you to make the index persistent.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERFACE</h2>
        <div class="sectioncontent">
<h3>Methods</h3>
<p>Following methods are mixed into the class/object:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>index</strong>
  </dt>
  <dd>
    <p><em></em><strong>$tm</strong><em></em>-&gt;index ({ %spec }, ...) This method establishes one or more indices/caches to the topic map. Each cache/index is described with its own hash reference. Which navigation axes should be covered by a single cache/index is specified with the \*(C`axis\*(C' field. It can have as value one of the axes in TM::Axes, or one of the following values:</p><p>Shortcut for the axes: \*(C`subclass.type\*(C' \*(C`superclass.type\*(C' \*(C`class.type\*(C' \*(C`instance.type\*(C' Shortcut for the axes: \*(C`char.topic\*(C' \*(C`char.value\*(C' \*(C`char.type\*(C' \*(C`char.type.value\*(C' \*(C`char.topic.type\*(C'</p><p>To control whether a cache (lazy indexing) or a full index (eager caching) should be used, the field \*(C`closed\*(C' can have two values (default is 0): The default is to keep the index <em>lazy</em>. In this mode the index is empty at the start and it will learn more and more on its own. In this sense, the index lives under an <em>open world assumption</em> (hence the name), as the absence of information does not mean that there is no result. A <em>closed world</em> index has to be populated to be useful. If a query is launched and the result is stored in the index, then it will be used, like for an open index. If no result in the index is found for a query, the empty result will be assumed.</p><p>Additionally, a field \*(C`detached\*(C' can be passed in for one cache/index. It \s-1MUST\s0 contain a hash reference. Example:    $tm-&gt;index (            { axis =&gt; &apos;reify&apos;, closed =&gt; 0, detached =&gt; {} },            { axis =&gt; &apos;char&apos;,  closed =&gt; 1 }    ); The method returns a hash with some statistical information for every axis: Number of requests since inception of the index. Number of cache hits since inception. For an eager cache (i.e. index) this number should be the same as \*(C`requests\*(C'</p>
  </dd>
  <dt>
    <strong>deindex</strong>
  </dt>
  <dd>
    <p><em></em><strong>$tm</strong><em></em>-&gt;deindex (<em></em><strong>$axis</strong><em></em>, ....) <em></em><strong>$tm</strong><em></em>-&gt;deindex (<em></em><strong>$index</strong><em></em>, ....) This method gets rid of certain indices/caches, as specified by their axes. Since v1.55: You can also pass in the hash reference of the index (in the detached case). Since v1.55: Also the expansion of axes (like for \*(C`index\*(C') works now.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO TM::IndexAble&hellip;</h2>
        <div class="sectioncontent">
<p>\s-1TM\s0, TM::Index</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 20(10) by Robert Barta, &lt;drrho@cpan.org&gt;</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="TM::Index::Taxonomy.3pm.html"><span aria-hidden="true">&larr;</span> TM::Index::Taxonomy.3pm: Topic maps, indexing support (match layer)</a></li>
   <li class="next"><a href="TM::LTM::Parser.3pm.html">TM::LTM::Parser.3pm: Topic maps, trait for parsing maps in ltm format <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
