<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>setbuf: Stream buffering operations</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Stream buffering operations">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">setbuf<small> (3)</small></h1>
        <p class="lead">Stream buffering operations</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/setbuf.3.html">
      <span itemprop="name">setbuf: Stream buffering operations</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/man-pages/">
      <span itemprop="name">man-pages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/setbuf.3.html">
      <span itemprop="name">setbuf: Stream buffering operations</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>#include &lt;stdio.h&gt;</strong>

<strong>void setbuf(FILE *</strong><em>stream</em><strong>, char *</strong><em>buf</em><strong>);</strong>

<strong>void setbuffer(FILE *</strong><em>stream</em><strong>, char *</strong><em>buf</em><strong>, size_t </strong><em>size</em><strong>);</strong>

<strong>void setlinebuf(FILE *</strong><em>stream</em><strong>);</strong>

<strong>int setvbuf(FILE *</strong><em>stream</em><strong>, char *</strong><em>buf</em><strong>, int </strong><em>mode</em><strong>, size_t </strong><em>size</em><strong>);</strong></pre>

<p class='spacer'>

<p>Feature Test Macro Requirements for glibc (see <a href="../man7/feature_test_macros.7.html"><strong>feature_test_macros</strong>(7)</a>):</p>
<p class='spacer'>

<p><strong>setbuffer</strong>(), <strong>setlinebuf</strong>():</p>
<pre>    Since glibc 2.19:
        _DEFAULT_SOURCE
    Glibc 2.19 and earlier:
        _BSD_SOURCE</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The three types of buffering available are unbuffered, block buffered, and line buffered. When an output stream is unbuffered, information appears on the destination file or terminal as soon as written; when it is block buffered many characters are saved up and written as a block; when it is line buffered characters are saved up until a newline is output or input is read from any stream attached to a terminal device (typically <em>stdin</em>). The function <a href="../man3/fflush.3.html"><strong>fflush</strong>(3)</a> may be used to force the block out early. (See <a href="../man3/fclose.3.html"><strong>fclose</strong>(3)</a>.)</p>
<p class='spacer'>

<p>Normally all files are block buffered. If a stream refers to a terminal (as <em>stdout</em> normally does), it is line buffered. The standard error stream <em>stderr</em> is always unbuffered by default.</p>
<p class='spacer'>

    <p>The <strong>setvbuf</strong>() function may be used on any open stream to change its buffer. The <em>mode</em> argument must be one of the following three macros:</p>
    <dl class='dl-vertical'>
      <dt><strong>_IONBF</strong></dt>
      <dd>
    <p>unbuffered</p>
      </dd>
      <dt><strong>_IOLBF</strong></dt>
      <dd>
    <p>line buffered</p>
      </dd>
      <dt><strong>_IOFBF</strong></dt>
      <dd>
    <p>fully buffered</p>
      </dd>
    </dl>
<p class='spacer'>

<p>Except for unbuffered files, the <em>buf</em> argument should point to a buffer at least <em>size</em> bytes long; this buffer will be used instead of the current buffer. If the argument <em>buf</em> is NULL, only the mode is affected; a new buffer will be allocated on the next read or write operation. The <strong>setvbuf</strong>() function may be used only after opening a stream and before any other operations have been performed on it.</p>
<p class='spacer'>

<p>The other three calls are, in effect, simply aliases for calls to <strong>setvbuf</strong>(). The <strong>setbuf</strong>() function is exactly equivalent to the call</p>
<p class='spacer'>

<p>setvbuf(stream, buf, buf ? _IOFBF : _IONBF, BUFSIZ);</p>
<p class='spacer'>

<p>The <strong>setbuffer</strong>() function is the same, except that the size of the buffer is up to the caller, rather than being determined by the default <strong>BUFSIZ</strong>. The <strong>setlinebuf</strong>() function is exactly equivalent to the call:</p>
<p class='spacer'>

<p>setvbuf(stream, NULL, _IOLBF, 0);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">

<p>The function <strong>setvbuf</strong>() returns 0 on success. It returns nonzero on failure (<em>mode</em> is invalid or the request cannot be honored). It may set <em>errno</em> on failure.</p>
<p class='spacer'>

<p>The other functions do not return a value.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ATTRIBUTES</h2>
        <div class="sectioncontent">

<p>For an explanation of the terms used in this section, see <a href="../man7/attributes.7.html"><strong>attributes</strong>(7)</a>.</p>
<p class='spacer'>

<table class="table table-striped">
<tr>
<th>Interface</th>
<th>Attribute</th>
<th>Value</th></tr>

<tr>
<td><strong>setbuf</strong>(),   <strong>setbuffer</strong>(),   <strong>setlinebuf</strong>(),   <strong>setvbuf</strong>()  </td>
<td>Thread safety</td>
<td>MT-Safe</td></tr>
</table>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">

<p>The <strong>setbuf</strong>() and <strong>setvbuf</strong>() functions conform to C89 and C99.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p class='spacer'>

  <p>You must make sure that the space that <em>buf</em> points to still exists by the time <em>stream</em> is closed, which also happens at program termination. For example, the following is invalid:</p>
<pre>
#include &lt;stdio.h&gt;

int
main(void)
{
    char buf[BUFSIZ];
    setbuf(stdin, buf);
    printf("Hello, world!&#92;n");
    return 0;
}</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO setbuf&hellip;</h2>
        <div class="sectioncontent">

<p><a href="../man1/stdbuf.1.html"><strong>stdbuf</strong>(1)</a>, <a href="../man3/fclose.3.html"><strong>fclose</strong>(3)</a>, <a href="../man3/fflush.3.html"><strong>fflush</strong>(3)</a>, <a href="../man3/fopen.3.html"><strong>fopen</strong>(3)</a>, <a href="../man3/fread.3.html"><strong>fread</strong>(3)</a>, <a href="../man3/malloc.3.html"><strong>malloc</strong>(3)</a>, <a href="../man3/printf.3.html"><strong>printf</strong>(3)</a>, <a href="../man3/puts.3.html"><strong>puts</strong>(3)</a></p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="setaliasent.3.html"><span aria-hidden="true">&larr;</span> setaliasent.3: Read an alias entry</a></li>
   <li class="next"><a href="setbuffer.3.html">setbuffer.3: Stream buffering operations <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
