<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TM::Index: Topic maps, generic indexing support</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Topic maps, generic indexing support">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="TM::Index (3pm) manual">
  <meta name="twitter:description" content="Topic maps, generic indexing support">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtm-perl-TM::Index-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/TM::Index.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TM::Index (3pm) manual" />
  <meta property="og:description" content="Topic maps, generic indexing support" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtm-perl-TM::Index-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">TM::Index<small> (3pm)</small></h1>
        <p class="lead">Topic maps, generic indexing support</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/TM::Index.3pm.html">
      <span itemprop="name">TM::Index: Topic maps, generic indexing support</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtm-perl/">
      <span itemprop="name">libtm-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/TM::Index.3pm.html">
      <span itemprop="name">TM::Index: Topic maps, generic indexing support</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>One performance bottleneck when using the \s-1TM\s0 package or any of its subclasses are the low-level query functions \*(C`match_forall\*(C' and \*(C`match_exists\*(C'. They are looking for assertions of a certain nature. Almost all high-level functions, and certainly \s-1TM::TS\s0 (TempleScript) use these.</p><p>This package (actually more its subclasses) provides an indexing mechanism to speed up the \*(C`match_*\*(C' functions by caching some results in a very specific way. When an index is attached to a map, then it will intercept all queries going to these functions.</p><h3>Open vs. Closed Index</h3>
<p>There are two options: The default is to keep the index <em>lazy</em>. In this mode the index is empty at the start and it will learn more and more on its own. In this sense, the index lives under an <em>open world assumption</em> (hence the name), as the absence of information does not mean that there is no result. A <em>closed world</em> index has to be populated to be useful. If a query is launched and the result is stored in the index, then it will be used, like for an open index. If no result in the index is found for a query, the empty result will be assumed.</p>
<h3>Map Attachment</h3>
<p>To activate an index, you have to attach it to a map. This is done at constructor time.</p><p>It is possible (not sure how useful it is) to have one particular index to be attached to several different maps. It is also possible to have several TM::Index::* indices attached to one map. They are then consulted in the sequence of attachments:</p><p>    my $idx1 = new TM::Index::Whatever  ($tm);     my $idx2 = new TM::Index::Whatever2 ($tm);</p><p>If $idx1 cannot help, then $idx2 is tried.</p><p><strong>\s-1NOTE\s0</strong>: If you use <em>several</em> indices for the <em>same</em> map, then all of them <strong>\s-1MUST\s0</strong> be declared as being <em>open</em>. If one of them were closed, it would give a definite answer and would make the machinery not look further into other indices. This implies that you will have to populate your index explicitly.</p>
<h3>Hash Technology</h3>
<p>The default implementation uses an in-memory hash, no further fancy. Optionally, you can provide your own hash object, also one which is <em>tied</em> to an \s-1DBM\s0 file, etc.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERFACE</h2>
        <div class="sectioncontent">
<h3>Constructor</h3>
<p>The only mandatory parameter for the constructor is the map for which this index should apply. The map must be an instance of \s-1TM\s0 or any of its subclasses, otherwise an exception is the consequence.</p><p>Optional parameters are This controls whether the index is operating under closed or open world assumptions. If it is specified to be <em>closed</em> the method \*(C`populate\*(C' will be triggered at the end of the constructor. You optionally can pass in your own \s-1HASH\s0 reference.</p><p>Example:</p><p>   my $idx = new TM::Index::Match ($tm)</p><p><strong>\s-1NOTE\s0</strong>: When the index object goes out of scope, the destructor will make the index detach itself from the map. Unfortunately, the exact moment when this happens is somehow undefined in Perl, so it is better to do this manually at the end.</p><p>Example:</p><p>   {     my $idx2 = new TM::Index::Match ($tm, closed =&gt; 1);     ....     } # destructor called and index detaches automatically, but only in theory</p><p>   {     my $idx2 = new TM::Index::Match ($tm, closed =&gt; 1);     ....     $idx2-&gt;detach; # better do things yourself     }</p>
<h3>Methods</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>attach</strong>
  </dt>
  <dd>
    <p><em></em><strong>$idx</strong><em></em>-&gt;attach This method attaches the index to the configured map. Normally you will not call this as the attachment is implicitly done at constructor time. The index itself is not destroyed; it is just deactivated to be used together with the map. @@ optional \s-1TM\s0</p>
  </dd>
  <dt>
    <strong>detach</strong>
  </dt>
  <dd>
    <p><em></em><strong>$idx</strong><em></em>-&gt;detach Makes the index detach safely from the map. The map is not harmed in this process.</p>
  </dd>
  <dt>
    <strong>discard</strong>
  </dt>
  <dd>
    <p><em></em><strong>$idx</strong><em></em>-&gt;discard This throws away the index content.</p>
  </dd>
  <dt>
    <strong>is_cached</strong>
  </dt>
  <dd>
    <p><em></em><strong>$bool</strong><em></em> = <em></em><strong>$idx</strong><em></em>-&gt;is_cached (<em></em><strong>$key</strong><em></em>) Given a key parameter, the cache is consulted whether it already has a result for this key. If the index is <em>closed</em> it will return the empty list (reference), if it has no result, otherwise it will give back \*(C`undef\*(C'.</p>
  </dd>
  <dt>
    <strong>do_cache</strong>
  </dt>
  <dd>
    <p><em></em><strong>$idx</strong><em></em>-&gt;do_cache (<em></em><strong>$key</strong><em></em>, <em></em><strong>$list_ref</strong><em></em>) Given a key and a list reference, it will store the list reference there in the cache.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO TM::Index&hellip;</h2>
        <div class="sectioncontent">
<p>\s-1TM\s0, TM::Index::Characteristics, TM::Index::Match</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 20(0[6]|10) by Robert Barta, &lt;drrho@cpan.org&gt;</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="TM::Graph.3pm.html"><span aria-hidden="true">&larr;</span> TM::Graph.3pm: Topic maps, trait for graph-like operations</a></li>
   <li class="next"><a href="TM::Index::Characteristics.3pm.html">TM::Index::Characteristics.3pm: Topic maps, indexing support (match layer) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
