<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ost_TCPStream: Tcp streams are used to represent tcp client connections to a server by tcp protocol servers for accepting client connections.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Tcp streams are used to represent tcp client connections to a server by tcp protocol servers for accepting client connections.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ost_TCPStream (3) manual">
  <meta name="twitter:description" content="Tcp streams are used to represent tcp client connections to a server by tcp protocol servers for accepting client connections.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcommoncpp2-doc-ost_TCPStream-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/ost_TCPStream.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ost_TCPStream (3) manual" />
  <meta property="og:description" content="Tcp streams are used to represent tcp client connections to a server by tcp protocol servers for accepting client connections." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcommoncpp2-doc-ost_TCPStream-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ost_TCPStream<small> (3)</small></h1>
        <p class="lead">Tcp streams are used to represent tcp client connections to a server by tcp protocol servers for accepting client connections.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ost_TCPStream.3.html">
      <span itemprop="name">ost_TCPStream: Tcp streams are used to represent tcp client connections to a server by tcp protocol servers for accepting client connections.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcommoncpp2-doc/">
      <span itemprop="name">libcommoncpp2-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ost_TCPStream.3.html">
      <span itemprop="name">ost_TCPStream: Tcp streams are used to represent tcp client connections to a server by tcp protocol servers for accepting client connections.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;socket.h&gt;</p><p>Inherits streambuf, <strong>ost::Socket</strong>, and iostream.</p><p>Inherited by <strong>ost::SSLStream</strong>, <strong>ost::TCPSession</strong>, and <strong>ost::URLStream</strong>.</p><h3>Public Member Functions</h3>
<p><strong>TCPStream</strong> (<strong>Family</strong> <strong>family</strong>=<strong>IPV4</strong>, bool throwflag=true, <strong>timeout_t</strong> to=0)</p><p><em>The constructor required for building other classes or to start an unconnected </em><strong>TCPStream</strong><em> for connect. </em><strong></strong> void <strong>disconnect</strong> (void)</p><p><em>Disconnect the current session and prepare for a new one. </em> int <strong>getSegmentSize</strong> (void)</p><p><em>Get protocol segment size. </em> <strong>TCPStream</strong> (<strong>TCPSocket</strong> &server, bool throwflag=true, <strong>timeout_t</strong> <strong>timeout</strong>=0)</p><p><em>Create a TCP stream by accepting a connection from a bound TCP socket acting as a server. </em> <strong>TCPStream</strong> (<strong>TCPV6Socket</strong> &server, bool throwflag=true, <strong>timeout_t</strong> <strong>timeout</strong>=0)</p><p>void <strong>connect</strong> (<strong>TCPSocket</strong> &server)</p><p><em>Accept a connection from a TCP Server. </em> void <strong>connect</strong> (<strong>TCPV6Socket</strong> &server)</p><p><strong>TCPStream</strong> (const <strong>IPV4Host</strong> &host, <strong>tpport_t</strong> port, unsigned mss=536, bool throwflag=true, <strong>timeout_t</strong> <strong>timeout</strong>=0)</p><p><em>Create a TCP stream by connecting to a TCP socket (on a remote machine). </em> <strong>TCPStream</strong> (const <strong>IPV6Host</strong> &host, <strong>tpport_t</strong> port, unsigned mss=536, bool throwflag=true, <strong>timeout_t</strong> <strong>timeout</strong>=0)</p><p><strong>TCPStream</strong> (const char *name, <strong>Family</strong> <strong>family</strong>=<strong>IPV4</strong>, unsigned mss=536, bool throwflag=false, <strong>timeout_t</strong> timer=0)</p><p><em>Construct a named TCP </em><strong>Socket</strong><em> connected to a remote machine. </em><strong></strong> void <strong>setTimeout</strong> (<strong>timeout_t</strong> timer)</p><p><em>Set the I/O operation timeout for socket I/O operations. </em> <strong>TCPStream</strong> (const <strong>TCPStream</strong> &source)</p><p><em>A copy constructor creates a new stream buffer. </em> virtual <strong>~TCPStream</strong> ()</p><p><em>Flush and empty all buffers, and then remove the allocated buffers. </em> int <strong>sync</strong> (void)</p><p><em>Flushes the stream input and output buffers, writes pending output. </em> size_t <strong>printf</strong> (const char *format,...)</p><p><em>Print content into a socket. </em> bool <strong>isPending</strong> (<strong>Pending</strong> pend, <strong>timeout_t</strong> <strong>timeout</strong>=<strong>TIMEOUT_INF</strong>)</p><p><em>Get the status of pending stream data. </em> ssize_t <strong>peek</strong> (void *buf, size_t len)</p><p><em>Examine contents of next waiting packet. </em> size_t <strong>getBufferSize</strong> (void) const </p><p><em>Return the size of the current stream buffering used. </em></p>
<h3>Protected Member Functions</h3>
<p>void <strong>allocate</strong> (size_t size)</p><p><em>Used to allocate the buffer space needed for iostream operations. </em> void <strong>endStream</strong> (void)</p><p><em>Used to terminate the buffer space and cleanup the socket connection. </em> int <strong>underflow</strong> ()</p><p><em>This streambuf method is used to load the input buffer through the established tcp socket connection. </em> int <strong>uflow</strong> ()</p><p><em>This streambuf method is used for doing unbuffered reads through the establish tcp socket connection when in interactive mode. </em> int <strong>overflow</strong> (int ch)</p><p><em>This streambuf method is used to write the output buffer through the established tcp connection. </em> void <strong>connect</strong> (const <strong>IPV4Host</strong> &host, <strong>tpport_t</strong> port, unsigned mss=536)</p><p><em>Create a TCP stream by connecting to a TCP socket (on a remote machine). </em> void <strong>connect</strong> (const <strong>IPV6Host</strong> &host, <strong>tpport_t</strong> port, unsigned mss=536)</p><p>void <strong>connect</strong> (const char *name, unsigned mss=536)</p><p><em>Connect a TCP stream to a named destination host and port number, using getaddrinfo interface if available. </em> std::iostream * <strong>tcp</strong> (void)</p><p><em>Used in derived classes to refer to the current object via it's iostream. </em></p>
<h3>Protected Attributes</h3>
<p><strong>timeout_t</strong> <strong>timeout</strong></p><p>size_t <strong>bufsize</strong></p><p><strong>Family</strong> <strong>family</strong></p><p>char * <strong>gbuf</strong></p><p>char * <strong>pbuf</strong></p>
<h3>Friends</h3>
<p><strong>TCPStream</strong> & <strong>crlf</strong> (<strong>TCPStream</strong> &)</p><p><strong>TCPStream</strong> & <strong>lfcr</strong> (<strong>TCPStream</strong> &)</p>
<h3>Additional Inherited Members</h3>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>TCP streams are used to represent TCP client connections to a server by TCP protocol servers for accepting client connections.</p><p>The TCP stream is a C++ 'stream' class, and can accept streaming of data to and from other C++ objects using the &lt;&lt; and &gt;&gt; operators.</p><p><strong>TCPStream</strong> itself can be formed either by connecting to a bound network address of a TCP server, or can be created when 'accepting' a network connection from a TCP server.</p><p><strong>Author:</strong></p><p>David Sugar dyfet@ostel.com streamable TCP socket connection.</p><p><strong>Examples: </strong> <strong>tcp.cpp</strong>, and <strong>tcpstr1.cpp</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Constructor & Destructor Documentation</h2>
        <div class="sectioncontent">
<h3>ost::TCPStream::TCPStream (\fBFamily\fPfamily = \fC\fBIPV4\fP\fP, boolthrowflag = \fCtrue\fP, \fBtimeout_t\fPto = \fC0\fP)</h3>
<p>The constructor required for building other classes or to start an unconnected <strong>TCPStream</strong> for connect.</p>
<h3>ost::TCPStream::TCPStream (\fBTCPSocket\fP &server, boolthrowflag = \fCtrue\fP, \fBtimeout_t\fPtimeout = \fC0\fP)</h3>
<p>Create a TCP stream by accepting a connection from a bound TCP socket acting as a server. This performs an 'accept' call.</p><p><strong>Parameters:</strong></p><p><em>server</em> socket listening</p><p><em>throwflag</em> flag to throw errors.</p><p><em>timeout</em> for all operations.</p>
<h3>ost::TCPStream::TCPStream (\fBTCPV6Socket\fP &server, boolthrowflag = \fCtrue\fP, \fBtimeout_t\fPtimeout = \fC0\fP)</h3>

<h3>ost::TCPStream::TCPStream (const \fBIPV4Host\fP &host, \fBtpport_t\fPport, unsignedmss = \fC536\fP, boolthrowflag = \fCtrue\fP, \fBtimeout_t\fPtimeout = \fC0\fP)</h3>
<p>Create a TCP stream by connecting to a TCP socket (on a remote machine).</p><p><strong>Parameters:</strong></p><p><em>host</em> address of remote TCP server.</p><p><em>port</em> number to connect.</p><p><em>mss</em> maximum segment size of streaming buffers.</p><p><em>throwflag</em> flag to throw errors.</p><p><em>timeout</em> for all operations.</p>
<h3>ost::TCPStream::TCPStream (const \fBIPV6Host\fP &host, \fBtpport_t\fPport, unsignedmss = \fC536\fP, boolthrowflag = \fCtrue\fP, \fBtimeout_t\fPtimeout = \fC0\fP)</h3>

<h3>ost::TCPStream::TCPStream (const char *name, \fBFamily\fPfamily = \fC\fBIPV4\fP\fP, unsignedmss = \fC536\fP, boolthrowflag = \fCfalse\fP, \fBtimeout_t\fPtimer = \fC0\fP)</h3>
<p>Construct a named TCP <strong>Socket</strong> connected to a remote machine.</p><p><strong>Parameters:</strong></p><p><em>name</em> of remote service.</p><p><em>family</em> of protocol.</p><p><em>mss</em> maximum segment size of streaming buffers.</p><p><em>throwflag</em> flag to throw errors.</p><p><em>timer</em> for timeout for all operations.</p>
<h3>ost::TCPStream::TCPStream (const \fBTCPStream\fP &source)</h3>
<p>A copy constructor creates a new stream buffer.</p><p><strong>Parameters:</strong></p><p><em>source</em> reference of stream to copy from.</p>
<h3>virtual ost::TCPStream::~TCPStream ()\fC [virtual]\fP</h3>
<p>Flush and empty all buffers, and then remove the allocated buffers.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Member Function Documentation</h2>
        <div class="sectioncontent">
<h3>void ost::TCPStream::allocate (size_tsize)\fC [protected]\fP</h3>
<p>Used to allocate the buffer space needed for iostream operations. This function is called by the constructor.</p><p><strong>Parameters:</strong></p><p><em>size</em> of stream buffers from constructor.</p>
<h3>void ost::TCPStream::connect (const \fBIPV4Host\fP &host, \fBtpport_t\fPport, unsignedmss = \fC536\fP)\fC [protected]\fP</h3>
<p>Create a TCP stream by connecting to a TCP socket (on a remote machine).</p><p><strong>Parameters:</strong></p><p><em>host</em> address of remote TCP server.</p><p><em>port</em> number to connect.</p><p><em>mss</em> maximum segment size of streaming buffers.</p><p><strong>Examples: </strong> <strong>tcp.cpp</strong>.</p>
<h3>void ost::TCPStream::connect (const \fBIPV6Host\fP &host, \fBtpport_t\fPport, unsignedmss = \fC536\fP)\fC [protected]\fP</h3>

<h3>void ost::TCPStream::connect (const char *name, unsignedmss = \fC536\fP)\fC [protected]\fP</h3>
<p>Connect a TCP stream to a named destination host and port number, using getaddrinfo interface if available.</p><p><strong>Parameters:</strong></p><p><em>name</em> of host and service to connect</p><p><em>mss</em> maximum segment size of stream buffer</p>
<h3>void ost::TCPStream::connect (\fBTCPSocket\fP &server)</h3>
<p>Accept a connection from a TCP Server.</p><p><strong>Parameters:</strong></p><p><em>server</em> socket listening</p>
<h3>void ost::TCPStream::connect (\fBTCPV6Socket\fP &server)</h3>

<h3>void ost::TCPStream::disconnect (void)</h3>
<p>Disconnect the current session and prepare for a new one.</p><p><strong>Examples: </strong> <strong>tcp.cpp</strong>, and <strong>tcpstr1.cpp</strong>.</p>
<h3>void ost::TCPStream::endStream (void)\fC [protected]\fP</h3>
<p>Used to terminate the buffer space and cleanup the socket connection. This fucntion is called by the destructor.</p>
<h3>size_t ost::TCPStream::getBufferSize (void) const\fC [inline]\fP</h3>
<p>Return the size of the current stream buffering used.</p><p><strong>Returns:</strong></p><p>size of stream buffers.</p>
<h3>int ost::TCPStream::getSegmentSize (void)</h3>
<p>Get protocol segment size.</p><p><strong>Examples: </strong> <strong>tcp.cpp</strong>.</p>
<h3>bool ost::TCPStream::isPending (\fBPending\fPpend, \fBtimeout_t\fPtimeout = \fC\fBTIMEOUT_INF\fP\fP)\fC [virtual]\fP</h3>
<p>Get the status of pending stream data. This can be used to examine if input or output is waiting, or if an error or disconnect has occured on the stream. If a read buffer contains data then input is ready and if write buffer contains data it is first flushed and then checked.</p><p>Reimplemented from <strong>ost::Socket</strong>.</p><p><strong>Examples: </strong> <strong>tcp.cpp</strong>.</p>
<h3>int ost::TCPStream::overflow (intch)\fC [protected]\fP</h3>
<p>This streambuf method is used to write the output buffer through the established tcp connection.</p><p><strong>Parameters:</strong></p><p><em>ch</em> char to push through.</p><p><strong>Returns:</strong></p><p>char pushed through.</p>
<h3>ssize_t ost::TCPStream::peek (void *buf, size_tlen)\fC [inline]\fP</h3>
<p>Examine contents of next waiting packet.</p><p><strong>Parameters:</strong></p><p><em>buf</em> pointer to packet buffer for contents.</p><p><em>len</em> of packet buffer.</p><p><strong>Returns:</strong></p><p>number of bytes examined.</p><p>References _IOLEN64.</p>
<h3>size_t ost::TCPStream::printf (const char *format, ...)</h3>
<p>Print content into a socket.</p><p><strong>Returns:</strong></p><p>count of bytes sent.</p><p><strong>Parameters:</strong></p><p><em>format</em> string</p>
<h3>void ost::TCPStream::setTimeout (\fBtimeout_t\fPtimer)\fC [inline]\fP</h3>
<p>Set the I/O operation timeout for socket I/O operations.</p><p><strong>Parameters:</strong></p><p><em>timer</em> to change timeout.</p>
<h3>int ost::TCPStream::sync (void)</h3>
<p>Flushes the stream input and output buffers, writes pending output.</p><p><strong>Returns:</strong></p><p>0 on success.</p>
<h3>std::iostream* ost::TCPStream::tcp (void)\fC [inline]\fP, \fC [protected]\fP</h3>
<p>Used in derived classes to refer to the current object via it's iostream. For example, to send a set of characters in a derived method, one might use *tcp() &lt;&lt; 'test'.</p><p><strong>Returns:</strong></p><p>stream pointer of this object.</p>
<h3>int ost::TCPStream::uflow ()\fC [protected]\fP</h3>
<p>This streambuf method is used for doing unbuffered reads through the establish tcp socket connection when in interactive mode. Also this method will handle proper use of buffers if not in interative mode.</p><p><strong>Returns:</strong></p><p>char from tcp socket connection, EOF if not connected.</p>
<h3>int ost::TCPStream::underflow ()\fC [protected]\fP</h3>
<p>This streambuf method is used to load the input buffer through the established tcp socket connection.</p><p><strong>Returns:</strong></p><p>char from get buffer, EOF if not connected.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Friends And Related Function Documentation</h2>
        <div class="sectioncontent">
<h3>\fBTCPStream\fP& crlf (\fBTCPStream\fP &)\fC [friend]\fP</h3>

<h3>\fBTCPStream\fP& lfcr (\fBTCPStream\fP &)\fC [friend]\fP</h3>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Member Data Documentation</h2>
        <div class="sectioncontent">
<h3>size_t ost::TCPStream::bufsize\fC [protected]\fP</h3>

<h3>\fBFamily\fP ost::TCPStream::family\fC [protected]\fP</h3>

<h3>char* ost::TCPStream::gbuf\fC [protected]\fP</h3>

<h3>char * ost::TCPStream::pbuf\fC [protected]\fP</h3>

<h3>\fBtimeout_t\fP ost::TCPStream::timeout\fC [protected]\fP</h3>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for GNU CommonC++ from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ost_TCPSocket.3.html"><span aria-hidden="true">&larr;</span> ost_TCPSocket.3: Tcp sockets are used for stream based connected sessions between two sockets.</a></li>
   <li class="next"><a href="ost_TCPV6Socket.3.html">ost_TCPV6Socket.3: Tcpv6 sockets are used for stream based connected sessions between two ipv6 sockets. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
