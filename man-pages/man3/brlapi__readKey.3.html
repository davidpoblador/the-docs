<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>brlapi__readKey: How to read key presses from the braille terminal.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="How to read key presses from the braille terminal.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="brlapi__readKey (3) manual">
  <meta name="twitter:description" content="How to read key presses from the braille terminal.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libbrlapi-dev-brlapi__readKey-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/brlapi__readKey.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="brlapi__readKey (3) manual" />
  <meta property="og:description" content="How to read key presses from the braille terminal." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libbrlapi-dev-brlapi__readKey-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">brlapi__readKey<small> (3)</small></h1>
        <p class="lead">How to read key presses from the braille terminal.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/brlapi__readKey.3.html">
      <span itemprop="name">brlapi__readKey: How to read key presses from the braille terminal.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libbrlapi-dev/">
      <span itemprop="name">libbrlapi-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/brlapi__readKey.3.html">
      <span itemprop="name">brlapi__readKey: How to read key presses from the braille terminal.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>Once <strong>brlapi_enterTtyMode()</strong> has been called, the application can call <strong>brlapi_readKey()</strong> to read key presses. Either key codes (see <strong>Types and Defines fore BrlAPI Key Codes</strong>) or commands will be returned, depending on parameters given to <strong>brlapi_enterTtyMode()</strong>.</p><p>Key presses are buffered, so that calling <strong>brlapi_readKey()</strong> in non-blocking mode from time to time should suffice.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Macro Definition Documentation</h2>
        <div class="sectioncontent">
<h3>#define brlapi__acceptAllKeys(handle)   \fBbrlapi__acceptKeys\fP(handle, \fBbrlapi_rangeType_all\fP, NULL, 0)</h3>

<h3>#define brlapi__ignoreAllKeys(handle)   \fBbrlapi__ignoreKeys\fP(handle, \fBbrlapi_rangeType_all\fP, NULL, 0)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi_acceptAllKeys(void)   \fBbrlapi_acceptKeys\fP(\fBbrlapi_rangeType_all\fP, NULL, 0)</h3>
<p>Accept all key presses from the braille keyboard</p><p>This function asks the server to give all keys to the application, and not give them to <em>brltty</em>.</p><p>Warning: after calling this function, make sure to call <strong>brlapi_ignoreKeys()</strong> for ignoring important keys like BRL_CMD_SWITCHVT_PREV/NEXT and such.</p>
<h3>int \fBBRLAPI_STDCALL\fP brlapi_ignoreAllKeys(void)   \fBbrlapi_ignoreKeys\fP(\fBbrlapi_rangeType_all\fP, NULL, 0)</h3>
<p>Ignore all key presses from the braille keyboard</p><p>This function asks the server to give all keys to <em>brltty</em>, rather than returning them to the application via <strong>brlapi_readKey()</strong>.</p>
<h3>#define BRLAPI_UC_ROW   0x2800UL</h3>
<p>Unicode braille row</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Enumeration Type Documentation</h2>
        <div class="sectioncontent">
<h3>enum \fBbrlapi_rangeType_t\fP</h3>
<p>types of key ranges</p><p><strong>Enumerator</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><em>brlapi_rangeType_all </em><strong></strong><em></em></p>
  </dt>
  <dd>
    <p>all keys, code must be 0</p>
  </dd>
  <dt>
    <p><strong></strong><em>brlapi_rangeType_type </em><strong></strong><em></em></p>
  </dt>
  <dd>
    <p>all keys of a given type</p>
  </dd>
  <dt>
    <p><strong></strong><em>brlapi_rangeType_command </em><strong></strong><em></em></p>
  </dt>
  <dd>
    <p>all keys of a given command block, i.e. matching the key type and command parts</p>
  </dd>
  <dt>
    <p><strong></strong><em>brlapi_rangeType_key </em><strong></strong><em></em></p>
  </dt>
  <dd>
    <p>a given key with any flags</p>
  </dd>
  <dt>
    <p><strong></strong><em>brlapi_rangeType_code </em><strong></strong><em></em></p>
  </dt>
  <dd>
    <p>a given key code</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Function Documentation</h2>
        <div class="sectioncontent">
<h3>int \fBBRLAPI_STDCALL\fP brlapi__acceptAllKeys (\fBbrlapi_handle_t\fP *handle)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi__acceptKeyRanges (\fBbrlapi_handle_t\fP *handle, \fBbrlapi_range_t\fPranges[], unsigned intcount)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi__acceptKeys (\fBbrlapi_handle_t\fP *handle, \fBbrlapi_rangeType_t\fPtype, const \fBbrlapi_keyCode_t\fPkeys[], unsigned intcount)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi__ignoreAllKeys (\fBbrlapi_handle_t\fP *handle)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi__ignoreKeyRanges (\fBbrlapi_handle_t\fP *handle, \fBbrlapi_range_t\fPranges[], unsigned intcount)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi__ignoreKeys (\fBbrlapi_handle_t\fP *handle, \fBbrlapi_rangeType_t\fPtype, const \fBbrlapi_keyCode_t\fPkeys[], unsigned intcount)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi__readKey (\fBbrlapi_handle_t\fP *handle, intwait, \fBbrlapi_keyCode_t\fP *code)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi_acceptKeyRanges (\fBbrlapi_range_t\fPranges[], unsigned intcount)</h3>
<p>Accept some key presses from the braille keyboard</p><p>This function asks the server to return the provided key ranges (inclusive) to the application, and not give them to <em>brltty</em>.</p><p><strong>Parameters:</strong></p><p><em>ranges</em> key ranges, which are inclusive</p><p><em>count</em> number of ranges</p><p><strong>Note:</strong></p><p>The given codes should be raw keycodes (i.e. some driver name was given to <strong>brlapi_enterTtyMode()</strong>)</p>
<h3>int \fBBRLAPI_STDCALL\fP brlapi_acceptKeys (\fBbrlapi_rangeType_t\fPtype, const \fBbrlapi_keyCode_t\fPkeys[], unsigned intcount)</h3>
<p>Accept some key presses from the braille keyboard</p><p>This function asks the server to give the provided keys to the application, and not give them to <em>brltty</em>.</p><p><strong>Parameters:</strong></p><p><em>type</em> type of keys to be ignored</p><p><em>keys</em> array of keys to be ignored</p><p><em>count</em> number of keys</p><p><strong>Note:</strong></p><p>The given codes should be <em>brltty</em> commands (NULL or '' was given to <strong>brlapi_enterTtyMode()</strong>)</p>
<h3>int \fBBRLAPI_STDCALL\fP brlapi_describeKeyCode (\fBbrlapi_keyCode_t\fPcode, \fBbrlapi_describedKeyCode_t\fP *description)</h3>
<p>Describe the components of a key code.</p><p><strong>Parameters:</strong></p><p><em>code</em> the keycode to be described</p><p><em>description</em> pointer to the structure that receives the description</p><p><strong>Returns:</strong></p><p>0 on success, -1 on error</p>
<h3>int \fBBRLAPI_STDCALL\fP brlapi_expandKeyCode (\fBbrlapi_keyCode_t\fPcode, \fBbrlapi_expandedKeyCode_t\fP *expansion)</h3>
<p>Expand the components of a key code</p><p><strong>Parameters:</strong></p><p><em>code</em> the key code to be expanded</p><p><em>expansion</em> pointer to the structure that receives the components</p><p><strong>Returns:</strong></p><p>0 on success, -1 on error</p>
<h3>int \fBBRLAPI_STDCALL\fP brlapi_ignoreKeyRanges (\fBbrlapi_range_t\fPranges[], unsigned intcount)</h3>
<p>Ignore some key presses from the braille keyboard</p><p>This function asks the server to give the provided key ranges to <em>brltty</em>, rather than returning them to the application via <strong>brlapi_readKey()</strong>.</p><p><strong>Parameters:</strong></p><p><em>ranges</em> key ranges, which are inclusive</p><p><em>count</em> number of ranges</p><p><strong>Note:</strong></p><p>The given codes should be raw keycodes (i.e. some driver name was given to <strong>brlapi_enterTtyMode()</strong>)</p>
<h3>int \fBBRLAPI_STDCALL\fP brlapi_ignoreKeys (\fBbrlapi_rangeType_t\fPtype, const \fBbrlapi_keyCode_t\fPkeys[], unsigned intcount)</h3>
<p>Ignore some key presses from the braille keyboard</p><p>This function asks the server to give the provided keys to <em>brltty</em>, rather than returning them to the application via <strong>brlapi_readKey()</strong>.</p><p><strong>Parameters:</strong></p><p><em>type</em> type of keys to be ignored</p><p><em>keys</em> array of keys to be ignored</p><p><em>count</em> number of keys</p><p><strong>Note:</strong></p><p>The given codes should be <em>brltty</em> commands (NULL or '' was given to <strong>brlapi_enterTtyMode()</strong>)</p>
<h3>int \fBBRLAPI_STDCALL\fP brlapi_readKey (intwait, \fBbrlapi_keyCode_t\fP *code)</h3>
<p>Read a key from the braille keyboard</p><p>This function returns one key press's code.</p><p>If NULL or '' was given to <strong>brlapi_enterTtyMode()</strong>, a <em>brltty</em> command is returned, as described in the documentation for <strong>brlapi_keyCode_t</strong> . It is hence pretty driver-independent, and should be used by default when no other option is possible.</p><p>By default, all commands but those which restart drivers and switch virtual terminals are returned to the application and not to brltty. If the application doesn't want to see some command events, it should call <strong>brlapi_ignoreKeys()</strong></p><p>If some driver name was given to <strong>brlapi_enterTtyMode()</strong>, a raw keycode is returned, as specified by the terminal driver, usually in &lt;brltty/brldefs-xy&gt; where xy is the driver's code. It generally corresponds to the very code that the terminal tells to the driver. This should only be used by applications which are dedicated to a particular braille terminal. Hence, checking the terminal type thanks to a call to <strong>brlapi_getDriverName()</strong> before getting tty control is a pretty good idea.</p><p>By default, all the keypresses will be passed to the client, none will go through brltty, so the application will have to handle console switching itself for instance.</p><p><strong>Parameters:</strong></p><p><em>wait</em> tells whether the call should block until a key is pressed (1) or should only probe key presses (0);</p><p><em>code</em> holds the key code if a key press is indeed read.</p><p><strong>Returns:</strong></p><p>-1 on error or signal interrupt and *code is then undefined, 0 if block was 0 and no key was pressed so far, or 1 and *code holds the key code.</p><p>Programming hints:</p><p>If your application is only driven by braille command keypresses, you can just call brlapi_readKey(1, &code) so that it keeps blocking, waiting for keypresses.</p><p>Else, you'll probably want to use the file descriptor returned by <strong>brlapi_openConnection()</strong> in your 'big polling loop'. For instance:</p><ul>
<li><p>in a select() loop, just add it to the readfds and exceptfds file descriptor sets;</p></li><li><p>in a gtk or atspi application, use g_io_add_watch(fileDescriptor, G_IO_IN|G_IO_ERR|G_IO_HUP, f, data) for adding a callback called f;</p></li><li><p>in an Xt/Xaw/motif-based application, use XtAppAddInput(app_context, fileDescriptor, XtInputReadMask|XtInputExceptMask, f, data)</p></li><li><p>etc.</p></li>
</ul><p>and then, when you detect inbound trafic on the file descriptor, do something like this:</p><p>while (brlapi_readKey(0, &code) { // process keycode code // ... }</p><p>The while loop is needed for processing <em>all</em> pending key presses, else some of them may be left in libbrlapi's internal key buffer and you wouldn't get them immediately.</p><p><strong>Note:</strong></p><p>If the read is interrupted by a signal, <strong>brlapi_readKey()</strong> will return -1, brlapi_errno will be BRLAPI_ERROR_LIBCERR and errno will be EINTR.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for BrlAPI from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="brlapi__openConnection.3.html"><span aria-hidden="true">&larr;</span> brlapi__openConnection.3: Connecting to brlapi -</a></li>
   <li class="next"><a href="brlapi__recvRaw.3.html">brlapi__recvRaw.3: Raw and suspend modes mechanism. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
