<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>unw_create_addr_space: Create address space for remote unwinding</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create address space for remote unwinding">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="unw_create_addr_space (3) manual">
  <meta name="twitter:description" content="Create address space for remote unwinding">
  <meta name="twitter:image" content="https://www.carta.tech/images/libunwind-dev-unw_create_addr_space-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/unw_create_addr_space.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="unw_create_addr_space (3) manual" />
  <meta property="og:description" content="Create address space for remote unwinding" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libunwind-dev-unw_create_addr_space-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">unw_create_addr_space<small> (3)</small></h1>
        <p class="lead">Create address space for remote unwinding</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/unw_create_addr_space.3.html">
      <span itemprop="name">unw_create_addr_space: Create address space for remote unwinding</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libunwind-dev/">
      <span itemprop="name">libunwind-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/unw_create_addr_space.3.html">
      <span itemprop="name">unw_create_addr_space: Create address space for remote unwinding</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;libunwind.h&gt;</p><p>unw_addr_space_t unw_create_addr_space(unw_accessors_t *ap, int byteorder);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The unw_create_addr_space() routine creates a new unwind address-space and initializes it based on the call-back routines passed via the ap pointer and the specified byteorder. The call-back routines are described in detail below. The byteorder can be set to 0 to request the default byte-order of the unwind target. To request a particular byte-order, byteorder can be set to any constant defined by &lt;endian.h&gt;. In particular, __LITTLE_ENDIAN would request little-endian byte-order and __BIG_ENDIAN would request big-endian byte-order. Whether or not a particular byte-order is supported depends on the target platform.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CALL-BACK ROUTINES</h2>
        <div class="sectioncontent">
<p>Libunwind uses a set of call-back routines to access the information it needs to unwind a chain of stack-frames. These routines are specified via the ap argument, which points to a variable of type unw_accessors_t. The contents of this variable is copied into the newly-created address space, so the variable must remain valid only for the duration of the call to unw_create_addr_space().</p><p>The first argument to every call-back routine is an address-space identifier (as) and the last argument is an arbitrary, application-specified void-pointer (arg). When invoking a call-back routine, libunwind sets the as argument to the address-space on whose behalf the invocation is made and the arg argument to the value that was specified when <a href="../man3/unw_init_remote.3.html"><strong>unw_init_remote</strong>(3)</a> was called.</p><p>The synopsis and a detailed description of every call-back routine follows below.</p><h3>CALL-BACK ROUTINE SYNOPSIS</h3>
<p>int find_proc_info(unw_addr_space_t as,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>unw_word_t ip, unw_proc_info_t *pip,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>int need_unwind_info, void *arg);</p><p>void put_unwind_info(unw_addr_space_t as,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>unw_proc_info_t *pip, void *arg);</p><p>int get_dyn_info_list_addr(unw_addr_space_t as,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>unw_word_t *dilap, void *arg);</p><p>int access_mem(unw_addr_space_t as,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>unw_word_t addr, unw_word_t *valp,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>int write, void *arg);</p><p>int access_reg(unw_addr_space_t as,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>unw_regnum_t regnum, unw_word_t *valp,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>int write, void *arg);</p><p>int access_fpreg(unw_addr_space_t as,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>unw_regnum_t regnum, unw_fpreg_t *fpvalp,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>int write, void *arg);</p><p>int resume(unw_addr_space_t as,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>unw_cursor_t *cp, void *arg);</p><p>int get_proc_name(unw_addr_space_t as,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>unw_word_t addr, char *bufp,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>size_t buf_len, unw_word_t *offp,</p><p><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong><strong> </strong>void *arg);</p>
<h3>FIND_PROC_INFO</h3>
<p>Libunwind invokes the find_proc_info() call-back to locate the information need to unwind a particular procedure. The ip argument is an instruction-address inside the procedure whose information is needed. The pip argument is a pointer to the variable used to return the desired information. The type of this variable is unw_proc_info_t. See <a href="../man3/unw_get_proc_info.3.html"><strong>unw_get_proc_info</strong>(3)</a> for details. Argument need_unwind_info is zero if the call-back does not need to provide values for the following members in the unw_proc_info_t structure: format, unwind_info_size, and unwind_info. If need_unwind_info is non-zero, valid values need to be returned in these members. Furthermore, the contents of the memory addressed by the unwind_info member must remain valid until the info is released via the put_unwind_info call-back (see below).</p><p>On successful completion, the find_proc_info() call-back must return zero. Otherwise, the negative value of one of the unw_error_t error-codes may be returned. In particular, this call-back may return -UNW_ESTOPUNWIND to signal the end of the frame-chain.</p>
<h3>PUT_UNWIND_INFO</h3>
<p>Libunwind invokes the put_unwind_info() call-back to release the resources (such as memory) allocated by a previous call to find_proc_info() with the need_unwind_info argument set to a non-zero value. The pip argument has the same value as the argument of the same name in the previous matching call to find_proc_info(). Note that libunwind does <em>not</em> invoke put_unwind_info for calls to find_proc_info() with a zero need_unwind_info argument.</p>
<h3>GET_DYN_INFO_LIST_ADDR</h3>
<p>Libunwind invokes the get_dyn_info_list_addr() call-back to obtain the address of the head of the dynamic unwind-info registration list. The variable stored at the returned address must have a type of unw_dyn_info_list_t (see <a href="../man3/_U_dyn_register.3.html"><strong>_U_dyn_register</strong>(3)</a>). The dliap argument is a pointer to a variable of type unw_word_t which is used to return the address of the dynamic unwind-info registration list. If no dynamic unwind-info registration list exist, the value pointed to by dliap must be cleared to zero. Libunwind will cache the value returned by get_dyn_info_list_addr() if caching is enabled for the given address-space. The cache can be cleared with a call to unw_flush_cache().</p><p>On successful completion, the get_dyn_info_list_addr() call-back must return zero. Otherwise, the negative value of one of the unw_error_t error-codes may be returned.</p>
<h3>ACCESS_MEM</h3>
<p>Libunwind invokes the access_mem() call-back to read from or write to a word of memory in the target address-space. The address of the word to be accessed is passed in argument addr. To read memory, libunwind sets argument write to zero and valp to point to the word that receives the read value. To write memory, libunwind sets argument write to a non-zero value and valp to point to the word that contains the value to be written. The word that valp points to is always in the byte-order of the host-platform, regardless of the byte-order of the target. In other words, it is the responsibility of the call-back routine to convert between the target's and the host's byte-order, if necessary.</p><p>On successful completion, the access_mem() call-back must return zero. Otherwise, the negative value of one of the unw_error_t error-codes may be returned.</p>
<h3>ACCESS_REG</h3>
<p>Libunwind invokes the access_reg() call-back to read from or write to a scalar (non-floating-point) CPU register. The index of the register to be accessed is passed in argument regnum. To read a register, libunwind sets argument write to zero and valp to point to the word that receives the read value. To write a register, libunwind sets argument write to a non-zero value and valp to point to the word that contains the value to be written. The word that valp points to is always in the byte-order of the host-platform, regardless of the byte-order of the target. In other words, it is the responsibility of the call-back routine to convert between the target's and the host's byte-order, if necessary.</p><p>On successful completion, the access_reg() call-back must return zero. Otherwise, the negative value of one of the unw_error_t error-codes may be returned.</p>
<h3>ACCESS_FPREG</h3>
<p>Libunwind invokes the access_fpreg() call-back to read from or write to a floating-point CPU register. The index of the register to be accessed is passed in argument regnum. To read a register, libunwind sets argument write to zero and fpvalp to point to a variable of type unw_fpreg_t that receives the read value. To write a register, libunwind sets argument write to a non-zero value and fpvalp to point to the variable of type unw_fpreg_t that contains the value to be written. The word that fpvalp points to is always in the byte-order of the host-platform, regardless of the byte-order of the target. In other words, it is the responsibility of the call-back routine to convert between the target's and the host's byte-order, if necessary.</p><p>On successful completion, the access_fpreg() call-back must return zero. Otherwise, the negative value of one of the unw_error_t error-codes may be returned.</p>
<h3>RESUME</h3>
<p>Libunwind invokes the resume() call-back to resume execution in the target address space. Argument cp is the unwind-cursor that identifies the stack-frame in which execution should resume. By the time libunwind invokes the resume call-back, it has already established the desired machine- and memory-state via calls to the access_reg(), access_fpreg, and access_mem() call-backs. Thus, all the call-back needs to do is perform whatever action is needed to actually resume execution.</p><p>The resume call-back is invoked only in response to a call to <a href="../man3/unw_resume.3.html"><strong>unw_resume</strong>(3)</a>, so applications which never invoke <a href="../man3/unw_resume.3.html"><strong>unw_resume</strong>(3)</a> need not define the resume callback.</p><p>On successful completion, the resume() call-back must return zero. Otherwise, the negative value of one of the unw_error_t error-codes may be returned. As a special case, when resuming execution in the local address space, the call-back will not return on success.</p>
<h3>GET_PROC_NAME</h3>
<p>Libunwind invokes the get_proc_name() call-back to obtain the procedure-name of a static (not dynamically generated) procedure. Argument addr is an instruction-address within the procedure whose name is to be obtained. The bufp argument is a pointer to a character-buffer used to return the procedure name. The size of this buffer is specified in argument buf_len. The returned name must be terminated by a NUL character. If the procedure's name is longer than buf_len bytes, it must be truncated to buf_len-1 bytes, with the last byte in the buffer set to the NUL character and -UNW_ENOMEM must be returned. Argument offp is a pointer to a word which is used to return the byte-offset relative to the start of the procedure whose name is being returned. For example, if procedure foo() starts at address 0x40003000, then invoking get_proc_name() with addr set to 0x40003080 should return a value of 0x80 in the word pointed to by offp (assuming the procedure is at least 0x80 bytes long).</p><p>On successful completion, the get_proc_name() call-back must return zero. Otherwise, the negative value of one of the unw_error_t error-codes may be returned.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>On successful completion, unw_create_addr_space() returns a non-NULL value that represents the newly created address-space. Otherwise, NULL is returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THREAD AND SIGNAL SAFETY</h2>
        <div class="sectioncontent">
<p>unw_create_addr_space() is thread-safe but <em>not</em> safe to use from a signal handler.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO unw_create_addr_space&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/_U_dyn_register.3.html"><strong>_U_dyn_register</strong>(3)</a>, <a href="../man3/libunwind.3.html"><strong>libunwind</strong>(3)</a>, <a href="../man3/unw_destroy_addr_space.3.html"><strong>unw_destroy_addr_space</strong>(3)</a>, <a href="../man3/unw_get_proc_info.3.html"><strong>unw_get_proc_info</strong>(3)</a>, <a href="../man3/unw_init_remote.3.html"><strong>unw_init_remote</strong>(3)</a>, <a href="../man3/unw_resume.3.html"><strong>unw_resume</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>David Mosberger-Tang</p><p>Email: <strong>dmosberger@gmail.com</strong></p><p>WWW: <strong>http://www.nongnu.org/libunwind/</strong>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="unsetenv.3.html"><span aria-hidden="true">&larr;</span> unsetenv.3: Change or add an environment variable</a></li>
   <li class="next"><a href="unw_destroy_addr_space.3.html">unw_destroy_addr_space.3: Destroy unwind address space <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
