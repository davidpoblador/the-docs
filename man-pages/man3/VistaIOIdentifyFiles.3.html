<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VistaIOIdentifyFiles: Identify files specified by command line arguments</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Identify files specified by command line arguments">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="VistaIOIdentifyFiles (3) manual">
  <meta name="twitter:description" content="Identify files specified by command line arguments">
  <meta name="twitter:image" content="https://www.carta.tech/images/libvistaio-dev-VistaIOIdentifyFiles-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/VistaIOIdentifyFiles.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="VistaIOIdentifyFiles (3) manual" />
  <meta property="og:description" content="Identify files specified by command line arguments" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libvistaio-dev-VistaIOIdentifyFiles-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">VistaIOIdentifyFiles<small> (3)</small></h1>
        <p class="lead">Identify files specified by command line arguments</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/VistaIOIdentifyFiles.3.html">
      <span itemprop="name">VistaIOIdentifyFiles: Identify files specified by command line arguments</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libvistaio-dev/">
      <span itemprop="name">libvistaio-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/VistaIOIdentifyFiles.3.html">
      <span itemprop="name">VistaIOIdentifyFiles: Identify files specified by command line arguments</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;vistaio.h&gt;</strong>

VistaIOBoolean VistaIOIdentifyFiles (<em>noptions</em>, <em>options</em>, <em>keyword</em>,  <em>argc</em>, <em>argv</em>, <em>fd</em>)
int <em>noptions</em>;
VistaIOOptionDescRec <em>options</em>[<em>noptions</em>];
VistaIOStringConst <em>keyword</em>;
int *<em>argc</em>;
char *<em>argv</em>;
int <em>fd</em>;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <em>noptions</em>
  </dt>
  <dd>
    <p>Specifies the number of entries in the table of option descriptors.</p>
  </dd>
  <dt>
    <em>options</em>
  </dt>
  <dd>
    <p>Specifies the location of the table of option descriptors.</p>
  </dd>
  <dt>
    <em>keyword</em>
  </dt>
  <dd>
    <p>Specifies the option keyword that is used on the command line to specify filenames.</p>
  </dd>
  <dt>
    <em>argc</em>
  </dt>
  <dd>
    <p>Specifies the number of command line arguments to be parsed, and returns the number of arguments that were not recognized as valid filenames.</p>
  </dd>
  <dt>
    <em>argv</em>
  </dt>
  <dd>
    <p>Specifies a vector of command line arguments to be parsed, and returns a vector of the arguments that were not recognized as valid filenames.</p>
  </dd>
  <dt>
    <em>fd</em>
  </dt>
  <dd>
    <p>May specify an open file descriptor that should be checked to ensure it corresponds to a file or pipe if no filenames are explicitly given by command line arguments. Or it may be -1 to indicate that no such checking should be done.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>By convention, a Vista program that reads one or more files can be told of those files in any of three ways:</p>
<dl class='dl-vertical'>
  <dt>
    (a)
  </dt>
  <dd>
    <p>the filenames can be supplied as arguments to a command line option (e.g., <strong>vxview&nbsp;-in</strong>&nbsp;<em>file1&nbsp;file2</em>&nbsp;...);</p>
  </dd>
  <dt>
    (b)
  </dt>
  <dd>
    <p>the filenames can be supplied as command line arguments not associated with any particular option (e.g., <strong>vxview</strong>&nbsp;<em>file1&nbsp;file2</em>&nbsp;...); or</p>
  </dd>
  <dt>
    (c)
  </dt>
  <dd>
    <p>a file can be directed to the program's standard input stream (e.g., <strong>vxview&nbsp;&lt;</strong>&nbsp;<em>file1</em>).</p>
  </dd>

</dl>
<p>In parsing a command's arguments, these alternatives are considered in order. That is, first the program looks for an appropriate command line option (e.g., <strong>-in</strong>). If no such option has been specified, it checks for command line arguments not associated with any option. If those are also absent, it tries to read its file from the standard input stream.</p><p>Similarly, an output file may be specified using a command line option (e.g., <strong>vconvolve&nbsp;-out</strong> <em>file1</em>), or, by omitting the option and directing the program's standard output stream (e.g., <strong>vconvolve&nbsp;&gt;</strong>&nbsp;<em>file1</em>).</p><p><strong>VistaIOIdentifyFiles</strong> identifies a program's input files or output files according to this convention. It is called after <a href="../man3/VistaIOParseCommand.3.html"><strong>VistaIOParseCommand</strong>(3)</a> has parsed any command line arguments that can be identified as options, leaving the remaining arguments in <em>*argc</em> and <em>argv</em>. <strong>VistaIOIdentifyFiles</strong> is then called once to identify any input files, and perhaps again to identify an output file.</p><p>The <em>noptions</em> and <em>options</em> parameters specify the table used earlier by <strong>VistaIOParseCommand</strong> to parse command line options. (See <a href="../man3/VistaIOoption.3.html"><strong>VistaIOoption</strong>(3)</a> for details.) The <em>argc</em> and <em>argv</em> parameters specify a list of command line arguments that <strong>VistaIOParseCommand</strong> has returned as unparsed (including the program's name, which should be first in this list). The <em>keyword</em> parameter specifies the command line option that may be used to specify filenames (e.g., ``in'' or ``out''), absent any ``-'' prefix. The entry in the option table for the option specified by <em>keyword</em> must (a) refer to a ``found'' flag that <strong>VistaIOParseCommand</strong> can use to record whether or not the option is present on the command line, and (b) refer to a location where the option's arguments can be stored.</p><p><strong>VistaIOIdentifyFiles</strong> consults the ``found'' flag to determine whether the option was present on the command line. If it was, <strong>VistaIOIdentifyFiles</strong> returns immediately. Otherwise, it then examines <em>*argc</em> to determine whether an appropriate number of unparsed command line arguments exist. If there are a sufficient number of arguments present, they are interpreted as filenames and stored at the location indicated by the option table entry</p><p>Finally, if no filenames are found either as arguments to a -<em>keyword</em> option or as additional command line arguments, <strong>VistaIOIdentifyFiles</strong> considers the possibility that a file has been attached to a file descriptor such as the standard input or output stream. You may wish to ensure that a file is allowed to default to one of these streams only if the stream has been associated with a file or pipe, and not a terminal.  In that case, pass as <em>fd</em> the file descriptor that will serve as the default source or destination of the file, and <strong>VistaIOIdentifyFiles</strong> will check that it is indeed associated with a file or pipe. Otherwise, pass -1 for <em>fd</em> and it will not perform this check.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p><strong>VistaIOIdentifyFiles</strong> returns <small>TRUE</small> if it finds one or more files specified on the command line, and if the number of files specified is compatible with the <em>number</em> field of the option table entry. It returns <small>FALSE</small> if no files were specified, if the wrong number of files were specified, or if the file would default to a file descriptor but the file descriptor <em>fd</em> is not associated with a file or pipe.</p><p>On successful return <strong>VistaIOIdentifyFiles</strong> will have eliminated, from the list represented by <em>*argc</em> and <em>argv</em>, any command line arguments that it identified as filenames. Also, the filenames found will be stored at the location indicated by the option table entry for <em>keyword</em>. A default to the standard input or output stream will be identified by a filename of ``-''.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The following fragment is drawn from a program that reads one or more files and writes a single file. The input files may be specified with a <strong>-in</strong> option, as extra command line arguments, or by being directed to the standard input stream. The output file may be specified with a <strong>-out</strong> option, and, if that option is not present, the file will be written to the standard output stream regardless of whether it is associated with a file or a terminal.</p>
<pre>
VistaIOArgVector in_filenames;
VistaIOStringConst out_filename;
VistaIOBoolean in_found, out_found;

VistaIOOptionDescRec options[] = {
	{ "in", VistaIOStringRepn, 0, & in_filenames, & in_found,
		NULL, "Input file(s)" },
	{ "out", VistaIOStringRepn, 1, & out_filename, & out_found,
		NULL, "Output file" }
};

main (int argc, char *argv)
{
	/* Parse command line options: */
	if (! VistaIOParseCommand (VistaIONumber (options), options,
					& argc, argv)) {
Usage:		VistaIOReportUsage (argv[0], VistaIONumber (options), options,
					"file1 file2...");
		exit (1);
	}

	/* Identify input file(s): */
	if (! VistaIOIdentifyFiles (VistaIONumber (options), options, "in",
					& argc, argv, 0))
		goto Usage;

	/* Any remaining unparsed arguments are erroneous: */
	if (argc &gt; 1) {
		VistaIOReportBadArgs (argc, argv);
		goto Usage;
	}

	/* Identify output file: */
	if (! VistaIOIdentifyFiles (VistaIONumber (options), options, "out",
					& argc, argv, -1))
		goto Usage;

	/* Open and process each input file: */
	for (i = 0; i &lt; in_filenames.number; i++) {
		filename = ((VistaIOStringConst *) in_filename.vector)[i];
		if (strcmp (filename, "-") != 0) {
			f = fopen (filename, "r");
			if (f == NULL)
				VistaIOError ("Unable to open file  		} else f = stdin;

		...

	}
}
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO VistaIOIdentifyFiles&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/VistaIOOpenFile.3.html"><strong>VistaIOOpenFile</strong>(3)</a>, <a href="../man3/VistaIOParseCommand.3.html"><strong>VistaIOParseCommand</strong>(3)</a>, <a href="../man3/VistaIOReportBadArgs.3.html"><strong>VistaIOReportBadArgs</strong>(3)</a>, <a href="../man3/VistaIOReportUsage.3.html"><strong>VistaIOReportUsage</strong>(3)</a>,</p><p><a href="../man3/VistaIOoption.3.html"><strong>VistaIOoption</strong>(3)</a>,</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p><strong>VistaIOIdentifyFiles</strong> reports errors in command line options by printing directly to the standard error stream. Error reports include the program name obtained from <em>argv</em>[0]. The following messages may be produced:</p>
<dl class='dl-vertical'>
  <dt>
    <p>``<em>n</em> files must be specified by -<em>keyword</em> or extra command arguments''</p>
  </dt>
  <dd>
    <p>The program requires that <em>n</em> files be specified (<em>n</em> &gt; 1). Neither a -<em>keyword</em> option was present on the command line, nor were there at least <em>n</em> unparsed arguments that could be interpreted as filenames.</p>
  </dd>
  <dt>
    <p>``No file specified by -<em>keyword</em>, extra command argument, or &lt;''</p>
  </dt>
  <dd>
    <p>The program requires that at least one file be specified, and it can be specified in any of three ways. However, it wasn't specified in any form.</p>
  </dd>

</dl>
<p>In addition, <strong>VistaIOIdentifyFiles</strong> may invoke <strong>VistaIOError</strong> with the following messages:</p>
<dl class='dl-vertical'>
  <dt>
    <p>``Option -<em>keyword</em> not defined in option table''</p>
  </dt>
  <dd>
    <p>The <em>keyword</em> parameter specified a keyword not defined in the option table.</p>
  </dd>
  <dt>
    <p>``No value storage for option -<em>keyword''</em></p>
  </dt>
  <dd>
    <p>The <em>keyword</em> parameter specifies an option table entry whose <em>value</em> field is <small>NULL</small><strong>.</strong></p>
  </dd>
  <dt>
    <p>``No "found" flag for option -<em>keyword''</em></p>
  </dt>
  <dd>
    <p>The <em>keyword</em> parameter specifies an option table entry whose <em>found</em> field doesn't point to a dedicated <strong>VistaIOBoolean</strong> variable.</p>
  </dd>
  <dt>
    <p>``Failed to fstat() fd <em>fd</em>''</p>
  </dt>
  <dd>
    <p>An <strong>fstat</strong>() call failed on the supplied file descriptor, <em>fd</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Art Pope &lt;pope@cs.ubc.ca&gt;</p><p>Adaption to vistaio: Gert Wollny &lt;gw.fossdev@gmail.com&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="VistaIOGetPixel.3.html"><span aria-hidden="true">&larr;</span> VistaIOGetPixel.3: Get and set pixel values</a></li>
   <li class="next"><a href="VistaIOInsertAttr.3.html">VistaIOInsertAttr.3: Add an attribute to a list <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
