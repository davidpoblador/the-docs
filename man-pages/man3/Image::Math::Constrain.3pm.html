<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Image::Math::Constrain: Scaling math used in image size constraining (such as thumbnails)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Scaling math used in image size constraining (such as thumbnails)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Image::Math::Constrain (3pm) manual">
  <meta name="twitter:description" content="Scaling math used in image size constraining (such as thumbnails)">
  <meta name="twitter:image" content="https://www.carta.tech/images/libimage-math-constrain-perl-Image::Math::Constrain-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Image::Math::Constrain.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Image::Math::Constrain (3pm) manual" />
  <meta property="og:description" content="Scaling math used in image size constraining (such as thumbnails)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libimage-math-constrain-perl-Image::Math::Constrain-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Image::Math::Constrain<small> (3pm)</small></h1>
        <p class="lead">Scaling math used in image size constraining (such as thumbnails)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Image::Math::Constrain.3pm.html">
      <span itemprop="name">Image::Math::Constrain: Scaling math used in image size constraining (such as thumbnails)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libimage-math-constrain-perl/">
      <span itemprop="name">libimage-math-constrain-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Image::Math::Constrain.3pm.html">
      <span itemprop="name">Image::Math::Constrain: Scaling math used in image size constraining (such as thumbnails)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Image::Math::Constrain;

  # Create the math object
  my $math = Image::Math::Constrain-&gt;new(64, 48);

  # Get the scaling values for an arbitrary image
  my $Image = My::Image-&gt;load("myimage.jpg");
  my $scaling = $math-&gt;constrain($Image-&gt;width, $Image-&gt;height);
  die "Don&apos;t need to scale" if $scaling-&gt;{scale} == 1;

  # Returns the three values as a list when called in array contect
  my ($width, $height, $scale) = $math-&gt;constrain(800, 600);

  # There are lots of different ways to specify the constrain

  # Constrain based on width only
  $math = Image::Math::Constrain-&gt;new(100, 0);

  # Constrain based on height only
  $math = Image::Math::Constrain-&gt;new(0, 100);

  # Or you can provide the two values by ARRAY ref
  $math = Image::Math::Constrain-&gt;new( [ 64, 48 ] );

  # Constrain height and width by the same value
  $math = Image::Math::Constrain-&gt;new(100);

  # Various string forms to do the same thing
  $math = Image::Math::Constrain-&gt;new(&apos;constrain(800x600)&apos;);
  $math = Image::Math::Constrain-&gt;new(&apos;300x200&apos;);
  $math = Image::Math::Constrain-&gt;new(&apos;300w200h&apos;);
  $math = Image::Math::Constrain-&gt;new(&apos;100w&apos;);
  $math = Image::Math::Constrain-&gt;new(&apos;100h&apos;);

  # Serialises back to &apos;constrain(800x600)&apos;.
  # You can use this to store the object if you wish.
  my $string = $math-&gt;as_string;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>There are a number of different modules and systems that constrain image sizes, such as thumbnailing. Every one of these independantly implement the same logic. That is, given a width and/or height constraint, they check to see if the image is bigger than the constraint, and if so scale the image down proportionally so that it fits withint the constraints.</p><p>Of course, they all do it slightly differnetly, and some do it better than others.</p><p>\*(C`Image::Math::Constrain\*(C' has been created specifically to implement this logic once, and implement it properly. Any module or script that does image size constraining or thumbnailing should probably be using this for its math.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>-head2 new [ $width, $height ] The \*(C`new\*(C' constructor takes the dimentions to which you wish to constrain and creates a new math object.</p><p>You can feed a number of different height/width pairs to this object, and it will returns the scaling you will need to do to shrink the image down to the constraints, and the final width and height of the image after scaling, at least one of which should match the constraint.</p><p>A value of zero is used to indicate that a dimension should not be constrained. Thus, \*(C`-&gt;new(400, 0)\*(C' would indicate to constrain the width to 400 pixels, but to ignore the height (only changing it to keep the image proportional).</p><p>The constraint dimensions can be provided in a number of different formats. See the Synopsis for a quick list of these. To stay compatible with automated constraint generators, you <strong>can</strong> provide constrains as zero width and zero height, and the math object will not attempt to do any scaling, always returning the input width/height, and a scaling value of 1.</p><p>Once created, the object is fully Storable and re-usable and does not store any state information from a single calculation run.</p><p>Returns a new Image::Math::Constrain object, or \*(C`undef\*(C' if the constraints have been defined wrongly.</p><h3>width</h3>
<p>The \*(C`width\*(C' method gets the width constraint for the object.</p><p>Returns a positive integer, or zero if there is no width constraint.</p>
<h3>height</h3>
<p>The \*(C`height\*(C' method gets the height constrain for the object.</p><p>Returns a positive integer, or zero if there is no height constraint.</p>
<h3>as_string</h3>
<p>The \*(C`as_string\*(C' method returns the constrain rule as a string in the format 'constrain(123x123)'. This string form is also supported by the constructor and so it provides a good way to serialise the constrain rule, should you ever need to do so.</p><p>As this value is not localisable, it should never really be shown to the user directly, unless you are sure you will never add i18n to your app. The \*(C`constrain\*(C' method takes the height and width of an image and applies the constrain math to them to get the final width, height and the scaling value needed in order to get the your image from it's current size to the final size.</p><p>The resulting size will be in proportion to the original (it will have the same aspect ratio) and will never be larger than the original.</p><p>When called in array context, returns the new dimensions and scaling value as a list, as in the following.</p><p>  my ($width, $height, $scale) = $math-&gt;constrain(800, 600);</p><p>When called in scalar context, it returns a reference to a hash containing the keys 'width', 'height', and 'scale'.</p><p>  my $hash = $math-&gt;constrain(800, 600);</p><p>  print "New Width  : $hash-&gt;{width}&#92;n";   print "New Height : $hash-&gt;{height}&#92;n";   print "Scaling By : $hash-&gt;{scalar}&#92;n";</p><p>Having been created correctly, the object will only return an error if the width and height arguments are not correct (are not positive integers).</p><p>In list context, returns a null list, so all three values will be \*(C`undef\*(C'.</p><p>In scalar context, just returns \*(C`undef\*(C'.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TO DO</h2>
        <div class="sectioncontent">
<p>- Write more special-case unit tests</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORT</h2>
        <div class="sectioncontent">
<p>Bugs should always be submitted via the \s-1CPAN\s0 bug tracker</p><p>&lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Image-Math-Constrain&gt;</p><p>For other issues, contact the maintainer</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Adam Kennedy &lt;adamk@cpan.org&gt;</p><p>Thank you to Phase N (&lt;http://phase-n.com/&gt;) for permitting the open sourcing and release of this distribution.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2004 - 2008 Adam Kennedy.</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p><p>The full text of the license can be found in the \s-1LICENSE\s0 file included with this module.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Image::Info::XPM.3pm.html"><span aria-hidden="true">&larr;</span> Image::Info::XPM.3pm: Xpm support for image::info</a></li>
   <li class="next"><a href="Image::MetaData::JPEG.3pm.html">Image::MetaData::JPEG.3pm: Perl extension for showing/modifying jpeg (meta)data. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
