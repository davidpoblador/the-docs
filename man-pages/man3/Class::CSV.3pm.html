<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Class::CSV: Class based csv parser/writer</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Class based csv parser/writer">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Class::CSV (3pm) manual">
  <meta name="twitter:description" content="Class based csv parser/writer">
  <meta name="twitter:image" content="https://www.carta.tech/images/libclass-csv-perl-Class::CSV-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Class::CSV.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Class::CSV (3pm) manual" />
  <meta property="og:description" content="Class based csv parser/writer" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libclass-csv-perl-Class::CSV-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Class::CSV<small> (3pm)</small></h1>
        <p class="lead">Class based csv parser/writer</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Class::CSV.3pm.html">
      <span itemprop="name">Class::CSV: Class based csv parser/writer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libclass-csv-perl/">
      <span itemprop="name">libclass-csv-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Class::CSV.3pm.html">
      <span itemprop="name">Class::CSV: Class based csv parser/writer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Class::CSV;

  my $csv = Class::CSV-&gt;parse(
    filename =&gt; &apos;test.csv&apos;,
    fields   =&gt; [qw/item qty sub_total/]
  );

  foreach my $line (@{$csv-&gt;lines()}) {
    $line-&gt;sub_total(&apos;$&apos;. sprintf("%0.2f", $line-&gt;sub_total()));

    print &apos;Item:     &apos;. $line-&gt;item(). "&#92;n".
          &apos;Qty:      &apos;. $line-&gt;qty(). "&#92;n".
          &apos;SubTotal: &apos;. $line-&gt;sub_total(). "&#92;n";
  }

  my $cvs_as_string = $csv-&gt;string();

  $csv-&gt;print();

  my $csv = Class::CSV-&gt;new(
    fields         =&gt; [qw/userid username/],
    line_separator =&gt; "&#92;r&#92;n";
  );

  $csv-&gt;add_line([2063, &apos;testuser&apos;]);
  $csv-&gt;add_line({
    userid   =&gt; 2064,
    username =&gt; &apos;testuser2&apos;
  });
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module can be used to create objects from <em>\s-1CSV\s0</em> files, or to create <em>\s-1CSV\s0</em> files from objects. Text::CSV_XS is used for parsing and creating <em>\s-1CSV\s0</em> file lines, so any limitations in Text::CSV_XS will of course be inherant in this module.</p><p><strong>&#92;$1</strong></p><p>None by default.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHOD</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>parse</strong>
  </dt>
  <dd>
    <p>the parse constructor takes a hash as its paramater, the various options that can be in this hash are detailed below.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>Required Options</strong>
  </dt>
  <dd>
    <ul>
<li><p><strong>fields</strong> - an array ref containing the list of field names to use for each row. there are some reserved words that cannot be used as field names, there is no checking done for this at the moment but it is something to be aware of. the reserved field names are as follows: \*(C`string\*(C', \*(C`set\*(C', \*(C`get\*(C'. also field names cannot contain whitespace or any characters that would not be allowed in a method name.</p></li>
</ul>
  </dd>
  <dt>
    <strong>Source Options</strong> (only one of these is needed)
  </dt>
  <dd>
    <ul>
<li><p><strong>filename</strong> - the path of the <em>\s-1CSV\s0</em> file to be opened and parsed.</p></li><li><p><strong>filehandle</strong> - the file handle of the <em>\s-1CSV\s0</em> file to be parsed.</p></li><li><p><strong>objects</strong> - an array ref of objects (e.g. Class::DBI objects). for this to work properly the field names provided in <strong>fields</strong> needs to correspond to the field names of the objects in the array ref.</p></li><li><p><strong>classdbi_objects</strong> - <strong>depreciated</strong> use objects instead - using classdbi_objects will still work but its advisable to update your code.</p></li>
</ul>
  </dd>
  <dt>
    <strong>Optional Options</strong>
  </dt>
  <dd>
    <ul>
<li><p><strong>line_separator</strong> - the line seperator to be included at the end of every line. defaulting to \*(C`&#92;n\*(C' (unix carriage return).</p></li>
</ul>
  </dd>

</dl>

  </dd>
  <dt>
    <strong>new</strong>
  </dt>
  <dd>
    <p>the <em>new</em> constructor takes a hash as its paramater, the same options detailed in <strong>parse</strong> apply to <em>new</em> however no <strong>Source Options</strong> can be used. this constructor creates a blank <em>\s-1CSV\s0</em> object of which lines can be added via <strong>add_line</strong>.</p>
  </dd>
  <dt>
    <strong>lines</strong>
  </dt>
  <dd>
    <p>returns an array ref containing objects of each <em>\s-1CSV\s0</em> line (made via Class::Accessor). the field names given upon construction are available as accessors and can be <em>set</em> or <em>get</em>. for more information please see the notes below or the perldoc for Class::Accessor. the <strong>lines</strong> accessor is also able to be updated/retrieved in the same way as individual lines fields (examples below).</p>
<dl class='dl-vertical'>
  <dt>
    <strong>Example</strong>
  </dt>
  <dd>
    <p>retrieving the lines:</p><p>  my @lines = @{$csv-&gt;lines()};</p><p>removing the first line:   pop @lines;</p><p>  $csv-&gt;lines(&#92;@lines);</p><p>sorting the lines:   @lines = sort { $a-&gt;userid() &lt;=&gt; $b-&gt;userid() } @lines:</p><p>  $csv-&gt;lines(&#92;@lines);</p><p>sorting the lines (all-in-one way):   $csv-&gt;lines([ sort { $a-&gt;userid() &lt;=&gt; $b-&gt;userid() } @{$csv-&gt;lines()} ]);</p>
  </dd>
  <dt>
    <strong>Retrieving a fields value</strong>
  </dt>
  <dd>
    <p>there is two ways to retrieve a fields value (as documented in Class::Accessor). firstly you can call the field name on the object and secondly you can call \*(C`get\*(C' on the object with the field name as the argument (multiple field names can be specified to retrieve an array of values). examples are below.</p><p>  my $value = $line-&gt;test();</p><p><em>\s-1OR\s0</em>   my $value = $line-&gt;get(&apos;test&apos;);</p><p><em>\s-1OR\s0</em>   my @values = $line-&gt;get(qw/test test2 test3/);</p>
  </dd>
  <dt>
    <strong>Setting a fields value</strong>
  </dt>
  <dd>
    <p>setting a fields value is simmilar to getting a fields value. there are two ways to set a fields value (as documented in Class::Accessor). firstly you can simply call the field name on the object with the value as the argument or secondly you can call \*(C`set\*(C' on the object with a hash of fields and their values to set (this isn't standard in Class::Accessor, i have overloaded the \*(C`set\*(C' method to allow this). examples are below.</p><p>  $line-&gt;test(&apos;123&apos;);</p><p><em>\s-1OR\s0</em>   $line-&gt;set( test =&gt; &apos;123&apos; );</p><p><em>\s-1OR\s0</em>   $line-&gt;set(     test  =&gt; &apos;123&apos;,     test2 =&gt; &apos;456&apos;   );</p>
  </dd>
  <dt>
    <strong>Retrieving a line as a string</strong>
  </dt>
  <dd>
    <p>to retrieve a line as a string simply call \*(C`string\*(C' on the object.</p><p>  my $string = $line-&gt;string();</p>
  </dd>

</dl>

  </dd>
  <dt>
    <strong>new_line</strong>
  </dt>
  <dd>
    <p>returns a new line object, this can be useful for to \*(C`splice\*(C' a line into <strong>lines</strong> (see example below). you can pass the values of the line as an <em>\s-1ARRAY\s0</em> ref or a <em>\s-1HASH\s0</em> ref.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>Example</strong>
  </dt>
  <dd>
    <p>  my $line = $csv-&gt;new_line({ userid =&gt; 123, domainname =&gt; &apos;splicey.com&apos; });   my @lines = $csv-&gt;lines();   splice(@lines, 1, 0, $line); <em>\s-1OR\s0</em>   splice(@{$csv-&gt;lines()}, 1, 0, $csv-&gt;new_line({ userid =&gt; 123, domainname =&gt; &apos;splicey.com&apos; }));</p>
  </dd>

</dl>

  </dd>
  <dt>
    <strong>add_line</strong>
  </dt>
  <dd>
    <p>adds a line to the <strong>lines</strong> stack. this is mainly useful when the <strong>new</strong> constructor is used but can of course be used with any constructor. it will add a new line to the end of the <strong>lines</strong> stack. you can pass the values of the line as an <em>\s-1ARRAY\s0</em> ref or a <em>\s-1HASH\s0</em> ref. examples of how to use this are below.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>Example</strong>
  </dt>
  <dd>
    <p>  $csv-&gt;add_line([&apos;house&apos;, 100000, 4]);</p><p>  $csv-&gt;add_line({     item     =&gt; &apos;house&apos;,     cost     =&gt; 100000,     bedrooms =&gt; 4   });</p>
  </dd>

</dl>

  </dd>
  <dt>
    <strong>string</strong>
  </dt>
  <dd>
    <p>returns the object as a string (<em>\s-1CSV\s0</em> file format).</p>
  </dd>
  <dt>
    <strong>print</strong>
  </dt>
  <dd>
    <p>calls \*(C`print\*(C' on <strong>string</strong> (prints the <em>\s-1CSV\s0</em> to \s-1STDOUT\s0).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Class::CSV&hellip;</h2>
        <div class="sectioncontent">
<p>Text::CSV_XS, Class::Accessor</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>David Radunz, &lt;david@boxen.net&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2004 by David Radunz</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Class::C3::Componentised::ApplyHooks.3pm.html"><span aria-hidden="true">&larr;</span> Class::C3::Componentised::ApplyHooks.3pm: Allow component to run methods on the class that is being injected into</a></li>
   <li class="next"><a href="Class::Container.3pm.html">Class::Container.3pm: Glues object frameworks together transparently <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
