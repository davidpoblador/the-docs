<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XkbGetMap: Allocate an xkbdescrec structure and populate it with the server's keyboard client map and server map</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Allocate an xkbdescrec structure and populate it with the server's keyboard client map and server map">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="XkbGetMap (3) manual">
  <meta name="twitter:description" content="Allocate an xkbdescrec structure and populate it with the server's keyboard client map and server map">
  <meta name="twitter:image" content="https://www.carta.tech/images/libx11-doc-XkbGetMap-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/XkbGetMap.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="XkbGetMap (3) manual" />
  <meta property="og:description" content="Allocate an xkbdescrec structure and populate it with the server's keyboard client map and server map" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libx11-doc-XkbGetMap-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">XkbGetMap<small> (3)</small></h1>
        <p class="lead">Allocate an xkbdescrec structure and populate it with the server's keyboard client map and server map</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/XkbGetMap.3.html">
      <span itemprop="name">XkbGetMap: Allocate an xkbdescrec structure and populate it with the server's keyboard client map and server map</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libx11-doc/">
      <span itemprop="name">libx11-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/XkbGetMap.3.html">
      <span itemprop="name">XkbGetMap: Allocate an xkbdescrec structure and populate it with the server's keyboard client map and server map</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>XkbDescPtr XkbGetMap</strong> <strong>(\^Display *</strong><em>display</em><strong>\^,</strong> <strong>unsigned int </strong><em>which</em><strong>\^,</strong> <strong>unsigned int </strong><em>device_spec</em><strong>\^);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>- display</em></p>
  </dt>
  <dd>
    <p>connection to X server</p>
  </dd>
  <dt>
    <p><em>- which</em></p>
  </dt>
  <dd>
    <p>mask selecting subcomponents to populate</p>
  </dd>
  <dt>
    <p><em>- device_spec</em></p>
  </dt>
  <dd>
    <p>device_id, or XkbUseCoreKbd</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Xkb provides two functions to obtain the keyboard mapping components from the server. The first function, <em>XkbGetMap,</em> allocates an XkbDescRec structure, retrieves mapping components from the server, and stores them in the XkbDescRec structure it just allocated. The second function, <em>XkbGetUpdatedMap,</em> retrieves mapping components from the server and stores them in an XkbDescRec structure that has previously been allocated.</p><p>To allocate an XkbDescRec structure and populate it with the server's keyboard client map and server map, use <em>XkbGetMap. XkbGetMap</em> is similar to <em>XkbGetKeyboard,</em> but is used only for obtaining the address of an XkbDescRec structure that is populated with keyboard mapping components. It allows finer control over which substructures of the keyboard mapping components are to be populated. <em>XkbGetKeyboard</em> always returns fully populated components, while <em>XkbGetMap</em> can be instructed to return a partially populated component.</p><p>The <em>which mask is a bitwise inclusive OR of the masks defined in Table 14.1. Only</em> those portions of the keyboard server map and the keyboard client maps that are specified in <em>which</em> are allocated and populated.</p><p>In addition to allocating and obtaining the server map and the client map, <em>XkbGetMap</em> also sets the <em>device_spec,</em> the <em>min_key_code,</em> and <em>max_key_code</em> fields of the keyboard description.</p><p><em>XkbGetMap</em> is synchronous; it queries the server for the desired information, waits for a reply, and then returns. If successful, <em>XkbGetMap</em> returns a pointer to the XkbDescRec structure it allocated. If unsuccessful, <em>XkbGetMap</em> returns NULL. When unsuccessful, one of the following protocol errors is also generated: BadAlloc (unable to allocate the XkbDescRec structure), BadValue (some mask bits in <em>which</em> are undefined), or BadImplementation (a compatible version of the Xkb extension is not available in the server). To free the returned data, use <em>XkbFreeClientMap.</em></p><p>Xkb also provides convenience functions to get partial component definitions from the server. These functions are specified in the "convenience functions" column in Table 1. Refer to the sections listed in the table for more information on these functions.</p><table class="table table-striped">
<tr>
<th>Table 1 Xkb Mapping Component Masks</th>
<th></th>
<th></th>
<th></th>
<th></th></tr>

<tr>
<td>and Convenience Functions</td>
<td></td>
<td></td>
<td></td>
<td></td></tr>

<tr>
<td>Mask</td>
<td>Value</td>
<td>Map</td>
<td>Fields</td>
<td>Convenience</td></tr>

<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Functions</td></tr>

<tr>
<td>XkbKeyTypesMask    </td>
<td>(1&lt;&lt;0)</td>
<td>client</td>
<td>types          size_types          num_types    </td>
<td>XkbGetKeyTypes          XkbResizeKeyType          XkbCopyKeyType          XkbCopyKeyTypes    </td></tr>

<tr>
<td>XkbKeySymsMask    </td>
<td>(1&lt;&lt;1)</td>
<td>client</td>
<td>syms          size_syms          num_syms          key_sym_map    </td>
<td>XkbGetKeySyms          XkbResizeKeySyms          XkbChangeTypesOfKey    </td></tr>

<tr>
<td>XkbModifierMapMask    </td>
<td>(1&lt;&lt;2)</td>
<td>client</td>
<td>modmap</td>
<td>XkbGetKeyModifierMap    </td></tr>

<tr>
<td>XkbExplicitComponentsMask    </td>
<td>(1&lt;&lt;3)</td>
<td>server</td>
<td>explicit    </td>
<td>XkbGetKeyExplicitComponents    </td></tr>

<tr>
<td>XkbKeyActionsMask    </td>
<td>(1&lt;&lt;4)</td>
<td>server</td>
<td>key_acts          acts          num_acts          size_acts    </td>
<td>XkbGetKeyActions          XkbResizeKeyActions    </td></tr>

<tr>
<td>XkbKeyBehaviorsMask    </td>
<td>(1&lt;&lt;5)</td>
<td>server</td>
<td>behaviors    </td>
<td>XkbGetKeyBehaviors    </td></tr>

<tr>
<td>XkbVirtualModsMask    </td>
<td>(1&lt;&lt;6)</td>
<td>server</td>
<td>vmods    </td>
<td>XkbGetVirtualMods    </td></tr>

<tr>
<td>XkbVirtualModMapMask    </td>
<td>(1&lt;&lt;7)</td>
<td>server</td>
<td>vmodmap    </td>
<td>XkbGetVirtualModMap    </td></tr>
</table>
<pre>
Xkb defines combinations of these masks for convenience:

   #define XkbResizableInfoMask   (XkbKeyTypesMask)
   #define XkbAllClientInfoMask   (XkbKeyTypesMask | XkbKeySymsMask |
                                   XkbModifierMapMask)
   #define XkbAllServerInfoMask   (XkbExplicitComponentsMask |
                                   XkbKeyActionsMask |
                                   XkbKeyBehaviorsMask |
                                   XkbVirtualModsMask |
                                   XkbVirtualModMapMask)
   #define XkbAllMapComponentsMask XkbAllClientInfoMask |
                                   XkbAllServerInfoMask)

</pre>
<p>Key types, symbol maps, and actions are all interrelated: changes in one require changes in the others. The convenience functions make it easier to edit these components and handle the interdependencies.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STRUCTURES</h2>
        <div class="sectioncontent">
<p>The complete description of an Xkb keyboard is given by an XkbDescRec. The component structures in the XkbDescRec represent the major Xkb components.</p>
<pre>
typedef struct {
   struct _XDisplay * display;      /\(** connection to X server */
   unsigned short     flags;        /\(** private to Xkb, do not modify */
   unsigned short     device_spec;  /\(** device of interest */
   KeyCode            min_key_code; /\(** minimum keycode for device */
   KeyCode            max_key_code; /\(** maximum keycode for device */
   XkbControlsPtr     ctrls;        /\(** controls */
   XkbServerMapPtr    server;       /\(** server keymap */
   XkbClientMapPtr    map;          /\(** client keymap */
   XkbIndicatorPtr    indicators;   /\(** indicator map */
   XkbNamesPtr        names;        /\(** names for all components */
   XkbCompatMapPtr    compat;       /\(** compatibility map */
   XkbGeometryPtr     geom;         /\(** physical geometry of keyboard */
} XkbDescRec, *XkbDescPtr;

</pre>
<p>The <em>display</em> field points to an X display structure. The <em>flags field is private to the library: modifying</em> <em>flags</em> may yield unpredictable results. The <em>device_spec</em> field specifies the device identifier of the keyboard input device, or XkbUseCoreKeyboard, which specifies the core keyboard device. The <em>min_key_code</em> and <em>max_key_code</em> fields specify the least and greatest keycode that can be returned by the keyboard.</p><p>Each structure component has a corresponding mask bit that is used in function calls to indicate that the structure should be manipulated in some manner, such as allocating it or freeing it. These masks and their relationships to the fields in the XkbDescRec are shown in Table 2.</p><table class="table table-striped">
<tr>
<th>Table 2 Mask Bits for XkbDescRec</th>
<th></th>
<th></th></tr>

<tr>
<td>Mask Bit</td>
<td>XkbDescRec Field</td>
<td>Value</td></tr>

<tr>
<td>XkbControlsMask</td>
<td>ctrls</td>
<td>(1L&lt;&lt;0)</td></tr>

<tr>
<td>XkbServerMapMask</td>
<td>server</td>
<td>(1L&lt;&lt;1)</td></tr>

<tr>
<td>XkbIClientMapMask</td>
<td>map</td>
<td>(1L&lt;&lt;2)</td></tr>

<tr>
<td>XkbIndicatorMapMask</td>
<td>indicators</td>
<td>(1L&lt;&lt;3)</td></tr>

<tr>
<td>XkbNamesMask</td>
<td>names</td>
<td>(1L&lt;&lt;4)</td></tr>

<tr>
<td>XkbCompatMapMask</td>
<td>compat</td>
<td>(1L&lt;&lt;5)</td></tr>

<tr>
<td>XkbGeometryMask</td>
<td>geom</td>
<td>(1L&lt;&lt;6)</td></tr>

<tr>
<td>XkbAllComponentsMask</td>
<td>All Fields</td>
<td>(0x7f)</td></tr>
</table>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO XkbGetMap&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/XkbChangeTypesOfKey.3.html"><strong>XkbChangeTypesOfKey</strong>(3)</a>, <a href="../man3/XkbCopyKeyType.3.html"><strong>XkbCopyKeyType</strong>(3)</a>, <a href="../man3/XkbCopyKeyTypes.3.html"><strong>XkbCopyKeyTypes</strong>(3)</a>, <a href="../man3/XkbFreeClientMap.3.html"><strong>XkbFreeClientMap</strong>(3)</a>, <a href="../man3/XkbGetKeyActions.3.html"><strong>XkbGetKeyActions</strong>(3)</a>, <a href="../man3/XkbGetKeyBehaviors.3.html"><strong>XkbGetKeyBehaviors</strong>(3)</a>, <a href="../man3/XkbGetKeyboard.3.html"><strong>XkbGetKeyboard</strong>(3)</a>, <a href="../man3/XkbGetKeyExplicitComponents.3.html"><strong>XkbGetKeyExplicitComponents</strong>(3)</a>, <a href="../man3/XkbGetKeyModifierMap.3.html"><strong>XkbGetKeyModifierMap</strong>(3)</a>, <a href="../man3/XkbGetKeySyms.3.html"><strong>XkbGetKeySyms</strong>(3)</a>, <a href="../man3/XkbGetKeyTypes.3.html"><strong>XkbGetKeyTypes</strong>(3)</a>, <a href="../man3/XkbGetUpdatedMap.3.html"><strong>XkbGetUpdatedMap</strong>(3)</a>, <strong>XkbGetVirtualModMap</strong>(3), <a href="../man3/XkbGetVirtualMods.3.html"><strong>XkbGetVirtualMods</strong>(3)</a>, <a href="../man3/XkbResizeKeyActions.3.html"><strong>XkbResizeKeyActions</strong>(3)</a>, <a href="../man3/XkbResizeKeySyms.3.html"><strong>XkbResizeKeySyms</strong>(3)</a>, <a href="../man3/XkbResizeKeyType.3.html"><strong>XkbResizeKeyType</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XkbGetKeyboardByName.3.html"><span aria-hidden="true">&larr;</span> XkbGetKeyboardByName.3: Build a new keyboard description from a set of named components, and to optionally have the server use the resulting description to replace an active one</a></li>
   <li class="next"><a href="XkbGetNameChanges.3.html">XkbGetNameChanges.3: Update the local copy of the keyboard description with the actual values of the results of one or more calls to xkbnotenamechanges <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
