<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IO::Handle::Util: Functions for working with io::handle like objects.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Functions for working with io::handle like objects.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="IO::Handle::Util (3pm) manual">
  <meta name="twitter:description" content="Functions for working with io::handle like objects.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libio-handle-util-perl-IO::Handle::Util-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/IO::Handle::Util.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="IO::Handle::Util (3pm) manual" />
  <meta property="og:description" content="Functions for working with io::handle like objects." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libio-handle-util-perl-IO::Handle::Util-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">IO::Handle::Util<small> (3pm)</small></h1>
        <p class="lead">Functions for working with io::handle like objects.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/IO::Handle::Util.3pm.html">
      <span itemprop="name">IO::Handle::Util: Functions for working with io::handle like objects.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libio-handle-util-perl/">
      <span itemprop="name">libio-handle-util-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/IO::Handle::Util.3pm.html">
      <span itemprop="name">IO::Handle::Util: Functions for working with io::handle like objects.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    # make something that looks like a filehandle from a random data:
    my $io = io_from_any $some_data;

    # or from a callback that returns strings:
    my $io = io_from_getline sub { return $another_line };

    # create a callback that iterates through the handle
    my $read_cb = io_to_read_cb $io;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module provides a number of helpful routines to manipulate or create IO::Handle like objects.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<h3>Coercions resulting in \s-1IO\s0 objects</h3>
<p>These are available using the \*(C`:io_from\*(C' export group. Inspects the value of \*(C`whatever\*(C' and calls the appropriate coercion function on it, either \*(C`io_from_ref\*(C' or \*(C`io_from_string\*(C'. Depending on the reference type of $some_ref invokes either \*(C`io_from_object\*(C', \*(C`io_from_array\*(C' or \*(C`io_from_scalar_ref\*(C'. Code references are not coerced automatically because either \*(C`io_from_thunk\*(C' or \*(C`io_from_getline\*(C' or \*(C`io_from_write_cb\*(C' could all make sense. Globs are returned as is <strong>only</strong> if they have a valid \*(C`IO\*(C' slot. Depending on the class of $obj either returns or coerces the object.</p><p>Objects that are passed through include anything that subclasses IO::Handle or seems to duck type (supports the \*(C`print\*(C' and \*(C`getline\*(C' methods, which might be a bit too permissive).</p><p>Objects that are coerced currently only include Path::Class::File, which will have the \*(C`openr\*(C' method invoked on it.</p><p>Anything else is an error. Instantiates an IO::String object using $str as the buffer. Note that $str is <strong>not</strong> passed as an alias, so writing to the \s-1IO\s0 object will not modify string. For that see \*(C`io_from_scalar_ref\*(C'.</p>
<dl class='dl-vertical'>
  <dt>
    io_from_array &#92;@array
  </dt>
  <dd>
    <p>Creates an IO::Handle::Iterator that will return the elements of @array one by one. Note that a <em>copy</em> of @array is made. In order to be able to append more elements to the array or remove the ones that have been returned use IO::Handle::Iterator yourself directly.</p>
  </dd>
  <dt>
    io_from_scalar_ref &#92;$str
  </dt>
  <dd>
    <p>Creates an IO::String object using $str as the buffer. Writing to the \s-1IO\s0 object will modify $str.</p>
  </dd>
  <dt>
    io_from_thunk sub { ... }
  </dt>
  <dd>
    <p>Invokes the callback once in list context the first time it's needed, and then returns each element of the list like \*(C`io_from_array\*(C' would.</p>
  </dd>
  <dt>
    io_from_getline sub { ... }
  </dt>
  <dd>
    <p>Creates an IO::Handle::Iterator object using the callback.</p>
  </dd>
  <dt>
    io_from_write_cb sub { ... }
  </dt>
  <dd>
    <p>Creates an IO::Handle::Prototype::Fallback using the callback. The callback will always be invoked with one string argument and with the values of $, and \*(C`$&#92;\*(C' localized to \*(C`undef\*(C'.</p>
  </dd>

</dl>

<h3>Coercions utilizing \s-1IO\s0 objects</h3>
<p>These coercions will actually call \*(C`io_from_any\*(C' on their argument first. This allows you to do things like:</p><p>    my $str = &apos;&apos;;     my $sub = io_to_write_cb(&#92;$str);</p><p>    $sub-&gt;("foo");</p><p>These are available using the \*(C`:io_to\*(C' export group. Creates a code ref that will invoke \*(C`print\*(C' on the handle with the arguments to the callback. $, and \*(C`$&#92;\*(C' will both be localized to \*(C`undef\*(C'. Creates a code ref that will invoke \*(C`getline\*(C' on the handle. $/ will not be localized and should probably be set to a reference to a number if you want efficient iteration. See perlvar for details. Slurps a string out of the \s-1IO\s0 object by reading all the data. If a string was passed it is returned as is. Returns an array reference containing all the lines of the \s-1IO\s0 object. If an array reference was passed it is returned as is. Returns the list of lines from the \s-1IO\s0 object. Warns if not invoked in list context. If an array reference was passed it is dereferenced an its elements are returned. If the filehandle is an unblessed glob returns it as is, otherwise returns a new glob which is tied to delegate to the \s-1OO\s0 interface. This lets you use most of the builtins without the method syntax:     my $fh = io_to_glob($some_kind_of_OO_handle);</p><p>    while ( defined( my $line = &lt;$fh&gt; ) ) {         ...     }</p>
<h3>Misc functions</h3>
<p>Given a key-value pair list of named callbacks, constructs an IO::Handle::Prototype::Fallback object with those callbacks. For example:     my $io = io_prototype print =&gt; sub {         my $self = shift;</p><p>        no warnings &apos;uninitialized&apos;;         $string .= join($,, @_) . $&#92;;     };</p><p>    $io-&gt;say("Hello"); # $string now has "Hello&#92;n" See IO::Handle::Prototype::Fallback for more details. Returns true if the \s-1IO\s0 handle probably could be passed to something like AnyEvent::Handle which would break encapsulation. Checks for the following conditions:</p><ul>
<li><p>The handle has a reftype of either a \*(C`GLOB\*(C' with an \*(C`IO\*(C' slot, or is an \*(C`IO\*(C' itself.</p></li><li><p>The handle's \*(C`fileno\*(C' method returns a positive number, corresponding to a filedescriptor.</p></li><li><p>The \*(C`fileno\*(C' builtin returns the same thing as \*(C`fileno\*(C' invoked as a method.</p></li>
</ul><p>If these conditions hold the handle is <em>probably</em> \s-1OK\s0 to work with using the \s-1IO\s0 builtins directly, or passing the filedesctiptor to C land, instead of by invoking methods on it.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO IO::Handle::Util&hellip;</h2>
        <div class="sectioncontent">
<p>IO::Handle, FileHandle, IO::String, perlio, \*(L"open\*(R" in perlfunc</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION CONTROL</h2>
        <div class="sectioncontent">
<p>&lt;http://github.com/nothingmuch/io-handle-util&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Yuval Kogman</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT & LICENSE</h2>
        <div class="sectioncontent">
<p>        Copyright (c) 2009 Yuval Kogman. All rights reserved         This program is free software; you can redistribute         it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="IO::Handle::Prototype::Fallback.3pm.html"><span aria-hidden="true">&larr;</span> IO::Handle::Prototype::Fallback.3pm: Create io::handle like objects using a set of callbacks.</a></li>
   <li class="next"><a href="IO::InnerFile.3pm.html">IO::InnerFile.3pm: Define a file inside another file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
