<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CGI::Application::Plugin::ValidateRM: Help validate cgi::application run modes using data::formvalidator</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Help validate cgi::application run modes using data::formvalidator">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="CGI::Application::Plugin::ValidateRM (3pm) manual">
  <meta name="twitter:description" content="Help validate cgi::application run modes using data::formvalidator">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcgi-application-plugin-validaterm-perl-CGI::Application::Plugin::ValidateRM-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/CGI::Application::Plugin::ValidateRM.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="CGI::Application::Plugin::ValidateRM (3pm) manual" />
  <meta property="og:description" content="Help validate cgi::application run modes using data::formvalidator" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcgi-application-plugin-validaterm-perl-CGI::Application::Plugin::ValidateRM-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">CGI::Application::Plugin::ValidateRM<small> (3pm)</small></h1>
        <p class="lead">Help validate cgi::application run modes using data::formvalidator</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/CGI::Application::Plugin::ValidateRM.3pm.html">
      <span itemprop="name">CGI::Application::Plugin::ValidateRM: Help validate cgi::application run modes using data::formvalidator</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcgi-application-plugin-validaterm-perl/">
      <span itemprop="name">libcgi-application-plugin-validaterm-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/CGI::Application::Plugin::ValidateRM.3pm.html">
      <span itemprop="name">CGI::Application::Plugin::ValidateRM: Help validate cgi::application run modes using data::formvalidator</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use CGI::Application::Plugin::ValidateRM;

 my  $results = $self-&gt;check_rm(&apos;form_display&apos;,&apos;_form_profile&apos;) || return $self-&gt;check_rm_error_page;


 # Optionally, you can pass additional options to HTML::FillInForm-&gt;fill()
 my $results = $self-&gt;check_rm(&apos;form_display&apos;,&apos;_form_profile&apos;, { fill_password =&gt; 0 })
        || return $self-&gt;check_rm_error_page;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>CGI::Application::Plugin::ValidateRM helps to validate web forms when using the CGI::Application framework and the Data::FormValidator module.</p><h3>\fIcheck_rm()\fP</h3>
<p>Validates a form displayed in a run mode with a \*(C`Data::FormValidator\*(C' profile, returning the results and possibly an a version of the form page with errors marked on the page.</p><p>In scalar context, it returns simply the Data::FormValidator::Results object which conveniently evaluates to false in a boolean context if there were any missing or invalide fields. This is the recommended calling convention.</p><p>In list context, it returns the results object followed by the error page, if any. This was the previous recommended syntax, and was used like this:</p><p> my ($results,$err_page) = $self-&gt;check_rm(&apos;form_display&apos;,&apos;_form_profile&apos;);  return $err_page if $err_page;</p><p>The inputs are as follows:</p>
<dl class='dl-vertical'>
  <dt>
    Return run mode
  </dt>
  <dd>
    <p>This run mode will be used to generate an error page, with the form re-filled (using HTML::FillInForm) and error messages in the form. This page will be returned as a second output parameter. The errors will be passed in as a hash reference, which can then be handed to a templating system for display. Following the above example, the <em>form_display()</em> routine might look like:  sub form_display {     my $self = shift;     my $errs = shift;                             # &lt;-- prepared for form reloading     my $t = $self-&gt;load_tmpl(&apos;form_display.html&apos;);     $t-&gt;param($errs) if $errs;                    # &lt;-- Also necessary.     # ...</p><p> } The fields should be prepared using Data::FormValidator's built-in support for returning error messages as a hash reference. See the documentation for \*(C`msgs\*(C' in the Data::FormValidator::Results documentation. Returning the errors with a prefix, such as \*(L"err_\*(R" is recommended. Using \*(C`any_errors\*(C' is also recommended to make it easy to display a general \*(L"we have some errors\*(R" message. HTML::Template users may want to pass \*(C`die_on_bad_params=&gt;0\*(C' to the HTML::Template constructor to prevent the presence of the \*(L"err_\*(R" tokens from triggering an error when the errors are <em>not</em> being displayed.</p>
  </dd>
  <dt>
    Data::FormValidator profile
  </dt>
  <dd>
    <p>This can either be provided as a hash reference, or as the name of a CGI::Application method that will return such a hash reference.</p>
  </dd>
  <dt>
    HTML::FillInForm options (optional)
  </dt>
  <dd>
    <p>If desired, you can pass additional options to the HTML::FillInForm <em>fill()</em> method through a hash reference. See an example above.</p>
  </dd>

</dl>
<p><em>Additional Options</em></p><p>To control things even more, you can set parameters in your CGI::Application object itself.</p>
<dl class='dl-vertical'>
  <dt>
    dfv_defaults
  </dt>
  <dd>
    <p>The value of the 'dfv_defaults' param is optionally used to pass defaults to the Data::FormValidator <em>new()</em> constructor.   $self-&gt;param(dfv_defaults =&gt; { filters =&gt; [&apos;trim&apos;] }) By setting this to a hash reference of defaults in your \*(C`cgiapp_init\*(C' routine in your own super-class, you could make it easy to share some default settings for Data::FormValidator across several forms. Of course, you could also set parameter through an instance script via the \s-1PARAMS\s0 key. Here's an example that I've used:  sub cgiapp_init {      my $self = shift;</p><p>     # Set some defaults for DFV unless they already exist.      $self-&gt;param(&apos;dfv_defaults&apos;) ||          $self-&gt;param(&apos;dfv_defaults&apos;, {                  missing_optional_valid =&gt; 1,                  filters =&gt; &apos;trim&apos;,                  msgs =&gt; {                      any_errors =&gt; &apos;err_\|_&apos;,                      prefix     =&gt; &apos;err_&apos;,                      invalid    =&gt; &apos;Invalid&apos;,                      missing    =&gt; &apos;Missing&apos;,                      format =&gt; &apos;&lt;span class="dfv-errors"&gt;%s&lt;/span&gt;&apos;,                  },              });  } Now all my applications that inherit from a super class with this \*(C`cgiapp_init()\*(C' routine and have these defaults, so I don't have to add them to every profile.</p>
  </dd>
  <dt>
    dfv_fif_class
  </dt>
  <dd>
    <p>By default this plugin uses HTML::FillInForm to fill in the forms on the error pages with the given values. This option let's you change that so it uses an HTML::FillInForm compatible class (like a subclass) to do the same work.     $self-&gt;param(dfv_fif_class =&gt; &apos;HTML::FillInForm::SuperDuper&apos;);</p>
  </dd>
  <dt>
    dfv_fif_defaults
  </dt>
  <dd>
    <p>The value of the 'dfv_fif_defaults' param is optionally used to pass defaults to the HTML::FillInForm \*(C`fill()\*(C' method.     $self-&gt;param(dfv_fif_defaults =&gt; {ignore_fields =&gt; [&apos;rm&apos;]}) By setting this to a hash reference of defaults in your \*(C`cgiapp_init\*(C' routine in your own super-class, you could make it easy to share some default settings for HTML::FillInForm across several forms. Of course, you could also set parameter through an instance script via the \s-1PARAMS\s0 key.</p>
  </dd>

</dl>

<h3>CGI::Application::Plugin::Forward support</h3>
<p>Experimental support has been added for CGI::Application::Plugin::Forward, which keeps the current run mode up to date. This would be useful if you were automatically generating a template name based on the run mode name, and you wanted this to work with the form run mode used with ::ValidateRM.</p><p>If we detect that ::Forward is loaded, we will set the current run mode name to be accurate while the error page is being generated, and then set it back to the previous value afterwards. There is a caveat: This currently only works when the run name name is the same as the subroutine name for the form page. If they differ, the current run mode name inside of the form page will be inaccurate. If this is a problem for you, get in touch to discuss a solution.</p>
<h3>\fIcheck_rm_error_page()\fP</h3>
<p>After <em>check_rm()</em> is called this accessor method can be used to retrieve the error page described in the <em>check_rm()</em> docs above. The method has an alias named \*(C`dfv_error_page()\*(C' if you find that more intuitive.</p>
<h3>\fIdfv_results()\fP</h3>
<p> $self-&gt;dfv_results;</p><p>After \*(C`check_rm()\*(C' or \*(C`validate_rm()\*(C' has been called, the \s-1DFV\s0 results object can also be accessed through this method. I expect this to be most useful to other plugin authors.</p>
<h3>\fIvalidate_rm()\fP</h3>
<p>Works like \*(C`check_rm\*(C' above, but returns the old style $valid hash reference instead of the results object. It's no longer recommended, but still supported.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>In a CGI::Application module:</p><p> # This is the run mode that will be validated. Notice that it accepts  # some errors to be passed in, and on to the template system.  sub form_display {         my $self = shift;         my $errs = shift;</p><p>        my $t = $self-&gt;load_tmpl(&apos;page.html&apos;);</p><p>        $t-&gt;param($errs) if $errs;         return $t-&gt;output;  }</p><p> sub form_process {         my $self = shift;</p><p>        use CGI::Application::Plugin::ValidateRM (qw/check_rm/);         my ($results, $err_page) = $self-&gt;check_rm(&apos;form_display&apos;,&apos;_form_profile&apos;);         return $err_page if $err_page;</p><p>        #..  do something with DFV $results object now</p><p>        my $t = $self-&gt;load_tmpl(&apos;success.html&apos;);         return $t-&gt;output;</p><p> }</p><p> sub _form_profile {         return {                 required =&gt; &apos;email&apos;,                 msgs =&gt; {                         any_errors =&gt; &apos;some_errors&apos;,                         prefix =&gt; &apos;err_&apos;,                 },         };  }</p><p>In page.html:</p><p> &lt;!-- tmpl_if some_errors --&gt;         &lt;h3&gt;Some fields below are missing or invalid&lt;/h3&gt;  &lt;!-- /tmpl_if --&gt;  &lt;form&gt;         &lt;input type="text" name="email"&gt; &lt;!-- tmpl_var err_email --&gt;  &lt;/form&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO CGI::Application::Plugin::ValidateRM&hellip;</h2>
        <div class="sectioncontent">
<p>CGI::Application, Data::FormValidator, HTML::FillInForm, <em>perl</em>\|(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Mark Stosberg &lt;mark@summersault.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MAILING LIST</h2>
        <div class="sectioncontent">
<p>If you have any questions, comments, bug reports or feature suggestions, post them to the support mailing list! This the Data::FormValidator list. To join the mailing list, visit http://lists.sourceforge.net/lists/listinfo/cascade-dataform &lt;http://lists.sourceforge.net/lists/listinfo/cascade-dataform&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2003-2005 Mark Stosberg &lt;mark@summersault.com&gt;</p><p>This module is free software; you can redistribute it and/or modify it under the terms of either:</p><p>a) the \s-1GNU\s0 General Public License as published by the Free Software Foundation; either version 1, or (at your option) any later version,</p><p>or</p><p>b) the \*(L"Artistic License\*(R"</p><p>This program is distributed in the hope that it will be useful, but \s-1WITHOUT\s0 \s-1ANY\s0 \s-1WARRANTY\s0; without even the implied warranty of \s-1MERCHANTABILITY\s0 or \s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0 \s-1PURPOSE\s0.  See either the \s-1GNU\s0 General Public License or the Artistic License for more details.</p><p>For a copy of the \s-1GNU\s0 General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, \s-1MA\s0 02111-1307 \s-1USA\s0</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="CGI::Application::Plugin::TT::LastModified.3pm.html"><span aria-hidden="true">&larr;</span> CGI::Application::Plugin::TT::LastModified.3pm: Set "last-modified" header based on tt template</a></li>
   <li class="next"><a href="CGI::Application::Plugin::ViewCode.3pm.html">CGI::Application::Plugin::ViewCode.3pm: View the source of the running application <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
