<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gd_include: Gd_include  add a format specification fragment to a dirfile</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Gd_include  add a format specification fragment to a dirfile">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gd_include (3) manual">
  <meta name="twitter:description" content="Gd_include  add a format specification fragment to a dirfile">
  <meta name="twitter:image" content="https://www.carta.tech/images/libgetdata-dev-gd_include-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/gd_include.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gd_include (3) manual" />
  <meta property="og:description" content="Gd_include  add a format specification fragment to a dirfile" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libgetdata-dev-gd_include-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gd_include<small> (3)</small></h1>
        <p class="lead">Gd_include  add a format specification fragment to a dirfile</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/gd_include.3.html">
      <span itemprop="name">gd_include: Gd_include  add a format specification fragment to a dirfile</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libgetdata-dev/">
      <span itemprop="name">libgetdata-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/gd_include.3.html">
      <span itemprop="name">gd_include: Gd_include  add a format specification fragment to a dirfile</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;getdata.h&gt;</strong> <strong>int gd_include(DIRFILE *</strong><em>dirfile</em><strong>, const char *</strong><em>include_file</em><strong>,</strong> <strong>int </strong><em>parent_fragment</em><strong>, unsigned long </strong><em>flags</em><strong>);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>gd_include</strong>() adds the format specification fragment given by the path <em>include_file</em> to the specified dirfile, possibly creating the fragment.  This occurs as if, in the existing fragment indexed by <em>parent_fragment</em>, the following directive were present:</p><ul>
<li><p><strong>/INCLUDE </strong><em>&lt;include_file&gt;</em></p></li>
</ul><p>(see <a href="../man5/dirfile-format.5.html"><strong>dirfile-format</strong>(5)</a>). If a parser callback function had been specified when the dirfile was opened using <a href="../man3/gd_cbopen.3.html"><strong>gd_cbopen</strong>(3)</a>, or added later with <a href="../man3/gd_parser_callback.3.html"><strong>gd_parser_callback</strong>(3)</a>, this callback function will be called if a syntax error is encountered while parsing the included fragment.</p><p>The <em>flags</em> argument should be a bitwise-or'd collection of the following flags, or zero if no flags are desired:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>GD_BIG_ENDIAN</strong></p>
  </dt>
  <dd>
    <p>Specifies that raw data on disk is stored as big-endian data (most significant byte first).  Specifying this flag along with the contradictory <strong>GD_LITTLE_ENDIAN</strong> will cause the library to assume that the endianness of the data is opposite to that of the native architecture.</p><p>This flag is ignored completely if an <strong>ENDIAN</strong> directive occurs in the fragment, unless <strong>GD_FORCE_ENDIAN</strong> is also specified.</p>
  </dd>
  <dt>
    <p><strong>GD_CREAT</strong></p>
  </dt>
  <dd>
    <p>An empty fragment will be created, if one does not already exist.  The fragment will have mode <strong>S_IRUSR</strong> | <strong>S_IWUSR</strong> | <strong>S_IRGRP</strong> | <strong>S_IWGRP</strong> | <strong>S_IROTH</strong> | <strong>S_IWOTH</strong> (0666), modified by the caller's umask value (see <a href="../man2/umask.2.html"><strong>umask</strong>(2)</a>).</p>
  </dd>
  <dt>
    <p><strong>GD_EXCL</strong></p>
  </dt>
  <dd>
    <p>Ensure that this call creates a new fragment: when specified along with <strong>GD_CREAT</strong>, the call will fail if the file specified by <em>include_file</em> already exists.  Behaviour of this flag is undefined if <strong>GD_CREAT</strong> is not specified.  This flag suffers from all the limitations of the <strong>O_EXCL</strong> flag as indicated in <a href="../man2/open.2.html"><strong>open</strong>(2)</a>.</p>
  </dd>
  <dt>
    <p><strong>GD_FORCE_ENCODING</strong></p>
  </dt>
  <dd>
    <p>Specifies that <strong>ENCODING</strong> directives (see <a href="../man5/dirfile-format.5.html"><strong>dirfile-format</strong>(5)</a>) found in the fragment should be ignored.  The encoding scheme specified in <em>flags</em> will be used instead (see below).</p>
  </dd>
  <dt>
    <p><strong>GD_FORCE_ENDIAN</strong></p>
  </dt>
  <dd>
    <p>Specifies that <strong>ENDIAN</strong> directives (see <a href="../man5/dirfile-format.5.html"><strong>dirfile-format</strong>(5)</a>) found in the fragment should be ignored.  When specified with one of <strong>GD_BIG_ENDIAN</strong> or <strong>GD_LITTLE_ENDIAN</strong>, the indicated endianness will be assumed.  If this flag is specified with neither of those flags, the fragment will be assumed to have the endianness of the native architecture.</p>
  </dd>
  <dt>
    <p><strong>GD_IGNORE_DUPS</strong></p>
  </dt>
  <dd>
    <p>If the fragment specifies more than one field with the same name, or a field with the same name as an existing field, all but one of them will be ignored by the parser.  Without this flag, parsing would fail with the <strong>GD_E_FORMAT</strong> error, possibly resulting in invocation of the registered callback function. Which of the duplicate fields is kept is not specified, nor whether an existing field takes precedence over a new one or not.  As a result, this flag is typically only useful in the case where identical copies of a field specification line are present.</p><p>No indication is provided to indicate whether a duplicate field has been discarded.  If finer grained control is required, the caller should handle <strong>GD_E_FORMAT_DUPLICATE</strong> suberrors itself with an appropriate callback function.</p>
  </dd>
  <dt>
    <p><strong>GD_IGNORE_REFS</strong></p>
  </dt>
  <dd>
    <p>If the dirfile currently has a reference field (either because one was specified explicitly, or else because the first <strong>RAW</strong> field was used), <strong>/REFERENCE</strong> directives in the included fragment will be ignored.  Otherwise, a <strong>/REFERENCE</strong> directive in the included fragment will replace the current reference field in the dirfile.</p>
  </dd>
  <dt>
    <p><strong>GD_LITTLE_ENDIAN</strong></p>
  </dt>
  <dd>
    <p>Specifies that raw data on disk is stored as little-endian data (least significant byte first).  Specifying this flag along with the contradictory <strong>GD_BIG_ENDIAN</strong> will cause the library to assume that the endianness of the data is opposite to that of the native architecture.</p><p>This flag is ignored completely if an <strong>ENDIAN</strong> directive occurs in the fragment, unless <strong>GD_FORCE_ENDIAN</strong> is also specified.</p>
  </dd>
  <dt>
    <p><strong>GD_PEDANTIC</strong></p>
  </dt>
  <dd>
    <p>Specifies that unrecognised lines found during the parsing of the fragment should always cause a fatal error.  Without this flag, if a <strong>VERSION</strong> directive (see <a href="../man5/dirfile-format.5.html"><strong>dirfile-format</strong>(5)</a>) indicates that the fragment being opened conforms Standards Version newer than the version understood by the library, unrecognised lines will be silently ignored.</p>
  </dd>
  <dt>
    <p><strong>GD_TRUNC</strong></p>
  </dt>
  <dd>
    <p>If <em>include_file</em> already exists, it will be truncated before opening.  If the file does not exist, this flag is ignored.</p>
  </dd>

</dl>
<p>The <em>flags</em> argument may also be bitwise or'd with one of the following symbols indicating the default encoding scheme of the fragment.  Like the endianness flags, the choice of encoding here is ignored if the encoding is specified in the fragment itself, unless <strong>GD_FORCE_ENCODED</strong> is also specified.  If none of these symbols is present, <strong>GD_AUTO_ENCODED</strong> is assumed, unless the <strong>gd_include</strong>() call results in creation or truncation of the fragment.  In that case, <strong>GD_UNENCODED</strong> is assumed.  See <a href="../man5/dirfile-encoding.5.html"><strong>dirfile-encoding</strong>(5)</a> for details on dirfile encoding schemes.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>GD_AUTO_ENCODED</strong></p>
  </dt>
  <dd>
    <p>Specifies that the encoding type is not known in advance, but should be detected by the GetData library.  Detection is accomplished by searching for raw data files with extensions appropriate to the encoding scheme.  This method will notably fail if the the library is called via <strong>putdata</strong>(3) to create a previously non-existent raw field unless a read is first successfully performed on the dirfile.  Once the library has determined the encoding scheme for the first time, it remembers it for subsequent calls.</p>
  </dd>
  <dt>
    <p><strong>GD_BZIP2_ENDODED</strong></p>
  </dt>
  <dd>
    <p>Specifies that raw data files are compressed using the Burrows-Wheeler block sorting text compression algorithm and Huffman coding, as implemented in the bzip2 format.</p>
  </dd>
  <dt>
    <p><strong>GD_GZIP_ENDODED</strong></p>
  </dt>
  <dd>
    <p>Specifies that raw data files are compressed using Lempel-Ziv coding (LZ77) as implemented in the gzip format.</p>
  </dd>
  <dt>
    <p><strong>GD_LZMA_ENDODED</strong></p>
  </dt>
  <dd>
    <p>Specifies that raw data files are compressed using the Lempel-Ziv Markov Chain Algorithm (LZMA) as implemented in the xz container format.</p>
  </dd>
  <dt>
    <p><strong>GD_SLIM_ENCODED</strong></p>
  </dt>
  <dd>
    <p>Specifies that raw data files are compressed using the slimlib library.</p>
  </dd>
  <dt>
    <p><strong>GD_TEXT_ENCODED</strong></p>
  </dt>
  <dd>
    <p>Specifies that raw data files are encoded as text files containing one data sample per line.</p>
  </dd>
  <dt>
    <p><strong>GD_UNENCODED</strong></p>
  </dt>
  <dd>
    <p>Specifies that raw data files are not encoded, but written verbatim to disk.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>On success, <strong>gd_include</strong>() returns the format specification index of the newly added fragment.  On error, -1 is returned and the dirfile error is set to a non-zero error value.  Possible error values are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>GD_E_ACCMODE</strong></p>
  </dt>
  <dd>
    <p>The supplied dirfile was opened in read-only mode.</p>
  </dd>
  <dt>
    <p><strong>GD_E_ALLOC</strong></p>
  </dt>
  <dd>
    <p>The library was unable to allocate memory.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_DIRFILE</strong></p>
  </dt>
  <dd>
    <p>The supplied dirfile was invalid.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_INDEX</strong></p>
  </dt>
  <dd>
    <p>The supplied parent fragment index was out of range.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_REFERENCE</strong></p>
  </dt>
  <dd>
    <p>The reference field specified by a <strong>/REFERENCE</strong> directive in the fragment (see <a href="../man5/dirfile-format.5.html"><strong>dirfile-format</strong>(5)</a>) was not found, or was not a <strong>RAW</strong> field.</p>
  </dd>
  <dt>
    <p><strong>GD_E_CALLBACK</strong></p>
  </dt>
  <dd>
    <p>The registered callback function returned an unrecognised response.</p>
  </dd>
  <dt>
    <p><strong>GD_E_FORMAT</strong></p>
  </dt>
  <dd>
    <p>A syntax error occurred in the fragment.</p>
  </dd>
  <dt>
    <p><strong>GD_E_INTERNAL_ERROR</strong></p>
  </dt>
  <dd>
    <p>An internal error occurred in the library while trying to perform the task. This indicates a bug in the library.  Please report the incident to the maintainer.</p>
  </dd>
  <dt>
    <p><strong>GD_E_LINE_TOO_LONG</strong></p>
  </dt>
  <dd>
    <p>The parser encountered a line in the format specification longer than it was able to deal with.  Lines are limited by the storage size of <strong>ssize_t</strong>. On 32-bit systems, this limits format specification lines to 2**31 characters. The limit is larger on 64-bit systems.</p>
  </dd>
  <dt>
    <p><strong>GD_E_OPEN_FRAGMENT</strong></p>
  </dt>
  <dd>
    <p>The fragment could not be opened or created.</p>
  </dd>
  <dt>
    <p><strong>GD_E_PROTECTED</strong></p>
  </dt>
  <dd>
    <p>The metadata of the parent fragment was protected from change.</p>
  </dd>
  <dt>
    <p><strong>GD_E_REFERENCE</strong></p>
  </dt>
  <dd>
    <p>The included fragment contained a <strong>/REFERENCE</strong> directive which referred to a non-existent field, or a field that was not of type <strong>RAW</strong>. In this case, the included fragment will still be added to the dirfile, but the <strong>/REFERENCE</strong> directive will be ignored.  See also the <strong>BUGS</strong> section below.</p>
  </dd>

</dl>
<p>The dirfile error may be retrieved by calling <a href="../man3/gd_error.3.html"><strong>gd_error</strong>(3)</a>. A descriptive error string for the last error encountered can be obtained from a call to <a href="../man3/gd_error_string.3.html"><strong>gd_error_string</strong>(3)</a>. When finished with it, the DIRFILE object may be de-allocated with a call to <a href="../man3/gd_close.3.html"><strong>gd_close</strong>(3)</a>, even if the open failed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>If this function fails with the error <strong>GD_E_REFERENCE</strong>, it typically results in no reference field being defined for the dirfile, even if the dirfile contains <strong>RAW</strong> fields.  As a result, functions which rely on the reference field, such as <a href="../man3/gd_nframes.3.html"><strong>gd_nframes</strong>(3)</a>, will operate incorrectly.  Callers should explicitly set the reference field with <a href="../man3/gd_reference.3.html"><strong>gd_reference</strong>(3)</a> in this case.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gd_include&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/gd_open.3.html"><strong>gd_open</strong>(3)</a>, <a href="../man3/gd_parser_callback.3.html"><strong>gd_parser_callback</strong>(3)</a>, <a href="../man3/gd_reference.3.html"><strong>gd_reference</strong>(3)</a>, <a href="../man3/gd_uninclude.3.html"><strong>gd_uninclude</strong>(3)</a>, <a href="../man3/gd_error.3.html"><strong>gd_error</strong>(3)</a>, <a href="../man3/gd_error_string.3.html"><strong>gd_error_string</strong>(3)</a>, <a href="../man3/gd_fragmentname.3.html"><strong>gd_fragmentname</strong>(3)</a>, <a href="../man3/gd_nfragments.3.html"><strong>gd_nfragments</strong>(3)</a>, <a href="../man5/dirfile.5.html"><strong>dirfile</strong>(5)</a>, <a href="../man5/dirfile-encoding.5.html"><strong>dirfile-encoding</strong>(5)</a>, <a href="../man5/dirfile-format.5.html"><strong>dirfile-format</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gd_getdata64.3.html"><span aria-hidden="true">&larr;</span> gd_getdata64.3: Gd_getdata64  retrieve data from a dirfile database with largefile support</a></li>
   <li class="next"><a href="gd_invalid_dirfile.3.html">gd_invalid_dirfile.3: Gd_invalid_dirfile  obtain an pointer to an invalid dirfile object <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
