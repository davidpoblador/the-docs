<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IO::Socket::Multicast6: Send and receive ipv4 and ipv6 multicast messages</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Send and receive ipv4 and ipv6 multicast messages">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="IO::Socket::Multicast6 (3pm) manual">
  <meta name="twitter:description" content="Send and receive ipv4 and ipv6 multicast messages">
  <meta name="twitter:image" content="https://www.carta.tech/images/libio-socket-multicast6-perl-IO::Socket::Multicast6-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/IO::Socket::Multicast6.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="IO::Socket::Multicast6 (3pm) manual" />
  <meta property="og:description" content="Send and receive ipv4 and ipv6 multicast messages" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libio-socket-multicast6-perl-IO::Socket::Multicast6-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">IO::Socket::Multicast6<small> (3pm)</small></h1>
        <p class="lead">Send and receive ipv4 and ipv6 multicast messages</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/IO::Socket::Multicast6.3pm.html">
      <span itemprop="name">IO::Socket::Multicast6: Send and receive ipv4 and ipv6 multicast messages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libio-socket-multicast6-perl/">
      <span itemprop="name">libio-socket-multicast6-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/IO::Socket::Multicast6.3pm.html">
      <span itemprop="name">IO::Socket::Multicast6: Send and receive ipv4 and ipv6 multicast messages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use IO::Socket::Multicast6;

  # create a new IPv6 UDP socket ready to read datagrams on port 1100
  my $s = IO::Socket::Multicast6-&gt;new(
                                Domain=&gt;AF_INET6,
                                LocalPort=&gt;1100);

  # Add an IPv6 multicast group
  $s-&gt;mcast_add(&apos;FF15::0561&apos;);

  # now receive some multicast data
  $s-&gt;recv($data,1024);

  # Drop a multicast group
  $s-&gt;mcast_drop(&apos;FF15::0561&apos;);


  # create a new IPv4 UDP socket ready to send datagrams to port 1100
  my $s = IO::Socket::Multicast6-&gt;new(
                                Domain=&gt;AF_INET,
                                PeerDest=&gt;&apos;225.0.0.1&apos;,
                                PeerPort=&gt;1100);

  # Set outgoing interface to eth0
  $s-&gt;mcast_if(&apos;eth0&apos;);

  # Set time to live on outgoing multicast packets
  $s-&gt;mcast_ttl(10);

  # Turn off loopbacking
  $s-&gt;<strong>mcast_loopback</strong>(0);

  # Multicast a message to group
  $s-&gt;send( &apos;hello world!&apos; );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The IO::Socket::Multicast6 module subclasses IO::Socket::INET6 to enable you to manipulate multicast groups.  With this module you will be able to receive incoming multicast transmissions and generate your own outgoing multicast packets.</p><p>This module uses the same \s-1API\s0 as IO::Socket::Multicast, but with added support for IPv6 (IPv4 is still supported). Unlike IO::Socket::Multicast, this is a pure-perl module.</p><h3>\s-1DEPENDENCIES\s0</h3>
<p>This module depends on a number of other modules:</p><p>  Socket6 version 0.19 or higher.   IO::Socket::INET6 version 2.51 or higher.   IO::Interface version 1.01 or higher.   Socket::Multicast6 0.01 or higher.</p><p>Your operating system must have IPv6 and Multicast support.</p>
<h3>\s-1INTRODUCTION\s0</h3>
<p>Multicasting is designed for streaming multimedia applications and for conferencing systems in which one transmitting machines needs to distribute data to a large number of clients.</p><p>IPv4 addresses in the range 224.0.0.0 and 239.255.255.255 are reserved for multicasting.  IPv6 multicast addresses start with the prefix \s-1FF\s0. These addresses do not correspond to individual machines, but to multicast groups.  Messages sent to these addresses will be delivered to a potentially large number of machines that have registered their interest in receiving transmissions on these groups. They work like \s-1TV\s0 channels.  A program tunes in to a multicast group to receive transmissions to it, and tunes out when it no longer wishes to receive the transmissions.</p><p>To receive transmissions <strong>from</strong> a multicast group, you will use IO::Socket::INET-&gt;<em>new()</em> to create a \s-1UDP\s0 socket and bind it to a local network port.  You will then subscribe one or more multicast groups using the <em>mcast_add()</em> method.  Subsequent calls to the standard <em>recv()</em> method will now receive messages incoming messages transmitted to the subscribed groups using the selected port number.</p><p>To send transmissions <strong>to</strong> a multicast group, you can use the standard <em>send()</em> method to send messages to the multicast group and port of your choice.</p><p>To set the number of hops (routers) that outgoing multicast messages will cross, call <em>mcast_ttl()</em>.  To activate or deactivate the looping back of multicast messages (in which a copy of the transmitted messages is received by the local machine), call <em>mcast_loopback()</em>.</p>
<h3>\s-1CONSTRUCTORS\s0</h3>
<p>The <em>new()</em> method is the constructor for the IO::Socket::Multicast6 class.  It takes the same arguments as IO::Socket::INET, except that the <strong>Proto</strong> argument, rather than defaulting to \*(L"tcp\*(R", will default to \*(L"udp\*(R", which is more appropriate for multicasting. To create a \s-1UDP\s0 socket suitable for sending outgoing multicast messages, call <em>new()</em> without no arguments (or with \*(C`Proto=&gt;&apos;udp&apos;\*(C').  To create a \s-1UDP\s0 socket that can also receive incoming multicast transmissions on a specific port, call <em>new()</em> with the <strong>LocalPort</strong> argument. If you plan to run the client and server on the same machine, you may wish to set the IO::Socket <strong>ReuseAddr</strong> argument to a true value. This allows multiple multicast sockets to bind to the same address.</p>
<h3>\s-1METHODS\s0</h3>
<p>The <em>mcast_add()</em> method will add the provided multicast address to the list of subscribed multicast groups.  The address may be provided either as a dotted-quad decimal, or as a packed \s-1IP\s0 address (such as produced by the <em>inet_aton()</em> function).  On success, the method will return a true value. The optional $interface argument can be used to specify on which network interface to listen for incoming multicast messages.  If the IO::Interface module is installed, you may use the device name for the interface (e.g. \*(L"tu0\*(R").  Otherwise, you must use the \s-1IP\s0 address of the desired network interface.  Either dotted quad form or packed \s-1IP\s0 address is acceptable.  If no interface is specified, then the multicast group is joined on \s-1INADDR_ANY\s0, meaning that multicast transmissions received on <strong>any</strong> of the host's network interfaces will be forwarded to the socket. Note that <em>mcast_add()</em> operates on the underlying interface(s) and not on the socket. If you have multiple sockets listening on a port, and you <em>mcast_add()</em> a group to one of those sockets, subsequently <strong>all</strong> the sockets will receive mcast messages on this group. To filter messages that can be received by a socket so that only those sent to a particular multicast address are received, pass the <strong>LocalAddr</strong> option to the socket at the time you create it:   my $socket = IO::Socket::Multicast6-&gt;new(LocalPort=&gt;2000,                                           LocalAddr=&gt;226.1.1.2&apos;,                                           ReuseAddr=&gt;1);   $socket-&gt;mcast_add(&apos;226.1.1.2&apos;); By combining this technique with IO::Select, you can write applications that listen to multiple multicast groups and distinguish which group a message was addressed to by identifying which socket it was received on. Same as <em>mcast_add()</em> but for Source Specific Multicast (\s-1SSM\s0). This reverses the action of <em>mcast_add()</em>, removing the indicated multicast address from the list of subscribed groups. The <em>mcast_loopback()</em> method controls whether the socket will receive its own multicast transmissions (default yes).  Called without arguments, the method returns the current state of the loopback flag. Called with a boolean argument, the method will set the loopback flag, and return its previous value. The <em>mcast_ttl()</em> method examines or sets the time to live (\s-1TTL\s0) for outgoing multicast messages.  The \s-1TTL\s0 controls the numbers of routers the packet can cross before being expired.  The default \s-1TTL\s0 is 1, meaning that the message is confined to the local area network. Values between 0 and 255 are valid. Called without arguments, this method returns the socket's current \s-1TTL\s0.  Called with a value, this method sets the \s-1TTL\s0 and returns its previous value. By default, the \s-1OS\s0 will pick the network interface to use for outgoing multicasts automatically.  You can control this process by using the <em>mcast_if()</em> method to set the outgoing network interface explicitly. Called without arguments, returns the current interface.  Called with the name of an interface, sets the outgoing interface and returns its previous value. You can use the device name for the interface (e.g. \*(L"tu0\*(R") if the IO::Interface module is present.  Otherwise, you must use the interface's dotted \s-1IP\s0 address. <strong>\s-1NOTE\s0</strong>: To set the interface used for <strong>incoming</strong> multicasts, use the <em>mcast_add()</em> method. The <em>mcast_dest()</em> method is a convenience function that allows you to set the default destination group for outgoing multicasts.  Called without arguments, returns the current destination as a packed binary sockaddr_in/sockaddr_in6 data structure.  Called with a new destination address, the method sets the default destination and returns the previous one, if any. Destination addresses may be provided as packed sockaddr_in/sockaddr_in6 structures, or address and port as strings. For IPv4 the address can be supplied in the form \*(L"\s-1XX\s0.XX.XX.XX:YY\*(R" where the first part is the IPv4 address, and the second the port number. For IPv6 the address can be supplied in the form \*(L"[\s-1FFXX:XXXX::XXXX\s0]:YY\*(R" where the first part is the IPv6 address, and the second the port number. Alternatively the port can be supplied as an additional parameter, separate to the address. <em>mcast_send()</em> is a convenience function that simplifies the sending of multicast messages.  $data is the message contents, and $dest is an optional destination group.  You can use either the dotted \s-1IP\s0 form of the destination address and its port number, or a packed sockaddr_in/sockaddr_in6 structure.  If the destination is not supplied, it will default to the most recent value set in <em>mcast_dest()</em> or a previous call to <em>mcast_send()</em>. The method returns the number of bytes successfully queued for delivery. As a side-effect, the method will call <em>mcast_dest()</em> to remember the destination address. Example:   $socket-&gt;mcast_send(&apos;Hi there group members!&apos;,&apos;225.0.1.1:1900&apos;) || die;   $socket-&gt;mcast_send("How&apos;s the weather?") || die; Note that you may still call IO::Socket::INET6-&gt;<em>new()</em> with a <strong>PeerAddr</strong>, and IO::Socket::INET6 will perform a <em>connect()</em>, creating a default destination for calls to <em>send()</em>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The following is an example of a multicast server.  Every 10 seconds it transmits the current time and the list of logged-in users to the local network using multicast group \s-1FF15::0561\s0, port 2000 (these are chosen arbitrarily, the \s-1FF15::\s0 is a Transient, Site Local prefix).</p><p> #!/usr/bin/perl  # server (transmitter)  use strict;  use IO::Socket::Multicast6;</p><p> use constant GROUP =&gt; &apos;FF15::0561&apos;;  use constant PORT  =&gt; &apos;2000&apos;;</p><p> my $sock = IO::Socket::Multicast6-&gt;new(                     Proto=&gt;&apos;udp&apos;,                     Domain=&gt;AF_INET6,                     PeerAddr=&gt;GROUP,                     PeerPort=&gt;PORT);</p><p> while (1) {     my $message = localtime();     $sock-&gt;send($message) || die "Couldn&apos;t send: $!";  } continue {     sleep 4;  }</p><p>This is the corresponding client.  It listens for transmissions on group \s-1FF15::0561\s0, port 2000, and echoes the messages to standard output.</p><p> #!/usr/bin/perl  # client (receiver)</p><p> use strict;  use IO::Socket::Multicast6;</p><p> use constant GROUP =&gt; &apos;FF15::0561&apos;;  use constant PORT  =&gt; &apos;2000&apos;;</p><p> my $sock = IO::Socket::Multicast6-&gt;new(                     Proto=&gt;&apos;udp&apos;,                     Domain=&gt;AF_INET6,                     LocalAddr=&gt;GROUP,                     LocalPort=&gt;PORT);</p><p> $sock-&gt;mcast_add(GROUP) || die "Couldn&apos;t set group: $!&#92;n";</p><p> while (1) {     my $data;     next unless $sock-&gt;recv($data,1024);     print "$data&#92;n";  }</p><h3>\s-1BUGS\s0</h3>
<p>The <em>mcast_if()</em>, <em>mcast_ttl()</em> and <em>mcast_loopback()</em> methods will cause a crash on versions of Linux earlier than 2.2.0 because of a kernel bug in the implementation of the multicast socket options.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO IO::Socket::Multicast6&hellip;</h2>
        <div class="sectioncontent">
<p>&lt;http://www.ietf.org/rfc/rfc2553.txt&gt;</p><p><em>perl</em>\|(1), <em>IO::Socket</em>\|(3), <em>Socket::Multicast6</em>\|(3), <em>IO::Socket::INET6</em>\|(3).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Based on IO::Socket::Multicast by Lincoln Stein, lstein@cshl.org.</p><p>IO::Socket::Multicast6 by Nicholas J Humfrey, &lt;njh@cpan.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2006-2009 Nicholas J Humfrey Copyright (C) 2000-2005 Lincoln Stein</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.6.1 or, at your option, any later version of Perl 5 you may have available.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="IO::ScalarArray.3pm.html"><span aria-hidden="true">&larr;</span> IO::ScalarArray.3pm: Io:: interface for reading/writing an array of scalars</a></li>
   <li class="next"><a href="IO::Stringy.3pm.html">IO::Stringy.3pm: I/o on in-core objects like strings and arrays <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
