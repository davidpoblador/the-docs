<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XpGetDocumentData: Creates and initializes a new print context.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Creates and initializes a new print context.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="XpGetDocumentData (3Xp) manual">
  <meta name="twitter:description" content="Creates and initializes a new print context.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxp-dev-XpGetDocumentData-3Xp.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3Xp/XpGetDocumentData.3Xp.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="XpGetDocumentData (3Xp) manual" />
  <meta property="og:description" content="Creates and initializes a new print context." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxp-dev-XpGetDocumentData-3Xp.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">XpGetDocumentData<small> (3Xp)</small></h1>
        <p class="lead">Creates and initializes a new print context.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3Xp/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3Xp/XpGetDocumentData.3Xp.html">
      <span itemprop="name">XpGetDocumentData: Creates and initializes a new print context.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxp-dev/">
      <span itemprop="name">libxp-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3Xp/XpGetDocumentData.3Xp.html">
      <span itemprop="name">XpGetDocumentData: Creates and initializes a new print context.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
      cc [ flag... ] file... -lXp [ library... ]
</pre>

<pre>
      #include &lt;X11/extensions/Print.h&gt;
</pre>
<p><strong>Status XpGetDocumentData</strong> ( <em>data_display,</em> <em>context,</em> <em>save_proc,</em> <em>finish_proc,</em> <em>client_data</em> )</p>
<pre>
      Display *<em>data_display</em>\^;
</pre>

<pre>
      XPContext <em>context</em>\^;
</pre>

<pre>
      XPSaveProc <em>save_proc</em>\^;
</pre>

<pre>
      XPFinishProc <em>finish_proc</em>\^;
</pre>

<pre>
      XPointer <em>client_data</em>\^;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>data_display</em></p>
  </dt>
  <dd>
    <p>Specifies a pointer to the Display structure; returned from XOpenDisplay.</p>
  </dd>
  <dt>
    <p><em>context</em></p>
  </dt>
  <dd>
    <p>The print context from which document data is to be retrieved.</p>
  </dd>
  <dt>
    <p><em>save_proc</em></p>
  </dt>
  <dd>
    <p>A procedure to be registered and called repeatedly to save blocks of document data.</p>
  </dd>
  <dt>
    <p><em>finish_proc</em></p>
  </dt>
  <dd>
    <p>A procedure to be registered and called once when the print job has completed and all document data has been sent to save_proc.</p>
  </dd>
  <dt>
    <p><em>client_data</em></p>
  </dt>
  <dd>
    <p>Specifies client data to be passed to save_proc and finish_proc when called.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>XpGetDocumentData registers callbacks that allow a "consumer" to continuously retrieve document data generated in the <em>X Print Server</em> by a separate "producer", where both are referencing the same print context by way of <em>different</em> display connections. Though XpGetDocumentData retrieves document data, its effect is bounded by XpStartJob and XpEndJob. XpGetDocumentData always returns immediately; if an error occurs and the callbacks cannot be registered, the return status is 0, else the return status is non-zero and the callbacks will be called sometime after the return from XpGetDocumentData. This producer/consumer exchange is set up when XpStartJob is called by the producer with output_mode equal XPGetData, and is subsequently initiated when XpGetDocumentData is called by the consumer. Though XpStartJob will return immediately, further attempts to use the producer's display connection may be blocked by the <em>X Print Server</em> until XpGetDocumentData is called on the consumer's display connection.</p><p>Following a successful call to <em>XpGetDocumentData,</em> the consumer must enter a loop to process events from the server, for example, by calling XNextEvent. The event processing code will invoke save_proc and finish_proc as needed to consume incoming data. To avoid blocking indefinitely in XNextEvent, the consumer should select for XPPrintNotify events, and watch for XPEndJobNotify. This event will be sent following the call to finish_proc and the consumer can safely exit the loop at this point. Aside from this processing of XPrintNotify events, data_display must not be used for any additional X requests until finish_proc is called and returns.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STRUCTURES</h2>
        <div class="sectioncontent">
<p>The save_proc is defined in &lt;X11/extensions/Print.h&gt; as:</p>
<pre>
typedef void (*XPSaveProc)( Display *data_display,
                           XPContext context,
                           unsigned char *data,
                           unsigned int data_len,
                           XPointer client_data);
</pre>
<p>The save_proc is repeatedly called on each chunk of document data sent by the X Print Server until either XpEndJob or XpCancelJob is called. data_len specifies the number of bytes in data. The memory for data itself is owned by the library, so save_proc should copy data to another location before returning. After the last block of data has been delivered to save_proc, finish_proc is called with final status.</p><p>The finish_proc is defined in &lt;X11/extensions/Print.h&gt; as:</p>
<pre>
typedef void (*XPFinishProc)( Display *data_display,
                             XPContext context,
                             XPGetDocStatus status,
                             XPointer client_data);
</pre>
<p>After XpGetDocumentData successfully registers the callbacks, any generated X errors (for example, BadAlloc) or Xp errors (for example, XPBadContext or XPBadSequence) that are the result of XpGetDocumentData will cause the Xlib error handler to be invoked, and then will cause finish_proc to be called with a status of XPGetDocError. Any other activities (for example, a separate process destroying the print context) that prove fatal to the progress of XpGetDocumentData will also cause finish_proc to be called with a status of XPGetDocError.</p><p>If XpGetDocumentData is called prior to XpStartJob, then an XPBadSequence error is generated and finish_proc is called with XPGetDocError. If XpGetDocumentData is called after XpStartJob and output_mode was specified as XPSpool, then an XPBadSequence error is generated and finish_proc is called with XPGetDocError. If the producer starts generating data and the consumer cannot consume data quickly enough, then the producer's display connection will be blocked by the <em>X Print Server.</em></p><p>Until XpEndJob or XpCancelJob is called, it is possible that various XPPrintNotify events will be generated (for example, a page has been canceled). The data passed to save_proc is not necessarily organized according to the consumer's requests or any generated events, and its consistency is guaranteed only if the entire job completes successfully (i.e. without being canceled or generating an error).</p><p>When finish_proc is called, sometime after XpGetDocumentData is called and returns, status gives the completion status of the job and is defined in &lt;X11/extensions/Print.h&gt; as:</p>
<pre>
	#define XPGetDocFinished        0       /\(** normal termination */
	#define XPGetDocSecondConsumer  1       /\(** setup error */
	#define XPGetDocError           2       /\(** progress error */
</pre>
<p>XPGetDocFinished indicates that all intended document data has been delivered by way of save_proc. All cancellation events are guaranteed to have arrived by the time finished_proc is called, and they should be taken into consideration for evaluating the validity of the document data returned.</p><p>XPGetDocSecondConsumer indicates that a consumer had already been established for the print context. The <em>X Print Server</em> only supports one consumer per print context.</p><p>XPGetDocError indicates that an error has been generated (for example, XPBadContext or XPBadSequence) and that no further document data will be delivered by the <em>X Print Server</em> to save_proc.</p><p>After finish_proc returns, save_proc and finish_proc are unregistered and will no longer be called.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><small>XPBadContext</small></p>
  </dt>
  <dd>
    <p>A valid print context-id has not been set prior to making this call.</p>
  </dd>
  <dt>
    <p><small>XPBadSequence</small></p>
  </dt>
  <dd>
    <p>The function was not called in the proper order with respect to the other X Print Service Extension calls (for example, XpGetDocumentData prior to XpStartJob).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO XpGetDocumentData&hellip;</h2>
        <div class="sectioncontent">
<p><strong>XpCancelJob</strong>(3Xp), <strong>XpEndJob</strong>(3Xp), <strong>XpStartJob</strong>(3Xp)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XpGetContext.3Xp.html"><span aria-hidden="true">&larr;</span> XpGetContext.3Xp: Gets the current print context-id for a display connection.</a></li>
   <li class="next"><a href="XpGetImageResolution.3Xp.html">XpGetImageResolution.3Xp: Gets the current image resolution for a print context. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
