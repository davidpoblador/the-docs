<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SD_JOURNAL_FOREACH_DATA: Read data fields from the current journal entry</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Read data fields from the current journal entry">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="SD_JOURNAL_FOREACH_DATA (3) manual">
  <meta name="twitter:description" content="Read data fields from the current journal entry">
  <meta name="twitter:image" content="https://www.carta.tech/images/libsystemd-dev-SD_JOURNAL_FOREACH_DATA-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/SD_JOURNAL_FOREACH_DATA.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="SD_JOURNAL_FOREACH_DATA (3) manual" />
  <meta property="og:description" content="Read data fields from the current journal entry" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libsystemd-dev-SD_JOURNAL_FOREACH_DATA-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">SD_JOURNAL_FOREACH_DATA<small> (3)</small></h1>
        <p class="lead">Read data fields from the current journal entry</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/SD_JOURNAL_FOREACH_DATA.3.html">
      <span itemprop="name">SD_JOURNAL_FOREACH_DATA: Read data fields from the current journal entry</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libsystemd-dev/">
      <span itemprop="name">libsystemd-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/SD_JOURNAL_FOREACH_DATA.3.html">
      <span itemprop="name">SD_JOURNAL_FOREACH_DATA: Read data fields from the current journal entry</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
#include &lt;systemd/sd-journal.h&gt;
</pre>
<p><strong>int sd_journal_get_data(sd_journal&nbsp;*</strong><em>j</em><strong>, const&nbsp;char&nbsp;*</strong><em>field</em><strong>, const&nbsp;void&nbsp;**</strong><em>data</em><strong>, size_t&nbsp;*</strong><em>length</em><strong>);</strong> <strong>int sd_journal_enumerate_data(sd_journal&nbsp;*</strong><em>j</em><strong>, const&nbsp;void&nbsp;**</strong><em>data</em><strong>, size_t&nbsp;*</strong><em>length</em><strong>);</strong> <strong>void sd_journal_restart_data(sd_journal&nbsp;*</strong><em>j</em><strong>);</strong> <strong>SD_JOURNAL_FOREACH_DATA(sd_journal&nbsp;*</strong><em>j</em><strong>, const&nbsp;void&nbsp;*</strong><em>data</em><strong>, size_t&nbsp;</strong><em>length</em><strong>);</strong> <strong>int sd_journal_set_data_threshold(sd_journal&nbsp;*</strong><em>j</em><strong>, size_t&nbsp;</strong><em>sz</em><strong>);</strong> <strong>int sd_journal_get_data_threshold(sd_journal&nbsp;*</strong><em>j</em><strong>, size_t&nbsp;*</strong><em>sz</em><strong>);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>sd_journal_get_data()</strong> gets the data object associated with a specific field from the current journal entry. It takes four arguments: the journal context object, a string with the field name to request, plus a pair of pointers to pointer/size variables where the data object and its size shall be stored in. The field name should be an entry field name. Well-known field names are listed in <a href="../man7/systemd.journal-fields.7.html"><strong>systemd.journal-fields</strong>(7)</a>. The returned data is in a read-only memory map and is only valid until the next invocation of <strong>sd_journal_get_data()</strong> or <strong>sd_journal_enumerate_data()</strong>, or the read pointer is altered. Note that the data returned will be prefixed with the field name and &apos;=&apos;. Also note that by default data fields larger than 64K might get truncated to 64K. This threshold may be changed and turned off with <strong>sd_journal_set_data_threshold()</strong> (see below).</p><p><strong>sd_journal_enumerate_data()</strong> may be used to iterate through all fields of the current entry. On each invocation the data for the next field is returned. The order of these fields is not defined. The data returned is in the same format as with <strong>sd_journal_get_data()</strong> and also follows the same life-time semantics.</p><p><strong>sd_journal_restart_data()</strong> resets the data enumeration index to the beginning of the entry. The next invocation of <strong>sd_journal_enumerate_data()</strong> will return the first field of the entry again.</p><p>Note that the <strong>SD_JOURNAL_FOREACH_DATA()</strong> macro may be used as a handy wrapper around <strong>sd_journal_restart_data()</strong> and <strong>sd_journal_enumerate_data()</strong>.</p><p>Note that these functions will not work before <a href="../man3/sd_journal_next.3.html"><strong>sd_journal_next</strong>(3)</a> (or related call) has been called at least once, in order to position the read pointer at a valid entry.</p><p><strong>sd_journal_set_data_threshold()</strong> may be used to change the data field size threshold for data returned by <strong>sd_journal_get_data()</strong>, <strong>sd_journal_enumerate_data()</strong> and <strong>sd_journal_enumerate_unique()</strong>. This threshold is a hint only: it indicates that the client program is interested only in the initial parts of the data fields, up to the threshold in size -- but the library might still return larger data objects. That means applications should not rely exclusively on this setting to limit the size of the data fields returned, but need to apply a explicit size limit on the returned data as well. This threshold defaults to 64K by default. To retrieve the complete data fields this threshold should be turned off by setting it to 0, so that the library always returns the complete data objects. It is recommended to set this threshold as low as possible since this relieves the library from having to decompress large compressed data objects in full.</p><p><strong>sd_journal_get_data_threshold()</strong> returns the currently configured data field size threshold.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p><strong>sd_journal_get_data()</strong> returns 0 on success or a negative errno-style error code. If the current entry does not include the specified field, -ENOENT is returned. If <a href="../man3/sd_journal_next.3.html"><strong>sd_journal_next</strong>(3)</a> has not been called at least once, -EADDRNOTAVAIL is returned. <strong>sd_journal_enumerate_data()</strong> returns a positive integer if the next field has been read, 0 when no more fields are known, or a negative errno-style error code. <strong>sd_journal_restart_data()</strong> returns nothing. <strong>sd_journal_set_data_threshold()</strong> and <strong>sd_journal_get_threshold()</strong> return 0 on success or a negative errno-style error code.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The <strong>sd_journal_get_data()</strong>, <strong>sd_journal_enumerate_data()</strong>, <strong>sd_journal_restart_data()</strong>, <strong>sd_journal_set_data_threshold()</strong> and <strong>sd_journal_get_data_threshold()</strong> interfaces are available as a shared library, which can be compiled and linked to with the <strong>libsystemd</strong>&nbsp;<a href="../man1/pkg-config.1.html"><strong>pkg-config</strong>(1)</a> file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>See <a href="../man3/sd_journal_next.3.html"><strong>sd_journal_next</strong>(3)</a> for a complete example how to use <strong>sd_journal_get_data()</strong>.</p><p>Use the <strong>SD_JOURNAL_FOREACH_DATA</strong> macro to iterate through all fields of the current journal entry:</p>
<pre>
...
int print_fields(sd_journal *j) {
        const void *data;
        size_t length;
        SD_JOURNAL_FOREACH_DATA(j, data, length)
                printf("%.*s&#92;n", (int) length, data);
}
...
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO SD_JOURNAL_FOREACH_DATA&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/systemd.1.html"><strong>systemd</strong>(1)</a>, <a href="../man7/systemd.journal-fields.7.html"><strong>systemd.journal-fields</strong>(7)</a>, <a href="../man3/sd-journal.3.html"><strong>sd-journal</strong>(3)</a>, <a href="../man3/sd_journal_open.3.html"><strong>sd_journal_open</strong>(3)</a>, <a href="../man3/sd_journal_next.3.html"><strong>sd_journal_next</strong>(3)</a>, <a href="../man3/sd_journal_get_realtime_usec.3.html"><strong>sd_journal_get_realtime_usec</strong>(3)</a>, <a href="../man3/sd_journal_query_unique.3.html"><strong>sd_journal_query_unique</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="SD_JOURNAL_FOREACH_BACKWARDS.3.html"><span aria-hidden="true">&larr;</span> SD_JOURNAL_FOREACH_BACKWARDS.3: Advance or set back the read pointer in the journal</a></li>
   <li class="next"><a href="SD_JOURNAL_FOREACH_UNIQUE.3.html">SD_JOURNAL_FOREACH_UNIQUE.3: Read unique data fields from the journal <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
