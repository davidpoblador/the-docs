<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PostScript::TextBlock: An object that may be used to construct a block of</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="An object that may be used to construct a block of">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="PostScript::TextBlock (3pm) manual">
  <meta name="twitter:description" content="An object that may be used to construct a block of">
  <meta name="twitter:image" content="https://www.carta.tech/images/libpostscript-perl-PostScript::TextBlock-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/PostScript::TextBlock.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="PostScript::TextBlock (3pm) manual" />
  <meta property="og:description" content="An object that may be used to construct a block of" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libpostscript-perl-PostScript::TextBlock-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">PostScript::TextBlock<small> (3pm)</small></h1>
        <p class="lead">An object that may be used to construct a block of</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/PostScript::TextBlock.3pm.html">
      <span itemprop="name">PostScript::TextBlock: An object that may be used to construct a block of</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libpostscript-perl/">
      <span itemprop="name">libpostscript-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/PostScript::TextBlock.3pm.html">
      <span itemprop="name">PostScript::TextBlock: An object that may be used to construct a block of</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use PostScript::TextBlock;
    my $tb = new PostScript::TextBlock;
    $tb-&gt;addText( text =&gt; "Hullaballo in Hoosick Falls.&#92;n",
                  font =&gt; &apos;CenturySchL-Ital&apos;,
                  size =&gt; 24,
                  leading =&gt; 26
                 );
    $tb-&gt;addText( text =&gt; "by Charba Gaspee.&#92;n",
                  font =&gt; &apos;URWGothicL-Demi&apos;,
                  size =&gt; 12,
                  leading =&gt; 14
                 );
    print &apos;There are &apos;.$tb-&gt;numElements.&apos; elements in this object.&apos;;
    open OUT, &apos;&gt;psoutput.ps&apos;;
    my ($code, $remainder) = $tb-&gt;Write(572, 752, 20, 772);
    print OUT $code;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The PostScript::TextBlock module implements four methods:</p>
<dl class='dl-vertical'>
  <dt>
    <em>new()</em> - Create a New PostScript::TextBlock object
  </dt>
  <dd>
    <p>This method instantiates a new object of class PostScript::TextBlock.</p>
  </dd>
  <dt>
    addText( text=&gt;$text, [ font=&gt;$font ], [ size=&gt;$size ], [ leading=&gt;$leading ] )
  </dt>
  <dd>
    <p>The <em>addText()</em> method will add a new 'text element' to the TextBlock object. A 'text element' can be thought of as a section of text that has the same characteristics, i.e. all the characters are the same font, size and leading. this representation allows you to include text rendered in multiple fonts at multiple sizes within the same text block by including them as separate elements. This method takes up to four attributes (note that the '[]' brackets above indicate that a parameter is optional, not an array reference): text The text attribute is required, though nothing bad will happen if you leave it out. This is simply the text to be rendered in the text block. Line breaks may be inserted by including a newline \*(L"&#92;n\*(R". font The font attribute is a string indicating the name of the font to be used to render this element. The \s-1PS\s0 package uses an internal description of the Font Metrics of various fonts that is contained in the PostScript::Metrics module. As of this writing, the PostScript::Metrics module supports the following fonts (basically, the default GhostScript fonts that have \s-1AFM\s0 files): NimbusSanL-ReguCond	  URWGothicL-Book CenturySchL-Bold          CharterBT-Italic URWBookmanL-Ligh          CharterBT-BoldItalic NimbusRomNo9L-ReguItal    URWBookmanL-DemiBoldItal CharterBT-Roman           NimbusMonL-ReguObli NimbusSanL-ReguCondItal   CenturySchL-Ital CenturySchL-BoldItal      URWPalladioL-Roma URWBookmanL-LighItal      CharterBT-Bold NimbusSanL-BoldCond       NimbusMonL-BoldObli NimbusSanL-BoldCondItal   URWGothicL-DemiObli NimbusSanL-Regu           URWPalladioL-Bold NimbusMonL-Regu           NimbusSanL-ReguItal URWGothicL-BookObli       URWPalladioL-Ital You can get a list of the currently supported fonts with the following:     use PostScript::Metrics;     @okfonts = PostScript::Metrics-&gt;listFonts(); \s-1NOTE:\s0 The font must be available to the PostScript interpreter that is used to render the page described by the program. If the interpreter cannot load the font, it will ususally attempt to substitute a similar font. If a font is substituted with a font with different metrics, lines of text may overrun the right margin of the text block. You have been warned. It is very easy to create stylesheets for a document:     # Define the styles     #     %body = ( font =&gt; &apos;URWGothicL-DemiObli&apos;, size =&gt; 12, leading =&gt; 16 );     %head1 = ( font =&gt; &apos;NimbusSanL-BoldCond&apos;, size =&gt; 24, leading =&gt; 36 );     %head2 = ( font =&gt; &apos;NimbusSanL-BoldCond&apos;, size =&gt; 18, leading =&gt; 30 );</p><p>    # Use them where appropriate     #     $tb-&gt;addText(text =&gt; "Chapter 10&#92;n", %head1);     $tb-&gt;addText(text =&gt; "Spokane Sam and His Spongepants&#92;n", %head2);     $tb-&gt;addText(text =&gt; "It was a dark and stormy night and Spokane Sam&#92;&apos;s     Spongepants were thirsty...", %body);</p>
  </dd>
  <dt>
    <em>numElements()</em>
  </dt>
  <dd>
    <p>Returns the number of elements in the text block object. An 'element' is created each time the <em>addText()</em> method is called. The <em>Write()</em> method will generate the PostScript code that will render the text on a page when passed to a PostScript interpreter such as Ghostscript. The four parameters are expressed in points (1/72 inch) and indicate the width and height of the box within which the text should be printed, and the x and y offset of the upper left corner of this box. Important: PostScript defines the orgin (0,0) as the lower left corner of the page! This *will* mess you up. Standard page sizes in points are:      Paper Size                      Width, Height (in points)      .........................       .........................      Letter                          612, 792      Legal                           612, 1008      Ledger                          1224, 792      Tabloid                         792, 1224      A0                              2384, 3370      A1                              1684, 2384      A2                              1191, 1684      A3                              842, 1191      A4                              595, 842      A5                              420, 595      A6                              297, 420      A7                              210, 297      A8                              148, 210      A9                              105, 148      B0                              2920, 4127      B1                              2064, 2920      B2                              1460, 2064      B3                              1032, 1460      B4                              729, 1032      B5                              516, 729      B6                              363, 516      B7                              258, 363      B8                              181, 258      B9                              127, 181      B10                             91, 127      #10 Envelope                    297, 684      C5 Envelope                     461, 648      DL Envelope                     312, 624      Folio                           595, 935      Executive                       522, 756 The <em>write()</em> method returns two values: a string consisting of the PostScript code (suitable for printing to a file), and a TextBlock object containing the elements (and partial elements) that did not fit within the specified area, if any. If the entire text block fits with the area, the remainder will be undef. The remainder can be used to layout multiple pages and columns, etc. in a similar manner to most modern desktop publishing programs. In general, the <em>write()</em> method should be called as in the following, which writes the PostScript code to a file called 'psoutput.ps':     open OUT, &apos;&gt;psoutput.ps&apos;;     my ($code, $remainder) = $tb-&gt;Write(572, 752, 20, 772);     print OUT $code; To print an entire text block that spans multiple pages, you could do something like this: (add enough text to the text block first..)     open OUT, &apos;&gt;psoutput.ps&apos;;     my $pages = 1;</p><p>    # Create the first page     #     my ($code, $remainder) = $tb-&gt;Write(572, 752, 20, 772);     print OUT "%%Page:$pages&#92;n";      # this is required by the Adobe                                       # Document Structuring Conventions     print OUT $code;     print OUT "showpage&#92;n";</p><p>    # Print the rest of the pages, if any     #     while ($remainder-&gt;numElements) {         $pages++;         print OUT "%%Page:$pages&#92;n";         ($code, $remainder) = $remainder-&gt;Write(572, 752, 20, 772);         print OUT $code;         print OUT "showpage&#92;n";     } However, if you use the PostScript::Document module to construct generic multi-page PostScript documents, you don't have to worry about this.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">A NOTE ABOUT FONT METRICS</h2>
        <div class="sectioncontent">
<p>The <em>write()</em> method uses the module PostScript::Metrics to determine the width of each character; widths vary from font to font and character to character. If you were writing a stright PostScript program, you would let the PostScript interpreter do this for you, but in the case of this program, we need to know the width of each character in a font within the Perl script. The PostScript::Metrics module contains the font metrics (i.e., a list containing the width of each character in the font) for a bunch of fonts that are listed above under the description of the <em>addText()</em> method. This set started with the metrics for all of the default fonts with \s-1AFM\s0 files that came with GhostScript. It is slowly growing as more fonts are mapped. To add support for a new font, you must create the array with the metrics for that font and add it to the PostScript::Metrics module. For a font with an \s-1AFM\s0 file, the \s-1AFM\s0 file can be parsed with Gisle Aas' Font::AFM module, available on \s-1CPAN\s0.</p><p>Please send all PostScript::Metrics patches to the author at shawn@as220.org.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<p>* better compliance with Adobe's Document Structuring Conventions * more font metrics descriptions * make font loading code smarter and more efficient for the interpreter * support a larger character set * it would be nice to add more functions, e.g. <em>Clone()</em> * how about settable defaults?</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Copyright 1998, 1999 Shawn Wallace. All rights reserved.</p><p>Contact the author: shawn@as220.org http://www.as220.org/shawn</p><p>Portions of code contributed by Dan Smeltz.</p><p>This is free software. You may use, modify, and redistribute this package under the same terms as Perl itself.</p><p>PostScript is a trademark of Adobe Systems.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="PostScript::Metrics.3pm.html"><span aria-hidden="true">&larr;</span> PostScript::Metrics.3pm: Helper module for postscript::textblock</a></li>
   <li class="next"><a href="Pragmatic.3pm.html">Pragmatic.3pm: Adds pragmata to exporter <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
