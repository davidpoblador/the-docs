<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Load: Load volume data structures from a file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Load volume data structures from a file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Load (3) manual">
  <meta name="twitter:description" content="Load volume data structures from a file">
  <meta name="twitter:image" content="https://www.carta.tech/images/libvolpack1-dev-Load-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/Load.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Load (3) manual" />
  <meta property="og:description" content="Load volume data structures from a file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libvolpack1-dev-Load-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Load<small> (3)</small></h1>
        <p class="lead">Load volume data structures from a file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/Load.3.html">
      <span itemprop="name">Load: Load volume data structures from a file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libvolpack1-dev/">
      <span itemprop="name">libvolpack1-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/Load.3.html">
      <span itemprop="name">Load: Load volume data structures from a file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;volpack.h&gt;</p><p>&#92;$1 <strong>vpLoadRawVolume(</strong><em>vpc, fd</em><strong>)</strong></p><ul>
<li><p>vpContext *<em>vpc;</em> int <em>fd;</em></p><p><strong>vpLoadMinMaxOctree(</strong><em>vpc, fd</em><strong>)</strong> vpContext *<em>vpc;</em> int <em>fd;</em></p><p><strong>vpLoadClassifiedVolume(</strong><em>vpc, fd</em><strong>)</strong> vpContext *<em>vpc;</em> int <em>fd;</em></p><p><strong>vpLoadContext(</strong><em>vpc, fd</em><strong>)</strong> vpContext *<em>vpc;</em> int <em>fd;</em></p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <em>vpc</em>
  </dt>
  <dd>
    <p>VolPack context from <strong>vpCreateContext.</strong></p>
  </dd>
  <dt>
    <em>fd</em>
  </dt>
  <dd>
    <p>File descriptor from <a href="../man2/open.2.html"><strong>open</strong>(2)</a>, open for reading.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>These functions are used to load volume data structures into a rendering context from files in the format written by the VolPack file storing routines (see <strong>vpStoreRawVolume</strong>(3)).</p><p><strong>vpLoadRawVolume</strong> loads a 3D voxel array file.  The file includes information about the size of the volume and the layout of the voxels as well as the volume data itself.  A new voxel array is allocated, the data is read into the array, and the array is stored in the rendering context.  Note that the array will not be freed automatically when the context is destroyed; the application is responsible for freeing the array when appropriate (by using <strong>vpGetp</strong> with the VP_VOXEL_DATA state variable code to retrieve the array pointer), or for unmapping the voxel array if it has been memory mapped (see below).</p><p>Any existing min-max octree or preclassified volume data is destroyed when <strong>vpLoadRawVolume</strong> is called.  The information loaded from the file includes all of the parameters set with <strong>vpSetVolumeSize</strong>, <strong>vpSetVoxelSize</strong>, <strong>vpSetVoxelField</strong> and <strong>vpSetRawVoxels</strong>. The data in the file is automatically byte-swapped if the file was written on an architecture with different byte ordering than the current architecture.  A magic constant in the file is used to determine if byte-swapping is necessary.  Volume fields that have not been explicitly declared (by calling <strong>vpSetVoxelField</strong> before storing the voxel array file) cannot be byte-swapped.</p><p><strong>vpLoadMinMaxOctree</strong> loads a min-max octree file.  The current 3D voxel array size and voxel layout must match the data in the octree file before the file is loaded; consistency checks are performed.  Any existing octree is destroyed and the new octree is stored in the rendering context.  Byte-swapping is performed if necessary.</p><p><strong>vpLoadClassifiedVolume</strong> loads a preclassified volume data file. The file includes information about the size of the volume and the layout of the voxels as well as the volume data itself.  If the volume matches the size and layout of any existing volume data in the rendering context then the data in the file replaces only the current preclassified volume; otherwise, the old octree is destroyed, the 3D voxel array parameters are zeroed out, and the new size and layout parameters are loaded.  The information loaded from the file includes all of the parameters set with <strong>vpSetVolumeSize</strong>, <strong>vpSetVoxelSize</strong> and <strong>vpSetVoxelField</strong>.  Byte-swapping is performed if necessary.</p><p><strong>vpLoadContext</strong> loads a rendering context file.  The file includes all rendering parameters except volume data and callback functions. The contents of any lookup tables for shading and classification are also loaded.  Any existing preclassified volume data or octree are destroyed and the 3D voxel array parameters pointer is zeroed out. The lookup tables are loaded into dynamically allocated arrays, and the application is responsible for freeing those array when necessary; the arrays are not automatically freed when <strong>vpDestroyContext</strong> is called.  In the current implementation byte swapping is not performed so context files from other architectures cannot be read.</p><p>The function used to read data from the files can be set by calling <strong>vpSetCallback</strong> with the VP_READ_FUNC option.  This could be used to implement a file-compression system, for example.  It is also possible to memory-map data from files by setting the VP_MMAP_FUNC option.  If this function is set then large data structures are memory mapped from files instead of being copied into memory, when possible. Data that must be byte-swapped cannot be memory mapped.  Memory mapping has the advantages that less swap space is required and data is loaded into memory only as it is used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STATE VARIABLES</h2>
        <div class="sectioncontent">
<p>The current file I/O parameters can be retrieved with the following state variable codes (see <strong>vpGeti</strong>(3)): VP_READ_FUNC, VP_MMAP_FUNC.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>The normal return value is VP_OK.  The following error return values are possible:</p>
<dl class='dl-vertical'>
  <dt>
    VPERROR_IO
  </dt>
  <dd>
    <p>The file reading or memory mapping function returned an error value (in which case the external variable <strong>errno</strong> should contain an operating-system specific error code), or the end of the file was reached prematurely.</p>
  </dd>
  <dt>
    VPERROR_BAD_FILE
  </dt>
  <dd>
    <p>The data in the file is invalid, usually meaning that it isn't a file written by the appropriate VolPack function.</p>
  </dd>
  <dt>
    VPERROR_BAD_VOLUME
  </dt>
  <dd>
    <p>The data in a min-max octree file does not match the current volume size (<strong>vpLoadMinMaxOctree</strong> only).</p>
  </dd>
  <dt>
    VPERROR_BAD_VOXEL
  </dt>
  <dd>
    <p>The data in a min-max octree file does not match the current voxel layout parameters (<strong>vpLoadMinMaxOctree</strong> only).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Load&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/VolPack.3.html"><strong>VolPack</strong>(3)</a>, <strong>vpCreateContext</strong>(3), <strong>vpStoreRawVolume</strong>(3)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="LinAlgebra.3.html"><span aria-hidden="true">&larr;</span> LinAlgebra.3: Linear algebra routines</a></li>
   <li class="next"><a href="LookupShader.3.html">LookupShader.3: Specify shading lookup tables <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
