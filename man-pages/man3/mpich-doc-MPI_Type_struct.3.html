<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MPI_Type_struct: Creates a struct datatype</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Creates a struct datatype">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="MPI_Type_struct (3) manual">
  <meta name="twitter:description" content="Creates a struct datatype">
  <meta name="twitter:image" content="https://www.carta.tech/images/mpich-doc-MPI_Type_struct-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/mpich-doc-MPI_Type_struct.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MPI_Type_struct (3) manual" />
  <meta property="og:description" content="Creates a struct datatype" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mpich-doc-MPI_Type_struct-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">MPI_Type_struct<small> (3)</small></h1>
        <p class="lead">Creates a struct datatype</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/MPI_Type_struct.3.html">
      <span itemprop="name">MPI_Type_struct: Creates a struct datatype</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mpich-doc/">
      <span itemprop="name">mpich-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/MPI_Type_struct.3.html">
      <span itemprop="name">MPI_Type_struct: Creates a struct datatype</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
int MPI_Type_struct(int count,
                   const int *array_of_blocklengths,
                   const MPI_Aint *array_of_displacements,
                   const MPI_Datatype *array_of_types,
                   MPI_Datatype *newtype)
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>count</strong></p>
  </dt>
  <dd>
    <p>- number of blocks (integer) -- also number of entries in arrays array_of_types , array_of_displacements  and array_of_blocklengths</p>
  </dd>
  <dt>
    <p><strong>array_of_blocklengths</strong></p>
  </dt>
  <dd>
    <p>- number of elements in each block (array)</p>
  </dd>
  <dt>
    <p><strong>array_of_displacements</strong></p>
  </dt>
  <dd>
    <p>- byte displacement of each block (array)</p>
  </dd>
  <dt>
    <p><strong>array_of_types</strong></p>
  </dt>
  <dd>
    <p>- type of elements in each block (array of handles to datatype objects)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OUTPUT PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>newtype</strong></p>
  </dt>
  <dd>
    <p>- new datatype (handle)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPRECATED FUNCTION</h2>
        <div class="sectioncontent">
<p>The MPI-2 standard deprecated a number of routines because MPI-2 provides better versions.  This routine is one of those that was deprecated.  The routine may continue to be used, but new code should use the replacement routine. The replacement for this routine is <em>MPI_Type_create_struct</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>If an upperbound is set explicitly by using the MPI datatype <em>MPI_UB</em> , the corresponding index must be positive.</p><p>The MPI standard originally made vague statements about padding and alignment; this was intended to allow the simple definition of structures that could be sent with a count greater than one.  For example,</p>
<pre>
struct { int a; char b; } foo;
</pre>
<p>may have <em>sizeof(foo) &gt; sizeof(int) + sizeof(char)</em> ; for example, <em>sizeof(foo) == 2*sizeof(int)</em> . The initial version of the MPI standard defined the extent of a datatype as including an <strong>epsilon</strong> that would have allowed an implementation to make the extent an MPI datatype for this structure equal to <em>2*sizeof(int)</em> .</p><p>However, since different systems might define different paddings, there was much discussion by the MPI Forum about what was the correct value of epsilon, and one suggestion was to define epsilon as zero. This would have been the best thing to do in MPI 1.0, particularly since the <em>MPI_UB</em> type allows the user to easily set the end of the structure. Unfortunately, this change did not make it into the final document. Currently, this routine does not add any padding, since the amount of padding needed is determined by the compiler that the user is using to build their code, not the compiler used to construct the MPI library. A later version of MPICH may provide for some natural choices of padding (e.g., multiple of the size of the largest basic member), but users are advised to never depend on this, even with vendor MPI implementations. Instead, if you define a structure datatype and wish to send or receive multiple items, you should explicitly include an <em>MPI_UB</em> entry as the last member of the structure.  For example, the following code can be used for the structure foo</p>
<pre>
blen[0] = 1; array_of_displacements[0] = 0; oldtypes[0] = MPI_INT;
blen[1] = 1; array_of_displacements[1] = &foo.b - &foo; oldtypes[1] = MPI_CHAR;
blen[2] = 1; array_of_displacements[2] = sizeof(foo); oldtypes[2] = MPI_UB;
MPI_Type_struct( 3, blen, array_of_displacements, oldtypes, &newtype );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THREAD AND INTERRUPT SAFETY</h2>
        <div class="sectioncontent">
<p>This routine is thread-safe.  This means that this routine may be safely used by multiple threads without the need for any user-provided thread locks.  However, the routine is not interrupt safe.  Typically, this is due to the use of memory allocation routines such as <em>malloc</em> or other non-MPICH runtime routines that are themselves not interrupt-safe.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES FOR FORTRAN</h2>
        <div class="sectioncontent">
<p>All MPI routines in Fortran (except for <em>MPI_WTIME</em> and <em>MPI_WTICK</em> ) have an additional argument <em>ierr</em> at the end of the argument list. <em>ierr</em> is an integer and has the same meaning as the return value of the routine in C.  In Fortran, MPI routines are subroutines, and are invoked with the <em>call</em> statement.</p><p>All MPI objects (e.g., <em>MPI_Datatype</em> , <em>MPI_Comm</em> ) are of type <em>INTEGER</em> in Fortran.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>All MPI routines (except <em>MPI_Wtime</em> and <em>MPI_Wtick</em> ) return an error value; C routines as the value of the function and Fortran routines in the last argument.  Before the value is returned, the current MPI error handler is called.  By default, this error handler aborts the MPI job.  The error handler may be changed with <em>MPI_Comm_set_errhandler</em> (for communicators), <em>MPI_File_set_errhandler</em> (for files), and <em>MPI_Win_set_errhandler</em> (for RMA windows).  The MPI-1 routine <em>MPI_Errhandler_set</em> may be used but its use is deprecated.  The predefined error handler <em>MPI_ERRORS_RETURN</em> may be used to cause error values to be returned. Note that MPI does <strong>not</strong> guarentee that an MPI program can continue past an error; however, MPI implementations will attempt to continue whenever possible.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>MPI_SUCCESS</strong></p>
  </dt>
  <dd>
    <p>- No error; MPI routine completed successfully.</p>
  </dd>
  <dt>
    <p><strong>MPI_ERR_TYPE</strong></p>
  </dt>
  <dd>
    <p>- Invalid datatype argument.  May be an uncommitted MPI_Datatype (see <em>MPI_Type_commit</em> ).</p>
  </dd>
  <dt>
    <p><strong>MPI_ERR_COUNT</strong></p>
  </dt>
  <dd>
    <p>- Invalid count argument.  Count arguments must be non-negative; a count of zero is often valid.</p>
  </dd>
  <dt>
    <p><strong>MPI_ERR_INTERN</strong></p>
  </dt>
  <dd>
    <p>- This error is returned when some part of the MPICH implementation is unable to acquire memory.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOCATION</h2>
        <div class="sectioncontent">
<p>/tmp/gyCYfBi4J6/mpich-3.1/src/mpi/datatype/type_struct.c</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lam-mpidoc-MPI_Type_struct.3.html"><span aria-hidden="true">&larr;</span> MPI_Type_struct.3: Creates a struct datatype</a></li>
   <li class="next"><a href="MPI_Type_struct.openmpi.3.html">MPI_Type_struct.openmpi.3: Creates a struct data type -- use of this routine is deprecated. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
