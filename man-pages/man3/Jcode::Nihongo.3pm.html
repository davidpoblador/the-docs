<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jcode::Nihongo: None</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="None">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Jcode::Nihongo (3pm) manual">
  <meta name="twitter:description" content="None">
  <meta name="twitter:image" content="https://www.carta.tech/images/libjcode-pm-perl-Jcode::Nihongo-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Jcode::Nihongo.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Jcode::Nihongo (3pm) manual" />
  <meta property="og:description" content="None" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libjcode-pm-perl-Jcode::Nihongo-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Jcode::Nihongo<small> (3pm)</small></h1>
        <p class="lead">None</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Jcode::Nihongo.3pm.html">
      <span itemprop="name">Jcode::Nihongo: None</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libjcode-pm-perl/">
      <span itemprop="name">libjcode-pm-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Jcode::Nihongo.3pm.html">
      <span itemprop="name">Jcode::Nihongo: None</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">名前</h2>
        <div class="sectioncontent">
<p>Jcode - 日本語文字集合ハンドラ</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">概要</h2>
        <div class="sectioncontent">

<pre>
 use Jcode;
 #
 # 古式ゆかしく
 Jcode::convert($str, $ocode, $icode, "z");
 # もしくはオブジェクト指向で！
 print Jcode-&gt;new($str)-&gt;h2z-&gt;tr($from, $to)-&gt;utf8;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">説明</h2>
        <div class="sectioncontent">
<p>Jcode.pmはオブジェクト的なアプローチと従来からのアプローチの両方を サポートしています。オブジェクト的なアプローチを使えばこんな感じで；</p><p>  $iso_2022_jp = Jcode-&gt;new($str)-&gt;h2z-&gt;jis;</p><p>こちらよりエレガントでしょう：</p><p>  $iso_2022_jp = $str;   &jcode::convert(&#92;$iso_2022_jp, 'jis', &jcode::getcode(&#92;$str), "z");</p><p>オブジェクトに馴染みの無い人のために、Jcode.pmはまだ\*(C`getcode()\*(C'と \*(C`convert()\*(C'をサポートしています。</p><p>Perlのバージョンが5.8.1以上なら、Jcodeは、Perl 5.8以降の標準的な文字集合 ハンドラモジュールであるEncodeのラッパーとして振る舞います。</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">メソッド</h2>
        <div class="sectioncontent">
<p>特に言及しない限り、ここで挙げるメソッドは全てJcodeオブジェクトを返します。</p><p><strong>&#92;$1</strong></p><p>$strからJcodeオブジェクト$jを生成します。明示的に$icodeをセットしなければ、 入力コードは自動的に判定されます。利用可能な文字集合については、下の getcodeを参照してください。 Perl 5.8.1以降では、$icodeにはEncodeが理解できる <em>どんなエンコーディング名</em>も使えます。   $j = Jcode-&gt;new($european, 'iso-latin1'); オブジェクトを文字列化すると、EUCに変換された文字列が返ります。ですから \*(C`print $j-&gt;euc\*(C'とする代わりに、\*(C`print $j\*(C'とできます。</p>
<dl class='dl-vertical'>
  <dt>
    リファレンス渡し
  </dt>
  <dd>
    <p>スカラー値の代わりに、以下のようにリファレンスを渡せます。  Jcode-&gt;new(&#92;$str); これはほんの少し時間を節約します。その代償として、$strの値そのものが 変換されます（ある意味、$strはjcodeオブジェクトに\*(L"tieされる\*(R"のです）。</p>
  </dd>

</dl>
<p>$jの内部文字列に$strをセットします。繰り返しJcodeオブジェクトを使うときに 便利です（オブジェクトを生成する時間とメモリの節約になります）。  # mailboxをSJIS形式に変換  my $jconv = new Jcode;  $/ = 00;  while(&lt;&gt;){      print $jconv-&gt;set(&#92;$_)-&gt;mime_decode-&gt;sjis;  } $jの内部文字列に$strを加えます。 Jcode-&gt;<em>new()</em> の短縮形。以下のようにできます；  $sjis = jcode($str)-&gt;sjis; 一般に、$j-&gt;<em>encoded</em>とすることで<em>encoded</em>に変換された文字列を得ます。 自明でしょう。 \s-1WYCIWYG\s0 = What you code is what you get :) \*(C`$j-&gt;h2z-&gt;jis\*(C'と同じです。 半角カナは強制的に全角に変換されます。 Perl 5.8.1以降では、Encodeがサポートするどんなエンコーディング名と エイリアスでも利用できます。例えば：   $european = $j-&gt;iso_latin1; # メソッド名用に'-'は'_'に置き換えます <strong>参考</strong>：Encode::Encoderがこれと同じ小技を使っています。</p>
<dl class='dl-vertical'>
  <dt>
    $j-&gt;fallback($fallback)
  </dt>
  <dd>
    <p>Perl 5.8.1以降では、Jcodeは内部の文字列をUTF-8で保持します。 <em>-&gt;encoding</em>にマップできない文字は'?'に置き換えられますが、 これはEncodeでの標準動作です。   my $unistr = "&#92;x{262f}"; # 陰陽マーク   my $j = jcode($unistr);  # $j-&gt;euc の結果は '?' に この振る舞いは、Encode同様、フォールバックを指定することで変更できます。 値はEncodeのものと一緒です。便宜のため、\*(C`Jcode::FB_PERLQQ\*(C'、 \*(C`Jcode::FB_XMLCREF\*(C'、\*(C`Jcode::FB_HTMLCREF\*(C'がEncodeのそれらへの エイリアスになっています。   print $j-&gt;fallback(Jcode::FB_PERLQQ)-&gt;euc;   # '&#92;x{262f}'   print $j-&gt;fallback(Jcode::FB_XMLCREF)-&gt;euc;  # '&#x262f;'   print $j-&gt;fallback(Jcode::FB_HTMLCREF)-&gt;euc; # '&#9775;' グローバル変数$Jcode::FALLBACKにデフォルトのフォールバックが保持 されていますので、この値を代入することでオーバーライドできます。   $Jcode::FALLBACK = Jcode::FB_PERLQQ; # デフォルトのフォールバックスキーマを設定</p>
  </dd>

</dl>
<p>$width（デフォルト：72）毎にjcode文字列内の行を折り返します。 $widthは”半角”文字の数です。全角文字は2文字としてカウントします。 $newline_str（デフォルトは\*(L"&#92;n\*(R"）で指定された改行文字が加わります。 折り返された全行をリストで返します。 Perl 5.8.1以降は3番目の引数$krefにEUCの文字列の配列リファレンスを 渡すことで、簡易的な行頭禁則処理（ぶら下がり）を行えます。 バイト長ではなく、全角文字も一文字として数えた場合の文字数を返します。 下記のメソッドを使うには、MIME::Base64が必要です。インストールは単純に</p><p>   perl -MCPAN -e 'CPAN::Shell-&gt;install("MIME::Base64")'</p><p>とします。お使いのPerlが5.6以降であるなら、MIME::Base64は バンドルされているので、インストールの必要はありません。 $strをRFC1522にあるMIME-Headerに変換します。$lfを指定すると、 行の折り返しに$lfが使われます（デフォルト：&#92;n）。 $bplを指定すると、折り返すバイト数に$bplが使われます（デフォルト：76； この数値は76以下でなければなりません）。 Perl 5.8.1以降では、以下のようにしてもMIME Headerエンコードができます：   $mime_header = $j-&gt;MIME_Header; この場合$mime_headerの戻り値はMIME-B-encoded UTF-8になります。 一方、\*(C`$j-&gt;mime_encode()\*(C'はMIME-B-encoded ISO-2022-JPを返します。 最近のほとんどのメーラーはどちらもサポートしています。</p>
<dl class='dl-vertical'>
  <dt>
    $j-&gt;mime_decode;
  </dt>
  <dd>
    <p>Jcodeオブジェクトの内部文字列をMIME-Headerデコードします。Perl 5.8.1 以降なら、以下のようにして同じことができます：   Jcode-&gt;new($str, 'MIME-Header'); こちらの場合、ISO-2022-JPだけではなくUTF-8などにも対応しており、 さらにMIME B EncodingのみならずMIME Q Encodingにも対応している ので、Perl 5.8.1以降であればこちらを使うべきでしょう。</p>
  </dd>
  <dt>
    $j-&gt;h2z([$keep_dakuten])
  </dt>
  <dd>
    <p>X201カナ（半角）をX208カナ（全角）に変換します。 $keep_dakutenに真値をセットすると、濁点をそのままにします (これはつまり、「カ＋゛」は「ガ」に変換されずにそのまま になるということです) $j-&gt;nmatchを通じてマッチした数を取得できます。</p>
  </dd>
  <dt>
    $j-&gt;z2h
  </dt>
  <dd>
    <p>X208カナ（全角）をX201カナ（半角）に変換します。 $j-&gt;nmatchを通じてマッチした数を取得できます。 \*(C`-&gt;m()\*(C'と\*(C`-&gt;s()\*(C'を使うには、Perl 5.8.1以降が 必要です。 Jcodeオブジェクトに\*(C`tr/$from/$to/\*(C'を適用します。$fromと$toは EUC-JPの文字列です。Perl 5.8.1以降では、flag付きのUTF-8文字列 も受け付けます。 $optをセットすると、\*(C`tr/$from/$to/$opt\*(C'が適用されます。$optは 'c'、'd'あるいはそれらの組み合わせでなければなりません。 $j-&gt;nmatchを通じてマッチした数を取得できます。 Perl 5.8.1以降では、trの形式に誤りのあった場合に-&gt;error_trを通じて、 $@を取得できます。 以下のメソッドはPerl 5.8.1以降でのみ利用可能です。 個々に\*(C`s/$pattern/$replace/$opt\*(C'を適用します。$optは正規表現オプションと 同じです。正規表現のオプションについてはperlreを参照ください。 \*(C`$j-&gt;tr()\*(C'、\*(C`$j-&gt;s()\*(C'はそのオブジェクト自身を返すので、 以下のように操作を連結できます。   $j-&gt;tr("A-Z", "a-z")-&gt;s("foo", "bar"); \*(C`m/$patter/$opt\*(C'を適用します。このメソッドは”オブジェクトを返さない” ので、\*(C`$j-&gt;s()\*(C'のようにメソッドを連結できないことに注意してください。 正規表現の形式に誤りのあった場合、-&gt;error_m、-&gt;error_sを通じて $@を取得できます。 もしJcodeオブジェクトのインスタンス変数にアクセスしたいなら、直接それら にアクセスするのではなく、アクセスメソッドを利用しましょう（これぞOOP です）。</p>
  </dd>

</dl>
<p>参考までに、Jcodeは（一般的な方法である）ハッシュリファレンスの代わりに、 配列リファレンスを使うことで、スピードを最適化しています（実際のところ、 アクセスメソッドを使う限りこのことを知る必要はありません； もう一度 いいますが、これはOOPなのです）。</p><p>Perl 5.8.1以降では、ハッシュリファレンスを使うように変更されました。 これにより、Jcodeの拡張はものすごく簡単になります。</p>
<dl class='dl-vertical'>
  <dt>
    $j-&gt;r_str
  </dt>
  <dd>
    <p>EUC文字列へのリファレンス。 Perl 5.8.1以降ではUTF-8フラグの立ったUTF-8文字列へのリファレンスです。</p>
  </dd>
  <dt>
    $j-&gt;icode
  </dt>
  <dd>
    <p>直近の操作における入力文字コード。</p>
  </dd>
  <dt>
    $j-&gt;nmatch
  </dt>
  <dd>
    <p>マッチした数（$j-&gt;tr等を使ったとき）。</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">サブルーチン</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    ($code, [$nmatch]) = getcode($str)
  </dt>
  <dd>
    <p>$strの文字コードを返します。返るコードは以下の通りです。  ascii   Ascii （日本語コードを含まない）  binary  Binary （テキストファイルではない）  euc     EUC-JP  sjis    SHIFT_JIS  jis     JIS (ISO-2022-JP)  ucs2    UCS2 (Raw Unicode)  utf8    UTF8 スカラーコンテキストの代わりに配列コンテキストを使うと、何文字分の コードが見つかったのかも返します。上の方で述べたように、$strは&#92;$str でも構いません。 <strong>jcode.pl 利用者の方へ：</strong> この関数は<em>jcode::getcode()</em>と100%上位互換が あります。――まあ、ほぼ100%；  * 戻り値が配列のとき、その順番は逆となります；    jcode::getcode()は$nmatchを最初に返します。  * jcode::getcode()は、EUC文字とSJIS文字の数が等しいとき、'undef'を    返します。 Jcode::getcode()はEUCを返します。これはJcode.pmには    中間がないためです。 $strを$ocodeで指定した文字コードに変換します。$icodeも指定すると、 入力文字列を<em>getcode()</em>でチェックする代わりに、$icodeと仮定します。 上の方で述べたように、$strは&#92;$strでも構いません。 <strong>jcode.pl 利用者の方へ：</strong> この関数は<em>jcode::convert()</em>と100%上位互換が あります！</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">バグ</h2>
        <div class="sectioncontent">
<p>Perlが5.8.1以降の場合、JcodeはEncodeのラッパーとして振る舞います。 つまり、JcodeはEncode内のバグの影響を受けます。</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">謝辞</h2>
        <div class="sectioncontent">
<p>このパッケージは、動機、デザインそしてコードの多くの点で、 歌代 和正 &lt;utashiro@iij.ad.jp&gt;氏のPerl4ライブラリjcode.plに負っています。</p><p>大崎 博基 &lt;ohzaki@iod.ricoh.co.jp&gt;氏は、開発の非常に初期の段階から 正規表現を磨きあげる手助けをしてくれました。</p><p>makamaka@donzoko.net の JEncode には、JcodeとEncodeをどう融合させれば いいか大変大きな啓示を受けました。また、本日本語マニュアルも寄贈して いただきました。</p><p>そしてJcode \s-1ML\s0 &lt;jcode5@ring.gr.jp&gt;の皆さん。この方達なしには、 ここまで完成しなかったことでしょう。</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">参考</h2>
        <div class="sectioncontent">
<p>Encode</p><p>&lt;http://www.iana.org/assignments/character-sets&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">著作権</h2>
        <div class="sectioncontent">
<p>Copyright 1999-2005 Dan Kogai &lt;dankogai@dan.co.jp&gt;</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Jcode.3pm.html"><span aria-hidden="true">&larr;</span> Jcode.3pm: Japanese charset handler</a></li>
   <li class="next"><a href="KiokuX::Model.3pm.html">KiokuX::Model.3pm: A simple application specific wrapper for kiokudb. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
