<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tclcurl_multi: Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tclcurl_multi (3) manual">
  <meta name="twitter:description" content="Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax.">
  <meta name="twitter:image" content="https://www.carta.tech/images/tclcurl-tclcurl_multi-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/tclcurl_multi.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tclcurl_multi (3) manual" />
  <meta property="og:description" content="Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/tclcurl-tclcurl_multi-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tclcurl_multi<small> (3)</small></h1>
        <p class="lead">Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/tclcurl_multi.3.html">
      <span itemprop="name">tclcurl_multi: Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/tclcurl/">
      <span itemprop="name">tclcurl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/tclcurl_multi.3.html">
      <span itemprop="name">tclcurl_multi: Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>curl::multiinit</strong></p><p><em>multiHandle</em><strong> addhandle</strong></p><p><em>multiHandle</em><strong> removehandle</strong></p><p><em>multiHandle</em><strong> configure</strong></p><p><em>multiHandle</em><strong> perform</strong></p><p><em>multiHandle</em><strong> active</strong></p><p><em>multiHandle</em><strong> getinfo </strong></p><p><em>multihandle</em><strong> cleanup</strong></p><p><em>multihandle</em><strong> auto</strong></p><p><strong>curl::multistrerror </strong><em>errorCode</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>TclCurl's multi interface introduces several new abilities that the easy interface refuses to offer. They are mainly:</p>
<dl class='dl-vertical'>
  <dt>
    <p>Enable a "pull" interface. The application that uses TclCurl decides where and when to get/send data.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>Enable multiple simultaneous transfers in the same thread without making it complicated for the application.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>Keep Tk GUIs 'alive' while transfers are taking place.</p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Blocking</h2>
        <div class="sectioncontent">
<p>A few areas in the code are still using blocking code, even when used from the multi interface. While we certainly want and intend for these to get fixed in the future, you should be aware of the following current restrictions:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Name resolves on non-windows unless c-ares is used.</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>GnuTLS SSL connections.</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>GnuTLS SSL connections</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Active FTP connections.</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>HTTP proxy CONNECT operations.</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>SOCKS proxy handshakes</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>file:// transfers.</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>TELNET transfers</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">curl::multiinit</h2>
        <div class="sectioncontent">
<p>This procedure must be the first one to call, it returns a <em>multiHandle</em> that you need to use to invoke TclCurl procedures. The init MUST have a corresponding call to <em>cleanup</em> when the operation is completed.</p><p><strong>RETURN VALUE</strong></p><p><em>multiHandle</em> to use.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">multiHandle addhandle ?easyHandle?</h2>
        <div class="sectioncontent">
<p>Each single transfer is built up with an 'easy' handle, the kind we have been using so far with TclCurl, you must create them and setup the appropriate options for each of them. Then we add them to the 'multi stack' using the <em>addhandle</em> command.</p><p>If the easy handle is not set to use a shared or global DNS cache, it will be made to use the DNS cache that is shared between all easy handles within the multi handle.</p><p>When an easy handle has been added to a multi stack, you can not and you must not use <em>perform</em> on that handle!</p><p><em>multiHandle</em> is the return code from the <em>curl::multiinit</em> call.</p><p><strong>RETURN VALUE</strong> The possible return values are:</p>
<dl class='dl-vertical'>
  <dt>
    -1
  </dt>
  <dd>
    <p>Handle added to the multi stack, please call <em>perform</em> soon</p>
  </dd>
  <dt>
    0
  </dt>
  <dd>
    <p>Handle added ok.</p>
  </dd>
  <dt>
    1
  </dt>
  <dd>
    <p>Invalid multi handle.</p>
  </dd>
  <dt>
    2
  </dt>
  <dd>
    <p>Invalid 'easy' handle. It could mean that it isn't an easy handle at all, or possibly that the handle already is in used by this or another multi handle.</p>
  </dd>
  <dt>
    3
  </dt>
  <dd>
    <p>Out of memory, you should never get this.</p>
  </dd>
  <dt>
    4
  </dt>
  <dd>
    <p>You found a bug in TclCurl.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">multiHandle removehandle ?easyHandle?</h2>
        <div class="sectioncontent">
<p>When a transfer is done or if we want to stop a transfer before it is completed, we can use the <em>removehandle</em> command. Once removed from the multi handle, we can again use other easy interface functions on it.</p><p>Please note that when a single transfer is completed, the easy handle is still left added to the multi stack. You need to remove it and then close or, possibly, set new options to it and add it again to the multi handle to start another transfer.</p><p><strong>RETURN VALUE</strong> The possible return values are:</p>
<dl class='dl-vertical'>
  <dt>
    0
  </dt>
  <dd>
    <p>Handle removed ok.</p>
  </dd>
  <dt>
    1
  </dt>
  <dd>
    <p>Invalid multi handle.</p>
  </dd>
  <dt>
    2
  </dt>
  <dd>
    <p>Invalid 'easy' handle.</p>
  </dd>
  <dt>
    3
  </dt>
  <dd>
    <p>Out of memory, you should never get this.</p>
  </dd>
  <dt>
    4
  </dt>
  <dd>
    <p>You found a bug in TclCurl.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">multiHandle configure</h2>
        <div class="sectioncontent">
<p>So far the only options are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-pipelining</strong></p>
  </dt>
  <dd>
    <p>Pass a 1 to enable or 0 to disable. Enabling pipelining on a multi handle will make it attempt to perform HTTP Pipelining as far as possible for transfers using this handle. This means that if you add a second request that can use an already existing connection, the second request will be "piped" on the same connection rather than being executed in parallel.</p>
  </dd>
  <dt>
    <p><strong>-maxconnects</strong></p>
  </dt>
  <dd>
    <p>Pass a number which will be used as the maximum amount of simultaneously open connections that TclCurl may cache. Default is 10, and TclCurl will enlarge the size for each added easy handle to make it fit 4 times the number of added easy handles.</p><p>By setting this option, you can prevent the cache size to grow beyond the limit set by you. When the cache is full, curl closes the oldest one in the cache to prevent the number of open connections to increase.</p><p>This option is for the multi handle's use only, when using the easy interface you should instead use it's own <strong>maxconnects</strong> option.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">multiHandle perform</h2>
        <div class="sectioncontent">
<p>Adding the easy handles to the multi stack does not start any transfer. Remember that one of the main ideas with this interface is to let your application drive. You drive the transfers by invoking <em>perform.</em> TclCurl will then transfer data if there is anything available to transfer. It'll use the callbacks and everything else we have setup in the individual easy handles. It'll transfer data on all current transfers in the multi stack that are ready to transfer anything. It may be all, it may be none.</p><p>When you call <strong>perform</strong> and the amount of running handles is changed from the previous call (or is less than the amount of easy handles you added to the multi handle), you know that there is one or more transfers less "running". You can then call <em>getinfo</em> to get information about each individual completed transfer. If an added handle fails very quickly, it may never be counted as a running handle.</p><p><strong>RETURN VALUE</strong> If everything goes well, it returns the number of running handles, '0' if all are done. In case of error, it will return the error code.</p><p>This function only returns errors etc regarding the whole multi stack. Problems still might have occurred on individual transfers even when this function returns ok.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">multiHandle active</h2>
        <div class="sectioncontent">
<p>In order to know if any of the easy handles are ready to transfer data before invoking <em>perform</em> you can use the <em>active</em> command, it will return the number of transfers currently active.</p><p><strong>RETURN VALUE</strong> The number of active transfers or '-1' in case of error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">multiHandle getinfo</h2>
        <div class="sectioncontent">
<p>This procedure returns very simple information about the transfers, you can get more detail information using the <em>getinfo</em> command on each of the easy handles.</p><p><strong>RETURN VALUE</strong> A list with the following elements:</p>
<dl class='dl-vertical'>
  <dt>
    <p>easyHandle about which the info is about.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>state of the transfer, '1' if it is done.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>exit code of the transfer, '0' if there was no error,...</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>Number of messages still in the info queue.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>In case there are no messages in the queue it will return {"" 0 0 0}.</p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">multiHandle cleanup</h2>
        <div class="sectioncontent">
<p>This procedure must be the last one to call for a multi stack, it is the opposite of the <em>curl::multiinit</em> procedure and must be called with the same <em>multiHandle</em> as input as the <strong>curl::multiinit</strong> call returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">multiHandle auto ?-command \fIcommand\fP?</h2>
        <div class="sectioncontent">
<p>Using this command Tcl's event loop will take care of periodically invoking <strong>perform</strong> for you, before using it, you must have already added at least one easy handle to the multi handle.</p><p>The <strong>command</strong> option allows you to specify a command to invoke after all the easy handles have finished their transfers, even though I say it is an option, the truth is you must use this command to cleanup all the handles, otherwise the transfered files may not be complete.</p><p>This support is still in a very experimental state, it may still change without warning. Any and all comments are welcome.</p><p>You can find a couple of examples at <strong>tests/multi</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">curl::multistrerror errorCode</h2>
        <div class="sectioncontent">
<p>This procedure returns a string describing the error code passed in the argument.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tclcurl_multi&hellip;</h2>
        <div class="sectioncontent">
<p><em>tclcurl, curl.</em></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tclcurl.3.html"><span aria-hidden="true">&larr;</span> tclcurl.3: Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax.</a></li>
   <li class="next"><a href="tclcurl_share.3.html">tclcurl_share.3: Get  a  url with ftp, ftps, http, https, scp, sftp, tftp, telnet, dict, file, ldap, ldaps, imap, imaps, pop, pop3, smtp, smtps and gopher syntax. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
