<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mail::DKIM::Signature: Represents a dkim-signature header</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Represents a dkim-signature header">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Mail::DKIM::Signature (3pm) manual">
  <meta name="twitter:description" content="Represents a dkim-signature header">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmail-dkim-perl-Mail::DKIM::Signature-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Mail::DKIM::Signature.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Mail::DKIM::Signature (3pm) manual" />
  <meta property="og:description" content="Represents a dkim-signature header" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmail-dkim-perl-Mail::DKIM::Signature-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Mail::DKIM::Signature<small> (3pm)</small></h1>
        <p class="lead">Represents a dkim-signature header</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Mail::DKIM::Signature.3pm.html">
      <span itemprop="name">Mail::DKIM::Signature: Represents a dkim-signature header</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmail-dkim-perl/">
      <span itemprop="name">libmail-dkim-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Mail::DKIM::Signature.3pm.html">
      <span itemprop="name">Mail::DKIM::Signature: Represents a dkim-signature header</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTORS</h2>
        <div class="sectioncontent">
<h3>\fInew()\fP - create a new signature from parameters</h3>

<pre>
  my $signature = Mail::DKIM::Signature-&gt;new(
                      [ Algorithm =&gt; "rsa-sha1", ]
                      [ Signature =&gt; $base64, ]
                      [ Method =&gt; "relaxed", ]
                      [ Domain =&gt; "example.org", ]
                      [ Identity =&gt; &apos;user@example.org&apos;, ]
                      [ Headers =&gt; "from:subject:date:message-id", ]
                      [ Query =&gt; "dns", ]
                      [ Selector =&gt; "alpha", ]
                      [ Timestamp =&gt; time(), ]
                      [ Expiration =&gt; time() + 86400, ]
                  );
</pre>

<h3>\fIparse()\fP - create a new signature from a DKIM-Signature header</h3>
<p>  my $sig = Mail::DKIM::Signature-&gt;parse(                   "DKIM-Signature: a=rsa-sha1; b=yluiJ7+0=; c=relaxed"             );</p><p>Constructs a signature by parsing the provided DKIM-Signature header content. You do not have to include the header name (i.e. \*(L"DKIM-Signature:\*(R") but it is recommended, so the header name can be preserved and returned the same way in <em>as_string()</em>.</p><p>Note: The input to this constructor is in the same format as the output of the as_string method.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<h3>\fIalgorithm()\fP - get or set the algorithm (a=) field</h3>
<p>The algorithm used to generate the signature. Should be either \*(L"rsa-sha1\*(R", an RSA-signed \s-1SHA-1\s0 digest, or \*(L"rsa-sha256\*(R", an RSA-signed \s-1SHA-256\s0 digest.</p><p>See also <em>hash_algorithm()</em>.</p>
<h3>\fIas_string()\fP - the signature header as a string</h3>
<p>  print $signature-&gt;as_string . "&#92;n";</p><p>outputs</p><p>  DKIM-Signature: a=rsa-sha1; b=yluiJ7+0=; c=relaxed</p><p>As shown in the example, the as_string method can be used to generate the DKIM-Signature that gets prepended to a signed message.</p>
<h3>\fIas_string_without_data()\fP - signature without the signature data</h3>
<p>  print $signature-&gt;as_string_without_data . "&#92;n";</p><p>outputs</p><p>  DKIM-Signature: a=rsa-sha1; b=; c=relaxed</p><p>This is similar to the <em>as_string()</em> method, but it always excludes the \*(L"data\*(R" part. This is used by the \s-1DKIM\s0 canonicalization methods, which require incorporating this part of the signature into the signed message.</p>
<h3>\fIbody_count()\fP - get or set the body count (l=) field</h3>
<p>  my $i = $signature-&gt;body_count;</p><p>Informs the verifier of the number of bytes in the body of the email included in the cryptographic hash, starting from 0 immediately following the \s-1CRLF\s0 preceding the body. Also known as the l= tag.</p><p>When creating a signature, this tag may be either omitted, or set after the selected canonicalization system has received the entire message body (but before it canonicalizes the DKIM-Signature).</p>
<h3>\fIbody_hash()\fP - get or set the body hash (bh=) field</h3>
<p>  my $bh = $signature-&gt;body_hash;</p><p>The hash of the body part of the message. Whitespace is ignored in this value. This tag is required.</p><p>When accessing this value, whitespace is stripped from the tag for you.</p>
<h3>\fIcanonicalization()\fP - get or set the canonicalization (c=) field</h3>
<p>  $signature-&gt;canonicalization("relaxed", "simple");</p><p>  ($header, $body) = $signature-&gt;canonicalization;</p><p>Message canonicalization (default is \*(L"simple/simple\*(R"). This informs the verifier of the type of canonicalization used to prepare the message for signing.</p><p>In scalar context, this returns header/body canonicalization as a single string separated by /. In list context, it returns a two element array, containing first the header canonicalization, then the body.</p>
<h3>\fIdata()\fP - get or set the signature data (b=) field</h3>
<p>  my $base64 = $signature-&gt;data;   $signature-&gt;data($base64);</p><p>The signature data. Whitespace is automatically stripped from the returned value. The data is Base64-encoded.</p>
<h3>\fIdomain()\fP - get or set the domain (d=) field</h3>
<p>  my $d = $signature-&gt;domain;          # gets the domain value   $signature-&gt;domain("example.org");   # sets the domain value</p><p>The domain of the signing entity, as specified in the signature. This is the domain that will be queried for the public key.</p><p>If using an \*(L"internationalized domain name\*(R", the domain name must be converted to \s-1ASCII\s0 (following section 4.1 of \s-1RFC\s0 3490) before passing it to this method.</p>
<h3>\fIexpiration()\fP - get or set the signature expiration (x=) field</h3>
<p>Signature expiration (default is undef, meaning no expiration). The signature expiration, if defined, is an unsigned integer identifying the standard Unix seconds-since-1970 time when the signature will expire.</p>
<h3>\fIget_public_key()\fP - fetches the public key referenced by this signature</h3>
<p>  my $pubkey = $signature-&gt;get_public_key;</p><p>Public key to fetch is determined by the protocol, selector, and domain fields.</p><p>This method caches the result of the fetch, so subsequent calls will not require additional \s-1DNS\s0 queries.</p><p>This method will \*(C`die\*(C' if an error occurs.</p>
<h3>\fIget_tag()\fP - access the raw value of a tag in this signature</h3>
<p>  my $raw_identity = $signature-&gt;get_tag("i");</p><p>Use this method to access a tag not already supported by Mail::DKIM, or if you want to bypass decoding of the value by Mail::DKIM.</p><p>For example, the raw i= (identity) tag is encoded in quoted-printable form. If you use the <em>identity()</em> method, Mail::DKIM will decode from quoted-printable before returning the value. But if you use get_tag(\*(L"i\*(R"), you can access the encoded quoted-printable form of the value.</p>
<h3>\fIhash_algorithm()\fP - access the hash algorithm specified in this signature</h3>
<p>  my $hash = $signature-&gt;hash_algorithm;</p><p>Determines what hashing algorithm is used as part of the signature's specified algorithm.</p><p>For algorithm \*(L"rsa-sha1\*(R", the hash algorithm is \*(L"sha1\*(R". Likewise, for algorithm \*(L"rsa-sha256\*(R", the hash algorithm is \*(L"sha256\*(R". If the algorithm is not recognized, undef is returned.</p>
<h3>\fIheaderlist()\fP - get or set the signed header fields (h=) field</h3>
<p>  $signature-&gt;headerlist("a:b:c");</p><p>  my $headerlist = $signature-&gt;headerlist;</p><p>  my @headers = $signature-&gt;headerlist;</p><p>Signed header fields. A colon-separated list of header field names that identify the header fields presented to the signing algorithm.</p><p>In scalar context, the list of header field names will be returned as a single string, with the names joined together with colons. In list context, the header field names will be returned as a list.</p>
<h3>\fIidentity()\fP - get or set the signing identity (i=) field</h3>
<p>  my $i = $signature-&gt;identity;</p><p>Identity of the user or agent on behalf of which this message is signed. The identity has an optional local part, followed by \*(L"@\*(R", then a domain name. The domain name should be the same as or a subdomain of the domain returned by the \*(C`domain\*(C' method.</p><p>Ideally, the identity should match the identity listed in the From: header, or the Sender: header, but this is not required to have a valid signature. Whether the identity used is \*(L"authorized\*(R" to sign for the given message is not determined here.</p><p>If using an \*(L"internationalized domain name\*(R", the domain name must be converted to \s-1ASCII\s0 (following section 4.1 of \s-1RFC\s0 3490) before passing it to this method.</p><p>Identity values are encoded in the signature in quoted-printable format. Using this method will translate to/from quoted-printable as necessary. If you want the raw quoted-printable version of the identity, use $signature-&gt;get_tag(\*(L"i\*(R").</p>
<h3>\fIkey()\fP - get or set the private key object</h3>
<p>  my $key = $signature-&gt;key;</p><p>  $signature-&gt;key(Mail::DKIM::PrivateKey-&gt;load(File =&gt; "private.key"));</p><p>The private key is used for signing messages. It is not used for verifying messages.</p><p>The key object can be any object that implements the <em>sign_digest()</em> method. (Providing your own object can be useful if your actual keys are stored out-of-process.)</p>
<h3>\fImethod()\fP - get or set the canonicalization (c=) field</h3>
<p>Message canonicalization (default is \*(L"simple\*(R"). This informs the verifier of the type of canonicalization used to prepare the message for signing.</p>
<h3>\fIprotocol()\fP - get or set the query methods (q=) field</h3>
<p>A colon-separated list of query methods used to retrieve the public key (default is \*(L"dns\*(R"). Each query method is of the form \*(L"type[/options]\*(R", where the syntax and semantics of the options depends on the type.</p>
<h3>\fIresult()\fP - get or set the verification result</h3>
<p>  my $result = $signature-&gt;result;</p><p>  $signature-&gt;result("pass");</p><p>  # to set the result with details   $signature-&gt;result("invalid", "no public key");</p>
<h3>\fIresult_detail()\fP - access the result, plus details if available</h3>
<p>  my $detail = $signature-&gt;result_detail;</p><p>An explanation of possible detail messages can be found in the documentation for \*(L"<em>result_detail()</em>\*(R" in Mail::DKIM::Verifier.</p>
<h3>\fIselector()\fP - get or set the selector (s=) field</h3>
<p>The selector subdivides the namespace for the \*(L"d=\*(R" (domain) tag.   $signature-&gt;prettify;</p><p>This method may alter the signature in a way that breaks signatures, so it should be done \s-1ONLY\s0 when the signature is being generated, \s-1BEFORE\s0 being fed to the canonicalization algorithm.</p><p>See also <em>prettify_safe()</em>, which will not break signatures.</p>
<h3>\fIprettify_safe()\fP - same as \fIprettify()\fP but only touches the b= part</h3>
<p>  $signature-&gt;prettify_safe;</p><p>This method will not break the signature, but it only affects the b= part of the signature.</p>
<h3>\fItimestamp()\fP - get or set the signature timestamp (t=) field</h3>
<p>Signature timestamp (default is undef, meaning unknown creation time). This is the time that the signature was created. The value is an unsigned integer identifying the number of standard Unix seconds-since-1970.</p>
<h3>\fIversion()\fP - get or set the \s-1DKIM\s0 specification version (v=) field</h3>
<p>This is the version of the \s-1DKIM\s0 specification that applies to this signature record.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Mail::DKIM::Signature&hellip;</h2>
        <div class="sectioncontent">
<p>Mail::DKIM::DkSignature for DomainKey-Signature headers</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Jason Long, &lt;jlong@messiah.edu&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2006-2007 by Messiah College</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.8.6 or, at your option, any later version of Perl 5 you may have available.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Mail::DKIM::PrivateKey.3pm.html"><span aria-hidden="true">&larr;</span> Mail::DKIM::PrivateKey.3pm: A private key loaded in memory for dkim signing</a></li>
   <li class="next"><a href="Mail::DKIM::Signer.3pm.html">Mail::DKIM::Signer.3pm: Generates a dkim signature for a message <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
