<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>smiExit: Smi library configuration routines</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Smi library configuration routines">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="smiExit (3) manual">
  <meta name="twitter:description" content="Smi library configuration routines">
  <meta name="twitter:image" content="https://www.carta.tech/images/libsmi2-dev-smiExit-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/smiExit.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="smiExit (3) manual" />
  <meta property="og:description" content="Smi library configuration routines" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libsmi2-dev-smiExit-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">smiExit<small> (3)</small></h1>
        <p class="lead">Smi library configuration routines</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/smiExit.3.html">
      <span itemprop="name">smiExit: Smi library configuration routines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libsmi2-dev/">
      <span itemprop="name">libsmi2-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/smiExit.3.html">
      <span itemprop="name">smiExit: Smi library configuration routines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;smi.h&gt;</strong>
</pre>
<p><strong>int smiInit(const char *</strong><em>tag</em><strong>);</strong></p><p><strong>int smiExit();</strong></p><p><strong>void smiSetErrorLevel(int </strong><em>level</em><strong>);</strong></p><p><strong>int smiGetFlags();</strong></p><p><strong>void smiSetFlags(int </strong><em>userflags</em><strong>);</strong></p><p><strong>char *smiLoadModule(char *</strong><em>module</em><strong>);</strong></p><p><strong>int smiIsLoaded(char *</strong><em>module</em><strong>);</strong></p><p><strong>char *smiGetPath();</strong></p><p><strong>int smiSetPath(char *</strong><em>path</em><strong>);</strong></p><p><strong>int smiSetSeverity(char *</strong><em>pattern</em><strong>, int </strong><em>severity</em><strong>);</strong></p><p><strong>int smiReadConfig(char *</strong><em>filename</em><strong>, const char *</strong><em>tag</em><strong>);</strong></p><p><strong>void smiSetErrorHandler(SmiErrorHandler *</strong><em>smiErrorHandler</em><strong>);</strong></p><p>typedef void (SmiErrorHandler) (char *path, int line, 				int severity, char *msg, char *tag);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>These functions provide some initialization and adjustment operations for the SMI library.</p><p>The <strong>smiInit()</strong> function should be the first SMI function called in an application. It initializes its internal structures. If <em>tag</em> is not NULL, the global configuration file and (on UNIX systems) a user configuration file are read implicitly, if existent. All global statements and those statements with a tag (a ``tag: '' prefix) that matches the <strong>tag</strong> argument are executed. (see also CONFIGURATION FILES below). <strong>smiInit()</strong> returns zero on success, or otherwise a negative value.</p><p>The <strong>smiInit()</strong> function can also be used to support multiple sets of MIB data. In this case, the <strong>tag</strong> argument may be prepended by a colon and a name to differentiate the data sets. Any library function call subsequent to an <strong>smiInit("tag:dataset")</strong> call is using the specified data set.</p><p>The <strong>smiExit()</strong> function should be called when the application no longer needs any SMI information to release any allocated SMI resources.</p><p>The <strong>smiSetErrorLevel()</strong> function sets the pedantic level (0-9) of the SMI parsers of the SMI library, currently SMIv1/v2 and SMIng. The higher the level, the louder it complains. Values up to 3 should be regarded as errors, higher level could be interpreted as warnings.  But note that this classification is some kind of personal taste.  The default level is 0, since usually only MIB checkers want to tune a higher level.</p><p>The <strong>smiGetFlags()</strong> and <strong>smiSetFlags()</strong> functions allow to fetch, modify, and set some <em>userflags</em> that control the SMI library's behaviour.  If <strong>SMI_FLAG_ERRORS</strong> is not set, no error messages are printed at all to keep the SMI library totally quiet, which might be mandatory for some applications. If <strong>SMI_FLAG_STATS</strong> is set, the library prints some module statistics. If <strong>SMI_FLAG_RECURSIVE</strong> is set, the library also complains about errors in modules that are read due to import statements. If <strong>SMI_FLAG_NODESCR</strong> is set, no description and references strings are stored in memory. This may save a huge amount of memory in case of applications that do not need this information.</p><p>The <strong>smiSetSeverity()</strong> function allows to set the severity of all error that have name prefixed by <strong>pattern</strong> to the value <strong>severity</strong>.</p><p>The <strong>smiLoadModule()</strong> function specifies an additional MIB <em>module</em> that the application claims to know or an additional file path to read. Only after a module is made known through this function, iterating retrieval functions and retrieval functions without fully qualified identifiers will return results from this module. <strong>smiLoadModule()</strong> returns the name of the loaded module, of NULL if it could not be loaded.</p><p>The <strong>smiIsLoaded()</strong> function returns a positive value if the module named <em>module</em> is already loaded, or zero otherwise.</p><p>The <strong>smiGetPath()</strong> and <strong>smiSetPath()</strong> functions allow to fetch, modify, and set the path that is used to search MIB modules. <strong>smiGetPath()</strong> returns a copy of the current search path in the form "DIR1:DIR2:...", or NULL if no path is set. The application should free this string if it is no longer needed. <strong>smiSetPath()</strong> sets the search path to <em>path</em>.</p><p>The <strong>smiReadConfig()</strong> function reads the configuration file <em>filename</em>. All global statements in the configuration file and those statements with a tag (a ``tag: '' prefix) that matches the <strong>tag</strong> argument, if present, are executed.</p><p>The <strong>smiSetErrorHandler()</strong> function allows to set a callback function that is called by the MIB parsers deviating from the builtin default error handler, that prints error messages to stderr. The error handler has to comply with the <strong>SmiErrorHandler</strong> function type. The <strong>path</strong>, <strong>line</strong>, <strong>severity</strong>, <strong>msg</strong>, and <strong>tag</strong> arguements carry the module's pathname, the line number within the module, the error severity level, a textual error message, and a short error name of the error being reported.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MODULE LOCATIONS</h2>
        <div class="sectioncontent">
<p>The SMI library may retrieve MIB modules from different kinds of resources. Currently, SMIv1/v2 and SMIng module files are supported. If in an <strong>smiLoadModule()</strong> function call a module is specified by a path name (identified by containing at least one dot or slash character), this is assumed to be the exact file to read. Otherwise, if a module is identified by its plain module name, the correspondant file (either SMIv1/2 or SMIng) is searched along a path. This path is initialized with /usr/share/mibs/ietf:/usr/share/mibs/iana:/usr/share/mibs/irtf:/usr/share/mibs/site:/usr/share/mibs/tubs:/usr/share/pibs/ietf:/usr/share/pibs/site:/usr/share/pibs/tubs. Afterwards the optional global and user configuration files are parsed for `path' commands, and finally the optional <strong>SMIPATH</strong> environment variable is evaluated. The `path' command argument and the environment variable either start with a path separator character (`:' on UNIX-like systems, `;' on MS-Windows systems) to append to the path, or end with a path separator character to prepend to the path, or otherwise completely replace the path. The path can also be controlled by the <strong>smiGetPath()</strong> and <strong>smiSetPath()</strong> functions (see above).</p><p>When files are searched by a given module name, they might have no extension or one of the extensions `.my', `.smiv2', `.sming', `.mib', or `.txt'. However, the MIB module language is identified by the file's content, not by its file name extension.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILES</h2>
        <div class="sectioncontent">
<p>SMI library configuration files read at initialization and on demand by <strong>smiReadConfig()</strong> have a simple line oriented syntax. Empty lines and those starting with `#' are ignored. Other lines start with an optional tag (prepended by a colon), followed by a command and options dependent on the command. Tags are used to limit the scope of a command to those applications that are using this tag.</p><p>The <strong>load</strong> command is used to preload a given MIB module. If multiple modules shall be preloaded, multiple <strong>load</strong> commands must be used.</p><p>The <strong>path</strong> command allows to prepend or append components to the MIB module search path or to modify it completely (see also MODULE LOCATIONS above).</p><p>The <strong>cache</strong> command allows to add an additional directory for MIB module lookup as a last resort. The first argument specifies the directory and the rest of the line starting from the second argument specifies the caching method, which is invoked with the MIB module name appended if the module is found neither in one of the regular directories nor in the cache directory beforehand.</p><p>The <strong>level</strong> command sets the error level.</p><p>The <strong>hide</strong> command allows to tune the list of errors that are reported. It raises all errors with names prefixed by the given pattern to severity level 9. [Currently, there is no way to list the error names. RTFS: error.c.]</p><p>Example configuration:</p>
<pre>
  #
  # $HOME/.smirc
  #

  # add a private directory
  path :/usr/home/strauss/lib/mibs

  # don't show any errors by default
  level 0

  # preload some basic modules
  load SNMPv2-SMI
  load SNMPv2-TC
  load SNMPv2-CONF

  # want to make smilint shout
  smilint: level 8

  # but please don't claim about
  # any names longer than 32 chars
  smilint: hide namelength-32

  tcpdump: load DISMAN-SCRIPT-MIB

  smiquery: load IF-MIB
  smiquery: load DISMAN-SCRIPT-MIB
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<pre>
/etc/smi.conf    global configuration file
$HOME/.smirc               user configuration file
${prefix}/include/smi.h   SMI library header file
/usr/share/mibs/     SMI module repository directory
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO smiExit&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/libsmi.3.html"><strong>libsmi</strong>(3)</a>,  <strong>smi.h</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>(C) 1999-2001 Frank Strauss, TU Braunschweig, Germany &lt;strauss@ibr.cs.tu-bs.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slv2_world.3.html"><span aria-hidden="true">&larr;</span> slv2_world.3: The 'world' represents all library state, and the data found in bundles' manifest.ttl (ie it is an in-memory index of all things lv2 found).</a></li>
   <li class="next"><a href="smiGetAttribute.3.html">smiGetAttribute.3: Smi attribute information routines <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
