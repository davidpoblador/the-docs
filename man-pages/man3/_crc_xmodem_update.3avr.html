<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>_crc_xmodem_update: Util/crc16.h: crc computations -</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Util/crc16.h: crc computations -">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="_crc_xmodem_update (3avr) manual">
  <meta name="twitter:description" content="Util/crc16.h: crc computations -">
  <meta name="twitter:image" content="https://www.carta.tech/images/avr-libc-_crc_xmodem_update-3avr.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3avr/_crc_xmodem_update.3avr.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="_crc_xmodem_update (3avr) manual" />
  <meta property="og:description" content="Util/crc16.h: crc computations -" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/avr-libc-_crc_xmodem_update-3avr.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">_crc_xmodem_update<small> (3avr)</small></h1>
        <p class="lead">Util/crc16.h: crc computations -</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3avr/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3avr/_crc_xmodem_update.3avr.html">
      <span itemprop="name">_crc_xmodem_update: Util/crc16.h: crc computations -</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/avr-libc/">
      <span itemprop="name">avr-libc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3avr/_crc_xmodem_update.3avr.html">
      <span itemprop="name">_crc_xmodem_update: Util/crc16.h: crc computations -</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">

<pre>
#include &lt;util/crc16.h&gt;

</pre>
<p>This header file provides a optimized inline functions for calculating cyclic redundancy checks (CRC) using common polynomials.</p><p><strong>References:</strong></p><p><strong></strong></p><p>See the Dallas Semiconductor app note 27 for 8051 assembler example and general CRC optimization suggestions. The table on the last page of the app note is the key to understanding these implementations.</p><p><strong></strong></p><p>Jack Crenshaw's 'Implementing CRCs' article in the January 1992 isue of <em>Embedded</em> <em>Systems</em> <em>Programming</em>. This may be difficult to find, but it explains CRC's in very clear and concise terms. Well worth the effort to obtain a copy.</p><p>A typical application would look like:</p>
<pre>
// Dallas iButton test vector.
uint8_t serno[] = { 0x02, 0x1c, 0xb8, 0x01, 0, 0, 0, 0xa2 };

int
checkcrc(void)
{
    uint8_t crc = 0, i;

    for (i = 0; i &lt; sizeof serno / sizeof serno[0]; i++)
        crc = _crc_ibutton_update(crc, serno[i]);

    return crc; // must be 0
}
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Function Documentation</h2>
        <div class="sectioncontent">
<h3>static __inline__ \fBuint16_t\fP _crc16_update (\fBuint16_t\fP__crc, \fBuint8_t\fP__data)\fC [static]\fP</h3>
<p>Optimized CRC-16 calculation.</p><p>Polynomial: x^16 + x^15 + x^2 + 1 (0xa001)</p><p> Initial value: 0xffff</p><p>This CRC is normally used in disk-drive controllers.</p><p>The following is the equivalent functionality written in C.</p>
<pre>
uint16_t
crc16_update(uint16_t crc, uint8_t a)
{
    int i;

    crc ^= a;
    for (i = 0; i &lt; 8; ++i)
    {
        if (crc & 1)
        crc = (crc &gt;&gt; 1) ^ 0xA001;
        else
        crc = (crc &gt;&gt; 1);
    }

    return crc;
}
</pre>

<h3>static __inline__ \fBuint8_t\fP _crc8_ccitt_update (\fBuint8_t\fP__crc, \fBuint8_t\fP__data)\fC [static]\fP</h3>
<p>Optimized CRC-8-CCITT calculation.</p><p>Polynomial: x^8 + x^2 + x + 1 (0xE0)</p><p>For use with simple CRC-8</p><p> Initial value: 0x0</p><p>For use with CRC-8-ROHC</p><p> Initial value: 0xff</p><p> Reference: http://tools.ietf.org/html/rfc3095#section-5.9.1</p><p>For use with CRC-8-ATM/ITU</p><p> Initial value: 0xff</p><p> Final XOR value: 0x55</p><p> Reference: http://www.itu.int/rec/T-REC-I.432.1-199902-I/en</p><p>The C equivalent has been originally written by Dave Hylands. Assembly code is based on _crc_ibutton_update optimization.</p><p>The following is the equivalent functionality written in C.</p>
<pre>
uint8_t
_crc8_ccitt_update (uint8_t inCrc, uint8_t inData)
{
    uint8_t   i;
    uint8_t   data;

    data = inCrc ^ inData;

    for ( i = 0; i &lt; 8; i++ )
    {
        if (( data & 0x80 ) != 0 )
        {
            data &lt;&lt;= 1;
            data ^= 0x07;
        }
        else
        {
            data &lt;&lt;= 1;
        }
    }
    return data;
}
</pre>

<h3>static __inline__ \fBuint16_t\fP _crc_ccitt_update (\fBuint16_t\fP__crc, \fBuint8_t\fP__data)\fC [static]\fP</h3>
<p>Optimized CRC-CCITT calculation.</p><p>Polynomial: x^16 + x^12 + x^5 + 1 (0x8408)</p><p> Initial value: 0xffff</p><p>This is the CRC used by PPP and IrDA.</p><p>See RFC1171 (PPP protocol) and IrDA IrLAP 1.1</p><p><strong>Note:</strong></p><p>Although the CCITT polynomial is the same as that used by the Xmodem protocol, they are quite different. The difference is in how the bits are shifted through the alorgithm. Xmodem shifts the MSB of the CRC and the input first, while CCITT shifts the LSB of the CRC and the input first.</p><p>The following is the equivalent functionality written in C.</p>
<pre>
uint16_t
crc_ccitt_update (uint16_t crc, uint8_t data)
{
    data ^= lo8 (crc);
    data ^= data &lt;&lt; 4;

    return ((((uint16_t)data &lt;&lt; 8) | hi8 (crc)) ^ (uint8_t)(data &gt;&gt; 4)
            ^ ((uint16_t)data &lt;&lt; 3));
}
</pre>

<h3>static __inline__ \fBuint8_t\fP _crc_ibutton_update (\fBuint8_t\fP__crc, \fBuint8_t\fP__data)\fC [static]\fP</h3>
<p>Optimized Dallas (now Maxim) iButton 8-bit CRC calculation.</p><p>Polynomial: x^8 + x^5 + x^4 + 1 (0x8C)</p><p> Initial value: 0x0</p><p>See http://www.maxim-ic.com/appnotes.cfm/appnote_number/27</p><p>The following is the equivalent functionality written in C.</p>
<pre>
uint8_t
_crc_ibutton_update(uint8_t crc, uint8_t data)
{
    uint8_t i;

    crc = crc ^ data;
    for (i = 0; i &lt; 8; i++)
    {
        if (crc & 0x01)
            crc = (crc &gt;&gt; 1) ^ 0x8C;
        else
            crc &gt;&gt;= 1;
    }

    return crc;
}
</pre>

<h3>static __inline__ \fBuint16_t\fP _crc_xmodem_update (\fBuint16_t\fP__crc, \fBuint8_t\fP__data)\fC [static]\fP</h3>
<p>Optimized CRC-XMODEM calculation.</p><p>Polynomial: x^16 + x^12 + x^5 + 1 (0x1021)</p><p> Initial value: 0x0</p><p>This is the CRC used by the Xmodem-CRC protocol.</p><p>The following is the equivalent functionality written in C.</p>
<pre>
uint16_t
crc_xmodem_update (uint16_t crc, uint8_t data)
{
    int i;

    crc = crc ^ ((uint16_t)data &lt;&lt; 8);
    for (i=0; i&lt;8; i++)
    {
        if (crc & 0x8000)
            crc = (crc &lt;&lt; 1) ^ 0x1021;
        else
            crc &lt;&lt;= 1;
    }

    return crc;
}
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for avr-libc from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="_crc_ibutton_update.3avr.html"><span aria-hidden="true">&larr;</span> _crc_ibutton_update.3avr: Util/crc16.h: crc computations -</a></li>
   <li class="next"><a href="_delay_loop_1.3avr.html">_delay_loop_1.3avr: Util/delay_basic.h: basic busy-wait delay loops - <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
