<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>import: Import- functionality for reading images from files libafterimage/import.h</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Import- functionality for reading images from files libafterimage/import.h">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="import (3x) manual">
  <meta name="twitter:description" content="Import- functionality for reading images from files libafterimage/import.h">
  <meta name="twitter:image" content="https://www.carta.tech/images/libafterimage-dev-import-3x.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3x/import.3x.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="import (3x) manual" />
  <meta property="og:description" content="Import- functionality for reading images from files libafterimage/import.h" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libafterimage-dev-import-3x.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">import<small> (3x)</small></h1>
        <p class="lead">Import- functionality for reading images from files libafterimage/import.h</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/import.3x.html">
      <span itemprop="name">import: Import- functionality for reading images from files libafterimage/import.h</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libafterimage-dev/">
      <span itemprop="name">libafterimage-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/import.3x.html">
      <span itemprop="name">import: Import- functionality for reading images from files libafterimage/import.h</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NAMEimport</h2>
        <div class="sectioncontent">
<p>- Image file format autodetection, reading and decoding routines.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO import&hellip;</h2>
        <div class="sectioncontent">
<p>Functions :</p>
<pre>
        file2ASImage(), get_asimage(), file2pixmap()
</pre>
<p>Other libAfterImage modules :</p>
<pre>
         ascmap.h asfont.h asimage.h asvisual.h blender.h export.h
         import.h transform.h ximage.h
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Sasha Vasko &lt;sasha at aftercode dot net&gt; libAfterImage/gamma</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMESCREEN_GAMMA</h2>
        <div class="sectioncontent">
<p>- Defines default value for screen gamma correction.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>#define SCREEN_GAMMA 2.2 #define DEFAULT_PNG_IMAGE_GAMMA     0.45455</p><p>libAfterImage/ASImageFileTypes</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASImageFileTypes</h2>
        <div class="sectioncontent">
<p>- List of known image file formats.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef enum {</p>
<pre>
    ASIT_Xpm = 0,
    ASIT_ZCompressedXpm,
    ASIT_GZCompressedXpm,
    ASIT_Png,
    ASIT_Jpeg,
    ASIT_Xcf,
    ASIT_Ppm,
    ASIT_Pnm,
    ASIT_Bmp,
    ASIT_Ico,
    ASIT_Cur,
    ASIT_Gif,
    ASIT_Tiff,
    ASIT_XMLScript,
    ASIT_SVG,
    /* reserved for future implementation : */
    ASIT_Xbm,
    ASIT_Targa,
    ASIT_Supported = ASIT_Targa,
    ASIT_Pcx,
    ASIT_HTML,
    ASIT_XML,
    ASIT_Unknown
</pre>
<p>}ASImageFileTypes;</p><p>libAfterImage/ASImageListEntry</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASImageListEntry</h2>
        <div class="sectioncontent">
<p>- entry in linked list of images loaded from single directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef struct ASImageListEntryBuffer { #define ASILEB_Dirty        (0x01&lt;&lt;0) #define ASILEB_Binary       (0x01&lt;&lt;1)</p>
<pre>
    ASFlagType flags ;
</pre>

<pre>
    size_t size ;
    char  *data ;
</pre>
<p>}ASImageListEntryBuffer;</p><p>typedef struct ASImageListEntry { #define MAGIC_ASIMAGE_LIST_ENTRY            0xA3A311E4 #define IS_ASIMAGE_LIST_ENTRY(e)  (((e)!=NULL)&&((e)-&gt;magic==MAGIC_ASIMAGE_LIST_ENTRY)&&((e)-&gt;ref_count&gt;0))</p>
<pre>
    unsigned long magic ;
    struct ASImageListEntry *prev, *next ;
    char   *name ;
    char   *fullfilename ;
</pre>

<pre>
    ASImageFileTypes    type;
    ASImage            *preview;
</pre>
<p>#ifndef _WIN32</p>
<pre>
    mode_t d_mode;
</pre>
<p>#endif</p>
<pre>
    time_t d_mtime;
    off_t  d_size;      /* total size, in bytes */
</pre>

<pre>
    ASImageListEntryBuffer *buffer ;
</pre>

<pre>
    int ref_count;
</pre>
<p>}ASImageListEntry;</p><p>libAfterImage/import/file2ASImage()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEfile2ASImage()</h2>
        <div class="sectioncontent">
<p>- load ASImage from file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>ASImage *file2ASImage( const char *file, ASFlagType what,</p>
<pre>
                       double gamma,
                       unsigned int compression, ... );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    file
  </dt>
  <dd>
    <p>- file name with or without directory name</p>
  </dd>
  <dt>
    what
  </dt>
  <dd>
    <p>- reserved for future use</p>
  </dd>
  <dt>
    gamma
  </dt>
  <dd>
    <p>- gamma value to be used to correct image</p>
  </dd>
  <dt>
    compression
  </dt>
  <dd>
    <p>- compression level of the resulting ASImage</p>
  </dd>
  <dt>
    ...
  </dt>
  <dd>
    <p>- NULL terminated list of strings, representing arbitrary number of directories to be searched each.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Pointer to ASImage structure holding image data on success. NULL on failure</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>file2ASImage will attempt to interpret filename in the following way: 1)It will try to find file using unmodified filename in all the provided search paths. 2)It will attempt to append .gz and then .Z to the filename and find such file in all the provided search paths. 3)If filename ends with extension consisting of digits only - it will attempt to find file with this extension stripped off. On success this extension will be used to load subimage from the file with that number. Subimages are supported only for XCF, GIF, BMP, ICO and CUR files. After the file is found file2ASImage() attempts to detect file format, and if it is known it will load it into new ASImage structure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>asview.c: ASView.2 libAfterImage/import/get_asimage()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEget_asimage()</h2>
        <div class="sectioncontent">
<p>- increment reference counter if file is already loaded, or load image from file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>ASImage *get_asimage( ASImageManager* imageman, const char *file,</p>
<pre>
                      ASFlagType what, unsigned int compression );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    imageman
  </dt>
  <dd>
    <p>- pointer to valid ASVisual structure.</p>
  </dd>
  <dt>
    file
  </dt>
  <dd>
    <p>- root window ID for the destination screen.</p>
  </dd>
  <dt>
    what
  </dt>
  <dd>
    <p>- full image file's name with path.</p>
  </dd>
  <dt>
    compression
  </dt>
  <dd>
    <p>-</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Pointer to ASImage structure holding image data on success. NULL on failure</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>get_asimage will attempt check with the ASImageManager's list of load images, and if image with requested filename already exists - it will increment its reference count and return its pointer. Otherwise it will call file2ASImage() to load image from file. It will use PATH and gamma values from the ASImageManager to pass to file2ASImage(). If image is successfully loaded - it will be added to the ASImageManager's list and its pointer will be returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO import&hellip;</h2>
        <div class="sectioncontent">
<p>file2ASImage() libAfterImage/import/file2pixmap()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEfile2pixmap()</h2>
        <div class="sectioncontent">
<p>- convinience function to load file into X Pixmap.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Pixmap file2pixmap( struct ASVisual *asv, Window root,</p>
<pre>
                    const char *realfilename,
                    Pixmap *mask_out);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    asv
  </dt>
  <dd>
    <p>- pointer to valid ASVisual structure.</p>
  </dd>
  <dt>
    root
  </dt>
  <dd>
    <p>- root window ID for the destination screen.</p>
  </dd>
  <dt>
    realfilename
  </dt>
  <dd>
    <p>- full image file's name with path.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Pixmap ID of the X Pixmap filled with loaded image. If mask_out is not NULL it will point to image mask Pixmap ID if there is an alpha channel in image, None otherwise. On failure None will be returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>file2pixmap() will attempt to open specified file and autodetect its format. If format is known it will load it into ASImage first, and then convert it into X Pixmap. In case image has alpha channel - mask Pixmap will be produced if mask_out is not NULL.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="imencdec.3x.html"><span aria-hidden="true">&larr;</span> imencdec.3x: Imencdec- encoding/decoding asimage data from/to usable data structures libafterimage/imencdec.h</a></li>
   <li class="next"><a href="transform.3x.html">transform.3x: Transform- transformations available for asimages libafterimage/transform.h <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
