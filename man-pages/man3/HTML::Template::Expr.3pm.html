<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HTML::Template::Expr: Html::template extension adding expression support</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Html::template extension adding expression support">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="HTML::Template::Expr (3pm) manual">
  <meta name="twitter:description" content="Html::template extension adding expression support">
  <meta name="twitter:image" content="https://www.carta.tech/images/libhtml-template-expr-perl-HTML::Template::Expr-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/HTML::Template::Expr.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="HTML::Template::Expr (3pm) manual" />
  <meta property="og:description" content="Html::template extension adding expression support" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libhtml-template-expr-perl-HTML::Template::Expr-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">HTML::Template::Expr<small> (3pm)</small></h1>
        <p class="lead">Html::template extension adding expression support</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/HTML::Template::Expr.3pm.html">
      <span itemprop="name">HTML::Template::Expr: Html::template extension adding expression support</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libhtml-template-expr-perl/">
      <span itemprop="name">libhtml-template-expr-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/HTML::Template::Expr.3pm.html">
      <span itemprop="name">HTML::Template::Expr: Html::template extension adding expression support</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use HTML::Template::Expr;

  my $template = HTML::Template::Expr-&gt;new(filename =&gt; &apos;foo.tmpl&apos;);
  $template-&gt;param(banana_count =&gt; 10);
  print $template-&gt;output();
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module provides an extension to HTML::Template which allows expressions in the template syntax.  This is purely an addition - all the normal HTML::Template options, syntax and behaviors will still work.  See HTML::Template for details.</p><p>Expression support includes comparisons, math operations, string operations and a mechanism to allow you add your own functions at runtime.  The basic syntax is:</p><p>   &lt;TMPL_IF EXPR="banana_count &gt; 10"&gt;      I&apos;ve got a lot of bananas.    &lt;/TMPL_IF&gt;</p><p>This will output \*(L"I've got a lot of bananas\*(R" if you call:</p><p>   $template-&gt;param(banana_count =&gt; 100);</p><p>In your script.  &lt;\s-1TMPL_VAR\s0&gt;s also work with expressions:</p><p>   I&apos;d like to have &lt;TMPL_VAR EXPR="banana_count * 2"&gt; bananas.</p><p>This will output \*(L"I'd like to have 200 bananas.\*(R" with the same <em>param()</em> call as above.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MOTIVATION</h2>
        <div class="sectioncontent">
<p>Some of you may wonder if I've been replaced by a pod person.  Just for the record, I still think this sort of thing should be avoided. However, I realize that there are some situations where allowing the template author some programatic leeway can be invaluable.</p><p>If you don't like it, don't use this module.  Keep using plain ol' HTML::Template - I know I will!  However, if you find yourself needing a little programming in your template, for whatever reason, then this module may just save you from HTML::Mason.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BASIC SYNTAX</h2>
        <div class="sectioncontent">
<p>Variables are unquoted alphanumeric strings with the same restrictions as variable names in HTML::Template.  Their values are set through <em>param()</em>, just like normal HTML::Template variables.  For example, these two lines are equivalent:</p><p>   &lt;TMPL_VAR EXPR="foo"&gt;</p><p>   &lt;TMPL_VAR NAME="foo"&gt;</p><p>Numbers are unquoted strings of numbers and may have a single \*(L".\*(R" to indicate a floating point number.  For example:</p><p>   &lt;TMPL_VAR EXPR="10 + 20.5"&gt;</p><p>String constants must be enclosed in quotes, single or double.  For example:</p><p>   &lt;TMPL_VAR EXPR="sprintf(&apos;%d&apos;, foo)"&gt;</p><p>You can string together operators to produce complex booleans:</p><p>  &lt;TMPL_IF EXPR="(foo || bar || baz || (bif && bing) || (bananas &gt; 10))"&gt;       I&apos;m in a complex situation.   &lt;/TMPL_IF&gt;</p><p>The parser is pretty simple, so you may need to use parenthesis to get the desired precedence.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMPARISON</h2>
        <div class="sectioncontent">
<p>Here's a list of supported comparison operators:</p><ul>
<li><p>Numeric Comparisons</p><ul>
<li><p>&lt;</p></li><li><p>&gt;</p></li><li><p>==</p></li><li><p>!=</p></li><li><p>&gt;=</p></li><li><p>&lt;=</p></li><li><p>&lt;=&gt;</p></li>
</ul></li><li><p>String Comparisons</p><ul>
<li><p>gt</p></li><li><p>lt</p></li><li><p>eq</p></li><li><p>ne</p></li><li><p>ge</p></li><li><p>le</p></li><li><p>cmp</p></li>
</ul></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MATHEMATICS</h2>
        <div class="sectioncontent">
<p>The basic operators are supported:</p><ul>
<li><p>+</p></li><li><p>-</p></li><li><p>*</p></li><li><p>/</p></li><li><p>%</p></li>
</ul><p>There are also some mathy functions.  See the \s-1FUNCTIONS\s0 section below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOGIC</h2>
        <div class="sectioncontent">
<p>Boolean logic is available:</p><ul>
<li><p>&& (synonym: and)</p></li><li><p>|| (synonym: or)</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTIONS</h2>
        <div class="sectioncontent">
<p>The following functions are available to be used in expressions.  See perldoc perlfunc for details.</p><ul>
<li><p>sprintf</p></li><li><p>substr (2 and 3 arg versions only)</p></li><li><p>lc</p></li><li><p>lcfirst</p></li><li><p>uc</p></li><li><p>ucfirst</p></li><li><p>length</p></li><li><p>defined</p></li><li><p>abs</p></li><li><p>atan2</p></li><li><p>cos</p></li><li><p>exp</p></li><li><p>hex</p></li><li><p>int</p></li><li><p>log</p></li><li><p>oct</p></li><li><p>rand</p></li><li><p>sin</p></li><li><p>sqrt</p></li><li><p>srand</p></li>
</ul><p>All functions must be called using full parenthesis.  For example, this is a syntax error:</p><p>   &lt;TMPL_IF expr="defined foo"&gt;</p><p>But this is good:</p><p>   &lt;TMPL_IF expr="defined(foo)"&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEFINING NEW FUNCTIONS</h2>
        <div class="sectioncontent">
<p>To define a new function, pass a \*(C`functions\*(C' option to new:</p><p>  $t = HTML::Template::Expr-&gt;new(filename =&gt; &apos;foo.tmpl&apos;,                                  functions =&gt;                                    { func_name =&gt; &#92;&func_handler });</p><p>Or, you can use \*(C`register_function\*(C' class method to register the function globally:</p><p>  HTML::Template::Expr-&gt;register_function(func_name =&gt; &#92;&func_handler);</p><p>You provide a subroutine reference that will be called during output. It will receive as arguments the parameters specified in the template. For example, here's a function that checks if a directory exists:</p><p>  sub directory_exists {     my $dir_name = shift;     return 1 if -d $dir_name;     return 0;   }</p><p>If you call HTML::Template::Expr-&gt;<em>new()</em> with a \*(C`functions\*(C' arg:</p><p>  $t = HTML::Template::Expr-&gt;new(filename =&gt; &apos;foo.tmpl&apos;,                                  functions =&gt; {                                     directory_exists =&gt; &#92;&directory_exists                                  });</p><p>Then you can use it in your template:</p><p>  &lt;tmpl_if expr="directory_exists(&apos;/home/sam&apos;)"&gt;</p><p>This can be abused in ways that make my teeth hurt.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MOD_PERL TIP</h2>
        <div class="sectioncontent">
<p>\*(C`register_function\*(C' class method can be called in mod_perl's startup.pl to define widely used common functions to HTML::Template::Expr. Add something like this to your startup.pl:</p><p>  use HTML::Template::Expr;</p><p>  HTML::Template::Expr-&gt;register_function(foozicate =&gt; sub { ... });   HTML::Template::Expr-&gt;register_function(barify    =&gt; sub { ... });   HTML::Template::Expr-&gt;register_function(baznate   =&gt; sub { ... });</p><p>You might also want to pre-compile some commonly used templates and cache them.  See HTML::Template's \s-1FAQ\s0 for instructions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>Currently the module forces the HTML::Template global_vars option to be set.  This will hopefully go away in a future version, so if you need global_vars in your templates then you should set it explicitly.</p><p>The module won't work with HTML::Template's file_cache or shared_cache modes, but normal memory caching should work.  I hope to address this is a future version.</p><p>The module is inefficient, both in parsing and evaluation.  I'll be working on this for future versions and patches are always welcome.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>I am aware of no bugs - if you find one, join the mailing list and tell us about it.  You can join the HTML::Template mailing-list by visiting:</p><p>  http://lists.sourceforge.net/lists/listinfo/html-template-users</p><p>Of course, you can still email me directly (sam@tregar.com) with bugs, but I reserve the right to forward bug reports to the mailing list.</p><p>When submitting bug reports, be sure to include full details, including the \s-1VERSION\s0 of the module, a test script and a test template demonstrating the problem!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREDITS</h2>
        <div class="sectioncontent">
<p>The following people have generously submitted bug reports, patches and ideas:</p><p>   Peter Leonard    Tatsuhiko Miyagawa    Don Brodale</p><p>Thanks!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Sam Tregar &lt;sam@tregar.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>HTML::Template::Expr : HTML::Template extension adding expression support</p><p>Copyright (C) 2001 Sam Tregar (sam@tregar.com)</p><p>This module is free software; you can redistribute it and/or modify it under the terms of either:</p><p>a) the \s-1GNU\s0 General Public License as published by the Free Software Foundation; either version 1, or (at your option) any later version, or</p><p>b) the \*(L"Artistic License\*(R" which comes with this module.</p><p>This program is distributed in the hope that it will be useful, but \s-1WITHOUT\s0 \s-1ANY\s0 \s-1WARRANTY\s0; without even the implied warranty of \s-1MERCHANTABILITY\s0 or \s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0 \s-1PURPOSE\s0.  See either the \s-1GNU\s0 General Public License or the Artistic License for more details.</p><p>You should have received a copy of the Artistic License with this module, in the file \s-1ARTISTIC\s0.  If not, I'll be glad to provide one.</p><p>You should have received a copy of the \s-1GNU\s0 General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, \s-1MA\s0 02111-1307 \s-1USA\s0</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="HTML::Template::Compiled::Utils.3pm.html"><span aria-hidden="true">&larr;</span> HTML::Template::Compiled::Utils.3pm: Utility functions for html::template::compiled</a></li>
   <li class="next"><a href="HTML::Template::Pluggable.3pm.html">HTML::Template::Pluggable.3pm: Extends html::template with plugin support <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
