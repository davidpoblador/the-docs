<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>duplocale: Duplicate a locale object</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Duplicate a locale object">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="duplocale (3) manual">
  <meta name="twitter:description" content="Duplicate a locale object">
  <meta name="twitter:image" content="https://www.carta.tech/images/manpages-dev-duplocale-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/duplocale.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="duplocale (3) manual" />
  <meta property="og:description" content="Duplicate a locale object" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/manpages-dev-duplocale-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">duplocale<small> (3)</small></h1>
        <p class="lead">Duplicate a locale object</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/duplocale.3.html">
      <span itemprop="name">duplocale: Duplicate a locale object</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/manpages-dev/">
      <span itemprop="name">manpages-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/duplocale.3.html">
      <span itemprop="name">duplocale: Duplicate a locale object</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;locale.h&gt;</strong>

<strong>locale_t duplocale(locale_t </strong><em>locobj</em><strong>);</strong>
</pre>
<p>Feature Test Macro Requirements for glibc (see <a href="../man7/feature_test_macros.7.html"><strong>feature_test_macros</strong>(7)</a>):</p><p><strong>duplocale</strong>():</p>
<dl class='dl-vertical'>
  <dt>
    <p>Since glibc 2.10:</p>
  </dt>
  <dd>
    <p>_XOPEN_SOURCE&nbsp;&gt;=&nbsp;700</p>
  </dd>
  <dt>
    <p>Before glibc 2.10:</p>
  </dt>
  <dd>
    <p>_GNU_SOURCE</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>duplocale</strong>() function creates a duplicate of the locale object referred to by <em>locobj</em>.</p><p>If <em>locobj</em> is <strong>LC_GLOBAL_LOCALE</strong>, <strong>duplocale</strong>() creates a locale object containing a copy of the global locale determined by <a href="../man3/setlocale.3.html"><strong>setlocale</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>On success, <strong>duplocale</strong>() returns a handle for the new locale object. On error, it returns <em>(locale_t)&nbsp;0</em>, and sets <em>errno</em> to indicate the cause of the error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>ENOMEM</strong></p>
  </dt>
  <dd>
    <p>Insufficient memory to create the duplicate locale object.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSIONS</h2>
        <div class="sectioncontent">
<p>The <strong>duplocale</strong>() function first appeared in version 2.3 of the GNU C library.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">
<p>POSIX.1-2008.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Duplicating a locale can serve the following purposes:</p>
<dl class='dl-vertical'>
  <dt>
    *
  </dt>
  <dd>
    <p>To create a copy of a locale object in which one of more categories are to be modified (using <a href="../man3/newlocale.3.html"><strong>newlocale</strong>(3)</a>).</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p>To obtain a handle for the current locale which can used in other functions that employ a locale handle, such as <a href="../man3/toupper_l.3.html"><strong>toupper_l</strong>(3)</a>. This is done by applying <strong>duplocale</strong>() to the value returned by the following call:</p>
<pre>
    loc = uselocale((locale_t) 0);
</pre>

  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>This technique is necessary, because the above <a href="../man3/uselocale.3.html"><strong>uselocale</strong>(3)</a> call may return the value <strong>LC_GLOBAL_LOCALE</strong>, which results in undefined behavior if passed to functions such as <a href="../man3/toupper_l.3.html"><strong>toupper_l</strong>(3)</a>. Calling <strong>duplocale</strong>() can be used to ensure that the <strong>LC_GLOBAL_LOCALE</strong> value is converted into a usable locale object. See EXAMPLE, below.</p>
  </dd>

</dl>
<p>Each locale object created by <strong>duplocale</strong>() should be deallocated using <a href="../man3/freelocale.3.html"><strong>freelocale</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The program below uses <a href="../man3/uselocale.3.html"><strong>uselocale</strong>(3)</a> and <strong>duplocale</strong>() to obtain a handle for the current locale which is then passed to <a href="../man3/toupper_l.3.html"><strong>toupper_l</strong>(3)</a>. The program takes one command-line argument, a string of characters that is converted to uppercase and displayed on standard output. An example of its use is the following:</p>
<pre>
$ <strong>./a.out abc</strong>
ABC
</pre>
<h3>Program source</h3>

<pre>
#define _XOPEN_SOURCE 700
#include &lt;ctype.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;locale.h&gt;

#define errExit(msg)    do { perror(msg); exit(EXIT_FAILURE); &#92;
                        } while (0)

int
main(int argc, char *argv[])
{
    locale_t loc, nloc;
    char *p;

    if (argc != 2) {
        fprintf(stderr, "Usage: %s string&#92;n", argv[0]);
        exit(EXIT_FAILURE);
    }

    /* This sequence is necessary, because uselocale() might return
       the value LC_GLOBAL_LOCALE, which can&apos;t be passed as an
       argument to toupper_l() */

    loc = uselocale((locale_t) 0);
    if (loc == (locale_t) 0)
        errExit("uselocale");

    nloc = duplocale(loc);
    if (nloc == (locale_t) 0)
        errExit("duplocale");

    for (p = argv[1]; *p; p++)
        putchar(toupper_l(*p, nloc));

    printf("&#92;n");

    freelocale(nloc);

    exit(EXIT_SUCCESS);
}
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO duplocale&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/freelocale.3.html"><strong>freelocale</strong>(3)</a>, <a href="../man3/newlocale.3.html"><strong>newlocale</strong>(3)</a>, <a href="../man3/setlocale.3.html"><strong>setlocale</strong>(3)</a>, <a href="../man3/uselocale.3.html"><strong>uselocale</strong>(3)</a>, <a href="../man5/locale.5.html"><strong>locale</strong>(5)</a>, <a href="../man7/locale.7.html"><strong>locale</strong>(7)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COLOPHON</h2>
        <div class="sectioncontent">
<p>This page is part of release 3.74 of the Linux <em>man-pages</em> project. A description of the project, information about reporting bugs, and the latest version of this page, can be found at http://www.kernel.org/doc/man-pages/.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dumpCDKSwindow.3.html"><span aria-hidden="true">&larr;</span> dumpCDKSwindow.3: A curses scrolling window widget.</a></li>
   <li class="next"><a href="dynload_overview.3.html">dynload_overview.3: Dynamic loading of extension nodes when coin tries to get hold of a node type object (sotype) for a class based on the name string of the node type, it will - if no such node type has been initialized yet - scan the file system for a dynamically loadable extension node with that given name. this can be completely disabled by setting the environment variable coin_no_sotype_dynload to a positive integer value, new from coin v2.5.0.  on unix, extensions nodes are regular .so files. on win32, extension nodes are built as dlls. on mac os x systems, extension nodes are built as .dylib files. (note: the extension nodes have to be built using the flag '-dynamiclib', not '-bundle'.)  whether the dynamically loadable objects should be named with or without the 'lib' prefix is optional. both schemes will work.  people don't usually program in a way so that they instantiate new nodes through the node class' sotype object, but that is the way nodes are created when model files are loaded. this means that for all coin applications that load model files, the custom extension nodes will automatically be supported for the model files without you having to modify their source code and rebuild the applications.  see ftp://ftp.coin3d.org/pub/coin/src/dynloadsample.tar.gz for an example using two dynamically loadable extension nodes. you only use an examiner viewer to view the two extension nodes in action.  only a limited set of c++ compilers are supported as of yet. this is because, to initialize the extension node, it is necessary to know something about how the c++ compiler mangles the initclass symbol. if we don't know that, there is no way to locate the initclass method in the library, which means the extension node can not make itself known to the type system.  if your c++ compiler is not supported, the source file to add support for a new compiler in is src/misc/cppmangle.icc. it is fairly trivial to add support for new compilers, but if you don't understand how, just ask us about it. patches with support for new compilers are of course very welcome.  see also: sotype  since: coin 2.0 <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
