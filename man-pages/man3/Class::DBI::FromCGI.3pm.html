<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Class::DBI::FromCGI: Update class::dbi data using cgi::untaint</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Update class::dbi data using cgi::untaint">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Class::DBI::FromCGI (3pm) manual">
  <meta name="twitter:description" content="Update class::dbi data using cgi::untaint">
  <meta name="twitter:image" content="https://www.carta.tech/images/libclass-dbi-fromcgi-perl-Class::DBI::FromCGI-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Class::DBI::FromCGI.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Class::DBI::FromCGI (3pm) manual" />
  <meta property="og:description" content="Update class::dbi data using cgi::untaint" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libclass-dbi-fromcgi-perl-Class::DBI::FromCGI-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Class::DBI::FromCGI<small> (3pm)</small></h1>
        <p class="lead">Update class::dbi data using cgi::untaint</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Class::DBI::FromCGI.3pm.html">
      <span itemprop="name">Class::DBI::FromCGI: Update class::dbi data using cgi::untaint</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libclass-dbi-fromcgi-perl/">
      <span itemprop="name">libclass-dbi-fromcgi-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Class::DBI::FromCGI.3pm.html">
      <span itemprop="name">Class::DBI::FromCGI: Update class::dbi data using cgi::untaint</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  package Film;
  use Class::DBI::FromCGI;
  use base &apos;Class::DBI&apos;;
  # set up as any other Class::DBI class.

  _\|_PACKAGE_\|_-&gt;untaint_columns(
    printable =&gt; [qw/Title Director/],
    integer   =&gt; [qw/DomesticGross NumExplodingSheep/],
    date      =&gt; [qw/OpeningDate/],
  );

  # Later on, over in another package ...

  my $h = CGI::Untaint-&gt;new( ... );
  my $film = Film-&gt;retrieve(&apos;Godfather II&apos;);
     $film-&gt;update_from_cgi($h);

  my $new_film = Film-&gt;create_from_cgi($h);

  if (my %errors = $film-&gt;cgi_update_errors) {
    while (my ($field, $problem) = each %errors) {
      warn "Problem with $field: $problem&#92;n";
    }
  }

  # or
  $film-&gt;update_from_cgi($h =&gt; @columns_to_update);

  # or
  $film-&gt;update_from_cgi($h =&gt; { ignore =&gt; &#92;@cols_to_ignore,
                                 required =&gt; &#92;@cols_needed,
                                 all =&gt; &#92;@columns_which_may_be_empty });


  my $how = $film-&gt;untaint_type(&apos;Title&apos;); # printable
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Lots of times, Class::DBI is used in web-based applications. (In fact, coupled with a templating system that allows you to pass objects, such as Template::Toolkit, Class::DBI is very much your friend for these.)</p><p>And, as we all know, one of the most irritating things about writing web-based applications is the monotony of writing much of the same stuff over and over again. And, where there's monotony there's a tendency to skip over stuff that we all know is really important, but is a pain to write - like Taint Checking and sensible input validation. (Especially as we can still show a 'working' application without it!). So, we now have CGI::Untaint to take care of a lot of that for us.</p><p>It so happens that CGI::Untaint also plays well with Class::DBI. Class::DBI::FromCGI is a little wrapper that ties these two together.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<h3>untaint_columns</h3>
<p>All you need to do is to 'use Class::DBI::FromCGI' in your class (or in your local Class::DBI subclass that all your other classes inherit from. You do do that, don't you?).</p><p>Then, in each class in which you want to use this, you declare how you want to untaint each column:</p><p>  _\|_PACKAGE_\|_-&gt;untaint_columns(     printable =&gt; [qw/Title Director/],     integer   =&gt; [qw/DomesticGross NumExplodingSheep/],     date      =&gt; [qw/OpeningDate/],   );</p><p>(where the keys are the CGI::Untaint package to be used, and the values a listref of the relevant columns).</p>
<h3>update_from_cgi</h3>
<p>When you want to update based on the values coming in from a web-based form, you just call:</p><p>  $obj-&gt;update_from_cgi($h =&gt; @columns_to_update);</p><p>If every value passed in gets through the CGI::Untaint process, the object will be updated (but not committed, in case you want to do anything else with it). Otherwise the update will fail (there are no partial updates), and $obj-&gt;cgi_update_errors will tell you what went wrong (as a hash of problem field =&gt; error from CGI::Untaint).</p>
<h3>create_from_cgi</h3>
<p>Similarly, if you wish to create a new object, then you can call:</p><p>  my $obj = Class-&gt;create_from_cgi($h =&gt; @columns_to_update);</p><p>If this fails, $obj will be a defined object, containing the errors, as with an update, but will not contain the values submitted, nor have been written to the database.</p>
<h3>untaint_type</h3>
<p>  my $how = $film-&gt;untaint_type(&apos;Title&apos;); # printable</p><p>This tells you how we're going to untaint a given column.</p>
<h3>cgi_update_errors</h3>
<p>  if (my %errors = $film-&gt;cgi_update_errors) {     while (my ($field, $problem) = each %errors) {       warn "Problem with $field: $problem&#92;n";     }   }</p><p>This returns a hash of any errors when updating. Despite its name it also applies when inserting.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Column Auto-Detection</h2>
        <div class="sectioncontent">
<p>As Class::DBI knows all its columns, you don't even have to say what columns you're interested in, unless it's a subset, as we can auto-fill these:</p><p>  $obj-&gt;update_from_cgi($h);</p><p>You can also specify columns which must be present, or columns to be ignored even if they are present:</p><p>  $film-&gt;update_from_cgi($h =&gt; {     all      =&gt; &#92;@all_columns, # auto-filled if left blank     ignore   =&gt; &#92;@cols_to_ignore,     required =&gt; &#92;@cols_needed,   });</p><p>Doesn't this all make your life so much easier?</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTE</h2>
        <div class="sectioncontent">
<p>Don't try to update the value of your primary key. Class::DBI doesn't like that. If you try to do this it will be silently skipped.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ANOTHER NOTE</h2>
        <div class="sectioncontent">
<p>If you haven't set up any 'untaint_column' information for a column which you later attempt to untaint, then we try to call $self-&gt;column_type to ascertain the default handler to use. Currently this will only use if you're using Class::DBI::mysql, and only for certain column types.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Class::DBI::FromCGI&hellip;</h2>
        <div class="sectioncontent">
<p>Class::DBI. CGI::Untaint. Template.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Tony Bowden</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS and QUERIES</h2>
        <div class="sectioncontent">
<p>Please direct all correspondence regarding this module to:</p>
<pre>
  bug-Class-DBI-FromCGI@rt.cpan.org
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2001-2005 Kasei. All rights reserved.</p><p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Class::DBI::ColumnGrouper.3pm.html"><span aria-hidden="true">&larr;</span> Class::DBI::ColumnGrouper.3pm: Columns and column groups</a></li>
   <li class="next"><a href="Class::DBI::FromForm.3pm.html">Class::DBI::FromForm.3pm: Update class::dbi data using data::formvalidator or html widget <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
