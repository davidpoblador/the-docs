<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XkbGetControlsChanges: Updates a local copy of a keyboard description with the changes previously noted by one or more calls to xkbnotecontrolschanges</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Updates a local copy of a keyboard description with the changes previously noted by one or more calls to xkbnotecontrolschanges">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="XkbGetControlsChanges (3) manual">
  <meta name="twitter:description" content="Updates a local copy of a keyboard description with the changes previously noted by one or more calls to xkbnotecontrolschanges">
  <meta name="twitter:image" content="https://www.carta.tech/images/libx11-doc-XkbGetControlsChanges-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/XkbGetControlsChanges.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="XkbGetControlsChanges (3) manual" />
  <meta property="og:description" content="Updates a local copy of a keyboard description with the changes previously noted by one or more calls to xkbnotecontrolschanges" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libx11-doc-XkbGetControlsChanges-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">XkbGetControlsChanges<small> (3)</small></h1>
        <p class="lead">Updates a local copy of a keyboard description with the changes previously noted by one or more calls to xkbnotecontrolschanges</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/XkbGetControlsChanges.3.html">
      <span itemprop="name">XkbGetControlsChanges: Updates a local copy of a keyboard description with the changes previously noted by one or more calls to xkbnotecontrolschanges</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libx11-doc/">
      <span itemprop="name">libx11-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/XkbGetControlsChanges.3.html">
      <span itemprop="name">XkbGetControlsChanges: Updates a local copy of a keyboard description with the changes previously noted by one or more calls to xkbnotecontrolschanges</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>XkbGetControlsChanges <strong>(\^Display *</strong><em>dpy</em><strong>\^,</strong> <strong>XkbDescPtr </strong><em>xkb</em><strong>\^,</strong> <strong>XkbNameChangesPtr </strong><em>changes</em><strong>\^);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>- dpy</em></p>
  </dt>
  <dd>
    <p>connection to X server</p>
  </dd>
  <dt>
    <p><em>- xkb</em></p>
  </dt>
  <dd>
    <p>xkb-&gt;ctrls will be updated</p>
  </dd>
  <dt>
    <p><em>- changes</em></p>
  </dt>
  <dd>
    <p>indicates which parts of xkb-&gt;ctrls to update</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Whenever a field in the controls structure changes in the server's keyboard description, the server sends an XkbControlsNotify event to all interested clients.To receive XkbControlsNotify events under all possible conditions, use <em>XkbSelectEvents</em> and pass XkbControlsNotifyMask in both <em>bits_to_change</em> and <em>values_for_bits.</em></p><p>To receive XkbControlsNotify events only under certain conditions, use <em>XkbSelectEventDetails</em> using XkbControlsNotify as the <em>event_type</em> and specifying the desired state changes in <em>bits_to_change</em> and <em>values_for_bits</em> using mask bits from Table 1.</p><p>Table 1 shows the actual values for the individual mask bits used to select controls for modification and to enable and disable the control. Note that the same mask bit is used to specify general modifications to the parameters used to configure the control (which), and to enable and disable the control (enabled_ctrls). The anomalies in the table (no "ok" in column) are for controls that have no configurable attributes; and for controls that are not boolean controls and therefore cannot be enabled or disabled.</p><table class="table table-striped">
<tr>
<th>Table 1 Controls Mask Bits</th>
<th></th>
<th></th>
<th></th></tr>

<tr>
<td>Mask Bit</td>
<td>which or</td>
<td>enabled</td>
<td>Value</td></tr>

<tr>
<td></td>
<td>changed_ctrls</td>
<td>_ctrls</td>
<td></td></tr>

<tr>
<td>XkbRepeatKeysMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;0)</td></tr>

<tr>
<td>XkbSlowKeysMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;1)</td></tr>

<tr>
<td>XkbBounceKeysMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;2)</td></tr>

<tr>
<td>XkbStickyKeysMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;3)</td></tr>

<tr>
<td>XkbMouseKeysMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;4)</td></tr>

<tr>
<td>XkbMouseKeysAccelMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;5)</td></tr>

<tr>
<td>XkbAccessXKeysMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;6)</td></tr>

<tr>
<td>XkbAccessXTimeoutMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;7)</td></tr>

<tr>
<td>XkbAccessXFeedbackMask</td>
<td>ok</td>
<td>ok</td>
<td>(1L&lt;&lt;8)</td></tr>

<tr>
<td>XkbAudibleBellMask</td>
<td></td>
<td>ok</td>
<td>(1L&lt;&lt;9)</td></tr>

<tr>
<td>XkbOverlay1Mask</td>
<td></td>
<td>ok</td>
<td>(1L&lt;&lt;10)</td></tr>

<tr>
<td>XkbOverlay2Mask</td>
<td></td>
<td>ok</td>
<td>(1L&lt;&lt;11)</td></tr>

<tr>
<td>XkbIgnoreGroupLockMask</td>
<td></td>
<td>ok</td>
<td>(1L&lt;&lt;12)</td></tr>

<tr>
<td>XkbGroupsWrapMask</td>
<td>ok</td>
<td></td>
<td>(1L&lt;&lt;27)</td></tr>

<tr>
<td>XkbInternalModsMask</td>
<td>ok</td>
<td></td>
<td>(1L&lt;&lt;28)</td></tr>

<tr>
<td>XkbIgnoreLockModsMask</td>
<td>ok</td>
<td></td>
<td>(1L&lt;&lt;29)</td></tr>

<tr>
<td>XkbPerKeyRepeatMask</td>
<td>ok</td>
<td></td>
<td>(1L&lt;&lt;30)</td></tr>

<tr>
<td>XkbControlsEnabledMask</td>
<td>ok</td>
<td></td>
<td>(1L&lt;&lt;31)</td></tr>

<tr>
<td>XkbAccessXOptionsMask</td>
<td>ok</td>
<td>ok</td>
<td>(XkbStickyKeysMask |</td></tr>

<tr>
<td>XkbAccessXFeedbackMask)</td>
<td></td>
<td></td>
<td></td></tr>

<tr>
<td>XkbAllBooleanCtrlsMask</td>
<td></td>
<td>ok</td>
<td>(0x00001FFF)</td></tr>

<tr>
<td>XkbAllControlsMask</td>
<td>ok</td>
<td></td>
<td>(0xF8001FFF)</td></tr>
</table><p>The <em>changed_ctrls</em> field specifies the controls components that have changed and consists of bits taken from the masks defined in Table 10.7 with "ok" in the <em>changed_ctrls</em> column.</p><p>The controls currently enabled in the server are reported in the <em>enabled_ctrls</em> field. If any controls were just enabled or disabled (that is, the contents of the <em>enabled_ctrls</em> field changed), they are flagged in the <em>enabled_ctrl_changes</em> field. The valid bits for these fields are the masks listed in Table 10.7 with "ok" in the <em>enabled_ctrls</em> column. The <em>num_groups</em> field reports the number of groups bound to the key belonging to the most number of groups and is automatically updated when the keyboard mapping changes.</p><p>If the change was caused by a request from a client, the <em>keycode</em> and <em>event_type</em> fields are set to zero and the <em>req_major</em> and <em>req_minor</em> fields identify the request. The <em>req_major value is the same as the major extension opcode. Otherwise,</em> <em>event_type</em> is set to the type of event that caused the change (one of KeyPress, KeyRelease, DeviceKeyPress, DeviceKeyRelease, ButtonPress or ButtonRelease), and <em>req_major</em> and <em>req_minor</em> are undefined. If <em>event_type</em> is KeyPress, KeyRelease, DeviceKeyPress, or DeviceKeyRelease, the <em>keycode</em> field is set to the key that caused the change. If <em>event_type</em> is ButtonPress or ButtonRelease, <em>keycode</em> contains the button number.</p><p>When a client receives an XkbControlsNotify event, it can note the changes in a changes structure using <em>XkbNoteControlsChanges.</em></p><p><em>XkbGetControlsChanges</em> examines the <em>changes</em> parameter, queries the server for the necessary information, and copies the results into the <em>xkb-&gt;ctrls</em> keyboard description. If the <em>ctrls</em> field of <em>xkb</em> is NULL, <em>XkbGetControlsChanges</em> allocates and initializes it. To free the <em>ctrls</em> field, use XkbFreeControls.</p><p><em>XkbGetControlsChanges</em> returns Success if successful and can generate BadAlloc, BadImplementation, and BadMatch errors.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>Success</p>
  </dt>
  <dd>
    <p>The <em>XkbGetControlsChanges</em> function returns Success if the query of the server was successful.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STRUCTURES</h2>
        <div class="sectioncontent">

<pre>
The structure for the XkbControlsNotify event is defined as follows:

typedef struct {
    int           type;          /\(** Xkb extension base event code */
    unsigned long serial;        /\(** X server serial number for event */
    Bool          send_event;    /\(** True =&gt; synthetically generated */
    Display *     display;       /\(** server connection where event generated */
    Time          time;          /\(** server time when event generated */
    int           xkb_type;      /\(** XkbCompatMapNotify */
    int           device;        /\(** Xkb device ID, will not be XkbUseCoreKbd */
    unsigned int  changed_ctrls; /\(** bits indicating which controls data have
changed*/
    unsigned int  enabled_ctrls; /\(** controls currently enabled in server */
    unsigned int  enabled_ctrl_changes; /\(** bits indicating enabled/disabled
controls */
    int           num_groups;    /\(** current number of keyboard groups */
    KeyCode       keycode;       /\(** != 0 =&gt; keycode of key causing change */
    char          event_type;    /\(** Type of event causing change */
    char          req_major;     /\(** major event code of event causing change */
    char          req_minor;     /\(** minor event code of event causing change */
} XkbControlsNotifyEvent;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>BadAlloc</strong></p>
  </dt>
  <dd>
    <p>Unable to allocate storage</p>
  </dd>
  <dt>
    <p><strong>BadImplementation</strong></p>
  </dt>
  <dd>
    <p>Invalid reply from server</p>
  </dd>
  <dt>
    <p><strong>BadMatch</strong></p>
  </dt>
  <dd>
    <p>A compatible version of Xkb was not available in the server or an argument has correct type and range, but is otherwise invalid</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO XkbGetControlsChanges&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/XkbFreeControls.3.html"><strong>XkbFreeControls</strong>(3)</a>, <a href="../man3/XkbNoteControlsChanges.3.html"><strong>XkbNoteControlsChanges</strong>(3)</a>, <a href="../man3/XkbSelectEventDetails.3.html"><strong>XkbSelectEventDetails</strong>(3)</a>, <a href="../man3/XkbSelectEvents.3.html"><strong>XkbSelectEvents</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XkbGetControls.3.html"><span aria-hidden="true">&larr;</span> XkbGetControls.3: Finds the current state of xkb server controls</a></li>
   <li class="next"><a href="XkbGetDetectableAutoRepeat.3.html">XkbGetDetectableAutoRepeat.3: Determines whether or not the server supports detectableautorepeat <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
