<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MPI_Pack_external.openmpi: Writes data to a portable format</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Writes data to a portable format">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="MPI_Pack_external.openmpi (3) manual">
  <meta name="twitter:description" content="Writes data to a portable format">
  <meta name="twitter:image" content="https://www.carta.tech/images/openmpi-doc-MPI_Pack_external.openmpi-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/MPI_Pack_external.openmpi.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MPI_Pack_external.openmpi (3) manual" />
  <meta property="og:description" content="Writes data to a portable format" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/openmpi-doc-MPI_Pack_external.openmpi-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">MPI_Pack_external.openmpi<small> (3)</small></h1>
        <p class="lead">Writes data to a portable format</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/MPI_Pack_external.openmpi.3.html">
      <span itemprop="name">MPI_Pack_external.openmpi: Writes data to a portable format</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/openmpi-doc/">
      <span itemprop="name">openmpi-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/MPI_Pack_external.openmpi.3.html">
      <span itemprop="name">MPI_Pack_external.openmpi: Writes data to a portable format</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C Syntax</h2>
        <div class="sectioncontent">

<pre>
#include &lt;mpi.h&gt;
int MPI_Pack_external(char *<em>datarep</em>, void *<em>inbuf</em>,
	int <em>incount</em>, MPI_Datatype<em> datatype</em>,
	void *<em>outbuf</em>, MPI_Aint <em>outsize</em>,
	MPI_Aint *<em>position</em>)

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Fortran Syntax</h2>
        <div class="sectioncontent">

<pre>
INCLUDE 'mpif.h'
MPI_PACK_EXTERNAL(<em>DATAREP, INBUF, INCOUNT, DATATYPE,</em>
	OUTBUF, OUTSIZE, POSITION, IERROR)

	INTEGER		<em>INCOUNT, DATATYPE, IERROR</em>
	INTEGER (KIND=MPI_ADDRESS_KIND) <em>OUTSIZE, POSITION</em>
	CHARACTER*(*)	<em>DATAREP</em>
	&lt;type&gt;		<em>INBUF(*), OUTBUF(*)</em>

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C++ Syntax</h2>
        <div class="sectioncontent">

<pre>
#include &lt;mpi.h&gt;
void MPI::Datatype::Pack_external(const char* <em>datarep</em>,
	const void* <em>inbuf</em>, int <em>incount</em>,
	void* <em>outbuf</em>, MPI::Aint <em>outsize</em>,
	MPI::Aint& <em>position</em>) const

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>datarep</p>
  </dt>
  <dd>
    <p>Data representation (string).</p>
  </dd>
  <dt>
    <p>inbuf</p>
  </dt>
  <dd>
    <p>Input buffer start (choice).</p>
  </dd>
  <dt>
    <p>incount</p>
  </dt>
  <dd>
    <p>Number of input data items (integer).</p>
  </dd>
  <dt>
    <p>datatype</p>
  </dt>
  <dd>
    <p>Datatype of each input data item (handle).</p>
  </dd>
  <dt>
    <p>outsize</p>
  </dt>
  <dd>
    <p>Output buffer size, in bytes (integer).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT/OUTPUT PARAMETER</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>position</p>
  </dt>
  <dd>
    <p>Current position in buffer, in bytes (integer).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OUTPUT PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>outbuf</p>
  </dt>
  <dd>
    <p>Output buffer start (choice).</p>
  </dd>
  <dt>
    <p>IERROR</p>
  </dt>
  <dd>
    <p>Fortran only: Error status (integer).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>MPI_Pack_external packs data into the external32 format, a universal data representation defined by the MPI Forum. This format is useful for exchanging data between MPI implementations, or when writing data to a file.</p><p>The input buffer is specified by <em>inbuf</em>, <em>incount</em> and <em>datatype</em>, and may be any communication buffer allowed in MPI_Send. The output buffer <em>outbuf</em> must be a contiguous storage area containing <em>outsize</em> bytes.</p><p>The input value of <em>position</em> is the first position in <em>outbuf</em> to be used for packing (measured in bytes, not elements, relative to the start of the buffer). When the function returns, <em>position</em> is incremented by the size of the packed message, so that it points to the first location in <em>outbuf</em> following the packed message. This way it may be used as input to a subsequent call to MPI_Pack_external.</p><p><strong>Example:</strong> An example using MPI_Pack_external:</p>
<pre>
	int position, i;
	double msg[5];
	char buf[1000];

	...

	MPI_Comm_rank(MPI_COMM_WORLD, &myrank);
	if (myrank == 0) {	/* SENDER CODE */
		position = 0;
		i = 5; /* number of doubles in msg[] */
		MPI_Pack_external("external32", &i, 1, MPI_INT,
		    buf, 1000, &position);
		MPI_Pack_external("external32", &msg, i, MPI_DOUBLE,
		    buf, 1000, &position);
		MPI_Send(buf, position, MPI_PACKED, 1, 0,
		    MPI_COMM_WORLD);
	} else {		/* RECEIVER CODE */
		MPI_Recv(buf, 1, MPI_PACKED, 0, 0, MPI_COMM_WORLD,
		    MPI_STATUS_IGNORE);
		MPI_Unpack_external("external32", buf, 1000,
		    MPI_INT, &i, 1, &position);
		MPI_Unpack_external("external32", buf, 1000,
		    MPI_DOUBLE, &msg, i, &position);
	}

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The <em>datarep</em> argument specifies the data format. The only valid value in the current version of MPI is "external32". The argument is provided for future extensibility.</p><p>To understand the behavior of pack and unpack, it is convenient to think of the data part of a message as being the sequence obtained by concatenating the successive values sent in that message. The pack operation stores this sequence in the buffer space, as if sending the message to that buffer. The unpack operation retrieves this sequence from buffer space, as if receiving a message from that buffer. (It is helpful to think of internal Fortran files or sscanf in C for a similar function.)</p><p>Several messages can be successively packed into one packing unit. This is effected by several successive related calls to MPI_Pack_external, where the first call provides <em>position</em>=0, and each successive call inputs the value of <em>position</em> that was output by the previous call, along with the same values for <em>outbuf</em> and <em>outcount</em>. This packing unit now contains the equivalent information that would have been stored in a message by one send call with a send buffer that is the "concatenation" of the individual send buffers.</p><p>A packing unit can be sent using type MPI_PACKED. Any point-to-point or collective communication function can be used to move the sequence of bytes that forms the packing unit from one process to another. This packing unit can now be received using any receive operation, with any datatype. (The type-matching rules are relaxed for messages sent with type MPI_PACKED.)</p><p>A packing unit can be unpacked into several successive messages. This is effected by several successive related calls to MPI_Unpack_external, where the first call provides <em>position</em>=0, and each successive call inputs the value of position that was output by the previous call, and the same values for <em>inbuf</em> and <em>insize</em>.</p><p>The concatenation of two packing units is not necessarily a packing unit; nor is a substring of a packing unit necessarily a packing unit. Thus, one cannot concatenate two packing units and then unpack the result as one packing unit; nor can one unpack a substring of a packing unit as a separate packing unit. Each packing unit that was created by a related sequence of pack calls must be unpacked as a unit by a sequence of related unpack calls.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>Almost all MPI routines return an error value; C routines as the value of the function and Fortran routines in the last argument. C++ functions do not return errors. If the default error handler is set to MPI::ERRORS_THROW_EXCEPTIONS, then on error the C++ exception mechanism will be used to throw an MPI:Exception object.</p><p>Before the error value is returned, the current MPI error handler is called. By default, this error handler aborts the MPI job, except for I/O function errors. The error handler may be changed with MPI_Comm_set_errhandler; the predefined error handler MPI_ERRORS_RETURN may be used to cause error values to be returned. Note that MPI does not guarantee that an MPI program can continue past an error.</p><p>See the MPI man page for a full list of MPI error codes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO MPI_Pack_external.openmpi&hellip;</h2>
        <div class="sectioncontent">

<pre>
MPI_Pack_external_size
MPI_Send
MPI_Unpack_external
sscanf(3C)

</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="MPI_Pack_external.3.html"><span aria-hidden="true">&larr;</span> MPI_Pack_external.3: Packs a datatype into contiguous memory, using the external32 format</a></li>
   <li class="next"><a href="MPI_Pack_external_size.3.html">MPI_Pack_external_size.3: Returns the upper bound on the amount of space needed to pack a message using mpi_pack_external. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
