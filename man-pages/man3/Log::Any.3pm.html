<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Log::Any: Bringing loggers and listeners together</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Bringing loggers and listeners together">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Log::Any (3pm) manual">
  <meta name="twitter:description" content="Bringing loggers and listeners together">
  <meta name="twitter:image" content="https://www.carta.tech/images/liblog-any-perl-Log::Any-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Log::Any.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Log::Any (3pm) manual" />
  <meta property="og:description" content="Bringing loggers and listeners together" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liblog-any-perl-Log::Any-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Log::Any<small> (3pm)</small></h1>
        <p class="lead">Bringing loggers and listeners together</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Any.3pm.html">
      <span itemprop="name">Log::Any: Bringing loggers and listeners together</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liblog-any-perl/">
      <span itemprop="name">liblog-any-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Any.3pm.html">
      <span itemprop="name">Log::Any: Bringing loggers and listeners together</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>version 0.15</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>In a \s-1CPAN\s0 or other module:</p>
<pre>
    package Foo;
    use Log::Any qw($log);

    $log-&gt;error("an error occurred");
    $log-&gt;debugf("arguments are: %s", &#92;@_)
        if $log-&gt;is_debug();

    my $log2 = Log::Any-&gt;get_logger(category =&gt; &apos;My::Class&apos;);
</pre>
<p>In your application:</p><p>    use Log::Any::Adapter;</p><p>    # Send all logs to Log::Log4perl     Log::Any::Adapter-&gt;set(&apos;Log4perl&apos;);</p><p>    # Send all logs to Log::Dispatch     my $log = Log::Dispatch-&gt;new(outputs =&gt; [[ ... ]]);     Log::Any::Adapter-&gt;set( &apos;Dispatch&apos;, dispatcher =&gt; $log );</p><p>    # See Log::Any::Adapter documentation for more options</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>\*(C`Log::Any\*(C' allows \s-1CPAN\s0 modules to safely and efficiently log messages, while letting the application choose (or decline to choose) a logging mechanism such as \*(C`Log::Dispatch\*(C' or \*(C`Log::Log4perl\*(C'.</p><p>\*(C`Log::Any\*(C' has a very tiny footprint and no dependencies beyond Perl 5.6, which makes it appropriate for even small \s-1CPAN\s0 modules to use. It defaults to 'null' logging activity, so a module can safely log without worrying about whether the application has chosen (or will ever choose) a logging mechanism.</p><p>The application, in turn, may choose one or more logging mechanisms via Log::Any::Adapter.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOG LEVELS</h2>
        <div class="sectioncontent">
<p>\*(C`Log::Any\*(C' supports the following log levels and aliases, which is meant to be inclusive of the major logging packages:</p><p>     trace      debug      info (inform)      notice      warning (warn)      error (err)      critical (crit, fatal)      alert      emergency</p><p>Levels are translated as appropriate to the underlying logging mechanism. For example, log4perl only has six levels, so we translate 'notice' to 'info' and the top three levels to 'fatal'.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CATEGORIES</h2>
        <div class="sectioncontent">
<p>Every logger has a category, generally the name of the class that asked for the logger. Some logging mechanisms, like log4perl, can direct logs to different places depending on category.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PRODUCING LOGS (FOR MODULES)</h2>
        <div class="sectioncontent">
<h3>Getting a logger</h3>
<p>The most convenient way to get a logger in your module is:</p><p>    use Log::Any qw($log);</p><p>This creates a package variable <em></em><strong>$log</strong><em></em> and assigns it to the logger for the current package. It is equivalent to</p><p>    our $log = Log::Any-&gt;get_logger(category =&gt; _\|_PACKAGE_\|_);</p><p>In general, to get a logger for a specified category:</p><p>    my $log = Log::Any-&gt;get_logger(category =&gt; $category)</p><p>If no category is specified, the caller package is used.</p>
<h3>Logging</h3>
<p>To log a message, use any of the log levels or aliases. e.g.</p><p>    $log-&gt;error("this is an error");     $log-&gt;warn("this is a warning");     $log-&gt;warning("this is also a warning");</p><p>You should <strong>not</strong> include a newline in your message; that is the responsibility of the logging mechanism, which may or may not want the newline.</p><p>There are also printf-style versions of each of these methods:</p><p>    $log-&gt;errorf("an error occurred: %s", $@);     $log-&gt;debugf("called with %d params: %s", $param_count, &#92;@params);</p><p>The printf-style methods have a few advantages, besides being arguably more readable:</p><ul>
<li><p>Any complex references (like \*(C`&#92;@params\*(C' above) are automatically converted to single-line strings with \*(C`Data::Dumper\*(C'.</p></li><li><p>Any undefined values are automatically converted to the string \*(L"&lt;undef&gt;\*(R".</p></li><li><p>A logging mechanism could potentially use the unchanging format string (or a digest thereof) to group related log messages together.</p></li>
</ul>
<h3>Log level detection</h3>
<p>To detect whether a log level is on, use \*(L"is_\*(R" followed by any of the log levels or aliases. e.g.</p><p>    if ($log-&gt;is_info()) { ... }     $log-&gt;debug("arguments are: " . Dumper(&#92;@_))         if $log-&gt;is_debug();</p><p>This is important for efficiency, as you can avoid the work of putting together the logging message (in the above case, stringifying @_) if the log level is not active.</p><p>Some logging mechanisms don't support detection of log levels. In these cases the detection methods will always return 1.</p><p>In contrast, the default logging mechanism - Null - will return 0 for all detection methods.</p>
<h3>Testing</h3>
<p>Log::Any::Test provides a mechanism to test code that uses \*(C`Log::Any\*(C'.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSUMING LOGS (FOR APPLICATIONS)</h2>
        <div class="sectioncontent">
<p>To direct logs somewhere - a file, the screen, etc. - you must use Log::Any::Adapter. This is intentionally kept in a separate distributions to keep \*(C`Log::Any\*(C' as simple and unchanging as possible.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MOTIVATION</h2>
        <div class="sectioncontent">
<p>Many modules have something interesting to say. Unfortunately there is no standard way for them to say it - some output to \s-1STDERR\s0, others to \*(C`warn\*(C', others to custom file logs. And there is no standard way to get a module to start talking - sometimes you must call a uniquely named method, other times set a package variable.</p><p>This being Perl, there are many logging mechanisms available on \s-1CPAN\s0.  Each has their pros and cons. Unfortunately, the existence of so many mechanisms makes it difficult for a \s-1CPAN\s0 author to commit his/her users to one of them. This may be why many \s-1CPAN\s0 modules invent their own logging or choose not to log at all.</p><p>To untangle this situation, we must separate the two parts of a logging \s-1API\s0. The first, <em>log production</em>, includes methods to output logs (like \*(C`$log-&gt;debug\*(C') and methods to inspect whether a log level is activated (like \*(C`$log-&gt;is_debug\*(C'). This is generally all that \s-1CPAN\s0 modules care about. The second, <em>log consumption</em>, includes a way to configure where logging goes (a file, the screen, etc.) and the code to send it there. This choice generally belongs to the application.</p><p>\*(C`Log::Any\*(C' provides a standard log production \s-1API\s0 for modules. \*(C`Log::Any::Adapter\*(C' allows applications to choose the mechanism for log consumption.</p><p>See http://www.openswartz.com/2007/09/06/standard-logging-api/ for the original post proposing this module.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Q & A</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    Isn't Log::Any just yet another logging mechanism?
  </dt>
  <dd>
    <p>No. \*(C`Log::Any\*(C' does not, and never will, include code that knows how to log to a particular place (file, screen, etc.) It can only forward logging requests to another logging mechanism.</p>
  </dd>
  <dt>
    Why don't you just pick the best logging mechanism, and use and promote it?
  </dt>
  <dd>
    <p>Each of the logging mechanisms have their pros and cons, particularly in terms of how they are configured. For example, log4perl offers a great deal of power and flexibility but uses a global and potentially heavy configuration, whereas \*(C`Log::Dispatch\*(C' is extremely configuration-light but doesn't handle categories. There is also the unnamed future logger that may have advantages over either of these two, and all the custom in-house loggers people have created and cannot (for whatever reason) stop using.</p>
  </dd>
  <dt>
    Is it safe for my critical module to depend on Log::Any?
  </dt>
  <dd>
    <p>Our intent is to keep \*(C`Log::Any\*(C' minimal, and change it only when absolutely necessary. Most of the \*(L"innovation\*(R", if any, is expected to occur in \*(C`Log::Any::Adapter\*(C', which your module should not have to depend on (unless it wants to direct logs somewhere specific). \*(C`Log::Any\*(C' has no module dependencies other than Test::Simple for testing.</p>
  </dd>
  <dt>
    Why doesn't Log::Any use <em>insert modern Perl technique</em>?
  </dt>
  <dd>
    <p>To encourage \s-1CPAN\s0 module authors to adopt and use \*(C`Log::Any\*(C', we aim to have as few dependencies and chances of breakage as possible. Thus, no \*(C`Moose\*(C' or other niceties.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Log::Any&hellip;</h2>
        <div class="sectioncontent">
<p>Log::Any::Adapter, the many Log:: modules on \s-1CPAN\s0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>This software is copyright (c) 2011 by Jonathan Swartz.</p><p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Log::Agent::Tag_List.3pm.html"><span aria-hidden="true">&larr;</span> Log::Agent::Tag_List.3pm: User-defined tags to add to every log</a></li>
   <li class="next"><a href="Log::Any::Adapter.3pm.html">Log::Any::Adapter.3pm: Tell log::any where to send its logs <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
