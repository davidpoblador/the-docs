<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Weak: Arrays of weak pointers and hash tables of weak pointers.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Arrays of weak pointers and hash tables of weak pointers.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Weak (3o) manual">
  <meta name="twitter:description" content="Arrays of weak pointers and hash tables of weak pointers.">
  <meta name="twitter:image" content="https://www.carta.tech/images/ocaml-nox-Weak-3o.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3o/Weak.3o.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Weak (3o) manual" />
  <meta property="og:description" content="Arrays of weak pointers and hash tables of weak pointers." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ocaml-nox-Weak-3o.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Weak<small> (3o)</small></h1>
        <p class="lead">Arrays of weak pointers and hash tables of weak pointers.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/Weak.3o.html">
      <span itemprop="name">Weak: Arrays of weak pointers and hash tables of weak pointers.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ocaml-nox/">
      <span itemprop="name">ocaml-nox</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/Weak.3o.html">
      <span itemprop="name">Weak: Arrays of weak pointers and hash tables of weak pointers.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Module</h2>
        <div class="sectioncontent">
<p>Module   Weak</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Documentation</h2>
        <div class="sectioncontent">
<p>Module <strong>Weak</strong>  : <strong>sig end</strong></p><p>Arrays of weak pointers and hash tables of weak pointers.</p><p><strong>===</strong> <strong>Low-level functions</strong> <strong>===</strong></p><p><em>type</em> <strong>'a</strong> <em>t</em></p><p>The type of arrays of weak pointers (weak arrays).  A weak pointer is a value that the garbage collector may erase whenever the value is not used any more (through normal pointers) by the program.  Note that finalisation functions are run after the weak pointers are erased.</p><p>A weak pointer is said to be full if it points to a value, empty if the value was erased by the GC.</p><p>Notes:</p><p>-Integers are not allocated and cannot be stored in weak arrays.</p><p>-Weak arrays cannot be marshaled using <strong>Pervasives.output_value</strong> nor the functions of the <strong>Marshal</strong> module.</p><p><em>val create</em> : <strong>int -&gt; 'a t</strong></p><p><strong>Weak.create n</strong> returns a new weak array of length <strong>n</strong> . All the pointers are initially empty.  Raise <strong>Invalid_argument</strong> if <strong>n</strong> is negative or greater than <strong>Sys.max_array_length</strong> <strong>-1</strong> .</p><p><em>val length</em> : <strong>'a t -&gt; int</strong></p><p><strong>Weak.length ar</strong> returns the length (number of elements) of <strong>ar</strong> .</p><p><em>val set</em> : <strong>'a t -&gt; int -&gt; 'a option -&gt; unit</strong></p><p><strong>Weak.set ar n (Some el)</strong> sets the <strong>n</strong> th cell of <strong>ar</strong> to be a (full) pointer to <strong>el</strong> ; <strong>Weak.set ar n None</strong> sets the <strong>n</strong> th cell of <strong>ar</strong> to empty. Raise <strong>Invalid_argument Weak.set</strong> if <strong>n</strong> is not in the range 0 to <strong>Weak.length</strong> <strong>a - 1</strong> .</p><p><em>val get</em> : <strong>'a t -&gt; int -&gt; 'a option</strong></p><p><strong>Weak.get ar n</strong> returns None if the <strong>n</strong> th cell of <strong>ar</strong> is empty, <strong>Some x</strong> (where <strong>x</strong> is the value) if it is full. Raise <strong>Invalid_argument Weak.get</strong> if <strong>n</strong> is not in the range 0 to <strong>Weak.length</strong> <strong>a - 1</strong> .</p><p><em>val get_copy</em> : <strong>'a t -&gt; int -&gt; 'a option</strong></p><p><strong>Weak.get_copy ar n</strong> returns None if the <strong>n</strong> th cell of <strong>ar</strong> is empty, <strong>Some x</strong> (where <strong>x</strong> is a (shallow) copy of the value) if it is full. In addition to pitfalls with mutable values, the interesting difference with <strong>get</strong> is that <strong>get_copy</strong> does not prevent the incremental GC from erasing the value in its current cycle ( <strong>get</strong> may delay the erasure to the next GC cycle). Raise <strong>Invalid_argument Weak.get</strong> if <strong>n</strong> is not in the range 0 to <strong>Weak.length</strong> <strong>a - 1</strong> .</p><p><em>val check</em> : <strong>'a t -&gt; int -&gt; bool</strong></p><p><strong>Weak.check ar n</strong> returns <strong>true</strong> if the <strong>n</strong> th cell of <strong>ar</strong> is full, <strong>false</strong> if it is empty.  Note that even if <strong>Weak.check ar n</strong> returns <strong>true</strong> , a subsequent <strong>Weak.get</strong> <strong>ar n</strong> can return <strong>None</strong> .</p><p><em>val fill</em> : <strong>'a t -&gt; int -&gt; int -&gt; 'a option -&gt; unit</strong></p><p><strong>Weak.fill ar ofs len el</strong> sets to <strong>el</strong> all pointers of <strong>ar</strong> from <strong>ofs</strong> to <strong>ofs + len - 1</strong> .  Raise <strong>Invalid_argument Weak.fill</strong> if <strong>ofs</strong> and <strong>len</strong> do not designate a valid subarray of <strong>a</strong> .</p><p><em>val blit</em> : <strong>'a t -&gt; int -&gt; 'a t -&gt; int -&gt; int -&gt; unit</strong></p><p><strong>Weak.blit ar1 off1 ar2 off2 len</strong> copies <strong>len</strong> weak pointers from <strong>ar1</strong> (starting at <strong>off1</strong> ) to <strong>ar2</strong> (starting at <strong>off2</strong> ). It works correctly even if <strong>ar1</strong> and <strong>ar2</strong> are the same. Raise <strong>Invalid_argument Weak.blit</strong> if <strong>off1</strong> and <strong>len</strong> do not designate a valid subarray of <strong>ar1</strong> , or if <strong>off2</strong> and <strong>len</strong> do not designate a valid subarray of <strong>ar2</strong> .</p><p><strong>===</strong> <strong>Weak hash tables</strong> <strong>===</strong></p><p><strong>=== A weak hash table is a hashed set of values. Each value may</strong> <strong>magically disappear from the set when it is not used by the</strong> <strong>rest of the program any more. This is normally used to share</strong> <strong>data structures without inducing memory leaks.</strong> <strong>Weak hash tables are defined on values from a Hashtbl.HashedType</strong> <strong>module; the equal relation and hash function are taken from that</strong> <strong>module. We will say that v is an instance of x if equal x v</strong> <strong>is true.</strong> <strong></strong> <strong>The equal relation must be able to work on a shallow copy of</strong> <strong>the values and give the same result as with the values themselves. ===</strong></p><p><em>module type S =</em> <strong>sig end</strong></p><p>The output signature of the functor <strong>Weak.Make</strong> .</p><p><em>module Make :</em> <strong>functor (H : Hashtbl.HashedType) -&gt; sig end</strong></p><p>Functor building an implementation of the weak hash table structure.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Unix.LargeFile.3o.html"><span aria-hidden="true">&larr;</span> Unix.LargeFile.3o: File operations on large files.</a></li>
   <li class="next"><a href="Weak.Make.3o.html">Weak.Make.3o: Functor building an implementation of the weak hash table structure. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
