<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xpagetfd: Retrieve data from one or more \s-1xpa\s0 servers and write to files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Retrieve data from one or more \s-1xpa\s0 servers and write to files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xpagetfd (3) manual">
  <meta name="twitter:description" content="Retrieve data from one or more \s-1xpa\s0 servers and write to files">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxpa-dev-xpagetfd-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/xpagetfd.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xpagetfd (3) manual" />
  <meta property="og:description" content="Retrieve data from one or more \s-1xpa\s0 servers and write to files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxpa-dev-xpagetfd-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xpagetfd<small> (3)</small></h1>
        <p class="lead">Retrieve data from one or more \s-1xpa\s0 servers and write to files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/xpagetfd.3.html">
      <span itemprop="name">xpagetfd: Retrieve data from one or more \s-1xpa\s0 servers and write to files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxpa-dev/">
      <span itemprop="name">libxpa-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/xpagetfd.3.html">
      <span itemprop="name">xpagetfd: Retrieve data from one or more \s-1xpa\s0 servers and write to files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  #include &lt;xpa.h&gt;

  int XPAGetFd(XPA xpa,
               char *template, char *paramlist, char *mode,
               int *fds, char **names, char **messages, int n);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Retrieve data from one or more \s-1XPA\s0 servers whose class:name identifier matches the specified template and write it to files associated with one or more standard I/O fds (i.e, handles returned by <em>open()</em>).</p><p>A template of the form \*(L"class1:name1\*(R" is sent to the \s-1XPA\s0 name server, which returns a list of at most \s-1ABS\s0(n) matching \s-1XPA\s0 servers.  A connection is established with each of these servers and the paramlist string is passed to the server as the data transfer request is initiated. If an \s-1XPA\s0 struct is passed to the call, then the persistent connections are updated as described above. Otherwise, temporary connections are made to the servers (which will be closed when the call completes).</p><p>The <em>XPAGetFd()</em> routine then retrieves data from the \s-1XPA\s0 servers, and write these data to the fds associated with one or more fds (i.e., results from open). Is n is positive, then there will be n fds and the data from each server will be sent to a separate fd. If n is negative, then there is only 1 fd and all data is sent to this single fd. (The latter is how xpaget is implemented.)</p><p>A string containing the class:name and ip:port is stored in the name array.  If a given server returned an error or the server callback sends a message back to the client, then the message will be stored in the associated element of the messages array.  \s-1NB:\s0 if specified, the name and messages arrays must be of size n or greater.</p><p>The returned message string will be of the form:</p><p>  XPA$ERROR   error\-message (class:name ip:port)</p><p>or</p><p>  XPA$MESSAGE message     (class:name ip:port)</p><p>Note that when there is an error stored in an messages entry, the corresponding bufs and lens entry may or may not be \s-1NULL\s0 and 0 (respectively), depending on the particularities of the server.</p><p>The return value will contain the actual number of servers that were processed.  This value thus will hold the number of valid entries in the bufs, lens, names, and messages arrays, and can be used to loop through these arrays.  In names and/or messages is \s-1NULL\s0, no information is passed back in that array.</p><p>The mode string is of the form: \*(L"key1=value1,key2=value2,...\*(R" The following keywords are recognized:</p><p>  key           value           default         explanation   ------        --------        --------        -----------   ack           true/false      true            if false, don&apos;t wait for ack from server (after callback completes)</p><p>The ack keyword is not very useful, since the server completes the callback in order to return the data anyway.  It is here for completion (and perhaps for future usefulness).</p><p>Example -</p><p>  #include &lt;xpa.h&gt;   #define NXPA 10   int  i, got;   int fds[NXPA];   char *names[NXPA];   char *messages[NXPA];   for(i=0; i&lt;NXPA; i++)     fds[i] = open(...);   got = XPAGetFd(NULL, "ds9", "file", NULL, fds, names, messages, NXPA);   for(i=0; i&lt;got; i++){     if( messages[i] != NULL ){       /* error processing */       fprintf(stderr, "ERROR: %s (%s)&#92;n", messages[i], names[i]);     }     if( names[i] )       free(names[i]);     if( messages[i] )       free(messages[i]);   }</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xpagetfd&hellip;</h2>
        <div class="sectioncontent">
<p>See <a href="../man7/xpa.7.html"><strong>xpa</strong>(7)</a> for a list of \s-1XPA\s0 help pages</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xpaget.3.html"><span aria-hidden="true">&larr;</span> xpaget.3: Retrieve data from one or more \s-1xpa\s0 servers</a></li>
   <li class="next"><a href="xpainfo.3.html">xpainfo.3: Send short message to one or more \s-1xpa\s0 servers <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
