<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Net::Citadel: Citadel.org protocol coverage</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Citadel.org protocol coverage">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Net::Citadel (3pm) manual">
  <meta name="twitter:description" content="Citadel.org protocol coverage">
  <meta name="twitter:image" content="https://www.carta.tech/images/libnet-citadel-perl-Net::Citadel-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Net::Citadel.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Net::Citadel (3pm) manual" />
  <meta property="og:description" content="Citadel.org protocol coverage" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libnet-citadel-perl-Net::Citadel-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Net::Citadel<small> (3pm)</small></h1>
        <p class="lead">Citadel.org protocol coverage</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::Citadel.3pm.html">
      <span itemprop="name">Net::Citadel: Citadel.org protocol coverage</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libnet-citadel-perl/">
      <span itemprop="name">libnet-citadel-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::Citadel.3pm.html">
      <span itemprop="name">Net::Citadel: Citadel.org protocol coverage</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>Version 0.20</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Net::Citadel;
  my $c = new Net::Citadel (host =&gt; &apos;citadel.example.org&apos;);
  $c-&gt;login (&apos;Administrator&apos;, &apos;goodpassword&apos;);
  my @floors = $c-&gt;floors;

  eval {
     $c-&gt;assert_floor (&apos;Level 6 (Management)&apos;);
  }; warn $@ if $@;

  $c-&gt;retract_floor (&apos;Level 6 (Management)&apos;);

  $c-&gt;logout;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Citadel is a \*(L"turnkey open-source solution for email and collaboration\*(R" (this is as far as marketing can go :-). The main component is the <em>citadel server</em>. To communicate with it you can use either a web interface, or - if you have to automate things - with a protocol</p><p>   L&lt;http://www.citadel.org/doku.php?id=documentation:appproto:start&gt;</p><p>This package tries to do a bit of abstraction (more could be done) and handles some of the protocol handling.  The basic idea is that the application using the package deals with Citadel's objects: rooms, floors, users.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTANTS</h2>
        <div class="sectioncontent">
<h3>Configuration</h3>

<dl class='dl-vertical'>
  <dt>
    \s-1CITADEL_PORT\s0
  </dt>
  <dd>
    <p>The constant $CITADEL_PORT is equal to 504, which is the \s-1IANA\s0 standard Citadel port.</p>
  </dd>

</dl>

<h3>Result Codes</h3>

<dl class='dl-vertical'>
  <dt>
    \s-1LISTING_FOLLOWS\s0
  </dt>
  <dd>
    <p>The result code $LISTING_FOLLOWS is equal to 100 and is used by the Citadel server to indicate that after the server response, the server will output a listing of some sort.</p>
  </dd>
  <dt>
    \s-1CIT_OK\s0
  </dt>
  <dd>
    <p>The result code $CIT_OK is equal to 200 and is used by the Citadel server to indicate that the requested operation succeeded.</p>
  </dd>
  <dt>
    \s-1MORE_DATA\s0
  </dt>
  <dd>
    <p>The result code $MORE_DATA is equal to 300 and is used by the Citadel server to indicate that the requested operation succeeded but that another command is required to complete it.</p>
  </dd>
  <dt>
    \s-1SEND_LISTING\s0
  </dt>
  <dd>
    <p>The result code $SEND_LISTING is equal to 400 and is used by the Citadel server to indicate that the requested operation is progressing and it is now expecting zero or more lines of text.</p>
  </dd>
  <dt>
    \s-1ERROR\s0
  </dt>
  <dd>
    <p>The result code $ERROR is equal to 500 and is used by the Citadel server to indicate that the requested operation failed. The second and third digits of the error code and/or the error message following it describes why.</p>
  </dd>
  <dt>
    \s-1BINARY_FOLLOWS\s0
  </dt>
  <dd>
    <p>The result code $BINARY_FOLLOWS is equal to 600 and is used by the Citadel server to indicate that after this line, read \*(C`n\*(C' bytes. (&lt;Cn&gt; follows after a blank)</p>
  </dd>
  <dt>
    \s-1SEND_BINARY\s0
  </dt>
  <dd>
    <p>The result code $SEND_BINARY is equal to 700 and is used by the Citadel server to indicate that \*(C`n\*(C' bytes of binary data can now be sent. (\*(C`n\*(C' follows after a blank.</p>
  </dd>
  <dt>
    \s-1START_CHAT_MODE\s0
  </dt>
  <dd>
    <p>The result code $START_CHAT_MODE is equal to 800 and is used by the Citadel server to indicate that the system is in chat mode now. Every line sent will be broadcasted.</p>
  </dd>
  <dt>
    \s-1ASYNC_MSG\s0
  </dt>
  <dd>
    <p>The result code $ASYC_MSG is equal to 900 and is used by the Citadel server to indicate that there is a page waiting that needs to be fetched.</p>
  </dd>

</dl>

<h3>Room Access</h3>

<dl class='dl-vertical'>
  <dt>
    \s-1PUBLIC\s0
  </dt>
  <dd>
    <p>The room access code $PUBLIC is equal to 0 and is used to indicate that a room is to have public access.</p>
  </dd>
  <dt>
    \s-1PRIVATE\s0
  </dt>
  <dd>
    <p>The room access code $PRIVATE is equal to 1 and is used to indicate that a room is to have private access.</p>
  </dd>
  <dt>
    \s-1PRIVATE_PASSWORD\s0
  </dt>
  <dd>
    <p>The room access code $PRIVATE_PASSWORD is equal to 2 and is used to indicate that a room is to have private access using a password.</p>
  </dd>
  <dt>
    \s-1PRIVATE_INVITATION\s0
  </dt>
  <dd>
    <p>The room access code $PRIVATE_INVITATION is equal to 3 and is used to indicate that a room is to have private access by invitation.</p>
  </dd>
  <dt>
    \s-1PERSONAL\s0
  </dt>
  <dd>
    <p>The room access code $PERSONAL is equal to 4 and is used to indicate that a room is to be a private mailbox only for a particular user.</p>
  </dd>

</dl>

<h3>User related</h3>

<dl class='dl-vertical'>
  <dt>
    \s-1DELETED_USER\s0
  </dt>
  <dd>
    <p>The room access code $DELETED_USER is equal to 0.</p>
  </dd>
  <dt>
    \s-1NEW_USER\s0
  </dt>
  <dd>
    <p>The User related constant $NEW_USER is equal to 1.</p>
  </dd>
  <dt>
    \s-1PROBLEM_USER\s0
  </dt>
  <dd>
    <p>The User related constant $PROBLEM_USER is equal to 2.</p>
  </dd>
  <dt>
    \s-1LOCAL_USER\s0
  </dt>
  <dd>
    <p>The User related constant $LOCAL_USER is equal to 3.</p>
  </dd>
  <dt>
    \s-1NETWORK_USER\s0
  </dt>
  <dd>
    <p>The User related constant $NETWORK_USER is equal to 4.</p>
  </dd>
  <dt>
    \s-1PREFERRED_USER\s0
  </dt>
  <dd>
    <p>The User related constant $PREFERRED_USER is equal to 5.</p>
  </dd>
  <dt>
    \s-1AIDE_USER\s0
  </dt>
  <dd>
    <p>The User related constant $AIDE user is equal to 6.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERFACE</h2>
        <div class="sectioncontent">
<h3>Constructor</h3>
<p>\*(C`$c = new Net::Citadel (host =\*(C' $ctdl_host)&gt;</p><p>The constructor creates a handle to the citadel server (and creates the \s-1TCP\s0 connection). It uses the following named parameters: The hostname (or \s-1IP\s0 address) where the citadel server is running. Defaults to \*(C`localhost\*(C'. The port where the citadel server is running. Defaults to the standard Citadel port number 504.</p><p>The constructor will croak if no connection can be established.</p>
<h3>Methods</h3>
<p><em>Authentication</em></p>
<dl class='dl-vertical'>
  <dt>
    <em>login</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;login (<em></em><strong>$user</strong><em></em>, <em></em><strong>$pwd</strong><em></em>) Logs in this user, or will croak if that fails.</p>
  </dd>
  <dt>
    <em>logout</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;logout Well, logs out the current user.</p>
  </dd>

</dl>
<p><em>Floors</em></p>
<dl class='dl-vertical'>
  <dt>
    <em>floors</em>
  </dt>
  <dd>
    <p><em></em><strong>@floors</strong><em></em> = <em></em><strong>$c</strong><em></em>-&gt;floors Retrieves a list (\s-1ARRAY\s0) of known floors. Each entry is a hash reference with the name, the number of rooms in that floor and the index as \s-1ID\s0. The index within the array is also the \s-1ID\s0 of the floor.</p>
  </dd>
  <dt>
    <em>assert_floor</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;assert_floor (<em></em><strong>$floor_name</strong><em></em>) Creates the floor with the name provided, or if it already exists simply returns. This only croaks if there are insufficient privileges.</p>
  </dd>
  <dt>
    <em>retract_floor</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;retract_floor (<em></em><strong>$floor_name</strong><em></em>) Retracts a floor with this name. croaks if that fails because of insufficient privileges. Does not croak if the floor did not exist. <strong>\s-1NOTE\s0</strong>: Citadel server (v7.20) seems to have the bug that you cannot delete an empty floor without restarting the server. Not much I can do here about that.</p>
  </dd>
  <dt>
    <em>rooms</em>
  </dt>
  <dd>
    <p><em></em><strong>@rooms</strong><em></em> = <em></em><strong>$c</strong><em></em>-&gt;rooms (<em></em><strong>$floor_name</strong><em></em>) Retrieves the rooms on that given floor.</p>
  </dd>

</dl>
<p><em>Rooms</em></p>
<dl class='dl-vertical'>
  <dt>
    <em>assert_room</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;assert_room (<em></em><strong>$floor_name</strong><em></em>, <em></em><strong>$room_name</strong><em></em>, [ <em></em><strong>$room_attributes</strong><em></em> ]) Creates the room on the given floor. If the room already exists there, nothing else happens. If the floor does not exist, it will complain. The optional room attributes are provided as hash with the following fields</p><p>One of the constants \*(C`PUBLIC\*(C', \*(C`PRIVATE\*(C', \*(C`PRIVATE_PASSWORD\*(C', \*(C`PRIVATE_INVITATION\*(C' or \*(C`PERSONAL\*(C'.</p>
  </dd>
  <dt>
    <em>retract_room</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;retract_room (<em></em><strong>$floor_name</strong><em></em>, <em></em><strong>$room_name</strong><em></em>) <strong>\s-1NOTE\s0</strong>: Not implemented yet.</p>
  </dd>

</dl>
<p><em>Users</em></p>
<dl class='dl-vertical'>
  <dt>
    <em>create_user</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;create_user (<em></em><strong>$username</strong><em></em>, <em></em><strong>$password</strong><em></em>) Tries to create a user with name and password. Fails if this user already exists (or some other reason).</p>
  </dd>
  <dt>
    <em>change_user</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;change_user (<em></em><strong>$user_name</strong><em></em>, <em></em><strong>$aspect</strong><em></em> =&gt; <em></em><strong>$value</strong><em></em>) Changes certain aspects of a user. Currently understood aspects are</p>
  </dd>
  <dt>
    <em>remove_user</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;remove_user (<em></em><strong>$name</strong><em></em>) Removes the user (actually sets level to \*(C`DELETED_USER\*(C').</p>
  </dd>

</dl>
<p><em>Miscellaneous</em></p>
<dl class='dl-vertical'>
  <dt>
    <em>citadel_echo</em>
  </dt>
  <dd>
    <p><em></em><strong>$c</strong><em></em>-&gt;citadel_echo (<em></em><strong>$string</strong><em></em>) Tests a connection to the Citadel server by sending a message string to it and then checking to see if that same string is echoed back.</p>
  </dd>
  <dt>
    <em>citadel_info</em>
  </dt>
  <dd>
    <p>$info_aref = <em></em><strong>$c</strong><em></em>-&gt;<em>citadel_info()</em> Sends the \*(C`INFO\*(C' command to the Citadel server and returns the lines it receives from that as a reference to an array. An example of getting and then displaying the server information lines the following:  my $c = new Net::Citadel (host =&gt; $host_name);  my $info_aref = $c-&gt;citadel_info;  foreach $line (@{$info_aref}) {     print $line;  } For more details about the server information lines that are returned, see the \*(C`INFO\*(C' entry at &lt;http://www.citadel.org/doku.php/documentation:appproto:connection&gt;.</p>
  </dd>
  <dt>
    <em>citadel_mrtg</em>
  </dt>
  <dd>
    <p>%mrtg_hash = <em></em><strong>$c</strong><em></em>-&gt;citadel_mrtg($type) Sends the \*(C`MRTG\*(C' command to the Citadel server. It expects a type of either \*(C`users\*(C' or \*(C`messages\*(C' to be passed to it and returns a hash containing the information from the server.</p>
<dl class='dl-vertical'>
  <dt>
    ConnectedUsers
  </dt>
  <dd>
    <p>Number of connected users on the system.  Only returned for type \*(C`users\*(C'.</p>
  </dd>
  <dt>
    HighMsg
  </dt>
  <dd>
    <p>Higest message number on the system.  Only returned for type \*(C`messages\*(C'.</p>
  </dd>
  <dt>
    SystemUptime
  </dt>
  <dd>
    <p>The uptime for the system formated as days, hours, minutes.</p>
  </dd>
  <dt>
    SystemName
  </dt>
  <dd>
    <p>Human readable name of the Citadel system.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <em>citadel_time</em>
  </dt>
  <dd>
    <p><em></em><strong>$t</strong><em></em> = <em></em><strong>$c</strong><em></em>-&gt;citadel_time Gets the current system time and time zone offset from \s-1UTC\s0 in \s-1UNIX\s0 timestamp format from the Citadel server. \*(C`TODO\*(C': Rewrite function to return the unpacked parameters as a hash upon success.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODOs</h2>
        <div class="sectioncontent">
<p>- Decent \s-1GUI\s0 using Mason + \s-1AJAX\s0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Net::Citadel&hellip;</h2>
        <div class="sectioncontent">
<p>   L&lt;http://www.citadel.org/doku.php?id=documentation:appproto:app_proto&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Robert Barta, &lt;drrho@cpan.org&gt; Robert James Clay, &lt;jame@rocasa.us&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2007-2008 by Robert Barta Copyright (C) 2012-2013 by Robert James Clay</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.8.8 or, at your option, any later version of Perl 5 you may have available.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Net::CIDR::Lite.3pm.html"><span aria-hidden="true">&larr;</span> Net::CIDR::Lite.3pm: Perl extension for merging ipv4 or ipv6 cidr addresses</a></li>
   <li class="next"><a href="Net::Citadel::ToDo.3pm.html">Net::Citadel::ToDo.3pm: To do items for the net::citadel perl extension. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
