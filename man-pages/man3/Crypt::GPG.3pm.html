<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Crypt::GPG: An object oriented interface to gnupg.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="An object oriented interface to gnupg.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Crypt::GPG (3pm) manual">
  <meta name="twitter:description" content="An object oriented interface to gnupg.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcrypt-gpg-perl-Crypt::GPG-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Crypt::GPG.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Crypt::GPG (3pm) manual" />
  <meta property="og:description" content="An object oriented interface to gnupg." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcrypt-gpg-perl-Crypt::GPG-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Crypt::GPG<small> (3pm)</small></h1>
        <p class="lead">An object oriented interface to gnupg.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Crypt::GPG.3pm.html">
      <span itemprop="name">Crypt::GPG: An object oriented interface to gnupg.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcrypt-gpg-perl/">
      <span itemprop="name">libcrypt-gpg-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Crypt::GPG.3pm.html">
      <span itemprop="name">Crypt::GPG: An object oriented interface to gnupg.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">

<pre>
 $Revision: 1.52 $
 $Date: 2005/02/23 09:12:54 $
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>  use Crypt::GPG;   my $gpg = new Crypt::GPG;</p><p>  $gpg-&gt;gpgbin('/usr/bin/gpg');      # The GnuPG executable.   $gpg-&gt;secretkey('0x2B59D29E');     # Set ID of default secret key.   $gpg-&gt;passphrase('just testing');  # Set passphrase.</p><p>  # Sign a message:</p><p>  my $sign = $gpg-&gt;sign('testing again');</p><p>  # Encrypt a message:</p><p>  my @encrypted = $gpg-&gt;encrypt ('top secret', 'test@bar.com');</p><p>  # Get message info:</p><p>  my @recipients = $gpg-&gt;msginfo($encrypted);</p><p>  # Decrypt a message.</p><p>  my ($plaintext, $signature) = $gpg-&gt;verify($encrypted);</p><p>  # Key generation:</p><p>  $status = $gpg-&gt;keygen     ('Test', 'test@foo.com', 'ELG-E', 2048, 0, 'test passphrase');   print while (&lt;$status&gt;); close $status;</p><p>  # Key database manipulation:</p><p>  $gpg-&gt;addkey($key, @ids);   @keys = $gpg-&gt;keydb(@ids);</p><p>  # Key manipulation:</p><p>  $key = $keys[0];</p><p>  $gpg-&gt;delkey($key);   $gpg-&gt;disablekey($key);   $gpg-&gt;enablekey($key);   $gpg-&gt;keypass($key, $oldpassphrase, $newpassphrase);   $keystring = $gpg-&gt;export($key);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Crypt::GPG module provides access to the functionality of the GnuPG (www.gnupg.org) encryption tool through an object oriented interface.</p><p>It provides methods for encryption, decryption, signing, signature verification, key generation, key certification, export and import. Key-server access is on the todo list.</p><p>This release of the module may create compatibility issues with previous versions. If you find any such problems, or any bugs or documentation errors, please do report them to crypt-gpg at neomailbox.com.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong></strong><strong>new()</strong><strong></strong>
  </dt>
  <dd>
    <p>Creates and returns a new Crypt::GPG object.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATA METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>gpgbin($path)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1GPGBIN\s0</strong> instance variable which gives the path to the GnuPG binary.</p>
  </dd>
  <dt>
    <strong>gpgopts($opts)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1GPGOPTS\s0</strong> instance variable which may be used to pass additional options to the GnuPG binary. For proper functioning of this module, it is advisable to always include '--lock-multiple' in the \s-1GPGOPTS\s0 string.</p>
  </dd>
  <dt>
    <strong>delay($seconds)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1DELAY\s0</strong> instance variable. This is no longer necessary (nor used) in the current version of the module, but remains so existing scripts don't break.</p>
  </dd>
  <dt>
    <strong>secretkey($keyid)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1SECRETKEY\s0</strong> instance variable which may be a KeyID or a username. This is the \s-1ID\s0 of the default key to use for signing.</p>
  </dd>
  <dt>
    <strong>passphrase($passphrase)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1PASSPHRASE\s0</strong> instance variable, required for signing and decryption.</p>
  </dd>
  <dt>
    <strong>text($boolean)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1TEXT\s0</strong> instance variable. If set true, GnuPG will use network-compatible line endings for proper cross-platform compatibility and the plaintext will gain a newline at the end, if it does not already have one.</p>
  </dd>
  <dt>
    <strong>armor($boolean)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1ARMOR\s0</strong> instance variable, controlling the \s-1ASCII\s0 armoring of output. The default is to use ascii-armoring. The module has not been tested with this option turned off, and most likely will not work if you switch this off.</p>
  </dd>
  <dt>
    <strong>detach($boolean)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1DETACH\s0</strong> instance variable. If set true, the sign method will produce detached signature certificates, else it won't. The default is to produce detached signatures.</p>
  </dd>
  <dt>
    <strong>encryptsafe($boolean)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1ENCRYPTSAFE\s0</strong> instance variable. If set true, encryption will fail if trying to encrypt to a key which is not trusted. This is the default. Turn this off if you want to encrypt to untrusted keys.</p>
  </dd>
  <dt>
    <strong>debug($boolean)</strong>
  </dt>
  <dd>
    <p>Sets the <strong>\s-1DEBUG\s0</strong> instance variable which causes the raw output of Crypt::GPG's interaction with the GnuPG binary to be dumped to \s-1STDOUT\s0. By default, debugging is off.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OBJECT METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>sign(@message)</strong>
  </dt>
  <dd>
    <p>Signs <strong>@message</strong> with the secret key specified with <strong></strong><strong>secretkey()</strong><strong></strong> and returns the result as a string.</p>
  </dd>
  <dt>
    <strong>decrypt(&#92;@message, [&#92;@signature])</strong>
  </dt>
  <dd>
    <p>This is just an alias for <strong></strong><strong>verify()</strong><strong></strong></p>
  </dd>
  <dt>
    <strong>verify(&#92;@message, [&#92;@signature])</strong>
  </dt>
  <dd>
    <p>Decrypts and/or verifies the message in <strong>@message</strong>, optionally using the detached signature in <strong>@signature</strong>, and returns a list whose first element is plaintext message as a string. If the message was signed, a Crypt::GPG::Signature object is returned as the second element of the list. The Crypt::GPG::Signature object can be queried with the following methods:    $sig-&gt;validity();    # 'GOOD', 'BAD', or 'UNKNOWN'    $sig-&gt;keyid();       # ID of signing key    $sig-&gt;time();        # Time the signature was made    $sig-&gt;trusted();     # Signature trust level</p>
  </dd>
  <dt>
    <strong>msginfo(@ciphertext)</strong>
  </dt>
  <dd>
    <p>Returns a list of the recipient key IDs that <strong>@ciphertext</strong> is encrypted to. Encrypts <strong>$plaintext</strong> with the public keys of the recipients listed in <strong>$keylist</strong> and returns the result in a string, or <strong>undef</strong> if there was an error while processing. Returns undef if any of the keys are not found. Either $plaintext or $keylist may be specified as either an arrayref or a simple scalar. If $plaintext is a an arrayref, it will be <em>join()</em>ed without newlines. If you want to encrypt to multiple recipients, you must use the arrayref version of $keylist. A scalar $keylist works for only a single key \s-1ID\s0. If the -sign option is provided, the message will be signed before encryption. The secret key and passphrase must be set for signing to work. They can be set with the <em>secretkey()</em> and <em>passphrase()</em> methods. Adds the keys given in <strong>$key</strong> to the user's key ring and returns a list of Crypt::GPG::Key objects corresponding to the keys that were added. $key may be a string or an array reference. If <strong>$pretend</strong> is true, it pretends to add the key and creates the key object, but doesn't actually perform the key addition. Optionally, a list of key IDs may be specified. If a list of key IDs is specified, only keys that match those IDs will be imported. The rest will be ignored.</p>
  </dd>
  <dt>
    <strong>export($key)</strong>
  </dt>
  <dd>
    <p>Exports the key specified by the Crypt::GPG::Key object <strong>$key</strong> and returns the result as a string. Creates a new keypair with the parameters specified. The only supported <strong>$keytype</strong> currently is '\s-1ELG-E\s0'. <strong>$keysize</strong> can be any of 1024, 2048, 3072 or 4096. Returns undef if there was an error, otherwise returns a filehandle that reports the progress of the key generation process similar to the way GnuPG does. The key generation is not complete till you read an \s-1EOF\s0 from the returned filehandle. Certifies to the authenticity of UIDs of the key with \s-1ID\s0 $keyid. If $local is true, the certification will be non-exportable. The @uids parameter should contain the list of UIDs to certify (the first \s-1UID\s0 of a key is 0).</p>
  </dd>
  <dt>
    <strong>keydb(@keyids)</strong>
  </dt>
  <dd>
    <p>Returns an array of Crypt::GPG::Key objects corresponding to the Key IDs listed in <strong>@keyids</strong>. This method used to be called <strong>keyinfo</strong> and that is still an alias to this method.</p>
  </dd>
  <dt>
    <strong>parsekeys(@keylist)</strong>
  </dt>
  <dd>
    <p>Parses a raw GnuPG formatted key listing in <strong>@keylist</strong> and returns an array of Crypt::GPG::Key objects. Change the passphrase for a key. Returns true if the passphrase change succeeded, false if not, or undef if there was an error.</p>
  </dd>
  <dt>
    <strong>delkey($keyid)</strong>
  </dt>
  <dd>
    <p>Deletes the key specified by the Crypt::GPG::Key object <strong>$key</strong> from the user's key ring. Returns undef if there was an error, or 1 if the key was successfully deleted.</p>
  </dd>
  <dt>
    <strong>disablekey($keyid)</strong>
  </dt>
  <dd>
    <p>Disables the key specified by the Crypt::GPG::Key object <strong>$key</strong>.</p>
  </dd>
  <dt>
    <strong>enablekey($keyid)</strong>
  </dt>
  <dd>
    <p>Enables the key specified by the Crypt::GPG::Key object <strong>$key</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Crypt::GPG::Signature</h2>
        <div class="sectioncontent">
<p>  Documentation coming soon.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Crypt::GPG::Key</h2>
        <div class="sectioncontent">
<p>  Documentation coming soon.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<ul>
<li><p>Key server access.</p></li><li><p>More complete key manipulation interface.</p></li><li><p>Filehandle interface to handle large messages.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<ul>
<li><p>Error checking needs work.</p></li><li><p>Some key manipulation functions are missing.</p></li><li><p>The method call interface is subject to change in future versions.</p></li><li><p>The current implementation will probably eat up all your \s-1RAM\s0 if you try to operate on huge messages. In future versions, this will be addressed by reading from and returning filehandles, rather than using in-core data.</p></li><li><p>Methods may break if you don't use \s-1ASCII\s0 armoring.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHANGELOG</h2>
        <div class="sectioncontent">
<p>$Log: \s-1GPG\s0.pm,v $ Revision 1.52  2005/02/23 09:12:54  cvs  - Overhauled to use IPC::Run instead of Expect.  - Test suite split up into multiple scripts. Revision 1.42  2002/12/11 03:33:19  cvs  - Fixed bug in certify() when trying to certify revoked a key.  - Applied dharris&#92;x40drh.net's patch to allow for varying date formats    between gpg versions, and fix time parsing and the    Crypt::GPG::Signature autoloaded accessor functions. Revision 1.40  2002/09/23 23:01:53  cvs  - Fixed a bug in keypass()  - Documentation fixes. Revision 1.37  2002/09/21 02:37:49  cvs  - Fixed signing option in encrypt. Revision 1.36  2002/09/21 00:03:29  cvs  - Added many tests and fixed a bunch of bugs. Revision 1.34  2002/09/20 19:07:11  cvs  - Extensively modified formatting to make the code easier to    read. All lines are now &lt; 80 chars.  - Removed all instances of invoking a shell.  - Misc. other stuff. Revision 1.31  2002/09/20 16:38:45  cvs  - Cleaned up export and addkey. Fixed(?) addkey clobbering trustdb    problem (thanks to jrray&#92;x40spacemeat.com for the patch). Added    support for signature verification on addkey pretend.  - No calls to POSIX::tmpnam remain (thanks to radek&#92;x40karnet.pl and    jrray&#92;x40spacemeat.com for suggesting File::Temp). Revision 1.30  2002/09/20 15:25:47  cvs  - Fixed up tempfile handling and eliminated calls to the shell in    encrypt(), sign() and msginfo(). Passing all currently defined    tests.  - Hopefully also fixed signing during encryption and verification of    detached signatures. Not tested this yet. Revision 1.29  2002/09/20 11:19:02  cvs  - Removed hack to Version: string. Only the Comment: string in GPG    output is now modified by Crypt::GPG. (Thanks to    eisen&#92;x40schlund.de for pointing out the bug here)  - Removed code that incorrectly replaced 'PGP MESSAGE' with 'PGP    SIGNATURE' on detached signatures. (Thanks to ddcc&#92;x40mit.edu for    pointing this out).  - Fixed up addkey() to properly handle pretend mode and to    selectively import only requested key IDs from a key block.  - parsekeys() now also figures out which keyring a key belongs to.  - Added certify() method, to enable certifying keys.  - Added Crypt::GPG::Signature methods - validity(), keyid(), time()    and trusted().</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Crypt::GPG is Copyright (c) 2000-2005 Ashish Gulhati &lt;crypt-gpg at neomailbox.com&gt;. All Rights Reserved.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p>Thanks to Barkha, my sunshine. And to the GnuPG team and everyone who writes free software.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This code is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS REPORTS, PATCHES, FEATURE REQUESTS</h2>
        <div class="sectioncontent">
<p>Are very welcome. Email crypt-gpg at neomailbox.com.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Crypt::ECB.3pm.html"><span aria-hidden="true">&larr;</span> Crypt::ECB.3pm: Encrypt data using ecb mode</a></li>
   <li class="next"><a href="Crypt::HCE_SHA.3pm.html">Crypt::HCE_SHA.3pm: Perl extension implementing one way hash chaining encryption using sha <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
