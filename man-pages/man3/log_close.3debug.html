<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>log_close: Log routines for debugging</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Log routines for debugging">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="log_close (3debug) manual">
  <meta name="twitter:description" content="Log routines for debugging">
  <meta name="twitter:image" content="https://www.carta.tech/images/libdebug0-dev-log_close-3debug.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3debug/log_close.3debug.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="log_close (3debug) manual" />
  <meta property="og:description" content="Log routines for debugging" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libdebug0-dev-log_close-3debug.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">log_close<small> (3debug)</small></h1>
        <p class="lead">Log routines for debugging</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3debug/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3debug/log_close.3debug.html">
      <span itemprop="name">log_close: Log routines for debugging</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libdebug0-dev/">
      <span itemprop="name">libdebug0-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3debug/log_close.3debug.html">
      <span itemprop="name">log_close: Log routines for debugging</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">LIBRARIES</h2>
        <div class="sectioncontent">
<p>Debug Library (-ldebug)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;debug/log.h&gt;</strong>

<strong>int log_open(const char *</strong><em>logfile</em><strong>, int </strong><em>level</em><strong>, int </strong><em>flags</em><strong>);</strong>

<strong>void log_close(void);</strong>

<strong>int log_reset(void);</strong>

<strong>int log_flush(void);</strong>

<strong>int log_printf(int </strong><em>level</em><strong>, const char *</strong><em>fmt</em><strong>, ...);</strong>

<strong>int log_vprintf(int </strong><em>level</em><strong>, const char *</strong><em>fmt</em><strong>, va_list </strong><em>ap</em><strong>);</strong>

<strong>int log_putc(int </strong><em>level</em><strong>, int </strong><em>c</em><strong>);</strong>

<strong>int log_puts(int </strong><em>level</em><strong>, const char *</strong><em>str</em><strong>);</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>log_open()</strong> initializes the logging system. The filename of the file to which messages are logged should be specified by <em>logfile</em>, or <strong>NULL</strong> if messages should be printed to the console. The values for <em>level</em> and <em>flags</em> are given in the next section.</p><p>From version 0.4.1 onwards the debug library also supports logging to syslog instead of a file. Instead of specifying a file, just specify a string in the form <em>ident.facility</em>, where <em>ident</em> is a string which will be prepended to each syslog message and is usually the program name. The <em>facility</em> should be the facility to which messages should be logged.</p><p><strong>log_close()</strong> flushes all pending messages, and closes the file descriptor of the log file (if any).</p><p><strong>log_reset()</strong> reinitializes the logging system. If any files are currently opened for writing, it will be closed and reopened. This is useful if you need to rotate log files.</p><p><strong>log_flush()</strong> flushes all pending messages (if any).</p><p><strong>log_printf()</strong> and <strong>log_vprintf()</strong> are replacements for <a href="../man3/printf.3.html"><strong>printf</strong>(3)</a> and <a href="../man3/vprintf.3.html"><strong>vprintf</strong>(3)</a> respectively.</p><p><strong>log_putc()</strong> will log a single character. This is the equivalent of <a href="../man3/putchar.3.html"><strong>putchar</strong>(3)</a>.</p><p><strong>log_puts()</strong> will log a string. It is the equivalent of <a href="../man3/puts.3.html"><strong>puts</strong>(3)</a>, except that is does not append a trailing newline.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">
<p>This section lists the parameters used to set the values of <em>level</em> and <em>flags</em>.</p><h3>level</h3>
<p>This determines the importance of the message. The levels are, in order of decreasing verbosity:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>LOG_NOISY</strong></p>
  </dt>
  <dd>
    <p>verbose debug messages</p>
  </dd>
  <dt>
    <p><strong>LOG_DEBUG</strong></p>
  </dt>
  <dd>
    <p>debug messages</p>
  </dd>
  <dt>
    <p><strong>LOG_VERBOSE</strong></p>
  </dt>
  <dd>
    <p>informational messages</p>
  </dd>
  <dt>
    <p><strong>LOG_NORMAL</strong></p>
  </dt>
  <dd>
    <p>normal, but significant, conditions</p>
  </dd>
  <dt>
    <p><strong>LOG_WARNING</strong></p>
  </dt>
  <dd>
    <p>warning conditions</p>
  </dd>
  <dt>
    <p><strong>LOG_ERROR</strong></p>
  </dt>
  <dd>
    <p>error conditions</p>
  </dd>
  <dt>
    <p><strong>LOG_QUIET</strong></p>
  </dt>
  <dd>
    <p>no messages are printed</p>
  </dd>

</dl>
<p>The <em>level</em> argument to <strong>log_printf()</strong>, <strong>log_vprintf()</strong>, <strong>log_putc()</strong>, and <strong>log_puts()</strong> specify the level at which the message should be printed. It does not make sense to specify <strong>LOG_QUIET</strong> to these functions.</p><p>The <em>level</em> argument to <strong>log_open()</strong> sets the verbosity of the program. Any messages printed with a <em>level</em> higher (more verbose) than that specified to the <strong>log_open()</strong> function, will be discarded.</p>
<h3>flags</h3>
<p>The <em>flags</em> argument to <strong>log_open()</strong> is an OR of any of these:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>LOG_HAVE_COLORS</strong></p>
  </dt>
  <dd>
    <p>If this flag is specified and messages are printed to the console (i.e. no log file is specified), messages will be printed in different colors, depending on their log level.</p>
  </dd>
  <dt>
    <p><strong>LOG_PRINT_FUNCTION</strong></p>
  </dt>
  <dd>
    <p>If this flag is specified, the function in which the print function was called would be printed in addition to the filename and line number.</p>
  </dd>
  <dt>
    <p><strong>LOG_DEBUG_PREFIX_ONLY</strong></p>
  </dt>
  <dd>
    <p>If this flag is specified, only messages with a level higher or equal to (i.e. more or as verbose) <strong>LOG_DEBUG</strong> will be printed in color and with file, line number, and (if necessary), the function.</p>
  </dd>
  <dt>
    <p><strong>LOG_DETECT_DUPLICATES</strong></p>
  </dt>
  <dd>
    <p>If this flag is specified, messages would be buffered and duplicate lines would not be printed. Instead, the first message would be printed, followed by a line describing the number of times the message repeated. This is a great way to prevent flooding, but unfortunately it has the side effect of always being one statement behind.</p>
  </dd>
  <dt>
    <p><strong>LOG_DETECT_FLOODING</strong></p>
  </dt>
  <dd>
    <p>If specified, the rate at which messages are printed would be limited in order to avoid flooding. This feature have not been implemented yet, and is currently ignored.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>All functions except <strong>log_close()</strong> return 0 if successful, -1 if some error occurred. Check errno to see which error occurred.</p><p>If <strong>log_reset()</strong> or <strong>log_open()</strong> fails, behaviour is undefined and it should be assumed that no logging is possible.</p><p>The <strong>log_close()</strong> function returns no value.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>If this routines are combined with the memory routines, care should be taken to call open and close functions in the right order. The correct order is as follows:</p>
<pre>
mem_open (NULL);
log_open (NULL,LOG_NORMAL,LOG_HAVE_COLORS | LOG_PRINT_FUNCTION);
atexit (mem_close);
atexit (log_close);
</pre>
<p>Of course, <a href="../man3/atexit.3.html"><strong>atexit</strong>(3)</a> should only be used if the program will not forked.</p><p>None of the libdebug routines are thread-safe. I'm not planning to change this either! For more information, please see http://threading.2038bug.com/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO log_close&hellip;</h2>
        <div class="sectioncontent">
<p><strong>mem_open</strong>(3), <a href="../man3/errno.3.html"><strong>errno</strong>(3)</a>, <a href="../man3/atexit.3.html"><strong>atexit</strong>(3)</a>, <a href="../man3/printf.3.html"><strong>printf</strong>(3)</a>, <a href="../man3/vprintf.3.html"><strong>vprintf</strong>(3)</a>, <a href="../man3/putchar.3.html"><strong>putchar</strong>(3)</a>, <a href="../man3/puts.3.html"><strong>puts</strong>(3)</a></p><p><a href="../man8/logrotate.8.html"><strong>logrotate</strong>(8)</a>, <a href="../man3/syslog.3.html"><strong>syslog</strong>(3)</a>, <a href="../man1/logger.1.html"><strong>logger</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Abraham vd Merwe &lt;abz@blio.com&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="hexdump.3debug.html"><span aria-hidden="true">&larr;</span> hexdump.3debug: Dump binary data in hex/ascii format</a></li>
   <li class="next"><a href="log_flush.3debug.html">log_flush.3debug: Log routines for debugging <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
