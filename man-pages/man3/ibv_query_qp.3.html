<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ibv_query_qp: Get the attributes of a queue pair (qp)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Get the attributes of a queue pair (qp)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ibv_query_qp (3) manual">
  <meta name="twitter:description" content="Get the attributes of a queue pair (qp)">
  <meta name="twitter:image" content="https://www.carta.tech/images/libibverbs-dev-ibv_query_qp-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/ibv_query_qp.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ibv_query_qp (3) manual" />
  <meta property="og:description" content="Get the attributes of a queue pair (qp)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libibverbs-dev-ibv_query_qp-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ibv_query_qp<small> (3)</small></h1>
        <p class="lead">Get the attributes of a queue pair (qp)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ibv_query_qp.3.html">
      <span itemprop="name">ibv_query_qp: Get the attributes of a queue pair (qp)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libibverbs-dev/">
      <span itemprop="name">libibverbs-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ibv_query_qp.3.html">
      <span itemprop="name">ibv_query_qp: Get the attributes of a queue pair (qp)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;infiniband/verbs.h&gt;</strong>

<strong>int ibv_query_qp(struct ibv_qp </strong><em>*qp</em><strong>, struct ibv_qp_attr </strong><em>*attr</em><strong>,</strong>
<strong>                 int </strong><em>attr_mask</em><strong>,</strong>
<strong>                 struct ibv_qp_init_attr </strong><em>*init_attr</em><strong>);</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ibv_query_qp()</strong> gets the attributes specified in <em>attr_mask</em> for the QP <em>qp</em> and returns them through the pointers <em>attr</em> and <em>init_attr</em>. The argument <em>attr</em> is an ibv_qp_attr struct, as defined in &lt;infiniband/verbs.h&gt;.</p>
<pre>
struct ibv_qp_attr {
enum ibv_qp_state       qp_state;            /* Current QP state */
enum ibv_qp_state       cur_qp_state;        /* Current QP state - irrelevant for ibv_query_qp */
enum ibv_mtu            path_mtu;            /* Path MTU (valid only for RC/UC QPs) */
enum ibv_mig_state      path_mig_state;      /* Path migration state (valid if HCA supports APM) */
uint32_t                qkey;                /* Q_Key of the QP (valid only for UD QPs) */
uint32_t                rq_psn;              /* PSN for receive queue (valid only for RC/UC QPs) */
uint32_t                sq_psn;              /* PSN for send queue (valid only for RC/UC QPs) */
uint32_t                dest_qp_num;         /* Destination QP number (valid only for RC/UC QPs) */
int                     qp_access_flags;     /* Mask of enabled remote access operations (valid only for RC/UC QPs) */
struct ibv_qp_cap       cap;                 /* QP capabilities */
struct ibv_ah_attr      ah_attr;             /* Primary path address vector (valid only for RC/UC QPs) */
struct ibv_ah_attr      alt_ah_attr;         /* Alternate path address vector (valid only for RC/UC QPs) */
uint16_t                pkey_index;          /* Primary P_Key index */
uint16_t                alt_pkey_index;      /* Alternate P_Key index */
uint8_t                 en_sqd_async_notify; /* Enable SQD.drained async notification - irrelevant for ibv_query_qp */
uint8_t                 sq_draining;         /* Is the QP draining? (Valid only if qp_state is SQD) */
uint8_t                 max_rd_atomic;       /* Number of outstanding RDMA reads & atomic operations on the destination QP (valid only for RC QPs) */
uint8_t                 max_dest_rd_atomic;  /* Number of responder resources for handling incoming RDMA reads & atomic operations (valid only for RC QPs) */
uint8_t                 min_rnr_timer;       /* Minimum RNR NAK timer (valid only for RC QPs) */
uint8_t                 port_num;            /* Primary port number */
uint8_t                 timeout;             /* Local ack timeout for primary path (valid only for RC QPs) */
uint8_t                 retry_cnt;           /* Retry count (valid only for RC QPs) */
uint8_t                 rnr_retry;           /* RNR retry (valid only for RC QPs) */
uint8_t                 alt_port_num;        /* Alternate port number */
uint8_t                 alt_timeout;         /* Local ack timeout for alternate path (valid only for RC QPs) */
};
</pre>
<p>For details on struct ibv_qp_cap see the description of <strong>ibv_create_qp()</strong>. For details on struct ibv_ah_attr see the description of <strong>ibv_create_ah()</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p><strong>ibv_query_qp()</strong> returns 0 on success, or the value of errno on failure (which indicates the failure reason).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The argument <em>attr_mask</em> is a hint that specifies the minimum list of attributes to retrieve. Some RDMA devices may return extra attributes not requested, for example if the value can be returned cheaply. This has the same form as in <strong>ibv_modify_qp()</strong>.</p><p>Attribute values are valid if they have been set using <strong>ibv_modify_qp()</strong>. The exact list of valid attributes depends on the QP state.</p><p>Multiple calls to <strong>ibv_query_qp()</strong> may yield some differences in the values returned for the following attributes: qp_state, path_mig_state, sq_draining, ah_attr (if APM is enabled).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ibv_query_qp&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/ibv_create_qp.3.html"><strong>ibv_create_qp</strong>(3)</a>, <a href="../man3/ibv_destroy_qp.3.html"><strong>ibv_destroy_qp</strong>(3)</a>, <a href="../man3/ibv_modify_qp.3.html"><strong>ibv_modify_qp</strong>(3)</a>, <a href="../man3/ibv_create_ah.3.html"><strong>ibv_create_ah</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>Dotan Barak &lt;dotanba@gmail.com&gt;</p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ibv_query_port.3.html"><span aria-hidden="true">&larr;</span> ibv_query_port.3: Query an rdma port's attributes</a></li>
   <li class="next"><a href="ibv_query_srq.3.html">ibv_query_srq.3: Get the attributes of a shared receive queue (srq) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
