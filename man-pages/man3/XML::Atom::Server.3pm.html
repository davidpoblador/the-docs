<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XML::Atom::Server: A server for the atom api</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A server for the atom api">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="XML::Atom::Server (3pm) manual">
  <meta name="twitter:description" content="A server for the atom api">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxml-atom-perl-XML::Atom::Server-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/XML::Atom::Server.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="XML::Atom::Server (3pm) manual" />
  <meta property="og:description" content="A server for the atom api" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxml-atom-perl-XML::Atom::Server-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">XML::Atom::Server<small> (3pm)</small></h1>
        <p class="lead">A server for the atom api</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/XML::Atom::Server.3pm.html">
      <span itemprop="name">XML::Atom::Server: A server for the atom api</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxml-atom-perl/">
      <span itemprop="name">libxml-atom-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/XML::Atom::Server.3pm.html">
      <span itemprop="name">XML::Atom::Server: A server for the atom api</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    package My::Server;
    use base qw( XML::Atom::Server );
    sub handle_request {
        my $server = shift;
        $server-&gt;authenticate or return;
        my $method = $server-&gt;request_method;
        if ($method eq &apos;POST&apos;) {
            return $server-&gt;new_post;
        }
        ...
    }

    my %Passwords;
    sub password_for_user {
        my $server = shift;
        my($username) = @_;
        $Passwords{$username};
    }

    sub new_post {
        my $server = shift;
        my $entry = $server-&gt;atom_body or return;
        ## $entry is an XML::Atom::Entry object.
        ## ... Save the new entry ...
    }

    package main;
    my $server = My::Server-&gt;new;
    $server-&gt;run;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>XML::Atom::Server</em> provides a base class for Atom \s-1API\s0 servers. It handles all core server processing, both the \s-1SOAP\s0 and \s-1REST\s0 formats of the protocol, and \s-1WSSE\s0 authentication. It can also run as either a mod_perl handler or as part of a \s-1CGI\s0 program.</p><p>It does not provide functions specific to any particular implementation, such as posting an entry, retrieving a list of entries, deleting an entry, etc. Implementations should subclass <em>XML::Atom::Server</em>, overriding the <em>handle_request</em> method, and handle all functions such as this themselves.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUBCLASSING</h2>
        <div class="sectioncontent">
<h3>Request Handling</h3>
<p>Subclasses of <em>XML::Atom::Server</em> must override the <em>handle_request</em> method to perform all request processing. The implementation must set all response headers, including the response code and any relevant \s-1HTTP\s0 headers, and should return a scalar representing the response body to be sent back to the client.</p><p>For example:</p><p>    sub handle_request {         my $server = shift;         my $method = $server-&gt;request_method;         if ($method eq &apos;POST&apos;) {             return $server-&gt;new_post;         }         ## ... handle GET, PUT, etc     }</p><p>    sub new_post {         my $server = shift;         my $entry = $server-&gt;atom_body or return;         my $id = save_this_entry($entry);  ## Implementation-specific         $server-&gt;response_header(Location =&gt; $server-&gt;uri . &apos;/entry_id=&apos; . $id);         $server-&gt;response_code(201);         $server-&gt;response_content_type(&apos;application/x.atom+xml&apos;);         return serialize_entry($entry);    ## Implementation-specific     }</p>
<h3>Authentication</h3>
<p>Servers that require authentication for posting or retrieving entries or feeds should override the <em>password_for_user</em> method. Given a username (from the \s-1WSSE\s0 header), <em>password_for_user</em> should return that user's password in plaintext. This will then be combined with the nonce and the creation time to generate the digest, which will be compared with the digest sent in the \s-1WSSE\s0 header. If the supplied username doesn't exist in your user database or alike, just return \*(C`undef\*(C'.</p><p>For example:</p><p>    my %Passwords = ( foo =&gt; &apos;bar&apos; );   ## The password for "foo" is "bar".     sub password_for_user {         my $server = shift;         my($username) = @_;         $Passwords{$username};     }</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p><em>XML::Atom::Server</em> provides a variety of methods to be used by subclasses for retrieving headers, content, and other request information, and for setting the same on the response.</p><h3>Client Request Parameters</h3>
<ul>
<li><p>$server-&gt;uri Returns the \s-1URI\s0 of the Atom server implementation.</p></li><li><p>$server-&gt;request_method Returns the name of the request method sent to the server from the client (for example, \*(C`GET\*(C', \*(C`POST\*(C', etc). Note that if the client sent the request in a \s-1SOAP\s0 envelope, the method is obtained from the <em>SOAPAction</em> \s-1HTTP\s0 header.</p></li><li><p>$server-&gt;request_header($header) Retrieves the value of the \s-1HTTP\s0 request header <em></em><strong>$header</strong><em></em>.</p></li><li><p>$server-&gt;request_content Returns a scalar containing the contents of a \s-1POST\s0 or \s-1PUT\s0 request from the client.</p></li><li><p>$server-&gt;request_param($param) <em>XML::Atom::Server</em> automatically parses the \s-1PATH_INFO\s0 sent in the request and breaks it up into key-value pairs. This can be used to pass parameters. For example, in the \s-1URI\s0     http://localhost/atom-server/entry_id=1 the <em>entry_id</em> parameter would be set to 1. <em>request_param</em> returns the value of the value of the parameter <em></em><strong>$param</strong><em></em>.</p></li>
</ul>
<h3>Setting up the Response</h3>
<ul>
<li><p>$server-&gt;response_header($header, $value) Sets the value of the \s-1HTTP\s0 response header <em></em><strong>$header</strong><em></em> to <em></em><strong>$value</strong><em></em>.</p></li><li><p>$server-&gt;response_code([ $code ]) Returns the current response code to be sent back to the client, and if <em></em><strong>$code</strong><em></em> is given, sets the response code.</p></li><li><p>$server-&gt;response_content_type([ $type ]) Returns the current <em>Content-Type</em> header to be sent back to the client, and <em></em><strong>$type</strong><em></em> is given, sets the value for that header.</p></li>
</ul>
<h3>Processing the Request</h3>
<ul>
<li><p>$server-&gt;authenticate Attempts to authenticate the request based on the authentication information present in the request (currently just \s-1WSSE\s0). This will call the <em>password_for_user</em> method in the subclass to obtain the cleartext password for the username given in the request.</p></li><li><p>$server-&gt;atom_body Returns an <em>XML::Atom::Entry</em> object containing the entry sent in the request.</p></li>
</ul>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>Once you have defined your server subclass, you can set it up either as a \s-1CGI\s0 program or as a mod_perl handler.</p><p>A simple \s-1CGI\s0 program would look something like this:</p><p>    #!/usr/bin/perl -w     use strict;</p><p>    use My::Server;     my $server = My::Server-&gt;new;     $server-&gt;run;</p><p>A simple mod_perl handler configuration would look something like this:</p><p>    PerlModule My::Server     &lt;Location /atom-server&gt;         SetHandler perl-script         PerlHandler My::Server     &lt;/Location&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERROR HANDLING</h2>
        <div class="sectioncontent">
<p>If you wish to return an error from <em>handle_request</em>, you can use the built-in <em>error</em> method:</p><p>    sub handle_request {         my $server = shift;         ...         return $server-&gt;error(500, "Something went wrong");     }</p><p>This will be returned to the client with a response code of 500 and an error string of \*(C`Something went wrong\*(C'. Errors are automatically serialized into \s-1SOAP\s0 faults if the incoming request is enclosed in a \s-1SOAP\s0 envelope.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR & COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Please see the <em>XML::Atom</em> manpage for author, copyright, and license information.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XML::Atom::Person.3pm.html"><span aria-hidden="true">&larr;</span> XML::Atom::Person.3pm: Author or contributor object</a></li>
   <li class="next"><a href="XML::Atom::Service.3pm.html">XML::Atom::Service.3pm: Atom service document object <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
