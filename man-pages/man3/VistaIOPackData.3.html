<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VistaIOPackData: Pack or unpack a vector of values</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Pack or unpack a vector of values">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="VistaIOPackData (3) manual">
  <meta name="twitter:description" content="Pack or unpack a vector of values">
  <meta name="twitter:image" content="https://www.carta.tech/images/libvistaio-dev-VistaIOPackData-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/VistaIOPackData.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="VistaIOPackData (3) manual" />
  <meta property="og:description" content="Pack or unpack a vector of values" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libvistaio-dev-VistaIOPackData-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">VistaIOPackData<small> (3)</small></h1>
        <p class="lead">Pack or unpack a vector of values</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/VistaIOPackData.3.html">
      <span itemprop="name">VistaIOPackData: Pack or unpack a vector of values</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libvistaio-dev/">
      <span itemprop="name">libvistaio-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/VistaIOPackData.3.html">
      <span itemprop="name">VistaIOPackData: Pack or unpack a vector of values</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
typedef enum { VistaIOLsbFirst, VistaIOMsbFirst } VistaIOPackOrder;
void VistaIOPackData (<em>repn</em>, <em>nels</em>, <em>unpacked</em>,  <em>order</em>, <em>plength</em>, <em>ppacked</em>, <em>palloced</em>)
VistaIORepnKind <em>repn</em>;
size_t <em>nels</em>, *<em>plength</em>;
VistaIOPointer <em>unpacked</em>, *<em>ppacked</em>;
VistaIOPackOrder <em>order</em>;
VistaIOBoolean *<em>palloced</em>;
</pre>
<p>void VistaIOUnpackData (<em>repn</em>, <em>nels</em>, <em>packed</em>,  <em>order</em>, <em>plength</em>, <em>punpacked</em>, <em>palloced</em>)</p><p>VistaIORepnKind <em>repn</em>; size_t <em>nels</em>, *<em>plength</em>; VistaIOPointer <em>packed</em>, *<em>punpacked</em>; VistaIOPackOrder <em>order</em>; VistaIOBoolean *<em>palloced</em>;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <em>repn</em>
  </dt>
  <dd>
    <p>Specifies the representation of the values to be packed or unpacked.</p>
  </dd>
  <dt>
    <em>nels</em>
  </dt>
  <dd>
    <p>Specifies the number of values to be packed or unpacked.</p>
  </dd>
  <dt>
    <em>unpacked</em>
  </dt>
  <dd>
    <p>Specifies the location of the values to be packed.</p>
  </dd>
  <dt>
    <em>packed</em>
  </dt>
  <dd>
    <p>Specifies the location of the values to be unpacked.</p>
  </dd>
  <dt>
    <em>order</em>
  </dt>
  <dd>
    <p>Specifies the order in which values smaller than a byte are packed into a single byte, or values larger than a byte are split among multiple bytes.</p>
  </dd>
  <dt>
    <em>plength</em>
  </dt>
  <dd>
    <p>Specifies and returns the length of the (un)packed data, in bytes. The length is rounded up to the next whole byte.</p>
  </dd>
  <dt>
    <em>ppacked</em>
  </dt>
  <dd>
    <p>Specifies or returns the location of the packed data.</p>
  </dd>
  <dt>
    <em>punpacked</em>
  </dt>
  <dd>
    <p>Specifies or returns the location of the unpacked data.</p>
  </dd>
  <dt>
    <em>palloced</em>
  </dt>
  <dd>
    <p>If <small>NULL</small><strong>,</strong><small>specifies</small><strong>that</strong><small>a</small><strong>buffer</strong><small>is</small><strong>being</strong><small>supplied</small><strong>to</strong><small>contain</small><strong>the</strong><small>results</small><strong>of</strong> (un)packing. Otherwise, returns <small>TRUE</small> if memory was allocated by the routine to contain the results, and <small>FALSE</small> otherwise.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>VistaIOPackData</strong> packs a vector of values into a block of contiguous bytes. Typically, it is used when preparing to output a series of values to a Vista data file. <strong>VistaIOUnpackData</strong> performs the inverse, unpacking a vector of values from a block of contiguous bytes. It is used when decoding a series of values read from a Vista data file.</p><p>Unpacked values reside in memory in a form dependent upon machine architecture. Packed values, on the other hand, are represented in a machine-independent manner using the fewest bits possible. If the values are of type <strong>VistaIOBit</strong>, for example, they might occupy one byte each in unpacked form, but in packed form each occupies a single bit. The types of values that can be (un)packed, and their form when packed, is as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>VistaIOBit</strong>
  </dt>
  <dd>
    <p>is packed as a single bit.</p>
  </dd>
  <dt>
    <strong>VistaIOUByte</strong>
  </dt>
  <dd>
    <p>is packed as an unsigned integer in a single 8-bit byte.</p>
  </dd>
  <dt>
    <strong>VistaIOSByte</strong>
  </dt>
  <dd>
    <p>is packed as a two's-complement integer in a single 8-bit byte.</p>
  </dd>
  <dt>
    <strong>VistaIOShort</strong>
  </dt>
  <dd>
    <p>is packed as a two's-complement integer in two 8-bit bytes.</p>
  </dd>
  <dt>
    <strong>VistaIOLong</strong>
  </dt>
  <dd>
    <p>is packed as a two's-complement integer in four 8-bit bytes.</p>
  </dd>
  <dt>
    <strong>VistaIOFloat</strong>
  </dt>
  <dd>
    <p>is packed as an IEEE-format floating-point number in four 8-bit bytes.</p>
  </dd>
  <dt>
    <strong>VistaIODouble</strong>
  </dt>
  <dd>
    <p>is packed as an IEEE-format floating-point number in eight 8-bit bytes.</p>
  </dd>
  <dt>
    <strong>VistaIOBoolean</strong>
  </dt>
  <dd>
    <p>is packed as a single bit.</p>
  </dd>

</dl>
<p>The values to be (un)packed must all have one of these types, as specified by the <em>repn</em> argument.</p><p>The <em>order</em> argument specifies the order with which bits are packed into a byte, or multi-byte, packed values are separated into bytes. If the packed values each require a single bit, <em>order</em> specifies whether successive values are to be packed into a byte from least-significant bit to most significant (<strong>VistaIOLsbFirst</strong>), or vice versa (<strong>VistaIOMsbFirst</strong>). If the packed values each require multiple bytes, <em>order</em> specifies whether those bytes are to be packed from least-significant byte to most significant (<strong>VistaIOLsbFirst</strong>), or vice versa (<strong>VistaIOMsbFirst</strong>). Data in Vista data files is packed with <em>order</em>&nbsp;=&nbsp;<strong>VistaIOMsbFirst</strong>.</p><p>For a call to <strong>VistaIOPackData</strong>, <em>nels</em> specifies the number of values to be packed and <em>unpacked</em> points to a vector containing them. You can specify where to place the packed values in either of two ways:</p><ul>
<li><p>You can supply your own buffer for the packed values by passing <small>NULL</small> in <em>palloced</em>, passing a pointer to the address of your buffer in <em>ppacked</em>, and passing a pointer to the length of your buffer in <em>plength</em>. On return, the actual length of the packed values will have been stored at *<em>plength</em>.</p></li><li><p>You can let <strong>VistaIOPackData</strong> determine the location of the packed values by passing in <em>palloced</em> a pointer to a <strong>VistaIOBoolean</strong> variable. <strong>VistaIOPackData</strong> then returns, via <em>ppacked</em> and <em>plength</em>, the location and length of the packed data. Depending on the type of values to be packed, their arrangement in memory, and <em>order</em>, actual packing may or may not be needed. That is, the packed and unpacked forms of the value may actually be identical. In this case, the returned location and length refer to the unpacked data, and <em>palloced</em> returns <small>FALSE</small> to indicate that no separate buffer for the packed data was allocated. If, however, the packed form differs from the unpacked form, <strong>VistaIOPackData</strong> will allocate memory for the packed data. The location and length of this memory are returned instead, and <em>palloced</em> returns <small>TRUE</small> to indicate that this memory should be freed when the packed values are no longer needed.</p></li>
</ul><p><strong>VistaIOUnpackData</strong> is called in an analogous manner. The <em>nels</em> argument specifies the number of values to be unpacked and <em>packed</em> points to a vector containing them. As for <strong>VistaIOPackData</strong>, you can specify where to place the unpacked values in either of two ways indicated by <em>palloced</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p>Both routines return <small>TRUE</small> if successful, and <small>FALSE</small> otherwise. In addition, they may set *<em>plength</em>, *<em>ppacked</em>, *<em>punpacked</em>, and *<em>palloced</em> as described above.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Here we pack a vector of bits, write the packed bits to a file, and free any storage used to represent the packed bits:</p>
<pre>
size_t nbits, length;
VistaIOBit *bits;
VistaIOPointer packed;
VistaIOBoolean alloced;
FILE *file;

...
VistaIOPackData (VistaIOBitRepn, nbits, bits, VistaIOMsbFirst, & length, & packed, & alloced);
fwrite ((char *) packed, 1, length, file);
if (alloced)
VistaIOFree (packed);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Packing or unpacking can be done in place. For example, in a call to <strong>VistaIOPackData</strong>, <em>unpacked</em> and *<em>ppacked</em> can point to the same storage.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The present implementation cannot pack values of type <strong>VistaIOUByte</strong>, <strong>VistaIOSByte</strong>, <strong>VistaIOShort</strong>, <strong>VistaIOLong</strong>, <strong>VistaIOFloat</strong>, or <strong>VistaIODouble</strong> if their packed and unpacked sizes differ.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    ``Byte order not recognized.''
  </dt>
  <dd>
    <p>The routines trie to automatically detect whether the present machine stores multi-byte values from most-to-least significant byte, or vice versa. If this message is issued it means that a port to a new machine architecture was unsuccessful, in which case some additional programming is needed to support the new architecture.</p>
  </dd>
  <dt>
    ``Insufficient space for (un)packed data.''
  </dt>
  <dd>
    <p>A buffer was supplied for the results of (un)packing, but the buffer is too small.</p>
  </dd>
  <dt>
    ``(Un)packing <em>type</em> from <em>mbits</em> to <em>nbits</em> bits is not supported.''
  </dt>
  <dd>
    <p>The present implementation cannot (un)pack values of type <strong>VistaIOUByte</strong>, <strong>VistaIOSByte</strong>, <strong>VistaIOShort</strong>, <strong>VistaIOLong</strong>, <strong>VistaIOFloat</strong>, or <strong>VistaIODouble</strong> if their packed and unpacked sizes differ. If asked to do so the routine will abort the program with this message.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Art Pope &lt;pope@cs.ubc.ca&gt;</p><p>Adaption to vistaio: Gert Wollny &lt;gw.fossdev@gmail.com&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="VistaIOOpenFile.3.html"><span aria-hidden="true">&larr;</span> VistaIOOpenFile.3: Open file with error checking</a></li>
   <li class="next"><a href="VistaIOParseCommand.3.html">VistaIOParseCommand.3: Parse command line arguments <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
