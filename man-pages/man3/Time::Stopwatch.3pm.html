<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Time::Stopwatch: Use tied scalars as timers</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Use tied scalars as timers">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Time::Stopwatch (3pm) manual">
  <meta name="twitter:description" content="Use tied scalars as timers">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtime-stopwatch-perl-Time::Stopwatch-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Time::Stopwatch.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Time::Stopwatch (3pm) manual" />
  <meta property="og:description" content="Use tied scalars as timers" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtime-stopwatch-perl-Time::Stopwatch-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Time::Stopwatch<small> (3pm)</small></h1>
        <p class="lead">Use tied scalars as timers</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Time::Stopwatch.3pm.html">
      <span itemprop="name">Time::Stopwatch: Use tied scalars as timers</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtime-stopwatch-perl/">
      <span itemprop="name">libtime-stopwatch-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Time::Stopwatch.3pm.html">
      <span itemprop="name">Time::Stopwatch: Use tied scalars as timers</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Time::Stopwatch;
    tie my $timer, &apos;Time::Stopwatch&apos;;

    do_something();
    print "Did something in $timer seconds.&#92;n";

    my @times = map {
        $timer = 0;
        do_something_else();
        $timer;
    } 1 .. 5;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Time::Stopwatch module provides a convenient interface to timing functions through tied scalars.  From the point of view of the user, scalars tied to the module simply increase their value by one every second.</p><p>Using the module should mostly be obvious from the synopsis.  You can provide an initial value for the timers either by assigning to them or by passing the value as a third argument to <em>tie()</em>.</p><p>If you have the module Time::HiRes installed, the timers created by Time::Stopwatch will automatically count fractional seconds.  Do <em>not</em> assume that the values of the timers are always integers.  You may test the constant \*(C`Time::Stopwatch::HIRES\*(C' to find out whether high resolution timing is enabled.</p><h3>A note on timing short intervals</h3>
<p>Time::Stopwatch is primarily designed for timing moderately long intervals (i.e. several seconds), where the overhead imposed by the <em>tie()</em> interface does not matter.  With Time::HiRes installed, it can nonetheless be used for even microsecond timing, provided that appropriate care is taken.</p><ul>
<li><p>Explicitly initialize the timer by assignment.  The first measurement taken before resetting the timer will be a few microseconds longer due to the overhead of the <em>tie()</em> call.</p></li><li><p><strong>Always</strong> subtract the overhead of the timing code.  This is true in general even if you're not using Time::Stopwatch.  (High-level benchmarking tools like Benchmark.pm do this automatically.)  See the code example below.</p></li><li><p>Take as many measurements as you can to minimize random errors.  The Statistics::Descriptive module may be useful for analyzing the data. This advice is also true for all benchmarking.</p></li><li><p>Remember that a benchmark measures the time take to run the benchmark. Any generalizations to real applications may or may not be valid.  If you want real world data, profile the real code in real use.</p></li>
</ul><p>The following sample code should give a relatively reasonable measurement of a the time taken by a short operation:</p><p>    use Time::HiRes;  # high resolution timing required     use Time::Stopwatch;</p><p>    use Statistics::Descriptive;     my $stat = Statistics::Descriptive::Sparse-&gt;new();</p><p>    tie my $time, &apos;Time::Stopwatch&apos;;  # code timer     tie my $wait, &apos;Time::Stopwatch&apos;;  # loop timer</p><p>    while ($wait &lt; 60) {  # run for one minute         my $diff = 0;         $time = 0; do_whatever(); $diff += $time;         $time = 0;                $diff -= $time;         $stat-&gt;add_data($diff);     }</p><p>    print("count: ", $stat-&gt;count(), " iterations&#92;n",           "mean:  ", $stat-&gt;mean(), " seconds&#92;n",           "s.d.:  ", $stat-&gt;standard_deviation(), " seconds&#92;n");</p><p>Note that the above code includes the time of the subroutine call in the measurement.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Since tied scalars do not (yet?) support atomic modification, use of operators like \*(C`$t++\*(C' or \*(C`$t *= 2\*(C' on timers will cause them to lose the time it takes to fetch, modify and store the value.  I <em>might</em> be able to get around this by overloading the return value of \*(C`FETCH\*(C', but I doubt if it's worth the trouble.  Just don't do that.</p><p>There is no way to force low-resolution timing if Time::HiRes has been installed.  I'm not sure why anyone would want to, since <em>int()</em> will do just fine if you want whole seconds, but still..</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHANGE LOG</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    1.00 (15 Mar 2001)
  </dt>
  <dd>
    <p>Explicitly localized $SIG{_\|_DIE_\|_} when testing for Time::HiRes availability.  Added \*(L"A note on timing short intervals\*(R" to the \s-1POD\s0 documentation.  Bumped version to 1, no longer beta.</p>
  </dd>
  <dt>
    0.03 (27 Feb 2001)
  </dt>
  <dd>
    <p>Modified tests to give more information, reduced subsecond accuracy test to 1/10 seconds to allow for inaccurate <em>select()</em> implementations. Tweaked synopsis and \s-1README\s0.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Time::Stopwatch&hellip;</h2>
        <div class="sectioncontent">
<p>Time::HiRes, \*(L"tie\*(R" in perlfunc</p><p>For a higher-level approach to timing, try (among others) the modules Time::SoFar, Devel::Timer, or Benchmark.  Also see the profiling modules Devel::DProf, Devel::SmallProf and Devel::OpProf.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Copyright 2000-2001, Ilmari Karonen.  All rights reserved.</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p><p>Address bug reports and comments to: perl@itz.pp.sci.fi</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Time::Progress.3pm.html"><span aria-hidden="true">&larr;</span> Time::Progress.3pm: Elapsed and estimated finish time reporting.</a></li>
   <li class="next"><a href="Titanium.3pm.html">Titanium.3pm: A strong, lightweight web application framework <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
