<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>globus_xio_driver: Globus xio driver -</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Globus xio driver -">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="globus_xio_driver (3) manual">
  <meta name="twitter:description" content="Globus xio driver -">
  <meta name="twitter:image" content="https://www.carta.tech/images/libglobus-xio-doc-globus_xio_driver-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/globus_xio_driver.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="globus_xio_driver (3) manual" />
  <meta property="og:description" content="Globus xio driver -" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libglobus-xio-doc-globus_xio_driver-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">globus_xio_driver<small> (3)</small></h1>
        <p class="lead">Globus xio driver -</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/globus_xio_driver.3.html">
      <span itemprop="name">globus_xio_driver: Globus xio driver -</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libglobus-xio-doc/">
      <span itemprop="name">libglobus-xio-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/globus_xio_driver.3.html">
      <span itemprop="name">globus_xio_driver: Globus xio driver -</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>Globus XIO introduces a notion of a driver stack to its API. With in globus_xio every IO operation must occur on a globus_xio handle. Associated with each handle is a stack of drivers. A driver is a module piece of code that implements the globus_xio driver interface. The purpose of a driver is manipulate data passed in by the user in someway. Each driver in a stack will serve its own unique purpose.</p><p>IO operations pass from driver to driver, starting at the top of the stack and ending at the bottom. When the bottom layer driver finishes with the operation it signals globus_xio that it has completed. Completion notification then follows the driver stack up to the top.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Driver Types</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>Transport driver:</strong> <strong></strong>
  </dt>
  <dd>
    <p>A transport driver is one that is responsible for actually putting bytes onto the wire. For example: A TCP driver or a UDP driver would be an example of transport drivers.</p>
  </dd>

</dl>
<p>Per driver stack there must be exactly one transport driver and must be at the bottom of the stack. A transform driver is defined by its lack of passing an operation to the next driver in the stack. This type of driver does not rely on globus_xio for further completion of an operation, rather it is self sufficient in this task.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>Transform driver:</strong> <strong></strong>
  </dt>
  <dd>
    <p>A transform driver is any intermediate driver in the stack. These drivers are identified by their reliance on the driver stack to complete the operation. These drivers must pass the operation down the stack because they cannot complete it themselves. An example of a transform driver would be a gsi driver. This driver would wrap and unwrap messages, but would not be able to complete the transport itself, so it would rely on the remaining drivers in the stack.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Driver API</h2>
        <div class="sectioncontent">
<p>The Globus XIO Driver API is a set of functions and interfaces to allow a developer to create a back-end driver for globus_xio. To create a driver the user must implement all of the interface functions in the driver specification. There are also a set of functions provide to assist the driver author in implementation.</p><h3>Quick Start</h3>
<p>For basic driver needs, the user will have to pay attention to a few new structures and concepts.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>globus_xio_operation_t</strong> <strong></strong>
  </dt>
  <dd>
    <p>This structure represents a request for an operation. If the driver can service the operation it does so and the calls the appropriate finish_operation() function. If the driver cannot completely service the operation it can pass() it along to the next driver in the stack. As soon as the operation structure is either finished or passed it is no longer valid for use in any other function.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <strong>globus_xio_driver_handle_t</strong> <strong></strong>
  </dt>
  <dd>
    <p>A driver_handle represents a open handle to the driver stack for xio. The driver obtains a driver_handle by calling globus_xio_driver_open(). When the open operation completes (it callback is called) the driver then has a driver_handle. The driver_handle allows the user to do some complex things that will be described later.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <strong>globus_xio_stack_t</strong> <strong></strong>
  </dt>
  <dd>
    <p>This structure provides the driver with information about the driver stack It is mainly used for creating driver_handle as a parameter to globus_xio_driver_open().</p>
  </dd>

</dl>
<p><strong>Typical Sequence:</strong></p><p>Here is a typical sequence of events for a globus_xio transform driver:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>Open</strong> <strong></strong>
  </dt>
  <dd>
    <p>globus_xio_driver_open_t is called. The user calls globus_xio_driver_open() passing it the operation and the stack and a callback. When the open callback is called the driver is given a new operation as a parameter. The driver will then call <strong>globus_xio_driver_finished_open()</strong> passing it the now initialized driver_handle and the newly received operation.</p>
  </dd>

</dl>
<p>The call to <strong>globus_xio_driver_finished_open()</strong> does two things:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>it tells globus_xio that this driver has finished its open operation</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>it gives xio the driver_handle (which contains information on the drivers below it).</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <strong>Read/Write</strong> <strong></strong>
  </dt>
  <dd>
    <p>The read or write interface function is called. It receives a operation as a parameter. The driver then calls the appropriate pass operation and waits for the callback. When the callback is received the driver calls finished_operation passing in the operation structure it received in the callback</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <strong>Close</strong> <strong></strong>
  </dt>
  <dd>
    <p>The close interface function is called and is passed an operation and a driver_handle. The driver will call globus_xio_driver_close() passing it the operation. When the close callback is received the driver calls <strong>globus_xio_driver_finished_close()</strong> passing it the operation received in the close callback and the driver_handle received in the interface function. At this point the driver_handle is no longer valid.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Advanced Driver Programming</h2>
        <div class="sectioncontent">
<p>The typical driver implementation is describe above. However globus_xio allows driver authors to do more advanced things. Some of these things will be explored here.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>Read Ahead</strong> <strong></strong>
  </dt>
  <dd>
    <p>Once a driver_handle is open a driver can spawn operation structures from it. This gives the driver the ability to request io from the driver stack before it receives a call to its own interface io interface function. So if a driver wishes to read ahead it does the following:</p>
  </dd>

</dl>
<ul>
<li><p>it creats an operation by calling globus_xio_driver_create_operation() and passing it the driver_handle it is interested in using.</p></li>
</ul><ul>
<li><p>call globus_xio_driver_read() using this operations. When the read callback is received the driver may call finished_operation() on the op it receives (this ultimately results in very little, since this operation was started by this driver, but it is good practice and will free up resources that would otherwise leak).</p></li>
</ul><ul>
<li><p>Now when the user finally does receive a read interface call from globus_xio it can immediately finish it using the operation it just received as a parameter and updating the iovec structure to represent the read that already occurred.</p></li>
</ul>
<dl class='dl-vertical'>
  <dt>
    <strong>Pre-Opening Handles</strong> <strong></strong>
  </dt>
  <dd>
    <p>Once the driver has received a globus_xio_driver_stack_t it can open a driver_handle. The globus_xio_driver_stack_t comes in the call to the interface function globus_xio_server/client_init_t(). The driver uses this structure in a call to globus_xio_driver_open(). When this functionality completes the driver has an initialized driver_handle and can use it to create operations as described above. The driver can now hang onto this driver_handle until it receives an open interface function call. At which time it can call <strong>globus_xio_driver_finished_open()</strong> passing in the driver_handle and thereby glueing the pre opened driver_handle with the requested globus_xio operation.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for globus_xio from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="globus_xio_data_descriptors.3.html"><span aria-hidden="true">&larr;</span> globus_xio_data_descriptors.3: Globus_xio uses data descriptors to associate meta data with the data being written or the data read.  data descriptors flow into the drivers read and write interface functions by way of the operation structure. if the driver is interested in viewing the data descriptor it can request it from the operation structure via a call to globus_xio_driver_operation_get_data_descriptor() and it can view any driver specific data descriptor via a call to globus_xio_driver_data_descriptor_get_specific(). the driver can modify values in the data descriptor by setting values before passing the request down the stack. several functions are available to modify the data descriptors. there is no need to 'set()' the data descriptors back into the operation. the functions for manipulating the values in a dd affect the values xio has directly.  data descriptors flow back to the driver in the callbacks for the data operations. when calling finished operation on a data operation the driver must pass in a data descriptor. it should get this data descriptor from the io operation callback.  life cycle:  passing in a data descriptor: a data descriptor is first created by the globus_xio user. the user can add driver specific data descriptors to it. once the user has created and set the attributes on its data descriptor to their liking they pass it into a globus_xio data operation (either read or write). when the data descriptor is passed on globus_xio will make an internal copy of it. it does this by first coping the user the level data descriptor and then walking through the list of driver specific data descriptor contained in to and requesting the driver make a copy of the driver specific data descriptor. if ever a driver specific data descriptor is null globus_xio need not call into its drivers dd_copy function. if ever the user level data descriptor is null globus_xio need not deal with the data descriptor functionality at all.  a data descriptor coming back up the stack once an io operation reaches the transport driver (the bottom of the stack) it takes on a slightly different role. on the way in it is describing what is requested to be done with the data, on the way out it is describing what has actually been done. once the transport driver performs the operation it should adjust the data descriptor to reflect what has actually happened (few drivers will need to worry about this). each driver on the way up can adjust the data descriptor and its driver specific data descriptor. when xio reaches the top of the stack it calls a user callback. when that callback returns all memory associated with the data descriptor is cleaned up. the interface function globus_xio_driver_data_descriptor_free() is used for this.</a></li>
   <li class="next"><a href="globus_xio_driver_attr_cntl_t.3.html">globus_xio_driver_attr_cntl_t.3: Xio driver programming - <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
