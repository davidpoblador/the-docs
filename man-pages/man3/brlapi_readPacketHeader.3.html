<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>brlapi_readPacketHeader: Instructions and constants for brlapi 's protocol.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Instructions and constants for brlapi 's protocol.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="brlapi_readPacketHeader (3) manual">
  <meta name="twitter:description" content="Instructions and constants for brlapi 's protocol.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libbrlapi-dev-brlapi_readPacketHeader-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/brlapi_readPacketHeader.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="brlapi_readPacketHeader (3) manual" />
  <meta property="og:description" content="Instructions and constants for brlapi 's protocol." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libbrlapi-dev-brlapi_readPacketHeader-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">brlapi_readPacketHeader<small> (3)</small></h1>
        <p class="lead">Instructions and constants for brlapi 's protocol.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/brlapi_readPacketHeader.3.html">
      <span itemprop="name">brlapi_readPacketHeader: Instructions and constants for brlapi 's protocol.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libbrlapi-dev/">
      <span itemprop="name">libbrlapi-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/brlapi_readPacketHeader.3.html">
      <span itemprop="name">brlapi_readPacketHeader: Instructions and constants for brlapi 's protocol.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>These are defines for the protocol between <em>BrlAPI</em> 's server and clients. Understanding is not needed to use the <em>BrlAPI</em> library, so reading this is not needed unless really wanting to connect to <em>BrlAPI</em> without <em>BrlAPI</em> 's library.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Macro Definition Documentation</h2>
        <div class="sectioncontent">
<h3>#define BRLAPI_AUTH_CRED   'C'</h3>
<p>Explicit socket credentials authorization</p>
<h3>#define BRLAPI_AUTH_KEY   'K'</h3>
<p>Key authorization</p>
<h3>#define BRLAPI_AUTH_NONE   'N'</h3>
<p>No or implicit authorization</p>
<h3>#define BRLAPI_DEVICE_MAGIC   (0xdeadbeefL)</h3>
<p>Magic number to give when sending a BRLPACKET_ENTERRAWMODE or BRLPACKET_SUSPEND packet</p>
<h3>#define BRLAPI_HEADERSIZE   sizeof(\fBbrlapi_header_t\fP)</h3>
<p>Size of packet headers</p>
<h3>#define BRLAPI_MAXPACKETSIZE   512</h3>
<p>Maximum packet size for packets exchanged on sockets and with braille terminal</p>
<h3>#define BRLAPI_PACKET_ACCEPTKEYRANGES   'u'</h3>
<p>Unmask key ranges</p>
<h3>#define BRLAPI_PACKET_ACK   'A'</h3>
<p>Acknowledgement</p>
<h3>#define BRLAPI_PACKET_AUTH   'a'</h3>
<p>Authorization</p>
<h3>#define BRLAPI_PACKET_ENTERRAWMODE   '*'</h3>
<p>Enter in raw mode</p>
<h3>#define BRLAPI_PACKET_ENTERTTYMODE   't'</h3>
<p>Asks for a specified tty</p>
<h3>#define BRLAPI_PACKET_ERROR   'e'</h3>
<p>non-fatal error</p>
<h3>#define BRLAPI_PACKET_EXCEPTION   'E'</h3>
<p>Exception</p>
<h3>#define BRLAPI_PACKET_GETDISPLAYSIZE   's'</h3>
<p>Dimensions of brl display</p>
<h3>#define BRLAPI_PACKET_GETDRIVERNAME   'n'</h3>
<p>Ask which driver is used</p>
<h3>#define BRLAPI_PACKET_IGNOREKEYRANGES   'm'</h3>
<p>Mask key ranges</p>
<h3>#define BRLAPI_PACKET_KEY   'k'</h3>
<p>Braille key</p>
<h3>#define BRLAPI_PACKET_LEAVERAWMODE   '#'</h3>
<p>Leave raw mode</p>
<h3>#define BRLAPI_PACKET_LEAVETTYMODE   'L'</h3>
<p>Release the tty</p>
<h3>#define BRLAPI_PACKET_PACKET   'p'</h3>
<p>Raw packets</p>
<h3>#define BRLAPI_PACKET_RESUMEDRIVER   'R'</h3>
<p>Resume driver</p>
<h3>#define BRLAPI_PACKET_SETFOCUS   'F'</h3>
<p>Set current tty focus</p>
<h3>#define BRLAPI_PACKET_SUSPENDDRIVER   'S'</h3>
<p>Suspend driver</p>
<h3>#define BRLAPI_PACKET_VERSION   'v'</h3>
<p>Version</p>
<h3>#define BRLAPI_PACKET_WRITE   'w'</h3>
<p>Write</p>
<h3>#define BRLAPI_PROTOCOL_VERSION   ((uint32_t) 8) /** Communication protocol version */</h3>

<h3>#define BRLAPI_WF_ATTR_AND   0X08</h3>
<p>And attributes</p>
<h3>#define BRLAPI_WF_ATTR_OR   0X10</h3>
<p>Or attributes</p>
<h3>#define BRLAPI_WF_CHARSET   0X40</h3>
<p>Charset</p>
<h3>#define BRLAPI_WF_CURSOR   0X20</h3>
<p>Cursor position</p>
<h3>#define BRLAPI_WF_DISPLAYNUMBER   0X01</h3>
<p>Flags for writing Display number</p>
<h3>#define BRLAPI_WF_REGION   0X02</h3>
<p>Region parameter</p>
<h3>#define BRLAPI_WF_TEXT   0X04</h3>
<p>Contains some text</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Function Documentation</h2>
        <div class="sectioncontent">
<h3>ssize_t brlapi_readPacket (\fBbrlapi_fileDescriptor\fPfd, \fBbrlapi_packetType_t\fP *type, void *buf, size_tsize)</h3>
<p>Read a packet from <em>BrlAPI</em> server</p><p>This function is for internal use, but one might use it if one really knows what one is doing...</p><p><em>type</em> is where the function will store the packet type; it should always be one of the above defined BRLPACKET_* (or else something very nasty must have happened :/).</p><p>The syntax is the same as read()'s.</p><p><strong>Returns:</strong></p><p>packet's size, -2 if EOF occurred, -1 on error or signal interruption.</p><p>If the packet is larger than the supplied buffer, the buffer will be filled with the beginning of the packet, the rest of the packet being discarded. This follows the semantics of the recv system call when the MSG_TRUNC option is given.</p><p><strong>See also:</strong></p><p><strong>brlapi_writePacket()</strong></p>
<h3>ssize_t brlapi_readPacketContent (\fBbrlapi_fileDescriptor\fPfd, size_tpacketSize, void *buf, size_tbufSize)</h3>
<p>Read the content of a packet from <em>BrlAPI</em> server</p><p>This function is for internal use, but one might use it if one really knows what one is doing...</p><p><em>packetSize</em> is the size announced by <em></em><strong>brlapi_readPacketHeader()</strong><em></em><strong></strong></p><p><em>bufSize</em> is the size of <em>buf</em></p><p><strong>Returns:</strong></p><p>packetSize, -2 if EOF occurred, -1 on error.</p><p>If the packet is larger than the supplied buffer, the buffer will be filled with the beginning of the packet, the rest of the packet being discarded. This follows the semantics of the recv system call when the MSG_TRUNC option is given.</p><p><strong>See also:</strong></p><p><strong>brlapi_writePacket()</strong> <strong>brlapi_readPacketHeader()</strong> <strong>brlapi_readPacket()</strong></p>
<h3>ssize_t brlapi_readPacketHeader (\fBbrlapi_fileDescriptor\fPfd, \fBbrlapi_packetType_t\fP *packetType)</h3>
<p>Read the header (type+size) of a packet from <em>BrlAPI</em> server</p><p>This function is for internal use, but one might use it if one really knows what one is doing...</p><p><em>type</em> is where the function will store the packet type; it should always be one of the above defined BRLPACKET_* (or else something very nasty must have happened :/).</p><p><strong>Returns:</strong></p><p>packet's size, -2 if EOF occurred, -1 on error or signal interruption.</p><p><strong>See also:</strong></p><p><strong>brlapi_writePacket()</strong> <strong>brlapi_readPacketContent</strong> <strong>brlapi_readPacket</strong></p>
<h3>ssize_t brlapi_writePacket (\fBbrlapi_fileDescriptor\fPfd, \fBbrlapi_packetType_t\fPtype, const void *buf, size_tsize)</h3>
<p>Send a packet to <em>BrlAPI</em> server</p><p>This function is for internal use, but one might use it if one really knows what one is doing...</p><p><em>type</em> should only be one of the above defined BRLPACKET_*.</p><p>The syntax is the same as write()'s.</p><p><strong>Returns:</strong></p><p>0 on success, -1 on failure.</p><p><strong>See also:</strong></p><p><strong>brlapi_readPacketHeader()</strong> <strong>brlapi_readPacketContent()</strong> <strong>brlapi_readPacket()</strong></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Variable Documentation</h2>
        <div class="sectioncontent">
<h3>pthread_mutex_t brlapi_fd_mutex</h3>
<p>Mutex for protecting concurrent fd access</p><p>In order to regulate concurrent access to the library's file descriptor and requests to / answers from <em>BrlAPI</em> server, every function of the library locks this mutex, namely</p><ul>
<li><p><strong>brlapi_openConnection()</strong></p></li><li><p><strong>brlapi_closeConnection()</strong></p></li><li><p><strong>brlapi_enterRawMode()</strong></p></li><li><p><strong>brlapi_leaveRawMode()</strong></p></li><li><p><strong>brlapi_sendRaw()</strong></p></li><li><p><strong>brlapi_recvRaw()</strong></p></li><li><p>brlapi_getDriverId()</p></li><li><p><strong>brlapi_getDriverName()</strong></p></li><li><p><strong>brlapi_getDisplaySize()</strong></p></li><li><p><strong>brlapi_enterTtyMode()</strong></p></li><li><p><strong>brlapi_enterTtyModeWithPath()</strong></p></li><li><p><strong>brlapi_leaveTtyMode()</strong></p></li><li><p>brlapi_*write*()</p></li><li><p>brlapi_(un)?ignorekey(Range|Set)()</p></li><li><p><strong>brlapi_readKey()</strong></p></li>
</ul><p>If both these functions and <strong>brlapi_writePacket()</strong> or <strong>brlapi_readPacket()</strong> are used in a multithreaded application, this mutex must be locked before calling <strong>brlapi_writePacket()</strong> or <strong>brlapi_readPacket()</strong>, and unlocked afterwards.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for BrlAPI from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="brlapi_readPacketContent.3.html"><span aria-hidden="true">&larr;</span> brlapi_readPacketContent.3: Instructions and constants for brlapi 's protocol.</a></li>
   <li class="next"><a href="brlapi_recvRaw.3.html">brlapi_recvRaw.3: Raw and suspend modes mechanism. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
