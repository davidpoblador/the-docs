<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Log::Agent::Rotate: Parameters for logfile rotation</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Parameters for logfile rotation">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Log::Agent::Rotate (3pm) manual">
  <meta name="twitter:description" content="Parameters for logfile rotation">
  <meta name="twitter:image" content="https://www.carta.tech/images/liblog-agent-rotate-perl-Log::Agent::Rotate-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Log::Agent::Rotate.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Log::Agent::Rotate (3pm) manual" />
  <meta property="og:description" content="Parameters for logfile rotation" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liblog-agent-rotate-perl-Log::Agent::Rotate-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Log::Agent::Rotate<small> (3pm)</small></h1>
        <p class="lead">Parameters for logfile rotation</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Agent::Rotate.3pm.html">
      <span itemprop="name">Log::Agent::Rotate: Parameters for logfile rotation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liblog-agent-rotate-perl/">
      <span itemprop="name">liblog-agent-rotate-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Agent::Rotate.3pm.html">
      <span itemprop="name">Log::Agent::Rotate: Parameters for logfile rotation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 require Log::Agent::Rotate;

 my $policy = Log::Agent::Rotate-&gt;make(
     -backlog     =&gt; 7,
     -unzipped    =&gt; 2,
     -is_alone    =&gt; 0,
     -max_size    =&gt; 100_000,
     -max_time    =&gt; "1w",
     -file_perm   =&gt; 0666
 );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The \*(C`Log::Agent::Rotate\*(C' class holds the parameters describing the logfile rotation policy, and is meant to be supplied to instances of \*(C`Log::Agent::Driver::File\*(C' via arguments in the creation routine, such as \*(C`-rotate\*(C', or by using array references as values in the \*(C`-channels\*(C' hashref: See complementary information in Log::Agent::Driver::File.</p><p>As rotation cycles are performed, the current logfile is renamed, and possibly compressed, until the maximum backlog is reached, at which time files are deleted.  Assuming a backlog of 5 and that the latest 2 files are not compressed, the following files can be present on the filesystem:</p><p>    logfile           # the current logfile     logfile.0         # most recently renamed logfile     logfile.1     logfile.2.gz     logfile.3.gz     logfile.4.gz      # oldest logfile, unlinked next cycle</p><p>The following <em>switches</em> are available to the creation routine <em>make()</em>, listed in alphabetical order, all taking a single integer value as argument:</p>
<dl class='dl-vertical'>
  <dt>
    <em>backlog</em>
  </dt>
  <dd>
    <p>The total amount of old logfiles to keep, besides the current logfile. Defaults to 7.</p>
  </dd>
  <dt>
    <em>file_perm</em>
  </dt>
  <dd>
    <p>The file permissions, given as an octal integer value, to supply to <em>sysopen()</em> during file creation.  This value is modified during execution by the umask of the process.  In most cases, it is good practice to leave this set to the default and let the user process controll the file permissions. Defaults to 0666.</p>
  </dd>
  <dt>
    <em>is_alone</em>
  </dt>
  <dd>
    <p>The argument is a boolean stating whether the program writing to the logfile will be the only one or not.  This is a hint that drives some optimizations, but it is up to the program to <strong>guarantee</strong> that noone else will be able to write to or unlink the current logfile when set to <em>true</em>. Defaults to <em>false</em>.</p>
  </dd>
  <dt>
    <em>max_size</em>
  </dt>
  <dd>
    <p>The maximum logfile size.  This is a threshold, which will cause a logfile rotation cycle to be performed, when crossed after a write to the file.  If set to 0, this threshold is not checked. Defaults to 1 megabyte.</p>
  </dd>
  <dt>
    <em>max_time</em>
  </dt>
  <dd>
    <p>The maximum time in seconds between the moment we opened the file and the next rotation cycle occurs.  This threshold is only checked after a write to the file. The value can also be given as a string, postfixed by one of the following letters to specify the period unit (e.g. \*(L"3w\*(R"):     Letter   Unit     ------   -------        m     minutes        h     hours        d     days        d     days        w     weeks        M     months (30 days of 24 hours)        y     years Defaults to 0, meaning it is not checked.</p>
  </dd>
  <dt>
    <em>max_write</em>
  </dt>
  <dd>
    <p>The maximum amount of data we can write to the logfile.  Like \*(C`max_size\*(C', this is a threshold, which is only checked after a write to the logfile. This is not the total logfile size: if several programs write to the same logfile and \*(C`max_size\*(C' is not used, then the logfiles may never be rotated at all if none of the programs write at least \*(C`max_write\*(C' bytes to the logfile before exiting. Defaults to 0, meaning it is not checked.</p>
  </dd>
  <dt>
    <em>single_host</em>
  </dt>
  <dd>
    <p>The argument is a boolean stating whether the access to the logfiles will be made from one single host or not.  This is a hint that drives some optimizations, but it is up to the program to <strong>guarantee</strong> that it is accurately set. Defaults to <em>false</em>, which is always a safe value.</p>
  </dd>
  <dt>
    <em>unzipped</em>
  </dt>
  <dd>
    <p>The amount of old logfiles, amongst the most recent ones, that should not be compressed but be kept as plain files. Defaults to 1.</p>
  </dd>

</dl>
<p>To test whether two configurations are strictly identical, use <em>is_same()</em>, as in:</p><p>    print "identical&#92;n" if $x-&gt;is_same($y);</p><p>where both $x and $y are \*(C`Log::Agent::Rotate\*(C' objects.</p><p>All the aforementioned switches also have a corresponding querying routine that can be issued on instances of the class to get their value. It is not possible to modify those attributes.</p><p>For instance:</p><p>    my $x = Log::Agent::Rotate-&gt;make(...);     my $mwrite = $x-&gt;max_write();</p><p>would get the configured <em>max_write</em> threshold.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Originally written by Raphael Manfredi &lt;Raphael_Manfredi@pobox.com&gt;, currently maintained by Mark Rogaski &lt;mrogaski@cpan.org&gt;.</p><p>Thanks to Chris Meshkin for his suggestions on file permissions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Log::Agent::Rotate&hellip;</h2>
        <div class="sectioncontent">
<p><em>Log::Agent</em>\|(3), <em>Log::Agent::Driver::File</em>\|(3), <em>Log::Agent::Rotate::File</em>\|(3).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Log::Agent::Priorities.3pm.html"><span aria-hidden="true">&larr;</span> Log::Agent::Priorities.3pm: Conversion between syslog priorities and levels</a></li>
   <li class="next"><a href="Log::Agent::Stamping.3pm.html">Log::Agent::Stamping.3pm: Time-stamping routines <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
