<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>memcached_add_by_key: Storing and replacing data</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Storing and replacing data">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="memcached_add_by_key (3) manual">
  <meta name="twitter:description" content="Storing and replacing data">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmemcached-dev-memcached_add_by_key-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/memcached_add_by_key.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="memcached_add_by_key (3) manual" />
  <meta property="og:description" content="Storing and replacing data" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmemcached-dev-memcached_add_by_key-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">memcached_add_by_key<small> (3)</small></h1>
        <p class="lead">Storing and replacing data</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/memcached_add_by_key.3.html">
      <span itemprop="name">memcached_add_by_key: Storing and replacing data</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmemcached-dev/">
      <span itemprop="name">libmemcached-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/memcached_add_by_key.3.html">
      <span itemprop="name">memcached_add_by_key: Storing and replacing data</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;libmemcached/memcached.h&gt;</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>memcached_return_t memcached_set(memcached_st</strong><em>&nbsp;*ptr</em><strong>, const char</strong><em>&nbsp;*key</em><strong>, size_t</strong><em>&nbsp;key_length</em><strong>, const char</strong><em>&nbsp;*value</em><strong>, size_t</strong><em>&nbsp;value_length</em><strong>, time_t</strong><em>&nbsp;expiration</em><strong>, uint32_t</strong><em>&nbsp;flags</em><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>memcached_return_t memcached_add(memcached_st</strong><em>&nbsp;*ptr</em><strong>, const char</strong><em>&nbsp;*key</em><strong>, size_t</strong><em>&nbsp;key_length</em><strong>, const char</strong><em>&nbsp;*value</em><strong>, size_t</strong><em>&nbsp;value_length</em><strong>, time_t</strong><em>&nbsp;expiration</em><strong>, uint32_t</strong><em>&nbsp;flags</em><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>memcached_return_t memcached_replace(memcached_st</strong><em>&nbsp;*ptr</em><strong>, const char</strong><em>&nbsp;*key</em><strong>, size_t</strong><em>&nbsp;key_length</em><strong>, const char</strong><em>&nbsp;*value</em><strong>, size_t</strong><em>&nbsp;value_length</em><strong>, time_t</strong><em>&nbsp;expiration</em><strong>, uint32_t</strong><em>&nbsp;flags</em><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>memcached_return_t memcached_set_by_key(memcached_st</strong><em>&nbsp;*ptr</em><strong>, const char</strong><em>&nbsp;*group_key</em><strong>, size_t</strong><em>&nbsp;group_key_length</em><strong>, const char</strong><em>&nbsp;*key</em><strong>, size_t</strong><em>&nbsp;key_length</em><strong>, const char</strong><em>&nbsp;*value</em><strong>, size_t</strong><em>&nbsp;value_length</em><strong>, time_t</strong><em>&nbsp;expiration</em><strong>, uint32_t</strong><em>&nbsp;flags</em><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>memcached_return_t memcached_add_by_key(memcached_st</strong><em>&nbsp;*ptr</em><strong>, const char</strong><em>&nbsp;*group_key</em><strong>, size_t</strong><em>&nbsp;group_key_length</em><strong>, const char</strong><em>&nbsp;*key</em><strong>, size_t</strong><em>&nbsp;key_length</em><strong>, const char</strong><em>&nbsp;*value</em><strong>, size_t</strong><em>&nbsp;value_length</em><strong>, time_t</strong><em>&nbsp;expiration</em><strong>, uint32_t</strong><em>&nbsp;flags</em><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>memcached_return_t memcached_replace_by_key(memcached_st</strong><em>&nbsp;*ptr</em><strong>, const char</strong><em>&nbsp;*group_key</em><strong>, size_t</strong><em>&nbsp;group_key_length</em><strong>, const char</strong><em>&nbsp;*key</em><strong>, size_t</strong><em>&nbsp;key_length</em><strong>, const char</strong><em>&nbsp;*value</em><strong>, size_t</strong><em>&nbsp;value_length</em><strong>, time_t</strong><em>&nbsp;expiration</em><strong>, uint32_t</strong><em>&nbsp;flags</em><strong>)</strong></p>
  </dt>
  <dd>
    <p>Compile and link with -lmemcached</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>memcached_set()</em>, <em>memcached_add()</em>, and <em>memcached_replace()</em> are all used to store information on the server. All methods take a key, and its length to store the object. Keys are currently limited to 250 characters when using either a version of <a href="../man1/memcached.1.html"><strong>memcached</strong>(1)</a> which is 1.4 or below, or when using the text protocol. You must supply both a value and a length. Optionally you store the object. Keys are currently limited to 250 characters by the <a href="../man1/memcached.1.html"><strong>memcached</strong>(1)</a> server. You must supply both a value and a length. Optionally you may test an expiration time for the object and a 16 byte value (it is meant to be used as a bitmap). "flags" is a 4byte space that is stored alongside of the main value. Many sub libraries make use of this field, so in most cases users should avoid making use of it.</p><p><em>memcached_set()</em> will write an object to the server. If an object already exists it will overwrite what is in the server. If the object does not exist it will be written. If you are using the non-blocking mode this function will always return true unless a network error occurs.</p><p><em>memcached_replace()</em> replaces an object on the server. If the object is not found on the server an error occurs.</p><p><em>memcached_add()</em> adds an object to the server. If the object is found on the server an error occurs, otherwise the value is stored.</p><p><strong>memcached_cas()</strong> overwrites data in the server as long as the "cas" value is still the same in the server. You can get the cas value of a result by calling <strong>memcached_result_cas()</strong> on a <strong>memcached_result_st</strong>(3) structure. At the point that this note was written cas is still buggy in memached. Turning on tests for it in <strong>libmemcached</strong>(3) is optional. Please see memcached_set for information on how to do this.</p><p><em>memcached_set_by_key()</em>, <em>memcached_add_by_key()</em>, and <em>memcached_replace_by_key()</em> methods all behave in a similar method as the non key methods. The difference is that they use their group_key parameter to map objects to particular servers.</p><p>If you are looking for performance, <em>memcached_set()</em> with non-blocking IO is the fastest way to store data on the server.</p><p>All of the above functions are testsed with the <strong>MEMCACHED_BEHAVIOR_USE_UDP</strong> behavior enabled. However, when using these operations with this behavior on, there are limits to the size of the payload being sent to the server. The reason for these limits is that the Memcached Server does not allow multi-datagram requests and the current server implementation sets a datagram size to 1400 bytes. Due to protocol overhead, the actual limit of the user supplied data is less than 1400 bytes and depends on the protocol in use as, well as the operation being executed. When running with the binary protocol, <strong>MEMCACHED_BEHAVIOR_BINARY_PROTOCOL</strong>, the size of the key,value, flags and expiry combined may not exceed 1368 bytes. When running with the ASCII protocol, the exact limit fluctuates depending on which function is being executed and whether the function is a cas operation or not. For non-cas ASCII set operations, there are at least 1335 bytes available to split among the key, key_prefix, and value; for cas ASCII operations there are at least 1318 bytes available to split among the key, key_prefix and value. If the total size of the command, including overhead, exceeds 1400 bytes, a <strong>MEMCACHED_WRITE_FAILURE</strong> will be returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN</h2>
        <div class="sectioncontent">
<p>All methods return a value of type <strong>memcached_return_t</strong>. On success the value will be <strong>MEMCACHED_SUCCESS</strong>. Use <strong>memcached_strerror()</strong> to translate this value to a printable string.</p><p>For <em>memcached_replace()</em> and <em>memcached_add()</em>, <strong>MEMCACHED_NOTSTORED</strong> is a legitmate error in the case of a collision.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOME</h2>
        <div class="sectioncontent">
<p>To find out more information please check: <em>http://libmemcached.org/</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO memcached_add_by_key&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/memcached.1.html"><strong>memcached</strong>(1)</a></em> <strong>libmemached</strong>(3)</em> <a href="../man3/memcached_strerror.3.html"><strong>memcached_strerror</strong>(3)</a></em> <a href="../man3/memcached_prepend.3.html"><strong>memcached_prepend</strong>(3)</a></em> <a href="../man3/memcached_cas.3.html"><strong>memcached_cas</strong>(3)</a></em> <a href="../man3/memcached_append.3.html"><strong>memcached_append</strong>(3)</a></em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Brian Aker</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>2011-2013, Brian Aker DataDifferential, http://datadifferential.com/</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="memcached_add.3.html"><span aria-hidden="true">&larr;</span> memcached_add.3: Storing and replacing data</a></li>
   <li class="next"><a href="memcached_analyze.3.html">memcached_analyze.3: Libmemcached documentation  analyze server information <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
