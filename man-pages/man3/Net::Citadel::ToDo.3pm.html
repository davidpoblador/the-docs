<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Net::Citadel::ToDo: To do items for the net::citadel perl extension.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="To do items for the net::citadel perl extension.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Net::Citadel::ToDo (3pm) manual">
  <meta name="twitter:description" content="To do items for the net::citadel perl extension.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libnet-citadel-perl-Net::Citadel::ToDo-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Net::Citadel::ToDo.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Net::Citadel::ToDo (3pm) manual" />
  <meta property="og:description" content="To do items for the net::citadel perl extension." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libnet-citadel-perl-Net::Citadel::ToDo-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Net::Citadel::ToDo<small> (3pm)</small></h1>
        <p class="lead">To do items for the net::citadel perl extension.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::Citadel::ToDo.3pm.html">
      <span itemprop="name">Net::Citadel::ToDo: To do items for the net::citadel perl extension.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libnet-citadel-perl/">
      <span itemprop="name">libnet-citadel-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::Citadel::ToDo.3pm.html">
      <span itemprop="name">Net::Citadel::ToDo: To do items for the net::citadel perl extension.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<h3>General</h3>
<p>Add a \s-1ZIPFLAGS\s0 configuration item for dist/zipdist in Makefile.PL?</p><p>Add a note in the documentation about the Net::Citadel repository and home page at GitHub? Also include a reference to where it is available at the \*(C`gitpan\*(C' \s-1CPAN\s0 mirror at GitHub?</p><p>Add capability to use \s-1SSL\s0 encrypted communications with the Citadel server, perhaps using IO::Socket::SSL?</p><p>Change to using the jame@cpan.org address for Robert James Clay instead of the jame@rocasa.us address?</p>
<h3>Constants</h3>
<p>There are some numbers being used that are actually constants; change to using Readonly to define them for use in the code, unless there are other standard constants that can be used, like those for the flock operations.</p><p>Add a paragraph to the documentation after the \s-1CONSTANTS\s0 header.</p><p>Add a paragraph to the documentation after the 'Results Code' header, perhaps including a link to the online status codes page in Citadel Documentation.</p><p>Add a paragraph to the documentation after the 'Room Access' header, perhaps including a link to the online page in Citadel Documentation that refers to them.</p><p>A \*(L"000\*(R" string constant is used quite often by Citadel but is not defined in the module.</p><p>There is a set of follow up reply codes noted in the documentation that are not yet in the module.</p><p>A \*(C`NO_SUCH_USER\*(C' return code is mentioned in the command documentation (for the \s-1USER\s0 command, for instance,) but the module doesn't currently appear to define it.</p><p>Add a link to the online documentation for the status codes: http://www.citadel.org/doku.php?id=documentation:appproto:statuscodes</p>
<h3>Functions</h3>
<p>There does not seem to an explicit function to close the connection; i.e., close the socket being used to communicate with the server.</p><p>Create an internal function to handle \s-1LISTING_FOLLOWS\s0 return lines from the server? Perhaps called something like \*(C`_get_listing\*(C'? Is the \*(C`assert_room\*(C' command coming up with the correct floor information? Is the \*(C`assert_room\*(C' function sending the parameters for the \s-1CRE8\s0 command properly? (There is a note in the code indicating an uncertainty about what should be sent.) In the existing test code for the \*(C`retract_floor\*(C' function, there is a comment saying \*(C`CITADEL BUG\*(C'; investigate if it an issue with the function itself, an actual issue with Citadel, and/or just something to do with the test script.  The documentation for the function itself refers back to Citadel v7.20, so there may not be any issue with it now. The line just before the 'return $self' line actually has two commands on it, not just one. The second one is just \*(L"&lt;$s&gt;;\*(R" and that has the comment \*(L"# consume banner\*(R".  That 'banner' is something like the following:  \*(L"200 &lt;systen name&gt; Citadel server ready.\*(R"  Instead of not doing anything with that, save it somewhere? At least the &lt;system name&gt; part of it?  (The first command on that line just establishes the $s variable for that read.) At least, put them on separate lines. The current \*(C`citadel_time\*(C' function only returns the first two parameters from the \s-1TIME\s0 command:  \*(C`1347624956|-14400\*(C'.  The Citadel \s-1TIME\s0 command itself actually returns a line like this: \*(C`200 1347625545|-14400|1|1347537300\*(C', with the '200' being the \s-1OK\s0 code and the rest being the four fields that it returns (which also needs to be documented). So as currently written, the function doesn't return the daylight savings time indication and the actual citadel server start information. Function first needs to be changed to at least return all parameters. Rewrite the \*(C`citadel_time\*(C' function to unpack the parameters that the \s-1TIME\s0 command returns when it is successful, and then return them to the calling program in a hash? Could also then return the hash with a key named 'error' or 'Error' if it is not successful. Update its \s-1POD\s0 to reflect the changes. It appears to test if what was sent, was actually received back but it only returns true if it doesn't fail because there is no match. Add an explicit return of the value returned from the \s-1ECHO\s0 command?</p>
<h3>Documentation</h3>
<p>Add something like Net::Citadel::Tutorial for examples of the use and configuration of the module?</p>
<h3>Testing</h3>
<p>Change the names of the test floors and rooms to something like \*(C`Test Floor\*(C' and \*(C`Test Room\*(C'?</p><p>Update the testing for the \*(C`citadel_time\*(C' function to at least check the number of parameters returned? Three of the parameters are Unix timestamps; validate those in some way? The other parameter being returned is a Boolean and is used to indicate Daylight Savings Time and should be a '0' or a '1'.</p><p>When testing for a floor, it looks for \*(C`Main Floor\*(C': that exists on a default install but may not be on an working system. Make it another configuration item, which if not configured would default to \*(C`Main Floor\*(C'?</p><p>Separate the testing to: functions that do not require a log in, those that do require a log in, those that are read only, those that write to the server. Or use the separation given in the documentation for the different Sections for the commands?</p><p>Since Config::YAML is already a build-depends and is used by the main test script, add a \*(C`Testing\*(C' section of some sort to the test.yaml file and check that for the various options for testing instead of just attempting to reach a Citadel server?</p><p>Instead of having the debugging 'warning' lines commented out, use a \s-1DEBUG\s0 environment variable and/or a test.yaml configuration item for it. Same for the 'use Data::Dumper' line itself.</p><p>Use Config::YAML::Tiny instead of Config::YAML? (Does not appear to be in Debian as yet, although YAML::Tiny is.)</p><p>Use something like Test::MockObject to do at least basic testing of the various functions.  And/or Test::TCP?</p><p>Testing of the citadel_info function currently just checks the number of information lines returned by the server. That could change over time and different Citadel versions. Make that a testing configuration item?</p><p>Do more extensive checking of what is returned by the citadel_info function?</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Net::Citadel::ToDo&hellip;</h2>
        <div class="sectioncontent">

<pre>
 L&lt;Net::Citadel&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Robert James Clay, \*(C`&lt;jame at rocasa.us&gt;\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2013 Robert James Clay, all rights reserved.</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Net::Citadel.3pm.html"><span aria-hidden="true">&larr;</span> Net::Citadel.3pm: Citadel.org protocol coverage</a></li>
   <li class="next"><a href="Net::DAAP::DMAP.3pm.html">Net::DAAP::DMAP.3pm: Perl module for reading and writing daap structures <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
