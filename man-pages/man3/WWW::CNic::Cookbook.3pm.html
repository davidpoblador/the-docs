<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WWW::CNic::Cookbook: None</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="None">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="WWW::CNic::Cookbook (3pm) manual">
  <meta name="twitter:description" content="None">
  <meta name="twitter:image" content="https://www.carta.tech/images/libwww-cnic-perl-WWW::CNic::Cookbook-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/WWW::CNic::Cookbook.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="WWW::CNic::Cookbook (3pm) manual" />
  <meta property="og:description" content="None" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libwww-cnic-perl-WWW::CNic::Cookbook-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">WWW::CNic::Cookbook<small> (3pm)</small></h1>
        <p class="lead">None</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/WWW::CNic::Cookbook.3pm.html">
      <span itemprop="name">WWW::CNic::Cookbook: None</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libwww-cnic-perl/">
      <span itemprop="name">libwww-cnic-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/WWW::CNic::Cookbook.3pm.html">
      <span itemprop="name">WWW::CNic::Cookbook: None</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Name</h2>
        <div class="sectioncontent">
<p>WWW::CNic::Cookbook - The WWW::CNic Cookbook</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Description</h2>
        <div class="sectioncontent">
<p>This document provides a fairly complete explanation of how to implement basic Registrar-Registry functions with CentralNic using \*(C`WWW::CNic\*(C'.</p><p>This document is a work in progress, if you want to see something in it that isn't, or find an error, please let us know by e-mailing toolkit@centralnic.com.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Test Mode</h2>
        <div class="sectioncontent">
<p>The Toolkit can be told to run in <em>test mode</em>, that is, to use a non-live copy of the database so that any changes made don't affect the live domains.</p><p>To enable test mode, simply set the \*(C`test\*(C' argument on the constructor, like so:</p>
<pre>
        my $query = WWW::CNic-&gt;new(test =&gt; 1, ... );
</pre>
<p>You will also need to supply <strong>test account</strong> credentials rather than production account credentials. These can be obtained from the Registrar Console.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Getting Information about Domains</h2>
        <div class="sectioncontent">
<h3>Getting a Suffix List</h3>
<p>CentralNic's range of available domain names changes occasionally and you may want to periodically update the list of domains we support. You can use the \*(C`suffixes\*(C' command to retrieve an array containing all the domain suffixes CentralNic supports.</p><p>        use WWW::CNic;</p><p>        # create a request object:         my $query = WWW::CNic-&gt;new(                 command =&gt; &apos;suffixes&apos;,         );</p><p>        # execute the query to return a response object:         my $response = $query-&gt;execute;</p><p>        # use the suffixes() method to get a list of suffixes:         my @suffixes = $response-&gt;suffixes;</p><p>This can be shortened to:</p><p>        use WWW::CNic;</p><p>        my @suffixes = WWW::CNic-&gt;new(command=&gt;&apos;suffixes&apos;)-&gt;execute-&gt;suffixes;</p>
<h3>Doing a Domain Availability Search</h3>
<p>The traditional method for checking the availability of a domain name is to query the registry's whois server, and do a pattern match against the response looking for indications that the domain is registered. This is not an optimal approach for several reasons - firstly, the whois protocol was never designed for it. Secondly, the lack of a whois record does not signify availability. It also can't handle multiple lookups very well.</p><p>The \*(C`search\*(C' function is a very powerful way to check on the availability of a domain name. It allows you to check the availability of a domain name across one, several or all of CentralNic's suffixes.</p><p>Here's how you might do a check against a particular domain name:</p><p>        use WWW::CNic;</p><p>        my $domain = &apos;example&apos;;         my $suffix = &apos;uk.com&apos;;</p><p>        my $query = WWW::CNic-&gt;new(                 command =&gt; &apos;search&apos;,                 domain  =&gt; $domain,         );</p><p>        $query-&gt;set(suffixlist =&gt; [$suffix]);</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_registered($suffix)) {                 printf("domain is registered to %s&#92;n", $response-&gt;registrant($suffix));</p><p>        } else {                 print "domain is available.&#92;n";</p><p>        }</p><p>Notice the extra step (using the \*(C`set()\*(C' method), where we set the 'suffixlist' parameter to be an anonymous array containing the single suffix we want to check. Omitting this step would make the query check against all CentralNic suffixes.</p><p>The response object returned has a method \*(C`is_registered()\*(C' which returns true if the domain is already registered. Additionally, you can use the \*(C`registrant($suffix)\*(C' and \*(C`expiry($suffix)\*(C' methods to get the registrant name and a \s-1UNIX\s0 timestamp of the expiry date respectively.</p>
<h3>Getting Detailed Information About a Domain</h3>
<p>Prior to submitting a modification, you may wish to get detailed information about a domain name to present to your users. The \*(C`whois\*(C' command allows the lookup of the same detailed information that a whois server provides.</p><p>For example:</p><p>        use WWW::CNic;</p><p>        my $domain = &apos;example.uk.com&apos;;</p><p>        my $query = WWW::CNic-&gt;new(                 command =&gt; &apos;whois&apos;,                 domain  =&gt; $domain,         );</p><p>        my $response = $query-&gt;execute;</p><p>        print "Domain: $domain&#92;n";</p><p>        my %tech_handle = %{$response-&gt;response(&apos;thandle&apos;)};         printf("Tech Handle: %s (%s)&#92;n", $tech_handle{userid}, $tech_handle{name});</p><p>        my $dns = $response-&gt;response(&apos;dns&apos;);         foreach my $server(@{$dns}) {                 if (ref($server) eq &apos;ARRAY&apos;) {                         my ($name, $ipv4) = @{$server};                         print "Server: $name ($ipv4)&#92;n";</p><p>                } else {                         print "Server: $server&#92;n";</p><p>                }         }</p><p>The response object contains values for the following keys:</p><p>        registrant                      the domain&apos;s registrant         created                         registration date         expires                         expiry date         status                          status (e.g. Live, On Hold, Pending Deletion etc)         chandle                         Client Handle         bhandle                         Technical Handle         thandle                         Billing Handle         dns                             DNS Servers</p><p>The \*(C`registrant\*(C' and \*(C`status\*(C' keys are just strings. The \*(C`created\*(C' and \*(C`expires\*(C' keys are \s-1UNIX\s0 timestamps. The \*(C`chandle\*(C', \*(C`thandle\*(C' and \*(C`bhandle\*(C' keys are all references to hashes with the following keys:</p><p>        userid         name         company         addr         street1         street2         street3         city         sp         postcode         country         phone         fax         email</p><p>These values can be accessed in the following way:</p><p>        # get the tech handle:         my $tech_handle = $response-&gt;response(&apos;thandle&apos;);</p><p>        print $tech_handle-&gt;{addr};</p><p>        # and so on for the other keys</p><p>The \*(C`dns\*(C' key is an array. Elements in the array may be either a plain scalar containing the \s-1DNS\s0 hostname of the server, or an anonymous array containing the \s-1DNS\s0 hostname and \s-1IPV4\s0 address in that order. Use the \*(C`ref()\*(C' function to work out which.</p><p><strong>Address data:</strong> handles in the CentralNic database follow one of two \*(L"styles\*(R": old-style handles have flat address data (stored in the \*(C`address\*(C' property), but new-style handles have separate properties for street, city and state/province. All handles will have at least a non-empty \*(C`address\*(C' property (for new-style handles this is created by flattening the \*(C`street1\*(C', \*(C`street2\*(C'... properties). All new-style handles will have a non-empty \*(C`street1\*(C' property.</p>
<h3>Retrieving the Transfer Code For a Domain Name</h3>
<p>        use WWW::CNic;</p><p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;auth_info&apos;,                 domain          =&gt; &apos;example.uk.com&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_error) {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        } else {                 printf("Transfer code: %s&#92;n", $response-&gt;auth_code);</p><p>        }</p><p>This command is used to retrieve the transfer code for a domain name. Those registrars who use our \s-1EPP\s0 system are required to provide a security code when they initiate a transfer request, which they get from the registrant, who in turn gets it from the losing registrar. Registrars are required to provide this code to registrants upon request.</p>
<h3>Getting Detailed Information About a Handle</h3>
<p>This command can be used to retrieve information about a handle <em>for which you are the sponsor</em>. You are the sponsor of a handle if you created it as part of a domain registration or modification process, or it is associated with a domain name for which you are Billing Handle.</p><p>        use WWW::CNic;</p><p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;handle_info&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd,         );</p><p>        $query-&gt;set(handle =&gt; &apos;H12345&apos;);</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_error) {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        } else {                 foreach my $key (qw(name company address street1 street2 street3 city sp postcode country tel fax email visible)) {                         printf("%s: %s&#92;n", $key, $response-&gt;response($key));                 }</p><p>        }</p><p>The \*(C`visible\*(C' value is a binary value (1 or 0) that indicates whether this handle's details are show in \s-1WHOIS\s0 records for domains with which it is associated.</p><p><strong>Address data:</strong> handles in the CentralNic database follow one of two \*(L"styles\*(R": old-style handles have flat address data (stored in the \*(C`address\*(C' property), but new-style handles have separate properties for street, city and state/province. All handles will have at least a non-empty \*(C`address\*(C' property (for new-style handles this is created by flattening the \*(C`street1\*(C', \*(C`street2\*(C'... properties). All new-style handles will have a non-empty \*(C`street1\*(C' property.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Creating New Domains and Handles</h2>
        <div class="sectioncontent">
<h3>Creating a Handle</h3>
<p>If you are going to be registering multiple domains, you should create a new handle and use that to register the domains using its \s-1ID\s0, rather than supply new contact details for each registration, which will result in a new client handle being created each time.</p><p>To do so, use the \*(C`create_handle\*(C' command:</p><p>        use WWW::CNic;</p><p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;create_handle&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd,         );</p><p>        $query-&gt;set(handle =&gt; {                 name    =&gt; &apos;John Doe&apos;,                 company =&gt; &apos;Example, Inc&apos;,                 street1 =&gt; &apos;Example House&apos;,                 street2 =&gt; &apos;Example Street&apos;,                 city    =&gt; &apos;London&apos;,                 sp      =&gt; &apos;England&apos;,                 postcode=&gt; &apos;EC1 123&apos;,                 country =&gt; &apos;UK&apos;,                 phone   =&gt; &apos;+44.8700170900&apos;,                 fax     =&gt; &apos;+44.8700170901&apos;,                 email   =&gt; &apos;jd@example.com&apos;,         });</p><p>        # make the handle hidden on whois records:         $query-&gt;set(visible =&gt; 0);</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 printf("New handle created with ID %s&#92;n", $response-&gt;handle);</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>The \*(C`handle\*(C' parameter must be a reference to a hash containing the following keys:</p><p>        name         company         street1         street2         street3         city         sp         postcode         country         phone         fax         email</p><p>Only \*(C`name\*(C', \*(C`country\*(C' and \*(C`email\*(C' are mandatory. The \*(C`phone\*(C' and \*(C`fax\*(C' fields can be in any format, but we request that you use the e164a format:</p><p>        +AA.BBB(xCC)</p><p>where \*(C`AA\*(C' is the dialling code for the country in question, \*(C`BBB\*(C' is the phone number without a local dialling prefix (eg, for the \s-1UK\s0, emit the leading zero), and \*(C`CC\*(C' is an optional extension.</p><p>\*(C`street1\*(C', \*(C`street2\*(C' and \*(C`street3\*(C' are street address lines, \*(C`city\*(C' is the postal city/town and \*(C`sp\*(C' is the state, province or county.</p><p>The \*(C`country\*(C' field must be a valid \s-1ISO3166\s0 2-character country code.</p><p>The \*(C`visible\*(C' parameter controls whether the handle's contact details are shown on whois records for domain names to which it is associated. By default, the value of \*(C`visible\*(C' is 1. A value of 0 hides the handle from whois records.</p><p>You can use the \*(C`handle()\*(C' method to return the \s-1ID\s0 of the created handle, for use when registering.</p>
<h3>Registering a Domain Name</h3>
<p>We require that you use \s-1SSL\s0 when making registration and modification requests. WWW::CNic supports \s-1SSL\s0 communications transparently, since it uses \*(C`LWP\*(C' to do all \s-1HTTP\s0 communication. \*(C`LWP\*(C' will handle \s-1SSL\s0 if the \*(C`Crypt::SSLeay\*(C' or \*(C`IO::Socket::SSL\*(C' modules have been installed.</p><p>        use WWW::CNic;</p><p>        my $query =     WWW::CNic-&gt;new(                 command         =&gt; &apos;register&apos;,                 domain          =&gt; &apos;example.uk.com&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd,         );</p><p>        $query-&gt;set(                 registrant      =&gt; &apos;Example, Inc&apos;,                 chandle         =&gt; $chandle,                 thandle         =&gt; $thandle,                 period          =&gt; 2,         );</p><p>        # Set DNS servers</p><p>        $query-&gt;set(dns =&gt; [&apos;ns0.example.com&apos;, &apos;ns1.example.com&apos;]);</p><p>        # OR</p><p>        $query-&gt;set(url =&gt; &apos;http://www.example.com/&apos;);</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 printf("Domain registered at price %01.2f&#92;n", $response-&gt;amount);</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>\s-1IMPORTANT\s0 \s-1NOTE:\s0 the details you enter for the Client Handle (\*(C`chandle\*(C') should be the contact details of your customer.</p><p>In order to make a registration transaction, you need to supply the \*(C`username\*(C' and \*(C`password\*(C' parameters - these correspond to your Registrar Handle's \s-1ID\s0 and password. Your password is \*(C`crypt()\*(C'ed before it is sent.</p><p>You need to set a range of extra parameters to register a domain. These are explained below.</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>\*(C`registrant\*(C' - the name of the domain's registrant. This is a text string corresponding to your customer's name and/or organisation. It should <strong>not</strong> be a handle \s-1ID\s0.</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>\*(C`chandle\*(C' - the Client Handle. The Client Handle should correspond to your customer's contact details.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>\*(C`thandle\*(C' - the Technical Handle. This may take two values. It can be a scalar containing the Handle \s-1ID\s0 of an existing handle, or "\*(C`chandle\*(C'" to set it to be whatever \*(C`chandle\*(C' is.</p>
  </dd>
  <dt>
    4.
  </dt>
  <dd>
    <p>\*(C`dns\*(C' - the \s-1DNS\s0 servers for the domain. This can either be an anonymous array of \s-1DNS\s0 hostnames, or a reference to hash such as that below:         my $dns = {                 &apos;ns0.example.com&apos; =&gt; &apos;192.168.1.1&apos;,                 &apos;ns1.example.com&apos; =&gt; &apos;192.168.1.2&apos;,         }; If you have specified default \s-1DNS\s0 servers using the Registrar Console you can set $dns to be '\*(C`defaults\*(C'' and the system will use these.</p>
  </dd>
  <dt>
    5.
  </dt>
  <dd>
    <p>\*(C`url\*(C' - if this parameter is provided and is not empty, it will be used to set a simple web forwarding for the domain <em>instead of any \s-1DNS\s0 servers provided</em>.</p>
  </dd>
  <dt>
    6.
  </dt>
  <dd>
    <p>\*(C`period\*(C' - the registration period for the domain name. This is an integer number of years and must be between 2 and 10, or 100. If this field is omitted the domain will be registered for 2 years.</p>
  </dd>

</dl>
<p>The response object for this command has all the usual methods (as documented in WWW::CNic::Response), plus the \*(C`amount()\*(C' method, which returns the price in Sterling for the domain.</p><p><strong>\s-1NB\s0</strong>: In addition to specifying a handle \s-1ID\s0 or "\*(C`chandle\*(C'" in the \*(C`chandle\*(C' and \*(C`thandle\*(C' fields, it is also possible to use an anonymous hash to supply the details of a new handle. However this is a legacy feature for compatibility with older versions of WWW::CNic and its use is not recommended.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Modifying Domain Names and Handles</h2>
        <div class="sectioncontent">
<h3>Modifying a Domain Name</h3>
<p>You can use \*(C`WWW::CNic\*(C' to do real-time modification of a domain. The procedure is somewhat similar to that of registration.</p><p>        use WWW::CNic;</p><p>        my $query =     WWW::CNic-&gt;new(                 command         =&gt; &apos;modify&apos;,                 domain          =&gt; &apos;example.uk.com&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd,         );</p><p>        $query-&gt;set(                 thandle =&gt; $handle,                 dns     =&gt; {                         drop    =&gt; &apos;all&apos;,                         add     =&gt; [&apos;ns0.example.com&apos;,   &apos;ns1.example.com&apos;],                 }                 url     =&gt; &apos;drop&apos;,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Domain modified OK.&#92;n";</p><p>        } else {                 printf("Error, could not modify domain: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>The \*(C`modify\*(C' command allows you to add and remove \s-1DNS\s0 servers and to change the Technical Handle. You can set two parameters for the transaction:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>\*(C`thandle\*(C' corresponds to a new Technical Handle.</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>\*(C`dns\*(C' must be an anonymous hash (or a reference to a hash) with two keys: \*(C`add\*(C' and \*(C`drop\*(C'. Their values are anonymous arrays of \s-1DNS\s0 hostnames. When dropping \s-1DNS\s0 servers, you can use the string &apos;all&apos; to indicate that you want to delete all the previously delegated \s-1DNS\s0 servers (this doesn't affect any servers you might add during the same transaction). <strong>\s-1NB\s0</strong>: In addition to specifying a handle \s-1ID\s0 in the \*(C`thandle\*(C' field, it is also possible to use an anonymous hash to supply the details of a new handle. However this usage is not recommended.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>\*(C`url\*(C' is an optional element containing a new \s-1URL\s0 to which to forward the domain. If this parameter is set, then the \*(C`dns\*(C' parameter is ignored, and any existing \s-1DNS\s0 servers are removed from the domain. If this parameter contains the special keyword &apos;drop&apos; then the web forwarding will be removed, and the domain will be 'parked'.</p>
  </dd>

</dl>

<h3>Modifying a Handle</h3>
<p>When a handle is created by the \*(C`create_handle\*(C' or \*(C`register\*(C' commands, or via other interfaces such as the Registrar Console, it is associated with your account. This allows you to update the contact details for that handle.</p><p><strong>\s-1IMPORTANT\s0</strong>: this command <strong>must not</strong> be used to completely change the contact details for a handle for a domain name. Instead you should use the \*(C`modify\*(C' function to change the \s-1ID\s0 of the handle on the domain name (see above). This function is only for incremental changes to contact details.</p><p>        use WWW::CNic;</p><p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;modify_handle&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd,         );</p><p>        $query-&gt;set(                 handle          =&gt; &apos;H12345&apos;,                 name            =&gt; &apos;John Doe&apos;,                 company         =&gt; &apos;Example, Inc&apos;,                 street1         =&gt; &apos;Example House&apos;,                 street2         =&gt; &apos;Example Street&apos;,                 city            =&gt; &apos;London&apos;,                 sp              =&gt; &apos;England&apos;,                 postcode        =&gt; &apos;EC1 123&apos;,                 country         =&gt; &apos;UK&apos;,                 phone           =&gt; &apos;+44.8700170900&apos;,                 fax             =&gt; &apos;+44.8700170901&apos;,                 email           =&gt; &apos;jd@example.com&apos;,                 visible         =&gt; 0,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Handle modified OK.&#92;n";</p><p>        } else {                 printf("Error, could not modify handle: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>You can change the following values:</p><p>        name         company         street1         street2         street3         city         sp         postcode         country         phone         fax         email         visible</p><p>The meaning of these fields is identical to those described in the \*(L"Creating a Handle\*(R" section. Note that \*(C`name\*(C', \*(C`country\*(C' and \*(C`email\*(C' are all mandatory and cannot be blank.</p>
<h3>Renewing a Domain Name</h3>
<p>        use WWW::CNic;         use strict;</p><p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;issue_renewals&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd         );</p><p>        $query-&gt;set(                 domains =&gt; [&apos;example1.uk.com&apos;, &apos;example2.uk.com&apos;],                 period  =&gt; 2, # 2 years         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Domain(s) renewed.&#92;n";</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>You can issue advance renewals for domains using this command. You simply set a \*(C`domains\*(C' parameter to be an anonymous array of domain names, or a reference to an array (eg \*(C`&#92;@domains\*(C').</p><p>Under normal circumstances, a renewal invoice or proforma is not issued right away, but is queued until the end of the day. If you want to generate a renewal invoice immediately, set the \*(C`immediate\*(C' parameter, like so:</p><p>        $query-&gt;set(immediate =&gt; 1);</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 printf( "%s #%d issued at a value of %01.2f.&#92;n",                         ($response-&gt;invoice &gt; 0 ? &apos;Invoice&apos; : &apos;Pro forma&apos;),                         ($response-&gt;invoice &gt; 0 ? $response-&gt;invoice : $response-&gt;proforma),                         $response-&gt;amount                 );</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p>
<h3>Deleting a Domain Name</h3>
<p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;delete&apos;,                 domain          =&gt; $domain,                 username        =&gt; $handle,                 password        =&gt; $password,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Domain has been deleted.&#92;n";</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>Using this service, you can delete an unwanted domain name. However, you must supply a reason code in order for the deletion to take place. The currently available codes are listed below:</p><p>        Code    Meaning         R1      Payment not received         R2      Fraudulent Registration         R3      Domain no longer required by registrant         R4      Domain registered in error</p><p>In accordance with our policy, an e-mail will be sent to the domain's Client Handle informing them that the domain has been deleted.</p>
<h3>Requesting Reactivation of a Domain Name</h3>
<p>Domains that are on the \*(L"Pending Deletion\*(R" status may be reactivated upon request. This function provides a way to automatically submit a reactivation request. When we receive your request, it will be processed by a member of our Domain Administration team. The domain will then be placed back on the \*(L"Live\*(R" status, and a registration or renewal invoice will be re-issed.</p><p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;reactivate&apos;,                 domain          =&gt; $domain,                 username        =&gt; $handle,                 password        =&gt; $password,         );</p><p>        $query-&gt;set(&apos;email&apos;, &apos;yourname@example.com&apos;);         $query-&gt;set(&apos;period&apos;, 1); # renewal period in years</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Reactivation request accepted.&#92;n";</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>If you specify an \*(C`email\*(C' parameter, our administrators will send a notification to that address. \*(C`period\*(C' may be any integer between 1 and 10.</p>
<h3>Pushing a Domain Name To Another Registrar</h3>
<p>You may request that a domain name on your account be \*(L"pushed\*(R" to another registrar account. A domain name may only be pushed if:</p>
<dl class='dl-vertical'>
  <dt>
    the domain name is on your account
  </dt>
  <dd>
    
  </dd>
  <dt>
    there are no unpaid registration or renewal fees against it
  </dt>
  <dd>
    
  </dd>

</dl>
<p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;push_domain&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,                 domain          =&gt; $domain,                 handle          =&gt; $gaining_handle_id,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Domain transferred OK.&#92;n";</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>If the transaction is successful, the domain name will be immediately removed from your account.</p><p>If you are also listed as Technical Contact for the domain name, then this handle will also be changed to the gaining registrar account.</p><p>This command will also transfer sponsorship of the client and/or technical handles for the domain name, but only if these handles are not associated with any other domains on your account. Where a handle is associated with domains on multiple registrar accounts, the handle becomes \*(L"unsponsored\*(R".</p><p>We will send an e-mail to the gaining registrar notifying them of the domain transfer.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Transferring Domain Names</h2>
        <div class="sectioncontent">
<h3>Starting a Domain Transfer</h3>
<p>You can <strong>start</strong> a transfer process for one or more domain names using the \*(C`start_transfer\*(C' command. However, there are \*(L"out-of-band\*(R" authorisations that must take place before a transfer is completed. The procedure for domain transfers is as follows:</p><p>1. The <strong>gaining</strong> registrar submits a transfer request. At this point, the transfer status is \*(C`new\*(C'.</p><p>2. Our system sees the new request and sends an authorisation message to the <strong>losing</strong> registrar. The status of the transfer is now \*(C`pending\*(C'.</p><p>3. The <strong>losing</strong> registrar may then explicitly <em>approve</em> or <em>reject</em> the transfer request within 5 days. The status of the transfer is now either \*(C`approved\*(C' or \*(C`rejected\*(C'.</p><p>4. If the transfer was <strong>rejected</strong>, the <strong>gaining</strong> registrar is notified.</p><p>5. If the transfer was <strong>approved</strong>, the object is transferred to the <strong>gaining</strong> registrar. If the Technical Contact for the domain name matches the <strong>losing</strong> registrar, then this is also changed to the <strong>gaining</strong> registrar.</p><p>6. If the transfer <strong>was not</strong> submitted with the \*(C`authinfo\*(C' parameter, and is not explicitly <em>approved</em> or <em>rejected</em> by the <strong>losing</strong> registrar <strong>within five calendar days</strong>, then the transfer is automatically marked as \*(C`rejected\*(C'. The transfer may still be actioned if the <strong>gaining</strong> registrar can acquire written authorisation (ideally on company letterhead) from the Registrant.</p><p>7. If the transfer <strong>was</strong> submitted with the \*(C`authinfo\*(C' parameter, and is not explicitly <em>approved</em> or <em>rejected</em> by the <strong>losing</strong> registrar <strong>within five calendar days</strong>, then the transfer is approved as per 5 above.</p><p>        my $query = WWW::CNic-&gt;new(                 command         =&gt; &apos;start_transfer&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,         );</p><p>        $query-&gt;set(domains =&gt; [&apos;example.uk.com&apos;]);         $query-&gt;set(authinfo =&gt; [&apos;abc123xyz&apos;]); # optional</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Transfer request has been accepted.";</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p>
<h3>Getting a List of Pending Transfers</h3>
<p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;poll_transfers&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_error) {                 printf("Error: %s&#92;n", $response-&gt;error);         }</p><p>        foreach my $transfer ($response-&gt;transfers) {                 printf("Domain: %s&#92;n", $transfer-&gt;{domain});</p><p>                if ($transfer-&gt;{type} eq &apos;in&apos;) {                         printf("&#92;tLosing handle: %s (email %s)&#92;n", $transfer-&gt;{losing_id}, $transfer-&gt;{losing_email});</p><p>                } elsif ($transfer-&gt;{type} eq &apos;out&apos;) {                         printf("&#92;tGaining handle: %s (email %s)&#92;n", $transfer-&gt;{gaining_id}, $transfer-&gt;{gaining_email});</p><p>                }</p><p>                printf(                         "&#92;tTransfer initiated on %s&#92;n",                         scalar(localtime($transfer-&gt;{initiated}))                 );</p><p>                printf(                         "&#92;tTransfer expires on on %s&#92;n",                         scalar(localtime($transfer-&gt;{actiondate}))                 );</p><p>        }</p><p>The \*(C`transfers()\*(C' method returns an array of hashrefs containing transfer information. If there are no transfers, then the array will be empty.</p>
<h3>Cancelling a Domain Transfer</h3>
<p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;cancel_transfer&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,                 domain          =&gt; &apos;example.uk.com&apos;,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Transfer cancelled.&#92;n";</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>If you are the gaining registrar for a domain transfer, you can cancel the request before it is approved or rejected by the losing registrar. If the transfer has already been approved or rejected, then the server will return an error.</p>
<h3>Checking the Status of a Domain Transfer</h3>
<p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;check_transfer&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,                 domain          =&gt; &apos;example.uk.com&apos;,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 printf("The transfer status of example.uk.com is &apos;%s&apos;&#92;n", $response-&gt;status);</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>This lets you query the status of a domain name transfer. The returned status is a string and is one of: \*(C`pending\*(C', \*(C`cancelled\*(C', \*(C`approved\*(C', \*(C`rejected\*(C'. If there have been other transfer requests in the past, the server will return the status of the most recent one.</p><p>If there are no transfers for the domain name, or you are not the gaining handle, the server will return an error.</p>
<h3>Approving a Domain Transfer</h3>
<p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;approve_transfer&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,                 domain          =&gt; &apos;example.uk.com&apos;,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Transfer approved.&#92;n";</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>If there are no transfers for the domain name, or you are not the losing handle, the server will return an error.</p>
<h3>Rejecting a Domain Transfer</h3>
<p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;reject_transfer&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,                 domain          =&gt; &apos;example.uk.com&apos;,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 print "Transfer rejected.&#92;n";</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>If there are no transfers for the domain name, or you are not the losing handle, the server will return an error.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Account Management</h2>
        <div class="sectioncontent">
<h3>Getting a List of Upcoming Renewals</h3>
<p>        use WWW::CNic;         use POSIX qw(strftime);</p><p>        my $months = 3;</p><p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;renewals&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd,                 months          =&gt; $months         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 foreach my $domain ($response-&gt;domains) {                         printf( "Domain %s expires on %s and will cost %01.2f",                                 $domain,                                 strftime(&apos;%d/%m/%Y&apos;, localtime($response-&gt;expiry($domain))),                                 $response-&gt;amount($domain)                         );                 }</p><p>        } else {                 printf("Error, couldn&apos;t get list of upcoming renewals: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>This command lets you retrieve a list of domain names due for renewal in the last $months months. You can use the \*(C`amount\*(C' and \*(C`expiry\*(C' methods to retrieve the renewal price and expiry date for each domain.</p>
<h3>Getting a Domain List</h3>
<p>        use WWW::CNic;         use POSIX qw(strftime);</p><p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;list_domains&apos;,                 username        =&gt; $handle,                 password        =&gt; $passwd,         );</p><p>        $query-&gt;set(                 offset  =&gt; 5,                 length  =&gt; 10,                 orderby =&gt; &apos;name&apos;         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 foreach my $domain ($response-&gt;domains) {                         printf( "%s: %s - %s (%s)&#92;n",                                 $domain,                                 strftime(&apos;%d/%m/%Y&apos;, localtime($response-&gt;regdate($domain))),                                 strftime(&apos;%d/%m/%Y&apos;, localtime($response-&gt;expirydate($domain))),                                 $response-&gt;status($domain),                         );                 }</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>You can use this command to retrieve a list of domains against your handle. The response object returned has methods allowing the retrieval of the registration date and expiry date and status. The \*(C`offset\*(C' and \*(C`length\*(C' parameters work in the SQL-ish way you'd expect. The \*(C`orderby\*(C' parameter can be \*(C`name\*(C', \*(C`regdate\*(C' or \*(C`expirydate\*(C'.</p>
<h3>Getting Pricing Information</h3>
<p>        use WWW::CNic;         use strict;</p><p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;get_pricing&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,         );</p><p>        $query-&gt;set(type =&gt; &apos;renewal&apos;);</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_success) {                 printf("the price we pay for renewals of uk.com domains is %.2f&#92;n", $response-&gt;response(&apos;uk.com&apos;));</p><p>        } else {                 printf("Error: %s&#92;n", $response-&gt;error);</p><p>        }</p><p>This command allows you to retrieve pricing information for your registrar account. You must specify a \*(C`type\*(C' parameter, which can be either '\*(C`registration\*(C'' (the default) or '\*(C`renewal\*(C''.</p>
<h3>Listing Outstanding Domains</h3>
<p>        use WWW::CNic;         use strict;</p><p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;list_outstanding_domains&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,         );</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_error) {                 printf("Error: %s&#92;n", $response-&gt;error);         }</p><p>        foreach my $domain ($response-&gt;domains) {                 printf(                         "Domain: %s&#92;n".                         "&#92;tExpired: %s&#92;n".                         "&#92;tDocument: %s #%d&#92;n".                         "&#92;tIssued on: %s&#92;n".                         "&#92;tAmount: %s%01.2f&#92;n".                         "&#92;tType: %s&#92;n".                         "&#92;tYears: %s&#92;n".                         "&#92;tBatch: %d&#92;n&#92;n",                         $domain-&gt;{domain},                         $domain-&gt;{expiry},                         ($domain-&gt;{invoice} &gt; 0 ? &apos;Invoice&apos; : &apos;Pro forma&apos;),                         ($domain-&gt;{invoice} &gt; 0 ? $domain-&gt;{invoice} : $domain-&gt;{proforma}),                         $domain-&gt;{date},                         $domain-&gt;{currency},                         $domain-&gt;{amount},                         $domain-&gt;{type},                         $domain-&gt;{years},                         $domain-&gt;{batch},                 );         }</p><p>This command retrieves a list of all unpaid invoice items for domain names on your account. Each registration or renewal causes on item to be added to an invoice (or pro forma invoice for VAT-paying registrars).</p><p>You can combine this function with the one below to automatically submit payment advice for invoices (you still need to send us the actual money!).</p>
<h3>Submitting Payment Advice</h3>
<p>        use WWW::CNic;         use strict;</p><p>        my $query = WWW::CNic-&gt;new(                 use_ssl         =&gt; 1,                 command         =&gt; &apos;submit_payment_batch&apos;,                 username        =&gt; $handle,                 password        =&gt; $password,         );</p><p>        $query-&gt;set(&apos;method&apos;, &apos;CH&apos;); # CH for a cheque, BA for a bank transfer         $query-&gt;set(&apos;domains&apos;, &#92;@domains);</p><p>        my $response = $query-&gt;execute;</p><p>        if ($response-&gt;is_error) {                 printf("Error: %s&#92;n", $response-&gt;error);         }</p><p>        printf(                 "Payment Batch #%d created for %d items at %s%01.2f (plus %s%01.2f VAT)&#92;n",                 $response-&gt;response(&apos;batch&apos;),                 $response-&gt;response(&apos;items&apos;),                 $response-&gt;response(&apos;currency&apos;),                 $response-&gt;response(&apos;amount&apos;),                 $response-&gt;response(&apos;currency&apos;),                 $response-&gt;response(&apos;vat&apos;),         );</p><p>You can use this function to submit advice about a payment for outstanding domain registrations and renewals. Combining this function with the function above allows you to retrieve a list of outstanding domain names, filter them based on whether or not you've received payment or a deletion request from your customer, and generate a payment batch that can be associated with a cheque or wire transfer issued by your company.</p><p>Please note that you will need to factor in the amount of \s-1VAT\s0 (if applicable) - this amount is available in the response object.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Feedback</h2>
        <div class="sectioncontent">
<p>We're always keen to find out about how people are using our Toolkit system, and we're happy to accept any comments, suggestions or problems you might have. If you want to get in touch, please e-mail toolkit@centralnic.com.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Copyright</h2>
        <div class="sectioncontent">
<p>This module is (c) 2011 CentralNic Ltd. All rights reserved. This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">See Also</h2>
        <div class="sectioncontent">
<ul>
<li><p>&lt;http://toolkit.centralnic.com/&gt;</p></li><li><p>WWW::CNic</p></li><li><p>WWW::CNic::Simple</p></li>
</ul>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="WWW::CNic.3pm.html"><span aria-hidden="true">&larr;</span> WWW::CNic.3pm: A web-based api for the centralnic domain registry system.</a></li>
   <li class="next"><a href="WWW::CNic::NG.3pm.html">WWW::CNic::NG.3pm: A next generation interface to "www:cnic". <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
