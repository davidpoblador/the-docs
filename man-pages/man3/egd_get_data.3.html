<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>egd_get_data: Peek buffered data</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Peek buffered data">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="egd_get_data (3) manual">
  <meta name="twitter:description" content="Peek buffered data">
  <meta name="twitter:image" content="https://www.carta.tech/images/libeegdev-dev-egd_get_data-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/egd_get_data.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="egd_get_data (3) manual" />
  <meta property="og:description" content="Peek buffered data" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libeegdev-dev-egd_get_data-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">egd_get_data<small> (3)</small></h1>
        <p class="lead">Peek buffered data</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/egd_get_data.3.html">
      <span itemprop="name">egd_get_data: Peek buffered data</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libeegdev-dev/">
      <span itemprop="name">libeegdev-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/egd_get_data.3.html">
      <span itemprop="name">egd_get_data: Peek buffered data</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;eegdev.h&gt;</strong></p><p><strong>ssize_t egd_get_available(struct eegdev* </strong><em>dev</em><strong>);</strong></p><p><strong>ssize_t egd_get_data(struct eegdev* </strong><em>dev</em><strong>, size_t </strong><em>ns</em><strong>, ...);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>egd_get_available</strong>() returns the number of samples that have been buffered by the device referenced by <em>dev</em> and that have not been read yet.</p><p><strong>egd_get_data</strong>() peeks the <em>ns</em> next samples from the buffered data acquired by the device referenced by <em>dev</em> and fills the arrays provided in the variable list of arguments with the obtained data. If all requested samples have been already acquired, the function returns immediately. Otherwise, the call blocks until the requested data is available, the acquisition stops or a problem occurs. In the last two cases, the data read may be less than requested.</p><p>The arrays provided in the variable list of argument are filled following the formats specified by previous call to <a href="../man3/egd_acq_setup.3.html"><strong>egd_acq_setup</strong>(3)</a>. In particular, the number of arrays supplied in the variable list of argument and their size should be consistent with the number of arrays and strides specified by the call to <a href="../man3/egd_acq_setup.3.html"><strong>egd_acq_setup</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p><strong>egd_get_available</strong>() returns the number of unread samples in case of succes. Otherwise, -1 is returned and <em>errno</em> is set accordingly.</p><p>In case of success, <strong>egd_get_data</strong>() returns the number of read samples (which can be less than the requested number). Otherwise, -1 is returned and <em>errno</em> is set accordingly.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p><strong>egd_get_available</strong>() and <strong>egd_get_data</strong>() will fail if:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>EINVAL</strong></p>
  </dt>
  <dd>
    <p><em>dev</em> is NULL.</p>
  </dd>
  <dt>
    <p><strong>ENOMEM</strong></p>
  </dt>
  <dd>
    <p>The internal ringbuffer of the device referenced by <em>dev</em> is full.</p>
  </dd>
  <dt>
    <p><strong>EAGAIN</strong></p>
  </dt>
  <dd>
    <p>The underlying hardware referenced by <em>dev</em> has encountered a loss of connection, maybe due some cable disconnected or a power switch set to off.</p>
  </dd>
  <dt>
    <p><strong>EIO</strong></p>
  </dt>
  <dd>
    <p>The underlying hardware referenced by <em>dev</em> has encountered a loss of synchronization for an unknown reason.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Please be aware that the user has no obligation to make all the calls to <strong>egd_get_data</strong>() and <strong>egd_get_available</strong>() during the acquisition. He can also peform some of them after the acquisition which will correspond to get the remaining buffered data.</p><p>For example, it might happened that a user want to wait for an certain external event to occur before stopping the acquisition. In this situation, the usual workflow would be to start the acquisition, get regurlarly some data while scanning the event to occur. When this happens, the acquisition is immediately stopped. However at the moment of stopping the acquisition, there might still be some buffered data which could be important. Calling <strong>egd_get_available</strong>() after <a href="../man3/egd_stop.3.html"><strong>egd_stop</strong>(3)</a> would then return the size of the remaining data that could be obtained with <strong>egd_get_data</strong>().</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
#define NEEG	8
#define NTRI	1
#define NS	4

int ns_tot;
ssize_t ns_read;
float eegarr[NEEG*NS];
int32_t triarr[NTRI*NS];
struct grpconf grp[2];
unsigned int strides[2];

<strong>/* Assume that a device has been successfully opened, i.e. there</strong>
is a valid 'dev' variable of type struct eegdev* */

strides[0] = NEEG*sizeof(float);
strides[1] = NTRI*sizeof(int32_t);

grp[0].sensortype = egd_sensor_type("eeg");
grp[0].index = 0;
grp[0].iarray = 0;
grp[0].arr_offset = 0;
grp[0].nch = NEEG;
grp[0].datatype = EGD_FLOAT;
grp[1].sensortype = egd_sensor_type("trigger");
grp[1].index = 0;
grp[1].iarray = 1;
grp[1].arr_offset = 0;
grp[1].nch = NTRI;
grp[1].datatype = EGD_INT32;

<strong>/* Setup how to get the data */</strong>
egd_acq_setup(dev, 2, strides, 2, grp);

<strong>/* Start the acquisition.</strong>
From now, all incoming samples will be buffered */
egd_start(dev);
ns_tot = 0;

while (ns_tot &lt; 1000) {
	<strong>/* Get the data */</strong>
	ns_read = egd_get_data(dev, NS, eegarr, triarr);
	if (ns_read &lt; 0) {
		<strong>/* Handle failure */</strong>
	}
	ns_tot += ns_read;

	<strong>/* do something with the new data */</strong>
}

<strong>/* Stop the acquisition, i.e. no new data is buffered */</strong>
egd_stop(dev);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO egd_get_data&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/egd_acq_setup.3.html"><strong>egd_acq_setup</strong>(3)</a>, <a href="../man3/egd_start.3.html"><strong>egd_start</strong>(3)</a>, <a href="../man3/egd_stop.3.html"><strong>egd_stop</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="egd_get_cap.3.html"><span aria-hidden="true">&larr;</span> egd_get_cap.3: Query various information about the device capabilities</a></li>
   <li class="next"><a href="egd_get_numch.3.html">egd_get_numch.3: Get the number of channels sampled by type <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
