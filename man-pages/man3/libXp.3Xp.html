<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>libXp: X print client library</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="X print client library">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="libXp (3Xp) manual">
  <meta name="twitter:description" content="X print client library">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxp-dev-libXp-3Xp.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3Xp/libXp.3Xp.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="libXp (3Xp) manual" />
  <meta property="og:description" content="X print client library" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxp-dev-libXp-3Xp.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">libXp<small> (3Xp)</small></h1>
        <p class="lead">X print client library</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3Xp/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3Xp/libXp.3Xp.html">
      <span itemprop="name">libXp: X print client library</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxp-dev/">
      <span itemprop="name">libxp-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3Xp/libXp.3Xp.html">
      <span itemprop="name">libXp: X print client library</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>cc</strong> [ <strong>flag...</strong> ] file...-lXp [ <strong>library...</strong> ]</p>
<pre>
#include &lt;X11/extensions/Print.h&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>libXp provides public APIs to allow client applications to render to non-display devices.</p><p>When an application wishes to print, it makes a display connection to the X print server and asks to see the list of printers available with an <em>XpGetPrinterList()</em> request. Once the application has selected a printer, it creates and sets a print context using <em>XpCreateContext()</em> and <em>XpSetContext().</em></p><p>The Print Context represents the embodiment of the printer selected. It is initialized by the Xprint server at <em>XpCreateContext()</em> time to contain a printer's default capabilities, as well as, the description of its overall capabilties, and to maintain the state of settings on the printer, the state of rendering against the printer, and the rendered output.</p><p>The Print Context affects how the DDX driver generates its page description language (PDL) and how the PDL is submitted to a spooler. The print context may also affect fonts and other elements in the dix layer of the X Print Server. The print contexts can be shared among processes. Applications can enlist the help of secondary processes to manipulate print options in the Print context rather than taking on the task directly.</p><p>Once an application has set options within the print context, it makes calls such as <em>XpStartJob()</em> to delineate jobs, documents, and pages within a sequence of normal X calls.</p><p>A job is a collection of documents, where each document is in turn a collection of pages. When <em>XpEndJob()</em> is called, the resulting PDL is either sent to a print spooler or can be retrieved by the application itself.</p><p>The developer basically has to make changes to the X application to make use of the X Print Service.</p><p>A simple X application supplemented with some of the libXp routines might look like this:</p>
<pre>
#include &lt;X11/Xlib.h&gt;
#include &lt;X11/extensions/Print.h&gt;

main()
{
    Display *pdpy;
    Screen *pscreen;
    Window pwin;
    XPPrinterList plist;
    XPContext pcontext;
    int plistCnt;
    char *attrPool;
#define NPOOLTYPES 5
    XPAttributes poolType[NPOOLTYPES] = {XPJobAttr,XPDocAttr,XPPageAttr,
					 XPPrinterAttr,XPServerAttr};
    int i;
    unsigned short width, height;
    XRectangle rect;
    char *printServerName = ":1";
    char *mylaser = "varos";

    /*
     * connect to the X print server
     */
    pdpy = XOpenDisplay( printServerName );

    /*
     * see if the printer "mylaser" is available
     */

    plist =  XpGetPrinterList (pdpy, mylaser, &plistCnt );

    /*
     * Initialize a print context representing "mylaser"
     */

    pcontext = XpCreateContext( pdpy, plist[0].name );
    XpFreePrinterList( plist );

	/*
	 * Possibly modify attributes in the print context
	 */
    for(i=0;i &lt; NPOOLTYPES;i++) {
	if(attrPool = XpGetAttributes( pdpy, pcontext, poolType[i] )) {
	    /* twiddle attributes */
	    /*
	      XpSetAttributes( pdpy, pcontext, poolType[i],
	                       attrPool, XPAttrMerge );
	    */
	    XFree(attrPool);
	}
    }


    /*
     * Set a print server, then start a print job against it
     */

    XpSetContext( pdpy, pcontext );
    XpStartJob( pdpy, XPSpool );

    /*
     * Generate the first page
     */

    pscreen = XpGetScreenOfContext( pdpy, pcontext );
    XpGetPageDimensions( pdpy, pcontext, &width, &height,
			 &rect);
    pwin = XCreateSimpleWindow( pdpy, RootWindowOfScreen( pscreen ),
				rect.x, rect.y, rect.width, rect.height, 2,
				BlackPixelOfScreen( pscreen),
				WhitePixelOfScreen( pscreen));

    XpStartPage( pdpy, pwin );
    /* usual rendering stuff..... */
    XpEndPage( pdpy );

    XpStartPage( pdpy, pwin );
    /* some more rendering.....   */
    XpEndPage( pdpy );

    /*
     * End the print job - the final results are sent by the X print
     * server to the spooler sub system.
     */

    XpEndJob( pdpy );
    XpDestroyContext( pdpy, pcontext );
    XCloseDisplay( pdpy );
}

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO libXp&hellip;</h2>
        <div class="sectioncontent">
<p><strong>Xprt</strong>(1), <strong>XpCreateContext</strong>(3Xp), <strong>XpDestroyContext</strong>(3Xp), <strong>XpEndJob</strong>(3Xp), <strong>XpEndPage</strong>(3Xp), <strong>XpFreePrinterList</strong>(3Xp), <strong>XpGetAttributes</strong>(3Xp), <strong>XpGetPageDimensions</strong>(3Xp), <strong>XpGetPrinterList</strong>(3Xp), <strong>XpSetAttributes</strong>(3Xp), <strong>XpSetContext</strong>(3Xp), <strong>XpStartJob</strong>(3Xp), <strong>XpStartPage</strong>(3Xp)</p><p><em>X Print Service Extension Library</em></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XpStartPage.3Xp.html"><span aria-hidden="true">&larr;</span> XpStartPage.3Xp: Indicates the beginning of a print page.</a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
