<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ascmap: Ascmap- defines main structures and function for image quantization libafterimage/ascmap.h</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ascmap- defines main structures and function for image quantization libafterimage/ascmap.h">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ascmap (3x) manual">
  <meta name="twitter:description" content="Ascmap- defines main structures and function for image quantization libafterimage/ascmap.h">
  <meta name="twitter:image" content="https://www.carta.tech/images/libafterimage-dev-ascmap-3x.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3x/ascmap.3x.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ascmap (3x) manual" />
  <meta property="og:description" content="Ascmap- defines main structures and function for image quantization libafterimage/ascmap.h" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libafterimage-dev-ascmap-3x.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ascmap<small> (3x)</small></h1>
        <p class="lead">Ascmap- defines main structures and function for image quantization libafterimage/ascmap.h</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/ascmap.3x.html">
      <span itemprop="name">ascmap: Ascmap- defines main structures and function for image quantization libafterimage/ascmap.h</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libafterimage-dev/">
      <span itemprop="name">libafterimage-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3x/ascmap.3x.html">
      <span itemprop="name">ascmap: Ascmap- defines main structures and function for image quantization libafterimage/ascmap.h</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NAMEascmap</h2>
        <div class="sectioncontent">
<p>- Defines main structures and function for image quantization.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Image quantization is needed primarily in order to be able to export images into file, with colormap format, such as GIF and XPM. libAfterImage attempts to allocate colorcells to the most used colors, and then approximate remaining colors with the closest colorcell.</p><p>Since quality of quantization is in reverse proportion to the number of colors in original image, libAfterImage allows one to set arbitrary level of downsampling of the color spectrum in the range of 8 bit per channel to 1 bit per channel. Downsampling is performed by simple dropping of less significant bits off of color values.</p><p>In order to be able to determine closeness of colors, 3-channel RGB values are converted into flat 24bit (or less if downsampling is used) index. That is done by intermixing bits from different channels, like so : R8G8B8R7G7B7...R1G1B1. That flat index is used to arrange colors in ascending order, and later on to be able to find closest mapped color. Simple hashing technique is used to speed up the sorting/searching, as it allows one to limit linked lists traversals.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ascmap&hellip;</h2>
        <div class="sectioncontent">
<p>Structures :</p>
<pre>
         ASColormapEntry
         ASColormap
</pre>
<p>Functions :</p>
<pre>
         colormap_asimage(), destroy_colormap()
</pre>
<p>Other libAfterImage modules :</p>
<pre>
         ascmap.h asfont.h asimage.h asvisual.h blender.h export.h
         import.h transform.h ximage.h
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Sasha Vasko &lt;sasha at aftercode dot net&gt; libAfterImage/ASColormapEntry</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASColormapEntry</h2>
        <div class="sectioncontent">
<p>- ASColormapEntry represents single colorcell in the colormap.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef struct ASColormapEntry {</p>
<pre>
    CARD8 red, green, blue;
</pre>
<p>}ASColormapEntry;</p><p>libAfterImage/ASColormap</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEASColormap</h2>
        <div class="sectioncontent">
<p>- ASColormap represents entire colormap generated for the image.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>typedef struct ASColormap {</p>
<pre>
    ASColormapEntry *entries ;  /* array of colorcells */
    unsigned int count ;        /* number of used colorcells */
    ASSortedColorHash *hash ;   /* internal data */
    Bool has_opaque ;           /* If True then Image has opaque pixels */
</pre>
<p>}ASColormap;</p><p>libAfterImage/colormap_asimage()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEcolormap_asimage()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>int *colormap_asimage( ASImage *im, ASColormap *cmap,</p>
<pre>
                       unsigned int max_colors, unsigned int dither,
                       int opaque_threshold );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    im
  </dt>
  <dd>
    <p>- pointer to valid ASImage structure.</p>
  </dd>
  <dt>
    cmap
  </dt>
  <dd>
    <p>- preallocated structure to store colormap in.</p>
  </dd>
  <dt>
    max_colors
  </dt>
  <dd>
    <p>- maximum size of the colormap.</p>
  </dd>
  <dt>
    dither
  </dt>
  <dd>
    <p>- number of bits to strip off the color data ( 0...7 )</p>
  </dd>
  <dt>
    opaque_threshold
  </dt>
  <dd>
    <p>- alpha channel threshold at which pixel should be treated as opaque</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>pointer to the array of indexes representing pixel's colorcells. This array has size of WIDTHxHEIGHT where WIDTH and HEIGHT are size of the source image.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This function is all that is needed to quantize the ASImage. In order to obtain colorcell of the pixel at (x,y) from result, the following code could be used : cmap-&gt;entries[res[y*width+x]] where res is returned pointer. Recommended value for dither parameter is 4 while quantizing photos to 256 colors, and it could be less , if original has limited number of colors. libAfterImage/destroy_colormap()</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NAMEdestroy_colormap()</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>void destroy_colormap( ASColormap *cmap, Bool reusable );</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    cmap
  </dt>
  <dd>
    <p>- pointer to valid ASColormap structure.</p>
  </dd>
  <dt>
    reusable
  </dt>
  <dd>
    <p>- if True, then the memory pointed to by cmap will not be deallocated, as if it was allocated on stack</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Destroys ASColormap object created using colormap_asimage.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="afterimage.3x.html"><span aria-hidden="true">&larr;</span> afterimage.3x: Afterimage- overview of libafterimage image library libafterimage/libafterimage</a></li>
   <li class="next"><a href="ascompose.3x.html">ascompose.3x: Ascompose- provides access to libafterimage functionality, using scripts written in custom xml dialect libafterimage/ascompose <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
