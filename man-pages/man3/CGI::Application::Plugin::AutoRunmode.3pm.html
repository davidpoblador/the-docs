<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CGI::Application::Plugin::AutoRunmode: Cgi::app plugin to automatically register runmodes</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Cgi::app plugin to automatically register runmodes">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="CGI::Application::Plugin::AutoRunmode (3pm) manual">
  <meta name="twitter:description" content="Cgi::app plugin to automatically register runmodes">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcgi-application-plugin-autorunmode-perl-CGI::Application::Plugin::AutoRunmode-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/CGI::Application::Plugin::AutoRunmode.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="CGI::Application::Plugin::AutoRunmode (3pm) manual" />
  <meta property="og:description" content="Cgi::app plugin to automatically register runmodes" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcgi-application-plugin-autorunmode-perl-CGI::Application::Plugin::AutoRunmode-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">CGI::Application::Plugin::AutoRunmode<small> (3pm)</small></h1>
        <p class="lead">Cgi::app plugin to automatically register runmodes</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/CGI::Application::Plugin::AutoRunmode.3pm.html">
      <span itemprop="name">CGI::Application::Plugin::AutoRunmode: Cgi::app plugin to automatically register runmodes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcgi-application-plugin-autorunmode-perl/">
      <span itemprop="name">libcgi-application-plugin-autorunmode-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/CGI::Application::Plugin::AutoRunmode.3pm.html">
      <span itemprop="name">CGI::Application::Plugin::AutoRunmode: Cgi::app plugin to automatically register runmodes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Using subroutine attributes:</p>
<pre>
        package MyApp;
        use base &apos;CGI::Application&apos;;
        use CGI::Application::Plugin::AutoRunmode;

        sub my_run_mode : StartRunmode {
                # do something here
        }

        sub another_run_mode : Runmode {
                # do something else
        }

        # you now have two run modes
        # "my_run_mode" and "another_run_mode"
        # "my_run_mode" is the start (default) run mode
</pre>
<p>Declare that every method in a (delegate) class is a run mode.</p><p>        package MyAppRunmodes;         # the delegate class                 sub my_run_mode  {                         my ($app, $delegate) = @_;                                 # do something here                 }</p><p>                sub another_run_mode  {                                 # do something else                 }</p><p>        package MyApp;         use base &apos;CGI::Application&apos;;</p><p>                sub setup{                         my ($self) = @_;                         my $delegate = &apos;MyAppRunmodes&apos;;                                 # $delegate can be a class name or an object                         $self-&gt;param(&apos;::Plugin::AutoRunmode::delegate&apos; =&gt; $delegate);                 }</p><p>         # you now have two run modes          # "my_run_mode" and "another_run_mode"</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This plugin for CGI::Application provides easy ways to setup run modes. You can just write the method that implement a run mode, you do not have to explicitly register it with CGI::App anymore.</p><p>There are two approaches:</p>
<dl class='dl-vertical'>
  <dt>
    Declare run modes with subroutine attributes.
  </dt>
  <dd>
    <p>You can flag methods in your CGI::App subclass with the attribute \*(L"Runmode\*(R" or \*(L"StartRunmode\*(R" (these attributes are case-insensitive)</p>
  </dd>
  <dt>
    Declare that every method in a class is a run mode.
  </dt>
  <dd>
    <p>You can assign a delegate object, all whose methods will become runmodes You can also mix both approaches. Delegate runmodes receive two parameters: The first one is the CGI::App instance, followed by the delegate instance or class name. This can be useful if you have delegate objects that contain state. It is possible to chain multiple delegates by specifying an array reference containing the delegate instances or class names. This chain is checked from left to right and the runmode will be delegated to the first match.</p>
  </dd>

</dl>
<p>It both cases, the resulting runmodes will have the same name as the subroutine that implements them. They are activated by a cgiapp_prerun hook provided by this plugin (if you are using CGI::Application older than version 4, hooks are not available, and you can import a cgiapp_prerun method instead).</p><h3>\s-1EXPORT\s0</h3>
<p>This module needs to export some symbols to do its job.</p><p>First of all, there are the handlers for the Runmode attribute.</p><p>In addition to that, the cgiapp_prerun hook is installed in your application class. This is not done as an export per se, but the hook installation is still done in the import subroutine. Sound confusing, is confusing, but you do not really need to know what is going on exactly, just keep in mind that in order to let things go on, you have to \*(L"use\*(R" the module with the default exports:</p><p>        use CGI::Application::Plugin::AutoRunmode;</p><p>and not</p><p>        use CGI::Application::Plugin::AutoRunmode ();                 # this will disable the Runmode attributes                 # DO NOT DO THIS</p><p>You can also explicitly import the cgiapp_prerun method. This will disable the installation of the hook. Basically, you only want to do this if you are using CGI::Application prior to version 4, where hooks are not supported.</p><p>        use CGI::Application::Plugin::AutoRunmode                 qw [ cgiapp_prerun];                 # do this if you use CGI::Application version 3.x</p>
<h3>How does it work?</h3>
<p>After CGI::App has determined the name of the run mode to be executed in the normal way, cgiapp_prerun checks if such a run mode exists in the map configured by $self-&gt;<em>run_modes()</em>.</p><p>If the run mode already exists, it gets executed normally (this module does nothing). This means that you can mix the ways to declare run modes offered by this plugin with the style provided by core CGI::App.</p><p>If that is not the case, it tries to find a method of the same name in the application class (or its superclasses) that has been flagged as a Runmode. If it finds one, it augments the mapping with a subroutine reference to that method.</p><p>If that step fails, it looks if a delegate has been defined and searches the methods of that delegate object for one that matches the name of the runmode.</p><p>The runmode can then be executed by CGI::App as if it had been set up by $self-&gt;<em>run_modes()</em> in the first place.</p><p><em>The run mode called \*(L"start\*(R"</em></p><p>Note that because the plugin only gets activated when you call a run mode that is not registered in the usual run mode map, you cannot use it to create a run mode called \*(C`start\*(C'. The CGI:App base class always registers a run mode of that name.</p>
<h3>Does it still work if I change the run mode in cgiapp_prerun ?</h3>
<p>If you have a cgiapp_prerun method and change the run mode there, the installed hook will not be able to catch it (because of the ordering of hooks).</p><p>So, if you do that, you have to explicitly make this call before returning from cgiapp_prerun:</p><p>   CGI::Application::Plugin::AutoRunmode::cgiapp_prerun($self);</p><p>Again, this is only necessary if you change the run mode (to one that needs the auto-detection feature).</p><p>Also, this kind of code can be used with CGI::App 3.x if you have a cgiapp_prerun.</p>
<h3>StartRunmode</h3>
<p>The attribute StartRunmode designates that subroutine to be the start (default) run mode. If you use this feature, the \*(L"traditional\*(R" way of setting the start run mode (calling \*(C`$self-&gt;start_mode(&apos;name&apos;)\*(C') is disabled and can no longer be used in this application (including subclasses and instance scripts).</p>
<h3>ErrorRunmode</h3>
<p>The attribute ErrorRunmode designates that subroutine to be the error run mode. If you use this feature, the \*(L"traditional\*(R" way of setting the error run mode (calling \*(C`$self-&gt;error_mode(&apos;name&apos;)\*(C') is disabled and can no longer be used in this application (including subclasses and instance scripts). This feature requires CGI::App of at least version 3.30.</p><p>Note that this \*(L"error run mode\*(R" is not a run mode that is directly accessible using its name as a query parameter. It will only be dispatched to internally if the original run mode produced an error. This is exactly how plain CGI:App \*(C`error_mode\*(C' behaves as well (you could still declare the method to also be a \*(C`:Runmode\*(C' ).</p>
<h3>A word on security</h3>
<p>The whole idea of this module (to reduce code complexity by automatically mapping a \s-1URL\s0 to a subroutine that gets executed) is a potential security hazard and great care has to be taken so that a remote user cannot run code that you did not intend them to.</p><p>In order to prevent a carefully crafted \s-1URL\s0 to access code in other packages, this module disallows non-word characters (such as : )  in run mode names.</p><p>Also, you have to make sure that when using a delegate object, that it (and its superclasses) only contain run modes (and no other subroutines).</p><p>The following run mode names are disallowed by this module:</p><p>        can isa VERSION AUTOLOAD new DESTROY</p>
<h3>Effect on the run_modes map</h3>
<p>This module only inserts the current run mode into the run_mode map (unless it is already in there). It does not place any other :Runmodes there. As a result of this behaviour, users of AutoRunmode will most likely find the run mode map almost completely empty. This can lead to strange results if you expect a more complete list of possible run modes there. At this time, there is no workaround for this. Feel free to complain to the author if you have a requirement here.</p><p>It is possible, however, to query the AutoRunmode plugin if an AutoRunmode exists for a given name.</p><p>  my $check = CGI::Application::Plugin::AutoRunmode::is_auto_runmode($self, $name)</p><p>This function returns a code ref if such an AutoRunmode exists.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO CGI::Application::Plugin::AutoRunmode&hellip;</h2>
        <div class="sectioncontent">
<ul>
<li><p>CGI::Application::Plugin::AutoRunmode::FileDelegate</p></li><li><p>CGI::Application</p></li><li><p>The CGI::App wiki at http://www.cgi-app.org/ &lt;http://www.cgi-app.org/&gt;.</p></li><li><p>CGI::Application::Plugin::ActionDispatch provides an alternative set of attributes that dispatch according to \s-1PATH_INFO\s0. It is very similar to the mechanism used in the Catalyst framework.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Thilo Planz, &lt;thilo@cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORT</h2>
        <div class="sectioncontent">
<p>Please use the request tracker at \s-1CPAN\s0 to report bugs or feature requests: https://rt.cpan.org/Public/Dist/Display.html?Name=CGI-Application-Plugin-AutoRunmode &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=CGI-Application-Plugin-AutoRunmode&gt;</p><p>If you want to support the development of this module with money, you can donate using Flattr: &lt;https://flattr.com/thing/132835&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2004-2011 by Thilo Planz</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="CGI::Application::Plugin::Authorization::Driver::SimpleGroup.3pm.html"><span aria-hidden="true">&larr;</span> CGI::Application::Plugin::Authorization::Driver::SimpleGroup.3pm: Simple group based authorization driver</a></li>
   <li class="next"><a href="CGI::Application::Plugin::AutoRunmode::FileDelegate.3pm.html">CGI::Application::Plugin::AutoRunmode::FileDelegate.3pm: Delegate cgi::app run modes to a directory of files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
