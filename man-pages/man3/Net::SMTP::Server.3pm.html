<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Net::SMTP::Server: A native perl smtp server implementation for perl.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A native perl smtp server implementation for perl.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Net::SMTP::Server (3pm) manual">
  <meta name="twitter:description" content="A native perl smtp server implementation for perl.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libnet-smtp-server-perl-Net::SMTP::Server-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Net::SMTP::Server.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Net::SMTP::Server (3pm) manual" />
  <meta property="og:description" content="A native perl smtp server implementation for perl." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libnet-smtp-server-perl-Net::SMTP::Server-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Net::SMTP::Server<small> (3pm)</small></h1>
        <p class="lead">A native perl smtp server implementation for perl.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::SMTP::Server.3pm.html">
      <span itemprop="name">Net::SMTP::Server: A native perl smtp server implementation for perl.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libnet-smtp-server-perl/">
      <span itemprop="name">libnet-smtp-server-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::SMTP::Server.3pm.html">
      <span itemprop="name">Net::SMTP::Server: A native perl smtp server implementation for perl.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Carp;
  use Net::SMTP::Server;
  use Net::SMTP::Server::Client;
  use Net::SMTP::Server::Relay;

  $server = new Net::SMTP::Server(&apos;localhost&apos;, 25) ||
    croak("Unable to handle client connection: $!&#92;n");

  while($conn = $server-&gt;accept()) {
    # We can perform all sorts of checks here for spammers, ACLs,
    # and other useful stuff to check on a connection.

    # Handle the client&apos;s connection and spawn off a new parser.
    # This can/should be a fork() or a new thread,
    # but for simplicity...
    my $client = new Net::SMTP::Server::Client($conn) ||
        croak("Unable to handle client connection: $!&#92;n");

    # Process the client.  This command will block until
    # the connecting client completes the SMTP transaction.
    $client-&gt;process || next;

    # In this simple server, we&apos;re just relaying everything
    # to a server.  If a real server were implemented, you
    # could save email to a file, or perform various other
    # actions on it here.
    my $relay = new Net::SMTP::Server::Relay($client-&gt;{FROM},
                                             $client-&gt;{TO},
                                             $client-&gt;{MSG});
  }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Net::SMTP::Server module implements an \s-1RFC\s0 821 compliant \s-1SMTP\s0 server, completely in Perl.  It's extremely extensible, so adding in things like spam filtering, or more advanced routing and handling features can be easily handled.  An additional module, Net::SMTP::Server::Relay has also been implemented as an example of just one application of this extensibility.  See the pod for more details on that module.  This extension has been tested on both Unix and Win32 platforms.</p><p>Creating a new server is as trivial as:</p><p>  $server = new Net::SMTP::Server($host, $port);</p><p>This creates a new SMTP::Server.  Both $host and $port are optional, and default to the current hostname and the standard \s-1SMTP\s0 port (25). However, if you run on a multi-homed machine, you may want to explicitly specify which interface to bind to.</p><p>The server loop should look something like this:</p><p>  while($conn = $server-&gt;accept()) {     my $client = new Net::SMTP::Server::Client($conn) ||         croak("Unable to handle client connection: $!&#92;n");</p><p>    $client-&gt;process;   }</p><p>The server will continue to accept connections forever.  Once we have a connection, we create a new Net::SMTP::Server::Client.  This is a new client connection that will now be handled.  The reason why processing doesn't begin here is to allow for any extensibility or hooks a user may want to add in after we've accepted the client connection, but before we give the initial welcome message to the client.  Once we're ready to process an \s-1SMTP\s0 session, we call $client-&gt;process.  This may \s-1HANG\s0 while the \s-1SMTP\s0 transaction takes place, as the client and server are communicating back and forth (and if there's a lot of data to transmit, well...).</p><p>Once $client-&gt;process returns, various fields have been filled in. Those are:</p><p>  $client-&gt;{TO}    -- This is an array containing the intended                       recipients for this message.  There may be                       multiple recipients for any given message.</p><p>  $client-&gt;{FROM}  -- This is the sender of the given message.   $client-&gt;{MSG}   -- The actual message data. :)</p><p>The SMTP::Server module performs no other processing for the user. It's meant to give you the building blocks of an extensible \s-1SMTP\s0 server implementation.  For example, using the \s-1MIME\s0 modules, you can easily process $client-&gt;{\s-1MSG\s0} to handle \s-1MIME\s0 attachments, etc.  Or you could implement ACLs to control who can connect to the server, or what actions are taken.  Finally, a suggested use that the author himself uses, is as an \s-1SMTP\s0 relay.  There are lots of times I need access to an \s-1SMTP\s0 server just to send a message, but don't have access to one for whatever reason (firewalls, permissions, etc).  You can run your own \s-1SMTP\s0 server whether under Unix or Win32 environments, and simply point your favorite mail client to it when sending messages.  See the Net::SMTP::Server::Relay modules for details on that use.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR AND COPYRIGHT Net::SMTP::Server / SMTP::Server is Copyright(C) 1999, MacGyver (aka Habeeb J. Dihu) &lt;macgyver@tos.net&gt;.  ALL RIGHTS RESERVED.</h2>
        <div class="sectioncontent">
<p>You may distribute this package under the terms of either the \s-1GNU\s0 General Public License or the Artistic License, as specified in the Perl \s-1README\s0 file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Net::SMTP::Server&hellip;</h2>
        <div class="sectioncontent">
<p>Net::SMTP::Server::Client, Net::SMTP::Server::Relay</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Net::SMTP::SSL.3pm.html"><span aria-hidden="true">&larr;</span> Net::SMTP::SSL.3pm: Ssl support for net::smtp</a></li>
   <li class="next"><a href="Net::SMTP::Server::Client.3pm.html">Net::SMTP::Server::Client.3pm: Client session handling for net::smtp::server. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
