<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Log::Agent::Driver::File: File logging driver for log::agent</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="File logging driver for log::agent">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Log::Agent::Driver::File (3pm) manual">
  <meta name="twitter:description" content="File logging driver for log::agent">
  <meta name="twitter:image" content="https://www.carta.tech/images/liblog-agent-perl-Log::Agent::Driver::File-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Log::Agent::Driver::File.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Log::Agent::Driver::File (3pm) manual" />
  <meta property="og:description" content="File logging driver for log::agent" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liblog-agent-perl-Log::Agent::Driver::File-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Log::Agent::Driver::File<small> (3pm)</small></h1>
        <p class="lead">File logging driver for log::agent</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Agent::Driver::File.3pm.html">
      <span itemprop="name">Log::Agent::Driver::File: File logging driver for log::agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liblog-agent-perl/">
      <span itemprop="name">liblog-agent-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Agent::Driver::File.3pm.html">
      <span itemprop="name">Log::Agent::Driver::File: File logging driver for log::agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use Log::Agent;
 require Log::Agent::Driver::File;

 my $driver = Log::Agent::Driver::File-&gt;make(
     -prefix     =&gt; "prefix",
     -duperr     =&gt; 1,
     -stampfmt   =&gt; "own",
     -showpid    =&gt; 1,
     -magic_open =&gt; 0,
     -channels   =&gt; {
        error   =&gt; &apos;/tmp/output.err&apos;,
        output  =&gt; &apos;log.out&apos;,
        debug   =&gt; &apos;../appli.debug&apos;,
     },
     -chanperm   =&gt; {
        error   =&gt; 0777,
        output  =&gt; 0666,
        debug   =&gt; 0644
     }
 );
 logconfig(-driver =&gt; $driver);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The file logging driver redirects <em>logxxx()</em> operations to specified files, one per channel usually (but channels may go to the same file).</p><p>The creation routine <em>make()</em> takes the following arguments: Specifies where channels go. The supplied hash maps channel names (\*(C`error\*(C', \*(C`output\*(C' and \*(C`debug\*(C') to filenames. When \*(C`-magic_open\*(C' is set to true, filenames are allowed magic processing via perl's <em>open()</em>, so this allows things like:     -channels =&gt; {         &apos;error&apos;   =&gt; &apos;&gt;&FILE&apos;,         &apos;output&apos;  =&gt; &apos;&gt;newlog&apos;,   # recreate each time, don&apos;t append         &apos;debug&apos;  =&gt; &apos;|mailx -s whatever user&apos;,     } If a channel (e.g. 'output') is not specified, it will go to the 'error' channel, and if that one is not specified either, it will go to \s-1STDERR\s0 instead. If you have installed the additional \*(C`Log::Agent::Rotate\*(C' module, it is also possible to override any default rotating policy setup via the \*(C`-rotate\*(C' argument: instead of supplying the channel as a single string, use an array reference where the first item is the channel file, and the second one is the \*(C`Log::Agent::Rotate\*(C' configuration:     my $rotate = Log::Agent::Rotate-&gt;make(         -backlog     =&gt; 7,         -unzipped    =&gt; 2,         -max_write   =&gt; 100_000,         -is_alone    =&gt; 1,     );</p><p>    my $driver = Log::Agent::Driver::File-&gt;make(         ...         -channels =&gt; {             &apos;error&apos;  =&gt; [&apos;errors&apos;, $rotate],             &apos;output&apos; =&gt; [&apos;output, $rotate],             &apos;debug&apos;  =&gt; [&apos;&gt;&FILE, $rotate],    # WRONG         },         -magic_open =&gt; 1,         ...     ); In the above example, the rotation policy for the \*(C`debug\*(C' channel will not be activated, since the channel is opened via a <em>magic</em> method. See Log::Agent::Rotate for more details. Specifies the file permissions for the channels specified by \*(C`-channels\*(C'. The arguemtn is a hash ref, indexed by channel name, with numeric values. This option is only necessary to override the default permissions used by Log::Agent::Channel::File.  It is generally better to leave these permissive and rely on the user's umask. See \*(L"umask\*(R" in <em>perlfunc</em>\|(3) for more details.. When true, all messages normally sent to the \*(C`error\*(C' channel are also copied to the \*(C`output\*(C' channel with a prefixing made to clearly mark them as such: \*(L"\s-1FATAL:\s0 \*(R" for <em>logdie()</em>, <em>logcroak()</em> and <em>logconfess()</em>, \*(L"\s-1ERROR:\s0 \*(R" for <em>logerr()</em> and \*(L"\s-1WARNING:\s0 \*(R" for <em>logwarn()</em>. Note that the \*(L"duplicate\*(R" is the original error string for <em>logconfess()</em> and <em>logcroak()</em>, and is not strictly identical to the message that will be logged to the \*(C`error\*(C' channel.  This is a an accidental feature. Default is false. This switch supersedes both \*(C`-duperr\*(C' and \*(C`-channels\*(C' by defining a single file for all the channels. This switch supersedes \*(C`-chanperm\*(C' by defining consistent for all the channels. When true, channel filenames beginning with '&gt;' or '|' are opened using Perl's <em>open()</em>. Otherwise, <em>sysopen()</em> is used, in append mode. Default is false. The application prefix string to prepend to messages. This sets a default logfile rotation policy.  You need to install the additional \*(C`Log::Agent::Rotate\*(C' module to use this switch. <em>object</em> is the \*(C`Log::Agent::Rotate\*(C' instance describing the default policy for all the channels.  Only files which are not opened via a so-called <em>magic open</em> can be rotated. If set to true, the \s-1PID\s0 of the process will be appended within square brackets after the prefix, to all messages. Default is false. Specifies the time stamp format to use. By default, my \*(L"own\*(R" format is used. The following formats are available:     date      "[Fri Oct 22 16:23:10 1999]"     none     own       "99/10/22 16:23:10"     syslog    "Oct 22 16:23:10". You may also specify a \s-1CODE\s0 ref: that routine will be called every time we need to compute a time stamp. It should not expect any parameter, and should return a string.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHANNELS</h2>
        <div class="sectioncontent">
<p>All the channels go to the specified files. If a channel is not configured, it is redirected to 'error', or \s-1STDERR\s0 if no 'error' channel was configured either.</p><p>Two channels not opened via a <em>magic</em> open and whose logfile name is the same are effectively <em>shared</em>, i.e. the same file descriptor is used for both of them. If you supply distinct rotation policies (e.g. by having a default policy, and supplying another policy to one of the channel only), then the final rotation policy will depend on which one was opened first. So don't do that.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEAT</h2>
        <div class="sectioncontent">
<p>Beware of <em>chdir()</em>.  If your program uses <em>chdir()</em>, you should always specify logfiles by using absolute paths, otherwise you run the risk of having your relative paths become invalid: there is no anchoring done at the time you specify them.  This is especially true when configured for rotation, since the logfiles are recreated as needed and you might end up with many logfiles scattered throughout all the directories you <em>chdir()</em>ed to.</p><p>Logging channels with the same pathname are shared, i.e. they are only opened once by \*(C`Log::Agent::Driver::File\*(C'.  Therefore, if you specify different rotation policy to such channels, the channel opening order will determine which of the policies will be used for all such shared channels. Such errors are flagged at runtime with the following message:</p><p> Rotation for &apos;logfile&apos; may be wrong (shared with distinct policies)</p><p>emitted in the logs upon subsequent sharing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Originally written by Raphael Manfredi &lt;Raphael_Manfredi@pobox.com&gt;, currently maintained by Mark Rogaski &lt;mrogaski@cpan.org&gt;.</p><p>Thanks to Joseph Pepin for suggesting the file permissions arguments to <em>make()</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 1999 Raphael Manfredi. Copyright (C) 2002 Mark Rogaski; all rights reserved.</p><p>See <em>Log::Agent</em>\|(3) or the \s-1README\s0 file included with the distribution for license information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Log::Agent::Driver::File&hellip;</h2>
        <div class="sectioncontent">
<p><em>Log::Agent::Driver</em>\|(3), <em>Log::Agent</em>\|(3), <em>Log::Agent::Rotate</em>\|(3).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Log::Agent::Driver::Default.3pm.html"><span aria-hidden="true">&larr;</span> Log::Agent::Driver::Default.3pm: Default logging driver for log::agent</a></li>
   <li class="next"><a href="Log::Agent::Driver::Fork.3pm.html">Log::Agent::Driver::Fork.3pm: Dummy driver for forking output to multiple drivers <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
