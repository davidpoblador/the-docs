<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GnuPG: Perl module interface to the gnu privacy guard (v1.x.x series)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Perl module interface to the gnu privacy guard (v1.x.x series)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="GnuPG (3pm) manual">
  <meta name="twitter:description" content="Perl module interface to the gnu privacy guard (v1.x.x series)">
  <meta name="twitter:image" content="https://www.carta.tech/images/libgnupg-perl-GnuPG-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/GnuPG.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="GnuPG (3pm) manual" />
  <meta property="og:description" content="Perl module interface to the gnu privacy guard (v1.x.x series)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libgnupg-perl-GnuPG-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">GnuPG<small> (3pm)</small></h1>
        <p class="lead">Perl module interface to the gnu privacy guard (v1.x.x series)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/GnuPG.3pm.html">
      <span itemprop="name">GnuPG: Perl module interface to the gnu privacy guard (v1.x.x series)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libgnupg-perl/">
      <span itemprop="name">libgnupg-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/GnuPG.3pm.html">
      <span itemprop="name">GnuPG: Perl module interface to the gnu privacy guard (v1.x.x series)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use GnuPG qw( :algo );

    my $gpg = new GnuPG();

    $gpg-&gt;encrypt(  plaintext    =&gt; "file.txt",    output        =&gt; "file.gpg",
            armor    =&gt; 1,         sign    =&gt; 1,
            passphrase  =&gt; $secret );

    $gpg-&gt;decrypt( ciphertext    =&gt; "file.gpg",    output        =&gt; "file.txt" );

    $gpg-&gt;clearsign( plaintext =&gt; "file.txt", output =&gt; "file.txt.asc",
             passphrase =&gt; $secret,   armor =&gt; 1,
            );

    $gpg-&gt;verify( signature =&gt; "file.txt.asc", file =&gt; "file.txt" );

    $gpg-&gt;gen_key( name =&gt; "Joe Blow",        comment =&gt; "My GnuPG key",
           passphrase =&gt; $secret,
            );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>GnuPG is a perl interface to the \s-1GNU\s0 Privacy Guard. It uses the shared memory coprocess interface that gpg provides for its wrappers. It tries its best to map the interactive interface of the gpg to a more programmatic model.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">API OVERVIEW</h2>
        <div class="sectioncontent">
<p>The \s-1API\s0 is accessed through methods on a GnuPG object which is a wrapper around the <strong>gpg</strong> program.  All methods takes their argument using named parameters, and errors are returned by throwing an exception (using croak).  If you wan't to catch errors you will have to use eval.</p><p>When handed in a file handle for input or output parameters on many of the functions, the \s-1API\s0 attempts to tie that handle to \s-1STDIN\s0 and \s-1STDOUT\s0. In certain persistent environments (particularly a web environment), this will not work. This problem can be avoided by passing in file names to all relevant parameters rather than a Perl file handle.</p><p>There is also a tied file handle interface which you may find more convenient for encryption and decryption. See <em>GnuPG::Tie</em>\|(3) for details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">
<h3>new ( [params] )</h3>
<p>You create a new GnuPG wrapper object by invoking its new method. (How original !).  The module will try to finds the <strong>gpg</strong> program in your path and will croak if it can't find it. Here are the parameters that it accepts :</p>
<dl class='dl-vertical'>
  <dt>
    gnupg_path
  </dt>
  <dd>
    <p>Path to the <strong>gpg</strong> program.</p>
  </dd>
  <dt>
    options
  </dt>
  <dd>
    <p>Path to the options file for <strong>gpg</strong>. If not specified, it will use the default one (usually <em>~/.gnupg/options</em>).</p>
  </dd>
  <dt>
    homedir
  </dt>
  <dd>
    <p>Path to the <strong>gpg</strong> home directory. This is the directory that contains the default <em>options</em> file, the public and private key rings as well as the trust database.</p>
  </dd>
  <dt>
    trace
  </dt>
  <dd>
    <p>If this variable is set to true, <strong>gpg</strong> debugging output will be sent to stderr.</p>
  </dd>

</dl>
<p>    Example: my $gpg = new GnuPG();</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<h3>gen_key( [params] )</h3>
<p>This methods is used to create a new gpg key pair. The methods croaks if there is an error. It is a good idea to press random keys on the keyboard while running this methods because it consumes a lot of entropy from the computer. Here are the parameters it accepts :</p>
<dl class='dl-vertical'>
  <dt>
    algo
  </dt>
  <dd>
    <p>This is the algorithm use to create the key. Can be <em>\s-1DSA_ELGAMAL\s0</em>, <em>\s-1DSA\s0</em>, <em>\s-1RSA_RSA\s0</em> or <em>\s-1RSA\s0</em>. It defaults to <em>\s-1DSA_ELGAMAL\s0</em>. To import those constant in your name space, use the <em>:algo</em> tag.</p>
  </dd>
  <dt>
    size
  </dt>
  <dd>
    <p>The size of the public key. Defaults to 1024. Cannot be less than 768 bits, and keys longer than 2048 are also discouraged. (You *DO* know that your monitor may be leaking sensitive information ;-).</p>
  </dd>
  <dt>
    valid
  </dt>
  <dd>
    <p>How long the key is valid. Defaults to 0 or never expire.</p>
  </dd>
  <dt>
    name
  </dt>
  <dd>
    <p>This is the only mandatory argument. This is the name that will used to construct the user id.</p>
  </dd>
  <dt>
    email
  </dt>
  <dd>
    <p>Optional email portion of the user id.</p>
  </dd>
  <dt>
    comment
  </dt>
  <dd>
    <p>Optional comment portion of the user id.</p>
  </dd>
  <dt>
    passphrase
  </dt>
  <dd>
    <p>The passphrase that will be used to encrypt the private key. Optional but strongly recommended.</p>
  </dd>

</dl>
<p>    Example: $gpg-&gt;gen_key( algo =&gt; DSA_ELGAMAL, size =&gt; 1024,                 name =&gt; "My name" );</p>
<h3>import_keys( [params] )</h3>
<p>Import keys into the GnuPG private or public keyring. The method croaks if it encounters an error. It returns the number of keys imported. Parameters :</p>
<dl class='dl-vertical'>
  <dt>
    keys
  </dt>
  <dd>
    <p>Only parameter and mandatory. It can either be a filename or a reference to an array containing a list of files that will be imported.</p>
  </dd>

</dl>
<p>    Example: $gpg-&gt;import_keys( keys =&gt; [ qw( key.pub key.sec ) ] );</p>
<h3>export_keys( [params] )</h3>
<p>Exports keys from the GnuPG keyrings. The method croaks if it encounters an error. Parameters :</p>
<dl class='dl-vertical'>
  <dt>
    keys
  </dt>
  <dd>
    <p>Optional argument that restricts the keys that will be exported. Can either be a user id or a reference to an array of userid that specifies the keys to be exported. If left unspecified, all keys will be exported.</p>
  </dd>
  <dt>
    secret
  </dt>
  <dd>
    <p>If this argument is to true, the secret keys rather than the public ones will be exported.</p>
  </dd>
  <dt>
    all
  </dt>
  <dd>
    <p>If this argument is set to true, all keys (even those that aren't OpenPGP compliant) will be exported.</p>
  </dd>
  <dt>
    output
  </dt>
  <dd>
    <p>This argument specifies where the keys will be exported. Can be either a file name or a reference to a file handle. If not specified, the keys will be exported to stdout.</p>
  </dd>
  <dt>
    armor
  </dt>
  <dd>
    <p>Set this parameter to true, if you want the exported keys to be \s-1ASCII\s0 armored.</p>
  </dd>

</dl>
<p>    Example: $gpg-&gt;export_keys( armor =&gt; 1, output =&gt; "keyring.pub" );</p>
<h3>encrypt( [params] )</h3>
<p>This method is used to encrypt a message, either using assymetric or symmetric cryptography. The methods croaks if an error is encountered. Parameters:</p>
<dl class='dl-vertical'>
  <dt>
    plaintext
  </dt>
  <dd>
    <p>This argument specifies what to encrypt. It can be either a filename or a reference to a file handle. If left unspecified, \s-1STDIN\s0 will be encrypted.</p>
  </dd>
  <dt>
    output
  </dt>
  <dd>
    <p>This optional argument specifies where the ciphertext will be output. It can be either a file name or a reference to a file handle. If left unspecified, the ciphertext will be sent to \s-1STDOUT\s0.</p>
  </dd>
  <dt>
    armor
  </dt>
  <dd>
    <p>If this parameter is set to true, the ciphertext will be \s-1ASCII\s0 armored.</p>
  </dd>
  <dt>
    symmetric
  </dt>
  <dd>
    <p>If this parameter is set to true, symmetric cryptography will be used to encrypt the message. You will need to provide a <em>passphrase</em> parameter.</p>
  </dd>
  <dt>
    recipient
  </dt>
  <dd>
    <p>If not using symmetric cryptography, you will have to provide this parameter. It should contains the userid of the intended recipient of the message. It will be used to look up the key to use to encrypt the message. The parameter can also take an array ref, if you want to encrypt the message for a group of recipients.</p>
  </dd>
  <dt>
    sign
  </dt>
  <dd>
    <p>If this parameter is set to true, the message will also be signed. You will probably have to use the <em>passphrase</em> parameter to unlock the private key used to sign message. This option is incompatible with the <em>symmetric</em> one.</p>
  </dd>
  <dt>
    local-user
  </dt>
  <dd>
    <p>This parameter is used to specified the private key that will be used to sign the message. If left unspecified, the default user will be used. This option only makes sense when using the <em>sign</em> option.</p>
  </dd>
  <dt>
    passphrase
  </dt>
  <dd>
    <p>This parameter contains either the secret passphrase for the symmetric algorithm or the passphrase that should be used to decrypt the private key.</p>
  </dd>

</dl>
<p>    Example: $gpg-&gt;encrypt( plaintext =&gt; file.txt, output =&gt; "file.gpg",                 sign =&gt; 1, passphrase =&gt; $secret                 );</p>
<h3>sign( [params] )</h3>
<p>This method is used create a signature for a file or stream of data. This method croaks on errors. Parameters :</p>
<dl class='dl-vertical'>
  <dt>
    plaintext
  </dt>
  <dd>
    <p>This argument specifies what  to sign. It can be either a filename or a reference to a file handle. If left unspecified, the data read on \s-1STDIN\s0 will be signed.</p>
  </dd>
  <dt>
    output
  </dt>
  <dd>
    <p>This optional argument specifies where the signature will be output. It can be either a file name or a reference to a file handle. If left unspecified, the signature will be sent to \s-1STDOUT\s0.</p>
  </dd>
  <dt>
    armor
  </dt>
  <dd>
    <p>If this parameter is set to true, the signature will be \s-1ASCII\s0 armored.</p>
  </dd>
  <dt>
    passphrase
  </dt>
  <dd>
    <p>This parameter contains the secret that should be used to decrypt the private key.</p>
  </dd>
  <dt>
    local-user
  </dt>
  <dd>
    <p>This parameter is used to specified the private key that will be used to make the signature . If left unspecified, the default user will be used.</p>
  </dd>
  <dt>
    detach-sign
  </dt>
  <dd>
    <p>If set to true, a digest of the data will be signed rather than the whole file.</p>
  </dd>

</dl>
<p>    Example: $gpg-&gt;sign( plaintext =&gt; "file.txt", output =&gt; "file.txt.asc",              armor =&gt; 1,              );</p>
<h3>clearsign( [params] )</h3>
<p>This methods clearsign a message. The output will contains the original message with a signature appended. It takes the same parameters as the <strong>sign</strong> method.</p>
<h3>verify( [params] )</h3>
<p>This method verifies a signature against the signed message. The methods croaks if the signature is invalid or an error is encountered. If the signature is valid, it returns an hash with the signature parameters. Here are the method's parameters :</p>
<dl class='dl-vertical'>
  <dt>
    signature
  </dt>
  <dd>
    <p>If the message and the signature are in the same file (i.e. a clearsigned message), this parameter can be either a file name or a reference to a file handle. If the signature doesn't follows the message, than it must be the name of the file that contains the signature.</p>
  </dd>
  <dt>
    file
  </dt>
  <dd>
    <p>This is a file name or a reference to an array of file names that contains the signed data.</p>
  </dd>

</dl>
<p>When the signature is valid, here are the elements of the hash that is returned by the method :</p>
<dl class='dl-vertical'>
  <dt>
    sigid
  </dt>
  <dd>
    <p>The signature id. This can be used to protect against replay attack.</p>
  </dd>
  <dt>
    date
  </dt>
  <dd>
    <p>The data at which the signature has been made.</p>
  </dd>
  <dt>
    timestamp
  </dt>
  <dd>
    <p>The epoch timestamp of the signature.</p>
  </dd>
  <dt>
    keyid
  </dt>
  <dd>
    <p>The key id used to make the signature.</p>
  </dd>
  <dt>
    user
  </dt>
  <dd>
    <p>The userid of the signer.</p>
  </dd>
  <dt>
    fingerprint
  </dt>
  <dd>
    <p>The fingerprint of the signature.</p>
  </dd>
  <dt>
    trust
  </dt>
  <dd>
    <p>The trust value of the public key of the signer. Those are values that can be imported in your namespace with the :trust tag. They are (\s-1TRUST_UNDEFINED\s0, \s-1TRUST_NEVER\s0, \s-1TRUST_MARGINAL\s0, \s-1TRUST_FULLY\s0, \s-1TRUST_ULTIMATE\s0).</p>
  </dd>

</dl>
<p>    Example : my $sig = $gpg-&gt;verify( signature =&gt; "file.txt.asc",                       file =&gt; "file.txt" );</p>
<h3>decrypt( [params] )</h3>
<p>This method decrypts an encrypted message. It croaks, if there is an error while decrypting the message. If the message was signed, this method also verifies the signature. If decryption is sucessful, the method either returns the valid signature parameters if present, or true. Method parameters :</p>
<dl class='dl-vertical'>
  <dt>
    ciphertext
  </dt>
  <dd>
    <p>This optional parameter contains either the name of the file containing the ciphertext or a reference to a file handle containing the ciphertext. If not present, \s-1STDIN\s0 will be decrypted.</p>
  </dd>
  <dt>
    output
  </dt>
  <dd>
    <p>This optional parameter determines where the plaintext will be stored. It can be either a file name or a reference to a file handle.  If left unspecified, the plaintext will be sent to \s-1STDOUT\s0.</p>
  </dd>
  <dt>
    symmetric
  </dt>
  <dd>
    <p>This should be set to true, if the message is encrypted using symmetric cryptography.</p>
  </dd>
  <dt>
    passphrase
  </dt>
  <dd>
    <p>The passphrase that should be used to decrypt the message (in the case of a message encrypted using a symmetric cipher) or the secret that will unlock the private key that should be used to decrypt the message.</p>
  </dd>

</dl>
<p>    Example: $gpg-&gt;decrypt( ciphertext =&gt; "file.gpg", output =&gt; "file.txt"                 passphrase =&gt; $secret );</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS AND LIMITATIONS</h2>
        <div class="sectioncontent">
<p>This module doesn't work (yet) with the v2 branch of GnuPG.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Francis J. Lacoste &lt;francis.lacoste@Contre.COM&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 1999,2000 iNsu Innovations. Inc. Copyright (c) 2001 Francis J. Lacoste</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the \s-1GNU\s0 General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO GnuPG&hellip;</h2>
        <div class="sectioncontent">
<p>GnuPG::Tie</p><p>Alternative module: GnuPG::Interface</p><p><em>gpg</em>\|(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Getopt::Usaginator.3pm.html"><span aria-hidden="true">&larr;</span> Getopt::Usaginator.3pm: Conjure up a usage function for your applications</a></li>
   <li class="next"><a href="GnuPG::Tie.3pm.html">GnuPG::Tie.3pm: Tied filehandle interface to encryption with the gnu privacy guard.  gnupg::tie::decrypt - tied filehandle interface to decryption with the gnu privacy guard. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
