<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>odbx_escape: Prepare strings for inclusion in statements</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Prepare strings for inclusion in statements">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="odbx_escape (3) manual">
  <meta name="twitter:description" content="Prepare strings for inclusion in statements">
  <meta name="twitter:image" content="https://www.carta.tech/images/libopendbx1-dev-odbx_escape-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/odbx_escape.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="odbx_escape (3) manual" />
  <meta property="og:description" content="Prepare strings for inclusion in statements" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libopendbx1-dev-odbx_escape-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">odbx_escape<small> (3)</small></h1>
        <p class="lead">Prepare strings for inclusion in statements</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/odbx_escape.3.html">
      <span itemprop="name">odbx_escape: Prepare strings for inclusion in statements</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libopendbx1-dev/">
      <span itemprop="name">libopendbx1-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/odbx_escape.3.html">
      <span itemprop="name">odbx_escape: Prepare strings for inclusion in statements</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
\*(T&lt;#include &lt;opendbx/api.h&gt;\*(T&gt;
</pre>
<p>\*(T&lt;int <strong>odbx_escape</strong>\*(T&gt; \kx \*(T&lt;(odbx_t* <em>handle</em>, const char* <em>from</em>, unsigned long <em>fromlen</em>, char* <em>to</em>, unsigned long* <em>tolen</em>);\*(T&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>\*(T&lt;<strong>odbx_escape</strong>\*(T&gt;() neutralizes potentially dangerous characters of the string so it can be used as part of a statement. For security reasons every user input has to be passed to \*(T&lt;<strong>odbx_escape</strong>\*(T&gt;() to avoid SQL injection attacks which can have fatal consequences! It's also a good idea to escape strings returned from database fields again if you want to use them in a query because they don't stay escaped once they are returned as part of a record.</p><p>Most backends require the buffer to be more than twice as long as the input string. To be precise, the output buffer must be 2 * size of input + 1 bytes long. After successfully escaping the characters in \*(T&lt;from\*(T&gt;, they are written into the memory provided via \*(T&lt;to\*(T&gt; and the value/result parameter \*(T&lt;tolen\*(T&gt; is updated to the new length of \*(T&lt;to\*(T&gt; in the end.</p><p>The first parameter \*(T&lt;handle\*(T&gt; is the connection object created and returned by \*(T&lt;<strong>odbx_init</strong>\*(T&gt;() which becomes invalid as soon as it was supplied to \*(T&lt;<strong>odbx_finish</strong>\*(T&gt;().</p><p>\*(T&lt;from\*(T&gt; has to point to a character string containing the string which should be used as part of a statement. It doesn't have to be zero-terminated because the length of it is also given via \*(T&lt;fromlen\*(T&gt;. The backends may support variable width character sets like UTF-8 but this function doesn't support the wide char type (wchar_t) where each character has a fixed size of two or four bytes.</p><p>The value of the parameter \*(T&lt;fromlen\*(T&gt; must be the length in bytes of the string which \*(T&lt;from\*(T&gt; is pointing to. This is also true for variable width character sets like UTF-8 but the wide char type (wchar_t) is not supported. The terminating &#92;0 character shouldn't be part of \*(T&lt;fromlen\*(T&gt;.</p><p>The calling function provides a buffer for storing the escaped string via \*(T&lt;to\*(T&gt;. In general, the length of the buffer should be more than twice as long as the string passed via \*(T&lt;from\*(T&gt; to be able to store the escaped string even if every character has to be escaped.</p><p>\*(T&lt;tolen\*(T&gt; is a value-result parameter which points to an integer variable in the calling function. It must contain the original length of the buffer given via \*(T&lt;to\*(T&gt; and if escaping the string in \*(T&lt;from\*(T&gt; suceeded, \*(T&lt;<strong>odbx_escape</strong>\*(T&gt;() will store the new length of the escaped string in this variable.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>\*(T&lt;<strong>odbx_escape</strong>\*(T&gt;() returns \*(T&lt;ODBX_ERR_SUCCESS\*(T&gt;, or an error code whose value is less than zero if one of the operations couldn't be completed successfully. Possible error codes are listed in the error section and they can be feed to \*(T&lt;<strong>odbx_error</strong>\*(T&gt;() and \*(T&lt;<strong>odbx_error_type</strong>\*(T&gt;() to get further details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>-\*(T&lt;ODBX_ERR_BACKEND\*(T&gt;</p>
  </dt>
  <dd>
    <p>The native database library returned an error because it wasn't able to escape the given string to be suitable for a statement</p>
  </dd>
  <dt>
    <p>-\*(T&lt;ODBX_ERR_PARAM\*(T&gt;</p>
  </dt>
  <dd>
    <p>One of the supplied parameters is invalid or is NULL and this isn't allowed in the used backend module or in the native database client library</p>
  </dd>
  <dt>
    <p>-\*(T&lt;ODBX_ERR_SIZE\*(T&gt;</p>
  </dt>
  <dd>
    <p>The length of the escaped string exceeds or is likely to exeed the available buffer (before 1.1.4 the name of the label was \*(T&lt;ODBX_ERR_TOOLONG\*(T&gt; but the value is still the same)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO odbx_escape&hellip;</h2>
        <div class="sectioncontent">
<p>\*(T&lt;<strong>odbx_error</strong>\*(T&gt;(), \*(T&lt;<strong>odbx_error_type</strong>\*(T&gt;(), \*(T&lt;<strong>odbx_query</strong>\*(T&gt;()</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="odbx_error_type.3.html"><span aria-hidden="true">&larr;</span> odbx_error_type.3: Returns the severity of an error</a></li>
   <li class="next"><a href="odbx_field_length.3.html">odbx_field_length.3: Returns the length of a field value <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
