<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lcmaps: The local credential mapping service</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The local credential mapping service">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lcmaps (3) manual">
  <meta name="twitter:description" content="The local credential mapping service">
  <meta name="twitter:image" content="https://www.carta.tech/images/liblcmaps0-lcmaps-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/lcmaps.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lcmaps (3) manual" />
  <meta property="og:description" content="The local credential mapping service" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liblcmaps0-lcmaps-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lcmaps<small> (3)</small></h1>
        <p class="lead">The local credential mapping service</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/lcmaps.3.html">
      <span itemprop="name">lcmaps: The local credential mapping service</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liblcmaps0/">
      <span itemprop="name">liblcmaps0</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/lcmaps.3.html">
      <span itemprop="name">lcmaps: The local credential mapping service</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lcmaps</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The LCMAPS framework is designed to take various credentials as input, e.g. a certificate and/or VOMS credentials, and map them to Unix credentials as output. Unix credentials are the basic POSIX credentials, i.e. User ID, Group ID and Secondary Group IDs. LCMAPS is a framework that can load and run one or more 'credential mapping' plugins.  The framework will load and run plugins to perform the identity mapping. Site and organizations can create their own new functionality by creating new plugins. The LCMAPS framework exposes various APIs to push credentials into the framework and to get the account mapping results in return. The <strong>lcmaps.db</strong> configuration file configures the LCMAPS plugins and configures the order in which the plugins are launch. Some practical examples are shown below.</p><p>LCMAPS is used by <strong>gLExec</strong>, the <strong>lcas-lcmaps-gt</strong>(4)-interface</strong> to interface with a Globus GT4 and GT5 Gatekeeper, GridFTP daemon and GSI-OpenSSHd, in StoRM and somewhere in XRootD.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INVOCATION</h2>
        <div class="sectioncontent">
<p>When an application initializes LCMAPS the plugins will be loaded based on the <strong>lcmaps.db</strong> configuration file.  The application can use one of the APIs to provide credentials as input. The loaded plugins will be executed in the sequence described in the same <strong>lcmaps.db</strong> configuration file.</p><p>During a plugin's execution it has access to the credential data in the LCMAPS core memory. The plugin is also capable of writing credential mapping results in LCMAPS. The plugins can each resolve a part of the mapping and they can also perform actions based on these (intermediate) results, e.g. run setuid, setgid and setgroup calls or interact with an LDAP service.</p><p>The plugins are executed in a state machine. When a plugin finishes successfully it can execute a different next plugin then when it failed. This allows LCMAPS to pass different plugins to resolve a credential mapping.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>GATEKEEPER_JM_ID</strong></p>
  </dt>
  <dd>
    <p>Extra Gatekeeper log message to be able to more easily track a Job Manager ID.</p>
  </dd>
  <dt>
    <p><strong>GLOBUSID</strong></p>
  </dt>
  <dd>
    <p>See $GATEKEEPER\_JM\_ID.</p>
  </dd>
  <dt>
    <p><strong>JOB_REPOSITORY_ID</strong></p>
  </dt>
  <dd>
    <p>See $GATEKEEPER_JM_ID, but explicitly for the purpose of the LCMAPS Job Repository plugin.</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_DB_FILE</strong></p>
  </dt>
  <dd>
    <p>Override the build-in default filename for the <strong>lcmaps.db</strong> configuration file with the value of this environment variable.</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_DEBUG_LEVEL</strong></p>
  </dt>
  <dd>
    <p>Tune the logging output cut off level. The numbers resemble the numbers as used in previous released in the range [1-5]. However, since LCMAPS version 1.5.0 these numbers resemble a numerically shifted Syslog number.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>0</strong></p>
  </dt>
  <dd>
    <p>Silent logging, <strong>no messages</strong> will be written to file or Syslog.</p>
  </dd>
  <dt>
    <p><strong>1</strong></p>
  </dt>
  <dd>
    <p>All messages with a priority of <strong>LOG_ERR</strong> are written to file or Syslog. More severe error messages are squashed down to the LOG_ERR priority. This is to prevent Syslog from blocking on default configurations and to prevent Syslog from broadcasting LCMAPS related messages on the connected TTYs when old plug-ins are used.</p>
  </dd>
  <dt>
    <p><strong>2</strong></p>
  </dt>
  <dd>
    <p>All messages with a priority of <strong>LOG_WARNING</strong> or more severe, i.e. LOG_ERR, are written to file and/or Syslog.</p>
  </dd>
  <dt>
    <p><strong>3</strong></p>
  </dt>
  <dd>
    <p>All messages with a priority of <strong>LOG_NOTICE</strong> or more severe, i.e. LOG_ERR or LOG_WARNING, are written to file and/or Syslog. This is the default advertised setting for the <strong>lcas-lcmaps-gt-interface</strong> and <strong>glexec</strong>. The "FINAL CRED" messages are written on LOG_NOTICE and indicate the resulting LCMAPS mapping from an X.509 and/or VOMS credential to a Unix/POSIX credential.</p>
  </dd>
  <dt>
    <p><strong>4</strong></p>
  </dt>
  <dd>
    <p>All messages with a priority of <strong>LOG_INFO</strong> or more severe, i.e. all messages between (and including) LOG_ERR and LOG_INFO, are written to file and/or Syslog. This value is the <strong>build-in default</strong>. The success or failures of plug-ins are written on LOG_INFO. To see the flow of plug-ins this log level is the advised log level to set.</p>
  </dd>
  <dt>
    <p><strong>5</strong></p>
  </dt>
  <dd>
    <p>All messages with a priority of <strong>LOG_DEBUG</strong> or more severe, i.e. all messages between (and including) LOG_ERR and LOG_DEBUG, are written to file and/or Syslog. This is the most verbose mode and should be used carefully as the amount of information flowing from here might hinder normal operation performance if the syslogd isn't able to keep up.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>LCMAPS_DIR</strong></p>
  </dt>
  <dd>
    <p>The base directory of the $LCMAPS_DB_FILE parameter. This variable is concatenated with the $LCMAPS_DB_FILE</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_ETC_DIR</strong></p>
  </dt>
  <dd>
    <p>See $LCMAPS_DIR</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_LOG_FILE</strong></p>
  </dt>
  <dd>
    <p>Overrides the build-in default file path to log the output to. When set, the logging will not go to Syslog.</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_LOG_STRING</strong></p>
  </dt>
  <dd>
    <p>Prepend all log output messages with value of this environment variable</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_MODULES_DIR</strong></p>
  </dt>
  <dd>
    <p>Directory to search for the LCMAPS plugins (or modules). Same as the <strong>path</strong> option in the <strong>lcmaps.db</strong> file..</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_POLICY_NAME</strong></p>
  </dt>
  <dd>
    <p>A colon separated list of LCMAPS plugin execution policies. When this environment variable is present, only the listed execution policies will be executed. They will be executed in the order as written in the <strong>lcmaps.db</strong> file (from top to bottom).</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_VERIFY_TYPE</strong></p>
  </dt>
  <dd>
    <p>Deprecated</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_VOMS_EXTRACT</strong></p>
  </dt>
  <dd>
    <p>Deprecated</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_X509_CERT_DIR</strong></p>
  </dt>
  <dd>
    <p>Specific setting equal to the $X509_CERT_DIR environment variable</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_X509_VOMS_DIR</strong></p>
  </dt>
  <dd>
    <p>Specific setting equal to the $X509_VOMS_DIR environment variable</p>
  </dd>
  <dt>
    <p><strong>X509_CERT_DIR</strong></p>
  </dt>
  <dd>
    <p>The directory where all the CA files, e.g. CA certificate and CRL files, are located. The default location is: /etc/grid-security/certificates/.</p>
  </dd>
  <dt>
    <p><strong>X509_VOMS_DIR</strong></p>
  </dt>
  <dd>
    <p>This VOMS directory will hold the VOMS .lsc files and/or PEM files to authenticate the VOMS Attributes Certificates. Subdirectories are named by the VO name and scope the .lsc and PEM files in their authentication to one particular VO. The default location is: /etc/grid-security/vomsdir/.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LCMAPS_SUCCESS</strong></p>
  </dt>
  <dd>
    <p>Success.</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_FAIL</strong></p>
  </dt>
  <dd>
    <p>Failure.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>For an API specification, please use <strong>make doc</strong> to make the apidoc.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The apidoc is not complete. It has most interfaces, but needs to be checked for completeness.</p><p>Please report any errors to the Nikhef Grid Middleware Security Team &lt;grid-mw-security-support@nikhef.nl&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lcmaps&hellip;</h2>
        <div class="sectioncontent">
<p><strong>lcmaps.db</strong>(5), <a href="../man8/lcas_lcmaps_gt4_interface.8.html"><strong>lcas_lcmaps_gt4_interface</strong>(8)</a>, <a href="../man8/lcas_lcmaps_gt_interface.8.html"><strong>lcas_lcmaps_gt_interface</strong>(8)</a>, <a href="../man8/lcmaps_dummy_bad.mod.8.html"><strong>lcmaps_dummy_bad.mod</strong>(8)</a>, <a href="../man8/lcmaps_dummy_good.mod.8.html"><strong>lcmaps_dummy_good.mod</strong>(8)</a>, <a href="../man8/lcmaps_ldap_enf.mod.8.html"><strong>lcmaps_ldap_enf.mod</strong>(8)</a>, <a href="../man8/lcmaps_localaccount.mod.8.html"><strong>lcmaps_localaccount.mod</strong>(8)</a>, <strong>lcmaps-plugins-c-pep</strong>(8), <strong>lcmaps_plugins_scas_client</strong>(8), <a href="../man8/lcmaps_poolaccount.mod.8.html"><strong>lcmaps_poolaccount.mod</strong>(8)</a>, <a href="../man8/lcmaps_posix_enf.mod.8.html"><strong>lcmaps_posix_enf.mod</strong>(8)</a>, <strong>lcmaps_tracking_groupid.mod</strong>(8), <a href="../man8/lcmaps_verify_proxy.mod.8.html"><strong>lcmaps_verify_proxy.mod</strong>(8)</a>, <strong>scas</strong>(8), <strong>scas.conf</strong>(5), <strong>glexec</strong>(1), <strong>glexec.conf</strong>(5), <strong>ees</strong>(1), <strong>ees.conf</strong>(5)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>LCMAPS and the LCMAPS plug-ins were written by the Grid Middleware Security Team &lt;grid-mw-security@nikhef.nl&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lckpwdf.3.html"><span aria-hidden="true">&larr;</span> lckpwdf.3: Get shadow password file entry</a></li>
   <li class="next"><a href="lcong48.3.html">lcong48.3: Generate uniformly distributed pseudo-random numbers <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
