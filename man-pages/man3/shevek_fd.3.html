<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shevek_fd: The fd class is a generic wrapper for a file descriptor to use it in the glib event loop.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The fd class is a generic wrapper for a file descriptor to use it in the glib event loop.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shevek_fd (3) manual">
  <meta name="twitter:description" content="The fd class is a generic wrapper for a file descriptor to use it in the glib event loop.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libshevek-doc-shevek_fd-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/shevek_fd.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shevek_fd (3) manual" />
  <meta property="og:description" content="The fd class is a generic wrapper for a file descriptor to use it in the glib event loop." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libshevek-doc-shevek_fd-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shevek_fd<small> (3)</small></h1>
        <p class="lead">The fd class is a generic wrapper for a file descriptor to use it in the glib event loop.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/shevek_fd.3.html">
      <span itemprop="name">shevek_fd: The fd class is a generic wrapper for a file descriptor to use it in the glib event loop.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libshevek-doc/">
      <span itemprop="name">libshevek-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/shevek_fd.3.html">
      <span itemprop="name">shevek_fd: The fd class is a generic wrapper for a file descriptor to use it in the glib event loop.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;fd.hh&gt;</p><p>Inherits <strong>shevek::refbase</strong>.</p><p>Inherited by <strong>shevek::file</strong>, and <strong>shevek::socket</strong>.</p><h3>Public Types</h3>
<p>typedef sigc::slot0&lt; void &gt; <strong>read_custom_t</strong></p><p><em>Function pointer to call when data is read from fd. </em> typedef sigc::slot1&lt; bool,</p><p>std::string & &gt; <strong>read_t</strong>"</p><p><em>Function pointer to call when fd is ready for reading. </em> typedef sigc::slot1&lt; void,</p><p>std::string const & &gt; <strong>read_lines_t</strong>"</p><p><em>Function pointer to call when a complete line has arrived. </em> typedef sigc::slot0&lt; void &gt; <strong>error_t</strong></p><p><em>Function pointer to call when an error occurs. </em> typedef sigc::slot0&lt; void &gt; <strong>write_done_t</strong></p><p><em>Function pointer to call when data has been written. </em> typedef sigc::slot1&lt; void,</p><p>std::string & &gt; <strong>filter_t</strong>"</p><p><em>Function pointer to filter in and outgoing data. </em> typedef sigc::slot0&lt; void &gt; <strong>flush_t</strong></p><p><em>Function pointer to signal that all data is flushed after unread () </em></p>
<h3>Public Member Functions</h3>
<p>void <strong>read_custom</strong> (<strong>read_custom_t</strong> cb)</p><p><em>Poll for read with a custom callback to poll. </em> void <strong>read_priority_custom</strong> (<strong>read_custom_t</strong> cb)</p><p><em>Poll for priority read with a custom callback to poll. </em> void <strong>read</strong> (<strong>read_t</strong> cb)</p><p><em>Poll for read and set read callback (resets custom callback) </em> void <strong>read_priority</strong> (<strong>read_t</strong> cb)</p><p><em>Poll for priority read and set read callback (resets custom callback) </em> void <strong>read_lines</strong> (<strong>read_lines_t</strong> cb)</p><p><em>Poll for read and set read lines callback (resets custom and read callback). Polls for priority read as well. </em> void <strong>unread</strong> (bool flush_buffer=false, <strong>flush_t</strong> cb=<strong>flush_t</strong>())</p><p><em>Stop polling for read (including priority read). </em> void <strong>write</strong> (std::string const &data, <strong>write_done_t</strong> cb=<strong>write_done_t</strong>())</p><p><em>Write data and set a callback (defaults to none). </em> void <strong>write_raw</strong> (std::string const &data, <strong>write_done_t</strong> cb=<strong>write_done_t</strong>())</p><p><em>Write data, ignoring the filter, and set a callback (defaults to none). </em> bool <strong>write_block</strong> (<strong>relative_time</strong> timeout=<strong>relative_time</strong>(-1, 0))</p><p><em>Block until write buffer is empty. </em> std::string & <strong>read_block</strong> (<strong>relative_time</strong> timeout=<strong>relative_time</strong>(-1, 0))</p><p><em>Block until data is read, try writing if there is a write buffer. </em> std::string <strong>read_line_block</strong> (<strong>relative_time</strong> timeout=<strong>relative_time</strong>(-1, 0))</p><p><em>Call read_block until a line has been read, or the timeout expires. </em> void <strong>set_fd</strong> (int <strong>fd</strong>)</p><p><em>Change file descriptor. </em> void <strong>in_filter</strong> (<strong>filter_t</strong> cb)</p><p><em>If set, incoming data is filtered through this callback before it is put into the buffer. </em> void <strong>out_filter</strong> (<strong>filter_t</strong> cb)</p><p><em>If set, outgoing data is filtered through this callback before it is sent to the file descriptor. </em> void <strong>set_error</strong> (<strong>error_t</strong> cb)</p><p><em>Set a callback for all error types at once. </em> void <strong>set_poll_error</strong> (<strong>error_t</strong> cb)</p><p><em>Callback for errors from poll. </em> void <strong>set_read_error</strong> (<strong>error_t</strong> cb)</p><p><em>Callback for errors from read. </em> void <strong>set_write_error</strong> (<strong>error_t</strong> cb)</p><p><em>Callback for errors from write. </em> void <strong>set_eof</strong> (<strong>error_t</strong> cb)</p><p><em>Callback for end of file. </em> void <strong>read_reset</strong> ()</p><p><em>Stop reading, delete the buffer. </em> void <strong>write_reset</strong> ()</p><p><em>Stop writing, delete the buffer. </em> void <strong>reset</strong> ()</p><p><em>Stop reading and writing, delete the buffers. </em> int <strong>get_fd</strong> () const </p><p><em>Get the fd. This function should mostly be used by derived classes. </em> Glib::RefPtr&lt; Glib::MainContext &gt; <strong>get_main_context</strong> ()</p><p><em>Get the main context. Also mostly used by derived classes. </em></p>
<h3>Static Public Member Functions</h3>
<p>static Glib::RefPtr&lt; <strong>fd</strong> &gt; <strong>create</strong> (int value=-1, Glib::RefPtr&lt; Glib::MainContext &gt; main=Glib::MainContext::get_default())</p><p><em>Create a new fd. </em></p>
<h3>Protected Member Functions</h3>
<p><strong>fd</strong> (int value, Glib::RefPtr&lt; Glib::MainContext &gt; main)</p><p><em>Constructor. </em> <strong>~fd</strong> ()</p><p><em>Destructor. </em></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>The fd class is a generic wrapper for a file descriptor to use it in the Glib event loop.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Member Function Documentation</h2>
        <div class="sectioncontent">
<h3>void shevek::fd::read (\fBread_t\fPcb)</h3>
<p>Poll for read and set read callback (resets custom callback) If no callback is set for priority read, this callback is used for that as well.</p>
<h3>std::string& shevek::fd::read_block (\fBrelative_time\fPtimeout = \fC\fBrelative_time\fP(-1, 0)\fP)</h3>
<p>Block until data is read, try writing if there is a write buffer. Return read data as reference to buffer. (callback is not called) Returns immediately if buffer is not empty. Priority read buffer and normal read buffer are both checked. This will block at most until the timeout is reached, if it is positive.</p>
<h3>void shevek::fd::read_custom (\fBread_custom_t\fPcb)</h3>
<p>Poll for read with a custom callback to poll. If no callback is set for priority read, this callback is used for that as well.</p>
<h3>void shevek::fd::set_error (\fBerror_t\fPcb)</h3>
<p>Set a callback for all error types at once. This is used for any error for which no other callback is set.</p>
<h3>bool shevek::fd::write_block (\fBrelative_time\fPtimeout = \fC\fBrelative_time\fP(-1, 0)\fP)</h3>
<p>Block until write buffer is empty. This will block at most until the timeout is reached, if it is positive.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for libshevek from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="shevek_dl.3.html"><span aria-hidden="true">&larr;</span> shevek_dl.3: Load symbols from dynamic libraries.</a></li>
   <li class="next"><a href="shevek_file.3.html">shevek_file.3: Use normal files with the fd class. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
