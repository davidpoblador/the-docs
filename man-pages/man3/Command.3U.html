<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Command: Base class for command objects</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Base class for command objects">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Command (3U) manual">
  <meta name="twitter:description" content="Base class for command objects">
  <meta name="twitter:image" content="https://www.carta.tech/images/ivtools-dev-Command-3U.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3U/Command.3U.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Command (3U) manual" />
  <meta property="og:description" content="Base class for command objects" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ivtools-dev-Command-3U.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Command<small> (3U)</small></h1>
        <p class="lead">Base class for command objects</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/Command.3U.html">
      <span itemprop="name">Command: Base class for command objects</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ivtools-dev/">
      <span itemprop="name">ivtools-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/Command.3U.html">
      <span itemprop="name">Command: Base class for command objects</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;Unidraw/Commands/command.h&gt;</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Command is an abstract base class for objects that define operations on components and other objects.  Commands are similar to messages in traditional object-oriented systems in that components can receive and respond to them.  Commands can also be executed in isolation to perform arbitrary computation, and they can reverse the effects of such execution to support undo.</p><p>Some commands (termed <em>purely interpretive</em> commands) are interpreted by components but never executed in isolation, some are executed but never interpreted (<em>non-interpretive</em> commands), and some are used in both ways.  Some commands may be directly accessible to the user through menus, while others are internal to the application.  In general, an undoable operation should be carried out by a command object.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PUBLIC OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>virtual void Execute()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Unexecute()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual boolean Reversible()</strong></p>
  </dt>
  <dd>
    <p>Execute performs computation to carry out the command's semantics. Unexecute performs computation to reverse the effects of a previous Execute, based on whatever internal state the command maintains.  A command is responsible for maintaining enough state to reverse one Execute operation; repeated Unexecute operations will not undo the effects of more than one Execute.</p><p>By default, Execute examines the current selection maintained in the command's editor (see below).  Execute will do nothing if the nothing is selected and the command's clipboard (see below) is empty or non-existent.  Otherwise, if something is selected and the command's clipboard is non-existent, then Execute creates a clipboard containing the selected component subjects.  Finally, Execute will tell each component on the command's clipboard to interpret <em>this</em>. Conversely, Unexecute tells each component on the clipboard (if any) to Uninterpret <em>this</em> this.  Thus, commands are purely interpretive by default.</p><p>It may not be meaningful or appropriate, however, for some commands to reverse their effect.  For example, it is probably not feasible to undo a command that generates an external representation.  The Reversible operation returns whether or not the command is unexecutable and uninterpretable.  If the command is irreversible, then it is ignored during the undo process.  By default, Reversible examines the command's clipboard; if the command doesn't have one, then the command is reversible if the user has at least one component view selected.  If the command has a non-empty clipboard, then it is deemed reversible.  Subclasses may redefine Reversible to base the command's reversibility on their own criteria.</p>
  </dd>
  <dt>
    <p><strong>virtual void Store(Component*, Data* = nil)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual Data* Recall(Component*)</strong></p>
  </dt>
  <dd>
    <p>Since a command can affect more than one component, commands must let components that interpret them store undo information somewhere.  The commands must also let components recall the information during uninterpretation.  Store lets a component store a Data object in the command itself as part of the component's interpretation process.  The component can later retrieve the data with the Recall operation. Store and Recall require a Component argument to distinguish requests from potentially many components.</p>
  </dd>
  <dt>
    <p><strong>virtual void Log()</strong></p>
  </dt>
  <dd>
    <p>A convenience function for calling the equivalent function on the global unidraw object.</p>
  </dd>
  <dt>
    <p><strong>virtual void SetControlInfo(ControlInfo*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void SetEditor(Editor*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void SetClipboard(Clipboard*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual ControlInfo* GetControlInfo()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual Editor* GetEditor()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual Clipboard* GetClipboard()</strong></p>
  </dt>
  <dd>
    <p>Operations for setting and getting constructor-specified state stored in the command.  Commands use a ControlInfo object to store information from which to build a user interface for executing the command.  Commands keep a pointer to the Editor instance they potentially affect.  Finally, a command uses a clipboard to store the components it affects or affected.  A clipboard containing the components to be affected can be supplied in the constructor, but more often the command itself creates and primes a clipboard based on the editor's selected components.  The Set... operations do <em>not</em> delete the object being replaced.</p>
  </dd>
  <dt>
    <p><strong>virtual void First(Iterator&)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Last(Iterator&)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Next(Iterator&)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Prev(Iterator&)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual boolean Done(Iterator)</strong></p>
  </dt>
  <dd>
    <p>Operations for iterating over the command's children, if any.  These operations do nothing by default. Commands that compose other commands should redefine these operations to permit traversal of their children.  First and Last initialize an iterator to point to the beginning and end of the list of children, respectively.  Next increments the iterator to point to the following child, while Prev decrements the iterator to point to the preceding child.  Done returns whether or not the iterator points beyond the first or last child in the list.</p>
  </dd>
  <dt>
    <p><strong>virtual Component* Copy()</strong></p>
  </dt>
  <dd>
    <p>Return a copy of the command.  Subclasses should redefine this operation to return an instance of their type.</p>
  </dd>
  <dt>
    <p><strong>virtual void Read(istream&)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Write(ostream&)</strong></p>
  </dt>
  <dd>
    <p>Read and write the command's contents to a stream to support catalog operations.  Read and write typically call first the corresponding operations defined by their parent class, and then they read or write their class-specific state.  Note that you must ensure that the objects are read in the same order they are written.</p>
  </dd>
  <dt>
    <p><strong>virtual ClassId GetClassId()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual boolean IsA(ClassId)</strong></p>
  </dt>
  <dd>
    <p>GetClassId returns the unique class identifier for the Command subclass, while IsA returns whether the instance is of a class or subclass corresponding to the given identifier.  IsA typically checks the given identifier against the instance's own (as defined by its GetClassId operation) and, failing that, calls its parent classes' IsA operation.  All subclasses must redefine GetClassId and IsA to ensure that their identifiers are unique and that instances are written and read properly.</p>
  </dd>
  <dt>
    <p><strong>virtual ClassId GetSubstId(const char*& delim)</strong></p>
  </dt>
  <dd>
    <p>A Command subclasses can redefine GetSubstId to specify a command that can substitute for it.  This lets applications that do not define a particular command subclass still read in a substitute that is compatible with the subclass.  The substitute class should be one of the predefined commands in the Unidraw library.  This guarantees that all applications can instantiate the substitute.</p><p>GetSubstId returns the class identifier for the substitute.  When an another Unidraw application's catalog reads this object, it can create an instance of the substitute (which it is guaranteed to define) instead of the original (which it may not define).</p><p>The original should read and write a superset of the substitute's data.  The catalog will read to the end of the substitute's data and then advance the stream to the point following the sequence of characters specified by <em>delim</em>, saving the extra characters between the two points in the stream.  When the substitute object is saved subsequently, the original class identifier will be written along with the substitute's data plus the extra characters saved previously.  Thus information needn't be lost as a result of being read and written by an unsophisticated application.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROTECTED OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>Command(ControlInfo*, Clipboard* = nil)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Command(Editor* = nil, Clipboard* = nil)</strong></p>
  </dt>
  <dd>
    <p>The constructors are protected to prevent instatiation of the abstract base class.  You can supply a ControlInfo or Editor and an optional clipboard.  Only commands that will be accessible to the user need a ControlInfo object.  All commands should be given an editor object before they are used.</p>
  </dd>
  <dt>
    <p><strong>void InitCopy(Command*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>ControlInfo* CopyControlInfo()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Clipboard* CopyClipboard()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Clipboard* DeepCopyClipboard()</strong></p>
  </dt>
  <dd>
    <p>Convenience functions for use by subclasses in their Copy operation. InitCopy gives <em>this</em> a copy of the given command's editor, clipboard, and interpretation data stored by the components that interpreted it, if any. CopyControlInfo and CopyClipboard return copies of the command's ControlInfo and Clipboard objects, respectively, if they are non-nil.  Both CopyControlInfo and CopyClipboard simply check for a nil argument before calling the corresponding Copy operations on the objects.  DeepCopyClipboard checks for a nil clipboard before calling DeepCopy on the command's clipboard and returning the result.</p>
  </dd>
  <dt>
    <p><strong>GraphicComp* GetGraphicComp()</strong></p>
  </dt>
  <dd>
    <p>A convenience function that returns the GraphicComp in the editor that the command affects.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Command&hellip;</h2>
        <div class="sectioncontent">
<p>Catalog(3U), Clipboard(3U), ControlInfo(3U), Data(3U), Editor(3U), GraphicComp(3U), Iterator(3U), Unidraw(3U), classes(3U), globals(3U), istream(3C++), ostream(3C++)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ColorCmd.3U.html"><span aria-hidden="true">&larr;</span> ColorCmd.3U: Command for setting components' color attributes</a></li>
   <li class="next"><a href="Component.3U.html">Component.3U: Base class for objects that model domain-specific elements <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
