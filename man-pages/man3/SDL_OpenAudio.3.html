<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SDL_OpenAudio: Opens the audio device with the desired parameters.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Opens the audio device with the desired parameters.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="SDL_OpenAudio (3) manual">
  <meta name="twitter:description" content="Opens the audio device with the desired parameters.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libsdl1.2-dev-SDL_OpenAudio-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/SDL_OpenAudio.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="SDL_OpenAudio (3) manual" />
  <meta property="og:description" content="Opens the audio device with the desired parameters." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libsdl1.2-dev-SDL_OpenAudio-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">SDL_OpenAudio<small> (3)</small></h1>
        <p class="lead">Opens the audio device with the desired parameters.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/SDL_OpenAudio.3.html">
      <span itemprop="name">SDL_OpenAudio: Opens the audio device with the desired parameters.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libsdl1.2-dev/">
      <span itemprop="name">libsdl1.2-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/SDL_OpenAudio.3.html">
      <span itemprop="name">SDL_OpenAudio: Opens the audio device with the desired parameters.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include "SDL.h"</strong></p><p><strong>int </strong><strong>SDL_OpenAudio</strong><strong></strong>(<strong>SDL_AudioSpec *desired, SDL_AudioSpec *obtained</strong>);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This function opens the audio device with the <strong>desired</strong> parameters, and returns 0 if successful, placing the actual hardware parameters in the structure pointed to by <strong>obtained</strong>. If <strong>obtained</strong> is NULL, the audio data passed to the callback function will be guaranteed to be in the requested format, and will be automatically converted to the hardware audio format if necessary. This function returns -1 if it failed to open the audio device, or couldn't set up the audio thread.</p><p>To open the audio device a <strong>desired</strong> <em></em><strong>SDL_AudioSpec</strong> must be created.</p>
<pre>
SDL_AudioSpec *desired;
.
.
desired=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));
</pre>
<p> You must then fill this structure with your desired audio specifications.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>desired</strong>-&gt;<strong>freq</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>desired</strong>-&gt;<strong>format</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>desired</strong>-&gt;<strong>samples</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>desired</strong>-&gt;<strong>callback</strong>
  </dt>
  <dd>
    
  </dd>

</dl>

<pre>
void callback(void *userdata, Uint8 *stream, int len);
</pre>
<p> <strong>userdata</strong> is the pointer stored in <strong>userdata</strong> field of the <strong>SDL_AudioSpec</strong>. <strong>stream</strong> is a pointer to the audio buffer you want to fill with information and <strong>len</strong> is the length of the audio buffer in bytes.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>desired</strong>-&gt;<strong>userdata</strong>
  </dt>
  <dd>
    
  </dd>

</dl>
<p><strong>SDL_OpenAudio</strong> reads these fields from the <strong>desired</strong> <strong>SDL_AudioSpec</strong> structure pass to the function and attempts to find an audio configuration matching your <strong>desired</strong>. As mentioned above, if the <strong>obtained</strong> parameter is <strong>NULL</strong> then SDL with convert from your <strong>desired</strong> audio settings to the hardware settings as it plays.</p><p>If <strong>obtained</strong> is <strong>NULL</strong> then the <strong>desired</strong> <strong>SDL_AudioSpec</strong> is your working specification, otherwise the <strong>obtained</strong> <strong>SDL_AudioSpec</strong> becomes the working specification and the <strong>desirec</strong> specification can be deleted. The data in the working specification is used when building <strong>SDL_AudioCVT</strong>'s for converting loaded data to the hardware format.</p><p><strong>SDL_OpenAudio</strong> calculates the <strong>size</strong> and <strong>silence</strong> fields for both the <strong>desired</strong> and <strong>obtained</strong> specifications. The <strong>size</strong> field stores the total size of the audio buffer in bytes, while the <strong>silence</strong> stores the value used to represent silence in the audio buffer</p><p>The audio device starts out playing <strong>silence</strong> when it's opened, and should be enabled for playing by calling <em></em><strong>SDL_PauseAudio</strong><em>(</em><strong>0</strong>) when you are ready for your audio <strong>callback</strong> function to be called. Since the audio driver may modify the requested <strong>size</strong> of the audio buffer, you should allocate any local mixing buffers after you open the audio device.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
/* Prototype of our callback function */
void my_audio_callback(void *userdata, Uint8 *stream, int len);

/* Open the audio device */
SDL_AudioSpec *desired, *obtained;
SDL_AudioSpec *hardware_spec;

/* Allocate a desired SDL_AudioSpec */
desired=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));

/* Allocate space for the obtained SDL_AudioSpec */
obtained=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));

/* 22050Hz - FM Radio quality */
desired-&gt;freq=22050;

/* 16-bit signed audio */
desired-&gt;format=AUDIO_S16LSB;

/* Mono */
desired-&gt;channels=0;

/* Large audio buffer reduces risk of dropouts but increases response time */
desired-&gt;samples=8192;

/* Our callback function */
desired-&gt;callback=my_audio_callback;

desired-&gt;userdata=NULL;

/* Open the audio device */
if ( SDL_OpenAudio(desired, obtained) &lt; 0 ){
  fprintf(stderr, "Couldn't open audio: %s
", SDL_GetError());
  exit(-1);
}
/* desired spec is no longer needed */
free(desired);
hardware_spec=obtained;
.
.
/* Prepare callback for playing */
.
.
.
/* Start playing */
<strong>SDL_PauseAudio</strong>(0);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO SDL_OpenAudio&hellip;</h2>
        <div class="sectioncontent">
<p><em></em><strong>SDL_AudioSpec</strong><em></em>, <em></em><strong>SDL_LockAudio</strong><em></em>, <em></em><strong>SDL_UnlockAudio</strong><em></em>, <em></em><strong>SDL_PauseAudio</strong><em></em></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="SDL_NumJoysticks.3.html"><span aria-hidden="true">&larr;</span> SDL_NumJoysticks.3: Count available joysticks.</a></li>
   <li class="next"><a href="SDL_Overlay.3.html">SDL_Overlay.3: Yuv video overlay <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
