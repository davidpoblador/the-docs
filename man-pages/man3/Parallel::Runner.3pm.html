<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Parallel::Runner: An object to manage running things in parallel processes.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="An object to manage running things in parallel processes.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Parallel::Runner (3pm) manual">
  <meta name="twitter:description" content="An object to manage running things in parallel processes.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libparallel-runner-perl-Parallel::Runner-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Parallel::Runner.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Parallel::Runner (3pm) manual" />
  <meta property="og:description" content="An object to manage running things in parallel processes." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libparallel-runner-perl-Parallel::Runner-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Parallel::Runner<small> (3pm)</small></h1>
        <p class="lead">An object to manage running things in parallel processes.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Parallel::Runner.3pm.html">
      <span itemprop="name">Parallel::Runner: An object to manage running things in parallel processes.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libparallel-runner-perl/">
      <span itemprop="name">libparallel-runner-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Parallel::Runner.3pm.html">
      <span itemprop="name">Parallel::Runner: An object to manage running things in parallel processes.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>There are several other modules to do this, you probably want one of them. This module exists as a super specialised parallel task manager. You create the object with a process limit and callbacks for what to do while waiting for a free process slot, as well as a callback for what a process should do just before exiting.</p><p>You must explicitly call $runner-&gt;<em>finish()</em> when you are done. If the runner is destroyed before it's children are finished a warning will be generated and your child processes will be killed, by force if necessary.</p><p>If you specify a maximum of 1 then no forking will occur, and <em>run()</em> will block until the coderef returns. You can force a fork by providing a boolean true value as the second argument to <em>run()</em>, this will force the runner to fork before running the coderef, however <em>run()</em> will still block until it the child exits.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSYS</h2>
        <div class="sectioncontent">

<pre>
    #!/usr/bin/perl
    use strict;
    use warnings;
    use Parallel::Runner;

    my $runner = Parallel::Runner-&gt;<strong>new</strong>(4);
    $runner-&gt;run( sub { ... } );
    $runner-&gt;run( sub { ... } );
    $runner-&gt;run( sub { ... } );
    $runner-&gt;run( sub { ... } );

    # This will block until one of the previous 4 finishes
    $runner-&gt;run( sub { ... } );

    # Do not forget this.
    $runner-&gt;finish;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">
<p>Create a new instance of Parallel::Runner. $accessor can be anything listed under the \s-1ACCESSORS\s0 section. $max should be the maximum number of processes allowed, defaults to 1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESSORS</h2>
        <div class="sectioncontent">
<p>These are simple accessors, provididng an argument sets the accessor to that argument, no argument it simply returns the current value. If this is specified than \s-1IPC\s0 will be automatically enabled, and the final return from each process will be passed into this handler in the main process. Due to the way \s-1IPC\s0 works only strings/numerical data is passed, if you need to pass a ref you will need to serialize it yourself before returning it, followed by deserializing it in your callback. Example:     # Place to put the accumulated data     my @accum_data;</p><p>    # Create the runner with a callback that pushes the data onto our array.     $runner = $CLASS-&gt;new( 2,         data_callback =&gt; sub {             my ($data) = @_;             push @accum_data =&gt; $data;         },     );</p><p>    # 4 processes that return data     $runner-&gt;run( sub { return "foo" });     $runner-&gt;run( sub { return "bar" });     $runner-&gt;run( sub { return "baz" });     $runner-&gt;run( sub { return "bat" });     $runner-&gt;finish;</p><p>    # Verify the data (order is not predictable)     is_deeply(         [ sort @accum_data ],         [ sort qw/foo bar baz bat/ ],         "Got all data returned by subprocesses"     ); Codref to call just before a child exits (called within child) How long to wait per iterate if nothing has changed. Coderef to call multiple times in a loop while <em>run()</em> is blocking waiting for a process slot. Codref to call whenever a pid is reaped using waitpid. The callback sub will be passed 3 values The first is the exit status of the child process. The second is the pid of the child process. The third used to be the return of waitpid, but this is depricated as Child is now used and throws an exception when waitpid is not what it should be. The third is simply the pid of the child process again. The final argument is the child process object itself.     $runner-&gt;reap_callback( sub {         my ( $status, $pid, $pid_again, $proc ) = @_;</p><p>        # Status as returned from system, so 0 is good, 1+ is bad.         die "Child $pid did not exit 0"             if $status;     }); Returns a list of Child::Link::Proc objects. pid of the parent process Maximum number of children</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OBJECT METHODS</h2>
        <div class="sectioncontent">
<p>Run the specified code in a child process. Blocks if no free slots are available. Force fork can be used to force a fork when max is 1, however it will still block until the child exits.</p>
<dl class='dl-vertical'>
  <dt>
    <em>finish()</em>
  </dt>
  <dd>
    <p>Wait for all children to finish, then clean up after them. If a timeout is specified it will return after the timeout regardless of wether or not children have all exited. If there is a timeout call back then that code will be run upon timeout just before the method returns. \s-1NOTE:\s0 \s-1DO\s0 \s-1NOT\s0 \s-1LET\s0 \s-1YOUR\s0 \s-1RUNNER\s0 \s-1BE\s0 \s-1DESTROYED\s0 \s-1BEFORE\s0 \s-1FINISH\s0 \s-1COMPLETES\s0 \s-1WITHOUT\s0 A \s-1TIMEOUT\s0. the runner will kill all children, possibly with force if your runner is destroyed with children still running, or not waited on. Send all children the specified kill signal.</p>
  </dd>
  <dt>
    \s-1<em>DESTROY\s0()</em>
  </dt>
  <dd>
    <p>Automagically called when the object is destroyed. If called while children are running it will forcefully clean up after you as follows: 1) Sends an ugly warning. 2) Will first give all your children 1 second to complete. Windows) Strawberry fails with processes, so on windows \s-1DESTROY\s0 will wait as long as needed, possibly forever. 3) Sends kill signal 15 to all children then waits up to 4 seconds. 4) Sends kill signal 9 to any remaining children then waits up to 10 seconds 5) Gives up and returns</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FENNEC PROJECT</h2>
        <div class="sectioncontent">
<p>This module is part of the Fennec project. See Fennec for more details. Fennec is a project to develop an extendable and powerful testing framework. Together the tools that make up the Fennec framework provide a potent testing environment.</p><p>The tools provided by Fennec are also useful on their own. Sometimes a tool created for Fennec is useful outside the greator framework. Such tools are turned into their own projects. This is one such project.</p>
<dl class='dl-vertical'>
  <dt>
    Fennec - The core framework
  </dt>
  <dd>
    <p>The primary Fennec project that ties them all together.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Chad Granum exodist7@gmail.com</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2010 Chad Granum</p><p>Parallel-Runner is free software; Standard perl licence.</p><p>Parallel-Runner is distributed in the hope that it will be useful, but \s-1WITHOUT\s0 \s-1ANY\s0 \s-1WARRANTY\s0; without even the implied warranty of \s-1MERCHANTABILITY\s0 or \s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0 \s-1PURPOSE\s0.  See the license for more details.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Parallel::Iterator.3pm.html"><span aria-hidden="true">&larr;</span> Parallel::Iterator.3pm: Simple parallel execution</a></li>
   <li class="next"><a href="Params::Callback.3pm.html">Params::Callback.3pm: Parameter callback base class <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
