<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Judy1: C library for creating and accessing a dynamic array of bits, using any value of a word as an index.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="C library for creating and accessing a dynamic array of bits, using any value of a word as an index.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Judy1 (3) manual">
  <meta name="twitter:description" content="C library for creating and accessing a dynamic array of bits, using any value of a word as an index.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libjudy-dev-Judy1-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/Judy1.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Judy1 (3) manual" />
  <meta property="og:description" content="C library for creating and accessing a dynamic array of bits, using any value of a word as an index." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libjudy-dev-Judy1-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Judy1<small> (3)</small></h1>
        <p class="lead">C library for creating and accessing a dynamic array of bits, using any value of a word as an index.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/Judy1.3.html">
      <span itemprop="name">Judy1: C library for creating and accessing a dynamic array of bits, using any value of a word as an index.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libjudy-dev/">
      <span itemprop="name">libjudy-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/Judy1.3.html">
      <span itemprop="name">Judy1: C library for creating and accessing a dynamic array of bits, using any value of a word as an index.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
cc [flags] <em>sourcefiles</em> -lJudy
</pre>

<pre>
#include &lt;Judy.h&gt;

int     Rc_int;                          // return code - integer
Word_t  Rc_word;                         // return code - unsigned word
Word_t  Index, Index1, Index2, Nth;

Pvoid_t PJ1Array = (Pvoid_t) NULL;       // initialize Judy1 array

J1S( Rc_int,  PJ1Array, Index);          // Judy1Set()
J1U( Rc_int,  PJ1Array, Index);          // Judy1Unset()
J1T( Rc_int,  PJ1Array, Index);          // Judy1Test()
J1C( Rc_word, PJ1Array, Index1, Index2); // Judy1Count()
J1BC(Rc_int,  PJ1Array, Nth, Index);     // Judy1ByCount()
J1FA(Rc_word, PJ1Array);                 // Judy1FreeArray()
J1MU(Rc_word, PJ1Array);                 // Judy1MemUsed()
J1F( Rc_int,  PJ1Array, Index);          // Judy1First()
J1N( Rc_int,  PJ1Array, Index);          // Judy1Next()
J1L( Rc_int,  PJ1Array, Index);          // Judy1Last()
J1P( Rc_int,  PJ1Array, Index);          // Judy1Prev()
J1FE(Rc_int,  PJ1Array, Index);          // Judy1FirstEmpty()
J1NE(Rc_int,  PJ1Array, Index);          // Judy1NextEmpty()
J1LE(Rc_int,  PJ1Array, Index);          // Judy1LastEmpty()
J1PE(Rc_int,  PJ1Array, Index);          // Judy1PrevEmpty()
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A Judy1 array is the equivalent of a bit array or bit map. A bit is addressed by an <strong>Index</strong> (key). The array may be sparse, and the <strong>Index</strong> may be any word-sized <strong>Value</strong>. If an index is present, it represents a set bit (a bit set represents an index present). If an index is absent, it represents an unset bit (a bit unset represents an absent index).</p><p>A Judy1 array is allocated with a <strong>NULL</strong> pointer</p>
<pre>
Pvoid_t PJ1Array = (Pvoid_t) NULL;
</pre>
<p>Memory to support the array is allocated as bits are set, and released as bits are unset. If the Judy1 pointer (<strong>PJ1Array</strong>) is NULL, all bits are unset (and the Judy1 array requires no memory).</p><p>As with an ordinary array, a Judy1 array contains no duplicate indexes.</p><p>Using the macros described here, rather than the <strong>Judy1 function calls</strong>, the default error handling sends a message to the standard error and terminates the program with <strong>exit</strong>(1)</strong>. For other error handling methods, see the <em>ERRORS</em> section.</p><p>Because the macro forms are sometimes faster and have a simpler error handling interface than the equivalent <em>functions</em>, they are the preferred way of calling the Judy1 functions.</p>
<dl class='dl-vertical'>
  <dt>
    <p> <strong>J1S(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1Set()</strong></p>
  </dt>
  <dd>
    <p>Set <strong>Index</strong>'s bit in the Judy1 array <strong>PJ1Array</strong>.</p><ul>
<li><p>Return <strong>Rc_int</strong> set to 1 if <strong>Index</strong>'s bit was previously unset (successful), otherwise 0 if the bit was already set (unsuccessful).</p></li><li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1U(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1Unset()</strong></p>
  </dt>
  <dd>
    <p>Unset <strong>Index</strong>'s bit in the Judy1 array <strong>PJ1Array</strong>; that is, remove <strong>Index</strong> from the Judy1 array.</p><ul>
<li><p>Return <strong>Rc_int</strong> set to 1 if <strong>Index</strong>'s bit was previously set (successful), otherwise 0 if the bit was already unset (unsuccessful).</p></li><li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1T(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1Test()</strong></p>
  </dt>
  <dd>
    <p>Test if <strong>Index</strong>'s bit is set in the Judy1 array <strong>PJ1Array</strong>.</p><ul>
<li><p>Return <strong>Rc_int</strong> set to 1 if <strong>Index</strong>'s bit is set (<strong>Index</strong> is present), 0 if it is unset (<strong>Index</strong> is absent).</p></li><li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1C(Rc_word, PJ1Array, Index1, Index2);</strong> // <strong>Judy1Count()</strong></p>
  </dt>
  <dd>
    <p>Count the number of indexes present in the Judy1 array <strong>PJ1Array</strong> between <strong>Index1</strong> and <strong>Index2</strong> (inclusive).</p><ul>
<li><p>Return <strong>Rc_word</strong> set to the count. A return <strong>Value</strong> of 0 can be valid as a count, or it can indicate a special case for fully populated array (32-bit machines only).  See <strong>Judy1Count()</strong> for ways to resolve this.</p></li><li><p>To count all indexes present (population) in a Judy1 bit array, use:</p></li><li>
<pre>
J1C(Rc_word, PJ1Array, 0, -1);
</pre>
<p><strong>Note:</strong> The -1 promotes to the maximum index, that is, all ones.</p></li><li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1BC(Rc_int, PJ1Array, Nth, Index);</strong> // <strong>Judy1ByCount()</strong></p>
  </dt>
  <dd>
    <p>Locate the <strong>Nth</strong> index that is present in the Judy1 array <strong>PJ1Array</strong> (<strong>Nth</strong> = 1 returns the first index present). To refer to the last index in a fully populated array (all indexes present, which is rare), use <strong>Nth</strong> = 0.</p><ul>
<li><p>Return <strong>Rc_int</strong> set to 1 and <strong>Index</strong> set to the <strong>Nth</strong> index if found, otherwise return <strong>Rc_int</strong> set to 0 (the <strong>Value</strong> of <strong>Index</strong> contains no useful information).</p></li><li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1FA(Rc_word, PJ1Array);</strong> // <strong>Judy1FreeArray()</strong></p>
  </dt>
  <dd>
    <p>Free the entire Judy1 array <strong>PJ1Array</strong> (much faster than using a <strong>J1N()</strong>, <strong>J1U()</strong> loop).</p><ul>
<li><p>Return <strong>Rc_word</strong> set to the number of bytes freed, and <strong>PJ1Array</strong> set to <strong>NULL</strong>.</p></li><li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1MU(Rc_word, PJ1Array);</strong> // <strong>Judy1MemUsed()</strong></p>
  </dt>
  <dd>
    <p>Return <strong>Rc_word</strong> set to the number of bytes of memory currently in use by Judy1 array <strong>PJ1Array</strong>. This is a very fast routine, and may be used after a <strong>J1S()</strong> or <strong>J1U()</strong> call with little performance impact.</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>Judy1 Search Functions</strong></p>
  </dt>
  <dd>
    <p>The Judy1 search functions allow you to search for set or unset bits in the array. You may search inclusively or exclusively, in either forward or reverse directions. All of the search functions use a similar calling sequence. <strong>Rc_int</strong> is returned set to 1 for a successful search and the found <strong>Index</strong> is returned. <strong>Rc_int</strong> is returned set to 0 for an unsuccessful search, and <strong>Index</strong> contains no useful information. The return code <strong>Rc_int</strong> must be checked prior to using the returned <strong>Index</strong>, since a search failure is possible.</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1F(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1First()</strong></p>
  </dt>
  <dd>
    <p>Search (inclusive) for the first index present that is equal to or greater than the passed <strong>Index</strong>. (Start with <strong>Index</strong> = 0 to find the first index in the array.)  <strong>J1F()</strong> is typically used to <em>begin</em> a sorted-order scan of the indexes present in a Judy1 array.</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1N(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1Next()</strong></p>
  </dt>
  <dd>
    <p>Search (exclusive) for the next index present that is greater than the passed <strong>Index</strong>. <strong>J1N()</strong> is typically used to <em>continue</em> a sorted-order scan of the indexes present in a Judy1 array, or to locate a "neighbor" of a given index.</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1L(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1Last()</strong></p>
  </dt>
  <dd>
    <p>Search (inclusive) for the last index present that is equal to or less than the passed <strong>Index</strong>.  (Start with <strong>Index</strong> = -1, that is, all ones, to find the last index in the array.)  <strong>J1L()</strong> is typically used to <em>begin</em> a reverse-sorted-order scan of the indexes present in a Judy1 array.</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1P(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1Prev()</strong></p>
  </dt>
  <dd>
    <p>Search (exclusive) for the previous index present that is less than the passed <strong>Index</strong>.  <strong>J1P()</strong> is typically used to <em>continue</em> a reverse-sorted-order scan of the indexes present in a Judy1 array, or to locate a "neighbor" of a given index.</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1FE(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1FirstEmpty()</strong></p>
  </dt>
  <dd>
    <p>Search (inclusive) for the first absent index that is equal to or greater than the passed <strong>Index</strong>.  (Start with <strong>Index</strong> = 0 to find the first index absent in the array.)</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1NE(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1NextEmpty()</strong></p>
  </dt>
  <dd>
    <p>Search (exclusive) for the next absent index that is greater than the passed <strong>Index</strong>.</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1LE(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1LastEmpty()</strong></p>
  </dt>
  <dd>
    <p>Search (inclusive) for the last absent index that is equal to or less than the passed <strong>Index</strong>. (Start with <strong>Index</strong> = -1 to find the last index absent in the array.)</p><ul>
<li></li>
</ul>
  </dd>
  <dt>
    <p> <strong>J1PE(Rc_int, PJ1Array, Index);</strong> // <strong>Judy1PrevEmpty()</strong></p>
  </dt>
  <dd>
    <p>Search (exclusive) for the previous absent index that is less than the passed <strong>Index</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">\fBERRORS:\fP See: \fIJudy_3.htm#ERRORS\fP</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">\fBEXAMPLE\fP</h2>
        <div class="sectioncontent">
<p>In the following example, errors in the <strong>J1S()</strong> or <strong>J1U()</strong> calls go to a user-defined procedure, process_malloc_failure.  This is not needed when you use the default <strong>JUDYERROR()</strong> macro, since the default causes your program to exit on all failures, including <em>malloc()</em> failure.</p>
<pre>
#include &lt;stdio.h&gt;
#include &lt;Judy.h&gt;

int main()                       // Example program of Judy1 macro APIs
{
   Word_t Index;                 // index (or key)
   Word_t Rcount;                // count of indexes (or bits set)
   Word_t Rc_word;               // full word return value
   int    Rc_int;                // boolean values returned (0 or 1)

   Pvoid_t PJ1Array = (Pvoid_t) NULL; // initialize Judy1 array

   Index = 123456;
   J1S(Rc_int, J1Array, Index);  // set bit at 123456
   if (Rc_int == JERR) goto process_malloc_failure;
   if (Rc_int == 1) printf("OK - bit successfully set at %lu&#92;n", Index);
   if (Rc_int == 0) printf("BUG - bit already set at %lu&#92;n", Index);

   Index = 654321;
   J1T(Rc_int, J1Array, Index);  // test if bit set at 654321
   if (Rc_int == 1) printf("BUG - set bit at %lu&#92;n", Index);
   if (Rc_int == 0) printf("OK - bit not set at %lu&#92;n", Index);

   J1C(Rcount, J1Array, 0, -1);  // count all bits set in array
   printf("%lu bits set in Judy1 array&#92;n", Rcount);

   Index = 0;
   J1F(Rc_int, J1Array, Index);  // find first bit set in array
   if (Rc_int == 1) printf("OK - first bit set is at %lu&#92;n", Index);
   if (Rc_int == 0) printf("BUG - no bits set in array&#92;n");

   J1MU(Rc_word, J1Array);       // how much memory was used?
   printf("%lu Indexes used %lu bytes of memory&#92;n", Rcount, Rc_word);

   Index = 123456;
   J1U(Rc_int, J1Array, Index);  // unset bit at 123456
   if (Rc_int == JERR) goto process_malloc_failure;
   if (Rc_int == 1) printf("OK - bit successfully unset at %lu&#92;n", Index);
   if (Rc_int == 0) printf("BUG - bit was not set at %lu&#92;n", Index);

   <strong>return</strong>(0);
}
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Judy was invented by Doug Baskins and implemented -Packard.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Judy1&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/Judy.3.html"><strong>Judy</strong>(3)</a>, <a href="../man3/JudyL.3.html"><strong>JudyL</strong>(3)</a>, <a href="../man3/JudySL.3.html"><strong>JudySL</strong>(3)</a>, <a href="../man3/JudyHS.3.html"><strong>JudyHS</strong>(3)</a>,</p><p><em>malloc()</em>,</p><p>the Judy website, <em>http://judy.sourceforge.net</em>, for more information and Application Notes.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Judy.3.html"><span aria-hidden="true">&larr;</span> Judy.3: C library functions for creating and accessing dynamic arrays</a></li>
   <li class="next"><a href="Judy1ByCount.3.html">Judy1ByCount.3: C library for creating and accessing a dynamic array of bits, using any value of a word as an index <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
