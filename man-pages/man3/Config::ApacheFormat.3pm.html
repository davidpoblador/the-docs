<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Config::ApacheFormat: Use apache format config files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Use apache format config files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Config::ApacheFormat (3pm) manual">
  <meta name="twitter:description" content="Use apache format config files">
  <meta name="twitter:image" content="https://www.carta.tech/images/libconfig-apacheformat-perl-Config::ApacheFormat-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Config::ApacheFormat.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Config::ApacheFormat (3pm) manual" />
  <meta property="og:description" content="Use apache format config files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libconfig-apacheformat-perl-Config::ApacheFormat-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Config::ApacheFormat<small> (3pm)</small></h1>
        <p class="lead">Use apache format config files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Config::ApacheFormat.3pm.html">
      <span itemprop="name">Config::ApacheFormat: Use apache format config files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libconfig-apacheformat-perl/">
      <span itemprop="name">libconfig-apacheformat-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Config::ApacheFormat.3pm.html">
      <span itemprop="name">Config::ApacheFormat: Use apache format config files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Config files used with this module are in Apache's format:</p>
<pre>
  # comment here
  RootDir /path/foo
  LogDir  /path/foo/log
  Colors red green orange blue &#92;
         black teal
</pre>
<p>  &lt;Directory /path/foo&gt;      # override Colors inside block      Colors red blue black   &lt;/Directory&gt;</p><p>Code to use this config file might look like:</p><p>  use Config::ApacheFormat;</p><p>  # load a conf file   my $config = Config::ApacheFormat-&gt;new();   $config-&gt;read("my.conf");</p><p>  # access some parameters   $root_dir = $config-&gt;get("RootDir");   $log_dir  = $config-&gt;get("LogDir");   @colors   = $config-&gt;get("colors");</p><p>  # using the autoloaded methods   $config-&gt;<strong>autoload_support</strong>(1);   $root_dir = $config-&gt;RootDir;   $log_dir  = $config-&gt;logdir;</p><p>  # access parameters inside a block   my $block = $config-&gt;block(Directory =&gt; "/path/foo");   @colors = $block-&gt;get("colors");   $root_dir = $block-&gt;get("root_dir");</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module is designed to parse a configuration file in the same syntax used by the Apache web server (see http://httpd.apache.org for details).  This allows you to build applications which can be easily managed by experienced Apache admins.  Also, by using this module, you'll benefit from the support for nested blocks with built-in parameter inheritance.  This can greatly reduce the amount or repeated information in your configuration files.</p><p>A good reference to the Apache configuration file format can be found here:</p><p>  http://httpd.apache.org/docs-2.0/configuring.html</p><p>To quote from that document, concerning directive syntax:</p><p> Apache configuration files contain one directive per line. The  back-slash "&#92;" may be used as the last character on a line to  indicate that the directive continues onto the next line. There must  be no other characters or white space between the back-slash and the  end of the line.</p><p> Directives in the configuration files are case-insensitive, but  arguments to directives are often case sensitive. Lines that begin  with the hash character "#" are considered comments, and are  ignored. Comments may not be included on a line after a configuration  directive. Blank lines and white space occurring before a directive  are ignored, so you may indent directives for clarity.</p><p>And block notation:</p><p> Directives placed in the main configuration files apply to the entire  server. If you wish to change the configuration for only a part of the  server, you can scope your directives by placing them in &lt;Directory&gt;,  &lt;DirectoryMatch&gt;, &lt;Files&gt;, &lt;FilesMatch&gt;, &lt;Location&gt;, and  &lt;LocationMatch&gt; sections. These sections limit the application of the  directives which they enclose to particular filesystem locations or  URLs. They can also be nested, allowing for very fine grained  configuration.</p><p>This module will parse actual Apache configuration files, but you will need to set some options to non-default values.  See \*(L"Parsing a Real Apache Config File\*(R".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>This method creates an object that can then be used to read configuration files. It does not actually read any files; for that, use the \*(C`read()\*(C' method below. The object supports the following attributes, all of which may be set through \*(C`new()\*(C':</p>
<dl class='dl-vertical'>
  <dt>
    inheritance_support
  </dt>
  <dd>
    <p>Set this to 0 to turn off the inheritance feature. Block inheritance means that variables declared outside a block are available from inside the block unless overriden.  Defaults to 1.</p>
  </dd>
  <dt>
    include_support
  </dt>
  <dd>
    <p>When this is set to 1, the directive \*(L"Include\*(R" will be treated specially by the parser.  It will cause the value to be treated as a filename and that filename will be read in.  If you use \*(L"Include\*(R" with a directory, every file in that directory will be included. This matches Apache's behavior and allows users to break up configuration files into multiple, possibly shared, pieces. Defaults to 1.</p>
  </dd>
  <dt>
    autoload_support
  </dt>
  <dd>
    <p>Set this to 1 and all your directives will be available as object methods.  So instead of:   $config-&gt;get("foo"); You can write:   $config-&gt;foo; Defaults to 0.</p>
  </dd>
  <dt>
    case_sensitive
  </dt>
  <dd>
    <p>Set this to 1 to preserve the case of directive names.  Otherwise, all names will be \*(C`lc()\*(C'ed and matched case-insensitively.  Defaults to 0.</p>
  </dd>
  <dt>
    fix_booleans
  </dt>
  <dd>
    <p>If set to 1, then during parsing, the strings \*(L"Yes\*(R", \*(L"On\*(R", and \*(L"True\*(R" will be converted to 1, and the strings \*(L"No\*(R", \*(L"Off\*(R", and \*(L"False\*(R" will be converted to 0. This allows you to more easily use \*(C`get()\*(C' in conditional statements. For example:   # httpd.conf   UseCanonicalName  On Then in Perl:   $config = Config::ApacheFormat-&gt;new(fix_booleans =&gt; 1);   $config-&gt;read("httpd.conf");   if ($config-&gt;get("UseCanonicalName")) {       # this will get executed if set to Yes/On/True   } This option defaults to 0.</p>
  </dd>
  <dt>
    expand_vars
  </dt>
  <dd>
    <p>If set, then you can use variable expansion in your config file by prefixing directives with a \*(C`$\*(C'. Hopefully this seems logical to you:   Website     http://my.own.dom   JScript     $Website/js   Images      $Website/images Undefined variables in your config file will result in an error. To use a literal \*(C`$\*(C', simply prefix it with a \*(C`&#92;\*(C' (backslash). Like in Perl, you can use brackets to delimit the variables more precisely:   Nickname    Rob   Fullname    ${Nickname}ert Since only scalars are supported, if you use a multi-value, you will only get back the first one:   Options     Plus Minus "About the Same"   Values      $Options In this examples, \*(L"Values\*(R" will become \*(L"Plus\*(R". This is seldom a limitation since in most cases, variable subsitution is used like the first example shows. This option defaults to 0.</p>
  </dd>
  <dt>
    setenv_vars
  </dt>
  <dd>
    <p>If this is set to 1, then the special \*(C`SetEnv\*(C' directive will be set values in the environment via %ENV.  Also, the special \*(C`UnSetEnv\*(C' directive will delete environment variables. For example:   # $ENV{PATH} = "/usr/sbin:/usr/bin"   SetEnv PATH "/usr/sbin:/usr/bin"   # $ENV{MY_SPECIAL_VAR} = 10   SetEnv MY_SPECIAL_VAR 10   # delete $ENV{THIS}   UnsetEnv THIS This option defaults to 0.</p>
  </dd>
  <dt>
    valid_directives
  </dt>
  <dd>
    <p>If you provide an array of directive names then syntax errors will be generated during parsing for invalid directives.  Otherwise, any directive name will be accepted.  For exmaple, to only allow directives called \*(L"Bar\*(R" and \*(L"Bif\*(R":   $config = Config::ApacheFormat-&gt;new(                       valid_directives =&gt; [qw(Bar Bif)],                                      );</p>
  </dd>
  <dt>
    valid_blocks
  </dt>
  <dd>
    <p>If you provide an array of block names then syntax errors will be generated during parsing for invalid blocks.  Otherwise, any block name will be accepted.  For exmaple, to only allow \*(L"Directory\*(R" and \*(L"Location\*(R" blocks in your config file:   $config = Config::ApacheFormat-&gt;new(                       valid_blocks =&gt; [qw(Directory Location)],                                      );</p>
  </dd>
  <dt>
    include_directives
  </dt>
  <dd>
    <p>This directive controls the name of the include directive.  By default it is \*(C`['Include']\*(C', but you can set it to any list of directive names.</p>
  </dd>
  <dt>
    root_directive
  </dt>
  <dd>
    <p>This controls what the root directive is, if any.  If you set this to the name of a directive it will be used as a base directory for \*(C`Include\*(C' processing.  This mimics the behavior of \*(C`ServerRoot\*(C' in real Apache config files, and as such you'll want to set it to 'ServerRoot' when parsing an Apache config.  The default is \*(C`undef\*(C'.</p>
  </dd>
  <dt>
    hash_directives
  </dt>
  <dd>
    <p>This determines which directives (if any) should be parsed so that the first value is actually a key into the remaining values. For example, \*(C`AddHandler\*(C' is such a directive.   AddHandler cgi-script .cgi .sh   AddHandler server-parsed .shtml To parse this correctly, use:   $config = Config::ApacheFormat-&gt;new(                       hash_directives =&gt; [qw(AddHandler PerlSetVar)]                                      ); Then, use the two-argument form of \*(C`get()\*(C':   @values = $config-&gt;get(AddHandler =&gt; &apos;cgi-script&apos;); This allows you to access each directive individually, which is needed to correctly handle certain special-case Apache settings.</p>
  </dd>
  <dt>
    duplicate_directives
  </dt>
  <dd>
    <p>This option controls how duplicate directives are handled. By default, if multiple directives of the same name are encountered, the last one wins:   Port 8080   # ...   Port 5053 In this case, the directive \*(C`Port\*(C' would be set to the last value, 5053. This is useful because it allows you to include other config files, which you can then override:   # default setup   Include /my/app/defaults.conf   # override port   Port 5053 In addition to this default behavior, \*(C`Config::ApacheFormat\*(C' also supports the following modes:   last     -  the value from the last one is kept (default)   error    -  duplicate directives result in an error   combine  -  combine values of duplicate directives together These should be self-explanatory. If set to \*(C`error\*(C', any duplicates will result in an error.  If set to \*(C`last\*(C' (the default), the last value wins. If set to \*(C`combine\*(C', then duplicate directives are combined together, just like they had been specified on the same line.</p>
  </dd>

</dl>
<p>All of the above attributes are also available as accessor methods.  Thus, this:</p><p>  $config = Config::ApacheFormat-&gt;new(inheritance_support =&gt; 0,                                       include_support =&gt; 1);</p><p>Is equivalent to:</p><p>  $config = Config::ApacheFormat-&gt;new();   $config-&gt;<strong>inheritance_support</strong>(0);   $config-&gt;<strong>include_support</strong>(1);</p>
<dl class='dl-vertical'>
  <dt>
    $config-&gt;read(&#92;*FILE);
  </dt>
  <dd>
    <p>Reads a configuration file into the config object.  You must pass either the path of the file to be read or a reference to an open filehandle.  If an error is encountered while reading the file, this method will <em>die()</em>. Calling <em>read()</em> more than once will add the new configuration values from another source, overwriting any conflicting values.  Call <em>clear()</em> first if you want to read a new set from scratch. Returns values from the configuration file.  If the directive contains a single value, it will be returned.  If the directive contains a list of values then they will be returned as a list.  If the directive does not exist in the configuration file then nothing will be returned (undef in scalar context, empty list in list context). For example, given this confiuration file:   Foo 1   Bar bif baz bop The following code would work as expected:   my $foo = $config-&gt;get("Foo");   # $foo = 1   my @bar = $config-&gt;get("Bar");   # @bar = ("bif", "baz", "bop") If the name is the name of a block tag in the configuration file then a list of available block specifiers will be returned.  For example, given this configuration file:   &lt;Site big&gt;      Size 10   &lt;/Site&gt;   &lt;Site small&gt;      Size 1   &lt;/Site&gt; This call:   @sites = $config-&gt;get("Site"); Will return \*(C`([ Site =\*(C' \*(L"big\*(R"], [ Site =&gt; \*(L"small\*(R" ])&gt;.  These arrays can then be used with the <em>block()</em> method described below. If the directive was included in the file but did not have a value, 1 is returned by <em>get()</em>. Calling <em>get()</em> with no arguments will return the names of all available directives. Directives declared in \*(C`hash_directives\*(C' require a key value:   $handler = $config-&gt;get("AddHandler", "cgi-script"); \*(C`directive()\*(C' is available as an alias for \*(C`get()\*(C'. This method returns a Config::ApacheFormat object used to access the values inside a block.  Parameters specified within the block will be available.  Also, if inheritance is turned on (the default), values set outside the block that are not overwritten inside the block will also be available.  For example, given this file:   MaxSize 100   &lt;Site "big"&gt;      Size 10   &lt;/Site&gt;   &lt;Site "small"&gt;      Size 1   &lt;/Site&gt; this code:   print "Max: ", $config-&gt;get("MaxSize"), "&#92;n";   $block = $config-&gt;block(Site =&gt; "big");   print "Big: ", $block-&gt;get("Size"), " / ",                  $block-&gt;get("MaxSize"), "&#92;n";   $block = $config-&gt;block(Site =&gt; "small");   print "Small: ", $block-&gt;get("Size"), " / ",                    $block-&gt;get("MaxSize"), "&#92;n"; will print:   Max: 100   Big: 10 / 100   Small: 1 / 100 Note that \*(C`block()\*(C' does not require any particular number of parameters.  Any number will work, as long as they uniquely identify a block in the configuration file.  To get a list of available blocks, use <em>get()</em> with the name of the block tag. This method will <em>die()</em> if no block can be found matching the specifier passed in.</p>
  </dd>
  <dt>
    $config-&gt;<em>clear()</em>
  </dt>
  <dd>
    <p>Clears out all data in $config.  Call before re-calling $config-&gt;<em>read()</em> for a fresh read.</p>
  </dd>
  <dt>
    $config-&gt;<em>dump()</em>
  </dt>
  <dd>
    <p>This returns a dumped copy of the current configuration. It can be used on a block object as well. Since it returns a string, you should say:     print $config-&gt;dump; Or:     for ($config-&gt;block(VirtualHost =&gt; &apos;10.1.65.1&apos;)) {         print $_-&gt;dump;     } If you want to see any output.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Parsing a Real Apache Config File</h2>
        <div class="sectioncontent">
<p>To parse a real Apache config file (ex. \*(C`httpd.conf\*(C') you'll need to use some non-default options.  Here's a reasonable starting point:</p><p>  $config = Config::ApacheFormat-&gt;new(               root_directive     =&gt; &apos;ServerRoot&apos;,               hash_directives    =&gt; [ &apos;AddHandler&apos; ],               include_directives =&gt; [ &apos;Include&apos;,                                       &apos;AccessConfig&apos;,                                       &apos;ResourceConfig&apos; ],               setenv_vars        =&gt; 1,               fix_booleans       =&gt; 1);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO</h2>
        <div class="sectioncontent">
<p>Some possible ideas for future development:</p><ul>
<li><p>Add a <em>set()</em> method.  (useless?)</p></li><li><p>Add a <em>write()</em> method to create a new configuration file.  (useless?)</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>I know of no bugs in this software.  If you find one, please create a bug report at:</p><p>  http://rt.cpan.org/</p><p>Include the version of the module you're using and a small piece of code that I can run which demonstrates the problem.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2002-2003 Sam Tregar</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl 5 itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    Sam Tregar &lt;sam@tregar.com&gt;
  </dt>
  <dd>
    <p>Original author and maintainer</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    Nathan Wiger &lt;nate@wiger.org&gt;
  </dt>
  <dd>
    <p>Porting of features from Apache::ConfigFile</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Config::ApacheFormat&hellip;</h2>
        <div class="sectioncontent">
<p>Apache::ConfigFile</p><p>Apache::ConfigParser</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Color::Library::Dictionary::X11.3pm.html"><span aria-hidden="true">&larr;</span> Color::Library::Dictionary::X11.3pm: (x11) colors for the x11 window system (rgb.txt)</a></li>
   <li class="next"><a href="Config::File.3pm.html">Config::File.3pm: Parse a simple configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
