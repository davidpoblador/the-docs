<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LiveJournal: A perl implementation of the livejournal protocol</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A perl implementation of the livejournal protocol">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="LiveJournal (3pm) manual">
  <meta name="twitter:description" content="A perl implementation of the livejournal protocol">
  <meta name="twitter:image" content="https://www.carta.tech/images/liblivejournal-perl-LiveJournal-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/LiveJournal.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="LiveJournal (3pm) manual" />
  <meta property="og:description" content="A perl implementation of the livejournal protocol" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liblivejournal-perl-LiveJournal-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">LiveJournal<small> (3pm)</small></h1>
        <p class="lead">A perl implementation of the livejournal protocol</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/LiveJournal.3pm.html">
      <span itemprop="name">LiveJournal: A perl implementation of the livejournal protocol</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liblivejournal-perl/">
      <span itemprop="name">liblivejournal-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/LiveJournal.3pm.html">
      <span itemprop="name">LiveJournal: A perl implementation of the livejournal protocol</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use LiveJournal;

 my %info = (
        user =&gt; &apos;foo&apos;,
        password =&gt; &apos;bar&apos;,
 );

 my $lj = LiveJournal-&gt;new(&#92;%info);

 my $response = $lj-&gt;login();

 print "Logged in successfully&#92;n" if ($response-&gt;{success} eq "OK");

 ...

 my $friend = LiveJournal::Friend-&gt;new();

 my $response = $friend-&gt;check();

 ...

 my $journal = LiveJournal::Journal-&gt;new();

 my $response = $journal-&gt;syncitems();
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module is implements the LiveJournal protocol.  See http://www.livejournal.com/developer/protocol.bml for details.  Data is requested from the server through <em>mode lines</em>.  Many methods return a hash reference containing key/value pairs returned by the server. Descriptions of possible responses can be found at http://www.livejournal.com/developer/modelist.bml</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    new (\s-1INFO\s0)
  </dt>
  <dd>
    <p>This is the constructor for a new LiveJournal object.  \*(C`INFO\*(C' is a hash containing at least <em>username</em> and <em>password</em> (plaintext) or <em>hpassword</em> (\s-1MD5\s0 hash) key/value pairs.  You may also include a <em>\s-1URL\s0</em>, for which the default is http://www.livejournal.com/cgi-bin/log.cgi.  To use a proxy, add a <em>proxy</em> key and value.</p>
  </dd>
  <dt>
    LiveJournal::livejournal-&gt;new([ \s-1FILES\s0 ])
  </dt>
  <dd>
    <p>If you want to use a file in the livejournalrc format to store your data, you can use this method instead.  \*(C`FILES\*(C' is an array reference to the file(s) you want to load.  If you don't specify any, it will use the first one found of ~/.livejournalrc, ~/.livejournal.rc, or /etc/livejournalrc. This will return an object in the LiveJournal class.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BASE CLASS METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    login ([ \s-1INFO\s0 ])
  </dt>
  <dd>
    <p>Log in to the LiveJournal server.  Returns a hash reference.  The server returns whether the password is good or not, the user's name, an optional message to be displayed to the user, and the list of the user's friend groups.  \*(C`INFO\*(C' is an optional hash reference containing the optional keys <strong>getmoods</strong>, <strong>getmenus</strong>, and <strong>getpickws</strong>. <strong>getmoods</strong> should exist and be the number of the highest mood \s-1ID\s0 you have cached/stored on the user's computer. For example, if you logged in last time with and got mood IDs 1, 2, 4, and 5, then send \*(L"5\*(R" as the value of \*(L"getmoods\*(R". The server will return every new mood that has an internal MoodID greater than 5. If you've never downloaded moods before, send \*(L"0\*(R". <strong>getmenus</strong> should exist if you want to get a list/tree of web jump menus to show in your client. <strong>getpickws</strong> should exist if you want to receive that list of picture keywords.</p>
  </dd>
  <dt>
    user ()
  </dt>
  <dd>
    <p>Returns the username</p>
  </dd>
  <dt>
    password ()
  </dt>
  <dd>
    <p>Returns the password or hpassword, whichever is set.</p>
  </dd>
  <dt>
    version ([\s-1VERSION\s0])
  </dt>
  <dd>
    <p>Returns the version string.  You may alter the version string by passing a \*(C`VERSION\*(C'.</p>
  </dd>
  <dt>
    access ([ \s-1INFO\s0 ])
  </dt>
  <dd>
    <p>Sets/returns the journals that the user has the ability to post to.  This method is called automatically by \*(C`parse_login()\*(C'.  It returns a list reference containing each journal.</p>
  </dd>
  <dt>
    friend_group ([ \s-1INFO\s0 ])
  </dt>
  <dd>
    <p>Sets/returns the friend group information.  This method is called automatically by \*(C`parse_login()\*(C'.  It returns a hash of hashes containing <strong>name</strong> and <strong>sortorder</strong> key/value pairs.  We use a hash instead of an array here because the group numbers start from 1 and it seemed more appropriate than having an undef 0 element or requiring adding 1 all the time.</p>
  </dd>
  <dt>
    friend_group_max ([ \s-1MAX\s0 ])
  </dt>
  <dd>
    <p>Sets/returns the maximum friend_group number.  This method is called automatically by \*(C`parse_login()\*(C'.</p>
  </dd>
  <dt>
    menu ([ \s-1INFO\s0 ])
  </dt>
  <dd>
    <p>Sets/returns the menu text and \s-1URL\s0 information.  This method is called automatically by \*(C`parse_login()\*(C'.  You can use the list of lists of hashes it returns as data for menus.</p>
  </dd>
  <dt>
    mood ([ \s-1INFO\s0 ])
  </dt>
  <dd>
    <p>Sets/returns the mood information.  This method is called automatically by \*(C`parse_login()\*(C'.  Returns a list of hashes containing the keys <strong>id</strong> and <strong>name</strong> for each mood.</p>
  </dd>
  <dt>
    mood_count ([ \s-1COUNT\s0 ])
  </dt>
  <dd>
    <p>Sets/returns the number of moods.  This method is called automatically by \*(C`parse_login()\*(C'.</p>
  </dd>
  <dt>
    name ([ \s-1NAME\s0 ])
  </dt>
  <dd>
    <p>Sets/returns the name of the the logged in user.  This method is called automatically by \*(C`parse_login()\*(C'.</p>
  </dd>
  <dt>
    pic_keyword ([ \s-1KEYWORDS\s0 ])
  </dt>
  <dd>
    <p>Sets/returns the picture keywords.  This method is called automatically by \*(C`parse_login()\*(C'.  Returns a reference to a list of the keywords.</p>
  </dd>
  <dt>
    escape (\s-1STRING\s0)
  </dt>
  <dd>
    <p>Use this method to escape strings.  \*(C`STRING\*(C' is any string.  All non-alphanumeric characters and non-whitespace are converted to their %hex values.  Spaces are converted to <strong>+</strong>s.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FRIEND METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    check ()
  </dt>
  <dd>
    <p>Poll the server to see if the friends list has been updated. This request is extremely quick, and is the preferred way for users to see when their friends list is updated.  Returns a hash reference.</p>
  </dd>
  <dt>
    get ([ [ \s-1FRIENDOF\s0 ] [, \s-1GROUPS\s0 ] ])
  </dt>
  <dd>
    <p>Takes two optional arguments.  If \*(C`FRIENDOF\*(C' is set to 1, you will also get back the info from the \*(L"friendof\*(R" mode.  If \*(C`GROUPS\*(C' is set to 1, you will get the info from the \*(L"getfriendgroups\*(R" mode.  This method returns a hash reference which should be passed to <strong></strong><strong>parse()</strong><strong></strong> to be more useful.  <strong>\s-1YOU\s0 \s-1SHOULD\s0 \s-1ALWAYS\s0 \s-1USE\s0 \s-1THIS\s0 \s-1METHOD\s0 \s-1BEFORE\s0 \s-1VIEWING\s0 \s-1AND\s0 \s-1AFTER\s0</strong> \s-1MODIFYING\s0 \s-1YOUR\s0 \s-1FRIENDS\s0 \s-1LIST\s0 \s-1TO\s0 \s-1AVOID\s0 \s-1INCONSISTENCIES\s0.</p>
  </dd>
  <dt>
    parse (\s-1FRIENDS\s0)
  </dt>
  <dd>
    <p>Takes one argument: the hash reference returned from <strong></strong><strong>get()</strong><strong></strong>. Returns a hash of lists of hashes containing the info (user, name, fg, bg, etc) for each friend such as: 'friend' =&gt;</p>
<pre>
    [
       {
        'fg'        =&gt; '#000000',
        'bg'        =&gt; '#FFFFFF',
        'groupmask' =&gt; '3',
        'user'      =&gt; 'SomeUser',
        'name'      =&gt; 'Some X. Name'
       }
    ]
</pre>
<p>You should call <strong></strong><strong>parse()</strong><strong></strong> anytime you call <strong></strong><strong>get()</strong><strong></strong> to keep your friend count up to date.</p>
  </dd>
  <dt>
    edit (\s-1FRIENDS\s0)
  </dt>
  <dd>
    <p>This method is used to add and edit friends to your friends list.  It takes a hash of hash references structure which has the <strong>username</strong> as the first level of keys.  The second level contains optional <strong>fg</strong> and <strong>bg</strong> colors in #RRGGBB format. 'newfriend' =&gt;</p>
<pre>
   {
    'fg' =&gt; '#000000',
    'bg' =&gt; '#FFFFFF',
   }
</pre>
<p><strong>newfriend</strong> is the name of the new user.  <strong>number</strong> should be the sum of \*(C`numfriends() + n\*(C' where n is incremented for each friend you are adding.</p>
  </dd>
  <dt>
    add (\s-1FRIEND\s0, [ \s-1FG\s0 [, \s-1BG\s0 ] ])
  </dt>
  <dd>
    <p>Use this method to add a user from your friends list.  \*(C`FRIEND\*(C' is a username.  \*(C`FG\*(C' and \*(C`BG\*(C' are foreground and background values in #RRGGBB format.</p>
  </dd>
  <dt>
    remove (\s-1USERS\s0)
  </dt>
  <dd>
    <p>Use this method to remove users from your friends list.  Pass it an array reference containing usernames.  Returns a hash reference.</p>
  </dd>
  <dt>
    friendof ()
  </dt>
  <dd>
    <p>This method returns a hash reference of the users that list you as a friend.  This hash reference can be passed to <strong></strong><strong>parse()</strong><strong></strong>.</p>
  </dd>
  <dt>
    lastupdate ([ \s-1LAST\s0 ])
  </dt>
  <dd>
    <p>Returns or sets the last time <strong>check</strong> was used.  <strong></strong><strong>check()</strong><strong></strong> sets this value so you don't have to.</p>
  </dd>
  <dt>
    numfriends ([ \s-1NUMBER\s0 ])
  </dt>
  <dd>
    <p>This method sets and returns the number of friends you have.  It is automatically called from <strong></strong><strong>parse()</strong><strong></strong> so you shouldn't have to worry about setting it manually.</p>
  </dd>
  <dt>
    friends ()
  </dt>
  <dd>
    <p>Sets and returns your friends list.  This method is called by \*(C`parse()\*(C' automatically to propagate the hash.</p>
  </dd>
  <dt>
    getgroups ()
  </dt>
  <dd>
    <p>This method returns a hash reference containing information about your friend groups</p>
  </dd>
  <dt>
    editgroups (\s-1INFO\s0)
  </dt>
  <dd>
    <p>Use this method to create or edit a friend group.  You can modify the name, sort order, and public attributes of the group by passing a hashref containing the keys called <strong>name</strong>, <strong>sort</strong>, or <strong>public</strong> and respective new values.  You can also add a friend to a group or groups by passing their username as a key and the new groupmask as a value.</p>
  </dd>
  <dt>
    deletegroups (\s-1NUMBERS\s0)
  </dt>
  <dd>
    <p>This method deletes a friend group.  Pass it an array reference containing the numbers of the groups to delete.</p>
  </dd>
  <dt>
    friends_by_group ()
  </dt>
  <dd>
    <p>Returns a hash of list references containing users and the groups they are members of.</p>
  </dd>
  <dt>
    add_friend_to_group (\s-1USER\s0, \s-1GROUP\s0)
  </dt>
  <dd>
    <p>Use this method to add a friend to a user group.  \*(C`USER\*(C' is the username of the person and \*(C`GROUP\*(C' is the group number.</p>
  </dd>
  <dt>
    remove_friend_from_group (\s-1USER\s0, \s-1GROUP\s0)
  </dt>
  <dd>
    <p>Use this method to remove a friend from a user group.  \*(C`USER\*(C' is the username of the person and \*(C`GROUP\*(C' is the group number.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">JOURNAL METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    get (\s-1INFO\s0)
  </dt>
  <dd>
    <p>Use this method to download parts of a user's journal.  \*(C`INFO\*(C' is a hash reference containing at least a key called <strong>selecttype</strong> and a value of either <strong>syncitems</strong>, <strong>day</strong>, <strong>lastn</strong>, or <strong>one</strong>. <strong>syncitems</strong> will use the \*(C`lastcync()\*(C' method by default, otherwise pass it a date in the <em>yyyy-mm-dd hh::mm::ss</em> format. If you use <strong>day</strong>, you may provide <strong>year</strong>, <strong>month</strong>, and <strong>day</strong> keys to specify which day.  Default is today. The <strong>lastn</strong> value requires a <strong>howmany</strong> key which says how many of the most recent items to download.  Maximum is 50.  Default is 20. If you want a particular entry, you should use the <strong>one</strong> value and a complimentary <strong>itemid</strong> key containing the id of the item you want to grab. For further detail, see http://www.livejournal.com/developer/modeinfo.bml?getevents</p>
  </dd>
  <dt>
    post (\s-1INFO\s0)
  </dt>
  <dd>
    <p>This method is used to post a journal entry.  \*(C`INFO\*(C' is a hash reference containing at least an <strong>event</strong> key with a value of the post content.  The date keys are created for you. For further detail, see http://www.livejournal.com/developer/modeinfo.bml?postevent</p>
  </dd>
  <dt>
    edit (\s-1INFO\s0)
  </dt>
  <dd>
    <p>Used to edit user's past journal entry.  \*(C`INFO\*(C' is a a hash reference containing at least the <em>itemid</em> and <em>event</em> being submitted.  Other optional values are documented at http://www.livejournal.com/developer/modeinfo.bml?editevent</p>
  </dd>
  <dt>
    remove (\s-1ITEMID\s0)
  </dt>
  <dd>
    <p>Used to delete a past journal entry.  \*(C`ITEMID\*(C' is a scalar containing the unique item id to delete.</p>
  </dd>
  <dt>
    syncitems ()
  </dt>
  <dd>
    <p>Returns a hash reference containing items (journal entries, to-do items, comments) that have been created or updated on LiveJournal since you last downloaded them.</p>
  </dd>
  <dt>
    lastsync ([ \s-1LAST\s0 ])
  </dt>
  <dd>
    <p>Returns or sets the last time <strong></strong><strong>syncitems()</strong><strong></strong> was used.  <strong></strong><strong>syncitems()</strong><strong></strong> sets this value so you don't have to.</p>
  </dd>
  <dt>
    getdaycounts ()
  </dt>
  <dd>
    <p>This mode retrieves the number of journal entries per day. Useful for populating calendar widgets in \s-1GUI\s0 clients.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Frank Sheiness &lt;archon@forbidden.dough.net&gt; http://feeding.frenzy.com/~rainking/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREDITS</h2>
        <div class="sectioncontent">
<ul>
<li><p>Brad 'bradfitz' Fitz &lt;bradfitz@livejournal.com&gt; for unconfusing me</p></li><li><p>Joe 'pinman' Wreschnig &lt;piman@sacredchao.net&gt; for his idea providing ventures into Perl-LiveJournal land</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">URL</h2>
        <div class="sectioncontent">
<ul>
<li><p>http://forbidden.dough.net/~archon/lj/</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO LiveJournal&hellip;</h2>
        <div class="sectioncontent">
<ul>
<li><p><em>perl</em>\|(1).</p></li><li><p>http://www.livejournal.com/developer/</p></li>
</ul>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="List::UtilsBy.3pm.html"><span aria-hidden="true">&larr;</span> List::UtilsBy.3pm: Higher-order list utility functions</a></li>
   <li class="next"><a href="Locale::Currency::Format.3pm.html">Locale::Currency::Format.3pm: Perl functions for formatting monetary values <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
