<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Algorithm::Merge: Three-way merge and diff</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Three-way merge and diff">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Algorithm::Merge (3pm) manual">
  <meta name="twitter:description" content="Three-way merge and diff">
  <meta name="twitter:image" content="https://www.carta.tech/images/libalgorithm-merge-perl-Algorithm::Merge-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Algorithm::Merge.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Algorithm::Merge (3pm) manual" />
  <meta property="og:description" content="Three-way merge and diff" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libalgorithm-merge-perl-Algorithm::Merge-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Algorithm::Merge<small> (3pm)</small></h1>
        <p class="lead">Three-way merge and diff</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Algorithm::Merge.3pm.html">
      <span itemprop="name">Algorithm::Merge: Three-way merge and diff</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libalgorithm-merge-perl/">
      <span itemprop="name">libalgorithm-merge-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Algorithm::Merge.3pm.html">
      <span itemprop="name">Algorithm::Merge: Three-way merge and diff</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use Algorithm::Merge qw(merge diff3 traverse_sequences3);

 @merged = merge(&#92;@ancestor, &#92;@a, &#92;@b, {
               CONFLICT =&gt; sub { }
           });

 @merged = merge(&#92;@ancestor, &#92;@a, &#92;@b, {
               CONFLICT =&gt; sub { }
           }, $key_generation_function);

 $merged = merge(&#92;@ancestor, &#92;@a, &#92;@b, {
               CONFLICT =&gt; sub { }
           });

 $merged = merge(&#92;@ancestor, &#92;@a, &#92;@b, {
               CONFLICT =&gt; sub { }
           }, $key_generation_function);

 @diff   = diff3(&#92;@ancestor, &#92;@a, &#92;@b);

 @diff   = diff3(&#92;@ancestor, &#92;@a, &#92;@b, $key_generation_function);

 $diff   = diff3(&#92;@ancestor, &#92;@a, &#92;@b);

 $diff   = diff3(&#92;@ancestor, &#92;@a, &#92;@b, $key_generation_function);

 @trav   = traverse_sequences3(&#92;@ancestor, &#92;@a, &#92;@b, {
               # callbacks
           });

 @trav   = traverse_sequences3(&#92;@ancestor, &#92;@a, &#92;@b, {
               # callbacks
           }, $key_generation_function);

 $trav   = traverse_sequences3(&#92;@ancestor, &#92;@a, &#92;@b, {
               # callbacks
           });

 $trav   = traverse_sequences3(&#92;@ancestor, &#92;@a, &#92;@b, {
               # callbacks
           }, $key_generation_function);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>This module complements Algorithm::Diff by providing three-way merge and diff functions.</p><p>In this documentation, the first list to \*(C`diff3\*(C', \*(C`merge\*(C', and \*(C`traverse_sequences3\*(C' is called the `original' list.  The second list is the `left' list.  The third list is the `right' list.</p><p>The optional key generation arguments are the same as in Algorithm::Diff.  See Algorithm::Diff for more information.</p><h3>diff3</h3>
<p>Given references to three lists of items, \*(C`diff3\*(C' performs a three-way difference.</p><p>This function returns an array of operations describing how the left and right lists differ from the original list.  In scalar context, this function returns a reference to such an array.</p><p>Perhaps an example would be useful.</p><p>Given the following three lists,</p><p>  original: a b c   e f   h i   k       left: a b   d e f g   i j k      right: a b c d e     h i j k</p><p>     merge: a b   d e   g   i j k</p><p>we have the following result from diff3:</p><p> [ &apos;u&apos;, &apos;a&apos;,   &apos;a&apos;,   &apos;a&apos; ],  [ &apos;u&apos;, &apos;b&apos;,   &apos;b&apos;,   &apos;b&apos; ],  [ &apos;l&apos;, &apos;c&apos;,   undef, &apos;c&apos; ],  [ &apos;o&apos;, undef, &apos;d&apos;,   &apos;d&apos; ],  [ &apos;u&apos;, &apos;e&apos;,   &apos;e&apos;,   &apos;e&apos; ],  [ &apos;r&apos;, &apos;f&apos;,   &apos;f&apos;,   undef ],  [ &apos;o&apos;, &apos;h&apos;,   &apos;g&apos;,   &apos;h&apos; ],  [ &apos;u&apos;, &apos;i&apos;,   &apos;i&apos;,   &apos;i&apos; ],  [ &apos;o&apos;, undef, &apos;j&apos;,   &apos;j&apos; ],  [ &apos;u&apos;, &apos;k&apos;,   &apos;k&apos;,   &apos;k&apos; ]</p><p>The first element in each row is the array with the difference:</p><p> c - conflict (no two are the same)  l - left is different  o - original is different  r - right is different  u - unchanged</p><p>The next three elements are the lists from the original, left, and right arrays respectively that the row refers to (in the synopsis, these are @ancestor, @a, and @b, respectively).</p>
<h3>merge</h3>
<p>Given references to three lists of items, \*(C`merge\*(C' performs a three-way merge.  The \*(C`merge\*(C' function uses the \*(C`diff3\*(C' function to do most of the work.</p><p>The only callback currently used is \*(C`CONFLICT\*(C' which should be a reference to a subroutine that accepts two array references.  The first array reference is to a list of elements from the left list. The second array reference is to a list of elements from the right list. This callback should return a list of elements to place in the merged list in place of the conflict.</p><p>The default \*(C`CONFLICT\*(C' callback returns the following:</p><p> q{&lt;!-- ------ START CONFLICT ------ --&gt;},  (@left),  q{&lt;!-- ---------------------------- --&gt;},  (@right),  q{&lt;!-- ------  END  CONFLICT ------ --&gt;},</p>
<h3>traverse_sequences3</h3>
<p>This is the workhorse function that goes through the three sequences and calls the callback functions.</p><p>The following callbacks are supported.</p>
<dl class='dl-vertical'>
  <dt>
    \s-1NO_CHANGE\s0
  </dt>
  <dd>
    <p>This is called if all three sequences have the same element at the current position.  The arguments are the current positions within each sequence, the first argument being the current position within the first sequence.</p>
  </dd>
  <dt>
    A_DIFF
  </dt>
  <dd>
    <p>This is called if the first sequence is different than the other two sequences at the current position. This callback will be called with one, two, or three arguments. If one argument, then only the element at the given position from the first sequence is not in either of the other two sequences. If two arguments, then there is no element in the first sequence that corresponds to the elements at the given positions in the second and third sequences. If three arguments, then the element at the given position in the first sequence is different than the corresponding element in the other two sequences, but the other two sequences have corresponding elements.</p>
  </dd>
  <dt>
    B_DIFF
  </dt>
  <dd>
    <p>This is called if the second sequence is different than the other two sequences at the current position. This callback will be called with one, two, or three arguments. If one argument, then only the element at the given position from the second sequence is not in either of the other two sequences. If two arguments, then there is no element in the second sequence that corresponds to the elements at the given positions in the first and third sequences. If three arguments, then the element at the given position in the second sequence is different than the corresponding element in the other two sequences, but the other two sequences have corresponding elements.</p>
  </dd>
  <dt>
    C_DIFF
  </dt>
  <dd>
    <p>This is called if the third sequence is different than the other two sequences at the current position. This callback will be called with one, two, or three arguments. If one argument, then only the element at the given position from the third sequence is not in either of the other two sequences. If two arguments, then there is no element in the third sequence that corresponds to the elements at the given positions in the first and second sequences. If three arguments, then the element at the given position in the third sequence is different than the corresponding element in the other two sequences, but the other two sequences have corresponding elements.</p>
  </dd>
  <dt>
    \s-1CONFLICT\s0
  </dt>
  <dd>
    <p>This is called if all three sequences have different elements at the current position.  The three arguments are the current positions within each sequence.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Most assuredly there are bugs.  If a pattern similar to the above example does not work, send it to &lt;jsmith@cpan.org&gt; or report it on &lt;http://rt.cpan.org/&gt;, the \s-1CPAN\s0 bug tracker.</p><p>Algorithm::Diff's implementation of \*(C`traverse_sequences\*(C' may not be symmetric with respect to the input sequences if the second and third sequence are of different lengths. Because of this, \*(C`traverse_sequences3\*(C' will calculate the diffs of the second and third sequences as passed and swapped.  If the differences are not the same, it will issue an `Algorithm::Diff::diff is not symmetric for second and third sequences...' warning.  It will try to handle this, but there may be some cases where it can't.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Algorithm::Merge&hellip;</h2>
        <div class="sectioncontent">
<p>Algorithm::Diff.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>James G. Smith, &lt;jsmith@cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2003, 2007  Texas A&M University.  All Rights Reserved.</p><p>This module is free software; you may redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Algorithm::DiffOld.3pm.html"><span aria-hidden="true">&larr;</span> Algorithm::DiffOld.3pm: Compute `intelligent' differences between two files / lists but use the old (=0.59) interface.</a></li>
   <li class="next"><a href="Algorithm::Munkres.3pm.html">Algorithm::Munkres.3pm:  <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
