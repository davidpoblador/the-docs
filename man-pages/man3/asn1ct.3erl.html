<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>asn1ct: Asn.1 compiler and compile-time support functions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Asn.1 compiler and compile-time support functions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="asn1ct (3erl) manual">
  <meta name="twitter:description" content="Asn.1 compiler and compile-time support functions">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-asn1ct-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/asn1ct.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="asn1ct (3erl) manual" />
  <meta property="og:description" content="Asn.1 compiler and compile-time support functions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-asn1ct-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">asn1ct<small> (3erl)</small></h1>
        <p class="lead">Asn.1 compiler and compile-time support functions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/asn1ct.3erl.html">
      <span itemprop="name">asn1ct: Asn.1 compiler and compile-time support functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/asn1ct.3erl.html">
      <span itemprop="name">asn1ct: Asn.1 compiler and compile-time support functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The ASN.1 compiler takes an ASN.1 module as input and generates a corresponding Erlang module which can encode and decode the data-types specified. Alternatively the compiler takes a specification module (se below) specifying all input modules and generates one module with encode/decode functions. There are also some generic functions which can be used in during development of applications which handles ASN.1 data (encoded as BER or PER).</p><p><strong></strong> Note:</p><p>By default in OTP 17, the representation of the BIT STRING and OCTET STRING types as Erlang terms have changed. BIT STRING values are now Erlang bitstrings and OCTET STRING values are binaries. Also, an undecoded open type will now be wrapped in a <em>asn1_OPENTYPE</em> tuple. For details see <strong>BIT STRING</strong>, <strong>OCTET STRING</strong>, and <strong>ASN.1 Information Objects</strong> in User's Guide.</p><p>To revert to the old representation of the types, use the <em>legacy_erlang_types</em> option.</p><p><strong></strong> Note:</p><p>In R16, the options have been simplified. The back-end is chosen using one of the options <em>ber</em>, <em>per</em>, or <em>uper</em>. The options <em>optimize</em>, <em>nif</em>, and <em>driver</em> options are no longer necessary (and the ASN.1 compiler will print a warning if they are used). The options <em>ber_bin</em>, <em>per_bin</em>, and <em>uper_bin</em> options will still work, but will print a warning.</p><p>Another change in R16 is that the generated <em>encode/2</em> function always returns a binary. The <em>encode/2</em> function for the BER back-end used to return an iolist.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> compile(Asn1module) -&gt; ok | {error, Reason}</p><p><strong></strong> compile(Asn1module, Options) -&gt; ok | {error, Reason}</p><p>Types:</p><p>Asn1module = atom() | string()</p><p>Options = [Option| OldOption]</p><p>Option = ber | per | uper | der | compact_bit_string | legacy_bit_string | legacy_erlang_types | noobj | {n2n, EnumTypeName} |{outdir, Dir} | {i, IncludeDir} | asn1config | undec_rest | no_ok_wrapper | {macro_name_prefix, Prefix} | {record_name_prefix, Prefix} | verbose | warnings_as_errors</p><p>OldOption = ber | per</p><p>Reason = term()</p><p>Prefix = string()</p><p>Compiles the ASN.1 module <em>Asn1module</em> and generates an Erlang module <em>Asn1module.erl</em> with encode and decode functions for the types defined in <em>Asn1module</em>. For each ASN.1 value defined in the module an Erlang function which returns the value in Erlang representation is generated.</p><p>If <em>Asn1module</em> is a filename without extension first <em>".asn1"</em> is assumed, then <em>".asn"</em> and finally <em>".py"</em> (to be compatible with the old ASN.1 compiler). Of course <em>Asn1module</em> can be a full pathname (relative or absolute) including filename with (or without) extension.</p><p>If one wishes to compile a set of Asn1 modules into one Erlang file with encode/decode functions one has to list all involved files in a configuration file. This configuration file must have a double extension ".set.asn", (".asn" can alternatively be ".asn1" or ".py"). The input files' names must be listed, within quotation marks (""), one at each row in the file. If the input files are <em>File1.asn</em>, <em>File2.asn</em> and <em>File3.asn</em> the configuration file shall look like:</p>
<pre>
File1.asn
File2.asn
File3.asn
</pre>
<p>The output files will in this case get their names from the configuration file. If the configuration file has the name <em>SetOfFiles.set.asn</em> the name of the output files will be <em>SetOfFiles.hrl, SetOfFiles.erl and SetOfFiles.asn1db</em>.</p><p>Sometimes in a system of ASN.1 modules there are different default tag modes, e.g. AUTOMATIC, IMPLICIT or EXPLICIT. The multi file compilation resolves the default tagging as if the modules were compiled separately.</p><p>Another unwanted effect that may occur in multi file compilation is name collisions. The compiler solves this problem in two ways: If the definitions are identical then the output module keeps only one definition with the original name. But if definitions only have same name and differs in the definition, then they will be renamed. The new names will be the definition name and the original module name concatenated.</p><p>If any name collision have occurred the compiler reports a "NOTICE: ..." message that tells if a definition was renamed, and the new name that must be used to encode/decode data.</p><p><em>Options</em> is a list with options specific for the asn1 compiler and options that are applied to the Erlang compiler. The latter are those that not is recognized as asn1 specific. Available options are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>ber | per | uper</em>: The encoding rule to be used. The supported encoding rules are BER (Basic Encoding Rules), PER aligned (Packed Encoding Rules) and PER unaligned. If the encoding rule option is omitted <em>ber</em> is the default.</p><p>The generated Erlang module always gets the same name as the ASN.1 module and as a consequence of this only one encoding rule per ASN.1 module can be used at runtime.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>der</em>: By this option the Distinguished Encoding Rules (DER) is chosen. DER is regarded as a specialized variant of the BER encoding rule, therefore the <em>der</em> option only makes sense together with the <em>ber</em> option. This option sometimes adds sorting and value checks when encoding, which implies a slower encoding. The decoding routines are the same as for <em>ber</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>compact_bit_string</em>: The BIT STRING type will be decoded to the "compact notation". <em>This option is not recommended for new code.</em></p><p>For details see <strong> BIT STRING type section in the Users Guide </strong>.</p><p>This option implies the <em>legacy_erlang_types</em> option.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>legacy_bit_string</em>: The BIT STRING type will be decoded to the legacy format, i.e. a list of zeroes and ones. <em>This option is not recommended for new code.</em></p><p>For details see <strong> BIT STRING type section in the Users Guide </strong>.</p><p>This option implies the <em>legacy_erlang_types</em> option.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>legacy_erlang_types</em>: Use the same Erlang types to represent BIT STRING and OCTET STRING as in R16. For details see <strong>BIT STRING</strong> and <strong>OCTET STRING</strong> in User's Guide.</p><p><em>This option is not recommended for new code.</em></p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{n2n, EnumTypeName}</em>: Tells the compiler to generate functions for conversion between names (as atoms) and numbers and vice versa for the EnumTypeName specified. There can be multiple occurrences of this option in order to specify several type names. The type names must be declared as ENUMERATIONS in the ASN.1 spec. If the EnumTypeName does not exist in the ASN.1 spec the compilation will stop with an error code. The generated conversion functions are named <em>name2num_EnumTypeName/1</em> and <em>num2name_EnumTypeName/1</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>noobj</em>: Do not compile (i.e do not produce object code) the generated <em>.erl</em> file. If this option is omitted the generated Erlang module will be compiled.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{i, IncludeDir}</em>: Adds <em>IncludeDir</em> to the search-path for <em>.asn1db</em> and asn1 source files. The compiler tries to open a <em>.asn1db</em> file when a module imports definitions from another ASN.1 module. If no <em>.asn1db</em> file is found the asn1 source file is parsed. Several <em>{i, IncludeDir}</em> can be given.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{outdir, Dir}</em>: Specifies the directory <em>Dir</em> where all generated files shall be placed. If omitted the files are placed in the current directory.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>asn1config</em>: When one of the specialized decodes, exclusive or selective decode, is wanted one has to give instructions in a configuration file. The option <em>asn1config</em> enables specialized decodes and takes the configuration file, which has the same name as the ASN.1 spec but with extension <em>.asn1config</em>, in concern.</p><p>The instructions for exclusive decode must follow the <strong>instruction and grammar in the User's Guide</strong>.</p><p>You can also find the instructions for selective decode in the <strong>User's Guide</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>undec_rest</em>: A buffer that holds a message, being decoded may also have some following bytes. Now it is possible to get those following bytes returned together with the decoded value. If an asn1 spec is compiled with this option a tuple <em>{ok, Value, Rest}</em> is returned. <em>Rest</em> may be a list or a binary. Earlier versions of the compiler ignored those following bytes.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>no_ok_wrapper</em>: If this option is given, the generated <em>encode/2</em> and <em>decode/2</em> functions will not wrap a successful return value in an <em>{ok,...}</em> tuple. If any error occurs, there will be an exception.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{macro_name_prefix, Prefix}</em>: All macro names generated by the compiler are prefixed with <em>Prefix</em>. This is useful when multiple protocols that contains macros with identical names are included in a single module.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{record_name_prefix, Prefix}</em>: All record names generated by the compiler are prefixed with <em>Prefix</em>. This is useful when multiple protocols that contains records with identical names are included in a single module.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>verbose</em>: Causes more verbose information from the compiler describing what it is doing.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>warnings_as_errors</em>: Causes warnings to be treated as errors.</p>
  </dd>

</dl>
<p>Any additional option that is applied will be passed to the final step when the generated .erl file is compiled.</p><p>The compiler generates the following files:</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>Asn1module.hrl</em> (if any SET or SEQUENCE is defined)</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>Asn1module.erl</em> the Erlang module with encode, decode and value functions.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>Asn1module.asn1db</em> intermediate format used by the compiler when modules IMPORTS definitions from each other.</p>
  </dd>

</dl>
<p><strong></strong> encode(Module, Type, Value)-&gt; {ok, Bytes} | {error, Reason}</p><p>Types:</p><p>Module = Type = atom()</p><p>Value = term()</p><p>Bytes = binary()</p><p>Reason = term()</p><p>Encodes <em>Value</em> of <em>Type</em> defined in the ASN.1 module <em>Module</em>. To get as fast execution as possible the encode function only performs rudimentary tests that the input <em>Value</em> is a correct instance of <em>Type</em>. The length of strings is for example not always checked. Returns <em>{ok, Bytes}</em> if successful or <em>{error, Reason}</em> if an error occurred.</p><p>This function is deprecated. Use <em>Module:encode(Type, Value)</em> instead.</p><p><strong></strong> decode(Module, Type, Bytes) -&gt; {ok, Value} | {error, Reason}</p><p>Types:</p><p>Module = Type = atom()</p><p>Value = Reason = term()</p><p>Bytes = binary()</p><p>Decodes <em>Type</em> from <em>Module</em> from the binary <em>Bytes</em>. Returns <em>{ok, Value}</em> if successful.</p><p>This function is deprecated. Use <em>Module:decode(Type, Bytes)</em> instead.</p><p><strong></strong> value(Module, Type) -&gt; {ok, Value} | {error, Reason}</p><p>Types:</p><p>Module = Type = atom()</p><p>Value = term()</p><p>Reason = term()</p><p>Returns an Erlang term which is an example of a valid Erlang representation of a value of the ASN.1 type <em>Type</em>. The value is a random value and subsequent calls to this function will for most types return different values.</p><p><strong></strong> test(Module) -&gt; ok | {error, Reason}</p><p><strong></strong> test(Module, Type | Options) -&gt; ok | {error, Reason}</p><p><strong></strong> test(Module, Type, Value | Options) -&gt; ok | {error, Reason}</p><p>Types:</p><p>Module = Type = atom()</p><p>Value = term()</p><p>Options = [{i, IncludeDir}]</p><p>Reason = term()</p><p>Performs a test of encode and decode of types in <em>Module</em>. The generated functions are called by this function. This function is useful during test to secure that the generated encode and decode functions and the general runtime support work as expected.</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>test/1</em> iterates over all types in <em>Module</em>.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>test/2</em> tests type <em>Type</em> with a random value.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>test/3</em> tests type <em>Type</em> with <em>Value</em>.</p>
  </dd>

</dl>
<p>Schematically the following happens for each type in the module:</p>
<pre>
{ok, Value} = asn1ct:value(Module, Type),
{ok, Bytes} = asn1ct:encode(Module, Type, Value),
{ok, Value} = asn1ct:decode(Module, Type, Bytes).
</pre>
<p>The <em>test</em> functions utilizes the <em>*.asn1db</em> files for all included modules. If they are located in a different directory than the current working directory, use the include option to add paths. This is only needed when automatically generating values. For static values using <em>Value</em> no options are needed.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="array.3erl.html"><span aria-hidden="true">&larr;</span> array.3erl: Functional, extendible arrays.</a></li>
   <li class="next"><a href="asn1rt.3erl.html">asn1rt.3erl: Asn.1 runtime support functions <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
