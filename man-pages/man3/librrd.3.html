<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>librrd: Rrd library functions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Rrd library functions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="librrd (3) manual">
  <meta name="twitter:description" content="Rrd library functions">
  <meta name="twitter:image" content="https://www.carta.tech/images/rrdtool-librrd-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/librrd.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="librrd (3) manual" />
  <meta property="og:description" content="Rrd library functions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/rrdtool-librrd-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">librrd<small> (3)</small></h1>
        <p class="lead">Rrd library functions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/librrd.3.html">
      <span itemprop="name">librrd: Rrd library functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/rrdtool/">
      <span itemprop="name">rrdtool</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/librrd.3.html">
      <span itemprop="name">librrd: Rrd library functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>librrd</strong> contains most of the functionality in <strong>RRDTool</strong>.  The command line utilities and language bindings are often just wrappers around the code contained in <strong>librrd</strong>.</p><p>This manual page documents the <strong>librrd</strong> \s-1API\s0.</p><p><strong>\s-1NOTE:\s0</strong> This document is a work in progress, and should be considered incomplete as long as this warning persists.  For more information about the <strong>librrd</strong> functions, always consult the source code.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CORE FUNCTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>rrd_dump_cb_r(char *filename, int opt_header, rrd_output_callback_t cb, void *user)</strong>
  </dt>
  <dd>
    <p>In some situations it is necessary to get the output of \*(C`rrd_dump\*(C' without writing it to a file or the standard output. In such cases an application can ask <strong>rrd_dump_cb_r</strong> to call an user-defined function each time there is output to be stored somewhere. This can be used, to e.g. directly feed an \s-1XML\s0 parser with the dumped output or transfer the resulting string in memory. The arguments for <strong>rrd_dump_cb_r</strong> are the same as for <strong>rrd_dump_opt_r</strong> except that the output filename parameter is replaced by the user-defined callback function and an additional parameter for the callback function that is passed untouched, i.e. to store information about the callback state needed for the user-defined callback to function properly. Recent versions of <strong>rrd_dump_opt_r</strong> internally use this callback mechanism to write their output to the file provided by the user.</p>
<pre>
    size_t rrd_dump_opt_cb_fileout(
        const void *data,
        size_t len,
        void *user)
    {
        return fwrite(data, 1, len, (FILE *)user);
    }
</pre>
<p>The associated call for <strong>rrd_dump_cb_r</strong> looks like     res = rrd_dump_cb_r(filename, opt_header,         rrd_dump_opt_cb_fileout, (void *)out_file); where the last parameter specifies the file handle <strong>rrd_dump_opt_cb_fileout</strong> should write to. There's no specific condition for the callback to detect when it is called for the first time, nor for the last time. If you require this for initialization and cleanup you should do those tasks before and after calling <strong>rrd_dump_cr_r</strong> respectively.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UTILITY FUNCTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong></strong><strong>rrd_random()</strong><strong></strong>
  </dt>
  <dd>
    <p>Generates random numbers just like <em>random()</em>.  This further ensures that the random number generator is seeded exactly once per process.</p>
  </dd>
  <dt>
    <strong>rrd_add_ptr(void ***dest, size_t *dest_size, void *src)</strong>
  </dt>
  <dd>
    <p>Dynamically resize the array pointed to by \*(C`dest\*(C'.  \*(C`dest_size\*(C' is a pointer to the current size of \*(C`dest\*(C'.  Upon successful <em>realloc()</em>, the \*(C`dest_size\*(C' is incremented by 1 and the \*(C`src\*(C' pointer is stored at the end of the new \*(C`dest\*(C'.  Returns 1 on success, 0 on failure.     type **arr = NULL;     type *elem = "whatever";     size_t arr_size = 0;     if (!rrd_add_ptr(&arr, &arr_size, elem))         handle_failure();</p>
  </dd>
  <dt>
    <strong>rrd_add_strdup(char ***dest, size_t *dest_size, char *src)</strong>
  </dt>
  <dd>
    <p>Like \*(C`rrd_add_ptr\*(C', except adds a \*(C`strdup\*(C' of the source string.     char **arr = NULL;     size_t arr_size = NULL;     char *str  = "example text";     if (!rrd_add_strdup(&arr, &arr_size, str))         handle_failure();</p>
  </dd>
  <dt>
    <strong>rrd_free_ptrs(void ***src, size_t *cnt)</strong>
  </dt>
  <dd>
    <p>Free an array of pointers allocated by \*(C`rrd_add_ptr\*(C' or \*(C`rrd_add_strdup\*(C'.  Also frees the array pointer itself.  On return, the source pointer will be \s-1NULL\s0 and the count will be zero.     /* created as above */     rrd_free_ptrs(&arr, &arr_size);     /* here, arr == NULL && arr_size == 0 */</p>
  </dd>
  <dt>
    <strong>rrd_mkdir_p(const char *pathname, mode_t mode)</strong>
  </dt>
  <dd>
    <p>Create the directory named \*(C`pathname\*(C' including all of its parent directories (similar to \*(C`mkdir -p\*(C' on the command line - see <em>mkdir</em>\|(1) for more information). The argument \*(C`mode\*(C' specifies the permissions to use. It is modified by the process's \*(C`umask\*(C'. See <em>mkdir</em>\|(2) for more details. The function returns 0 on success, a negative value else. In case of an error, \*(C`errno\*(C' is set accordingly. Aside from the errors documented in <em>mkdir</em>\|(2), the function may fail with the following errors:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>\s-1EINVAL\s0</strong>
  </dt>
  <dd>
    <p>\*(C`pathname\*(C' is \*(C`NULL\*(C' or the empty string.</p>
  </dd>
  <dt>
    <strong>\s-1ENOMEM\s0</strong>
  </dt>
  <dd>
    <p>Insufficient memory was available.</p>
  </dd>
  <dt>
    <strong>any error returned by </strong><strong>stat</strong><strong>\|(2)</strong>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>In contrast to <em>mkdir</em>\|(2), the function does <strong>not</strong> fail if \*(C`pathname\*(C' already exists and is a directory.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>\s-1RRD\s0 Contributors &lt;rrd-developers@lists.oetiker.ch&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="librasqal.3.html"><span aria-hidden="true">&larr;</span> librasqal.3: Rasqal rdf query library</a></li>
   <li class="next"><a href="librsync.3.html">librsync.3: Library for delta compression of streams <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
