<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PQregisterResult: Registers sub-classes, composites and user-defined types found within a pgresult.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Registers sub-classes, composites and user-defined types found within a pgresult.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="PQregisterResult (3) manual">
  <meta name="twitter:description" content="Registers sub-classes, composites and user-defined types found within a pgresult.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libpqtypes-dev-PQregisterResult-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/PQregisterResult.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="PQregisterResult (3) manual" />
  <meta property="og:description" content="Registers sub-classes, composites and user-defined types found within a pgresult." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libpqtypes-dev-PQregisterResult-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">PQregisterResult<small> (3)</small></h1>
        <p class="lead">Registers sub-classes, composites and user-defined types found within a pgresult.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/PQregisterResult.3.html">
      <span itemprop="name">PQregisterResult: Registers sub-classes, composites and user-defined types found within a pgresult.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libpqtypes-dev/">
      <span itemprop="name">libpqtypes-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/PQregisterResult.3.html">
      <span itemprop="name">PQregisterResult: Registers sub-classes, composites and user-defined types found within a pgresult.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;libpqtypes.h&gt;</strong></p><p>int PQregisterResult(PGconn *<em>conn</em>, int <em>which</em>, PGregisterType *<em>types</em>,</p>
<pre>
                    int <em>count</em>, PGresult *<em>res</em>);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <em>PQregisterResult</em>() function registers the types found within a given PGresult, thus this function makes no calls to a PostgreSQL server since the result data is already available.</p><p>The <em>which</em> argument can be PQT_COMPOSITE or PQT_USERDEFINED, but not PQT_SUBCLASS.  The only reason being sub-classes don't talk to the server so they have no result set.</p><p>The <em>types</em> argument is an array containing <em>count</em> types to register.  This array must be identical to what was provided to the originating PQregisterTypes call.</p><p>The <em>res</em> argument is a PGresult normally created by calling PQregisterTypes followed by PQgetResult.  However, it is possible to create your own result via PQmakeEmptyPGresult, PQsetResultAttrs, PQsetvalue and call this function.  This approach is a bit risky being how the result set generated by type lookup queries are internal and subject to change.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<h3>Using PQregisterResult</h3>
<p>The example registers two composite types asynchronously.  It is worth noting that the PGresult obtained via PQgetResult can be cached by an application and used when creating new connections, as a way to avoid repeatedly performing type lookups with the server.</p>
<pre>
<strong>PGregisterType comp_types[] = {</strong>
	{"myschema.simple", NULL, NULL},
	{"complex", NULL, NULL}
};

/* asynchronous registration */
if (PQregisterTypes(conn, PQT_COMPOSITE, comp_types, 2, 1))
{
	/* example of a typical event loop */
	for(;;)
	{
		int n;
		fd_set set;
		int fd = PQsocket(conn);
		struct timeval tv = {0, 500000};

		FD_ZERO(&set);
		FD_SET(fd, &set);
		n = select(fd + 1, &set, NULL, NULL, &tv); //or kqueue,epoll,poll,etc..

		if (n == -1)
		{
			//error
		}
		else if (n == 0)
		{
			//timeout, do other work ....
		}
		else
		{
			PGresult *res;

			PQconsumeInput(conn);
			if(!PQisBusy(conn))
			{
				/* done */
				if(!(res = PQgetResult(conn)))
					break;

				n = PQregisterResult(conn, PQT_COMPOSITE, comp_types, 2, res);

				/* This could also be cached and reused with PQregisterResult */
				PQclear(res);

				if (!n)
					//error, consult PQgeterror()
			}
		}
	}
}

</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>On success, a non-zero value is returned.  On error, zero is returned and <a href="../man3/PQgeterror.3.html"><strong>PQgeterror</strong>(3)</a></em> will contain an error message.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>None.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>A contribution of eSilo, LLC. for the PostgreSQL Database Management System. Written by Andrew Chernow.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs to &lt;libpqtypes@esilo.com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2011 eSilo, LLC. All rights reserved.</p><p>This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO PQregisterResult&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/PQregisterTypes.3.html"><strong>PQregisterTypes</strong>(3)</a></em>, <strong>pqt-handlers</strong>(3)</em>, <a href="../man3/PQputf.3.html"><strong>PQputf</strong>(3)</a></em>, <a href="../man3/PQgetf.3.html"><strong>PQgetf</strong>(3)</a></em></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="PQregisterComposites.3.html"><span aria-hidden="true">&larr;</span> PQregisterComposites.3: Registers a composites.</a></li>
   <li class="next"><a href="PQregisterSubClasses.3.html">PQregisterSubClasses.3: Registers a type aliases or sub-classes. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
