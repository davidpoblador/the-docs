<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Weather::Com::Cached: Perl extension for getting weather information from weather.com</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Perl extension for getting weather information from weather.com">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Weather::Com::Cached (3pm) manual">
  <meta name="twitter:description" content="Perl extension for getting weather information from weather.com">
  <meta name="twitter:image" content="https://www.carta.tech/images/libweather-com-perl-Weather::Com::Cached-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Weather::Com::Cached.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Weather::Com::Cached (3pm) manual" />
  <meta property="og:description" content="Perl extension for getting weather information from weather.com" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libweather-com-perl-Weather::Com::Cached-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Weather::Com::Cached<small> (3pm)</small></h1>
        <p class="lead">Perl extension for getting weather information from weather.com</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Weather::Com::Cached.3pm.html">
      <span itemprop="name">Weather::Com::Cached: Perl extension for getting weather information from weather.com</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libweather-com-perl/">
      <span itemprop="name">libweather-com-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Weather::Com::Cached.3pm.html">
      <span itemprop="name">Weather::Com::Cached: Perl extension for getting weather information from weather.com</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Data::Dumper;
  use Weather::Com::Cached;
</pre>
<p>  # define parameters for weather search   my %params = (                 &apos;cache&apos;      =&gt; &apos;/tmp/weathercache&apos;,                 &apos;current&apos;    =&gt; 1,                 &apos;forecast&apos;   =&gt; 3,                 &apos;links&apos;      =&gt; 1,                 &apos;units&apos;      =&gt; &apos;s&apos;,                 &apos;proxy&apos;      =&gt; &apos;http://proxy.sonstwo.de&apos;,                 &apos;timeout&apos;    =&gt; 250,                 &apos;debug&apos;      =&gt; 1,                 &apos;partner_id&apos; =&gt; &apos;somepartnerid&apos;,                 &apos;license&apos;    =&gt; &apos;12345678&apos;,   );</p><p>  # instantiate a new weather.com object   my $cached_weather = Weather::Com::Cached-&gt;new(%params);</p><p>  # search for locations called &apos;Heidelberg&apos;   my $locations = $cached_weather-&gt;search(&apos;Heidelberg&apos;)         or die "No location found!&#92;n";</p><p>  # and then get the weather for each location found   foreach (keys %{$locations}) {         my $weather = $cached_weather-&gt;get_weather($_);         print Dumper($weather);   }</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Weather::Com::Cached</em> is a Perl module that provides low level \s-1OO\s0 interface to gather all weather information that is provided by <em>weather.com</em>.</p><p>Please refer to Weather::Com for the high level interfaces.</p><p>This module implements the caching business rules that apply to all applications programmed against the <em>xoap</em> \s-1API\s0 of <em>weather.com</em>. Except from the <em>cache</em> parameter to be used while instantiating a new object instance, this module has the same \s-1API\s0 than <em>Weather::Com::Base</em>. It's only a simple caching wrapper around it.</p><p>The caching mechanism for location searches is very simple. We assume that location codes on <em>weather.com</em> will never change. Therefore, a search string that has been successfully used once to search for locations will never cause another search on the web. Each location search results will be stored in the file \*(C`locations.dat\*(C'. If you want to refresh your locations cache, simply delete this file.</p><p>Although it's really simple, the module uses <em>Storable</em> methods <em>lock_store</em> and <em>lock_retrieve</em> to implement shared locking for reading cache files and exclusive locking for writing to chache files. By this way the same cache files should be able to be used by several application instances using <em>Weather::Com::Cached</em>.</p><p>You'll need to register at <em>weather.com</em> to to get a free partner id and a license key to be used within all applications that you want to write against <em>weather.com</em>'s <em>xoap</em> interface.</p><p>&lt;http://www.weather.com/services/xmloap.html&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHANGES</h2>
        <div class="sectioncontent">
<p>The location caching mechanism has been extended with version 0.4. Up to V0.4 searches were stored this way:</p><p>  $locations_cache = {                 &apos;New York&apos; =&gt; {                          &apos;USNY1000&apos; =&gt; &apos;New York/La Guardia Arpt, NY&apos;,                          &apos;USNY0998&apos; =&gt; &apos;New York/Central Park, NY&apos;,                          &apos;USNY0999&apos; =&gt; &apos;New York/JFK Intl Arpt, NY&apos;,                          &apos;USNY0996&apos; =&gt; &apos;New York, NY&apos;                 },   }</p><p>This has changed the way it does not only store a</p><p>  search_string =&gt; locations</p><p>hash. The cache now also stores a hash for <strong>each</strong> location name found:</p><p>  $locations_cache =&gt; {         &apos;new york&apos; =&gt; {                 &apos;USNY1000&apos; =&gt; &apos;New York/La Guardia Arpt, NY&apos;,                 &apos;USNY0998&apos; =&gt; &apos;New York/Central Park, NY&apos;,                 &apos;USNY0999&apos; =&gt; &apos;New York/JFK Intl Arpt, NY&apos;,                 &apos;USNY0996&apos; =&gt; &apos;New York, NY&apos;         },         &apos;new york/central park, ny&apos; =&gt; {                 &apos;USNY0998&apos; =&gt; &apos;New York/Central Park, NY&apos;         },         &apos;new york/la guardia arpt, ny&apos; =&gt; {                 &apos;USNY1000&apos; =&gt; &apos;New York/La Guardia Arpt, NY&apos;         },         &apos;new york, ny&apos; =&gt; {                 &apos;USNY0996&apos; =&gt; &apos;New York, NY&apos;         },         &apos;new york/jfk intl arpt, ny&apos; =&gt; {                 &apos;USNY0999&apos; =&gt; &apos;New York/JFK Intl Arpt, NY&apos;         },   }</p><p>The new mechanism has the following advantages:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>The new chaching mechanism is <strong>case insensitive</strong></p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>This caching mechanism is a workaround one problem with <em>weather.com</em>'s \s-1XOAP\s0 \s-1API\s0. Their server does not understand any search string with a '/' in it - no matter wether the '/' is \s-1URL\s0 encoded or not! This way, if you have searched for <em>New York</em> once, you'll then also get a result for direct calls to <em>New York/Jfk Intl Arpt, \s-1NY\s0</em>.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>The new mechanism also allows searches for <em>slashed</em> substrings. A search for <em>York/Central</em> will return the <em>New York/Central Park, \s-1NY\s0</em> location and if you simply search <em>York</em>, you'll get anything containing <em>York</em>. No matter if it's in the cache or not. Only if you specify <strong>exactly</strong> the name of a location in the cache, only this location is shown.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">
<p><strong>&#92;$1</strong></p><p>This constructor takes the same hash or hashref as <em>Weather::Com::Base</em> does. Please refer to that documentation for further details.</p><p>Except from the <em>Weather::Com::Base</em>'s parameters this constructor takes a parameter <em>cache</em> which defines the path to a directory into which all cache files will be put.</p><p>The cache directory defaults to '.'.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>The \*(C`search()\*(C' method has the same interface as the one of <em>Weather::Com::Base</em>. The difference is made by the caching.</p><p>The search is performed in the following order:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>If there's a direct match in the locations cache, return the locations from the cache.</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>If not, if there's a direct match on the web, return the locations found on the web and write the search result to the cache.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>If not, try a regexp search over all cached search strings and location names. This will return each location that matches the search string.</p>
  </dd>

</dl>
<p>The rest is all the same as for <em>Weather::Com::Base</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Weather::Com::Cached&hellip;</h2>
        <div class="sectioncontent">
<p>See also documentation of Weather::Com and Weather::Com::Base.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Thomas Schnuecker, &lt;thomas@schnuecker.de&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2004-2007 by Thomas Schnuecker</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p><p>The data provided by <em>weather.com</em> and made accessible by this \s-1OO\s0 interface can be used for free under special terms. Please have a look at the application programming guide of <em>weather.com</em>!</p><p>&lt;http://www.weather.com/services/xmloap.html&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Weather::Com::Base.3pm.html"><span aria-hidden="true">&larr;</span> Weather::Com::Base.3pm: Perl extension for getting weather information from weather.com</a></li>
   <li class="next"><a href="Weather::Com::CurrentConditions.3pm.html">Weather::Com::CurrentConditions.3pm: Class containing current weather conditions <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
