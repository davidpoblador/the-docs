<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>atAllAttrs: Attribute handling</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Attribute handling">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="atAllAttrs (3) manual">
  <meta name="twitter:description" content="Attribute handling">
  <meta name="twitter:image" content="https://www.carta.tech/images/atfs-dev-atAllAttrs-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/atAllAttrs.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="atAllAttrs (3) manual" />
  <meta property="og:description" content="Attribute handling" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/atfs-dev-atAllAttrs-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">atAllAttrs<small> (3)</small></h1>
        <p class="lead">Attribute handling</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/atAllAttrs.3.html">
      <span itemprop="name">atAllAttrs: Attribute handling</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/atfs-dev/">
      <span itemprop="name">atfs-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/atAllAttrs.3.html">
      <span itemprop="name">atAllAttrs: Attribute handling</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;atfs.h&gt;</p><p>#include &lt;atfstk.h&gt;</p><p>char*	atRetAttr (Af_key *aso, char *attributeName);</p><p>void	atFreeAttr (char *attributeValue);</p><p>int	atSetAttr (Af_key *aso, char *attribute, int mode);</p><p>int	atSetAttrFile (Af_key *aso, char *filename);</p><p>char*	atAttrName (char *attribute);</p><p>char*	atAttrValue (char *attribute);</p><p>int	atMatchAttr (Af_key *aso, char *attribute);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The AtFS Toolkit Library extends the AtFS attribute handling. It introduces additional standard attribute names and a list of attribute value types.</p><p><em>atRetAttr</em> returns a string representation of the value(s) of the <em>aso</em> attribute named <em>attributeName</em>. If the attribute value is preceded by a value special character (see list below), it will be evaluated accordingly. When the evaluation fails, the original attribute value, including value special character, is returned. When the attribute value is empty, an empty string is returned. When the attribute does not exist or on any other error condition, a null pointer is returned.</p><p>Attribute citations (like 7.0) in attribute values will always be expanded by atRetAttr. There is no way to disable attribute expansion. If you need the raw, unexpanded attribute value, use af_retattr (manual page <a href="../man3/af_attrs.3.html"><strong>af_attrs</strong>(3)</a>).</p><p>The attribute value returned by atRetAttr either resides in static memory (in case of AtFS standard attributes) or in allocated memory. Use <em>atFreeAttr</em> on each attribute value returned by atRetAttr when this not needed any longer. This will recycle allocated memory if possible.</p><p><em>atSetAttr</em> sets the attribute <em>attribute</em> for <em>aso</em>. It calls af_setattr (manual page <a href="../man3/af_attrs.3.html"><strong>af_attrs</strong>(3)</a>) and hence understands the <em>mode</em>s AF_ADD, AF_REMOVE, and AF_REPLACE. Alternatively, the mode argument is ignored, when the equal sign between attribute name and value is preceded by either a plus (+) or a minus (-) sign for adding and deleting attribute values. The value special character <em>at</em> (@) will also be evaluated. atSetAttr opens the file and reads its contents. If either the opening or reading fails, the attribute setting is aborted and returns FALSE. On successful execution, atSetAttr returns TRUE, otherwise FALSE.</p><p><em>atSetAttrFile</em> evaluates a file containing attributes. If opens the named file (<em>filename</em>) and interprets each line in the file as attribute argument to atSetAttr.</p><p><em>atAttrName</em> fills a static memory buffer with the name of the given <em>attribute</em> and returns a pointer to this buffer. Subsequent calls of atAttrName overwrite previous results.</p><p><em>atAttrValue</em> returns a pointer to the value part of <em>attribute</em>.</p><p><em>atMatchAttr</em> checks if <em>aso</em> has the given <em>attribute</em>. Result values are TRUE or FALSE. If just an attribute name is given, atMatchAttr returns a positive result if the attribute exists in the asos attribute list or, in the case that it is a standard attribute, if it's value is non null. A full attribute (name and value) must match an attribute in the asos attribute list. The value of the given attribute argument may be a (sh(1)) pattern.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ATTRIBUTE FORMAT</h2>
        <div class="sectioncontent">
<p>Attributes have the general format name=value. Additionally, a plus or minus sign may precede and a value special character may follow the equal sign (&lt;name&gt;[+-]=[^@!*]&lt;value&gt;).</p>
<dl class='dl-vertical'>
  <dt>
    <p>plus (+)</p>
  </dt>
  <dd>
    <p>A plus sign preceding the equal sign indicates, that the value shall be added to existing values (no matter if there are any).</p>
  </dd>
  <dt>
    <p>minus (-)</p>
  </dt>
  <dd>
    <p>With the minus sign, the value shall be removed from the list of values, if it exists.</p>
  </dd>

</dl>
<p>The following is the complete list of value special characters recognized by AtFStk.</p>
<dl class='dl-vertical'>
  <dt>
    <p>circumflex (^)</p>
  </dt>
  <dd>
    <p>The value is regarded as a <em>reference</em> to a file or ASO carrying the real attribute value as contents.</p>
  </dd>
  <dt>
    <p>at (@)</p>
  </dt>
  <dd>
    <p>An attribute value starting with an at (@) is considered to be a file name from where the real attribute value is to be taken. In contrary to the circumflex notation above, this causes the file read only once, when setting the attribute value.</p>
  </dd>
  <dt>
    <p>exclam (!)</p>
  </dt>
  <dd>
    <p>This introduces <em>execution</em> attributes. The attribute value is regarded as command to be passed to a shell process. On access, the command will be executed and its output will be catched as real attribute value.</p>
  </dd>
  <dt>
    <p>asterisk (*)</p>
  </dt>
  <dd>
    <p>This denotes a pointer attribute modeling relationships between attributed software objects. When atSetAttr finds an attribute value with an asterisk as first character it interprets the remaining value string as version identifier and tries to bind it using atBindVersion (manual page <a href="../man3/atbind.3.html"><strong>atbind</strong>(3)</a>). On success, the network path (see <a href="../man3/atNetworkPath.3.html"><strong>atNetworkPath</strong>(3)</a>) of the identifies ASO will be stored as attribute value together with the leading asterisk. atRetAttr maps pointer attributes to local pathnames using atLocalPath (manual page <a href="../man3/atnetwork.3.html"><strong>atnetwork</strong>(3)</a>).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STANDARD ATTRIBUTES</h2>
        <div class="sectioncontent">
<p>There are a number of <em>standard attributes</em> defined by the AtFS toolkit library and by AtFS (Attribute Filesystem) for each ASO. For a list of the AtFS standard attributes see the <a href="../man3/af_attrs.3.html"><strong>af_attrs</strong>(3)</a> manual page. This is a list of all standard attribute names defined in AtFStk.</p>
<dl class='dl-vertical'>
  <dt>
    <p>Header</p>
  </dt>
  <dd>
    <p>A compound attribute consisting of a <em>$Header:</em> Label followed by the bound file name (AF_ATTBOUND), the version date (vtime - see below), the versions author and state and a trailing dollar sign ($). Example:</p><p><strong>\s-2$Header: attrs.c[1.1] Tue Dec  1 17:01:10 1992 andy@cs.tu-berlin.de proposed $\s+2</strong></p>
  </dd>
  <dt>
    <p>Log</p>
  </dt>
  <dd>
    <p>The versions modification history from the very beginning. This might be long.</p>
  </dd>
  <dt>
    <p>note</p>
  </dt>
  <dd>
    <p>The modification note of the version as set by the author.</p>
  </dd>
  <dt>
    <p>pred, succ</p>
  </dt>
  <dd>
    <p>The physical predecessor/successor version as stored in AtFS. If there is none, the string <em>n/a</em> (not available) is returned.</p>
  </dd>
  <dt>
    <p>vtime</p>
  </dt>
  <dd>
    <p>The version date. For busy versions, this is the date of last modification, for saved versions, it is the saving date.</p>
  </dd>
  <dt>
    <p>xpon, xpoff</p>
  </dt>
  <dd>
    <p>Pseudo attribute turning attribute expansion on and off (see above).</p>
  </dd>

</dl>
<p>Some other names are mapped to the appropriate AtFS standard name:</p>
<pre>
	<em>AtFStk name	AtFS name (constant definition)	AtFStk name	AtFS name (constant definition)</em>

	atime	AF_ATTATIME	revision	AF_ATTREV
	author	AF_ATTAUTHOR	self	AF_ATTBOUND
	ctime	AF_ATTCTIME	selfpath	AF_ATTBOUNDPATH
	dsize	AF_ATTDSIZE	size	AF_ATTSIZE
	generation	AF_ATTGEN	state	AF_ATTSTATE
	host	AF_ATTHOST	stime	AF_ATTSTIME
	lock	AF_ATTLOCKER	syspath	AF_ATTSPATH
	ltime	AF_ATTLTIME	type	AF_ATTTYPE
	mtime	AF_ATTMTIME	unixname	AF_ATTUNIXNAME
	name	AF_ATTNAME	version	AF_ATTVERSION
	owner	AF_ATTOWNER
</pre>
<p>atSetAttr may also be used to set standard attributes where possible. Attributes that may be altered are</p>
<pre>
	<em>Attribute</em>	<em>Mapped to AtFS function</em>

	author	af_chauthor (<a href="../man3/af_protect.3.html"><strong>af_protect</strong>(3)</a>)
	generation, revision, version	af_svnum (<a href="../man3/af_version.3.html"><strong>af_version</strong>(3)</a>)
	mode	af_chmod (<a href="../man3/af_protect.3.html"><strong>af_protect</strong>(3)</a>)
	owner	af_chowner (<a href="../man3/af_protect.3.html"><strong>af_protect</strong>(3)</a>)
	state	af_sstate (<a href="../man3/af_version.3.html"><strong>af_version</strong>(3)</a>)
	note	af_snote (<a href="../man3/af_note.3.html"><strong>af_note</strong>(3)</a>)
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p>On error, the <em>atError</em> variable is set to a nun null value, and <em>atErrMsg</em> holds a diagnostic message. <em>atRetAttr</em> returns a null pointer on error, or if the desired attribute does not exist. <em>atSetAttr</em> and <em>atSetAttrFile</em> return FALSE on any error condition. <em>atMatchAttr</em> returns FALSE if an error occurred or if the attribute does not match.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO atAllAttrs&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/af_attrs.3.html"><strong>af_attrs</strong>(3)</a>, <a href="../man3/atbind.3.html"><strong>atbind</strong>(3)</a>, <a href="../man3/atnetwork.3.html"><strong>atnetwork</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="assert_perror.3.html"><span aria-hidden="true">&larr;</span> assert_perror.3: Test errnum and abort</a></li>
   <li class="next"><a href="atAttrName.3.html">atAttrName.3: Attribute handling <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
