<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Normalize::Text::Music_Fields: Normalize names of people's and (musical) works.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Normalize names of people's and (musical) works.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Normalize::Text::Music_Fields (3pm) manual">
  <meta name="twitter:description" content="Normalize names of people's and (musical) works.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmp3-tag-perl-Normalize::Text::Music_Fields-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Normalize::Text::Music_Fields.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Normalize::Text::Music_Fields (3pm) manual" />
  <meta property="og:description" content="Normalize names of people's and (musical) works." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmp3-tag-perl-Normalize::Text::Music_Fields-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Normalize::Text::Music_Fields<small> (3pm)</small></h1>
        <p class="lead">Normalize names of people's and (musical) works.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Normalize::Text::Music_Fields.3pm.html">
      <span itemprop="name">Normalize::Text::Music_Fields: Normalize names of people's and (musical) works.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmp3-tag-perl/">
      <span itemprop="name">libmp3-tag-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Normalize::Text::Music_Fields.3pm.html">
      <span itemprop="name">Normalize::Text::Music_Fields: Normalize names of people's and (musical) works.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
   $name = $obj-&gt;Normalize::Text::Music_Fields::normalize_person($name);
   $work = $obj-&gt;Normalize::Text::Music_Fields::normalize_piece($work);
 # $obj should have methods &#96;name_for_field_normalization&apos;, &apos;shorted_person&apos;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Databases of names and of works-per-name are taken from plain-text files (optionally in mail-header format).  Names are stored in <em>*.lst</em> files. Works are stored in <em>.comp</em> files named after the shortened name of the composer.</p><p>The directories of these files are looked in the environment variable \*(C`MUSIC_FIELDS_PATH\*(C' (if defined, split the same way as \*(C`PATH\*(C'), or in \*(C`$ENV{HOME}/.music_fields\*(C', and \*(C`-\*(C' (and \*(C`-\*(C' is replaced by the directory named as the module file with <em>.pm</em> dropped).  At runtime, one can replace the list by calling function <em>Normalize::Text::Music_Fields::set_path()</em> with the list of directories as the argument.</p><p>(Since parsed files are cached, replacing the directory list should be done as early as possible.)</p><p>Files may be managed with utility subroutines provided with the module:</p><p> # Translate from one-per-line to mail-header format:  perl -wple "BEGIN {print q(# format = mail-header)} s/#&#92;s*normalized&#92;s*$//; $_ = qq(Title: $_) unless /^&#92;s*(#|$)/; $_ = qq(&#92;n$_) if $p and not /^##/; $_ .= qq(&#92;n) unless $p = /^##/" Normalize::Text::Music_Fields-G_Gershwin.comp &gt;Music_Fields-G_Gershwin.comp-mail</p><p> # (inverse transformation:) Dump pieces listed in mail-header format  perl -MNormalize::Text::Music_Fields -wle "print for Normalize::Text::Music_Fields::read_composer_file(shift, shift)" gershwin Music_Fields-G_Gershwin.comp-mail &gt; o</p><p> # Normalize data in 1-line-per piece format  perl -MNormalize::Text::Music_Fields -wle "Normalize::Text::Music_Fields::prepare_tag_object_comp(shift)-&gt;Normalize::Text::Music_Fields::normalize_file_lines(shift)"</p><p> # Create a mail-header file from a semi-processed (with "bold" fields)  # mail-header file (with xml escapes, preceded by opus number)  perl -MNormalize::Text::Music_Fields -00wnle "BEGIN {$tag = Normalize::Text::Music_Fields::prepare_tag_object_comp(shift @ARGV); print q(# format = mail-header)} print Normalize::Text::Music_Fields::emit_as_mail_header($tag,$_, q(bold,xml,opus),$pre)" shostakovich  o-xslt-better &gt;Music_Fields-D_Shostakovich.comp-mail1</p><p> # Likewise, from work-per-line with opus-numbers:  perl -MNormalize::Text::Music_Fields -wnle "BEGIN {$tag = Normalize::Text::Music_Fields::prepare_tag_object_comp(shift @ARGV); print qq(# format = mail-header&#92;n)} print Normalize::Text::Music_Fields::emit_as_mail_header($tag,$_, q(opus), $pre)" schnittke  o-schnittke-better  &gt;Music_Fields-A_Schnittke.comp-mail2</p><p> # A primitive tool for merging additional info into the database:  perl -MNormalize::Text::Music_Fields -wnle "BEGIN {$tag = Normalize::Text::Music_Fields::prepare_tag_object_comp(shift @ARGV); print qq(# format = mail-header&#92;n)} next unless s/^&#92;s*&#92;+&#92;+&#92;s*//; print Normalize::Text::Music_Fields::merge_info($tag,$_, q(opus,xml), qr(^(58|70|76|116|118|119)($|-)))" brahms o-brahms-op-no1-xslt</p><p> # Minimal consistency check of persons database.  perl -MNormalize::Text::Music_Fields -wle "BEGIN{binmode $_, &apos;:encoding(cp866)&apos; for &#92;*STDIN, &#92;*STDOUT, &#92;*STDERR} print Normalize::Text::Music_Fields-&gt;check_persons"</p><p> # Minimal testing code:  perl -MNormalize::Text::Music_Fields -e Normalize::Text::Music_Fields::test_normalize_piece</p><p>It may be easier to type these examples if one uses \*(C`manage_M_N_F.pm\*(C', which exports the mentioned subroutines to the main namespace (available in <em>examples</em> directory of a distribution of \*(C`MP3::Tag\*(C').  E.g., the last example becomes:</p><p> perl -Mmanage_M_N_F -e test_normalize_piece</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Nmap::Parser.3pm.html"><span aria-hidden="true">&larr;</span> Nmap::Parser.3pm: Parse nmap scan data with perl</a></li>
   <li class="next"><a href="Number::Bytes::Human.3pm.html">Number::Bytes::Human.3pm: Convert byte count to human readable format <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
