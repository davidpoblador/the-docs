<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mail::Milter::Module::ConnectMatchesHostname: Milter to accept/reject connecting hosts matching regex(es)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Milter to accept/reject connecting hosts matching regex(es)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Mail::Milter::Module::ConnectMatchesHostname (3pm) manual">
  <meta name="twitter:description" content="Milter to accept/reject connecting hosts matching regex(es)">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmail-milter-perl-Mail::Milter::Module::ConnectMatchesHostname-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Mail::Milter::Module::ConnectMatchesHostname.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Mail::Milter::Module::ConnectMatchesHostname (3pm) manual" />
  <meta property="og:description" content="Milter to accept/reject connecting hosts matching regex(es)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmail-milter-perl-Mail::Milter::Module::ConnectMatchesHostname-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Mail::Milter::Module::ConnectMatchesHostname<small> (3pm)</small></h1>
        <p class="lead">Milter to accept/reject connecting hosts matching regex(es)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Mail::Milter::Module::ConnectMatchesHostname.3pm.html">
      <span itemprop="name">Mail::Milter::Module::ConnectMatchesHostname: Milter to accept/reject connecting hosts matching regex(es)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmail-milter-perl/">
      <span itemprop="name">libmail-milter-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Mail::Milter::Module::ConnectMatchesHostname.3pm.html">
      <span itemprop="name">Mail::Milter::Module::ConnectMatchesHostname: Milter to accept/reject connecting hosts matching regex(es)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Mail::Milter::Module::ConnectMatchesHostname;
</pre>
<p>    my $milter = new Mail::Milter::Module::ConnectMatchesHostname;</p><p>    my $milter2 = &ConnectMatchesHostname; # convenience</p><p>    $milter2-&gt;set_message(&apos;Connecting hostname %H looks like a dynamic address&apos;);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This milter module rejects any connecting host whose hostname contains one of a group of built-in patterns that match the \s-1IP\s0 address of the connecting host.  This is normally used to detect dynamic pool addresses.</p><p>Currently the following patterns embedded in the hostname are considered matching, where 10.11.12.13 is the IPv4 address of the connecting host. In the following cases, the string must be preceded by a non-digit character or otherwise must be at the start of the hostname.</p><p>    010.011.012.013. (optionally without internal dots, or with - in place of .)     013.012.011.010. (optionally with - in place of .)     10.11.12.13. (optionally without internal dots, or with - in place of .)     13.12.11.10. (optionally with - in place of .)     0A0B0C0D (hexadecimal, ignoring case)</p><p>More specific patterns are anticipated to be added in the future.  Because of this, if you use ConnectMatchesHostname, pay attention to this perldoc manual page when updating to a newer version of Mail::Milter.</p><p>One final note.  ISPs can and do use \*(L"dynamic-looking\*(R" reverse \s-1DNS\s0 entries for what they consider to be legitimate server addresses.  This is not ideal, and may require embedding this module in a Chain set to \*(L"accept_break\*(R" with regular expressions; for example:</p><p>    my $milter = new Mail::Milter::Chain(         &ConnectRegex(             &apos;&#92;.fooisp&#92;.com$&apos;,         )-&gt;<strong>accept_match</strong>(1);         &ConnectMatchesHostname,     )-&gt;<strong>accept_break</strong>(1);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <em>new()</em>
  </dt>
  <dd>
    <p>Creates a ConnectMatchesHostname object.</p>
  </dd>
  <dt>
    set_message(\s-1MESSAGE\s0)
  </dt>
  <dd>
    <p>Sets the message used when rejecting connections.  This string may contain the substring %H, which will be replaced by the matching hostname, and/or the substring %A, which will be replaced by the matching \s-1IP\s0 address. This method returns a reference to the object itself, allowing this method call to be chained.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>In Sendmail 8.11 and 8.12, a milter rejection at \*(L"connect\*(R" stage does not allow the reply message to be set \*(-- it simply becomes \*(L"not accepting messages\*(R".  However, this module still attempts to set the reply code and message in the hope that this will be fixed.</p><p>The implementation of this module could be much more efficient.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Todd Vierling, &lt;tv@duh.org&gt; &lt;tv@pobox.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Mail::Milter::Module::ConnectMatchesHostname&hellip;</h2>
        <div class="sectioncontent">
<p>Mail::Milter::Object</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Mail::Milter::Module::ConnectDNSBL.3pm.html"><span aria-hidden="true">&larr;</span> Mail::Milter::Module::ConnectDNSBL.3pm: Milter to accept/reject connecting hosts matching dnsbls</a></li>
   <li class="next"><a href="Mail::Milter::Module::ConnectRegex.3pm.html">Mail::Milter::Module::ConnectRegex.3pm: Milter to accept/reject connecting hosts matching regex(es) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
