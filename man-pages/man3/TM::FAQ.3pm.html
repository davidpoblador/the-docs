<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TM::FAQ: Topic maps, frequently angering quirks</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Topic maps, frequently angering quirks">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="TM::FAQ (3pm) manual">
  <meta name="twitter:description" content="Topic maps, frequently angering quirks">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtm-perl-TM::FAQ-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/TM::FAQ.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TM::FAQ (3pm) manual" />
  <meta property="og:description" content="Topic maps, frequently angering quirks" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtm-perl-TM::FAQ-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">TM::FAQ<small> (3pm)</small></h1>
        <p class="lead">Topic maps, frequently angering quirks</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/TM::FAQ.3pm.html">
      <span itemprop="name">TM::FAQ: Topic maps, frequently angering quirks</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtm-perl/">
      <span itemprop="name">libtm-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/TM::FAQ.3pm.html">
      <span itemprop="name">TM::FAQ: Topic maps, frequently angering quirks</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">FAQ, TIPS AND PITFALLS</h2>
        <div class="sectioncontent">
<ul>
<li><p>Q: I am using \s-1MLDBM\s0 as persistent store and the larger the map grows the \s-1MUCH\s0 slower insertions become. A: The way \s-1MLDBM\s0 works is that at every access (read or write) a large portion of the map is loaded via \s-1DBM\s0 into memory (and written back). One option is to avoid needpin-like modifications and to exploit the fact that many routines accept lists as parameters. So \s-1DO\s0 \s-1NOT\s0 do this:</p>
<pre>
   for some changes {
       $tm-&gt;assert ( one change );
   }
</pre>
<p>But \s-1DO\s0 that:    $tm-&gt;assert (         map { one change $_ } some changes    ); Similar with topic changes. Another option is to use a second, in-memory map for additions and then \*(C`add\*(C' the modifications to the \s-1MLDBM\s0 based map:    my $updates = new TM;    $updates-&gt;internalize ....    $updates-&gt;assert ....</p><p>   $dbm-&gt;add ($updates);</p></li><li><p>Q: I am using \s-1MLDBM\s0 as persistent store and receive very strange errors which indicate that the map is empty. A: You could be dealing with a sitation that the \s-1DBM\s0 file already exists, but is completely empty (maybe because tmpnam created it). This has been fixed in v1.54.</p></li><li><p>Q: How can I get rid of these annoying topics \*(C`occurrence\*(C', \*(C`name\*(C', etc. which I have not put into the map in the first place. They seem to be in each map I create. A: These infrastructure topics are needed to make the map <em>complete</em> (everything used is defined). Per se, you cannot remove them and, seriously you probably do not want that to happen. But you can filter these out when you retrieve a list of toplets:    my @ts   = $tm-&gt;toplets (&#92; &apos;+all -infrastructure&apos;);</p></li><li><p>Q: How can I get all names and/or occurrences of a topic? A: If you have a topic identifier \*(C`mytopic\*(C' in your hand, then you can get all characteristics (= names and occurrences, but not associations) with     my @cs = $tm-&gt;match_forall (char =&gt; 1, irole =&gt; $tm-&gt;tids (&apos;mytopic&apos;)); Then you can filter occording the type, the scope, the data type value or the \*(C`KIND\*(C'. The latter tells you whether an assertion is a name or occurrence. For example those occurrences which are \*(C`occurrence\*(C's and not anything specials as, say, \*(C`homepage\*(C':     my @occs  = map  { $_-&gt;[0] }                 map  { TM::get_x_players ($tm, $_, &apos;value&apos;) }                 grep { $_-&gt;[TM-&gt;TYPE] eq &apos;occurrence&apos; } @cs;</p></li><li><p>Q: Some of these maps I create have the trait \*(C`ResourceAble\*(C' and import therefore a method \*(C`mtime\*(C'. How does this work? A: Every map which is attached to an external resource is said to be <em>resourceable</em>, hence the trait with the same name. You, the developer, decide which copy of the map is the <em>authoritative</em>, i.e. what should happen should the map infrastructure be forced to synchronize the content. While the synchronization (and when that is triggered) is handled by the trait TM::Synchronizable, the infrastructure needs to know (a) when the in-memory copy of the map was last modified and (b) when the resource to which it is attached has been modified last. This is the reasons for timestamps on the memory-stored map. The resources themselves also have these timestamps; when the resource is a file on a file system, then the \*(L"last modified\*(R" timestamps are take from there. The only complication is that \s-1TM\s0 is using a much higher time resolution as most file systems (HiRes::Time).</p></li><li><p>Q: When using AsTMa (1.x) it is very difficult to figure out where I make a syntax error. Is there a convenient and effective way? What about line numbers? A: One approach is to use the %cancel method: When added to the file, the parser will stop there and write a message onto \s-1STDERR\s0. Another method is to use \*(C`%trace 1\*(C' within the AsTMa stream. Then the parser should let you know what it could detect successfully. Line numbers cannot be used because the file will be massively reduced before the parser actually sees it.</p></li><li><p>Q: When serializing large maps, the serializer is \s-1REALLY\s0 slow. How to make it faster? A: The problem was that some serializers have to call the method \*(C`is_reified\*(C' very often to find out whether there is a reification for the assertion. If this becomes a concern to you, simply add an index over reification (available since 1.53):    use Class::Trait;    Class::Trait-&gt;apply ($tm, &apos;TM::Serializable::XTM&apos;);</p><p>   use TM::Index::Reified;    my $idx = new TM::Index::Reified ($tm, closed =&gt; 1);</p><p>   print $tm-&gt;serialize;</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 20(0[3-68]|10) by Robert Barta, &lt;drrho@cpan.org&gt;</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="TM::DM.3pm.html"><span aria-hidden="true">&larr;</span> TM::DM.3pm: Topic maps, read-only tmdm layer</a></li>
   <li class="next"><a href="TM::Graph.3pm.html">TM::Graph.3pm: Topic maps, trait for graph-like operations <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
