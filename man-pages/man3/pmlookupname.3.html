<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmlookupname - translate performance metric names into PMIDs</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Translate performance metric names into pmids">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmlookupname<small> (3)</small></h1>
        <p class="lead">Translate performance metric names into pmids</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="/"><span itemprop="title">Carta.tech</span></a>
	</li>
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">man-pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man3/"><span itemprop="title">Library calls</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man3/pmlookupname.3.html"><span itemprop="title">pmlookupname</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">C SYNOPSIS</h2>
        <div class="sectioncontent">

<p>#include &lt;pcp/pmapi.h&gt;</p>
<p class='spacer'>

<pre>int pmLookupName(int <em>numpmid</em>, char **<em>namelist</em>, pmID *<em>pmidlist</em>);</pre>

<p class='spacer'>

<p>cc ... -lpcp</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>Given a list in <em>namelist</em> containing <em>numpmid</em> full pathnames for performance metrics from a Performance Metrics Name Space (PMNS), <strong>pmLookupName</strong> returns the list of associated Performance Metric Identifiers (PMIDs) via <em>pmidlist</em>.</p>
<p class='spacer'>

  <p>The result from <strong>pmLookupName</strong> depends on the presence of any lookup failures, their severity and the number of metrics being looked up.</p>
  <dl class='dl-horizontal'>
    <dt>1.</dt>
    <dd>
  <p>If there are no lookup failures, the return value will be <em>numpmid</em>.</p>
    </dd>
    <dt>2.</dt>
    <dd>
  <p>If a fatal error is encountered, the return value will be less than 0. For example <strong>PM_ERR_TOOSMALL</strong>, <strong>PM_ERR_NOPMNS</strong> or <strong>PM_ERR_IPC</strong>.</p>
    </dd>
    <dt>3.</dt>
    <dd>
  <p>If <em>numpmid</em> is greater than one and non-fatal error(s) are encountered, the return value is the number of metric names that have successfully been looked up (greater than or equal to zero and less than or equal to <em>numpmid</em>).</p>
    </dd>
    <dt>4.</dt>
    <dd>
  <p>If <em>numpmid</em> is one and a non-fatal error is encountered, the return value is the error code (less than zero).</p>
    </dd>
  </dl>
<p class='spacer'>

<p>When errors are encountered, any metrics that cannot be looked up result in the corresponding element of <em>pmidlist</em> being set to <strong>PM_ID_NULL</strong>.</p>
<p class='spacer'>

<p>The slightly convoluted error protocol allows bulk lookups, then probing for more error details in the case of a specific failure, as shown in the <strong>EXAMPLES</strong> section below.</p>
<p class='spacer'>

<p>Note that the error protocol guarantees there is a 1:1 relationship between the elements of <em>namelist</em> and <em>pmidlist</em>, hence both lists contain exactly <em>numpmid</em> elements. For this reason, the caller is expected to have pre-allocated a suitably sized array for <em>pmidlist</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>#include &lt;pcp/pmapi.h&gt;

#define NUMPMID 5
char 	*names[] = { "sample.bin",
		     "sample",
		     "sample.bog",
		     "sample.secret.bar",
		     "sample.secret.bar.bad"
		   };
pmID	pmids[NUMPMID];

int
main(int argc, char **argv)
{
    int	sts;
    int	numpmid = NUMPMID;

    pmNewContext(PM_CONTEXT_HOST, "local:");

    sts = pmLookupName(numpmid, names, pmids);

    if (sts &lt; 0) {
	fprintf(stderr, "pmLookupName failed: %s\n", pmErrStr(sts));
	<strong>exit</strong>(1);
    }
    if (sts != numpmid) {
	/*
	 * some of the lookups failed ... report the reason(s)
	 */
	int	i;

	for (i = 0; i &lt; numpmid; i++) {
	    if (pmids[i] != PM_ID_NULL) continue;
	    /* this one failed */
	    sts = pmLookupName(1, &names[i], &pmids[i]);
	    fprintf(stderr, "%s: lookup failed: %s\n", names[i], pmErrStr(sts));
	}
	<strong>exit</strong>(1);
    }

    /* all good ... */
    ...
}
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>PMAPI</strong>(3), <strong>pmGetChildren</strong>(3), <strong>pmGetChildrenStatus</strong>(3), <strong>pmGetConfig</strong>(3), <strong>pmLoadNameSpace</strong>(3), <strong>pmNameID</strong>(3), <strong>pmNewContext</strong>(3), <strong>pcp.conf</strong>(5) and <a href="../man5/pcp.env.5.html"><strong>pcp.env</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

  <dl class='dl-horizontal'>
    <dt>f3PM_ERR_TOOSMALLf1</dt>
    <dd>
  <p><em>numpmid</em> must be at least 1</p>
    </dd>
    <dt>f3PM_ERR_NOPMNSf1</dt>
    <dd>
  <p>Failed to access a PMNS for operation. Note that if the application hasn't a priori called <strong>pmLoadNameSpace</strong>(3) and wants to use the distributed PMNS, then a call to <strong>pmLookupName</strong> must be made after the creation of a context (see <strong>pmNewContext</strong>(3)).</p>
    </dd>
    <dt>f3PM_ERR_NAMEf1</dt>
    <dd>
  <p><em>namelist[0]</em> does not correspond to a valid metric name in the PMNS.</p>
    </dd>
    <dt>f3PM_ERR_NONLEAFf1</dt>
    <dd>
  <p><em>namelist[0]</em> refers to a node in the PMNS but it was not a leaf node.</p>
    </dd>
    <dt>f3PM_ERR_*f1</dt>
    <dd>
  <p>Other diagnostics are for protocol failures when accessing the distributed PMNS.</p>
    </dd>
  </dl>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pmlookupipc.3.html"><span aria-hidden="true">&larr;</span> pmlookupipc.3: IPC version infrastructure support</a></li>
   <li class="next"><a href="pmlookuptext.3.html">pmlookuptext.3: return text describing a performance metric <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
