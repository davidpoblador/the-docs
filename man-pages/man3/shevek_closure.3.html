<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shevek_closure: Block and resume without blocking the main loop.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Block and resume without blocking the main loop.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shevek_closure (3) manual">
  <meta name="twitter:description" content="Block and resume without blocking the main loop.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libshevek-doc-shevek_closure-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/shevek_closure.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shevek_closure (3) manual" />
  <meta property="og:description" content="Block and resume without blocking the main loop." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libshevek-doc-shevek_closure-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shevek_closure<small> (3)</small></h1>
        <p class="lead">Block and resume without blocking the main loop.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/shevek_closure.3.html">
      <span itemprop="name">shevek_closure: Block and resume without blocking the main loop.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libshevek-doc/">
      <span itemprop="name">libshevek-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/shevek_closure.3.html">
      <span itemprop="name">shevek_closure: Block and resume without blocking the main loop.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;closure.hh&gt;</p><p>Inherits <strong>shevek::refbase</strong>.</p><h3>Public Member Functions</h3>
<p>bool <strong>empty</strong> () const </p><p><em>Check if the closure is empty. </em> void <strong>set_function</strong> (sigc::slot0&lt; void &gt; func, bool run=true, sigc::slot0&lt; void &gt; cb=sigc::slot0&lt; void &gt;())</p><p><em>Set running function on an empty closure. </em> <strong>~closure</strong> ()</p><p><em>Destructor. </em> void <strong>wake</strong> ()</p><p><em>Continue running the closure. </em></p>
<h3>Static Public Member Functions</h3>
<p>static Glib::RefPtr&lt; <strong>closure</strong> &gt; <strong>create</strong> ()</p><p><em>Create a new closure. </em> static void <strong>block</strong> ()</p><p><em>Sleep, returning control to the caller until awoken. </em></p>
<h3>Additional Inherited Members</h3>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>Block and resume without blocking the main loop.</p><p>Closures allow blocking and resuming the main loop. They are implemented with threads, which means that they don't work well with multi-threaded programs.</p><p>If a function wants to be able to block using a closure, it must be called using closure(). It (or any function it calls) can then suspend by calling <strong>closure::block()</strong>. It can be awoken again by calling <strong>closure::wake()</strong> on the closure object.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Member Function Documentation</h2>
        <div class="sectioncontent">
<h3>static void shevek::closure::block ()\fC [static]\fP</h3>
<p>Sleep, returning control to the caller until awoken. This function puts the current closure to sleep. It will continue to run when awoken with <strong>wake()</strong>. It can also be destroyed. This function uses a global variable to know which is the current closure, so it can be called without an object, as <strong>closure::block</strong> (); .</p>
<h3>static Glib::RefPtr&lt;\fBclosure\fP&gt; shevek::closure::create ()\fC [inline]\fP, \fC [static]\fP</h3>
<p>Create a new closure. Create a new closure. It will be empty initially.</p>
<h3>bool shevek::closure::empty () const\fC [inline]\fP</h3>
<p>Check if the closure is empty. Check if the closure is empty. If it is, <strong>set_function()</strong> can be called.</p>
<h3>void shevek::closure::set_function (sigc::slot0&lt; void &gt;func, boolrun = \fCtrue\fP, sigc::slot0&lt; void &gt;cb = \fCsigc::slot0&lt; void &gt;()\fP)</h3>
<p>Set running function on an empty closure. Set running function. The closure must be empty when this is called. When the function exits, the closure returns to the empty state, and the callback is called, if given.</p>
<h3>void shevek::closure::wake ()</h3>
<p>Continue running the closure. Wake a closure. It is an error to wake a closure which isn't blocking (in particular also the currently running closure).</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for libshevek from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="shevek_avahi_browser_owner.3.html"><span aria-hidden="true">&larr;</span> shevek_avahi_browser_owner.3: Information about a discovered server.</a></li>
   <li class="next"><a href="shevek_crefbase.3.html">shevek_crefbase.3: Circular-dependancy-protected reference-counting object base class. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
