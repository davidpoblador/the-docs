<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FunTableRowPut: Put funtools rows</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Put funtools rows">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="FunTableRowPut (3) manual">
  <meta name="twitter:description" content="Put funtools rows">
  <meta name="twitter:image" content="https://www.carta.tech/images/libfuntools-dev-FunTableRowPut-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/FunTableRowPut.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="FunTableRowPut (3) manual" />
  <meta property="og:description" content="Put funtools rows" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libfuntools-dev-FunTableRowPut-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">FunTableRowPut<small> (3)</small></h1>
        <p class="lead">Put funtools rows</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/FunTableRowPut.3.html">
      <span itemprop="name">FunTableRowPut: Put funtools rows</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libfuntools-dev/">
      <span itemprop="name">libfuntools-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/FunTableRowPut.3.html">
      <span itemprop="name">FunTableRowPut: Put funtools rows</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>int FunTableRowPut(Fun fun, void *rows, int nev, int idx, char *plist)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong></strong><strong>FunTableRowPut()</strong><strong></strong> routine writes rows to a \s-1FITS\s0 binary table, taking its input from an array of user structs that contain column values selected by a previous call to <em>FunColumnSelect()</em>.  Selected column values are automatically converted from native data format to \s-1FITS\s0 data format as necessary.</p><p>The first argument is the Fun handle associated with this row data. The second <strong>rows</strong> argument is the array of user structs to output. The third <strong>nrow</strong> argument specifies the number number of rows to write.  The routine will write <strong>nrow</strong> records, starting from the location specified by <strong>rows</strong>.</p><p>The fourth <strong>idx</strong> argument is the index of the first raw input row to write, in the case where rows from the user buffer are being merged with their raw input row counterparts (see below). Note that this <strong>idx</strong> value is has nothing to do with the row buffer specified in argument 1.  It merely matches the row being written with its corresponding (hidden) raw row.  Thus, if you read a number of rows, process them, and then write them out all at once starting from the first user row, the value of <strong>idx</strong> should be 0:</p>
<pre>
  Ev ebuf, ev;
  /* get rows -- let routine allocate the row array */
  while( (ebuf = (Ev)FunTableRowGet(fun, NULL, MAXROW, NULL, &got)) ){
    /* process all rows */
    for(i=0; i&lt;got; i++){
      /* point to the i'th row */
      ev = ebuf+i;
      ...
    }
    /* write out this batch of rows, starting with the first */
    FunTableRowPut(fun2, (char *)ebuf, got, 0, NULL);
    /* free row data */
    if( ebuf ) free(ebuf);
  }
</pre>
<p>On the other hand, if you write out the rows one at a time (possibly skipping rows), then, when writing the i'th row from the input array of rows, set <strong>idx</strong> to the value of i:</p><p>  Ev ebuf, ev;   /* get rows -- let routine allocate the row array */   while( (ebuf = (Ev)FunTableRowGet(fun, NULL, MAXROW, NULL, &got)) ){     /* process all rows */     for(i=0; i&lt;got; i++){       /* point to the i'th row */       ev = ebuf+i;       ...       /* write out the current (i.e., i'th) row */       FunTableRowPut(fun2, (char *)ev, 1, i, NULL);     }     /* free row data */     if( ebuf ) free(ebuf);   }</p><p>The final argument is a param list string that is not currently used. The routine returns the number of rows output.  This should be equal to the value passed in the third nrow&lt;/B argument.</p><p>When <em>FunTableRowPut()</em> is first called for a given binary table, Funtools checks to see of the primary header has already been written (either by writing a previous row table or by writing an image.) If not, a dummy primary header is written to the file specifying that an extension should be expected. After this, a binary table header is automatically written containing information about the columns that will populate this table.  In addition, if a Funtools reference handle was specified when this table was opened, the parameters from this Funtools reference handle are merged into the new binary table header.</p><p>In a typical Funtools row loop, you read rows using <em>FunTableRowGet()</em>() and write rows using <em>FunTableRowPut()</em>. The columns written by <em>FunTableRowPut()</em>() are those defined as writable by a previous call to <em>FunColumnSelect()</em>.  If that call to FunColumnSelect also specified <strong>merge=[update|replace|append]</strong>, then the entire corresponding raw input row record will be merged with the output row according to the <strong>merge</strong> specification (see <em>FunColumnSelect()</em> above).</p><p>A call to write rows can either be done once, after all rows in the input batch have been processed, or it can be done (slightly less efficiently) one row at a time (or anything in between). We do recommend that you write all rows associated with a given batch of input rows before reading new rows.  This is <strong>required</strong> if you are merging the output rows with the raw input rows (since the raw rows are destroyed with each successive call to get new rows).</p><p>For example:</p><p>  Ev buf, ev;   ...   /* get rows -- let routine allocate the row array */   while( (buf = (Ev)FunTableRowGet(fun, NULL, MAXROW, NULL, &got)) ){     /* point to the i'th row */     ev = buf + i;     .... process   }   /* write out this batch of rows */   FunTableRowPut(fun2, buf, got, 0, NULL);   /* free row data */   if( buf ) free(buf);   }</p><p>or</p><p>  Ev buf, ev;   ...   /* get rows -- let routine allocate the row array */   while( (buf = (Ev)FunTableRowGet(fun, NULL, MAXROW, NULL, &got)) ){     /* process all rows */     for(i=0; i&lt;got; i++){       /* point to the i'th row */       ev = buf + i;       ... process       /* write out this batch of rows with the new column */       if( dowrite )         FunTableRowPut(fun2, buf, 1, i, NULL);     }     /* free row data */     if( buf ) free(buf);   }</p><p>Note that the difference between these calls is that the first one outputs <strong>got</strong> rows all at once and therefore passes <strong>idx=0</strong> in argument four, so that merging starts at the first raw input row.  In the second case, a check it made on each row to see if it needs to be output.  If so, the value of <strong>idx</strong> is passed as the value of the <strong>i</strong> variable which points to the current row being processed in the batch of input rows.</p><p>As shown above, successive calls to <em>FunTableRowPut()</em> will write rows sequentially. When you are finished writing all rows in a table, you should call <em>FunFlush()</em> to write out the \s-1FITS\s0 binary table padding. However, this is not necessary if you subsequently call <em>FunClose()</em> without doing any other I/O to the \s-1FITS\s0 file.</p><p>Note that <em>FunTableRowPut()</em> also can be called as <em>FunEventsPut()</em>, for backward compatibility.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO FunTableRowPut&hellip;</h2>
        <div class="sectioncontent">
<p>See <a href="../man7/funtools.7.html"><strong>funtools</strong>(7)</a> for a list of Funtools help pages</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="FunTableRowGet.3.html"><span aria-hidden="true">&larr;</span> FunTableRowGet.3: Get funtools rows</a></li>
   <li class="next"><a href="GENLIB_MACRO.3.html">GENLIB_MACRO.3: Interface with all macro generators. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
