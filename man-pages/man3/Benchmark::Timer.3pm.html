<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Benchmark::Timer: Benchmarking with statistical confidence</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Benchmarking with statistical confidence">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Benchmark::Timer (3pm) manual">
  <meta name="twitter:description" content="Benchmarking with statistical confidence">
  <meta name="twitter:image" content="https://www.carta.tech/images/libbenchmark-timer-perl-Benchmark::Timer-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Benchmark::Timer.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Benchmark::Timer (3pm) manual" />
  <meta property="og:description" content="Benchmarking with statistical confidence" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libbenchmark-timer-perl-Benchmark::Timer-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Benchmark::Timer<small> (3pm)</small></h1>
        <p class="lead">Benchmarking with statistical confidence</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Benchmark::Timer.3pm.html">
      <span itemprop="name">Benchmark::Timer: Benchmarking with statistical confidence</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libbenchmark-timer-perl/">
      <span itemprop="name">libbenchmark-timer-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Benchmark::Timer.3pm.html">
      <span itemprop="name">Benchmark::Timer: Benchmarking with statistical confidence</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  # Non-statistical usage
  use Benchmark::Timer;
  $t = Benchmark::Timer-&gt;new(skip =&gt; 1);

  for(1 .. 1000) {
      $t-&gt;start(&apos;tag&apos;);
      &long_running_operation();
      $t-&gt;stop(&apos;tag&apos;);
  }
  print $t-&gt;report;

  # --------------------------------------------------------------------

  # Statistical usage
  use Benchmark::Timer;
  $t = Benchmark::Timer-&gt;new(skip =&gt; 1, confidence =&gt; 97.5, error =&gt; 2);

  while($t-&gt;need_more_samples(&apos;tag&apos;)) {
      $t-&gt;start(&apos;tag&apos;);
      &long_running_operation();
      $t-&gt;stop(&apos;tag&apos;);
  }
  print $t-&gt;report;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Benchmark::Timer class allows you to time portions of code conveniently, as well as benchmark code by allowing timings of repeated trials. It is perfect for when you need more precise information about the running time of portions of your code than the Benchmark module will give you, but don't want to go all out and profile your code.</p><p>The methodology is simple; create a Benchmark::Timer object, and wrap portions of code that you want to benchmark with \*(C`start()\*(C' and \*(C`stop()\*(C' method calls. You can supply a tag to those methods if you plan to time multiple portions of code.  If you provide error and confidence values, you can also use \*(C`need_more_samples()\*(C' to determine, statistically, whether you need to collect more data.</p><p>After you have run your code, you can obtain information about the running time by calling the \*(C`results()\*(C' method, or get a descriptive benchmark report by calling \*(C`report()\*(C'.  If you run your code over multiple trials, the average time is reported.  This is wonderful for benchmarking time-critical portions of code in a rigorous way. You can also optionally choose to skip any number of initial trials to cut down on initial case irregularities.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>In all of the following methods, $tag refers to the user-supplied name of the code being timed. Unless otherwise specified, $tag defaults to the tag of the last call to \*(C`start()\*(C', or \*(L"_default\*(R" if \*(C`start()\*(C' was not previously called with a tag. Constructor for the Benchmark::Timer object; returns a reference to a timer object. Takes the following named arguments:</p>
<dl class='dl-vertical'>
  <dt>
    skip
  </dt>
  <dd>
    <p>The number of trials (if any) to skip before recording timing information.</p>
  </dd>
  <dt>
    minimum
  </dt>
  <dd>
    <p>The minimum number of trials to run.</p>
  </dd>
  <dt>
    error
  </dt>
  <dd>
    <p>A percentage between 0 and 100 which indicates how much error you are willing to tolerate in the average time measured by the benchmark.  For example, a value of 1 means that you want the reported average time to be within 1% of the real average time. \*(C`need_more_samples()\*(C' will use this value to determine when it is okay to stop collecting data. If you specify an error you must also specify a confidence.</p>
  </dd>
  <dt>
    confidence
  </dt>
  <dd>
    <p>A percentage between 0 and 100 which indicates how confident you want to be in the error measured by the benchmark. For example, a value of 97.5 means that you want to be 97.5% confident that the real average time is within the error margin you have specified. \*(C`need_more_samples()\*(C' will use this value to compute the estimated error for the collected data, so that it can determine when it is okay to stop. If you specify a confidence you must also specify an error.</p>
  </dd>

</dl>
<p>Reset the timer object to the pristine state it started in. Erase all memory of tags and any previously accumulated timings. Returns a reference to the timer object. It takes the same arguments the constructor takes. Record the current time so that when \*(C`stop()\*(C' is called, we can calculate an elapsed time. Record timing information. If $tag is supplied, it must correspond to one given to a previously called \*(C`start()\*(C' call. It returns the elapsed time in milliseconds.  \*(C`stop()\*(C' croaks if the timer gets out of sync (e.g. the number of \*(C`start()\*(C's does not match the number of \*(C`stop()\*(C's.) Compute the estimated error in the average of the data collected thus far, and return true if that error exceeds the user-specified error. If a $tag is supplied, it must correspond to one given to a previously called \*(C`start()\*(C' call. This routine assumes that the data are normally distributed. Returns a string containing a simple report on the collected timings for $tag. This report contains the number of trials run, the total time taken, and, if more than one trial was run, the average time needed to run one trial and error information.  \*(C`report()\*(C' will complain (via a warning) if a tag is still active. In a scalar context, returns a string containing a simple report on the collected timings for all tags. The report is a concatenation of the individual tag reports, in the original tag order. In an list context, returns a hash keyed by tag and containing reports for each tag. The return value is actually an array, so that the original tag order is preserved if you assign to an array instead of a hash. \*(C`reports()\*(C' will complain (via a warning) if a tag is still active. Return the time it took for $tag to elapse, or the mean time it took for $tag to elapse once, if $tag was used to time code more than once. \*(C`result()\*(C' will complain (via a warning) if a tag is still active. Returns the timing data as a hash keyed on tags where each value is the time it took to run that code, or the average time it took, if that code ran more than once. In scalar context it returns a reference to that hash. The return value is actually an array, so that the original tag order is preserved if you assign to an array instead of a hash. These methods are useful if you want to recover the full internal timing data to roll your own reports. If called with a $tag, returns the raw timing data for that $tag as an array (or a reference to an array if called in scalar context). This is useful for feeding to something like the Statistics::Descriptive package. If called with no arguments, returns the raw timing data as a hash keyed on tags, where the values of the hash are lists of timings for that code. In scalar context, it returns a reference to that hash. As with \*(C`results()\*(C', the data is internally represented as an array so you can recover the original tag order by assigning to an array instead of a hash.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Benchmarking is an inherently futile activity, fraught with uncertainty not dissimilar to that experienced in quantum mechanics. But things are a little better if you apply statistics.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This code is distributed under the \s-1GNU\s0 General Public License (\s-1GPL\s0). See the file \s-1LICENSE\s0 in the distribution, http://www.opensource.org/gpl-license.html, and http://www.opensource.org/.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The original code (written before April 20, 2001) was written by Andrew Ho &lt;andrew@zeuscat.com&gt;, and is copyright (c) 2000-2001 Andrew Ho. Versions up to 0.5 are distributed under the same terms as Perl.</p><p>Maintenance of this module is now being done by David Coppit &lt;david@coppit.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Benchmark::Timer&hellip;</h2>
        <div class="sectioncontent">
<p>Benchmark, Time::HiRes, Time::Stopwatch, Statistics::Descriptive</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Benchmark::ProgressBar.3pm.html"><span aria-hidden="true">&larr;</span> Benchmark::ProgressBar.3pm: Display progress bar while you wait for your benchmark</a></li>
   <li class="next"><a href="Bencode.3pm.html">Bencode.3pm: Bittorrent serialisation format <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
