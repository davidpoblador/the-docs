<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mail::CheckUser: Check email addresses for validity</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Check email addresses for validity">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Mail::CheckUser (3pm) manual">
  <meta name="twitter:description" content="Check email addresses for validity">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmail-checkuser-perl-Mail::CheckUser-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Mail::CheckUser.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Mail::CheckUser (3pm) manual" />
  <meta property="og:description" content="Check email addresses for validity" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmail-checkuser-perl-Mail::CheckUser-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Mail::CheckUser<small> (3pm)</small></h1>
        <p class="lead">Check email addresses for validity</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Mail::CheckUser.3pm.html">
      <span itemprop="name">Mail::CheckUser: Check email addresses for validity</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmail-checkuser-perl/">
      <span itemprop="name">libmail-checkuser-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Mail::CheckUser.3pm.html">
      <span itemprop="name">Mail::CheckUser: Check email addresses for validity</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Mail::CheckUser qw(check_email);
    my $ok = check_email($email_addr);

    use Mail::CheckUser qw(:constants check_email last_check)
    my $ok = check_email($email_addr);
    print "DNS timeout&#92;n"
        if last_check()-&gt;{code} == CU_DNS_TIMEOUT;

    use Mail::CheckUser;
    my $res = Mail::CheckUser::check_email($email_addr);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This Perl module provides routines for checking validity of email address.</p><p>It makes several checks:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>It checks the syntax of an email address.</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>It checks if there any \s-1MX\s0 records or A records for the domain part of the email address.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>It tries to connect to an email server directly via \s-1SMTP\s0 to check if mailbox is valid.  Old versions of this module performed this check via the \s-1VRFY\s0 command.  Now the module uses another check; it uses a combination of \s-1MAIL\s0 and \s-1RCPT\s0 commands which simulates sending an email.  It can detect bad mailboxes in many cases.</p>
  </dd>

</dl>
<p>If is possible to turn off some or all networking checks (items 2 and 3). See \*(L"\s-1GLOBAL\s0 \s-1VARIABLES\s0\*(R".</p><p>This module was designed with CGIs (or any other dynamic Web content programmed with Perl) in mind.  Usually it is required to quickly check e-mail addresses in forms.  If the check can't be finished in reasonable time, the e-mail address should be treated as valid.  This is the default policy.  By default if a timeout happens the result of the check is treated as positive.  This behavior can be overridden - see \*(L"\s-1GLOBAL\s0 \s-1VARIABLES\s0\*(R".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IMPORTANT WARNING</h2>
        <div class="sectioncontent">
<p>In many cases there is no way to detect the validity of email addresses with network checks.  For example, non-monolithic mail servers (such as Postfix and qmail) often report that a user exists even if it is not so.  This is because in cases where the work of the server is split among many components, the \s-1SMTP\s0 server may not know how to check for the existence of a particular user.  Systems like these will reject mail to unknown users, but they do so after the \s-1SMTP\s0 conversation.  In cases like these, the only absolutely sure way to determine whether or not a user exists is to actually send a mail and wait to see if a bounce messages comes back.  Obviously, this is not a workable strategy for this module.  Does it mean that the network checks in this module are useless?  No.  For one thing, just the \s-1DNS\s0 checks go a long way towards weeding out mistyped domain parts.  Also, there are still many \s-1SMTP\s0 servers that will reject a bad address during the \s-1SMTP\s0 conversation.  Because of this, it's still a useful part of checking for a valid email address.  And this module was designed such that if there is exists possibility (however small) that the email address is valid, it will be treated as valid by this module.</p><p>Another warning is about $Mail::CheckUser::Treat_Timeout_As_Fail global variable.  Use it carefully - if it is set to true then some valid email addresses can be treated as bad simply because an \s-1SMTP\s0 or \s-1DNS\s0 server responds slowly.</p><p>Another warning is about $Mail::CheckUser::Treat_Full_As_Fail global variable.  Use it carefully - if it is set to true then some valid email addresses can be treated as bad simply because their mailbox happens to be temporarily full.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>This simple script checks if email address \*(C`blabla@foo.bar\*(C' is valid.</p><p>    use Mail::CheckUser qw(check_email last_check);</p><p>    my $email = &apos;blabla@foo.bar&apos;;</p><p>    if(check_email($email)) {         print "E-mail address &lt;$email&gt; is OK&#92;n";     } else {         print "E-mail address &lt;$email&gt; isn&apos;t valid: ",               last_check()-&gt;{reason}, "&#92;n";     }</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUBROUTINES</h2>
        <div class="sectioncontent">
<p>Validates email address $email.  Return true if email address is valid and false otherwise. Returns detailed result of last check made with \*(C`check_email\*(C' as hash reference:     { ok =&gt; OK, code =&gt; CODE, reason =&gt; REASON }</p>
<dl class='dl-vertical'>
  <dt>
    \s-1OK\s0
  </dt>
  <dd>
    <p>True if last checked email address is valid.  False otherwise.</p>
  </dd>
  <dt>
    \s-1CODE\s0
  </dt>
  <dd>
    <p>A number which describes result of last check.  See \*(L"\s-1CONSTANTS\s0\*(R".</p>
  </dd>
  <dt>
    \s-1REASON\s0
  </dt>
  <dd>
    <p>A string which describes result of last check.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTANTS</h2>
        <div class="sectioncontent">
<p>Constants used by \*(C`last_check\*(C' to describe result of last check can be exported with</p><p>    use Mail::CheckUser qw(:constants)</p><p>List of all defined constants:</p>
<dl class='dl-vertical'>
  <dt>
    \s-1CU_OK\s0
  </dt>
  <dd>
    <p>Check is successful.</p>
  </dd>
  <dt>
    \s-1CU_BAD_SYNTAX\s0
  </dt>
  <dd>
    <p>Bad syntax of email address.</p>
  </dd>
  <dt>
    \s-1CU_UNKNOWN_DOMAIN\s0
  </dt>
  <dd>
    <p>Mail domain mentioned in email address is unknown.</p>
  </dd>
  <dt>
    \s-1CU_DNS_TIMEOUT\s0
  </dt>
  <dd>
    <p>Timeout has happen during \s-1DNS\s0 checks.</p>
  </dd>
  <dt>
    \s-1CU_UNKNOWN_USER\s0
  </dt>
  <dd>
    <p>User is unknown on \s-1SMTP\s0 server.</p>
  </dd>
  <dt>
    \s-1CU_SMTP_TIMEOUT\s0
  </dt>
  <dd>
    <p>Timeout has happen during \s-1SMTP\s0 checks.</p>
  </dd>
  <dt>
    \s-1CU_SMTP_UNREACHABLE\s0
  </dt>
  <dd>
    <p>All \s-1SMTP\s0 servers for mail domain were found unreachable during \s-1SMTP\s0 checks.</p>
  </dd>
  <dt>
    \s-1CU_MAILBOX_FULL\s0
  </dt>
  <dd>
    <p>Mailbox is temporarily full but probably a valid username.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GLOBAL VARIABLES</h2>
        <div class="sectioncontent">
<p>It is possible to configure \*(C`check_email\*(C' using the global variables listed below. If true then do only syntax checks.  By default it is false. If it is true then do not try to connect to mail server to check if a user exists.  If this is true, and $Mail::CheckUser::Skip_Network_Checks is false, only syntax and \s-1DNS\s0 checks are performed.  By default it is false. By default Net::Ping is used to determine remote reachability of \s-1SMTP\s0 servers before doing \s-1SMTP\s0 checks. Setting this to true skips this check.  By default it is false. \s-1MAIL/RCPT\s0 check needs an email address to use as the 'From' address when performing its checks.  The default value is \*(C`check@user.com\*(C'. Sender domain used in \s-1HELO\s0 \s-1SMTP\s0 command.  If undef Net::SMTP is allowed to use its default value.  By default it is undef.</p>
<dl class='dl-vertical'>
  <dt>
    Mail::CheckUser::Timeout
  </dt>
  <dd>
    <p>Timeout in seconds for network checks.  By default it is 60. If it is true \*(C`Mail::CheckUser\*(C' treats checks that time out as failed.  By default it is false. If it is true \*(C`Mail::CheckUser\*(C' treats error \*(L"552 mailbox full\*(R" as an invalid email and sets \s-1CU_MAILBOX_FULL\s0. By default it is false. Override with customized Net::DNS::Resolver object. This is used to lookup \s-1MX\s0 and A records for the email domain when network checks are enabled. If undef, Net::DNS::Resolver-&gt;new will be used. The default value is undef. If it is true then enable debug output on \*(C`STDERR\*(C'.  By default it is false.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Ilya Martynov <strong>ilya@martynov.org</strong></p><p>Rob Brown <strong>bbb@cpan.org</strong></p><p>Module maintained at Source Forge ( http://sourceforge.net/projects/mail-checkuser/ ).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 1999-2003 by Ilya Martynov.  All rights reserved.</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p><p>$Id: CheckUser.pm,v 1.46 2003/09/18 23:51:36 hookbot Exp $</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Mail::CheckUser&hellip;</h2>
        <div class="sectioncontent">
<p><em>perl</em>\|(1).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Mail::Bulkmail::Server.3pm.html"><span aria-hidden="true">&larr;</span> Mail::Bulkmail::Server.3pm: Handles server connections and communication for mail::bulkmail</a></li>
   <li class="next"><a href="Mail::DKIM.3pm.html">Mail::DKIM.3pm: Signs/verifies internet mail with dkim/domainkey signatures <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
