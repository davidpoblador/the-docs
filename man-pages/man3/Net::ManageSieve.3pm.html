<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Net::ManageSieve: Managesieve protocol client</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Managesieve protocol client">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Net::ManageSieve (3pm) manual">
  <meta name="twitter:description" content="Managesieve protocol client">
  <meta name="twitter:image" content="https://www.carta.tech/images/libnet-managesieve-perl-Net::ManageSieve-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Net::ManageSieve.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Net::ManageSieve (3pm) manual" />
  <meta property="og:description" content="Managesieve protocol client" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libnet-managesieve-perl-Net::ManageSieve-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Net::ManageSieve<small> (3pm)</small></h1>
        <p class="lead">Managesieve protocol client</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::ManageSieve.3pm.html">
      <span itemprop="name">Net::ManageSieve: Managesieve protocol client</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libnet-managesieve-perl/">
      <span itemprop="name">libnet-managesieve-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Net::ManageSieve.3pm.html">
      <span itemprop="name">Net::ManageSieve: Managesieve protocol client</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Net::ManageSieve;

    # Constructors
    $sieve = Net::ManageSieve-&gt;new(&apos;localhost&apos;);
    $sieve = Net::ManageSieve-&gt;new(&apos;localhost&apos;, Timeout =&gt; 60);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module implements a client interface to the ManageSieve protocol (&lt;http://tools.ietf.org/html/draft-martin-managesieve-09&gt;). This documentation assumes that you are familiar with the concepts of the protocol.</p><p>A new Net::ManageSieve object must be created with the <em>new</em> method. Once this has been done, all ManageSieve commands are accessed through this object.</p><p><em>Note</em>: ManageSieve allows to manipulate scripts on a host running a ManageSieve service, this module does not perform, validate or something like that Sieve scipts themselves.</p><p>This module works in taint mode.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>This example prints the capabilities of the server known as mailhost:</p><p>    #!/usr/local/bin/perl -w</p><p>    use Net::ManageSieve;</p><p>    $sieve = Net::ManageSieve-&gt;new(&apos;mailhost&apos;);     print "$k=$v&#92;n" while ($k, $v) = each %{ $sieve-&gt;capabilities };     $sieve-&gt;logout;</p><p>This example lists all storred scripts on the server and requires \s-1TLS:\s0</p><p>    #!/usr/local/bin/perl -w</p><p>    use Net::ManageSieve;</p><p>    my $sieve = Net::ManageSieve-&gt;new(&apos;mailhost&apos;, tls =&gt; &apos;require&apos;)       or die "$@&#92;n";     print "Cipher: ", $sieve-&gt;get_cipher(), "&#92;n";     $sieve-&gt;login(&apos;user&apos;, &apos;password&apos;)       or die "Login: ".$sieve-&gt;error()."&#92;n";     my $scripts = $sieve-&gt;listscripts       or die "List: ".$sieve-&gt;error()."&#92;n";     my $activeScript = pop(@$scripts);         print "$_&#92;n" for sort @$scripts;     print $activeScript       ? &apos;active script: &apos; . $activeScript       : &apos;no script active&apos;      , "&#92;n";     $sieve-&gt;logout;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERROR HANDLING</h2>
        <div class="sectioncontent">
<p>By default all functions return \*(C`undef\*(C' on failure and set an error description into $@, which can be retrieved with the method \*(C`error()\*(C' as well.</p><p>The constructor accepts the setting \*(C`on_fail\*(C', which alters this behaviour by changing the step to assign $@: If its value is: the program carps the error description. If \*(C`debug\*(C' is enabled, too, the description is printed twice. the program croaks.</p>
<dl class='dl-vertical'>
  <dt>
    is a \s-1CODE\s0 ref
  </dt>
  <dd>
    <p>this subroutine is called with the arguments:  &code_ref ( $object, $error_message ) The return value controls, whether or not the error message will be assigned to $@. Private functions may just signal that an error occured, but keep $@ unchanged. In this case $@ remains unchanged, if code_ref returns true. <em>Note</em>: Even if the code ref returns false, $@ might bi clobberred by called modules. This is especially true in the \*(C`new()\*(C' constructor.</p>
  </dd>
  <dt>
    otherwise
  </dt>
  <dd>
    <p>the default behaviour is retained by setting $@.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    new ( [ \s-1HOST\s0 ] [, \s-1OPTIONS\s0 ] )
  </dt>
  <dd>
    <p>This is the constructor for a new Net::ManageSieve object. \*(C`HOST\*(C' is the name of the remote host to which an ManageSieve connection is required. \*(C`HOST\*(C' is optional. If \*(C`HOST\*(C' is not given then it may instead be passed as the \*(C`Host\*(C' option described below. If neither is given then \*(C`localhost\*(C' will be used. \*(C`OPTIONS\*(C' are passed in a hash like fashion, using key and value pairs. Possible options are: <strong>Host</strong> - ManageSieve host to connect to. It may be a single scalar, as defined for the \*(C`PeerAddr\*(C' option in IO::Socket::INET, or a reference to an array with hosts to try in turn. The \*(L"host\*(R" method will return the value which was used to connect to the host. <strong>LocalAddr</strong> and <strong>LocalPort</strong> - These parameters are passed directly to IO::Socket to allow binding the socket to a local port. <strong>Timeout</strong> - Maximum time, in seconds, to wait for a response from the ManageSieve server (default: 120) <strong>Port</strong> - Select a port on the remote host to connect to (default is 2000) <strong>Debug</strong> or <strong>debug</strong> - enable debugging if true (default \s-1OFF\s0) <em>Note</em>: All of the above options are passed through to IO::Socket::INET. <strong>tls</strong> - issue \s-1STARTTLS\s0 right after connect. If <strong>tls</strong> is a \s-1HASH\s0 ref, the mode is in member \*(C`mode\*(C', otherwise \*(C`tls\*(C' itself is the mode and an empty \s-1SSL\s0 option \s-1HASH\s0 is passed to <em>starttls()</em>. The \*(C`mode\*(C' may be one of \*(C`require\*(C' to fail, if \s-1TLS\s0 negotiation fails, or \*(C`auto\*(C', \*(C`on\*(C' or \*(C`yes\*(C', if \s-1TLS\s0 is to attempt, but a failure is ignored. (Aliases: <strong>\s-1TLS\s0</strong>, <strong>Tls</strong>) <strong>on_fail</strong> - Changes the error handling of all functions that would otherwise return undef and set $@. See section \s-1ERROR\s0 \s-1HANDLING\s0 (Aliases: <strong>On_fail</strong>) Example:     $sieve = Net::ManageSieve-&gt;new(&apos;mailhost&apos;,                            Timeout =&gt; 30,         ); use the first host one can connect to successfully \*(C`mailhost\*(C' on port 2000, the default port, then \*(C`localhost\*(C' on port 2008.     $sieve = Net::ManageSieve-&gt;new(Host =&gt; [ &apos;mailhost&apos;, &apos;localhost:2008&apos; ],                            Timeout =&gt; 30,                            tls =&gt; {                                 mode =&gt; require,                                 SSL_ca_path =&gt; &apos;/usr/ssl/cert&apos;,                            }         );</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>Unless otherwise stated all methods return either a <em>true</em> or <em>false</em> value, with <em>true</em> meaning that the operation was a success. When a method states that it returns a value, failure will be returned as <em>undef</em> or an empty list. The error is specified in $@ and can be returned with the \*(L"error\*(R" method. Please see section \s-1ERROR\s0 \s-1HANDLING\s0 for an alternative error handling scheme.</p>
<dl class='dl-vertical'>
  <dt>
    close ()
  </dt>
  <dd>
    <p>Closes the connection to the server. Any already cached data is kept active, though, there should be no pending data, if an user calls this function. Initiates a \s-1TLS\s0 session, may be used only before any authentication. The \*(C`SSL_opts\*(C' is a \s-1HASH\s0 containing any options you can pass to IO::Socket::SSL-&gt;<em>new()</em>. No one is passed by default. In order to detect in the later run, if the connection is encrypted, use the \*(C`encrypted()\*(C' function. Return: $self or \*(C`undef\*(C' on failure - the socket is still functioning, but is not encrypted.</p>
  </dd>
  <dt>
    encrypted ()
  </dt>
  <dd>
    <p>Returns \*(C`undef\*(C', if the connection is not encrypted, otherwise \*(C`true\*(C'.</p>
  </dd>
  <dt>
    get_cipher (), dump_peer_certificate (), peer_certificate ($field)
  </dt>
  <dd>
    <p>Returns \*(C`undef\*(C', if the connection is not encrypted, otherwise the functions directly calls the equally named function of IO::Socket::SSL.</p>
  </dd>
  <dt>
    auth (\s-1USER\s0 [, \s-1PASSWORD\s0 [, \s-1AUTHNAME\s0 ] ])
  </dt>
  <dd>
    <p>Authentificates as \*(C`USER\*(C'. If the module Authen::SASL is available, this module is tried first. In this case, the \*(C`USER\*(C' parameter may be a \*(C`Authen::SASL\*(C' object, that is not furtherly modified. If \*(C`USER\*(C' is no \*(C`Authen::SASL\*(C' object, \*(C`USER\*(C' is passed as \*(C`user\*(C', \*(C`PASSWORD\*(C' as \*(C`pass\*(C' and \*(C`AUTHNAME\*(C' as \*(C`authname\*(C' to \*(C`Authen::SASL-&gt;new()\*(C'. If \*(C`AUTHNAME\*(C' is undefined, \*(C`USER\*(C' is passed as \*(C`authname\*(C'. This way you can authentificate against Cyrus: \*(C`auth(&apos;cyrus&apos;, $password, $username)\*(C'. If Authen::SASL is <em>not</em> available or the initialization of it fails, this function attempts to authentificate via the \*(C`PLAIN\*(C' method. Aliases: \*(C`login\*(C', \*(C`authentificate\*(C'.</p>
  </dd>
  <dt>
    logout ()
  </dt>
  <dd>
    <p>Sends the \*(C`LOGOUT\*(C' command to the server and closes the connection to the server. Aliases: \*(C`quit\*(C', \*(C`bye\*(C'.</p>
  </dd>
  <dt>
    host ()
  </dt>
  <dd>
    <p>Returns the remote host of the connection.</p>
  </dd>
  <dt>
    capabilities ([reget])
  </dt>
  <dd>
    <p>Returns the capabilities as \s-1HASH\s0 ref, e.g.:         {           &apos;starttls&apos; =&gt; 1,           &apos;sasl&apos; =&gt; &apos;PLAIN LOGIN&apos;,           &apos;implementation&apos; =&gt; &apos;dovecot&apos;,           &apos;sieve&apos; =&gt; &apos;fileinto reject envelope vacation imapflags notify subaddress relational comparator-i;ascii-numeric regex&apos;         }; If the argument \*(C`bool\*(C' is specified and is boolean \*(C`TRUE\*(C', the capabilities are reaquired from the server using the <em>\s-1CAPABILITY\s0</em> command. Note: The initial capabilities may be different from the set acquired later.</p>
  </dd>
  <dt>
    havespace (\s-1NAME\s0, \s-1SIZE\s0)
  </dt>
  <dd>
    <p>Return whether or not a script with the specified size (and name) might fit into the space of the user on the server. Due to various reasons, the result of this function is not very reliable, because in the meantime lots of changes may take place on the server.</p>
  </dd>
  <dt>
    putscript (\s-1NAME\s0, \s-1SCRIPT\s0)
  </dt>
  <dd>
    <p>Stores the \*(C`SCRIPT\*(C' as name \*(C`NAME\*(C' on the server, the script is <em>not</em> activated by default. \*(C`SCRIPT\*(C' is a scalar in \s-1UTF-8\s0. The script must not be empty.</p>
  </dd>
  <dt>
    listscripts ()
  </dt>
  <dd>
    <p>returns an \s-1ARRAY\s0 ref of the names of the scripts. The last entry in the list, specifies the active script, it is an empty string "", if there is none. e.g.:         [       "script1",                 "script2",                 "script1"         ] means that \*(C`script1\*(C' is active currently.</p>
  </dd>
  <dt>
    setactive (\s-1NAME\s0)
  </dt>
  <dd>
    <p>Activates the script named \*(C`NAME\*(C'.</p>
  </dd>
  <dt>
    getscript (\s-1NAME\s0)
  </dt>
  <dd>
    <p>Returns the named script. The contents is in perl-internal \s-1UTF8\s0.</p>
  </dd>
  <dt>
    deletescript (\s-1NAME\s0)
  </dt>
  <dd>
    <p>Deletes the script named \*(C`NAME\*(C'.</p>
  </dd>
  <dt>
    error ()
  </dt>
  <dd>
    <p>Returns the locally cached error information in the form:  error description respn=last server response</p>
  </dd>
  <dt>
    debug ( [state] )
  </dt>
  <dd>
    <p>Returns the current state of debugging. If \*(C`state\*(C' is given, the boolean value enables or disables debugging. Encodes the string into internal \s-1UTF8\s0. If encoding is specified, it is tried first; then \*(C`utf-8-strict\*(C', and, if all fails, \*(C`Latin1\*(C', which is not fail.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The modules tries hard to pass valid \s-1UTF8\s0 data to the server and transforms the results into perl internal \s-1UTF8\s0. If latter fails, the transmitted octets are decoded using Latin1.</p><p>Script names, user names and passwords are not checked or \*(L"SASLprep\*(R"'ed (\s-1RFC\s0 4013/3454). Script names with \*(C`[&#92;0&#92;r&#92;n]\*(C' are rejected.</p><p>We accept non-synchronizing literals \*(C`{num+}\*(C' from the server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Net::ManageSieve&hellip;</h2>
        <div class="sectioncontent">
<p>&lt;http://tools.ietf.org/html/draft-martin-managesieve-09&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Steffen Kaiser This module heavily bases on Net::SMTP and Net::Cmd.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2008-2010 Steffen Kaiser. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Net::MAC.3pm.html"><span aria-hidden="true">&larr;</span> Net::MAC.3pm: Perl extension for representing and manipulating mac addresses</a></li>
   <li class="next"><a href="Net::NBName.3pm.html">Net::NBName.3pm: Netbios name service requests <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
