<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Statistics::Test::Sequence: Sequence correlation test for random numbers</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Sequence correlation test for random numbers">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Statistics::Test::Sequence (3pm) manual">
  <meta name="twitter:description" content="Sequence correlation test for random numbers">
  <meta name="twitter:image" content="https://www.carta.tech/images/libstatistics-test-sequence-perl-Statistics::Test::Sequence-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Statistics::Test::Sequence.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Statistics::Test::Sequence (3pm) manual" />
  <meta property="og:description" content="Sequence correlation test for random numbers" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libstatistics-test-sequence-perl-Statistics::Test::Sequence-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Statistics::Test::Sequence<small> (3pm)</small></h1>
        <p class="lead">Sequence correlation test for random numbers</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Statistics::Test::Sequence.3pm.html">
      <span itemprop="name">Statistics::Test::Sequence: Sequence correlation test for random numbers</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libstatistics-test-sequence-perl/">
      <span itemprop="name">libstatistics-test-sequence-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Statistics::Test::Sequence.3pm.html">
      <span itemprop="name">Statistics::Test::Sequence: Sequence correlation test for random numbers</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Statistics::Test::Sequence;
  my $tester = Statistics::Test::Sequence-&gt;new();
  $tester-&gt;set_data( [map {rand()} 1..1000000] );

  my ($metric, $actual_freq, $expected_freq) = $tester-&gt;test();
  use Data::Dumper;
  print "$metric&#92;n";
  print "Frequencies:&#92;n";
  print Dumper $actual_freq;
  print "Expected frequencies:&#92;n";
  print Dumper $expected_freq;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module implements a sequence correlation test for random number generators. It shows pairwise correlation between subsequent random numbers.</p><p>The algorithm is as follows: (Following Blobel. Citation in \s-1SEE\s0 \s-1ALSO\s0 section.)</p><ul>
<li><p>Given \*(C`N+1\*(C' random numbers \*(C`u_j\*(C'.</p></li><li><p>For all \*(C`j\*(C', compare \*(C`u_j\*(C' with \*(C`u_j+1\*(C'. If \*(C`u_j\*(C' is greater then \*(C`u_j+1\*(C', assign a 0-Bit to the number. Otherwise, assign a 1-Bit.</p></li><li><p>Find all sequences of equal Bits. For every sequence, increment a counter for the length \*(C`k\*(C' of that sequence. (Regardless of whether it's a sequence of 1's or 0's.)</p></li><li><p>For uncorrelated random numbers, the number of sequences N(k) of length \*(C`k\*(C' in the set of \*(C`N+1\*(C' random numbers is expected to be:   N(k) = 2*((k^2+3*k+1)*N - (k^3+3*k^2-k-4)) / (k+3)!</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<h3>new</h3>
<p>Creates a new random number tester.</p>
<h3>set_data</h3>
<p>Sets the random numbers to operate on. First argument must be either an array reference to an array of random numbers or a code reference.</p><p>If the first argument is a code reference, the second argument must be an integer \*(C`n\*(C'. The code reference is called \*(C`n\*(C'-times and its return values are used as random numbers.</p><p>The code reference semantics are particularily useful if you do not want to store all random numbers in memory at the same time. You can write a subroutine that, for example, generates and returns batches of 100 random numbers so no more than 101 of these numbers will be in memory at the same time. Note that if you return 100 numbers at once and pass in \*(C`n=50\*(C', you will have a sequence of 5000 random numbers.</p>
<h3>test</h3>
<p>Runs the sequence test on the data that was previously set using \*(C`set_data\*(C'.</p><p>Returns three items: The first is the root mean square of the bin residuals divided by the number of random numbers. It <em>could</em> be used as a measure for the quality of the random number generator and should be as close to zero as possible. A better metric is to compare the following two return values.</p><p>The second return value is a reference to the array of frequencies. An example is in order here. Generating one million random numbers, I get:</p><p>  [0, 416765, 181078, 56318, 11486, 1056, 150]</p><p>This means there were no sequences of length 0 (obvious), 416765 sequences of length 1, etc. There were no sequences of length 7 or greater. This example is a bad random number generator! (It's a linear congruent generator with \*(C`(a*x_i+c)%m\*(C' and \*(C`a=421\*(C', \*(C`c=64773\*(C', \*(C`m=259200\*(C', and \*(C`x_0=4711\*(C').</p><p>The third return value is similar in nature to the second in that it is a reference to an array containing sequence length frequencies. This one, however, contains the frequencies that would be expected for the given number of random numbers, were they uncorrelated. The number of bins has the maximum length of an occurring sequence as an upper limit. In the given example, you would get: (Dumped with Data::Dumper)</p><p>  $VAR1 = [             &apos;0&apos;,             &apos;416666.75&apos;,             &apos;183333.1&apos;,             &apos;52777.64722222222222222222222222222222222&apos;,             &apos;11507.89523809523809523809523809523809524&apos;,             &apos;2033.72068452380952380952380952380952381&apos;,             &apos;303.1287808641975308641975308641975308642&apos;,             # ...           ];</p><p>Note that where I put in a \*(C`# ...\*(C', you would really see a couple more lines of numbers until the numbers go below an expected frequency of 0.1. For \*(C`n=1000000\*(C' and \*(C`k=7\*(C', you get about 39 sequences, \*(C`k=8\*(C' is expected to be found 4-5 times, etc.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUBROUTINES</h2>
        <div class="sectioncontent">
<h3>expected_frequency</h3>
<p>Returns the expected frequency of the sequence length \*(C`k\*(C' in a set of \*(C`n\*(C' random numbers assuming uncorrelated random numbers.</p><p>Returns this as a Math::BigFloat.</p><p>Expects \*(C`k\*(C' and \*(C`n\*(C' as arguments.</p><p>This subroutine is memoized. (See Memoize.)</p>
<h3>faculty</h3>
<p>Computes the factulty of the first argument recursively as a Math::BigFloat. This subroutine is memoized. (See Memoize.)</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Statistics::Test::Sequence&hellip;</h2>
        <div class="sectioncontent">
<p>Math::BigFloat, Memoize, Params::Util</p><p>Random number generators: Math::Random::MT, Math::Random, Math::Random::OO, Math::TrulyRandom, \*(C`/dev/random\*(C' where available</p><p>The algorithm was taken from: (German)</p><p>Blobel, V., and Lohrmann, E. <em>Statistische und numerische Methoden</em> der Datenanalyse. Stuttgart, Leipzig: Teubner, 1998</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Steffen Mueller, &lt;smueller@cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2007 by Steffen Mueller</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.6 or, at your option, any later version of Perl 5 you may have available.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Statistics::Test::RandomWalk.3pm.html"><span aria-hidden="true">&larr;</span> Statistics::Test::RandomWalk.3pm: Random walk test for random numbers</a></li>
   <li class="next"><a href="Stone.3pm.html">Stone.3pm: In-memory storage for hierarchical tag/value data structures <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
