<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>J1P: C library functions for creating and accessing dynamic arrays</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="C library functions for creating and accessing dynamic arrays">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="J1P (3) manual">
  <meta name="twitter:description" content="C library functions for creating and accessing dynamic arrays">
  <meta name="twitter:image" content="https://www.carta.tech/images/libjudy-dev-J1P-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/J1P.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="J1P (3) manual" />
  <meta property="og:description" content="C library functions for creating and accessing dynamic arrays" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libjudy-dev-J1P-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">J1P<small> (3)</small></h1>
        <p class="lead">C library functions for creating and accessing dynamic arrays</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/J1P.3.html">
      <span itemprop="name">J1P: C library functions for creating and accessing dynamic arrays</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libjudy-dev/">
      <span itemprop="name">libjudy-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/J1P.3.html">
      <span itemprop="name">J1P: C library functions for creating and accessing dynamic arrays</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>Judy1</strong>  - maps an <strong>Index</strong> (word) to a <strong>bit</strong>
<strong>JudyL</strong>  - maps an <strong>Index</strong> (word) to a <strong>Value</strong> (word/pointer)
<strong>JudySL</strong> - maps an <strong>Index</strong> (null terminated string) to a <strong>Value</strong>
<strong>JudyHS</strong> - maps an <strong>Index</strong> (array-of-bytes) of <strong>Length</strong> to a <strong>Value</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Judy family of functions supports fully dynamic arrays.  These arrays may be indexed by a 32- or 64-bit word (depending on processor word size), a null terminated string or an array-of-bytes plus length. A dynamic array (sparsely populated) can also be thought of as a <em>mapping function</em> or <em>associative memory</em>.</p><p>A <strong>Word_t</strong> is a <em>typedef unsigned long int </em> in <strong>Judy.h</strong> and must be the same size as <em>sizeof(void *)</em> I.E. a pointer.</p><p><strong>Judy1</strong> functions: <strong>Index</strong> is a <strong>Word_t</strong> and <strong>Value</strong> is just a <strong>bit</strong> or simply a flag that <strong>Index</strong> is present or missing from the array. This can be thought of as a huge bitmap.</p><p><strong>JudyL</strong> functions: <strong>Index</strong> is a <strong>Word_t</strong> and <strong>Value</strong> is a <strong>Word_t</strong>.  This makes <strong>JudyL</strong> a pure word-to-word/pointer mapper.  <strong>JudySL</strong> and <strong>JudyHL</strong> are based on this property of <strong>JudyL</strong>.</p><p><strong>JudySL</strong> functions: <strong>Index</strong> is a null-terminated string and <strong>Value</strong> is a <strong>Word_t</strong>.</p><p><strong>JudyHS</strong> functions:  <strong>Index</strong> is an array-of-bytes of length:  <strong>Length</strong>.  <strong>Value</strong> is a <strong>Word_t</strong>.  This new addition (May 2004) to Judy is a hybird using the best features of hashing and Judy methods.  The author believes <strong>JudyHS</strong> is a good replacement for a hashing method when resizing the hash table is done during population growth.  A correctly tuned hash method with a <strong>static</strong> hash table size and population is unbeatable for speed.  However, <strong>JudyHS</strong> will perform better than a hashing method with smaller and larger populations than the optimum hash table size.  <strong>JudyHS</strong> does not have a degenerate performance case where knowledge of the hash algorithm can be exploited.  (I.E.  JudyHS does not use a linked list to handle hash collisions, it uses a tree of <strong>JudyL</strong> arrays and a virtual hash table size of 4 billion).</p><p>Judy arrays are both <strong>speed-</strong> -efficient<strong>, with no</strong> tuning or configuration required, across a wide range of index set types (sequential, periodic, clustered, random).  Judy's speed and memory usage are typically better than other data storage models such as skiplists, linked lists, binary, ternary, b-trees, or even hashing, and improves with very large data sets.</p><p>A Judy array is created merely by defining a null pointer and then storing (inserting) the first element into the array under that pointer. The memory used by a Judy array is nearly proportional to the population (number of elements).</p><p>Judy has two Application Program Interfaces (APIs):  a C macro interface, and a function call interface.  Because the macro forms are sometimes faster and have a simpler error handling interface than the equivalent functions, they are the preferred way of using the Judy functions.</p><p>Since an initial (empty) Judy array is represented by a null pointer, it is possible to construct an array of Judy arrays.  In other words, a Judy array's <strong>Values</strong> (except Judy1) can be pointers to other Judy arrays.  This makes it very simple to construct an array with an arbitrary number of dimensions or <strong>Index</strong> sizes.  (JudySL and JudyHS are implemented using JudyL this way).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">A 10 MINUTE TECHNICAL DESCRIPTION</h2>
        <div class="sectioncontent">
<p>may be found at <em>http://judy.sourceforge.net/downloads/10minutes.htm</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">A 3 HOUR TECHNICAL DESCRIPTION (out of date and a bit corny)</h2>
        <div class="sectioncontent">
<p>may be found at <em>http://judy.sourceforge.net/application/shop_interm.pdf</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">\fBDOWNLOADS\fP</h2>
        <div class="sectioncontent">
<p>Judy source downloads are available at <em>http://sourceforge.net/projects/judy</em></p><p>Binarys may be built and installed in a minute or two after downloading</p><p>For versions including more platforms and/or new features see: <em>http://judy.sourceforge.net/downloads/</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Judy was invented by Doug Baskins (dougbaskins .AT, yahoo.com) and implemented by Hewlett-Packard.  (Note:  Judy is named for the inventor's sister, after discarding many proposed names.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">\fBFILES\fP</h2>
        <div class="sectioncontent">
<p>Locations of interest include:</p><p><em>http://sourceforge.net/projects/judy</em> -- project downloads</p><p><em>file:/usr/share/doc/Judy/</em> -- for HTML version of man pages.</p><p>/usr/share/doc/Judy/demo/ -- demonstration program source files.</p><p>The author attempted to write interesting application notes using advanced features of Judy.  They may be found at <em>"http://judy.sourceforge.net/application/</em> (Some may be out of date).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">\fBERRORS\fP</h2>
        <div class="sectioncontent">
<p>A lot of thought (and time) went into making error handling in Judy simple, while maintaining flexibility and capability.  Error handling is a very boring subject even to write about.  So read this short section and use the recommended second method.  It generates the fastest code, uses the least amount of memory and requires you to write extra code only for insert/deletes functions.  Also it is compatible with the other two methods.  This method is for production code that may want to handle <em>malloc()</em> fails differently than the Judy default.  If the Judy default method of handling <em>malloc()</em> fails are OK, then use the first method.</p><p>There are <em>two (2)</em> categories of Judy error returns, (or for any dynamic ADT):</p><p>1) User programming errors (bugs) such as memory corruption or invalid pointers.</p><p>2) Out-of-memory (<em>malloc()</em> failure) with <strong>I</strong>nsert (<strong>S</strong>et) or <strong>D</strong>elete (<strong>U</strong>nset) when modifying a Judy array.  Not all calls to insert and delete call <em>malloc()</em>, so they may succeed even when a call to <em>malloc()</em> would fail.</p><p>There are roughly <em>three (3)</em> methods of handling errors when using the macros:</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">1) Default Error Handling Method</h2>
        <div class="sectioncontent">
<p>The default is to print error messages to <strong>stderr</strong>, for example:</p>
<pre>
File 'YourCfile.c', line 1234: JudyLIns(), JU_ERRNO_* == 2, ID == 321
</pre>
<p>This indicates that an error occurred in the <strong>JudyLIns()</strong> function at line 321.  Line 1234 is the line in 'YourCfile.c' where the <strong>JLI()</strong> call failed.  JU_ERRNO_* == 2 is equal to JU_ERRNO_NOMEM (as defined in the <strong>Judy.h</strong> file).  The ID number indicates the source line number in the function where the error originated.  Your program then terminates with an <strong>exit</strong>(1);</em>.  By default, both categories of Judy error returns are printed this way.  (The 'ID == 321' is for die hards that want more detail or for debugging Judy itself.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">2) Disable Macro Error Handling</h2>
        <div class="sectioncontent">
<p>When your program is "bug free", the only errors returned should be <em>malloc()</em> failures.  Therefore all error returns can be treated as a <em>malloc()</em> failure.  By using the below <strong>#define</strong>, all error testing and printing is turned off.  Additional code needs to be added to the code that can have <em>malloc()</em> failures.  Judy was designed to leave the same data in the array before the call if a <em>malloc()</em> fail occurs.  (During testing of Judy, we found very few <em>malloc()</em>/OS's that were bug free after a <em>malloc()</em> failure. Sometimes it took weeks to discover because most systems go into a paging frenzy before running out of memory).</p>
<pre>
#define JUDYERROR_NOTEST 1
</pre>
<p>(in your program code), or</p>
<pre>
cc -DJUDYERROR_NOTEST <em>sourcefile</em> -lJudy
</pre>
<p>(on your command line).</p>
<pre>
// This is an example of how to program using method two (2).

JLI(PValue, PLArray, Index);
if (PValue == PJERR) goto out_of_memory_handling;
&.&.&.

JLD(RC_int, PLArray, Index);
if (RC_int == JERR) goto out_of_memory_handling;
&.&.&.

J1S(RC_int, P1Array, Index);
if (RC_int == JERR) goto out_of_memory_handling;
&.&.&.

J1U(RC_int, P1Array, Index);
if (RC_int == JERR) goto out_of_memory_handling;
&.&.&.

</pre>
<p>Note:  Without 'JUDYERROR_NOTEST' defined, the 'goto out_of_memory_handling' will never be executed and will be optimized out by the compiler.  The default method will be used -- Macro will print error information if an error occurs as explained above.</p><p>With 'JUDYERROR_NOTEST' defined, the 'goto out_of_memory_handling' will be executed when an error occurs -- which should only happen when <em>malloc()</em> fails.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">3) User-Specified JUDYERROR() Macro Method</h2>
        <div class="sectioncontent">
<p>The <strong>JUDYERROR()</strong> macro (in <strong>Judy.h</strong>) provides flexibility for handling error returns as needed to suit your program while still using the Judy array macros instead of function calls.  You can use a different <strong>JUDYERROR()</strong> macro to suit your needs.  The following example is a possible alternative to the default. It is used to distinguish between the two types of errors (described above), and explicitly test for the remaining JU_ERRNO_NOMEM errors possible in your program.</p>
<pre>
// This is an example of Judy macro API to continue when out of memory
// and print and <strong>exit</strong>(1) when any other error occurs.

#ifndef JUDYERROR_NOTEST
#include &lt;stdio.h&gt;  // needed for fprintf()

// This is the macro that the Judy macro APIs use for return codes of -1:

#define JUDYERROR(CallerFile, CallerLine, JudyFunc, JudyErrno, JudyErrID) &#92;
{                                                                         &#92;
    if ((JudyErrno) != JU_ERRNO_NOMEM) /* ! a malloc() failure */         &#92;
    {                                                                     &#92;
        (void) fprintf(stderr, "File '%s', line %d: %s(), "               &#92;
            "JU_ERRNO_* == %d, ID == %d&#92;n",                               &#92;
            CallerFile, CallerLine,                                       &#92;
            JudyFunc, JudyErrno, JudyErrID);                              &#92;
        <strong>exit</strong>(1);                                                          &#92;
    }                                                                     &#92;
}
#endif // JUDYERROR_NOTEST not defined

</pre>
<p>This error handling macro must be included before the <strong>#include &lt;Judy.h&gt;</strong> statement in your program.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO J1P&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/Judy1.3.html"><strong>Judy1</strong>(3)</a></strong>, <a href="../man3/JudyL.3.html"><strong>JudyL</strong>(3)</a></strong>, <a href="../man3/JudySL.3.html"><strong>JudySL</strong>(3)</a></strong>, <a href="../man3/JudyHS.3.html"><strong>JudyHS</strong>(3)</a></strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="J1NE.3.html"><span aria-hidden="true">&larr;</span> J1NE.3: C library functions for creating and accessing dynamic arrays</a></li>
   <li class="next"><a href="J1PE.3.html">J1PE.3: C library functions for creating and accessing dynamic arrays <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
