<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>open_memstream - open a dynamic memory buffer stream</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="${metadescription}">
  
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">open_memstream<small> (3)</small></h1>
        <p class="lead">open a dynamic memory buffer stream</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man3/"><span itemprop="title">Library calls</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man3/open_memstream.3.html"><span itemprop="title">open_memstream</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>#include &lt;stdio.h&gt;</strong>

<strong>FILE *open_memstream(char **</strong><em>ptr</em><strong>, size_t *</strong><em>sizeloc</em><strong>);</strong>

<strong>#include &lt;wchar.h&gt;</strong>

<strong>FILE *open_wmemstream(wchar_t **</strong><em>ptr</em><strong>, size_t *</strong><em>sizeloc</em><strong>);</strong></pre>

<p class='spacer'>

<p>Feature Test Macro Requirements for glibc (see <a href="../man7/feature_test_macros.7.html"><strong>feature_test_macros</strong>(7)</a>):</p>
<p class='spacer'>

    <p><strong>open_memstream</strong>(), <strong>open_wmemstream</strong>():</p>
    <dl class='dl-vertical'>
      <dt>Since glibc 2.10:</dt>
      <dd>
    <p>_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200809L</p>
      </dd>
      <dt>Before glibc 2.10:</dt>
      <dd>
    <p>_GNU_SOURCE</p>
      </dd>
    </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The <strong>open_memstream</strong>() function opens a stream for writing to a memory buffer. The function dynamically allocates the buffer, and the buffer automatically grows as needed. Initially, the buffer has a size of zero. After closing the stream, the caller should <a href="../man3/free.3.html"><strong>free</strong>(3)</a> this buffer.</p>
<p class='spacer'>

<p>The locations pointed to by <em>ptr</em> and <em>sizeloc</em> are used to report, respectively, the current location and the size of the buffer. The locations referred to by these pointers are updated each time the stream is flushed (<a href="../man3/fflush.3.html"><strong>fflush</strong>(3)</a>) and when the stream is closed (<a href="../man3/fclose.3.html"><strong>fclose</strong>(3)</a>). These values remain valid only as long as the caller performs no further output on the stream. If further output is performed, then the stream must again be flushed before trying to access these values.</p>
<p class='spacer'>

<p>A null byte is maintained at the end of the buffer. This byte is <em>not</em> included in the size value stored at <em>sizeloc</em>.</p>
<p class='spacer'>

<p>The stream maintains the notion of a current position, which is initially zero (the start of the buffer). Each write operation implicitly adjusts the buffer position. The stream's buffer position can be explicitly changed with <a href="../man3/fseek.3.html"><strong>fseek</strong>(3)</a> or <a href="../man3/fseeko.3.html"><strong>fseeko</strong>(3)</a>. Moving the buffer position past the end of the data already written fills the intervening space with null characters.</p>
<p class='spacer'>

<p>The <strong>open_wmemstream</strong>() is similar to <strong>open_memstream</strong>(), but operates on wide characters instead of bytes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">

<p>Upon successful completion, <strong>open_memstream</strong>() and <strong>open_wmemstream</strong>() return a <em>FILE</em> pointer. Otherwise, NULL is returned and <em>errno</em> is set to indicate the error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSIONS</h2>
        <div class="sectioncontent">

<p><strong>open_memstream</strong>() was already available in glibc 1.0.x. <strong>open_wmemstream</strong>() is available since glibc 2.4.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ATTRIBUTES</h2>
        <div class="sectioncontent">

<p>For an explanation of the terms used in this section, see <a href="../man7/attributes.7.html"><strong>attributes</strong>(7)</a>.</p>
<p class='spacer'>

<table class="table table-striped">
<tr>
<th>Interface</th>
<th>Attribute</th>
<th>Value</th></tr>

<tr>
<td><strong>open_memstream</strong>(),   <strong>open_wmemstream</strong>  </td>
<td>Thread safety</td>
<td>MT-Safe</td></tr>
</table>

<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">

<p>POSIX.1-2008. These functions are not specified in POSIX.1-2001, and are not widely available on other systems.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<p>There is no file descriptor associated with the file stream returned by these functions (i.e., <a href="../man3/fileno.3.html"><strong>fileno</strong>(3)</a> will return an error if called on the returned stream).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p>In glibc before version 2.7, seeking past the end of a stream created by <strong>open_memstream</strong>() does not enlarge the buffer; instead the <a href="../man3/fseek.3.html"><strong>fseek</strong>(3)</a> call fails, returning -1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<p>See <a href="../man3/fmemopen.3.html"><strong>fmemopen</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man3/fmemopen.3.html"><strong>fmemopen</strong>(3)</a>, <a href="../man3/fopen.3.html"><strong>fopen</strong>(3)</a>, <a href="../man3/setbuf.3.html"><strong>setbuf</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
  <li class="previous"><a href="on_exit.3.html"><span aria-hidden="true">&larr;</span> on_exit.3: register a function to be called at normal process termination</a></li><li class="next"><a href="open_wmemstream.3.html">open_wmemstream.3: open a dynamic memory buffer stream <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
