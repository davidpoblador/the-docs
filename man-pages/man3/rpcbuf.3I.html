<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rpcbuf: Streambuf specialized for sending and receiving rpc requests</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Streambuf specialized for sending and receiving rpc requests">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="rpcbuf (3I) manual">
  <meta name="twitter:description" content="Streambuf specialized for sending and receiving rpc requests">
  <meta name="twitter:image" content="https://www.carta.tech/images/ivtools-dev-rpcbuf-3I.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3I/rpcbuf.3I.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="rpcbuf (3I) manual" />
  <meta property="og:description" content="Streambuf specialized for sending and receiving rpc requests" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ivtools-dev-rpcbuf-3I.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">rpcbuf<small> (3I)</small></h1>
        <p class="lead">Streambuf specialized for sending and receiving rpc requests</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3I/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3I/rpcbuf.3I.html">
      <span itemprop="name">rpcbuf: Streambuf specialized for sending and receiving rpc requests</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ivtools-dev/">
      <span itemprop="name">ivtools-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3I/rpcbuf.3I.html">
      <span itemprop="name">rpcbuf: Streambuf specialized for sending and receiving rpc requests</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;Dispatch/rpcbuf.h&gt;</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>An rpcbuf is a streambuf specialized in two ways: to use an IPC connection as a source or sink of characters and to send and receive RPC requests.  The rpcbuf encloses RPC requests in packets which begin with a length field so that the rpcbuf can buffer requests until they are complete if the user uses non-blocking I/O.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>rpcbuf(iostreamb* = nil)</strong></p>
  </dt>
  <dd>
    <p>Construct an unopened rpcbuf, giving it a pointer to an iostreamb so that the rpcbuf can read and write the length field of RPC requests.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IPC OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>const char* host()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>int port()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>int fd()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>boolean opened()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>boolean nonblocking()</strong></p>
  </dt>
  <dd>
    <p>Return information about the IPC connection.</p>
  </dd>
  <dt>
    <p><strong>enum { anyport = 0 }</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>rpcbuf* listen(int port)</strong></p>
  </dt>
  <dd>
    <p>Create a socket, bind the socket to a &lt;localhost, port&gt; address, and prepare to accept incoming connections.  anyport can be used in place of a specific port number.  Return the rpcbuf's address if successful, nil otherwise.</p>
  </dd>
  <dt>
    <p><strong>rpcbuf* connect(const char* host, int port)</strong></p>
  </dt>
  <dd>
    <p>Create a socket and connect it to a peer at the &lt;host, port&gt; address. Return the rpcbuf's address if successful, nil otherwise.</p>
  </dd>
  <dt>
    <p><strong>rpcbuf* accept(int& fd)</strong></p>
  </dt>
  <dd>
    <p>Accept an incoming connection, allocate a new file descriptor for it, and assign the new file descriptor to the parameter.  Return the rpcbuf's address if successful, nil otherwise.  Can be called only for rpcbufs that have already called listen.</p>
  </dd>
  <dt>
    <p><strong>rpcbuf* attach(int fd)</strong></p>
  </dt>
  <dd>
    <p>Attach the rpcbuf to a file descriptor.  The rpcbuf will not be allowed to close the file descriptor.</p>
  </dd>
  <dt>
    <p><strong>rpcbuf* nonblocking(boolean)</strong></p>
  </dt>
  <dd>
    <p>Enable or disable non-blocking I/O on the file descriptor (disabled by default).</p>
  </dd>
  <dt>
    <p><strong>rpcbuf* verbose(boolean)</strong></p>
  </dt>
  <dd>
    <p>Enable or disable printing of error messages when anything goes wrong (enabled by default).</p>
  </dd>
  <dt>
    <p><strong>rpcbuf* close()</strong></p>
  </dt>
  <dd>
    <p>Flush the get and put areas, close the file descriptor if it was created by the rpcbuf, and detach the rpcbuf from the file descriptor.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RPC OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>int start_request()</strong></p>
  </dt>
  <dd>
    <p>If a current request exists, compute its length and insert the length into the request's length field.  Then start a new request, making sure to leave space for the request's length field.  Return 0 if no problem occurred, EOF otherwise.</p>
  </dd>
  <dt>
    <p><strong>int read_request()</strong></p>
  </dt>
  <dd>
    <p>Return 0 if a complete request is buffered in the get area, EOF otherwise.  The rpcbuf moves the get pointer back to the beginning of the request after extracting the length field and checking that the get area contains that many bytes.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STREAMBUF OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>virtual int overflow(int c=EOF)</strong></p>
  </dt>
  <dd>
    <p>If given EOF, terminate the current request.  Flush all requests buffered in the put area except for the last request if it's still incomplete.  Shift any still incomplete request to the beginning of the put area.  If given a character, append it to the request.</p>
  </dd>
  <dt>
    <p><strong>virtual int underflow()</strong></p>
  </dt>
  <dd>
    <p>Flush the put area.  Shift any still unread or incomplete requests to the beginning of the get area and position the get pointer at the beginning of the get area.  Read as much data as available to fill the rest of the get area.  Return the get area's first character or EOF if a problem occurred.</p>
  </dd>
  <dt>
    <p><strong>virtual int sync()</strong></p>
  </dt>
  <dd>
    <p>Discard any still unread requests from the get area.  Flush all buffered requests from the put area.</p>
  </dd>
  <dt>
    <p><strong>virtual streampos seekoff(streamoff, ios::seek_dir, int)</strong></p>
  </dt>
  <dd>
    <p>Allow the user to find the get pointer's current position so the user can compute how many bytes the get pointer moved between calls to seekoff.  Return EOF if the user tries to do anything else than find the get pointer's current position.</p>
  </dd>
  <dt>
    <p><strong>virtual streambuf* setbuf(char*, int)</strong></p>
  </dt>
  <dd>
    <p>Reject any attempt to set the buffer used to store incoming and outgoing requests.  The rpcbuf dynamically allocates separate buffers for both areas and automatically resizes the buffers whenever necessary.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO rpcbuf&hellip;</h2>
        <div class="sectioncontent">
<p>IOS.INTRO(3C++), rpcstream(3I)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="iostreamb.3I.html"><span aria-hidden="true">&larr;</span> iostreamb.3I: Unformatted streams</a></li>
   <li class="next"><a href="rpcstream.3I.html">rpcstream.3I: Iostreamb specialized to rpc requests <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
