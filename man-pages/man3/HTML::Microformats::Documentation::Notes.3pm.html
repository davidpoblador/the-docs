<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HTML::Microformats::Documentation::Notes: Misc usage and design notes</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Misc usage and design notes">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="HTML::Microformats::Documentation::Notes (3pm) manual">
  <meta name="twitter:description" content="Misc usage and design notes">
  <meta name="twitter:image" content="https://www.carta.tech/images/libhtml-microformats-perl-HTML::Microformats::Documentation::Notes-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/HTML::Microformats::Documentation::Notes.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="HTML::Microformats::Documentation::Notes (3pm) manual" />
  <meta property="og:description" content="Misc usage and design notes" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libhtml-microformats-perl-HTML::Microformats::Documentation::Notes-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">HTML::Microformats::Documentation::Notes<small> (3pm)</small></h1>
        <p class="lead">Misc usage and design notes</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/HTML::Microformats::Documentation::Notes.3pm.html">
      <span itemprop="name">HTML::Microformats::Documentation::Notes: Misc usage and design notes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libhtml-microformats-perl/">
      <span itemprop="name">libhtml-microformats-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/HTML::Microformats::Documentation::Notes.3pm.html">
      <span itemprop="name">HTML::Microformats::Documentation::Notes: Misc usage and design notes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<h3>Byzantine Internals</h3>
<p>The internals of HTML::Microformats are pretty complicated - best to steer clear of them. Here are three usage patterns that mostly avoid dealing with the internals:</p><ul>
<li><p><strong>Parse a page and use it as a single \s-1RDF\s0 graph.</strong> A page can be parsed into an RDF::Trine::Model and queried using \s-1SPARQL\s0.</p>
<pre>
        use HTML::Microformats;
        use LWP::Simple qw[get];
        use RDF::Query;

        my $page  = &apos;http://example.net/&apos;;
        my $graph = HTML::Microformats
                       -&gt;new_document(get($page), $page)
                       -&gt;assume_all_profiles
                       -&gt;parse_microformats
                       -&gt;model;

        my $query = RDF::Query-&gt;new(&lt;&lt;SPARQL);
        PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
        SELECT DISTINCT ?friendname ?friendpage
        WHERE {
                &lt;$page&gt; ?p ?friendpage .
                ?person foaf:name ?friendname ;
                        foaf:page ?friendpage .
                FILTER (
                        isURI(?friendpage)
                        && isLiteral(?friendname)
                        && regex(str(?p), "^http://vocab.sindice.com/xfn#(.+)-hyperlink")
                )
        }
        SPARQL

        my $results = $query-&gt;execute($graph);
        while (my $result = $results-&gt;next)
        {
                printf("%s &lt;%s&gt;&#92;n",
                        $result-&gt;{friendname}-&gt;literal_value,
                        $result-&gt;{friendpage}-&gt;uri,
                        );
        }
</pre>
</li><li><p><strong>Use the data method on each object.</strong> The \*(C`data\*(C' method on microformat objects returns a hashref of useful data.         use HTML::Microformats;         use LWP::Simple qw[get];</p><p>        my $page     = &apos;http://example.net/&apos;;         my @xfn_objs = HTML::Microformats                        -&gt;new_document(get($page), $page)                        -&gt;assume_all_profiles                        -&gt;parse_microformats                        -&gt;objects(&apos;XFN&apos;);</p><p>        while (my $xfn = shift @xfn_objs)         {                 printf("%s &lt;%s&gt;&#92;n",                         $xfn-&gt;data-&gt;{title},                         $xfn-&gt;data-&gt;{href},                         );         } (If you're wondering why the second example's simpler it's because it returns somewhat dumber data.)</p></li><li><p><strong>Convert to other formats.</strong> Various microformat objects have \*(C`to_foo\*(C' methods allowing the data to be exported in various formats..         use HTML::Microformats;         use LWP::Simple qw[get];</p><p>        my $page     = &apos;http://example.net/&apos;;         my @hcards   = HTML::Microformats                        -&gt;new_document(get($page), $page)                        -&gt;assume_all_profiles                        -&gt;parse_microformats                        -&gt;objects(&apos;hCard&apos;);</p><p>        print $_-&gt;to_vcard foreach @hcards; Methods available are:</p><ul>
<li><p>\*(C`to_vcard\*(C' (hCard objects) Exports as vCard 3.0.</p></li><li><p>\*(C`to_vcard4\*(C' (hCard objects) Exports as vCard 4.0.</p></li><li><p>\*(C`to_vcard4_xml\*(C' (hCard objects) Exports as vCard \s-1XML\s0.</p></li><li><p>\*(C`to_icalendar\*(C' (hCalendar, hEvent, hTodo, hFreebusy, hAlarm and hEntry objects) Exports as iCalendar.</p></li><li><p>\*(C`to_atom\*(C' (hAtom and hEntry objects) Exports as Atom 1.0.</p></li><li><p>\*(C`to_kml\*(C' (geo objects) Exports as \s-1KML\s0 2.0.</p></li><li><p>\*(C`serialialise_model(as =&gt; $format)\*(C' (all microformat objects) Exports as \s-1RDF\s0, serialised as $format. (Format can be '\s-1RDFXML\s0', 'Turtle', 'NTriples', '\s-1RDFJSON\s0'.)</p></li>
</ul></li>
</ul>
<h3>Stuff that's b0rked</h3>
<p>The \*(C`get_foo\*(C', \*(C`set_foo\*(C', \*(C`add_foo\*(C', \*(C`clear_foo\*(C' methods defined in HTML::Microformats::Format work unreliably and are poorly documented. You're better off using the \*(C`data\*(C' method and inspecting the returned structure for the data you need. This will be fixed in the future.</p>
<h3>Here be monsters</h3>
<p>There are several parts of the code which are incredibly complicated and desperately need refactoring. This will be done at some point, so don't rely too much on their current behaviour.</p><p>\*(C`stringify\*(C' and \*(C`_stringify_helper\*(C' in HTML::Microformats::Utilities. The whole of HTML::Microformats::Mixin::Parser.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO HTML::Microformats::Documentation::Notes&hellip;</h2>
        <div class="sectioncontent">
<p>HTML::Microformats.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Toby Inkster &lt;tobyink@cpan.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENCE</h2>
        <div class="sectioncontent">
<p>Copyright 2008-2012 Toby Inkster</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="HTML::Microformats::DocumentContext.3pm.html"><span aria-hidden="true">&larr;</span> HTML::Microformats::DocumentContext.3pm: Context for microformat objects</a></li>
   <li class="next"><a href="HTML::Microformats::Format.3pm.html">HTML::Microformats::Format.3pm: Base microformat class <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
