<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>systools: A set of release handling tools.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A set of release handling tools.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="systools (3erl) manual">
  <meta name="twitter:description" content="A set of release handling tools.">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-systools-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/systools.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="systools (3erl) manual" />
  <meta property="og:description" content="A set of release handling tools." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-systools-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">systools<small> (3erl)</small></h1>
        <p class="lead">A set of release handling tools.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/systools.3erl.html">
      <span itemprop="name">systools: A set of release handling tools.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/systools.3erl.html">
      <span itemprop="name">systools: A set of release handling tools.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module contains functions to generate boot scripts (<em>.boot</em>, <em>.script</em>), release upgrade scripts (<em>relup</em>), and release packages.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> make_relup(Name, UpFrom, DownTo) -&gt; Result</p><p><strong></strong> make_relup(Name, UpFrom, DownTo, [Opt]) -&gt; Result</p><p>Types:</p><p>Name = string()</p><p>UpFrom = DownTo = [Name | {Name,Descr}]</p><p> Descr = term()</p><p>Opt = {path,[Dir]} | restart_emulator | silent | noexec | {outdir,Dir} | warnings_as_errors</p><p> Dir = string()</p><p>Result = ok | error | {ok,Relup,Module,Warnings} | {error,Module,Error}</p><p> Relup - see <a href="../man5/relup.5.html"><strong>relup</strong>(5)</a></p><p> Module = atom()</p><p> Warnings = Error = term()</p><p>Generates a release upgrade file <em>relup</em> containing a script which describes how to upgrade the system from a number of previous releases, and how to downgrade to a number of previous releases. The script is used by <em>release_handler</em> when installing a new version of a release in run-time.</p><p>By default, <em>relup</em> is placed in the current working directory. If the option <em>{outdir,Dir}</em> is provided, <em>relup</em> is placed in <em>Dir</em> instead.</p><p>The release resource file <em>Name.rel</em> is compared with all release resource files <em>Name2.rel</em> specified in <em>UpFrom</em> and <em>DownTo</em>. For each such pair, it is deducted:</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>Which applications should be deleted, that is applications which are listed in <em>Name.rel</em> but not in <em>Name2.rel</em>.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>Which applications should be added, that is applications which are listed in <em>Name2.rel</em> but not in <em>Name.rel</em>.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>Which applications should be upgraded/downgraded, that is applications listed in both <em>Name.rel</em> and <em>Name2.rel</em>, but with different versions.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>If the emulator needs to be restarted after upgrading or downgrading, that is if the ERTS version differs between <em>Name.rel</em> and <em>Name2.rel</em>.</p>
  </dd>

</dl>
<p>Instructions for this are added to the <em>relup</em> script in the above order. Instructions for upgrading or downgrading between application versions are fetched from the relevant application upgrade files <em>App.appup</em>, sorted in the same order as when generating a boot script, see <em>make_script/1,2</em>. High-level instructions are translated into low-level instructions and the result is printed to <em>relup</em>.</p><p>The optional <em>Descr</em> parameter is included as-is in the <em>relup</em> script, see <a href="../man5/relup.5.html"><strong>relup</strong>(5)</a></em>. Defaults to the empty list.</p><p>All the files are searched for in the code path. It is assumed that the <em>.app</em> and <em>.appup</em> file for an application is located in the same directory.</p><p>If the option <em>{path,[Dir]}</em> is provided, this path is appended to the current path. The wildcard <em>*</em> is expanded to all matching directories. Example: <em>lib/*/ebin</em>.</p><p>If the <em>restart_emulator</em> option is supplied, a low-level instruction to restart the emulator is appended to the relup scripts. This ensures that a complete reboot of the system is done when the system is upgraded or downgraded.</p><p>If an upgrade includes a change from an emulator earlier than OTP R15 to OTP R15 or later, the warning <em>pre_R15_emulator_upgrade</em> is issued. See <strong>Design Principles</strong> for more information about this.</p><p>By default, errors and warnings are printed to tty and the function returns <em>ok</em> or <em>error</em>. If the option <em>silent</em> is provided, the function instead returns <em>{ok,Relup,Module,Warnings}</em> where <em>Relup</em> is the release upgrade script, or it returns <em>{error,Module,Error}</em>. Warnings and errors can be converted to strings by calling <em>Module:format_warning(Warnings)</em> or <em>Module:format_error(Error)</em>.</p><p>If the option <em>noexec</em> is provided, the function returns the same values as for <em>silent</em> but no <em>relup</em> file is created.</p><p>If the option <em>warnings_as_errors</em> is provided, warnings are treated as errors.</p><p><strong></strong> make_script(Name) -&gt; Result</p><p><strong></strong> make_script(Name, [Opt]) -&gt; Result</p><p>Types:</p><p>Name = string()</p><p>Opt = src_tests | {path,[Dir]} | local | {variables,[Var]} | exref | {exref,[App]}] | silent | {outdir,Dir} | no_dot_erlang | no_warn_sasl | warnings_as_errors</p><p> Dir = string()</p><p> Var = {VarName,Prefix}</p><p> VarName = Prefix = string()</p><p> App = atom()</p><p>Result = ok | error | {ok,Module,Warnings} | {error,Module,Error}</p><p> Module = atom()</p><p> Warnings = Error = term()</p><p>Generates a boot script <em>Name.script</em> and its binary version, the boot file <em>Name.boot</em>. The boot file specifies which code should be loaded and which applications should be started when the Erlang runtime system is started. See <a href="../man5/script.5.html"><strong>script</strong>(5)</a></em>.</p><p>The release resource file <em>Name.rel</em> is read to find out which applications are included in the release. Then the relevant application resource files <em>App.app</em> are read to find out which modules should be loaded and if and how the application should be started. (Keys <em>modules</em> and <em>mod</em>, see <a href="../man5/app.5.html"><strong>app</strong>(5)</a></em>).</p><p>By default, the boot script and boot file are placed in the same directory as <em>Name.rel</em>. That is, in the current working directory unless <em>Name</em> contains a path. If the option <em>{outdir,Dir}</em> is provided, they are placed in <em>Dir</em> instead.</p><p>The correctness of each application is checked:</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>The version of an application specified in the <em>.rel</em> file should be the same as the version specified in the <em>.app</em> file.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>There should be no undefined applications, that is, dependencies to applications which are not included in the release. (Key <em>applications</em> in <em>.app</em> file).</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>There should be no circular dependencies among the applications.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>There should be no duplicated modules, that is, modules with the same name but belonging to different applications.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>If the <em>src_tests</em> option is specified, a warning is issued if the source code for a module is missing or newer than the object code.</p>
  </dd>

</dl>
<p>The applications are sorted according to the dependencies between the applications. Where there are no dependencies, the order in the <em>.rel</em> file is kept.</p><p>The function will fail if the mandatory applications <em>kernel</em> and <em>stdlib</em> are not included in the <em>.rel</em> file and have start type <em>permanent</em> (default).</p><p>If <em>sasl</em> is not included as an application in the <em>.rel</em> file, a warning is emitted because such a release can not be used in an upgrade. To turn off this warning, add the option <em>no_warn_sasl</em>.</p><p>All files are searched for in the current path. It is assumed that the <em>.app</em> and <em>.beam</em> files for an application is located in the same directory. The <em>.erl</em> files are also assumed to be located in this directory, unless it is an <em>ebin</em> directory in which case they may be located in the corresponding <em>src</em> directory.</p><p>If the option <em>{path,[Dir]}</em> is provided, this path is appended to the current path. A directory in the path can be given with a wildcard <em>*</em>, this is expanded to all matching directories. Example: <em>"lib/*/ebin"</em>.</p><p>In the generated boot script all application directories are structured as <em>App-Vsn/ebin</em> and assumed to be located in <em>$ROOT/lib</em>, where <em>$ROOT</em> is the root directory of the installed release. If the <em>local</em> option is supplied, the actual directories where the applications were found are used instead. This is a useful way to test a generated boot script locally.</p><p>The <em>variables</em> option can be used to specify an installation directory other than <em>$ROOT/lib</em> for some of the applications. If a variable <em>{VarName,Prefix}</em> is specified and an application is found in a directory <em>Prefix/Rest/App[-Vsn]/ebin</em>, this application will get the path <em>VarName/Rest/App-Vsn/ebin</em> in the boot script. If an application is found in a directory <em>Prefix/Rest</em>, the path will be <em>VarName/Rest/App-Vsn/ebin</em>. When starting Erlang, all variables <em>VarName</em> are given values using the <em>boot_var</em> command line flag.</p><p>Example: If the option <em>{variables,[{"TEST","lib"}]}</em> is supplied, and <em>myapp.app</em> is found in <em>lib/myapp/ebin</em>, then the path to this application in the boot script will be <em>"$TEST/myapp-1/ebin"</em>. If <em>myapp.app</em> is found in <em>lib/test</em>, then the path will be <em>$TEST/test/myapp-1/ebin</em>.</p><p>The checks performed before the boot script is generated can be extended with some cross reference checks by specifying the <em>exref</em> option. These checks are performed with the Xref tool. All applications, or the applications specified with <em>{exref,[App]}</em>, are checked by Xref and warnings are generated for calls to undefined functions.</p><p>By default, errors and warnings are printed to tty and the function returns <em>ok</em> or <em>error</em>. If the option <em>silent</em> is provided, the function instead returns <em>{ok,Module,Warnings}</em> or <em>{error,Module,Error}</em>. Warnings and errors can be converted to strings by calling <em>Module:format_warning(Warnings)</em> or <em>Module:format_error(Error)</em>.</p><p>If the option <em>warnings_as_errors</em> is provided, warnings are treated as errors.</p><p>If the option <em>no_dot_erlang</em> is provided, the instruction to load the <em>.erlang</em> file during boot is <em>NOT</em> included.</p><p><strong></strong> make_tar(Name) -&gt; Result</p><p><strong></strong> make_tar(Name, [Opt]) -&gt; Result</p><p>Types:</p><p>Name = string()</p><p>Opt = {dirs,[IncDir]} | {path,[Dir]} | {variables,[Var]} | {var_tar,VarTar} | {erts,Dir} | src_tests | exref | {exref,[App]} | silent | {outdir,Dir}</p><p> Dir = string()</p><p> IncDir = src | include | atom()</p><p> Var = {VarName,PreFix}</p><p> VarName = Prefix = string()</p><p> VarTar = include | ownfile | omit</p><p> Machine = atom()</p><p> App = atom()</p><p>Result = ok | error | {ok,Module,Warnings} | {error,Module,Error}</p><p> Module = atom()</p><p> Warning = Error = term()</p><p>Creates a release package file <em>Name.tar.gz</em>. file. This file must be uncompressed and unpacked on the target system using the <em>release_handler</em>, before the new release can be installed.</p><p>The release resource file <em>Name.rel</em> is read to find out which applications are included in the release. Then the relevant application resource files <em>App.app</em> are read to find out the version and modules of each application. (Keys <em>vsn</em> and <em>modules</em>, see <a href="../man5/app.5.html"><strong>app</strong>(5)</a></em>).</p><p>By default, the release package file is placed in the same directory as <em>Name.rel</em>. That is, in the current working directory unless <em>Name</em> contains a path. If the option <em>{outdir,Dir}</em> is provided, it is placed in <em>Dir</em> instead.</p><p>By default, the release package contains the directories <em>lib/App-Vsn/ebin</em> and <em>lib/App-Vsn/priv</em> for each included application. If more directories, the option <em>dirs</em> is supplied. Example: <em>{dirs,[src,examples]}</em>.</p><p>All these files are searched for in the current path. If the option <em>{path,[Dir]}</em> is provided, this path is appended to the current path. The wildcard <em>*</em> is expanded to all matching directories. Example: <em>"lib/*/ebin"</em>.</p><p>The <em>variables</em> option can be used to specify an installation directory other than <em>lib</em> for some of the applications. If a variable <em>{VarName,Prefix}</em> is specified and an application is found in a directory <em>Prefix/Rest/App[-Vsn]/ebin</em>, this application will be packed into a separate <em>VarName.tar.gz</em> file as <em>Rest/App-Vsn/ebin</em>.</p><p>Example: If the option <em>{variables,[{"TEST","lib"}]}</em> is supplied, and <em>myapp.app</em> is found in <em>lib/myapp-1/ebin</em>, the the application <em>myapp</em> is included in <em>TEST.tar.gz</em>:</p>
<pre>
% tar tf TEST.tar
myapp-1/ebin/myapp.app
...

</pre>
<p>The <em>{var_tar,VarTar}</em> option can be used to specify if and where a separate package should be stored. In this option, <em>VarTar</em> is:</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>include</em>. Each separate (variable) package is included in the main <em>ReleaseName.tar.gz</em> file. This is the default.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>ownfile</em>. Each separate (variable) package is generated as separate files in the same directory as the <em>ReleaseName.tar.gz</em> file.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p><em>omit</em>. No separate (variable) packages are generated and applications which are found underneath a variable directory are ignored.</p>
  </dd>

</dl>
<p>A directory called <em>releases</em> is also included in the release package, containing <em>Name.rel</em> and a subdirectory called <em>RelVsn</em>. <em>RelVsn</em> is the release version as specified in <em>Name.rel</em>.</p><p><em>releases/RelVsn</em> contains the boot script <em>Name.boot</em> renamed to <em>start.boot</em> and, if found, the files <em>relup</em> and <em>sys.config</em>. These files are searched for in the same directory as <em>Name.rel</em>, in the current working directory, and in any directories specified using the <em>path</em> option.</p><p>If the release package should contain a new Erlang runtime system, the <em>bin</em> directory of the specified runtime system <em>{erts,Dir}</em> is copied to <em>erts-ErtsVsn/bin</em>.</p><p>All checks performed with the <em>make_script</em> function are performed before the release package is created. The <em>src_tests</em> and <em>exref</em> options are also valid here.</p><p>The return value and the handling of errors and warnings are the same as described for <em>make_script</em> above.</p><p><strong></strong> script2boot(File) -&gt; ok | error</p><p>Types:</p><p>File = string()</p><p>The Erlang runtime system requires that the contents of the script used to boot the system is a binary Erlang term. This function transforms the <em>File.script</em> boot script to a binary term which is stored in the file <em>File.boot</em>.</p><p>A boot script generated using the <em>make_script</em> function is already transformed to the binary form.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO systools&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/app.5.html"><strong>app</strong>(5)</a>, <a href="../man5/appup.5.html"><strong>appup</strong>(5)</a>, <a href="../man1/erl.1.html"><strong>erl</strong>(1)</a>, <a href="../man5/rel.5.html"><strong>rel</strong>(5)</a>, release_handler(3erl), <a href="../man5/relup.5.html"><strong>relup</strong>(5)</a>, <a href="../man5/script.5.html"><strong>script</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="system_information.3erl.html"><span aria-hidden="true">&larr;</span> system_information.3erl: System information</a></li>
   <li class="next"><a href="tags.3erl.html">tags.3erl: Generate emacs tags file from erlang source files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
