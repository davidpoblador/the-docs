<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ds: Dynamic strings and vectors</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Dynamic strings and vectors">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ds (3) manual">
  <meta name="twitter:description" content="Dynamic strings and vectors">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-ds-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/ds.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ds (3) manual" />
  <meta property="og:description" content="Dynamic strings and vectors" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-ds-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ds<small> (3)</small></h1>
        <p class="lead">Dynamic strings and vectors</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ds.3.html">
      <span itemprop="name">ds: Dynamic strings and vectors</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ds.3.html">
      <span itemprop="name">ds: Dynamic strings and vectors</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
#include "dsslib.h"
</pre>
<p><strong>Ds *ds_init(Ds&nbsp;*</strong><em>ods</em><strong>);</strong> <strong>Ds *ds_init_size(Ds&nbsp;*</strong><em>ods</em><strong>, size_t&nbsp;</strong><em>nbytes</em><strong>);</strong> <strong>Ds *ds_alloc(void);</strong> <strong>Ds *ds_alloc_size(size_t&nbsp;</strong><em>nbytes</em><strong>);</strong> <strong>Ds *ds_reinit(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>Ds *ds_reinit_size(Ds&nbsp;*</strong><em>ods</em><strong>, size_t&nbsp;</strong><em>nbytes</em><strong>);</strong> <strong>Ds *ds_reset(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>Ds *ds_reset_buf(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>Ds *ds_trim(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>Ds *ds_grow(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>void ds_free(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>int ds_appendc(Ds&nbsp;*</strong><em>ds</em><strong>, int&nbsp;</strong><em>ch</em><strong>);</strong> <strong>int ds_copyb(Ds&nbsp;*</strong><em>ds</em><strong>, void&nbsp;*</strong><em>src</em><strong>, size_t&nbsp;</strong><em>len</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>offset</em><strong>);</strong> <strong>int ds_insertb(Ds&nbsp;*</strong><em>ds</em><strong>, void&nbsp;*</strong><em>src</em><strong>, size_t&nbsp;</strong><em>len</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>offset</em><strong>);</strong> <strong>int ds_append(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>str</em><strong>);</strong> <strong>int ds_concat(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>str</em><strong>);</strong> <strong>int ds_concatc(Ds&nbsp;*</strong><em>ds</em><strong>, int&nbsp;</strong><em>ch</em><strong>);</strong> <strong>int ds_concatn(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>str</em><strong>, size_t&nbsp;</strong><em>len</em><strong>);</strong> <strong>Ds *ds_set(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>str</em><strong>);</strong> <strong>Ds *ds_setn(Ds&nbsp;*</strong><em>ds</em><strong>, unsigned&nbsp;char&nbsp;*</strong><em>s</em><strong>, size_t&nbsp;</strong><em>slen</em><strong>);</strong> <strong>Ds *ds_range(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>str</em><strong>, char&nbsp;*</strong><em>range_spec</em><strong>, Range_syntax&nbsp;*</strong><em>ors</em><strong>);</strong> <strong>int ds_getc(Ds&nbsp;*</strong><em>ds</em><strong>, FILE&nbsp;*</strong><em>fp</em><strong>, int&nbsp;*</strong><em>ch_ptr</em><strong>);</strong> <strong>Dsio *dsio_set(Ds&nbsp;*</strong><em>ds</em><strong>, FILE&nbsp;*</strong><em>fp</em><strong>, char&nbsp;*</strong><em>buf</em><strong>, unsigned&nbsp;long&nbsp;</strong><em>len</em><strong>, int&nbsp;</strong><em>have_length</em><strong>);</strong> <strong>int dsio_free(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>int dsio_eof(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>int dsio_nextc(Ds&nbsp;*</strong><em>ds</em><strong>, int&nbsp;*</strong><em>ch_ptr</em><strong>);</strong> <strong>int dsio_peekc(Ds&nbsp;*</strong><em>ds</em><strong>, int&nbsp;*</strong><em>ch_ptr</em><strong>);</strong> <strong>char *dsio_agets(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>char *dsio_gets(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>int dsio_load(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>char *dsio_load_str(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>char *ds_gets(Ds&nbsp;*</strong><em>ds</em><strong>, FILE&nbsp;*</strong><em>fp</em><strong>);</strong> <strong>char *ds_agets(Ds&nbsp;*</strong><em>ds</em><strong>, FILE&nbsp;*</strong><em>fp</em><strong>);</strong> <strong>char *ds_agets_buf(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>buf</em><strong>);</strong> <strong>char *ds_prompt(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>prompt</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>flag</em><strong>);</strong> <strong>char *ds_readline(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>prompt</em><strong>, char&nbsp;*</strong><em>cprompt</em><strong>);</strong> <strong>Ds *ds_load_file(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>pathname</em><strong>);</strong> <strong>Ds *ds_agetf(Ds&nbsp;*</strong><em>ds</em><strong>, FILE&nbsp;*</strong><em>fp</em><strong>);</strong> <strong>Ds *ds_getf(FILE&nbsp;*</strong><em>fp</em><strong>);</strong> <strong>int ds_sprintf(Ds&nbsp;*</strong><em>ds</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>offset</em><strong>, char&nbsp;*</strong><em>fmt</em><strong>, ...);</strong> <strong>int ds_asprintf(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>fmt</em><strong>, ...);</strong> <strong>int ds_vasprintf(Ds&nbsp;*</strong><em>ds</em><strong>, char&nbsp;*</strong><em>fmt</em><strong>, va_list&nbsp;</strong><em>ap</em><strong>);</strong> <strong>char *ds_xprintf(char&nbsp;*</strong><em>fmt</em><strong>, ...);</strong> <strong>char *ds_vxprintf(char&nbsp;*</strong><em>fmt</em><strong>, va_list&nbsp;</strong><em>ap</em><strong>);</strong> <strong>FILE *ds_fopen_secure(const&nbsp;char&nbsp;*</strong><em>path</em><strong>, const&nbsp;char&nbsp;*</strong><em>mode</em><strong>, size_t&nbsp;</strong><em>size</em><strong>);</strong> <strong>int ds_fclose(FILE&nbsp;*</strong><em>fp</em><strong>);</strong> <strong>int ds_fclean(FILE&nbsp;*</strong><em>fp</em><strong>);</strong> <strong>Dsvec *dsvec_init(Dsvec&nbsp;*</strong><em>dsv</em><strong>, size_t&nbsp;</strong><em>size</em><strong>);</strong> <strong>Dsvec *dsvec_alloc(size_t&nbsp;</strong><em>size</em><strong>);</strong> <strong>Dsvec *dsvec_init_size(Dsvec&nbsp;*</strong><em>dsv</em><strong>, size_t&nbsp;</strong><em>size</em><strong>, int&nbsp;</strong><em>n</em><strong>);</strong> <strong>Dsvec *dsvec_alloc_size(size_t&nbsp;</strong><em>size</em><strong>, int&nbsp;</strong><em>n</em><strong>);</strong> <strong>void dsvec_free(Dsvec&nbsp;*</strong><em>dsv</em><strong>);</strong> <strong>Dsvec *dsvec_grow(Dsvec&nbsp;*</strong><em>dsv</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>new_nelements</em><strong>);</strong> <strong>Dsvec *dsvec_subset(Dsvec&nbsp;*</strong><em>dsv</em><strong>, Dsvec&nbsp;*</strong><em>old_dsv</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>start</em><strong>, int&nbsp;</strong><em>len</em><strong>);</strong> <strong>Dsvec *dsvec_copy(Dsvec&nbsp;*</strong><em>dsv</em><strong>, Dsvec&nbsp;*</strong><em>old_dsv</em><strong>);</strong> <strong>void *dsvec_ptr_index(Dsvec&nbsp;*</strong><em>dsv</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ind</em><strong>);</strong> <strong>int dsvec_delete_ptr_index(Dsvec&nbsp;*</strong><em>dsv</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ind</em><strong>);</strong> <strong>int dsvec_delete_ptr(Dsvec&nbsp;*</strong><em>dsv</em><strong>, void&nbsp;*</strong><em>ptr</em><strong>);</strong> <strong>int dsvec_replace_ptr(Dsvec&nbsp;*</strong><em>dsv</em><strong>, void&nbsp;*</strong><em>ptr</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ind</em><strong>);</strong> <strong>int dsvec_streq(Dsvec&nbsp;*</strong><em>dsv1</em><strong>, Dsvec&nbsp;*</strong><em>dsv2</em><strong>);</strong> <strong>int dsvec_strneq(Dsvec&nbsp;*</strong><em>dsv1</em><strong>, Dsvec&nbsp;*</strong><em>dsv2</em><strong>, size_t&nbsp;</strong><em>len</em><strong>);</strong> <strong>int dsvec_rotate(Dsvec&nbsp;*</strong><em>dsv</em><strong>, int&nbsp;</strong><em>npos</em><strong>);</strong> <strong>Dsvec *dsvec_strlist(Dsvec&nbsp;*</strong><em>dsv</em><strong>, char&nbsp;*</strong><em>str_spec</em><strong>);</strong> <strong>Dsvec *dsvec_slice(Dsvec&nbsp;*</strong><em>dsv</em><strong>, Dsvec&nbsp;*</strong><em>primary</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ind</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>len</em><strong>);</strong> <strong>Dsvec *dsvec_range(Dsvec&nbsp;*</strong><em>dsv</em><strong>, Dsvec&nbsp;*</strong><em>primary</em><strong>, char&nbsp;*</strong><em>range_spec</em><strong>, Range_syntax&nbsp;*</strong><em>ors</em><strong>);</strong> <strong>int dsvec_replace(Dsvec&nbsp;*</strong><em>primary</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ind</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>delete_len</em><strong>, Dsvec&nbsp;*</strong><em>secondary</em><strong>);</strong> <strong>int dsvec_append(Dsvec&nbsp;*</strong><em>primary</em><strong>, Dsvec&nbsp;*</strong><em>secondary</em><strong>);</strong> <strong>int dsvec_insert_ptr(Dsvec&nbsp;*</strong><em>dsv</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ind</em><strong>, void&nbsp;*</strong><em>ptr</em><strong>);</strong> <strong>int dsvec_add_ptr(Dsvec&nbsp;*</strong><em>dsv</em><strong>, void&nbsp;*</strong><em>ptr</em><strong>);</strong> <strong>int dsvec_insert(Dsvec&nbsp;*</strong><em>primary</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ind</em><strong>, Dsvec&nbsp;*</strong><em>secondary</em><strong>);</strong> <strong>int dsvec_delete(Dsvec&nbsp;*</strong><em>dsv</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ind</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>ndelete</em><strong>);</strong> <strong>int dsvec_add_obj(Dsvec&nbsp;*</strong><em>dsv</em><strong>);</strong> <strong>void dsvec_sort(Dsvec&nbsp;*</strong><em>dsv</em><strong>, int&nbsp;</strong><em>(*compar)(const&nbsp;void&nbsp;*,&nbsp;const&nbsp;void&nbsp;*)</em><strong>);</strong> <strong>Dsvec *dsvec_load(Ds&nbsp;*</strong><em>ds</em><strong>, Dsvec&nbsp;*</strong><em>dsv</em><strong>);</strong> <strong>Dsvec *ds_mkargv_add(Dsvec&nbsp;*</strong><em>dsv</em><strong>, char&nbsp;*</strong><em>el</em><strong>);</strong> <strong>Dsvec *ds_mkargv_addv(Dsvec&nbsp;*</strong><em>dsv</em><strong>, int&nbsp;</strong><em>argc</em><strong>, char&nbsp;**</strong><em>argv</em><strong>);</strong></p>
<pre>
typedef struct Mkargv {
  int <em>keepq</em>;
  int <em>keepws</em>;
  char *<em>ifs</em>;
  char *<em>startq</em>;
  char *<em>endq</em>;
} Mkargv;
</pre>
<p><strong>Dsvec *ds_mkargv(Dsvec&nbsp;*</strong><em>dsv</em><strong>, char&nbsp;*</strong><em>str</em><strong>, Mkargv&nbsp;*</strong><em>conf</em><strong>);</strong> <strong>char *ds_buf(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>size_t ds_len(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>size_t ds_size(Ds&nbsp;*</strong><em>ds</em><strong>);</strong> <strong>int ds_eq(Ds&nbsp;*</strong><em>ds1</em><strong>, Ds&nbsp;*</strong><em>ds2</em><strong>);</strong> <strong>(TYPE) dsvec_ptr(Ds&nbsp;*</strong><em>DSV</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>IND</em><strong>, </strong><em>TYPE</em><strong>);</strong> <strong>(TYPE) dsvec_obj(Ds&nbsp;*</strong><em>DSV</em><strong>, unsigned&nbsp;int&nbsp;</strong><em>IND</em><strong>, </strong><em>TYPE</em><strong>);</strong> <strong>(TYPE) dsvec_new_obj(Ds&nbsp;*</strong><em>DSV</em><strong>, </strong><em>TYPE</em><strong>);</strong> <strong>(TYPE) dsvec_base_type(Ds&nbsp;*</strong><em>DSV</em><strong>, </strong><em>TYPE</em><strong>);</strong> <strong>void **dsvec_base(Dsvec&nbsp;*</strong><em>dsv</em><strong>);</strong> <strong>unsigned int dsvec_len(Dsvec&nbsp;*</strong><em>dsv</em><strong>);</strong></p>
<pre>
<em>extern int ds_default_clear_flag;</em>
<em>extern int ds_default_delnl_flag;</em>
<em>extern size_t ds_default_len_limit;</em>
<em>extern void *(*ds_default_malloc_func)(size_t size);</em>
<em>extern void *(*ds_default_free_func)(void *ptr);</em>

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The DS library is a collection of functions for creating, manipulating, and formatting strings of bytes. The memory used by these strings is dynamically allocated and released as necessary. When used correctly, bugs caused by buffer overruns and other programming errors can be avoided. There are also functions for creating and manipulating dynamic vectors of pointers and objects.</p><h3>Byte Strings</h3>
<p>A <strong>Ds</strong> data structure represents a dynamic string. It must be initialized before it can be used. A <strong>Ds</strong> variable contains several fields that may be set after initialization but before it is first used. Default values for some of these fields are copied from global variables exported by the library.</p><p><strong>Initialization</strong></p><p><strong>Manipulation</strong></p><p><strong>Formatting</strong></p>
<h3>Vectors</h3>


        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="drscl.f.3.html"><span aria-hidden="true">&larr;</span> drscl.f.3: Drscl.f -</a></li>
   <li class="next"><a href="dsbev.3.html">dsbev.3: Dsbev.f - <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
