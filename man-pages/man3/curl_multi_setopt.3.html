<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>curl_multi_setopt: Set options for a curl multi handle</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Set options for a curl multi handle">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="curl_multi_setopt (3) manual">
  <meta name="twitter:description" content="Set options for a curl multi handle">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcurl4-doc-curl_multi_setopt-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/curl_multi_setopt.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="curl_multi_setopt (3) manual" />
  <meta property="og:description" content="Set options for a curl multi handle" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcurl4-doc-curl_multi_setopt-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">curl_multi_setopt<small> (3)</small></h1>
        <p class="lead">Set options for a curl multi handle</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/curl_multi_setopt.3.html">
      <span itemprop="name">curl_multi_setopt: Set options for a curl multi handle</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcurl4-doc/">
      <span itemprop="name">libcurl4-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/curl_multi_setopt.3.html">
      <span itemprop="name">curl_multi_setopt: Set options for a curl multi handle</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;curl/curl.h&gt;</p><p>CURLMcode curl_multi_setopt(CURLM * multi_handle, CURLMoption option, param);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>curl_multi_setopt() is used to tell a libcurl multi handle how to behave. By using the appropriate options to <a href="../man3/curl_multi_setopt.3.html"><strong>curl_multi_setopt</strong>(3)</a></em>, you can change libcurl's behaviour when using that multi handle.  All options are set with the <em>option</em> followed by the parameter <em>param</em>. That parameter can be a <strong>long</strong>, a <strong>function pointer</strong>, an <strong>object pointer</strong> or a <strong>curl_off_t</strong> type, depending on what the specific option expects. Read this manual carefully as bad input values may cause libcurl to behave badly! You can only set one option in each function call.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    CURLMOPT_SOCKETFUNCTION
  </dt>
  <dd>
    <p>Pass a pointer to a function matching the <strong>curl_socket_callback</strong> prototype. The <a href="../man3/curl_multi_socket_action.3.html"><strong>curl_multi_socket_action</strong>(3)</a></em> function informs the application about updates in the socket (file descriptor) status by doing none, one, or multiple calls to the curl_socket_callback given in the <strong>param</strong> argument. They update the status with changes since the previous time a <a href="../man3/curl_multi_socket.3.html"><strong>curl_multi_socket</strong>(3)</a></em> function was called. If the given callback pointer is NULL, no callback will be called. Set the callback's <strong>userp</strong> argument with <em>CURLMOPT_SOCKETDATA</em>.  See <a href="../man3/curl_multi_socket.3.html"><strong>curl_multi_socket</strong>(3)</a></em> for more callback details.</p>
  </dd>
  <dt>
    CURLMOPT_SOCKETDATA
  </dt>
  <dd>
    <p>Pass a pointer to whatever you want passed to the <strong>curl_socket_callback</strong>'s fourth argument, the userp pointer. This is not used by libcurl but only passed-thru as-is. Set the callback pointer with <em>CURLMOPT_SOCKETFUNCTION</em>.</p>
  </dd>
  <dt>
    CURLMOPT_PIPELINING
  </dt>
  <dd>
    <p>Pass a long set to 1 to enable or 0 to disable. Enabling pipelining on a multi handle will make it attempt to perform HTTP Pipelining as far as possible for transfers using this handle. This means that if you add a second request that can use an already existing connection, the second request will be "piped" on the same connection rather than being executed in parallel. (Added in 7.16.0)</p>
  </dd>
  <dt>
    CURLMOPT_TIMERFUNCTION
  </dt>
  <dd>
    <p>Pass a pointer to a function matching the <strong>curl_multi_timer_callback</strong> prototype: int curl_multi_timer_callback(CURLM *multi /* multi handle */, long timeout_ms /* timeout in milliseconds */, void *userp /* TIMERDATA */). This function will then be called when the timeout value changes. The timeout value is at what latest time the application should call one of the "performing" functions of the multi interface (<a href="../man3/curl_multi_socket_action.3.html"><strong>curl_multi_socket_action</strong>(3)</a></em> and <a href="../man3/curl_multi_perform.3.html"><strong>curl_multi_perform</strong>(3)</a></em>) - to allow libcurl to keep timeouts and retries etc to work. A timeout value of -1 means that there is no timeout at all, and 0 means that the timeout is already reached. Libcurl attempts to limit calling this only when the fixed future timeout time actually changes. See also <em>CURLMOPT_TIMERDATA</em>. The callback should return 0 on success, and -1 on error. This callback can be used instead of, or in addition to, <a href="../man3/curl_multi_timeout.3.html"><strong>curl_multi_timeout</strong>(3)</a></em>. (Added in 7.16.0)</p>
  </dd>
  <dt>
    CURLMOPT_TIMERDATA
  </dt>
  <dd>
    <p>Pass a pointer to whatever you want passed to the <strong>curl_multi_timer_callback</strong>'s third argument, the userp pointer.  This is not used by libcurl but only passed-thru as-is. Set the callback pointer with <em>CURLMOPT_TIMERFUNCTION</em>. (Added in 7.16.0)</p>
  </dd>
  <dt>
    CURLMOPT_MAXCONNECTS
  </dt>
  <dd>
    <p>Pass a long. The set number will be used as the maximum amount of simultaneously open connections that libcurl may keep in its connection cache after completed use. By default libcurl will enlarge the size for each added easy handle to make it fit 4 times the number of added easy handles.</p><p>By setting this option, you can prevent the cache size from growing beyond the limit set by you.</p><p>When the cache is full, curl closes the oldest one in the cache to prevent the number of open connections from increasing.</p><p>This option is for the multi handle's use only, when using the easy interface you should instead use the <a href="../man3/CURLOPT_MAXCONNECTS.3.html"><strong>CURLOPT_MAXCONNECTS</strong>(3)</a></em> option.</p><p>See <em>CURLMOPT_MAX_TOTAL_CONNECTIONS</em> for limiting the number of active connections.</p><p>(Added in 7.16.3)</p>
  </dd>
  <dt>
    CURLMOPT_MAX_HOST_CONNECTIONS
  </dt>
  <dd>
    <p>Pass a long. The set number will be used as the maximum amount of simultaneously open connections to a single host. For each new session to a host, libcurl will open a new connection up to the limit set by CURLMOPT_MAX_HOST_CONNECTIONS. When the limit is reached, the sessions will be pending until there are available connections. If CURLMOPT_PIPELINING is 1, libcurl will try to pipeline if the host is capable of it.</p><p>The default value is 0, which means that there is no limit. However, for backwards compatibility, setting it to 0 when CURLMOPT_PIPELINING is 1 will not be treated as unlimited. Instead it will open only 1 connection and try to pipeline on it.</p><p>(Added in 7.30.0)</p>
  </dd>
  <dt>
    CURLMOPT_MAX_PIPELINE_LENGTH
  </dt>
  <dd>
    <p>Pass a long. The set number will be used as the maximum amount of requests in a pipelined connection. When this limit is reached, libcurl will use another connection to the same host (see CURLMOPT_MAX_HOST_CONNECTIONS), or queue the requests until one of the pipelines to the host is ready to accept a request. Thus, the total number of requests in-flight is CURLMOPT_MAX_HOST_CONNECTIONS * CURLMOPT_MAX_PIPELINE_LENGTH. The default value is 5.</p><p>(Added in 7.30.0)</p>
  </dd>
  <dt>
    CURLMOPT_CONTENT_LENGTH_PENALTY_SIZE
  </dt>
  <dd>
    <p>Pass a long. If a pipelined connection is currently processing a request with a Content-Length larger than CURLMOPT_CONTENT_LENGTH_PENALTY_SIZE, that connection will not be considered for additional requests, even if it is shorter than CURLMOPT_MAX_PIPELINE_LENGTH. The default value is 0, which means that the penalization is inactive.</p><p>(Added in 7.30.0)</p>
  </dd>
  <dt>
    CURLMOPT_CHUNK_LENGTH_PENALTY_SIZE
  </dt>
  <dd>
    <p>Pass a long. If a pipelined connection is currently processing a chunked (Transfer-encoding: chunked) request with a current chunk length larger than CURLMOPT_CHUNK_LENGTH_PENALTY_SIZE, that connection will not be considered for additional requests, even if it is shorter than CURLMOPT_MAX_PIPELINE_LENGTH. The default value is 0, which means that the penalization is inactive.</p><p>(Added in 7.30.0)</p>
  </dd>
  <dt>
    CURLMOPT_PIPELINING_SITE_BL
  </dt>
  <dd>
    <p>Pass an array of char *, ending with NULL. This is a list of sites that are blacklisted from pipelining, i.e sites that are known to not support HTTP pipelining. The array is copied by libcurl.</p><p>The default value is NULL, which means that there is no blacklist.</p><p>Pass a NULL pointer to clear the blacklist.</p><p>Example:</p>
<pre>
  site_blacklist[] =
  {
    "www.haxx.se",
    "www.example.com:1234",
    NULL
  };

  curl_multi_setopt(m, CURLMOPT_PIPELINE_SITE_BL, site_blacklist);
</pre>
<p>(Added in 7.30.0)</p>
  </dd>
  <dt>
    CURLMOPT_PIPELINING_SERVER_BL
  </dt>
  <dd>
    <p>Pass an array of char *, ending with NULL. This is a list of server types prefixes (in the Server: HTTP header) that are blacklisted from pipelining, i.e server types that are known to not support HTTP pipelining. The array is copied by libcurl.</p><p>Note that the comparison matches if the Server: header begins with the string in the blacklist, i.e "Server: Ninja 1.2.3" and "Server: Ninja 1.4.0" can both be blacklisted by having "Ninja" in the backlist.</p><p>The default value is NULL, which means that there is no blacklist.</p><p>Pass a NULL pointer to clear the blacklist.</p><p>Example:</p>
<pre>
  server_blacklist[] =
  {
    "Microsoft-IIS/6.0",
    "nginx/0.8.54",
    NULL
  };

  curl_multi_setopt(m, CURLMOPT_PIPELINE_SERVER_BL, server_blacklist);
</pre>
<p>(Added in 7.30.0)</p>
  </dd>
  <dt>
    CURLMOPT_MAX_TOTAL_CONNECTIONS
  </dt>
  <dd>
    <p>Pass a long. The set number will be used as the maximum amount of simultaneously open connections in total. For each new session, libcurl will open a new connection up to the limit set by CURLMOPT_MAX_TOTAL_CONNECTIONS. When the limit is reached, the sessions will be pending until there are available connections. If CURLMOPT_PIPELINING is 1, libcurl will try to pipeline if the host is capable of it.</p><p>The default value is 0, which means that there is no limit. However, for backwards compatibility, setting it to 0 when CURLMOPT_PIPELINING is 1 will not be treated as unlimited. Instead it will open only 1 connection and try to pipeline on it.</p><p>(Added in 7.30.0)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURNS</h2>
        <div class="sectioncontent">
<p>The standard CURLMcode for multi interface error codes. Note that it returns a CURLM_UNKNOWN_OPTION if you try setting an option that this version of libcurl doesn't know of.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>This function was added in libcurl 7.15.4.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO curl_multi_setopt&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/curl_multi_cleanup.3.html"><strong>curl_multi_cleanup</strong>(3)</a>, <a href="../man3/curl_multi_init.3.html"><strong>curl_multi_init</strong>(3)</a>,  <a href="../man3/curl_multi_socket.3.html"><strong>curl_multi_socket</strong>(3)</a>, <a href="../man3/curl_multi_info_read.3.html"><strong>curl_multi_info_read</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="curl_multi_remove_handle.3.html"><span aria-hidden="true">&larr;</span> curl_multi_remove_handle.3: Remove an easy handle from a multi session</a></li>
   <li class="next"><a href="curl_multi_socket.3.html">curl_multi_socket.3: Reads/writes available data <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
