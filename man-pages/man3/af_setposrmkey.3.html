<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>af_setposrmkey: Atfs operations on key sets</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Atfs operations on key sets">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="af_setposrmkey (3) manual">
  <meta name="twitter:description" content="Atfs operations on key sets">
  <meta name="twitter:image" content="https://www.carta.tech/images/atfs-dev-af_setposrmkey-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/af_setposrmkey.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="af_setposrmkey (3) manual" />
  <meta property="og:description" content="Atfs operations on key sets" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/atfs-dev-af_setposrmkey-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">af_setposrmkey<small> (3)</small></h1>
        <p class="lead">Atfs operations on key sets</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/af_setposrmkey.3.html">
      <span itemprop="name">af_setposrmkey: Atfs operations on key sets</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/atfs-dev/">
      <span itemprop="name">atfs-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/af_setposrmkey.3.html">
      <span itemprop="name">af_setposrmkey: Atfs operations on key sets</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;atfs.h&gt;</p><p>int af_initset (Af_set *set)</p><p>int af_nrofkeys (Af_set *set)</p><p>int af_setgkey (Af_set *set, int position, Af_key *key)</p><p>int af_setaddkey (Af_set *set, int position, Af_key *key)</p><p>int af_setrmkey (Af_set *set, Af_key *key)</p><p>int af_setposrmkey (Af_set *set, int position)</p><p>int af_sortset (Af_set *set, char *attrname)</p><p>int af_subset (Af_set *set, Af_attrs *attrbuf, Af_set *subset)</p><p>int af_copyset (Af_set *source, Af_set *destination)</p><p>int af_intersect (Af_set *set1, Af_set *set2, Af_set *newset)</p><p>int af_union (Af_set *set1, Af_set *set2, Af_set *newset)</p><p>int af_diff (Af_set *set1, Af_set *set2, *Af_set newset)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Sets in AtFS are ordered collections of keys. The structure of sets is the following</p>
<pre>
typedef struct {
	int	af_nkeys;
	int	af_setlen;
	Af_key	*af_klist;
} Af_set;
</pre>
<p>The list of keys in a set is a linear list, residing in allocated memory. The list has no holes, so that positions <em>0</em> through <em>af_nkeys-1</em> are occupied with valid keys. Set functions returning a set require a pointer to an empty set structure as argument.</p><p><em>af_initset</em> initializes a set.</p><p><em>af_nrofkeys</em> returns the number of valid keys in the given <em>set</em>.</p><p><em>af_setgkey</em> delivers the filekey, stored at position <em>position</em> in the identified set. The result is passed in the buffer <em>key</em>. Typically you use af_setgkey to run through a set and perform a special action on each key. The following code sequence does this job:</p>
<pre>
	Af_key key;
	Af_set set;
	af_initset (&set);
	...
	for (i = 0; i &lt; af_nrofkeys (&set); i++) {
		af_setgkey (&set, i, &key);
		/* process key */
		...
	}
</pre>
<p><em>af_setaddkey</em> introduces a new filekey to an existing set at the given position. All following keys are moved back by one position. The constant AF_LASTPOS given as <em>position</em> argument leads to adding the new filekey at the end of the set.</p><p><em>af_setrmkey (af_setposrmkey)</em> removes the given filekey (the filekey at position <em>position</em>) from the specified set. Holes generated by deleting single keys from a set are eliminated by condensing the set. All following keys are moved one position forth in the set.</p><p><em>af_sortset</em> sorts a given set of object keys by the values of the named attribute. The set is sorted in increasing order. Increasing order means, that the lowest value occurs first in the set. Af_user structures are compared by username first and by userdomain, if the names are equal (user host will not be taken into account). Version numbers are ordered in natural order, busy versions first.</p><p>In <em>atfs.h</em> you can find a list of attribute names naming the standard attributes. All other attribute names are presumed to be user defined attributes. While sorting by the values of an user defined attribute, all ASOs that do not have the named attribute are added at the end of the resulting (sorted) set. Sorting of user defined attributes with multiple values bases on simple text comparison with the order of the values taken as it is. The length of the given attribute name is limited. This limit is defined by the constant AF_UDANAMLEN in atfs.h.</p><p><em>af_subset</em> does a retrieve operation (similar to af_find - manual page <a href="../man3/af_retrieve.3.html"><strong>af_retrieve</strong>(3)</a>) on a given set of object keys. Af_subset takes an attribute buffer (<em>attrbuf</em>) with all desired attributes set to an appropriate value as argument. The attribute buffer should be initialized by <em>af_initattrs</em> (manual page <a href="../man3/af_retrieve.3.html"><strong>af_retrieve</strong>(3)</a>) beforehand. af_subset returns it's result in a new set, the original set remains unchanged.</p><p><em>af_copyset</em> for copying sets (really! =:-).</p><p><em>af_intersect</em>, <em>af_union</em> and <em>af_diff</em> build intersections, unions, and differences between two sets. The result is a new set, where all keys taken from the first argument set (<em>set1</em>) occur first, and the keys from the second argument set (<em>set2</em>) afterwards. You may gibe one of set1 or set2 as <em>resultset</em>. In that case, the original set get lost and is dropped implicitely.</p><p>Sets generated by af_copyset, af_subset, af_intersect, af_union, or af_diff should be released by <em>af_dropset</em> as soon as they are not used any longer.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO af_setposrmkey&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/af_retrieve.3.html"><strong>af_retrieve</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Upon error, -1 or a nil pointer (depending on the return type) is returned and <em>af_errno</em> is set to the corresponding error number.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="af_setgkey.3.html"><span aria-hidden="true">&larr;</span> af_setgkey.3: Atfs operations on key sets</a></li>
   <li class="next"><a href="af_setrmkey.3.html">af_setrmkey.3: Atfs operations on key sets <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
