<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>eprof: A time profiling tool for erlang</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A time profiling tool for erlang">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="eprof (3erl) manual">
  <meta name="twitter:description" content="A time profiling tool for erlang">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-eprof-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/eprof.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="eprof (3erl) manual" />
  <meta property="og:description" content="A time profiling tool for erlang" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-eprof-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">eprof<small> (3erl)</small></h1>
        <p class="lead">A time profiling tool for erlang</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/eprof.3erl.html">
      <span itemprop="name">eprof: A time profiling tool for erlang</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/eprof.3erl.html">
      <span itemprop="name">eprof: A time profiling tool for erlang</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The module <em>eprof</em> provides a set of functions for time profiling of Erlang programs to find out how the execution time is used. The profiling is done using the Erlang trace BIFs. Tracing of local function calls for a specified set of processes is enabled when profiling is begun, and disabled when profiling is stopped.</p><p>When using Eprof expect a slowdown in program execution.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> start() -&gt; {ok,Pid} | {error,Reason}</p><p>Types:</p><p>Pid = pid()</p><p>Reason = {already_started,Pid}</p><p>Starts the Eprof server which holds the internal state of the collected data.</p><p><strong></strong> start_profiling(Rootset) -&gt; profiling | {error, Reason}</p><p><strong></strong> start_profiling(Rootset,Pattern) -&gt; profiling | {error, Reason}</p><p><strong></strong> start_profiling(Rootset,Pattern,Options) -&gt; profiling | {error, Reason}</p><p>Types:</p><p>Rootset = [atom() | pid()]</p><p>Pattern = {Module, Function, Arity}</p><p>Module = Function = atom()</p><p>Arity = integer()</p><p>Options = [set_on_spawn]</p><p>Reason = term()</p><p>Starts profiling for the processes in <em>Rootset</em> (and any new processes spawned from them). Information about activity in any profiled process is stored in the Eprof database.</p><p><em>Rootset</em> is a list of pids and registered names.</p><p>The function returns <em>profiling</em> if tracing could be enabled for all processes in <em>Rootset</em>, or <em>error</em> otherwise.</p><p>A pattern can be selected to narrow the profiling. For instance a specific module can be selected, and only the code executed in that module will be profiled.</p><p>The <em>set_on_spawn</em> option will active call time tracing for all processes spawned by processes in the rootset. This is the default behaviour.</p><p><strong></strong> stop_profiling() -&gt; profiling_stopped | profiling_already_stopped</p><p>Stops profiling started with <em>start_profiling/1</em> or <em>profile/1</em>.</p><p><strong></strong> profile(Fun) -&gt; profiling | {error, Reason}</p><p><strong></strong> profile(Fun, Options) -&gt; profiling | {error, Reason}</p><p><strong></strong> profile(Rootset) -&gt; profiling | {error, Reason}</p><p><strong></strong> profile(Rootset,Fun) -&gt; {ok, Value} | {error,Reason}</p><p><strong></strong> profile(Rootset,Fun,Pattern) -&gt; {ok, Value} | {error, Reason}</p><p><strong></strong> profile(Rootset,Module,Function,Args) -&gt; {ok, Value} | {error, Reason}</p><p><strong></strong> profile(Rootset,Module,Function,Args,Pattern) -&gt; {ok, Value} | {error, Reason}</p><p><strong></strong> profile(Rootset,Module,Function,Args,Pattern,Options) -&gt; {ok, Value} | {error, Reason}</p><p>Types:</p><p>Rootset = [atom() | pid()]</p><p>Fun = fun() -&gt; term() end</p><p>Pattern = {Module, Function, Arity}</p><p>Module = Function = atom()</p><p>Args = [term()]</p><p>Arity = integer()</p><p>Options = [set_on_spawn]</p><p>Value = Reason = term()</p><p>This function first spawns a process <em>P</em> which evaluates <em>Fun()</em> or <em>apply(Module,Function,Args)</em>. Then, it starts profiling for <em>P</em> and the processes in <em>Rootset</em> (and any new processes spawned from them). Information about activity in any profiled process is stored in the Eprof database.</p><p><em>Rootset</em> is a list of pids and registered names.</p><p>If tracing could be enabled for <em>P</em> and all processes in <em>Rootset</em>, the function returns <em>{ok,Value}</em> when <em>Fun()</em>/<em>apply</em> returns with the value <em>Value</em>, or <em>{error,Reason}</em> if <em>Fun()</em>/<em>apply</em> fails with exit reason <em>Reason</em>. Otherwise it returns <em>{error, Reason}</em> immediately.</p><p>The <em>set_on_spawn</em> option will active call time tracing for all processes spawned by processes in the rootset. This is the default behaviour.</p><p>The programmer must ensure that the function given as argument is truly synchronous and that no work continues after the function has returned a value.</p><p><strong></strong> analyze() -&gt; ok</p><p><strong></strong> analyze(Type) -&gt; ok</p><p><strong></strong> analyze(Type,Options) -&gt; ok</p><p>Types:</p><p>Type = procs | total</p><p>Options = [{filter, Filter} | {sort, Sort}</p><p>Filter = [{calls, integer()} | {time, float()}]</p><p>Sort = time | calls | mfa</p><p>Call this function when profiling has been stopped to display the results per process, that is:</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>how much time has been used by each process, and</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>in which function calls this time has been spent.</p>
  </dd>

</dl>
<p>Call <em>analyze</em> with <em>total</em> option when profiling has been stopped to display the results per function call, that is in which function calls the time has been spent.</p><p>Time is shown as percentage of total time and as absolute time.</p><p><strong></strong> log(File) -&gt; ok</p><p>Types:</p><p>File = atom() | string()</p><p>This function ensures that the results displayed by <em>analyze/0,1,2</em> are printed both to the file <em>File</em> and the screen.</p><p><strong></strong> stop() -&gt; stopped</p><p>Stops the Eprof server.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="epp_dodger.3erl.html"><span aria-hidden="true">&larr;</span> epp_dodger.3erl: Epp_dodger - bypasses the erlang preprocessor.</a></li>
   <li class="next"><a href="erl_boot_server.3erl.html">erl_boot_server.3erl: Boot server for other erlang machines <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
