<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test::WWW::Declare: Declarative testing for your web app</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Declarative testing for your web app">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Test::WWW::Declare (3pm) manual">
  <meta name="twitter:description" content="Declarative testing for your web app">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtest-www-declare-perl-Test::WWW::Declare-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Test::WWW::Declare.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Test::WWW::Declare (3pm) manual" />
  <meta property="og:description" content="Declarative testing for your web app" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtest-www-declare-perl-Test::WWW::Declare-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Test::WWW::Declare<small> (3pm)</small></h1>
        <p class="lead">Declarative testing for your web app</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::WWW::Declare.3pm.html">
      <span itemprop="name">Test::WWW::Declare: Declarative testing for your web app</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtest-www-declare-perl/">
      <span itemprop="name">libtest-www-declare-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Test::WWW::Declare.3pm.html">
      <span itemprop="name">Test::WWW::Declare: Declarative testing for your web app</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Test::WWW::Declare tests =&gt; 3;
    use Your::Web::App::Test;

    Your::Web::App::Test-&gt;start_server;

    session &apos;testuser&apos; =&gt; run {
        flow &apos;log in and out&apos; =&gt; check {
            flow &apos;log in&apos; =&gt; check {
                get &apos;http://localhost/&apos;;
                fill form &apos;login&apos; =&gt; {
                    username =&gt; &apos;testuser&apos;,
                    password =&gt; &apos;drowssap&apos;,
                };
                content should contain &apos;log out&apos;;
            };

            flow &apos;log out&apos; =&gt; check {
                get &apos;http://localhost/&apos;;
                click href &apos;log out&apos;;
            };
        };
    };
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Often in web apps, tests are very dependent on the state set up by previous tests. If one test fails (e.g. \*(L"follow the link to the admin page\*(R") then it's likely there will be many more failures. This module aims to alleviate this problem, as well as provide a nicer interface to Test::WWW::Mechanize.</p><p>The central idea is that of \*(L"flow\*(R". Each flow is a sequence of commands (\*(L"fill in this form\*(R") and assertions (\*(L"content should contain 'testuser'\*(R"). If any of these commands or assertions fail then the flow is aborted. Only that one failure is reported to the test harness and user. Flows may also contain other flows. If an inner flow fails, then the outer flow fails as well.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FLOWS AND SESSIONS</h2>
        <div class="sectioncontent">
<h3>session \s-1NAME\s0 =&gt; run { \s-1CODE\s0 }</h3>
<p>Sessions are a way of associating a set of flows with a WWW::Mechanize instance. A session is mostly equivalent with a user interacting with your web app.</p><p>Within a session, every command (\*(C`get\*(C', \*(C`click link\*(C', etc) is operating on that session's WWW::Mechanize instance. You may have multiple sessions in one test file. Two sessions with the same name are in fact the same session. This lets you write code like the following, simplified slightly:</p><p>    session &apos;first user&apos; =&gt; run {         get "$URL/give?task=1&victim=other";         session &apos;other user&apos; =&gt; run {             get "$URL/tasks";             content should match qr/task 1/;</p><p>            # this is the same session/mech as the outermost &apos;first user&apos;             session &apos;first user&apos; =&gt; run {                 get "$URL/tasks";                 content shouldnt match qr/task 1/;             };         };     };</p>
<h3>flow \s-1NAME\s0 =&gt; check { \s-1CODE\s0 }</h3>
<p>A flow encompasses a single test. As described above, each flow is a sequence of commands, assertions, and other flows. If any of the components of a flow fail, the rest of the flow is aborted and one or more test failures are reported to the test harness.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<h3>get \s-1URL\s0</h3>

<h3>click button</h3>

<h3>click href</h3>

<h3>follow_link</h3>

<h3>fill form \s-1NAME\s0 =&gt; {\s-1FIELD1\s0 =&gt; \s-1VALUE1\s0, \s-1FIELD2\s0 =&gt; \s-1VALUE2\s0}</h3>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ASSERTIONS</h2>
        <div class="sectioncontent">
<p>Every assertion has two parts: a subject and a verb.</p><h3>\s-1SUBJECTS\s0</h3>
<p><em>content</em></p><p><em>title</em></p><p><em>url</em></p>
<h3>\s-1VERBS\s0</h3>
<p><em>should(nt) (caselessly) match \s-1REGEX\s0</em></p><p><em>should(nt) (caselessly) contain \s-1STRING\s0</em></p><p><em>should(nt) (caselessly) lack \s-1STRING\s0</em></p><p><em>should(nt) (caselessly) equal \s-1STRING\s0</em></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUBCLASSING</h2>
        <div class="sectioncontent">
<p>One of the goals of this module is to let you subclass it to provide extra features, such as automatically logging in a user each time a session is created.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>If you fail any tests, then the actual number of tests run may be fewer than you have in your file. This is because when a flow fails, it immediately aborts the rest of its body (which may include other flows). So if you're setting the number of tests based on how many ran, make sure that all tests passed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Hopefully few. We'd like to know about any of them. Please report them to \*(C`bug-test-www-declare@rt.cpan.org\*(C'.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Test::WWW::Declare&hellip;</h2>
        <div class="sectioncontent">
<p>Test::WWW::Mechanize, Jifty.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MAINTAINER</h2>
        <div class="sectioncontent">
<p>Shawn M Moore \*(C`&lt;sartak@bestpractical.com&gt;\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ORIGINAL AUTHOR</h2>
        <div class="sectioncontent">
<p>Jesse Vincent \*(C`&lt;jesse@bestpractical.com&gt;\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2007-2008 Best Practical Solutions, \s-1LLC\s0</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Test::TableDriven.3pm.html"><span aria-hidden="true">&larr;</span> Test::TableDriven.3pm: Write tests, not scripts that run them</a></li>
   <li class="next"><a href="Test::WWW::Mechanize.3pm.html">Test::WWW::Mechanize.3pm: Testing-specific www::mechanize subclass <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
