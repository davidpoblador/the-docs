<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Log::Agent: Logging agent</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Logging agent">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Log::Agent (3pm) manual">
  <meta name="twitter:description" content="Logging agent">
  <meta name="twitter:image" content="https://www.carta.tech/images/liblog-agent-perl-Log::Agent-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Log::Agent.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Log::Agent (3pm) manual" />
  <meta property="og:description" content="Logging agent" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/liblog-agent-perl-Log::Agent-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Log::Agent<small> (3pm)</small></h1>
        <p class="lead">Logging agent</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Agent.3pm.html">
      <span itemprop="name">Log::Agent: Logging agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/liblog-agent-perl/">
      <span itemprop="name">liblog-agent-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Log::Agent.3pm.html">
      <span itemprop="name">Log::Agent: Logging agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use Log::Agent;            # in all reusable components
 logerr "error";
 logtrc "notice:12", "notice that" if ...;
 logdie "log and die";

 use Log::Agent;            # in application&apos;s main
 logconfig(-prefix =&gt; $0);  # simplest, uses default driver

 use Log::Agent;                    # another more complex example
 require Log::Agent::Driver::File;  # logging made to file
 logconfig(-driver =&gt;
     Log::Agent::Driver::File-&gt;make(
         -prefix      =&gt; $0,
         -showpid     =&gt; 1,
         -channels    =&gt; {
             &apos;error&apos;  =&gt; "$0.err",
             &apos;output&apos; =&gt; "$0.out",
             &apos;debug&apos;  =&gt; "$0.dbg",
         },
     )
 );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The \*(C`Log::Agent\*(C' module provides an abstract layer for logging and tracing, which is independent from the actual method used to physically perform those activities. It acts as an agent (hence the name) that collects the requests and delegates processing to a sublayer: the logging driver.</p><p>The \*(C`Log::Agent\*(C' module is meant to be used in all reusable components, since they cannot know in advance how the application which ends up using them will perform its logging activities: either by emitting messages on stdout and errors on stderr, or by directing messages to logfiles, or by using <em>syslog</em>\|(3).</p><p>The logging interface is common for all the logging drivers, and is therefore the result of a compromise between many logging schemes: any information given at this level must be either handled by all drivers, or may be ignored depending on the application's final choice.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PRIORITIES AND LEVEL</h2>
        <div class="sectioncontent">
<p>The \*(C`Log::Agent\*(C' module can use both priorities (as defined by <em>syslog</em>\|(3)) or logging levels, or either, in which case there is an implicit computation of the missing item (i.e. the level 4, for instance, corresponds to the \*(L"warning\*(R" priority, and vice-versa). See Log::Agent::Priorities for more details.</p><p>A logging level is defined as being a threshold: any level lesser than or equal to that threshold will be logged.</p><p>At the \*(C`Log::Agent\*(C' level, it is possible to define a trace level and a debug level. Only the messages below those levels (inclusive) will be handed out to the underlying driver for logging. They are used by the <em>logtrc()</em> and <em>logdbg()</em> routines, respectively.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHANNELS</h2>
        <div class="sectioncontent">
<p>The \*(C`Log::Agent\*(C' class defines three logging channels, which are \*(C`error\*(C', \*(C`output\*(C' and \*(C`debug\*(C'. Depending on the driver used for logging, those channels are ignored (typically with <em>syslog()</em>) or may be implicitely defined (default logging, i.e. the one achieved by the \*(C`Log::Agent::Driver::Default\*(C' driver, remaps \*(C`error\*(C' and \*(C`debug\*(C' to stderr, \*(C`output\*(C' to stdout).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERFACE</h2>
        <div class="sectioncontent">
<p>Anywhere a <em>message</em> is expected, it can be a single string, or a <em>printf()</em>-like format string followed by the required arguments. The special macro %m is handled directly by \*(C`Log::Agent\*(C' and is replaced by the string version of $!, which is the last error message returned by the last failing system call.</p><p><strong>\s-1NOTE\s0</strong>: There should not be any trailing \*(L"&#92;n\*(R" in the <em>message</em> strings, nor any embededed one, although this is not enforced. Remember that the main purpose of \*(C`Log::Agent\*(C' is to specify logging messages in a standard way!  Therefore, most of the time, a \*(L"should\*(R" should be read as \*(L"must\*(R" and \*(L"should not\*(R" as \*(L"must not\*(R", which is the strongest interdiction form available in English, as far as I know.</p><p>Here are valid <em>message</em> examples:</p><p>    "started since $time"     "started since %s", $time     "fork: %m"</p><p>The follwing logging interface is made available to modules:</p>
<dl class='dl-vertical'>
  <dt>
    logdbg <em>priority</em>, <em>message</em>
  </dt>
  <dd>
    <p>Debug logging of <em>message</em> to the \*(C`debug\*(C' channel. You may specify any priority you want, i.e.  a \*(C`debug\*(C' priority is not enforced here. You may even specify "notice:4" if you wish, to have the message logged if the debug level is set to 4 or less. If handed over to <em>syslog</em>\|(3), the message will nonetheless be logged at the \*(C`notice\*(C' priority.</p>
  </dd>
  <dt>
    logtrc <em>priority</em>, <em>message</em>
  </dt>
  <dd>
    <p>Trace logging of <em>message</em> to the \*(C`output\*(C' channel. Like <em>logdbg()</em> above, you are not restricted to the \*(C`info\*(C' priority. This routine checks the logging level (either explicit as in "info:14" or implicit as in "notice") against the trace level.</p>
  </dd>
  <dt>
    logsay <em>message</em>
  </dt>
  <dd>
    <p>Log the message at the \*(C`notice\*(C' priority to the \*(C`output\*(C' channel. The logging always takes place under the default \*(C`-trace\*(C' settings, but only if the routine is called, naturally.  This means you can still say:     logsay "some trace message" if $verbose; and control whether the message is emitted by using some external configuration for your module (e.g. by adding a -verbose flag to the creation routine of your class).</p>
  </dd>
  <dt>
    logwarn <em>message</em>
  </dt>
  <dd>
    <p>Log a warning message at the \*(C`warning\*(C' priority to the \*(C`error\*(C' channel.</p>
  </dd>
  <dt>
    logcarp <em>message</em>
  </dt>
  <dd>
    <p>Same as <em>logwarn()</em>, but issues a <em>Carp::carp</em>\|(3) call instead, which will warn from the perspective of the routine's caller.</p>
  </dd>
  <dt>
    logerr <em>message</em>
  </dt>
  <dd>
    <p>Log an error message at the \*(C`error\*(C' priority to the \*(C`error\*(C' channel.</p>
  </dd>
  <dt>
    logdie <em>message</em>
  </dt>
  <dd>
    <p>Log a fatal message at the \*(C`critical\*(C' priority to the \*(C`error\*(C' channel, and then dies.</p>
  </dd>
  <dt>
    logconfess <em>message</em>
  </dt>
  <dd>
    <p>Same as <em>logdie()</em>, but issues a <em>Carp::confess</em>\|(3) call instead.  It is possible to configure the \*(C`Log::Agent\*(C' module via the \*(C`-confess\*(C' switch to automatically redirect a <em>logdie()</em> to <em>logconfess()</em>, which is invaluable during unit testing.</p>
  </dd>
  <dt>
    logcroak <em>message</em>
  </dt>
  <dd>
    <p>Same as <em>logdie()</em>, but issues a <em>Carp::croak</em>\|(3) call instead.  It is possible to configure the \*(C`Log::Agent\*(C' module via the \*(C`-confess\*(C' switch to automatically redirect a <em>logcroak()</em> to <em>logconfess()</em>, which is invaluable during unit testing.</p>
  </dd>
  <dt>
    Log::Agent::inited
  </dt>
  <dd>
    <p>Returns true when \*(C`Log::Agent\*(C' was initialized, either explicitly via a <em>logconfig()</em> or implicitely via any <em>logxxx()</em> call.</p>
  </dd>

</dl>
<p>Modules sometimes wish to report errors from the perspective of their caller's caller, not really their caller.  The following interface is therefore provided:</p>
<dl class='dl-vertical'>
  <dt>
    logxcarp <em>offset</em>, <em>message</em>
  </dt>
  <dd>
    <p>Same a <em>logcarp()</em>, but with an additional offset to be applied on the stack.  To warn one level above your caller, set it to 1.</p>
  </dd>
  <dt>
    logxcroak <em>offset</em>, <em>message</em>
  </dt>
  <dd>
    <p>Same a <em>logcroak()</em>, but with an additional offset to be applied on the stack.  To report an error one level above your caller, set it to 1.</p>
  </dd>

</dl>
<p>For applications that wish to implement a debug layer on top of \*(C`Log::Agent\*(C', the following routine is provided.  Note that it is not imported by default, i.e. it needs to be explicitly mentionned at \*(C`use\*(C' time, since it is not meant to be used directly under regular usage.</p>
<dl class='dl-vertical'>
  <dt>
    logwrite <em>channel</em>, <em>priority</em>, <em>message</em>
  </dt>
  <dd>
    <p>Unconditionally write the <em>message</em> at the given <em>priority</em> on <em>channel</em>. The channel can be one of \*(C`debug\*(C', \*(C`error\*(C' or \*(C`output\*(C'.</p>
  </dd>

</dl>
<p>At the application level, one needs to commit once and for all about the logging scheme to be used. This is done thanks to the <em>logconfig()</em> routine which takes the following switches, in alphabetical order: Request that caller information (relative to the <em>logxxx()</em> call) be part of the log message. The given <em>parameters</em> are handed off to the creation routine of \*(C`Log::Agent::Tag::Caller\*(C' and are documented there. I usually say something like:  -caller =&gt; [ -display =&gt; &apos;($sub/$line)&apos;, -postfix =&gt; 1 ] which I find informative enough. On occasion, I found myself using more complex sequences.  See Log::Agent::Tag::Caller. When true, all <em>logdie()</em> calls will be automatically masqueraded as <em>logconfess()</em>. Sets the priority threshold (can be expressed as a string or a number, the string being mapped to a logging level as described above in <strong>\s-1PRIORITIES\s0 \s-1AND\s0 \s-1LEVEL\s0</strong>) for <em>logdbg()</em> calls. Calls tagged with a level less than or equal to the given threshold will pass through, others will return prematurely without logging anything. This switch defines the driver object to be used, which must be an heir of the \*(C`Log::Agent::Driver\*(C' class. See <em>Log::Agent::Driver</em>\|(3) for a list of the available drivers. Specifies both \*(C`-debug\*(C' and \*(C`-trace\*(C' levels at the same time, to a common value. Defines the application name which will be pre-pended to all messages, followed by ": " (a colon and a space). Using this switch alone will configure the default driver to use that prefix (stripped down to its basename component). When a driver object is used, the \*(C`-prefix\*(C' switch is kept at the \*(C`Log::Agent\*(C' level only and is not passed to the driver: it is up to the driver's creation routine to request the \*(C`-prefix\*(C'. Having this information in Log::Agent enables the module to die on critical errors with that error prefix, since it cannot rely on the logging driver for that, obviously. Request that message priority information be part of the log message. The given <em>parameters</em> are handed off to the creation routine of \*(C`Log::Agent::Tag::Priority\*(C' and are documented there. I usually say something like:         -priority =&gt; [ -display =&gt; &apos;[$priority]&apos; ] which will display the whole priority name at the beginning of the messages, e.g. \*(L"[warning]\*(R" for a <em>logwarn()</em> or \*(L"[error]\*(R" for <em>logerr()</em>. See Log::Agent::Tag::Priority and Log::Agent::Priorities. <strong>\s-1NOTE\s0</strong>: Using \*(C`-priority\*(C' does not prevent the \*(C`-duperr\*(C' flag of the file driver to also add its own hardwired prefixing in front of duplicated error messages.  The two options act at a different level. Specifies user-defined tags to be added to each message.  The objects given here must inherit from \*(C`Log::Agent::Tag\*(C' and conform to its interface.  See Log::Agent::Tag for details. At runtime, well after <em>logconfig()</em> was issued, it may be desirable to add (or remove) a user tag.  Use the \*(C`logtags()\*(C' routine for this purpose, and iteract directly with the tag list object. For instance, a web module might wish to tag all the messages with a session \s-1ID\s0, information that might not have been available by the time <em>logconfig()</em> was issued. Same a \*(C`-debug\*(C' but applies to <em>logsay()</em>, <em>logwarn()</em>, <em>logerr()</em> and <em>logtrc()</em>. When unspecified, \*(C`Log::Agent\*(C' runs at the \*(L"notice\*(R" level.</p><p>Additional routines, not exported by default, are:</p>
<dl class='dl-vertical'>
  <dt>
    logtags
  </dt>
  <dd>
    <p>Returns a \*(C`Log::Agent::Tag_List\*(C' object, which holds all user-defined tags that are to be added to each log message. The initial list of tags is normally supplied by the application at <em>logconfig()</em> time, via the \*(C`-tags\*(C' argument.  To add or remove tags after configuration time, one needs direct access to the tag list, obtained via this routine.  See Log::Agent::Tag_List for the operations that can be performed.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The following limitations exist in this early version. They might be addressed in future versions if they are perceived as annoying limitatons instead of being just documented ones. :-)</p><ul>
<li><p>A module which calls <em>logdie()</em> may have its die trapped if called from within an <em>eval()</em>, but unfortunately, the value of $@ is unpredictable: it may be prefixed or not depending on the driver used. This is harder to fix as one might think of at first glance.</p></li><li><p>Some drivers lack customization and hardwire a few things that come from my personal taste, like the prefixing done when <em>duperr</em> is set in Log::Agent::Driver::File, or the fact that the \*(C`debug\*(C' and \*(C`stderr\*(C' channels are merged as one in the Log::Agent::Driver::Default driver.</p></li><li><p>When using <em>logcroak()</em> or <em>logconfess()</em>, the place where the call was made can still be visible when -caller is used, since the addition of the caller information to the message is done before calling the logging driver.  Is this a problem?</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Log::Agent was originally authored by Raphael Manfredi <em>&lt;Raphael_Manfredi@pobox.com&gt;</em> and is currently maintained by Mark Rogaski <em>&lt;mrogaski@cpan.org&gt;</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (c) 1999-2000 Raphael Manfredi.</p><p>Copyright (c) 2002-2003, 2005, 2013 Mark Rogaski; all rights reserved.</p><p>This module is free software.  You can redistribute it and/or modify it under the terms of the Artistic License 2.0.</p><p>This program is distributed in the hope that it will be useful, but without any warranty; without even the implied warranty of merchantability or fitness for a particular purpose.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Log::Agent&hellip;</h2>
        <div class="sectioncontent">
<p><em>Log::Agent::Driver</em>\|(3), <em>Carp</em>\|(3).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="LockFile::Simple.3pm.html"><span aria-hidden="true">&larr;</span> LockFile::Simple.3pm: Simple file locking scheme</a></li>
   <li class="next"><a href="Log::Agent::Channel.3pm.html">Log::Agent::Channel.3pm: Ancestor class for all log::agent channels <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
