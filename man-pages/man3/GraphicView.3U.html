<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GraphicView: Base classes for graphical component views</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Base classes for graphical component views">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="GraphicView (3U) manual">
  <meta name="twitter:description" content="Base classes for graphical component views">
  <meta name="twitter:image" content="https://www.carta.tech/images/ivtools-dev-GraphicView-3U.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3U/GraphicView.3U.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="GraphicView (3U) manual" />
  <meta property="og:description" content="Base classes for graphical component views" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ivtools-dev-GraphicView-3U.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">GraphicView<small> (3U)</small></h1>
        <p class="lead">Base classes for graphical component views</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/GraphicView.3U.html">
      <span itemprop="name">GraphicView: Base classes for graphical component views</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ivtools-dev/">
      <span itemprop="name">ivtools-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3U/GraphicView.3U.html">
      <span itemprop="name">GraphicView: Base classes for graphical component views</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;Unidraw/Components/grview.h&gt;</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>GraphicView is an abstract base class for graphical views of GraphicComp objects.  GraphicView is derived from ComponentView and adds operations for manipulating its graphical attributes. GraphicViews is a non-abstract subclass of GraphicView for composite graphical component views.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GRAPHICVIEW PUBLIC OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>virtual void Interpret(Command*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Uninterpret(Command*)</strong></p>
  </dt>
  <dd>
    <p>GraphicView objects can (un)interpret the following command:</p><p><strong>AlignToGridCmd</strong> aligns the graphical component to the grid that affects the view. Interpret uses AlignToGridCmd::Align to carry out the alignment, while Uninterpret uses AlignToGridCmd::Unalign to reverse Interpret's effects.</p>
  </dd>
  <dt>
    <p><strong>virtual void DrawHandles()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void RedrawHandles()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void InitHandles()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void EraseHandles()</strong></p>
  </dt>
  <dd>
    <p>Operations for displaying and hiding the view's selection handles. All use CreateHandles (described below) to create component-specific rubberbands that draw the handles if they do not already exist.  The rubberband is stored in the <em>_handles</em> protected member. DrawHandles makes the handles visible if they are not already visible. RedrawHandles forces the handles to draw themselves even if they are already drawn, which may make them disappear if the rubberband draws them in XOR mode.  InitHandles deletes and recreates the rubberband defining the handles if it existed when InitHandles was called. EraseHandles erases the handles and deletes the rubberband.</p>
  </dd>
  <dt>
    <p><strong>virtual Manipulator* CreateManipulator(</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>   Viewer*, Event&, Transformer*, Tool*</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void InterpretManipulator(Manipulator*)</strong></p>
  </dt>
  <dd>
    <p>Operations that define how the GraphicView reacts when it is manipulated by a tool and how the tool affects that component following manipulation.  They effectively override the tool's default behavior if the tool defers manipulator creation and interpretation to the view.  This allows the same tool to behave differently depending on the component it manipulates.</p><p>CreateManipulator creates a manipulator that is appropriate for the given tool.  It receives the viewer in which the manipulation will take place, an event with which to initialize the manipulator if necessary, and the coordinate transformation that maps canvas coordinates into the subject's coordinate space.  InterpretManipulator is called following manipulation and defines how to construct a command that carries out the manipulation's desired effect. GraphicView objects create and interpret manipulators for the following tools:</p><p><strong>GraphicCompTool</strong> will let the user position a fixed-sized outline reflecting the view's bounding box on the screen.  Interpretation will produce a command that inserts a copy of the subject into the editor's component at the specified position.  Placement will be constrained by gravity, if active.</p><p><strong>MoveTool</strong> will let the user move a fixed-sized outline reflecting the view's bounding box on the screen.  Interpretation will produce a command that moves the subject to the specified position. Holding down the Shift key will constrain the movement to purely horizontal or vertical, and movement will be constrained by gravity.</p><p><strong>ScaleTool</strong> will let the user drag a scaling rectangular outline corresponding to the view's scale following manipulation with the tool.  Scaling will be constrained by gravity.</p><p><strong>StretchTool</strong> will let the user drag a variable-sized rectangular outline corresponding to a two-dimensional stretch that the component will undergo following manipulation.  Holding the Shift key down will constrain the stretch to one dimension.  Stretching will be constrained by gravity.</p><p><strong>RotateTool</strong> will let the user rotate a fixed-sized rectangular outline reflecting the view's bounding box.  The rotation of the outline corresponds to the rotation that the component will undergo following manipulation.  Rotation will be constrained by gravity.</p>
  </dd>
  <dt>
    <p><strong>virtual Graphic* GetGraphic()</strong></p>
  </dt>
  <dd>
    <p>Return the graphic that defines the GraphicView's appearance. Often this graphic is a copy of that in the subject, but it needn't be.</p>
  </dd>
  <dt>
    <p><strong>virtual Viewer* GetViewer()</strong></p>
  </dt>
  <dd>
    <p>Return the viewer (if any) that displays the view.</p>
  </dd>
  <dt>
    <p><strong>GraphicComp* GetGraphicComp()</strong></p>
  </dt>
  <dd>
    <p>Return the view's subject.</p>
  </dd>
  <dt>
    <p><strong>boolean Includes(GraphicView*)</strong></p>
  </dt>
  <dd>
    <p>A convenience function that returns whether or not the GraphicView includes the given view, that is, whether the view is a child of <em>this</em>.</p>
  </dd>
  <dt>
    <p><strong>GraphicView* GetGraphicView(Component*)</strong></p>
  </dt>
  <dd>
    <p>A convenience function that returns the view of the given component (if any) that appears in the same viewer as <em>this</em>.</p>
  </dd>
  <dt>
    <p><strong>GraphicView* GetView(Iterator)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void SetView(GraphicView*, Iterator&)</strong></p>
  </dt>
  <dd>
    <p>These operations do nothing by default.  Subclasses that contain children should redefine them as follows: GetView should return the GraphicView to which an iterator points.  SetView should initialize the iterator to point to a particular GraphicView in the list of children; it should initialize the iterator to point to a nil instance if the given GraphicView is not a child.</p>
  </dd>
  <dt>
    <p><strong>virtual Selection* SelectAll()</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual Selection* ViewContaining(Coord, Coord)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual Selection* ViewsContaining(Coord, Coord)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual Selection* ViewIntersecting(Coord, Coord, Coord, Coord)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual Selection* ViewsIntersecting(Coord, Coord, Coord, Coord)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual Selection* ViewsWithin(Coord, Coord, Coord, Coord)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual ConnectorView* ConnectorIntersecting(</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>    Coord, Coord, Coord, Coord</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>)</strong></p>
  </dt>
  <dd>
    <p>These convenience operations do nothing by default.  Subclasses containing children should redefine them to do the following: SelectAll should return a selection object containing (pointers to) all its children; ViewContaining should return the last (visibly topmost) child view containing the given point, while ViewsContaining should return <em>all</em> children containing the point; ViewIntersecting should return the last (visibly topmost) child view intersecting a rectangular area, while ViewsIntersecting should return all such children; ViewsWithin should return all the child views falling strictly within a rectangular area; and ConnectorIntersecting should return the child ConnectorView (if any) that intersects a rectangular area.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GRAPHICVIEW PROTECTED OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>GraphicView(GraphicComp* = nil)</strong></p>
  </dt>
  <dd>
    <p>The constructor is protected to guard against instantiation. It takes the view's subject as an optional argument, passing it to the ComponentView constructor.</p>
  </dd>
  <dt>
    <p><strong>virtual void SetGraphic(Graphic*)</strong></p>
  </dt>
  <dd>
    <p>Set the GraphicView's graphic to the given one, and store <em>this</em> in the graphic using Graphic::SetTag.  This makes it possible to obtain the GraphicView that owns the graphic from the graphic itself, e.g., after hit detection.</p>
  </dd>
  <dt>
    <p><strong>virtual void CreateHandles()</strong></p>
  </dt>
  <dd>
    <p>Initialize the <em>_handles</em> member with a rubberband that will draw the appropriate handles.  By default, CreateHandles creates a RubberHandles object with eight handles around the periphery of the view's bounding box.</p>
  </dd>
  <dt>
    <p><strong>virtual int ClosestPoint(</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>    Coord x[], Coord y[], int n, Coord px, Coord py</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>)</strong></p>
  </dt>
  <dd>
    <p>A convenience function that returns the index of the point closest to (<em>px, py</em>) in an array of <em>n</em> points.</p>
  </dd>
  <dt>
    <p><strong>GraphicView* View(UList*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>GraphicView* GetGraphicView(Graphic*)</strong></p>
  </dt>
  <dd>
    <p>Convenience functions that return the GraphicView in a UList element and the GraphicView associated with a graphic, respectively.</p>
  </dd>
  <dt>
    <p><strong>Manipulator* CreateGraphicCompManip(</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>    Viewer*, Event&, Transformer*, Tool*</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Manipulator* CreateStretchManip(</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>    Viewer*, Event&, Transformer*, Tool*</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Command* InterpretGraphicCompManip(Manipulator*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>Command* InterpretStretchManip(Manipulator*)</strong></p>
  </dt>
  <dd>
    <p>Helper functions used by CreateManipulator and InterpretManipulator to create and interpret the manipulators associated with GraphicCompTool and StretchTool.</p>
  </dd>
  <dt>
    <p><strong>void AddDamage(Graphic*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>void IncurDamage(Graphic*)</strong></p>
  </dt>
  <dd>
    <p>GraphicViews should incur damage in response to a change in their appearance, which generally happens in their Update function. AddDamage and IncurDamage produce damage by calling the related operations on the enclosing viewer's damage object.  Subclasses can use these functions for convenience to avoid accessing the enclosing viewer's damage object directly.</p>
  </dd>
  <dt>
    <p><strong>void Unselect(GraphicView*)</strong></p>
  </dt>
  <dd>
    <p>A convenience function that unselects the given view, which entails erasing its handles and removing it from the enclosing editor's selection object.</p>
  </dd>
  <dt>
    <p><strong>virtual void Add(GraphicView*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Append(GraphicView*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void InsertBefore(Iterator, GraphicView*)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void Remove(Iterator&)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual void DeleteView(Iterator&)</strong></p>
  </dt>
  <dd>
    <p>Unimplemented operations that composite subclasses should redefine for modifying the their (conceptual) list of children.  Note that subclasses needn't necessarily store their children in a list data structure, but a list maps closely to the semantics of these operations.  These operations are not public because only the view itself knows how to keep its structure consistent with that of the subject and/or its semantics.</p><p>Add adds a GraphicView to the end of the list of children. InsertBefore inserts a GraphicView before the GraphicView pointed to by the iterator.  Remove removes a view to which the given iterator refers from the list without deleting it, while DeleteView removes it and deletes it.  Remove and DeleteView should advance the iterator to point to the following view as a side effect.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GRAPHICVIEWS PUBLIC OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>GraphicViews(GraphicComps* = nil)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>virtual ~GraphicViews()</strong></p>
  </dt>
  <dd>
    <p>The constructor creates a GraphicViews, optionally supplying the subject.  The destructor deletes the GraphicViews' children.</p>
  </dd>
  <dt>
    <p><strong>virtual void Interpret(Command*)</strong></p>
  </dt>
  <dd>
    <p>GraphicViews objects interpret the following command:</p><p><strong>AlignToGridCmd</strong> aligns the graphical component to the grid that affects the view.  The overall alignment is based on how the first leaf subcomponent aligns itself: Interpret aligns the first leaf subcomponent to the grid and then moves all other subcomponents by the amount that the leaf moved.</p>
  </dd>
  <dt>
    <p><strong>virtual void Update()</strong></p>
  </dt>
  <dd>
    <p>Automatically update the GraphicViews' state and structure to match the subject's.  Update will <em>not</em> necessarily detect restructurings or state modifications made to the subject's children more than one level deep.  Update uses GVUpdater to do its work.</p>
  </dd>
  <dt>
    <p><strong>virtual Graphic* GetGraphic()</strong></p>
  </dt>
  <dd>
    <p>Return the GraphicViews' graphic, which (like its subject's graphic) is a Picture.</p>
  </dd>
  <dt>
    <p><strong>GraphicComps* GetGraphicComps()</strong></p>
  </dt>
  <dd>
    <p>Return the subject.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GRAPHICVIEWS PROTECTED OPERATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>UList* Elem(Iterator)</strong></p>
  </dt>
  <dd>
    <p>A convenience function for extracting a UList from an iterator.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO GraphicView&hellip;</h2>
        <div class="sectioncontent">
<p>Command(3U), ComponentView(3U), Connector(3U), Damage(3U), GVUpdater(3U), GraphicComp(3U), GraphicCompTool(3U), Grid(3U), Event(3I), Manipulator(3U), MoveTool(3U), Picture(3U), RotateTool(3U), Rubband(3I), ScaleTool(3U), Selection(3U), StretchTool(3U), Transformer(3I), Viewer(3U), align(3U)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="GraphicCompTool.3U.html"><span aria-hidden="true">&larr;</span> GraphicCompTool.3U: Tool for instantiating graphical components</a></li>
   <li class="next"><a href="Grid.3U.html">Grid.3U: Displays a grid in a viewer and constrains points to lie on it <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
