<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gd_getdata: Gd_getdata  retrieve data from a dirfile database</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Gd_getdata  retrieve data from a dirfile database">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gd_getdata (3) manual">
  <meta name="twitter:description" content="Gd_getdata  retrieve data from a dirfile database">
  <meta name="twitter:image" content="https://www.carta.tech/images/libgetdata-dev-gd_getdata-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/gd_getdata.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gd_getdata (3) manual" />
  <meta property="og:description" content="Gd_getdata  retrieve data from a dirfile database" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libgetdata-dev-gd_getdata-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gd_getdata<small> (3)</small></h1>
        <p class="lead">Gd_getdata  retrieve data from a dirfile database</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/gd_getdata.3.html">
      <span itemprop="name">gd_getdata: Gd_getdata  retrieve data from a dirfile database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libgetdata-dev/">
      <span itemprop="name">libgetdata-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/gd_getdata.3.html">
      <span itemprop="name">gd_getdata: Gd_getdata  retrieve data from a dirfile database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;getdata.h&gt;</strong> <strong>size_t gd_getdata(DIRFILE *</strong><em>dirfile</em><strong>, const char *</strong><em>field_code</em><strong>, off_t</strong> <em>first_frame</em><strong>, off_t </strong><em>first_sample</em><strong>, size_t </strong><em>num_frames</em><strong>, size_t</strong> <em>num_samples</em><strong>, gd_type_t </strong><em>return_type</em><strong>, void *</strong><em>data_out</em><strong>);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>gd_getdata</strong>() function queries a <a href="../man5/dirfile.5.html"><strong>dirfile</strong>(5)</a> database specified by <em>dirfile</em> for the field <em>field_code</em>. It fetches <em>num_frames</em> frames plus <em>num_samples</em> samples from this field, starting <em>first_sample</em> samples past frame <em>first_frame</em>. The data is converted to the data type specified by <em>return_type</em>, and stored in the user-supplied buffer <em>data_out</em>.</p><p>The <em>field_code</em> may contain one of the representation suffixes listed in <a href="../man5/dirfile-format.5.html"><strong>dirfile-format</strong>(5)</a>. If it does, <strong>gd_getdata</strong>() will compute the appropriate complex norm before returning the data.</p><p>The <em>dirfile</em> argument must point to a valid DIRFILE object previously created by a call to <a href="../man3/gd_open.3.html"><strong>gd_open</strong>(3)</a>. The argument <em>data_out</em> must point to a valid memory location of sufficient size to hold all data requested.</p><p>The first sample returned will be</p><p><em>first_frame</em> * <em>samples_per_frame</em> + <em>first_sample</em></p><p>as measured from the start of the dirfile, where <em>samples_per_frame</em> is the number of samples per frame as returned by <a href="../man3/gd_spf.3.html"><strong>gd_spf</strong>(3)</a>. The number of samples fetched is, similarly,</p><p><em>num_frames</em> * <em>samples_per_frame</em> + <em>num_samples</em>.</p><p>Although calling <strong>gd_getdata</strong>() using both samples and frames is possible, the function is typically called with either <em>num_samples</em> and <em>first_sample</em>, or <em>num_frames</em> and <em>first_frames</em>, equal to zero.</p><p>The <em>return_type</em> argument should be one of the following symbols, which indicates the desired return type of the data:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>GD_UINT8</em></p>
  </dt>
  <dd>
    <p>unsigned 8-bit integer</p>
  </dd>
  <dt>
    <p><em>GD_INT8</em></p>
  </dt>
  <dd>
    <p>signed (two's complement) 8-bit integer</p>
  </dd>
  <dt>
    <p><em>GD_UINT16</em></p>
  </dt>
  <dd>
    <p>unsigned 16-bit integer</p>
  </dd>
  <dt>
    <p><em>GD_INT16</em></p>
  </dt>
  <dd>
    <p>signed (two's complement) 16-bit integer</p>
  </dd>
  <dt>
    <p><em>GD_UINT32</em></p>
  </dt>
  <dd>
    <p>unsigned 32-bit integer</p>
  </dd>
  <dt>
    <p><em>GD_INT32</em></p>
  </dt>
  <dd>
    <p>signed (two's complement) 32-bit integer</p>
  </dd>
  <dt>
    <p><em>GD_UINT64</em></p>
  </dt>
  <dd>
    <p>unsigned 64-bit integer</p>
  </dd>
  <dt>
    <p><em>GD_INT64</em></p>
  </dt>
  <dd>
    <p>signed (two's complement) 64-bit integer</p>
  </dd>
  <dt>
    <p><em>GD_FLOAT32</em></p>
  </dt>
  <dd>
    <p>IEEE-754 standard 32-bit single precision floating point number</p>
  </dd>
  <dt>
    <p><em>GD_FLOAT64</em></p>
  </dt>
  <dd>
    <p>IEEE-754 standard 64-bit double precision floating point number</p>
  </dd>
  <dt>
    <p><em>GD_COMPLEX64</em></p>
  </dt>
  <dd>
    <p>C99-conformant 64-bit single precision complex number</p>
  </dd>
  <dt>
    <p><em>GD_COMPLEX128</em></p>
  </dt>
  <dd>
    <p>C99-conformant 128-bit double precision complex number</p>
  </dd>
  <dt>
    <p><em>GD_NULL</em></p>
  </dt>
  <dd>
    <p>the null type: the database is queried as usual, but no data is returned. In this case, <em>data_out</em> is ignored and may be NULL.</p>
  </dd>

</dl>
<p>The return type of the data need not be the same as the type of the data stored in the database.  Type conversion will be performed as necessary to return the requested type.  If the <em>field_code</em> does not indicate a representation, but conversion from a complex value to a purely real one is required, only the real portion of the requested vector will be returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>In all cases, <strong>gd_getdata</strong>() returns the number of samples (not bytes) successfully read from the database. If the end-of-field is encountered before the requested number of samples have been read, a short count will result.  The library does not consider this an error.  Requests for data before the beginning-of-field marker, which may have been shifted from frame zero by the presence of a <strong>FRAMEOFFSET</strong> directive, will result in the the data being padded at the front by NaN or zero depending on whether the return type is of floating point or integral type.</p><p>If an error has occurred, zero is returned and the dirfile error will be set to a non-zero value.  Possible error values are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>GD_E_ALLOC</strong></p>
  </dt>
  <dd>
    <p>The library was unable to allocate memory.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_CODE</strong></p>
  </dt>
  <dd>
    <p>The field specified by <em>field_code</em>, or one of the fields it uses for input, was not found in the database.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_DIRFILE</strong></p>
  </dt>
  <dd>
    <p>An invalid <em>dirfile</em> was supplied.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_FIELD_TYPE</strong></p>
  </dt>
  <dd>
    <p>The supplied <em>field_code</em> referred to a <strong>CONST</strong>,\~<strong>CARRAY</strong>, or <strong>STRING</strong> field.  The caller should use <a href="../man3/gd_get_constant.3.html"><strong>gd_get_constant</strong>(3)</a>,\~<a href="../man3/gd_get_carray.3.html"><strong>gd_get_carray</strong>(3)</a><strong>,</strong> or <a href="../man3/gd_get_string.3.html"><strong>gd_get_string</strong>(3)</a> instead.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_REPR</strong></p>
  </dt>
  <dd>
    <p>The representation suffix specified in <em>field_code</em>, or in one of the field codes it uses for input, was invalid.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_SCALAR</strong></p>
  </dt>
  <dd>
    <p>A scalar field used in the definition of the field was not found, or was not of scalar type.</p>
  </dd>
  <dt>
    <p><strong>GD_E_BAD_TYPE</strong></p>
  </dt>
  <dd>
    <p>An invalid <em>return_type</em> was specified.</p>
  </dd>
  <dt>
    <p><strong>GD_E_DIMENSION</strong></p>
  </dt>
  <dd>
    <p>A scalar field was found where a vector field was expected.</p>
  </dd>
  <dt>
    <p><strong>GD_E_INTERNAL_ERROR</strong></p>
  </dt>
  <dd>
    <p>An internal error occurred in the library while trying to perform the task. This indicates a bug in the library.  Please report the incident to the maintainer.</p>
  </dd>
  <dt>
    <p><strong>GD_E_OPEN_LINFILE</strong></p>
  </dt>
  <dd>
    <p>An error occurred while trying to read a LINTERP table from disk.</p>
  </dd>
  <dt>
    <p><strong>GD_E_RAW_IO</strong></p>
  </dt>
  <dd>
    <p>An error occurred while trying to open or read from a file on disk containing a raw field.</p>
  </dd>
  <dt>
    <p><strong>GD_E_RECURSE_LEVEL</strong></p>
  </dt>
  <dd>
    <p>Too many levels of recursion were encountered while trying to resolve <em>field_code</em>. This usually indicates a circular dependency in field specification in the dirfile.</p>
  </dd>
  <dt>
    <p><strong>GD_E_UNKNOWN_ENCODING</strong></p>
  </dt>
  <dd>
    <p>The encoding scheme of a RAW field could not be determined.  This may also indicate that the binary file associated with the RAW field could not be found.</p>
  </dd>
  <dt>
    <p><strong>GD_E_UNSUPPORTED</strong></p>
  </dt>
  <dd>
    <p>Reading from dirfiles with the encoding scheme of the specified dirfile is not supported by the library.  See <a href="../man5/dirfile-encoding.5.html"><strong>dirfile-encoding</strong>(5)</a> for details on dirfile encoding schemes.</p>
  </dd>

</dl>
<p>The dirfile error may be retrieved by calling <a href="../man3/gd_error.3.html"><strong>gd_error</strong>(3)</a>. A descriptive error string for the last error encountered can be obtained from a call to <a href="../man3/gd_error_string.3.html"><strong>gd_error_string</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The <strong>PHASE</strong> field type is poorly defined, since a forward-shifted <strong>PHASE</strong> field will always encounter the end-of-field marker before its input field does. This has ramifications when using <strong>gd_getdata</strong>() with streaming data.  The Dirfile Standards make tacit admission to this problem by indicating the results of reading a <strong>PHASE</strong> field beyond the beginning- or end-of-field is "implementation dependent" (see <a href="../man5/dirfile-format.5.html"><strong>dirfile-format</strong>(5)</a>). As with any other field, <strong>gd_getdata</strong>() will return a short count whenever a read from a <strong>PHASE</strong> field encounters the end-of-field marker.</p><p>Backward-shifted <strong>PHASE</strong> fields do not suffer from this problem, since <strong>gd_getdata</strong>() pads reads past the beginning-of-field marker with NaN or zero as appropriate. Database creators who wish to use the <strong>PHASE</strong> field type with streaming data are encouraged to work around this limitation by only using backward-shifted <strong>PHASE</strong> fields, by writing <strong>RAW</strong> data at the maximal time lag, and then back-shifting all data which should have been written earlier.  Another possible work-around is to write systematically less data to the first <strong>RAW</strong> field in proportion to the maximal forward phase shift.  This method will work with applications which respect the database size reported by <a href="../man3/gd_nframes.3.html"><strong>gd_nframes</strong>(3)</a> resulting in these applications effectively ignoring all frames past the frame containing the maximally forward-shifted <strong>PHASE</strong> field's end-of-field marker.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gd_getdata&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/dirfile.5.html"><strong>dirfile</strong>(5)</a>, <a href="../man5/dirfile-encoding.5.html"><strong>dirfile-encoding</strong>(5)</a>, <a href="../man3/gd_open.3.html"><strong>gd_open</strong>(3)</a>, <a href="../man3/gd_get_constant.3.html"><strong>gd_get_constant</strong>(3)</a>, <a href="../man3/gd_error.3.html"><strong>gd_error</strong>(3)</a>, <a href="../man3/gd_error_string.3.html"><strong>gd_error_string</strong>(3)</a>, <a href="../man3/gd_nframes.3.html"><strong>gd_nframes</strong>(3)</a>, <a href="../man3/gd_spf.3.html"><strong>gd_spf</strong>(3)</a>, <a href="../man3/gd_get_string.3.html"><strong>gd_get_string</strong>(3)</a>, <a href="../man3/gd_putdata.3.html"><strong>gd_putdata</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gd_get_string.3.html"><span aria-hidden="true">&larr;</span> gd_get_string.3: Gd_get_string  retrieve a string from a dirfile database</a></li>
   <li class="next"><a href="gd_getdata64.3.html">gd_getdata64.3: Gd_getdata64  retrieve data from a dirfile database with largefile support <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
