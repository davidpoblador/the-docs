<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>getifaddrs - get interface addresses</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Get interface addresses">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">getifaddrs<small> (3)</small></h1>
        <p class="lead">Get interface addresses</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/getifaddrs.3.html">
      <span itemprop="name">getifaddrs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/man-pages/">
      <span itemprop="name">man-pages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>#include &lt;sys/types.h&gt;</strong>
<strong>#include &lt;ifaddrs.h&gt;</strong>

<strong>int getifaddrs(struct ifaddrs **</strong><em>ifap</em><strong>);</strong>

<strong>void freeifaddrs(struct ifaddrs *</strong><em>ifa</em><strong>);</strong></pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The <strong>getifaddrs</strong>() function creates a linked list of structures describing the network interfaces of the local system, and stores the address of the first item of the list in <em>*ifap</em>. The list consists of <em>ifaddrs</em> structures, defined as follows:</p>
<p class='spacer'>

<pre>struct ifaddrs {
    struct ifaddrs  *ifa_next;    /* Next item in list */
    char            *ifa_name;    /* Name of interface */
    unsigned int     ifa_flags;   /* Flags from SIOCGIFFLAGS */
    struct sockaddr *ifa_addr;    /* Address of interface */
    struct sockaddr *ifa_netmask; /* Netmask of interface */
    union {
        struct sockaddr *ifu_broadaddr;
                         /* Broadcast address of interface */
        struct sockaddr *ifu_dstaddr;
                         /* Point-to-point destination address */
    } ifa_ifu;
#define              ifa_broadaddr ifa_ifu.ifu_broadaddr
#define              ifa_dstaddr   ifa_ifu.ifu_dstaddr
    void            *ifa_data;    /* Address-specific data */
};</pre>

<p class='spacer'>

<p>The <em>ifa_next</em> field contains a pointer to the next structure on the list, or NULL if this is the last item of the list.</p>
<p class='spacer'>

<p>The <em>ifa_name</em> points to the null-terminated interface name.</p>
<p class='spacer'>

<p>The <em>ifa_flags</em> field contains the interface flags, as returned by the <strong>SIOCGIFFLAGS</strong> <a href="../man2/ioctl.2.html"><strong>ioctl</strong>(2)</a> operation (see <a href="../man7/netdevice.7.html"><strong>netdevice</strong>(7)</a> for a list of these flags).</p>
<p class='spacer'>

<p>The <em>ifa_addr</em> field points to a structure containing the interface address. (The <em>sa_family</em> subfield should be consulted to determine the format of the address structure.) This field may contain a null pointer.</p>
<p class='spacer'>

<p>The <em>ifa_netmask</em> field points to a structure containing the netmask associated with <em>ifa_addr</em>, if applicable for the address family. This field may contain a null pointer.</p>
<p class='spacer'>

<p>Depending on whether the bit <strong>IFF_BROADCAST</strong> or <strong>IFF_POINTOPOINT</strong> is set in <em>ifa_flags</em> (only one can be set at a time), either <em>ifa_broadaddr</em> will contain the broadcast address associated with <em>ifa_addr</em> (if applicable for the address family) or <em>ifa_dstaddr</em> will contain the destination address of the point-to-point interface.</p>
<p class='spacer'>

<p>The <em>ifa_data</em> field points to a buffer containing address-family-specific data; this field may be NULL if there is no such data for this interface.</p>
<p class='spacer'>

<p>The data returned by <strong>getifaddrs</strong>() is dynamically allocated and should be freed using <strong>freeifaddrs</strong>() when no longer needed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">

<p>On success, <strong>getifaddrs</strong>() returns zero; on error, -1 is returned, and <em>errno</em> is set appropriately.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<p><strong>getifaddrs</strong>() may fail and set <em>errno</em> for any of the errors specified for <a href="../man2/socket.2.html"><strong>socket</strong>(2)</a>, <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a>, <a href="../man2/getsockname.2.html"><strong>getsockname</strong>(2)</a>, <a href="../man2/recvmsg.2.html"><strong>recvmsg</strong>(2)</a>, <a href="../man2/sendto.2.html"><strong>sendto</strong>(2)</a>, <a href="../man3/malloc.3.html"><strong>malloc</strong>(3)</a>, or <a href="../man3/realloc.3.html"><strong>realloc</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSIONS</h2>
        <div class="sectioncontent">

<p>The <strong>getifaddrs</strong>() function first appeared in glibc 2.3, but before glibc 2.3.3, the implementation supported only IPv4 addresses; IPv6 support was added in glibc 2.3.3. Support of address families other than IPv4 is available only on kernels that support netlink.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ATTRIBUTES</h2>
        <div class="sectioncontent">

<p>For an explanation of the terms used in this section, see <a href="../man7/attributes.7.html"><strong>attributes</strong>(7)</a>.</p>
<table class="table table-striped">
<tr>
<th>Interface</th>
<th>Attribute</th>
<th>Value</th></tr>

<tr>
<td><strong>getifaddrs</strong>(),   <strong>freeifaddrs</strong>()  </td>
<td>Thread safety</td>
<td>MT-Safe</td></tr>
</table>

<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">

<p>Not in POSIX.1. This function first appeared in BSDi and is present on the BSD systems, but with slightly different semantics documented&ndash;returning one entry per interface, not per address. This means <em>ifa_addr</em> and other fields can actually be NULL if the interface has no address, and no link-level address is returned if the interface has an IP address assigned. Also, the way of choosing either <em>ifa_broadaddr</em> or <em>ifa_dstaddr</em> differs on various systems.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<p>The addresses returned on Linux will usually be the IPv4 and IPv6 addresses assigned to the interface, but also one <strong>AF_PACKET</strong> address per interface containing lower-level details about the interface and its physical layer. In this case, the <em>ifa_data</em> field may contain a pointer to a <em>struct rtnl_link_stats</em>, defined in <em>&lt;linux/if_link.h&gt;</em> (in Linux 2.4 and earlier, <em>struct net_device_stats</em>, defined in <em>&lt;linux/netdevice.h&gt;</em>), which contains various interface attributes and statistics.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

  <p>The program below demonstrates the use of <strong>getifaddrs</strong>(), <strong>freeifaddrs</strong>(), and <a href="../man3/getnameinfo.3.html"><strong>getnameinfo</strong>(3)</a>. Here is what we see when running this program on one system:</p>
<pre>
$ <strong>./a.out</strong>
lo       AF_PACKET (17)
                tx_packets =        524; rx_packets =        524
                tx_bytes   =      38788; rx_bytes   =      38788
wlp3s0   AF_PACKET (17)
                tx_packets =     108391; rx_packets =     130245
                tx_bytes   =   30420659; rx_bytes   =   94230014
em1      AF_PACKET (17)
                tx_packets =          0; rx_packets =          0
                tx_bytes   =          0; rx_bytes   =          0
lo       AF_INET (2)
                address: &lt;127.0.0.1&gt;
wlp3s0   AF_INET (2)
                address: &lt;192.168.235.137&gt;
lo       AF_INET6 (10)
                address: &lt;::1&gt;
wlp3s0   AF_INET6 (10)
                address: &lt;fe80::7ee9:d3ff:fef5:1a91%wlp3s0&gt;</pre>

  <h3>Program source</h3>
  <p></p>
<pre>#define _GNU_SOURCE     /* To get defns of NI_MAXSERV and NI_MAXHOST */
#include &lt;arpa/inet.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netdb.h&gt;
#include &lt;ifaddrs.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;linux/if_link.h&gt;

int main(int argc, char *argv[])
{
    struct ifaddrs *ifaddr, *ifa;
    int family, s, n;
    char host[NI_MAXHOST];

    if (getifaddrs(&ifaddr) == -1) {
        perror("getifaddrs");
        exit(EXIT_FAILURE);
    }

    /* Walk through linked list, maintaining head pointer so we
       can free list later */

    for (ifa = ifaddr, n = 0; ifa != NULL; ifa = ifa-&gt;ifa_next, n++) {
        if (ifa-&gt;ifa_addr == NULL)
            continue;

        family = ifa-&gt;ifa_addr-&gt;sa_family;

        /* Display interface name and family (including symbolic
           form of the latter for the common families) */

        printf("%-8s %s (%d)&#92;n",
               ifa-&gt;ifa_name,
               (family == AF_PACKET) ? "AF_PACKET" :
               (family == AF_INET) ? "AF_INET" :
               (family == AF_INET6) ? "AF_INET6" : "???",
               family);

        /* For an AF_INET* interface address, display the address */

        if (family == AF_INET || family == AF_INET6) {
            s = getnameinfo(ifa-&gt;ifa_addr,
                    (family == AF_INET) ? sizeof(struct sockaddr_in) :
                                          sizeof(struct sockaddr_in6),
                    host, NI_MAXHOST,
                    NULL, 0, NI_NUMERICHOST);
            if (s != 0) {
                printf("getnameinfo() failed: %s&#92;n", gai_strerror(s));
                exit(EXIT_FAILURE);
            }

            printf("&#92;t&#92;taddress: &lt;%s&gt;&#92;n", host);

        } else if (family == AF_PACKET && ifa-&gt;ifa_data != NULL) {
            struct rtnl_link_stats *stats = ifa-&gt;ifa_data;

            printf("&#92;t&#92;ttx_packets = %10u; rx_packets = %10u&#92;n"
                   "&#92;t&#92;ttx_bytes   = %10u; rx_bytes   = %10u&#92;n",
                   stats-&gt;tx_packets, stats-&gt;rx_packets,
                   stats-&gt;tx_bytes, stats-&gt;rx_bytes);
        }
    }

    freeifaddrs(ifaddr);
    exit(EXIT_SUCCESS);
}</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man2/bind.2.html"><strong>bind</strong>(2)</a>, <a href="../man2/getsockname.2.html"><strong>getsockname</strong>(2)</a>, <a href="../man2/socket.2.html"><strong>socket</strong>(2)</a>, <a href="../man7/packet.7.html"><strong>packet</strong>(7)</a>, <strong>ifconfig</strong>(8)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gethostid.3.html"><span aria-hidden="true">&larr;</span> gethostid.3: get or set the unique identifier of the current host</a></li>
   <li class="next"><a href="getipnodebyaddr.3.html">getipnodebyaddr.3: get network hostnames and addresses <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
