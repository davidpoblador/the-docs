<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Apache2::SiteControl::PermissionManager: Rule-based permission management</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Rule-based permission management">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Apache2::SiteControl::PermissionManager (3pm) manual">
  <meta name="twitter:description" content="Rule-based permission management">
  <meta name="twitter:image" content="https://www.carta.tech/images/libapache2-sitecontrol-perl-Apache2::SiteControl::PermissionManager-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Apache2::SiteControl::PermissionManager.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Apache2::SiteControl::PermissionManager (3pm) manual" />
  <meta property="og:description" content="Rule-based permission management" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libapache2-sitecontrol-perl-Apache2::SiteControl::PermissionManager-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Apache2::SiteControl::PermissionManager<small> (3pm)</small></h1>
        <p class="lead">Rule-based permission management</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Apache2::SiteControl::PermissionManager.3pm.html">
      <span itemprop="name">Apache2::SiteControl::PermissionManager: Rule-based permission management</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libapache2-sitecontrol-perl/">
      <span itemprop="name">libapache2-sitecontrol-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Apache2::SiteControl::PermissionManager.3pm.html">
      <span itemprop="name">Apache2::SiteControl::PermissionManager: Rule-based permission management</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Apache2::SiteControl::PermissionManager;

  $manager = new Apache2::SiteControl::PermissionManager();
  $rule1 = new SomeSubclassOfSiteControl();
  $manager-&gt;addRule($rule1);
  ...

  $user = new SomeUserTypeYouDefineThatMakesSenseToRules;

  if($manager-&gt;can($user, $action, $resource)) {
     # OK to do action
  }

  # For example

  if($manager-&gt;can($user, "read", "/etc/shadow")) {
     open DATA, "&lt;/etc/shadow";
     ...
  }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module implements a user capabilities \s-1API\s0. The basic idea is that you have a set of users and a set of things that can be done in a system. In the code of the system itself, you want to surround sensitive operations with code that determines if the current user is allowed to do that operation.</p><p>This module attempts to make such a system possible, and easily extensible. The module requires that you write implementations of rules for you system that are subclasses of Apache2::SiteControl::Rule. The rules can be written to use any data types, which are abstractly known as \*(L"users\*(R", \*(L"actions\*(R", and \*(L"resources.\*(R"</p><p>A user is some object that your applications uses to identify the person operating the program. The expectation is that at some point the application authenticated the user and obtained their identity, and the rest of the application is merely applying a ruleset to determine what that user is allowed to do. In the context of the SiteControl system, this user is a Apache2::SiteControl::User or subclass thereof.</p><p>An action can be any data type (i.e. simply a string). Again, it is really up to the code of the rules (which are primarily written by you) to determine what is valid.</p><p>The overall usage of this package is as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>1.</strong> Decide how you want to represent a user. (i.e. Apache2::SiteControl::User)
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>2.</strong> Decide the critical sections of your code that need to be protected, and decide what to do if the user doesn't pass muster. For example if a screen should just hide fields, then the application code needs to reflect that.
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>3.</strong> Create a permission manager instance for your application. Typically use a singleton pattern (there need be only one manager). In the SiteControl system, this is done by a ManagerFactory that you write.
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>4.</strong> Surround sensitive sections of code with something like:
  </dt>
  <dd>
    <p>   if($manager-&gt;can($user, "view salary", $payrollRecord))    {       # show salary fields    } else       # hide salary fields    }</p>
  </dd>
  <dt>
    <strong>5.</strong> Create rules that spell out the behavior you want and add them to your application's permission manager. The basic idea is that a rule can grant permission, or deny it. If it neither grants or denies, then the manager will take the safe route and say that the action cannot be taken. Part of the code for the rule for protecting salaries might look like:
  </dt>
  <dd>
    <p>   package SalaryViewRule;</p><p>   use Apache2::SiteControl::Rule;    use Apache2::SiteControl::User;</p><p>   use base qw(Apache2::SiteControl::Rule);</p><p>   sub grants    {       $this = shift;       $user = shift;       $action = shift;       $resource = shift;</p><p>      # Do not grant on requests we don&apos;t understand.       return 0 if(!$user-&gt;isa("Apache2::SiteControl::User") ||                   !$this-&gt;isa("Apache2::SiteControl::Rule"));</p><p>      if($action eq "view salary" && $resource-&gt;isa("Payroll::Record")) {          if($user-&gt;getUsername() eq $resource-&gt;getEmployeeName()) {             return "user can view their own salary";          }       }       return 0;    } Then in your subclass of ManagerFactory:    use SalaryViewRule;</p><p>   ...</p><p>   $viewRule = new SalaryViewRule;    $manager-&gt;addRule($viewRule);</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>can</strong>(<em>user</em>, <em>action verb</em>, <em>resource</em>)
  </dt>
  <dd>
    <p>This is the primary method of the PermissionManager. It asks if the specified user can do the specified action on the specified resource. For example,    $manager-&gt;can($user, "eat", "cake"); would return true if the user is allowed to eat cake. Note that this gives you quite a bit of flexibility, but at the expense of strong type safety. It is suggested that all of your rules do type checking to insure that a rule is properly applied.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Apache2::SiteControl::PermissionManager&hellip;</h2>
        <div class="sectioncontent">
<p>Apache2::SiteControl::Rule, Apache::SiteControl::ManagerFactory, Apache2::SiteControl::UserFactory, Apache::SiteControl</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This module was written by Tony Kay, &lt;tkay@uoregon.edu&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Apache2::SiteControl::ManagerFactory.3pm.html"><span aria-hidden="true">&larr;</span> Apache2::SiteControl::ManagerFactory.3pm: An abstract base class to use as a pattern for custom permissionmanager production.</a></li>
   <li class="next"><a href="Apache2::SiteControl::Radius.3pm.html">Apache2::SiteControl::Radius.3pm: Raduis authentication module for sitecontrol <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
