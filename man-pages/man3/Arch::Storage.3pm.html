<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arch::Storage: Abstract class to access arch archives</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Abstract class to access arch archives">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Arch::Storage (3pm) manual">
  <meta name="twitter:description" content="Abstract class to access arch archives">
  <meta name="twitter:image" content="https://www.carta.tech/images/libarch-perl-Arch::Storage-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Arch::Storage.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Arch::Storage (3pm) manual" />
  <meta property="og:description" content="Abstract class to access arch archives" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libarch-perl-Arch::Storage-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Arch::Storage<small> (3pm)</small></h1>
        <p class="lead">Abstract class to access arch archives</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Arch::Storage.3pm.html">
      <span itemprop="name">Arch::Storage: Abstract class to access arch archives</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libarch-perl/">
      <span itemprop="name">libarch-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Arch::Storage.3pm.html">
      <span itemprop="name">Arch::Storage: Abstract class to access arch archives</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use base &apos;Arch::Storage&apos;;

    # see synopsis of concrete classes
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Arch::Storage provides some common methods to query content of arch archive.</p><p>The methods usually return arrayref if not otherwise specified, and are not affected by the list context (except for working_names).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>The following (implemented and pure virtual) methods are common to subclasses:</p><p><strong>new</strong>, <strong>init</strong>, <strong>working_name</strong>, <strong>working_names</strong>, <strong>fixup_name_alias</strong>, <strong>is_archive_managed</strong>, <strong>expanded_revisions</strong>.</p><p><strong>archives</strong>, <strong>categories</strong>, <strong>branches</strong>, <strong>versions</strong>, <strong>revisions</strong>, <strong>get_revision_descs</strong>, <strong>expanded_archive_info</strong>, <strong>get_revision_changeset</strong>, <strong>get_changeset</strong>, <strong>get_revision_log</strong>, <strong>get_log</strong>. Create a new instance of the concrete subclass (i.e. Arch::Session or Arch::Library).</p>
<dl class='dl-vertical'>
  <dt>
    <strong>instance</strong>
  </dt>
  <dd>
    <p>Alternative constructor. Return the last created instance of the concrete subclass (i.e. Arch::Session or Arch::Library) or create a new one. The purpose of this alternative constructor is to allow the singleton behaviour as well as certain Aspect Oriented Programming practices. Theoretical note: this design is acceptably good, and mixing <strong>new</strong> and <strong>instance</strong> constructors in the code usually does what is intended. However, if someone actually creates more than one object of any subclass, he has two choices to enforce correctness. Either only use <strong>instance</strong> method in the code (singleton pattern), or alternatively create a temporary <strong>new</strong> object before calling methods of other classes that internally use <strong>instance</strong> to work with this subclass. Initialize or reset the object state.</p>
  </dd>
  <dt>
    <strong>working_name</strong> [<em>name</em>]
  </dt>
  <dd>
    <p>Set or get the default working operand for other methods. The argument may be anything that Arch::Name constructor accepts, i.e. fully qualified string, arrayref, hashref or Arch::Name instance. If needed, <em>name</em> is converted to Arch::Name instance, and this is what is returned. Note that this object behaves as fully qualified name in string context.</p>
  </dd>
  <dt>
    <strong>working_names</strong> [<em>archive</em> ..]
  </dt>
  <dd>
    <p>Similar to <strong>working_name</strong>, but accepts and returns a list of name components, from <em>archive</em> to <em>revision</em>. This method is provided for convenience and backward compatibility only. You may as well use <strong>working_name</strong> instead, just enclose the argument list into arrayref, and call <strong>to_array</strong> on the returned object.</p>
  </dd>
  <dt>
    <strong>fixup_name_alias</strong>
  </dt>
  <dd>
    <p>Replace (if needed) the \*(L"\s-1FIRST\s0\*(R" and \*(L"\s-1LATEST\s0\*(R" components of the working name's <em>version</em> and <em>revision</em> with the actual values by querying the storage.</p>
  </dd>
  <dt>
    <strong>is_archive_managed</strong> [<em>archive</em>]
  </dt>
  <dd>
    <p>Return true or false depending on whether the archive is known to the storage. If given, the argument is used instead of the default <strong>working_name</strong>.</p>
  </dd>
  <dt>
    <strong>expanded_revisions</strong>
  </dt>
  <dd>
    <p>Return all revisions in all archives, each revision is Arch::Name object.</p>
  </dd>
  <dt>
    <strong>archives</strong>
  </dt>
  <dd>
    <p>Return all registered (or otherwise known) archives.</p>
  </dd>
  <dt>
    <strong>categories</strong> [<em>archive</em>]
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>branches</strong>   [<em>category</em>]
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>versions</strong>   [<em>branch</em>]
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>revisions</strong>  [<em>version</em>]
  </dt>
  <dd>
    <p>Return all categories, branches, versions or revisions respectively in the immediate parent, similarly to the corresponding <em>tla</em> commands. If given, the argument is used instead of the default <strong>working_name</strong>.</p>
  </dd>
  <dt>
    <strong>get_revision_descs</strong> [<em>version</em>]
  </dt>
  <dd>
    <p>Return describing hash for every revision in the version. If given, the argument is used instead of the default <strong>working_name</strong>. The revision hashes have the following fields:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>name</strong>
  </dt>
  <dd>
    <p>The revision name (i.e. \*(C`base-0\*(C', \*(C`patch-X\*(C', \*(C`version-0\*(C' or \*(C`versionfix-X\*(C')</p>
  </dd>
  <dt>
    <strong>summary</strong>
  </dt>
  <dd>
    <p>The revision's commit log's summary line</p>
  </dd>
  <dt>
    <strong>creator</strong>
  </dt>
  <dd>
    <p>The name part of the committers \*(C`tla my-id\*(C' (i.e. \*(C`John Hacker\*(C')</p>
  </dd>
  <dt>
    <strong>email</strong>
  </dt>
  <dd>
    <p>The email address part of the committers \*(C`tla my-id\*(C' (i.e. \*(C`jhacker@nowhere.org\*(C')</p>
  </dd>
  <dt>
    <strong>date</strong>
  </dt>
  <dd>
    <p>The revisions commit date in \*(C`%Y-%m-%d %H:%M:%S %Z\*(C' format (see <em>strftime</em>\|(3))</p>
  </dd>
  <dt>
    <strong>kind</strong>
  </dt>
  <dd>
    <p>The kind of revision (i.e. one of \*(C`tag\*(C', \*(C`import\*(C', \*(C`cset\*(C' or \*(C`unknown\*(C')</p>
  </dd>

</dl>

  </dd>
  <dt>
    <strong>expanded_archive_info</strong> [<em>archive</em>]
  </dt>
  <dd>
    <p>Returns a tree of categories, branches and versions in the archive. The archive defaults to <strong>working_names</strong>. Returns a reference to a list of categories. Every category is a list consisting of the category name and a list of branches. Every branch is a list consisting of the branch name and a list of versions. Every version is list consisting of the version number and the first and last revision name.     [       [ "category1", [         [ "branch1", [           [ "version1", "first_revision1", "last_revision1" ],           [ "version2", "first_revision2", "last_revision2" ],           ...         ],         ...       ],       ...     ]</p>
  </dd>
  <dt>
    <strong>get_revision_changeset</strong> <em>revision</em> [<em>dir</em>]
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>get_changeset</strong> [<em>dir</em>]
  </dt>
  <dd>
    <p>Fetches the changeset for <em>revision</em> or <strong>working_name</strong> and returns an Arch::Changeset for it. If <em>dir</em> is specified, it will be used to store the contents of the changeset. Otherwise a new temporary directory will be created.</p>
  </dd>
  <dt>
    <strong>get_revision_log</strong> <em>revision</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>get_log</strong>
  </dt>
  <dd>
    <p>Fetch the log for the <em>revision</em> or <strong>working_name</strong>. Returns an Arch::Log object.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>No known bugs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Mikhael Goikhman (migo@homemail.com\*(--Perl-GPL/arch-perl\*(--devel).</p><p>Enno Cramer (uebergeek@web.de--2003/arch-perl\*(--devel).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Arch::Storage&hellip;</h2>
        <div class="sectioncontent">
<p>For more information, see tla, Arch::Session, Arch::Library.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Arch::SharedIndex.3pm.html"><span aria-hidden="true">&larr;</span> Arch::SharedIndex.3pm: A synchronized data structure (map) for ipc</a></li>
   <li class="next"><a href="Arch::Tarball.3pm.html">Arch::Tarball.3pm: An interface to create and work with tarballs <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
