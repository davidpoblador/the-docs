<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>brlapi__exceptionHandler_t: How to handle errors.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="How to handle errors.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="brlapi__exceptionHandler_t (3) manual">
  <meta name="twitter:description" content="How to handle errors.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libbrlapi-dev-brlapi__exceptionHandler_t-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/brlapi__exceptionHandler_t.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="brlapi__exceptionHandler_t (3) manual" />
  <meta property="og:description" content="How to handle errors." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libbrlapi-dev-brlapi__exceptionHandler_t-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">brlapi__exceptionHandler_t<small> (3)</small></h1>
        <p class="lead">How to handle errors.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/brlapi__exceptionHandler_t.3.html">
      <span itemprop="name">brlapi__exceptionHandler_t: How to handle errors.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libbrlapi-dev/">
      <span itemprop="name">libbrlapi-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/brlapi__exceptionHandler_t.3.html">
      <span itemprop="name">brlapi__exceptionHandler_t: How to handle errors.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Detailed Description</h2>
        <div class="sectioncontent">
<p>When a function fails, <strong>brlapi_errno</strong> will hold an error code to explain why it failed. It should always be reported somehow.</p><p>Although most errors are reported that way, some (called exceptions) are reported asynchronously for efficiency reasons, because they always just report a programming error. The affected functions are: brlapi_setFocus, brlapi_write* and brlapi_sendRaw. When they happen, the next call to brlapi_something will close the connection and call the <em>exception</em> handler. If the exception handler returns, the brlapi_something function will return an end-of-file error.</p><p>The default exception handler (<strong>brlapi_defaultExceptionHandler()</strong>) dumps the guilty packet before abort()ing. It can be replaced by calling <strong>brlapi_setExceptionHandler()</strong>. For instance, the Java and Python bindings use this for raising a Java or Python exception that may be caught.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Macro Definition Documentation</h2>
        <div class="sectioncontent">
<h3>#define brlapi_errfun   (brlapi_error.errfun)</h3>
<p>Cheat about the brlapi_errfun C token</p>
<h3>#define brlapi_errno   (brlapi_error.brlerrno)</h3>
<p>Cheat about the brlapi_errno C token</p>
<h3>#define brlapi_error   (*\fBbrlapi_error_location\fP())</h3>
<p>Cheat about the brlapi_error C token</p>
<h3>#define BRLAPI_ERROR_AUTHENTICATION   17</h3>
<p>Authentication failed</p>
<h3>#define BRLAPI_ERROR_CONNREFUSED   8</h3>
<p>Connection refused</p>
<h3>#define BRLAPI_ERROR_DEVICEBUSY   3</h3>
<p>A connection is already using RAW or suspend mode</p>
<h3>#define BRLAPI_ERROR_DRIVERERROR   16</h3>
<p>Packet returned by driver too large</p>
<h3>#define BRLAPI_ERROR_EMPTYKEY   15</h3>
<p>Key file empty</p>
<h3>#define BRLAPI_ERROR_EOF   14</h3>
<p>Unexpected end of file</p>
<h3>#define BRLAPI_ERROR_GAIERR   10</h3>
<p>Getaddrinfo error</p>
<h3>#define BRLAPI_ERROR_ILLEGAL_INSTRUCTION   5</h3>
<p>Forbiden in current mode</p>
<h3>#define BRLAPI_ERROR_INVALID_PACKET   7</h3>
<p>Invalid size</p>
<h3>#define BRLAPI_ERROR_INVALID_PARAMETER   6</h3>
<p>Out of range or have no sense</p>
<h3>#define BRLAPI_ERROR_LIBCERR   11</h3>
<p>Libc error</p>
<h3>#define BRLAPI_ERROR_NOMEM   1</h3>
<p>Not enough memory</p>
<h3>#define BRLAPI_ERROR_OPNOTSUPP   9</h3>
<p>Operation not supported</p>
<h3>#define BRLAPI_ERROR_PROTOCOL_VERSION   13</h3>
<p>Bad protocol version</p>
<h3>#define BRLAPI_ERROR_SUCCESS   0</h3>
<p>Success</p>
<h3>#define BRLAPI_ERROR_TTYBUSY   2</h3>
<p>A connection is already running in this tty</p>
<h3>#define BRLAPI_ERROR_UNKNOWN_INSTRUCTION   4</h3>
<p>Not implemented in protocol</p>
<h3>#define BRLAPI_ERROR_UNKNOWNTTY   12</h3>
<p>Couldn't find out the tty number</p>
<h3>#define brlapi_gaierrno   (brlapi_error.gaierrno)</h3>
<p>Cheat about the brlapi_gaierrno C token</p>
<h3>#define brlapi_libcerrno   (brlapi_error.libcerrno)</h3>
<p>Cheat about the brlapi_libcerrno C token</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Typedef Documentation</h2>
        <div class="sectioncontent">
<h3>typedef void(\fBBRLAPI_STDCALL\fP * brlapi__exceptionHandler_t)(\fBbrlapi_handle_t\fP *handle, int error, \fBbrlapi_packetType_t\fP type, const void *packet, size_t size)</h3>

<h3>typedef void(\fBBRLAPI_STDCALL\fP * brlapi_exceptionHandler_t)(int error, \fBbrlapi_packetType_t\fP type, const void *packet, size_t size)</h3>
<p>Types for exception handlers</p><p>Types of exception handlers which are to be given to <strong>brlapi_setExceptionHandler()</strong> and <strong>brlapi__setExceptionHandler()</strong>.</p><p><strong>Parameters:</strong></p><p><em>handle</em> is the handle corresponding to the guilty connection;</p><p><em>error</em> is a BRLAPI_ERROR_ error code;</p><p><em>type</em> is the type of the guilty packet;</p><p><em>packet</em> points to the content of the guilty packet (might be a little bit truncated);</p><p><em>size</em> gives the guilty packet's size.</p>
<h3>typedef uint32_t \fBbrlapi_packetType_t\fP</h3>
<p>Type for packet type. Only unsigned can cross networks, 32bits</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Function Documentation</h2>
        <div class="sectioncontent">
<h3>void \fBBRLAPI_STDCALL\fP brlapi__defaultExceptionHandler (\fBbrlapi_handle_t\fP *handle, interror, \fBbrlapi_packetType_t\fPtype, const void *packet, size_tsize)</h3>

<h3>\fBbrlapi__exceptionHandler_t\fP \fBBRLAPI_STDCALL\fP brlapi__setExceptionHandler (\fBbrlapi_handle_t\fP *handle, \fBbrlapi__exceptionHandler_t\fPhandler)</h3>

<h3>int \fBBRLAPI_STDCALL\fP brlapi__strexception (\fBbrlapi_handle_t\fP *handle, char *buffer, size_tbufferSize, interror, \fBbrlapi_packetType_t\fPtype, const void *packet, size_tpacketSize)</h3>

<h3>void \fBBRLAPI_STDCALL\fP brlapi_defaultExceptionHandler (interror, \fBbrlapi_packetType_t\fPtype, const void *packet, size_tsize)</h3>

<h3>\fBbrlapi_error_t\fP* \fBBRLAPI_STDCALL\fP brlapi_error_location (void)</h3>
<p>Get per-thread error location</p><p>In multithreaded software, <strong>brlapi_error</strong> is thread-specific, so api.h cheats about the brlapi_error token and actually calls <strong>brlapi_error_location()</strong>.</p><p>This gets the thread specific location of global variable <strong>brlapi_error</strong></p>
<h3>const char* \fBBRLAPI_STDCALL\fP brlapi_getPacketTypeName (\fBbrlapi_packetType_t\fPtype)</h3>
<p>Get plain packet type</p><p><strong>brlapi_getPacketTypeName()</strong> returns the plain packet type name corresponding to its argument.</p>
<h3>void \fBBRLAPI_STDCALL\fP brlapi_perror (const char *s)</h3>
<p>Print a BrlAPI error message</p><p><strong>brlapi_perror()</strong> reads <strong>brlapi_error</strong>, and acts just like perror().</p>
<h3>\fBbrlapi_exceptionHandler_t\fP \fBBRLAPI_STDCALL\fP brlapi_setExceptionHandler (\fBbrlapi_exceptionHandler_t\fPhandler)</h3>
<p>Set a new exception handler</p><p><strong>brlapi_setExceptionHandler()</strong> replaces the previous exception handler with the handler parameter. The previous exception handler is returned to make chaining error handlers possible.</p><p>The default handler just prints the exception and abort()s.</p>
<h3>const char* \fBBRLAPI_STDCALL\fP brlapi_strerror (const \fBbrlapi_error_t\fP *error)</h3>
<p>Get plain error message</p><p><strong>brlapi_strerror()</strong> returns the plain error message corresponding to its argument.</p>
<h3>int \fBBRLAPI_STDCALL\fP brlapi_strexception (char *buffer, size_tbufferSize, interror, \fBbrlapi_packetType_t\fPtype, const void *packet, size_tpacketSize)</h3>
<p>Describes an exception</p><p><strong>brlapi_strexception()</strong> puts a text describing the given exception in buffer.</p><p>The beginning of the guilty packet is dumped as a sequence of hex bytes.</p><p><strong>Returns:</strong></p><p>the size of the text describing the exception, following snprintf()'s semantics.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Variable Documentation</h2>
        <div class="sectioncontent">
<h3>const char* brlapi_errfun</h3>
<p>Shorthand for brlapi_error.errfun</p>
<h3>const char* brlapi_errlist[]</h3>
<p>Error message list</p><p>These are the string constants used by <strong>brlapi_perror()</strong>.</p>
<h3>int brlapi_errno</h3>
<p>Shorthand for brlapi_error.errno</p>
<h3>\fBbrlapi_error_t\fP brlapi_error</h3>
<p>Global variable brlapi_error</p><p><strong>brlapi_error</strong> is a global left-value containing the last error information. Its errno field is not reset to BRLAPI_ERROR_SUCCESS on success.</p><p>This information may be copied in <strong>brlapi_error_t</strong> variables for later use with the brlapi_strerror function.</p>
<h3>int brlapi_gaierrno</h3>
<p>Shorthand for brlapi_error.gaierrno</p>
<h3>int brlapi_libcerrno</h3>
<p>Shorthand for brlapi_error.libcerrno</p>
<h3>const int brlapi_nerr</h3>
<p>Number of error messages</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for BrlAPI from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="brlapi__enterTtyModeWithPath.3.html"><span aria-hidden="true">&larr;</span> brlapi__enterTtyModeWithPath.3: How to take control of ttys for direct braille display / read.</a></li>
   <li class="next"><a href="brlapi__getDisplaySize.3.html">brlapi__getDisplaySize.3: How to get information about the connected terminal. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
