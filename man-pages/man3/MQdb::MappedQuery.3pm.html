<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MQdb::MappedQuery: Description of object</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Description of object">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="MQdb::MappedQuery (3pm) manual">
  <meta name="twitter:description" content="Description of object">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmqdb-perl-MQdb::MappedQuery-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/MQdb::MappedQuery.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MQdb::MappedQuery (3pm) manual" />
  <meta property="og:description" content="Description of object" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmqdb-perl-MQdb::MappedQuery-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">MQdb::MappedQuery<small> (3pm)</small></h1>
        <p class="lead">Description of object</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/MQdb::MappedQuery.3pm.html">
      <span itemprop="name">MQdb::MappedQuery: Description of object</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmqdb-perl/">
      <span itemprop="name">libmqdb-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/MQdb::MappedQuery.3pm.html">
      <span itemprop="name">MQdb::MappedQuery: Description of object</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>An Object_relational_mapping (\s-1ORM\s0) design pattern based on mapping named_column results from any query into attributes of an object. As long as the column_names are parsable into attributes, any query is ok. This is an evolution of several ideas I have either used or created over the last 15 years of coding.  This is a variation on the ActiveRecord design pattern but it trades more  flexibility, power and control for slightly less automation.  It still provides a development speed/ease advange over many \s-1ORM\s0 patterns.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>MappedQuery is an abstract superclass that is a variation on the ActiveRecord design pattern.  Instead of actively mapping a table into an object, this will actively map the result of a query into an object.  The query is standardized for a subclass of this object, and the columns returned by the query define the attributes of the object.  This gives much more flexibility than the standard implementation of ActiveRecord.  Since this design pattern is based around mapping a query (from potentially a multiple table join) to a single class object, this pattern is called MappedQuery.</p><p>In this particular implementation of this design pattern (mainly due to some limitations in perl) several aspects must be hand coded as part of the implementation of a subclass.  Subclasses must handcode - all accessor methods - override the mapRow method - APIs for all explicit fetch methods</p>
<pre>
  (by using the superclass fetch_single and fetch_multiple)
</pre>
<p>- the store methods are coded by general \s-1DBI\s0 code (no framework assistance)</p><p>Individual MQdb::Database handle objects are assigned at an instance level for each object. This is different from some ActiveRecord implementations which place database handles into a global context or at the Class level. By placing it with each instance, this allows creation of instances of the same class pulled from two different databases, but with similar schemas. This is very useful when building certain types of data analysis systems.</p><p>The only restriction is that the database handle must be able run the queries that the object requires for it to work.</p><p>Future implementations could do more automatic code generation but this version already speeds development time by 2x-3x without imposing any limitations and retains all the flexibility of handcoding with \s-1DBI\s0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONTACT</h2>
        <div class="sectioncontent">
<p>Jessica Severin &lt;jessica.severin@gmail.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">

<pre>
 * Software License Agreement (BSD License)
 * MappedQueryDB [MQdb] toolkit
 * copyright (c) 2006-2009 Jessica Severin
 * All rights reserved.
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Jessica Severin nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS &apos;&apos;AS IS&apos;&apos; AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDERS BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">APPENDIX</h2>
        <div class="sectioncontent">
<p>The rest of the documentation details each of the object methods. Internal methods are usually preceded with a _</p><h3>mapRow</h3>
<p>  Description: This method must be overridden by subclasses to do the mapping of columns                from the query response into attributes of the object.  This is part of the                internal factory machinery. The instance of the class is created before this method is                called and the default init() method has already been called.  The purpose of this                method is to initialize the rest of the state of the instance based on the $row_hash   Arg (1)    : $row_hash perl hash   Arg (2)    : optional $dbc DBI connection (not generally used by most sublcasses)   Returntype : $self   Exceptions : none   Caller     : only called by internal factory methods   Example    :                   sub mapRow {                       my $self = shift;                       my $rowHash = shift;</p><p>                      $self-&gt;primary_id($rowHash-&gt;{&apos;symbol_id&apos;});                       $self-&gt;type($rowHash-&gt;{&apos;sym_type&apos;});                       $self-&gt;symbol($rowHash-&gt;{&apos;sym_value&apos;});                       return $self;                   }</p>
<h3>store</h3>
<p>  Description: This method is just an empty template as part of the API definition.                How it is defined, and how parameters are handled are completely up to each                subclass.  Each subclass should override and implement.   Returntype : $self   Exceptions : none   Caller     : general loader scripts</p>
<h3>fetch_single</h3>
<p>  Description: General purpose template method for fetching a single instance                of this class(subclass) using the mapRow method to convert                a row of data into an object.   Arg (1)    : $database (MQdb::Database)   Arg (2)    : $sql (string of SQL statement with place holders)   Arg (3...) : optional parameters to map to the placehodlers within the SQL   Returntype : instance of this Class (subclass)   Exceptions : none   Caller     : subclasses (not public methods)   Example    :                   sub fetch_by_id {                       my $class = shift;                       my $db = shift;                       my $id = shift;                       my $sql = "SELECT * FROM symbol WHERE symbol_id=?";                       return $class-&gt;fetch_single($db, $sql, $id);                   }</p>
<h3>fetch_multiple</h3>
<p>  Description: General purpose template method for fetching an array of instance                of this class(subclass) using the mapRow method to convert                a row of data into an object.   Arg (1)    : $database (MQdb::Database)   Arg (2)    : $sql (string of SQL statement with place holders)   Arg (3...) : optional parameters to map to the placehodlers within the SQL   Returntype : array of all instances of this Class (subclass) which match the query   Exceptions : none   Caller     : subclasses (not public methods)   Example    :                   sub fetch_all_by_value {                       my $class = shift;                       my $db = shift;                       my $name = shift;                       my $sql = "SELECT * FROM symbol WHERE sym_value=?";                       return $class-&gt;fetch_multiple($db, $sql, $name);                   }</p>
<h3>stream_multiple</h3>
<p>  Description: General purpose template method for fetching multiple instance                of this class(subclass) using the mapRow method to convert                a row of data into an object. Instead of instantiating all                instance at once and returning as array, this method returns                a DBStream instance which then creates each instance from an                open handle on each $stream-&gt;next_in_stream() call.   Arg (1)    : $database (MQdb::Database)   Arg (2)    : $sql (string of SQL statement with place holders)   Arg (3...) : optional parameters to map to the placehodlers within the SQL   Returntype : DBStream object   Exceptions : none   Caller     : subclasses use this internally when creating new API stream_by....() methods   Example    :                   sub stream_by_value {                       my $class = shift;                       my $db = shift;                       my $name = shift;                       my $sql = "SELECT * FROM symbol WHERE sym_value=?";                       return $class-&gt;stream_multiple($db, $sql, $name);                   }</p>
<h3>fetch_col_value</h3>
<p>  Description: General purpose function to allow fetching of a single column from a single row.   Arg (1)    : $sql (string of SQL statement with place holders)   Arg (2...) : optional parameters to map to the placehodlers within the SQL   Example    : $value = $self-&gt;fetch_col_value($db,                                                "select symbol_id from symbol where sym_type=? and sym_value=?",                                                $type,$value);   Returntype : scalar value   Exceptions : none   Caller     : within subclasses to easy development</p>
<h3>fetch_col_array</h3>
<p>  Description: General purpose function to allow fetching of a single column from many rows into a simple array.   Arg (1)    : $sql (string of SQL statement with place holders)   Arg (2...) : optional parameters to map to the placehodlers within the SQL   Example    : $array_ref = $self-&gt;fetch_col_array($db, "select some_column from my_table where source_id=?", $id);   Returntype : array reference of scalar values   Exceptions : none   Caller     : within subclasses to easy development</p>
<h3>next_sequence_id</h3>
<p>  Description: Convenience method for working with SEQUENCES in ORACLE databases.   Arg (1)    : $sequenceName   Returntype : scalar of the nextval in the sequence   Exceptions : none</p>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="MQdb::Database.3pm.html"><span aria-hidden="true">&larr;</span> MQdb::Database.3pm: None</a></li>
   <li class="next"><a href="MRO::Compat.3pm.html">MRO::Compat.3pm: Mro::* interface compatibility for perls  5.9.5 <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
