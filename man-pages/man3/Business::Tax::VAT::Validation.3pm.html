<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Business::Tax::VAT::Validation: A class for european vat numbers validation.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A class for european vat numbers validation.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Business::Tax::VAT::Validation (3pm) manual">
  <meta name="twitter:description" content="A class for european vat numbers validation.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libbusiness-tax-vat-validation-perl-Business::Tax::VAT::Validation-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Business::Tax::VAT::Validation.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Business::Tax::VAT::Validation (3pm) manual" />
  <meta property="og:description" content="A class for european vat numbers validation." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libbusiness-tax-vat-validation-perl-Business::Tax::VAT::Validation-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Business::Tax::VAT::Validation<small> (3pm)</small></h1>
        <p class="lead">A class for european vat numbers validation.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Business::Tax::VAT::Validation.3pm.html">
      <span itemprop="name">Business::Tax::VAT::Validation: A class for european vat numbers validation.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libbusiness-tax-vat-validation-perl/">
      <span itemprop="name">libbusiness-tax-vat-validation-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Business::Tax::VAT::Validation.3pm.html">
      <span itemprop="name">Business::Tax::VAT::Validation: A class for european vat numbers validation.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use Business::Tax::VAT::Validation;

  my $hvatn=Business::Tax::VAT::Validation-&gt;new();

  # Check number
  if ($hvatn-&gt;check($VAT, [$member_state])){
        print "OK&#92;n";
  } else {
        print $hvatn-&gt;get_last_error;
  }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This class provides an easy api to check european \s-1VAT\s0 numbers' syntax, and if they has been registered by the competent authorities.</p><p>It asks the \s-1EU\s0 database (\s-1VIES\s0) for this, using its \s-1SOAP\s0 interface methods.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>new</strong> Class constructor.
  </dt>
  <dd>
    <p>    $hvatn=Business::Tax::VAT::Validation-&gt;new();</p><p>    If your system is located behind a proxy :</p><p>    $hvatn=Business::Tax::VAT::Validation-&gt;new(-proxy =&gt; [&apos;http&apos;, &apos;http://example.com:8001/&apos;]);</p><p>    Note : See LWP::UserAgent for proxy options.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROPERTIES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>member_states</strong> Returns all member states 2-digit codes as array
  </dt>
  <dd>
    <p>    @ms=$hvatn-&gt;member_states;</p>
  </dd>
  <dt>
    <strong>regular_expressions</strong> - Returns a hash list containing one regular expression for each country
  </dt>
  <dd>
    <p>If you want to test a \s-1VAT\s0 number format ouside this module, e.g. embedded as javascript in a web form.     %re=$hvatn-&gt;regular_expressions; returns     (     AT      =&gt;  &apos;U[0-9]{8}&apos;,     ...     SK        =&gt;  &apos;[0-9]{10}&apos;,     );</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>check</strong> - Checks if a \s-1VAT\s0 number exists in the \s-1VIES\s0 database
  </dt>
  <dd>
    <p>    $ok=$hvatn-&gt;check($vatNumber, [$countryCode]); You may either provide the \s-1VAT\s0 number under its complete form (e.g. \s-1BE-123456789\s0, \s-1BE123456789\s0) or specify the \s-1VAT\s0 and \s-1MSC\s0 (vatNumber and countryCode) individually. Valid \s-1MS\s0 values are :  AT, BE, BG, CY, CZ, DE, DK, EE, EL, ES,  FI, FR, GB, HU, IE, IT, LU, LT, LV, MT,  NL, PL, PT, RO, SE, SI, SK</p>
  </dd>
  <dt>
    <strong>local_check</strong> - Checks if a \s-1VAT\s0 number format is valid This method is based on regexps only and \s-1DOES\s0 \s-1NOT\s0 ask the \s-1VIES\s0 database
  </dt>
  <dd>
    <p>    $ok=$hvatn-&gt;local_check($VAT, [$member_state]);</p>
  </dd>
  <dt>
    <strong>informations</strong> - Returns informations related to the last validated \s-1VAT\s0 number
  </dt>
  <dd>
    <p>    %infos=$hvatn-&gt;informations();</p>
  </dd>
  <dt>
    <strong>get_last_error_code</strong> - Returns the last recorded error code
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>get_last_error</strong> - Returns the last recorded error
  </dt>
  <dd>
    <p>    my $err = $hvatn-&gt;get_last_error_code();     my $txt = $hvatn-&gt;get_last_error(); Possible errors are :</p><ul>
<li><p>-1  The provided \s-1VAT\s0 number is valid.</p></li><li><p>0  Unknown \s-1MS\s0 code : Internal checkup failed (Specified Member State does not exist)</p></li><li><p>1  Invalid \s-1VAT\s0 number format : Internal checkup failed (bad syntax)</p></li><li><p>2  This \s-1VAT\s0 number doesn't exist in \s-1EU\s0 database : distant checkup</p></li><li><p>3  This \s-1VAT\s0 number contains errors : distant checkup</p></li><li><p>17  Time out connecting to the database : Temporary error when the connection to the database times out</p></li><li><p>18  Member Sevice Unavailable: The \s-1EU\s0 database is unable to reach the requested member's database.</p></li><li><p>19  The \s-1EU\s0 database is too busy.</p></li><li><p>20  Connexion to the \s-1VIES\s0 database failed.</p></li><li><p>21  The \s-1VIES\s0 interface failed to parse a stream. This error occurs unpredictabely, so you should retry your validation request.</p></li><li><p>257  Invalid response, please contact the author of this module. : This normally only happens if this software doesn't recognize any valid pattern into the response document: this generally means that the database interface has been modified, and you'll make the author happy by submitting the returned response !!!</p></li><li><p>500  The \s-1VIES\s0 server encountered an internal server error. Error 500 : soap:Server \s-1TIMEOUT\s0 Error 500 : soap:Server \s-1MS_UNAVAILABLE\s0</p></li>
</ul><p>If error_code &gt; 16,  you should temporarily accept the provided number, and periodically perform new checks until response is \s-1OK\s0 or error &lt; 17 If error_code &gt; 256, you should temporarily accept the provided number, contact the author, and perform a new check when the software is updated.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Business::Tax::VAT::Validation&hellip;</h2>
        <div class="sectioncontent">
<p>LWP::UserAgent</p><p><em>http://ec.europa.eu/taxation_customs/vies/faqvies.do</em> for the FAQs related to the \s-1VIES\s0 service.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FEEDBACK</h2>
        <div class="sectioncontent">
<p>If you find this module useful, or have any comments, suggestions or improvements, feel free to let me know.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Bernard Nauwelaerts &lt;bpgn@cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREDITS</h2>
        <div class="sectioncontent">
<p>Many thanks to the following people, actively involved in the development of this software by submitting patches, bug reports, new members regexps, \s-1VIES\s0 interface changes,... (sorted by last intervention) :</p><ul>
<li><p>Gregor Herrmann, Debian.</p></li><li><p>Graham Knop.</p></li><li><p>Bart Heupers, Netherlands.</p></li><li><p>Martin H. Sluka, noris network \s-1AG\s0, Germany.</p></li><li><p>Simon Williams, \s-1UK2\s0 Limited, United Kingdom & Benoi\*^t Galy, Greenacres, France & Raluca Boboia, Evozon, Romania</p></li><li><p>Dave O., POBox, U.S.A.</p></li><li><p>Kaloyan Iliev, Digital Systems, Bulgaria.</p></li><li><p>Tom Kirkpatrick, Virus Bulletin, United Kingdom.</p></li><li><p>Andy Wardley, individual, United Kingdom.</p></li><li><p>Robert Alloway, Service Centre, United Kingdom.</p></li><li><p>Torsten Mueller, Archesoft, Germany</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>\s-1GPL\s0. Enjoy! See \s-1COPYING\s0 for further information on the \s-1GPL\s0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISCLAIMER</h2>
        <div class="sectioncontent">
<p>See <em>http://ec.europa.eu/taxation_customs/vies/viesdisc.do</em> to known the limitations of the \s-1EU\s0 validation service.</p><p>  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;   without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Business::PayPal::API::VoidRequest.3pm.html"><span aria-hidden="true">&larr;</span> Business::PayPal::API::VoidRequest.3pm: Paypal voidrequest api</a></li>
   <li class="next"><a href="Business::US::USPS::WebTools.3pm.html">Business::US::USPS::WebTools.3pm: Use the us postal service web tools <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
