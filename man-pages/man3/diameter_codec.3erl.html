<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>diameter_codec: Decode and encode of diameter messages.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Decode and encode of diameter messages.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="diameter_codec (3erl) manual">
  <meta name="twitter:description" content="Decode and encode of diameter messages.">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-diameter_codec-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/diameter_codec.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="diameter_codec (3erl) manual" />
  <meta property="og:description" content="Decode and encode of diameter messages." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-diameter_codec-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">diameter_codec<small> (3erl)</small></h1>
        <p class="lead">Decode and encode of diameter messages.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/diameter_codec.3erl.html">
      <span itemprop="name">diameter_codec: Decode and encode of diameter messages.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/diameter_codec.3erl.html">
      <span itemprop="name">diameter_codec: Decode and encode of diameter messages.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Incoming Diameter messages are decoded from binary() before being communicated to <strong>diameter_app(3erl)</strong> callbacks. Similarly, outgoing Diameter messages are encoded into binary() before being passed to the appropriate <strong>diameter_transport(3erl)</strong> module for transmission. The functions in this module implement this encode/decode.</p><p><strong></strong> Note:</p><p>Calls to this module are made by diameter itself as a consequence of configuration passed to <strong>diameter:start_service/2</strong>. The encode/decode functions may also be useful for other purposes (eg. test) but the diameter user does not need to call them explicitly when sending and receiving messages using <strong>diameter:call/4</strong> and the callback interface documented in <strong>diameter_app(3erl)</strong>.</p><p>The <strong>header()</strong> and <strong>packet()</strong> records below are defined in diameter.hrl, which can be included as follows.</p>
<pre>
-include_lib("diameter/include/diameter.hrl").

</pre>
<p>Application-specific records are defined in the hrl files resulting from dictionary file compilation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATA TYPES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>uint8() = 0..255</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>uint24() = 0..16777215</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>uint32() = 0..4294967295</em>: 8-bit, 24-bit and 32-bit integers occurring in Diameter and AVP headers.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>avp() = #diameter_avp{}</em>: The application-neutral representation of an AVP. Primarily intended for use by relay applications that need to handle arbitrary Diameter applications. A service implementing a specific Diameter application (for which it configures a dictionary) can manipulate values of type <strong>message()</strong> instead.</p><p>Fields have the following types.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>code = uint32()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>is_mandatory = boolean()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>need_encryption = boolean()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>vendor_id = uint32() | undefined</em>: Values in the AVP header, corresponding to AVP Code, the M flag, P flags and Vendor-ID respectively. A Vendor-ID other than <em>undefined</em> implies a set V flag.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>data = iolist()</em>: The data bytes of the AVP.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>name = atom()</em>: The name of the AVP as defined in the dictionary file in question, or <em>undefined</em> if the AVP is unknown to the dictionary file in question.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>value = term()</em>: The decoded value of an AVP. Will be <em>undefined</em> on decode if the data bytes could not be decoded or the AVP is unknown. The type of a decoded value is as document in <a href="../man5/diameter_dict.5.html"><strong>diameter_dict</strong>(5)</a></strong>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>type = atom()</em>: The type of the AVP as specified in the dictionary file in question (or one it inherits). Possible types are <em>undefined</em> and the Diameter types: <em>OctetString</em>, <em>Integer32</em>, <em>Integer64</em>, <em>Unsigned32</em>, <em>Unsigned64</em>, <em>Float32</em>, <em>Float64</em>, <em>Grouped</em>, <em>Enumerated</em>, <em>Address</em>, <em>Time</em>, <em>UTF8String</em>, <em>DiameterIdentity</em>, <em>DiameterURI</em>, <em>IPFilterRule</em> and <em>QoSFilterRule</em>.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>dictionary() = module()</em>: The name of a generated dictionary module as generated by <a href="../man1/diameterc.1.html"><strong>diameterc</strong>(1)</a></strong> or <strong>diameter_make:codec/2</strong>. The interface provided by a dictionary module is an implementation detail that may change.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>header() = #diameter_header{}</em>: The record representation of the Diameter header. Values in a <strong>packet()</strong> returned by <strong>decode/2</strong> are as extracted from the incoming message. Values set in an <strong>packet()</strong> passed to <strong>encode/2</strong> are preserved in the encoded binary(), with the exception of <em>length</em>, <em>cmd_code</em> and <em>application_id</em>, all of which are determined by the <strong>dictionary()</strong> in question.</p>
  </dd>

</dl>
<p><strong></strong> Note:</p><p>It is not necessary to set header fields explicitly in outgoing messages as diameter itself will set appropriate values. Setting inappropriate values can be useful for test purposes.</p><p>Fields have the following types.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>version = uint8()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>length = uint24()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>cmd_code = uint24()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>application_id = uint32()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>hop_by_hop_id = uint32()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>end_to_end_id = uint32()</em>: Values of the Version, Message Length, Command-Code, Application-ID, Hop-by-Hop Identifier and End-to-End Identifier fields of the Diameter header.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>is_request = boolean()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>is_proxiable = boolean()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>is_error = boolean()</em>:</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>is_retransmitted = boolean()</em>: Values corresponding to the R(equest), P(roxiable), E(rror) and T(Potentially re-transmitted message) flags of the Diameter header.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>message() = record() | list()</em>: The representation of a Diameter message as passed to <strong>diameter:call/4</strong> or returned from a <strong>handle_request/3</strong> callback. The record representation is as outlined in <a href="../man5/diameter_dict.5.html"><strong>diameter_dict</strong>(5)</a></strong>: a message as defined in a dictionary file is encoded as a record with one field for each component AVP. Equivalently, a message can also be encoded as a list whose head is the atom-valued message name (as specified in the relevant dictionary file) and whose tail is a list of <em>{AvpName, AvpValue}</em> pairs.</p><p>Another list-valued representation allows a message to be specified as a list whose head is a <strong>header()</strong> and whose tail is an <strong>avp()</strong> list. This representation is used by diameter itself when relaying requests as directed by the return value of a <strong>handle_request/3</strong> callback. It differs from the other other two in that it bypasses the checks for messages that do not agree with their definitions in the dictionary in question: messages are sent exactly as specified.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>packet() = #diameter_packet{}</em>: A container for incoming and outgoing Diameter messages. Fields have the following types.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>header = </em><strong>header()</strong> | undefined: The Diameter header of the message. Can be (and typically should be) <em>undefined</em> for an outgoing message in a non-relay application, in which case diameter provides appropriate values.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>avps = [</em><strong>avp()</strong>] | undefined: The AVPs of the message. Ignored for an outgoing message if the <em>msg</em> field is set to a value other than <em>undefined</em>.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>msg = </em><strong>message()</strong> | undefined: The incoming/outgoing message. For an incoming message, a record if the message can be decoded in a non-relay application, <em>undefined</em> otherwise. For an outgoing message, setting a <em>[</em><strong>header()</strong> | <strong>avp()</strong>] list is equivalent to setting the <em>header</em> and <em>avps</em> fields to the corresponding values.</p>
  </dd>

</dl>
<p><strong></strong> Warning:</p><p>A record-valued <em>msg</em> field does <strong>not</strong>  imply an absence of decode errors. The <em>errors</em> field should also be examined.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>bin = binary()</em>: The incoming message prior to encode or the outgoing message after encode.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>errors = [5000..5999 | {5000..5999, avp()}]</em>: Errors detected at decode of an incoming message, as identified by a corresponding 5xxx series Result-Code (Permanent Failures). For an incoming request, these should be used to formulate an appropriate answer as documented for the <strong>handle_request/3</strong> callback in <strong>diameter_app(3erl)</strong>. For an incoming answer, the <strong>diameter:application_opt()</strong> <em>answer_errors</em> determines the behaviour.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>transport_data = term()</em>: An arbitrary term of meaning only to the transport process in question, as documented in <strong>diameter_transport(3erl)</strong>.</p>
  </dd>

</dl>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">
<p><strong></strong> decode(Mod, Bin) -&gt; Pkt</p><p>Types:</p><p>Mod = <strong>dictionary()</strong></p><p>Bin = binary()</p><p>Pkt = <strong>packet()</strong></p><p>Decode a Diameter message.</p><p><strong></strong> encode(Mod, Msg) -&gt; Pkt</p><p>Types:</p><p>Mod = <strong>dictionary()</strong></p><p>Msg = <strong>message()</strong> | <strong>packet()</strong></p><p>Pkt = <strong>packet()</strong></p><p>Encode a Diameter message.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO diameter_codec&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/diameterc.1.html"><strong>diameterc</strong>(1)</a></strong>, <strong>diameter_app(3erl)</strong>, <a href="../man5/diameter_dict.5.html"><strong>diameter_dict</strong>(5)</a></strong>, <strong>diameter_make(3erl)</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="diameter_app.3erl.html"><span aria-hidden="true">&larr;</span> diameter_app.3erl: Callback module of a diameter application.</a></li>
   <li class="next"><a href="diameter_make.3erl.html">diameter_make.3erl: Diameter dictionary compilation. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
