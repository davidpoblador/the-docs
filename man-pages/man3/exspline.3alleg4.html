<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>exspline: Constructing smooth movement paths from spline curves. allegro game programming library.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Constructing smooth movement paths from spline curves. allegro game programming library.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="exspline (3alleg4) manual">
  <meta name="twitter:description" content="Constructing smooth movement paths from spline curves. allegro game programming library.">
  <meta name="twitter:image" content="https://www.carta.tech/images/allegro4-doc-exspline-3alleg4.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3alleg4/exspline.3alleg4.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="exspline (3alleg4) manual" />
  <meta property="og:description" content="Constructing smooth movement paths from spline curves. allegro game programming library." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/allegro4-doc-exspline-3alleg4.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">exspline<small> (3alleg4)</small></h1>
        <p class="lead">Constructing smooth movement paths from spline curves. allegro game programming library.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3alleg4/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3alleg4/exspline.3alleg4.html">
      <span itemprop="name">exspline: Constructing smooth movement paths from spline curves. allegro game programming library.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/allegro4-doc/">
      <span itemprop="name">allegro4-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3alleg4/exspline.3alleg4.html">
      <span itemprop="name">exspline: Constructing smooth movement paths from spline curves. allegro game programming library.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;allegro.h&gt;</strong></p><p><strong>Example exspline</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program demonstrates the use of spline curves to create smooth paths connecting a number of node points. This can be useful for constructing realistic motion and animations.</p><p>The technique is to connect the series of guide points p1..p(n) with spline curves from p1-p2, p2-p3, etc. Each spline must pass though both of its guide points, so they must be used as the first and fourth of the spline control points. The fun bit is coming up with sensible values for the second and third spline control points, such that the spline segments will have equal gradients where they meet. I came up with the following solution:</p><p>For each guide point p(n), calculate the desired tangent to the curve at that point. I took this to be the vector p(n-1) -&gt; p(n+1), which can easily be calculated with the inverse tangent function, and gives decent looking results. One implication of this is that two dummy guide points are needed at each end of the curve, which are used in the tangent calculations but not connected to the set of splines.</p><p>Having got these tangents, it becomes fairly easy to calculate the spline control points. For a spline between guide points p(a) and p(b), the second control point should lie along the positive tangent from p(a), and the third control point should lie along the negative tangent from p(b). How far they are placed along these tangents controls the shape of the curve: I found that applying a 'curviness' scaling factor to the distance between p(a) and p(b) works well.</p><p>One thing to note about splines is that the generated points are not all equidistant. Instead they tend to bunch up nearer to the ends of the spline, which means you will need to apply some fudges to get an object to move at a constant speed. On the other hand, in situations where the curve has a noticeable change of direction at each guide point, the effect can be quite nice because it makes the object slow down for the curve.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO exspline&hellip;</h2>
        <div class="sectioncontent">
<p><strong>END_OF_MAIN</strong>(3alleg4), <strong>SCREEN_W</strong>(3alleg4), <strong>acquire_screen</strong>(3alleg4), <strong>alert</strong>(3alleg4), <strong>allegro_error</strong>(3alleg4), <strong>allegro_init</strong>(3alleg4), <strong>allegro_message</strong>(3alleg4), <strong>calc_spline</strong>(3alleg4), <strong>circlefill</strong>(3alleg4), <strong>clear_keybuf</strong>(3alleg4), <strong>clear_to_color</strong>(3alleg4), <strong>desktop_palette</strong>(3alleg4), <strong>fixatan2</strong>(3alleg4), <strong>fixcos</strong>(3alleg4), <strong>fixed</strong>(3alleg4), <strong>fixmul</strong>(3alleg4), <strong>fixsin</strong>(3alleg4), <strong>fixsqrt</strong>(3alleg4), <strong>fixtof</strong>(3alleg4), <strong>fixtoi</strong>(3alleg4), <strong>font</strong>(3alleg4), <strong>ftofix</strong>(3alleg4), <strong>install_keyboard</strong>(3alleg4), <strong>install_mouse</strong>(3alleg4), <strong>install_timer</strong>(3alleg4), <strong>itofix</strong>(3alleg4), <strong>key</strong>(3alleg4), <strong>keypressed</strong>(3alleg4), <strong>line</strong>(3alleg4), <strong>makecol</strong>(3alleg4), <strong>mouse_b</strong>(3alleg4), <strong>mouse_x</strong>(3alleg4), <strong>mouse_y</strong>(3alleg4), <strong>palette_color</strong>(3alleg4), <strong>poll_mouse</strong>(3alleg4), <strong>readkey</strong>(3alleg4), <strong>release_screen</strong>(3alleg4), <strong>screen</strong>(3alleg4), <strong>set_gfx_mode</strong>(3alleg4), <strong>set_palette</strong>(3alleg4), <strong>show_mouse</strong>(3alleg4), <strong>spline</strong>(3alleg4), <strong>textout_centre_ex</strong>(3alleg4), <strong>textprintf_centre_ex</strong>(3alleg4), <strong>textprintf_ex</strong>(3alleg4), <strong>vsync</strong>(3alleg4), <strong>xor_mode</strong>(3alleg4)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="exshade.3alleg4.html"><span aria-hidden="true">&larr;</span> exshade.3alleg4: Gouraud shaded sprites. allegro game programming library.</a></li>
   <li class="next"><a href="exsprite.3alleg4.html">exsprite.3alleg4: Datafiles access and sprite animation. allegro game programming library. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
