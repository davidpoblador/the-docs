<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>iv_fd_set_handler_out: Deal with ivykis file descriptors</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Deal with ivykis file descriptors">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="iv_fd_set_handler_out (3) manual">
  <meta name="twitter:description" content="Deal with ivykis file descriptors">
  <meta name="twitter:image" content="https://www.carta.tech/images/libivykis-dev-iv_fd_set_handler_out-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/iv_fd_set_handler_out.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="iv_fd_set_handler_out (3) manual" />
  <meta property="og:description" content="Deal with ivykis file descriptors" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libivykis-dev-iv_fd_set_handler_out-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">iv_fd_set_handler_out<small> (3)</small></h1>
        <p class="lead">Deal with ivykis file descriptors</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/iv_fd_set_handler_out.3.html">
      <span itemprop="name">iv_fd_set_handler_out: Deal with ivykis file descriptors</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libivykis-dev/">
      <span itemprop="name">libivykis-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/iv_fd_set_handler_out.3.html">
      <span itemprop="name">iv_fd_set_handler_out: Deal with ivykis file descriptors</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;iv.h&gt;</strong></p>
<pre>
struct iv_fd {
        int             fd;
        void            *cookie;
        void            (*handler_in)(void *);
        void            (*handler_out)(void *);
        void            (*handler_err)(void *);
};
</pre>
<p><strong>void IV_FD_INIT(struct iv_fd *</strong><em>fd</em><strong>);</strong></p><p><strong>void iv_fd_register(struct iv_fd *</strong><em>fd</em><strong>);</strong></p><p><strong>int iv_fd_register_try(struct iv_fd *</strong><em>fd</em><strong>);</strong></p><p><strong>void iv_fd_unregister(struct iv_fd *</strong><em>fd</em><strong>);</strong></p><p><strong>int iv_fd_registered(struct iv_fd *</strong><em>fd</em><strong>);</strong></p><p><strong>void iv_fd_set_handler_in(struct iv_fd *</strong><em>fd</em><strong>, void (*</strong><em>handler</em><strong>)(void *));</strong></p><p><strong>void iv_fd_set_handler_out(struct iv_fd *</strong><em>fd</em><strong>, void (*</strong><em>handler</em><strong>)(void *));</strong></p><p><strong>void iv_fd_set_handler_err(struct iv_fd *</strong><em>fd</em><strong>, void (*</strong><em>handler</em><strong>)(void *));</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The functions <strong>iv_fd_register</strong> and <strong>iv_fd_unregister</strong> register, respectively unregister, a file descriptor with the current thread's ivykis event loop.  Calling <strong>iv_fd_registered</strong> on a file descriptor returns true if that file descriptor is currently registered with ivykis.</p><p>When a file descriptor that is registered with ivykis becomes ready for input or output, or an error condition occurs on that file descriptor, and a callback function for that event has been specified, that callback function will be called in the thread that the file descriptor was registered in.</p><p>And conversely, when a file descriptor that is already ready for input or output or already has an error condition set is registered with ivykis, and the corresponding callback function pointer is not NULL, the callback function will be called in the next iteration of the current thread's ivykis event loop.</p><p>Before a file descriptor is registered, it must have been initialised by calling <strong>IV_FD_INIT</strong> on it, and must have had its <strong>-&gt;fd</strong> member field set to a valid OS file descriptor.  The <strong>-&gt;handler_in, -&gt;handler_out</strong> and <strong>-&gt;handler_err</strong> member fields point to callback functions that are to be called when the specified file descriptor becomes ready for input or output or an error condition occurs.  If any handler function is set to <strong>NULL,</strong> it indicates that the application is not interested in being notified of the corresponding event.</p><p>An application is not allowed to change the <strong>-&gt;fd</strong> member while a file descriptor is registered.</p><p><strong>iv_fd_set_handler_in</strong> changes the callback function to be called when descriptor <strong>fd</strong> becomes ready for input.  An application is not allowed to directly change the <strong>-&gt;handler_in</strong> member after the file descriptor has been registered, this function has to be used instead.  Conversely, it is not allowed to use this function before the file descriptor has been registered.</p><p><strong>iv_fd_set_handler_out</strong> is analogous to <strong>iv_fd_set_handler_in,</strong> only it deals with the callback function for output readiness <strong>(-&gt;handler_out).</strong></p><p><strong>iv_fd_set_handler_err</strong> is analogous to <strong>iv_fd_set_handler_in</strong> and <strong>iv_fd_set_handler_out,</strong> only it deals with the callback function for error conditions <strong>(-&gt;handler_err).</strong></p><p>When a handler function was NULL, and was set to a non-NULL value by calling <strong>iv_fd_set_handler_in, iv_fd_set_handler_out</strong> or <strong>iv_fd_set_handler_err,</strong> and the file descriptor was already ready for input or output, or already had an error condition set, an event is generated, and the specified callback function will be called in the next iteration of the current thread's event loop.  The application does not need to poll the file descriptor to see if a condition was already raised.</p><p>Callback functions are passed a <strong>cookie</strong> value as their first and sole argument.  If the application wishes to use this facility for transferring data to the callback function, it should set the <strong>-&gt;cookie</strong> member of a file descriptor to a value of type <strong>void *.</strong> This value can be modified directly by the application at any time without calling a helper function.</p><p>When a file descriptor is registered with ivykis, it is transparently set to nonblocking mode, and configured to be closed on <a href="../man3/exit.3.html"><strong>exit</strong>(3)</a>.</p><p>An application is allowed to unregister a file descriptor from within any callback function, including callback functions triggered by that file descriptor itself, and even to free the memory corresponding to that file descriptor from any callback function, but a <strong>struct iv_fd</strong> can only be unregistered in the thread that it was registered from.</p><p>It is allowed to register the same underlying OS file descriptor in multiple threads, but a given <strong>struct iv_fd</strong> can only be registered in one thread at a time.</p><p><strong>iv_fd_register</strong> does not return errors to the caller, and in case of an error while registering the file descriptor, for example if it isn't open or is unpollable, <a href="../man3/abort.3.html"><strong>abort</strong>(3)</a> will be invoked.  If it is not known whether registering the file descriptor with the kernel will be successful or not, use <strong>iv_fd_register_try</strong> instead, which is a variant on <strong>iv_fd_register</strong> which returns a nonzero value in case of a registration error. Since <strong>iv_fd_register_try</strong> disables various internal optimisations, it is recommended to use <strong>iv_fd_register</strong> whenever possible.</p><p>See <a href="../man3/iv_examples.3.html"><strong>iv_examples</strong>(3)</a> for programming examples.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO iv_fd_set_handler_out&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/ivykis.3.html"><strong>ivykis</strong>(3)</a>, <a href="../man3/iv_examples.3.html"><strong>iv_examples</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="iv_fd_set_handler_in.3.html"><span aria-hidden="true">&larr;</span> iv_fd_set_handler_in.3: Deal with ivykis file descriptors</a></li>
   <li class="next"><a href="iv_fd_unregister.3.html">iv_fd_unregister.3: Deal with ivykis file descriptors <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
