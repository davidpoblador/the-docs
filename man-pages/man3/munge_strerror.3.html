<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>munge_strerror: Munge core functions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Munge core functions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="munge_strerror (3) manual">
  <meta name="twitter:description" content="Munge core functions">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmunge-dev-munge_strerror-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/munge_strerror.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="munge_strerror (3) manual" />
  <meta property="og:description" content="Munge core functions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmunge-dev-munge_strerror-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">munge_strerror<small> (3)</small></h1>
        <p class="lead">Munge core functions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/munge_strerror.3.html">
      <span itemprop="name">munge_strerror: Munge core functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmunge-dev/">
      <span itemprop="name">libmunge-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/munge_strerror.3.html">
      <span itemprop="name">munge_strerror: Munge core functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;munge.h&gt;</strong>

<strong>munge_err_t munge_encode (char **</strong><em>cred</em><strong>, munge_ctx_t </strong><em>ctx</em><strong>,</strong>
<strong>                          const void *</strong><em>buf</em><strong>, int </strong><em>len</em><strong>);</strong>

<strong>munge_err_t munge_decode (const char *</strong><em>cred</em><strong>, munge_ctx_t </strong><em>ctx</em><strong>,</strong>
<strong>                          void **</strong><em>buf</em><strong>, int *</strong><em>len</em><strong>, uid_t *</strong><em>uid</em><strong>, gid_t *</strong><em>gid</em><strong>);</strong>

<strong>const char * munge_strerror (munge_err_t </strong><em>e</em><strong>);</strong>

<strong>cc `pkg-config --cflags --libs munge` -o foo foo.c</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>munge_encode</strong>() function creates a credential contained in a NUL-terminated base64 string.  A payload specified by a buffer <em>buf</em> of length <em>len</em> can be encapsulated in as well.  If the MUNGE context <em>ctx</em> is NULL, the default context will be used.  A pointer to the resulting credential is returned via <em>cred</em>; on error, it is set to NULL. The caller is responsible for freeing the memory referenced by <em>cred</em>.</p><p>The <strong>munge_decode</strong>() function validates the NUL-terminated credential <em>cred</em>.  If the MUNGE context <em>ctx</em> is not NULL, it will be set to that used to encode the credential.  If <em>buf</em> and <em>len</em> are not NULL, memory will be allocated for the encapsulated payload, <em>buf</em> will be set to point to this data, and <em>len</em> will be set to its length.  An additional NUL character will be appended to this payload data but not included in its length.  If no payload exists, <em>buf</em> will be set to NULL and <em>len</em> will be set to 0.  For certain errors (i.e., <strong>EMUNGE_CRED_EXPIRED</strong>, <strong>EMUNGE_CRED_REWOUND</strong>, <strong>EMUNGE_CRED_REPLAYED</strong>), payload memory will still be allocated if necessary.  The caller is responsible for freeing the memory referenced by <em>buf</em>.  If <em>uid</em> or <em>gid</em> is not NULL, they will be set to the UID/GID of the process that created the credential.</p><p>The <strong>munge_strerror</strong>() function returns a descriptive text string describing the MUNGE error number <em>e</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>The <strong>munge_encode</strong>() and <strong>munge_decode</strong>() functions return <strong>EMUNGE_SUCCESS</strong> on success, or a MUNGE error otherwise.  If a MUNGE context was used, it may contain a more detailed error message accessible via <strong>munge_ctx_strerror</strong>().</p><p>The <strong>munge_strerror</strong>() function returns a pointer to a NUL-terminated constant text string; this string should not be freed or modified by the caller.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>EMUNGE_SUCCESS</strong></p>
  </dt>
  <dd>
    <p>Success.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_SNAFU</strong></p>
  </dt>
  <dd>
    <p>Internal error.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_BAD_ARG</strong></p>
  </dt>
  <dd>
    <p>Invalid argument.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_BAD_LENGTH</strong></p>
  </dt>
  <dd>
    <p>Exceeded the maximum message length as specified by the <strong>munged</strong> configuration.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_OVERFLOW</strong></p>
  </dt>
  <dd>
    <p>Exceeded the maximum length of a buffer.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_NO_MEMORY</strong></p>
  </dt>
  <dd>
    <p>Unable to allocate the requisite memory.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_SOCKET</strong></p>
  </dt>
  <dd>
    <p>Unable to communicate with the daemon on the domain socket.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_BAD_CRED</strong></p>
  </dt>
  <dd>
    <p>The credential does not match the specified format.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_BAD_VERSION</strong></p>
  </dt>
  <dd>
    <p>The credential contains an unsupported version number.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_BAD_CIPHER</strong></p>
  </dt>
  <dd>
    <p>The credential contains an unsupported cipher type.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_BAD_MAC</strong></p>
  </dt>
  <dd>
    <p>The credential contains an unsupported MAC type.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_BAD_ZIP</strong></p>
  </dt>
  <dd>
    <p>The credential contains an unsupported compression type.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_BAD_REALM</strong></p>
  </dt>
  <dd>
    <p>The credential contains an unrecognized security realm.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_CRED_INVALID</strong></p>
  </dt>
  <dd>
    <p>The credential is invalid.  This means the credential could not be successfully decoded.  More than likely, the secret keys on the encoding and decoding hosts do not match.  Another possibility is that the credential has been altered since it was encoded.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_CRED_EXPIRED</strong></p>
  </dt>
  <dd>
    <p>The credential has expired.  This means more than TTL seconds have elapsed since the credential was encoded.  Another possibility is that the clocks on the encoding and decoding hosts are out of sync.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_CRED_REWOUND</strong></p>
  </dt>
  <dd>
    <p>The credential appears to have been encoded at some point in the future. This means the clock on the decoding host is slower than that of the encoding host by more than the allowable clock skew.  More than likely, the clocks on the encoding and decoding hosts are out of sync.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_CRED_REPLAYED</strong></p>
  </dt>
  <dd>
    <p>The credential has been previously decoded on this host.</p>
  </dd>
  <dt>
    <p><strong>EMUNGE_CRED_UNAUTHORIZED</strong></p>
  </dt>
  <dd>
    <p>The client is not authorized to decode the credential based upon the effective user and/or group ID of the process.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The following example program illustrates the use of a MUNGE credential to ascertain the effective user and group ID of the encoding process.</p>
<pre>
#include &lt;stdio.h&gt;                      /* for printf() */
#include &lt;stdlib.h&gt;                     /* for exit() & free() */
#include &lt;unistd.h&gt;                     /* for uid_t & gid_t */
#include &lt;munge.h&gt;

int
main (int argc, char *argv[])
{
    char        *cred;
    munge_err_t  err;
    uid_t        uid;
    gid_t        gid;

    err = munge_encode (&cred, NULL, NULL, 0);

    if (err != EMUNGE_SUCCESS) {
        fprintf (stderr, "ERROR: %s&#92;n", munge_strerror (err));
        exit (1);
    }
    err = munge_decode (cred, NULL, NULL, NULL, &uid, &gid);

    if (err != EMUNGE_SUCCESS) {
        fprintf (stderr, "ERROR: %s&#92;n", munge_strerror (err));
        exit (1);
    }
    printf ("uid=%d gid=%d&#92;n", uid, gid);
    free (cred);
    exit (0);
}
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Both <strong>munge_encode</strong>() and <strong>munge_decode</strong>() may allocate memory that the caller is responsible for freeing.  Failure to do so will result in a memory leak.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Chris Dunlap &lt;cdunlap@llnl.gov&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2007-2013 Lawrence Livermore National Security, LLC.</p><p>Copyright (C) 2002-2007 The Regents of the University of California.</p><p>MUNGE is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p>Additionally for the MUNGE library (libmunge), you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO munge_strerror&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/munge.1.html"><strong>munge</strong>(1)</a>, <a href="../man1/remunge.1.html"><strong>remunge</strong>(1)</a>, <a href="../man1/unmunge.1.html"><strong>unmunge</strong>(1)</a>, <a href="../man3/munge_ctx.3.html"><strong>munge_ctx</strong>(3)</a>, <a href="../man3/munge_enum.3.html"><strong>munge_enum</strong>(3)</a>, <a href="../man7/munge.7.html"><strong>munge</strong>(7)</a>, <a href="../man8/munged.8.html"><strong>munged</strong>(8)</a>.</p><p><strong>https://munge.googlecode.com/</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="munge_enum_str_to_int.3.html"><span aria-hidden="true">&larr;</span> munge_enum_str_to_int.3: Munge enumeration functions</a></li>
   <li class="next"><a href="muntrace.3.html">muntrace.3: Malloc tracing <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
