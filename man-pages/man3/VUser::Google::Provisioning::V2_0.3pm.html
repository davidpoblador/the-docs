<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VUser::Google::Provisioning::V2_0: Support for version 2.0 of the google provisioning api</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Support for version 2.0 of the google provisioning api">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="VUser::Google::Provisioning::V2_0 (3pm) manual">
  <meta name="twitter:description" content="Support for version 2.0 of the google provisioning api">
  <meta name="twitter:image" content="https://www.carta.tech/images/libvuser-google-api-perl-VUser::Google::Provisioning::V2_0-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/VUser::Google::Provisioning::V2_0.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="VUser::Google::Provisioning::V2_0 (3pm) manual" />
  <meta property="og:description" content="Support for version 2.0 of the google provisioning api" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libvuser-google-api-perl-VUser::Google::Provisioning::V2_0-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">VUser::Google::Provisioning::V2_0<small> (3pm)</small></h1>
        <p class="lead">Support for version 2.0 of the google provisioning api</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/VUser::Google::Provisioning::V2_0.3pm.html">
      <span itemprop="name">VUser::Google::Provisioning::V2_0: Support for version 2.0 of the google provisioning api</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libvuser-google-api-perl/">
      <span itemprop="name">libvuser-google-api-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/VUser::Google::Provisioning::V2_0.3pm.html">
      <span itemprop="name">VUser::Google::Provisioning::V2_0: Support for version 2.0 of the google provisioning api</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use VUser::Google::ApiProtocol::V2_0;
 use VUser::Google::Provisioning::V2_0;

 my $google = VUser::Google::ApiProtocol::V2_0-&gt;new(
     domain   =&gt; &apos;example.com&apos;,
     admin    =&gt; &apos;admin_user&apos;,
     password =&gt; &apos;secret&apos;,
 );

 my $api = VUser::Google::Provisioning::V2_0-&gt;new(
     google =&gt; $google,
 );

 ## Create user
 my $new_user = $api-&gt;CreateUser(
     userName    =&gt; &apos;fflintstone&apos;,
     givenName   =&gt; &apos;Fred&apos;,
     familyName  =&gt; &apos;Flintstone&apos;,
     password    =&gt; &apos;I&lt;3Wilma&apos;,
 );

 ## Retrieve a user
 my $user = $api-&gt;RetrieveUser(&apos;fflintstone&apos;);

 ## Retrieve all userr
 my @users = $api-&gt;RetrieveAllUsers();

 ## Update a user
 my $updated = $api-&gt;UpdateUser(
     userName   =&gt; &apos;fflintstone&apos;,
     givenName  =&gt; &apos;Fredrock&apos;,
     familyName =&gt; &apos;FlintStone&apos;,
     suspended  =&gt; 1,
     quota      =&gt; 2048,
 );

 ## Change password
 $updated = $api-&gt;ChangePassword(&apos;fflintstone&apos;, &apos;new-pass&apos;);

 $updated = $api-&gt;ChangePassword(
     &apos;fflintstone&apos;,
     &apos;51eea05d46317fadd5cad6787a8f562be90b4446&apos;,
     &apos;SHA-1&apos;,
 );

 $updated = $api-&gt;ChangePassword(
     &apos;fflintstone&apos;,
     &apos;d27117a019717502efe307d110f5eb3d&apos;,
     &apos;MD5&apos;,
 );

 ## Delete a user
 my $rc = $api-&gt;DeleteUser(&apos;fflintstone&apos;);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>VUser::Google::Provisioning::V2_0 provides support for managing users using version 2.0 of the Google Provisioning \s-1API\s0.</p><p>In order to use the Google Provisioning \s-1API\s0, you must turn on \s-1API\s0 support from the Google Apps for Your Domain control panel. The user that is used to create the VUser::Google::ApiProtocol object must have administrative privileges on the domain.</p><p><strong>Note:</strong> It's a good idea to log into the web control panel at least once as the \s-1API\s0 user in order to accept the the terms of service and admin terms. If you don't, you'll get intermittent authentication errors when trying to use the \s-1API\s0.</p><h3>\s-1METHODS\s0</h3>
<p>Unless stated otherwise, these methods will <em>die()</em> if there is an \s-1API\s0 error.</p><p><em>CreateUser</em></p><p><em>CreateUser()</em> takes a hash of create options and returns a VUser::Google::Provisioning::UserEntry object if the account was created. <em>CreateUser()</em> will <em>die()</em> if there is an error.</p><p>The keys of the hash are:</p>
<dl class='dl-vertical'>
  <dt>
    userName (required)
  </dt>
  <dd>
    <p>The user name of the account to create</p>
  </dd>
  <dt>
    givenName (required)
  </dt>
  <dd>
    <p>The user's given name</p>
  </dd>
  <dt>
    familyName (required)
  </dt>
  <dd>
    <p>The user's family name</p>
  </dd>
  <dt>
    password (required)
  </dt>
  <dd>
    <p>The user's password. If hashFunctionName is also set, this is the base16-encoded hash of the password. Otherwise, this is the user's plaintext password. Google required that passwords be, at least, six characters.</p>
  </dd>
  <dt>
    hashFunctionName
  </dt>
  <dd>
    <p>hashFunctionName must be <em>\s-1SHA-1\s0</em> or <em>\s-1MD5\s0</em>. If this is set, password is the base16-encoded password hash.</p>
  </dd>
  <dt>
    quota
  </dt>
  <dd>
    <p>The user's quota in \s-1MB\s0. Not all domains will be allowed to set users' quotas. If that's the case, creation will still succeed but the quota will be set to the default for your domain.</p>
  </dd>
  <dt>
    changePasswordAtNextLogin
  </dt>
  <dd>
    <p>If set to a true value, e.g. 1, the user will be required to change their password the next time they login in. This is the default. You may turn this off by setting changePasswordAtNextLogin to 0.</p>
  </dd>
  <dt>
    admin
  </dt>
  <dd>
    <p>If set to a true value, e.g. 1, the user will be granted administrative privileges. A false value, e.g. 0, admin rights will be revoked. By default, users will not be granted admin rights.</p>
  </dd>

</dl>
<p><em>RetrieveUser</em></p><p> my $user = $api-&gt;RetrieveUser(&apos;fflintstone&apos;);</p><p>Retrieves a specified user by the user name. RetieveUser will return a VUser::Google::Provisioning::UserEntry if the user exists and undef if it doesn't.</p><p><em>RetrieveUsers</em></p><p> my @users = ();</p><p> my %results = $api-&gt;RetrieveUsers();  @users = @{ $results{entries} };</p><p> while ($results{next}) {      %results = $api-&gt;RetrieveUsers($results{next});      push @users, @{ $results{entries} };  }</p><p>Fetches one page of users starting at a given user name. Currently, a page is defined as 100 users. This is useful if you plan on paginating the results yourself or if you have a very large number of users.</p><p>The returned result is a hash with the following keys:</p>
<dl class='dl-vertical'>
  <dt>
    entries
  </dt>
  <dd>
    <p>A list reference containing the user accounts. Each entry is a VUser::Google::Provisioning::UserEntry object.</p>
  </dd>
  <dt>
    next
  </dt>
  <dd>
    <p>The user name for the start of the next page. This will be undefined (\*(C`undef\*(C') if there are no more pages.</p>
  </dd>

</dl>
<p>See <em>RetrieveAllUsers()</em> if you want to fetch all of the accounts at once.</p><p><em>RetrievePageOfUsers</em></p><p>This is a synonym for <em>RetrieveUsers()</em></p><p><em>RetrieveAllUsers</em></p><p> my @users = $api-&gt;RetrieveAllUsers();</p><p>Get a list of all the users for the domain. The entries in the list are VUser::Google::Provisioning::UserEntry objects.</p><p><em>UpdateUser</em></p><p> my $updated = $api-&gt;UpdateUser(      userName  =&gt; &apos;fflintstone&apos;,      givenName =&gt; &apos;Fred&apos;,      # ... other options  );</p><p>Updates an account. UpdateUser takes the same options as <em>CreateUser()</em> but only userName is required.</p><p><em>UpdateUser()</em> cannot be used to rename an account. See <em>RenameUser()</em>.</p><p><em>RenameUser</em></p><p> my $user_user = $api-&gt;RenameUser($oldname, $newname);</p><p>Rename an account. The first parameter is the old user name; the second is the new user name. <em>RenameUser()</em> will die if the old name does not exist.</p><p><em>DeleteUser</em></p><p> my $rc = $api-&gt;DeleteUser(&apos;fflintstone&apos;);</p><p>Deletes a given user. Returns true if the delete succeded and dies if there was an error.</p><p><em>ChangePassword</em></p><p> $updated = $api-&gt;ChangePassword(&apos;fflintstone&apos;, &apos;new-pass&apos;);</p><p> $updated = $api-&gt;ChangePassword(      &apos;fflintstone&apos;,      &apos;51eea05d46317fadd5cad6787a8f562be90b4446&apos;,      &apos;SHA-1&apos;,  );</p><p> $updated = $api-&gt;ChangePassword(      &apos;fflintstone&apos;,      &apos;d27117a019717502efe307d110f5eb3d&apos;,      &apos;MD5&apos;,  );</p><p>Change a users password.</p><p>ChangePassword takes the user name, password and, optionally, a hash function name. If the hash function name is set, the password, is the base16-encoded password, otherwise it is the clear text password.</p><p>Accepted values for the has function name are <em>\s-1MD5\s0</em> and <em>\s-1SHA-1\s0</em>.</p><p>There is no difference between using this and using UpdateUser to change the user's password.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO VUser::Google::Provisioning::V2_0&hellip;</h2>
        <div class="sectioncontent">
<ul>
<li><p>VUser::Google::Provisioning</p></li><li><p>VUser::Google::ApiProtocol::V2_0</p></li><li><p>VUser::Google::EmailSettings::V2_0</p></li><li><p>http://code.google.com/apis/apps/gdata_provisioning_api_v2.0_developers_protocol.html item * http://code.google.com/apis/apps/gdata_provisioning_api_v2.0_reference.html</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Bugs may be reported at http://code.google.com/p/vuser/issues/list.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Randy Smith &lt;perlstalker@vuser.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2009  Randall Smith</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the \s-1GNU\s0 General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but \s-1WITHOUT\s0 \s-1ANY\s0 \s-1WARRANTY\s0; without even the implied warranty of \s-1MERCHANTABILITY\s0 or \s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0 \s-1PURPOSE\s0.  See the \s-1GNU\s0 General Public License for more details.</p><p>You should have received a copy of the \s-1GNU\s0 General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, \s-1MA\s0  02110-1301, \s-1USA\s0.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="VUser::Google::EmailSettings::V2_0.3pm.html"><span aria-hidden="true">&larr;</span> VUser::Google::EmailSettings::V2_0.3pm: Support version 2.0 of the google email settings api</a></li>
   <li class="next"><a href="VUser::Google::ProvisioningAPI.3pm.html">VUser::Google::ProvisioningAPI.3pm: Perl module that implements the google apps for your domain provisioning api <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
