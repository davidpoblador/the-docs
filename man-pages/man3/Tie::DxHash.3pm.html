<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tie::DxHash: Keeps insertion order; allows duplicate keys</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Keeps insertion order; allows duplicate keys">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Tie::DxHash (3pm) manual">
  <meta name="twitter:description" content="Keeps insertion order; allows duplicate keys">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtie-dxhash-perl-Tie::DxHash-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Tie::DxHash.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Tie::DxHash (3pm) manual" />
  <meta property="og:description" content="Keeps insertion order; allows duplicate keys" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtie-dxhash-perl-Tie::DxHash-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Tie::DxHash<small> (3pm)</small></h1>
        <p class="lead">Keeps insertion order; allows duplicate keys</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Tie::DxHash.3pm.html">
      <span itemprop="name">Tie::DxHash: Keeps insertion order; allows duplicate keys</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtie-dxhash-perl/">
      <span itemprop="name">libtie-dxhash-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Tie::DxHash.3pm.html">
      <span itemprop="name">Tie::DxHash: Keeps insertion order; allows duplicate keys</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This document describes Tie::DxHash version 1.03</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    use Tie::DxHash;
    my(%vhost);
    tie %vhost, &apos;Tie::DxHash&apos; [, LIST];
    %vhost = (
        ServerName  =&gt; &apos;foo&apos;,
        RewriteCond =&gt; &apos;bar&apos;,
        RewriteRule =&gt; &apos;bletch&apos;,
        RewriteCond =&gt; &apos;phooey&apos;,
        RewriteRule =&gt; &apos;squelch&apos;,
    );
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This  module was  written to     allow the  use of    rewrite  rules in   Apache configuration  files written with Perl Sections.   However, a potential user has stated that he  needs it to support  the use of  multiple ScriptAlias directives within a single Virtual Host  (which is required by  FrontPage, apparently).  If you find a completely different use for it, great.</p><p>The original purpose of this  module is not quite  so obscure as it might sound. Perl Sections   bring the power   of a general-purpose  programming  language to Apache configuration files and,  having  used them  once,  many people use  them throughout.  (I take this approach since, even  in sections of the configuration where  I do  not need  the  flexibility, I find  it  easier to use  a consistent syntax.  This also makes the code easier for XEmacs to  colour in ;-) Similarly, mod_rewrite is easily the most powerful way to  perform \s-1URL\s0 rewriting and I tend to use it  exclusively, even when a  simpler directive  would  do the  trick, in order to group my redirections together and keep them consistent.  So, I came up against the following problem quite early on.</p><p>The synopsis  shows  some syntax which  might  be needed when using  mod_rewrite within a  Perl Section.  Clearly,  using an ordinary hash will   not do what you want.  The two additional features we  need are to  preserve insertion order and to allow  duplicate keys.   When retrieving an  element from  the hash by  name, successive requests for the same name must iterate through the duplicate entries (and,  presumably, wrap around when  the end of  the chain is reached).  This is where Tie::DxHash  comes   in.   Simply  by  tying   the  offending   hash,  the corresponding configuration directives work as expected.</p><p>Running an Apache syntax  check (with docroot check)  on your configuration file (with \*(C`httpd -t\*(C') and checking virtual host settings (with \*(C`httpd -S\*(C') succeed without complaint.   Incidentally,  I  strongly recommend building   your Apache configuration files with make (or equivalent) in  order to enforce the above two checks, preceded by a Perl syntax check (with \*(C`perl -cx\*(C').</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUBROUTINES/METHODS</h2>
        <div class="sectioncontent">
<p>This module   is  intended to be   called  through Perl's   tie  interface.  For reference, the following methods have been defined:</p><p>    CLEAR     DELETE     EXISTS     FETCH     FIRSTKEY     NEXTKEY     SCALAR     STORE     TIEHASH</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>None.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION AND ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>Tie::DxHash requires no configuration files or environment variables.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPENDENCIES</h2>
        <div class="sectioncontent">
<p>None.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INCOMPATIBILITIES</h2>
        <div class="sectioncontent">
<p>None reported.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERNALS</h2>
        <div class="sectioncontent">
<p>For those interested, Tie::DxHash works by storing the  hash data in an array of hash references  (containing  the key/value  pairs).  This  preserves  insertion order.  A separate set  of iterators (one per  distinct key) keeps track of  the last retrieved value for a given key, thus  allowing the successive retrieval of multiple values for the same key to work as expected.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS AND LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The algorithms used to retrieve and delete elements by  key run in O(N) time, so do not expect  this  module to work well   on large data  sets.   This is not  a problem for the module's intended  use.  If you find  another use for the module which involves larger quantities of data, let me know and I will put some effort into optimising for speed.</p><p>The  mod_rewrite  directives for  which   this module  was   written  (primarily RewriteCond and RewriteRule) can  occur in all  four configuration file contexts (i.e. server config,  virtual host, directory, .htaccess).  However, Tie::DxHash only helps when  you are using  a directive which  is mapped  onto a  Perl hash. This limits you to  directives which are block  sections with begin and end tags (like  &lt;VirtualHost&gt;  and  &lt;Directory&gt;).   I  get  round  this  by   sticking my mod_rewrite directives in  a name-based virtual host container  (as shown in the synopsis) even in the degenerate case where the  web server only has one virtual host.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Tie::DxHash&hellip;</h2>
        <div class="sectioncontent">
<p><em>perltie</em>\|(1), for information on ties generally.</p><p><em>Tie::IxHash</em>\|(3), by Gurusamy Sarathy, if you need to preserve insertion order but not allow duplicate keys.</p><p>For   information  on  Ralf S.  Engelschall's   powerful  \s-1URL\s0  rewriting module, mod_rewrite,      check       out     the      reference      documentation   at \*(L"http://httpd.apache.org/docs/mod/mod_rewrite.html\*(R" and  the \s-1URL\s0 Rewriting Guide at \*(L"http://httpd.apache.org/docs/misc/rewriteguide.html\*(R".</p><p>For help in using Perl Sections to configure Apache,  take a look at the section called           \*(L"Apache        Configuration      in            Perl\*(R"        at \*(L"http://perl.apache.org/guide/config.html#Apache_Configuration_in_Perl\*(R", part of the mod_perl    guide, by Stas Bekman.    Alternatively,  buy the  O'Reilly book Writing Apache Modules with Perl and C, by Lincoln  Stein & Doug MacEachern, and study Chapter 8: Customizing the Apache Configuration Process.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Kevin Ruscoe  \*(C`&lt;kevin@sapphireoflondon.org&gt;\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE AND COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2006, Kevin Ruscoe \*(C`&lt;kevin@sapphireoflondon.org&gt;\*(C'. All rights reserved.</p><p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See perlartistic.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISCLAIMER OF WARRANTY</h2>
        <div class="sectioncontent">
<p>\s-1BECAUSE\s0 \s-1THIS\s0 \s-1SOFTWARE\s0 \s-1IS\s0 \s-1LICENSED\s0 \s-1FREE\s0  \s-1OF\s0 \s-1CHARGE\s0, \s-1THERE\s0 \s-1IS\s0  \s-1NO\s0 \s-1WARRANTY\s0 \s-1FOR\s0 \s-1THE\s0 \s-1SOFTWARE\s0,  \s-1TO\s0 \s-1THE\s0 \s-1EXTENT\s0  \s-1PERMITTED\s0  \s-1BY\s0  \s-1APPLICABLE\s0 \s-1LAW\s0.  \s-1EXCEPT\s0 \s-1WHEN\s0  \s-1OTHERWISE\s0 \s-1STATED\s0 \s-1IN\s0  \s-1WRITING\s0  \s-1THE\s0  \s-1COPYRIGHT\s0  \s-1HOLDERS\s0  \s-1AND/OR\s0  \s-1OTHER\s0  \s-1PARTIES\s0  \s-1PROVIDE\s0 \s-1THE\s0 \s-1SOFTWARE\s0 \*(L"\s-1AS\s0  \s-1IS\s0\*(R" \s-1WITHOUT\s0 \s-1WARRANTY\s0  \s-1OF\s0 \s-1ANY\s0  \s-1KIND\s0,  \s-1EITHER\s0 \s-1EXPRESSED\s0 \s-1OR\s0  \s-1IMPLIED\s0, \s-1INCLUDING\s0, \s-1BUT\s0 \s-1NOT\s0  \s-1LIMITED\s0 \s-1TO\s0, \s-1THE\s0   \s-1IMPLIED\s0 \s-1WARRANTIES\s0 \s-1OF\s0 \s-1MERCHANTABILITY\s0  \s-1AND\s0 \s-1FITNESS\s0  \s-1FOR\s0  A  \s-1PARTICULAR\s0 \s-1PURPOSE\s0.  \s-1THE\s0  \s-1ENTIRE\s0  \s-1RISK\s0 \s-1AS\s0  \s-1TO\s0 \s-1THE\s0  \s-1QUALITY\s0  \s-1AND\s0 \s-1PERFORMANCE\s0 \s-1OF\s0 \s-1THE\s0  \s-1SOFTWARE\s0 \s-1IS\s0 \s-1WITH\s0  \s-1YOU\s0. \s-1SHOULD\s0 \s-1THE\s0 \s-1SOFTWARE\s0  \s-1PROVE\s0 \s-1DEFECTIVE\s0, \s-1YOU\s0 \s-1ASSUME\s0 \s-1THE\s0 \s-1COST\s0 \s-1OF\s0 \s-1ALL\s0 \s-1NECESSARY\s0 \s-1SERVICING\s0, \s-1REPAIR\s0, \s-1OR\s0 \s-1CORRECTION\s0.</p><p>\s-1IN\s0 \s-1NO\s0 \s-1EVENT\s0 \s-1UNLESS\s0 \s-1REQUIRED\s0  \s-1BY\s0 \s-1APPLICABLE\s0 \s-1LAW\s0 \s-1OR\s0 \s-1AGREED\s0  \s-1TO\s0 \s-1IN\s0 \s-1WRITING\s0 \s-1WILL\s0 \s-1ANY\s0 \s-1COPYRIGHT\s0 \s-1HOLDER\s0,   \s-1OR\s0 \s-1ANY\s0 \s-1OTHER\s0 \s-1PARTY\s0  \s-1WHO\s0  \s-1MAY\s0 \s-1MODIFY\s0  \s-1AND/OR\s0 \s-1REDISTRIBUTE\s0 \s-1THE\s0 \s-1SOFTWARE\s0  \s-1AS\s0  \s-1PERMITTED\s0 \s-1BY\s0 \s-1THE\s0  \s-1ABOVE\s0  \s-1LICENCE\s0,  \s-1BE\s0 \s-1LIABLE\s0   \s-1TO\s0 \s-1YOU\s0 \s-1FOR\s0 \s-1DAMAGES\s0, \s-1INCLUDING\s0 \s-1ANY\s0 \s-1GENERAL\s0, \s-1SPECIAL\s0, \s-1INCIDENTAL\s0, \s-1OR\s0 \s-1CONSEQUENTIAL\s0 \s-1DAMAGES\s0 \s-1ARISING\s0 \s-1OUT\s0 \s-1OF\s0 \s-1THE\s0 \s-1USE\s0 \s-1OR\s0 \s-1INABILITY\s0 \s-1TO\s0  \s-1USE\s0 \s-1THE\s0 \s-1SOFTWARE\s0  (\s-1INCLUDING\s0 \s-1BUT\s0 \s-1NOT\s0 \s-1LIMITED\s0 \s-1TO\s0 \s-1LOSS\s0 \s-1OF\s0 \s-1DATA\s0 \s-1OR\s0 \s-1DATA\s0  \s-1BEING\s0 \s-1RENDERED\s0 \s-1INACCURATE\s0 \s-1OR\s0 \s-1LOSSES\s0  \s-1SUSTAINED\s0 \s-1BY\s0 \s-1YOU\s0  \s-1OR\s0 \s-1THIRD\s0 \s-1PARTIES\s0 \s-1OR\s0 A \s-1FAILURE\s0 \s-1OF\s0 \s-1THE\s0 \s-1SOFTWARE\s0  \s-1TO\s0 \s-1OPERATE\s0 \s-1WITH\s0  \s-1ANY\s0 \s-1OTHER\s0 \s-1SOFTWARE\s0), \s-1EVEN\s0 \s-1IF\s0 \s-1SUCH\s0 \s-1HOLDER\s0  \s-1OR\s0  \s-1OTHER\s0 \s-1PARTY\s0 \s-1HAS\s0   \s-1BEEN\s0  \s-1ADVISED\s0 \s-1OF\s0 \s-1THE\s0 \s-1POSSIBILITY\s0   \s-1OF\s0 \s-1SUCH\s0 \s-1DAMAGES\s0.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Tie::Cache.3pm.html"><span aria-hidden="true">&larr;</span> Tie::Cache.3pm: Lru cache in memory</a></li>
   <li class="next"><a href="Tie::EncryptedHash.3pm.html">Tie::EncryptedHash.3pm: Hashes (and objects based on hashes) with encrypting fields. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
