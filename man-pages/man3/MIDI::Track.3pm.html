<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MIDI::Track: Functions and methods for midi tracks</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Functions and methods for midi tracks">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="MIDI::Track (3pm) manual">
  <meta name="twitter:description" content="Functions and methods for midi tracks">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmidi-perl-MIDI::Track-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/MIDI::Track.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MIDI::Track (3pm) manual" />
  <meta property="og:description" content="Functions and methods for midi tracks" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmidi-perl-MIDI::Track-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">MIDI::Track<small> (3pm)</small></h1>
        <p class="lead">Functions and methods for midi tracks</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/MIDI::Track.3pm.html">
      <span itemprop="name">MIDI::Track: Functions and methods for midi tracks</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmidi-perl/">
      <span itemprop="name">libmidi-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/MIDI::Track.3pm.html">
      <span itemprop="name">MIDI::Track: Functions and methods for midi tracks</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use MIDI; # ...which "use"s MIDI::Track et al
 $taco_track = MIDI::Track-&gt;new;
 $taco_track-&gt;events(
  ['text_event', 0, "I like tacos!"],
  ['note_on',    0, 4, 50, 96 ],
  ['note_off', 300, 4, 50, 96 ],
 );
 $opus = MIDI::Opus-&gt;new(
  {  'format' =&gt; 0,  'ticks' =&gt; 240,  'tracks' =&gt; [ $taco_track ] }
 );
   ...etc...
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>MIDI::Track provides a constructor and methods for objects representing a \s-1MIDI\s0 track.  It is part of the \s-1MIDI\s0 suite.</p><p>\s-1MIDI\s0 tracks have, currently, three attributes: a type, events, and data.  Almost all tracks you'll ever deal with are of type \*(L"MTrk\*(R", and so this is the type by default.  Events are what make up an MTrk track.  If a track is not of type MTrk, or is an unparsed MTrk, then it has (or better have!) data.</p><p>When an MTrk track is encoded, if there is data defined for it, that's what's encoded (and \*(L"encoding data\*(R" means just passing it thru untouched).  Note that this happens even if the data defined is "" (but it won't happen if the data is undef).  However, if there's no data defined for the MTrk track (as is the general case), then the track's events are encoded, via a call to \*(C`MIDI::Event::encode\*(C'.</p><p>(If neither events not data are defined, it acts as a zero-length track.)</p><p>If a non-MTrk track is encoded, its data is encoded.  If there's no data for it, it acts as a zero-length track.</p><p>In other words, 1) events are meaningful only in an MTrk track, 2) you probably don't want both data and events defined, and 3) 99.999% of the time, just worry about events in MTrk tracks, because that's all you ever want to deal with anyway.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSTRUCTOR AND METHODS</h2>
        <div class="sectioncontent">
<p>MIDI::Track provides...</p>
<dl class='dl-vertical'>
  <dt>
    the constructor MIDI::Track-&gt;new({ ...options... })
  </dt>
  <dd>
    <p>This returns a new track object.  By default, the track is of type MTrk, which is probably what you want.  The options, which are optional, is an anonymous hash.  There are four recognized options: \*(C`data\*(C', which sets the data of the new track to the string provided; \*(C`type\*(C', which sets the type of the new track to the string provided; \*(C`events\*(C', which sets the events of the new track to the contents of the list-reference provided (i.e., a reference to a LoL \*(-- see perllol for the skinny on LoLs); and \*(C`events_r\*(C', which is an exact synonym of \*(C`events\*(C'. This duplicates the contents of the given track, and returns the duplicate.  If you are unclear on why you may need this function, consider:           $funk  = MIDI::Opus-&gt;new({'from_file' =&gt; 'funk1.mid'});           $samba = MIDI::Opus-&gt;new({'from_file' =&gt; 'samba1.mid'});           $bass_track = ( $funk-&gt;tracks )[-1]; # last track           push(@{ $samba-&gt;tracks_r }, $bass_track );                # make it the last track           &funk_it_up(  ( $funk-&gt;tracks )[-1]  );                # modifies the last track of $funk           &turn_it_out(  ( $samba-&gt;tracks )[-1]  );                # modifies the last track of $samba           $funk-&gt;write_to_file('funk2.mid');           $samba-&gt;write_to_file('samba2.mid');           exit; So you have your routines funk_it_up and turn_it_out, and they each modify the track they're applied to in some way.  But the problem is that the above code probably does not do what you want \*(-- because the last track-object of $funk and the last track-object of $samba are the <em>same object</em>.  An object, you may be surprised to learn, can be in different opuses at the same time \*(-- which is fine, except in cases like the above code.  That's where you need to do copy the object.  Change the above code to read:           push(@{ $samba-&gt;tracks_r }, $bass_track-&gt;copy ); and what you want to happen, will. Incidentally, this potential need to copy also occurs with opuses (and in fact any reference-based data structure, altho opuses and tracks should cover almost all cases with \s-1MIDI\s0 stuff), which is why there's $opus-&gt;copy, for copying entire opuses. (If you happen to need to copy a single event, it's just $new = [@$old] ; and if you happen to need to copy an event structure (LoL) outside of a track for some reason, use MIDI::Event::copy_structure.) Returns the list of events in the track, possibly after having set it to @events, if specified and not empty.  (If you happen to want to set the list of events to an empty list, for whatever reason, you have to use \*(L"$track-&gt;events_r([])\*(R".) In other words: $track-&gt;events(@events) is how to set the list of events (assuming @events is not empty), and @events = $track-&gt;events is how to read the list of events. Returns a reference to the list of events in the track, possibly after having set it to $events_r, if specified.  Actually, \*(L"$events_r\*(R" can be any listref to a LoL, whether it comes from a scalar as in $some_events_r, or from something like \*(C`[@events]\*(C', or just plain old \*(C`&#92;@events\*(C' Originally $track-&gt;events was the only way to deal with events, but I added $track-&gt;events_r to make possible 1) setting the list of events to (), for whatever that's worth, and 2) so you can directly manipulate the track's events, without having to <em>copy</em> the list of events (which might be tens of thousands of elements long) back and forth.  This way, you can say:           $events_r = $track-&gt;events_r();           @some_stuff = splice(@$events_r, 4, 6); But if you don't know how to deal with listrefs outside of LoLs, that's \s-1OK\s0, just use $track-&gt;events. Returns the type of $track, after having set it to 'MFoo', if provided. You probably won't ever need to use this method, other than in a context like:           if( $track-&gt;type eq 'MTrk' ) { # The usual case             give_up_the_funk($track);           } # Else just keep on walkin'! Track types must be 4 bytes long; see MIDI::Filespec for details. Returns the data from $track, after having set it to $kooky_binary_data, if provided \*(-- even if it's zero-length!  You probably won't ever need to use this method.  For your information, $track-&gt;data(undef) is how to undefine the data for a track. This adds the event ('event', ...parameters...) to the end of the event list for $track.  It's just sugar for:           push( @{$this_track-&gt;events_r}, [ 'event', ...params... ] ) If you want anything other than the equivalent of that, like some kinda <em>splice()</em>, then do it yourself with $track-&gt;events_r or $track-&gt;events. This dumps the track's contents for your inspection.  The dump format is code that looks like Perlcode you'd use to recreate that track. This routine outputs with just \*(C`print\*(C', so you can use \*(C`select\*(C' to change where that'll go.  I intended this to be just an internal routine for use only by the method MIDI::Opus::dump, but I figure it might be useful to you, if you need te dump the code for just a given track. Read the source if you really need to know how this works.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 1998-2002 Sean M. Burke. All rights reserved.</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Sean M. Burke \*(C`sburke@cpan.org\*(C'</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="MIDI::Simple.3pm.html"><span aria-hidden="true">&larr;</span> MIDI::Simple.3pm: Procedural/oop interface for midi composition</a></li>
   <li class="next"><a href="MIME::Base32.3pm.html">MIME::Base32.3pm: Base32 encoder / decoder <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
