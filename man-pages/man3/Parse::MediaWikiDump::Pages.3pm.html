<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Parse::MediaWikiDump::Pages: Object capable of processing dump files with a single revision per article</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Object capable of processing dump files with a single revision per article">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Parse::MediaWikiDump::Pages (3pm) manual">
  <meta name="twitter:description" content="Object capable of processing dump files with a single revision per article">
  <meta name="twitter:image" content="https://www.carta.tech/images/libparse-mediawikidump-perl-Parse::MediaWikiDump::Pages-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Parse::MediaWikiDump::Pages.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Parse::MediaWikiDump::Pages (3pm) manual" />
  <meta property="og:description" content="Object capable of processing dump files with a single revision per article" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libparse-mediawikidump-perl-Parse::MediaWikiDump::Pages-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Parse::MediaWikiDump::Pages<small> (3pm)</small></h1>
        <p class="lead">Object capable of processing dump files with a single revision per article</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Parse::MediaWikiDump::Pages.3pm.html">
      <span itemprop="name">Parse::MediaWikiDump::Pages: Object capable of processing dump files with a single revision per article</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libparse-mediawikidump-perl/">
      <span itemprop="name">libparse-mediawikidump-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Parse::MediaWikiDump::Pages.3pm.html">
      <span itemprop="name">Parse::MediaWikiDump::Pages: Object capable of processing dump files with a single revision per article</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">ABOUT</h2>
        <div class="sectioncontent">
<p>This object is used to access the metadata associated with a MediaWiki instance and provide an iterative interface for extracting the individual articles out of the same. This module does not allow more than one revision for each specific article; to parse a comprehensive dump file use the Parse::MediaWikiDump::Revisions object.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  $pmwd = Parse::MediaWikiDump-&gt;new;
  $pages = $pmwd-&gt;pages(&apos;pages-articles.xml&apos;);
  $pages = $pmwd-&gt;pages(&#92;*FILEHANDLE);

  #print the title and id of each article inside the dump file
  while(defined($page = $pages-&gt;next)) {
    print "title &apos;", $page-&gt;title, "&apos; id ", $page-&gt;id, "&#92;n";
  }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STATUS</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STATUS</h2>
        <div class="sectioncontent">
<p>This software is being \s-1RETIRED\s0 - MediaWiki::DumpFile is the official successor to Parse::MediaWikiDump and includes a compatibility library called MediaWiki::DumpFile::Compat that is 100% \s-1API\s0 compatible and is a near perfect standin for this module. It is faster in all instances where it counts and is actively maintained. Any undocumented deviation of MediaWiki::DumpFile::Compat from Parse::MediaWikiDump is considered a bug and will be fixed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>Open the specified MediaWiki dump file. If the single argument to this method is a string it will be used as the path to the file to open. If the argument is a reference to a filehandle the contents will be read from the filehandle as specified. Returns an instance of the next available Parse::MediaWikiDump::page object or returns undef if there are no more articles left. Returns a plain text string of the dump file format revision number Returns a plain text string that is the name of the MediaWiki instance. Returns the \s-1URL\s0 to the instances main article in the form of a string. Returns a string containing 'MediaWiki' and a version number of the instance that dumped this file. Example: 'MediaWiki 1.14alpha' Returns a string describing the case sensitivity configured in the instance. Returns a reference to an array of references. Each reference is to another array with the first item being the unique identifier of the namespace and the second element containing a string that is the name of the namespace. Returns an array reference the array contains strings of all the namespaces each as an element. Returns the number of bytes that has been processed so far Returns the total size of the dump file in bytes.</p><h3>Scan an article dump file for double redirects that exist in the most recent article revision</h3>
<p>  #!/usr/bin/perl</p><p>  #progress information goes to STDERR, a list of double redirects found   #goes to STDOUT</p><p>  binmode(STDOUT, ":utf8");   binmode(STDERR, ":utf8");</p><p>  use strict;   use warnings;   use Parse::MediaWikiDump;</p><p>  my $file = shift(@ARGV);   my $pmwd = Parse::MediaWikiDump-&gt;new;   my $pages;   my $page;   my %redirs;   my $artcount = 0;   my $file_size;   my $start = time;</p><p>  if (defined($file)) {         $file_size = (stat($file))[7];         $pages = $pmwd-&gt;pages($file);   } else {         print STDERR "No file specified, using standard input&#92;n";         $pages = $pmwd-&gt;pages(&#92;*STDIN);   }</p><p>  #the case of the first letter of titles is ignored - force this option   #because the other values of the case setting are unknown   die &apos;this program only supports the first-letter case setting&apos; unless         $pages-&gt;case eq &apos;first-letter&apos;;</p><p>  print STDERR "Analyzing articles:&#92;n";</p><p>  while(defined($page = $pages-&gt;next)) {     update_ui() if ++$artcount % 500 == 0;</p><p>    #main namespace only     next unless $page-&gt;namespace eq &apos;&apos;;     next unless defined($page-&gt;redirect);</p><p>    my $title = case_fixer($page-&gt;title);     #create a list of redirects indexed by their original name     $redirs{$title} = case_fixer($page-&gt;redirect);   }</p><p>  my $redir_count = scalar(keys(%redirs));   print STDERR "done; searching $redir_count redirects:&#92;n";</p><p>  my $count = 0;</p><p>  #if a redirect location is also a key to the index we have a double redirect   foreach my $key (keys(%redirs)) {     my $redirect = $redirs{$key};</p><p>    if (defined($redirs{$redirect})) {       print "$key&#92;n";       $count++;     }   }</p><p>  print STDERR "discovered $count double redirects&#92;n";</p><p>  #removes any case sensativity from the very first letter of the title   #but not from the optional namespace name   sub case_fixer {     my $title = shift;</p><p>    #check for namespace     if ($title =~ /^(.+?):(.+)/) {       $title = $1 . &apos;:&apos; . ucfirst($2);     } else {       $title = ucfirst($title);     }</p><p>    return $title;   }</p><p>  sub pretty_bytes {     my $bytes = shift;     my $pretty = int($bytes) . &apos; bytes&apos;;</p><p>    if (($bytes = $bytes / 1024) &gt; 1) {       $pretty = int($bytes) . &apos; kilobytes&apos;;     }</p><p>    if (($bytes = $bytes / 1024) &gt; 1) {       $pretty = sprintf("%0.2f", $bytes) . &apos; megabytes&apos;;     }</p><p>    if (($bytes = $bytes / 1024) &gt; 1) {       $pretty = sprintf("%0.4f", $bytes) . &apos; gigabytes&apos;;     }</p><p>    return $pretty;   }</p><p>  sub pretty_number {     my $number = reverse(shift);     $number =~ s/(...)/$1,/g;     $number = reverse($number);     $number =~ s/^,//;</p><p>    return $number;   }</p><p>  sub update_ui {     my $seconds = time - $start;     my $bytes = $pages-&gt;current_byte;</p><p>    print STDERR "  ", pretty_number($artcount),  " articles; ";     print STDERR pretty_bytes($bytes), " processed; ";</p><p>    if (defined($file_size)) {       my $percent = int($bytes / $file_size * 100);</p><p>      print STDERR "$percent% completed&#92;n";     } else {       my $bytes_per_second = int($bytes / $seconds);       print STDERR pretty_bytes($bytes_per_second), " per second&#92;n";     }   }</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<h3>Version 0.4</h3>
<p>This class was updated to support version 0.4 dump files from a MediaWiki instance but it does not currently support any of the new information available in those files.</p>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Parse::MediaWikiDump::Links.3pm.html"><span aria-hidden="true">&larr;</span> Parse::MediaWikiDump::Links.3pm: Object capable of processing link dump files</a></li>
   <li class="next"><a href="Parse::MediaWikiDump::Revisions.3pm.html">Parse::MediaWikiDump::Revisions.3pm: Object capable of processing dump files with multiple revisions per article <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
