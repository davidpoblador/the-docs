<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XML::LibXML::LazyBuilder: Easy and lazy way to create xml documents for xml::libxml</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Easy and lazy way to create xml documents for xml::libxml">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="XML::LibXML::LazyBuilder (3pm) manual">
  <meta name="twitter:description" content="Easy and lazy way to create xml documents for xml::libxml">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxml-libxml-lazybuilder-perl-XML::LibXML::LazyBuilder-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/XML::LibXML::LazyBuilder.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="XML::LibXML::LazyBuilder (3pm) manual" />
  <meta property="og:description" content="Easy and lazy way to create xml documents for xml::libxml" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxml-libxml-lazybuilder-perl-XML::LibXML::LazyBuilder-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">XML::LibXML::LazyBuilder<small> (3pm)</small></h1>
        <p class="lead">Easy and lazy way to create xml documents for xml::libxml</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/XML::LibXML::LazyBuilder.3pm.html">
      <span itemprop="name">XML::LibXML::LazyBuilder: Easy and lazy way to create xml documents for xml::libxml</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxml-libxml-lazybuilder-perl/">
      <span itemprop="name">libxml-libxml-lazybuilder-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/XML::LibXML::LazyBuilder.3pm.html">
      <span itemprop="name">XML::LibXML::LazyBuilder: Easy and lazy way to create xml documents for xml::libxml</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use XML::LibXML::LazyBuilder;

  {
      package XML::LibXML::LazyBuilder;
      $d = DOM (E A =&gt; {at1 =&gt; "val1", at2 =&gt; "val2"},
                ((E B =&gt; {}, ((E "C"),
                              (E D =&gt; {}, "Content of D"))),
                 (E E =&gt; {}, ((E F =&gt; {}, "Content of F"),
                              (E "G")))));
  }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module significantly abridges the overhead of working with XML::LibXML by enabling developers to write concise, nested structures that evaluate into XML::LibXML objects.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTIONS</h2>
        <div class="sectioncontent">
<h3>\s-1DOM\s0</h3>
<p>    my $doc = DOM (E $name =&gt; &#92;%attr, @children), $var, $enc;</p><p>    # With defaults, this is shorthand for:</p><p>    my $doc = E($name =&gt; &#92;%attr,                 @children)-&gt;(XML::LibXML::Document-&gt;new);</p><p>Generates a \*(C`XML::LibXML::Document\*(C' object. The first argument is a \*(C`CODE\*(C' reference created by \*(C`E\*(C'. $var represents the version in the \s-1XML\s0 declaration, and $enc is the character encoding, which default to 1.0 and \*(C`utf-8\*(C', respectively.</p>
<h3>E</h3>
<p>    my $sub = E tagname =&gt; &#92;%attr, @children;</p><p>    my $doc = DOM $sub;</p><p>This function returns a \*(C`CODE\*(C' reference which itself evaluates to an XML::LibXML::Element object. The function returned from \*(C`E\*(C' expects an XML::LibXML::Document object as its only argument, which is conveniently provided by \*(L"\s-1DOM\s0\*(R".</p><p><em>Using </em><strong>\*(C`E\*(C'</strong><em> with an existing \s-1XML\s0 document</em></p><p>\*(C`E\*(C' can also be used to compose the subtree of an existing \s-1XML\s0 element. Instead of supplying a name as the first argument of \*(C`E\*(C', supply an XML::LibXML::Element object. Note, however, that any attributes present in that object will be overwritten by \*(C`&#92;%attr\*(C', and the supplied element <em>must</em> be bound to a document, or the function will croak. This is to ensure that the subtree is connected to the element's document and not some other document.</p><p>As such, any XML::LibXML::Document object passed into the function returned by \*(C`E\*(C' will be ignored in favour of the document connected to the supplied element. This also means that \*(C`E($elem =&gt; &#92;%attr, @children)-&gt;($ignored_dom);\*(C' can be called in void context, because it will just return $elem.</p><p>    # parse an existing XML document     my $doc = XML::LibXML-&gt;load_xml(location =&gt; &apos;my.xml&apos;);</p><p>    # find an element of interest     my ($existing) = $doc-&gt;findnodes(&apos;//some-element[1]&apos;);</p><p>    # prepare the subtree     my $sub = E $existing =&gt; &#92;%attr, @children;</p><p>    # this will overwrite the attributes of $existing and append     # @children to it; normally the document is passed as an argument     # but in this case it would be derived from $existing.</p><p>    $sub-&gt;();</p><p>    # we also don&apos;t care about the output of this function, since it     # will have modified $doc, which we already have access to.</p><p>Note as well that members of @children can be XML::LibXML::Node objects.</p><p><em>Namespaces</em></p><p>Qualified element names and namespace declaration attributes will behave largely as expected. This means that:</p><p>    E &apos;foo:bar&apos; =&gt; { &apos;xmlns:foo&apos; =&gt; &apos;urn:x-foo:&apos; }; # ...</p><p>...will properly induct the generated element into the \*(C`foo\*(C' namespace. E attempts to infer the namespace mapping from the document, so child elements with qualified names will inherit the mapping from their ancestors.</p><p><strong>\s-1CAVEAT:\s0</strong> When \*(C`E\*(C' is executed in the context of an <em>element name</em> rather than with an existing XML::LibXML::Element, the namespace mappings are scanned from the context of the document root, in document order. This means that the last namespace declaration that appears in the existing document (depth-first) will occupy the given prefix. When an existing element is passed into \*(C`E\*(C', the namespace search begins there and ascends to the root. If you have any concerns about collisions of namespace declarations, use that form instead.</p>
<h3>P</h3>
<p>    my $sub = P target =&gt; { key =&gt; &apos;value&apos; }, @othertext;</p><p>This function returns a \*(C`CODE\*(C' reference which returns a processing instruction. If you pass in a \s-1HASH\s0 reference as the first argument, it will be turned into key-value pairs using double-quotes on the values. This means you have to take care of your own escaping of any double quotes that may be in the values. The rest of the arguments are concatenated into a string (intended to behave like \*(L"print\*(R" in perlfunc, which means if you want spaces between them, you likewise need to add them yourself).</p>
<h3>C</h3>
<p>    my $sub = C @text;</p><p>This function creates a \*(C`CODE\*(C' reference which returns a comment. Again, @text is simply concatenated, so if you wish to do any additional formatting, do so before passing it in.</p>
<h3>D</h3>
<p>    my $sub = D @text;</p><p>This function creates a \*(C`CODE\*(C' reference which returns a \s-1CDATA\s0 section. Works identically to \*(L"C\*(R".</p>
<h3>F</h3>
<p>    my $sub = F @children;</p><p>This function creates a \*(C`CODE\*(C' reference which returns a document fragment. Since \*(L"\s-1DOM\s0\*(R" can only accept a single node-generating function, it is particularly useful for the following idiom:</p><p>    my $doc = DOM F(         (P &apos;xml-stylesheet&apos; =&gt; { type =&gt; &apos;text/xsl&apos;, href =&gt; &apos;/foo.xsl&apos; }),         (E mydoc =&gt; {}, @children));</p><p>Which produces:</p><p>    &lt;?xml version="1.0" encoding="utf-8"?&gt;     &lt;?xml-stylesheet type="text/xsl" href="/foo.xsl"?&gt;     &lt;mydoc&gt;...&lt;/mydoc&gt;</p>
<h3>\s-1DTD\s0</h3>
<p>    my $sub = DTD $name =&gt; $public, $system;</p><p>This function creates a \*(C`CODE\*(C' reference which returns a \s-1DTD\s0 declaration. Both $public and $system can be \*(C`undef\*(C'.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORT</h2>
        <div class="sectioncontent">
<p>None by default.</p><h3>:all</h3>
<p>Exports \*(L"E\*(R", \*(L"P\*(R", \*(L"C\*(R", \*(L"D\*(R", \*(L"F\*(R" and \*(L"\s-1DOM\s0\*(R".</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>If you nest your code in braces and use a \*(C`package\*(C' declaration like so, you can avoid polluting the calling package's namespace:</p><p>  my $d;   {       package XML::LibXML::LazyBuilder;       $d = DOM (E A =&gt; {at1 =&gt; "val1", at2 =&gt; "val2"},                 ((E B =&gt; {}, ((E "C"),                               (E D =&gt; {}, "Content of D"))),                  (E E =&gt; {}, ((E F =&gt; {}, "Content of F"),                               (E "G")))));   }</p><p>Then, \*(C`$d-&gt;toString\*(C' will generate \s-1XML\s0 like this:</p><p>  &lt;?xml version="1.0" encoding="utf-8"?&gt;   &lt;A at1="val1" at2="val2"&gt;&lt;B&gt;&lt;C/&gt;&lt;D&gt;Content of D&lt;/D&gt;&lt;/B&gt;&lt;E&gt;&lt;F&gt;Content of F&lt;/F&gt;&lt;G/&gt;&lt;/E&gt;&lt;/A&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO XML::LibXML::LazyBuilder&hellip;</h2>
        <div class="sectioncontent">
<p>XML::LibXML</p><p>The Python module lxml.etree &lt;http://lxml.de/tutorial.html&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Toru Hisai &lt;mailto:toru@torus.jp&gt;</p><p>Namespace and non-element support by Dorian Taylor &lt;mailto:dorian@cpan.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2008, 2012 by Toru Hisai</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.10.0 or, at your option, any later version of Perl 5 you may have available.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="XML::LibXML::Iterator.3pm.html"><span aria-hidden="true">&larr;</span> XML::LibXML::Iterator.3pm: Xml::libxml's tree iteration class</a></li>
   <li class="next"><a href="XML::LibXML::NodeList::Iterator.3pm.html">XML::LibXML::NodeList::Iterator.3pm: Iteration class for xml::libxml xpath results <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
