<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>User::Simple::Admin: User::simple user administration</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="User::simple user administration">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="User::Simple::Admin (3pm) manual">
  <meta name="twitter:description" content="User::simple user administration">
  <meta name="twitter:image" content="https://www.carta.tech/images/libuser-simple-perl-User::Simple::Admin-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/User::Simple::Admin.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="User::Simple::Admin (3pm) manual" />
  <meta property="og:description" content="User::simple user administration" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libuser-simple-perl-User::Simple::Admin-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">User::Simple::Admin<small> (3pm)</small></h1>
        <p class="lead">User::simple user administration</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/User::Simple::Admin.3pm.html">
      <span itemprop="name">User::Simple::Admin: User::simple user administration</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libuser-simple-perl/">
      <span itemprop="name">libuser-simple-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/User::Simple::Admin.3pm.html">
      <span itemprop="name">User::Simple::Admin: User::simple user administration</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  $ua = User::Simple::Admin-&gt;new($db, $user_table);

  $ua = User::Simple::Admin-&gt;create_rdbms_db_structure($db, $user_table,
      [$extra_sql]);
  $ua = User::Simple::Admin-&gt;create_plain_db_structure($db, $user_table,
      [$extra_sql]);
  $ok = User::Simple::Admin-&gt;has_db_structure($db, $user_table);

  %users = $ua-&gt;dump_users;

  $id = $ua-&gt;id($login);
  $login = $ua-&gt;login($id);

  $otherattrib = $user-&gt;otherattrib($id);

  $ok = $usr-&gt;set_login($id, $login);
  $ok = $usr-&gt;set_passwd($id, $passwd);
  $ok = $usr-&gt;set_otherattrib($id, $value);
  $ok = $usr-&gt;clear_session($id);

  $id = $ua-&gt;new_user(login =&gt; $login, passwd =&gt; $passwd,
        [otherattribute =&gt; $otherattribute]);

  $ok = $ua-&gt;remove_user($id);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>User::Simple::Admin manages the administrative part of the User::Simple modules - Please check User::Simple for a general overview of these modules and an explanation on what-goes-where.</p><p>User::Simple::Admin works as a regular administrator would: The module should be instantiated only once for all of your users' administration, if possible, and not instantiated once for each user (in contraposition to User::Simple, as it works from each of the users' perspective in independent instantiations).</p><p>Note also that User::Simple::Admin does b&lt;not&gt; perform the administrative user checks - It is meant to be integrated to your system, and it is your system which should carry out all of the needed authentication checks.</p><h3>\s-1CONSTRUCTOR\s0</h3>
<p>Administrative actions for User::Simple modules are handled through this Admin object. To instantiate it:</p><p>  $ua = User::Simple::Admin-&gt;new($db, $user_table);</p><p>$db is an open connection to the database where the user data is stored.</p><p>$user_table is the name of the table that holds the users' data.</p><p>If we do not yet have the needed \s-1DB\s0 structure to store the user information, we can use this class method as a constructor as well:</p><p>  $ua = User::Simple::Admin-&gt;create_rdbms_db_structure($db, $user_table,       [$extra_sql]);</p><p>  $ua = User::Simple::Admin-&gt;create_plain_db_structure($db, $user_table,       [$extra_sql]);</p><p>The first one should be used if your \s-1DBI\s0 handle ($db) points to a real \s-1RDBMS\s0, such as PostgreSQL or MySQL. In case you are using a file-based \s-1DBD\s0 (such as DBD::XBase, \s-1DBD::DBM\s0, \s-1DBD::CVS\s0 or any other which does not use a real \s-1RDBMS\s0 for storage), use \*(C`User::Simple::Admin-&gt;create_plain_db_structure\*(C' instead. What is the difference? In the first case, we will create a table that has internal consistency checks - Some fields are declared \s-1NOT\s0 \s-1NULL\s0, some fields are declared \s-1UNIQUE\s0, and the user \s-1ID\s0 is used as a \s-1PRIMARY\s0 \s-1KEY\s0. This cannot, of course, be achieved using file-based structures, so the integrity can only be maintained from within our scripts.</p><p>This module does not provide the functionality to modify the created tables by adding columns to it, although methods do exist to access and modify the values stored in those columns (see the \*(L"\s-1CREATING\s0, \s-1QUERYING\s0 \s-1AND\s0 \s-1MODIFYING\s0 \s-1USERS\s0\*(R" section below), as many DBDs do not implement the \s-1ALTER\s0 \s-1TABLE\s0 \s-1SQL\s0 commands. It does, however, allow you to specify extra fields in the tables at creation time - If you specify a third extra parameter, it will be included as part of the table creation - i.e., you can create a User::Simple table with fields for the user's first and family names and a \s-1UNIQUE\s0 constraint over them this way:</p><p>  $ua = User::Simple::Admin-&gt;create_rdbms_db_structure($db, $user_table,       &apos;firstname varchar(30) NOT NULL, famname varchar(30) NOT NULL,        UNIQUE (firstname,famname)&apos;);</p><p>Keep in mind that the internal fields are \*(C`id\*(C', \*(C`login\*(C', \*(C`passwd\*(C', \*(C`session\*(C' and \*(C`session_exp\*(C'. Don't mess with them ;-) Avoid adding any fields starting with \*(C`set_\*(C' or called as any method defined here, as they will become unreachable. And, of course, keep in mind what \s-1SQL\s0 construct does your \s-1DBD\s0 support.</p><p>If you add any fields with names starting with \*(C`adm_\*(C', they will be visible but not modifiable from within User::Simple - You will only be able to modify them from User::Simple::Admin.</p>
<h3>\s-1QUERYING\s0 \s-1FOR\s0 \s-1DATABASE\s0 \s-1READINESS\s0</h3>
<p>In order to check if the database is ready to be used by this module with the specified table name, use the \*(C`has_db_structure\*(C' class method:</p><p>  $ok = User::Simple::Admin-&gt;has_db_structure($db, $user_table);</p>
<h3>\s-1RETRIEVING\s0 \s-1THE\s0 \s-1SET\s0 \s-1OF\s0 \s-1USERS\s0</h3>
<p>  %users = $ua-&gt;dump_users;</p><p>Will return a hash with the data regarding the registered users with all of the existing \s-1DB\s0 fields, in the following form:</p><p>  ( $id1 =&gt; { login=&gt;$login1, firstname=&gt;$firstname1, famname=&gt;$famname1 },     $id2 =&gt; { login=&gt;$login2, firstname=&gt;$firstname2, famname=&gt;$famname2 },     (...) )</p><p>Of course, with the appropriate attributes. The internal attributes \*(C`id\*(C', \*(C`session\*(C' and \*(C`session_exp\*(C' will not be included in the resulting hashes (you have the \*(C`id\*(C' as the hash keys).</p>
<h3>\s-1CREATING\s0, \s-1QUERYING\s0 \s-1AND\s0 \s-1MODIFYING\s0 \s-1USERS\s0</h3>
<p>  $id = $ua-&gt;new_user(login =&gt; $login, passwd =&gt; $passwd,         [otherattribute =&gt; $otherattribute]);</p><p>Creates a new user with the specified data. Returns the new user's \s-1ID\s0. Only the login is mandatory (as it uniquely identifies the user), unless you have specified extra \s-1NOT\s0 \s-1NULL\s0 fields or constraints in the \s-1DB\s0. If no password is supplied, the account will be created, but no login will be allowed until one is supplied.</p><p>  $ok = $ua-&gt;remove_user($id);</p><p>Removes the user specified by the \s-1ID\s0.</p><p>  $id = $ua-&gt;id($login);   $login = $ua-&gt;login($id);</p><p>  $otherattrib = $user-&gt;otherattrib($id);</p><p>Get the value of each of the mentioned attributes. Note that in order to get the \s-1ID\s0 you can supply the login, every other method answers only to the \s-1ID\s0. In case you have the login and want to get the firstname, you can use \*(C`$ua-\*(C'firstname($ua-&gt;id($login));&gt;</p><p>Of course, beware: if you request for a field which does not exist in your table, User::Simple will raise an  error and die just as if an unknown method had been called.</p><p>  $ok = $usr-&gt;set_login($id, $login);   $ok = $usr-&gt;set_passwd($id, $passwd);</p><p>Modifies the requested attribute of the specified user, setting it to the new value. Except for the login, they can all be set to null values - If the password is set to a null or empty value, the account will be locked (that is, no password will be accepted). The internal attributes \*(C`id\*(C', \*(C`session\*(C' and \*(C`session_exp\*(C' cannot be directly modified (you have the \*(C`id\*(C' as the hash keys).</p><p>Just as with the accessors, if you have extra columns, you can modify them the same way:</p><p>  $ok = $usr-&gt;set_otherattrib($id, $value);</p><p>i.e.</p><p>  $ok = $usr-&gt;set_name($id, $name);</p>
<h3>\s-1SESSIONS\s0</h3>
<p>  $ok = $usr-&gt;clear_session($id);</p><p>Removes the session which the current user had open, if any.</p><p>Note that you cannot create a new session through this module - The only way of creating a session is through the \*(C`ck_login\*(C' method of User::Simple.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPENDS ON</h2>
        <div class="sectioncontent">
<p>Digest::MD5</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO User::Simple::Admin&hellip;</h2>
        <div class="sectioncontent">
<p>User::Simple for the regular user authentication routines (that is, to use the functionality this module adimisters)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Gunnar Wolf &lt;gwolf@gwolf.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2005-2009 Gunnar Wolf / Instituto de Investigaciones Econo\*'micas \s-1UNAM\s0</p><p>This module is Free Software; it can be redistributed under the same terms as Perl.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="User::Simple.3pm.html"><span aria-hidden="true">&larr;</span> User::Simple.3pm: Simple user sessions management</a></li>
   <li class="next"><a href="V.3pm.html">V.3pm: Print version of the specified module(s). <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
