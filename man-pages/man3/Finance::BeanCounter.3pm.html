<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Finance::BeanCounter: Module for stock portfolio performance functions.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Module for stock portfolio performance functions.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Finance::BeanCounter (3pm) manual">
  <meta name="twitter:description" content="Module for stock portfolio performance functions.">
  <meta name="twitter:image" content="https://www.carta.tech/images/beancounter-Finance::BeanCounter-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Finance::BeanCounter.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Finance::BeanCounter (3pm) manual" />
  <meta property="og:description" content="Module for stock portfolio performance functions." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/beancounter-Finance::BeanCounter-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Finance::BeanCounter<small> (3pm)</small></h1>
        <p class="lead">Module for stock portfolio performance functions.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Finance::BeanCounter.3pm.html">
      <span itemprop="name">Finance::BeanCounter: Module for stock portfolio performance functions.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/beancounter/">
      <span itemprop="name">beancounter</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Finance::BeanCounter.3pm.html">
      <span itemprop="name">Finance::BeanCounter: Module for stock portfolio performance functions.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use Finance::BeanCounter;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Finance::BeanCounter</strong> provides functions to <em>download</em>, <em>store</em> and <em>analyse</em> stock market data.</p><p><em>Downloads</em> are available of current (or rather: 15 or 20 minute-delayed) price and company data as well as of historical price data.  Both forms can be stored in an \s-1SQL\s0 database (for which we currently default to <strong>PostgreSQL</strong> though <strong>MySQL</strong> is supported as well; furthermore any database reachable by means of an <strong>\s-1ODBC\s0</strong> connection should work).</p><p><em>Analysis</em> currently consists of performance and risk analysis. Performance reports comprise a profit-and-loss (or 'p/l' in the lingo) report which can be run over arbitrary time intervals such as \*(C`--prevdate &apos;friday six months ago&apos; --date &apos;yesterday&apos;\*(C' \*(-- in essence, whatever the wonderful <strong>Date::Manip</strong> module understands \*(-- as well as dayendreport which defaults to changes in the last trading day. A risk report show parametric and non-parametric value-at-risk (VaR) estimates.</p><p>Most available functionality is also provided in the reference implementation <strong>beancounter</strong>, a convenient command-line script.</p><p>The \s-1API\s0 might change and evolve over time. The low version number really means to say that the code is not in its final form yet, but it has been in use for well over four years.</p><p>More documentation is in the Perl source code.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATABASE LAYOUT</h2>
        <div class="sectioncontent">
<p>The easiest way to see the table design is to look at the content of the <strong>setup_beancounter</strong> script. It creates the five tables <em>stockinfo</em>, <em>stockprices</em>, <em>fxprices</em>, <em>portfolio</em> and <em>indices</em>. Note also that is supports the creation of database for both <strong>PostgreSQL</strong> and <strong>MySQL</strong>.</p><h3>\s-1THE\s0 \s-1STOCKINFO\s0 \s-1TABLE\s0</h3>
<p>The <em>stockinfo</em> table contains general (non-price) information and is index by <em>symbol</em>:</p><p>            symbol              varchar(12) not null,             name                varchar(64) not null,             exchange            varchar(16) not null,             capitalisation      float4,             low_52weeks         float4,             high_52weeks        float4,             earnings            float4,             dividend            float4,             p_e_ratio           float4,             avg_volume          int4</p><p>This table is updated by overwriting the previous content.</p>
<h3>\s-1THE\s0 \s-1STOCKPRICES\s0 \s-1TABLE\s0</h3>
<p>The <em>stockprices</em> table contains (daily) price and volume information. It is indexed by both <em>date</em> and <em>symbol</em>:</p><p>            symbol              varchar(12) not null,             date                date,             previous_close      float4,             day_open            float4,             day_low             float4,             day_high            float4,             day_close           float4,             day_change          float4,             bid                 float4,             ask                 float4,             volume              int4</p><p>During updates, information is appended to this table.</p>
<h3>\s-1THE\s0 \s-1FXPRICES\s0 \s-1TABLE\s0</h3>
<p>The <em>fxprices</em> table contains (daily) foreign exchange rates. It can be used to calculate home market values of foreign stocks:</p><p>            currency            varchar(12) not null,             date                date,             previous_close      float4,             day_open            float4,             day_low             float4,             day_high            float4,             day_close           float4,             day_change          float4</p><p>Similar to the <em>stockprices</em> table, it is index on <em>date</em> and <em>symbol</em>.</p>
<h3>\s-1THE\s0 \s-1STOCKPORTFOLIO\s0 \s-1TABLE\s0</h3>
<p>The <em>portfolio</em> table contains contains the holdings information:</p><p>            symbol              varchar(16) not null,             shares              float4,             currency            varchar(12),             type                varchar(16),             owner               varchar(16),             cost                <strong>float</strong>(4),             date                date</p><p>It is indexed on <em>symbol,owner,date</em>.</p>
<h3>\s-1THE\s0 \s-1INDICES\s0 \s-1TABLE\s0</h3>
<p>The <em>indices</em> table links a stock <em>symbol</em> with one or several market indices:</p><p>            symbol              varchar(12) not null,             stockindex          varchar(12) not null</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p><strong>Finance::BeanCounter</strong> and <strong>beancounter</strong> are so fresh that there are only missing features :)</p><p>On a more serious note, this code (or its earlier predecessors) have been in use since the fall of 1998.</p><p>Known bugs or limitations are documented in \s-1TODO\s0 file in the source package.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Finance::BeanCounter&hellip;</h2>
        <div class="sectioncontent">
<p><em>beancounter.1</em>, <em>smtm.1</em>, <em>Finance::YahooQuote.3pm</em>, <em>\s-1LWP\s0.3pm</em>, <em>Date::Manip.3pm</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Finance::BeanCounter.pm  (c) 2000 \*(-- 2006 by Dirk Eddelbuettel &lt;edd@debian.org&gt;</p><p>Updates to this program might appear at <em>http://eddelbuettel.com/dirk/code/beancounter.html</em>.</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the \s-1GNU\s0 General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.  There is \s-1NO\s0 warranty whatsoever.</p><p>The information that you obtain with this program may be copyrighted by Yahoo! Inc., and is governed by their usage license.  See <em>http://www.yahoo.com/docs/info/gen_disclaimer.html</em> for more information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p>The Finance::YahooQuote module by Dj Padzensky (on the web at <em>http://www.padz.net/~djpadz/YahooQuote/</em>) served as the backbone for data retrieval, and a guideline for the extension to the non-North American quotes which was already very useful for the real-time ticker <em>http://eddelbuettel.com/dirk/code/smtm.html</em>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Finance::Bank::IE::PermanentTSB.3pm.html"><span aria-hidden="true">&larr;</span> Finance::Bank::IE::PermanentTSB.3pm: Perl interface to the permanenttsb open24 homebanking on http://www.open24.ie</a></li>
   <li class="next"><a href="Finance::QIF.3pm.html">Finance::QIF.3pm: Parse and create quicken interchange format files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
