<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>libzeep: A c++ library for xml parsing, xpath, soap servers and web apps</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A c++ library for xml parsing, xpath, soap servers and web apps">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="libzeep (3) manual">
  <meta name="twitter:description" content="A c++ library for xml parsing, xpath, soap servers and web apps">
  <meta name="twitter:image" content="https://www.carta.tech/images/libzeep-dev-libzeep-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/libzeep.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="libzeep (3) manual" />
  <meta property="og:description" content="A c++ library for xml parsing, xpath, soap servers and web apps" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libzeep-dev-libzeep-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">libzeep<small> (3)</small></h1>
        <p class="lead">A c++ library for xml parsing, xpath, soap servers and web apps</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/libzeep.3.html">
      <span itemprop="name">libzeep: A c++ library for xml parsing, xpath, soap servers and web apps</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libzeep-dev/">
      <span itemprop="name">libzeep-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/libzeep.3.html">
      <span itemprop="name">libzeep: A c++ library for xml parsing, xpath, soap servers and web apps</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;zeep/server.hpp&gt;</strong></p><p>class my_server : public zeep::server</p><p>{</p>
<pre>
  public:
</pre>

<pre>
    my_server(const char* addr, short port);
</pre>

<pre>
    void sum(int a, int b, int& c) { c = a + b; }
</pre>
<p>};</p><p>my_server::my_server(const char* addr, short port)</p>
<pre>
  : zeep::server("http//www.acme.org/...", addr, port)
</pre>
<p>{</p>
<pre>
  const char kSumParameterNames[] = { "a", "b", "c" };
</pre>

<pre>
  register_action("sum", this, &my_server::sum, kSumParameterNames);
</pre>
<p>}</p><p> ...</p><p>int main()</p><p>{</p>
<pre>
  my_server server("0.0.0.0", 10333);
</pre>

<pre>
  boost::thread t(boost::bind(&my_server::run, &server));
</pre>

<pre>
  // and wait for a signal to stop using e.g. <a href="../man3/sigwait.3.html"><strong>sigwait</strong>(3)</a>
</pre>

<pre>
  ...
</pre>
<p>}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTE</h2>
        <div class="sectioncontent">
<p>See HTML pages for more up-to-date documentation. E.g. at http://www.cmbi.ru.nl/libzeep/doc</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Using libzeep you can create a SOAP server by deriving from <strong>zeep::server</strong>. In the constructor of your server, you call the base class constructor with three arguments: <em>ns</em>, a namespace for your SOAP server, <em>address</em>, the address to listen to, usually "0.0.0.0" to listen to all available addresses. And <em>port</em>, the port number to bind to.</p><p>SOAP actions are simply members of the server object and are registered using the <strong>register_action</strong> member function of the <strong>zeep::server</strong> base class. After initializing the server object, the <strong>run</strong> member is called and the server then starts listening to the address and port specified.</p><p>The resulting web service application will process incoming request. There are three kinds of requests, the server can return an automatically generated <em>WSDL</em>, it can process standard <em>SOAP</em> message send in <em>SOAP envelopes</em> and it can handle <em>REST</em> style requests which are mapped to corresponding <em>SOAP</em> messages internally.</p><p>The signature of the registered actions are used to generate all the code needed to serialize and deserialize <em>SOAP envelopes</em> and to create a corresponding <em>WSDL</em> file. The signature can be as simple as the example above but can also be as complex as in this one:</p><p><strong>  void myAction(</strong></p><p><strong>         const std::vector&lt;MyStructIn&gt;& </strong><em>input</em><strong>,</strong></p><p><strong>         MyStructOut& </strong><em>output</em><strong>); </strong></p><p>In order to make this work, you have to notify the library of the mapping of your structure type to a name using the macro <strong>SOAP_XML_SET_STRUCT_NAME</strong> like this:</p><p><strong>         SOAP_XML_SET_STRUCT_NAME(MyStructIn);</strong></p><p><strong>         SOAP_XML_SET_STRUCT_NAME(MyStructOut);</strong></p><p>Next to this, you have to provide a way to serialize and deserialize your structure. For this, libzeep uses the same mechanism as the <em>Boost::serialize</em> library, which means you have to add a templated member function called <strong>serialize</strong> to your structure. The result will look like this:</p><p>struct MyStructIn {</p>
<pre>
  string myField1;
</pre>

<pre>
  int myField2;
</pre>

<pre>
  template&lt;class Archive&gt;
</pre>

<pre>
  void serialize(Archive& ar, const unsigned int version)
</pre>

<pre>
  {
</pre>

<pre>
    ar & BOOST_SERIALIZATION_NVP(myField1)
</pre>

<pre>
       & BOOST_SERIALIZATION_NVP(myField2);
</pre>

<pre>
  }
</pre>
<p>};</p><p>Similarly you can use enum's in an action signature or as structure member variables. Again we need to tell the library the type name for the enum and the possible enum values. We do this using the <strong>SOAP_XML_ADD_ENUM</strong> macro, like this:</p>
<pre>
   enum MyEnum { "one", "two" };
</pre>

<pre>
   SOAP_XML_ADD_ENUM(myEnum, one);
   SOAP_XML_ADD_ENUM(myEnum, two);
</pre>
<p>As shown above, you can also use std::vector containers in the signature of actions. Support for other STL containers is not implemented yet.</p><p>If the address used by clients of your server is different from the address of your local machine (which can happen if you're behind a reverse proxy e.g.) you can specify the location using the <strong>set_location</strong> member function of zeep::server. The specified address will then be used in the <em>WSDL</em> file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>This documentation is seriously out of date. Look at the HTML version for more up-to-date documentation, you can find it at /usr/share/doc/libzeep-dev/html or at http://www.cmbi.ru.nl/libzeep/ Undoubtedly libzeep will contain bugs. One of the more obvious one is the missing support for signatures using STL containers other than std::vector.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="libxslt.3.html"><span aria-hidden="true">&larr;</span> libxslt.3: Library used to do xsl transformations on xml documents</a></li>
   <li class="next"><a href="libzip.3.html">libzip.3: Library for manipulating zip archives <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
