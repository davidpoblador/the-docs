<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AnyEvent::Redis: Non-blocking redis client</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Non-blocking redis client">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="AnyEvent::Redis (3pm) manual">
  <meta name="twitter:description" content="Non-blocking redis client">
  <meta name="twitter:image" content="https://www.carta.tech/images/libanyevent-redis-perl-AnyEvent::Redis-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/AnyEvent::Redis.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="AnyEvent::Redis (3pm) manual" />
  <meta property="og:description" content="Non-blocking redis client" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libanyevent-redis-perl-AnyEvent::Redis-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">AnyEvent::Redis<small> (3pm)</small></h1>
        <p class="lead">Non-blocking redis client</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/AnyEvent::Redis.3pm.html">
      <span itemprop="name">AnyEvent::Redis: Non-blocking redis client</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libanyevent-redis-perl/">
      <span itemprop="name">libanyevent-redis-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/AnyEvent::Redis.3pm.html">
      <span itemprop="name">AnyEvent::Redis: Non-blocking redis client</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  use AnyEvent::Redis;

  my $redis = AnyEvent::Redis-&gt;new(
      host =&gt; &apos;127.0.0.1&apos;,
      port =&gt; 6379,
      encoding =&gt; &apos;utf8&apos;,
      on_error =&gt; sub { warn @_ },
      on_cleanup =&gt; sub { warn "Connection closed: @_" },
  );

  # callback based
  $redis-&gt;set( &apos;foo&apos;=&gt; &apos;bar&apos;, sub { warn "SET!" } );
  $redis-&gt;get( &apos;foo&apos;, sub { my $value = shift } );

  my ($key, $value) = (&apos;list_key&apos;, 123);
  $redis-&gt;lpush( $key, $value );
  $redis-&gt;lpop( $key, sub { my $value = shift });

  # condvar based
  my $cv = $redis-&gt;lpop( $key );
  $cv-&gt;cb(sub { my $value = $_[0]-&gt;recv });
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>AnyEvent::Redis is a non-blocking (event-driven) Redis client.</p><p>This module is an AnyEvent user; you must install and use a supported event loop.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ESTABLISHING A CONNECTION</h2>
        <div class="sectioncontent">
<p>To create a new connection, use the <em>new()</em> method with the following attributes:</p>
<dl class='dl-vertical'>
  <dt>
    host =&gt; &lt;\s-1HOSTNAME\s0&gt;
  </dt>
  <dd>
    <p><strong>Required.</strong>  The hostname or literal address of the server.</p>
  </dd>
  <dt>
    port =&gt; &lt;\s-1PORT\s0&gt;
  </dt>
  <dd>
    <p>Optional.  The server port.</p>
  </dd>
  <dt>
    encoding =&gt; &lt;\s-1ENCODING\s0&gt;
  </dt>
  <dd>
    <p>Optional.  Encode and decode data (when storing and retrieving, respectively) according to <em>\s-1ENCODING\s0</em> ("utf8" is recommended or see Encode::Supported for details on possible <em>\s-1ENCODING\s0</em> values). Omit if you intend to handle raw binary data with this connection. Optional.  Callback that will be fired if a connection or database-level error occurs.  The error message will be passed to the callback as the sole argument. Optional.  Callback that will be fired if a connection error occurs.  The error message will be passed to the callback as the sole argument.  After this callback, errors will be reported for all outstanding requests.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">METHODS</h2>
        <div class="sectioncontent">
<p>All methods supported by your version of Redis should be supported.</p><h3>Normal commands</h3>
<p>There are two alternative approaches for handling results from commands:</p><ul>
<li><p>AnyEvent::CondVar based:   my $cv = $redis-&gt;command(     # arguments to command   );</p><p>  # Then...   my $res;   eval {       # Could die()       $res = $cv-&gt;recv;   };   warn $@ if $@;</p><p>  # or...   $cv-&gt;cb(sub {     my ($cv) = @_;     my ($result, $err) = $cv-&gt;recv   });</p></li><li><p>Callback:   $redis-&gt;command(     # arguments,     sub {       my ($result, $err) = @_;     }); (Callback is a wrapper around the $cv approach.)</p></li>
</ul>
<h3>Transactions (\s-1MULTI/EXEC\s0)</h3>
<p>Redis transactions begin with a \*(L"multi\*(R" command and end with an \*(L"exec\*(R" command.  Commands in between are not executed immediately when they're sent.  On receipt of the \*(L"exec\*(R", the server executes all the saved commands atomically, and returns all their results as one bulk reply.</p><p>After a transaction is finished, results for each individual command are reported in the usual way.  Thus, by the time any of these callbacks is called, the entire transaction is finished for better or worse.</p><p>Results of the \*(L"exec\*(R" (containing all the other results) will be returned as an array reference containing all of the individual results.  This may in some cases make callbacks on the individual commands unnecessary, or vice versa.  In this bulk reply, errors reported for each individual command are represented by objects of class \*(C`AnyEvent::Redis::Error\*(C', which will respond to a \*(C`-&gt;message\*(C' method call with that error message.</p><p>It is not permitted to nest transactions.  This module does not permit subscription-related commands in a transaction.</p>
<h3>Subscriptions</h3>
<p>The subscription methods (\*(C`subscribe\*(C' and \*(C`psubscribe\*(C') must be used with a callback:</p><p>  my $cv = $redis-&gt;subscribe("test", sub {     my ($message, $channel[, $actual_channel]) = @_;     # ($actual_channel is provided for pattern subscriptions.)   });</p><p>The $cv condition will be met on unsubscribing from the channel.</p><p>Due to limitations of the Redis protocol the only valid commands on a connection with an active subscription are subscribe and unsubscribe commands.</p>
<h3>Common methods</h3>
<ul>
<li><p>get</p></li><li><p>set</p></li><li><p>hset</p></li><li><p>hget</p></li><li><p>lpush</p></li><li><p>lpop</p></li>
</ul><p>The Redis command reference (&lt;http://redis.io/commands&gt;) lists all commands Redis supports.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REQUIREMENTS</h2>
        <div class="sectioncontent">
<p>This requires Redis &gt;= 1.2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Tatsuhiko Miyagawa &lt;miyagawa@bulknews.net&gt; 2009-</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Tatsuhiko Miyagawa</p><p>David Leadbeater</p><p>Chia-liang Kao</p><p>franck cuny</p><p>Lee Aylward</p><p>Joshua Barratt</p><p>Jeremy Zawodny</p><p>Leon Brocard</p><p>Michael S. Fischer</p><p>Chip Salzenberg</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO AnyEvent::Redis&hellip;</h2>
        <div class="sectioncontent">
<p>Redis, AnyEvent</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="AnyEvent::README.3pm.html"><span aria-hidden="true">&larr;</span> AnyEvent::README.3pm: Callback aggregator for anyevent watchers.</a></li>
   <li class="next"><a href="AnyEvent::Redis::Protocol.3pm.html">AnyEvent::Redis::Protocol.3pm: Redis response parser (read handler) for anyevent <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
