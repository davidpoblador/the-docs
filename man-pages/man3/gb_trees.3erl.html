<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gb_trees: General balanced trees</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="General balanced trees">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gb_trees (3erl) manual">
  <meta name="twitter:description" content="General balanced trees">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-gb_trees-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/gb_trees.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gb_trees (3erl) manual" />
  <meta property="og:description" content="General balanced trees" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-gb_trees-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gb_trees<small> (3erl)</small></h1>
        <p class="lead">General balanced trees</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/gb_trees.3erl.html">
      <span itemprop="name">gb_trees: General balanced trees</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/gb_trees.3erl.html">
      <span itemprop="name">gb_trees: General balanced trees</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>An efficient implementation of Prof. Arne Andersson's General Balanced Trees. These have no storage overhead compared to unbalanced binary trees, and their performance is in general better than AVL trees.</p><p>This module considers two keys as different if and only if they do not compare equal (<em>==</em>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATA STRUCTURE</h2>
        <div class="sectioncontent">
<p>Data structure:</p>
<pre>
- {Size, Tree}, where `Tree' is composed of nodes of the form:
  - {Key, Value, Smaller, Bigger}, and the "empty tree" node:
  - nil.
</pre>
<p>There is no attempt to balance trees after deletions. Since deletions do not increase the height of a tree, this should be OK.</p><p>Original balance condition <em>h(T) &lt;= ceil(c * log(|T|))</em> has been changed to the similar (but not quite equivalent) condition <em>2 ^ h(T) &lt;= |T| ^ c</em>. This should also be OK.</p><p>Performance is comparable to the AVL trees in the Erlang book (and faster in general due to less overhead); the difference is that deletion works for these trees, but not for the book's trees. Behaviour is logarithmic (as it should be).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATA TYPES</h2>
        <div class="sectioncontent">

<pre>
<strong>tree(Key, Value)</strong>

</pre>
<p>A GB tree.</p>
<pre>
<strong>tree()</strong>

</pre>
<p><em>tree()</em> is equivalent to <em>tree(term(), term())</em>.</p>
<pre>
<strong>iter(Key, Value)</strong>

</pre>
<p>A GB tree iterator.</p>
<pre>
<strong>iter()</strong>

</pre>
<p><em>iter()</em> is equivalent to <em>iter(term(), term())</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">

<pre>
<strong></strong>
balance(Tree1) -&gt; Tree2

</pre>
<p>Types:</p><p>Tree1 = Tree2 = <strong>tree</strong>(Key, Value)</p><p>Rebalances <em>Tree1</em>. Note that this is rarely necessary, but may be motivated when a large number of nodes have been deleted from the tree without further insertions. Rebalancing could then be forced in order to minimise lookup times, since deletion only does not rebalance the tree.</p>
<pre>
<strong></strong>
delete(Key, Tree1) -&gt; Tree2

</pre>
<p>Types:</p><p>Tree1 = Tree2 = <strong>tree</strong>(Key, Value)</p><p>Removes the node with key <em>Key</em> from <em>Tree1</em>; returns new tree. Assumes that the key is present in the tree, crashes otherwise.</p>
<pre>
<strong></strong>
delete_any(Key, Tree1) -&gt; Tree2

</pre>
<p>Types:</p><p>Tree1 = Tree2 = <strong>tree</strong>(Key, Value)</p><p>Removes the node with key <em>Key</em> from <em>Tree1</em> if the key is present in the tree, otherwise does nothing; returns new tree.</p>
<pre>
<strong></strong>
empty() -&gt; tree()

</pre>
<p>Returns a new empty tree</p>
<pre>
<strong></strong>
enter(Key, Value, Tree1) -&gt; Tree2

</pre>
<p>Types:</p><p>Tree1 = Tree2 = <strong>tree</strong>(Key, Value)</p><p>Inserts <em>Key</em> with value <em>Value</em> into <em>Tree1</em> if the key is not present in the tree, otherwise updates <em>Key</em> to value <em>Value</em> in <em>Tree1</em>. Returns the new tree.</p>
<pre>
<strong></strong>
from_orddict(List) -&gt; Tree

</pre>
<p>Types:</p><p>List = [{Key, Value}]</p><p>Tree = <strong>tree</strong>(Key, Value)</p><p>Turns an ordered list <em>List</em> of key-value tuples into a tree. The list must not contain duplicate keys.</p>
<pre>
<strong></strong>
get(Key, Tree) -&gt; Value

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key, Value)</p><p>Retrieves the value stored with <em>Key</em> in <em>Tree</em>. Assumes that the key is present in the tree, crashes otherwise.</p>
<pre>
<strong></strong>
insert(Key, Value, Tree1) -&gt; Tree2

</pre>
<p>Types:</p><p>Tree1 = Tree2 = <strong>tree</strong>(Key, Value)</p><p>Inserts <em>Key</em> with value <em>Value</em> into <em>Tree1</em>; returns the new tree. Assumes that the key is not present in the tree, crashes otherwise.</p>
<pre>
<strong></strong>
is_defined(Key, Tree) -&gt; boolean()

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key, Value :: term())</p><p>Returns <em>true</em> if <em>Key</em> is present in <em>Tree</em>, otherwise <em>false</em>.</p>
<pre>
<strong></strong>
is_empty(Tree) -&gt; boolean()

</pre>
<p>Types:</p><p>Tree = <strong>tree()</strong></p><p>Returns <em>true</em> if <em>Tree</em> is an empty tree, and <em>false</em> otherwise.</p>
<pre>
<strong></strong>
iterator(Tree) -&gt; Iter

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key, Value)</p><p>Iter = <strong>iter</strong>(Key, Value)</p><p>Returns an iterator that can be used for traversing the entries of <em>Tree</em>; see <em>next/1</em>. The implementation of this is very efficient; traversing the whole tree using <em>next/1</em> is only slightly slower than getting the list of all elements using <em>to_list/1</em> and traversing that. The main advantage of the iterator approach is that it does not require the complete list of all elements to be built in memory at one time.</p>
<pre>
<strong></strong>
keys(Tree) -&gt; [Key]

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key, Value :: term())</p><p>Returns the keys in <em>Tree</em> as an ordered list.</p>
<pre>
<strong></strong>
largest(Tree) -&gt; {Key, Value}

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key, Value)</p><p>Returns <em>{Key, Value}</em>, where <em>Key</em> is the largest key in <em>Tree</em>, and <em>Value</em> is the value associated with this key. Assumes that the tree is nonempty.</p>
<pre>
<strong></strong>
lookup(Key, Tree) -&gt; none | {value, Value}

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key, Value)</p><p>Looks up <em>Key</em> in <em>Tree</em>; returns <em>{value, Value}</em>, or <em>none</em> if <em>Key</em> is not present.</p>
<pre>
<strong></strong>
map(Function, Tree1) -&gt; Tree2

</pre>
<p>Types:</p><p>Function = fun((K :: Key, V1 :: Value1) -&gt; V2 :: Value2)</p><p>Tree1 = <strong>tree</strong>(Key, Value1)</p><p>Tree2 = <strong>tree</strong>(Key, Value2)</p><p>Maps the function F(K, V1) -&gt; V2 to all key-value pairs of the tree <em>Tree1</em> and returns a new tree <em>Tree2</em> with the same set of keys as <em>Tree1</em> and the new set of values <em>V2</em>.</p>
<pre>
<strong></strong>
next(Iter1) -&gt; none | {Key, Value, Iter2}

</pre>
<p>Types:</p><p>Iter1 = Iter2 = <strong>iter</strong>(Key, Value)</p><p>Returns <em>{Key, Value, Iter2}</em> where <em>Key</em> is the smallest key referred to by the iterator <em>Iter1</em>, and <em>Iter2</em> is the new iterator to be used for traversing the remaining nodes, or the atom <em>none</em> if no nodes remain.</p>
<pre>
<strong></strong>
size(Tree) -&gt; integer() &gt;= 0

</pre>
<p>Types:</p><p>Tree = <strong>tree()</strong></p><p>Returns the number of nodes in <em>Tree</em>.</p>
<pre>
<strong></strong>
smallest(Tree) -&gt; {Key, Value}

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key, Value)</p><p>Returns <em>{Key, Value}</em>, where <em>Key</em> is the smallest key in <em>Tree</em>, and <em>Value</em> is the value associated with this key. Assumes that the tree is nonempty.</p>
<pre>
<strong></strong>
take_largest(Tree1) -&gt; {Key, Value, Tree2}

</pre>
<p>Types:</p><p>Tree1 = Tree2 = <strong>tree</strong>(Key, Value)</p><p>Returns <em>{Key, Value, Tree2}</em>, where <em>Key</em> is the largest key in <em>Tree1</em>, <em>Value</em> is the value associated with this key, and <em>Tree2</em> is this tree with the corresponding node deleted. Assumes that the tree is nonempty.</p>
<pre>
<strong></strong>
take_smallest(Tree1) -&gt; {Key, Value, Tree2}

</pre>
<p>Types:</p><p>Tree1 = Tree2 = <strong>tree</strong>(Key, Value)</p><p>Returns <em>{Key, Value, Tree2}</em>, where <em>Key</em> is the smallest key in <em>Tree1</em>, <em>Value</em> is the value associated with this key, and <em>Tree2</em> is this tree with the corresponding node deleted. Assumes that the tree is nonempty.</p>
<pre>
<strong></strong>
to_list(Tree) -&gt; [{Key, Value}]

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key, Value)</p><p>Converts a tree into an ordered list of key-value tuples.</p>
<pre>
<strong></strong>
update(Key, Value, Tree1) -&gt; Tree2

</pre>
<p>Types:</p><p>Tree1 = Tree2 = <strong>tree</strong>(Key, Value)</p><p>Updates <em>Key</em> to value <em>Value</em> in <em>Tree1</em>; returns the new tree. Assumes that the key is present in the tree.</p>
<pre>
<strong></strong>
values(Tree) -&gt; [Value]

</pre>
<p>Types:</p><p>Tree = <strong>tree</strong>(Key :: term(), Value)</p><p>Returns the values in <em>Tree</em> as an ordered list, sorted by their corresponding keys. Duplicates are not removed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gb_trees&hellip;</h2>
        <div class="sectioncontent">
<p><strong>gb_sets(3erl)</strong>, <strong>dict(3erl)</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gb_sets.3erl.html"><span aria-hidden="true">&larr;</span> gb_sets.3erl: General balanced trees</a></li>
   <li class="next"><a href="gen_event.3erl.html">gen_event.3erl: Generic event handling behaviour <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
