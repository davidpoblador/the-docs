<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MIDI: Read, compose, modify, and write midi files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Read, compose, modify, and write midi files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="MIDI (3pm) manual">
  <meta name="twitter:description" content="Read, compose, modify, and write midi files">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmidi-perl-MIDI-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/MIDI.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MIDI (3pm) manual" />
  <meta property="og:description" content="Read, compose, modify, and write midi files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmidi-perl-MIDI-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">MIDI<small> (3pm)</small></h1>
        <p class="lead">Read, compose, modify, and write midi files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/MIDI.3pm.html">
      <span itemprop="name">MIDI: Read, compose, modify, and write midi files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmidi-perl/">
      <span itemprop="name">libmidi-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/MIDI.3pm.html">
      <span itemprop="name">MIDI: Read, compose, modify, and write midi files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 use MIDI;
 $chimes_track = MIDI::Track-&gt;new({ 'events' =&gt; [
  ['text_event',0, 'www.ely.anglican.org/parishes/camgsm/chimes.html'],
  ['text_event',0, 'Lord through this hour/ be Thou our guide'],
  ['text_event',0, 'so, by Thy power/ no foot shall slide'],
  ['text_event',0, '(coded at ' . scalar(localtime) . ' )'],
  ['patch_change', 0, 1, 8], # Patch 8 = Celesta
  map( (['note_on',0,1,$_-&gt;[0],96], ['note_off',$_-&gt;[1],1,$_-&gt;[0],0]),
       [25,96],[29,96],[27,96],[20,192],[25,96],[27,96],[29,96],[25,192],
       [29,96],[25,96],[27,96],[20,192],[20,96],[27,96],[29,96],[25,192],
     )# [Note,Duration] ==&gt; ['note_on',0,1, N ,96], ['note_off', D ,1, N ,0]
 ] });
 $chimes = MIDI::Opus-&gt;new(
  { 'format' =&gt; 0, 'ticks' =&gt; 96, 'tracks' =&gt; [ $chimes_track ] } );
 $chimes-&gt;write_to_file('chimes.mid');
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This suite of modules provides routines for reading, composing, modifying, and writing \s-1MIDI\s0 files.</p><p>From \s-1FOLDOC\s0 (\*(C`http://wombat.doc.ic.ac.uk/foldoc/\*(C'):</p><p><strong>\s-1MIDI\s0, Musical Instrument Digital Interface</strong> &lt;multimedia, file format&gt; (\s-1MIDI\s0 /mi'-dee/, /mee'-dee/) A hardware specification and protocol used to communicate note and effect information between synthesisers, computers, music keyboards, controllers and other electronic music devices. [...] The basic unit of information is a \*(L"note on/off\*(R" event which includes a note number (pitch) and key velocity (loudness). There are many other message types for events such as pitch bend, patch changes and synthesizer-specific events for loading new patches etc. There is a file format for expressing \s-1MIDI\s0 data which is like a dump of data sent over a \s-1MIDI\s0 port. [...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMPONENTS</h2>
        <div class="sectioncontent">
<p>The MIDI-Perl suite consists of these modules:</p><p>\s-1MIDI\s0 (which you're looking at), MIDI::Opus, MIDI::Track, MIDI::Event, MIDI::Score, and MIDI::Simple.  All of these contain documentation in pod format. You should read all of these pods.</p><p>The order you want to read them in will depend on what you want to do with this suite of modules: if you are focused on manipulating the guts of existing \s-1MIDI\s0 files, read the pods in the order given above.</p><p>But if you aim to compose music with this suite, read this pod, then MIDI::Score and MIDI::Simple, and then skim the rest.</p><p>(For your reference, there is also a document in pod format which is not itself an actual module: MIDI::Filespec.  It is an old version of the \s-1MIDI\s0 file specification.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTRODUCTION</h2>
        <div class="sectioncontent">
<p>This suite of modules is basically object-oriented, with the exception of MIDI::Simple.  \s-1MIDI\s0 opuses (\*(L"songs\*(R") are represented as objects belonging to the class MIDI::Opus.  An opus contains tracks, which are objects belonging to the class MIDI::Track.  A track will generally contain a list of events, where each event is a list consisting of a command, a delta-time, and some number of parameters.  In other words, opuses and tracks are objects, and the events in a track comprise a LoL (and if you don't know what an LoL is, you must read perllol).</p><p>Furthermore, for some purposes it's useful to analyze the totality of a track's events as a \*(L"score\*(R" \*(-- where a score consists of notes where each event is a list consisting of a command, a time offset from the start of the track, and some number of parameters.  This is the level of abstraction that MIDI::Score and MIDI::Simple deal with.</p><p>While this suite does provide some functionality accessible only if you're comfortable with various kinds of references, and while there are some options that deal with the guts of \s-1MIDI\s0 encoding, you can (I hope) get along just fine with just a basic grasp of the \s-1MIDI\s0 \*(L"standard\*(R", and a command of LoLs.  I have tried, at various points in this documentation, to point out what things are not likely to be of use to the casual user.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TO DO</h2>
        <div class="sectioncontent">
<p>Maybe have a \s-1MIDI\s0 cookbook of commonly used short scripts?</p><p><strong>A \s-1PLEA\s0</strong>: Currently this suite can only read/write \s-1MIDI\s0 data from/to \s-1MIDI\s0 <em>files</em>.  However, it would be desirable to have realtime access to a \s-1MIDI\s0 device \*(-- at least on systems where a \s-1MIDI\s0 device (whether thru a hardware port or as a virtual sequencer in a sound card) is accessable as a virtual file (\*(C`/dev/midi0\*(C', \*(C`/dev/midi\*(C', \*(C`/dev/sequencer\*(C', or whatever).  However, I have no such \s-1MIDI\s0 devices (much less ports) at hand for development and testing.  But if <em>you</em> have such devices (I'm thinking a Linuxer with a synth hooked to their \s-1MIDI\s0 port), and if you want to help me experiment with directly accessing them from Perl, then please email me.  I already have a pretty good idea of how it should work \*(-- but as always, the proof is as much in the pudding as the devil is in the details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GOODIES</h2>
        <div class="sectioncontent">
<p>The bare module \s-1MIDI\s0.pm doesn't <em>do</em> much more than \*(C`use\*(C' the necessary component submodules (i.e., all except MIDI::Simple).  But it does provide some hashes you might find useful: %MIDI::number2note correponds \s-1MIDI\s0 note numbers to a more comprehensible representation (e.g., 68 to 'Gs4', for G-sharp, octave 4); %MIDI::note2number is the reverse.  Have a look at the source to see the contents of the hash. %MIDI::number2patch correponds General \s-1MIDI\s0 patch numbers (0 to 127) to English names (e.g., 79 to 'Ocarina'); %MIDI::patch2number is the reverse.  Have a look at the source to see the contents of the hash. %MIDI::notenum2percussion correponds General \s-1MIDI\s0 Percussion Keys to English names (e.g., 56 to 'Cowbell') \*(-- but note that only numbers 35 to 81 (inclusive) are defined; %MIDI::percussion2notenum is the reverse.  Have a look at the source to see the contents of the hash.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BRIEF GLOSSARY</h2>
        <div class="sectioncontent">
<p>This glossary defines just a few terms, just enough so you can (hopefully) make some sense of the documentation for this suite of modules.  If you're going to do anything serious with these modules, however, you <em>should really</em> invest in a good book about the \s-1MIDI\s0 standard \*(-- see the References.</p><p><strong>channel</strong>: a logical channel to which control changes and patch changes apply, and in which \s-1MIDI\s0 (note-related) events occur.</p><p><strong>control</strong>: one of the various numeric parameters associated with a given channel.  Like S registers in Hayes-set modems, \s-1MIDI\s0 controls consist of a few well-known registers, and beyond that, it's patch-specific and/or sequencer-specific.</p><p><strong>delta-time</strong>: the time (in ticks) that a sequencer should wait between playing the previous event and playing the current event.</p><p><strong>meta-event</strong>: any of a mixed bag of events whose common trait is merely that they are similarly encoded.  Most meta-events apply to all channels, unlike events, which mostly apply to just one channel.</p><p><strong>note</strong>: my oversimplistic term for items in a score structure.</p><p><strong>opus</strong>: the term I prefer for a piece of music, as represented in \s-1MIDI\s0.  Most specs use the term \*(L"song\*(R", but I think that this falsely implies that \s-1MIDI\s0 files represent vocal pieces.</p><p><strong>patch</strong>: an electronic model of the sound of a given notional instrument.</p><p><strong>running status</strong>: a form of modest compression where an event lacking an event command byte (a \*(L"status\*(R" byte) is to be interpreted as having the same event command as the preceding event \*(-- which may, in turn, lack a status byte and may have to be interpreted as having the same event command as <em>its</em> previous event, and so on back.</p><p><strong>score</strong>: a structure of notes like an event structure, but where notes are represented as single items, and where timing of items is absolute from the beginning of the track, instead of being represented in delta-times.</p><p><strong>song</strong>: what some \s-1MIDI\s0 specs call a song, I call an opus.</p><p><strong>sequencer</strong>: a device or program that interprets and acts on \s-1MIDI\s0 data.  This prototypically refers to synthesizers or drum machines, but can also refer to more limited devices, such as mixers or even lighting control systems.</p><p><strong>status</strong>: a synonym for \*(L"event\*(R".</p><p><strong>sysex</strong>: a chunk of binary data encapsulated in the \s-1MIDI\s0 data stream, for whatever purpose.</p><p><strong>text event</strong>: any of the several meta-events (one of which is actually called 'text_event') that conveys text.  Most often used to just label tracks, note the instruments used for a track, or to provide metainformation about copyright, performer, and piece title and author.</p><p><strong>tick</strong>: the timing unit in a \s-1MIDI\s0 opus.</p><p><strong>variable-length encoding</strong>: an encoding method identical to what Perl calls the 'w' (\s-1BER\s0, Basic Encoding Rules) pack/unpack format for integers.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REFERENCES</h2>
        <div class="sectioncontent">
<p>Christian Braut.  <em>The Musician's Guide to Midi.</em>  \s-1ISBN\s0 0782112854. [This one is indispensible --SMB]</p><p>Langston, Peter S.  1998. \*(L"Little Music Languages\*(R", p.587-656 in: Salus, Peter H,. editor in chief, /Handbook of Programming Languages/, vol.  3.  MacMillan Technical, 1998.  [The volume it's in is probably not worth the money, but see if you can at least glance at this article anyway.  It's not often you see 70 pages written on music languages. --SMB]</p><p>I'll keep a list of other references and good stuff at the \s-1URL\s0 \*(C`http://www.speech.cs.cmu.edu/~sburke/pub/perl_midi/\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 1998-2002 Sean M. Burke. All rights reserved.</p><p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Sean M. Burke \*(C`sburke@cpan.org\*(C'</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="MDOM::Token::Whitespace.3pm.html"><span aria-hidden="true">&larr;</span> MDOM::Token::Whitespace.3pm: Tokens representing ordinary white space</a></li>
   <li class="next"><a href="MIDI::Event.3pm.html">MIDI::Event.3pm: Midi events <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
