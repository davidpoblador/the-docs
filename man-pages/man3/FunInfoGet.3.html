<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FunInfoGet: Get information from funtools struct</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Get information from funtools struct">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="FunInfoGet (3) manual">
  <meta name="twitter:description" content="Get information from funtools struct">
  <meta name="twitter:image" content="https://www.carta.tech/images/libfuntools-dev-FunInfoGet-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/FunInfoGet.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="FunInfoGet (3) manual" />
  <meta property="og:description" content="Get information from funtools struct" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libfuntools-dev-FunInfoGet-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">FunInfoGet<small> (3)</small></h1>
        <p class="lead">Get information from funtools struct</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/FunInfoGet.3.html">
      <span itemprop="name">FunInfoGet: Get information from funtools struct</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libfuntools-dev/">
      <span itemprop="name">libfuntools-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/FunInfoGet.3.html">
      <span itemprop="name">FunInfoGet: Get information from funtools struct</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  #include &lt;funtools.h&gt;
</pre>
<p>  int FunInfoGet(Fun fun, int type, char *addr, ...)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong></strong><strong>FunInfoGet()</strong><strong></strong> routine returns information culled from the Funtools structure.  The first argument is the Fun handle from which information is to be retrieved.  This first required argument is followed by a variable length list of pairs of arguments. Each pair consists of an integer representing the type of information to retrieve and the address where the information is to be stored. The list is terminated by a 0. The routine returns the number of get actions performed.</p><p>The full list of available information is described below.  Please note that only a few of these will be useful to most application developers. For imaging applications, the most important types are:</p><p>  FUN_SECT_DIM1   int  /* dim1 for section */   FUN_SECT_DIM2   int  /* dim2 for section */   FUN_SECT_BITPIX int  /* bitpix for section */</p><p>These would be used to determine the dimensions and data type of image data retrieved using the <em>FunImageGet()</em> routine. For example:</p><p>  /* extract and bin the data section into an image buffer */   buf = FunImageGet(fun, NULL, NULL);   /* get required information from funtools structure.      this should come after the FunImageGet() call, in case the call      changed sect_bitpix */   FunInfoGet(fun,              FUN_SECT_BITPIX,  &bitpix,              FUN_SECT_DIM1,    &dim1,              FUN_SECT_DIM2,    &dim2,              0);   /* loop through pixels and reset values below limit to value */   for(i=0; i&lt;dim1*dim2; i++){     switch(bitpix){     case 8:       if( cbuf[i] &lt;= blimit ) cbuf[i] = bvalue;     ...   }</p><p>It is important to bear in mind that the call to <em>FunImageGet()</em> can change the value of \s-1FUN_SECT_BITPIX\s0 (e.g. if \*(L"bitpix=n\*(R" is passed in the param list).  Therefore, a call to <em>FunInfoGet()</em> should be made <strong>after</strong> the call to <em>FunImageGet()</em>, in order to retrieve the updated bitpix value. See the imblank example code for more details.</p><p>It also can be useful to retrieve the World Coordinate System information from the Funtools structure. Funtools uses the the \s-1WCS\s0 Library developed by Doug Mink at \s-1SAO\s0, which is available here. (More information about the WCSTools project in general can be found here.) The <em>FunOpen()</em> routine initializes two \s-1WCS\s0 structures that can be used with this \s-1WCS\s0 Library. Applications can retrieve either of these two \s-1WCS\s0 structures using <strong></strong><strong>FunInfoGet()</strong><strong></strong>:</p><p>  FUN_WCS  struct WorldCoor * /* wcs structure, for image coordinates*/   FUN_WCS0 struct WorldCoor * /* wcs structure, for physical coordinates */</p><p>The structure retrieved by \s-1FUN_WCS\s0 is a \s-1WCS\s0 library handle containing parameters suitable for use with image coordinates, regardless of whether the data are images or tables. For this structure, the \s-1WCS\s0 reference point (\s-1CRPIX\s0) has been converted to image coordinates if the underlying file is a table (and therefore in physical coordinates). You therefore must ensure that the positions being passed to a routine like pix2wcs are in image coordinates. The \s-1FUN_WCS0\s0 structure has not had its \s-1WCS\s0 reference point converted to image coordinates. It therefore is useful when passing processing physical coordinates from a table.</p><p>Once a \s-1WCS\s0 structure has been retrieved, it can be used as the first argument to the \s-1WCS\s0 library routines. (If the structure is \s-1NULL\s0, no \s-1WCS\s0 information was contained in the file.) The two important \s-1WCS\s0 routines that Funtools uses are:</p><p>  #include &lt;wcs.h&gt   void pix2wcs (wcs,xpix,ypix,xpos,ypos)     struct WorldCoor *wcs; /* World coordinate system structure */     double xpix,ypix;      /* x and y coordinates in pixels */     double *xpos,*ypos;    /* RA and Dec in degrees (returned) */</p><p>which converts pixel coordinates to sky coordinates, and:</p><p>  void wcs2pix (wcs, xpos, ypos, xpix, ypix, offscl)     struct WorldCoor *wcs; /* World coordinate system structure */     double xpos,ypos;      /* World coordinates in degrees */     double *xpix,*ypix;    /* coordinates in pixels */     int *offscl;           /* 0 if within bounds, else off scale */</p><p>which converts sky coordinates to pixel coordinates. Again, please note that the wcs structure returned by \s-1FUN_WCS\s0 assumes that image coordinates are passed to the pix2wcs routine, while \s-1FUN_WCS0\s0 assumes that physical coordinates are passed.</p><p>Note that funtools.h file automatically includes wcs.h.  An example program that utilizes these \s-1WCS\s0 structure to call \s-1WCS\s0 Library routines is twcs.c.</p><p>The following is the complete list of information that can be returned:</p><p>  name            type            comment   ---------       --------        ---------------------------------------------   FUN_FNAME     char *            /* file name */   FUN_GIO       GIO               /* gio handle */   FUN_HEADER    FITSHead          /* fitsy header struct */   FUN_TYPE      int               /* TY_TABLE,TY_IMAGE,TY_EVENTS,TY_ARRAY */   FUN_BITPIX    int               /* bits/pixel in file */   FUN_MIN1      int               /* tlmin of axis1 -- tables */   FUN_MAX1      int               /* tlmax of axis1 -- tables */   FUN_MIN2      int               /* tlmin of axis2 -- tables */   FUN_MAX2      int               /* tlmax of axis2 -- tables */   FUN_DIM1      int               /* dimension of axis1 */   FUN_DIM2      int               /* dimension of axis2 */   FUN_ENDIAN    int               /* 0=little, 1=big endian */   FUN_FILTER    char *            /* supplied filter */   FUN_IFUN      FITSHead          /* pointer to reference header */   FUN_IFUN0     FITSHead          /* same as above, but no reset performed */   /* image information */   FUN_DTYPE     int               /* data type for images */   FUN_DLEN      int               /* length of image in bytes */   FUN_DPAD      int               /* padding to end of extension */   FUN_DOBLANK   int               /* was blank keyword defined? */   FUN_BLANK     int               /* value for blank */   FUN_SCALED    int               /* was bscale/bzero defined? */   FUN_BSCALE    double            /* bscale value */   FUN_BZERO     double            /* bzero value */   /* table information */   FUN_NROWS     int               /* number of rows in file (naxis2) */   FUN_ROWSIZE   int               /* size of user row struct */   FUN_BINCOLS   char *            /* specified binning columns */   FUN_OVERFLOW  int               /* overflow detected during binning? */   /* array information */   FUN_SKIP      int               /* bytes to skip in array header */   /* section information */   FUN_SECT_X0   int               /* low dim1 value of section */   FUN_SECT_X1   int               /* hi dim1 value of section */   FUN_SECT_Y0   int               /* low dim2 value of section */   FUN_SECT_Y1   int               /* hi dim2 value of section */   FUN_SECT_BLOCK int              /* section block factor */   FUN_SECT_BTYPE int              /* 's' (sum), 'a' (average) for binning */   FUN_SECT_DIM1 int               /* dim1 for section */   FUN_SECT_DIM2 int               /* dim2 for section */   FUN_SECT_BITPIX int             /* bitpix for section */   FUN_SECT_DTYPE int              /* data type for section */   FUN_RAWBUF    char *            /* pointer to raw row buffer */   FUN_RAWSIZE   int               /* byte size of raw row records */   /* column  information */   FUN_NCOL      int               /* number of row columns defined */   FUN_COLS      FunCol            /* array of row columns */   /* WCS information */   FUN_WCS       struct WorldCoor * /* wcs structure, converted for images*/   FUN_WCS0      struct WorldCoor * /* wcs structure, not converted */</p><p>Row applications would not normally need any of this information. An example of how these values can be used in more complex programs is the evnext example code. In this program, the time value for each row is changed to be the value of the succeeding row. The program thus reads the time values for a batch of rows, changes the time values to be the value for the succeeding row, and then merges these changed time values back with the other columns to the output file. It then reads the next batch, etc.</p><p>This does not work for the last row read in each batch, since there is no succeeding row until the next batch is read. Therefore, the program saves that last row until it has read the next batch, then processes the former before starting on the new batch. In order to merge the last row successfully, the code uses \s-1FUN_RAWBUF\s0 to save and restore the raw input data associated with each batch of rows. Clearly, this requires some information about how funtools works internally. We are happy to help you write such programs as the need arises.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO FunInfoGet&hellip;</h2>
        <div class="sectioncontent">
<p>See <a href="../man7/funtools.7.html"><strong>funtools</strong>(7)</a> for a list of Funtools help pages</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="FunImageRowPut.3.html"><span aria-hidden="true">&larr;</span> FunImageRowPut.3: Put row(s) of an image</a></li>
   <li class="next"><a href="FunInfoPut.3.html">FunInfoPut.3: Put information into a funtools struct <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
