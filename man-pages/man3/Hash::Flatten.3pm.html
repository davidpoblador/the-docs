<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hash::Flatten: Flatten/unflatten complex data hashes</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Flatten/unflatten complex data hashes">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Hash::Flatten (3pm) manual">
  <meta name="twitter:description" content="Flatten/unflatten complex data hashes">
  <meta name="twitter:image" content="https://www.carta.tech/images/libhash-flatten-perl-Hash::Flatten-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Hash::Flatten.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Hash::Flatten (3pm) manual" />
  <meta property="og:description" content="Flatten/unflatten complex data hashes" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libhash-flatten-perl-Hash::Flatten-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Hash::Flatten<small> (3pm)</small></h1>
        <p class="lead">Flatten/unflatten complex data hashes</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Hash::Flatten.3pm.html">
      <span itemprop="name">Hash::Flatten: Flatten/unflatten complex data hashes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libhash-flatten-perl/">
      <span itemprop="name">libhash-flatten-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Hash::Flatten.3pm.html">
      <span itemprop="name">Hash::Flatten: Flatten/unflatten complex data hashes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
        # Exported functions
        use Hash::Flatten qw(:all);
        $flat_hash = flatten($nested_hash);
        $nested_hash = unflatten($flat_hash);

        # OO interface
        my $o = new Hash::Flatten({
                HashDelimiter =&gt; &apos;-&gt;&apos;,
                ArrayDelimiter =&gt; &apos;=&gt;&apos;,
                OnRefScalar =&gt; &apos;warn&apos;,
        });
        $flat_hash = $o-&gt;flatten($nested_hash);
        $nested_hash = $o-&gt;unflatten($flat_hash);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Converts back and forth between a nested hash structure and a flat hash of delimited key-value pairs. Useful for protocols that only support key-value pairs (such as \s-1CGI\s0 and DBMs).</p><h3>Functional interface</h3>
<p>Reduces a nested data-structure to key-value form.  The top-level container must be hashref.  For example:         $nested = {                 &apos;x&apos; =&gt; 1,                 &apos;y&apos; =&gt; {                         &apos;a&apos; =&gt; 2,                         &apos;b&apos; =&gt; 3                 },                 &apos;z&apos; =&gt; [                         &apos;a&apos;, &apos;b&apos;, &apos;c&apos;                 ]         }</p><p>        $flat = flatten($nested);         use Data::Dumper;         print Dumper($flat);</p><p>        $VAR1 = {                 &apos;y.a&apos; =&gt; 2,                 &apos;x&apos; =&gt; 1,                 &apos;y.b&apos; =&gt; 3,                 &apos;z:0&apos; =&gt; &apos;a&apos;,                 &apos;z:1&apos; =&gt; &apos;b&apos;,                 &apos;z:2&apos; =&gt; &apos;c&apos;         }; The \*(C`&#92;%options\*(C' hashref can be used to override the default behaviour (see \*(L"\s-1OPTIONS\s0\*(R"). The <em>unflatten()</em> routine takes the flattened hash and returns the original nested hash (see \*(L"\s-1CAVEATS\s0\*(R" though).</p>
<h3>\s-1OO\s0 interface</h3>
<p>Options can be squirreled away in an object (see \*(L"\s-1OPTIONS\s0\*(R") Flatten the structure using the options stored in the object. Unflatten the structure using the options stored in the object.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    HashDelimiter and ArrayDelimiter
  </dt>
  <dd>
    <p>By default, hash dereferences are denoted by a dot, and array dereferences are denoted by a colon. However you may change these characters to any string you want, because you don't want there to be any confusion as to which part of a string is the 'key' and which is the 'delimiter'. You may use multicharacter strings if you prefer.</p>
  </dd>
  <dt>
    OnRefScalar and OnRefRef and OnRefGlob
  </dt>
  <dd>
    <p>Behaviour if a reference of this type is encountered during flattening. Possible values are 'die', 'warn' (default behaviour but warns) or a coderef which is passed the reference and should return the flattened value. By default references to references, and references to scalars, are followed silently.</p>
  </dd>
  <dt>
    EscapeSequence
  </dt>
  <dd>
    <p>This is the character or sequence of characters that will be used to escape the hash and array delimiters. The default escape sequence is '&#92;&#92;'. The escaping strategy is to place the escape sequence in front of delimiter sequences; the escape sequence itself is escaped by replacing it with two instances.</p>
  </dd>
  <dt>
    DisableEscapes
  </dt>
  <dd>
    <p>Stop the escaping from happening.  No escape sequences will be added to flattened output, nor interpreted on the way back. <strong>\s-1WARNING:\s0</strong> If your structure has keys that contain the delimiter characters, it will not be possible to unflatten the structure correctly.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>Any blessings will be discarded during flattening, so that if you flatten an object you must re-<em>bless()</em> it on unflattening.</p><p>Note that there is no delimiter for scalar references, or references to references. If your structure to be flattened contains scalar, or reference, references these will be followed by default, i.e. \*(C`&apos;foo&apos; =&gt; &#92;&#92;&#92;&#92;&#92;&#92;$foo\*(C' will be collapsed to \*(C`&apos;foo&apos; =&gt; $foo\*(C'. You can override this behaviour using the OnRefScalar and OnRefRef constructor option.</p><p>Recursive structures are detected and cause a fatal error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Hash::Flatten&hellip;</h2>
        <div class="sectioncontent">
<p>The perlmonks site has a helpful introduction to when and why you might want to flatten a hash: http://www.perlmonks.org/index.pl?node_id=234186</p>
<dl class='dl-vertical'>
  <dt>
    CGI::Expand
  </dt>
  <dd>
    <p>Unflattens hashes using \*(L".\*(R" as a delimiter, similar to Template::Toolkit's behaviour.</p>
  </dd>
  <dt>
    Tie::MultiDim
  </dt>
  <dd>
    <p>This provides a tie interface to unflattening a data structure if you specify a \*(L"template\*(R" for the structure of the data.</p>
  </dd>
  <dt>
    \s-1MLDBM\s0
  </dt>
  <dd>
    <p>This also provides a tie interface but reduces a nested structure to key-value form by serialising the values below the top level.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>$Id: Flatten.pm,v 1.19 2009/05/09 12:42:02 jamiel Exp $</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>John Alden & P Kent &lt;cpan _at_ bbc _dot_ co _dot_ uk&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>(c) \s-1BBC\s0 2005. This program is free software; you can redistribute it and/or modify it under the \s-1GNU\s0 \s-1GPL\s0.</p><p>See the file \s-1COPYING\s0 in this distribution, or http://www.gnu.org/licenses/gpl.txt</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Hash::Case::Upper.3pm.html"><span aria-hidden="true">&larr;</span> Hash::Case::Upper.3pm: Native hash with enforced lower cased keys</a></li>
   <li class="next"><a href="Hash::Merge::Simple.3pm.html">Hash::Merge::Simple.3pm: Recursively merge two or more hashes, simply <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
