<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sg_intro: Get system statistics</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Get system statistics">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sg_intro (3) manual">
  <meta name="twitter:description" content="Get system statistics">
  <meta name="twitter:image" content="https://www.carta.tech/images/libstatgrab-dev-sg_intro-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/sg_intro.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sg_intro (3) manual" />
  <meta property="og:description" content="Get system statistics" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libstatgrab-dev-sg_intro-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sg_intro<small> (3)</small></h1>
        <p class="lead">Get system statistics</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/sg_intro.3.html">
      <span itemprop="name">sg_intro: Get system statistics</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libstatgrab-dev/">
      <span itemprop="name">libstatgrab-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/sg_intro.3.html">
      <span itemprop="name">sg_intro: Get system statistics</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
\*(T&lt;#include &lt;statgrab.h&gt;\*(T&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The statgrab library provides a cross-platform interface to getting system statistics. Each of the function calls to grab some statistics returns an array of structures. Functions which return always a fixed number of array entries (typical one) won't take an additional parameter to store the number of array entries, others will. Anyway, if the information isn't available anymore, you can call \*(T&lt;<strong>sg_get_nelements</strong>\*(T&gt;(). See the manual page for each individual function for more details on usage.</p><p>For each statistic type there are two functions available to fetch the data: \*(T&lt;<strong>sg_get_STATTYPE</strong>\*(T&gt; (e.g. \*(T&lt;<strong>sg_get_cpu_stats</strong>\*(T&gt;) and \*(T&lt;<strong>sg_get_STATTYPE_r</strong>\*(T&gt; (e.g. \*(T&lt;<strong>sg_get_cpu_stats_r</strong>\*(T&gt;). The difference between both interfaces is the ownership of the returned statistic structures: while the (well known) \*(T&lt;<strong>sg_get_cpu_stats</strong>\*(T&gt; returns a pointer to a memory area owned and controlled by the statgrab library, \*(T&lt;<strong>sg_get_cpu_stats_r</strong>\*(T&gt; will return a pointer to a memory area owned and controlled by the caller. Storage owned by the statgrab library will be reused in follow-up calls to the same statistic grabbing function within the same thread. The memory is freed when the thread ends. This could result in dangling pointers when you exchange those pointers between threads. Storage which is owned by the caller must be freed by the caller when it's not used any more.</p><p>\*(T&lt;<strong>sg_init</strong>\*(T&gt;() must be the first function you call before you start to use libstatgrab; it performs all the one-time initialisation operations that need setuid/setgid privileges. For instance, on *BSD it opens a descriptor to be able to read kernel structures later on, and on Solaris it reads the device mappings that in some cases are only accessible by root (machines with a /dev/osa). To handle this, each statgrab module has a private initialisation routine called by \*(T&lt;<strong>sg_init</strong>\*(T&gt;(). \*(T&lt;<strong>sg_init</strong>\*(T&gt;() takes an argument to tell whether initialisation errors of components shall abort the library initialisation process or not. Regardless of this value, the failing module initialisations will usually lead into (partially) unusable statistics. Once \*(T&lt;<strong>sg_init</strong>\*(T&gt;() has run, most of the other libstatgrab functions no longer need elevated privileges (some Unices require higher privileges to access command line argument of processes owned by other users, Linux doesn't deliver some network card information to unprivileged users, etc.). It is therefore a good idea to call \*(T&lt;<strong>sg_drop_privileges</strong>\*(T&gt;(), which discards setuid and setgid privileges, immediately after you call \*(T&lt;<strong>sg_init</strong>\*(T&gt;(), unless your application has a reason for needing setuid or setgid privileges.</p><p>\*(T&lt;<strong>sg_shutdown</strong>\*(T&gt;() should be the very last statgrab library function you call. You shouldn't invoke this function when any thread is still existing which had made calls to the statgrab library. If you don't invoke \*(T&lt;<strong>sg_shutdown</strong>\*(T&gt;(), it's done automatically \*(T&lt;<strong>at_exit</strong>\*(T&gt;().</p><p>Both, \*(T&lt;<strong>sg_init</strong>\*(T&gt;() and \*(T&lt;<strong>sg_shutdown</strong>\*(T&gt;() use a counter to prevent to early destruction of libstatgrab in a process where more than one component uses libstatgrab. This counter is guarded by a mutual exclusion semaphore when thread capabilities are built in.</p><p>\*(T&lt;<strong>sg_init</strong>\*(T&gt;(), \*(T&lt;<strong>sg_shutdown</strong>\*(T&gt;() and \*(T&lt;<strong>sg_drop_privileges</strong>\*(T&gt;() return SG_ERROR_NONE on success, and any other on failure.</p><p>For proper thread support, \*(T&lt;<strong>sg_lock_mutex</strong>\*(T&gt;() and \*(T&lt;<strong>sg_unlock_mutex</strong>\*(T&gt;() are available to allow locking system functions which aren't thread safe. While it's generally not the wisest idea to mix calls to the statgrab library and similar calls to the system library, it is possible to protect known unsafe functions. There's currently one system API known to be not thread-safe: accessing \*(T&lt;utmp\*(T&gt;. The other non-threadsafe functionality used by the statgrab library is the global component management during initialisation (e.g. counting the number of calls to \*(T&lt;<strong>sg_init</strong>\*(T&gt;() to prevent first call to \*(T&lt;<strong>sg_shutdown</strong>\*(T&gt;() leaves the library in an unusable status).</p><p><strong>Mutex name</strong>: statgrab</p><p><strong>Protects</strong>: statgrab library globals</p><p><strong>Mutex name</strong>: utmp</p><p><strong>Protects</strong>: accessing login records</p><p>There's currently no way to get a list of used mutex names, so beg that any author which adds more semaphores to guard implementations is fair enough to add them here.</p><p>It is the intended practice that whenever a libstatgrab function is called and subsequently fails that an appropriate error will be set. Please use \*(T&lt;<strong>sg_get_error</strong>\*(T&gt;() and associates to get informed about the individual circumstances of the error condition.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sg_intro&hellip;</h2>
        <div class="sectioncontent">
<p><strong>libstatgrab</strong>(3) <strong>sg_get_cpu_stats</strong>(3) <strong>sg_get_disk_io_stats</strong>(3) <strong>sg_get_fs_stats</strong>(3) <strong>sg_get_host_info</strong>(3) <strong>sg_get_load_stats</strong>(3) <strong>sg_get_mem_stats</strong>(3) <strong>sg_get_network_io_stats</strong>(3) <strong>sg_get_network_iface_stats</strong>(3) <strong>sg_get_page_stats</strong>(3) <strong>sg_get_process_stats</strong>(3) <strong>sg_get_swap_stats</strong>(3) <strong>sg_get_user_stats</strong>(3) <a href="../man3/sg_get_error.3.html"><strong>sg_get_error</strong>(3)</a> <a href="../man3/sg_internal-intro.3.html"><strong>sg_internal-intro</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WEBSITE</h2>
        <div class="sectioncontent">
<p>\(lahttp://www.i-scream.org/libstatgrab/\(ra</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sg_internal-intro.3.html"><span aria-hidden="true">&larr;</span> sg_internal-intro.3: Get system statistics</a></li>
   <li class="next"><a href="sg_lock_mutex.3.html">sg_lock_mutex.3: Guard not mt-safe system api <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
