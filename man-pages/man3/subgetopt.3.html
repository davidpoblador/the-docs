<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>subgetopt: Get option character from command line</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Get option character from command line">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="subgetopt (3) manual">
  <meta name="twitter:description" content="Get option character from command line">
  <meta name="twitter:image" content="https://www.carta.tech/images/qmail-subgetopt-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/subgetopt.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="subgetopt (3) manual" />
  <meta property="og:description" content="Get option character from command line" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/qmail-subgetopt-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">subgetopt<small> (3)</small></h1>
        <p class="lead">Get option character from command line</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/subgetopt.3.html">
      <span itemprop="name">subgetopt: Get option character from command line</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/qmail/">
      <span itemprop="name">qmail</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/subgetopt.3.html">
      <span itemprop="name">subgetopt: Get option character from command line</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;subgetopt.h&gt;</strong></p><p>char *<strong>sgoptarg</strong>;</p><p>int <strong>sgoptind</strong>;</p><p>int <strong>sgoptpos</strong>;</p><p>int <strong>sgoptdone</strong>;</p><p>int <strong>sgoptproblem</strong>;</p><p>int <strong>sgopt(</strong><em>argc,argv,opts</em><strong>)</strong>;</p><p>int <em>argc</em>;</p><p>char **<em>argv</em>;</p><p>char *<em>opts</em>;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>sgopt</strong> returns the next valid command-line option character from <em>argv</em>.</p><p>Valid option characters are listed in the <em>opts</em> string. <em>opts</em> may be empty. A character in <em>opts</em> may be followed by a colon, in which case it takes an <em>option argument</em>. Avoid using the characters ?, :, and - as option characters.</p><p>Below <em>option argument</em> is abbreviated as <em>optarg</em> and <em>command-line argument</em> is abbreviated as <em>cmdarg</em>.</p><p>Options are listed in cmdargs which begin with a minus sign. Several options which do not take optargs may be combined into one cmdarg.</p><p>An option which takes an optarg may be handled in two ways. If it appears at the very end of a cmdarg, then the entire next cmdarg is the optarg. But if there are any characters in the cmdarg after the option character, then those characters form the optarg. The optarg is returned in <strong>sgoptarg</strong>. Next time <strong>sgopt</strong> looks at the cmdarg which follows the optarg.</p><p>If a cmdarg does not begin with a hyphen, or if it is a lone hyphen not followed by any characters, or if it begins with two hyphens, then it terminates option processing, and <strong>sgopt</strong> returns an appropriate code. If there are two hyphens, <strong>sgopt</strong> will advance attention to the next cmdarg, so it can be called again to read further options.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROPER USAGE</h2>
        <div class="sectioncontent">
<p><strong>sgoptproblem</strong> should be used only when <strong>sgopt</strong> returns ?. <strong>sgoptind</strong> and <strong>sgoptpos</strong> are defined all the time. <strong>sgoptarg</strong> is defined all the time; it is null unless <strong>sgopt</strong> has just returned an option with optarg.</p><p><strong>sgopt</strong> is typically used as follows.</p>
<pre>
#include &lt;subgetopt.h&gt;

main(argc,argv) int argc; char **argv; { int opt;

while ((opt = sgopt(argc,argv,"a:s")) != sgoptdone)

  switch(opt) {

    case 'a':

      printf("opt a with optarg %s&#92;n",sgoptarg); break;

    case 's':

      printf("opt s with no optarg&#92;n"); break;

    case '?':

      if (argv[sgoptind] && (sgoptind &lt; argc))

        printf("illegal opt %c&#92;n",sgoptproblem);

      else

        printf("missing arg, opt %c&#92;n",sgoptproblem);

      <strong>exit</strong>(1);

  }

argv += sgoptind;

while (*argv) printf("argument %s&#92;n",*argv++);

<strong>exit</strong>(0);

}
</pre>
<p>The end of the command line is marked by either <em>argc</em>, or a null pointer in <em>argv</em>, whichever comes first. Normally these two markers coincide, so it is redundant to test for both <em>argv</em><strong>[sgoptind]</strong> and <strong>sgoptind &lt; </strong><em>argc</em>. The above code shows both tests as an illustration.</p><p><strong>Multiple option sets:</strong> One useful technique is to call <strong>sgopt</strong> with a primary <em>opts</em> until it returns EOF, then call <strong>sgopt</strong> with a secondary <em>opts</em> until it returns EOF. The user can provide primary options, then a double hyphen, and then secondary options. No special handling is needed if some or all of the options are omitted. The same technique can be used for any number of option sets in series.</p><p><strong>Multiple command lines:</strong> Before parsing a new <strong>argv</strong>, make sure to set <strong>sgoptind</strong> and <strong>sgoptpos</strong> back to 1 and 0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARSING STAGES</h2>
        <div class="sectioncontent">
<p><strong>sgopt</strong> keeps track of its position in <em>argv</em> with <strong>sgoptind</strong> and <strong>sgoptpos</strong>, which are initialized to 1 and 0. It looks at <em>argv</em><strong>[sgoptind][sgoptpos]</strong> and following characters.</p><p><strong>sgopt</strong> indicates that no more options are available by returning <strong>sgoptdone</strong>, which is initialized to <strong>SUBGETOPTDONE</strong>, which is defined as -1.</p><p><strong>sgopt</strong> begins by setting <strong>optarg</strong> to null.</p><p><strong>Ending conditions:</strong> If <em>argv</em> is null, or <strong>sgoptind</strong> is larger than <em>argc</em>, or the current cmdarg <em>argv</em><strong>[sgoptind]</strong> is null, then <strong>sgopt</strong> returns <strong>optdone</strong>.</p><p><strong>Stage one:</strong> If the current character is zero, <strong>sgopt</strong> moves to the beginning of the next cmdarg. It then checks the ending conditions again.</p><p><strong>Stage two:</strong> If the current position is the begining of the cmdarg, <strong>sgopt</strong> checks whether the current character is a minus sign. If not it returns <strong>optdone</strong>. It then moves to the next character. If that character is zero, <strong>sgopt</strong> moves back to the beginning of the cmdarg, and returns <strong>sgoptdone</strong>. If the character is a minus sign, <strong>sgopt</strong> moves to the beginning of the next cmdarg, and returns <strong>sgoptdone</strong>.</p><p><strong>Stage three:</strong> <strong>sgopt</strong> records the current character, <em>c</em>, and moves to the next character. There are three possibilities: (1) <em>c</em> is an option character without optarg in <em>opts</em>, or (2) <em>c</em> is an option character with optarg in <em>opts</em>, or (3) <em>c</em> does not appear in <em>opts</em>.</p><p>(1) If <em>c</em> appears as an option character without optarg in <em>opts</em>, <strong>sgopt</strong> returns <em>c</em>.</p><p>(2) If <em>c</em> appears as an option character with optarg in <em>opts</em>, <strong>sgopt</strong> sets <strong>sgoptarg</strong> to the current position, and moves to the next cmdarg. If <strong>sgoptarg</strong> is nonempty, <strong>sgopt</strong> returns <em>c</em>.</p><p>Then <strong>sgopt</strong> sets <strong>sgoptarg</strong> to the current cmdarg. If the current cmdarg is null, or past <em>argc</em>, <strong>sgopt</strong> sets <strong>sgoptproblem</strong> to <em>c</em> and returns ?. Otherwise <strong>sgopt</strong> moves to the next argument and returns <em>c</em>.</p><p>(2) If <em>c</em> does not appear in <em>opts</em>, <strong>sgopt</strong> sets <strong>sgoptproblem</strong> to <em>c</em> and returns ?.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX NOTE</h2>
        <div class="sectioncontent">
<p><strong>sgopt</strong> is actually a macro abbreviation for <strong>subgetopt</strong>. The external <strong>sg</strong> variables are also macros for <strong>subget</strong>. These macros are defined in <strong>&lt;subgetopt.h&gt;</strong>, unless <strong>SUBGETOPTNOSHORT</strong> is defined when <strong>&lt;subgetopt.h&gt;</strong> is included.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>subgetopt version 0.9, 931129.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Placed into the public domain by Daniel J. Bernstein.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="stzrzf.f.3.html"><span aria-hidden="true">&larr;</span> stzrzf.f.3: Stzrzf.f -</a></li>
   <li class="next"><a href="svc_destroy.3.html">svc_destroy.3: Library routines for remote procedure calls <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
