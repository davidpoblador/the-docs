<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DBIx::Simple::Examples: Examples of how to use dbix::simple</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Examples of how to use dbix::simple">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="DBIx::Simple::Examples (3pm) manual">
  <meta name="twitter:description" content="Examples of how to use dbix::simple">
  <meta name="twitter:image" content="https://www.carta.tech/images/libdbix-simple-perl-DBIx::Simple::Examples-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/DBIx::Simple::Examples.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="DBIx::Simple::Examples (3pm) manual" />
  <meta property="og:description" content="Examples of how to use dbix::simple" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libdbix-simple-perl-DBIx::Simple::Examples-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">DBIx::Simple::Examples<small> (3pm)</small></h1>
        <p class="lead">Examples of how to use dbix::simple</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/DBIx::Simple::Examples.3pm.html">
      <span itemprop="name">DBIx::Simple::Examples: Examples of how to use dbix::simple</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libdbix-simple-perl/">
      <span itemprop="name">libdbix-simple-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/DBIx::Simple::Examples.3pm.html">
      <span itemprop="name">DBIx::Simple::Examples: Examples of how to use dbix::simple</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>DBIx::Simple provides a simplified interface to \s-1DBI\s0, Perl's powerful database module.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<h3>General</h3>

<pre>
    #!/usr/bin/perl -w
    use strict;
    use DBIx::Simple;

    # Instant database with DBD::SQLite
    my $db = DBIx::Simple-&gt;connect(&apos;dbi:SQLite:dbname=file.dat&apos;)
        or die DBIx::Simple-&gt;error;

    # Connecting to a MySQL database
    my $db = DBIx::Simple-&gt;connect(
        &apos;DBI:mysql:database=test&apos;,     # DBI source specification
        &apos;test&apos;, &apos;test&apos;,                # Username and password
        { RaiseError =&gt; 1 }            # Additional options
    );

    # Using an existing database handle
    my $db = DBIx::Simple-&gt;connect($dbh);

    # Abstracted example: $db-&gt;query($query, @variables)-&gt;what_you_want;

    $db-&gt;commit or die $db-&gt;error;
</pre>

<h3>Simple Queries</h3>
<p>    $db-&gt;query(&apos;DELETE FROM foo WHERE id = ?&apos;, $id) or die $db-&gt;error;</p><p>    for (1..100) {         $db-&gt;query(             &apos;INSERT INTO randomvalues VALUES (?, ?)&apos;,             int rand(10),             int rand(10)         ) or die $db-&gt;error;     }</p><p>    $db-&gt;query(         &apos;INSERT INTO sometable VALUES (??)&apos;,         $first, $second, $third, $fourth, $fifth, $sixth     );     # (??) is expanded to (?, ?, ?, ?, ?, ?) automatically</p>
<h3>Single row queries</h3>
<p>    my ($two)          = $db-&gt;query(&apos;SELECT 1 + 1&apos;)-&gt;list;     my ($three, $four) = $db-&gt;query(&apos;SELECT 3, 2 + 2&apos;)-&gt;list;</p><p>    my ($name, $email) = $db-&gt;query(         &apos;SELECT name, email FROM people WHERE email = ? LIMIT 1&apos;,         $mail     )-&gt;list;</p><p>Or, more efficiently:</p><p>    $db-&gt;query(&apos;SELECT 1 + 1&apos;)-&gt;into(my $two);     $db-&gt;query(&apos;SELECT 3, 2 + 2&apos;)-&gt;into(my ($three, $four));</p><p>    $db-&gt;query(         &apos;SELECT name, email FROM people WHERE email = ? LIMIT 1&apos;,         $mail     )-&gt;into(my ($name, $email));</p>
<h3>Fetching all rows in one go</h3>
<p><em>One big flattened list (primarily for single column queries)</em></p><p>    my @names = $db-&gt;query(&apos;SELECT name FROM people WHERE id &gt; 5&apos;)-&gt;flat;</p><p><em>Rows as array references</em></p><p>    for my $row ($db-&gt;query(&apos;SELECT name, email FROM people&apos;)-&gt;arrays) {         print "Name: $row-&gt;[0], Email: $row-&gt;[1]&#92;n";     }</p><p><em>Rows as hash references</em></p><p>    for my $row ($db-&gt;query(&apos;SELECT name, email FROM people&apos;)-&gt;hashes) {         print "Name: $row-&gt;{name}, Email: $row-&gt;{email}&#92;n";     }</p>
<h3>Fetching one row at a time</h3>
<p><em>Rows into separate variables</em></p><p>    {         my $result = $db-&gt;query(&apos;SELECT name, email FROM people&apos;);         $result-&gt;bind(my ($name, $email));         while ($result-&gt;fetch) {             print "Name: $name, Email: $email&#92;n";         }     }</p><p>or:</p><p>    {         my $result = $db-&gt;query(&apos;SELECT name, email FROM people&apos;);         while ($result-&gt;into(my ($name, $email))) {             print "Name: $name, Email: $email&#92;n";         }     }</p><p><em>Rows as lists</em></p><p>    {         my $result = $db-&gt;query(&apos;SELECT name, email FROM people&apos;);         while (my @row = $result-&gt;list) {             print "Name: $row[0], Email: $row[1]&#92;n";         }     }</p><p><em>Rows as array references</em></p><p>    {         my $result = $db-&gt;query(&apos;SELECT name, email FROM people&apos;);         while (my $row = $result-&gt;array) {             print "Name: $row-&gt;[0], Email: $row-&gt;[1]&#92;n";         }     }</p><p><em>Rows as hash references</em></p><p>    {         my $result = $db-&gt;query(&apos;SELECT name, email FROM people&apos;);         while (my $row = $result-&gt;hash) {             print "Name: $row-&gt;{name}, Email: $row-&gt;{email}&#92;n";         }     }</p>
<h3>Building maps (also fetching all rows in one go)</h3>
<p><em>A hash of hashes</em></p><p>    my $customers =         $db         -&gt; query(&apos;SELECT id, name, location FROM people&apos;)         -&gt; map_hashes(&apos;id&apos;);</p><p>    # $customers = { $id =&gt; { name =&gt; $name, location =&gt; $location } }</p><p><em>A hash of arrays</em></p><p>    my $customers =         $db         -&gt; query(&apos;SELECT id, name, location FROM people&apos;)         -&gt; <strong>map_arrays</strong>(0);</p><p>    # $customers = { $id =&gt; [ $name, $location ] }</p><p><em>A hash of values (two-column queries)</em></p><p>    my $names =         $db         -&gt; query(&apos;SELECT id, name FROM people&apos;)         -&gt; map;</p><p>    # $names = { $id =&gt; $name }</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES WITH SQL::Interp</h2>
        <div class="sectioncontent">
<p>If you have SQL::Interp installed, you can use the semi-abstracting method \*(C`iquery\*(C'. This works just like \*(C`query\*(C', but with parts of the query interleaved with the bind arguments, passed as references.</p><p>You should read SQL::Interp. These examples are not enough to fully understand all the possibilities.</p><p>The following examples are based on the documentation of SQL::Interp.</p><p>    my $result = $db-&gt;iquery(&apos;INSERT INTO table&apos;, &#92;%item);     my $result = $db-&gt;iquery(&apos;UPDATE table SET&apos;, &#92;%item, &apos;WHERE y &lt;&gt; &apos;, &#92;2);     my $result = $db-&gt;iquery(&apos;DELETE FROM table WHERE y = &apos;, &#92;2);</p><p>    # These two select syntax produce the same result     my $result = $db-&gt;iquery(&apos;SELECT * FROM table WHERE x = &apos;, &#92;$s, &apos;AND y IN&apos;, &#92;@v);     my $result = $db-&gt;iquery(&apos;SELECT * FROM table WHERE&apos;, {x =&gt; $s, y =&gt; &#92;@v});</p><p>    for ($result-&gt;hashes) { ... }</p><p>Use a syntax highlighting editor for good visual distinction.</p><p>If you need the helper functions \*(C`sql\*(C' and \*(C`sql_type\*(C', you can import them with \*(C`use SQL::Interp;\*(C'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES WITH SQL::Abstract</h2>
        <div class="sectioncontent">
<p>If you have SQL::Abstract installed, you can use the abstracting methods \*(C`select\*(C', \*(C`insert\*(C', \*(C`update\*(C', \*(C`delete\*(C'. These work like \*(C`query\*(C', but instead of a query and bind arguments, use abstracted arguments.</p><p>You should read SQL::Abstract. These examples are not enough to fully understand all the possibilities.</p><p>The SQL::Abstract object is available (writable) through the \*(C`abstract\*(C' property.</p><p>The following examples are based on the documentation of SQL::Abstract.</p><h3>Overview</h3>
<p>If you don't like the defaults, just assign a new object:</p><p>    $db-&gt;abstract = SQL::Abstract-&gt;new(         case    =&gt; &apos;lower&apos;,         cmp     =&gt; &apos;like&apos;,         logic   =&gt; &apos;and&apos;,         convert =&gt; &apos;upper&apos;     );</p><p>If you don't assign any object, one will be created automatically using the default options. The SQL::Abstract module is loaded on demand.</p><p>    my $result = $db-&gt;select($table, &#92;@fields, &#92;%where, &#92;@order);     my $result = $db-&gt;insert($table, &#92;%fieldvals || &#92;@values);     my $result = $db-&gt;update($table, &#92;%fieldvals, &#92;%where);     my $result = $db-&gt;delete($table, &#92;%where);</p><p>    for ($result-&gt;hashes) { ... }</p>
<h3>Complete examples</h3>
<p><em>select</em></p><p>    my @tickets = $db-&gt;select(         &apos;tickets&apos;, &apos;*&apos;, {             requestor =&gt; &apos;inna&apos;,             worker    =&gt; [&apos;nwiger&apos;, &apos;rcwe&apos;, &apos;sfz&apos;],             status    =&gt; { &apos;!=&apos;, &apos;completed&apos; }         }     )-&gt;hashes;</p><p><em>insert</em></p><p>If you already have your data as a hash, inserting becomes much easier:</p><p>    $db-&gt;insert(&apos;people&apos;, &#92;%data);</p><p>Instead of:</p><p>    $db-&gt;query(         q[             INSERT             INTO people (name, phone, address, ...)             VALUES (??)         ],         @data{&apos;name&apos;, &apos;phone&apos;, &apos;address&apos;, ... }     );</p><p><em>update, delete</em></p><p>    $db-&gt;update(         &apos;tickets&apos;, {             worker    =&gt; &apos;juerd&apos;,             status    =&gt; &apos;completed&apos;         },         { id =&gt; $id }     )</p><p>    $db-&gt;delete(&apos;tickets&apos;, { id =&gt; $id });</p><p><em>where</em></p><p>The \*(C`where\*(C' method is not wrapped directly, because it doesn't generate a query and thus doesn't really have anything to do with the database module.</p><p>But using the \*(C`abstract\*(C' property, you can still easily access it:</p><p>    my $where = $db-&gt;abstract-&gt;where({ foo =&gt; $foo });</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES WITH DBIx::XHTML_Table</h2>
        <div class="sectioncontent">
<p>If you have DBIx::XHTML_Table installed, you can use the result methods \*(C`xto\*(C' and \*(C`html\*(C'.</p><p>You should read DBIx::XHTML_Table. These examples are not enough to fully understand what is going on. When reading that documentation, note that you don't have to pass hash references to DBIx::Simple's methods. It is supported, though.</p><p>DBIx::XHTML_Table is loaded on demand.</p><h3>Overview</h3>
<p>To print a simple table, all you have to do is:</p><p>    print $db-&gt;query(&apos;SELECT * FROM foo&apos;)-&gt;html;</p><p>Of course, anything that produces a result object can be used. The same thing using the abstraction method \*(C`select\*(C' would be:</p><p>    print $db-&gt;select(&apos;foo&apos;, &apos;*&apos;)-&gt;html;</p><p>A DBIx::XHTML_Table object can be generated with the \*(C`xto\*(C' (<strong>X</strong>\s-1HTML_\s0<strong>T</strong>able <strong>O</strong>bject) method:</p><p>    my $table = $db-&gt;query($query)-&gt;xto;</p>
<h3>Passing attributes</h3>
<p>DBIx::Simple sends the attributes you pass to \*(C`html\*(C' both to the constructor and the output method. This allows you to specify both \s-1HTML\s0 attributes (like \*(C`bgcolor\*(C') and options for XHTML_Table (like \*(C`no_ucfirst\*(C' and \*(C`no_indent\*(C') all at once:</p><p>    print $result-&gt;html(         tr         =&gt; { bgcolor =&gt; [ qw/silver white/ ] },         no_ucfirst =&gt; 1     );</p>
<h3>Using an XHTML_Table object</h3>
<p>Not everything can be controlled by passing attributes. For full flexibility, the XHTML_Table object can be used directly:</p><p>    my $table = $db-&gt;query($query)-&gt;xto(         tr =&gt; { bgcolor =&gt; [ qw/silver white/ ] }     );</p><p>    $table-&gt;set_group(&apos;client&apos;, 1);     $table-&gt;calc_totals(&apos;credit&apos;, &apos;%.2f&apos;);</p><p>    print $table-&gt;output({ no_ucfirst =&gt; 1 });  # note the {}!</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES WITH Text::Table</h2>
        <div class="sectioncontent">
<p>Neither neat nor pretty, but useful for debugging. Uses \s-1DBI\s0's \*(C`neat_list\*(C' method. Doesn't display column names.     &apos;1&apos;, &apos;Camel&apos;, &apos;mammal&apos;     &apos;2&apos;, &apos;Llama&apos;, &apos;mammal&apos;     &apos;3&apos;, &apos;Owl&apos;, &apos;bird&apos;     &apos;4&apos;, &apos;Juerd&apos;, undef Displays a simple table using \s-1ASCII\s0 lines.     id | animal |  type     ---+--------+-------      1 |  Camel | mammal      2 |  Llama | mammal      3 |  Owl   | bird      4 |  Juerd | Displays a simple table using \s-1ASCII\s0 lines, with an outside border.     +----+--------+--------+     | id | animal |  type  |     +----+--------+--------+     |  1 |  Camel | mammal |     |  2 |  Llama | mammal |     |  3 |  Owl   | bird   |     |  4 |  Juerd |        |     +----+--------+--------+</p><p>For \*(C`table\*(C' and \*(C`box\*(C', you need Anno Siegel's Text::Table module installed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>There is no license. This software was released into the public domain. Do with it what you want, but on your own risk. The author disclaims any responsibility.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Juerd Waalboer &lt;juerd@cpan.org&gt; &lt;http://juerd.nl/&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO DBIx::Simple::Examples&hellip;</h2>
        <div class="sectioncontent">
<p>DBIx::Simple, SQL::Abstract</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="DBIx::Simple::Comparison.3pm.html"><span aria-hidden="true">&larr;</span> DBIx::Simple::Comparison.3pm: Dbix::simple in dbi jargon</a></li>
   <li class="next"><a href="DB_File::Lock.3pm.html">DB_File::Lock.3pm: Locking with flock wrapper for db_file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
