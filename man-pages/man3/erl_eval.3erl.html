<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>erl_eval: The erlang meta interpreter</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The erlang meta interpreter">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="erl_eval (3erl) manual">
  <meta name="twitter:description" content="The erlang meta interpreter">
  <meta name="twitter:image" content="https://www.carta.tech/images/erlang-manpages-erl_eval-3erl.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3erl/erl_eval.3erl.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="erl_eval (3erl) manual" />
  <meta property="og:description" content="The erlang meta interpreter" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/erlang-manpages-erl_eval-3erl.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">erl_eval<small> (3erl)</small></h1>
        <p class="lead">The erlang meta interpreter</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/erl_eval.3erl.html">
      <span itemprop="name">erl_eval: The erlang meta interpreter</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/erlang-manpages/">
      <span itemprop="name">erlang-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3erl/erl_eval.3erl.html">
      <span itemprop="name">erl_eval: The erlang meta interpreter</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This module provides an interpreter for Erlang expressions. The expressions are in the abstract syntax as returned by <strong></strong><em>erl_parse</em>, the Erlang parser, or <strong></strong><em>io</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATA TYPES</h2>
        <div class="sectioncontent">

<pre>
<strong>bindings()</strong> = [{<strong>name()</strong>, <strong>value()</strong>}]

</pre>

<pre>
<strong>binding_struct()</strong> = <strong>orddict:orddict()</strong>

</pre>
<p>A binding structure.</p>
<pre>
<strong>expression()</strong> = <strong>erl_parse:abstract_expr()</strong>

</pre>

<pre>
<strong>expressions()</strong> = [<strong>erl_parse:abstract_expr()</strong>]

</pre>
<p>As returned by <strong></strong><em>erl_parse:parse_exprs/1</em> or <strong></strong><em>io:parse_erl_exprs/2</em>.</p>
<pre>
<strong>expression_list()</strong> = [<strong>expression()</strong>]

</pre>

<pre>
<strong>func_spec()</strong> = {Module :: module(), Function :: atom()}

            | function()

</pre>

<pre>
<strong>lfun_eval_handler()</strong> =

    fun((Name :: atom(),

         Arguments :: <strong>expression_list()</strong>,

         Bindings :: <strong>binding_struct()</strong>) -&gt;

            {value,

             Value :: <strong>value()</strong>,

             NewBindings :: <strong>binding_struct()</strong>})

</pre>

<pre>
<strong>lfun_value_handler()</strong> =

    fun((Name :: atom(), Arguments :: [term()]) -&gt;

            Value :: <strong>value()</strong>)

</pre>

<pre>
<strong>local_function_handler()</strong> = {value, <strong>lfun_value_handler()</strong>}

                         | {eval, <strong>lfun_eval_handler()</strong>}

                         | none

</pre>
<p>Further described <strong>below.</strong></p>
<pre>
<strong>name()</strong> = term()

</pre>

<pre>
<strong>nlfun_handler()</strong> =

    fun((FuncSpec :: <strong>func_spec()</strong>, Arguments :: [term()]) -&gt; term())

</pre>

<pre>
<strong>non_local_function_handler()</strong> = {value, <strong>nlfun_handler()</strong>} | none

</pre>
<p>Further described <strong>below.</strong></p>
<pre>
<strong>value()</strong> = term()

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPORTS</h2>
        <div class="sectioncontent">

<pre>
<strong></strong>
exprs(Expressions, Bindings) -&gt; {value, Value, NewBindings}

</pre>

<pre>
<strong></strong>
exprs(Expressions, Bindings, LocalFunctionHandler) -&gt;
<strong></strong>
         {value, Value, NewBindings}

</pre>

<pre>
<strong></strong>
exprs(Expressions,
<strong></strong>
      Bindings,
<strong></strong>
      LocalFunctionHandler,
<strong></strong>
      NonLocalFunctionHandler) -&gt;
<strong></strong>
         {value, Value, NewBindings}

</pre>
<p>Types:</p><p>Expressions = <strong>expressions()</strong></p><p>Bindings = <strong>binding_struct()</strong></p><p>LocalFunctionHandler = <strong>local_function_handler()</strong></p><p>NonLocalFunctionHandler = <strong>non_local_function_handler()</strong></p><p>Value = <strong>value()</strong></p><p>NewBindings = <strong>binding_struct()</strong></p><p>Evaluates <em>Expressions</em> with the set of bindings <em>Bindings</em>, where <em>Expressions</em> is a sequence of expressions (in abstract syntax) of a type which may be returned by <strong></strong><em>io:parse_erl_exprs/2</em>. See below for an explanation of how and when to use the arguments <em>LocalFunctionHandler</em> and <em>NonLocalFunctionHandler</em>.</p><p>Returns <em>{value, Value, NewBindings}</em></p>
<pre>
<strong></strong>
expr(Expression, Bindings) -&gt; {value, Value, NewBindings}

</pre>

<pre>
<strong></strong>
expr(Expression, Bindings, LocalFunctionHandler) -&gt;
<strong></strong>
        {value, Value, NewBindings}

</pre>

<pre>
<strong></strong>
expr(Expression,
<strong></strong>
     Bindings,
<strong></strong>
     LocalFunctionHandler,
<strong></strong>
     NonLocalFunctionHandler) -&gt;
<strong></strong>
        {value, Value, NewBindings}

</pre>

<pre>
<strong></strong>
expr(Expression,
<strong></strong>
     Bindings,
<strong></strong>
     LocalFunctionHandler,
<strong></strong>
     NonLocalFunctionHandler,
<strong></strong>
     ReturnFormat) -&gt;
<strong></strong>
        {value, Value, NewBindings} | Value

</pre>
<p>Types:</p><p>Expression = <strong>expression()</strong></p><p>Bindings = <strong>binding_struct()</strong></p><p>LocalFunctionHandler = <strong>local_function_handler()</strong></p><p>NonLocalFunctionHandler = <strong>non_local_function_handler()</strong></p><p>ReturnFormat = none | value</p><p>Value = <strong>value()</strong></p><p>NewBindings = <strong>binding_struct()</strong></p><p>Evaluates <em>Expression</em> with the set of bindings <em>Bindings</em>. <em>Expression</em> is an expression in abstract syntax. See below for an explanation of how and when to use the arguments <em>LocalFunctionHandler</em> and <em>NonLocalFunctionHandler</em>.</p><p>Returns <em>{value, Value, NewBindings}</em> by default. But if the <em>ReturnFormat</em> is <em>value</em> only the <em>Value</em> is returned.</p>
<pre>
<strong></strong>
expr_list(ExpressionList, Bindings) -&gt; {ValueList, NewBindings}

</pre>

<pre>
<strong></strong>
expr_list(ExpressionList, Bindings, LocalFunctionHandler) -&gt;
<strong></strong>
             {ValueList, NewBindings}

</pre>

<pre>
<strong></strong>
expr_list(ExpressionList,
<strong></strong>
          Bindings,
<strong></strong>
          LocalFunctionHandler,
<strong></strong>
          NonLocalFunctionHandler) -&gt;
<strong></strong>
             {ValueList, NewBindings}

</pre>
<p>Types:</p><p>ExpressionList = <strong>expression_list()</strong></p><p>Bindings = <strong>binding_struct()</strong></p><p>LocalFunctionHandler = <strong>local_function_handler()</strong></p><p>NonLocalFunctionHandler = <strong>non_local_function_handler()</strong></p><p>ValueList = [<strong>value()</strong>]</p><p>NewBindings = <strong>binding_struct()</strong></p><p>Evaluates a list of expressions in parallel, using the same initial bindings for each expression. Attempts are made to merge the bindings returned from each evaluation. This function is useful in the <em>LocalFunctionHandler</em>. See below.</p><p>Returns <em>{ValueList, NewBindings}</em>.</p>
<pre>
<strong></strong>
new_bindings() -&gt; binding_struct()

</pre>
<p>Returns an empty binding structure.</p>
<pre>
<strong></strong>
bindings(BindingStruct :: binding_struct()) -&gt; bindings()

</pre>
<p>Returns the list of bindings contained in the binding structure.</p>
<pre>
<strong></strong>
binding(Name, BindingStruct) -&gt; {value, value()} | unbound

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>BindingStruct = <strong>binding_struct()</strong></p><p>Returns the binding of <em>Name</em> in <em>BindingStruct</em>.</p>
<pre>
<strong></strong>
add_binding(Name, Value, BindingStruct) -&gt; binding_struct()

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>Value = <strong>value()</strong></p><p>BindingStruct = <strong>binding_struct()</strong></p><p>Adds the binding <em>Name = Value</em> to <em>BindingStruct</em>. Returns an updated binding structure.</p>
<pre>
<strong></strong>
del_binding(Name, BindingStruct) -&gt; binding_struct()

</pre>
<p>Types:</p><p>Name = <strong>name()</strong></p><p>BindingStruct = <strong>binding_struct()</strong></p><p>Removes the binding of <em>Name</em> in <em>BindingStruct</em>. Returns an updated binding structure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOCAL FUNCTION HANDLER</h2>
        <div class="sectioncontent">
<p>During evaluation of a function, no calls can be made to local functions. An undefined function error would be generated. However, the optional argument <em>LocalFunctionHandler</em> may be used to define a function which is called when there is a call to a local function. The argument can have the following formats:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{value,Func}</em>: This defines a local function handler which is called with:</p>
  </dd>

</dl>

<pre>
Func(Name, Arguments)
</pre>
<p><em>Name</em> is the name of the local function (an atom) and <em>Arguments</em> is a list of the <em>evaluated</em> arguments. The function handler returns the value of the local function. In this case, it is not possible to access the current bindings. To signal an error, the function handler just calls <em>exit/1</em> with a suitable exit value.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{eval,Func}</em>: This defines a local function handler which is called with:</p>
  </dd>

</dl>

<pre>
Func(Name, Arguments, Bindings)
</pre>
<p><em>Name</em> is the name of the local function (an atom), <em>Arguments</em> is a list of the <em>unevaluated</em> arguments, and <em>Bindings</em> are the current variable bindings. The function handler returns:</p>
<pre>
{value,Value,NewBindings}
</pre>
<p><em>Value</em> is the value of the local function and <em>NewBindings</em> are the updated variable bindings. In this case, the function handler must itself evaluate all the function arguments and manage the bindings. To signal an error, the function handler just calls <em>exit/1</em> with a suitable exit value.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>none</em>: There is no local function handler.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NON-LOCAL FUNCTION HANDLER</h2>
        <div class="sectioncontent">
<p>The optional argument <em>NonlocalFunctionHandler</em> may be used to define a function which is called in the following cases: a functional object (fun) is called; a built-in function is called; a function is called using the M:F syntax, where M and F are atoms or expressions; an operator Op/A is called (this is handled as a call to the function <em>erlang:Op/A</em>). Exceptions are calls to <em>erlang:apply/2,3</em>; neither of the function handlers will be called for such calls. The argument can have the following formats:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>{value,Func}</em>: This defines an nonlocal function handler which is called with:</p>
  </dd>

</dl>

<pre>
Func(FuncSpec, Arguments)
</pre>
<p><em>FuncSpec</em> is the name of the function on the form <em>{Module,Function}</em> or a fun, and <em>Arguments</em> is a list of the <em>evaluated</em> arguments. The function handler returns the value of the function. To signal an error, the function handler just calls <em>exit/1</em> with a suitable exit value.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><em>none</em>: There is no nonlocal function handler.</p>
  </dd>

</dl>
<p><strong></strong> Note:</p><p>For calls such as <em>erlang:apply(Fun, Args)</em> or <em>erlang:apply(Module, Function, Args)</em> the call of the non-local function handler corresponding to the call to <em>erlang:apply/2,3</em> itself--<em>Func({erlang, apply}, [Fun, Args])</em> or <em>Func({erlang, apply}, [Module, Function, Args])</em>--will never take place. The non-local function handler <em>will</em> however be called with the evaluated arguments of the call to <em>erlang:apply/2,3</em>: <em>Func(Fun, Args)</em> or <em>Func({Module, Function}, Args)</em> (assuming that <em>{Module, Function}</em> is not <em>{erlang, apply}</em>).</p><p>Calls to functions defined by evaluating fun expressions <em>"fun ... end"</em> are also hidden from non-local function handlers.</p><p>The nonlocal function handler argument is probably not used as frequently as the local function handler argument. A possible use is to call <em>exit/1</em> on calls to functions that for some reason are not allowed to be called.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Undocumented functions in <em>erl_eval</em> should not be used.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="erl_eterm.3erl.html"><span aria-hidden="true">&larr;</span> erl_eterm.3erl: Functions for erlang term construction</a></li>
   <li class="next"><a href="erl_expand_records.3erl.html">erl_expand_records.3erl: Expands records in a module <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
