<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmDiscoverServices: Discover pcp services on the network</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Discover pcp services on the network">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pmDiscoverServices (3) manual">
  <meta name="twitter:description" content="Discover pcp services on the network">
  <meta name="twitter:image" content="https://www.carta.tech/images/libpcp3-dev-pmDiscoverServices-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/pmDiscoverServices.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pmDiscoverServices (3) manual" />
  <meta property="og:description" content="Discover pcp services on the network" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libpcp3-dev-pmDiscoverServices-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmDiscoverServices<small> (3)</small></h1>
        <p class="lead">Discover pcp services on the network</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/pmDiscoverServices.3.html">
      <span itemprop="name">pmDiscoverServices: Discover pcp services on the network</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libpcp3-dev/">
      <span itemprop="name">libpcp3-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/pmDiscoverServices.3.html">
      <span itemprop="name">pmDiscoverServices: Discover pcp services on the network</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">C SYNOPSIS</h2>
        <div class="sectioncontent">
<p>#include &lt;pcp/pmapi.h&gt;</p>
<pre>
int pmDiscoverServices(const char *<em>service</em>, const char *<em>mechanism</em>, const char *<em>globalOptions</em>, char ***<em>urls</em>);
</pre>
<p>cc ... -lpcp</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Given a PCP service name, as identified by <em>service</em>, and using the type of discovery optionally specified in <em>mechanism</em>, <strong>pmDiscoverServices</strong> returns, via <em>urls</em>, a list of URLs representing the services discovered on the network.</p><p><em>service</em> specifies the PCP service to be discovered. Currently supported services are <strong>PM_SERVER_SERVICE_SPEC,</strong> <strong>PM_PROXY_SERVICE_SPEC</strong> and <strong>PM_WEBD_SERVICE_SPEC,</strong> which search for <a href="../man1/pmcd.1.html"><strong>pmcd</strong>(1)</a>, <a href="../man1/pmproxy.1.html"><strong>pmproxy</strong>(1)</a>, and <a href="../man1/pmwebd.1.html"><strong>pmwebd</strong>(1)</a>, servers respectively.</p><p><em>mechanism</em> specifies the style of discovery to be used.</p><p>The currently supported mechanisms are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>avahi</strong></p>
  </dt>
  <dd>
    <p>This searches for services which are broadcasting using mDNS via <a href="../man8/avahi-daemon.8.html"><strong>avahi-daemon</strong>(8)</a>. An optional suffix <strong>",timeout=NNNN"</strong> may be added to specify the discovery timeout, in floating-point multiples of one second.  The default timeout is 0.5 seconds, which may be overridden by the <strong>AVAHI_DISCOVERY_TIMEOUT</strong> environment variable, also specified in floating-point multiples of one second.</p>
  </dd>
  <dt>
    <p><strong>probe=&lt;net-address&gt;/&lt;mask-bits&gt;</strong></p>
  </dt>
  <dd>
    <p>Actively probes the given subnet for the requested PCP service(s). &lt;net-address&gt; is an inet or ipv6 network address and &lt;mask-bits&gt; is the number of bits used to define the subnet. For example, 192.168.1.0/24 defines an 8 bit subnet consisting of the addresses 192.168.1.0 through 192.168.1.255. An optional suffix <strong>",maxThreads=N"</strong> may be added to limit the number of threads used while probing. The default is no fixed limit, which is to say that the process' rlimits for the number of threads and open file descriptors will be respected.</p>
  </dd>

</dl>
<p><em>mechanism</em> may also be NULL, which means to use all available discovery mechanisms.</p><p><em>globalOptions</em> is a string containing options to be applied to the entire discovery process. Currently, the only supported option is <strong>"resolve"</strong>. Normally the results are reported as a list of urls containing the network addresses of the discovered servers. The <strong>"resolve"</strong> option requests that an attempt be made to resolve these addresses. If successful, the host name will be reported instead. If unsuccessful, then the address will be reported.</p><p><strong>pmDiscoverServices</strong> will return the number of services discovered, else a value less than zero for an error. The value zero indicates that no services were discovered.</p><p>The resulting list of pointers, <em>urls</em>, <strong>and</strong> the values (the URLs) that the pointers reference will have been allocated by <strong>pmDiscoverServices</strong> with a single call to <strong>malloc</strong>(3C), and it is the responsibility of the <strong>pmDiscoverServices</strong> caller to <strong>free</strong>(<strong>.IR</strong>urls<strong>)</strong> to release the space when it is no longer required.</p><p>When an error occurs, or no services are discovered, <em>urls</em> is undefined (no space will have been allocated, and so calling <strong>free</strong>(3C) is a singularly bad idea).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PCP ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <a href="../man5/pcp.conf.5.html"><strong>pcp.conf</strong>(5)</a>. Values for these variables may be obtained programmatically using the <a href="../man3/pmGetConfig.3.html"><strong>pmGetConfig</strong>(3)</a> function.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pmDiscoverServices&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/PMAPI.3.html"><strong>PMAPI</strong>(3)</a>, <a href="../man1/pmcd.1.html"><strong>pmcd</strong>(1)</a>, <a href="../man1/pmproxy.1.html"><strong>pmproxy</strong>(1)</a>, <a href="../man1/pmwebd.1.html"><strong>pmwebd</strong>(1)</a>, <a href="../man1/pmfind.1.html"><strong>pmfind</strong>(1)</a>, <a href="../man3/pmGetConfig.3.html"><strong>pmGetConfig</strong>(3)</a>, <a href="../man5/pcp.conf.5.html"><strong>pcp.conf</strong>(5)</a>, <a href="../man5/pcp.env.5.html"><strong>pcp.env</strong>(5)</a> and <a href="../man8/avahi-daemon.8.html"><strong>avahi-daemon</strong>(8)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>EOPNOTSUPP</strong>
  </dt>
  <dd>
    <p>The specified <em>mechanism</em> is not supported.</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pmDestroyContext.3.html"><span aria-hidden="true">&larr;</span> pmDestroyContext.3: Destroy a pmapi context</a></li>
   <li class="next"><a href="pmDupContext.3.html">pmDupContext.3: Duplicate a pmapi context <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
