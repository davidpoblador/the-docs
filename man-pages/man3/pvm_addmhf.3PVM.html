<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pvm_addmhf: Install or remove message-handler functions.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Install or remove message-handler functions.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pvm_addmhf (3PVM) manual">
  <meta name="twitter:description" content="Install or remove message-handler functions.">
  <meta name="twitter:image" content="https://www.carta.tech/images/pvm-dev-pvm_addmhf-3PVM.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3PVM/pvm_addmhf.3PVM.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pvm_addmhf (3PVM) manual" />
  <meta property="og:description" content="Install or remove message-handler functions." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pvm-dev-pvm_addmhf-3PVM.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pvm_addmhf<small> (3PVM)</small></h1>
        <p class="lead">Install or remove message-handler functions.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3PVM/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3PVM/pvm_addmhf.3PVM.html">
      <span itemprop="name">pvm_addmhf: Install or remove message-handler functions.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pvm-dev/">
      <span itemprop="name">pvm-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3PVM/pvm_addmhf.3PVM.html">
      <span itemprop="name">pvm_addmhf: Install or remove message-handler functions.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
C	int mhid = pvm_addmhf( int src, int tag, int ctx, int (*func)(int mid) )

	int info = pvm_delmhf( int mhid )


Fortran	Not available
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    src
  </dt>
  <dd>
    <p>The tid of the sender.</p>
  </dd>
  <dt>
    tag
  </dt>
  <dd>
    <p>The tag sent with the message.</p>
  </dd>
  <dt>
    ctx
  </dt>
  <dd>
    <p>The context sent with the message.</p>
  </dd>
  <dt>
    func
  </dt>
  <dd>
    <p>Function to call when message received.</p>
  </dd>
  <dt>
    mhid
  </dt>
  <dd>
    <p>Message handler id.</p>
  </dd>
  <dt>
    info
  </dt>
  <dd>
    <p>Result code.</p>
  </dd>
  <dt>
    mid
  </dt>
  <dd>
    <p>Message buffer identifier for new active receive buffer.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>pvm_addmhf specifies a function that will be called whenever libpvm copies in a message whose header fields of <em>src</em>, <em>tag</em>, and <em>ctx</em> match those provided to pvm_addmhf().</p><p>The src and tag fields may be left unspecified (wildcard) by setting to -1.</p><p>The calling sequence of the message handler function is:</p>
<pre>
	int handler( int mid )
</pre>
<p>Where <em>mid</em> is the bufid of the received message. The handler function can be used to unpack and process the received message buffer. PVM automatically saves the current send and receive buffers, so the handler need not worry about interfering with message buffers in the regular program flow.  PVM also sets the current receive buffer to the received message (using pvm_setrbuf()) before invoking the message handler, so the message can be unpacked directly.  PVM will free this message buffer when the message handler returns, if the handler has not already done so.  But, any other message buffers created by the handler routine should be freed using pvm_freebuf() before returning.</p><p>Note: Operation in the message handler context is somewhat restricted. The function may call some PVM functions, but not others. For example, it may compose and send a reply message as shown:</p>
<pre>
	pvm_packf( "%+ %s", PvmDataDefault, "got your message" );
	pvm_send( tid, tag );
	pvm_freebuf( pvm_setsbuf( 0 ) );
</pre>
<p>or equivalently:</p>
<pre>
	pvm_setsbuf( pvm_mkbuf( PvmDataDefault ) );
	pvm_pkstr( "got your message" );
	pvm_send( tid, tag );
	pvm_freebuf( pvm_setsbuf( 0 ) );
</pre>
<p>but is not allowed to call certain other PVM communication functions, such as multicast or receive.</p><p>pvm_addmhf returns the id number of the newly created message handler if successful; this number may be passed to pvm_delmhf to remove the entry. There is no guarantee to the ordering of id values returned by pvm_addmhf, or to the order in which message handlers will be invoked. PvmExists is returned if the handler already exists.</p><p>pvm_delmhf returns PvmOk if successful. PvmBadParam if pvm_delmhf is passed a negative id value. PvmNotFound if the id value is not found.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
	/* Print a message when hosts are added to virtual machine */

	int
	hostAdded( int mid )
	{
		int n;
		pvm_unpackf( "%d", &n );
		printf( "*** %d new hosts just added ***&#92;n", n );
	}

	void
	main()
	{
		int src, tag, ctx;

		. . .

		src = -1;
		tag = 99;
		ctx = -1;

		pvm_addmhf( src, tag, ctx, hostAdded );
		pvm_notify( PvmHostAdd, 99, -1, (int *) NULL );

		. . .
	}
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>The following error conditions can be returned by pvm_addmhf():</p>
<dl class='dl-vertical'>
  <dt>
    PvmExists
  </dt>
  <dd>
    <p>Can't insert as handler already exists with same (tag, ctx, src) including "wild-cards" (those set to -1)</p>
  </dd>

</dl>
<p>The following error conditions can be returned by pvm_delmhf():</p>
<dl class='dl-vertical'>
  <dt>
    PvmBadParam
  </dt>
  <dd>
    <p>Invalid (negative) <em>mhid</em> passed in.</p>
  </dd>
  <dt>
    PvmNotFound
  </dt>
  <dd>
    <p>Message handler <em>mhid</em> does not exist.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pvm_addmhf&hellip;</h2>
        <div class="sectioncontent">
<p>pvm_setrbuf(3PVM), pvm_setsbuf(3PVM), pvm_freebuf(3PVM)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pvm_addhosts.3PVM.html"><span aria-hidden="true">&larr;</span> pvm_addhosts.3PVM: Add hosts to the virtual machine.</a></li>
   <li class="next"><a href="pvm_advise.3PVM.html">pvm_advise.3PVM: Controls use of direct task-to-task routing.  [in version 3.2: replaced by pvm_setopt] <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
