<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Time::Fake: Simulate different times without changing your system clock</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Simulate different times without changing your system clock">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Time::Fake (3pm) manual">
  <meta name="twitter:description" content="Simulate different times without changing your system clock">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtime-fake-perl-Time::Fake-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Time::Fake.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Time::Fake (3pm) manual" />
  <meta property="og:description" content="Simulate different times without changing your system clock" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtime-fake-perl-Time::Fake-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Time::Fake<small> (3pm)</small></h1>
        <p class="lead">Simulate different times without changing your system clock</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Time::Fake.3pm.html">
      <span itemprop="name">Time::Fake: Simulate different times without changing your system clock</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtime-fake-perl/">
      <span itemprop="name">libtime-fake-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Time::Fake.3pm.html">
      <span itemprop="name">Time::Fake: Simulate different times without changing your system clock</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Pretend we are running 1 day in the future:</p>
<pre>
  use Time::Fake &apos;+1d&apos;;
</pre>
<p>Pretend we are running 1 year in the past:</p><p>  use Time::Fake &apos;-1y&apos;;</p><p>Pretend the script started at epoch time 1234567:</p><p>  use Time::Fake 1234567;</p><p>See what an existing script would do if run 20 years in the future:</p><p>  % perl -MTime::Fake="+20y" test.pl</p><p>Run a section of code in a time warp:</p><p>  use Time::Fake;</p><p>  # do some setup</p><p>  Time::Fake-&gt;offset("+1y");   run_tests(); # thinks it&apos;s a year ahead</p><p>  Time::Fake-&gt;reset; # back to the present</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Use this module to achieve the effect of changing your system clock, but without actually changing your system clock. It overrides the Perl builtin subs \*(C`time\*(C', \*(C`localtime\*(C', and \*(C`gmtime\*(C', causing them to return a \*(L"faked\*(R" time of your choice. From the script's point of view, time still flows at the normal rate, but it is just offset as if it were executing in the past or present.</p><p>You may find this module useful in writing test scripts for code that has time-sensitive logic.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<h3>Using and importing:</h3>
<p>  use Time::Fake $t;</p><p>Is equivalent to:</p><p>  use Time::Fake;   Time::Fake-&gt;offset($t);</p><p>See below for arguments to \*(C`offset\*(C'. This usage makes it easy to fake the time for existing scripts, as in:</p><p>  % perl -MTime::Fake=+1y script.pl</p>
<h3>offset</h3>
<p>  Time::Fake-&gt;offset( [$t] );</p><p>$t is either an epoch time, or a relative offset of the following form:</p><p>  +3    # 3 seconds in the future   -3s   # 3 seconds in the past   +1h   # 1 hour in the future   etc..</p><p>Relative offsets must begin with a plus or minus symbol. The supported units are:</p><p>  s second   m minute   h hour   d day (24 hours)   M month (30 days)   y year (365 days)</p><p>If $t is an epoch time, then \*(C`time\*(C', \*(C`localtime\*(C', and \*(C`gmtime\*(C' will act as though the the current time (when \*(C`offset\*(C' was called) was actually at $t epoch seconds. Otherwise, the offset $t will be added to the times returned by these builtin subs.</p><p>When $t is false, \*(C`time\*(C', \*(C`localtime\*(C', \*(C`gmtime\*(C' remain overridden, but their behavior resets to reflect the actual system time.</p><p>When $t is omitted, nothing is changed, but \*(C`offset\*(C' returns the current additive offset (in seconds). Otherwise, its return value is the <em>previous</em> offset.</p><p>\*(C`offset\*(C' may be called several times. However, <em>The effect of multiple</em> calls is \s-1NOT\s0 \s-1CUMULATIVE\s0. That is:</p><p>  Time::Fake-&gt;offset("+1h");   Time::Fake-&gt;offset("+1h");</p><p>  ## same as   # Time::Fake-&gt;offset("+1h");</p><p>  ## NOT the same as   # Time::Fake-&gt;offset("+2h");</p><p>Each call to \*(C`offset\*(C' completely cancels out the effect of any previous calls. To make the effect cumulative, use the return value of calling \*(C`offset\*(C' with no arguments:</p><p>  Time::Fake-&gt;offset("+1h");   ...   Time::Fake-&gt;offset( Time::Fake-&gt;offset + 3600 ); # add another hour</p>
<h3>reset</h3>
<p>  Time::Fake-&gt;reset;</p><p>Is the same as:</p><p>  Time::Fake-&gt;<strong>offset</strong>(0);</p><p>That is, it returns all the affected builtin subs to their default behavior \*(-- reporing the actual system time.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN CAVEATS</h2>
        <div class="sectioncontent">
<p>Time::Fake must be loaded at \*(C`BEGIN\*(C'-time (e.g., with a standard \*(C`use\*(C' statement). It must be loaded before perl <em>compiles</em> any code that uses \*(C`time\*(C', \*(C`localtime\*(C', or \*(C`gmtime\*(C'. Due to inherent limitations in overriding builtin subs, any code that was compiled before loading Time::Fake will not be affected.</p><p>Because the system clock is not being changed, only Perl code that uses \*(C`time\*(C', \*(C`localtime\*(C', or \*(C`gmtime\*(C' will be fooled about the date. In particular, the operating system is not fooled, nor are other programs. If your Perl code modifies a file for example, the file's modification time will reflect the <strong>actual</strong> (not faked) time. Along the same lines, if your Perl script obtains the time from somewhere other than the affected builtins subs (e.g., \*(C`qx/date/\*(C'), the actual (not faked) time will be reflected.</p><p>Time::Fake doesn't affect -M, -A, -C filetest operators in the way you'd probably want. These still report the <strong>actual</strong> (not faked) script start time minus file access time.</p><p>Time::Fake has not been tested with other modules that override the time builtins, e.g., Time::HiRes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Time::Fake&hellip;</h2>
        <div class="sectioncontent">
<p>Time::Warp, which uses \s-1XS\s0 to fool more of Perl.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Time::Fake is written by Mike Rosulek &lt;mike@mikero.com&gt;. Feel free to contact me with comments, questions, patches, or whatever.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2008 Mike Rosulek. All rights reserved. This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Time::Duration.3pm.html"><span aria-hidden="true">&larr;</span> Time::Duration.3pm: Rounded or exact english expression of durations</a></li>
   <li class="next"><a href="Time::Format.3pm.html">Time::Format.3pm: Easy-to-use date/time formatting. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
