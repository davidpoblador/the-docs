<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Locale::Po4a::TeX.pm: Convert tex documents and derivates from/to po files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Convert tex documents and derivates from/to po files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Locale::Po4a::TeX.pm (3pm) manual">
  <meta name="twitter:description" content="Convert tex documents and derivates from/to po files">
  <meta name="twitter:image" content="https://www.carta.tech/images/po4a-Locale::Po4a::TeX.pm-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Locale::Po4a::TeX.pm.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Locale::Po4a::TeX.pm (3pm) manual" />
  <meta property="og:description" content="Convert tex documents and derivates from/to po files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/po4a-Locale::Po4a::TeX.pm-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Locale::Po4a::TeX.pm<small> (3pm)</small></h1>
        <p class="lead">Convert tex documents and derivates from/to po files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Locale::Po4a::TeX.pm.3pm.html">
      <span itemprop="name">Locale::Po4a::TeX.pm: Convert tex documents and derivates from/to po files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/po4a/">
      <span itemprop="name">po4a</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Locale::Po4a::TeX.pm.3pm.html">
      <span itemprop="name">Locale::Po4a::TeX.pm: Convert tex documents and derivates from/to po files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The po4a (\s-1PO\s0 for anything) project goal is to ease translations (and more interestingly, the maintenance of translations) using gettext tools on areas where they were not expected like documentation.</p><p>Locale::Po4a::TeX is a module to help the translation of TeX documents into other [human] languages. It can also be used as a base to build modules for TeX-based documents.</p><p>Users should probably use the LaTeX module, which inherite from the TeX module and contains the definitions of common LaTeX commands.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TRANSLATING WITH PO4A::TEX</h2>
        <div class="sectioncontent">
<p>This module can be used directly to handle generic TeX documents. This will split your document in smaller blocks (paragraphs, verbatim blocks, or even smaller like titles or indexes).</p><p>There are some options (described in the next section) that can customize this behavior.  If this doesn't fit to your document format you're encouraged to write your own module derived from this, to describe your format's details. See the section <strong>\s-1WRITING\s0 \s-1DERIVATE\s0 \s-1MODULES\s0</strong> below, for the process description.</p><p>This module can also be customized by lines starting with \*(L"% po4a:\*(R" in the TeX file. These customizations are described in the <strong>\s-1INLINE\s0 \s-1CUSTOMIZATION\s0</strong> section.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS ACCEPTED BY THIS MODULE</h2>
        <div class="sectioncontent">
<p>These are this module's particular options:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>debug</strong>
  </dt>
  <dd>
    <p>Activate debugging for some internal mechanisms of this module. Use the source to see which parts can be debugged.</p>
  </dd>
  <dt>
    <strong>no_wrap</strong>
  </dt>
  <dd>
    <p>Comma-separated list of environments which should not be re-wrapped. Note that there is a difference between verbatim and no_wrap environments. There is no command and comments analysis in verbatim blocks. If this environment was not already registered, po4a will consider that this environment does not take any parameters.</p>
  </dd>
  <dt>
    <strong>exclude_include</strong>
  </dt>
  <dd>
    <p>Colon-separated list of files that should not be included by &#92;input and &#92;include.</p>
  </dd>
  <dt>
    <strong>definitions</strong>
  </dt>
  <dd>
    <p>The name of a file containing definitions for po4a, as defined in the <strong>\s-1INLINE\s0 \s-1CUSTOMIZATION\s0</strong> section. You can use this option if it is not possible to put the definitions in the document being translated.</p>
  </dd>
  <dt>
    <strong>verbatim</strong>
  </dt>
  <dd>
    <p>Comma-separated list of environments which should be taken as verbatim. If this environment was not already registered, po4a will consider that this environment does not take any parameters.</p>
  </dd>

</dl>
<p>Using these options permits to override the behaviour of the commands defined in the default lists.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INLINE CUSTOMIZATION</h2>
        <div class="sectioncontent">
<p>The TeX module can be customized with lines starting by <strong>% po4a:</strong>. These lines are interpreted as commands to the parser. The following commands are recognized:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>% po4a: command</strong> <em>command1</em> <strong>alias</strong> <em>command2</em>
  </dt>
  <dd>
    <p>Indicates that the arguments of the <em>command1</em> command should be treated as the arguments of the <em>command2</em> command.</p>
  </dd>
  <dt>
    <strong>% po4a: command</strong> <em>command1</em> <em>parameters</em>
  </dt>
  <dd>
    <p>This permit to describe in detail the parameters of the <em>command1</em> command. This information will be used to check the number of arguments and their types. You can precede the <em>command1</em> command by</p>
<dl class='dl-vertical'>
  <dt>
    an asterisk (<strong>*</strong>)
  </dt>
  <dd>
    <p>po4a will extract this command from paragraphs (if it is located at the beginning or the end of a paragraph). The translators will then have to translate the parameters that are marked as translatable.</p>
  </dd>
  <dt>
    a plus (<strong>+</strong>)
  </dt>
  <dd>
    <p>As for an asterisk, the command will be extracted if it appear at an extremity of a block, but the parameters won't be translated separately. The translator will have to translate the command concatenated to all its parameters. This permits to keep more context, and is useful for commands with small words in parameter, which can have multiple meanings (and translations). Note: In this case you don't have to specify which parameters are translatable, but po4a must know the type and number of parameters.</p>
  </dd>
  <dt>
    a minus (<strong>-</strong>)
  </dt>
  <dd>
    <p>In this case, the command won't be extracted from any block. But if it appears alone on a block, then only the parameters marked as translatable will be presented to the translator. This is useful for font commands.  These commands should generally not be separated from their paragraph (to keep the context), but there is no reason to annoy the translator with them if a whole string is enclosed in such a command.</p>
  </dd>

</dl>
<p>The <em>parameters</em> argument is a set of [] (to indicate an optional argument) or {} (to indicate a mandatory argument). You can place an underscore (_) between these brackets to indicate that the parameter must be translated. For example:  % po4a: command *chapter [_]{_} This indicates that the chapter command has two parameters: an optional (short title) and a mandatory one, which must both be translated. If you want to specify that the href command has two mandatory parameters, that you don't want to translate the \s-1URL\s0 (first parameter), and that you don't want this command to be separated from its paragraph (which allow the translator to move the link in the sentence), you can use:  % po4a: command -href {}{_} In this case, the information indicating which arguments must be translated is only used if a paragraph is only composed of this href command.</p>
  </dd>
  <dt>
    <strong>% po4a: environment</strong> <em>env</em> <em>parameters</em>
  </dt>
  <dd>
    <p>This permits to define the parameters accepted by the <em>env</em> environment. This information is latter used to check the number of arguments of the &#92;begin command, and permit to specify which one must be translated. The syntax of the <em>parameters</em> argument is the same as described for the commands. The first parameter of the &#92;begin command is the name of the environment. This parameter must not be specified in the list of parameters. Here are some examples:  % po4a: environment multicols {}  % po4a: environment equation As for the commands, <em>env</em> can be preceded by a plus (+) to indicate that the &#92;begin command must be translated with all its arguments. Indicates that an environment should be split according to the given regular expression. The regular expression is delimited by quotes. It should not create any backreference. You should use (?:) if you need a group. It may also need some escapes. For example, the LaTeX module uses the \*(L"(?:&|&#92;&#92;&#92;&#92;)\*(R" regular expression to translate separately each cell of a table (lines are separated by '&#92;&#92;' and cells by '&'). The notion of environment is expended to the type displayed in the \s-1PO\s0 file. This can be used to split on \*(L"&#92;&#92;&#92;&#92;\*(R" in the first mandatory argument of the title command.  In this case, the environment is title{#1}.</p>
  </dd>
  <dt>
    <strong>% po4a: verbatim environment</strong> <em>env</em>
  </dt>
  <dd>
    <p>Indicate that <em>env</em> is a verbatim environment. Comments and commands will be ignored in this environment. If this environment was not already registered, po4a will consider that this environment does not take any parameters.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WRITING DERIVATE MODULES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>pre_trans</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>post_trans</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>translate</strong>
  </dt>
  <dd>
    <p>Wrapper around Transtractor's translate, with pre- and post-processing filters. Comments of a paragraph are inserted as a \s-1PO\s0 comment for the first translated string of this paragraph.</p>
  </dd>
  <dt>
    <strong>get_leading_command</strong>($buffer)
  </dt>
  <dd>
    <p>This function returns:</p>
<dl class='dl-vertical'>
  <dt>
    A command name
  </dt>
  <dd>
    <p>If no command is found at the beginning of the given buffer, this string will be empty.  Only commands that can be separated are considered. The %separated_command hash contains the list of these commands.</p>
  </dd>
  <dt>
    A variant
  </dt>
  <dd>
    <p>This indicates if a variant is used.  For example, an asterisk (*) can be added at the end of sections command to specify that they should not be numbered.  In this case, this field will contain \*(L"*\*(R".  If there is no variant, the field is an empty string.</p>
  </dd>
  <dt>
    An array of tuples (type of argument, argument)
  </dt>
  <dd>
    <p>The type of argument can be either '{' (for mandatory arguments) or '[' (for optional arguments).</p>
  </dd>
  <dt>
    The remaining buffer
  </dt>
  <dd>
    <p>The rest of the buffer after the removal of this leading command and its arguments.  If no command is found, the original buffer is not touched and returned in this field.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <strong>get_trailing_command</strong>($buffer)
  </dt>
  <dd>
    <p>The same as <strong>get_leading_command</strong>, but for commands at the end of a buffer.</p>
  </dd>
  <dt>
    <strong>translate_buffer</strong>
  </dt>
  <dd>
    <p>Recursively translate a buffer by separating leading and trailing commands (those which should be translated separately) from the buffer. If a function is defined in %translate_buffer_env for the current environment, this function will be used to translate the buffer instead of <em>translate_buffer()</em>.</p>
  </dd>
  <dt>
    <strong>read</strong>
  </dt>
  <dd>
    <p>Overload Transtractor's read</p>
  </dd>
  <dt>
    <strong>read_file</strong>
  </dt>
  <dd>
    <p>Recursively read a file, appending included files which are not listed in the @exclude_include array.  Included files are searched using the <strong>kpsewhich</strong> command from the Kpathsea library. Except from the file inclusion part, it is a cut and paste from Transtractor's read.</p>
  </dd>
  <dt>
    <strong>parse_definition_file</strong>
  </dt>
  <dd>
    <p>Subroutine for parsing a file with po4a directives (definitions for new commands).</p>
  </dd>
  <dt>
    <strong>parse_definition_line</strong>
  </dt>
  <dd>
    <p>Parse a definition line of the form \*(L"% po4a: \*(R". See the <strong>\s-1INLINE\s0 \s-1CUSTOMIZATION\s0</strong> section for more details.</p>
  </dd>
  <dt>
    <strong>is_closed</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>parse</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>docheader</strong>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERNAL FUNCTIONS used to write derivated parsers</h2>
        <div class="sectioncontent">
<p>Command and environment functions take the following arguments (in addition to the $self object):</p>
<dl class='dl-vertical'>
  <dt>
    A command name
  </dt>
  <dd>
    
  </dd>
  <dt>
    A variant
  </dt>
  <dd>
    
  </dd>
  <dt>
    An array of (type, argument) tuples
  </dt>
  <dd>
    
  </dd>
  <dt>
    The current environment
  </dt>
  <dd>
    
  </dd>

</dl>
<p>The first 3 arguments are extracted by get_leading_command or get_trailing_command.</p><p>Command and environment functions return the translation of the command with its arguments and a new environment.</p><p>Environment functions are called when a &#92;begin command is found. They are called with the &#92;begin command and its arguments.</p><p>The TeX module only proposes one command function and one environment function: generic_command and generic_environment.</p><p>generic_command uses the information specified by register_generic_command or by adding definition to the TeX file:  % po4a: command <em>command1</em> <em>parameters</em></p><p>generic_environment uses the information specified by register_generic_environment or by adding definition to the TeX file:  % po4a: environment <em>env</em> <em>parameters</em></p><p>Both functions will only translate the parameters that were specified as translatable (with a '_'). generic_environment will append the name of the environment to the environment stack and generic_command will append the name of the command followed by an identifier of the parameter (like {#7} or [#2]).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STATUS OF THIS MODULE</h2>
        <div class="sectioncontent">
<p>This module needs more tests.</p><p>It was tested on a book and with the Python documentation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TODO LIST</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    Automatic detection of new commands
  </dt>
  <dd>
    <p>The TeX module could parse the newcommand arguments and try to guess the number of arguments, their type and whether or not they should be translated.</p>
  </dd>
  <dt>
    Translation of the environment separator
  </dt>
  <dd>
    <p>When &#92;item is used as an environment separator, the item argument is attached to the following string.</p>
  </dd>
  <dt>
    Some commands should be added to the environment stack
  </dt>
  <dd>
    <p>These commands should be specified by couples. This could allow to specify commands beginning or ending a verbatim environment.</p>
  </dd>
  <dt>
    Others
  </dt>
  <dd>
    <p>Various other points are tagged \s-1TODO\s0 in the source.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN BUGS</h2>
        <div class="sectioncontent">
<p>Various points are tagged \s-1FIXME\s0 in the source.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Locale::Po4a::TeX.pm&hellip;</h2>
        <div class="sectioncontent">
<p><em>Locale::Po4a::LaTeX</em>\|(3pm), <em>Locale::Po4a::TransTractor</em>\|(3pm), <em>po4a</em>\|(7)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">

<pre>
 Nicolas François &lt;nicolas.francois@centraliens.net&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2004, 2005 by Nicolas FRANÇOIS &lt;nicolas.francois@centraliens.net&gt;.</p><p>This program is free software; you may redistribute it and/or modify it under the terms of \s-1GPL\s0 (see the \s-1COPYING\s0 file).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Locale::Po4a::TeX.3pm.html"><span aria-hidden="true">&larr;</span> Locale::Po4a::TeX.3pm: Convert tex documents and derivates from/to po files</a></li>
   <li class="next"><a href="Locale::Po4a::Texinfo.3pm.html">Locale::Po4a::Texinfo.3pm: Convert texinfo documents and derivates from/to po files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
