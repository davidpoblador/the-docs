<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eliom_comet.Channel.server: Basic primitives needed for server push.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Basic primitives needed for server push.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Eliom_comet.Channel.server (3o) manual">
  <meta name="twitter:description" content="Basic primitives needed for server push.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libeliom-ocaml-doc-Eliom_comet.Channel.server-3o.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3o/Eliom_comet.Channel.server.3o.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Eliom_comet.Channel.server (3o) manual" />
  <meta property="og:description" content="Basic primitives needed for server push." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libeliom-ocaml-doc-Eliom_comet.Channel.server-3o.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Eliom_comet.Channel.server<small> (3o)</small></h1>
        <p class="lead">Basic primitives needed for server push.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/Eliom_comet.Channel.server.3o.html">
      <span itemprop="name">Eliom_comet.Channel.server: Basic primitives needed for server push.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libeliom-ocaml-doc/">
      <span itemprop="name">libeliom-ocaml-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3o/Eliom_comet.Channel.server.3o.html">
      <span itemprop="name">Eliom_comet.Channel.server: Basic primitives needed for server push.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Module</h2>
        <div class="sectioncontent">
<p>Module   Eliom_comet.Channel</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Documentation</h2>
        <div class="sectioncontent">
<p>Module <strong>Channel</strong>  : <strong>sig end</strong></p><p>Basic primitives needed for server push.</p><p><em>type</em> <strong>'a</strong> <em>t</em></p><p><strong>v t</strong> is the type of server-to-client communication channels transporting data of type <strong>v</strong></p><p><em>type comet_scope</em> = <strong>[ `Client_process of Eliom_common.scope_hierarchy | `Site ]</strong></p><p><em>val create</em> : <strong>?scope:[&lt; comet_scope ] -&gt;</strong> <strong>?name:string -&gt; ?size:int -&gt; 'a Lwt_stream.t -&gt; 'a t</strong></p><p><strong>create s</strong> returns a channel sending the values returned by stream <strong>s</strong> .</p><p>There are two kinds of channels created depending on the given scope (defaults to <strong>Eliom_common.comet_client_process</strong> ).</p><p>With scope <strong>Eliom_common.site_scope</strong> all users knowing the name of the channel can access it. Only one message queue is created: it is what we call a //stateless// channel in the sense that the memory used by the channel does not depend on the number of users.  The channel can be reclaimed by the GC when there is no more reference to it. The buffer channel has a limited buffer of size <strong>size</strong> (default: 1000). If the client requests too old messages, exception <strong>Eliom_coment.Channel_full</strong> will be raised (on client side).</p><p>With a scope of level <strong>Eliom_common.client_process_scope</strong> the channel can only be accessed by the user who created it. It can only be created when client process data is available (that is: during a request). The eliom service created to communicate with the client is only available in the scope of the client process. To avoid memory leak when the client do not read sent data, the channel has a limited <strong>size</strong> . When a channel is full, no data can be read from it anymore.</p><p>A channel can be used only once on client side. To be able to receive the same data multiple times on client side, use <strong>create (Lwt_stream.clone s)</strong> every time.</p><p>To enforce the limit on the buffer size, the data is read into <strong>stream</strong> as soon as possible: If you want a channel that reads data on the stream only when the client requests it, use <strong>create_unlimited</strong> instead, but be careful of memory leaks.</p><p><em>val create_unlimited</em> : <strong>?scope:Eliom_common.client_process_scope -&gt;</strong> <strong>?name:string -&gt; 'a Lwt_stream.t -&gt; 'a t</strong></p><p><strong>create_unlimited s</strong> creates a channel which does not read immediately on the stream. It is read only when the client requests it: use it if the data you send depends on the time of the request (for instance the number of unread mails). Be careful, the size of this stream is not limited: if the size of the stream increases and your clients don't read it, you may have memory leaks.</p><p><em>val create_newest</em> : <strong>?name:string -&gt; 'a Lwt_stream.t -&gt; 'a t</strong></p><p><strong>create_newest s</strong> is similar to <strong>create</strong> <strong>~scope:Eliom_common.site_scope s</strong> but only the last message is returned to the client.</p><p><em>val external_channel</em> : <strong>?history:int -&gt;</strong> <strong>?newest:bool -&gt;</strong> <strong>prefix:string -&gt; name:string -&gt; unit -&gt; 'a t</strong></p><p><strong>external_channel ~prefix ~name ()</strong> declares an external channel. The channel was created by an instance of Eliom serving the prefix <strong>prefix</strong> (the prefix configured in the &lt;site&gt; tag of the configuration file). The channel was named by <strong>name</strong> . Both servers must run the exact same version of Eliom.</p><p>The optional <strong>newest</strong> parameters tells whether the channel is a new one. If the channel is not new, <strong>history</strong> is the maximum number of messages retrieved at the first request. The default is <strong>1</strong> .</p><p><em>val wait_timeout</em> : <strong>?scope:Eliom_common.client_process_scope -&gt; float -&gt; unit Lwt.t</strong></p><p><strong>wait_timeout ~scope time</strong> waits for a period of inactivity of length <strong>time</strong> in the <strong>scope</strong> . Only activity on stateful channels is taken into accounts.</p><p>The default <strong>scope</strong> is <strong>Eliom_common.comet_client_process</strong> .</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Eliom_comet.Channel.client.3o.html"><span aria-hidden="true">&larr;</span> Eliom_comet.Channel.client.3o: No description</a></li>
   <li class="next"><a href="Eliom_comet.Configuration.client.3o.html">Eliom_comet.Configuration.client.3o: Change the reactivity of channels. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
