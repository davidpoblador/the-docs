<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ieee1284_read_control: Manipulate control lines</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manipulate control lines">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ieee1284_read_control (3) manual">
  <meta name="twitter:description" content="Manipulate control lines">
  <meta name="twitter:image" content="https://www.carta.tech/images/libieee1284-3-dev-ieee1284_read_control-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/ieee1284_read_control.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ieee1284_read_control (3) manual" />
  <meta property="og:description" content="Manipulate control lines" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libieee1284-3-dev-ieee1284_read_control-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ieee1284_read_control<small> (3)</small></h1>
        <p class="lead">Manipulate control lines</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ieee1284_read_control.3.html">
      <span itemprop="name">ieee1284_read_control: Manipulate control lines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libieee1284-3-dev/">
      <span itemprop="name">libieee1284-3-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/ieee1284_read_control.3.html">
      <span itemprop="name">ieee1284_read_control: Manipulate control lines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
#include &lt;ieee1284.h&gt;
</pre>
<p><strong>int ieee1284_read_control(struct&nbsp;parport&nbsp;*</strong><em>port</em><strong>);</strong> <strong>void ieee1284_write_control(struct&nbsp;parport&nbsp;*</strong><em>port</em><strong>, unsigned&nbsp;char&nbsp;</strong><em>ct</em><strong>);</strong> <strong>void ieee1284_frob_control(struct&nbsp;parport&nbsp;*</strong><em>port</em><strong>, unsigned&nbsp;char&nbsp;</strong><em>mask</em><strong>, unsigned&nbsp;char&nbsp;</strong><em>val</em><strong>);</strong> <strong>int ieee1284_do_nack_handshake(struct&nbsp;parport&nbsp;*</strong><em>port</em><strong>, unsigned&nbsp;char&nbsp;</strong><em>ct_before</em><strong>, unsigned&nbsp;char&nbsp;</strong><em>ct_after</em><strong>, struct&nbsp;timeval&nbsp;*</strong><em>timeout</em><strong>);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>There are four control lines, three of which are usually inverted on PC-style ports. Where they differ, libieee1284 operates on the IEEE 1284 values, not the PC-style inverted values. The control lines are represented by the following enumeration:</p>
<pre>
enum ieee1284_control_bits
{
  C1284_NSTROBE   = 0x01,
  C1284_NAUTOFD   = 0x02,
  C1284_NINIT     = 0x04,
  C1284_NSELECTIN = 0x08,
  /* To convert those values into PC-style register values, use this: */
  C1284_INVERTED = (C1284_NSTROBE|
                    C1284_NAUTOFD|
                    C1284_NSELECTIN),
};
</pre>
<p>These functions all act on the parallel port associated with <em>port</em>, which must be claimed.</p><p>The current values on the control lines are available by calling <strong>ieee1284_read_control</strong>, and may be set by calling <strong>ieee1284_write_control</strong>.</p><p>To adjust the values on a set of control lines, use <strong>ieee1284_frob_control</strong>. The effect of this can be expressed by: ctr = ((ctr & ~mask) ^ val); that is, the bits in <em>mask</em> are unset, and then those in <em>val</em> are inverted.</p><p>The special function <strong>ieee1284_do_nack_handshake</strong> is for responding very quickly in a protocol where the peripheral sets nAck and the host must respond by setting a control line. Its operation, which relies on the host machine knowing which interrupt nAck generates, is as follows:</p><p>\h'-04' 1.\h'+02'Set the control lines as indicated in <em>ct_before</em>.</p><p>\h'-04' 2.\h'+02'Wait for nAck interrupt. If <em>timeout</em> elapses, return <strong>E1284_TIMEDOUT</strong>.</p><p>\h'-04' 3.\h'+02'Set the control lines as indicated in <em>ct_after</em>.</p><p>On Linux using the ppdev driver, this is performed by the device driver in the kernel, and so is faster than normally possible in a user-space library.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>The return value of <strong>ieee1284_read_control</strong>, if non-negative, is a number representing the value on the control lines.</p><p>Possible error codes for <strong>ieee1284_read_control</strong>:</p><p><strong>E1284_NOTAVAIL</strong></p><p>The control lines of this port are not accessible by the application.</p><p><strong>E1284_INVALIDPORT</strong></p><p>The <em>port</em> parameter is invalid (for instance, perhaps it is not claimed).</p><p>Possible error codes for <strong>ieee1284_do_nack_handshake</strong>:</p><p><strong>E1284_OK</strong></p><p>The handshake was successful.</p><p><strong>E1284_NOTAVAIL</strong></p><p>This operation is not available on this port type or system. This could be because port interrupts are not available, or because the underlying device driver does not support the operation.</p><p><strong>E1284_INVALIDPORT</strong></p><p>The <em>port</em> parameter is invalid (for instance, perhaps it is not claimed).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Tim Waugh</strong> &lt;twaugh@redhat.com&gt;</p><ul>
<li><p>Author.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2001-2003 Tim Waugh</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ieee1284_open.3.html"><span aria-hidden="true">&larr;</span> ieee1284_open.3: Open a port</a></li>
   <li class="next"><a href="ieee1284_read_data.3.html">ieee1284_read_data.3: Control the data lines <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
