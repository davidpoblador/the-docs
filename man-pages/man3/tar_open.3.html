<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tar_open: Access a tar archive via a handle</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Access a tar archive via a handle">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tar_open (3) manual">
  <meta name="twitter:description" content="Access a tar archive via a handle">
  <meta name="twitter:image" content="https://www.carta.tech/images/libtar-dev-tar_open-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/tar_open.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tar_open (3) manual" />
  <meta property="og:description" content="Access a tar archive via a handle" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libtar-dev-tar_open-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tar_open<small> (3)</small></h1>
        <p class="lead">Access a tar archive via a handle</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/tar_open.3.html">
      <span itemprop="name">tar_open: Access a tar archive via a handle</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libtar-dev/">
      <span itemprop="name">libtar-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/tar_open.3.html">
      <span itemprop="name">tar_open: Access a tar archive via a handle</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;libtar.h&gt;</strong></p><p><strong>int tar_open(TAR **</strong><em>t</em><strong>, char *</strong><em>pathname</em><strong>,</strong> <strong>tartype_t *</strong><em>type</em><strong>, int </strong><em>oflags</em><strong>,</strong> <strong>int </strong><em>mode</em><strong>, int </strong><em>options</em><strong>);</strong></p><p><strong>int tar_fdopen(TAR **</strong><em>t</em><strong>, int </strong><em>fd</em><strong>,</strong> <strong>char *</strong><em>pathname</em><strong>, tartype_t *</strong><em>type</em><strong>,</strong> <strong>int </strong><em>oflags</em><strong>, int </strong><em>mode</em><strong>,</strong> <strong>int </strong><em>options</em><strong>);</strong></p><p><strong>int tar_fd(TAR *</strong><em>t");"</em></p><p><strong>int tar_close(TAR *</strong><em>t");"</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This man page documents version 1.2 of <strong>libtar</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>tar_open</strong>() function opens a tar archive file corresponding to the filename named by the <em>pathname</em> argument.  The <em>oflags</em> argument must be either <strong>O_RDONLY</strong> or <strong>O_WRONLY</strong>.</p><p>The <em>type</em> argument specifies the access methods for the given file type.  The <em>tartype_t</em> structure has members named <em>openfunc</em>, <em>closefunc</em>, <em>readfunc</em>() and <em>writefunc</em>(), which are pointers to the functions for opening, closing, reading, and writing the file, respectively.  If <em>type</em> is <em>NULL</em>, the file type defaults to a normal file, and the standard <em>open</em>(), <em>close</em>(), <em>read</em>(), and <em>write</em>() functions are used.</p><p>The <em>options</em> argument is a logical-or'ed combination of zero or more of the following:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>TAR_GNU</strong>
  </dt>
  <dd>
    <p>Use GNU extensions.</p>
  </dd>
  <dt>
    <strong>TAR_VERBOSE</strong>
  </dt>
  <dd>
    <p>Send status messages to <em>stdout</em>.</p>
  </dd>
  <dt>
    <strong>TAR_NOOVERWRITE</strong>
  </dt>
  <dd>
    <p>Do not overwrite pre-existing files.</p>
  </dd>
  <dt>
    <strong>TAR_IGNORE_EOT</strong>
  </dt>
  <dd>
    <p>Skip all-zero blocks instead of treating them as EOT.</p>
  </dd>
  <dt>
    <strong>TAR_IGNORE_MAGIC</strong>
  </dt>
  <dd>
    <p>Do not validate the magic field in file headers.</p>
  </dd>
  <dt>
    <strong>TAR_CHECK_VERSION</strong>
  </dt>
  <dd>
    <p>Check the version field in file headers.  (This field is normally ignored.)</p>
  </dd>
  <dt>
    <strong>TAR_IGNORE_CRC</strong>
  </dt>
  <dd>
    <p>Do not validate the CRC of file headers.</p>
  </dd>

</dl>
<p>The <strong>tar_open</strong>() function allocates memory for a <em>TAR</em> handle, and a pointer to the allocated memory is saved in the location specified by <em>t</em>.  The <em>TAR</em> handle may be passed to other <em>libtar</em> calls to modify the opened tar archive.  The <em>TAR</em> handle maintains all of the information about the open tar archive, including the archive <em>type</em>, <em>options</em>, and <em>oflags</em> selected when <strong>tar_open</strong>() was called.</p><p>The <em>TAR</em> handle generated by <strong>tar_open</strong>() contains a file header structure.  When reading a tar archive, this structure contains the last file header read from the tar archive.  When writing a tar archive, this structure is used as a staging area to construct the next file header to be written to the archive.  In addition, the <em>TAR</em> handle contains a hash table which is used to keep track of the device and inode information for each file which gets written to the tar archive. This is used to detect hard links, so that files do not need to be duplicated in the archive.</p><p>The <strong>tar_fdopen</strong>() function is identical to the <strong>tar_open</strong>() function, except that <em>fd</em> is used as the previously-opened file descriptor for the tar file instead of calling <em>type-&gt;openfunc</em>() to open the file.</p><p>The <strong>tar_fd</strong>() function returns the file descriptor associated with the <em>TAR</em> handle <em>t</em>.</p><p>The <strong>tar_close</strong>() function closes the file descriptor associated with the <em>TAR</em> handle <em>t</em> and frees all dynamically-allocated memory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>The <strong>tar_open</strong>(), <strong>tar_fdopen</strong>(), and <strong>tar_close</strong>() functions return 0 on success.  On failure, they return -1 and set <em>errno</em>.</p><p>The <strong>tar_fd</strong>() function returns the file descriptor associated with the <em>TAR</em> handle <em>t</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p><strong>tar_open</strong>() will fail if:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>EINVAL</strong>
  </dt>
  <dd>
    <p>The <em>oflags</em> argument was something other than <strong>O_RDONLY</strong> or <strong>O_WRONLY</strong>.</p>
  </dd>

</dl>
<p>In addition, <strong>tar_open</strong>() and <strong>tar_close</strong>() may fail if it cannot allocate memory using <strong>calloc</strong>(), or if the open or close functions for the specified tar archive <em>type</em> fail.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tar_open&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man2/open.2.html"><strong>open</strong>(2)</a>, <a href="../man2/close.2.html"><strong>close</strong>(2)</a>, <a href="../man3/calloc.3.html"><strong>calloc</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tar_extract_file.3.html"><span aria-hidden="true">&larr;</span> tar_extract_file.3: Extract files from a tar archive</a></li>
   <li class="next"><a href="tcadb.3.html">tcadb.3: The abstract database api <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
