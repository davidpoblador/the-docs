<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>libpfm_intel_ivb: Support for intel ivy bridge core pmu</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Support for intel ivy bridge core pmu">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="libpfm_intel_ivb (3) manual">
  <meta name="twitter:description" content="Support for intel ivy bridge core pmu">
  <meta name="twitter:image" content="https://www.carta.tech/images/libpfm4-dev-libpfm_intel_ivb-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/libpfm_intel_ivb.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="libpfm_intel_ivb (3) manual" />
  <meta property="og:description" content="Support for intel ivy bridge core pmu" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libpfm4-dev-libpfm_intel_ivb-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">libpfm_intel_ivb<small> (3)</small></h1>
        <p class="lead">Support for intel ivy bridge core pmu</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/libpfm_intel_ivb.3.html">
      <span itemprop="name">libpfm_intel_ivb: Support for intel ivy bridge core pmu</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libpfm4-dev/">
      <span itemprop="name">libpfm4-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/libpfm_intel_ivb.3.html">
      <span itemprop="name">libpfm_intel_ivb: Support for intel ivy bridge core pmu</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;perfmon/pfmlib.h&gt;</strong>

<strong>PMU name: ivb</strong>
<strong>PMU desc: Intel Ivy Bridge</strong>
<strong>PMU name: ivb_ep</strong>
<strong>PMU desc: Intel Ivy Bridge EP</strong>

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The library supports the Intel Ivy Bridge core PMU. It should be noted that this PMU model only covers each core's PMU and not the socket level PMU.</p><p>On Ivy Bridge, the number of generic counters depends on the Hyperthreading (HT) mode. When HT is on, then only 4 generic counters are available. When HT is off, then 8 generic counters are available. The <strong>pfm_get_pmu_info()</strong> function returns the maximum number of generic counters in <strong>num_cntrs</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MODIFIERS</h2>
        <div class="sectioncontent">
<p>The following modifiers are supported on Intel Ivy Bridge processors:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>u</strong></p>
  </dt>
  <dd>
    <p>Measure at user level which includes privilege levels 1, 2, 3. This corresponds to <strong>PFM_PLM3</strong>. This is a boolean modifier.</p>
  </dd>
  <dt>
    <p><strong>k</strong></p>
  </dt>
  <dd>
    <p>Measure at kernel level which includes privilege level 0. This corresponds to <strong>PFM_PLM0</strong>. This is a boolean modifier.</p>
  </dd>
  <dt>
    <p><strong>i</strong></p>
  </dt>
  <dd>
    <p>Invert the meaning of the event. The counter will now count cycles in which the event is <strong>not</strong> occurring. This is a boolean modifier</p>
  </dd>
  <dt>
    <p><strong>e</strong></p>
  </dt>
  <dd>
    <p>Enable edge detection, i.e., count only when there is a state transition from no occurrence of the event to at least one occurrence. This modifier must be combined with a counter mask modifier (m) with a value greater or equal to one. This is a boolean modifier.</p>
  </dd>
  <dt>
    <p><strong>c</strong></p>
  </dt>
  <dd>
    <p>Set the counter mask value. The mask acts as a threshold. The counter will count the number of cycles in which the number of occurrences of the event is greater or equal to the threshold. This is an integer modifier with values in the range [0:255].</p>
  </dd>
  <dt>
    <p><strong>t</strong></p>
  </dt>
  <dd>
    <p>Measure on both threads at the same time assuming hyper-threading is enabled. This is a boolean modifier.</p>
  </dd>
  <dt>
    <p><strong>ldlat</strong></p>
  </dt>
  <dd>
    <p>Pass a latency threshold to the MEM_TRANS_RETIRED:LATENCY_ABOVE_THRESHOLD event. This is an integer attribute that must be in the range [3:65535]. It is required for this event.  Note that the event must be used with precise sampling (PEBS).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OFFCORE_RESPONSE events</h2>
        <div class="sectioncontent">
<p>Intel Ivy Bridge provides two offcore_response events. They are called OFFCORE_RESPONSE_0 and OFFCORE_RESPONSE_1.</p><p>Those events need special treatment in the performance monitoring infrastructure because each event uses an extra register to store some settings. Thus, in case multiple offcore_response events are monitored simultaneously, the kernel needs to manage the sharing of that extra register.</p><p>The offcore_response events are exposed as a normal events by the library. The extra settings are exposed as regular umasks. The library takes care of encoding the events according to the underlying kernel interface.</p><p>On Intel Ivy Bridge, the umasks are divided into three categories: request, supplier and snoop. The user must provide at least one umask for each category. The categories are shown in the umask descriptions.</p><p>There is also the special response umask called <strong>ANY_RESPONSE</strong>. When this umask is used then it overrides any supplier and snoop umasks. In other words, users can specify either <strong>ANY_RESPONSE</strong> <strong>OR</strong> any combinations of supplier + snoops.</p><p>In case no supplier or snoop is specified, the library defaults to using <strong>ANY_RESPONSE</strong>.</p><p>For instance, the following are valid event selections:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>OFFCORE_RESPONSE_0:DMND_DATA_RD:ANY_RESPONSE</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>OFFCORE_RESPONSE_0:ANY_REQUEST</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>OFFCORE_RESPONSE_0:ANY_RFO:LLC_HITM:SNOOP_ANY</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>But the following are illegal:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>OFFCORE_RESPONSE_0:ANY_RFO:LLC_HITM:ANY_RESPONSE</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>OFFCORE_RESPONSE_0:ANY_RFO:LLC_HITM:SNOOP_ANY:ANY_RESPONSE</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">

<pre>
Stephane Eranian &lt;eranian@gmail.com&gt;

</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="libpfm_intel_hsw.3.html"><span aria-hidden="true">&larr;</span> libpfm_intel_hsw.3: Support for intel haswell core pmu</a></li>
   <li class="next"><a href="libpfm_intel_ivb_unc.3.html">libpfm_intel_ivb_unc.3: Support for intel ivy bridge uncore pmu <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
