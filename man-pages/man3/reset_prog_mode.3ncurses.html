<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>reset_prog_mode: Low-level curses routines</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Low-level curses routines">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="reset_prog_mode (3ncurses) manual">
  <meta name="twitter:description" content="Low-level curses routines">
  <meta name="twitter:image" content="https://www.carta.tech/images/ncurses-doc-reset_prog_mode-3ncurses.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3ncurses/reset_prog_mode.3ncurses.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="reset_prog_mode (3ncurses) manual" />
  <meta property="og:description" content="Low-level curses routines" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ncurses-doc-reset_prog_mode-3ncurses.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">reset_prog_mode<small> (3ncurses)</small></h1>
        <p class="lead">Low-level curses routines</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3ncurses/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3ncurses/reset_prog_mode.3ncurses.html">
      <span itemprop="name">reset_prog_mode: Low-level curses routines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ncurses-doc/">
      <span itemprop="name">ncurses-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3ncurses/reset_prog_mode.3ncurses.html">
      <span itemprop="name">reset_prog_mode: Low-level curses routines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;curses.h&gt;</strong></p><p><strong>int def_prog_mode(void);</strong></p><p><strong>int def_shell_mode(void);</strong></p><p><strong>int reset_prog_mode(void);</strong></p><p><strong>int reset_shell_mode(void);</strong></p><p><strong>int resetty(void);</strong></p><p><strong>int savetty(void);</strong></p><p><strong>void getsyx(int y, int x);</strong></p><p><strong>void setsyx(int y, int x);</strong></p><p><strong>int ripoffline(int line, int (*init)(WINDOW *, int));</strong></p><p><strong>int curs_set(int visibility);</strong></p><p><strong>int napms(int ms);</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The following routines give low-level access to various <strong>curses</strong> capabilities.  These routines typically are used inside library routines.</p><p>The <strong>def_prog_mode</strong> and <strong>def_shell_mode</strong> routines save the current terminal modes as the "program" (in <strong>curses</strong>) or "shell" (not in <strong>curses</strong>) state for use by the <strong>reset_prog_mode</strong> and <strong>reset_shell_mode</strong> routines.  This is done automatically by <strong>initscr</strong>.  There is one such save area for each screen context allocated by <strong>newterm()</strong>.</p><p>The <strong>reset_prog_mode</strong> and <strong>reset_shell_mode</strong> routines restore the terminal to "program" (in <strong>curses</strong>) or "shell" (out of <strong>curses</strong>) state.  These are done automatically by <strong>endwin</strong> and, after an <strong>endwin</strong>, by <strong>doupdate</strong>, so they normally are not called.</p><p>The <strong>resetty</strong> and <strong>savetty</strong> routines save and restore the state of the terminal modes.  <strong>savetty</strong> saves the current state in a buffer and <strong>resetty</strong> restores the state to what it was at the last call to <strong>savetty</strong>.</p><p>The <strong>getsyx</strong> routine returns the current coordinates of the virtual screen cursor in <em>y</em> and <em>x</em>.  If <strong>leaveok</strong> is currently <strong>TRUE</strong>, then <strong>-1</strong>,<strong>-1</strong> is returned.  If lines have been removed from the top of the screen, using <strong>ripoffline</strong>, <em>y</em> and <em>x</em> include these lines; therefore, <em>y</em> and <em>x</em> should be used only as arguments for <strong>setsyx</strong>.</p><p>The <strong>setsyx</strong> routine sets the virtual screen cursor to <em>y</em>, <em>x</em>.  If <em>y</em> and <em>x</em> are both <strong>-1</strong>, then <strong>leaveok</strong> is set.  The two routines <strong>getsyx</strong> and <strong>setsyx</strong> are designed to be used by a library routine, which manipulates <strong>curses</strong> windows but does not want to change the current position of the program's cursor.  The library routine would call <strong>getsyx</strong> at the beginning, do its manipulation of its own windows, do a <strong>wnoutrefresh</strong> on its windows, call <strong>setsyx</strong>, and then call <strong>doupdate</strong>.</p><p>The <strong>ripoffline</strong> routine provides access to the same facility that <strong>slk_init</strong> [see <strong>slk</strong>(3NCURSES)] uses to reduce the size of the screen.  <strong>ripoffline</strong> must be called before <strong>initscr</strong> or <strong>newterm</strong> is called.  If <em>line</em> is positive, a line is removed from the top of <strong>stdscr</strong>; if <em>line</em> is negative, a line is removed from the bottom.  When this is done inside <strong>initscr</strong>, the routine <strong>init</strong> (supplied by the user) is called with two arguments: a window pointer to the one-line window that has been allocated and an integer with the number of columns in the window. Inside this initialization routine, the integer variables <strong>LINES</strong> and <strong>COLS</strong> (defined in <strong>&lt;curses.h&gt;</strong>) are not guaranteed to be accurate and <strong>wrefresh</strong> or <strong>doupdate</strong> must not be called.  It is allowable to call <strong>wnoutrefresh</strong> during the initialization routine.</p><p><strong>ripoffline</strong> can be called up to five times before calling <strong>initscr</strong> or <strong>newterm</strong>.</p><p>The <strong>curs_set</strong> routine sets the cursor state to invisible, normal, or very visible for <strong>visibility</strong> equal to <strong>0</strong>, <strong>1</strong>, or <strong>2</strong> respectively.  If the terminal supports the <em>visibility</em> requested, the previous <em>cursor</em> state is returned; otherwise, <strong>ERR</strong> is returned.</p><p>The <strong>napms</strong> routine is used to sleep for <em>ms</em> milliseconds.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Except for <strong>curs_set</strong>, these routines always return <strong>OK</strong>.</p><p><strong>curs_set</strong> returns the previous cursor state, or <strong>ERR</strong> if the requested <em>visibility</em> is not supported.</p><p>X/Open defines no error conditions. In this implementation</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>def_prog_mode</strong>, <strong>def_shell_mode</strong>, <strong>reset_prog_mode</strong>, <strong>reset_shell_mode</strong></p>
  </dt>
  <dd>
    <p>return an error if the terminal was not initialized, or if the I/O call to obtain the terminal settings fails.</p>
  </dd>
  <dt>
    <p><strong>ripoffline</strong></p>
  </dt>
  <dd>
    <p>returns an error if the maximum number of ripped-off lines exceeds the maximum (NRIPS = 5).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Note that <strong>getsyx</strong> is a macro, so <strong>&</strong> is not necessary before the variables <em>y</em> and <em>x</em>.</p><p>Older SVr4 man pages warn that the return value of <strong>curs_set</strong> "is currently incorrect".  This implementation gets it right, but it may be unwise to count on the correctness of the return value anywhere else.</p><p>Both ncurses and SVr4 will call <strong>curs_set</strong> in <strong>endwin</strong> if <strong>curs_set</strong> has been called to make the cursor other than normal, i.e., either invisible or very visible. There is no way for ncurses to determine the initial cursor state to restore that.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PORTABILITY</h2>
        <div class="sectioncontent">
<p>The functions <strong>setsyx</strong> and <strong>getsyx</strong> are not described in the XSI Curses standard, Issue 4.  All other functions are as described in XSI Curses.</p><p>The SVr4 documentation describes <strong>setsyx</strong> and <strong>getsyx</strong> as having return type int. This is misleading, as they are macros with no documented semantics for the return value.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO reset_prog_mode&hellip;</h2>
        <div class="sectioncontent">
<p><strong>ncurses</strong>(3NCURSES), <strong>initscr</strong>(3NCURSES), <strong>outopts</strong>(3NCURSES), <strong>refresh</strong>(3NCURSES), <strong>scr_dump</strong>(3NCURSES), <strong>slk</strong>(3NCURSES), <strong>curses_variables</strong>(3NCURSES).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="refresh.3ncurses.html"><span aria-hidden="true">&larr;</span> refresh.3ncurses: Refresh curses windows and lines</a></li>
   <li class="next"><a href="reset_prog_mode_sp.3ncurses.html">reset_prog_mode_sp.3ncurses: Curses screen-pointer extension <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
