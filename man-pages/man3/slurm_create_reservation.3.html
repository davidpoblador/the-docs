<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slurm_create_reservation: Slurm administrative functions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Slurm administrative functions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="slurm_create_reservation (3) manual">
  <meta name="twitter:description" content="Slurm administrative functions">
  <meta name="twitter:image" content="https://www.carta.tech/images/libslurm-dev-slurm_create_reservation-3.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3/slurm_create_reservation.3.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="slurm_create_reservation (3) manual" />
  <meta property="og:description" content="Slurm administrative functions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libslurm-dev-slurm_create_reservation-3.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slurm_create_reservation<small> (3)</small></h1>
        <p class="lead">Slurm administrative functions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/">
      <span itemprop="name">Library calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/slurm_create_reservation.3.html">
      <span itemprop="name">slurm_create_reservation: Slurm administrative functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libslurm-dev/">
      <span itemprop="name">libslurm-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3/slurm_create_reservation.3.html">
      <span itemprop="name">slurm_create_reservation: Slurm administrative functions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">
<p>#include &lt;slurm/slurm.h&gt;</p><p>int <strong>slurm_create_partition</strong> (</p><p>	update_part_msg_t *<em>update_part_msg_ptr</em></p><p>);</p><p>int <strong>slurm_create_reservation</strong> (</p><p>	resv_desc_msg_t *<em>update_resv_msg_ptr</em></p><p>);</p><p>int <strong>slurm_delete_partition</strong> (</p><p>	delete_part_msg_t *<em>delete_part_msg_ptr</em></p><p>);</p><p>int <strong>slurm_delete_reservation</strong> (</p><p>	reservation_name_msg_t *<em>delete_resv_msg_ptr</em></p><p>);</p><p>void <strong>slurm_init_front_end_msg</strong> (</p><p>	update_front_end_msg_t *<em>update_front_end_msg_ptr</em></p><p>);</p><p>void <strong>slurm_init_part_desc_msg</strong> (</p><p>	update_part_msg_t *<em>update_part_msg_ptr</em></p><p>);</p><p>void <strong>slurm_init_resv_desc_msg</strong> (</p><p>	resv_desc_msg_t *<em>update_resv_msg_ptr</em></p><p>);</p><p>void <strong>slurm_init_update_node_msg</strong>(</p><p>	update_node_msg_t *<em>update_node_msg_ptr</em></p><p>);</p><p>int <strong>slurm_reconfigure</strong> ( );</p><p>int <strong>slurm_shutdown</strong> (</p><p>	uint16_t <em>shutdown_options</em></p><p>);</p><p>int <strong>slurm_takeover</strong> ( );</p><p>int <strong>slurm_update_front_end</strong> (</p><p>	update_front_end_msg_t *<em>update_front_end_msg_ptr</em></p><p>);</p><p>int <strong>slurm_update_node</strong> (</p><p>	update_node_msg_t *<em>update_node_msg_ptr</em></p><p>);</p><p>int <strong>slurm_update_partition</strong> (</p><p>	update_part_msg_t *<em>update_part_msg_ptr</em></p><p>);</p><p>int <strong>slurm_update_reservation</strong> (</p><p>	resv_desc_msg_t *<em>update_resv_msg_ptr</em></p><p>);</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>shutdown_options</em></p>
  </dt>
  <dd>
    <p>0: all slurm daemons are shutdown</p><p>1: slurmctld generates a core file</p><p>2: only the slurmctld is shutdown (no core file)</p>
  </dd>
  <dt>
    <p><em>delete_part_msg_ptr</em></p>
  </dt>
  <dd>
    <p>Specifies the pointer to a partition delete request specification. See slurm.h for full details on the data structure's contents.</p>
  </dd>
  <dt>
    <p><em>delete_resv_msg_ptr</em></p>
  </dt>
  <dd>
    <p>Specifies the pointer to a reservation delete request specification. See slurm.h for full details on the data structure's contents.</p>
  </dd>
  <dt>
    <p><em>update_front_end_msg_ptr</em></p>
  </dt>
  <dd>
    <p>Specifies the pointer to a front end node update request specification. See slurm.h for full details on the data structure's contents.</p>
  </dd>
  <dt>
    <p><em>update_node_msg_ptr</em></p>
  </dt>
  <dd>
    <p>Specifies the pointer to a node update request specification. See slurm.h for full details on the data structure's contents.</p>
  </dd>
  <dt>
    <p><em>update_part_msg_ptr</em></p>
  </dt>
  <dd>
    <p>Specifies the pointer to a partition create or update request specification. See slurm.h for full details on the data structure's contents.</p>
  </dd>
  <dt>
    <p><em>update_resv_msg_ptr</em></p>
  </dt>
  <dd>
    <p>Specifies the pointer to a reservation create or update request specification. See slurm.h for full details on the data structure's contents.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>slurm_create_partition</strong> Request that a new partition be created. Initialize the data structure using the <strong>slurm_init_part_desc_msg</strong> function prior to setting values of the parameters to be changed. Note: <strong>slurm_init_part_desc_msg</strong> is not equivalent to setting the data structure values to zero.  A partition name must be set for the call to succeed. This function may only be successfully executed by user root.</p><p><strong>slurm_create_reservation</strong> Request that a new reservation be created. Initialize the data structure using the <strong>slurm_init_resv_desc_msg</strong> function prior to setting values of the parameters to be changed. Note: <strong>slurm_init_resv_desc_msg</strong> is not equivalent to setting the data structure values to zero.  The reservation's time limits, user or account restrictions, and node names or a node count must be specified for the call to succeed. This function may only be successfully executed by user root.</p><p><strong>slurm_delete_partition</strong> Request that the specified partition be deleted. All jobs associated with the identified partition will be terminated and purged.  This function may only be successfully executed by user root.</p><p><strong>slurm_delete_reservation</strong> Request that the specified reservation be deleted. This function may only be successfully executed by user root.</p><p><strong>slurm_init_update_front_end_msg</strong> Initialize the contents of an update front end node descriptor with default values. Note: <strong>slurm_init_update_front_end_msg</strong> is not equivalent to setting the data structure values to zero. Execute this function before executing <strong>slurm_update_front_end</strong>.</p><p><strong>slurm_init_part_desc_msg</strong> Initialize the contents of a partition descriptor with default values. Note: <strong>slurm_init_part_desc_msg</strong> is not equivalent to setting the data structure values to zero. Execute this function before executing <strong>slurm_create_partition</strong> or <strong>slurm_update_partition</strong>.</p><p><strong>slurm_init_resv_desc_msg</strong> Initialize the contents of a reservation descriptor with default values. Note: <strong>slurm_init_resv_desc_msg</strong> is not equivalent to setting the data structure values to zero. Execute this function before executing <strong>slurm_create_reservation</strong> or <strong>slurm_update_reservation</strong>.</p><p><strong>slurm_init_update_node_msg</strong> Initialize the contents of an update node descriptor with default values. Note: <strong>slurm_init_update_node_msg</strong> is not equivalent to setting the data structure values to zero. Execute this function before executing <strong>slurm_update_node</strong>.</p><p><strong>slurm_reconfigure</strong> Request that the Slurm controller re-read its configuration file. The new configuration parameters take effect immediately. This function may only be successfully executed by user root.</p><p><strong>slurm_shutdown</strong> Request that the Slurm controller terminate. This function may only be successfully executed by user root.</p><p><strong>slurm_takeover</strong> Request that the Slurm primary controller shutdown immediately and the backup controller take over. This function may only be successfully executed by user root.</p><p><strong>slurm_update_front_end</strong> Request that the state of one or more front end nodes be updated. This function may only be successfully executed by user root. If used by some autonomous program, the state value most likely to be used is <strong>NODE_STATE_DRAIN</strong>.</p><p><strong>slurm_update_node</strong> Request that the state of one or more nodes be updated. Note that the state of a node (e.g. DRAINING, IDLE, etc.) may be changed, but its hardware configuration may not be changed by this function. If the hardware configuration of a node changes, update the Slurm configuration file and execute the <strong>slurm_reconfigure</strong> function. This function may only be successfully executed by user root. If used by some autonomous program, the state value most likely to be used is <strong>NODE_STATE_DRAIN</strong> or <strong>NODE_STATE_FAILING</strong>. The node state flag <strong>NODE_STATE_NO_RESPOND</strong> may be specified without changing the underlying node state. Note that the node's <strong>NODE_STATE_NO_RESPOND</strong> flag will be cleared as soon as the slurmd daemon on that node communicates with the slurmctld daemon. Likewise the state <strong>NODE_STATE_DOWN</strong> indicates that the slurmd daemon is not responding (and has not responded for an interval at least as long as the <strong>SlurmdTimeout</strong> configuration parameter). The node will leave the <strong>NODE_STATE_DOWN</strong> state as soon as  the slurmd daemon communicates.</p><p><strong>slurm_update_partition</strong> Request that the configuration of a partition be updated.  Note that most, but not all parameters of a partition may be changed by this function. Initialize the data structure using the <strong>slurm_init_part_desc_msg</strong> function prior to setting values of the parameters to be changed. Note: <strong>slurm_init_part_desc_msg</strong> is not equivalent to setting the data structure values to zero. This function may only be successfully executed by user root.</p><p><strong>slurm_update_reservation</strong> Request that the configuration of a reservation be updated.  Initialize the data structure using the <strong>slurm_init_resv_desc_msg</strong> function prior to setting values of the parameters to be changed. Note:  <strong>slurm_init_resv_desc_msg</strong> is not equivalent to setting the data structure values to zero. This function may only be successfully executed by user root.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>On success, zero is returned. On error, -1 is returned, and the Slurm error code is set appropriately.</p><p>Exception:  A successful slurm_create_reservation call returns a string containing the name of the reservation, in memory to be freed by the caller. A failed call returns NULL and sets the Slurm error code.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p><strong>SLURM_PROTOCOL_VERSION_ERROR</strong> Protocol version has changed, re-link your code.</p><p><strong>ESLURM_INVALID_NODE_NAME</strong> The requested node name(s) is/are not valid.</p><p><strong>ESLURM_INVALID_NODE_STATE</strong> The specified state node state or requested node state transition is not valid.</p><p><strong>ESLURM_INVALID_PARTITION_NAME</strong> The requested partition name is not valid.</p><p><strong>ESLURM_INVALID_AUTHTYPE_CHANGE</strong> The <strong>AuthType</strong> parameter can not be changed using the <strong>slurm_reconfigure</strong> function, but all SLURM daemons and commands must be restarted. See <a href="../man5/slurm.conf.5.html"><strong>slurm.conf</strong>(5)</a> for more information.</p><p><strong>ESLURM_INVALID_SCHEDTYPE_CHANGE</strong> The <strong>SchedulerType</strong> parameter can not be changed using the <strong>slurm_reconfigure</strong> function, but the <strong>slurmctld</strong> daemon must be restarted. Manual changes to existing job parameters may also be required. See <a href="../man5/slurm.conf.5.html"><strong>slurm.conf</strong>(5)</a> for more information.</p><p><strong>ESLURM_INVALID_SWITCHTYPE_CHANGE</strong> The <strong>SwitchType</strong> parameter can not be changed using the <strong>slurm_reconfigure</strong> function, but all SLURM daemons and commands must be restarted. All previously running jobs will be lost. See <a href="../man5/slurm.conf.5.html"><strong>slurm.conf</strong>(5)</a> for more information.</p><p><strong>ESLURM_ACCESS_DENIED</strong> The requesting user lacks authorization for the requested action (e.g. trying to delete or modify another user's job).</p><p><strong>SLURM_PROTOCOL_SOCKET_IMPL_TIMEOUT</strong> Timeout in communicating with SLURM controller.</p><p><strong>ESLURM_RESERVATION_ACCESS</strong>  Requestor is not authorized to access the reservation.</p><p><strong>ESLURM_RESERVATION_INVALID</strong>  Invalid reservation parameter given, e.g. wrong name given.</p><p><strong>ESLURM_INVALID_TIME_VALUE</strong>  Invalid time value.</p><p><strong>ESLURM_RESERVATION_BUSY</strong>  Reservation is busy, e.g. trying to delete a reservation while in use.</p><p><strong>ESLURM_RESERVATION_NOT_USABLE</strong>  Reservation not usable, e.g. trying to use an expired reservation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>#include &lt;stdio.h&gt;</p><p>#include &lt;stdlib.h&gt;</p><p>#include &lt;slurm/slurm.h&gt;</p><p>#include &lt;slurm/slurm_errno.h&gt;</p><p>int main (int argc, char *argv[])</p><p>{</p><p>	update_node_msg_t       update_node_msg;</p><p>	update_part_msg_t       update_part_msg;</p><p>	delete_part_msg_t       delete_part_msg;</p><p>	resv_desc_msg_t         resv_msg;</p><p>	char                   *resv_name = NULL;</p><p>	if (slurm_reconfigure ( )) {</p><p>		slurm_perror ("slurm_reconfigure error");</p><p>		exit (1);</p><p>	}</p><p>	slurm_init_part_desc_msg ( &update_part_msg );</p><p>	update_part_msg.name = "test.partition";</p><p>	update_part_msg.state_up = 0;  /* partition down */</p><p>	if (slurm_create_partition (&update_part_msg)) {</p><p>		slurm_perror ("slurm_create_partition error");</p><p>		exit (1);</p><p>	}</p><p>	update_part_msg.state_up = 1;  /* partition up */</p><p>	if (slurm_update_partition (&update_part_msg)) {</p><p>		slurm_perror ("slurm_update_partition error");</p><p>		exit (1);</p><p>	}</p><p>	delete_part_msg.name = "test.partition";</p><p>	if (slurm_delete_partition (&delete_part_msg)) {</p><p>		slurm_perror ("slurm_delete_partition error");</p><p>		exit (1);</p><p>	}</p><p>	slurm_init_update_node_msg (&update_node_msg);</p><p>	update_node_msg.node_names = "lx[10-12]";</p><p>	update_node_msg.node_state = NODE_STATE_DRAIN ;</p><p>	if (slurm_update_node (&update_node_msg)) {</p><p>		slurm_perror ("slurm_update_node error");</p><p>		exit (1);</p><p>	}</p><p>	slurm_init_resv_desc_msg ( &resv_msg );</p><p>	resv_msg.start_time = time(NULL) + 60*60;  /* One hour from now */</p><p>	resv_msg.duration = 720;  /* 12 hours/720 minutes */</p><p>	resv_msg.node_cnt = 10;</p><p>	resv_msg.accounts = "admin";</p><p>	resv_name = slurm_create_reservation (&resv_msg);</p><p>	if (!resv_name) {</p><p>		slurm_perror ("slurm_create_reservation error");</p><p>		exit (1);</p><p>	}</p><p>	free(resv_name);</p><p>	exit (0);</p><p>}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTE</h2>
        <div class="sectioncontent">
<p>These functions are included in the libslurm library, which must be linked to your process for use (e.g. "cc -lslurm myprog.c").</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2002-2007 The Regents of the University of California. Copyright (C) 2008-2010 Lawrence Livermore National Security. Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER). CODE-OCEC-09-009. All rights reserved.</p><p>This file is part of SLURM, a resource management program. For details, see &lt;http://slurm.schedmd.com/&gt;.</p><p>SLURM is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>SLURM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO slurm_create_reservation&hellip;</h2>
        <div class="sectioncontent">
<p><strong>scontrol</strong>(1), <a href="../man3/slurm_get_errno.3.html"><strong>slurm_get_errno</strong>(3)</a>, <a href="../man3/slurm_init_job_desc_msg.3.html"><strong>slurm_init_job_desc_msg</strong>(3)</a>, <a href="../man3/slurm_perror.3.html"><strong>slurm_perror</strong>(3)</a>, <a href="../man3/slurm_strerror.3.html"><strong>slurm_strerror</strong>(3)</a>, <a href="../man5/slurm.conf.5.html"><strong>slurm.conf</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slurm_create_partition.3.html"><span aria-hidden="true">&larr;</span> slurm_create_partition.3: Slurm administrative functions</a></li>
   <li class="next"><a href="slurm_delete_partition.3.html">slurm_delete_partition.3: Slurm administrative functions <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
