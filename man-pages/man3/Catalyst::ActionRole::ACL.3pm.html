<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Catalyst::ActionRole::ACL: User role-based authorization action class</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="User role-based authorization action class">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Catalyst::ActionRole::ACL (3pm) manual">
  <meta name="twitter:description" content="User role-based authorization action class">
  <meta name="twitter:image" content="https://www.carta.tech/images/libcatalyst-actionrole-acl-perl-Catalyst::ActionRole::ACL-3pm.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man3pm/Catalyst::ActionRole::ACL.3pm.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Catalyst::ActionRole::ACL (3pm) manual" />
  <meta property="og:description" content="User role-based authorization action class" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libcatalyst-actionrole-acl-perl-Catalyst::ActionRole::ACL-3pm.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Catalyst::ActionRole::ACL<small> (3pm)</small></h1>
        <p class="lead">User role-based authorization action class</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Catalyst::ActionRole::ACL.3pm.html">
      <span itemprop="name">Catalyst::ActionRole::ACL: User role-based authorization action class</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libcatalyst-actionrole-acl-perl/">
      <span itemprop="name">libcatalyst-actionrole-acl-perl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man3pm/Catalyst::ActionRole::ACL.3pm.html">
      <span itemprop="name">Catalyst::ActionRole::ACL: User role-based authorization action class</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 package MyApp::Controller::Foo;
 use Moose;
 use namespace::autoclean;

 BEGIN { extends &apos;Catalyst::Controller&apos; }

 sub foo
 :Local
 :Does(ACL)
 :RequiresRole(admin)
 :ACLDetachTo(denied)
 {
     my ($self, $c) = @_;
     ...
 }

 sub denied :Private {
     my ($self, $c) = @_;

     $c-&gt;res-&gt;status(&apos;403&apos;);
     $c-&gt;res-&gt;body(&apos;Denied!&apos;);
 }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Provides a reusable action role for user role-based authorization. ACLs are applied via the assignment of attributes to application action subroutines.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REQUIRED ATTRIBUTES</h2>
        <div class="sectioncontent">
<p>Failure to include the following required attributes will result in an exception when the ACL::Role action's constructor is called.</p><h3>ACLDetachTo</h3>
<p>The name of an action to which the request should be detached if it is determined that ACLs are not satisfied for this user and the resource he is attempting to access.</p>
<h3>RequiresRole and AllowedRole</h3>
<p>The action must include at least one of these attributes, otherwise the Role::ACL constructor will throw an exception.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Processing of ACLs</h2>
        <div class="sectioncontent">
<p>One or more roles may be associated with an action.</p><p>User roles are fetched via the invocation of the context \*(L"user\*(R" object's \*(L"roles\*(R" method.</p><p>Roles specified with the RequiresRole attribute are checked before roles specified with the AllowedRole attribute.</p><p>The mandatory ACLDetachTo attribute specifies the name of the action to which execution will detach on access violation.</p><p>ACLs may be applied to chained actions so that different roles are required or allowed for each link in the chain (or no roles at all).</p><p>ACLDetachTo allows us to short-circuit traversal of an action chain as soon as access is denied to one of the actions in the chain by its \s-1ACL\s0.</p><h3>Examples</h3>
<p> # this is an invalid action  sub broken  :Local  :Does(ACL)  {      my ($self, $c) = @_;      ...  }</p><p> This action will cause an exception because it&apos;s missing the ACLDetachTo attribute  and has neither a RequiresRole nor an AllowedRole attribute. A Role::ACL action  must include at least one RequiresRole or AllowedRole attribute.</p><p> sub foo  :Local  :Does(ACL)  :RequiresRole(admin)  :ACLDetachTo(denied)  {      my ($self, $c) = @_;      ...  }</p><p>This action may only be executed by users with the 'admin' role.</p><p> sub bar :Local  :Does(ACL)  :RequiresRole(admin)  :AllowedRole(editor)  :AllowedRole(writer)  :ACLDetachTo(denied)  {      my ($self, $c) = @_;      ...  }</p><p>This action requires that the user has the 'admin' role and either the 'editor' or 'writer' role (or both).</p><p> sub easy :Local  :Does(ACL)  :AllowedRole(admin)  :AllowedRole(user)  :ACLDetachTo(denied)  {      my ($self, $c) = @_;      ...  }</p><p>Any user with either the 'admin' or 'user' role may execute this action.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WRAPPED METHODS</h2>
        <div class="sectioncontent">
<p>Throws an exception if parameters are missing or invalid. Overrides &Catalyst::Action::execute.</p><p>In order for delegation to occur, the context 'user' object must exist (authenticated user) and the \*(C`can_visit\*(C' method must return a true value.</p><p>See Catalyst::Action Return true if the authenticated user can visit this action.</p><p>This method is useful for determining in advance if a user can execute a given action.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>David P.C. Wollmann &lt;converter42@gmail.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONTRIBUTORS</h2>
        <div class="sectioncontent">
<p>Converted from an action class to an action role by Tomas Doran (t0m)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>This is new code. Find the bugs and report them, please.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT & LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2009 by David P.C. Wollmann</p><p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Catalyst::Action::Role::ACL.3pm.html"><span aria-hidden="true">&larr;</span> Catalyst::Action::Role::ACL.3pm: Deprecated user role-based authorization action class</a></li>
   <li class="next"><a href="Catalyst::Devel.3pm.html">Catalyst::Devel.3pm: Catalyst development tools <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
