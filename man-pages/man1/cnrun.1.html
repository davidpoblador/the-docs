<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cnrun: A neuronal network simulator</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A neuronal network simulator">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="cnrun (1) manual">
  <meta name="twitter:description" content="A neuronal network simulator">
  <meta name="twitter:image" content="https://www.carta.tech/images/cnrun-cnrun-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/cnrun.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="cnrun (1) manual" />
  <meta property="og:description" content="A neuronal network simulator" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cnrun-cnrun-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">cnrun<small> (1)</small></h1>
        <p class="lead">A neuronal network simulator</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cnrun.1.html">
      <span itemprop="name">cnrun: A neuronal network simulator</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cnrun/">
      <span itemprop="name">cnrun</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cnrun.1.html">
      <span itemprop="name">cnrun: A neuronal network simulator</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>	cnrun <strong>-h</strong> | <strong>-U</strong> | <strong>-e</strong> <em>script</em> [<strong>OPTION</strong> ...] <strong></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>CNrun</strong> is a neuronal network simulator, similar to NEURON or GENESIS, but without provision for unit compartments.  It reads the network topology in NeuroML format as exported, f.i., by neuroConstruct.  Unit types are determined by the \(oqcell_type\(cq attribute in the .nml definitions.</p><p>Available neuron types, by the corresponding \(oqcell_type\(cq string, include:</p><ul>
<li><p><em>HH</em> and <em>HHRate</em>, conductance- and rate-based Hodgkin-Huxley neurons (Traub & Miles, 1991);</p></li><li><p>A simplified but fast, fixed-dt <em>Map</em> neurons mimicking the HH model;</p></li><li><p><em>Poisson</em>, Van der Pol (<em>VdP</em>) and simple <em>Pulse</em> oscillators;</p></li><li><p>synapses as described in Rall et al, 1967 (<em>Rall</em>) and Destexhe et al, 1994 (<em>AB</em>).</p></li>
</ul><p>Unit parameters can be set via a <strong>set_parm_*</strong> command (see <strong>SCRIPTING</strong> below); values can be set once before the simulation, or continuously or periodically per user-defined schedule.</p><p>A 6-5-order Runge-Kutta integration method is used to compute state variables.  These (membrane potential E or instantaneous firing rate R for neurons, neurotransmitter release S for synapses) as well as spike times can be logged.</p><p>Scripting support in CNrun includes commands for creating and populating a model, setting parameters for single units or groups selected based on regex matching.  Variables (\(oqa = 1; b = a + 2\(cq) and arithmetic expressions (\(oq-\(cq, \(oq+\(cq, \(oq*\(cq, \(oq/\(cq, \(oq()\(cq ) are supported.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-C</strong> <em>dir</em> chdir to <em>dir</em> before running.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>Dump all unit types in the model and exit.</p>
  </dd>
  <dt>
    <p><strong>-e</strong> [<em>script</em>]</p>
  </dt>
  <dd>
    <p>Execute <em>script</em>.  If this option is given without a file name (or not given at all), start an interactive interpreter.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>Sort units (mostly useful with verbose output).</p>
  </dd>
  <dt>
    <p><strong>-L</strong>[1dbxL]</p>
  </dt>
  <dd>
    <p>For all listeners:</p>
<dl class='dl-vertical'>
  <dt>
    d
  </dt>
  <dd>
    <p>Defer writing to disk until done rather than write continuously (speeds up the simulation but you can\(cqt watch the progress live with gnuplot)</p>
  </dd>
  <dt>
    1
  </dt>
  <dd>
    <p>Only log the first variable (appropriate for the HH model, which units have in excess the three uninteresting gating parameters).</p>
  </dd>
  <dt>
    b
  </dt>
  <dd>
    <p>Write in native binary form rather than in ASCII.  This will speed up viewing the (now label.varx files) with gnuplot.  Do your plotting with &ldquo;binary format="%lf%lf"&rdquo; to achieve this.</p><p>These options can also be set using command <strong>listen_mode</strong> (which see, below).</p>
  </dd>
  <dt>
    L
  </dt>
  <dd>
    <p>log integrator dt.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-E</strong> <em>double</em></p>
  </dt>
  <dd>
    <p>Listen at this interval (default 1 msec; set to 0 to listen every cycle, which can slow cnrun down considerably). Also available as command <strong>listen_dt</strong>.</p>
  </dd>
  <dt>
    <p><strong>-k</strong>[l|0]</p>
  </dt>
  <dd>
    <p>Write a model-wide log of spiking neurons, using labels (\(oql\(cq) or unit ids (\(oq0\(cq).</p>
  </dd>
  <dt>
    <p><strong>-e </strong><em>uint</em></p>
  </dt>
  <dd>
    <p>Set precision for all output (default 8).</p>
  </dd>
  <dt>
    <p><strong>-iT</strong><em>double</em></p>
  </dt>
  <dd>
    <p>dt_max (default 0.5).</p>
  </dd>
  <dt>
    <p><strong>-it</strong><em>double</em></p>
  </dt>
  <dd>
    <p>dt_min (default 1e-05).</p>
  </dd>
  <dt>
    <p><strong>-ix</strong><em>double</em></p>
  </dt>
  <dd>
    <p>Cap dt increase by current dt value x this (default 5).</p>
  </dd>
  <dt>
    <p><strong>-nc</strong></p>
  </dt>
  <dd>
    <p>Disable synapse coalescing (for benchmarking).</p>
  </dd>
  <dt>
    <p><strong>-v </strong><em>int</em></p>
  </dt>
  <dd>
    <p>Set verbosity level (default 1; values up to 7 are meaningful). Use a negative value to show the progress percentage only, indented on the line at -8 x this value.</p>
  </dd>
  <dt>
    <p><strong>-U</strong></p>
  </dt>
  <dd>
    <p>List all available units.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Print the overview of command-line options.</p><p>Space is optional between the option letter and argument for single-letter options.  In all two-letter options taking an argument though, make sure there is no space in between.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SCRIPTING</h2>
        <div class="sectioncontent">
<p>Commands are delimited by a colon or new-line.  Comments are lines starting with #.  The following commands are available:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>new_model</strong> NAME</p>
  </dt>
  <dd>
    <p>Create a new model called NAME.  Existing model is deleted.</p>
  </dd>
  <dt>
    <p><strong>use_nml</strong> NML_FILE</p>
  </dt>
  <dd>
    <p>Load network topology from NML_FILE, creating a model if necessary, or replacing an existing model&rdquo; topology.</p>
  </dd>
  <dt>
    <p><strong>merge_nml</strong> NML_FILE</p>
  </dt>
  <dd>
    <p>Merge in the topology from NML_FILE.</p>
  </dd>
  <dt>
    <p><strong>add_neuron</strong> TYPE LABEL</p>
  </dt>
  <dd>
    <p>Add a new newron of type TYPE with label LABEL.</p>
  </dd>
  <dt>
    <p><strong>add_synapse</strong> TYPE SOURCE TARGET G</p>
  </dt>
  <dd>
    <p>Connect the neuron labelled SOURCE to one labelled TARGET with a synapse of type TYPE, with gsyn G.</p>
  </dd>
  <dt>
    <p><strong>cull_deaf_synapses</strong></p>
  </dt>
  <dd>
    <p>Remove synapses with zero weight.</p>
  </dd>
  <dt>
    <p><strong>set_parm_neuron</strong> LABEL PARM VALUE</p>
  </dt>
  <dd>
    <p>Set parameter PARM for a specified group of neurons labelled matching LABEL.</p>
  </dd>
  <dt>
    <p><strong>set_parm_synapse</strong> SRC TGT PARM VALUE</p>
  </dt>
  <dd>
    <p>Set parameter PARM for synapses between neurons labelled matching SRC and TGT. The synaptic weight, itself not being a synapse parameter, can also be set with this command: to do this, use \(oqgsyn\(cq as PARM.</p>
  </dd>
  <dt>
    <p><strong>reset</strong></p>
  </dt>
  <dd>
    <p>Reset the model.  Model time is rewound to 0 and all units have their state variables reset to stock defaults.  Any previously assigned unit parameters and attached data sources are preserved.</p>
  </dd>
  <dt>
    <p><strong>reset_revert_params</strong></p>
  </dt>
  <dd>
    <p>Reset the model.  Model time is rewound to 0, all units have their state variables and parameters reset to stock defaults.</p>
  </dd>
  <dt>
    <p><strong>reset_state_units</strong> REGEX</p>
  </dt>
  <dd>
    <p>Reset the units\(cq as above, keeping current model time.</p>
  </dd>
  <dt>
    <p><strong>advance_until</strong> TIME</p>
  </dt>
  <dd>
    <p>Advance until TIME msec.</p>
  </dd>
  <dt>
    <p><strong>advance</strong> TIME</p>
  </dt>
  <dd>
    <p>Advance TIME msec.</p>
  </dd>
  <dt>
    <p><strong>putout</strong> REGEX</p>
  </dt>
  <dd>
    <p>Delete units matching REGEX by label.</p>
  </dd>
  <dt>
    <p><strong>decimate</strong> REGEX FRAC</p>
  </dt>
  <dd>
    <p>Randomly delete FRAC units of a population of units selected by REGEX.</p>
  </dd>
  <dt>
    <p><strong>start_listen</strong> REGEX</p>
  </dt>
  <dd>
    <p>Make matching units listen.</p>
  </dd>
  <dt>
    <p><strong>stop_listen</strong></p>
  </dt>
  <dd>
    <p>Make matching units stop listening.</p>
  </dd>
  <dt>
    <p><strong>listen_dt</strong> [VALUE]</p>
  </dt>
  <dd>
    <p>Set listening interval to VALUE, or show current value if VALUE not given.</p>
  </dd>
  <dt>
    <p><strong>listen_mode</strong> [SPEC]</p>
  </dt>
  <dd>
    <p>Print (if argument is omitted) the current listening mode (one var only, deferred write, and/or binary); otherwise, enable the corresponding mode if \(oq1\(cq, \(oqd\(cq or \(oqb\(cq occurs in SPEC, or disable it if it does and is immediately followed by a \(oq-\(cq. Note that those units already listening will be unaffected; to change the mode for them, issue <strong>start_listen</strong> for them after the new mode has been set.</p>
  </dd>
  <dt>
    <p><strong>start_log_spikes</strong> REGEX</p>
  </dt>
  <dd>
    <p>Make neurons matching REGEX log spikes.</p>
  </dd>
  <dt>
    <p><strong>stop_log_spikes</strong> REGEX</p>
  </dt>
  <dd>
    <p>Make neurons matching REGEX stop log spikes.</p>
  </dd>
  <dt>
    <p><strong>sxf_params</strong> DELAY:PERIOD:SIGMA</p>
  </dt>
  <dd>
    <p>Set spike density function initial delay, sampling period and sigma as specified.</p>
  </dd>
  <dt>
    <p><strong>describe_model</strong></p>
  </dt>
  <dd>
    <p>Print a summary of model topology and unit types.</p>
  </dd>
  <dt>
    <p><strong>show_units</strong> REGEX</p>
  </dt>
  <dd>
    <p>Print parameters and state of units matching REGEX.</p>
  </dd>
  <dt>
    <p><strong>new_source</strong> TYPE ID ARG ...</p>
  </dt>
  <dd>
    <p>Create a new source of type and with an id as indicated.  Sources can be connected to unit parameters as a means to set up a dynamically changing behaviour.  See <strong>DYNAMIC SOURCES</strong> below.</p>
  </dd>
  <dt>
    <p><strong>connect_source</strong> SOURCE_ID LABEL PARM</p>
  </dt>
  <dd>
    <p>Connect this source to matching units\(cq parameter.</p>
  </dd>
  <dt>
    <p><strong>show_sources</strong></p>
  </dt>
  <dd>
    <p>Show the currently active sources (both connected and idle).</p>
  </dd>
  <dt>
    <p><strong>exec</strong> [SCRIPT]</p>
  </dt>
  <dd>
    <p>Execute a script.  If SCRIPT not specified, start an interactive interpreter.</p>
  </dd>
  <dt>
    <p><strong>verbosity</strong> [LEVEL]</p>
  </dt>
  <dd>
    <p>Set/show verbosity level.</p>
  </dd>
  <dt>
    <p><strong>show_vars</strong> [REGEX]</p>
  </dt>
  <dd>
    <p>Print variables matching REGEX, or all variables if REGEX omitted.</p>
  </dd>
  <dt>
    <p><strong>clear_vars</strong> [REGEX]</p>
  </dt>
  <dd>
    <p>Clear variables matching REGEX, or all if REGEX omitted.</p>
  </dd>
  <dt>
    <p><strong>pause</strong> [DELAY]</p>
  </dt>
  <dd>
    <p>Pause for DELAY sec if specified, or until user presses Enter otherwise.</p>
  </dd>
  <dt>
    <p><strong>quit</strong></p>
  </dt>
  <dd>
    <p>Exit current interpreter if called by <strong>exec</strong>; exit the program otherwise.</p>
  </dd>

</dl>
<p>When you use the interpreter interactively, TAB will list completions approproiately, depending on the context.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DYNAMIC SOURCES</h2>
        <div class="sectioncontent">
<p>In addition to static unit parameter/variable assignment with <strong>set_parm_{neuron,synapse}</strong>, units can have a data source attached to any of their parameters or variable (even though variables will get overwritten in the next cycle).</p><p>Data sources are of three types (a fourth one is available for developers, an arbitrary user function of time, but not exposed as an interpreter command).  Where data for a source are read from a file, values are read using a \(oq&gt;&gt;\(cq operator (from &lt;ifstream&gt;) into a double variable.  The corresponding <strong>new_source</strong> arguments are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Tape</strong> FILE</p>
  </dt>
  <dd>
    <p>Read &ldquo;time value&rdquo; pairs from FILE and set the parameter\(cqs value accordingly.</p>
  </dd>
  <dt>
    <p><strong>Periodic</strong> FILE</p>
  </dt>
  <dd>
    <p>FILE is expected to contain, as the first number value read by scanf("%lg"), a time period at which the following values are sequentially assigned to the parameter.  Values are assigned at the beginning of each integration cycle.</p>
  </dd>
  <dt>
    <p><strong>Noise</strong> MIN:MAX</p>
  </dt>
  <dd>
    <p>Generate (irrespective of time) a uniformly distributed random number within MIN:MAX.</p>
  </dd>

</dl>
<p>Similarly to the parameters, state variables can also be set in this manner; in this case, the values read, will override whatever the inner workings of the unit assign to it.  Where a Tape has a gap between assignment times larger than current dt, assignments are still made; this, however, does not apply to Periodic sources (chiefly for performance reasons).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNAPSE COALESCING</h2>
        <div class="sectioncontent">
<p>Coalesced synapses are those having identical parameters and having the same source.  Coalescing reduces, per divergence rate, the number of times the S variable is recomputed with identical parameters per cycle; additionally for hosted synapses, the integration vector is shrunk to fit towards further performance gain.</p><p>Coalescing happens automatically between two synapses from same source when, after all parameter assignments, they are found to be identical (disregarding synaptic weights).  Conversely, when the user changes a parameter to one coalesced synapses that is different from that parameter\(cqs value in the others, that synapse becomes independent.</p><p>Note that a synapse units\(cqs label is dynamically formed of the label of the source with a semicolon and the current number of targets.  Another consequence of coalescing is that there can be more than one synapse units labelled identically (hence, uniquely to identify a synapse, you need to specify its source and target).</p><p>The command-line option <strong>-nc</strong> can be used to disable coalescing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>.cnrun-history</em>, a per-directory history of entered commands.</p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>In /usr/share/doc/cnrun/ratiocoding, there is a working example of cnrun setup which reproduces some of the results presented in Zavada et al (2011) PLoS paper.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The oscillator units other than Poisson, have not been tested.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO cnrun&hellip;</h2>
        <div class="sectioncontent">
<p><strong>spike2sdf</strong>(1), <strong>varfold</strong>(1).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>CNRun and the underlying library libcn is written by Andrei Zavada &lt;johnhommer@gmail.com&gt;, building on the original code by Thomas Nowotny, while at Sussex University in 2008-10.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="cnee.1.html"><span aria-hidden="true">&larr;</span> cnee.1: Record, replays or distributes x11 data</a></li>
   <li class="next"><a href="cntlm.1.html">cntlm.1: Authenticating http(s) proxy with tcp/ip tunneling and acceleration <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
