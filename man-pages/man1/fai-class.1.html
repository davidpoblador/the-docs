<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fai-class: Define classes using files and scripts.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Define classes using files and scripts.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fai-class (1) manual">
  <meta name="twitter:description" content="Define classes using files and scripts.">
  <meta name="twitter:image" content="https://www.carta.tech/images/fai-client-fai-class-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/fai-class.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fai-class (1) manual" />
  <meta property="og:description" content="Define classes using files and scripts." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fai-client-fai-class-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fai-class<small> (1)</small></h1>
        <p class="lead">Define classes using files and scripts.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/fai-class.1.html">
      <span itemprop="name">fai-class: Define classes using files and scripts.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fai-client/">
      <span itemprop="name">fai-client</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/fai-class.1.html">
      <span itemprop="name">fai-class: Define classes using files and scripts.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fai-class</strong> [OPTION]<em> DIRECTORY CLASSFILE</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This command is only called internally by FAI and not directly by the user.</p><p>fai-class executes scripts in DIRECTORY to define classes. All classes are written to CLASSFILE, each class on a separate line. Use absolute paths for both arguments. All scripts or executables matching "[0-9][0-9]*" are executed in alphabetical order. They can define classes by writing the names of the classes to stdout. Classes can be separated by spaces or written one on a line. All lines that start with a "#" are comment lines and are ignored.</p><p>Shell scripts that end in ".source" are sourced and can define classes by setting the variable $newclasses. This is useful for scripts where you can't control stdout. Variables that are defined in these scripts are available to other scripts in DIRECTORY, but they are not exported to the shell that calls fai-class. Those scripts can define variables by writing definitions to the file $LOGDIR/additional.var, which will be sourced in the following task.</p><p>All scripts can define additional classes by writing the classes to the file $LOGDIR/additional-classes. These classes are defined after all scripts are executed. This temporary file will be removed after use.</p><p>The order of the classes is important because it defines the priority of the classes from low to high. First, the class DEFAULT is defined. Then all scripts are executed to define classes. After that, the classes from the file $LOGDIR/additional-classes are added. Then, all classes in the file with the hostname are added. Then classes defined by the variable ADDCLASSES are used. This variable must be a comma separated list of classes. You can define this variable on the kernel command line.</p><p>Finally, the class with the hostname and LAST are defined.</p><p>It's important that each line in a file containg a class name ends with a newline. If the newline is missing on the last line of a file, this class can't be added.</p><p>The exit code of every script is written to the file status.log in LOGDIR.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Create debugging output.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Show help, version and summary of options.</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Test if classes in CLASSFILE are defined multiple times. This should never happen. The test is executed after the classes are defined.</p>
  </dd>
  <dt>
    <p><strong>-t tmpdir</strong></p>
  </dt>
  <dd>
    <p>The file additional-classes is read from the directory tmpdir. Default value is /tmp/fai/.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Create verbose output.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>In FAI, fai-class is used in the following way:</p>
<pre>
   # fai-class /fai/class /tmp/fai/FAI_CLASSES
</pre>
<p>Then the list of all classes is assigned to the variable classes.</p>
<pre>
    classes=`cat /tmp/fai/FAI_CLASSES`
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES FOR SCRIPTS</h2>
        <div class="sectioncontent">

<pre>
This is the script 01alias:

#! /bin/sh

catnc() { # cat but no comment lines
    grep -v "^#" $1
}
# echo architecture in upper case
dpkg --print-architecture | tr /a-z/ /A-Z/
uname -s | tr /a-z/ /A-Z/

# all hosts named ant?? use the classes in file anthill
case $HOSTNAME in
    ant??) catnc anthill ;;
esac

# a Beowulf cluster; all nodes except the master node
# use classes from file class/atoms
case $HOSTNAME in
    atom00) echo BEOWULF_MASTER ;;
    atom??) catnc atoms ;;
esac

# if host belongs to class C subnet 123.45.6.0 use class NET_6
case $IPADDR in
    123.45.6.*) echo NET_6 ;;
esac


Another EXAMPLE:

The script 24nis:

#! /bin/sh

# add NIS and the NIS domain name if YPDOMAIN is defined

if [ -n "$YPDOMAIN" ];then
   echo "NIS $YPDOMAIN" | tr /.a-z-/ /_A-Z_/
else
   echo NONIS
fi

</pre>
<p>You can define classes on the kernel command line by appening this to the kernel:</p>
<pre>
   ADDCLASSES=CLASS1,CLASSX,CLASS3
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>All class names should be written in uppercase letters (execpt the class of the hostname). Do not use a dash, use an underscore. Only executable scripts in DIRECTORY are used. CLASSFILE is removed before writing to it. Scripts should not directly write to CLASSFILE. LOGDIR should not be writable for everybody.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fai-class&hellip;</h2>
        <div class="sectioncontent">
<p>This program is part of FAI (Fully Automatic Installation). The FAI homepage is http://fai-project.org.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Thomas Lange &lt;lange@informatik.uni-koeln.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fahash.1.html"><span aria-hidden="true">&larr;</span> fahash.1: Sequence hash builder for reverse e-pcr</a></li>
   <li class="next"><a href="fai-debconf.1.html">fai-debconf.1: Set debconf values using classes <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
