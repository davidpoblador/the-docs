<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>moc-qt5: Generate qt meta object support code</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Generate qt meta object support code">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="moc-qt5 (1) manual">
  <meta name="twitter:description" content="Generate qt meta object support code">
  <meta name="twitter:image" content="https://www.carta.tech/images/qtbase5-dev-tools-moc-qt5-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/moc-qt5.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="moc-qt5 (1) manual" />
  <meta property="og:description" content="Generate qt meta object support code" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/qtbase5-dev-tools-moc-qt5-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">moc-qt5<small> (1)</small></h1>
        <p class="lead">Generate qt meta object support code</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/moc-qt5.1.html">
      <span itemprop="name">moc-qt5: Generate qt meta object support code</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/qtbase5-dev-tools/">
      <span itemprop="name">qtbase5-dev-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/moc-qt5.1.html">
      <span itemprop="name">moc-qt5: Generate qt meta object support code</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>moc</strong> [-o file] [-i] [-f] [-k] [-ldbg] [-nw] [-p path] [-q path] [-v] file</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This page documents the <strong>Meta Object Compiler</strong> for the Qt GUI application framework. The <strong>moc</strong> reads one or more C++ class declarations from a C++ header or source file and generates one C++ source file containing meta object information for the classes. The C++ source file generated by the <strong>moc</strong> must be compiled and linked with the implementation of the class (or it can be #included into the class's source file).</p><p>If you use <strong>qmake</strong> to create your Makefiles, build rules will be included that call the <strong>moc</strong> when required, so you will not need to use the <strong>moc</strong> directly.</p><p>In brief, the meta object system is a structure used by Qt (see <strong>http://doc.trolltech.com</strong>) for component programming and run time type information.  It adds properties and inheritance information to (some) classes and provides a new type of communication between those instances of those classes, signal-slot connections.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>-o file</em></p>
  </dt>
  <dd>
    <p>Write output to <em>file</em> rather than to stdout.</p>
  </dd>
  <dt>
    <p><em>-f</em></p>
  </dt>
  <dd>
    <p>Force the generation of an #include statement in the output. This is the default for files whose name matches the regular expression .[hH][^.]* (i.e. the extension starts with <strong>H</strong> or <strong>h</strong> ). This option is only useful if you have header files that do not follow the standard naming conventions.</p>
  </dd>
  <dt>
    <p><em>-i</em></p>
  </dt>
  <dd>
    <p>Do not generate an #include statement in the output.  This may be used to run <strong>moc</strong> on a C++ file containing one or more class declarations. You should then #include the meta object code in the .cpp file (see USAGE below).  If both <em>-f</em> and <em>-i</em> are present, the last one wins.</p>
  </dd>
  <dt>
    <p><em>-nw</em></p>
  </dt>
  <dd>
    <p>Do not generate any warnings. Not recommended.</p>
  </dd>
  <dt>
    <p><em>-ldbg</em></p>
  </dt>
  <dd>
    <p>Write a flood of lex debug information to stdout.</p>
  </dd>
  <dt>
    <p><em>-p path</em></p>
  </dt>
  <dd>
    <p>Makes <strong>moc</strong> prepend <em>path</em>/ to the file name in the generated #include statement (if one is generated).</p>
  </dd>
  <dt>
    <p><em>-q path</em></p>
  </dt>
  <dd>
    <p>Makes <strong>moc</strong> prepend <em>path</em>/ to the file name of qt #include files in the generated code.</p>
  </dd>
  <dt>
    <p><em>-v</em></p>
  </dt>
  <dd>
    <p>Displays the version of <strong>moc</strong> and Qt.</p>
  </dd>

</dl>
<p>You can explicitly tell the <strong>moc</strong> not to parse parts of a header file. It recognizes any C++ comment (//) that contains the substrings MOC_SKIP_BEGIN or MOC_SKIP_END. They work as you would expect and you can have several levels of them. The net result as seen by the <strong>moc</strong> is as if you had removed all lines between a MOC_SKIP_BEGIN and a MOC_SKIP_END</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p><strong>moc</strong> is almost always invoked by <a href="../man1/make.1.html"><strong>make</strong>(1)</a>, not by hand.</p><p><strong>moc</strong> is typically used with an input file containing class declarations like this:</p>
<pre>
class YourClass : public QObject {
    Q_OBJECT
    Q_PROPERTY( ... )
    Q_CLASSINFO( ... )

public:
    YourClass( QObject * parent=0, const char * name=0 );
    ~YourClass();

signals:

public slots:

};
</pre>
<p>Here is a useful makefile rule if you only use GNU make:</p>
<pre>
m%.cpp: %.h
        moc $&lt; -o $@
</pre>
<p>If you want to write portably, you can use individual rules of the following form:</p>
<pre>
mNAME.cpp: NAME.h
        moc $&lt; -o $@
</pre>
<p>You must also remember to add <em>mNAME.cpp</em> to your SOURCES (substitute your favorite name) variable and <em>mNAME.o</em> to your OBJECTS variable.</p><p>(While we prefer to name our C++ source files .cpp, the <strong>moc</strong> doesn't know that, so you can use .C, .cc, .CC, .cxx or even .c++ if you prefer.)</p><p>If you have class declarations in C++ files, we recommend that you use a makefile rule like this:</p>
<pre>
NAME.o: mNAME.cpp

mNAME.cpp: NAME.cpp
        moc -i $&lt; -o $@
</pre>
<p>This guarantees that <a href="../man1/make.1.html"><strong>make</strong>(1)</a> will run the <strong>moc</strong> before it compiles <em>NAME.cpp</em>. You can then put</p><p>#include "nNAME.cpp"</p><p>at the end of <em>NAME.cpp</em>, where all the classes declared in that file are fully known.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Sometimes you may get linkage errors, saying that YourClass::className() is undefined or that YourClass lacks a vtbl. Those errors happen most often when you forget to compile the moc-generated C++ code or include that object file in the link command.</p><p>The <strong>moc</strong> will warn you about a number of dangerous or illegal constructs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The <strong>moc</strong> does not expand #include or #define, it simply skips any preprocessor directives it encounters. This is regrettable, but is normally not a problem in practice.</p><p>The <strong>moc</strong> does not handle all of C++.  The main problem is that class templates cannot have signals or slots.  This is an important bug.  Here is an example:</p>
<pre>
class SomeTemplate&lt;int&gt; : public QFrame {
    Q_OBJECT
    ....
signals:
    void bugInMocDetected( int );
};
</pre>
<p>Less importantly, the following constructs are illegal.  All of them have have alternatives which we think are usually better, so removing these limitations is not a high priority for us.</p><h3>Multiple inheritance requires QObject to be first.</h3>
<p>If you are using multiple inheritance, <strong>moc</strong> assumes that the <strong>first</strong> inherited class is a subclass of QObject.  Also, be sure that <strong>only</strong> the first inherited class is a QObject.</p>
<pre>
class SomeClass : public QObject, public OtherClass {
    ...
};
</pre>
<p>This bug is almost impossible to fix; since the <strong>moc</strong> does not expand #include or #define, it cannot find out which one of the base classes is a QObject.</p>
<h3>Function pointers cannot be arguments to signals or slots.</h3>
<p>In most cases where you would consider that, we think inheritance is a better alternative.  Here is an example of illegal syntax:</p>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
    ...
public slots:
    // illegal
    void apply( void (*apply)(List *, void *), void * );
};
</pre>
<p>You can work around this restriction like this:</p>
<pre>
typedef void (*ApplyFunctionType)( List *, void * );

class SomeClass : public QObject {
    Q_OBJECT
    ...
public slots:
    void apply( ApplyFunctionType, char * );
};
</pre>
<p>It may sometimes be even better to replace the function pointer with inheritance and virtual functions, signals or slots.</p>
<h3>Friend declarations cannot be placed in signals or slots sections</h3>
<p>Sometimes it will work, but in general, friend declarations cannot be placed in <strong>signals</strong> or <strong>slots</strong> sections.  Put them in the good old <strong>private</strong>, <strong>protected</strong> or <strong>public</strong> sections instead.  Here is an example of the illegal syntax:</p>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
    ...
signals:
    friend class ClassTemplate&lt;char&gt;; // illegal
};
</pre>

<h3>Signals and slots cannot be upgraded</h3>
<p>The C++ feature of upgrading an inherited member function to <strong>public</strong> status is not extended to cover signals and slots.  Here is an illegal example:</p>
<pre>
class Whatever : public QButtonGroup {
    ...
public slots:
    QButtonGroup::buttonPressed; // illegal
    ...
};
</pre>
<p>The QButtonGroup::buttonPressed() slot is protected.</p><p>C++ quiz: What happens if you try to upgrade a protected member function which is overloaded?</p><ul>
<li><p>- All the functions are upgraded.</p></li><li><p>- That is not legal C++.</p></li>
</ul>
<h3>Type macros cannot be used for signal and slot arguments</h3>
<p>Since the <strong>moc</strong> does not expand #define, type macros that take an argument will not work in signals and slots. Here is an illegal example:</p>
<pre>
#ifdef ultrix
#define SIGNEDNESS(a) unsigned a
#else
#define SIGNEDNESS(a) a
#endif
class Whatever : public QObject {
    ...
signals:
    void someSignal( SIGNEDNESS(int) ); // illegal
};

A #define without arguments works.
</pre>

<h3>Nested classes cannot be in the signals or slots sections nor have signals or slots</h3>
<p>Here's an example:</p>
<pre>
class A {
    Q_OBJECT
public:
    class B {
    public slots: // illegal
        void b();
        ...
    };
signals:
    class B {  // illegal
        void b();
	...
    }:
};
</pre>

<h3>Constructors cannot be used in signals or slots sections</h3>
<p>It is a mystery to us why anyone would put a constructor on either the <strong>signals</strong> or <strong>slots</strong> sections.  You can't, anyway (except that it happens to work in some cases).  Put them in <strong>private</strong>, <strong>protected</strong> or <strong>public</strong> sections, where they belong.  Here is an example of the illegal syntax:</p>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
public slots:
    SomeClass( QObject *parent, const char *name )
        : QObject( parent, name ) {} // illegal
    ...
};
</pre>

<h3>Properties need to be declared before the public section that contains the respective get and set functions</h3>
<p>Declaring the first property within or after the public section that contains the type definition and the respective get and set functions does not work as expected. The <strong>moc</strong> will complain that it can neither find the functions nor resolve the type. Here is an example of the illegal syntax:</p>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
public:
    ...
    // illegal
    Q_PROPERTY( Priority priority READ priority WRITE setPriority )
    Q_ENUMS( Priority )
    enum Priority { High, Low, VeryHigh, VeryLow };
    void setPriority( Priority );
    Priority priority() const;
    ...
};
</pre>
<p>Work around this limitation by declaring all properties at the beginning of the class declaration, right after Q_OBJECT:</p>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
    Q_PROPERTY( Priority priority READ priority WRITE setPriority )
    Q_ENUMS( Priority )
public:
    ...
    enum Priority { High, Low, VeryHigh, VeryLow };
    void setPriority( Priority );
    Priority priority() const;
    ...
};
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO moc-qt5&hellip;</h2>
        <div class="sectioncontent">
<p><strong>http://www.trolltech.com</strong>,  <strong>C++ ARM, section r.11.3</strong> (for the answer to the quiz), and <strong>http://doc.trolltech.com</strong> (for complete Qt documentation).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="moc-qt4.1.html"><span aria-hidden="true">&larr;</span> moc-qt4.1: Generate qt meta object support code</a></li>
   <li class="next"><a href="mocha.1.html">mocha.1: Simple, flexible, fun test framework <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
