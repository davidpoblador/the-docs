<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pegasus-analyzer: Debugs a workflow.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Debugs a workflow.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pegasus-analyzer (1) manual">
  <meta name="twitter:description" content="Debugs a workflow.">
  <meta name="twitter:image" content="https://www.carta.tech/images/pegasus-wms-pegasus-analyzer-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pegasus-analyzer.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pegasus-analyzer (1) manual" />
  <meta property="og:description" content="Debugs a workflow." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pegasus-wms-pegasus-analyzer-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pegasus-analyzer<small> (1)</small></h1>
        <p class="lead">Debugs a workflow.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pegasus-analyzer.1.html">
      <span itemprop="name">pegasus-analyzer: Debugs a workflow.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pegasus-wms/">
      <span itemprop="name">pegasus-wms</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pegasus-analyzer.1.html">
      <span itemprop="name">pegasus-analyzer: Debugs a workflow.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>pegasus-analyzer</strong> [<strong>--help</strong>|<strong>-h</strong>] [<strong>--quiet</strong>|<strong>-q</strong>] [<strong>--strict</strong>|<strong>-s</strong>]
                 [<strong>--monitord</strong>|<strong>-m</strong>|<strong>-t</strong>] [<strong>--verbose</strong>|<strong>-v</strong>]
                 [<strong>--output-dir</strong>|<strong>-o</strong> <em>output_dir</em>]
                 [<strong>--dag</strong> <em>dag_filename</em>] [<strong>--dir</strong>|<strong>-d</strong>|<strong>-i</strong> <em>input_dir</em>]
                 [<strong>--print</strong>|<strong>-p</strong> <em>print_options</em>] [<strong>--type</strong> <em>workflow_type</em>]
                 [<strong>--debug-job</strong> <em>job</em>][<strong>--debug-dir</strong> <em>debug_dir</em>]
                 [<strong>--local-executable</strong> <em>local user executable</em>]
                 [<strong>--conf</strong>|<strong>-c</strong> <em>property_file</em>] [<strong>--files</strong>]
                 [<strong>--top-dir</strong> <em>dir_name</em>] [<strong>--recurse</strong>|<strong>-r</strong>]
                 [<em>workflow_directory</em>]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>pegasus-analyzer</strong> is a command-line utility for parsing the <em>jobstate.log</em> file and reporting successful and failed jobs. When executed without any options, it will query the <strong>SQLite</strong> or <strong>MySQL</strong> database and retrieve failed job information for the particular workflow. When invoked with the <strong>--files</strong> option, it will retrieve information from several log files, isolating jobs that did not complete successfully, and printing their <em>stdout</em> and <em>stderr</em> so that users can get detailed information about their workflow runs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-h</strong>, <strong>--help</strong></p><p>Prints a usage summary with all the available command-line options.</p><p><strong>-q</strong>, <strong>--quiet</strong></p><p>Only print the the output and error filenames instead of their contents.</p><p><strong>-s</strong>, <strong>--strict</strong></p><p>Get jobs&apos; output and error filenames from the job\(cqs submit file.</p><p><strong>-m</strong>, <strong>-t</strong>, <strong>--monitord</strong></p><p>Invoke <strong>pegasus-monitord</strong> before analyzing the <em>jobstate.log</em> file. Although <strong>pegasus-analyzer</strong> can be executed during the workflow execution as well as after the workflow has already completed execution, <strong>pegasus-monitord"</strong> is always invoked with the <strong>--replay</strong> option. Since multiple instances of <strong>pegasus-monitord"</strong> should not be executed simultaneously in the same workflow directory, the user should ensure that no other instances of <strong>pegasus-monitord</strong> are running. If the <em>run_directory</em> is writable, <strong>pegasus-analyzer</strong> will create a <em>jobstate.log</em> file there, rotating an older log, if it is found. If the <em>run_directory</em> is not writable (e.g. when the user debugging the workflow is not the same user that ran the workflow), <strong>pegasus-analyzer</strong> will exit and ask the user to provide the <strong>--output-dir</strong> option, in order to provide an alternative location for <strong>pegasus-monitord</strong> log files.</p><p><strong>-v</strong>, <strong>--verbose</strong></p><p>Sets the log level for <strong>pegasus-analyzer</strong>. If omitted, the default <em>level</em> will be set to <em>WARNING</em>. When this option is given, the log level is changed to <em>INFO</em>. If this option is repeated, the log level will be changed to <em>DEBUG</em>.</p><p><strong>-o</strong> <em>output_dir</em>, <strong>--output-dir</strong> <em>output_dir</em></p><p>This option provides an alternative location for all monitoring log files for a particular workflow. It is mainly used when an user does not have write privileges to a workflow directory and needs to generate the log files needed by <strong>pegasus-analyzer</strong>. If this option is used in conjunction with the <strong>--monitord</strong> option, it will invoke <strong>pegasus-monitord</strong> using <em>output_dir</em> to store all output files. Because workflows can have sub-workflows, <strong>pegasus-monitord</strong> will create its files prepending the workflow <em>wf_uuid</em> to each filename. This way, multiple workflow files can be stored in the same directory. <strong>pegasus-analyzer</strong> has built-in logic to find the specific <em>jobstate.log</em> file by looking at the workflow <em>braindump.txt</em> file first and figuring out the corresponding <em>wf_uuid.</em> If <em>output_dir</em> does not exist, it will be created.</p><p><strong>--dag</strong> &apos;dag_filename</p><p>In this option, <em>dag_filename</em> specifies the path to the <em>DAG</em> file to use. <strong>pegasus-analyzer</strong> will get the directory information from the <em>dag_filename</em>. This option overrides the <strong>--dir</strong> option below.</p><p><strong>-d</strong> <em>input_dir</em>, <strong>-i</strong> <em>input_dir</em>, <strong>--dir</strong> <em>input_dir</em></p><p>Makes <strong>pegasus-analyzer</strong> look for the <em>jobstate.log</em> file in the <em>input_dir</em> directory. If this option is omitted, <strong>pegasus-analyzer</strong> will look in the current directory.</p><p><strong>-p</strong> <em>print_options</em>, <strong>--print</strong> <em>print_options</em></p><p>Tells <strong>pegasus-analyzer</strong> what extra information it should print for failed jobs. <em>print_options</em> is a comma-delimited list of options, that include <em>pre</em>, <em>invocation</em>, and/or <em>all</em>, which activates all printing options. With the <em>pre</em> option, <strong>pegasus-analyzer</strong> will print the <em>pre-script</em> information for failed jobs. For the <em>invocation</em> option, <strong>pegasus-analyzer</strong> will print the <em>invocation</em> command, so users can manually run the failed job.</p><p><strong>--debug-job</strong> <em>job</em></p><p>When given this option, <strong>pegasus-analyzer</strong> turns on its <em>debug_mode</em>, when it can be used to debug a particular Pegasus Lite job. In this mode, <strong>pegasus-analyzer</strong> will create a shell script in the <em>debug_dir</em> (see below, for specifying it) and copy all necessary files to this local directory and then execute the job locally.</p><p><strong>--debug-dir</strong> <em>debug_dir</em></p><p>When in <em>debug_mode</em>, <strong>pegasus-analyzer</strong> will create a temporary debug directory. Users can give this option in order to specify a particular <em>debug_dir</em> directory to be used instead.</p><p><strong>--local-executable</strong> <em>local user executable</em></p><p>When in debug job mode for Pegasus Lite jobs, pegasus-analyzer creates a shell script to execute the Pegasus Lite job locally in a debug directory. The Pegasus Lite script refers to remote user executable path. This option can be used to pass the local path to the user executable on the submit host. If the path to the user executable in the Pegasus Lite job is same as the local installation.</p><p><strong>--type</strong> <em>workflow_type</em></p><p>In this options, users specify what <em>workflow_type</em> they want to debug. At this moment, the only <em>workflow_type</em> available is <strong>condor</strong> and it is the default value if this option is not specified.</p><p><strong>-c</strong> <em>property_file</em>, <strong>--conf</strong> <em>property_file</em></p><p>This option is used to specify an alternative property file, which may contain the path to the database to be used by <strong>pegasus-analyzer</strong>. If this option is not specified, the config file specified in the <strong>braindump.txt</strong> file will take precedence.</p><p><strong>--files</strong></p><p>This option allows users to run <strong>pegasus-analyzer</strong> using the files in the workflow directory instead of the database as the source of information. <strong>pegasus-analyzer</strong> will output the same information, this option only changes where the data comes from.</p><p><strong>--top-dir</strong> <em>dir_name</em></p><p>This option enables <strong>pegasus-analyzer</strong> to show information about sub-workflows when using the database mode. When debugging a top-level workflow with failures in sub-workflows, the analyzer will automatically print the command users should use to debug a failed sub-workflow. This allows the analyzer to find the database it needs to access.</p><p><strong>-r</strong>, <strong>--recurse</strong></p><p>This option sets <strong>pegasus-analyzer</strong> to automatically recurse into sub workflows in case of failure. By default, if a workflow has a sub workflow in it, and that sub workflow fails , <strong>pegasus-analyzer</strong> reports that the sub workflow node failed, and lists a command invocation that the user must execute to determine what jobs in the sub workflow failed. If this option is set, then the analyzer automatically issues the command invocation and in addition displays the failed jobs in the sub workflow.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p><strong>pegasus-analyzer</strong> does not require that any environmental variables be set. It locates its required Python modules based on its own location, and therefore should not be moved outside of Pegasus&apos; bin directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The simplest way to use <strong>pegasus-analyzer</strong> is to go to the <em>run_directory</em> and invoke the analyzer:</p>
<pre>
$ pegasus-analyzer .
</pre>
<p>which will cause <strong>pegasus-analyzer</strong> to print information about the workflow in the current directory.</p><p><strong>pegasus-analyzer</strong> output contains a summary, followed by detailed information about each job that either failed, or is in an unknown state. Here is the summary section of the output:</p>
<pre>
**************************Summary***************************

 Total jobs         :     75 (100.00%)
 # jobs succeeded   :     41 (54.67%)
 # jobs failed      :      0 (0.00%)
 # jobs unsubmitted :     33 (44.00%)
 # jobs unknown     :      1 (1.33%)
</pre>
<p><em>jobs_succeeded</em> are jobs that have completed successfully. <em>jobs_failed</em> are jobs that have finished, but that did not complete successfully. <em>jobs_unsubmitted</em> are jobs that are listed in the <em>dag_file</em>, but no information about them was found in the <em>jobstate.log</em> file. Finally, <em>jobs_unknown</em> are jobs that have started, but have not reached completion.</p><p>After the summary section, <strong>pegasus-analyzer</strong> will display information about each job in the <em>job_failed</em> and <em>job_unknown</em> categories.</p>
<pre>
******************Failed jobs&apos; details**********************

=======================findrange_j3=========================

  last state: POST_SCRIPT_FAILURE
        site: local
 submit file: /home/user/diamond-submit/findrange_j3.sub
 output file: /home/user/diamond-submit/findrange_j3.out.000
  error file: /home/user/diamond-submit/findrange_j3.err.000

--------------------Task #1 - Summary-----------------------

 site        : local
 hostname    : server-machine.domain.com
 executable  : (null)
 arguments   : -a findrange -T 60 -i f.b2 -o f.c2
 error       : 2
 working dir :
</pre>
<p>In the example above, the <em>findrange_j3</em> job has failed, and the analyzer displays information about the job, showing that the job finished with a <em>POST_SCRIPT_FAILURE</em>, and lists the <em>submit</em>, <em>output</em> and <em>error</em> files for this job. Whenever <strong>pegasus-analyzer</strong> detects that the output file contains a kickstart record, it will display the breakdown containing each task in the job (in this case we only have one task). Because <strong>pegasus-analyzer</strong> was not invoked with the <strong>--quiet</strong> flag, it will also display the contents of the <em>output</em> and <em>error</em> files (or the stdout and stderr sections of the kickstart record), which in this case are both empty.</p><p>In the case of <em>SUBDAG</em> and <em>subdax</em> jobs, <strong>pegasus-analyzer</strong> will indicate it, and show the command needed for the user to debug that sub-workflow. For example:</p>
<pre>
=================subdax_black_ID000009=====================

  last state: JOB_FAILURE
        site: local
 submit file: /home/user/run1/subdax_black_ID000009.sub
 output file: /home/user/run1/subdax_black_ID000009.out
  error file: /home/user/run1/subdax_black_ID000009.err
  This job contains sub workflows!
  Please run the command below for more information:
  pegasus-analyzer -d /home/user/run1/blackdiamond_ID000009.000

-----------------subdax_black_ID000009.out-----------------

Executing condor dagman ...

-----------------subdax_black_ID000009.err-----------------
</pre>
<p>tells the user the <em>subdax_black_ID000009</em> sub-workflow failed, and that it can be debugged by using the indicated <strong>pegasus-analyzer</strong> command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pegasus-analyzer&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/pegasus-status.1.html"><strong>pegasus-status</strong>(1)</a>, <a href="../man1/pegasus-monitord.1.html"><strong>pegasus-monitord</strong>(1)</a>, <a href="../man1/pegasus-statistics.1.html"><strong>pegasus-statistics</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Fabio Silva &lt;fabio at isi dot edu&gt;</p><p>Karan Vahi &lt;vahi at isi dot edu&gt;</p><p>Pegasus Team \m[blue]<strong>http://pegasus.isi.edu</strong>\m[]</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="peg.1.html"><span aria-hidden="true">&larr;</span> peg.1: Parser generators</a></li>
   <li class="next"><a href="pegasus-archive.1.html">pegasus-archive.1: Compresses a workflow submit directory in a way that allows pegasus-dashboard, pegasus-statistics, pegasus-plots, and pegasus-analyzer to keep working. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
