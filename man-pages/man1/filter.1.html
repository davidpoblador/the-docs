<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>filter: Filter incoming messages before adding to mailbox</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Filter incoming messages before adding to mailbox">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="filter (1) manual">
  <meta name="twitter:description" content="Filter incoming messages before adding to mailbox">
  <meta name="twitter:image" content="https://www.carta.tech/images/filter-filter-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/filter.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="filter (1) manual" />
  <meta property="og:description" content="Filter incoming messages before adding to mailbox" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/filter-filter-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">filter<small> (1)</small></h1>
        <p class="lead">Filter incoming messages before adding to mailbox</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/filter.1.html">
      <span itemprop="name">filter: Filter incoming messages before adding to mailbox</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/filter/">
      <span itemprop="name">filter</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/filter.1.html">
      <span itemprop="name">filter: Filter incoming messages before adding to mailbox</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>filter</strong> [-q] [-v] [-l] [-o output] [-f rules-file] [-m mailbox]</p><p><strong>filter</strong> [-n] [-f rules-file]</p><p><strong>filter</strong> [-r] [-o output] [-f rules-file]</p><p><strong>filter</strong> [-c] [-s] [-o output] [-f rules-file]</p><p><strong>filter</strong> [-c] [-S] [-o output] [-f rules-file]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>In brief, <em>filter</em> is designed to sort incoming mail based on user preferences for various recognized headers. It logs a summary of messages filtered to a logfile. See the USAGE section for full details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The flags the <em>filter</em> program understands are;</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-c</strong></p>
  </dt>
  <dd>
    <p>Clear logs.  If this flag is used, the log files will be removed after being summarized by either "-s" or "-S" (see below).</p>
  </dd>
  <dt>
    <p><strong>-f </strong><em>rules-file</em></p>
  </dt>
  <dd>
    <p>Get rules from specified file instead of default $HOME/.filter/filter-rules</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>Log actions only.  Do not log information about mailed messages.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>Not really.  Output what would happen if given message from standard input, but don't actually do anything with it.</p>
  </dd>
  <dt>
    <p><strong>-o </strong><em>file</em></p>
  </dt>
  <dd>
    <p>Redirect stdout messages to the specified file or device. Logging of filter actions is not affected.  (This is added to more gracefully deal with changes in the file system (since sendmail is quite picky about modes of files being redirected into.))</p>
  </dd>
  <dt>
    <p><strong>-m </strong><em>mailbox</em></p>
  </dt>
  <dd>
    <p>Override the compiled in definition of your primary 'mailbox'. This is disabled if filter is setgid.</p>
  </dd>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>Quiet.  Do not log filtering actions.</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>Rules.  List the rules currently being used.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>Summarize.  List a summary of the message filtering log.</p>
  </dd>
  <dt>
    <p><strong>-S</strong></p>
  </dt>
  <dd>
    <p>This is the same as `-s' but includes message-by-message information additionally.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Verbose.  Give output on standard out for each message filtered.  May be useful to set output to ``/dev/console'' or other logging device.  (see <strong>-o</strong>).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p><em>Filter</em> uses a set of selection rules to process incoming mail messages. These rules are normally read in from $HOME/.filter/filter-rules. As soon as a rule matches something about the message, that rule is used, and no further action is taken. The general format for a rule is;</p>
<pre>
        <strong>if  (</strong><em>expression</em><strong>)  then  </strong><em>action</em>

</pre>
<p>where <em>expression</em> is:</p>
<pre>
        <em>expression</em>  ::=  { <strong>not</strong> }  <em>condition</em>  { and <em>expression</em> }

        <em>condition</em>  ::=  <em>field  =  stringvalue</em>
		         ::=  <em>field  != stringvalue</em>
                   ::=  <strong>lines</strong><em>  relop  numvalue</em>
or                 ::=  <strong>always</strong>

</pre>
<p>These further break down as:</p>
<pre>
        <em>field</em>  ::=  <strong>from</strong>  |  <strong>subject</strong>  |  <strong>alphasubject</strong>  |  <strong>to</strong>  |  <strong>lines</strong> | <strong>sender</strong>

        <em>relop</em>  ::=  <strong>=</strong>  |  <strong>!=</strong>  |  <strong>&lt;</strong>  |  <strong>&gt;</strong>  |  <strong>&lt;=</strong>  |  <strong>&gt;=</strong>

        <em>stringvalue</em>  ::=  <em>any  quoted  string</em>

        <em>numvalue</em>  ::=  <em>any  integer  value</em>

</pre>
<p>Note: <strong>alphasubject</strong> is a transformed version of the subject line, where only alpha chars are preserved, and they are forced to lower case. It is then simpler to use a regular expression match across a wide variety of similar subjects.</p><p><strong>from</strong> matches any and all of the following headers:</p>
<pre>
  "From " From: Reply-To: Sender:
</pre>
<p><em>Action</em> can be any of:</p>
<pre>
    <strong>delete</strong>              (ignore this message; throw it away)
    <strong>save  </strong><em>foldername</em>    (put in 'foldername' for later)
    <strong>savecopy </strong><em>foldername</em> (save a copy AND put in my inbox)
    <strong>execute  </strong><em>command</em>    (pipe message to 'command')
    <strong>executec </strong><em>command</em>    (copy to inbox, AND pipe to 'command')
    <strong>forward  </strong><em>address</em>    (forward this message)
    <strong>forwardc </strong><em>address</em>    (forward this message, AND copy to inbox)
    <strong>resend   </strong><em>address</em>    (resend to new addr without change)
    <strong>leave</strong>               (just put it in my inbox)
    <strong>bounce</strong>              (say there's no such user)

</pre>
<p>An example of a rules file would be:</p>
<pre>
    # I'll read this stuff later when I feel like it
    if (from = "list@interest.org") then save "~/Mail/mailinglist"
    # This mailing list actually has an x-mailing-list header
    if (mailinglist = "smartlist@other.com") then save "~/Mail/otherlist"
    # auto-archive this project's email, AND put in my current mailbox
    if (subject = "strange project") then savecopy "~/Mail/proj-archive"
    # If "make money" appears ANYWHERE in subject, upper/lowercase,
    # delete the lousy spam
    if ( subject = "make money" ) then delete
    # This person no longer shares this virtual mailbox with me.
    # Resend visibly as a "forwarded" message.
    if (to = "partner") then forward "partner@new.address.com"
    # If email for an old address comes to me, resend to new one.
    # Note that the "envelope" will show my address, but the
    # normal headers will not
    if ( to = "old_address" ) then resend new@address.here"
    # Special virtual headerline derived from normal subject line
    # catches "multiple!!!wor+ds**here"
    if ( alphasubject = "multiplewordshere" ) then delete
    # If email for a special address comes to me, resend through
    # a non-standard "special" mailer
    if ( to = "special_address" ) then exec "/usr/lib/mailer special@addr"
    #
    # The rules file doesnt really need parentheses. Or even the 'if'.
    # They are just traditional.
    subject = "silly" then bounce
</pre>
<p>Note that all filenames must be double-quoted</p><p>For further information about the rules language, please see <em>The Elm Filter Guide</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MAINTAINER</h2>
        <div class="sectioncontent">
<p>Philip Brown</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>$HOME/.filter/filter-rules Default rules file</p><p>$HOME/.filter/filterlog    A log of what has been done</p><p>$HOME/.filter/filtersum    A summary of what has been done</p><p>$MAIL                   IF you set this var, defines your</p>
<pre>
                        default mailbox
</pre>
<p>/etc/passwd             Used to get users home directory</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO filter&hellip;</h2>
        <div class="sectioncontent">
<p><em>The Elm Filter Guide</em> (distributed with the source code)</p><p><strong>mail</strong>(1), <strong>mailx</strong>(1), sendmail(1,8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMENTS</h2>
        <div class="sectioncontent">
<p>Could be smarter about pattern matching. Message body checks might be nice too.</p><p>Please note that this was historically bundled with the elm mail reader, but now can be found at</p><p>http://www.bolthole.com/filter/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUG REPORTS TO</h2>
        <div class="sectioncontent">
<p>filter@bolthole.com</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHTS</h2>
        <div class="sectioncontent">
<p><strong>\*(ct</strong>Copyright 1988-1992 by The USENET Community Trust</p><p>Derived from Elm 2.0, <strong>\*(ct</strong> Copyright 1986, 1987 by Dave Taylor</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fillRSAImpInterp.1.html"><span aria-hidden="true">&larr;</span> fillRSAImpInterp.1: Generic ctn manual page</a></li>
   <li class="next"><a href="filter_hssp.1.html">filter_hssp.1: Filters an hssp file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
