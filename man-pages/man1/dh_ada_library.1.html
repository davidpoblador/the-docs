<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dh_ada_library: Help packaging ada libraries for debian</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Help packaging ada libraries for debian">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dh_ada_library (1) manual">
  <meta name="twitter:description" content="Help packaging ada libraries for debian">
  <meta name="twitter:image" content="https://www.carta.tech/images/dh-ada-library-dh_ada_library-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/dh_ada_library.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dh_ada_library (1) manual" />
  <meta property="og:description" content="Help packaging ada libraries for debian" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dh-ada-library-dh_ada_library-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dh_ada_library<small> (1)</small></h1>
        <p class="lead">Help packaging ada libraries for debian</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dh_ada_library.1.html">
      <span itemprop="name">dh_ada_library: Help packaging ada libraries for debian</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dh-ada-library/">
      <span itemprop="name">dh-ada-library</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dh_ada_library.1.html">
      <span itemprop="name">dh_ada_library: Help packaging ada libraries for debian</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dh_ada_library</strong> [\|<em>debhelper options</em>\|] [\|[\|<em>variable=value</em> .\|.\|.\|] <em>project.gpr</em>\|]<em> .\|.\|.</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>dh_ada_library</strong> is a debhelper program that handles some common tasks in packaging libraries written in the Ada programming language.</p><p>Each <em>project.gpr</em> argument designates a GNAT project file building a shared library provided by the source package. Since using environment variables in such projects is common practice, a list of variable assignments may be provided before each project.</p><p><strong>dh_ada_library</strong> reads each project file and extracts the following information from it: library name, imported projects, source directories, ALI files directory and linker options. Then it parses <em>debian/control</em> to check that three package names exist conforming to the Coexistence Not Allowed naming scheme described in the <strong>Debian Policy for Ada</strong> and extracts the ALI files version (<em>aliversion</em>)) and the shared library version (<em>soversion</em>). Then, <strong>dh_ada_library</strong> processes each of the three packages as follows:</p><h3>Runtime library package</h3>
<p><strong>dh_ada_library</strong> installs the shared library (mode 644) into the package then runs <strong>dh_strip</strong> with options storing its debugging information into the -dbg package.</p><p>If the shared library declares its stack executable, <strong>dh_ada_library</strong> generates a lintian override for the runtime library package about GNAT using trampolines for exception handling. <strong>dh_lintian</strong> is run first so that it will not overwrite the override file later.</p>
<h3>Debugging symbols (-dbg) package</h3>
<p>The <em>ada:Depends</em>, <em>ada:Recommends</em>, <em>ada:Suggests</em> substitution variables receive values reflecting that the -dbg package depends on the library package, recommends the -dev package and suggests the <em>gnat</em> package.</p><p>Versions &lt;= 5.3 used to replace the documentation directory with a symbolic link to the one in the runtime library package, but usage has shown that linking directories caused upgrade problems. If a binary package built with such a version has been released, the source package should add maintainer scripts as described in https://wiki.debian.org/MissingCopyrightFile.</p>
<h3>Development package (-dev)</h3>
<p>First, <strong>dh_ada_library</strong> installs the usual development symbolic link (*.so-&gt; *.so.<em>soversion</em>), ALI files (mode 444) and sources (mode 644) into the -dev package. Languages other than Ada listed in the project file are taken into account, whether they have been previously dealt with by <em>gprbuild</em>, or ignored by <em>gnatmake</em> and compiled separately. Then it looks for a file named <em>lib</em>LIBRARY_NAME<em>.a</em> (the static library) in the current directory or its subdirectories and installs this file (mode 644) into the -dev package.</p><p>A second project file, intended for use by programs linking against the library, is generated and installed into the -dev package. The <em>Linker</em> package of the new project inherits any <strong>-l</strong> or <strong>-L</strong> linker options from <em>Leading_Library_Options</em> and <em>Library_Options</em> attributes of the build project file.</p><p>Each renaming exception is transmitted to the generated project.</p><p><strong>dh_ada_library</strong> runs <strong>dh_strip</strong> before installing the static library so that the latter keeps its debugging information.</p><p>The <em>ada:Depends</em> substitution variable receives a value reflecting that the package depends on <em>gnat</em>, <em>gnat-X.Y</em> and the library package. For each imported library project recognized, either as already processed or installed on the build system by <strong>dpkg-query</strong>, a dependency is added into <em>ada:Depends</em> and the generated project is added the corresponding <em>with</em> line. In the case of an already processed project within the same source package, the dependency mandates an exact <em>binary:Version</em>, ensuring that all static libraries are compiled with compatible options.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REMARKS</h2>
        <div class="sectioncontent">
<p>This program does not belong to the debhelper suite. To activate it, please run the <strong>dh</strong> sequencer with the <em>--with&nbsp;ada-library</em> option.</p><p>The <em>Library_Version</em> project attribute is purposedly ignored. Instead, the soname is guessed from the library package name. For projects needing an external variable definition to set this attribute, any arbitrary value may be given. This will often allow the maintainer to use a simple <em>debian/ada_libraries</em> file instead of a debhelper override or an environment variable exportation.</p><p>Both libraries and ALI files are installed into <em>/usr/lib/</em>DEB_HOST_MULTIARCH, the project and sources into <em>/usr/share/ada/adainclude</em>. This implies that the -dev package cannot be declared <em>Multi-Arch: same</em> as the content of the project (and maybe of generated sources) will vary across architectures.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>debian/ada_libraries</em></p>
  </dt>
  <dd>
    <p>Projects and variables, in addition to those in the command line if called directly from <em>debian/rules</em>. Line breaks are considered as normal spaces. This may change in the future and it is recommended to put exactly one affectation or project on each line. Any line starting with a dash will be ignored.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Common debhelper command line options and environment variables are recognized.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>dh_ada_library 'DIRS=src gen SOVERSION=ignored foo.gpr --verbose --no-act</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dh_ada_library&hellip;</h2>
        <div class="sectioncontent">
<p><strong>debhelper</strong>(7), <strong>dh_installdocs</strong>(1), <strong>dh_lintian</strong>(1), <strong>dh_strip</strong>(1), <a href="../man5/deb-substvars.5.html"><strong>deb-substvars</strong>(5)</a>, the <strong>Debian Policy for Ada</strong> available at http://people.debian.org/~lbrenta/debian-ada-policy.html.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>dh_ada_library</strong> and this manpage were written by Nicolas Boulenguez &lt;nicolas@debian.org&gt; for the Debian project (and may be used by others).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dh-make-pecl.1.html"><span aria-hidden="true">&larr;</span> dh-make-pecl.1: Create debian source packages from pecl extensions</a></li>
   <li class="next"><a href="dh_bash-completion.1.html">dh_bash-completion.1: Install bash completions for package <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
