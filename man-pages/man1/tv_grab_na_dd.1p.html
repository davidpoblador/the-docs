<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tv_grab_na_dd: Grab tv listings for north america using schedules direct http://www.schedulesdirect.org</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Grab tv listings for north america using schedules direct http://www.schedulesdirect.org">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tv_grab_na_dd (1p) manual">
  <meta name="twitter:description" content="Grab tv listings for north america using schedules direct http://www.schedulesdirect.org">
  <meta name="twitter:image" content="https://www.carta.tech/images/xmltv-util-tv_grab_na_dd-1p.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1p/tv_grab_na_dd.1p.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tv_grab_na_dd (1p) manual" />
  <meta property="og:description" content="Grab tv listings for north america using schedules direct http://www.schedulesdirect.org" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xmltv-util-tv_grab_na_dd-1p.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tv_grab_na_dd<small> (1p)</small></h1>
        <p class="lead">Grab tv listings for north america using schedules direct http://www.schedulesdirect.org</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/tv_grab_na_dd.1p.html">
      <span itemprop="name">tv_grab_na_dd: Grab tv listings for north america using schedules direct http://www.schedulesdirect.org</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xmltv-util/">
      <span itemprop="name">xmltv-util</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/tv_grab_na_dd.1p.html">
      <span itemprop="name">tv_grab_na_dd: Grab tv listings for north america using schedules direct http://www.schedulesdirect.org</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    tv_grab_na_dd --help

    tv_grab_na_dd --version

    tv_grab_na_dd --capabilities

    tv_grab_na_dd --configure [--config-file FILE] [--dd-data FILE]
                              [--reprocess] [--auto-config add|ignore]
                              [--gui OPTION]

    tv_grab_na_dd --list-lineups [--config-file FILE] [--dd-data FILE]
                                 [--reprocess]

    tv_grab_na_dd [--config-file FILE] [--dd-data FILE]
                  [--reprocess] [--auto-config add|ignore]
                  [--days N] [--offset N] [--quiet] [--notrim]
                  [--old-chan-id] [--low-mem] [--output FILE]
                  [--list-channel] [--share SHAREDIR] [--list-times]
                  [--download-only] [--padd n] [--dropbadchar] [--agent NAME]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This script downloads \s-1TV\s0 listings using Schedules Direct's data service, converts it to \s-1XMLTV\s0 format, and outputs the results.</p><p>You must first register with Schedules Direct at: &lt;http://www.schedulesdirect.org&gt;</p><p>Schedules Direct is a non-profit organization whose mission is to provide low-cost television program guide data to end-users of Open Source and Freeware applications.</p><p>The raw data source is Tribune Media Service's Data Direct Service, which is very similar to the free Zap2IT Labs service Tribune previously offerred.</p><p>While the service is not available for free, Schedules Direct strives to keep costs as low as possible.</p><p>First you must become a member at the &lt;http://www.schedulesdirect.org&gt;  site.</p><p>Next, you use that website to add lineup(s) to your account.</p><p>Next, you execute \*(C`tv_grab_na_dd --configure\*(C' to set up the grabber.</p><p>Finally, you execute <strong>tv_grab_na_dd</strong> with no arguments and it will output listings in \s-1XML\s0 format to standard output.  See below for other options.</p><p>Like many utilities, tv_grab_na_dd tries to exit with a \*(L"0\*(R" on success and something else on error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Stand-alone options</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    --help
  </dt>
  <dd>
    <p>Print a help message and exit.</p>
  </dd>
  <dt>
    --version
  </dt>
  <dd>
    <p>Show the version of the grabber.</p>
  </dd>
  <dt>
    --capabilities
  </dt>
  <dd>
    <p>Show which capabilities the grabber supports. For more information, see &lt;http://wiki.xmltv.org/index.php/XmltvCapabilities&gt;</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Mode selection (default is grab mode)</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    --configure
  </dt>
  <dd>
    <p>Activates configure mode.  If a config file already exists the values are used as defaults.</p>
  </dd>
  <dt>
    --gui \s-1OPTION\s0
  </dt>
  <dd>
    <p>Use this option to enable a graphical interface to be used. \s-1OPTION\s0 may be 'Tk', or left blank for the best available choice. Additional allowed values of \s-1OPTION\s0 are 'Term' for normal terminal output (default) and 'TermNoProgressBar' to disable the use of Term::ProgressBar.</p>
  </dd>
  <dt>
    --list-lineups
  </dt>
  <dd>
    <p>Lists available lineups.  Only requires username in the config file. Used by programs that automate the \*(L"--configure\*(R" process.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">General Options</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    --config-file <em>file</em>
  </dt>
  <dd>
    <p>Set the name of the configuration file, the default is <strong>~/.xmltv/tv_grab_na_dd.conf</strong>. This is the file created during \*(L"--configure\*(R" mode.</p>
  </dd>
  <dt>
    --dd-data <em>file</em>
  </dt>
  <dd>
    <p>Store raw Data Direct data to this file. (default is a temporary file)</p>
  </dd>
  <dt>
    --reprocess
  </dt>
  <dd>
    <p>Don't get data from Data Direct, but reprocess a file saved with --dd-data.</p>
  </dd>
  <dt>
    --auto-config <em>add|ignore</em>
  </dt>
  <dd>
    <p>When used in --configure mode, updates the config file, removing old channels, and adding or ignoring new channels.  Prompts are skipped if defaults are available in the current config file. When used in grab mode, appends new channels to the config file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Grabber Mode options</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    --days <em>n</em>
  </dt>
  <dd>
    <p>Grab <em>n</em> days.  The default is 7.</p>
  </dd>
  <dt>
    --offset <em>n</em>
  </dt>
  <dd>
    <p>Start N days after the default.</p>
  </dd>
  <dt>
    --quiet
  </dt>
  <dd>
    <p>Suppress some messages normally written to standard error.</p>
  </dd>
  <dt>
    --notrim
  </dt>
  <dd>
    <p>Data Direct includes shows in progress at the start time.  The default behavior is to filter these shows out so data can be cleanly split between days.  This option turns off that filter so you get shows in progress a tthe start time.</p>
  </dd>
  <dt>
    --old-chan-id
  </dt>
  <dd>
    <p>Use a channel id similar to the one used by the old <strong>tv_grab_na</strong> grabber.</p>
  </dd>
  <dt>
    --low-mem
  </dt>
  <dd>
    <p>Omit all but the most basic program information. Reduces memory usage.</p>
  </dd>
  <dt>
    --output <em>file</em>
  </dt>
  <dd>
    <p>Write xml to <em>file</em> rather than standard output.</p>
  </dd>
  <dt>
    --list-channel
  </dt>
  <dd>
    <p>Same as <strong>--days</strong> 0</p>
  </dd>
  <dt>
    --share <em>\s-1SHAREDIR\s0</em>
  </dt>
  <dd>
    <p>tv_grab_na_icons stores icons in <em>\s-1SHAREDIR\s0</em>/icons.  The share directory is set at install time, but there may be times when it needs to be specified. (for example: no write access to the default share directory)</p>
  </dd>
  <dt>
    --list-times
  </dt>
  <dd>
    <p>Report to \s-1STDERR\s0 the Schedules Direct blockedTime (not currently enforced) and suggestedTime values to assist automated processes with scheduling.</p>
  </dd>
  <dt>
    --download-only
  </dt>
  <dd>
    <p>Don't generate any output, just fetch the data.  Personally I don't see the point, but it was requested and easy to add.</p>
  </dd>
  <dt>
    --padd <em>n</em>
  </dt>
  <dd>
    <p>Add &lt;n&gt; spaces to the front of the start date.  This is normally not needed, but can be helpful in working around a Tribune problem when the request packet spans \s-1TCP\s0 packets.  Recommended initial value is \*(L"20\*(R".  This is only needed if you get \*(L"invalid start time\*(R" messages.  If this helps, please post results to the list.</p>
  </dd>
  <dt>
    --dropbadchar
  </dt>
  <dd>
    <p>\s-1DD\s0 data is supposed to be in \s-1UTF-8\s0 format.  Sometimes \s-1DD\s0 sends bad characters which cause a \*(L"Bad \s-1XML\s0 from \s-1DD\s0\*(R" error.  This option causes those bad characters to be deleted.</p>
  </dd>
  <dt>
    --agent \s-1NAME\s0
  </dt>
  <dd>
    <p>appends \s-1NAME\s0 to the http agent string when fetching data.  This is a polite way to tell Schedules Direct which application is being used.  It helps developers know how many people are using their application and gives applications credit towards free accounts.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Automating configuration</h2>
        <div class="sectioncontent">
<p>Sometimes applications want to call <strong>tv_grab_na_dd</strong> as a standalone application, but automate the configure process.  The best way is to hook in to the XMLTV::Ask module, but if that's not available, here is a solution.</p><p>Step1. Application creates config file with username (and optionally password). Step2. \*(C`tv_grab_na_dd --dd-data lineups.xml --list-lineups\*(C' Step3. Application adds desired lineup to config file. Step4. \*(C`tv_grab_na_dd --dd-data lineups.xml --reprocess --auto-config add --list-channels\*(C' Step5. Application edits config file as needed, and deletes lineups.xml.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Grabber Timing</h2>
        <div class="sectioncontent">
<p>Data Direct offers a \*(L"suggested download time\*(R" that can be retrieved with the \*(L"--list-times\*(R" option. Its use is encouraged.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Handling Multiple Linups</h2>
        <div class="sectioncontent">
<p>tv_grab_na_dd only outputs a single lineup. If your Schedules Direct account has multiple lineups, they are all downloaded even though only one is output.</p><p>To process multiple lineups, use separate --config-file. Separate config files are also handy if you need different channel sets for a lineup (common with MythTV). To prevent re-downloading the data on subsequent passes, the \*(L"--reprocess\*(R" option is recommended.</p><p>Here's an example: (the = sign is optional, but helps readability)</p><p> tv_grab_na_dd --config-file=lineup1.dat --output=lineup1.xml --dd-data=dd.xml  tv_grab_na_dd --config-file=lineup2.dat --output=lineup2.xml --dd-data=dd.xml --reprocess  tv_grab_na_dd --config-file=lineup3.dat --output=lineup3.xml --dd-data=dd.xml --reprocess</p><p>Each config file specifies the desired lineup and channel list.</p><p>If you want to merge the lineups into a single file, you can use tv_cat</p><p> tv_cat lineup1.xml lineup2.xml lineup3.xml &gt;guide.xml \s-1TMS\s0's Data direct service proivdes listings for a few non US/Canada locations.  These are accessed with \*(L"fake\*(R" postal codes.  The following are available:</p><p>    147BERM Bermuda Cablevision     366HAMI Hamilton, Bermuda Wow World on Wireless     101VENE DirecTV Latin America     904MEXI Mexico #1     954MEXI Mexico #2     512TRIN Trinidad Express     782YOKO Yokota AFB, Japan. Americable International</p><p>For a more complete list, check the Schedules Direct \s-1FAQ\s0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Adding icon links to listings</h2>
        <div class="sectioncontent">
<p><strong>tv_grab_na_dd</strong> checks for channel icons in a directory <strong></strong><strong>share</strong><strong></strong>/<strong>icons</strong>.  The <em>share</em> directory is usually set during the install.  For windows exe users, it defaults to the location where <strong>xmltv.exe</strong> is.  <strong>tv_grab_na_icons</strong> is available to download the icons.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Notes on channel lists</h2>
        <div class="sectioncontent">
<p>Channel lists can be configured both at the Schedules Direct website and through the grabber.  This is done to allow multiple config files with different channel lists as Schedules Direct only supports a single channel map per lineup.</p><p>Similarly, tv_grab_na_dd only supports a single channel mapping for a station. If multiple mappings are detected, only the first one is used and you are advised to adjust your Schedules Direct lineup.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Notes on episode numbers</h2>
        <div class="sectioncontent">
<p>Three episode-num formats are supplied (when available)</p>
<dl class='dl-vertical'>
  <dt>
    xmltv_ns
  </dt>
  <dd>
    <p>always \*(C`..a/b\*(C' for part \*(C`a\*(C' of \*(C`b\*(C'. First two xmltv_ns fields always blank.</p>
  </dd>
  <dt>
    dd_progid
  </dt>
  <dd>
    <p>\s-1TMS\s0 generated \*(C`a.b.c/d\*(C' where \*(C`a\*(C' is a unique program id, \*(C`b\*(C' is a unique episode id, \*(C`c/d\*(C' is part \*(C`c\*(C' of \*(C`d\*(C' similar to xmltv_ns.</p>
  </dd>
  <dt>
    onscreen
  </dt>
  <dd>
    <p>Distributor-designated number corresponding to an episode of a specific show. Varies by distributor.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Notes on passwords</h2>
        <div class="sectioncontent">
<p>If a password is stored in the config file, the config file should be properly protected. Instead of storing the password in the config file, it can be omitted, and will be prompted for.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Notes on lineup changes</h2>
        <div class="sectioncontent">
<p>Data Direct currently adds a channel to your lineup automatically when it is available.  When <strong>tv_grab_na_dd</strong> sees the new channel in the Schedules Direct lineup, it prints a message (and potentially adds or ignores it based on --auto-config).</p><p>If you are sensitive to bandwidth issues, I would set <strong>--auto-config ignore</strong> and periodically check your <strong>--config-file</strong> for ignored channels and remove from your Schedules Direct lineup.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Notes on previously-shown</h2>
        <div class="sectioncontent">
<p>Previous releases of tv_grab_na_dd set \s-1XMLTV\s0's \*(L"date\*(R" field for \s-1DD\s0 \*(L"original-air-date\*(R" field. The correct place for the data is \*(L"previously-shown-&gt;start\*(R"  The \s-1OAD\s0 is in both places temporarily for compatability reasons.</p><p>\s-1DD\s0 has dropped the \*(L"repeat\*(R" flag and replaced it with a \*(L"new\*(R" flag. Now we set "previously-shown</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Known issues</h2>
        <div class="sectioncontent">
<p>none!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tv_grab_na_dd&hellip;</h2>
        <div class="sectioncontent">
<p><em>xmltv</em>\|(5).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Author/Maintainer: Robert Eden, rmeden@yahoo.com</p><h3>Contributors:</h3>
<p>Ed Avis, ed@membled.com Don Huettl, drh@huettl.net Matti Airas, mairas@iki.fi (I used tv_grab_fi as a template) and of course everyone else I forgot to mention. :)</p>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tv_grab_it_dvb.1p.html"><span aria-hidden="true">&larr;</span> tv_grab_it_dvb.1p: Grab tv listings for italy from the dvb-s stream</a></li>
   <li class="next"><a href="tv_grab_na_dtv.1p.html">tv_grab_na_dtv.1p: Grab tv listings from directv. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
