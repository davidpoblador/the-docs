<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mplex: Mpeg 1/2 program/system stream multiplexer</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Mpeg 1/2 program/system stream multiplexer">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mplex (1) manual">
  <meta name="twitter:description" content="Mpeg 1/2 program/system stream multiplexer">
  <meta name="twitter:image" content="https://www.carta.tech/images/mjpegtools-mplex-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mplex.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mplex (1) manual" />
  <meta property="og:description" content="Mpeg 1/2 program/system stream multiplexer" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mjpegtools-mplex-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mplex<small> (1)</small></h1>
        <p class="lead">Mpeg 1/2 program/system stream multiplexer</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mplex.1.html">
      <span itemprop="name">mplex: Mpeg 1/2 program/system stream multiplexer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mjpegtools/">
      <span itemprop="name">mjpegtools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mplex.1.html">
      <span itemprop="name">mplex: Mpeg 1/2 program/system stream multiplexer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mplex</strong> [<strong>-f|--format</strong> <em>format_code</em>] [<strong>-i|--vdr-index]</strong> <em>index_pathname</em> [<strong>-v|--verbose</strong> <em>num</em>] [<strong>-b|--video-buffer</strong> <em>video_buffer_size_kB</em>[, <em>video_buffer_size_kB</em>...]<em>]</em> [<strong>-L|--lpcm-params</strong> <em>params</em>[, <em>params</em>...<em>]</em>] [<strong>-r|--mux-bitrate</strong> <em>muxed_bitrate_kbps</em>] [<strong>-l|--mux-limit</strong> <em>num</em>] [<strong>-O|--sync-offset</strong> <em>num[</em><strong>ms</strong><em>|</em><strong>s</strong><em>|</em><strong>mpt</strong><em>]</em>] [<strong>-d|--subpicture-delay</strong> <em>[</em><strong>ms</strong><em>|</em><strong>s</strong><em>|</em><strong>mpt|</strong><strong>c</strong><strong>]</strong>[:stream-id]<em>[,</em>delay[:stream-id]<em>]</em> [<strong>-R|--run-in</strong> <em>num</em>] [<strong>-V|--vbr]</strong> [<strong>-C|--cbr]</strong> [<strong>-s|--sector-size</strong> <em>sector_size_B</em>] [<strong>-p|--packets-per-pack</strong> <em>num</em>] [<strong>-h|--system-headers</strong>] [<strong>-S|--max-segment-size</strong> <em>output_filesize_limit_MB</em>] [<strong>-M|--split-segment]</strong></p><p>[<strong>-?|--help</strong>] <strong>-o|--output</strong><em></em><strong>output_pathname_pattern</strong><em></em><strong>input_file...</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Mplex is a general-purpose audio/video multiplexer for MPEG-1/MPEG-2. It accepts one or more MPEG-1/2 video stream, MPEG layer I/II/III, DTS, AC3 and LPCM audio streams and multiplexes them into a combined program/system stream according to the constraints specified.  Many different types of output structure are supported along with presets for standard VCD and SVCD streams.  These latter can be burned to CD using tools such as <a href="../man1/vcdimager.1.html"><strong>vcdimager</strong>(1)</a> and played in stand-alone players.</p><p>It is also capable of automatically splitting the output stream into chunks of a specified size either independently or at sequence end/start points in the input video stream.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERAL FUNCTION LETTERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-o|--output</strong><em></em><strong>output_filename_pattern</strong></p>
  </dt>
  <dd>
    <p>This mandatory option sets the pattern for the name(s) of output files.</p><p>An integer format code (e.g. %d) in the name is replaced by the number of the file generated (see <a href="../man3/printf.3.html"><strong>printf</strong>(3)</a>).</p>
  </dd>
  <dt>
    <p><strong>-v|--verbose</strong><em></em><strong>num</strong></p>
  </dt>
  <dd>
    <p>Set verbosity level to <em>num</em>:  0 - warnings and errors only,  1 - information as well,  2 - really verbose.</p>
  </dd>
  <dt>
    <p><strong>-?|--help</strong></p>
  </dt>
  <dd>
    <p>Display a synopsis of the command syntax.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTION LETTERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-f|--format</strong><em></em><strong>format_code</strong></p>
  </dt>
  <dd>
    <p>This command allows one of a number of convenient preset output formats or generic MPEG1 or MPEG2 output to be selected. For the generic formats other function letters can be used to control many aspects of the multiplexed stream.  For VCD/SVCD/DVD compliant output the corresponding formats <em>must</em> be used as the standards require the multiplexer to enforce a variety of special constraints on the structure of the output stream.</p><ul>
<li><p> 0 - Generic MPEG1.  A simple general-purpose MPEG1 format primarily suitable for software decoders.  Buffer sizes and VBR must be specified. Bit-rate can be auto-detected.  1 - VCD.  Standard VCD.  Overrides other option settings.  2 - User VCD.  VCD format but buffer size, bit rate and VBR can be set manually.  3 - Generic MPEG2.  Like 0 except MPEG2.  4 - SVCD.  Standard SVCD.  Overrides other option settings.  5 - User-rate SVCD.  SVCD format but buffer size bit rate and VBR can be set.  6 - VCD Stills stream (mixed mode with hi-res and standard-res image streams 	 multiplexed are supported).  7 - SVCD Stills stream.  8 - DVD (with NAV sectors). Don't get too excited.  This is really a  very minimal mux format.  It includes empty versions of the peculiar  VOBU start sectors DVD VOB's include.  This is enough to persuade some  hardware players to play the stream but is a long way from full DVD authoring.  9 - DVD.  As above but without the empty VOBU sectors.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-W|--workarounds</strong><em></em><strong>workaround_flag</strong><em></em><strong>[,</strong><em></em><em>workaround_flag</em><strong>...]</strong></p>
  </dt>
  <dd>
    <p>A comma-seperated list of flags that set special work-arounds for what are suspected to be parser Bugs in widely used players. No workarounds are (currently) implemented but history suggests this may change quickly ;-) <strong>-i|--vdr-index</strong><em></em><strong>index_pathname</strong> This tells mplex to generate an index file for the output in the format used by the 'vdr' (video disk recorder package). Useful if you want to write output into vdr's recordings directory for playback on your video recorder PC. This probably only useful in combination with -f 9.</p>
  </dd>
  <dt>
    <p><strong>-r|--mux-bitrate</strong><em></em><strong>num</strong></p>
  </dt>
  <dd>
    <p>The total (non VBR) / peak (VBR) bit-rate of the output stream in k Bits/sec. If unspecified and not set by a preset it is automatically calculated from the input stream.</p>
  </dd>
  <dt>
    <p><strong>-b|--video-buffer</strong><em></em><strong>numlist</strong></p>
  </dt>
  <dd>
    <p>A comma-seperateed list of video decoder buffer sizes in KB for the video streams (given in the order the video streams appear on the command line).  The default is 46KB the (tiny) size specified for VCD. The size to use for SVCD is the (more reasonable) 230KB.  If you are encoding for a half-decent software decoder it makes sense to push this up to 500K or more.</p>
  </dd>
  <dt>
    <p><strong>-L|--lpcm-params</strong></p>
  </dt>
  <dd>
    <p><em>samples_per_sec:channels:bits_per_sample</em></p><p>[, <em>samples_per_sec:channels:bits_per_sample</em>  ...]</p><p>A comma-seperated list of paramter sets for the lpcm audio streams (given in the order the lpcm streams appear on the command line). Each parameter set comprises the sampling rate in Hz, the number of channels, and the number of bits per sample seperated by colons.  For example, the default 48kHz two-channel 16-bit audio would be specified as 48000:2:16.</p><ul>
<li><p>Note: these parameters are necessary because mplex expects raw LPCM audio data without any headers.  That is: for each sample point a group of 16,20, or 24 bit amplitude values, one for each channel. Amplitude values are signed with the constituent bytes in big-endian (most significant bytes first) order.  For 20 bit samples I am not sure but what documentation I have suggests such samples are padded at the lsb end so that they byte-align at the most significant bits.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-l|--mux-limit</strong><em></em><strong>num</strong></p>
  </dt>
  <dd>
    <p>Multiplex limit.  Multiplex only the specified number of seconds. Useful for tuning and debugging.</p>
  </dd>
  <dt>
    <p><strong>-O|--sync-offset</strong><em></em><strong>num[</strong><strong>ms</strong><strong>|</strong><strong>s</strong><strong>|</strong><strong>mpt</strong><strong>|</strong><strong>c</strong><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set the presentation timestamp offset of video stream w.r.t. audio stream (video-audio) in mSec.   This flag is used to produce a stream with synchronised audio/video when one stream started before/after the other.  This is common when transcoding as the synchronisation information is typically lost during the (seperate) decoding/encoding of audio and video.</p><ul>
<li><p>By appending 's', 'ms' or 'mpt' the offset can given in seconds, milliseconds or MPEG clock ticks (1/90000th of a second) respectively. If no suffix is given milliseconds are assumed.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-d|--subpicture-delay</strong><em></em><strong>num</strong><em>[</em><strong>ms</strong><em>|</em><strong>s|</strong><strong>mpt</strong><strong>|</strong><strong>c</strong><strong>]</strong><strong>[:stream-id]</strong><em>[,</em><strong>delay[:stream-id]]</strong></p>
  </dt>
  <dd>
    <p>Specify offset of timestamps (video-subpicture) in msec sec, mpt or clock-ticks. If no suffix is given milliseconds are assumed.</p><ul>
<li><p>The intention of the adding subtitle support was to enable mplex to mux all streams necessary for a DVD so that the mpeg2 stream created can be used directly for further dvd creation. Currently only ps1 streams (like created by tcextract) are supported</p></li><li><p>Valid subtitle stream are in a range of 32-63 (including). You may want to specify each stream you mplex, use "," to delimit each stream.</p></li><li><p><strong>Example:</strong> If you want to mux one video, one audio and two subtitle streams having delays of 500 and 1000 ms, the first shall have id 32, the second is 33 (Subtitle streams 0 and 1):</p></li><li><p>$ mplex -f 8 -o my_mpeg.mpeg -d 500:32,1000:33 video_in.mpv audio_in.m2a subtitle_0.ps1 subtitle_1.ps1</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-R|--run-in</strong><em></em><strong>num</strong></p>
  </dt>
  <dd>
    <p>Set a non-default run-in (the time data is preloaded into buffers before decoding is scheduled) at the start of each sequence in video frame intervals. By default a run-in matching the specified size of the video and audio buffers in the decoder and the type of multiplexing (constant or variable bit-rate) is selected automatically.</p>
  </dd>
  <dt>
    <p><strong>-V|--vbr</strong></p>
  </dt>
  <dd>
    <p>Force variable bit rate multiplexing even if selected profile defaults to constant-bit-rate.</p>
  </dd>
  <dt>
    <p><strong>-C||-cbr</strong></p>
  </dt>
  <dd>
    <p>Force constant bit rate multiplexing even if selected profile defaults to variable bit-rate.</p>
  </dd>
  <dt>
    <p><strong>-s|--sector-size</strong><em></em><strong>num</strong></p>
  </dt>
  <dd>
    <p>This option specifies the sector size of the output stream in bytes.</p>
  </dd>
  <dt>
    <p><strong>-p|--packets-per-pack</strong><em></em><strong>num</strong></p>
  </dt>
  <dd>
    <p>This option specifies the number of packets per pack in the output stream.</p>
  </dd>
  <dt>
    <p><strong>-S|--max-segment-size</strong><em></em><strong>num</strong></p>
  </dt>
  <dd>
    <p>This option specifies the maximum size of output files in MBytes (2^10) When the limit is reached a  new file is started. The default is (0) unlimited.</p><ul>
<li><p>Note: This option is <em>not</em> for splitting a long video across multiple VCD's or SVCD's.</p><p>It simply splits a single long sequence into in a way that prevents bits of a video GOP(group of pictures) or audio frame being split between chunks.  This is fine for formats like that used for DVDs where all stream parameters appear every GOP.  However, for VCD / SVCD it won't work as the players expect each file to start a new MPEG sequence.</p><p>For VCD / SVCD a different technique is used.  If mplex encounters a sequence break (sequence end followed by start) in the input video stream it starts a new output stream and file at the sequence start. Thus to split a long video across VCD's/SVCD's you have to get the MPEG video encoder to introduce sequence splits at the right points (see <a href="../man1/mpeg2enc.1.html"><strong>mpeg2enc</strong>(1)</a> for details of how to do this).</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-M|--ignore-seqend-markers</strong></p>
  </dt>
  <dd>
    <p>This flag makes mplex ignore sequence end markers embedded in the first video stream instead of switching to a new output file.  This is sometimes useful splitting a long stream in files based on a -S limit that doesn't need a run-in/run-out like (S)VCD.</p>
  </dd>
  <dt>
    <p><strong>-h|--system-headers</strong></p>
  </dt>
  <dd>
    <p>A system header is generated in every pack rather than just in the first.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTIC OUTPUT</h2>
        <div class="sectioncontent">
<p>When multiplexing using mplex you may get warning or error messages complaining about buffer underflow.  This means that the bit-rate you have specified is simply too low to permit the video and audio to be played back without skipping.  The fix is to either reduce the data-rate of the input material or increased the output stream bit-rate.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The multiplexer should handle MPEG(5.1) audio.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This man page was written by Andrew Stevens.</p><p>If you have questions, remarks, problems or you just want to contact the developers, the main mailing list for the MJPEG-tools is:</p>
<pre>
  <em>mjpeg-users@lists.sourceforge.net</em>
</pre>
<p>For more info, see our website at</p>
<pre>
  <em>http://mjpeg.sourceforge.net</em>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mplex&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/mpeg2enc.1.html"><strong>mpeg2enc</strong>(1)</a>, <a href="../man1/mp2enc.1.html"><strong>mp2enc</strong>(1)</a>, <a href="../man1/lavrec.1.html"><strong>lavrec</strong>(1)</a>, <a href="../man1/lavplay.1.html"><strong>lavplay</strong>(1)</a>,  <a href="../man1/lav2yuv.1.html"><strong>lav2yuv</strong>(1)</a>, <a href="../man1/lav2wav.1.html"><strong>lav2wav</strong>(1)</a>, <a href="../man1/yuvscaler.1.html"><strong>yuvscaler</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mplength.1.html"><span aria-hidden="true">&larr;</span> mplength.1: Calculates length of mpd playlist</a></li>
   <li class="next"><a href="mpload.1.html">mpload.1: Store and transfer mpd state between daemons <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
