<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mpiexec.lam: Run mpi programs on lam nodes.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run mpi programs on lam nodes.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mpiexec.lam (1) manual">
  <meta name="twitter:description" content="Run mpi programs on lam nodes.">
  <meta name="twitter:image" content="https://www.carta.tech/images/lam-runtime-mpiexec.lam-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mpiexec.lam.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mpiexec.lam (1) manual" />
  <meta property="og:description" content="Run mpi programs on lam nodes." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lam-runtime-mpiexec.lam-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mpiexec.lam<small> (1)</small></h1>
        <p class="lead">Run mpi programs on lam nodes.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mpiexec.lam.1.html">
      <span itemprop="name">mpiexec.lam: Run mpi programs on lam nodes.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lam-runtime/">
      <span itemprop="name">lam-runtime</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mpiexec.lam.1.html">
      <span itemprop="name">mpiexec.lam: Run mpi programs on lam nodes.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>mpiexec [global_args] local_args1 [: local_args2 [...]] mpiexec [global_args] -configfile filename</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Global arguments apply to all commands that will be launched by <em>mpiexec</em>. They come at the beginning of the command line.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-boot</strong></p>
  </dt>
  <dd>
    <p>Boot the LAM run-time environment before running the MPI program.  If <strong>-machinefile</strong> is not specified, use the default boot schema.  When the MPI processes finish, the LAM run-time environment will be shut down.</p>
  </dd>
  <dt>
    <p><strong>-boot-args args</strong></p>
  </dt>
  <dd>
    <p>Pass arguments to the back-end <em>lamboot</em> command when booting the LAM run-time environment.  Implies <em>-boot</em>.</p>
  </dd>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Enable lots of debugging output.  Implies <strong>-v</strong>.</p>
  </dd>
  <dt>
    <p><strong>-machinefile hostfile</strong></p>
  </dt>
  <dd>
    <p>Enable "one shot" MPI executions; boot the LAM run-time environment with the boot schema specified by hostfile (see <a href="../man5/bhost.5.html"><strong>bhost</strong>(5)</a>), run the MPI program, and then shut down the LAM run-time environment.  Implies <strong>-boot</strong>.</p>
  </dd>
  <dt>
    <p><strong>-prefix lam/install/path</strong></p>
  </dt>
  <dd>
    <p>Use the LAM installation specified in /lam/install/path/.  Not compatible with LAM/MPI versions prior to 7.1.</p>
  </dd>
  <dt>
    <p><strong>-ssi key value</strong></p>
  </dt>
  <dd>
    <p>Set the SSI parameter key to the value value.</p>
  </dd>
  <dt>
    <p><strong>-tv</strong></p>
  </dt>
  <dd>
    <p>Launch the MPI processes under the TotalView debugger.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Be verbose</p>
  </dd>

</dl>
<p>One or more sets of local arguments must be specified (or a config file; see below).  Local arguments essentially include everything allowed in an <a href="../man5/appschema.5.html"><strong>appschema</strong>(5)</a> as well as the following options specified by the MPI-2 standard (note that the options listed below must be specified <em>before</em> appschema arguments):</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-n numprocs</strong></p>
  </dt>
  <dd>
    <p>Number of copies of the process to start.</p>
  </dd>
  <dt>
    <p><strong>-host hostname</strong></p>
  </dt>
  <dd>
    <p>Specify the hostname to start the MPI process on.  The hostname must be resolvable by the <em>lamnodes</em> command after the LAM run-time environment is booted (see <a href="../man1/lamnodes.1.html"><strong>lamnodes</strong>(1)</a>).</p>
  </dd>
  <dt>
    <p><strong>-arch architecture</strong></p>
  </dt>
  <dd>
    <p>Specify the architecture to start the MPI process on. <em>mpiexec</em> essentially uses the provided architecture as a pattern match against the output of the GNU <em>config.guess</em> utility on each machine in the LAM run-time environment.  Any subset will match.  See EXAMPLES, below.</p>
  </dd>
  <dt>
    <p><strong>-wdir directory</strong></p>
  </dt>
  <dd>
    <p>Set the working directory of the executable.</p>
  </dd>
  <dt>
    <p><strong>-soft</strong></p>
  </dt>
  <dd>
    <p>Not yet supported.</p>
  </dd>
  <dt>
    <p><strong>-path</strong></p>
  </dt>
  <dd>
    <p>Not yet supported.</p>
  </dd>
  <dt>
    <p><strong>-file</strong></p>
  </dt>
  <dd>
    <p>Not yet supported.</p>
  </dd>
  <dt>
    <p><strong>other_arguments</strong></p>
  </dt>
  <dd>
    <p>When <em>mpiexec</em> first encounters an argument that it doesn't recognize (such as an <a href="../man5/appschema.5.html"><strong>appschema</strong>(5)</a> argument, or the MPI executable name), the remainder of the arguments will be passed back to <em>mpirun</em> to actually start the process.  As such, all of <em>mpiexec</em>'s arguments that are described above must come <strong>before</strong> appschema arguments and/or the MPI executable name.  Similarly, all arguments after the MPI executable name will be transparently passed as command line argument to the MPI process and will be will be effectively ignored by <em>mpirun</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>mpiexec</em> is loosely defined in the Miscellany chapter of the MPI-2 standard (see http://www.mpi-forum.org/).  It is meant to be a portable mechanism for starting MPI processes.  The MPI-2 standard recommends several command line options, but does not mandate any.  LAM's <em>mpiexec</em> currently supports several of these options, but not all.</p><p>LAM's <em>mpiexec</em> is actually a perl script that is a wrapper around several underlying LAM commands, most notably <em>lamboot</em>, <em>mpirun</em>, and <em>lamhalt</em>. As such, the functionality provided by <em>mpiexec</em> can always be performed manually.  Unless otherwise specified in arguments that are passed back to <em>mpirun</em>, <em>mpiexec</em> will use the per-CPU scheduling as described in <strong>mpirun</strong>(1) (i.e., the "cX" and "C" notation).</p><p><em>mpiexec</em> can either use an already-existing LAM universe (i.e., a booted LAM run-time environment), similar to <em>mpirun</em>, or can be used for "one-shot" MPI executions where it boots the LAM run-time environment, runs the MPI executable(s), and then shuts down the LAM run-time environment.</p><p><em>mpiexec</em> can also be used to launch MPMD MPI jobs from the command line. <em>mpirun</em> also supports launching MPMD MPI jobs, but the user must make a text file <a href="../man5/appschema.5.html"><strong>appschema</strong>(5)</a> first.</p><p>Perhaps one of <em>mpiexec</em>'s most useful features is the command-line ability to launch different executables on different architectures using the <em>-arch</em> flag (see EXAMPLES, below).  Essentially, the string argument that is given to <em>-arch</em> is used as a pattern match against the output of the GNU <em>config.guess</em> utility on each node.  If the user-provided architecture string matches any subset of the output of <em>config.guess</em>, it is ruled a match.  Wildcards are not possible.  The GNU <em>config.guess</em> utility is available both in the LAM/MPI source code distribution (in the config subdirectory) and at ftp://ftp.gnu.org/gnu/config/config.guess.</p><p>Some sample outputs from <em>config.guess include:</em></p>
<dl class='dl-vertical'>
  <dt>
    <p>sparc-sun-solaris2.8</p>
  </dt>
  <dd>
    <p>Solaris 2.8 running on a SPARC platform.</p>
  </dd>
  <dt>
    <p>i686-pc-linux-gnu</p>
  </dt>
  <dd>
    <p>Linux running on an i686 architecture.</p>
  </dd>
  <dt>
    <p>mips-sgi-irix6.5</p>
  </dt>
  <dd>
    <p>IRIX 6.5 running on an SGI/MIPS architecture.</p>
  </dd>

</dl>
<p>You might want to run the <em>laminfo</em> command on your available platforms to see what string <em>config.guess</em> reported.  See <a href="../man1/laminfo.1.html"><strong>laminfo</strong>(1)</a> for more details (e.g., the <strong>-arch</strong> flag to <em>laminfo</em>).</p><h3>Configfile option</h3>
<p>It is possible to specify any set of local parameters in a configuration file rather than on the command line using the <em>-configfile</em> option.  This option is typically used when the number of command line options is too large for some shells, or when automated processes generate the command line arguments and it is simply more convenient to put them in a file for later processing by <strong>mpiexec</strong>.</p><p>The config file can contain both comments and one or more sets of local arguments.  Lines beginning with "#" are considered comments and are ignored.  Other lines are considered to be one or more groups of local arguments.  Each group must be separated by either a newline or a colon (":").  For example:</p>
<pre>
  # Sample mpiexec config file
  # Launch foo on two nodes
  -host node1.example.com foo : -host node2.example.com foo
  # Launch two copies of bar on a third node
  -host node3.example.com -np 2 bar
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>In the event of an error, <em>mpiexec</em> will do its best to shut everything down and return to the state before it was executed.  For example, if <em>mpiexec</em> was used to boot a LAM run-time environment, <em>mpiexec</em> will do its best to take down whatever successfully booted of the run-time environment (to include invoking <em>lamhalt</em> and/or <em>lamwipe</em>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following are some examples of how to use <em>mpiexec</em>. Note that all examples assume the CPU-based scheduling (which does <em>NOT</em> map to physical CPUs) as described in <strong>mpirun</strong>(1).</p>
<dl class='dl-vertical'>
  <dt>
    <p>mpiexec -n 4 my_mpi_program</p>
  </dt>
  <dd>
    <p>Launch 4 copies of <em>my_mpi_program</em> in an already-existing LAM universe.</p>
  </dd>
  <dt>
    <p>mpiexec -n 4 my_mpi_program arg1 arg2</p>
  </dt>
  <dd>
    <p>Similar to the previous example, but pass "arg1" and "arg2" as command line arguments to each copy of my_mpi_program.</p>
  </dd>
  <dt>
    <p>mpiexec -ssi rpi gm -n 4 my_mpi_program</p>
  </dt>
  <dd>
    <p>Similar to the previous example, but pass "-ssi rpi gm" back to <em>mpirun</em> to tell the MPI processes to use the Myrinet (gm) RPI for MPI message passing.</p>
  </dd>
  <dt>
    <p>mpiexec -n 4 program1 : -n 4 program2</p>
  </dt>
  <dd>
    <p>Launch 4 copies of <em>program1</em> and 4 copies of <em>program2</em> in an already-existing LAM universe.  All 8 resulting processes will share a common MPI_COMM_WORLD.</p>
  </dd>
  <dt>
    <p>mpiexec -machinefile hostfile -n 4 my_mpi_program</p>
  </dt>
  <dd>
    <p>Boot the LAM run-time environment with the nodes listed in the hostfile, run 4 copies of my_mpi_program in the resulting LAM universe, and then shut down the LAM universe.</p>
  </dd>
  <dt>
    <p>mpiexec -machinefile hostfile my_mpi_program</p>
  </dt>
  <dd>
    <p>Similar to above, but run my_mpi_program on all available CPUs in the LAM universe.</p>
  </dd>
  <dt>
    <p>mpiexec -arch solaris2.8 sol_program : -arch linux linux_program</p>
  </dt>
  <dd>
    <p>Run as many copies of sol_program as there are CPUs on Solaris machines in the current LAM universe, and as many copies of linux_program as there are CPUs on linux machines in the current LAM universe.  All resulting processes will share a common MPI_COMM_WORLD.</p>
  </dd>
  <dt>
    <p>mpiexec -arch solaris2.8 sol2.8_prog : -arch solaris2.9 sol2.9_program</p>
  </dt>
  <dd>
    <p>Similar to the above example, except distinguish between Solaris 2.8 and 2.9 (since they may have different shared libraries, etc.).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mpiexec.lam&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/appschema.5.html"><strong>appschema</strong>(5)</a>, <a href="../man5/bhost.5.html"><strong>bhost</strong>(5)</a>, <a href="../man1/lamboot.1.html"><strong>lamboot</strong>(1)</a>, <a href="../man1/lamexec.1.html"><strong>lamexec</strong>(1)</a>, <strong>mpirun</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mpiexec.hydra.1.html"><span aria-hidden="true">&larr;</span> mpiexec.hydra.1: Run an mpi program</a></li>
   <li class="next"><a href="mpiexec.mpich.1.html">mpiexec.mpich.1: Run an mpi program <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
