<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mailpatch: Mailagent's commands</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Mailagent's commands">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mailpatch (1) manual">
  <meta name="twitter:description" content="Mailagent's commands">
  <meta name="twitter:image" content="https://www.carta.tech/images/mailagent-mailpatch-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mailpatch.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mailpatch (1) manual" />
  <meta property="og:description" content="Mailagent's commands" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mailagent-mailpatch-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mailpatch<small> (1)</small></h1>
        <p class="lead">Mailagent's commands</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mailpatch.1.html">
      <span itemprop="name">mailpatch: Mailagent's commands</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mailagent/">
      <span itemprop="name">mailagent</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mailpatch.1.html">
      <span itemprop="name">mailpatch: Mailagent's commands</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>maildist</strong> <em>address</em> <em>system</em> [ <em>version</em> ]</p><p><strong>mailhelp</strong> [ <em>address</em> ]</p><p><strong>maillist</strong> [ <em>address</em> ]</p><p><strong>mailpatch</strong> <em>address</em> <em>system</em> <em>version</em> <em>patchlist</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>These commands are not intended to be run directly by a user. They may appear in any mail whose subject is set to <em>Command</em>. Such a mail will be processed by the <a href="../man1/mailagent.1.html"><strong>mailagent</strong>(1)</a>, which will extract all lines beginning with <em>@SH</em>, followed by one of the above commands. The mailagent first sets environment variables that will be used by every commands.</p><p><em>Maildist</em> is used to mail a whole distribution to the given address. The version number may be omitted if the system has no version specified !! <em>Maildist</em> looks for the <em>Spool/distribs</em> file to find where the distribution is located. If it has been archived, the file name extension is used to guess how the archive will be restored:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>.cpio</strong></p>
  </dt>
  <dd>
    <p>archive is a <em>cpio</em> archive</p>
  </dd>
  <dt>
    <p><strong>.tar</strong></p>
  </dt>
  <dd>
    <p>archive is in <em>tar</em> format</p>
  </dd>
  <dt>
    <p><strong>.cpio.Z</strong></p>
  </dt>
  <dd>
    <p>compressed <em>cpio</em> archive</p>
  </dd>
  <dt>
    <p><strong>.tar.Z</strong></p>
  </dt>
  <dd>
    <p>compressed <em>tar</em> archive</p>
  </dd>

</dl>
<p>Note that on file systems with short file names, the final <strong>.Z</strong> extension could be dropped. Therefore, compressed archives must be explicitly stated in the <em>Spool/distribs</em> file.</p><p>Once the directory is found (or extracted), <em>maildist</em> looks for a <em>.package</em> file. If one is found, then it is assumed this distribution is under control of the dist 3.0 package, and the <em>makedist</em> commmand is called to actually mirror the source tree (makedist being part of dist 3.0).</p><p>Otherwise, it looks for a <em>MANIFEST</em> file. If it finds one, only the files listed therein will be sent. Otherwise, all the files will be sent, excepted the binary executables and object files, the RCS sub-directories or RCS files, the private <em>U</em> subdirectory and the <em>.package</em> file, any <em>core</em> file or files in a <em>bugs</em> subdirectory.</p><p>Then, the following algorithm is used: if no RCS file is found, the file is sent as-is. Otherwise, we look for a defined 'lastpat' symbol. If it is found, the corresponding revision is checked-out and sent. Otherwise, the last-revision on the default branch is exctracted, provided that the corresponding working file is not found.</p><p>The <em>maildist</em> command will not work if the system is tagged as an old one (with an <em>o</em> in the patches column of the <em>distribs</em> file). A message will be sent back to the user, explaining that only patches are available.</p><p><em>Mailhelp</em> sends help to the address (if omitted, the return path of the mail is used). The help text is found in <em>Spool/agenthelp</em>. It should have been correctly set in the installation procedure, as explained in the <a href="../man1/mailagent.1.html"><strong>mailagent</strong>(1)</a> manual page.</p><p><em>Maillist</em> sends the list of available distributions, with current patchlevels if necessary. The <em>Spool/distribs</em> and <em>Spool/proglist</em> files are both used to build the list.</p><p><em>Mailpatch</em> sends one or more patches for a maintained distribution. The directory or the archive is found by scanning <em>Spool/distribs</em>. The <em>bugs</em> sub-directory must then hold the available patches. The patches may be stored in compressed form (with the ending <em>.Z</em>), as <em>mailpatch</em> knows about them and will uncompress the patch before sending.</p><p>Patches for old systems are kept in a separate directory, either in normal or in compressed form. If the version number of the old system is <em>x.y</em>, then the directory must be named <em>bugs-x.y</em> and placed in the root directory of the system, just like <em>bugs</em> is.</p><p>Whenever the user asks for an old system, <em>mailpatch</em> inserts a little note giving the latest version number for that system.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTE</h2>
        <div class="sectioncontent">
<p>For a more accurate description of these commands (user's point of vue), you may want to have a look at the help file or send help to yourself using the <em>mailhelp</em> command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FORWARDING</h2>
        <div class="sectioncontent">
<p>When the author of a package wishes to relinquish all maintenance duty, he is most often stuck by the weight of the past: Configure scripts have his e-mail address hardwired (see unit MailAuthor.U) and Command messages for package registration and/or patch requests will continue to reach him.</p><p>The answer to that is to leave a <em>.forward</em> file at the top of the package tree and commands will automatically forge new requests and forward them to the address listed in the .forward file. Now the recipient surely needs a mailagent at the other end to deal with forwarded requests!</p><p>Only plain e-mail address(es) are allowed in the .forward. The "|command" processing hook is not supported, since it's not <em>sendmail</em> which interprets that file but the command itself.</p><p>Forwarding applies to <em>maildist</em>, <em>mailpatch</em> and <em>package</em> commands only.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>~/.mailagent</p>
  </dt>
  <dd>
    <p>configuration file for mailagent.</p>
  </dd>
  <dt>
    <p>/usr/share/mailagent</p>
  </dt>
  <dd>
    <p>directory holding templates and samples.</p>
  </dd>
  <dt>
    <p>Spool/agenthelp</p>
  </dt>
  <dd>
    <p>help file</p>
  </dd>
  <dt>
    <p>Spool/distribs</p>
  </dt>
  <dd>
    <p>distribution list</p>
  </dd>
  <dt>
    <p>Spool/proglist</p>
  </dt>
  <dd>
    <p>comments for available distributions</p>
  </dd>
  <dt>
    <p>Spool/plsave</p>
  </dt>
  <dd>
    <p>records patchlevel of archived distributions</p>
  </dd>
  <dt>
    <p>Log/agentlog</p>
  </dt>
  <dd>
    <p>mailagent's log file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The <em>proglist</em> file ought to make a distinction between different versions of a same system.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Raphael Manfredi &lt;Raphael_Manfredi@pobox.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mailpatch&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/mailagent.1.html"><strong>mailagent</strong>(1)</a>, <a href="../man1/package.1.html"><strong>package</strong>(1)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mailodf.1.html"><span aria-hidden="true">&larr;</span> mailodf.1: Email odf file as html archive</a></li>
   <li class="next"><a href="mailping-cron.1.html">mailping-cron.1: Run periodic processing to test email service availability and functioning <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
