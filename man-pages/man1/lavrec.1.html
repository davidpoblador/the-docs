<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lavrec: Record mjpeg-video from a zoran/video4linux-device</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Record mjpeg-video from a zoran/video4linux-device">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lavrec (1) manual">
  <meta name="twitter:description" content="Record mjpeg-video from a zoran/video4linux-device">
  <meta name="twitter:image" content="https://www.carta.tech/images/mjpegtools-lavrec-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/lavrec.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lavrec (1) manual" />
  <meta property="og:description" content="Record mjpeg-video from a zoran/video4linux-device" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mjpegtools-lavrec-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lavrec<small> (1)</small></h1>
        <p class="lead">Record mjpeg-video from a zoran/video4linux-device</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lavrec.1.html">
      <span itemprop="name">lavrec: Record mjpeg-video from a zoran/video4linux-device</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mjpegtools/">
      <span itemprop="name">mjpegtools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lavrec.1.html">
      <span itemprop="name">lavrec: Record mjpeg-video from a zoran/video4linux-device</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lavrec</strong> [<em>options</em>] <em>filename(s)</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>lavrec</strong> can be used to record video in MJPEG format (either quicktime or AVI) from a zoran video-capture device, such as the Miro/Pinnacle DC10(+), the Iomega Buz or Linux Media Labs' LML33, or from a generic video4linux device, such as the cheap Bt848 or Bt878 based TV-cards that are being sold in every computer shop around the corner.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>lavrec</strong> accepts the following options:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>filename</strong></p>
  </dt>
  <dd>
    <p>The file to record to (*.avi, *.qt). Use a % to record to multiple files (using file%02d.avi will record to file00.avi, file01.avi, etc). You can also give more than one filename, which will have the same effect. This will avoid problems resulting from filetype or filesystem size limits. AVI, for example, has a 2 GB limit, as does ext2fs in 2.2.x kernels.</p>
  </dd>
  <dt>
    <p><strong>--software-encoding</strong></p>
  </dt>
  <dd>
    <p>By default, lavrec will capture in a mode that is only suitable for recording from hardware MJPEG devices. Using this option will make lavrec use software-JPEG-encoding (using libjpeg) which enables MJPEG-video-capture from many generic video4linux devices (such as Bt848/Bt878-based ones).</p>
  </dd>
  <dt>
    <p><strong>--software-encoding-yuvp</strong></p>
  </dt>
  <dd>
    <p>This option adds support for the EM28XX USB driver. As this driver is V4L2. As the original BTTV software implementation assumes that the driver supports V4L it will not work with the EM28XX driver, not even with the V4L1 emulation layer. This option enables two things:</p>
<pre>
  It enables the V4L2 calls to make interaction with this driver possible
  It select the cards YUV Packed format and converts this in software to YUV Planar
</pre>
<p>The process is after this the same as for the BTTV driver. ome things of note are the fact that the EM28XX driver expects 48KHz audio recording. If you choose slower things will work, but a lot of deleted/inserted frames will occur. The lower the sample rate, the worse this problem gets. Recording at 48KHz is therefore recommended. This code was tested and found working with a DVC100 Pinnacle Dazzle. This option should work with any EM28XX, but this hasnt been tested. It might work for any other V4L2 device that outputs YUV packed format, this has however not been tested. Feedback would be appreciated.</p>
  </dd>
  <dt>
    <p><strong>-f/--format</strong> [<strong>a</strong>|<strong>A</strong>|<strong>q</strong>|<strong>m</strong>]</p>
  </dt>
  <dd>
    <p>The format in which the video should be saved to the harddisk.</p>
<pre>
  a - MJPEG AVI
  A - MJPEG AVI with fields exchanged
  q - Quicktime
</pre>
<p>By default, lavrec will look at the extension of the first file (*.avi, *.qt) and choose a format based on that.</p>
  </dd>
  <dt>
    <p><strong>-i/--input</strong> [<strong>p</strong>|<strong>P</strong>|<strong>n</strong>|<strong>N</strong>|<strong>s</strong>|<strong>S</strong>|<strong>t</strong>|<strong>T</strong>|<strong>f</strong>|<strong>a</strong>]</p>
  </dt>
  <dd>
    <p>or</p>
  </dd>
  <dt>
    <p><strong>-i/--input</strong> input[:norm]</p>
  </dt>
  <dd>
    <p>The recording source and the video source standard format.  p - PAL through Composite or 1st Bt8x8 input  P - PAL through SVHS- or 2nd Bt8x8 input  t - PAL through TV-tuner- or 3rd Bt8x8 input  n - NTSC through Composite or 1st Bt8x8 input  N - NTSC through SVHS- or 2nd Bt8x8 input  T - NTSC through TV-tuner- or 3rd Bt8x8 input  s - SECAM through Composite or 1st Bt8x8 input  S - SECAM through SVHS- or 2nd Bt8x8 input  f - SECAM through TV-tuner- or 3rd Bt8x8 input  a - (or every other letter) Autosense (default)</p><p>The input can be specified using either single letters or an input number with an optional norm, where the number specifies the n'th input of the card, ranging from 1 to 10. Using a numerical input is necessary when using input four or higher with a card that has more than three inputs, for instance the AverMedia 6 Eyes. When using numeric input with the norm it must contain the whole norm name; valid names are pal, ntsc and secam. You can use numeric input selection for cards with only three inputs, too, which most Zoran based cards has. "-i&nbsp;2:pal" used with a Buz would be equivalent to "-i&nbsp;P", recording from the S-Video input in PAL format.</p>
  </dd>
  <dt>
    <p><strong>-d/--decimation</strong><em> num</em></p>
  </dt>
  <dd>
    <p>Recording decimation, either 1, 2 or 4. This will decimate the size of the recorded video horizontally and vertically. To use different horizontal and vertical decimations, use two numbers, the first one being the horizontal and the second one being the vertical (-d 12). <strong>Note:</strong> this option can only be used during hardware recording.</p>
  </dd>
  <dt>
    <p><strong>-g/--geometry</strong><em> WxH(+X+Y)</em></p>
  </dt>
  <dd>
    <p><strong>For hardware recording:</strong> An X-style geometry string, giving the geometry of the undecimated subframe to record. The default is the full frame, so 720x576/480+0+0 for Buz/LML33-users and 640x480+0+0 or 768x576+0+0 for DC10(+)-users. <strong>For software recording:</strong> The size of the video to be captured. Currently, width and height need to be a multiple of 16. You always capture the full frame since most video4linux devices don\'t support subframe capture.</p>
  </dd>
  <dt>
    <p><strong>-q/--quality</strong><em> num</em></p>
  </dt>
  <dd>
    <p>Quality of the JPEG-video to be recorded (in percent). This must be a number between 0 and 100. Lower quality should generally mean lower filesize, higher quality will take more diskspace but will give more detailed perfectness in the resulting recorded video. Default is 50%.</p>
  </dd>
  <dt>
    <p><strong>-C/--channel</strong><em> LIST:CHAN</em></p>
  </dt>
  <dd>
    <p>Choose the channel to record from (xawtv-style). By default, lavrec will just use the current TV channel.</p>
  </dd>
  <dt>
    <p><strong>-t/--time</strong><em> num</em></p>
  </dt>
  <dd>
    <p>Recording time in seconds. The default is unlimited. To stop capturing video while recording, use Ctrl-C.</p>
  </dd>
  <dt>
    <p><strong>-S/--single-frame</strong></p>
  </dt>
  <dd>
    <p>Single-frame capture mode. This means that one can capture individual frames from the capture device.</p>
  </dd>
  <dt>
    <p><strong>-T/--time-lapse</strong><em> num</em></p>
  </dt>
  <dd>
    <p>time-lapse factor, which means that only every &lt;num&gt;th frame is saved to the recording file.</p>
  </dd>
  <dt>
    <p><strong>-w/--wait</strong></p>
  </dt>
  <dd>
    <p>If this option is given, lavrec will wait for the user to press enter before starting to record.</p>
  </dd>
  <dt>
    <p><strong>-B/--batch</strong></p>
  </dt>
  <dd>
    <p>This option turns off all possible interactivity options and limits console output as much as possible. Useful for cron/scheduled recordings.</p>
  </dd>
  <dt>
    <p><strong>-a/--audio-bitsize</strong><em> num</em></p>
  </dt>
  <dd>
    <p>Audio size in bits, either 0, 8 or 16 (default). 0 means no audio.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p><strong>-r/--audio-bitrate</strong><em> num</em> Audio sampling rate in Hz. This must be a sampling rate which is supported by the soundcard. Often-supported audio sampling rate values are 11025, 22050 or 44100 (default).</p>
  </dd>
  <dt>
    <p><strong>-s/--stereo</strong></p>
  </dt>
  <dd>
    <p>Capture in stereo. By default, lavrec captures in mono.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p><strong>-l/--audio-volume</strong><em> num</em> Recording level. This must be a value between 0 (no sound) and 100 (loud recording). -1 (default) means to not touch the mixer settings at all.</p>
  </dd>
  <dt>
    <p><strong>-m/--mute</strong></p>
  </dt>
  <dd>
    <p>Mute sound output while recording. This can be useful when recording sound from the microphone to disable echos. This option is disabled by default.</p>
  </dd>
  <dt>
    <p><strong>-R/--audio-source</strong> [<strong>l</strong>|<strong>m</strong>|<strong>c</strong>]</p>
  </dt>
  <dd>
    <p>Recording source, either (l)ine-in, (m)icrophone or (c)d-rom. The default is to record from line-in (l).</p>
  </dd>
  <dt>
    <p><strong>-U/--use-read</strong></p>
  </dt>
  <dd>
    <p>Use the read() system call rather than the mmap() system call for audio recording. This may fix many audio recording problems.</p>
  </dd>
  <dt>
    <p><strong>-c/--synchronization</strong> [<strong>0</strong>|<strong>1</strong>|<strong>2</strong>]</p>
  </dt>
  <dd>
    <p>Audio/video synchronization level efforts. (0) means no synchronization, (1) means that lavrec will replicate frames for lost frames. (2) means that lavrec will replicate frames for lost frames and do sync correction. Default is 2.</p>
  </dd>
  <dt>
    <p><strong>-n/--mjpeg-buffers</strong><em> num</em></p>
  </dt>
  <dd>
    <p>Number of MJPEG-buffers. Default is 32. Try changing this number if you have many lost frames.</p>
  </dd>
  <dt>
    <p><strong>-b/--mjpeg-buffer-size</strong><em> num</em></p>
  </dt>
  <dd>
    <p>MJPEG buffersize in kilobytes. The default is 256 kB.</p>
  </dd>
  <dt>
    <p><strong>--max-file-size</strong><em> num</em></p>
  </dt>
  <dd>
    <p>The maximum file size per JPEG file. By default, lavrec uses the maximum possible size for that specific recording format.</p>
  </dd>
  <dt>
    <p><strong>--max-file-frames</strong><em> num</em></p>
  </dt>
  <dd>
    <p>The maximum number of frames per per JPEG file. By default, the number of frames is only limited by other factors, such as maximum file size.</p>
  </dd>
  <dt>
    <p><strong>--file-flush</strong><em> num</em></p>
  </dt>
  <dd>
    <p>Flush the file to disk after every num frames captured.</p>
  </dd>
  <dt>
    <p><strong>-v/--verbose</strong><em> num</em></p>
  </dt>
  <dd>
    <p>Verbosity level (0, 1 or 2). Default is 0.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>The following environment variables can be recognized by lavrec:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>LAV_VIDEO_DEV</strong></p>
  </dt>
  <dd>
    <p>The video device. Default is /dev/video</p>
  </dd>
  <dt>
    <p><strong>LAV_AUDIO_DEV</strong></p>
  </dt>
  <dd>
    <p>The audio device. Default is /dev/dsp</p>
  </dd>
  <dt>
    <p><strong>LAV_MIXER_DEV</strong></p>
  </dt>
  <dd>
    <p>The mixer device. Default is /dev/mixer</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OUTPUT</h2>
        <div class="sectioncontent">
<p>Lavrec will output the current recording state. Typically, this looks like:</p><p>0.06.14:22 int: 00040 lst:0 ins:0 del:0 ae:0 td1=0.014 td2=0.029</p><p>The first part is the time that has been spent recording (hours - minutes - seconds - frames). <strong>int</strong> is the interval (in milliseconds) between two captured frames (this should be around 40 for PAL/SECAM and 33 for NTSC). <strong>lst</strong> is the number of lost frames. <strong>ins</strong> and <strong>del</strong> are the number of frames inserted and deleted for sync correction. <strong>ae</strong> is the number of audio errors. <strong>td1</strong> and <strong>td2</strong> are the audio/video time-difference (out-of-sync'ness).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TYPICAL RECORDING SESSIONS</h2>
        <div class="sectioncontent">
<p>Okay, that's a lot of options. Now how would I normally record video? Let's assume you want to record at VCD resolution (352x288) from PAL source. You might want some higher quality than default (80%). You use default audio options and record to an AVI file. That having said, your recording command line would look like:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>From hardware MJPEG devices (S-video input)</strong></p>
  </dt>
  <dd>
    <p>lavrec --format=a --input=P --quality=80 --decimation=2 /path/to/file.avi</p>
  </dd>
  <dt>
    <p><strong>From normal video4linux devices</strong></p>
  </dt>
  <dd>
    <p>lavrec --software-encoding --format=a --input=p --quality=80 --geometry=352x288 /path/to/file.avi</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>lavrec should be able to detect automatically whether to use software JPEG encoding or whether to use the card's hardware JPEG encoding features (if available).</p><p>Besides that, software JPEG encoding seems, for some people, to cause small out-of-sync'ness. SMP support for JPEG encoding is currently work-in-progress.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This man page was written by Ronald Bultje.</p><p>If you have questions, remarks, problems or you just want to contact the developers, the main mailing list for the MJPEG-tools is:</p>
<pre>
    <em>mjpeg-users@lists.sourceforge.net</em>
</pre>
<p>For more info, see our website at</p>
<pre>
    <em>http://mjpeg.sourceforge.net/</em>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lavrec&hellip;</h2>
        <div class="sectioncontent">
<p><strong>mjpegtools</strong>(1), <a href="../man1/lavplay.1.html"><strong>lavplay</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lavplay.1.html"><span aria-hidden="true">&larr;</span> lavplay.1: Playback and edit mjpeg video</a></li>
   <li class="next"><a href="lavtrans.1.html">lavtrans.1: Convert mjpeg videos to other mjpeg video formats <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
