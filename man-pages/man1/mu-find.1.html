<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mu-find: Find e-mail messages in the mu database.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Find e-mail messages in the mu database.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mu-find (1) manual">
  <meta name="twitter:description" content="Find e-mail messages in the mu database.">
  <meta name="twitter:image" content="https://www.carta.tech/images/maildir-utils-mu-find-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mu-find.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mu-find (1) manual" />
  <meta property="og:description" content="Find e-mail messages in the mu database." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/maildir-utils-mu-find-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mu-find<small> (1)</small></h1>
        <p class="lead">Find e-mail messages in the mu database.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mu-find.1.html">
      <span itemprop="name">mu-find: Find e-mail messages in the mu database.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/maildir-utils/">
      <span itemprop="name">maildir-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mu-find.1.html">
      <span itemprop="name">mu-find: Find e-mail messages in the mu database.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mu find [options] &lt;search expression&gt;</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mu find</strong> is the <strong>mu</strong> command for searching e-mail message that were stored earlier using <strong>mu <strong>index</strong>(1)</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEARCHING MAIL</h2>
        <div class="sectioncontent">
<p><strong>mu find</strong> starts a search for messages in the database that match some search pattern. For example:</p>
<pre>
   $ mu find subject:snow from:john
</pre>
<p>would find all messages from John with 'snow' in the subject field, something like:</p>
<pre>
  2009-03-05 17:57:33 EET Lucia  &lt;lucia@example.com&gt; running in the snow
  2009-03-05 18:38:24 EET Marius &lt;marius@foobar.com&gt; Re: running in the snow
</pre>
<p>Note, this the default, plain-text output, which is the default, so you don't have to use <strong>--format=plain</strong>. For other types of output (such as symlinks, XML or s-expressions), see the discussion in the <strong>OPTIONS</strong>-section below about <strong>--format</strong>.</p><p>The search pattern is taken as a command-line parameter. If the search parameter consists of multiple parts (as in the example) they are treated as if there were a logical <strong>AND</strong> between them.</p><p><strong>mu</strong> relies on the Xapian database for its searching capabilities, so it offers all the search functionality that Xapian offers; for all the details, see:</p>
<pre>
     <em>http://xapian.org/docs/queryparser.html</em>
</pre>
<p>One special feature of <strong>mu</strong> is that is does not distinguish between uppercase and lowercase, nor the accented or unaccented versions of characters. All match. In general, <strong>mu</strong> tries to be 'eager' in matching, as filtering out unwanted results is usually preferable over non matching messages.</p><p>A wildcard search is a search where a <strong>*</strong> matches the last <em>n</em> character(s) in some string. The string must always start with one or more characters before the wildcard. <strong>mu</strong> supports wildcard searches for all fields except maildirs and paths. To get all mails with a subject containing a word starting with <strong>com</strong>, you can use:</p>
<pre>
  $ mu find 'subject:com*'
</pre>
<p>and get mails about computers, comments, compilation and so on. Note, when running from the command-line it's important to put the query in quotes, otherwise the shell would interpret the '*'. It is equally important to remember that the '*' invokes the wildcard search only when used as the rightmost character of a search term. Furthermore, it is <strong>not</strong> a regular expression.</p><p>The basic way to search a message is to type some words matching it, as you would do in an internet search engine. For example,</p>
<pre>
  $ mu find monkey banana
</pre>
<p>will find all messages that contain both 'monkey' and 'banana' in either body or subject or one of the address-fields (to/from/cc).</p><p>As mentioned, matching is case-insensitive and accent-insensitive; thus</p>
<pre>
  $ mu find Mönkey BÄNAÑå
</pre>
<p>yields the same results as the example above.</p><p><strong>mu</strong> also recognizes prefixes for specific fields in a messages; for example:</p>
<pre>
  $ mu find subject:penguin
</pre>
<p>to find messages with have the word <strong>penguin</strong> in the subject field. You can abbreviate <strong>subject:</strong> to just <strong>s:</strong>. Here is the full table of the search fields and their abbreviations:</p>
<pre>
	cc,c            Cc (carbon-copy) recipient(s)
	bcc,h           Bcc (blind-carbon-copy) recipient(s)
	from,f          Message sender
	to,t            To: recipient(s)
	subject,s       Message subject
	maildir,m       Maildir
	msgid,i         Message-ID
	prio,p          Message priority ('low', 'normal' or 'high')
	flag,g          Message Flags
	date,d          Date-Range
	size,z          Message size
	embed,e         Search inside embedded text parts (messages, attachments)
	file,j          Attachment filename
	mime,y          MIME-type of one or more message parts
	tag,x           Tags for the message (<em>X-Label</em> and/or <em>X-Keywords</em>)
	list,v          Mailing list (e.g. the List-Id value)
</pre>
<p>There are also the special fields <strong>contact</strong>, which matches all contact-fields (<strong>from</strong>, <strong>to</strong>, <strong>cc</strong> and <strong>bcc</strong>), and <strong>recip</strong>, which matches all recipient-fields (<strong>to</strong>, <strong>cc</strong> and <strong>bcc</strong>).</p><p>The meaning of most of the above fields should be clear, but some require some extra discussion. First, the message flags field describes certain properties of the message, as listed in the following table:</p>
<pre>
	d,draft         Draft Message
	f,flagged       Flagged
	n,new           New message (in new/ Maildir)
	p,passed        Passed ('Handled')
	r,replied       Replied
	s,seen          Seen
	t,thrashed      Marked for deletion
	a,attach        Has attachment
	z,signed        Signed message
	x,encrypted     Encrypted message
	l,list          Mailing-list message
</pre>
<p>Using this, we can search e.g. for all signed messages that have an attachment:</p>
<pre>
  $ mu find flag:signed flag:attach
</pre>
<p>Encrypted messages may be signed as well, but this is only visible after decrypting, and thus, is invisible to <strong>mu</strong>.</p><p>The message-priority has three possible values: low, normal or high. We can match them using <strong>prio:</strong> - for example, to get all high-priority messages with a subject containing some bird:</p>
<pre>
  $ mu find prio:high subject:nightingale
</pre>
<p>The Maildir field describes the directory path starting <strong>after</strong> the Maildir-base path, and before the <em>/cur/</em> or <em>/new/</em> part. So for example, if there's a message with the file name <em>~/Maildir/lists/running/cur/1234.213:2,</em>, you could find it (and all the other messages in the same maildir) with:</p>
<pre>
  $ mu find maildir:/lists/running
</pre>
<p>Note the starting '/'. If you want to match mails in the 'root' maildir, you can do with a single '/':</p>
<pre>
  $ mu find maildir:/
</pre>
<p>(and of course you can use the <strong>m:</strong> shortcut instead of <strong>maildir:</strong>)</p><p>The <strong>date:</strong> (or <strong>d:</strong>) search parameter is 'special' in the fact that it takes a range of dates. For now, these dates are in ISO 8601 format (YYYYMMDDHHMM); you can leave out the right part, and mu will add the rest, depending on whether this is the beginning or end of the date interval. For example, for the beginning of the interval "201012" would be interpreted as "20101201010000", or December 1, 2010 at 00:00, while for the end of the interval, this would be interpreted as "20101231122359", or December 31, 2010 at 23:59. If you omit the left part completely, the beginning date is assumed to be January 1, year 0 at 00:00.  Likewise, if you omit the right part, the end data is assumed to be to the last second of the year 9999.</p><p>To get all messages between (inclusive) the 5th of May 2009 and the 2nd of June 2010, you could use:</p>
<pre>
  $ mu find date:20090505..20100602
</pre>
<p>Non-numeric characters are ignored, so the following is equivalent but more readable:</p>
<pre>
  $ mu find date:2009-05-05..2010-06-02
</pre>
<p>Precision is up to the minute and 24-hour notation for times is used, so another example would be:</p>
<pre>
  $ mu find date:2009-05-05/12:23..2010-06-02/17:18
</pre>
<p><strong>mu</strong> also understand relative dates, in the form of a positive number followed by h (hour), d (day), w (week), m (30 days) or y (365 days). Some examples to explain this:</p>
<pre>
	5h      five hours in the past
	2w      two weeks in the past
	3m      three times 30 days in the past
	1y      365 days in the past
</pre>
<p>Using this notation, you can for example match messages between two and three weeks old:</p>
<pre>
  $ mu find date:3w..2w
</pre>
<p>There are some special keywords for dates, namely 'now', meaning the present moment and 'today' for the beginning of today. So to get all messages sent or received today, you could use:</p>
<pre>
  $ mu find date:today..now
</pre>
<p>The <strong>size</strong> or <strong>z</strong> allows you to match <em>size ranges</em> -- that is, match messages that have a byte-size within a certain range. Units (B (for bytes), K (for 1000 bytes) and M (for 1000 * 1000 bytes) are supported). For example, to get all messages between 10Kb and 2Mb (assuming SI units), you could use:</p>
<pre>
  $ mu find size:10K..2M
</pre>
<p>It's important to remember that if a search term includes spaces, you should <em>quote</em> those parts. Thus, when we look at the following examples:</p>
<pre>
  $ mu find maildir:/Sent Items yoghurt
  $ mu find maildir:'/Sent Items' yoghurt
</pre>
<p>The first query searches for messages in the <em>/Sent</em> maildir matching <em>Items</em> and <em>yoghurt</em>, while the second query searches the <em>/Sent</em> Items maildir searching for messages matching <em>yoghurt</em>.</p><p>You can match <em>all</em> messages using "" (or ''):</p>
<pre>
  $ mu find ""
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Note, some of the important options are described in the <strong>mu(1)</strong> man-page and not here, as they apply to multiple mu-commands.</p><p>The <strong>find</strong>-command has various options that influence the way <strong>mu</strong> displays the results. If you don't specify anything, the defaults are <em>--fields="d f s"</em>, <em>--sortfield=date</em> and <em>--reverse</em>.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-f</strong>, <strong>--fields</strong>=<em>&lt;fields&gt;</em></p>
  </dt>
  <dd>
    <p>specifies a string that determines which fields are shown in the output. This string consists of a number of characters (such as 's' for subject or 'f' for from), which will replace with the actual field in the output. Fields that are not known will be output as-is, allowing for some simple formatting.</p><p>For example:</p>
<pre>
  $ mu find subject:snow --fields "d f s"
</pre>
<p>would list the date, subject and sender of all messages with 'snow' in the their subject.</p><p>The table of replacement characters is superset of the list mentions for search parameters; the complete list:</p>
<pre>
	t	<strong>t</strong>o: recipient
	c	<strong>c</strong>c: (carbon-copy) recipient
	h	Bcc: (blind carbon-copy, <strong>h</strong>idden) recipient
	d	Sent <strong>d</strong>ate of the message
	f	Message sender (<strong>f</strong>rom:)
	g	Message flags (fla<strong>g</strong>s)
	l	Full path to the message (<strong>l</strong>ocation)
	p	Message <strong>p</strong>riority (high, normal, low)
	s	Message <strong>s</strong>ubject
	i	Message-<strong>i</strong>d
	m	<strong>m</strong>aildir
</pre>
<p>The message flags are the same ones we already saw in the message flags above. Thus, a message which is 'seen', has an attachment and is signed would have 'asz' as its corresponding output string, while an encrypted new message would have 'nx'.</p>
  </dd>
  <dt>
    <p><strong>-s</strong>, <strong>--sortfield</strong> =<em>&lt;field&gt;</em> and <strong>-z</strong>,</p>
  </dt>
  <dd>
    <p><strong>--reverse</strong> specifies the field to sort the search results by, and the direction (i.e., 'reverse' means that the sort should be reverted - Z-A). The following fields are supported:</p>
<pre>
	cc,c            Cc (carbon-copy) recipient(s)
	bcc,h           Bcc (blind-carbon-copy) recipient(s)
	date,d          message sent date
	from,f          message sender
	maildir,m       maildir
	msgid,i         message id
	prio,p          message priority
	subject,s       message subject
	to,t            To:-recipient(s)
</pre>
<p>Thus, for example, to sort messages by date, you could specify:</p>
<pre>
  $ mu find fahrrad --fields "d f s" --sortfield=date --reverse
</pre>
<p>Note, if you specify a sortfield, by default, messages are sorted in reverse (descending) order (e.g., from lowest to highest). This is usually a good choice, but for dates it may be more useful to sort in the opposite direction.</p>
  </dd>
  <dt>
    <p><strong>-n</strong>, <strong>--maxnum=&lt;number&gt;</strong></p>
  </dt>
  <dd>
    <p>If &gt; 0, display maximally that number of entries.  If not specified, all matching entries are displayed.</p>
  </dd>
  <dt>
    <p><strong>--summary-len=&lt;number&gt;</strong></p>
  </dt>
  <dd>
    <p>If &gt; 0, use that number of lines of the message to provide a summary.</p>
  </dd>
  <dt>
    <p><strong>--format</strong>=<em>plain|links|xquery|xml|sexp</em></p>
  </dt>
  <dd>
    <p>output results in the specified format.</p><p>The default is <strong>plain</strong>, i.e normal output with one line per message.</p><p><strong>links</strong> outputs the results as a maildir with symbolic links to the found messages. This enables easy integration with mail-clients (see below for more information). See <strong>--linksdir</strong> and <strong>--clearlinks</strong> below.</p><p><strong>xml</strong> formats the search results as XML.</p><p><strong>sexp</strong> formats the search results as an s-expression as used in Lisp programming environments.</p><p><strong>xquery</strong> shows the Xapian query corresponding to your search terms. This is meant for for debugging purposes.</p>
  </dd>
  <dt>
    <p><strong>--linksdir</strong> =<em>&lt;dir&gt;</em> and <strong>-c</strong>, <strong>--clearlinks</strong></p>
  </dt>
  <dd>
    <p>output the results as a maildir with symbolic links to the found messages. This enables easy integration with mail-clients (see below for more information). <strong>mu</strong> will create the maildir if it does not exist yet.</p><p>If you specify <strong>--clearlinks</strong>, all existing symlinks will be cleared from the target maildir; this allows for re-use of the same directory. An alternative would be to delete the target directory before, but this has a big chance of accidentally removing something that should not be removed.</p>
<pre>
  $ mu find grolsch --linksdir=~/Maildir/search --clearlinks
</pre>
<p>will store links to found messages in <em>~/Maildir/search</em>. If the directory does not exist yet, it will be created.</p><p>Note: when <strong>mu</strong> creates a Maildir for these links, it automatically inserts a <em>.noindex</em> file, to exclude the directory from <strong>mu</strong> index.</p>
  </dd>
  <dt>
    <p><strong>--after=</strong><em>&lt;timestamp&gt;</em> only show messages whose message files were</p>
  </dt>
  <dd>
    <p>last modified (<strong>mtime</strong>) after <em>&lt;timestamp&gt;</em>. <em>&lt;timestamp&gt;</em> is a UNIX <strong>time_t</strong> value, the number of seconds since 1970-01-01 (in UTC).</p><p>From the command line, you can use the <strong>date</strong> command to get this value. For example, only consider messages modified (or created) in the last 5 minutes, you could specify</p>
<pre>
  --after=`date +%s --date='5 min ago'`
</pre>
<p>This is assuming the GNU <strong>date</strong> command.</p>
  </dd>
  <dt>
    <p><strong>--exec</strong>=<em>&lt;command&gt;</em></p>
  </dt>
  <dd>
    <p>the <strong>--exec</strong> command causes the <em>command</em> to be executed on each matched message; for example, to see the raw text of all messages matching 'milkshake', you could use:</p>
<pre>
  $ mu find milkshake --exec='less'
</pre>
<p>which is roughly equivalent to:</p>
<pre>
  $ mu find milkshake --fields="l" | xargs less
</pre>

  </dd>
  <dt>
    <p><strong>-b</strong>, <strong>--bookmark</strong>=<em>&lt;bookmark&gt;</em></p>
  </dt>
  <dd>
    <p>use a bookmarked search query. Using this option, a query from your bookmark file will be prepended to other search queries. See <strong>mu-bookmarks</strong>(1) for the details of the bookmarks file.</p>
  </dd>
  <dt>
    <p><strong>--skip-dups</strong>,<strong>-u</strong> whenever there are multiple messages with the</p>
  </dt>
  <dd>
    <p>same name, only show the first one. This is useful if you have copies of the same message, which is a common occurrence when using e.g. Gmail together with <strong>offlineimap</strong>.</p>
  </dd>
  <dt>
    <p><strong>--include-related</strong>,<strong>-r</strong> also include messages being refered to by</p>
  </dt>
  <dd>
    <p>the matched messages -- i.e.. include messages that are part of the same message thread as some matched messages. This is useful if you want Gmail-style 'conversations'. Note, finding these related messages make searches slower.</p>
  </dd>
  <dt>
    <p><strong>-t</strong>, <strong>--threads</strong> show messages in a 'threaded' format -- that is,</p>
  </dt>
  <dd>
    <p>with indentation and arrows showing the conversation threads in the list of matching messages.</p><p>Messages in the threaded list are indented based on the depth in the discussion, and are prefix with a kind of arrow with thread-related information about the message, as in the following table:</p>
<pre>
|             | normal | orphan | duplicate |
|-------------+--------+--------+-----------|
| first child | `-&gt;    | `*&gt;    | `=&gt;       |
| other       | |-&gt;    | |*&gt;    | |=&gt;       |
</pre>
<p>Here, an 'orphan' is a message without a parent message (in the list of matches), and a duplicate is a message whose message-id was already seen before; not this may not really be the same message, if the message-id was copied.</p><p>The algorithm used for determining the threads is based on Jamie Zawinksi's description: <strong>http://www.jwz.org/doc/threading.html</strong></p>
  </dd>

</dl>
<h3>Example queries</h3>
<p>Here are some simple examples of <strong>mu</strong> search queries; you can make many more complicated queries using various logical operators, parentheses and so on, but in the author's experience, it's usually faster to find a message with a simple query just searching for some words.</p><p>Find all messages with both 'bee' and 'bird' (in any field)</p>
<pre>
  $ mu find bee AND bird
</pre>
<p>or shorter, because <strong>AND</strong> is implied:</p>
<pre>
  $ mu find bee bird
</pre>
<p>Find all messages with either Frodo or Sam:</p>
<pre>
  $ mu find 'Frodo OR Sam'
</pre>
<p>Find all messages with the 'wombat' as subject, and 'capibara' anywhere:</p>
<pre>
  $ mu find subject:wombat capibara
</pre>
<p>Find all messages in the 'Archive' folder from Fred:</p>
<pre>
  $ mu find from:fred maildir:/Archive
</pre>
<p>Find all unread messages with attachments:</p>
<pre>
  $ mu find flag:attach flag:unread
</pre>
<p>Find all messages with PDF-attachments:</p>
<pre>
  $ mu find mime:application/pdf
</pre>
<p>Find all messages with attached images:</p>
<pre>
  $ mu find 'mime:image/*'
</pre>
<p>Note[1]: the argument needs to be quoted, or the shell will interpret the '*' Note[2]: the '*' wild card can only be used as the last (rightmost) part of a search term. Note[3]: non-word characters (such as € or ☺) are ignore in queries; you cannot search for them.</p>
<h3>Integrating mu find with mail clients</h3>

<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    <p><strong>mutt</strong></p><p>For <strong>mutt</strong> you can use the following in your <em>muttrc</em>; pressing the F8 key will start a search, and F9 will take you to the results.</p>
<pre>
# mutt macros for mu
macro index &lt;F8&gt; "&lt;shell-escape&gt;mu find --clearlinks --format=links --linksdir=~/Maildir/search " &#92;
					"mu find"
macro index &lt;F9&gt; "&lt;change-folder-readonly&gt;~/Maildir/search" &#92;
					"mu find results"
</pre>

  </dd>
  <dt>
    
  </dt>
  <dd>
    <p><strong>Wanderlust</strong></p><p><strong>Sam B</strong> suggested the following on the <strong>mu</strong>-mailing list. First add the following to your Wanderlust configuration file:</p>
<pre>
(require 'elmo-search)
(elmo-search-register-engine
    'mu 'local-file
    :prog "/usr/local/bin/mu" ;; or wherever you've installed it
    :args '("find" pattern "--fields" "l") :charset 'utf-8)

(setq elmo-search-default-engine 'mu)
;; for when you type "g" in folder or summary.
(setq wl-default-spec "[")
</pre>
<p>Now, you can search using the <strong>g</strong> key binding; you can also create permanent virtual folders when the messages matching some expression by adding something like the following to your <em>folders</em> file.</p>
<pre>
VFolders {
  [date:today..now]!mu  "Today"

  [size:1m..100m]!mu    "Big"

  [flag:unread]!mu      "Unread"
}
</pre>
<p>After restarting Wanderlust, the virtual folders should appear.</p><p><strong>Wanderlust (old)</strong></p><p>Another way to integrate <strong>mu</strong> and <strong>wanderlust</strong> is shown below; the aforementioned method is recommended, but if that does not work for some reason, the below can be an alternative.</p>
<pre>
(defvar mu-wl-mu-program     "/usr/local/bin/mu")
(defvar mu-wl-search-folder  "search")

(defun mu-wl-search ()
  "search for messages with `mu', and jump to the results"
   (let* ((muexpr (read-string "Find messages matching: "))
	  (sfldr  (concat elmo-maildir-folder-path "/"
		    mu-wl-search-folder))
	  (cmdline (concat mu-wl-mu-program " find "
		      "--clearlinks --format=links --linksdir='" sfldr "' "
		     muexpr))
	  (rv (shell-command cmdline)))
    (cond
      ((= rv 0)  (message "Query succeeded"))
      ((= rv 2)  (message "No matches found"))
      (t (message "Error running query")))
  (= rv 0)))

(defun mu-wl-search-and-goto ()
  "search and jump to the folder with the results"
  (interactive)
  (when (mu-wl-search)
    (wl-summary-goto-folder-subr
      (concat "." mu-wl-search-folder)
      'force-update nil nil t)
    (wl-summary-sort-by-date)))

;; querying both in summary and folder
(define-key wl-summary-mode-map (kbd "Q") ;; =&gt; query
  '(lambda()(interactive)(mu-wl-search-and-goto)))
(define-key wl-folder-mode-map (kbd "Q") ;; =&gt; query
  '(lambda()(interactive)(mu-wl-search-and-goto)))

</pre>

  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p><strong>mu find</strong> returns 0 upon successful completion; if the search was performed, there needs to be a least one match. Anything else leads to a non-zero return value, for example:</p>
<pre>
| code | meaning                        |
|------+--------------------------------|
|    0 | ok                             |
|    1 | general error                  |
|    2 | no matches (for 'mu find')     |
|    4 | database is corrupted          |
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENCODING</h2>
        <div class="sectioncontent">
<p><strong>mu find</strong> output is encoded according the locale for <em>--format=plain</em> (the default), and UTF-8 for all other formats (<em>sexp</em>, <em>xml</em>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Please report bugs if you find them: <strong>http://code.google.com/p/mu0/issues/list</strong> If you have specific messages which are not matched correctly, please attach them (appropriately censored if needed).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Dirk-Jan C. Binnema &lt;djcb@djcbsoftware.nl&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mu-find&hellip;</h2>
        <div class="sectioncontent">
<p><strong>mu(1)</strong> <a href="../man1/mu-index.1.html"><strong>mu-index</strong>(1)</a></strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mu-extract.1.html"><span aria-hidden="true">&larr;</span> mu-extract.1: Display and save message parts (attachments), and open them with other tools.</a></li>
   <li class="next"><a href="mu-help.1.html">mu-help.1: Help information about mu commands. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
