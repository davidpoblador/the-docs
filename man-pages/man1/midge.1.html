<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>midge: Generate midi file from text description of music</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Generate midi file from text description of music">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="midge (1) manual">
  <meta name="twitter:description" content="Generate midi file from text description of music">
  <meta name="twitter:image" content="https://www.carta.tech/images/midge-midge-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/midge.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="midge (1) manual" />
  <meta property="og:description" content="Generate midi file from text description of music" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/midge-midge-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">midge<small> (1)</small></h1>
        <p class="lead">Generate midi file from text description of music</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/midge.1.html">
      <span itemprop="name">midge: Generate midi file from text description of music</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/midge/">
      <span itemprop="name">midge</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/midge.1.html">
      <span itemprop="name">midge: Generate midi file from text description of music</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>midge</strong> [options] [filename]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>midge</strong> generates a type 1 midi file from a text description of music. <strong>midge</strong> takes it's input from stdin unless <strong>filename</strong> is specified.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-h or --help</strong></p><ul>
<li><p>Show help text. <strong>--version</strong> or <strong>--warranty</strong> or --<strong>about</strong></p></li><li><p>Show version and license info. <strong>-v</strong> or <strong>--verbose</strong></p></li><li><p>Print verbose output to stdout. <strong>-d</strong> or <strong>--debug</strong></p></li><li><p>Print debugging output to stdout (sets verbose mode automatically). <strong>-q</strong> or <strong>--quiet</strong></p></li><li><p>Quiet. no stdout. <strong>-o file</strong> or <strong>--outfile file</strong></p></li><li><p>Midi output to <strong>file</strong>. Otherwise to a.out.mid <strong>-c</strong> or <strong>--check</strong></p></li><li><p>Check input only; No midi output. <strong>-u</strong> or <strong>--unroll-loops</strong></p></li><li><p>Unroll all the repeat blocks before parsing and save the unrolled source code to a new file (*.long.mg). Should be set automatically if needed. <strong>-U</strong> or <strong>--no-unroll-save</strong></p></li><li><p>Don't save unrolled source to file. <strong>-R</strong> or <strong>--no-reset</strong></p></li><li><p>Don't insert `reset all controllers' event at start of tracks. <strong>-t bpm</strong> or <strong>--tempo bpm</strong></p></li><li><p>Set tempo to <strong>bpm</strong> beats per minute, overriding value set in input file. <strong>-b steps</strong> or <strong>--bend-steps steps</strong></p></li><li><p>Set the number of steps per quarter note for the simple bend syntax. <strong>--unsafe</strong></p></li><li><p>Do not use Safe.pm to run Perl code from <strong>%eval</strong> blocks. <strong>-s number</strong> or <strong>--seed number</strong></p></li><li><p>Use <strong>number</strong> as the seed for the random number generator. <strong>-S [scale [root]]</strong> or <strong>--show-scale [scale [root]]</strong></p></li><li><p>List notes in <strong>scale</strong> starting from <strong>root</strong>. If <strong>root</strong> is omitted c4 is used. If <strong>scale</strong> is omitted, a list of suported scales is shown. <strong>-I path</strong> or <strong>--include path</strong></p></li><li><p>Add <strong>path</strong> to include paths. Can be specified multiple times or <strong>path</strong> can be a list separated by colons or commas.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT LANGUAGE</h2>
        <div class="sectioncontent">
<p>Sample source file to play a scale of E.</p><p>================start file======================</p><p># this line is a comment</p><p><strong>@head</strong> { # there must be exactly 1 @head section</p><p>	# set time signature</p><p>	<strong>$time_sig</strong> 4/4</p><p>	# set tempo in BPM</p><p>	<strong>$tempo</strong> 120</p><p>} # end of @head section</p><p><strong>@body</strong> { # there must be exactly 1 @body section</p><p>	# start a music track on channel 1</p><p>	# multiple tracks can use the same channel</p><p>	<strong>@channel</strong> 1 {</p><p>		# set patch to electric bass</p><p>		<strong>$patch</strong> 34</p><p>		# notes. see below for explanation.</p><p>		/l4/e3     # quarter note e in third octave</p><p>		f<strong>+</strong>         # f sharp same octave same length</p><p>		           # use `<strong>-</strong>' for flat</p><p>		g+ a b # rest of notes</p><p>		c+<strong>4</strong> d+ e # octave changes at c</p><p>	} # end of track</p><p>} # end of @body section</p><p>========================end file====================</p><p>More examples are included in the examples/ directory of the archive.</p><p>In the following, &lt;name&gt; is a required parameter and [name] is an optional parameter.</p><p>Notes.</p><p>The format of a note is: [<strong>/options/</strong>]&lt;<strong>name</strong>&gt;[<strong>+</strong>|<strong>-</strong>][<strong>octave</strong>]</p><p>The <strong>/options/</strong> section can contain the following:</p><p><strong>l</strong>[numerator:]&lt;denominator&gt;</p><p>Sets the length of the note to (<strong>numerator</strong> or one) divided by <strong>denominator</strong>. ie. l4 = quarter note, l1 = whole note, l3:4 = 3/4 note (3 quarter notes tied). An uppercase `<strong>L</strong>' may be used instead to distinguish it from a `1'.</p><p><strong>r</strong>&lt;number&gt;</p><p>Sets the number of times to repeat the note. For example</p><p>/<strong>l</strong>8<strong>r</strong>16/</p><p>makes the note duration 1/8 and repeats the note 16 times.</p><p><strong>a</strong>&lt;number&gt;</p><p>Sets the note's note on velocity (attack)</p><p><strong>d</strong>&lt;number&gt;</p><p>Sets the note's note off velocity (decay)</p><p><strong>z</strong>[+|-]&lt;number&gt;[%]</p><p>Offsets the note by <strong>number</strong> midi clicks. Positive values play the note late and negative values play it early. If <strong>number</strong> is followed by a &#96;<strong>%</strong>\' character it is taken as a percentage of the current note length. Offset values are <strong>not</strong> inherited by subsequent notes.</p><p><strong>Z</strong>[+|-]&lt;number&gt;[%]</p><p>As the above &#96;<strong>z</strong>\' option but a random value is used. If <strong>number</strong> is negative or positive (plus sign <strong>required</strong>), a value between zero and <strong>number</strong> is used. If there is no sign, a value between plus and minus <strong>number</strong> is used.</p><p>The offset option will not work with the <strong>r</strong>epeat note option, but the same effect can be achieved using a <strong>%repeat</strong> block.</p><p>Notes cannot be offset backwards (ie played early) unless they are preceded by a rest. To work around this I have added the <strong>$shorten</strong> keyword, described below. See also <strong>$unquantise</strong>.</p><p><strong>name</strong> is the name of the note ie. [a-g] <strong>required</strong>.</p><p><strong>+</strong> sharp.</p><p><strong>-</strong> flat.</p><p><strong>octave</strong> is the midi octave ie. [1-11]. Although most midi software uses 0 for the lowest octave, I have used 1 for consistency with the midi channels and instrument names which both count from 1.</p><p>If not specified, the length, octave, attack and decay are inherited from the previous note.</p><p>In a drum track, instead of the note names, aliases can be used. For example, to get an open hi hat, instead of `<strong>f+3</strong>' you can use `<strong>hh_o</strong>'. See README.drums for a full list of aliases.</p><p>Rests.</p><p>Rests are written as note `<strong>r</strong>', with <strong>/options/</strong> the same as for notes, but with only the length and repeat options used. The length value is inherited from note to rest and vice versa.</p><p>Bars.</p><p>The pipe symbol (`|') can be used to denote bars. The lengths of bars are not checked -- this is only to allow more readable source files. Bars can be numbered by appending a number to the pipe symbol. They may be separated by an underscore but not by spaces.</p><p>Simple bar example: | c d e f | g a b c</p><p>Numbered bar examples: |1 c d e f |2 g a b c</p><p>|_1 c d e f |_2 g a b c</p><p>The consistency of bars can be checked by using the <strong>$bar_strict</strong> keyword in the <strong>@head</strong> section. This gives an error or warning unless all tracks have the same number of bars and numbered bars appear at the same time in each track:</p><p>$bar_strict <strong>warn</strong>  # Print a warning message for inconsistent bars.</p><p>$bar_strict <strong>error</strong>  # Exit with an error message for inconsistent bars.</p><p>Top level keywords.</p><p><strong>@head</strong> { content }</p><p>There must be exactly one <strong>@head</strong> section. See below for description of <strong>content</strong>.</p><p><strong>@body</strong> { content }</p><p>There must be exactly one <strong>@body</strong> section. See below for description of <strong>content</strong>.</p><p>Keywords in the <strong>@head</strong> section.</p><p><strong>$time_sig</strong> &lt;a/b&gt;</p><p>The <strong>b</strong> value must be one of 4, 8, 16, 32, 64.</p><p><strong>$tempo</strong> &lt;t&gt;</p><p><strong>t</strong> is the tempo in BPM.</p><p>Both <strong>$time_sig</strong> and <strong>$tempo</strong> are also allowed within an @channel block (described below).</p><p><strong>$title</strong> &lt;title&gt;</p><p>Sets the title of the song to <strong>title</strong>. If <strong>title</strong> contains spaces it must be inside double quotes.</p><p><strong>$resolution</strong> &lt;n&gt;</p><p>Sets the number of midi clicks per quarter note to <strong>n</strong>. The default is 96.</p><p>Keywords in the <strong>@body</strong> section.</p><p><strong>%define</strong> &lt;name&gt; { notes }</p><p>Define a sequence of <strong>notes</strong>, assigning it to <strong>name</strong> to be recalled in a music track. Defined sequences are used by including:</p><p><strong>~</strong>&lt;name&gt;[/transpose/]</p><p>within a track to include the sequence <strong>name</strong>, transposed by <strong>transpose</strong> semitones. Previously defined sequences can be used in subsequent <strong>%define</strong> blocks. for instance:</p><p><strong>%define</strong> a_riff { a3 a c4 d }</p><p><strong>%define</strong> d_riff { d4 d f g }</p><p><strong>%define</strong> main_riff { <strong>~</strong>a_riff <strong>~</strong>d_riff }</p><p>Although we could achieve the same result by transposing the first riff to make the second:</p><p><strong>%define</strong> a_riff { a3 a c4 d }</p><p><strong>%define</strong> main_riff { <strong>~</strong>a_riff <strong>~</strong>a_riff<strong>/5/</strong> }</p><p><strong>define</strong> blocks may also contain repeat blocks, bend blocks and $volume/patch/reverb etc.</p><p><strong>@channel</strong> &lt;number&gt; [name] { content }</p><p>Begin a midi track on channel <strong>number</strong>, optionally setting the instrument name to <strong>name</strong>. If <strong>name</strong> contains spaces it must be inside double quotes.</p><p><strong>content</strong> can include notes, rests, previously defined sequences, and the following keywords:</p><p><strong>$time_sig</strong> &lt;a/b&gt;</p><p>Changes the time signature for the song (affects all tracks). The <strong>b</strong> value must be one of 4, 8, 16, 32, 64.</p><p><strong>$tempo</strong> &lt;t&gt;</p><p>Changes the song tempo (affects all tracks). <strong>t</strong> is in BPM.</p><p><strong>$patch</strong> [[bank_LSB,]bank_MSB,]&lt;number|name&gt;</p><p>Set patch number for this channel to <strong>number</strong> or <strong>name</strong>. Where <strong>number</strong> is from 1 to 128 and <strong>name</strong> is an alias as defined in README.patches. Optionally select bank number <strong>bank_MSB</strong>. Optionally select bank LSB number <strong>bank_LSB</strong> (used for external midi keyboards). Each value must be in the range 1-128.</p><p><strong>$bank</strong> [LSB,]&lt;MSB&gt;</p><p>Select bank number <strong>MSB</strong>. Optionally setting the LSB value (used for external midi keyboards) to <strong>LSB</strong>. Both values must be in the range 1-128.</p><p><strong>$length</strong> [n:]&lt;d&gt;</p><p>Set default note length. The value is specified in the same format as in the note options.</p><p><strong>$shorten</strong> &lt;number&gt;</p><p>Shorten each note by <strong>number</strong> midi clicks, to allow space for notes to be offset backwards.</p><p><strong>$unquantise</strong> [+|-]&lt;number&gt;[%]</p><p>Apply a random offset to each note. <strong>number</strong> has the same meaning as for the <strong>Z</strong> note option above.</p><p><strong>$octave</strong> &lt;number&gt;</p><p>Set default octave to <strong>number</strong></p><p><strong>$volume</strong> &lt;number&gt;</p><p>Set the track volume to <strong>number</strong></p><p><strong>$attack</strong> &lt;number&gt;</p><p>Set the note's attack to <strong>number</strong></p><p><strong>$decay</strong> &lt;number&gt;</p><p>Set the note's decay to <strong>number</strong></p><p><strong>$reverb</strong> &lt;number&gt;</p><p>Set the reverb depth to <strong>number</strong> on the current channel.</p><p><strong>$chorus</strong> &lt;number&gt;</p><p>Set the chorus depth to <strong>number</strong> on the current channel.</p><p><strong>$pan</strong> &lt;number&gt;</p><p>Set the pan value to <strong>number</strong>. 0 is left 127 is right.</p><p>The volume, attack, decay, reverb, chorus and pan values must be integers from 0 to 127. They can also be specified as a range (eg `<strong>8-64</strong>'), in which case a random value within the range is used.</p><p><strong>%pan_all</strong> { note value ... }</p><p>Sets the pan value for each subsequent instance of <strong>note</strong> in the current track. This is mainly intended for panning a drum kit, but could be used on another track. <strong>value</strong> can be an integer or a range (eg `<strong>8-64</strong>'). Multiple <strong>note value</strong> pairs are allowed. If two notes with different pan_all values are played at the same time anything could happen.</p><p>To affect every note in the channel with a range, use `<strong>*</strong>' or `<strong>any</strong>' for <strong>note</strong>. The <strong>/r4/</strong>&lt;note&gt; method of repeating notes will not work with this option, but the same effect can be achieved using a repeat block.</p><p><strong>$marker</strong> &lt;text&gt;</p><p>Adds a marker event with <strong>text</strong> as it's content. If <strong>text</strong> contains spaces it must be quoted using double-quote characters.</p><p><strong>%repeat</strong> &lt;number&gt; { notes }</p><p>Repeat <strong>notes number</strong> times. <strong>notes</strong> can include notes, rests, predefined sequences and other <strong>%repeat</strong> blocks.</p><p><strong>%bend</strong> &lt;note&gt; { event ... }</p><p>Play <strong>note</strong> and move the pitch wheel in the manner described by multiple <strong>event</strong>s, which have the following format:</p><p>[n:]&lt;d&gt;&lt;+|-&gt;&lt;value&gt;</p><p>where <strong>n</strong> and <strong>d</strong> specify the time from the start of the note or from the previous event, in the same format as the note lengths, and <strong>value</strong> is the amount to bend the note by (the plus or minus sign is required). With the default pitch wheel range of +/- 2 semitones a value of 32 equates to one semitone. Note that the bend amount is relative. The maximum <strong>cumulative</strong> bend amount is plus or minus 64.</p><p>For example the following:</p><p>%bend a3 { 4+32 4-32 2+0 }</p><p>Plays the note a3 for 1/4 note, bends up a whole tone for 1/4 then returns down to a3 and holds for 1/2 note.</p><p><strong>$bend_range</strong> &lt;number&gt;</p><p>Changes the pitch wheel range to +/- <strong>number</strong>. This sets the maximum bend up and down, so if it is set to 4, a bend value of 64 will bend up 4 semitones and -64 will bend down 4 semitones. The default range for most midi devices is 2 semitones.</p><p><strong>$pitch</strong> &lt;val&gt;</p><p>Set the pitch wheel value to <strong>val</strong>. This can be used in conjunction with separate note on and note off events (see below under `simultaneous notes') to create complex bending effects. Unlike the <strong>%bend</strong> syntax above, this does <strong>not</strong> reset the pitch wheel to the neutral position (64)</p><p>Simpler pitch bends can be created with this syntax:</p><p>/l8/e4<strong>=&gt;</strong>g4<strong>=&gt;</strong>e4</p><p>This bends from e4 up to g4 and back down to e4 in linear steps over the duration of an eighth note. By default there are 16 steps per quarter note duration (8 steps in this example), but a different value can be set using the `-b' command line switch. Any number of notes can be used, but the first one must have a length value and each of them must have an octave value.</p><p><strong>%choose</strong> [time] { weighting item ... }</p><p>where time is a length value in the format [n:]&lt;d&gt; the same as used in the length options, with the `l' omitted.</p><p>If <strong>time</strong> is not specified:</p><p>Choose one <strong>item</strong> from a list, where each <strong>item</strong> can be a note, rest, or predefined riff, and each item has a <strong>weighting</strong> which defines how likely it is to be chosen. For example:</p><p>%choose { 2 a3 4 c5 3 e4 1 g3 }</p><p>gives a3 a 20% chance, c5 - 40% ; e4 - 30% and g3 - 10% Each item <strong>must</strong> have a weighting. See also scales below.</p><p>if <strong>time</strong> is specified:</p><p>Choose multiple <strong>item</strong>s from the list up to a length of <strong>time</strong>. If all the <strong>item</strong>s are too long to end the riff exactly at <strong>time</strong>, the remainder is filled with a rest. When choose is used in this way each note or rest must have a length value and any predefined riffs used must have a fixed length (ie the first note must have a length value), and the length of the whole riff must be specified in the choose block in the same format as for notes. for example:</p><p>%define riff_1 { /l2/a3 /l4/b c4 } # riff is 1 bar long</p><p>%choose <strong>4:1</strong> { # choose 4 bars</p><p>	1 /l8/d4 3 /l8/e4 2 /l4/g4 1 <strong>/l1/~riff_1</strong></p><p>}</p><p>If <strong>time</strong> is <strong>0</strong> or <strong>-</strong> then midge looks for a block of the form:</p><p><strong>rhythm</strong> { n[:d] ... }</p><p>which is taken as a series of note length values for which the pitches are chosen from the list. Other tokens are passed through, so you can insert specific notes, predefined riffs or rests. Any token in the block begining with an underscore will be passed through, with the underscore removed. See examples/tutorial/choose_scale.mg for an example.</p><p>Another way to specify the list of notes/weightings is with the <strong>scale</strong> keyword:</p><p><strong>scale</strong> minor /l8/g4-6 [ weight ... ]</p><p>This selects a G Minor scale from the 4th to 6th octaves (ie g4 to g6). The length value is unnecesary if you are using a rhythm block. If the <strong>-6</strong> is omitted a single octave is used.</p><p>The weight block specifies the note weightings in order. If omitted all weightings are equal. To ingore a note use a weighting of 0, but there <strong>must</strong> be a weighting for each note if the block is present at all.</p><p>The <strong>-S</strong> switch can be used to show the notes in a scale or a list of supported scales.</p><p><strong>%chain</strong> &lt;time&gt; {</p>
<pre>
    start &lt;note&gt;
    note1 [ weight note ... ]
    ...
    rhythm [ weight length ... ] <strong>or</strong> rhythm { length ... }
</pre>
<p>}</p><p>Define a `chain' structure where for each note there is a weighted list of notes which may follow it. A starting point is picked randomly from all the notes used, or specified with the <strong>start</strong> keyword, and then subsequent notes are chosen from the appropriate list up to a total length of <strong>time</strong>.</p><p>The <strong>rhythm</strong> keyword has two forms: Using square brackets `[]', a weighted list of note lengths can be defined, which will be chosen from randomly. Using braces `{}', a list of length values can be defined which will be used in sequence (repeating as neccessary). To play through the rhythm block just once, set the <strong>time</strong> to <strong>0</strong> or <strong>-</strong>. In this case the rhythm block is parsed in the same way as described above for <strong>%choose</strong> with time set to zero. The keyword <strong>times</strong> can be used as a synonym for <strong>rhythm</strong>.</p><p>The <strong>start</strong> keyword specifies the note to start from when using the chain. If <strong>start</strong> is omitted, the start note is chosen randomly.</p><p>Another way define the notes in a <strong>chain</strong> block is to use one of the built in scales. Then the weightings are specified in the form of a matrix, with a row for each "from" note (one for each note of the scale) and a column for each "to" note. An example of this form can be found in the file examples/tutorial/chain_scale.mg</p><p>To use the choose or chain blocks, the file must be compiled with the unroll-loops option (it is set automatically when a choose or chain block is found). This option saves the unrolled source code in a new file, so if it produces particularly good output you have an exact copy which you can make other changes to without losing the generated track.</p><p>Note that a choose and chain blocks cannot be inside a %define or inside another choose or chain block.</p><p><strong>%eval</strong> { Perl code }</p><p>Run a block of Perl code and replace the %eval block with the value returned from the Perl code.</p><p><strong>%eval -</strong> { Perl Code }</p><p>Run a block of Perl code without reading the return value.</p><p>Perl code is run using the Safe module if it is present, with :base_core, :base_math and :base_mem allowed. If Safe.pm is not available or more permissions are needed the --unsafe option causes midge to run the %eval blocks in it's own perl process.</p><p>Keywords allowed at any point in the source.</p><p><strong>%include</strong> &lt;file&gt;</p><p>Includes the contents of <strong>file</strong> as if they had been written at that point in the source file. <strong>Must</strong> be on a line of it's own in the source file.</p><p>Simultaneous Notes.</p><p>The most flexible way to play simultaneous notes is by using separate tracks (you can use the same channel/patch), or by using separate note on and note off events (see below). However, there is a simpler way with some limitations. For example: <strong>( c e g )</strong> will play the notes c, e and g simultaneously, making a C chord. The length of all the simultaneous notes is the same as the first one (determined by it's own length value or the one inherited from the previous note, rest, or $length declaration.</p><p>One way to use this to make chords is as follows:</p><p><strong>%define minor { ( c e- g ) }</strong> # define minor to be a c-minor</p><p><strong>%define major { ( c e g ) }</strong> # define major to be a c-major</p><p><strong>%define 7th { ( c e g b- ) }</strong> # define 7th to be a c-7th</p><p>Then you can use the in your music tracks:</p><p>$length 4 $octave 4 # set default length and octave</p><p><strong>~major</strong> # play a c-major</p><p><strong>~minor/9/</strong> # play an a-minor</p><p><strong>~7th/5/</strong> # play an f-7th</p><p>To make chords sound strummed, the <strong>strum</strong> keyword can be used:</p><p><strong>$strum</strong> 5</p><p>This sets the interval between each note in subsequent chords to 5 midi clicks.</p><p>To create complex patterns of simultaneous notes on one track, separate note on and note off events can be used. These are specified in the same way as normal notes, but with a <strong>+</strong> prepended for note on and a <strong>-</strong> prepended for note off. The length and repeat options cannot be used. The length of notes entered this way is controlled by putting rests or other notes between the note on and note off events. eg:</p><p><strong>+</strong>c4 /l4/r <strong>+</strong>e r <strong>+</strong>g /l2/r <strong>-</strong>c <strong>-</strong>e <strong>-</strong>g</p><p>plays and holds c4, after a 1/4 note plays and holds e4 and after another 1/4 note plays and holds g4, releasing all three after a further 1/2 note.</p><p>Tuplets.</p><p>While it is possible to create tuplets by choosing a suitable note length, they can also be written in a more conventional way using the <strong>%tuplet</strong> keyword:</p><p><strong>%tuplet</strong> n:d { notes... }</p><p>plays <strong>n</strong> notes in the space of <strong>d</strong>. <strong>notes</strong> can contain anything allowed in a @channel block. The note values are then automatically altered to create the tuplet. For example:</p><p>%tuplet 5:3 { /l8/e4 f g f e }</p><p>plays five eigth notes in the space of three. Tuplets can be nested to any depth. See examples/tutorial/tuplet.mg for an example. Midge does <strong>not</strong> check that the length of music inside the tuplet block is correct.</p><p>Keys.</p><p>If you want to import your midi file into a notation editor you will want to set the key. This is done with:</p><p><strong>$key</strong> &lt;name&gt;[+|-][m]</p><p>Where <strong>name</strong> is a-g, +|- are sharp and flat, and m is minor. If the whole piece stays in the same key you can set it in the @head section, otherwise it can appear anywhere in a @channel section, and will affect all tracks.</p><p>If you are used to regular music notation and want notes to be sharp or flat automatically depending on the key, use the <strong>$key_strict</strong> keyword instead. To get a natural note use the <strong>=</strong> sign, eg in G, <strong>f=</strong> plays an f natural. The <strong>$key_strict</strong> keyword can only be used in the @head section. The key can still be changed using the regular <strong>$key</strong> keyword.</p><p><strong>$ctrl</strong> &lt;num,val&gt;</p><p>Set controller number <strong>num</strong> to <strong>val</strong>.</p><p><strong>$rpn</strong> [num-msb,]&lt;num-lsb,val-msb&gt;[,val-lsb]</p><p>Set the rpn controller <strong>num</strong> to <strong>val</strong></p><p><strong>$nrpn</strong> [num-msb,]&lt;num-lsb,val-msb&gt;[,val-lsb]</p><p>Set the nrpn controller <strong>num</strong> to <strong>val</strong></p><p><strong>%verbatim</strong> { byteval... }</p><p>Insert a string of bytes into the midi file. Each <strong>byteval</strong> can be in either decimal (0-255) or hex (0x00-0xFF). The keyword <strong>bytes</strong> can be used instead of <strong>verbatim</strong>.</p><p><strong>$print</strong> &lt;text&gt;</p><p>Print <strong>text</strong> to stdout. If <strong>text</strong> contains spaces it must be quoted using double quotes (<strong>"</strong>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>When building scales, although the pitches are correct, the note names may be technically wrong, eg `a sharp' instead of `b flat'.</p><p>If there is an error in a %repeat or %define block the error message only gives the line number of the %repeat or %define keyword.</p><p>No commercial potential.</p><p>If you find any other bugs, please let me know.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO midge&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/midi2mg.1.html"><strong>midi2mg</strong>(1)</a>, <strong>emacs</strong>(1), <strong>playmidi</strong>(1), <strong>drvmidi</strong>(1), <a href="../man1/timidity.1.html"><strong>timidity</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>David Riley &lt;dave@dmriley.demon.co.uk&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mid3v2.1.html"><span aria-hidden="true">&larr;</span> mid3v2.1: Audio tag editor similar to 'id3v2'</a></li>
   <li class="next"><a href="midi2abc.1.html">midi2abc.1: Program to convert midi format files to abc notation <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
