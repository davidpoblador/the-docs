<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>thd: Triggerhappy global hotkey daemon</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Triggerhappy global hotkey daemon">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="thd (1) manual">
  <meta name="twitter:description" content="Triggerhappy global hotkey daemon">
  <meta name="twitter:image" content="https://www.carta.tech/images/triggerhappy-thd-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/thd.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="thd (1) manual" />
  <meta property="og:description" content="Triggerhappy global hotkey daemon" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/triggerhappy-thd-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">thd<small> (1)</small></h1>
        <p class="lead">Triggerhappy global hotkey daemon</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/thd.1.html">
      <span itemprop="name">thd: Triggerhappy global hotkey daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/triggerhappy/">
      <span itemprop="name">triggerhappy</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/thd.1.html">
      <span itemprop="name">thd: Triggerhappy global hotkey daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>thd</strong> [<strong>--help</strong>] [<strong>--user</strong> <em>name</em>] [<strong>--listevents</strong>] [<strong>--dump</strong>] [<strong>--socket</strong> <em>socket</em>] [<strong>--triggers</strong> <em>config</em>] [<strong>--daemon</strong>] [<strong>--pidfile</strong> <em>file</em>] [<strong>--uinput</strong> <em>device</em>][<strong>--ignore</strong> <em>event</em>] [<em>devices...</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Triggerhappy is a hotkey daemon that operates on a system wide scale. It watches all configured input devices for key, switch or button events and can launch arbitrary commands specified by the administrator. In contrast to hotkey services provided by desktop environments, Triggerhappy is especially suited to hardware related switches like volume or wifi control; it works independently from a specific user being logged in and is also suitable for embedded systems that do not a graphical user interface.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>--help</strong>
  </dt>
  <dd>
    <p>Shows usage instructions</p>
  </dd>
  <dt>
    <strong>--listevents</strong>
  </dt>
  <dd>
    <p>Prints a list of all known event names.</p>
  </dd>
  <dt>
    <strong>--triggers</strong> <em>conf</em>
  </dt>
  <dd>
    <p>Read trigger definitions from <em>conf</em>, which can either be a file or a directory. If a directory is specified, all its files matching the pattern *.conf are loaded.</p>
  </dd>
  <dt>
    <strong>--dump</strong>
  </dt>
  <dd>
    <p>Dump all recognized events to \s-1STDOUT\s0. This can also be utilized to create a skeleton trigger configuration by redirecting the printed configuration lines to a configuration file, adding the desired command and activating the generated line by removing the comment mark \*(L"#\*(R" at its beginning:</p>
<pre>
  thd --dump /dev/input/event* | grep ^# &gt; /etc/triggerhappy/triggers.d/skeleton.conf
</pre>

  </dd>
  <dt>
    <strong>--socket</strong> <em>file</em>
  </dt>
  <dd>
    <p>Open a unix domain socket at <em>file</em>; this socket can be used to send commands to the running daemon (by using the program th-cmd), e.g. for adding or removing devices.</p>
  </dd>
  <dt>
    <strong>--daemon</strong>
  </dt>
  <dd>
    <p>Run as a background daemon and detach from the terminal.</p>
  </dd>
  <dt>
    <strong>--pidfile</strong> <em>file</em>
  </dt>
  <dd>
    <p>Write \s-1PID\s0 to <em>file</em>.</p>
  </dd>
  <dt>
    <strong>--uinput</strong> <em>device</em>
  </dt>
  <dd>
    <p>Open uinput file (probably <em>/dev/input/uinput</em>) to generate synthetic events.</p>
  </dd>
  <dt>
    <strong>--ignore</strong> <em>eventname</em>
  </dt>
  <dd>
    <p>Ignore key and switch event labeled <em>eventname</em>. This can be used to suppress the \s-1FN\s0 key on some notebooks which only generates events sometimes and might screw up key combinations.</p>
  </dd>
  <dt>
    <strong>--user</strong> <em>name</em>
  </dt>
  <dd>
    <p>Change to user id <em>name</em> after opening files. This usually prevents thd from opening additional input devices, unless they are opened by the th-cmd program and their file descriptor are passed to the daemon.</p>
  </dd>

</dl>
<p>Additional command line arguments are considered filenames of input devices.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<h3>Configuring event handlers</h3>
<p>The hotkey bindings used by Triggerhappy are set in the configuration file specified by <strong>--triggers</strong>. Each line consists of three segments: The symbolic name of the key or event name to react on, the value carried by the expected event, and of course the command to be launched.</p><p>The event names can be identified by operating the desired key or switch while running the triggerhappy daemon with the option <strong>--dump</strong>.</p><p>Key events carry the value <em>1</em> for a key being pressed and transmit the payload <em>0</em> when it is released; holding the key down constantly yields events with a value of <em>2</em>.</p><p>The command can include any number of arguments. Please include the full path to avoid trouble through different $PATH settings for the daemon and your interactive session.</p><p>The three fields are separated by an arbitrary number of whitespaces, while anything behind a # character is ignored and considered a comment.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<h3>Starting the daemon</h3>
<p><strong>thd --dump /dev/input/event*</strong></p><p>Dump all events processable by thd to the console; this is useful to find out the correct event name for a specific key.</p><p><strong>thd --triggers /etc/triggerhappy/triggers.d/ /dev/input/event*</strong></p><p>Read from all currently connected input devices and process events according to the files in <em>/etc/triggerhappy/triggers.d/</em>.</p><p><strong>thd --triggers /etc/triggerhappy/triggers.conf --socket /var/run/thd.socket</strong></p><p>Do not open any input devices yet, but bind the socket <em>/var/run/thd.socket</em> for th-cmd to connect to.</p>
<h3>Configuration files</h3>
<p>Any number of event handlers can be placed in the configuration file:</p><p>    # /etc/triggerhappy/triggers.d/suspend.conf     #     # Suspend the system     KEY_SLEEP                   1       /usr/sbin/hibernate-ram     KEY_SLEEP+KEY_LEFTSHIFT     1       /usr/sbin/hibernate-disk</p><p>    # /etc/triggerhappy/triggers.d/audio.conf     # Change mixer volume when pressing the appropriate keys (or holding them)     KEY_VOLUMEUP    1      /usr/bin/amixer set Master 5%+     KEY_VOLUMEUP    2      /usr/bin/amixer set Master 5%+     KEY_VOLUMEDOWN  1      /usr/bin/amixer set Master 5%-     KEY_VOLUMEDOWN  2      /usr/bin/amixer set Master 5%-</p><p>In more complex situations, triggerhappy can provide multiple modes that map a single event to different keys; triggers are bound to a specific mode by appending its name to the event name:</p><p>    KEY_KPPLUS@media    1       /usr/bin/mpc next     KEY_KPMINUS@media   1       /usr/bin/mpc prev</p><p>These two lines will only cause mpc to be called if the triggerhappy daemon is in \*(L"media\*(R" mode. Changing the mode can be achieved by placing a special trigger inside the configuration:</p><p>    KEY_F12@            1       @media     KEY_F12@media       1       @</p><p>These two lines make the F12 key toggle between the (nameless) default mode and the newly defined media mode.</p><p>Triggers with \*(L"@\*(R" appended are only executed if the specified mode is active; all other triggers are enabled in every mode.</p><p>When launched with the option <strong>--uinput</strong>, triggerhappy can be used to generate synthetic events. A virtual input device is created which emits specified key presses once a special trigger is reached:</p><p>    KEY_KPASTERISK      1       &lt;KEY_VOLUMEDOWN</p><p>By prepending a keycode with the special character '&lt;', other applications will receive a press and release of the corresponding key. This is especially useful to remap or mirror events generated by devices exclusively serviced by the triggerhappy daemon.</p><p>It is possible to create handlers that only react to specific devices: to achieve such behaviour, add the input device using <strong>th-cmd</strong> and supply it with a tag; this tag can then be used to limit the scope of a trigger to this device:</p><p>    &lt;remote&gt;KEY_ENTER   1       /usr/bin/mpc stop</p><p>Defining the hotkey in this way will only trigger the handler if the event is received from a device tagged \*(L"remote\*(R".</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Stefan Tomanek &lt;stefan.tomanek+th@wertarbyte.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="th-cmd.1.html"><span aria-hidden="true">&larr;</span> th-cmd.1: Triggerhappy commander</a></li>
   <li class="next"><a href="the.1.html">the.1: The hessling editor. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
