<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mime-construct: Construct and optionally mail mime messages</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Construct and optionally mail mime messages">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mime-construct (1p) manual">
  <meta name="twitter:description" content="Construct and optionally mail mime messages">
  <meta name="twitter:image" content="https://www.carta.tech/images/mime-construct-mime-construct-1p.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1p/mime-construct.1p.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mime-construct (1p) manual" />
  <meta property="og:description" content="Construct and optionally mail mime messages" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mime-construct-mime-construct-1p.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mime-construct<small> (1p)</small></h1>
        <p class="lead">Construct and optionally mail mime messages</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/mime-construct.1p.html">
      <span itemprop="name">mime-construct: Construct and optionally mail mime messages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mime-construct/">
      <span itemprop="name">mime-construct</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/mime-construct.1p.html">
      <span itemprop="name">mime-construct: Construct and optionally mail mime messages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mime-construct</strong> <em>switch</em>...</p><p>Sorry, it's hard to provide a meaningful synopsis.  See the examples.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mime-construct</strong> constructs and (by default) mails \s-1MIME\s0 messages.  It is entirely driven from the command line, it is designed to be used by other programs, or people who act like programs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<h3>Global Settings</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>--debug</strong>
  </dt>
  <dd>
    <p>Turn debugging on.</p>
  </dd>
  <dt>
    <strong>--help</strong>
  </dt>
  <dd>
    <p>Show the usage message and die.</p>
  </dd>
  <dt>
    <strong>--output</strong>
  </dt>
  <dd>
    <p>Don't mail the generated message, print it to stdout instead.  This loses <strong>--bcc</strong> info.</p>
  </dd>
  <dt>
    <strong>--subpart</strong>
  </dt>
  <dd>
    <p>Generate a subpart which can be used in another \s-1MIME\s0 message, rather than a top-level \s-1MIME\s0 message itself.  This turns on <strong>--output</strong> and changes some internal semantics a bit.  See the examples.</p>
  </dd>
  <dt>
    <strong>--version</strong>
  </dt>
  <dd>
    <p>Print the version and exit successfully, if this is the only arg. Otherwise, print the version and die.</p>
  </dd>

</dl>

<h3>Main Header</h3>
<p>These arguments add text to the top-level header of the message, or control who it gets sent to.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>--bcc</strong> <em>address</em>
  </dt>
  <dd>
    <p>Add <em>address</em> to the recipient list.  This doesn't actually add anything to the header, of course.  If you're not actually mailing the message (if you use <strong>--output</strong> or <strong>--subpart</strong>) <strong>--bcc</strong> will have no effect.</p>
  </dd>
  <dt>
    <strong>--cc</strong> <em>address</em>
  </dt>
  <dd>
    <p>Add an address to the <strong>Cc:</strong> list.</p>
  </dd>
  <dt>
    <strong>--embedded-to</strong>
  </dt>
  <dd>
    <p>Send the message to the recipients already listed in the header, in addition to those given with <strong>--to</strong>, <strong>--cc</strong>, and <strong>--bcc</strong>.  This makes sense if you use the <strong>--header</strong> switch to add your own <strong>To:</strong> or <strong>Cc:</strong>.  In this case you probably don't want to use <strong>--to</strong> or <strong>--cc</strong> because they would create new headers rather than adding to the ones already in the message. This switch passes the <strong>-t</strong> switch to sendmail (<strong>mime-construct</strong> doesn't try to parse the headers you provide), so it doesn't really do anything if you're not mailing the message.</p>
  </dd>
  <dt>
    <strong>--header</strong> <em>str</em>
  </dt>
  <dd>
    <p>Add arbitrary text to the header.  The <em>str</em> can be anything you like, including multiple lines.  You can create invalid messages this way. If you include a blank line in the <em>str</em> you'll really screw up the message.</p>
  </dd>
  <dt>
    <strong>--multipart</strong> <em>str</em>
  </dt>
  <dd>
    <p>This specifies the multipart content type and options.  The default is \*(C`multipart/mixed\*(C'.  Don't include a \*(C`boundary\*(C' setting, that's supplied by <strong>mime-construct</strong>. It's okay if you specify the <strong>--multipart</strong> type but the message turns out to be a single part, the type you supply will just be ignored.</p>
  </dd>
  <dt>
    <strong>--prelude</strong> <em>str</em>
  </dt>
  <dd>
    <p>This adds <em>str</em> to the multipart prelude text.  If you specify <strong>--prelude</strong> multiple times the <em>str</em>s will all be concatenated. There isn't any default for this text.  It seems to me that nowadays adding an explanation of \s-1MIME\s0 to the beginning of a message is like explaining how to use a seat buckle to people who are riding in an airplane. It's okay if you specify the <strong>--prelude</strong> but the message turns out to be a single part, the prelude you supply will just be ignored.</p>
  </dd>
  <dt>
    <strong>--subject</strong> <em>str</em>
  </dt>
  <dd>
    <p>Specify the subject for the message.</p>
  </dd>
  <dt>
    <strong>--to</strong> <em>address</em>
  </dt>
  <dd>
    <p>Add an address to the <strong>To:</strong> list.</p>
  </dd>

</dl>

<h3>Per-part Header</h3>
<p>These switches control the per-part headers.  If the message turns out not to be multipart they actually add data to the top level header.</p><p>Each of these applies only to the next part output.  After each part is output they are reset to their default values.  It doesn't make sense to use them without a following part, so <strong>mime-construct</strong> will sputter and die if you try to do that.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>--attachment</strong> <em>name</em>
  </dt>
  <dd>
    <p>This adds a \*(C`Content-Disposition: attachment\*(C' header with the given <em>name</em> as the value of the \*(C`filename\*(C' attribute.  It's just a convenience, since <strong>mime-construct</strong> is often used to send files as attachments. Using <strong>--attachment</strong> <em>name</em> does not cause <strong>mime-construct</strong> to read any data from the file called <em>name</em>!  It just uses that name in the header.  The actual data which will go into this part of the message comes from one of the regular part output switches (given below). You might prefer to use the <strong>--file-attach</strong> switch, which does read from the <em>name</em>d file.</p>
  </dd>
  <dt>
    <strong>--encoding</strong> <em>type</em>
  </dt>
  <dd>
    <p>This specifies the type of encoding you want this part to use.  You normally shouldn't use this switch, though.  If this switch isn't used <strong>mime-construct</strong> will choose an appropriate encoding. The data you supply mustn't be encoded already, <strong>mime-construct</strong> will encode it according to the <em>type</em> you specify here.  Valid encodings are <strong>7bit</strong>, <strong>8bit</strong>, <strong>binary</strong>, <strong>quoted-printable</strong>, and <strong>base64</strong>. It's easy to generate an illegal \s-1MIME\s0 message by specifying the encoding yourself.</p>
  </dd>
  <dt>
    <strong>--part-header</strong> <em>str</em>
  </dt>
  <dd>
    <p>Add arbitrary text to the per-part header.  The <em>str</em> can be anything you like, including multiple lines.  You can create invalid messages this way.  If you include a blank line in the <em>str</em> you'll really screw up the message.</p>
  </dd>
  <dt>
    <strong>--type</strong> <em>type</em>
  </dt>
  <dd>
    <p>Specify the content type for this part.  If you don't specify a <strong>--type</strong> it defaults to \*(C`text/plain\*(C'.  The <em>type</em> you supply can contain not only the type proper but also options.  The whole thing will just be plopped onto the end of \*(C`Content-Type:\*(C' and stuck into the header. You might prefer to use the <strong>--file-auto</strong> or <strong>--file-attach</strong> switches, which set the <strong>--type</strong> automatically based on a file's name.</p>
  </dd>

</dl>

<h3>Part Output</h3>
<p>These switches add data to the body of the message.  You use one of these for each for each part of a multipart message (or just one of them if the message isn't to be multipart).</p>
<dl class='dl-vertical'>
  <dt>
    <strong>--file</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--file-auto</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--file-attach</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--attach</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--string</strong> <em>str</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--body</strong> <em>str</em>
  </dt>
  <dd>
    <p>Use the contents of the file <em>path</em> or the literal string <em>str</em> as the body of this part. <strong>--file-auto</strong> causes the Content-Type to be set based on the file's name, if possible. <strong>--file-attach</strong> does that and sets the <strong>--attachment</strong> name as well. Be sure to include the trailing newline on <em>str</em> unless there really isn't supposed to be one.  If you leave the trailing newline off the part will have to be encoded in \*(C`base64\*(C' (because \*(C`quoted-printable\*(C' has an artificial limitation which prevents it from being able to encode such a data stream). <strong>--attach</strong> is an alias for <strong>--file-attach</strong>, and <strong>--body</strong> is an alias for <strong>--string</strong>.</p>
  </dd>
  <dt>
    <strong>--subpart-file</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--subpart-string</strong> <em>str</em>
  </dt>
  <dd>
    <p>Use either the contents of <em>path</em> or <em>str</em> itself as the body of this part, but treat it as a subpart.  This means that the data contains both some headers and some text.  It also means that you can't use <strong>--type</strong> or <strong>--encoding</strong> for this part. Normally the <em>path</em> or <em>str</em> will have been generated by a different invocation of <strong>mime-construct</strong> which was given the <strong>--subpart</strong> switch.</p>
  </dd>

</dl>
<p>Arguments to switches which take a file name (such as <strong>--file</strong> and <strong>--subpart-file</strong>) can have some magic.  If there is no file with the <em>path</em> supplied a regular Perl <em>open()</em> is done on it.  See \*(L"\s-1EXAMPLES\s0\*(R".</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The examples assume that $nl contains a newline.  The other variables used are I hope self-explanatory.</p><p>Send a simple message.</p>
<pre>
    mime-construct --to "$recip" --subject &apos;hi there&apos; --string "$body"
</pre>
<p>Send a message which is read from stdin.</p><p>    fortune | mime-construct --to "$recip" --subject fortune --file -</p><p>Send a plain text part and attach a file, setting the file's content type and <strong>--attachment</strong> name automatically.</p><p>    mime-construct --to "$recip" --subject "$file" &#92;         --string "Here&apos;s the file I told you about.$nl" &#92;         --file-attach "$file"</p><p>Most people think of attachments as multipart messages, but they don't have to be.  This generates a zip of all the files in the current directory and sends them as an attachment but as a single part message.</p><p>    zip -q - * |         mime-construct --to "$recip" --subject &apos;zipped directory&apos; &#92;             --attachment dir.zip --type application/zip --file -</p><p>You can use the full expressiveness of Perl's <em>open()</em> when constructing file names.  Eg, you can run processes \s-1XXX\s0 bad examples, there's no file names</p><p>    mime-construct --to "$recip" --subject "$subject" &#92;      --string "Here are those two files you wanted.$nl" &#92;      --type application/x-gzip --attachment file1.gz --file &apos;gzip -c file1 |&apos; &#92;      --type application/x-gzip --attachment file1.gz --file &apos;gzip -c file2 |&apos;</p><p>or read from alternate file descriptors (\*(C`&lt;&=4\*(C' to read from file descriptor 4) or whatever.  See perlopentut for a tutorial.</p><p>Here's an example of using a separate invocation of <strong>mime-construct</strong> to create a subpart.  This creates a message which has two parts at the top level.  The first part is some text, the second part is a digest. The digest itself is a multipart message which contains a number of message/rfc822 parts.</p><p>    msg_args=     for msg in $msg_list     do         msg_args="$msg_args --type message/rfc822 --file $msg"     done</p><p>    set fnord     for recip in $recip_list     do         set "$@" --bcc $recip     done     shift</p><p>    mime-construct --subpart --multipart multipart/digest $msg_args |         mime-construct &#92;             --header "To: Digest recipients:;$nl" &#92;             --subject &apos;Foo digest&apos; &#92;             "$@" &#92;             --file "$introduction" &#92;             --subpart-file -</p><p>Here is how to send an encrypted messages (multipart/encrypted, as defined in \s-1RFC\s0 1847).  You use <strong>mime-construct</strong> \*(C`--subpart\*(C' to generate the real message you want to send (which can be kind of \s-1MIME\s0 message \*(-- non-text, multi-part, what have you), then encrypt that and use another <strong>mime-construct</strong> to contruct and send the multipart/encrypted message which contains it.</p><p>    enc_type=application/pgp-encrypted     enc_params="Version: 1$nl"</p><p>    mime-construct --subpart --file body --file-auto image.jpg |       gpg --encrypt --armor -r "$recip" |       mime-construct --output &#92;         --to "$recip" &#92;         --subject "$subject" &#92;         --multipart "multipart/encrypted; protocol=&#92;"$enc_type&#92;"" &#92;         --type "$enc_type" &#92;         --string "$enc_params" &#92;         --type application/octet-stream &#92;         --file -</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The body of the message is always held in memory, so you can expect problems if you work with bodies which are large compared to the amount of memory you've got.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>The code is licensed under the \s-1GNU\s0 \s-1GPL\s0.  Check http://www.argon.org/~roderick/ for updated versions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Roderick Schertler &lt;roderick@argon.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="masterha_stop.1p.html"><span aria-hidden="true">&larr;</span> masterha_stop.1p: Stopping mha manager process</a></li>
   <li class="next"><a href="mod2html.1p.html">mod2html.1p: Translate module pods to html <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
