<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>launchtool: Run a command supervising its execution.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run a command supervising its execution.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="launchtool (1) manual">
  <meta name="twitter:description" content="Run a command supervising its execution.">
  <meta name="twitter:image" content="https://www.carta.tech/images/launchtool-launchtool-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/launchtool.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="launchtool (1) manual" />
  <meta property="og:description" content="Run a command supervising its execution." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/launchtool-launchtool-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">launchtool<small> (1)</small></h1>
        <p class="lead">Run a command supervising its execution.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/launchtool.1.html">
      <span itemprop="name">launchtool: Run a command supervising its execution.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/launchtool/">
      <span itemprop="name">launchtool</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/launchtool.1.html">
      <span itemprop="name">launchtool: Run a command supervising its execution.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>launchtool</strong> [<em>options</em>] [<em>command</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>launchtool</strong> is a tool that runs a user-supplied command and can supervise its execution in many ways, such as controlling its environment, blocking signals, logging its output, changing user and group permissions, limiting resource usage, restarting it if it fails, running it continuously and turning it into a daemon.</p><p><strong>launchtool</strong> is fully configurable, both through the commandline and using configuration files.  Configuration files can be made executable and start with &ldquo;#!/usr/bin/launchtool -C&rdquo;, to create daemons using simpler commands.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INVOCATION</h2>
        <div class="sectioncontent">
<p><strong>launchtool</strong> executes the command it finds in the commandline, via switches or the configuration file.  All non-switch parameters are concatenated to the command, that will be executed using &ldquo;/bin/sh -c&rdquo;.</p><p><strong>launchtool</strong> default mode of execution is to run the command normally and return its exit status. All features are disabled by default and activated using commandline options or values in the configuration file.  Commandline options override configuration files.</p><p><strong>launchtool</strong> sessions are identified by a tag that is used both to mark the command output in logfiles and to identify running sessions to check if they have already been started or send them a signal without specifying the process PID.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>launchtool</strong> follows the usual GNU command line syntax, with long options starting with two dashes (`-').</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-?, --help</strong></p>
  </dt>
  <dd>
    <p>Display a detailed help message with a summary of all options.</p>
  </dd>
  <dt>
    <p><strong>--usage</strong></p>
  </dt>
  <dd>
    <p>Display a brief usage message.</p>
  </dd>
  <dt>
    <p><strong>-k, --kill[=signal]</strong></p>
  </dt>
  <dd>
    <p>Kill a running launchtool with the specified signal (15 by default) and exit.  No signal name parsing is (yet) provided, so the signal must be specified by its number.</p>
  </dd>
  <dt>
    <p><strong>--check</strong></p>
  </dt>
  <dd>
    <p>Check if another launchtool is running, then exit.</p>
  </dd>
  <dt>
    <p><strong>--showcfg</strong></p>
  </dt>
  <dd>
    <p>Process config files and commandline, show the resulting configuration and exit.</p>
  </dd>
  <dt>
    <p><strong>-V, --version</strong></p>
  </dt>
  <dd>
    <p>Print version and exit.</p>
  </dd>
  <dt>
    <p><strong>-t, --tag=tag, &ldquo;tag&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Tag used to identify the session</p>
  </dd>
  <dt>
    <p><strong>-C, --config=file</strong></p>
  </dt>
  <dd>
    <p>Read configuration data from &ldquo;file&rdquo;.  Defaults to /etc/launchtool/&lt;tag&gt;.conf</p>
  </dd>
  <dt>
    <p><strong>-v, --verbose, &ldquo;verbose&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Enable verbose output.</p>
  </dd>
  <dt>
    <p><strong>--no-verbose</strong></p>
  </dt>
  <dd>
    <p>Disable verbose output.</p>
  </dd>
  <dt>
    <p><strong>--debug, &ldquo;debug&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Enable debug output (includes --verbose output).</p>
  </dd>
  <dt>
    <p><strong>--no-debug</strong></p>
  </dt>
  <dd>
    <p>Disable debug output.</p>
  </dd>
  <dt>
    <p><strong>-c, --command=cmd, &ldquo;command&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Command to execute.</p>
  </dd>
  <dt>
    <p><strong>--visible-tag=tag, &ldquo;visible tag&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Tag to use for pidfiles and logfiles instead of &ldquo;launchtool-&lt;tag&gt;&rdquo;.</p>
  </dd>
  <dt>
    <p><strong>-d, --daemon, &ldquo;daemon&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Fork to background and detach from terminal, becoming a daemon.</p>
  </dd>
  <dt>
    <p><strong>-n, --no-daemon</strong></p>
  </dt>
  <dd>
    <p>Don't become a daemon.</p>
  </dd>
  <dt>
    <p><strong>--pidfile, &ldquo;pidfile&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Create a pidfile (default when --daemon is used).</p>
  </dd>
  <dt>
    <p><strong>--no-pidfile</strong></p>
  </dt>
  <dd>
    <p>Don't create a pidfile (default when --daemon is not used).</p>
  </dd>
  <dt>
    <p><strong>--piddir=dir, &ldquo;piddir&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Directory where pidfiles are stored (default to /var/run).</p>
  </dd>
  <dt>
    <p><strong>--chroot=dir, &ldquo;root dir&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Chroot to this directory before running the command.</p>
  </dd>
  <dt>
    <p><strong>--chdir=dir, &ldquo;start dir&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Chdir to this directory before running the command (default to '.' or '/' if --daemon is present).</p>
  </dd>
  <dt>
    <p><strong>-u, --user=user, &ldquo;user&rdquo;</strong></p>
  </dt>
  <dd>
    <p>User privileges to run the command with.</p>
  </dd>
  <dt>
    <p><strong>-g, --group=group, &ldquo;group&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Group privileges to run the command with.</p>
  </dd>
  <dt>
    <p><strong>--umask=mask, &ldquo;umask&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Set this umask before running the command.</p>
  </dd>
  <dt>
    <p><strong>-L, --infinite-runs, &ldquo;infinite runs&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Never give up restarting the command if it fails.</p>
  </dd>
  <dt>
    <p><strong>--no-infinite-runs</strong></p>
  </dt>
  <dd>
    <p>Give up restarting the command after a certain number of failures.</p>
  </dd>
  <dt>
    <p><strong>--wait-times=t1,t2,... , &ldquo;wait times&rdquo;</strong></p>
  </dt>
  <dd>
    <p>List of times (in seconds) to wait after a program failure before restarting it.  If not specified, failed commands will not be restarted.</p>
  </dd>
  <dt>
    <p><strong>--good-running-time=seconds, &ldquo;good running time&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Minimum running time needed to restart for the first wait time.</p>
  </dd>
  <dt>
    <p><strong>--forwarded-signals=sig1,sig2,... , &ldquo;forwarded signals&rdquo;</strong></p>
  </dt>
  <dd>
    <p>List of signals (in name or in number) to be forwarded to the command.</p>
  </dd>
  <dt>
    <p><strong>--blocked-signals=sig1,sig2,... , &ldquo;blocked signals&rdquo;</strong></p>
  </dt>
  <dd>
    <p>List of signals (in name or in number) to be blocked before running the command.</p>
  </dd>
  <dt>
    <p><strong>--limit-cpu=seconds, &ldquo;cpu limit&rdquo;</strong></p>
  </dt>
  <dd>
    <p>CPU time limit for the command (see <a href="../man2/setrlimit.2.html"><strong>setrlimit</strong>(2)</a>).</p>
  </dd>
  <dt>
    <p><strong>--limit-file-size=1024b-blocks, &ldquo;file size limit&rdquo;</strong></p>
  </dt>
  <dd>
    <p>File size limit for the command (see <a href="../man2/setrlimit.2.html"><strong>setrlimit</strong>(2)</a>).</p>
  </dd>
  <dt>
    <p><strong>--limit-data-memory=1024b-blocks, &ldquo;data memory limit&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Data memory size limit for the command (see <a href="../man2/setrlimit.2.html"><strong>setrlimit</strong>(2)</a>).</p>
  </dd>
  <dt>
    <p><strong>--limit-process-count=count, &ldquo;process count limit&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Process count limit for the command (see <a href="../man2/setrlimit.2.html"><strong>setrlimit</strong>(2)</a>).</p>
  </dd>
  <dt>
    <p><strong>--limit-open-files=count, &ldquo;open files limit&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Open files limit for the command (see <a href="../man2/setrlimit.2.html"><strong>setrlimit</strong>(2)</a>).</p>
  </dd>
  <dt>
    <p><strong>--limit-core-size=1024b-blocks, &ldquo;core size limit&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Core file size limit for the command (see <a href="../man2/setrlimit.2.html"><strong>setrlimit</strong>(2)</a>).</p>
  </dd>
  <dt>
    <p><strong>--restrict-environment, &ldquo;restrict environment&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Restrict the child environment.</p>
  </dd>
  <dt>
    <p><strong>--no-restrict-environment</strong></p>
  </dt>
  <dd>
    <p>Copy all environment variables to the child environment.</p>
  </dd>
  <dt>
    <p><strong>--allowed-env-vars=var1,var2,... , &ldquo;allowed env vars&rdquo;</strong></p>
  </dt>
  <dd>
    <p>List of environment variables to be copied to the child when the environment is restricted.</p>
  </dd>
  <dt>
    <p><strong>--log-launchtool-output=target, &ldquo;launchtool output&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Target of the launchtool output (ignore, stdout, stderr, file:filename or syslog:identity,facility,level).</p>
  </dd>
  <dt>
    <p><strong>--log-launchtool-errors=target, &ldquo;launchtool errors&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Target of the launchtool error messages (ignore, stdout, stderr, file:filename or syslog:identity,facility,level).</p>
  </dd>
  <dt>
    <p><strong>--log-child-output=target, &ldquo;command output&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Target of the child output (ignore, stdout, stderr, file:filename or syslog:identity,facility,level).</p>
  </dd>
  <dt>
    <p><strong>--log-child-errors=target, &ldquo;command errors&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Target of the child error messages (ignore, stdout, stderr, file:filename or syslog:identity,facility,level).</p>
  </dd>
  <dt>
    <p><strong>--silent-restart-status=value, &ldquo;silent restart status&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Return value used by the child to explicitly request a restart (feature disabled if not specified).</p>
  </dd>
  <dt>
    <p><strong>--silent-restart-time=seconds, &ldquo;silent restart time&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Time to wait before restarting the child after an explicit restart request.</p>
  </dd>
  <dt>
    <p><strong>--stats, &ldquo;stats&rdquo;</strong></p>
  </dt>
  <dd>
    <p>Produce some statistics when the command terminates (implied by --verbose).</p>
  </dd>
  <dt>
    <p><strong>--no-stats</strong></p>
  </dt>
  <dd>
    <p>Do not produce statistics when the command terminates.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOGGING TARGETS</h2>
        <div class="sectioncontent">
<p>Logging targets are specified with a target name and its optional parameters, separated by a colon (&ldquo;:&rdquo;).</p><p>Possible target configurations are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ignore</strong></p>
  </dt>
  <dd>
    <p>Output is just discarded.</p>
  </dd>
  <dt>
    <p><strong>stdout</strong></p>
  </dt>
  <dd>
    <p>Output goes to the standard output stream.</p>
  </dd>
  <dt>
    <p><strong>stderr</strong></p>
  </dt>
  <dd>
    <p>Output goes to the standard error stream.</p>
  </dd>
  <dt>
    <p><strong>file:filename</strong></p>
  </dt>
  <dd>
    <p>Output goes to the file &ldquo;filename&rdquo;.</p>
  </dd>
  <dt>
    <p><strong>syslog:identity,facility,level</strong></p>
  </dt>
  <dd>
    <p>Output goes to syslog, with the given identity (a string identifying the logger), facility (see <a href="../man3/syslog.3.html"><strong>syslog</strong>(3)</a>) and level (see <a href="../man3/syslog.3.html"><strong>syslog</strong>(3)</a>).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILE</h2>
        <div class="sectioncontent">
<p>The configuration file is a sequence of &ldquo;key = value&rdquo; lines.  Empty lines and lines starting with '#' are ignored.</p><p>The possible keys have been listed in the OPTIONS section next to the corresponding commandline switch.</p><p>Boolean (yes/no) values can take the values &ldquo;yes&rdquo;, &ldquo;no&rdquo;, &ldquo;true&rdquo;, &ldquo;false&rdquo;, &ldquo;0&rdquo; and &ldquo;1&rdquo;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
# Running a command normally

launchtool -t tag 'echo "Hello, world!"'


# Run a command restarting it if it fails:

launchtool -t tag --wait-times=1,1,1,3,3,3,10,10,10 'my_wonderful_server'


# Run a command, with restrictions, restarting it if it fails, as a daemon

launchtool -t myserver -d --user=myserver	--chroot=/var/myserver &#92;
	--limit-process-count=5 --limit-open-files=10 &#92;
	--wait-times=1,1,1,3,3,3,10,10,10 &#92;
	--infinite-runs --stats &#92;
	--log-launchtool-output=syslog:myserver,LOG_DAEMON,LOG_INFO &#92;
	--log-launchtool-errors=syslog:myserver,LOG_DAEMON,LOG_ERR &#92;
	--log-child-output=syslog:myserver,LOG_DAEMON,LOG_INFO &#92;
	--log-child-errors=syslog:myserver,LOG_DAEMON,LOG_ERR &#92;
	'my_experimental_server'

# Same thing, using a configuration file

tag = myserver
command = my_wonderful_server
daemon = yes
stats = yes
user = myserver
root dir = /var/myserver
process count limit = 5
open files limit = 10
wait times = 1,1,1,3,3,3,10,10,10
infinite runs = yes
launchtool output = syslog:myserver,LOG_DAEMON,LOG_INFO
launchtool errors = syslog:myserver,LOG_DAEMON,LOG_ERR
command output = syslog:myserver,LOG_DAEMON,LOG_INFO
command errors = syslog:myserver,LOG_DAEMON,LOG_ERR

# Transform a shell command in a polling daemon
# Make the file /tmp/have_mobile exist only if my cell phone is present in the
# IRDA discovery list

launchtool -t celldetect -d --silent-restart-time=5 --silent-restart-status=0 --user=nobody &#92;
	"if grep -q SIEMENS /proc/sys/net/irda/discovery; then touch /tmp/have_mobile; else rm -f /tmp/have_mobile; fi ; exit 0"

# Ceck if the celldetect daemon is running

launchtool -t celldetect --check

# Kill the celldetect daemon launched with the command above

launchtool -t celldetect -k


# Same polling daemon, with an executable configuration file

#!/usr/bin/launchtool -C
tag = celldetect
command = if grep -q SIEMENS /proc/sys/net/irda/discovery; then touch /tmp/have_mobile; else rm -f /tmp/have_mobile; fi ; exit 0
daemon = yes
user = nobody
silent restart time = 5
silent restart status = 0

# Ceck if the celldetect daemon is running, using the executable configuration
# file

celldetect --check

# Kill the celldetect daemon using the executable configuration file

celldetect -k
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO launchtool&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/syslog.3.html"><strong>syslog</strong>(3)</a>, <a href="../man2/setrlimit.2.html"><strong>setrlimit</strong>(2)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>launchtool</strong> has been written by Enrico Zini &lt;enrico@debian.org&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="latticegen.1.html"><span aria-hidden="true">&larr;</span> latticegen.1: Latticegen generates matrices whose rows form input lattice bases</a></li>
   <li class="next"><a href="lav2mpeg.1.html">lav2mpeg.1: Easy conversion of lav files to mpeg <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
