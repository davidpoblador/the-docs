<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>db5.1_hotbackup: Create "hot backup" or "hot failover" snapshots</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create "hot backup" or "hot failover" snapshots">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="db5.1_hotbackup (1) manual">
  <meta name="twitter:description" content="Create "hot backup" or "hot failover" snapshots">
  <meta name="twitter:image" content="https://www.carta.tech/images/db5.1-util-db5.1_hotbackup-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/db5.1_hotbackup.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="db5.1_hotbackup (1) manual" />
  <meta property="og:description" content="Create "hot backup" or "hot failover" snapshots" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/db5.1-util-db5.1_hotbackup-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">db5.1_hotbackup<small> (1)</small></h1>
        <p class="lead">Create "hot backup" or "hot failover" snapshots</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/db5.1_hotbackup.1.html">
      <span itemprop="name">db5.1_hotbackup: Create "hot backup" or "hot failover" snapshots</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/db5.1-util/">
      <span itemprop="name">db5.1-util</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/db5.1_hotbackup.1.html">
      <span itemprop="name">db5.1_hotbackup: Create "hot backup" or "hot failover" snapshots</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>db5.1_hotbackup</strong> [-cDuVv] [-d data_dir ...] [-h home] [-l log_dir] [-P password] -b backup_dir</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The db5.1_hotbackup utility creates "hot backup" or "hot failover" snapshots of Berkeley DB database environments.</p><p>The db5.1_hotbackup utility performs the following steps:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>If the -c option is specified, checkpoint the source home database environment, and remove any unnecessary log files.</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>If the target directory for the backup does not exist, it is created with mode read-write-execute for the owner.</p><p>If the target directory for the backup does exist and the -u option was specified, all log files in the target directory are removed; if the -u option was not specified, all files in the target directory are removed.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>If the -u option was not specified, copy application-specific files found in the database environment home directory, or any directory specified using the -d option, into the target directory for the backup.</p>
  </dd>
  <dt>
    4.
  </dt>
  <dd>
    <p>Copy all log files found in the directory specified by the -l option (or in the database environment home directory, if no -l option was specified), into the target directory for the backup.</p>
  </dd>
  <dt>
    5.
  </dt>
  <dd>
    <p>Perform catastrophic recovery on the hot backup.</p>
  </dd>
  <dt>
    6.
  </dt>
  <dd>
    <p>Remove any unnecessary log files from the hot backup.</p>
  </dd>

</dl>
<p>The db5.1_hotbackup utility does not resolve pending transactions that are in the prepared state. Applications that use DB_TXN-&gt;prepare should specify DB_RECOVER_FATAL when opening the environment, and run DB_ENV-&gt;txn_recover to resolve any pending transactions, when failing over to the hot backup.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>-b</strong>
  </dt>
  <dd>
    <p>Specify the target directory for the backup.</p>
  </dd>
  <dt>
    <strong>-c</strong>
  </dt>
  <dd>
    <p>Before performing the snapshot, checkpoint the source database environment and remove any log files that are no longer required in that environment. <strong>To avoid making catastrophic failure impossible, log file removal</strong> must be integrated with log file archival.</p>
  </dd>
  <dt>
    <strong>-d</strong>
  </dt>
  <dd>
    <p>Specify one or more source directories that contain databases; if none is specified, the database environment home directory will be searched for database files.  As database files are copied into a single backup directory, files named the same, stored in different source directories, could overwrite each other when copied into the backup directory.</p>
  </dd>
  <dt>
    <strong>-h</strong>
  </dt>
  <dd>
    <p>Specify the source directory for the backup, that is, the database environment home directory.</p>
  </dd>
  <dt>
    <strong>-l</strong>
  </dt>
  <dd>
    <p>Specify a source directory that contains log files; if none is specified, the database environment home directory will be searched for log files.</p>
  </dd>
  <dt>
    <strong>-P</strong>
  </dt>
  <dd>
    <p>Specify an environment password.  Although Berkeley DB utilities overwrite password strings as soon as possible, be aware there may be a window of vulnerability on systems where unprivileged users can see command-line arguments or where utilities are not able to overwrite the memory containing the command-line arguments.</p>
  </dd>
  <dt>
    <strong>-u</strong>
  </dt>
  <dd>
    <p>Update a pre-existing hot backup snapshot by copying in new log files. If the <strong>-u</strong> option is specified, no databases will be copied into the target directory.</p>
  </dd>
  <dt>
    <strong>-V</strong>
  </dt>
  <dd>
    <p>Write the library version number to the standard output, and exit.</p>
  </dd>
  <dt>
    <strong>-v</strong>
  </dt>
  <dd>
    <p>Run in verbose mode, listing operations as they are done.</p>
  </dd>
  <dt>
    <strong>-D</strong>
  </dt>
  <dd>
    <p>Use the data directories listed in the DB_CONFIG configuration file in the source directory.   This option has three effects: First, if they do not already exist, the specified data directories will be created relative to the target directory (with mode read-write-execute owner). Second, all files in the source data directories will be copied to the target data directories.  If the DB_CONFIG file specifies one or more absolute pathnames, files in those source directories will be copied to the top-level target directory. Third, the DB_CONFIG configuration file will be copied from the +source directory to the target directory, and subsequently used for configuration if recovery is run in the target directory.</p>
  </dd>

</dl>
<p>Care should be taken with the <strong>-D</strong> option and data directories which are named relative to the source directory but are not subdirectories (that is, the name includes the element "..") Specifically, the constructed target directory names must be meaningful and distinct from the source directory names, otherwise running recovery in the target directory might corrupt the source data files.</p><p><strong>It is an error to use absolute pathnames for data directories</strong> or the log directory in this mode, as the DB_CONFIG configuration file copied into the target directory would then point at the source directories and running recovery would corrupt the source data files.</p><p>The db5.1_hotbackup utility uses a Berkeley DB environment (as described for the <strong>-h</strong> option, the environment variable <strong>DB_HOME</strong>, or because the utility was run in a directory containing a Berkeley DB environment).  In order to avoid environment corruption when using a Berkeley DB environment, db5.1_hotbackup should always be given the chance to detach from the environment and exit gracefully.  To cause db5.1_hotbackup to release all environment resources and exit cleanly, send it an interrupt signal (SIGINT).</p><p>The db5.1_hotbackup utility exits 0 on success, and &gt;0 if an error occurs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>DB_HOME</strong>
  </dt>
  <dd>
    <p>If the <strong>-h</strong> option is not specified and the environment variable DB_HOME is set, it is used as the path of the database home, as described in DB_ENV-&gt;open.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Oracle Corporation. This manual page was created based on the HTML documentation for db_hotbackup from Sleepycat, by Thijs Kinkhorst &lt;thijs@kinkhorst.com&gt;, for the Debian system (but may be used by others).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="db5.1_dump.1.html"><span aria-hidden="true">&larr;</span> db5.1_dump.1: Write database to flat-text format</a></li>
   <li class="next"><a href="db5.1_load.1.html">db5.1_load.1: Load data from standard input <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
