<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>krenew: Renew a kerberos ticket</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Renew a kerberos ticket">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="krenew (1) manual">
  <meta name="twitter:description" content="Renew a kerberos ticket">
  <meta name="twitter:image" content="https://www.carta.tech/images/kstart-krenew-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/krenew.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="krenew (1) manual" />
  <meta property="og:description" content="Renew a kerberos ticket" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/kstart-krenew-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">krenew<small> (1)</small></h1>
        <p class="lead">Renew a kerberos ticket</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/krenew.1.html">
      <span itemprop="name">krenew: Renew a kerberos ticket</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/kstart/">
      <span itemprop="name">kstart</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/krenew.1.html">
      <span itemprop="name">krenew: Renew a kerberos ticket</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>krenew</strong> [<strong>-bhiLstvx</strong>] [<strong>-c</strong> <em>child pid file</em>] [<strong>-H</strong> <em>minutes</em>]</p>
<pre>
    [<strong>-K</strong> <em>minutes</em>] [<strong>-k</strong> <em>ticket cache</em>] [<strong>-p</strong> <em>pid file</em>]
    [<em>command</em> ...]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>krenew</strong> renews an existing renewable ticket.  When run without any arguments, it just attempts to renew the existing ticket-granting ticket in the current ticket cache, equivalent to \*(C`kinit -R\*(C', but it can optionally run a program like <strong>aklog</strong> to refresh \s-1AFS\s0 tokens, can run as a daemon and wake up periodically to renew the ticket cache, or can run a specified command and keep renewing the ticket cache until the command finishes (or renewal is no longer possible).  If a command is specified, <strong>krenew</strong> by default wakes up every 60 minutes (1 hour) to check the ticket cache.</p><p>If a command is given, <strong>krenew</strong> makes a copy of the ticket cache and creates a private ticket cache just for that command, thus isolating it from later destruction of the original ticket cache.  This allows krenew to maintain authentication for a command even if, for example, the user running the command logs out and OpenSSH destroys their original ticket cache.</p><p>If a command is given, it will not be run using the shell, so if you want to use shell metacharacters in the command with their special meaning, give \*(C`sh -c <strong>command\*(C'</strong> as the command to run and quote <em>command</em>.  If the command contains command-line options (like \*(C`-c\*(C'), put \*(C`--\*(C' on the command line before the beginning of the command to tell <strong>krenew</strong> to not parse those options as its own.</p><p>If <strong>krenew</strong> is built with <em>setpag()</em> support and \s-1AFS\s0 tokens are requested with the <strong>-t</strong> option, it will put the command in a separate \s-1PAG\s0 before obtaining \s-1AFS\s0 tokens so that they don't interfere with other processes on the system.</p><p>When running a command, <strong>krenew</strong> propagates \s-1HUP\s0, \s-1TERM\s0, \s-1INT\s0, and \s-1QUIT\s0 signals to the child process and does not exit when those signals are received.  (If the propagated signal causes the child process to exit, <strong>krenew</strong> will then exit.)  This allows <strong>krenew</strong> to react properly when run under a command supervision system such as <em>runit</em>\|(8) or <em>svscan</em>\|(8) that uses signals to control supervised commands, and to run interactive commands that should receive Ctrl-C.</p><p>If a running <strong>krenew</strong> receives an \s-1ALRM\s0 signal, it immediately refreshes the ticket cache regardless of whether it is in danger of expiring.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>-b</strong>
  </dt>
  <dd>
    <p>After starting, detach from the controlling terminal and run in the background.  This option only makes sense in combination with <strong>-K</strong> or a command that <strong>krenew</strong> will be running.  <strong>krenew</strong> will not background itself until after it does the initial ticket renewal, so that any initial errors will be reported, but it will then redirect output to <em>/dev/null</em> and no subsequent errors will be reported. If this flag is given, <strong>krenew</strong> will also change directories to \*(C`/\*(C'. All paths (such as to a command to run or a \s-1PID\s0 file) should therefore be given as absolute, not relative, paths. If used in conjunction with a command to run, that command will also run in the background and will also have its input and output redirected to <em>/dev/null</em>.  It will have to report any errors via some other mechanism for the errors to be seen. Use of this flag on Mac \s-1OS\s0 X without specifying a file-based ticket cache by either using <strong>-k</strong> or setting \s-1KRB5CCNAME\s0 will probably not do what you want.  Ticket caches on Mac \s-1OS\s0 X are, by default, per-session and with <strong>-b</strong> <strong>krenew</strong> will detach itself from your existing ticket cache. Instead, to renew the default ticket cache on Mac \s-1OS\s0 X, try something like:</p>
<pre>
    (krenew -K 60 &)
</pre>
<p>to run <strong>krenew</strong> in the background but within the current session. When using this option, consider also using <strong>-L</strong> to report <strong>krenew</strong> errors to syslog.</p>
  </dd>
  <dt>
    <strong>-c</strong> <em>child pid file</em>
  </dt>
  <dd>
    <p>Save the process \s-1ID\s0 (\s-1PID\s0) of the child process into <em>child pid file</em>. <em>child pid file</em> is created if it doesn't exist and overwritten if it does exist.  This option is only allowed when a command was given on the command line and is most useful in conjunction with <strong>-b</strong> to allow management of the running child process. Note that, when used with <strong>-b</strong>, the \s-1PID\s0 file is written out after <strong>krenew</strong> is backgrounded and changes its working directory to <em>/</em>, so relative paths for the \s-1PID\s0 file will be relative to <em>/</em> (probably not what you want).</p>
  </dd>
  <dt>
    <strong>-H</strong> <em>minutes</em>
  </dt>
  <dd>
    <p>Only renew the ticket if it has a remaining lifetime of less than <em>minutes</em> minutes.  If either the ticket already has a sufficiently long remaining lifetime or renewal was successful, run the command (if one was specified) or exit immediately with status 0 (if none was).  Otherwise, try to renew the ticket so that it will have a remaining lifetime of at least <em>minutes</em>, exit with an error if unsuccessful, and then run the command, if any.  Cannot be used with <strong>-K</strong>.</p>
  </dd>
  <dt>
    <strong>-h</strong>
  </dt>
  <dd>
    <p>Display a usage message and exit.</p>
  </dd>
  <dt>
    <strong>-i</strong>
  </dt>
  <dd>
    <p>Ignore errors in renewing the ticket and keep running.  Normally, <strong>krenew</strong> exits as soon as the ticket cache either disappears or the tickets run out of renewable lifetime.  If this flag is given, it will complain about the failure to standard error (unless <strong>-b</strong> was given) but continue running, waking up to try again after the next check interval (see <strong>-K</strong>).  This is useful if some other process may recreate an expired ticket cache and <strong>krenew</strong> should stay around and act on that recreated ticket cache once it's present. Setup errors opening the Kerberos ticket cache or running the command will still cause <strong>krenew</strong> to exit, even if this flag is given.  Only Kerberos errors and errors after <strong>krenew</strong> is running and any command has been started will be ignored. This flag is only useful in daemon mode or when a command was given.</p>
  </dd>
  <dt>
    <strong>-K</strong> <em>minutes</em>
  </dt>
  <dd>
    <p>Run in daemon mode to keep a ticket alive indefinitely.  The program reawakens after <em>minutes</em> minutes, checks if the ticket will expire before or less than two minutes before the next scheduled check, and renews the ticket if needed.  If this option is not given but a command was given on the command line, the default interval is 60 minutes (1 hour). If an error occurs in refreshing the ticket cache that doesn't cause <strong>krenew</strong> to exit, the wake-up interval will be shortened to one minute and the operation retried at that interval for as long as the error persists.</p>
  </dd>
  <dt>
    <strong>-k</strong> <em>ticket cache</em>
  </dt>
  <dd>
    <p>Use <em>ticket cache</em> as the ticket cache rather than the contents of the environment variable \s-1KRB5CCNAME\s0 or the library default.  <em>ticket cache</em> may be any ticket cache identifier recognized by the underlying Kerberos libraries.  This generally supports a path to a file, with or without a leading \*(C`FILE:\*(C' string, but may also support other ticket cache types.</p>
  </dd>
  <dt>
    <strong>-L</strong>
  </dt>
  <dd>
    <p>Report messages to syslog as well as to standard output or standard error. All messages will be logged with facility \s-1LOG_DAEMON\s0.  Regular messages that are displayed on standard output are logged with level \s-1LOG_NOTICE\s0. Errors that don't cause <strong>krenew</strong> to terminate when run with <strong>-i</strong> are logged with level \s-1LOG_WARNING\s0.  Fatal errors are logged with level \s-1LOG_ERR\s0. This is useful when debugging problems in combination with <strong>-b</strong>.</p>
  </dd>
  <dt>
    <strong>-p</strong> <em>pid file</em>
  </dt>
  <dd>
    <p>Save the process \s-1ID\s0 (\s-1PID\s0) of the running <strong>krenew</strong> process into <em>pid</em> file.  <em>pid file</em> is created if it doesn't exist and overwritten if it does exist.  This option is most useful in conjunction with <strong>-b</strong> to allow management of the running <strong>krenew</strong> daemon. Note that, when used with <strong>-b</strong> the \s-1PID\s0 file is written out after <strong>krenew</strong> is backgrounded and changes its working directory to <em>/</em>, so relative paths for the \s-1PID\s0 file will be relative to <em>/</em> (probably not what you want).</p>
  </dd>
  <dt>
    <strong>-s</strong>
  </dt>
  <dd>
    <p>Normally, when <strong>krenew</strong> exits abnormally while running a command (if, for example, the ticket's renewable lifetime has expired), it leaves the command running.  If <strong>-s</strong> is given, it will send a \s-1SIGHUP\s0 signal to the command before exiting.  This can be useful if it's pointless for the command to keep running without Kerberos tickets.</p>
  </dd>
  <dt>
    <strong>-t</strong>
  </dt>
  <dd>
    <p>Run an external program after getting a ticket.  The default use of this is to run <strong>aklog</strong> to get a token.  If the environment variable \s-1KINIT_PROG\s0 is set, it overrides the compiled-in default. If <strong>krenew</strong> has been built with \s-1AFS\s0 <em>setpag()</em> support and a command was given on the command line, <strong>krenew</strong> will create a new \s-1PAG\s0 before obtaining \s-1AFS\s0 tokens.  Otherwise, it will obtain tokens in the current \s-1PAG\s0.</p>
  </dd>
  <dt>
    <strong>-v</strong>
  </dt>
  <dd>
    <p>Be verbose.  This will print out a bit of additional information about what is being attempted and what the results are.</p>
  </dd>
  <dt>
    <strong>-x</strong>
  </dt>
  <dd>
    <p>Exit immediately on any error.  Normally, when running a command or when run with the <strong>-K</strong> option, <strong>krenew</strong> keeps running even if it fails to renew the ticket cache as long as the ticket cache still exists and appears to be renewable.  It tries again at the next check interval.  With this option, <strong>krenew</strong> will instead exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p>The program normally exits with status 0 if it successfully renews a ticket.  If <strong>krenew</strong> runs aklog or some other program <strong>krenew</strong> returns the exit status of that program.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Renew the current ticket-granting ticket.</p><p>    krenew</p><p>Wake up every ten minutes and check to see if the ticket cache needs renewing.  If it does, re-run <strong>aklog</strong> as well.</p><p>    krenew -K 10 -t</p><p>Run the program <em>/usr/local/bin/compute-job</em> in the background, checking every hour to see if the ticket needs to be renewed (the default).  Put the \s-1PID\s0 of the <strong>krenew</strong> job in <em>/var/run/compute.pid</em>.  Obtain a new \s-1AFS\s0 token each time the ticket has to be renewed.</p><p>    krenew -b -t -p /var/run/compute.pid /usr/local/bin/compute-job</p><p>If you wanted to pass options to <em>/usr/local/bin/compute-job</em>, putting a \*(C`--\*(C' argument before it would be necessary to keep <strong>krenew</strong> from interpreting those options as its own.</p><p>If you want to redirect output to a file that requires authentication to write to, you will need to do that redirection in a sub-shell.  In other words, the following command:</p><p>    krenew -t compute-job &gt; /afs/local/data/output</p><p>won't work if /afs/local/data/output requires an \s-1AFS\s0 token to write to. The job, while running, will have an \s-1AFS\s0 token, but the output redirection is done in the parent shell and doesn't benefit from <strong>krenew</strong>.  The above should instead be written as:</p><p>    krenew -t -- sh -c &apos;compute-job &gt; /afs/local/data/output&apos;</p><p>With this command, the shell doing the redirection will also be run under <strong>krenew</strong> and have the benefit of the \s-1AFS\s0 token it obtains.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>If the environment variable \s-1AKLOG\s0 is set, its value will be used as the program to run with <strong>-t</strong> rather than the default complied into <strong>krenew</strong>. If \s-1AKLOG\s0 is not set and \s-1KINIT_PROG\s0 is set, its value will be used instead. \s-1KINIT_PROG\s0 is honored for backward compatibility but its use is not recommended due to its confusing name.</p><p>If no ticket file (with <strong>-k</strong>) or command is specified on the command line, <strong>krenew</strong> will use the environment variable \s-1KRB5CCNAME\s0 to determine the location of the the ticket granting ticket.  If the <strong>-k</strong> option is used, \s-1KRB5CCNAME\s0 will be set to point to the ticket file before running the <strong>aklog</strong> program or any command given on the command line.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>The default ticket cache is determined by the underlying Kerberos libraries.  The default path for aklog is determined at build time, and will normally be whichever of <strong>aklog</strong> or <strong>afslog</strong> is found in the user's path.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO krenew&hellip;</h2>
        <div class="sectioncontent">
<p><em>k5start</em>\|(1), <em>kinit</em>\|(1)</p><p>The kstart web page at &lt;http://www.eyrie.org/~eagle/software/kstart/&gt; will have the current version of <strong>krenew</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p><strong>krenew</strong> was written by Russ Allbery &lt;rra@stanford.edu&gt;.  It was based heavily on <strong>k5start</strong> by Booker C. Bense, which in turn was based on the k4start code written by Robert Morgan.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="kredentials.1.html"><span aria-hidden="true">&larr;</span> kredentials.1: Kde system tray applet to monitor and update authentication tokens</a></li>
   <li class="next"><a href="krita.1.html">krita.1: Digital painting for artists <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
