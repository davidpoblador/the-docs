<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>nodeset: Compute advanced nodeset operations</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Compute advanced nodeset operations">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="nodeset (1) manual">
  <meta name="twitter:description" content="Compute advanced nodeset operations">
  <meta name="twitter:image" content="https://www.carta.tech/images/clustershell-nodeset-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/nodeset.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="nodeset (1) manual" />
  <meta property="og:description" content="Compute advanced nodeset operations" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/clustershell-nodeset-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">nodeset<small> (1)</small></h1>
        <p class="lead">Compute advanced nodeset operations</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/nodeset.1.html">
      <span itemprop="name">nodeset: Compute advanced nodeset operations</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/clustershell/">
      <span itemprop="name">clustershell</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/nodeset.1.html">
      <span itemprop="name">nodeset: Compute advanced nodeset operations</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>nodeset [COMMAND] [OPTIONS] [nodeset1 [-ixX] nodeset2|...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>nodeset is an utility command provided with the ClusterShell library which implements some features of ClusterShell&apos;s NodeSet and RangeSet Python classes. It provides easy manipulation of indexed cluster nodes and node groups. It is automatically bound to the library node group resolution mechanism. Thus, nodeset is especially useful to enhance cluster aware administration shell scripts.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>show program&apos;s version number and exit</p>
  </dd>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>
  <dt>
    <p><strong>-s</strong><em></em><strong>GROUPSOURCE,</strong><em></em><strong>--groupsource</strong><strong>=</strong><em>GROUPSOURCE</em></p>
  </dt>
  <dd>
    <p>optional <a href="../man5/groups.conf.5.html"><strong>groups.conf</strong>(5)</a> group source to use</p>
  </dd>
  <dt>
    <p><strong>Commands:</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-c, --count</strong></p>
  </dt>
  <dd>
    <p>show number of nodes in nodeset(s)</p>
  </dd>
  <dt>
    <p><strong>-e, --expand</strong></p>
  </dt>
  <dd>
    <p>expand nodeset(s) to separate nodes (see also -S <em>SEPARATOR</em>)</p>
  </dd>
  <dt>
    <p><strong>-f, --fold</strong></p>
  </dt>
  <dd>
    <p>fold nodeset(s) (or separate nodes) into one nodeset</p>
  </dd>
  <dt>
    <p><strong>-l, --list</strong></p>
  </dt>
  <dd>
    <p>list node groups, list node groups and nodes (-ll) or list node groups, nodes and node count (-lll). When no argument is specified at all, this command will list all node group names found in selected group source (see also -s <em>GROUPSOURCE</em>). If any nodesets are specified as argument, this command will find node groups these nodes belongs to (individually). Optionally for each group, the fraction of these nodes being member of the group may be displayed (with -ll<em>), and also member count/total group node count (with -lll</em>). If a single hyphen-minus (-) is given as a nodeset, it will be read from standard input.</p>
  </dd>
  <dt>
    <p><strong>-r, --regroup</strong></p>
  </dt>
  <dd>
    <p>fold nodes using node groups (see -s <em>GROUPSOURCE</em>)</p>
  </dd>
  <dt>
    <p><strong>--groupsources</strong></p>
  </dt>
  <dd>
    <p>list all configured group sources (see <a href="../man5/groups.conf.5.html"><strong>groups.conf</strong>(5)</a>)</p>
  </dd>
  <dt>
    <p><strong>Operations:</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-x</strong><em></em><strong>SUB_NODES,</strong><em></em><strong>--exclude</strong><strong>=</strong><em>SUB_NODES</em></p>
  </dt>
  <dd>
    <p>exclude specified nodeset</p>
  </dd>
  <dt>
    <p><strong>-i</strong><em></em><strong>AND_NODES,</strong><em></em><strong>--intersection</strong><strong>=</strong><em>AND_NODES</em></p>
  </dt>
  <dd>
    <p>calculate nodesets intersection</p>
  </dd>
  <dt>
    <p><strong>-X</strong><em></em><strong>XOR_NODES,</strong><em></em><strong>--xor</strong><strong>=</strong><em>XOR_NODES</em></p>
  </dt>
  <dd>
    <p>calculate symmetric difference between nodesets</p>
  </dd>
  <dt>
    <p><strong>Options:</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-a, --all</strong></p>
  </dt>
  <dd>
    <p>call external node groups support to display all nodes</p>
  </dd>
  <dt>
    <p><strong>--autostep</strong><strong>=</strong><em>AUTOSTEP</em></p>
  </dt>
  <dd>
    <p>auto step threshold number when folding nodesets, if not specified, auto step is disabled. Example: autostep=4, "node2 node4 node6" folds in node[2,4,6] but autostep=3, "node2 node4 node6" folds in node[2-6/2]</p>
  </dd>
  <dt>
    <p><strong>-d, --debug</strong></p>
  </dt>
  <dd>
    <p>output more messages for debugging purpose</p>
  </dd>
  <dt>
    <p><strong>-q, --quiet</strong></p>
  </dt>
  <dd>
    <p>be quiet, print essential output only</p>
  </dd>
  <dt>
    <p><strong>-R, --rangeset</strong></p>
  </dt>
  <dd>
    <p>switch to RangeSet instead of NodeSet. Useful when working on numerical cluster ranges, eg. 1,5,18-31</p>
  </dd>
  <dt>
    <p><strong>-G, --groupbase</strong></p>
  </dt>
  <dd>
    <p>hide group source prefix (always <em>@groupname</em>)</p>
  </dd>
  <dt>
    <p><strong>-S</strong><em></em><strong>SEPARATOR,</strong><em></em><strong>--separator</strong><strong>=</strong><em>SEPARATOR</em></p>
  </dt>
  <dd>
    <p>separator string to use when expanding nodesets (default: &apos; &apos;)</p>
  </dd>
  <dt>
    <p><strong>-I</strong><em></em><strong>SLICE_RANGESET,</strong><em></em><strong>--slice</strong><strong>=</strong><em>SLICE_RANGESET</em></p>
  </dt>
  <dd>
    <p>return sliced off result; examples of SLICE_RANGESET are "0" for simple index selection, or "1-9/2,16" for complex rangeset selection</p>
  </dd>
  <dt>
    <p><strong>--split</strong><strong>=</strong><em>MAXSPLIT</em></p>
  </dt>
  <dd>
    <p>split result into a number of subsets</p>
  </dd>
  <dt>
    <p><strong>--contiguous</strong></p>
  </dt>
  <dd>
    <p>split result into contiguous subsets (ie. for nodeset, subsets will contain nodes with same pattern name and a contiguous range of indexes, like foobar[1-100]; for rangeset, subsets with consists in contiguous index ranges)"""</p><p>For a short explanation of these options, see -h, --help.</p><p>If a single hyphen-minus (-) is given as a nodeset, it will be read from standard input.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTENDED PATTERNS</h2>
        <div class="sectioncontent">
<p>The nodeset command benefits from ClusterShell NodeSet basic arithmetic addition. This feature extends recognized string patterns by supporting operators matching all Operations seen previously. String patterns are read from left to right, by proceeding any character operators accordinately.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Supported character operators</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>,</strong></p>
  </dt>
  <dd>
    <p>indicates that the <em>union</em> of both left and right nodeset should be computed before continuing</p>
  </dd>
  <dt>
    <p><strong>!</strong></p>
  </dt>
  <dd>
    <p>indicates the <em>difference</em> operation</p>
  </dd>
  <dt>
    <p><strong>&</strong></p>
  </dt>
  <dd>
    <p>indicates the <em>intersection</em> operation</p>
  </dd>
  <dt>
    <p><strong>^</strong></p>
  </dt>
  <dd>
    <p>indicates the <em>symmetric difference</em> (XOR) operation</p><p>Care should be taken to escape these characters as needed when the shell does not interpret them literally.</p>
  </dd>
  <dt>
    <p><strong>Examples of use of extended patterns</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f node[0-7],node[8-10]</strong></p>
  </dt>
  <dd>
    
<pre>
node[0-10]
</pre>

  </dd>
  <dt>
    <p><strong>$ nodeset -f node[0-10]!node[8-10]</strong></p>
  </dt>
  <dd>
    
<pre>
node[0-7]
</pre>

  </dd>
  <dt>
    <p><strong>$ nodeset -f node[0-10]&node[5-13]</strong></p>
  </dt>
  <dd>
    
<pre>
node[5-10]
</pre>

  </dd>
  <dt>
    <p><strong>$ nodeset -f node[0-10]^node[5-13]</strong></p>
  </dt>
  <dd>
    
<pre>
node[0-4,11-13]
</pre>

  </dd>
  <dt>
    <p><strong>Example of advanced usage</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f @gpu^@slurm:bigmem!@chassis[1-9/2]</strong></p>
  </dt>
  <dd>
    <p>This computes a folded nodeset containing nodes found in group @gpu and @slurm:bigmem, but not in both, minus the nodes found in odd chassis groups from 1 to 9.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p>An exit status of zero indicates success of the nodeset command. A non-zero exit status indicates failure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>Getting the node count</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -c node[0-7,32-159]</strong></p>
  </dt>
  <dd>
    
<pre>
136
</pre>

  </dd>
  <dt>
    <p><strong>$ nodeset -c node[0-7,32-159] node[160-163]</strong></p>
  </dt>
  <dd>
    
<pre>
140
</pre>

  </dd>
  <dt>
    <p><strong>$ nodeset -c @login</strong></p>
  </dt>
  <dd>
    
<pre>
4
</pre>

  </dd>
  <dt>
    <p><strong>Folding nodesets</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f node[0-7,32-159] node[160-163]</strong></p>
  </dt>
  <dd>
    
<pre>
node[0-7,32-163]
</pre>

  </dd>
  <dt>
    <p><strong>$ echo node3 node6 node1 node2 node7 node5 | nodeset -f</strong></p>
  </dt>
  <dd>
    
<pre>
node[1-3,5-7]
</pre>

  </dd>
  <dt>
    <p><strong>Expanding nodesets</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -e node[160-163]</strong></p>
  </dt>
  <dd>
    
<pre>
node160 node161 node162 node163
</pre>

  </dd>
  <dt>
    <p><strong>Excluding nodes from nodeset</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f node[32-159] -x node33</strong></p>
  </dt>
  <dd>
    
<pre>
node[32,34-159]
</pre>

  </dd>
  <dt>
    <p><strong>Computing nodesets intersection</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f node[32-159] -i node[0-7,20-21,32,156-159]</strong></p>
  </dt>
  <dd>
    
<pre>
node[32,156-159]
</pre>

  </dd>
  <dt>
    <p><strong>Computing nodesets symmetric difference (xor)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f node[33-159] --xor node[32-33,156-159]</strong></p>
  </dt>
  <dd>
    
<pre>
node[32,34-155]
</pre>

  </dd>
  <dt>
    <p><strong>Splitting nodes into several nodesets (expanding results)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -e --split=3 node[1-9]</strong></p>
  </dt>
  <dd>
    
<pre>
node1 node2 node3
node4 node5 node6
node7 node8 node9
</pre>

  </dd>
  <dt>
    <p><strong>Splitting non-contiguous nodesets (folding results)</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f --contiguous node2 node3 node4 node8 node9</strong></p>
  </dt>
  <dd>
    
<pre>
node[2-4]
node[8-9]
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>Command syntax has been changed since nodeset command available with ClusterShell v1.1. Operations, like <em>--intersection</em> or <em>-x</em>, are now specified between nodesets in the command line.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ClusterShell v1.1:</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f -x node[3,5-6,9] node[1-9]</strong></p>
  </dt>
  <dd>
    
<pre>
node[1-2,4,7-8]
</pre>

  </dd>
  <dt>
    <p><strong>ClusterShell v1.2+:</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>$ nodeset -f node[1-9] -x node[3,5-6,9]</strong></p>
  </dt>
  <dd>
    
<pre>
node[1-2,4,7-8]
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO nodeset&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/clush.1.html"><strong>clush</strong>(1)</a>, <a href="../man1/clubak.1.html"><strong>clubak</strong>(1)</a>, <a href="../man5/groups.conf.5.html"><strong>groups.conf</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUG REPORTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>Use the following URL to submit a bug report or feedback:</strong></p>
  </dt>
  <dd>
    <p><em>https://github.com/cea-hpc/clustershell/issues</em></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Stephane Thiell, CEA DAM  &lt;stephane.thiell@cea.fr&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>CeCILL-C V1</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="nodelist2lbdb.1.html"><span aria-hidden="true">&larr;</span> nodelist2lbdb.1: Convert fido nodelist and pointlist to lbdb format</a></li>
   <li class="next"><a href="nodeusers.1.html">nodeusers.1: Linuxnode user information lookup program <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
