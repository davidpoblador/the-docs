<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lookup: Interactive file search and display</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Interactive file search and display">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lookup (1) manual">
  <meta name="twitter:description" content="Interactive file search and display">
  <meta name="twitter:image" content="https://www.carta.tech/images/lookup-lookup-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/lookup.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lookup (1) manual" />
  <meta property="og:description" content="Interactive file search and display" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lookup-lookup-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lookup<small> (1)</small></h1>
        <p class="lead">Interactive file search and display</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lookup.1.html">
      <span itemprop="name">lookup: Interactive file search and display</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lookup/">
      <span itemprop="name">lookup</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lookup.1.html">
      <span itemprop="name">lookup: Interactive file search and display</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lookup</strong> [ args ] [ <em>file ...</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Lookup</em> allows the quick interactive search of text files.  It supports ASCII, JIS-ROMAN, and Japanese EUC Packed formated text, and has an integrated romaji¢ªkana converter.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THIS MANUAL</h2>
        <div class="sectioncontent">
<p><em>Lookup</em> is flexible for a variety of applications. This manual will, however, focus on the application of searching Jim Breen's <em>edict</em> (Japanese-English dictionary) and <em>kanjidic</em> (kanji database). Being familiar with the content and format of these files would be helpful. See the INFO section near the end of this manual for information on how to obtain these files and their documentation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OVERVIEW OF MAJOR FEATURES</h2>
        <div class="sectioncontent">
<p>The following just mentions some major features to whet your appetite to actually read the whole manual (-:</p>
<dl class='dl-vertical'>
  <dt>
    <p>Romaji-to-Kana Converter</p>
  </dt>
  <dd>
    <p><em>Lookup</em> can convert romaji to kana for you, even .Q "on the fly" as you type.</p>
  </dd>
  <dt>
    <p>Fuzzy Searching</p>
  </dt>
  <dd>
    <p>Searches can be a bit .Q vague or .Q fuzzy ", " so that you'll be able to find .Q Åìµþ even if you try to search for .Q ¤È¤­¤ç (the proper yomikata being .Q ¤È¤¦¤­¤ç¤¦ ").  "</p>
  </dd>
  <dt>
    <p>Regular Expressions</p>
  </dt>
  <dd>
    <p>Uses the powerful and expressive <em>regular expression</em> for searching. One can easily specify complex searches that affect¡ÈI want lines that look like such-and-such, but not like this-and-that, but that also have this particular characteristic....¡É</p>
  </dd>
  <dt>
    <p>Wildcard ``Glob'' Patterns</p>
  </dt>
  <dd>
    <p>Optionally, can use well-known filename wildcard patterns instead of full-fledged regular expressions.</p>
  </dd>
  <dt>
    <p>Filters</p>
  </dt>
  <dd>
    <p>You can have <em>lookup</em> not list certain lines that would otherwise match your search, yet can optionally save them for quick review. For example, you could have all name-only entries from <em>edict</em> filtered from normal output.</p>
  </dd>
  <dt>
    <p>Automatic Modifications</p>
  </dt>
  <dd>
    <p>Similarly, you can do a standard search-and-replace on lines just before they print, perhaps to remove information you don't care to see on most searches. For example, if you're generally not interested in <em>kanjidic</em>'s info on Chinese readings, you can have them removed from lines before printing.</p>
  </dd>
  <dt>
    <p>Smart Word-Preference Mode</p>
  </dt>
  <dd>
    <p>You can have <em>lookup</em> list only entries with <em>whole words</em> that match your search (as opposed to an <em>embedded</em> match, such as finding .Q the inside .Q them "), " but if no whole-word matches exist, will go ahead and list any entry that matches the search.</p>
  </dd>
  <dt>
    <p>Handy Features</p>
  </dt>
  <dd>
    <p>Other handy features include a dynamically settable and parameterized prompt, automatic highlighting of that part of the line that matches your search, an output pager, readline-like input with horizontal scrolling for long input lines, a .Q .lookup startup file, automated programability, and much more. Read on!</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REGULAR EXPRESSIONS</h2>
        <div class="sectioncontent">
<p><em>Lookup</em> makes liberal use of <em>regular expressions</em> (or <em>regex</em> for short) in controlling various aspects of the searches. If you are not familiar with the important concepts of regexes, read the tutorial appendix of this manual before continuing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">JAPANESE CHARACTER ENCODING METHODS</h2>
        <div class="sectioncontent">
<p>Internally, <em>lookup</em> works with Japanese packed-format EUC, and all files loaded must be encoded similarly. If you have files encoded in JIS or Shift-JIS, you must first convert them to EUC before loading (see the INFO section for programs that can do this).</p><p>Interactive input and output encoding, however, may be be selected via the -jis, -sjis, and -euc invocation flags (default is -euc), or by various commands to the program (described later).</p><p>Make sure to use the encoding appropriate for your system.  If you're using kterm under the X Window System, you can use <em>lookup</em>'s -jis flag to match kterm's default JIS encoding. Or, you might use kterm's .Q "-km euc" startup option (or menu selection) to put kterm into EUC mode. Also, I have found kterm's scrollbar ( .Q "-sb -sl 500" ") " to be quite useful.</p><p>With many .Q English fonts in Japan, the character that normally prints as a backslash (halfwidth version of ¡À) in The States appears as a yen symbol (the half-width version of ¡ï). How it will appear on your system is a function of what font you use and what output encoding method you choose, which may be different from the font and method that was used to print this manual (both of which may be different from what's printed on your keyboard's appropriate key).  Make sure to keep this in mind while reading.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STARTUP</h2>
        <div class="sectioncontent">
<p>Let's assume that your copy of <em>edict</em> is in ~/lib/edict. You can start the program simply with</p>
<pre>
        lookup ~/lib/edict

</pre>
<p>You'll note that <em>lookup</em> spends some time building an index before the default .Q "lookup&gt;&nbsp;" prompt appears.</p><p><em>Lookup</em> gains much of its search speed by constructing an index of the file(s) to be searched. Since building the index can be time consuming itself, you can have <em>lookup</em> write the built index to a file that can be quickly loaded the next time you run the program. Index files will be given a .Q .jin (Jeffrey's Index) ending.</p><p>Let's build the indices for <em>edict</em> and <em>kanjidic</em> now:</p>
<pre>
        lookup -write ~/lib/edict ~/lib/kanjidic

</pre>
<p>This will create the index files</p>
<pre>
       ~/lib/edict.jin
       ~/lib/kanjidic.jin
</pre>
<p>and exit.</p><p>You can now re-start <em>lookup ,</em> automatically using the pre-computed index files as:</p>
<pre>
       lookup ~/lib/edict ~/lib/kanjidic

</pre>
<p>You should then be presented with the prompt without having to wait for the index to be constructed (but see the section on Operating System concerns for possible reasons of delay).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT</h2>
        <div class="sectioncontent">
<p>There are basically two types of input: searches and commands. Commands do such things as tell <em>lookup</em> to load more files or set flags. Searches report lines of a file that match some search specifier (where lines to search for are specified by one or more regular expressions).</p><p>The input syntax may perhaps at first seem odd, but has been designed to be powerful and concise. A bit of time invested to learn it well will pay off greatly when you need it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BRIEF EXAMPLE</h2>
        <div class="sectioncontent">
<p>Assuming you've started <em>lookup</em> with <em>edict</em> and <em>kanjidic</em> as noted above, let's try a few searches. In these examples, the</p>
<pre>
    ¡Èsearch [edict]&gt; ¡É
</pre>
<p>is the prompt. Note that the space after the¡Æ&gt;¡Çis part of the prompt.</p><p>Given the input:</p>
<pre>
  search [edict]&gt; tranquil

</pre>
<p><em>lookup</em> will report all lines with the string .Q tranquil in them. There are currently about a dozen such lines, two of which look like:</p>
<pre>
  °Â¤é¤« [¤ä¤¹¤é¤«] /peaceful (an)/tranquil/calm/restful/
  °Â¤é¤® [¤ä¤¹¤é¤®] /peace/tranquility/

</pre>
<p>Notice that lines with .Q tranquil <em>and</em> .Q tranquility matched? This is because .Q tranquil was embedded in the word¡Ètranquility¡É. You could restrict the search to only the <em>word</em> .Q tranquil by prepending the special .Q "start of word" symbol¡Æ&lt;¡Çand appending the special .Q "end of word" symbol¡Æ&gt;¡Çto the regex, as in:</p>
<pre>
  search [edict]&gt; &lt;tranquil&gt;

</pre>
<p>This is the regular expression that says¡Èthe beginning of a word, followed by a¡Æt¡Ç,¡Ær¡Ç, ...,¡Æl¡Ç, which is at the end of a word.¡ÉThe current version of <em>edict</em> has just three matching entries.</p><p>Let's try another:</p>
<pre>
  search [edict]&gt; fukushima

</pre>
<p>This is a search for the .Q English fukushima -- ways to search for kana or kanji will be explored later.  Note that among the several lines selected and printed are:</p>
<pre>
  ÉûÅç [¤Õ¤¯¤·¤Þ] /Fukushima (pn,pl)/
  ÌÚÁ¾Ê¡Åç [¤­¤½¤Õ¤¯¤·¤Þ] /Kisofukushima (pl)/

</pre>
<p>By default, searches are done in a case-insensitive manner --¡ÆF¡Çand¡Æf¡Çare treated the same by <em>lookup</em>, at least so far as the matching goes.  This is called <em>case folding</em>.</p><p>Let's give a command to turn this option off, so that¡Æf¡Çand¡ÆF¡Çwon't be considered the same.  Here's an odd point about <em>lookup's</em> input syntax: the default setting is that all command lines must begin with a space.  The space is the (default) command-introduction character and tells the input parser to expect a command rather than a search regular expression. <em></em> It is a common mistake at first to forget the leading space when issuing a command.  Be careful.</p><p>Try the command .Q "&nbsp;fold" to report the current status of case-folding. Notice that as soon as you type the space, the prompt changes to</p>
<pre>
  ¡Èlookup command&gt; ¡É
</pre>
<p>as a reminder that now you're typing a command rather than a search specification.</p>
<pre>
  lookup command&gt;  fold

</pre>
<p>The reply should be .Q "file #0's case folding is on"</p><p>You can actually turn it off with .Q " fold off" ".  " Now try the search for .Q fukushima again. Notice that this time the entries with .Q Fukushima aren't listed? Now try the search string .Q Fukushima and see that the entries with .Q fukushima aren't listed.</p><p>Case folding is usually very convenient (it also makes corresponding katakana and hiragana match the same), so don't forget to turn it back on:</p>
<pre>
  lookup command&gt;  fold on

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">JAPANESE INPUT</h2>
        <div class="sectioncontent">
<p><em>Lookup</em> has an automatic romaji¢ªkana converter. A leading¡Æ/¡Çindicates that romaji is to follow. Try typing .Q /tokyo and you'll see it convert to .Q /¤È¤­¤ç as you type. When you hit return, <em>lookup</em> will list all lines that have a¡È¤È¤­¤ç¡Ésomewhere in them. Well, sort of.  Look carefully at the lines which match. Among them (if you had case folding back on) you'll see:</p>
<pre>
  ¥­¥ê¥¹¥È¶µ [¥­¥ê¥¹¥È¤­¤ç¤¦] /Christianity/
  Åìµþ [¤È¤¦¤­¤ç¤¦] /Toukyou (pl)/Tokyo/current capital of Japan/
  ÆÌ¶À [¤È¤Ã¤­¤ç¤¦] /convex lens/

</pre>
<p>The first one has¡È¤È¤­¤ç¡Éin it (as¡È¥È¤­¤ç¡É, where the katakana¡È¥È¡Ématches in a case-insensitive manner to the hiragana¡È¤È¡É), but you might consider the others unexpected, since they don't have .Q ¤È¤­¤ç in them. They're close (¡È¤È¤¦¤­¤ç¡Éand¡È¤È¤Ã¤­¤ç¡É), but not exact. This is the result of <em>lookup</em>'s\c ¡È&#92;$1¡É&#92;$2&nbsp; Try the command .Q "&nbsp;fuzz" (again, don't forget the command-introduction space). You'll see that fuzzification is turned on.  Turn it off with .Q "&nbsp;fuzz off" and try .Q /tokyo (which will convert as you type) again. This time you only get the lines which have¡È¤È¤­¤ç¡Éexactly (well, case folding is still on, so it might match katakana as well).</p><p>In a fuzzy search, length of vowels is ignored --¡È¤È¡Éis considered the same as¡È¤È¤¦¡É, for example. Also, the presence or absence of any¡È¤Ã¡Écharacter is ignored, and the pairs ¤¸ ¤Â, ¤º ¤Å, ¤¨ ¤ñ, and ¤ª ¤ò are considered identical in a fuzzy search.</p><p>It might be convenient to consider a fuzzy search to be a .Q "pronunciation search" ".  "</p><p>Special note: fuzzification will not be performed if a regular expression .Q "*" , or .Q "?" modifies a non-ASCII character. This is not an issue when input patterns are filename-like wildcard patterns (discussed below).</p><p>In addition to kana fuzziness, there's one special case for kanji when fuzziness is on. The kanji repeater mark .Q "¡¹" will be recognized such that .Q "»þ¡¹" and .Q "»þ»þ" will match each-other.</p><p>Turn fuzzification back on (¡Èfuzz on¡É), and search for all <em>whole words</em> which sound like¡Ètokyo¡É. That search would be specified as:</p>
<pre>
  search [edict]&gt; /&lt;tokyo&gt;

</pre>
<p>(again, the .Q tokyo will be converted to .Q ¤È¤­¤ç as you type). My copy of <em>edict</em> has the three lines</p>
<pre>
  Åìµþ [¤È¤¦¤­¤ç¤¦] /Toukyou (pl)/Tokyo/current capital of Japan/
  ÆÃµö [¤È¤Ã¤­¤ç] /special permission/patent/
  ÆÌ¶À [¤È¤Ã¤­¤ç¤¦] /convex lens/

</pre>
<p>This kind of whole-word romaji-to-kana search is so common, there's a special short cut. Instead of typing¡È/&lt;tokyo&gt;¡É, you can type .Q [tokyo] ".  " The leading¡Æ[¡Çmeans¡Èstart romaji¡É .I and .Q "start of word" ".  " Were you to type .Q &lt;tokyo&gt; instead (without a leading¡Æ/¡Çor¡Æ[¡Çto indicate romaji-to-kana conversion), you would get all lines with the <em>English</em> whole-word .Q tokyo in them. That would be a reasonable request as well, but not what we want at the moment.</p><p>Besides the kana conversion, you can use any cut-and-paste that your windowing system might provide to get Japanese text onto the search line. Cut .Q ¤È¤­¤ç from somewhere and paste onto the search line. When hitting enter to run the search, you'll notice that it is done without fuzzification (even if the fuzzification flag was .Q on ").  " That's because there's no leading¡Æ/¡Ç. Not only does a leading¡Æ/¡Çndicate that you want the romaji-to-kana conversion, but that you want it done fuzzily.</p><p>So, if you'd like fuzzy cut-and-paste, just type a leading¡Æ/¡Çefore pasting (or go back and prepend one after pasting).</p><p>These examples have all been pretty simple, but you can use all the power that regexes have to offer. As a slightly more complex example, the search .Q &lt;gr[ea]y&gt; would look for all lines with the words .Q grey or .Q gray in them.  Since the¡Æ[¡Çisn't the first character of the line, it doesn't mean what was mentioned above (start-of-word romaji). In this case, it's just the regular-expression .Q class indicator.</p><p>If you feel more comfortable using filename-like .Q "*.txt" wildcard patterns, you can use the .Q "wildcard on" command to have patterns be considered this way.</p><p>This has been a quick introduction to the basics of <em>lookup</em>.</p><p>It can be very powerful and much more complex. Below is a detailed description of its various parts and features.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">READLINE INPUT</h2>
        <div class="sectioncontent">
<p>The actual keystrokes are read by a readline-ish package that is pretty standard. In addition to just typing away, the following keystrokes are available:</p>
<pre>
  ^B  / ^F     move left/right one character on the line
  ^A  / ^E     move to the start/end of the line
  ^H  / ^G     delete one character to the left/right of the cursor
  ^U  / ^K     delete all characters to the left/right of the cursor
  ^P  / ^N     previous/next lines on the history list
  ^L or ^R     redraw the line
  ^D           delete char under the cursor, or EOF if line is empty
  ^space       force romaji conversion (^@ on some systems)

</pre>
<p>If automatic romaji-to-kana conversion is turned on (as it is by default), there are certain situations where the conversion will be done, as we saw above. Lower-case romaji will be converted to hiragana, while upper-case romaji to katakana.  This usually won't matter, though, as case folding will treat hiragana and katakana the same in the searches.</p><p>In exactly what situations the automatic conversion will be done is intended to be rather intuitive once the basic idea is learned. However, at <em>any time</em>, one can use control-space to convert the ASCII to the left of the cursor to kana. This can be particularly useful when needing to enter kana on a command line (where auto conversion is never done; see below)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ROMAJI FLAVOR</h2>
        <div class="sectioncontent">
<p>Most flavors of romaji are recognized. Special or non-obvious items are mentioned below. Lowercase are converted to hiragana, uppercase to katakana.</p><p>Long vowels can be entered by repeating the vowel, or with¡Æ-¡Çor¡Æ^¡Ç.</p><p>In situations where an¡Èn¡Écould be vague, as in¡Èna¡Ébeing ¤Ê or ¤ó¤¢, use a single quote to force ¤ó. Therefore,¡Ökenichi¡×¢ª¤±¤Ë¤Á while¡Öken'ichi¡×¢ª¤±¤ó¤¤¤Á.</p><p>The romaji has been richly extended with many non-standard combinations such as ¤Õ¤¡ or ¤Á¤§, which are represented in intuitive ways:¡Öfa¡×¢ª¤Õ¤¡,¡Öche¡×¢ª¤Á¤§. etc.</p><p>Various other mappings of interest:</p>
<pre>
  wo ¢ª¤ò     we¢ª¤ñ      wi¢ª¤ð
  VA ¢ª¥ô¥¡   VI¢ª¥ô¥£    VU¢ª¥ô      VE¢ª¥ô¥§    VO¢ª¥ô¥©
  di ¢ª¤Â     dzi¢ª¤Â     dya¢ª¤Â¤ã   dyu¢ª¤Â¤å   dyo¢ª¤Â¤ç
  du ¢ª¤Å     tzu¢ª¤Å     dzu¢ª¤Å

(the following kana are all smaller versions of the regular kana)

  xa ¢ª¤¡     xi¢ª¤£      xu¢ª¤¥      xe¢ª¤§      xo¢ª¤©
  xu ¢ª¤¥     xtu¢ª¤Ã     xwa¢ª¤î     xka¢ª¥õ     xke¢ª¥ö
  xya¢ª¤ã     xyu¢ª¤å     xyo¢ª¤ç

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT SYNTAX</h2>
        <div class="sectioncontent">
<p>Any input line beginning with a space (or whichever character is set as the command-introduction character) is processed as a command to <em>lookup</em> rather than a search spec. <em>Automatic</em> kana conversion is never done on these lines (but <em>forced</em> conversion with control-space may be done at any time).</p><p>Other lines are taken as search regular expressions, with the following special cases:</p>
<dl class='dl-vertical'>
  <dt>
    <p>?</p>
  </dt>
  <dd>
    <p>A line consisting of a single question mark will report the current command-introduction character (the default is a space, but can be changed with the .Q cmdchar command).</p>
  </dd>
  <dt>
    <p>=</p>
  </dt>
  <dd>
    <p>If a line begins with¡Æ=¡Ç, the line (without the¡Æ=¡Ç) is taken as a search regular expression, and no automatic (or internal -- see below) kana conversion is done anywhere on the line (although again, conversion can always be forced with control-space).  This can be used to initiate a search where the beginning of the regex is the command-introduction character, or in certain situations where automatic kana conversion is temporarily not desired.</p>
  </dd>
  <dt>
    <p>/</p>
  </dt>
  <dd>
    <p>A line beginning with¡Æ/¡Çindicates romaji input for the whole line. If automatic kana conversion is turned on, the conversion will be done in real-time, as the romaji is typed. Otherwise it will be done internally once the line is entered. <em>Regardless</em>, the presence of the leading¡Æ/¡Çindicates that any kana (either converted or cut-and-pasted in) should be .Q fuzzified if fuzzification is turned on.</p><p>As an addition to the above, if the line doesn't begin with¡Æ=¡Çor the command-introduction character (and automatic conversion is turned on),¡Æ/¡Ç <em>anywhere</em> on the line initiates automatic conversion for the following word.</p>
  </dd>
  <dt>
    <p>[</p>
  </dt>
  <dd>
    <p>A line beginning with¡Æ[¡Çis taken to be romaji (just as a line beginning with¡Æ/¡Ç, and the converted romaji is subject to fuzzification (if turned on).  However, if¡Æ[¡Çis used rather than¡Æ/¡Ç, an implied¡Æ&lt;¡Ç .Q "beginning of word" is prepended to the resulting kana regex.  Also, any ending¡Æ]¡Çon such a line is converted to the .Q "ending of word" specifier¡Æ&gt;¡Çin the resulting regex.</p>
  </dd>

</dl>
<p>In addition to the above, lines may have certain prefixes and suffixes to control aspects of the search or command:</p>
<dl class='dl-vertical'>
  <dt>
    <p>!</p>
  </dt>
  <dd>
    <p>Various flags can be toggled for the duration of a particular search by prepending a .Q !! sequence to the input line.</p><p>Sequences are shown below, along with commands related to each:</p>
<pre>
 !F! ¡Ä  Filtration is toggled for this line (filter)
 !M! ¡Ä  Modification is toggled for this line (modify)
 !w! ¡Ä  Word-preference mode is toggled for this line (word)
 !c! ¡Ä  Case folding is toggled for this line (fold)
 !f! ¡Ä  Fuzzification is toggled for this line (fuzz)
 !W! ¡Ä  Wildcard-pattern mode is toggled for this line (wildcard)
 !r! ¡Ä  Raw. Force fuzzification off for this line
 !h! ¡Ä  Highlighting is toggled for this line (highlight)
 !t! ¡Ä  Tagging is toggled for this line (tag)
 !d! ¡Ä  Displaying is on for this line (display)

</pre>
<p>The letters can be combined, as in .Q "!cf!" .</p><p>The final¡Æ!¡Ç can be omitted if the first character after the sequence is not an ASCII letter.</p><p>If no letters are given ( .Q !! ").\c" is the default.</p><p>These last two points can be conveniently combined in the common case of .Q !/romaji which would be the same as .Q !f!/romaji ".  "</p><p>The special sequence .Q !? lists the above, as well as indicates which are currently turned on.</p><p>Note that the letters accepted in a .Q !! sequence are many of the indicators shown by the .Q files command.</p>
  </dd>
  <dt>
    <p>+</p>
  </dt>
  <dd>
    <p>A¡Æ+¡Çprepended to anything above will cause the final search regex to be printed. This can be useful to see when and what kind of fuzzification and/or internal kana conversion is happening. Consider:</p>
<pre>
  search [edict]&gt; +/¤ï¤«¤ë
  a match is¡È¤ï[¤¡¤¢¡¼]*¤Ã?¤«[¤¡¤¢¡¼]*¤ë[¤¥¤¦¤ª¤©¡¼]*¡É

</pre>
<p>Due to the .Q leading "/\, " the kana is fuzzified, which explains the somewhat complex resulting regex. For comparison, note:</p>
<pre>
  search [edict]&gt; +¤ï¤«¤ë
  a match is¡È¤ï¤«¤ë¡É
  search [edict]&gt; +!/¤ï¤«¤ë
  a match is¡È¤ï¤«¤ë¡É

</pre>
<p>As the¡Æ+¡Çshows, these are not fuzzified. The first one has no leading¡Æ/¡Çor¡Æ[¡Çto induce fuzzification, while the second has the¡Æ!¡Çline prefix (which is the default version of .Q !f! "), " which toggles fuzzification mode to .Q off for that line.</p>
  </dd>
  <dt>
    <p>,</p>
  </dt>
  <dd>
    <p>The default of all searches and most commands is to work with the first file loaded (<em>edict</em> in these examples). One can change this default (see the .Q select command) or, by appending a comma+digit sequence at the end of an input line, force that line to work with another previously-loaded file. An appended .Q ,1 works with first extra file loaded (in these examples, <em>kanjidic</em>).  An appended .Q ,2 works with the 2nd extra file loaded, etc.</p><p>An appended .Q ,0 works with the original first file (and can be useful if the default file has been changed via the .Q select command).</p><p>The following sequence shows a common usage:</p>
<pre>
  search [edict]&gt; [¤È¤­¤ç¤È]
  ÅìµþÅÔ [¤È¤¦¤­¤ç¤¦¤È] /Tokyo Metropolitan area/

</pre>
<p>cutting and pasting the ÅÔ from above, and adding a .Q ,1 to search <em>kanjidic</em>:</p>
<pre>
  search [edict]&gt; ÅÔ,1
  ÅÔ 4554 N4769 S11  ..... ¥È ¥Ä ¤ß¤ä¤³ {metropolis} {capital}

</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILENAME-LIKE WILDCARD MATCHING</h2>
        <div class="sectioncontent">
<p>When wildcard-pattern mode is selected, patterns are considered as extended .Q "*.txt" "-like" patterns. This is often more convenient for users not familiar with regular expressions. To have this mode selected by default, put</p>
<pre>
   default wildcard on

</pre>
<p>into your .Q ".lookup" file (see .Q "STARTUP FILE" below).</p><p>When wildcard mode is on, only  .Q "*" , and .Q "." , are effected. See the entry for the command below for details.</p><p>Other features, such as the multiple-pattern searches (described below) and other regular-expression metacharacters are available.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MULTIPLE-PATTERN SEARCHES</h2>
        <div class="sectioncontent">
<p>You can put multiple patterns in a single search specifier. For example consider</p>
<pre>
  search [edict]&gt; china||japan

</pre>
<p>The first part (¡Èchina¡É) will select all lines that have .Q china in them. Then, <em>from among those lines</em>, the second part will select lines that have .Q japan in them.  The .Q || is not part of any pattern -- it is <em>lookup</em>'s\c mechanism.</p><p>The above example is very different from the single pattern ¡Èchina|japan¡Éwhich would select any line that had either¡Èchina¡É .I or .Q japan ".  " With .Q china||japan ", " you get lines that have .Q china <em>and then also</em> have .Q japan as well.</p><p>Note that it is also different from the regular expression .Q china.*japan (or the wildcard pattern .Q china*japan ")" which would select lines having .Q "china, then maybe some stuff, then japan" ".  " But consider the case when .Q japan comes on the line before .Q china .</p><p>Just for your comparison, the multiple-pattern specifier¡Èchina||japan¡Éis pretty much the same as the single regular expression¡Èchina.*japan|japan.*china¡É.</p><p>If you use¡È|!|¡Éinstead of¡È||¡É, it will mean¡È...and then lines <em>not</em> matching...¡É.</p><p>Consider a way to find all lines of <em>kanjidic</em> that do have a Halpern number, but don't have a Nelson number:</p>
<pre>
    search [edict]&gt; &lt;H&#92;d+&gt;|!|&lt;N&#92;d+&gt;

</pre>
<p>If you then wanted to restrict the listing to those that <em>also</em> had a¡Èjinmeiyou¡Émarking (<em>kanjidic</em>'s¡ÈG9¡Éfield) and had a reading of ¤¢¤­, you could make it:</p>
<pre>
    search [edict]&gt; &lt;H&#92;d+&gt;|!|&lt;N&#92;d+&gt;||&lt;G9&gt;||&lt;¤¢¤­&gt;

A prepended¡Æ+¡Çwould explain:

    a match is¡È&lt;H&#92;d+&gt;¡É
    and not¡È&lt;N&#92;d+&gt;¡É
    and¡È&lt;G9&gt;¡É
    and¡È&lt;¤¢¤­&gt;¡É

</pre>
<p>The¡È|!|¡Éand¡È||¡Écan be used to make up to ten separate regular expressions in any one search specification.</p><p>Again, it is important to stress that¡È||¡Édoes not mean¡Èor¡É(as it does in a C program, or as¡Æ|¡Çdoes within a regular expression). You might find it convenient to read¡È||¡Éas¡È<em>and</em> also¡É, while reading¡È|!|¡Éas¡Èbut <em>not</em>¡É.</p><p>It is also important to stress that any whitespace around the .Q || and .Q |!| construct is <em>not</em> ignored, but kept as part of the regex on either side.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMBINATION SLOTS</h2>
        <div class="sectioncontent">
<p>Each file, when loaded, is assigned to a .Q slot via which subsequent references to the file are then made. The slot may then be searched, have filters and flags set, etc.</p><p>A special kind of slot, called a .Q "combination slot" , rather than representing a single file, can represent multiple previously-loaded slots. Searches against a combination slot (or .Q "combo slot" for short) search all those previously-loaded slots associated with it (called .Q "component slots" "). "</p><p>Combo slots are set up with the <em>combine</em> command.</p><p>A Combo slot has no filter or modify spec, but can have a local prompt and flags just like normal file slots.  The flags, however, have special meanings with combo slots. Most combo-slot flags act as a mask against the component-slot flags; when acted upon as a member of the combo, a component-slot's flag will be disabled if the corresponding combo-slot's flag is disabled.</p><p>Exceptions to this are the <em>autokana</em>, <em>fuzz</em>, and <em>tag</em> flags.</p><p>The <em>autokana</em> and <em>fuzz</em> flags governs a combo slot exactly the same as a regular file slot. When a slot is searched as a component of a combination slot, the component slot's <em>fuzz</em> (and <em>autokana</em>) flags, or lack thereof, are ignored.</p><p>The <em>tag</em> flag is quite different altogether; see the <em>tag</em> command for complete information.</p><p>Consider the following output from the <em>files</em> command:</p>
<pre>
  ¨®¨¬¨³¨¬¨¬¨¬¨¬¨¸¨¬¨¬¨³¨¬¨¬¨¬¨³¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬
  ¨­ 0¨­F wcfh d¨¢a I ¨­ 2762k¨­/usr/jfriedl/lib/edict
  ¨­ 1¨­FM cf  d¨¢a I ¨­  705k¨­/usr/jfriedl/lib/kanjidic
  ¨­ 2¨­F  cfh@d¨¢a   ¨­    1k¨­/usr/jfriedl/lib/local.words
  ¨­*3¨­FM cfhtd¨¢a   ¨­ combo¨­kotoba (#2, #0)
  ¨±¨¬¨µ¨¬¨¬¨¬¨¬¨º¨¬¨¬¨µ¨¬¨¬¨¬¨µ¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬

</pre>
<p>See the discussion of the <em>files</em> command below for basic explanation of the output.</p><p>As can be seen, slot #3 is a <em>combination slot</em> with the name .Q kotoba with <em>component slots</em> two and zero. When a search is initiated on this slot, first slot #2 .Q "local.words" will be searched, then slot #0 .Q edict ".  "</p><p>Because the combo slot's <em>filter</em> flag is <em>on</em>, the component slots' <em>filter</em> flag will remain on during the search. The combo slot's <em>word</em> flag is <em>off</em>, however, so slot #0's <em>word</em> flag will be forced off during the search.</p><p>See the <em>combine</em> command for information about creating combo slots.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PAGER</h2>
        <div class="sectioncontent">
<p><em>Lookup</em> has a built in pager (a'la <em>more</em>).  Upon filling a screen with text, the string</p>
<pre>
    --MORE [space,return,c,q]--
</pre>
<p>is shown. A space will allow another screen of text; a return will allow one more line. A¡Æc¡Ç will allow output text to continue unpaged until the next command. A¡Æq¡Ç will flush output of the current command.</p><p>If supported by the OS, <em>lookup's</em> idea of the screen size is automatically set upon startup and window resize. <em>Lookup</em> must know the width of the screen in doing both the horizontal input-line scrolling, and for knowing when a long line wraps on the screen.</p><p>The pager parameters can be set manually with the .Q pager command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>Any line intended to be a command must begin with the command-introduction character (the default is a space, but can be set via the¡Ècmdchar¡Écommand).  However, that character is not part of the command itself and won't be shown in the following list of commands.</p><p>There are a number of commands that work with the <em>selected file</em> or <em>selected slot</em> (both meaning the same thing). The selected file is the one indicated by an appended comma+digit, as mentioned above. If no such indication is given, the default <em>selected file</em> is used (usually the first file loaded, but can be changed with the¡Èselect¡Écommand).</p><p>Some commands accept a <em>boolean</em> argument, such as to turn a flag on or off. In all such cases, a¡È1¡Éor¡Èon¡Émeans to turn the flag on, while a¡È0¡Éor¡Èoff¡Éis used to turn it off.  Some flags are per-file (¡Èfuzz¡É,¡Èfold¡É, etc.), and a command to set such a flag normally sets the flag for the selected file only. However, the default value inherited by subsequently loaded files can be set by prepending .Q default to the command. This is particularly useful in the startup file before any files are loaded (see the section STARTUP FILE).</p><p>Items separated by¡Æ|¡Çare mutually exclusive possibilities (i.e. a boolean argument is¡È1|on|0|off¡É).</p><p>Items shown in brackets (¡Æ[¡Çand¡Æ]¡Ç) are optional. All commands that accept a boolean argument to set a flag or mode do so optionally -- with no argument the command will report the current status of the mode or flag.</p><p>Any command that allows an argument in quotes (such as load, etc.) allow the use of single or double quotes.</p><p>The commands:</p>
<dl class='dl-vertical'>
  <dt>
    <p>[default] autokana [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>Automatic romaji ¢ª kana conversion for the <em>selected file</em> is turned on or off (default is on). However, if .Q default is specified, the value to be inherited as the default by subsequently-loaded files is set (or reported).</p><p>Can be temporarily disabled by a prepended¡Æ=¡Ç,as described in the INPUT SYNTAX section.</p>
  </dd>
  <dt>
    <p>clear|cls</p>
  </dt>
  <dd>
    <p>Attempts to clear the screen. If you're using a kterm it'll just output the appropriate tty control sequence. Otherwise it'll try to run the .Q clear command.</p>
  </dd>
  <dt>
    <p>cmdchar ['<em>one-byte-char</em>']</p>
  </dt>
  <dd>
    <p>The default command-introduction character is a space, but it may be changed via this command. The single quotes surrounding the character are required. If no argument is given, the current value is printed.</p><p>An input line consisting of a single question mark will also print the current value (useful for when you don't know the current value).</p><p>Woe to the one that sets the command-introduction character to one of the other special input-line characters, such as¡Æ+¡Ç,¡Æ/¡Ç, etc.</p>
  </dd>
  <dt>
    <p>combine ["name"] [ <em>num</em> += ] <em>slotnum</em> ...</p>
  </dt>
  <dd>
    <p>Creates or adds file slots to a combination slot (see the COMBINATION SLOTS section for general information). Note that .Q combo may be used as the command as well.</p><p>Assuming for this example that slots 0-2 are loaded with the files <em>curly</em>, <em>moe</em>, and <em>larry</em>, we can create a combination slot that will reference all three:</p>
<pre>
  combo "three stooges" 2, 0, 1

</pre>
<p>The command will report</p>
<pre>
  creating combo slot #3 (three stooges): 2 0 1

</pre>
<p>The <em>name</em> is optional, and will appear in the <em>files</em> list, and also maybe be used to specify the slot as an argument to the <em>select</em> command.</p><p>A search via the newly created combo slot would search in the order specified on the <em>combo</em> command line: first <em>larry</em>, then <em>curly</em>, and finally <em>moe</em>.</p><p>If you later load another file (say, <em>jeffrey</em> to slot #4), you can then add it to the previously made combo:</p>
<pre>
  combo 3 += 4

</pre>
<p>(the .Q "+=" wording comes from the C programming language where it means .Q "add on to" ").  " Adding to a combination always adds slots to the end of the list.</p><p>You can take the opportunity of adding the slot to also change the name, if you like:</p>
<pre>
  combo "four stooges" 3 += 4

</pre>
<p>The reply would be</p>
<pre>
  adding to combo slot #3(four stooges): 4
</pre>
<p>A file slot can be a component of any particular combo slot only once. When reporting the created or added slot numbers, the number will appear in parenthesis if it had already been a member of the list.</p><p>Furthermore, only <em>file</em> slots can be component members of <em>combo</em> slots. Attempting to combine combo slot <em>X</em> to combo slot <em>Y</em> will result in having <em>X</em>'s component file slots (rater than the combo slot itself) added to <em>Y</em>.</p>
  </dd>
  <dt>
    <p>command debug [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>Sets the internal command parser debugging flag on or off (default is off).</p>
  </dd>
  <dt>
    <p>debug [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>Sets the internal general-debugging flag on or off (default is off).</p>
  </dd>
  <dt>
    <p>describe <em>specifier</em></p>
  </dt>
  <dd>
    <p>This command will tell you how a character (or each character in a string) is encoded in the various encoding methods:</p>
<pre>
    lookup command&gt;  describe "µ¤"
    ¡Èµ¤¡Éas  EUC  is 0xb5a4 (181 164; \265 &#92;244)
          as  JIS  is 0x3524 ( 53  36; &nbsp;65 &#92;044 "5$")
          as KUTEN is   2104 ( 0x1504; &nbsp;25 &#92;004)
          as S-JIS is 0x8b1f (139  31; \213 &#92;037)
</pre>
<p>The quotes surrounding the character or string to describe are optional. You can also give a regular ASCII character and have the double-width version of the character described.... indicating .Q A ", " for example, would describe .Q £Á ".  "</p><p><em>Specifier</em> can also be a four-digit kuten value, in which case the character with that kuten will be described.</p><p>If a four-digit <em>specifier</em> has a hex digit in it, or if it is preceded by .Q 0x ", " the value is taken as a JIS code. You can precede the value by .Q jis , .Q sjis , .Q euc ", " or .Q kuten to force interpretation to the requested code.</p><p>Finally, <em>specifier</em> can be a string of stripped JIS (JIS w/o the kanji-in and kanji-out codes, or with the codes but without the escape characters in them). For example .Q "F|K&#92;" would describe the two characters Æü and ËÜ.</p>
  </dd>
  <dt>
    <p>encoding [euc|sjis|jis]</p>
  </dt>
  <dd>
    <p>The same as the -euc, -jis, and -sjis command-line options, sets the encoding method for interactive input and output (or reports the current status). More detail over the output encoding can be achieved with the <em>output encoding</em> command. A separate encoding for input can be set with the <em>input encoding</em> command.</p>
  </dd>
  <dt>
    <p>files [ - | long ]</p>
  </dt>
  <dd>
    <p>Lists what files are loaded in what slots, and some status information about them, as with:</p>
<pre>
¨­*0¨­F wcfh d¨¢a I ¨­ 3749k¨­/usr/jeff/lib/edict
¨­ 1¨­FM cf  d¨¢a I ¨­  754k¨­/usr/jeff/lib/kanjidic

  ¨®¨¬¨³¨¬¨¬¨¬¨¬¨¬¨¸¨¬¨¬¨³¨¬¨¬¨¬¨³¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬
  ¨­ 0¨­F wcf h d ¨¢a I ¨­ 2762k¨­/usr/jfriedl/lib/edict
  ¨­ 1¨­FM cf   d ¨¢a I ¨­  705k¨­/usr/jfriedl/lib/kanjidic
  ¨­ 2¨­F  cfWh@d ¨¢a   ¨­    1k¨­/usr/jfriedl/lib/local.words
  ¨­*3¨­FM cf htd ¨¢a   ¨­ combo¨­kotoba (#2, #0)
  ¨­ 4¨­   cf   d ¨¢a   ¨­  205k¨­/usr/dict/words
  ¨±¨¬¨µ¨¬¨¬¨¬¨¬¨¬¨º¨¬¨¬¨µ¨¬¨¬¨¬¨µ¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬¨¬

</pre>
<p>The first section is the slot number, with a .Q * beside the <em>default slot</em> (as set by the <em>select</em> command).</p><p>The second section shows per-slot flags and status. Letters are shown if the flag is on, omitted if off. In the list below, related commands are given for each item:</p>
<pre>
  F ¡Ä if there is a filter {but '#' if disabled}. (filter)
  M ¡Ä if there is a modify spec {but '%' if disabled}. (modify)
  w ¡Ä if word-preference mode is turned on. (word)
  c ¡Ä if case folding is turned on. (fold)
  f ¡Ä if fuzzification is turned on. (fuzz)
  W ¡Ä if wildcard-pattern mode is turned on (wildcard)
  h ¡Ä if highlighting is turned on. (highlight)
  t ¡Ä if there is a tag {but @ if disabled} (tag)
  d ¡Ä if found lines should be displayed (display)
  ¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡¨¡
  a ¡Ä if autokana is turned on (autokana)
  P ¡Ä if there is a file-specific local prompt (prompt)
  I ¡Ä if the file is loaded with a precomputed index (load)
  d ¡Ä if the display flag is on (display)
</pre>
<p>Note that the letters in the upper section directly correspond to the .Q !! sequence characters described in the INPUT SYNTAX section.</p><p>If there is a digit at the end of the flag section, it indicates that only #/10 of the file is actually loaded into memory (as opposed to the file having been completely loaded). Unloaded files will be loaded while <em>lookup</em> is idle, or when first used.</p><p>If the slot is a combination slot (as slot #3 is in the example above), that is noted in the third section, and the combination name and component slot numbers are noted in the fourth. Also, for combination slots (which have no <em>filter</em> or <em>modify</em> specifications, only the flags), <em>F</em> and/or <em>M</em> are shown if the corresponding mode is allowed during searches via the combo slot. See the <em>tag</em> command for info about <em>t</em> with respect to combination slots.</p><p>If an argument (either .Q - or .Q long will work) is given to the command, a short message about what the flags mean is also printed.</p>
  </dd>
  <dt>
    <p>filter ["<em>label</em>"] [!] /<em>regex</em>/[i]</p>
  </dt>
  <dd>
    <p>Sets the filter for the <em>selected slot</em> (which must contain a file and not a combination). If a filter is set and active for a file, any line matching the given <em>regex</em> is filtered from the output (if the¡Æ!¡Çis put before the <em>regex</em>, any line <em>not</em> matching the regex is filtered). The <em>label ,</em> which isn't required, merely acts as documentation in various diagnostics.</p><p>As an example, consider that <em>edict</em> lines often have .Q (pn) on them to indicate that the given English is a place name. Often these place names can be a bother, so it would be nice to elide them from the output unless specifically requested. Consider the example:</p>
<pre>
  lookup command&gt;  filter "name" /(pn)/
  search [edict]&gt; [¤­¤Î]
  µ¡Ç½ [¤­¤Î¤¦] /function/faculty/
  µ¢Ç¼ [¤­¤Î¤¦] /inductive/
  ºòÆü [¤­¤Î¤¦] /yesterday/
  ¢ã3 "name" lines filtered¢ä

</pre>
<p>In the example,¡Æ/¡Çcharacters are used to delimit the start and stop of the regex (as is common with many programs). However, any character can be used. A final¡Æi¡Ç, if present, indicates that the regex should be applied in a case-insensitive manner.</p><p>The filter, once set, can be enabled or disabled with the other form of the .Q filter command (described below). It can also be temporarily turned off (or, if disabled, temporarily turned on) by the .Q !F! line prefix.</p><p>Filtered lines can optionally be saved and then displayed if you so desire. See the .Q "saved list size" and .Q show commands.</p><p>Note that if you have saving enabled and only one line would be filtered, it is simply printed at the end (rather than print a one line message about how one line was filtered).</p><p>By the way, a better .Q name filter for <em>edict</em> would be:</p>
<pre>
  filter "name" #^[^/]+/[^/]*&lt;p[ln]&gt;[^/]*/$#

</pre>
<p>as it would filter all entries that had only one English section, that section being a name.  It is also an example of using something other than¡Æ/¡Çto delimit a regex, as it makes things a bit easier to read.</p>
  </dd>
  <dt>
    <p>filter [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>Enables or disables the filter for the <em>selected slot</em>. If no argument is given, displays the current filter and status.</p>
  </dd>
  <dt>
    <p>[default] fold [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>The <em>selected slot</em>'s case folding is turned on or off (default is on), or reported if no argument given. However, if .Q default is specified, the value to be inherited as the default by subsequently-loaded files is set (or reported).</p><p>Can be temporarily toggled by the .Q "!c!" line prefix.</p>
  </dd>
  <dt>
    <p>[default] fuzz [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>The <em>selected slot</em>'s fuzzification is turned on or off (default is on), or reported if no argument given. However, if .Q default is specified, the value to be inherited as the default by subsequently-loaded files is set (or reported).</p><p>Can be temporarily toggled by the .Q "!f!" line prefix.</p>
  </dd>
  <dt>
    <p>help [<em>regex</em>]</p>
  </dt>
  <dd>
    <p>Without an argument gives a short help list. With an argument, lists only commands whose help string is picked up by the given <em>regex</em>.</p>
  </dd>
  <dt>
    <p>[default] highlight [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>Sets matched-string highlighting on or off for the <em>selected slot</em> (default off), or reports the current status if no argument is given. However, if .Q default is specified, the value to be inherited as the default by subsequently-loaded files is set (or reported).</p><p>If on, shows in bold or reverse video (see below) that part of the line which was matched by the search <em>regex</em>. If multiple regexes were given, that part matched by the first regex is show.</p><p>Note that a regex might match a portion of a line which is later removed by a <em>modify</em> parameter. In this case, no highlighting is done.</p><p>Can be temporarily toggled by the .Q "!h!" line prefix.</p>
  </dd>
  <dt>
    <p>highlight style [<em>bold</em> | <em>inverse</em> | <em>standout</em> | <em>&lt;___&gt;</em>]</p>
  </dt>
  <dd>
    <p>Sets the style of highlighting for when highlighting is done. <em>Inverse</em> (inverse video) and <em>standout</em> are the same. The default is <em>bold</em>. You can also give an HTML tag, such as .Q "&lt;BOLD&gt;" and items will be wrapped by &lt;BOLD&gt;...&lt;/BOLD&gt;. This would be particularly useful when the output is going to a CGI, as when lookup has been built in a server configuration.</p><p>Note that the highlighting is affected by using raw VT100/xterm control sequences. This isn't particularly very nice if your terminal doesn't understand them. Sorry.</p>
  </dd>
  <dt>
    <p>if {<em>expression</em>} <em>command...</em></p>
  </dt>
  <dd>
    <p>If the evaluated <em>expression</em> is non-zero, the <em>command</em> will be executed.</p><p>Note that {} rather than () surround the <em>expression</em>.</p><p><em>Expression</em> may be comprised of numbers, operators, parenthesis, etc. In addition to the normal +, -, *, and /, are:</p>
<pre>
   !<em>x</em>  ¡Ä yields 0 if <em>x</em> is non-zero, 1 if <em>x</em> is zero.
   <em>x</em> && <em>y</em> ¡Ä
   !<em>x</em>    ¡Ä¡Ænot¡ÇYields 1 if <em>x</em> is zero, 0 if non-zero.
   <em>x</em> & <em>y</em> ¡Ä¡Æand¡ÇYields 1 if both <em>x</em> and <em>y</em> are non-zero, 0 otherwise.
   <em>x</em> | <em>y</em> ¡Ä¡Æor¡Ç Yields 1 if <em>x</em> or <em>y</em> (or both) is non-zero, 0 otherwise

</pre>
<p>There may also be the special tokens <em>true</em> and <em>false</em> which are 1 and 0 respectively.</p><p>There are also <em>checked</em>, <em>matched</em>, <em>printed</em>, <em>nonword</em>, and <em>filtered</em> which correspond to the values printed by the <em>stats</em> command.</p><p>An example use might be the following kind of thing in an computer-generated script:</p>
<pre>
  !d!expect this line
  if {!printed} msg Oops! couldn't find "expect this line"

</pre>

  </dd>
  <dt>
    <p>input encoding [ euc | sjis ]</p>
  </dt>
  <dd>
    <p>Used to set (or report) what encoding to use when 8-bit bytes are found in the interactive input (all flavors of JIS are always recognized). Also see the <em>encoding</em> and <em>output encoding</em> commands.</p>
  </dd>
  <dt>
    <p>limit [<em>value</em>]</p>
  </dt>
  <dd>
    <p>Sets the number of lines to print during any search before aborting (or reports the current number if no value given). Default is 100.</p><p>Output limiting is disabled if set to zero.</p>
  </dd>
  <dt>
    <p>log [ to [+] <em>file</em> ]</p>
  </dt>
  <dd>
    <p>Begins logging the program output to <em>file</em> (the Japanese encoding method being the same as for screen output). If .Q + is given, the log is appended to any text that might have previously been in <em>file</em>, in which case a leading dashed line is inserted into the file.</p><p>If no arguments are given, reports the current logging status.</p>
  </dd>
  <dt>
    <p>log  - | off</p>
  </dt>
  <dd>
    <p>If only .Q - or <em>off</em> is given, any currently-opened log file is closed.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>load [-now|-whenneeded] "<em>filename</em>"</p>
  </dt>
  <dd>
    <p>Loads the named file to the next available slot. If a precomputed index is found (as .Q "<em>filename</em>.jin" ) it is loaded as well. Otherwise, an index is generated internally.</p><p>The file to be loaded (and the index, if loaded) will be loaded during idle times. This allows a startup file to list many files to be loaded, but not have to wait for each of them to load in turn. Using the flag causes the load to happen immediately, while using the option (can be shortened to causes the load to happen only when the slot is first accessed.</p><p>Invoke <em>lookup</em> as</p>
<pre>
   % lookup -writeindex <em>filename</em>
</pre>
<p>to generate and write an index file, which will then be automatically used in the future.</p><p>If the file has already been loaded, the file is not re-read, but the previously-read file is shared. The new slot will, however, have its own separate flags, prompt, filter, etc.</p>
  </dd>
  <dt>
    <p>modify /<em>regex</em>/<em>replace</em>/[ig]</p>
  </dt>
  <dd>
    <p>Sets the <em>modify</em> parameter for the <em>selected file</em>. If a file has a modify parameter associated with it, each line selected during a search will have that part of the line which matches <em>regex</em> (if any) replaced by the <em>replacement</em> string before being printed.</p><p>Like the <em>filter</em> command, the delimiter need not be¡Æ/¡Ç; any non-space character is fine. If a final¡Æi¡Çis given, the regex is applied in a case-insensitive manner. If a final¡Æg¡Çis given, the replacement is done to all matches in the line, not just the first part that might match <em>regex</em>.</p><p>The <em>replacement</em> may have embedded .Q "&#92;1" ", " etc. in it to refer to parts of the matched text (see the tutorial on regular expressions).</p><p>The modify parameter, once set, may be enabled or disabled with the other form of the modify command (described below). It may also be temporarily toggled via the .Q !m! line prefix.</p><p>A silly example for the ultra-nationalist might be:</p>
<pre>
  modify /&lt;Japan&gt;/Dainippon Teikoku/g
</pre>
<p>So that a line such as</p>
<pre>
  Æü¶ä [¤Ë¤Á¤®¤ó] /Bank of Japan/
would come out as
  Æü¶ä [¤Ë¤Á¤®¤ó] /Bank of Dainippon Teikoku/

</pre>
<p>As a real example of the modify command with <em>kanjidic</em>, consider that it is likely that one is not interested in all the various fields each entry has.  The following can be used to remove the info on the U, N, Q, M, E, B, C, and Y fields from the output:</p>
<pre>
  modify /( [UNQMECBY]&#92;S+)+//g,1

</pre>
<p>It's sort of complex, but works. Note that here the <em>replacement</em> part is empty, meaning to just remove those parts which matched.  The result of such a search of Æü would normally print</p>
<pre>
    Æü 467c U65e5 N2097 B72 B73 S4 G1 H3027 F1 Q6010.0 MP5.0714 ¡À
    MN13733 E62 Yri4 P3-3-1 ¥Ë¥Á ¥¸¥Ä ¤Ò -¤Ó -¤« {day}

</pre>
<p>but with the above modify spec, appears more simply as</p>
<pre>
    Æü 467c S4 G1 H3027 F1 P3-3-1 ¥Ë¥Á ¥¸¥Ä ¤Ò -¤Ó -¤« {day}

</pre>

  </dd>
  <dt>
    <p>modify [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>Enables or disables the modify parameter for the <em>selected file</em>, or report the current status if no argument is given.</p>
  </dd>
  <dt>
    <p>msg <em>string</em></p>
  </dt>
  <dd>
    <p>The given <em>string</em> is printed.</p><p>Most likely used in a script as the target command of an <em>if</em> command.</p>
  </dd>
  <dt>
    <p>output encoding [ euc | sjis | jis...]</p>
  </dt>
  <dd>
    <p>Used to set exactly what kind of encoding should be used for program output (also see the <em>input encoding</em> command). Used when the <em>encoding</em> command is not detailed enough for one's needs.</p><p>If no argument is given, reports the current output encoding. Otherwise, arguments can usually be any reasonable dash-separated combination of:</p>
<dl class='dl-vertical'>
  <dt>
    <p>euc&nbsp;&nbsp;&nbsp; Selects EUC for the output encoding.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>sjis&nbsp;&nbsp; Selects Shift-JIS for the output encoding.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>jis[78|83|90][-ascii|-roman]</p>
  </dt>
  <dd>
    <p>Selects JIS for the output encoding. If no year (78, 83, or 90) given, 78 is used. Can optionally specify that .Q English should be encoded as regular <em>ASCII</em> (the default when JIS selected) or as <em>JIS-ROMAN</em>.</p>
  </dd>
  <dt>
    <p>212&nbsp;&nbsp; Indicates that JIS X0212-1990 should be supported (ignored for</p>
  </dt>
  <dd>
    <p>Shift-JIS output).</p>
  </dd>
  <dt>
    <p>no212&nbsp;&nbsp; Indicates that JIS X0212-1990 should be not be supported (default setting).</p>
  </dt>
  <dd>
    <p>This places JIS X0212-1990 characters under the domain of <em>disp</em>, <em>nodisp</em>, <em>code</em>, or <em>mark</em> (described below).</p>
  </dd>
  <dt>
    <p>hwk&nbsp;&nbsp; Indicates that <em>h</em>alf <em>w</em>idth <em>k</em>ana should be left</p>
  </dt>
  <dd>
    <p>as-is (default setting).</p>
  </dd>
  <dt>
    <p>nohwk&nbsp;&nbsp; Indicates that <em>h</em>alf <em>w</em>idth <em>k</em>ana should be stripped from</p>
  </dt>
  <dd>
    <p>the output. <em>(not yet implemented).</em></p>
  </dd>
  <dt>
    <p>foldhwk&nbsp;&nbsp; Indicates that <em>h</em>alf <em>w</em>idth <em>k</em>ana should be folded to their</p>
  </dt>
  <dd>
    <p>full-width counterparts. <em>(not yet implemented).</em></p>
  </dd>
  <dt>
    <p>disp&nbsp;&nbsp; Indicates that</p>
  </dt>
  <dd>
    <p><em>non-displayable</em> characters (such as JIS X0212-1990 while the output encoding method is Shift-JIS) should be passed along anyway (most likely resulting in screen garbage).</p>
  </dd>
  <dt>
    <p>nodisp&nbsp;&nbsp; Indicates that</p>
  </dt>
  <dd>
    <p><em>non-displayable</em> characters should be quietly stripped from the output.</p>
  </dd>
  <dt>
    <p>code&nbsp;&nbsp; Indicates that</p>
  </dt>
  <dd>
    <p><em>non-displayable</em> characters should be printed as their octal codes (default setting).</p>
  </dd>
  <dt>
    <p>mark&nbsp;&nbsp; Indicates that</p>
  </dt>
  <dd>
    <p><em>non-displayable</em> characters should be printed as .Q ¡ú ".  "</p>
  </dd>

</dl>
<p>Of course, not all options make sense in all combinations, or at all times. When the current (or new) output encoding is reported, a complete and exact specifier representing the output encoding selected. An example might be .Q jis78-ascii-no212-hwk-code ".  "</p>
<dl class='dl-vertical'>
  <dt>
    <p>pager [ <em>boolean</em> | <em>size</em> ]</p>
  </dt>
  <dd>
    <p>Turns on or off an output pager, sets it's idea of the screen size, or reports the current status.</p><p><em>Size</em> can be a single number indicating the number of lines to be printed between .Q MORE? prompts (usually a few lines less than the total screen height, the default being 20 lines). It can also be two numbers in the form .Q #x# where the first number is the width (in half-width characters; default 80) and the second is the lines-per-page as above.</p><p>If the pager is on, every page of output will result in a .Q MORE? prompt, at which there are four possible responses. A space will allow one more full page to print. A return will allow one more line. A¡Æc¡Ç(for .Q continue ") " will all the rest of the output (for the current command) to proceed without pause, while a¡Æq¡Ç(for .Q quit ") " will flush the output for the current command.</p><p>If supported by the OS, the pager size parameters are set appropriately from the window size upon startup or window resize.</p><p>The default pager status is .Q "off" ".  "</p>
  </dd>
  <dt>
    <p>[local] prompt "<em>string</em>"</p>
  </dt>
  <dd>
    <p>Sets the prompt string. If .Q local is indicated, sets the prompt string for the <em>selected slot</em> only. Otherwise, sets the global default prompt string.</p><p>Prompt strings may have the special %-sequences shown below, with related commands given in parenthesis:</p>
<pre>
   %N ¡Ä the <em>default slot</em>'s file or combo name.
   %n ¡Ä like %N, but any leading path is not shown if a filename.
   %# ¡Ä the <em>default slot</em>'s number.
   %S ¡Ä the¡Ècommand-introduction¡Écharacter (cmdchar)
   %0 ¡Ä the running program's name
   %F='<em>string</em>' ¡Ä <em>string</em> shown if filtering enabled (filter)
   %M='<em>string</em>' ¡Ä <em>string</em> shown if modification enabled (modify)
   %w='<em>string</em>' ¡Ä <em>string</em> shown if word mode on (word)
   %c='<em>string</em>' ¡Ä <em>string</em> shown if case folding on (fold)
   %f='<em>string</em>' ¡Ä <em>string</em> shown if fuzzification on (fuzz).
   %W='<em>string</em>' ¡Ä <em>string</em> shown if wildcard-pat. mode on (wildcard).
   %d='<em>string</em>' ¡Ä <em>string</em> shown if displaying on (display).
   %C='<em>string</em>' ¡Ä <em>string</em> shown if currently entering a command.
   %l='<em>string</em>' ¡Ä <em>string</em> shown if logging is on (log).
   %L ¡Ä the name of the current output log, if any (log)

</pre>
<p>For the tests (%f, etc), you can put¡Æ!¡Çjust after the¡Æ%¡Çto reverse the sense of the test (i.e. %!f="no fuzz").  The reverse of %F is if a filter is installed but disabled (i.e. <em>string</em> will never be shown if there is no filter for the default file). The modify %M works comparably.</p><p>Also, you can use an alternative form for the items that take an argument string. Replacing the quotes with parentheses will treat <em>string</em> as a recursive prompt specifier. For example, the specifier</p>
<pre>
	%C='command'%!C(%f='fuzzy 'search:)

</pre>
<p>would result in a .Q command prompt if entering a command, while it would result in either a .Q "fuzzy search:" or a .Q search: prompt if not entering a command. The parenthesized constructs may be nested.</p><p>Note that the letters of the test constructs are the same as the letters for the .Q !! sequences described in INPUT SYNTAX.</p><p>An example of a nice prompt command might be:</p>
<pre>
        prompt "%C(%0 command)%!C(%w'*'%!f'raw '%n)&gt; "

</pre>
<p>With this prompt specification, the prompt would normally appear as .Q "<em>filename</em>&gt;&nbsp;" but when fuzzification is turned off as .Q "raw <em>filename</em>&gt;&nbsp;" ".  " And if word-preference mode is on, the whole thing has a .Q * prepended. However if a command is being entered, the prompt would then become .Q "<em>name</em> command" ", " where <em>name</em> was the program's name (system dependent, but most likely .Q lookup "). "</p><p>The default prompt format string is .Q "%C(%0 command)%!C(search [%n])&gt; " ".  "</p>
  </dd>
  <dt>
    <p>regex debug [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>Sets the internal regex debugging flag (turn on if you want billions of lines of stuff spewed to your screen).</p>
  </dd>
  <dt>
    <p>saved list size [<em>value</em>]</p>
  </dt>
  <dd>
    <p>During a search, lines that match might be elided from the output due to filters or word-preference mode.  This command sets the number of such lines to remember during any one search, such that they may be later displayed (before the next search) by the <em>show</em> command.</p><p>The default is 100.</p>
  </dd>
  <dt>
    <p>select [ <em>num</em> | <em>name</em> | . ]</p>
  </dt>
  <dd>
    <p>If <em>num</em> is given, sets the <em>default slot</em> to that slot number. If <em>name</em> is given, sets the <em>default slot</em> to the first slot found with a file (or combination) loaded with that name. The incantation .Q "select ." merely sets the default slot to itself, which can be useful in script files where you want to indicate that any subsequent flags changes should work with whatever file was the default at the time the script was <em>source</em>d.</p><p>If no argument is given, simply reports the current <em>default slot</em> (also see the <em>files</em> command).</p><p>In command files loaded via the <em>source</em> command, or as the startup file, commands dealing with per-slot items (flags, local prompt, filters, etc.) work with the file or slot last <em>select</em>ed. The last such selected slot remains selected once the load is complete.</p><p>Interactively, the default slot will become the <em>selected slot</em> for subsequent searches and commands that aren't augmented with an appended .Q ",#" (as described in the INPUT SYNTAX section).</p>
  </dd>
  <dt>
    <p>show</p>
  </dt>
  <dd>
    <p>Shows any lines elided from the previous search (either due to a <em>filter</em> or <em>word-preference mode</em>).</p><p>Will apply any modifications (see the .Q modify command) if modifications are enabled for the file. You can use the .Q !m! line prefix as well with this command (in this case, put the .Q !m! <em>before</em> the command-indicator character).</p><p>The length of the list is controlled by the .Q "saved list size" command.</p>
  </dd>
  <dt>
    <p>source "<em>filename</em>"</p>
  </dt>
  <dd>
    <p>Commands are read from <em>filename</em> and executed.</p><p>In the file, all lines beginning with .Q # are ignored as comments (note that comments must appear on a line by themselves, as .Q # is a reasonable character to have within commands).</p><p>Lines whose first non-blank characters is .Q = ",\c" or .Q + are considered searches, while all other non-blank lines are considered <em>lookup</em> commands. Therefore, there is no need for lines to begin with the command-introduction character. However, leading whitespace is always OK.</p><p>For search lines, take care that any trailing whitespace is deleted if undesired, as trailing whitespace (like all non-leading whitespace) is kept as part of the regular expression.</p><p>Within a command file, commands that modify per-file flags and such always work with the most-recently loaded (or selected) file. Therefore, something along the lines of</p>
<pre>
  load "my.word.list"
  set word on

  load "my.kanji.list"
  set word off
  set local prompt "enter kanji&gt; "

</pre>
<p>would word as might make intuitive sense.</p><p>Since a script file must have a <em>load</em>, or <em>select</em> before any per-slot flag is set, one can use .Q "select ." to facilitate command scripts that are to work with .Q "the current slot" .</p>
  </dd>
  <dt>
    <p>spinner [<em>value</em>]</p>
  </dt>
  <dd>
    <p>Set the value of the spinner (A silly little feature). If set to a non-zero value, will cause a spinner to spin while a file is being checked, one increment per <em>value</em> lines in the file actually checked against the search specifier. Default is off (i.e. zero).</p>
  </dd>
  <dt>
    <p>stats</p>
  </dt>
  <dd>
    <p>Shows information about how many lines of the text file were checked against the last search specifier, and how many lines matched and were printed.</p>
  </dd>
  <dt>
    <p>tag [<em>boolean</em>] ["<em>string</em>"]</p>
  </dt>
  <dd>
    <p>Enable, disable, or set the tag for the <em>selected slot</em>.</p><p>If the slot is not a combination slot, a tag <em>string</em> may be set (the quotes are required).</p><p>If a tag string is set and enabled for a file, the string is prepended to each matching output line printed.</p><p>Unlike the <em>filter</em> and <em>modify</em> commands which automatically enable the function when a parameter is set, a <em>tag</em> is not automatically enabled when set. It can be enabled while being set via .Q 'tag on  or could be enabled subsequently via just .Q "tag on"</p><p>If the selected slot is a combination slot, only the enable/disable status may be changed (on by default). No tag string may be set.</p><p>The reason for the special treatment lies in the special nature of how tags work in conjunction with combination files.</p><p>During a search when the selected slot is a combination slot, each file which is a member of the combination has its per-file flags disabled if their corresponding flag is disabled in the original combination slot. This allows the combination slot's flags to act as a .Q mask to blot out each component file's per-file flags.</p><p>The tag flag, however, is special in that the component file's tag flag is turned <em>on</em> if the combination slot's tag flag is turned on (and, of course, the component file has a tag string registered).</p><p>The intended use of this is that one might set a (disabled) tag to a file, yet <em>direct</em> searches against that file will have no prepended tag. However, if the file is searched as part of a combination slot (and the combination slot's tag flag is on), the tag <em>will</em> be prepended, allowing one to easily understand from which file an output line comes.</p>
  </dd>
  <dt>
    <p>verbose [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>Sets verbose mode on or off, or reports the current status (default on). Many commands reply with a confirmation if verbose mode is turned on.</p>
  </dd>
  <dt>
    <p>version</p>
  </dt>
  <dd>
    <p>Reports the current version of the program.</p>
  </dd>
  <dt>
    <p>[default] wildcard [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>The <em>selected slot</em>'s patterns are considerd wildcard patterns if turned on, regular expressions if turned off. The current status is reported if no argument given. However, if .Q default is specified, the pattern-type to be inherited as the default by subsequently-loaded files is set (or reported).</p><p>Can be temporarily toggled by the .Q "!W!" line prefix.</p><p>When wildcard patterns are selected, the changed metacharacters are: .Q "*" means .Q "any stuff" , means .Q "any one character" , while .Q "+" and .Q "." become unspecial. Other regex items such as .Q "|" , etc. are unchanged.</p><p>What .Q "*" and .Q "?" will actually match depends upon the status of word-mode, as well as on the pattern itself.  If word-mode is on, or if the pattern begins with the start-of-word .Q "&lt;" or .Q "[" , only non-spaces will be matched. Otherwise, any character will be matched.</p><p>In summary,when wildcard mode is on, the input pattern is effected in the following ways:</p>
<pre>
   * is changed to the regular expression .* or \S*
   ? is changed to the regular expression . or \S
   + is changed to the regular expression \+
   . is changed to the regular expression .

</pre>
<p>Because filename patterns are often called .Q "filename globs" , the command .Q glob can be used in place of .Q wildcard .</p>
  </dd>
  <dt>
    <p>[default] word|wordpreference [<em>boolean</em>]</p>
  </dt>
  <dd>
    <p>The selected file's word-preference mode is turned on or off (default is off), or reports the current setting if no argument is specified. However, if .Q default is specified, the value to be inherited as the default by subsequently-loaded files is set (or reported).</p><p>In word-preference mode, entries are searched for <em>as if</em> the search regex had a leading¡Æ&lt;¡Çand a trailing¡Æ&gt;¡Ç, resulting in a list of entries with a whole-word match of the regex. However, if there are none, but there <em>are</em> non-word entries, the non-word entries are shown (the .Q "saved list" is used for this -- see that command). This make it an¡Èif there are whole words like this, show me, otherwise show me whatever you've got¡Émode.</p><p>If there are both word and non-word entries, the non-word entries are remembered in the saved list (rather than any possible filtered entries being remembered there).</p><p>One caveat: if a search matches a line in more than one place, and the first is <em>not</em> a whole-word, while one of the others <em>is</em>, the line will be listed considered non-whole word.  For example, the search¡Öjapan¡×with word-preference mode on will not list an entry such as .Q "/Japanese/language in Japan/" , as the first .Q "Japan" is part of .Q "Japanese" and not a whole word.  If you really need just whole-word entries, use the¡Æ&lt;¡Çand¡Æ&gt;¡Çyourself.</p><p>The mode may be temporarily toggled via the .Q "!w!" line prefix.</p><p>The rules defining what lines are filtered, remembered, discarded, and shown for each permutation of search are rather complex, but the end result is rather intuitive.</p>
  </dd>
  <dt>
    <p>quit | leave | bye  | exit</p>
  </dt>
  <dd>
    <p>Exits the program.</p>
  </dd>

</dl>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STARTUP FILE</h2>
        <div class="sectioncontent">
<p>If the file .Q ~/.lookup is present, commands are read from it during <em>lookup</em> startup.</p><p>The file is read in the same way as the <em>source</em> command reads files (see that entry for more information on file format, etc.)</p><p>However, if there had been files loaded via command-line arguments, commands within the startup file to load files (and their associated commands such as to set per-file flags) are ignored.</p><p>Similarly, any use of the command-line flags -euc, -jis, or -sjis will disable in the startup file the commands dealing with setting the input and/or output encodings.</p><p>The special treatment mentioned in the above two paragraphs only applies to commands within the startup file itself, and does not apply to commands in command-files that might be <em>source</em>d from within the startup file.</p><p>The following is a reasonable example of a startup file:</p>
<pre>
  ## turn verbose mode off during startup file processing
  verbose off

  prompt "%C([%#]%0)%!C(%w'*'%!f'raw '%n)&gt; "
  spinner 200
  pager on

  ## The filter for edict will hit for entries that
  ## have only one English part, and that English part
  ## having a pl or pn designation.
  load ~/lib/edict
  filter "name" #^[^/]+/[^/]*&lt;p[ln]&gt;[^/]*/$#
  highlight on
  word on

  ## The filter for kanjidic will hit for entries without a
  ## frequency-of-use number.  The modify spec will remove
  ## fields with the named initial code (U,N,Q,M,E, and Y)
  load ~/lib/kanjidic
  filter "uncommon" !/&lt;F&#92;d+&gt;/
  modify /( [UNQMEY]\S+)+//g

  ## Use the same filter for my local word file,
  ## but turn off by default.
  load ~/lib/local.words
  filter "name" #^[^/]+/[^/]*&lt;p[ln]&gt;[^/]*/$#
  filter off
  highlight on
  word on
  ## Want a tag for my local words, but only when
  ## accessed via the combo below
  tag off "¡Õ"

  combine "words" 2 0
  select words

  ## turn verbosity back on for interactive use.
  verbose on

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND-LINE ARGUMENTS</h2>
        <div class="sectioncontent">
<p>With the use of a startup file, command-line arguments are rarely needed. In practical use, they are only needed to create an index file, as in:</p>
<pre>
    lookup -write <em>textfile</em>

</pre>
<p>Any command line arguments that aren't flags are taken to be files which are loaded in turn during startup. In this case, any¡Èload¡É,¡Èfilter¡É, etc. commands in the startup file are ignored.</p><p>The following flags are supported:</p>
<dl class='dl-vertical'>
  <dt>
    <p>-help&nbsp;&nbsp; Reports a short help message and exits.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>-write&nbsp;&nbsp; Creates index files for the named files and exits. No</p>
  </dt>
  <dd>
    <p><em>startup file</em> is read.</p>
  </dd>
  <dt>
    <p>-euc&nbsp;&nbsp; Sets the input and output encoding method to EUC (currently the default).</p>
  </dt>
  <dd>
    <p>Exactly the same as the¡Èencoding euc¡Écommand.</p>
  </dd>
  <dt>
    <p>-jis&nbsp;&nbsp; Sets the input and output encoding method to JIS.</p>
  </dt>
  <dd>
    <p>Exactly the same as the¡Èencoding jis¡Écommand.</p>
  </dd>
  <dt>
    <p>-sjis&nbsp;&nbsp; Sets the input and output encoding method to Shift-JIS.</p>
  </dt>
  <dd>
    <p>Exactly the same as the¡Èencoding sjis¡Écommand.</p>
  </dd>
  <dt>
    <p>-v -version</p>
  </dt>
  <dd>
    <p>Prints the version string and exits.</p>
  </dd>
  <dt>
    <p>-norc&nbsp;&nbsp; .br</p>
  </dt>
  <dd>
    <p>Indicates that the startup file should not be read.</p>
  </dd>
  <dt>
    <p>-rc <em>file</em></p>
  </dt>
  <dd>
    <p>The named file is used as the startup file, rather than the default .Q "~/.lookup" ".  " It is an error for the file not to exist.</p>
  </dd>
  <dt>
    <p>-percent <em>num</em></p>
  </dt>
  <dd>
    <p>When an index is built, letters that appear on more than <em>num</em> percent (default 50) of the lines are elided from the index.  The thought is that if a search will have to check most of the lines in a file anyway, one may as well save the large amount of space in the index file needed to represent that information, and the time/space tradeoff shifts, as the indexing of oft-occurring letters provides a diminishing return.</p><p>Smaller indexes can be made by using a smaller number.</p>
  </dd>
  <dt>
    <p>-noindex</p>
  </dt>
  <dd>
    <p>Indicates that any files loaded via the command line should not be loaded with any precomputed index, but recalculated on the fly.</p>
  </dd>
  <dt>
    <p>-verbose</p>
  </dt>
  <dd>
    <p>Has metric tons of stats spewed whenever an index is created.</p>
  </dd>
  <dt>
    <p>-port ###</p>
  </dt>
  <dd>
    <p>For the (undocumented) server configuration only, tells which port to listen on.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPERATING SYSTEM CONSIDERATIONS</h2>
        <div class="sectioncontent">
<p>I/O primitives and behaviors vary with the operating system. On my operating system, I can¡Èread¡Éa file by mapping it into memory, which is a pretty much instant procedure regardless of the size of the file. When I later access that memory, the appropriate sections of the file are automatically read into memory by the operating system as needed.</p><p>This results in <em>lookup</em> starting up and presenting a prompt very quickly, but causes the first few searches that need to check a lot of lines in the file to go more slowly (as lots of the file will need to be read in). However, once the bulk of the file is in, searches will go very fast. The win here is that the rather long file-load times are amortized over the first few (or few dozen, depending upon the situation) searches rather than always faced right at command startup time.</p><p>On the other hand, on an operating system without the mapping ability, <em>lookup</em> would start up very slowly as all the files and indexes are read into memory, but would then search quickly from the beginning, all the file already having been read.</p><p>To get around the slow startup, particularly when many files are loaded, <em>lookup</em> uses <em>lazy loading</em> if it can: a file is not actually read into memory at the time the <em>load</em> command is given. Rather, it will be read when first actually accessed. Furthermore, files are loaded while <em>lookup</em> is idle, such as when waiting for user input. See the <em>files</em> command for more information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REGULAR EXPRESSIONS, A BRIEF TUTORIAL</h2>
        <div class="sectioncontent">
<p><em>Regular expressions</em> (¡Èregex¡Éfor short) are a .Q code used to indicate what kind of text you're looking for. They're how one searches for things in the editors .Q vi ",\c" etc., or with the grep commands. There are differences among the various regex flavors in use -- I'll describe the flavor used by <em>lookup</em> here. Also, in order to be clear for the common case, I might tell a few lies, but nothing too heinous.</p><p>The regex¡Öa¡×means .Q "any line with an¡Æa¡Çin it."</p><p>Simple enough.</p><p>The regex¡Öab¡×means¡Èany line with an¡Æa¡Çimmediately followed by a¡Æb¡Ç¡É.  So the line</p>
<pre>
    I am feeling flabby
</pre>
<p>would .Q match the regex¡Öab¡×because, indeed, there's an .Q ab on that line. But it wouldn't match the line</p>
<pre>
    this line has no a followed _immediately_ by a b

</pre>
<p>because, well, what the lines says is true.</p><p>In most cases, letters and numbers in a regex just mean that you're looking for those letters and numbers in the order given. However, there are some special characters used within a regex.</p><p>A simple example would be a period. Rather than indicate that you're looking for a period, it means .Q "any character" ".  " So the silly regex¡Ö.¡×would mean .Q "any line that has any character on it." Well, maybe not so silly... you can use it to find non-blank lines.</p><p>But more commonly it's used as part of a larger regex. Consider the regex¡Ögray¡×. It wouldn't match the line</p>
<pre>
    The sky was grey and cloudy.

</pre>
<p>because of the different spelling (grey vs. gray). But the regex¡Ögr.y¡×asks for¡Èany line with a¡Æg¡Ç,¡Ær¡Ç, some character, and then a¡Æy¡Ç¡É. So this would get .Q grey and .Q gray ".  "</p><p>A special construct somewhat similar to¡Æ.¡Çwould be the <em>character class</em>. A character class starts with a¡Æ[¡Çand ends with a¡Æ]¡Ç, and will match any character given in between. An example might be</p>
<pre>
    gr[ea]y

</pre>
<p>which would match lines with a¡Æg¡Ç,¡Ær¡Ç, an¡Æe¡Ç<em>or</em> an¡Æa¡Ç, and then a¡Æy¡Ç. Inside a character class you can list as many characters as you want to.</p><p>For example the simple regex¡Öx[0123456789]y¡×would match any line with a digit sandwiched between an¡Æx¡Çand a¡Æy¡Ç.</p><p>The order of the characters within the character class doesn't really matter...¡Ö[513467289]¡×would be the same as¡Ö[0123456789]¡×.</p><p>But as a short cut, you could put¡Ö[0-9]¡×instead of¡Ö[0123456789]¡×. So the character class¡Ö[a-z]¡×would match any lower-case letter, while the character class¡Ö[a-zA-Z0-9]¡×would match any letter or digit.</p><p>The character¡Æ-¡Çis special within a character class, but only if it's not the first thing. Another character that's special in a character class is¡Æ^¡Ç, if it <em>is</em> the first thing. It .Q inverts the class so that it will match any character <em>not</em> listed. The class¡Ö[^a-zA-Z0-9]¡×would match any line with spaces or punctuation on them.</p><p>There are some special short-hand sequences for some common character classes. The sequence¡Ö&#92;d¡×means .Q digit ", " and is the same as¡Ö[0-9]¡×. ¡Ö&#92;w¡×means .Q "word element" and is the same as¡Ö[0-9a-zA-Z_]¡×. ¡Ö&#92;s¡×means .Q "space-type thing" and is the same as¡Ö[ &#92;t]¡×(¡Ö&#92;t¡×means tab).</p><p>You can also use¡Ö&#92;D¡×,¡Ö&#92;W¡×, and¡Ö&#92;S¡×to mean things <em>not</em> a digit, word element, or space-type thing.</p><p>Another special character would be¡Æ?¡Ç. This means .Q "maybe one of whatever was just before it, not is fine too" ".  " In the regex ¡Öbikes? for rent¡×, the .Q whatever would be the¡Æs¡Ç, so this would match lines with either .Q "bikes for rent" or .Q "bike for rent" ".  "</p><p>Parentheses are also special, and can group things together. In the regex</p>
<pre>
big (fat harry)? deal

</pre>
<p>the .Q whatever for the¡Æ?¡Çwould be .Q "fat harry" ".  " But be careful to pay attention to details... this regex would match</p>
<pre>
    I don't see what the big fat harry deal is!
</pre>
<p>but <em>not</em></p>
<pre>
    I don't see what the big deal is!
</pre>
<p>That's because if you take away the .Q whatever of the¡Æ?¡Ç, you end up with</p>
<pre>
    big  deal
</pre>
<p>Notice that there are <em>two</em> spaces between the words, and the regex didn't allow for that. The regex to get either line above would be</p>
<pre>
    big (fat harry )?deal
</pre>
<p>or</p>
<pre>
    big( fat harry)? deal
</pre>
<p>Do you see how they're essentially the same?</p><p>Similar to¡Æ?¡Çis¡Æ*¡Ç, which means .Q "any number, including none, of whatever's right in front" ".  " It more or less means that whatever is tagged with¡Æ*¡Çis allowed, but not required, so something like</p>
<pre>
    I (really )*hate peas
</pre>
<p>would match .Q "I hate peas" ",\c" etc.</p><p>Similar to both¡Æ?¡Çand¡Æ*¡Çis¡Æ+¡Ç, which means .Q "at least one of whatever just in front, but more is fine too" ".  " The regex¡Ömis+pelling¡×would match .Q "mi<em>s</em>pelling" ",\c" etc. Actually, it's just the same as¡Ömiss*pelling¡×but more simple to type. The regex¡Öss*¡×means¡Èan¡Æs¡Ç, followed by zero or more¡Æs¡Ç¡É, while¡Ös+¡×means .Q "one or more¡Æs¡Ç" ".  " Both really the same.</p><p>The special character¡Æ|¡Çmeans .Q or ".  " Unlike¡Æ+¡Ç,¡Æ*¡Ç, and¡Æ?¡Çwhich act on the thing <em>immediately</em> before, the¡Æ|¡Çis more .Q global ".  "</p>
<pre>
    give me (this|that) one
</pre>
<p>Would match lines that had .Q "give me this one" or .Q "give me that one" in them.</p><p>You can even combine more than two:</p>
<pre>
    give me (this|that|the other) one
</pre>
<p>How about:</p>
<pre>
    [Ii]t is a (nice |sunny |bright |clear )*day
</pre>
<p>Here, the .Q whatever immediately before the¡Æ*¡Çis</p>
<pre>
    (nice |sunny |bright |clear )
</pre>
<p>So this regex would match all the following lines:</p>
<pre>
   <em>It is a day</em>.
   I think <em>it is a nice day</em>.
   <em>It is a clear sunny day</em> today.
   If <em>it is a clear sunny nice sunny sunny sunny bright day</em> then....
</pre>
<p>Notice how the¡Ö[Ii]t¡×matches either .Q It or .Q it "?  "</p><p>Note that the above regex would also match</p>
<pre>
   fru<em>it is a day</em>
</pre>
<p>because it indeed fulfills all requirements of the regex, even though the .Q it is really part of the word .Q fruit ".  " To answer concerns like this, which are common, are¡Æ&lt;¡Çand¡Æ&gt;¡Ç, which mean .Q "word break" ".  " The regex¡Ö&lt;it¡×would match any line with .Q it <em>beginning a word</em>,  while¡Öit&gt;¡×would match any line with .Q it <em>ending a word</em>.   And, of course,¡Ö&lt;it&gt;¡×would match any line with <em>the word\c</em> in it.</p><p>Going back to the regex to find grey/gray, that would make more sense, then, as</p>
<pre>
    &lt;gr[ae]y&gt;
</pre>
<p>which would match only the <em>words .Q grey</em> and .Q gray ".  "</p><p>Somewhat similar are¡Æ^¡Çand¡Æ$¡Ç, which mean .Q "beginning of line" and .Q "end of line" ", " respectively (but, not in a character class, of course). So the regex¡Ö^fun¡×would find any line that begins with the letters .Q fun ", " while¡Ö^fun&gt;¡×would find any line that begins with the <em>word .Q fun .  </em> ¡Ö^fun$¡×would find any line that was exactly .Q fun ".  "</p><p>Finally,¡Ö^&#92;s*fun&#92;s*$¡×would match any line that .Q fun exactly, but perhaps also had leading and/or trailing whitespace.</p><p>That's pretty much it. There are more complex things, some of which I'll mention in the list below, but even with these few simple constructs one can specify very detailed and complex patterns.</p><p>Let's summarize some of the special things in regular expressions:</p>
<pre>
Items that are basic units:
  <em>char</em>      any non-special character matches itself.
  &#92;<em>char</em>     special chars, when proceeded by &#92;, become non-special.
  .         Matches any one character (except &#92;n).
  &#92;n        Newline
  &#92;t        Tab.
  &#92;r        Carriage Return.
  &#92;f        Formfeed.
  &#92;d        Digit. Just a short-hand for [0-9].
  &#92;w        Word element. Just a short-hand for [0-9a-zA-Z_].
  &#92;s        Whitespace. Just a short-hand for [&#92;t &#92;n&#92;r&#92;f].
  &#92;## &#92;###  Two or three digit octal number indicating a single byte.
  [<em>chars</em>]   Matches a character if it's one of the characters listed.
  [^<em>chars</em>]  Matches a character if it's not one of the ones listed.

  The &#92;<em>char</em> items above can be used within a character class,
  but not the items below.

  &#92;D        Anything not &#92;d.
  &#92;W        Anything not &#92;w.
  &#92;S        Anything not &#92;s.
  &#92;a        Any ASCII character.
  &#92;A        Any multibyte character.
  &#92;k        Any (not half-width) katakana character (including ¡¼).
  &#92;K        Any character not &#92;k (except &#92;n).
  &#92;h        Any hiragana character.
  &#92;H        Any character not &#92;h (except &#92;n).
  (<em>regex</em>)   Parens make the <em>regex</em> one unit.
  (?:<em>regex</em>)   [from perl5] Grouping-only parens -- can't use for &#92;# (below)
  &#92;c        Any JISX0208 kanji (kuten rows 16-84)
  &#92;C        Any character not &#92;c (except &#92;n).
  &#92;#        Match whatever was matched by the #th paren from the left.

With¡È¡ù¡Éto indicate one¡Èunit¡Éas above, the following may be used:

  ¡ù?       A ¡ù allowed, but not required.
  ¡ù+       At least one ¡ù required, but more ok.
  ¡ù*       Any number of ¡ù ok, but none required.

There are also ways to match¡Èsituations¡É:

  &#92;b        A word boundary.
  &lt;         Same as &#92;b.
  &gt;         Same as &#92;b.
  ^         Matches the beginning of the line.
  $         Matches the end of the line.

Finally, the¡Èor¡Éis

  <em>reg1</em>|<em>reg2</em> Match if either <em>reg1</em> or <em>reg2</em> match.

Note that¡È&#92;k¡Éand the like aren't allowed in character classes, so
something such as¡Ö[&#92;k&#92;h]¡×to try to get all kana won't work.
Use ¡Ö(&#92;k|&#92;h)¡×instead.

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Needs full support for half-width katakana and JIS X 0212-1990.</p><p>Non-EUC (JIS & SJIS) items not tested well.</p><p>Probably won't work on non-UNIX systems.</p><p>Screen control codes (for clear and highlight commands) are hard-coded for ANSI/VT100/kterm.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Jeffrey Friedl (jfriedl@nff.ncl.omron.co.jp)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INFO</h2>
        <div class="sectioncontent">
<p>Jim Breen's text files <em>edict</em> and <em>kanjidic</em> and their documentation can be found in .Q pub/nihongo on ftp.cc.monash.edu.au (130.194.1.106</p><p>Information on input and output encoding and codes can be found in Ken Lunde's <em>Understanding Japanese Information Processing</em> (ÆüËÜ¸ì¾ðÊó½èÍý) published by O'Reilly and Associates. ISBN 1-56592-043-0.  There is also a Japanese edition published by SoftBank.</p><p>A program to convert files among the various encoding methods is Dr. Ken Lunde's .IR jconv , which can also be found on ftp.cc.monash.edu.au. <em>Jconv</em> is also useful for converting halfwidth katakana (which <em>lookup</em> doesn't yet support well) to full-width.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lookbib.1.html"><span aria-hidden="true">&larr;</span> lookbib.1: Search bibliographic databases</a></li>
   <li class="next"><a href="loook.1.html">loook.1: Search in openoffice files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
