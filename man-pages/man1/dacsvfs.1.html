<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dacsvfs: Access objects through the dacs virtual filestore</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Access objects through the dacs virtual filestore">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dacsvfs (1) manual">
  <meta name="twitter:description" content="Access objects through the dacs virtual filestore">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-dacsvfs-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/dacsvfs.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dacsvfs (1) manual" />
  <meta property="og:description" content="Access objects through the dacs virtual filestore" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-dacsvfs-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dacsvfs<small> (1)</small></h1>
        <p class="lead">Access objects through the dacs virtual filestore</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dacsvfs.1.html">
      <span itemprop="name">dacsvfs: Access objects through the dacs virtual filestore</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dacsvfs.1.html">
      <span itemprop="name">dacsvfs: Access objects through the dacs virtual filestore</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dacsvfs</strong> [<em>\m[blue]</em><strong>dacsoptions</strong>\m[]\s-2\u[1]\d\s+2] [<em>item_type</em>&nbsp;|&nbsp;<em>vfs_uri</em>&nbsp;|&nbsp;enabled] [<strong>-F&nbsp;</strong><strong></strong><em>sep</em>] [<em>op</em>&nbsp;[<em>arg</em>...]]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program is part of the <strong>DACS</strong> suite.</p><p>The <strong>dacsvfs</strong> utility is an interface to the <strong>DACS</strong> virtual filestore. It provides a way to examine, change, and delete items independently of how and where they are stored. See \m[blue]<a href="../man5/dacs.vfs.5.html"><strong>dacs.vfs</strong>(5)</a></strong>\m[]\s-2\u[2]\d\s+2 and the \m[blue]<strong>VFS</strong>\m[]\s-2\u[3]\d\s+2 directive for additional information.</p><p>To perform a virtual filestore operation, either an <em>item_type</em> or a URI argument must be provided to identify the filestore. The former is used to find the applicable \m[blue]<strong>VFS</strong>\m[]\s-2\u[3]\d\s+2 directive that has been configured for the specified jurisdiction (see \m[blue]<strong>dacs.conf</strong>(5)</strong>\m[]\s-2\u[4]\d\s+2).</p><p>As a special case, the word <strong>enabled</strong> can be specified; a list of enabled store names is printed to stdout and the program terminates:</p>
<pre>
% dacsvfs -q -uj SomeJurisdiction enabled
</pre>
<p>This program is also available as a <strong>DACS</strong> web service, \m[blue]<a href="../man8/dacs_vfs.8.html"><strong>dacs_vfs</strong>(8)</a></strong>\m[]\s-2\u[5]\d\s+2.</p><p><strong>Security</strong></p><p>Only the <strong>DACS</strong> administrator should be able to successfully run this program. Because <strong>DACS</strong> keys and configuration files must be limited to the administrator, this will normally be the case, but a careful administrator will deny access to all other users.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-F </strong><strong></strong><em>sep</em></p><p>Sets the field separator character to <em>sep</em>. The default is a colon. This is used by the load and dump operations.</p><p>If present, the <em>op</em> argument specifies the operation to be performed on the filestore. If it is omitted, the program enters interactive mode where most of the same operations are available (type "<strong>help</strong>" for assistance). The following operations are available:</p><p>delete [<em>key</em>]</p><p>Delete the item, or the item identified by <em>key</em>.</p><p>dump</p><p>Write to stdout the contents of the filestore as <em>key</em>, followed by the field separator character, followed by <em>value</em>, one pair per line.</p><p>edit [<em>key</em>]</p><p>Interactively edit the item, or the value of the item identified by <em>key</em>. When available, the environment variable <strong>EDITOR</strong> is used to determine which editor to use, otherwise a default editor specified at compile time is used. After editing, the user is asked for confirmation. If the operation is not aborted, the item or its value will be updated.</p><p>exists [<em>key</em>]</p><p>Test if the item, or the item identified by <em>key</em>, exists. The outcome is reported to stdout.</p><p>get [<em>key</em>]</p><p>Retrieve the item, or the value of the item identified by <em>key</em>. If successful, the result is printed to stdout.</p><p>getsize [<em>key</em>]</p><p>Determine the size of the item, or the size of the value of the item identified by <em>key</em>. If successful, the result is printed to stdout.</p><p>help</p><p>Prints a usage summary to stderr.</p><p>list</p><p>Lists the names of all items (or keys) associated with the <em>item_type</em>.</p><p>load</p><p>Read key/value pairs from stdin, one pair per line. The end of the key is denoted by the field separator character, which may be repeated. Whitespace may appear on either side of the field separator character (unless the field separator is a whitespace character). For each <em>key</em> do a put operation with the specified <em>value</em>. This is intended to be a quick way to initialize a filestore or make many changes.</p><p>put [<em>key</em>]</p><p>Replace the item, or the value of the item identified by <em>key</em>. The value is read from the standard input.</p><p>putval <em>key</em> <em>value</em></p><p>Replace the item, or the value of the item identified by <em>key</em>, and set it to <em>value</em>.</p><p>rename [<em>oldkey</em>] <em>newkey</em></p><p>Rename the item, or the value of the item identified by <em>oldkey</em> to <em>newkey</em>.</p><p>update [<em>key</em>]</p><p>This is a synonym for the edit operation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To store the DTDs used by <strong>DACS</strong> in a database rather than in a collection of files, you must configure an appropriate VFS directive and copy the files from the <strong>DACS</strong> distribution into the database. Because it is read-only, this database can be shared by all federations and jurisdictions on the host.</p><p>The first step is to select the type of database to use and decide where to put it. This example will use a Berkeley DB database (<strong>DACS</strong> must have been built with support for whichever database is used) and put it in /usr/local/dacs/federations/dtds.db. The URI to express this in the VFS syntax looks like this:</p>
<pre>
[dtds]dacs-db:/usr/local/dacs/federations/dtds.db
</pre>
<p>The next step is to create the database and load it with the DTDs. A simple shell script makes this easy to do. From the dtd-xsd directory of the <strong>DACS</strong> distribution, and replacing example.com with the URI of a <strong>DACS</strong> jurisdiction on your host, execute:</p>
<pre>
#! /bin/sh

for i in *.dtd
do
  dacsvfs -u example.com -q &#92;
      &apos;[dtds]dacs-db:/usr/local/dacs/federations/dtds.db&apos; put $i &lt; $i
done
</pre>
<p>To configure <strong>DACS</strong> to use the database, a VFS directive must be put in an appropriate place in dacs.conf so that it overrides the current configuration:</p>
<pre>
VFS "[dtds]dacs-db:/usr/local/dacs/federations/dtds.db"
</pre>
<p>To list the contents of the database you can do:</p>
<pre>
% dacsvfs -u example.com -q &#92;
    &apos;[dtds]dacs-db:/usr/local/dacs/federations/dtds.db&apos; list
</pre>
<p>or since the VFS directive has been configured, simply:</p>
<pre>
% dacsvfs -u example.com -q dtds list
</pre>
<p>If you omit the <strong>-q</strong> flag, various debugging output will appear, including some feedback that your new database is actually being used by <strong>DACS</strong>.</p><p><strong>Note</strong></p><p>If you copy any <strong>DACS</strong> resources, such as its DTDs, remember that when you upgrade your <strong>DACS</strong> software you&apos;ll need to make new copies because these resources may have changed.</p><p>Other resources used by <strong>DACS</strong> would be configured similarly. The load and dump operations can be particularly useful for this. If the file /tmp/roles associates roles with identities (e.g., as used by \m[blue]<a href="../man1/dacscheck.1.html"><strong>dacscheck</strong>(1)</a></strong>\m[]\s-2\u[6]\d\s+2) as follows:</p>
<pre>
bobo:users
auggie:admin,users
harley:guest
</pre>
<p>then the following command initializes or updates a database from that file:</p>
<pre>
% dacsvfs -u example.com -q -F ":" &#92;
    &apos;[myroles]dacs-db:/usr/local/myapp/roles.db&apos; &lt; /tmp/roles
</pre>
<p>The URI [myroles]dacs-db:/usr/local/myapp/roles.db can then be used with <strong>dacscheck</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>The program exits 0 if everything was fine, 1 if an error occurred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>There should be a caching mechanism that could be used with expensive storage types (i.e., those that are relatively slow to access, such as the http scheme).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dacsvfs&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<a href="../man8/dacs_vfs.8.html"><strong>dacs_vfs</strong>(8)</a></strong>\m[]\s-2\u[5]\d\s+2, \m[blue]<strong>dacs.conf</strong>(5)</strong>\m[]\s-2\u[4]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Distributed Systems Software (\m[blue]<strong>www.dss.ca</strong>\m[]\s-2\u[7]\d\s+2)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright2003-2012 Distributed Systems Software. See the \m[blue]<strong>LICENSE</strong>\m[]\s-2\u[8]\d\s+2 file that accompanies the distribution for licensing information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>dacsoptions</p><p>http://dacs.dss.ca/man/dacs.1.html#dacsoptions</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man5/dacs.vfs.5.html"><strong>dacs.vfs</strong>(5)</a></p><p>http://dacs.dss.ca/man/dacs.vfs.5.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>VFS</p><p>http://dacs.dss.ca/man/dacs.conf.5.html#VFS</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p><strong>dacs.conf</strong>(5)</p><p>http://dacs.dss.ca/man/dacs.conf.5.html</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p><a href="../man8/dacs_vfs.8.html"><strong>dacs_vfs</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_vfs.8.html</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p><a href="../man1/dacscheck.1.html"><strong>dacscheck</strong>(1)</a></p><p>http://dacs.dss.ca/man/dacscheck.1.html</p>
  </dd>
  <dt>
     7.
  </dt>
  <dd>
    <p>www.dss.ca</p><p>http://www.dss.ca</p>
  </dd>
  <dt>
     8.
  </dt>
  <dd>
    <p>LICENSE</p><p>http://dacs.dss.ca/man/../misc/LICENSE</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dacsversion.1.html"><span aria-hidden="true">&larr;</span> dacsversion.1: Display version information</a></li>
   <li class="next"><a href="dact.1.html">dact.1: Compress or expand a file or stream <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
