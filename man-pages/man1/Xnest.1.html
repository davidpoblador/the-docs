<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Xnest: A nested x server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A nested x server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Xnest (1) manual">
  <meta name="twitter:description" content="A nested x server">
  <meta name="twitter:image" content="https://www.carta.tech/images/xnest-Xnest-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/Xnest.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Xnest (1) manual" />
  <meta property="og:description" content="A nested x server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xnest-Xnest-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Xnest<small> (1)</small></h1>
        <p class="lead">A nested x server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/Xnest.1.html">
      <span itemprop="name">Xnest: A nested x server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xnest/">
      <span itemprop="name">xnest</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/Xnest.1.html">
      <span itemprop="name">Xnest: A nested x server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>Xnest</strong> [ <em>options</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Xnest</strong> is both an X client and an X server. <strong>Xnest</strong> is a client of the real server which manages windows and graphics requests on its behalf. <strong>Xnest</strong> is a server to its own clients. <strong>Xnest</strong> manages windows and graphics requests on their behalf. To these clients, <strong>Xnest</strong> appears to be a conventional server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>Xnest</strong> supports all standard options of the sample server implementation. For more details, please see <a href="../man1/Xserver.1.html"><strong>Xserver</strong>(1)</a>. The following additional arguments are supported as well.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-display </strong><em>string</em></p>
  </dt>
  <dd>
    <p>This option specifies the display name of the real server that <strong>Xnest</strong> should try to connect to. If it is not provided on the command line, <strong>Xnest</strong> will read the <em>DISPLAY</em> environment variable in order to find out this information.</p>
  </dd>
  <dt>
    <p><strong>-sync</strong></p>
  </dt>
  <dd>
    <p>This option tells <strong>Xnest</strong> to synchronize its window and graphics operations with the real server. This is a useful option for debugging, but it will slow down <strong>Xnest</strong>'s performance considerably. It should not be used unless absolutely necessary.</p>
  </dd>
  <dt>
    <p><strong>-full</strong></p>
  </dt>
  <dd>
    <p>This option tells <strong>Xnest</strong> to utilize full regeneration of real server objects and reopen a new connection to the real server each time the nested server regenerates. The sample server implementation regenerates all objects in the server when the last client of this server terminates. When this happens, <strong>Xnest</strong> by default maintains the same top-level window and the same real server connection in each new generation. If the user selects full regeneration, even the top-level window and the connection to the real server will be regenerated for each server generation.</p>
  </dd>
  <dt>
    <p><strong>-class </strong><em>string</em></p>
  </dt>
  <dd>
    <p>This option specifies the default visual class of the nested server. It is similar to the <strong>-cc</strong> option from the set of standard options except that it will accept a string rather than a number for the visual class specification. The <em>string</em> must be one of the following six values: <strong>StaticGray</strong>, <strong>GrayScale</strong>, <strong>StaticColor</strong>, <strong>PseudoColor</strong>, <strong>TrueColor</strong>, or <strong>DirectColor</strong>. If both the <strong>-class</strong> and <strong>-cc</strong> options are specified, the last instance of either option takes precedence. The class of the default visual of the nested server need not be the same as the class of the default visual of the real server, but it must be supported by the real server. Use <a href="../man1/xdpyinfo.1.html"><strong>xdpyinfo</strong>(1)</a> to obtain a list of supported visual classes on the real server before starting <strong>Xnest</strong>. If the user chooses a static class, all the colors in the default color map will be preallocated. If the user chooses a dynamic class, colors in the default color map will be available to individual clients for allocation.</p>
  </dd>
  <dt>
    <p><strong>-depth </strong><em>int</em></p>
  </dt>
  <dd>
    <p>This option specifies the default visual depth of the nested server. The depth of the default visual of the nested server need not be the same as the depth of the default visual of the real server, but it must be supported by the real server. Use <a href="../man1/xdpyinfo.1.html"><strong>xdpyinfo</strong>(1)</a> to obtain a list of supported visual depths on the real server before starting <strong>Xnest</strong>.</p>
  </dd>
  <dt>
    <p><strong>-sss</strong></p>
  </dt>
  <dd>
    <p>This option tells <strong>Xnest</strong> to use the software screen saver. By default, <strong>Xnest</strong> will use the screen saver that corresponds to the hardware screen saver in the real server. Of course, even this screen saver is software-generated since <strong>Xnest</strong> does not control any actual hardware. However, it is treated as a hardware screen saver within the sample server code.</p>
  </dd>
  <dt>
    <p><strong>-geometry </strong><em>W</em><strong>x</strong><em>H</em><strong>+</strong><em>X</em><strong>+</strong><em>Y</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option specifies the geometry parameters for the top-level <strong>Xnest</strong> window. See &ldquo;GEOMETRY SPECIFICATIONS&rdquo; in <strong>X</strong>(7) for a discusson of this option's syntax. This window corresponds to the root window of the nested server. The width <em>W</em> and height <em>H</em> specified with this option will be the maximum width and height of each top-level <strong>Xnest</strong> window. <strong>Xnest</strong> will allow the user to make any top-level window smaller, but it will not actually change the size of the nested server root window. <strong>Xnest</strong> does not yet support the RANDR extension for resizing, rotation, and reflection of the root window. If this option is not specified, <strong>Xnest</strong> will choose <em>W</em> and <em>H</em> to be 3/4ths the dimensions of the root window of the real server.</p>
  </dd>
  <dt>
    <p><strong>-bw </strong><em>int</em></p>
  </dt>
  <dd>
    <p>This option specifies the border width of the top-level <strong>Xnest</strong> window. The integer parameter <em>int</em> must be positive. The default border width is 1.</p>
  </dd>
  <dt>
    <p><strong>-name </strong><em>string</em></p>
  </dt>
  <dd>
    <p>This option specifies the name of the top-level <strong>Xnest</strong> window as <em>string</em>. The default value is the program name.</p>
  </dd>
  <dt>
    <p><strong>-scrns </strong><em>int</em></p>
  </dt>
  <dd>
    <p>This option specifies the number of screens to create in the nested server. For each screen, <strong>Xnest</strong> will create a separate top-level window. Each screen is referenced by the number after the dot in the client display name specification. For example, <strong>xterm -display :1.1</strong> will open an <a href="../man1/xterm.1.html"><strong>xterm</strong>(1)</a> client in the nested server with the display number <strong>:1</strong> on the second screen. The number of screens is limited by the hard-coded constant in the server sample code, which is usually 3.</p>
  </dd>
  <dt>
    <p><strong>-install</strong></p>
  </dt>
  <dd>
    <p>This option tells <strong>Xnest</strong> to do its own color map installation by bypassing the real window manager. For it to work properly, the user will probably have to temporarily quit the real window manager. By default, <strong>Xnest</strong> will keep the nested client window whose color map should be installed in the real server in the <em>WM_COLORMAP_WINDOWS</em> property of the top-level <strong>Xnest</strong> window. If this color map is of the same visual type as the root window of the nested server, <strong>Xnest</strong> will associate this color map with the top-level <strong>Xnest</strong> window as well. Since this does not have to be the case, window managers should look primarily at the <em>WM_COLORMAP_WINDOWS</em> property rather than the color map associated with the top-level <strong>Xnest</strong> window. Unfortunately, window managers are not very good at doing that yet so this option might come in handy.</p>
  </dd>
  <dt>
    <p><strong>-parent </strong><em>window_id</em></p>
  </dt>
  <dd>
    <p>This option tells <strong>Xnest</strong> to use <em>window_id</em> as the root window instead of creating a window.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTENDED DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Starting up <strong>Xnest</strong> is just as simple as starting up <a href="../man1/xclock.1.html"><strong>xclock</strong>(1)</a> from a terminal emulator. If a user wishes to run <strong>Xnest</strong> on the same workstation as the real server, it is important that the nested server is given its own listening socket address. Therefore, if there is a server already running on the user's workstation, <strong>Xnest</strong> will have to be started up with a new display number. Since there is usually no more than one server running on a workstation, specifying \(oq<strong>Xnest :1</strong>\(cq on the command line will be sufficient for most users. For each server running on the workstation, the display number needs to be incremented by one. Thus, if you wish to start another <strong>Xnest</strong>, you will need to type \(oq<strong>Xnest :2</strong>\(cq on the command line.</p><p>To run clients in the nested server, each client needs to be given the same display number as the nested server. For example, \(oq<strong>xterm -display :1</strong>\(cq will start up an <strong>xterm</strong> process in the first nested server and \(oq<strong>xterm -display :2</strong>\(cq will start an <strong>xterm</strong> in the second nested server from the example above. Additional clients can be started from these <strong>xterm</strong>s in each nested server.</p><h3>Xnest as a client</h3>
<p><strong>Xnest</strong> behaves and looks to the real server and other real clients as another real client. It is a rather demanding client, however, since almost any window or graphics request from a nested client will result in a window or graphics request from <strong>Xnest</strong> to the real server. Therefore, it is desirable that <strong>Xnest</strong> and the real server are on a local network, or even better, on the same machine. <strong>Xnest</strong> assumes that the real server supports the SHAPE extension. There is no way to turn off this assumption dynamically. <strong>Xnest</strong> can be compiled without the SHAPE extension built in, in which case the real server need not support it. Dynamic SHAPE extension selection support may be considered in further development of <strong>Xnest</strong>.</p><p>Since <strong>Xnest</strong> need not use the same default visual as the the real server, the top-level window of the <strong>Xnest</strong> client always has its own color map. This implies that other windows' colors will not be displayed properly while the keyboard or pointer focus is in the <strong>Xnest</strong> window, unless the real server has support for more than one installed color map at any time. The color map associated with the top window of the <strong>Xnest</strong> client need not be the appropriate color map that the nested server wants installed in the real server. In the case that a nested client attempts to install a color map of a different visual from the default visual of the nested server, <strong>Xnest</strong> will put the top window of this nested client and all other top windows of the nested clients that use the same color map into the <em>WM_COLORMAP_WINDOWS</em> property of the top-level <strong>Xnest</strong> window on the real server. Thus, it is important that the real window manager that manages the <strong>Xnest</strong> top-level window looks at the <em>WM_COLORMAP_WINDOWS</em> property rather than the color map associated with the top-level <strong>Xnest</strong> window. Since most window managers don't yet appear to implement this convention properly, <strong>Xnest</strong> can optionally do direct installation of color maps into the real server bypassing the real window manager. If the user chooses this option, it is usually necessary to temporarily disable the real window manager since it will interfere with the <strong>Xnest</strong> scheme of color map installation.</p><p>Keyboard and pointer control procedures of the nested server change the keyboard and pointer control parameters of the real server. Therefore, after <strong>Xnest</strong> is started up, it will change the keyboard and pointer controls of the real server to its own internal defaults.</p>
<h3>Xnest as a server</h3>
<p><strong>Xnest</strong> as a server looks exactly like a real server to its own clients. For the clients, there is no way of telling if they are running on a real or a nested server.</p><p>As already mentioned, <strong>Xnest</strong> is a very user-friendly server when it comes to customization. <strong>Xnest</strong> will pick up a number of command-line arguments that can configure its default visual class and depth, number of screens, etc.</p><p>The only apparent intricacy from the users' perspective about using <strong>Xnest</strong> as a server is the selection of fonts. <strong>Xnest</strong> manages fonts by loading them locally and then passing the font name to the real server and asking it to load that font remotely. This approach avoids the overload of sending the glyph bits across the network for every text operation, although it is really a bug. The consequence of this approach is that the user will have to worry about two different font paths &ndash; a local one for the nested server and a remote one for the real server &ndash; since <strong>Xnest</strong> does not propagate its font path to the real server. The reason for this is because real and nested servers need not run on the same file system which makes the two font paths mutually incompatible. Thus, if there is a font in the local font path of the nested server, there is no guarantee that this font exists in the remote font path of the real server. The <a href="../man1/xlsfonts.1.html"><strong>xlsfonts</strong>(1)</a> client, if run on the nested server, will list fonts in the local font path and, if run on the real server, will list fonts in the remote font path. Before a font can be successfully opened by the nested server, it has to exist in local and remote font paths. It is the users' responsibility to make sure that this is the case.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUTURE DIRECTIONS</h2>
        <div class="sectioncontent">
<p>Make dynamic the requirement for the SHAPE extension in the real server, rather than having to recompile <strong>Xnest</strong> to turn this requirement on and off.</p><p>Perhaps there should be a command-line option to tell <strong>Xnest</strong> to inherit the keyboard and pointer control parameters from the real server rather than imposing its own.</p><p><strong>Xnest</strong> should read a customization input file to provide even greater freedom and simplicity in selecting the desired layout.</p><p>There is no support for backing store and save unders, but this should also be considered.</p><p>The proper implementation of fonts should be moved into the <em>os</em> layer.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Doesn't run well on servers supporting different visual depths.</p><p>Still crashes randomly.</p><p>Probably has some memory leaks.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Davor Matic, MIT X Consortium</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Xnest&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/Xserver.1.html"><strong>Xserver</strong>(1)</a>, <a href="../man1/xdpyinfo.1.html"><strong>xdpyinfo</strong>(1)</a>, <strong>X</strong>(7)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="Xmark.1.html"><span aria-hidden="true">&larr;</span> Xmark.1: Summarize x11perf results</a></li>
   <li class="next"><a href="Xorg.1.html">Xorg.1: X11r7 x server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
