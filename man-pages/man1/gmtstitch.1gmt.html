<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gmtstitch: Join line segments whose end points match within tolerance</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Join line segments whose end points match within tolerance">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gmtstitch (1gmt) manual">
  <meta name="twitter:description" content="Join line segments whose end points match within tolerance">
  <meta name="twitter:image" content="https://www.carta.tech/images/gmt-gmtstitch-1gmt.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1gmt/gmtstitch.1gmt.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gmtstitch (1gmt) manual" />
  <meta property="og:description" content="Join line segments whose end points match within tolerance" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gmt-gmtstitch-1gmt.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gmtstitch<small> (1gmt)</small></h1>
        <p class="lead">Join line segments whose end points match within tolerance</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/gmtstitch.1gmt.html">
      <span itemprop="name">gmtstitch: Join line segments whose end points match within tolerance</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gmt/">
      <span itemprop="name">gmt</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/gmtstitch.1gmt.html">
      <span itemprop="name">gmtstitch: Join line segments whose end points match within tolerance</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>gmtstitch</strong> [ <em>infiles</em> ] [ <strong>-C</strong>[<em>closed</em>] ] [ <strong>-D</strong>[<em>template</em>] ] [ <strong>-H</strong>[<strong>i</strong>][<em>nrec</em>] ] [ <strong>-L</strong>[<em>linkfile</em>] ] [ <strong>-Q</strong>[<em>template</em>] ] [ <strong>-T</strong><em>cutoff</em>[<strong>m</strong>|<strong>c</strong>|<strong>e</strong>|<strong>E</strong>|<strong>k</strong>|<strong>K</strong>][/<em>nn_dist</em>] ] [ <strong>-V</strong> ] [ <strong>-:</strong>[<strong>i</strong>|<strong>o</strong>] ] [ <strong>-b</strong>[<strong>i</strong>|<strong>o</strong>][<strong>s</strong>|<strong>S</strong>|<strong>d</strong>|<strong>D</strong>[<em>ncol</em>]|<strong>c</strong>[<em>var1</em><strong>/</strong><em>...</em>]] ] [ <strong>-bo</strong>[<strong>s</strong>|<strong>S</strong>|<strong>d</strong>|<strong>D</strong>[<em>ncol</em>]|<strong>c</strong>[<em>var1</em><strong>/</strong><em>...</em>]] ] [ <strong>-m</strong>[<strong>i</strong>|<strong>o</strong>][<em>flag</em>] ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>gmtstitch</strong> reads one or more data files (which may be multisegment files; see <strong>-m</strong>) and examines the coordinates of the end points of all line segments.  If a pair of end points are identical or closer to each other than the specified separation tolerance then the two line segments are joined into a single segment.  The process repeats until all the remaining endpoints no longer pass the tolerance test; the resulting segments are then written out to standard output.  It it is not clear what the separation tolerance should be then use <strong>-L</strong> to get a list of all separation distances and analyze them to determine a suitable cutoff.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>file(s)</em></p>
  </dt>
  <dd>
    <p>One of more data files.  If none are supplied then we read standard input.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-C</strong></p>
  </dt>
  <dd>
    <p>Write all the closed polygons to <em>closed</em> [gmtstitch_closed.d] and all other segments as they are to stdout.  No stitching takes place.  Use <strong>-T</strong><em>cutoff</em> to set a minimum separation [0], and if <em>cutoff</em> is &gt; 0 then we also close the polygons on output.</p>
  </dd>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>For multiple segment data, dump each segment to a separate output file [Default writes a multiple segment file to stdout].  Append a format template for the individual file names; this template <strong>must</strong> contain a C format specifier that can format an integer argument (the segment number); this is usually %d but could be %8.8d which gives leading zeros, etc. Optionally, it may also contain the format %c <em>before</em> the integer; this will then be replaced by C (closed) or O (open) to indicate segment type. [Default is gmtstitch_segment_%d.d].  Note that segment headers will be written in either case. For composite segments, a generic segment header will be written and the segment headers of individual pieces will be written out as comments to make it possible to identify where the stitched pieces came from.</p>
  </dd>
  <dt>
    <p><strong>-H</strong></p>
  </dt>
  <dd>
    <p>Input file(s) has header record(s).  If used, the default number of header records is <strong>N_HEADER_RECS</strong>. Use <strong>-Hi</strong> if only input data should have header records [Default will write out header records if the input data have them]. Blank lines and lines starting with # are always skipped.</p>
  </dd>
  <dt>
    <p><strong>-L</strong></p>
  </dt>
  <dd>
    <p>Writes the link information to the specified file [links.d]. For each segment we write the original segment id, and for the beginning and end point of the segment we report the id of the closest segment, whether it is the beginning (B) or end (E) point that is closest, and the distance between those points in units determined by <strong>-T</strong>.</p>
  </dd>
  <dt>
    <p><strong>-Q</strong></p>
  </dt>
  <dd>
    <p>Used with <strong>-D</strong> to a list file with the names of the individual output files.  Optionally, append a filename template for the individual file names; this template <strong>may</strong> contain a C format specifier that can format an character (C or O for closed or open, respectively). [Default is gmtstitch_list.d].</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Specifies the separation tolerance in the data coordinate units [0]. Append <strong>m</strong> or <strong>c</strong> for minutes or seconds, or <strong>e</strong> or <strong>k</strong> for meters or km (implies <strong>-fg</strong> using use flat Earth approximation.  Use <strong>E</strong> or <strong>K</strong> for exact geodesic distances; however. if the current ELLIPSOID is Sphere then spherical great circle distances are used. If two lines has endpoints that are closer than this cutoff they will be joined. Optionally, append /<em>nn_dist</em> which adds the requirement that a link will only be made if the second closest connection exceeds the <em>nn_dist</em>.  The latter distance is assumed to be in the same units as <em>cutoff</em>.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Selects verbose mode, which will send progress reports to stderr [Default runs "silently"].</p>
  </dd>
  <dt>
    <p><strong>-:</strong></p>
  </dt>
  <dd>
    <p>Toggles between (longitude,latitude) and (latitude,longitude) input and/or output.  [Default is (longitude,latitude)]. Append <strong>i</strong> to select input only or <strong>o</strong> to select output only.  [Default affects both].</p>
  </dd>
  <dt>
    <p><strong>-bi</strong></p>
  </dt>
  <dd>
    <p>Selects binary input. Append <strong>s</strong> for single precision [Default is <strong>d</strong> (double)]. Uppercase <strong>S</strong> or <strong>D</strong> will force byte-swapping. Optionally, append <em>ncol</em>, the number of columns in your binary input file if it exceeds the columns needed by the program. Or append <strong>c</strong> if the input file is netCDF. Optionally, append <em>var1</em><strong>/</strong><em>var2</em><strong>/</strong><em>...</em> to specify the variables to be read. [Default is 2 input columns].</p>
  </dd>
  <dt>
    <p><strong>-bo</strong></p>
  </dt>
  <dd>
    <p>Selects binary output. Append <strong>s</strong> for single precision [Default is <strong>d</strong> (double)]. Uppercase <strong>S</strong> or <strong>D</strong> will force byte-swapping. Optionally, append <em>ncol</em>, the number of desired columns in your binary output file. [Default is same as input].</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>Special formatting of input and/or output columns (time or geographical data). Specify <strong>i</strong> or <strong>o</strong> to make this apply only to input or output [Default applies to both]. Give one or more columns (or column ranges) separated by commas. Append <strong>T</strong> (absolute calendar time), <strong>t</strong> (relative time in chosen <strong>TIME_UNIT</strong> since <strong>TIME_EPOCH</strong>), <strong>x</strong> (longitude), <strong>y</strong> (latitude), or <strong>f</strong> (floating point) to each column or column range item.  Shorthand <strong>-f</strong>[<strong>i</strong>|<strong>o</strong>]<strong>g</strong> means <strong>-f</strong>[<strong>i</strong>|<strong>o</strong>]0<strong>x</strong>,1<strong>y</strong> (geographic coordinates).</p>
  </dd>
  <dt>
    <p><strong>-m</strong></p>
  </dt>
  <dd>
    <p>Multiple segment file(s).  Segments are separated by a special record. For ASCII files the first character must be <em>flag</em> [Default is '&gt;']. For binary files all fields must be NaN and <strong>-b</strong> must set the number of output columns explicitly.  By default the <strong>-m</strong> setting applies to both input and output.  Use <strong>-mi</strong> and <strong>-mo</strong> to give separate settings to input and output.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ASCII FORMAT PRECISION</h2>
        <div class="sectioncontent">
<p>The ASCII output formats of numerical data are controlled by parameters in your .gmtdefaults4 file.  Longitude and latitude are formatted according to <strong>OUTPUT_DEGREE_FORMAT</strong>, whereas other values are formatted according to <strong>D_FORMAT</strong>.  Be aware that the format in effect can lead to loss of precision in the output, which can lead to various problems downstream.  If you find the output is not written with enough precision, consider switching to binary output (<strong>-bo</strong> if available) or specify more decimals using the <strong>D_FORMAT</strong> setting.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To combine the digitized multisegment lines segment_*.d (whose coordinates are in cm) into as few complete lines as possible, assuming the end points slop could be up to 0.1 mm, run</p><p><strong>gmtstitch</strong> segment_*.d <strong>-Tf</strong> 0.1 <strong>-m</strong> &gt; new_segments.d</p><p>To combine the digitized segments in the multisegment file my_lines.d (whose coordinates are in lon,lat) into as few complete lines as possible, assuming the end points slop could be up to 150 m, and write the complete segments to separate files called Map_segment_0001.dat,  Map_segment_0002.dat, etc., run</p><p><strong>gmtstitch</strong> my_lines.d <strong>-Tf</strong> 0.15k <strong>-m</strong> <strong>-D</strong> Map_segment_%4.4d.dat</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The line connection does not work if a line only has a single point.  However, gmtstitch will correctly add the point to the nearest segment.  Running gmtstitch again on the new set of lines will eventually connect all close lines.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gmtstitch&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/gmt.1.html"><strong>GMT</strong>(1)</a>, <strong>mapproject</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gmt-manpages-gmtset.1gmt.html"><span aria-hidden="true">&larr;</span> gmtset.1gmt: To change individual gmt default parameters</a></li>
   <li class="next"><a href="gmttrack.1gmt.html">gmttrack.1gmt: A shiptrack plotting program <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
