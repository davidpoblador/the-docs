<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lxc-usernsexec: Run a task as root in a new user namespace.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run a task as root in a new user namespace.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lxc-usernsexec (1) manual">
  <meta name="twitter:description" content="Run a task as root in a new user namespace.">
  <meta name="twitter:image" content="https://www.carta.tech/images/lxc-lxc-usernsexec-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/lxc-usernsexec.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lxc-usernsexec (1) manual" />
  <meta property="og:description" content="Run a task as root in a new user namespace." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lxc-lxc-usernsexec-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lxc-usernsexec<small> (1)</small></h1>
        <p class="lead">Run a task as root in a new user namespace.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lxc-usernsexec.1.html">
      <span itemprop="name">lxc-usernsexec: Run a task as root in a new user namespace.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lxc/">
      <span itemprop="name">lxc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lxc-usernsexec.1.html">
      <span itemprop="name">lxc-usernsexec: Run a task as root in a new user namespace.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lxc-usernsexec</strong> \kx [-m <em>uid-map</em>] {-- command}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>lxc-usernsexec</strong> can be used to run a task as root in a new user namespace.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>\*(T&lt;<strong>-m </strong>\*(T&gt;<em>uid-map</em></p>
  </dt>
  <dd>
    <p>The uid map to use in the user namespace. Each map consists of four colon-separate values. First a character 'u', 'g' or 'b' to specify whether this map pertains to user ids, group ids, or both; next the first userid in the user namespace; next the first userid as seen on the host; and finally the number of ids to be mapped.</p><p>More than one map can be specified. If no map is specified, then by default the full uid and gid ranges granted by /etc/subuid and /etc/subgid will be mapped to the uids and gids starting at 0 in the container.</p><p>Note that <em>lxc-usernsexec</em> always tries to setuid and setgid to 0 in the namespace. Therefore uid 0 in the namespace must be mapped.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To spawn a shell with the full allotted subuids mapped into the container, use</p>
<pre>
\*(T&lt;
	  lxc-usernsexec
        \*(T&gt;
</pre>
<p>To run a different shell than <em>/bin/sh</em>, use</p>
<pre>
\*(T&lt;
	  lxc-usernsexec -- /bin/bash
        \*(T&gt;
</pre>
<p>If your user id is 1000, root in a container is mapped to 190000, and you wish to chown a file you own to root in the container, you can use:</p>
<pre>
\*(T&lt;
	  lxc-usernsexec -m b:0:1000:1 -m b:1:190000:1 -- /bin/chown 1:1 $file
        \*(T&gt;
</pre>
<p>This maps your userid to root in the user namespace, and 190000 to uid 1. Since root in the user namespace is privileged over all userids mapped into the namespace, you are allowed to change the file ownership, which you could not do on the host using a simple chown.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lxc-usernsexec&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/lxc.7.html"><strong>lxc</strong>(7)</a>, <a href="../man1/lxc-create.1.html"><strong>lxc-create</strong>(1)</a>, <a href="../man1/lxc-destroy.1.html"><strong>lxc-destroy</strong>(1)</a>, <a href="../man1/lxc-start.1.html"><strong>lxc-start</strong>(1)</a>, <a href="../man1/lxc-stop.1.html"><strong>lxc-stop</strong>(1)</a>, <a href="../man1/lxc-execute.1.html"><strong>lxc-execute</strong>(1)</a>, <a href="../man1/lxc-console.1.html"><strong>lxc-console</strong>(1)</a>, <a href="../man1/lxc-monitor.1.html"><strong>lxc-monitor</strong>(1)</a>, <a href="../man1/lxc-wait.1.html"><strong>lxc-wait</strong>(1)</a>, <a href="../man1/lxc-cgroup.1.html"><strong>lxc-cgroup</strong>(1)</a>, <a href="../man1/lxc-ls.1.html"><strong>lxc-ls</strong>(1)</a>, <a href="../man1/lxc-info.1.html"><strong>lxc-info</strong>(1)</a>, <a href="../man1/lxc-freeze.1.html"><strong>lxc-freeze</strong>(1)</a>, <a href="../man1/lxc-unfreeze.1.html"><strong>lxc-unfreeze</strong>(1)</a>, <a href="../man1/lxc-attach.1.html"><strong>lxc-attach</strong>(1)</a>, <a href="../man5/lxc.conf.5.html"><strong>lxc.conf</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Serge Hallyn &lt;\*(T&lt;serge.hallyn@ubuntu.com\*(T&gt;&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lxc-user-nic.1.html"><span aria-hidden="true">&larr;</span> lxc-user-nic.1: Create and attach a nic to another network namespace.</a></li>
   <li class="next"><a href="lxc-wait.1.html">lxc-wait.1: Wait for a specific container state <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
