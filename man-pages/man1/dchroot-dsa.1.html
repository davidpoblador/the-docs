<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dchroot-dsa: Enter a chroot environment</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Enter a chroot environment">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dchroot-dsa (1) manual">
  <meta name="twitter:description" content="Enter a chroot environment">
  <meta name="twitter:image" content="https://www.carta.tech/images/dchroot-dsa-dchroot-dsa-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/dchroot-dsa.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dchroot-dsa (1) manual" />
  <meta property="og:description" content="Enter a chroot environment" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dchroot-dsa-dchroot-dsa-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dchroot-dsa<small> (1)</small></h1>
        <p class="lead">Enter a chroot environment</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dchroot-dsa.1.html">
      <span itemprop="name">dchroot-dsa: Enter a chroot environment</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dchroot-dsa/">
      <span itemprop="name">dchroot-dsa</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dchroot-dsa.1.html">
      <span itemprop="name">dchroot-dsa: Enter a chroot environment</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dchroot-dsa</strong> [<strong>-h</strong>\[or]<strong>--help</strong> \[or] <strong>-V</strong>\[or]<strong>--version</strong>  \[or] <strong>-l</strong>\[or]<strong>--list</strong> \[or] <strong>-i</strong>\[or]<strong>--info</strong>  \[or] <strong>--config</strong> \[or] <strong>-p</strong>|<strong>--listpaths</strong>] [<strong>-d </strong><em>directory</em><strong></strong>\[or]<strong>--directory=</strong><em>directory</em><strong></strong>] [<strong>-q</strong>\[or]<strong>--quiet</strong> \[or] <strong>-v</strong>\[or]<strong>--verbose</strong>] [<strong>-c </strong><em>chroot</em><strong></strong>\[or]<strong>--chroot=</strong><em>chroot</em><strong></strong>  \[or] <strong>--all</strong> \[or] <strong>CHROOT]</strong> [<strong>COMMAND</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>dchroot-dsa</strong> allows the user to run a command or a login shell in a chroot environment.  If no command is specified, a login shell will be started in the user's home directory inside the chroot.</p><p>The user's environment will be preserved inside the chroot.</p><p>The command is a single argument which must be an absolute path to the program. Additional options are not permitted.</p><p>The directory the command or login shell is run in depends upon the context. See <em>--directory</em> option below for a complete description.</p><p>This version of dchroot-dsa is a compatibility wrapper around the <a href="../man1/schroot.1.html"><strong>schroot</strong>(1)</a> program.  It is provided for backward compatibility with the dchroot-dsa command-line options, but schroot is recommended for future use.  See the section \[lq]<em>Incompatibilities</em>\[rq] below for known incompatibilities with older versions of dchroot-dsa.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>dchroot-dsa</strong> accepts the following options:</p><h3>Basic options</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Show help summary.</p>
  </dd>
  <dt>
    <p><strong>-a</strong>, <strong>--all</strong></p>
  </dt>
  <dd>
    <p>Select all chroots.  Note that earlier versions of dchroot-dsa did not include this option.</p>
  </dd>
  <dt>
    <p><strong>-c</strong>, <strong>--chroot=</strong><em>chroot</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specify a chroot to use.  This option may be used multiple times to specify more than one chroot, in which case its effect is similar to <em>--all</em>.  If this option is not used, the first non-option argument specified the chroot to use.  Note that earlier versions of dchroot-dsa did not include this option.</p>
  </dd>
  <dt>
    <p><strong>-l</strong>, <strong>--list</strong></p>
  </dt>
  <dd>
    <p>List all available chroots.</p>
  </dd>
  <dt>
    <p><strong>-i</strong>, <strong>--info</strong></p>
  </dt>
  <dd>
    <p>Print detailed information about the available chroots.  Note that earlier versions of dchroot-dsa did not include this option.</p>
  </dd>
  <dt>
    <p><strong>-p</strong>, <strong>--listpaths</strong></p>
  </dt>
  <dd>
    <p>Print absolute locations (paths) of the available chroots.</p>
  </dd>
  <dt>
    <p><strong>--config</strong></p>
  </dt>
  <dd>
    <p>Print configuration of the available chroots.  This is useful for testing that the configuration in use is the same as the configuration file.  Any comments in the original file will be missing.  Note that earlier versions of dchroot-dsa did not include this option.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--directory=</strong><em>directory</em><strong></strong></p>
  </dt>
  <dd>
    <p>Change to <em>directory</em> inside the chroot before running the command or login shell.  If <em>directory</em> is not available, dchroot-dsa will exit with an error status.</p><ul>
<li><p>The default behaviour (all directory paths are inside the chroot) is to run the login shell or command in the user's home directory, or <em>/</em> if the home directory is not available.  If none of the directories are available, dchroot-dsa will exit with an error status.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-q</strong>, <strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>Print only essential messages.  Note that earlier versions of dchroot-dsa did not include this option.</p>
  </dd>
  <dt>
    <p><strong>-v</strong>, <strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>Print all messages.  Note that earlier versions of dchroot-dsa did not include this option.</p>
  </dd>
  <dt>
    <p><strong>-V</strong>, <strong>--version</strong></p>
  </dt>
  <dd>
    <p>Print version information.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INCOMPATIBILITIES</h2>
        <div class="sectioncontent">
<h3>Debian dchroot prior to version 1.5.1</h3>

<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>This version of dchroot-dsa uses <em>schroot.conf</em> to store the configuration for available chroots, rather than the <em>dchroot.conf</em> file used historically.  dchroot-dsa supported automatic migration of <em>dchroot.conf</em> to the <em>schroot.conf</em> keyfile format with its <em>--config</em> option from versions 0.2.2 to 1.5.0; support for the old format is now no longer available.</p>
  </dd>

</dl>

<h3>DSA dchroot</h3>

<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>Log messages are worded and formatted differently.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>dchroot-dsa provides a restricted subset of the functionality implemented by <strong>schroot</strong>, but is still schroot underneath.  Thus dchroot-dsa is still subject to schroot security checking, including PAM authentication and authorisation, and session management, for example, and hence may behave slightly differently to earlier versions of dchroot-dsa in some circumstances.</p>
  </dd>

</dl>

<h3>Debian dchroot</h3>
<p>A <strong>dchroot</strong> package provides an alternative dchroot implementation.</p>
<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>All the above incompatibilities apply.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>This version of dchroot has incompatible command-line options, and while some of those options are supported or have equivalent options by a different name, the <em>-c</em> option is required to specify a chroot.  It also allows a shell script to be used as the option instead of a single absolute path, and allows multiple command options instead of a single option.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIRECTORY FALLBACKS</h2>
        <div class="sectioncontent">
<p>dchroot-dsa will select an appropriate directory to use within the chroot based upon whether the <em>--directory</em> option is used.  When explicitly specifying a directory, only one directory will be used for safety and consistency, while for a login shell or command several possibilities may be tried.  Note that due to multiple fallbacks being considered for commands, it is dangerous to run commands using dchroot-dsa; use schroot instead.  The following subsections list the fallback sequence for each case.  CWD is the current working directory, DIR is the directory specified with <em>--directory</em>.</p><h3>Login shell or command</h3>
<table class="table table-striped">
<tr>
<th>Transition</th></tr>

<tr>
<td>(Host \[-&gt;] Chroot)</td></tr>

<tr>
<td>Comment</td></tr>

<tr>
<td>CWD \[-&gt;] passwd pw_dir</td></tr>

<tr>
<td>Normal behaviour (if --directory is not used)</td></tr>

<tr>
<td>CWD \[-&gt;] /</td></tr>

<tr>
<td>If passwd pw_dir is nonexistent</td></tr>

<tr>
<td><strong>FAIL</strong></td></tr>

<tr>
<td>If / is nonexistent</td></tr>
</table>
<h3>--directory used</h3>
<table class="table table-striped">
<tr>
<th>Transition</th></tr>

<tr>
<td>(Host \[-&gt;] Chroot)</td></tr>

<tr>
<td>Comment</td></tr>

<tr>
<td>CWD \[-&gt;] DIR</td></tr>

<tr>
<td>Normal behaviour</td></tr>

<tr>
<td><strong>FAIL</strong></td></tr>

<tr>
<td>If DIR is nonexistent</td></tr>
</table><p>No fallbacks should exist under any circumstances.</p>
<h3>Debugging</h3>
<p>Note that <em>--debug=notice</em> will show the internal fallback list computed for the session.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
$ <strong>dchroot-dsa -l</strong>\[CR]
Available chroots: sarge, sid

$ <strong>dchroot-dsa --listpaths</strong>\[CR]
/srv/chroot/sarge
/srv/chroot/sid

$ <strong>dchroot-dsa -q sid -- /bin/uname</strong>\[CR]
Linux

$ <strong>dchroot-dsa sid</strong>\[CR]
I: [sid chroot] Running login shell: \[lq]/bin/bash\[rq]
$
</pre>
<p>Note that the top line was echoed to standard error, and the remaining lines to standard output.  This is intentional, so that program output from commands run in the chroot may be piped and redirected as required; the data will be the same as if the command was run directly on the host system.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TROUBLESHOOTING</h2>
        <div class="sectioncontent">
<p>If something is not working, and it's not clear from the error messages what is wrong, try using the <strong>--debug=</strong><em>level</em> option to turn on debugging messages.  This gives a great deal more information.  Valid debug levels are \[oq]none\[cq], and \[oq]notice\[cq], \[oq]info\[cq], \[oq]warning\[cq] and \[oq]critical\[cq] in order of increasing severity.  The lower the severity level, the more output.</p><p>If you are still having trouble, the developers may be contacted on the mailing list:</p><p>Debian&nbsp;buildd-tools&nbsp;Developers</p><p>&lt;buildd-tools-devel@lists.alioth.debian.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>On the <strong>mips</strong> and <strong>mipsel</strong> architectures, Linux kernels up to and including at least version 2.6.17 have broken <a href="../man2/personality.2.html"><strong>personality</strong>(2)</a> support, which results in a failure to set the personality.  This will be seen as an \[lq]Operation not permitted\[rq] (EPERM) error.  To work around this problem, set <em>personality</em> to \[oq]undefined\[cq], or upgrade to a more recent kernel.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>\*[SCHROOT_CONF]</em></p>
  </dt>
  <dd>
    <p>The system-wide <strong>schroot</strong> definition file.  This file must be owned by the root user, and not be writable by other.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Roger Leigh.</p><p>This implementation of dchroot-dsa uses the same command-line options as the <strong>dchroot</strong> found on machines run by the Debian System Administrators for the Debian Project.  These machines have a <strong>dchroot-dsa</strong> source package which provides a <strong>dchroot-dsa</strong> package, written by Ben Collins &lt;bcollins@debian.org&gt; and Martin Schulze &lt;joey@debian.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2005-2012  Roger Leigh &lt;rleigh@debian.org&gt;</p><p><strong>\*[PROGRAM]</strong> is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dchroot-dsa&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/schroot.1.html"><strong>schroot</strong>(1)</a>, <a href="../man1/sbuild.1.html"><strong>sbuild</strong>(1)</a>, <a href="../man2/chroot.2.html"><strong>chroot</strong>(2)</a>, <a href="../man5/schroot-setup.5.html"><strong>schroot-setup</strong>(5)</a>, <a href="../man5/schroot.conf.5.html"><strong>schroot.conf</strong>(5)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dchroot.1.html"><span aria-hidden="true">&larr;</span> dchroot.1: Enter a chroot environment</a></li>
   <li class="next"><a href="dcl2inc.1.html">dcl2inc.1: Postprocess ftnchek .dcl files to create separate include files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
