<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dh_python2: Calculates python dependencies, adds maintainer scripts to byte compile files, etc.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Calculates python dependencies, adds maintainer scripts to byte compile files, etc.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dh_python2 (1) manual">
  <meta name="twitter:description" content="Calculates python dependencies, adds maintainer scripts to byte compile files, etc.">
  <meta name="twitter:image" content="https://www.carta.tech/images/python-dh_python2-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/dh_python2.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dh_python2 (1) manual" />
  <meta property="og:description" content="Calculates python dependencies, adds maintainer scripts to byte compile files, etc." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/python-dh_python2-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dh_python2<small> (1)</small></h1>
        <p class="lead">Calculates python dependencies, adds maintainer scripts to byte compile files, etc.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dh_python2.1.html">
      <span itemprop="name">dh_python2: Calculates python dependencies, adds maintainer scripts to byte compile files, etc.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/python/">
      <span itemprop="name">python</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dh_python2.1.html">
      <span itemprop="name">dh_python2: Calculates python dependencies, adds maintainer scripts to byte compile files, etc.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>dh_python2 -p PACKAGE [-V [X.Y][-][A.B]] DIR_OR_FILE [-X REGEXPR]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<h3>QUICK GUIDE FOR MAINTAINERS</h3>
<ul>
<li><p>if necessary, describe supported Python versions via X-Python-Version field in debian/control,</p></li><li><p>build-depend on python or python-all or python-all-dev (&gt;= 2.6.6-3~),</p></li><li><p>build module/application using its standard build system, remember to build extensions for all supported Python versions (loop over <strong>pyversions -vr</strong>),</p></li><li><p>install files to the <em>standard</em> locations, add <em>--install-layout=deb</em> to setup.py&apos;s install command if your package is using distutils,</p></li><li><p>add <em>python2</em> to dh&apos;s --with option, or:</p></li><li><p><em>include /usr/share/cdbs/1/class/python-distutils.mk</em> in debian/rules and depend on <em>cdbs (&gt;= 0.4.90)</em>, or:</p></li><li><p>call <strong>dh_python2</strong> in the <em>binary-*</em> target,</p></li><li><p>add <em>${python:Depends}</em> to Depends</p></li>
</ul>
<h3>NOTES</h3>
<p>In order to support more than one Python version in the same binary package, dh_python2 (unlike dh_pycentral and dh_pysupport) creates symlinks to all supported Python versions at build time. It means binNMU (or sourceful upload in case of architecture independent packages) is required once a list of supported Python version is changed. It&apos;s faster and more robust than its competitors, though.</p>
<h3>dependencies</h3>
<p>dh_python2 tries to translate Python dependencies from requires.txt file to Debian dependencies. Use debian/pydist-overrides or --no-guessing-deps option to override it if the guess is incorrect. If you want dh_python2 to generate more strict dependencies (f.e. to avoid ABI problems) create debian/python-foo.pydist file. See /usr/share/doc/python-doc/README.PyDist (provided by python-doc package) for more information. If the pydist file contains PEP386 flag or set of (uscan like) rules, dh_python2 will make the depedency versioned (version requirements are ignored by default).</p>
<h3>namespace feature</h3>
<p>dh_python2 parses Egg&apos;s namespace_packages.txt files (in addition to --namespace command line argument(s)) and drops empty __init__.py files from binary package. pycompile will regenerate them at install time and pyclean will remove them at uninstall time (if they&apos;re no longer used in installed packages). It&apos;s still a good idea to provide __init__.py file in one of binary packages (even if all other packages use this feature).</p>
<h3>private dirs</h3>
<p><em>/usr/share/foo</em>, <em>/usr/share/games/foo</em>, <em>/usr/lib/foo</em> and <em>/usr/lib/games/foo</em> private directories are scanned for Python files by default (where <em>foo</em> is binary package name). If your package is shipping Python files in some other directory, add another dh_python2 call in debian/rules with directory name as an argument - you can use different set of options in this call. If you need to change options (f.e. a list of supported Python versions) for a private directory that is checked by default, invoke dh_python2 with --skip-private option and add another call with a path to this directory and new options.</p>
<h3>debug packages</h3>
<p>In binary packages which name ends with <em>-dbg</em>, all files in <em>/usr/lib/python2.X/{site,dist}-packages/</em> directory that have extensions different than <em>so</em> or <em>h</em> are removed by default. Use --no-dbg-cleaning option to disable this feature.</p>
<h3>pyinstall files</h3>
<p>Files listed in debian/pkg.pyinstall file will be installed as public modules for all requested Python versions (dh_install doesn&apos;t know about python&apos;s site- vs. dist-packages issue).</p><p>Syntax: <strong>path/to/file [VERSION_RANGE] [NAMESPACE]</strong></p><p>debian directory is automatically removed from the path, so you can place your files in debian/ directory and install them from this location (if you want to install them in "debian" namespace, set NAMESPACE to debian). If NAMESPACE is set, all listed files will be installed in .../dist-packages/NAMESPACE/ directory.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Examples:</strong></p>
  </dt>
  <dd>
    <ul>
<li><p><strong>foo.py</strong> installs .../dist-packages/foo.py for all supported Python versions</p></li><li><p><strong>foo/bar.py 2.6-</strong> installs .../dist-packages/foo/bar.py for versions &gt;= 2.6</p></li><li><p><strong>foo/bar.py spam</strong> installs .../dist-packages/spam/bar.py</p></li><li><p><strong>debian/*.py spam.egg 2.5</strong> installs .../python2.5/site-packages/spam/egg/*.py files</p></li>
</ul>
  </dd>

</dl>

<h3>pyremove files</h3>
<p>If you want to remove some files installed by build system (from all supported Python versions or only from a subset of these versions), add them to debian/pkg.pyremove file.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Examples:</strong></p>
  </dt>
  <dd>
    <ul>
<li><p><strong>*.pth</strong> removes .pth files from .../dist-packages/</p></li><li><p><strong>bar/baz.py 2.5</strong> removes .../python2.5/site-packages/bar/baz.py</p></li>
</ul>
  </dd>

</dl>

<h3>overriding supported / default Python versions</h3>
<p>If you want to override system&apos;s list of supported Python versions or the default one (f.e. to build a package that includes symlinks for older version of Python or compile .py files only for given interpreter version), you can do that via <em>DEBPYTHON_SUPPORTED</em> and/or <em>DEBPYTHON_DEFAULT</em> env. variables.</p><p>Example: <strong>2.5,2.7</strong> limits the list of supported Python versions to Python 2.5 and Python 2.7.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>show program&apos;s version number and exit</p>
  </dd>
  <dt>
    <p><strong>-h</strong>,<strong> --help</strong></p>
  </dt>
  <dd>
    <p>show help message and exit</p>
  </dd>
  <dt>
    <p><strong>--no-guessing-versions</strong></p>
  </dt>
  <dd>
    <p>disable guessing other supported Python versions</p>
  </dd>
  <dt>
    <p><strong>--no-guessing-deps</strong></p>
  </dt>
  <dd>
    <p>disable guessing dependencies</p>
  </dd>
  <dt>
    <p><strong>--no-dbg-cleaning</strong></p>
  </dt>
  <dd>
    <p>do not remove any files from debug packages</p>
  </dd>
  <dt>
    <p><strong>--no-shebang-rewrite</strong></p>
  </dt>
  <dd>
    <p>do not rewrite shebangs</p>
  </dd>
  <dt>
    <p><strong>--skip-private</strong></p>
  </dt>
  <dd>
    <p>don&apos;t check private directories</p>
  </dd>
  <dt>
    <p><strong>-v</strong>,<strong> --verbose</strong></p>
  </dt>
  <dd>
    <p>turn verbose mode on</p>
  </dd>
  <dt>
    <p><strong>-i</strong>,<strong> --indep</strong></p>
  </dt>
  <dd>
    <p>act on architecture independent packages</p>
  </dd>
  <dt>
    <p><strong>-a</strong>,<strong> --arch</strong></p>
  </dt>
  <dd>
    <p>act on architecture dependent packages</p>
  </dd>
  <dt>
    <p><strong>-q</strong>,<strong> --quiet</strong></p>
  </dt>
  <dd>
    <p>be quiet</p>
  </dd>
  <dt>
    <p><strong>-p</strong><em></em><strong>PACKAGE</strong>,<strong></strong><em></em><strong>--package</strong><strong>=</strong><em>PACKAGE</em></p>
  </dt>
  <dd>
    <p>act on the package named PACKAGE</p>
  </dd>
  <dt>
    <p><strong>-N</strong><em></em><strong>NO_PACKAGE</strong>,<strong></strong><em></em><strong>--no-package</strong><strong>=</strong><em>NO_PACKAGE</em></p>
  </dt>
  <dd>
    <p>do not act on the specified package</p>
  </dd>
  <dt>
    <p><strong>-V</strong><em></em><strong>VRANGE</strong></p>
  </dt>
  <dd>
    <p>specify list of supported Python versions. See <a href="../man1/pycompile.1.html"><strong>pycompile</strong>(1)</a> for examples</p>
  </dd>
  <dt>
    <p><strong>-X</strong><em></em><strong>REGEXPR</strong>,<strong></strong><em></em><strong>--exclude</strong><strong>=</strong><em>REGEXPR</em></p>
  </dt>
  <dd>
    <p>exclude items that match given REGEXPR. You may use this option multiple times to build up a list of things to exclude.</p>
  </dd>
  <dt>
    <p><strong>--compile-all</strong></p>
  </dt>
  <dd>
    <p>compile all files from given private directory in postinst/rtupdate not just the ones provided by the package (i.e. do not pass the --package parameter to pycompile/pyclean)</p>
  </dd>
  <dt>
    <p><strong>--depends</strong><strong>=</strong><em>DEPENDS</em></p>
  </dt>
  <dd>
    <p>translate given requirements into Debian dependencies and add them to ${python:Depends}. Use it for missing items in requires.txt</p>
  </dd>
  <dt>
    <p><strong>--recommends</strong><strong>=</strong><em>RECOMMENDS</em></p>
  </dt>
  <dd>
    <p>translate given requirements into Debian dependencies and add them to ${python:Recommends}</p>
  </dd>
  <dt>
    <p><strong>--suggests</strong><strong>=</strong><em>SUGGESTS</em></p>
  </dt>
  <dd>
    <p>translate given requirements into Debian dependencies and add them to ${python:Suggests}</p>
  </dd>
  <dt>
    <p><strong>--namespace</strong></p>
  </dt>
  <dd>
    <p>use this option (multiple time if necessary) if namespace_packages.txt is not complete</p>
  </dd>
  <dt>
    <p><strong>--ignore-namespace</strong></p>
  </dt>
  <dd>
    <p>ignore Egg&apos;s namespace declaration and --namespace option. This option will disable removing (and recreating at install time) empty __init__.py files. Removing namespace_packages.txt from egg-info directory has the same effect.</p>
  </dd>
  <dt>
    <p><strong>--clean-pycentral</strong></p>
  </dt>
  <dd>
    <p>generate maintainer script that will remove byte code generated by python-central helper</p>
  </dd>
  <dt>
    <p><strong>--shebang</strong><strong>=</strong><em>COMMAND</em></p>
  </dt>
  <dd>
    <p>use given command as shebang in scripts</p>
  </dd>
  <dt>
    <p><strong>--ignore-shebangs</strong></p>
  </dt>
  <dd>
    <p>do not translate shebangs into Debian dependencies</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dh_python2&hellip;</h2>
        <div class="sectioncontent">
<ul>
<li><p>/usr/share/doc/python/python-policy.txt.gz</p></li><li><p>/usr/share/doc/python-doc/README.PyDist (python-doc package)</p></li><li><p><a href="../man1/pycompile.1.html"><strong>pycompile</strong>(1)</a>, <a href="../man1/pyclean.1.html"><strong>pyclean</strong>(1)</a></p></li><li><p><a href="../man1/dh_python3.1.html"><strong>dh_python3</strong>(1)</a>, <a href="../man1/py3compile.1.html"><strong>py3compile</strong>(1)</a>, <a href="../man1/py3clean.1.html"><strong>py3clean</strong>(1)</a></p></li><li><p>Wiki page about converting package to dh_python2: <em>http://wiki.debian.org/Python/TransitionToDHPython2</em></p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Piotr OÅ¼arowski, 2012-2013</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dh_pysupport.1.html"><span aria-hidden="true">&larr;</span> dh_pysupport.1: Use the python-support framework to handle python modules</a></li>
   <li class="next"><a href="dh_python3.1.html">dh_python3.1: Calculates python dependencies, adds maintainer scripts to byte compile files, etc. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
