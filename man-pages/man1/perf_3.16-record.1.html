<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>perf_3.16-record: Run a command and record its profile into perf.data</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run a command and record its profile into perf.data">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="perf_3.16-record (1) manual">
  <meta name="twitter:description" content="Run a command and record its profile into perf.data">
  <meta name="twitter:image" content="https://www.carta.tech/images/linux-tools-3.16-perf_3.16-record-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/perf_3.16-record.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="perf_3.16-record (1) manual" />
  <meta property="og:description" content="Run a command and record its profile into perf.data" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/linux-tools-3.16-perf_3.16-record-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">perf_3.16-record<small> (1)</small></h1>
        <p class="lead">Run a command and record its profile into perf.data</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/perf_3.16-record.1.html">
      <span itemprop="name">perf_3.16-record: Run a command and record its profile into perf.data</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/linux-tools-3.16/">
      <span itemprop="name">linux-tools-3.16</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/perf_3.16-record.1.html">
      <span itemprop="name">perf_3.16-record: Run a command and record its profile into perf.data</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<em>perf record</em> [-e &lt;EVENT&gt; | --event=EVENT] [-l] [-a] &lt;command&gt;
<em>perf record</em> [-e &lt;EVENT&gt; | --event=EVENT] [-l] [-a] &ndash; &lt;command&gt; [&lt;options&gt;]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This command runs a command and gathers a performance counter profile from it, into perf.data - without displaying anything.</p><p>This file can then be inspected later on, using <em>perf report</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>&lt;command&gt;...</p><p>Any command you can specify in a shell.</p><p>-e, --event=</p><p>Select the PMU event. Selection can be:</p><p>a symbolic event name (use <em>perf list</em> to list all events)</p><p>a raw PMU event (eventsel+umask) in the form of rNNN where NNN is a hexadecimal event descriptor.</p><p>a hardware breakpoint event in the form of <em>&#92;mem:addr[:access]</em> where addr is the address in memory you want to break in. Access is the memory access type (read, write, execute) it can be passed as follows: <em>&#92;mem:addr[:[r][w][x]]</em>. If you want to profile read-write accesses in 0x1000, just set <em>mem:0x1000:rw</em>.</p><p>--filter=&lt;filter&gt;</p><p>Event filter.</p><p>-a, --all-cpus</p><p>System-wide collection from all CPUs.</p><p>-l</p><p>Scale counter values.</p><p>-p, --pid=</p><p>Record events on existing process ID (comma separated list).</p><p>-t, --tid=</p><p>Record events on existing thread ID (comma separated list). This option also disables inheritance by default. Enable it by adding --inherit.</p><p>-u, --uid=</p><p>Record events in threads owned by uid. Name or number.</p><p>-r, --realtime=</p><p>Collect data with this RT SCHED_FIFO priority.</p><p>--no-buffering</p><p>Collect data without buffering.</p><p>-c, --count=</p><p>Event period to sample.</p><p>-o, --output=</p><p>Output file name.</p><p>-i, --no-inherit</p><p>Child tasks do not inherit counters.</p><p>-F, --freq=</p><p>Profile at this frequency.</p><p>-m, --mmap-pages=</p><p>Number of mmap data pages (must be a power of two) or size specification with appended unit character - B/K/M/G. The size is rounded up to have nearest pages power of two value.</p><p>-g</p><p>Enables call-graph (stack chain/backtrace) recording.</p><p>--call-graph</p><p>Setup and enable call-graph (stack chain/backtrace) recording, implies -g.</p>
<pre>
Allows specifying "fp" (frame pointer) or "dwarf"
(DWARF&apos;s CFI - Call Frame Information) as the method to collect
the information used to show the call graphs.
</pre>

<pre>
In some systems, where binaries are build with gcc
--fomit-frame-pointer, using the "fp" method will produce bogus
call graphs, using "dwarf", if available (perf tools linked to
the libunwind library) should be used instead.
</pre>
<p>-q, --quiet</p><p>Don\(cqt print any message, useful for scripting.</p><p>-v, --verbose</p><p>Be more verbose (show counter open errors, etc).</p><p>-s, --stat</p><p>Per thread counts.</p><p>-d, --data</p><p>Sample addresses.</p><p>-T, --timestamp</p><p>Sample timestamps. Use it with <em>perf report -D</em> to see the timestamps, for instance.</p><p>-n, --no-samples</p><p>Don\(cqt sample.</p><p>-R, --raw-samples</p><p>Collect raw sample records from all opened counters (default for tracepoint counters).</p><p>-C, --cpu</p><p>Collect samples only on the list of CPUs provided. Multiple CPUs can be provided as a comma-separated list with no space: 0,1. Ranges of CPUs are specified with -: 0-2. In per-thread mode with inheritance mode on (default), samples are captured only when the thread executes on the designated CPUs. Default is to monitor all CPUs.</p><p>-N, --no-buildid-cache</p><p>Do not update the builid cache. This saves some overhead in situations where the information in the perf.data file (which includes buildids) is sufficient.</p><p>-G name,..., --cgroup name,...</p><p>monitor only in the container (cgroup) called "name". This option is available only in per-cpu mode. The cgroup filesystem must be mounted. All threads belonging to container "name" are monitored when they run on the monitored CPUs. Multiple cgroups can be provided. Each cgroup is applied to the corresponding event, i.e., first cgroup to first event, second cgroup to second event and so on. It is possible to provide an empty cgroup (monitor all the time) using, e.g., -G foo,,bar. Cgroups must have corresponding events, i.e., they always refer to events defined earlier on the command line.</p><p>-b, --branch-any</p><p>Enable taken branch stack sampling. Any type of taken branch may be sampled. This is a shortcut for --branch-filter any. See --branch-filter for more infos.</p><p>-j, --branch-filter</p><p>Enable taken branch stack sampling. Each sample captures a series of consecutive taken branches. The number of branches captured with each sample depends on the underlying hardware, the type of branches of interest, and the executed code. It is possible to select the types of branches captured by enabling filters. The following filters are defined:</p><p>any: any type of branches</p><p>any_call: any function call or system call</p><p>any_ret: any function return or system call return</p><p>ind_call: any indirect branch</p><p>u: only when the branch target is at the user level</p><p>k: only when the branch target is in the kernel</p><p>hv: only when the target is at the hypervisor level</p><p>in_tx: only when the target is in a hardware transaction</p><p>no_tx: only when the target is not in a hardware transaction</p><p>abort_tx: only when the target is a hardware transaction abort</p><p>cond: conditional branches</p><p>The option requires at least one branch type among any, any_call, any_ret, ind_call, cond. The privilege levels may be omitted, in which case, the privilege levels of the associated event are applied to the branch filter. Both kernel (k) and hypervisor (hv) privilege levels are subject to permissions. When sampling on multiple events, branch stack sampling is enabled for all the sampling events. The sampled branch type is the same for all events. The various filters must be specified as a comma separated list: --branch-filter any_ret,u,k Note that this feature may not be available on all processors.</p><p>--weight</p><p>Enable weightened sampling. An additional weight is recorded per sample and can be displayed with the weight and local_weight sort keys. This currently works for TSX abort events and some memory events in precise mode on modern Intel CPUs.</p><p>--transaction</p><p>Record transaction flags for transaction related events.</p><p>--per-thread</p><p>Use per-thread mmaps. By default per-cpu mmaps are created. This option overrides that and uses per-thread mmaps. A side-effect of that is that inheritance is automatically disabled. --per-thread is ignored with a warning if combined with -a or -C options.</p><p>-D, --delay=</p><p>After starting the program, wait msecs before measuring. This is useful to filter out the startup phase of the program, which is often very different.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO perf_3.16-record&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/perf_3.16-stat.1.html"><strong>perf_3.16-stat</strong>(1)</a>, <a href="../man1/perf_3.16-list.1.html"><strong>perf_3.16-list</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="perf_3.16-probe.1.html"><span aria-hidden="true">&larr;</span> perf_3.16-probe.1: Define new dynamic tracepoints</a></li>
   <li class="next"><a href="perf_3.16-report.1.html">perf_3.16-report.1: Read perf.data (created by perf record) and display the profile <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
