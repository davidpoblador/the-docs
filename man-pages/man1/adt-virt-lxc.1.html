<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>adt-virt-lxc: Autopkgtest virtualisation server using lxc</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Autopkgtest virtualisation server using lxc">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="adt-virt-lxc (1) manual">
  <meta name="twitter:description" content="Autopkgtest virtualisation server using lxc">
  <meta name="twitter:image" content="https://www.carta.tech/images/autopkgtest-adt-virt-lxc-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/adt-virt-lxc.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="adt-virt-lxc (1) manual" />
  <meta property="og:description" content="Autopkgtest virtualisation server using lxc" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/autopkgtest-adt-virt-lxc-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">adt-virt-lxc<small> (1)</small></h1>
        <p class="lead">Autopkgtest virtualisation server using lxc</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/adt-virt-lxc.1.html">
      <span itemprop="name">adt-virt-lxc: Autopkgtest virtualisation server using lxc</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/autopkgtest/">
      <span itemprop="name">autopkgtest</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/adt-virt-lxc.1.html">
      <span itemprop="name">adt-virt-lxc: Autopkgtest virtualisation server using lxc</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSYS</h2>
        <div class="sectioncontent">
<p><strong>adt-virt-lxc</strong> [<em>options</em>] <em>lxc-container</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>adt-virt-lxc</strong> provides an autopkgtest virtualisation server using LXC. It adapts the raw functionality provided by the <strong>lxc-</strong>* tools for use by autopkgtest.</p><p>Normally <strong>adt-virt-lxc</strong> will be invoked by <strong>adt-run</strong>.</p><p>You can conveniently create a suitable container using the <a href="../man1/adt-build-lxc.1.html"><strong>adt-build-lxc</strong>(1)</a> script.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REQUIREMENTS</h2>
        <div class="sectioncontent">
<p><strong>adt-virt-lxc</strong> assumes that you have already prepared a suitable Debian based LXC container. See <a href="../man1/lxc-create.1.html"><strong>lxc-create</strong>(1)</a> for how to create containers.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-e</strong> | <strong>--ephemeral</strong></p>
  </dt>
  <dd>
    <p>This option makes use of lxc-start-ephemeral to create temporary container overlays, instead of the default behaviour of cloning your containers. This can be used to dramatically improve performance, although you may see issues due to the overlayfs filesystem as used by lxc-start-ephemeral not being completely transparent (e. g. seen with tar failing when running LXC within Qemu). Before using this option in automation you should ensure that tests that involve large I/O work as expected.</p>
  </dd>
  <dt>
    <p><strong>-s</strong> | <strong>--sudo</strong></p>
  </dt>
  <dd>
    <p>Run lxc-* commands through sudo; use this option if you run adt-run as normal user, but need to run the container itself as root (if you use LXC system level containers).</p>
  </dd>
  <dt>
    <p><strong>--eatmydata</strong></p>
  </dt>
  <dd>
    <p>This option is intended for test developer use. It enables the use of <a href="../man1/eatmydata.1.html"><strong>eatmydata</strong>(1)</a> inside the container on all commands in order to improve performance. This requires <a href="../man1/eatmydata.1.html"><strong>eatmydata</strong>(1)</a> to already be installed inside the supplied template, which you will need to do manually.</p><p>However, since eatmydata is not part of the dep8 specification and may affect the test environment, it is not recommended for use in automation.</p>
  </dd>
  <dt>
    <p><strong>-d</strong> | <strong>--debug</strong></p>
  </dt>
  <dd>
    <p>Enables debugging output.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT, OUTPUT AND EXIT STATUS</h2>
        <div class="sectioncontent">
<p>The behaviour of <strong>adt-virt-lxc</strong> is as described by the AutomatedTesting virtualisation regime specification.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><strong>adt-run</strong> does not run <strong>apt-get update</strong> at the start of a package build, which can cause a build failure if you are using a development release template. You will need to run <strong>apt-get update</strong> in the template yourself (e. g. using <strong>--setup-commands</strong>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>Create a suitable debootstrap-based container for Debian or Ubuntu template, e. g. a Debian sid one (will be named <strong>adt-sid</strong>):</p>
<pre>
adt-build-lxc debian sid
</pre>
<p>Or an Ubuntu one based on the cloud images (faster than adt-build-lxc's "ubuntu" template with debootstrap, but much bigger):</p>
<pre>
lxc-create -t ubuntu-cloud -n <em>adt-trusty</em> -- -r trusty -d daily
</pre>
<p>Run tests against <em>hello_2.8-4.dsc</em>, using the LXC container <em>adt-sid</em>, and with an ephemeral overlay for speed:</p>
<pre>
adt-run <em>hello_2.8-4.dsc</em> --- adt-virt-lxc -e <em>adt-sid</em>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO adt-virt-lxc&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/adt-run.1.html"><strong>adt-run</strong>(1)</a>, <a href="../man1/adt-build-lxc.1.html"><strong>adt-build-lxc</strong>(1)</a>, <a href="../man1/lxc-create.1.html"><strong>lxc-create</strong>(1)</a>, <a href="../man1/eatmydata.1.html"><strong>eatmydata</strong>(1)</a>, <strong>/usr/share/doc/autopkgtest/</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS AND COPYRIGHT</h2>
        <div class="sectioncontent">
<p><strong>adt-virt-lxc</strong> was written by Robie Basak &lt;robie.basak@canonical.com&gt; and Martin Pitt &lt;martin.pitt@ubuntu.com&gt;.</p><p>This manpage is part of autopkgtest, a tool for testing Debian binary packages.  autopkgtest is Copyright (C) 2006-2013 Canonical Ltd and others.</p><p>See <strong>/usr/share/doc/autopkgtest/CREDITS</strong> for the list of contributors and full copying conditions.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="adt-virt-chroot.1.html"><span aria-hidden="true">&larr;</span> adt-virt-chroot.1: Autopkgtest virtualisation server using a chroot</a></li>
   <li class="next"><a href="adt-virt-null.1.html">adt-virt-null.1: Autopkgtest null virtualisation server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
