<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gpgwrap: A small wrapper for gpg</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A small wrapper for gpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gpgwrap (1) manual">
  <meta name="twitter:description" content="A small wrapper for gpg">
  <meta name="twitter:image" content="https://www.carta.tech/images/signing-party-gpgwrap-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/gpgwrap.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gpgwrap (1) manual" />
  <meta property="og:description" content="A small wrapper for gpg" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/signing-party-gpgwrap-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gpgwrap<small> (1)</small></h1>
        <p class="lead">A small wrapper for gpg</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpgwrap.1.html">
      <span itemprop="name">gpgwrap: A small wrapper for gpg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/signing-party/">
      <span itemprop="name">signing-party</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpgwrap.1.html">
      <span itemprop="name">gpgwrap: A small wrapper for gpg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>gpgwrap</strong> -V</p><p><strong>gpgwrap</strong> -P [-v] [-i] [-a] [-p <em>&lt;file&gt;</em>]</p><p><strong>gpgwrap</strong> -F [-v] [-i] [-a] [-c] [-p <em>&lt;file&gt;</em>] [-o <em>&lt;name&gt;</em>] [--] <em>&lt;file&gt;</em> [<em>&lt;file&gt;</em> ... ]</p><p><strong>gpgwrap</strong> [-v] [-i] [-a] [-p <em>&lt;file&gt;</em>] [-o <em>&lt;name&gt;</em>] [--] <strong>gpg</strong> [gpg options]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The GNU Privacy Guard (<strong>gpg</strong>) supplies the option --passphrase-fd. This instructs <strong>gpg</strong> to read the passphrase from the given file descriptor. Usually this file descriptor is opened before <strong>gpg</strong> is executed via <a href="../man3/execvp.3.html"><strong>execvp</strong>(3)</a></strong>. Exactly that is what <strong>gpgwrap</strong> is doing. The passphrase may be passed to <strong>gpgwrap</strong> in 4 ways:</p><ul>
<li><p>as file path, whereat the passphrase is stored as plain text in the file</p></li><li><p>it is piped from another program to the stdin of <strong>gpgwrap</strong></p></li><li><p>through the <strong>GPGWRAP_PASSPHRASE</strong> environment variable</p></li><li><p><strong>gpgwrap</strong> prompts for it</p></li>
</ul><p>With no precautions the first point undermines the secure infrastructure <strong>gpg</strong> provides. But in pure batch oriented environments this may be what you want. Otherwise if you are willing to enter passphrases once and don't want them to be stored as plain text in a file <strong>gpg-agent</strong> is what you are looking for. Another security objection could be the use of the environment variable <strong>GPGWRAP_PASSPHRASE</strong> which contains the passphrase and may be read by other processes of the same user.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    -V, --version
  </dt>
  <dd>
    <p>Print out version and exit.</p>
  </dd>
  <dt>
    -P, --print
  </dt>
  <dd>
    <p>Get the passphrase and print it mangled to stdout.</p>
  </dd>
  <dt>
    -F, --file
  </dt>
  <dd>
    <p>Read <strong>gpg</strong> commands from the given files. If <em>&lt;file&gt;</em> is - it is read from stdin. Exactly one command per line is expected. The given line is handled in the following way:</p><ul>
<li><p>In the first place the passphrase is mangled. This means that unusual characters are replaced by their backslash escaped octal numbers.</p></li><li><p>Secondly the mangled passphrase is stored in the environment variable <strong>GPGWRAP_PASSPHRASE</strong>.</p></li><li><p>\*(Q"exec gpgwrap -- \*(Q" is prepended to each line, before the result is passed as argument to \*(Q"sh -c\*(Q".</p></li>
</ul>
  </dd>
  <dt>
    -h, --help
  </dt>
  <dd>
    <p>Print out usage information.</p>
  </dd>
  <dt>
    -v, --verbose
  </dt>
  <dd>
    <p>Increase verbosity level.</p>
  </dd>
  <dt>
    -i, --interactive
  </dt>
  <dd>
    <p>Always prompt for passphrase (ignores -p and the environment variable).</p>
  </dd>
  <dt>
    -a, --ask-twice
  </dt>
  <dd>
    <p>Ask twice if prompting for a passphrase.</p>
  </dd>
  <dt>
    -c, --check-exit-code
  </dt>
  <dd>
    <p>While reading gpg commands from a file, <strong>gpgwrap</strong> ignores per default the exit code of its child processes. This option enables the check of the exit code. If a child terminates abnormal or with an exit code not equal 0 <strong>gpgwrap</strong> stops immediately and does return with this exit code. See also section <strong>BUGS</strong>.</p>
  </dd>
  <dt>
    -p <em>&lt;file&gt;</em>, --passphrase-file <em>&lt;file&gt;</em>
  </dt>
  <dd>
    <p>Read passphrase from <em>&lt;file&gt;</em>. If <em>&lt;file&gt;</em> is - it is read from stdin. The passphrase is expected to be in plain text. If this option is not given the passphrase will be taken either from the environment variable <strong>GPGWRAP_PASSPHRASE</strong> or it will be prompted on the controlling tty if the environment variable is not set.</p>
  </dd>
  <dt>
    -o <em>&lt;name&gt;</em>, --option-name <em>&lt;name&gt;</em>
  </dt>
  <dd>
    <p>Specify the name of the \*(Q"--passphrase-fd\*(Q" option understood by the program to be executed. This is useful if you want to use <strong>gpgwrap</strong> in combination with other programs than <strong>gpg</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The given passphrase is subject to several limitations depending on the way it was passed to <strong>gpgwrap</strong>:</p><ul>
<li><p>There is a size limitation: the passphrase should be not larger than some kilobytes (examine the source code for the exact limit).</p></li><li><p><strong>gpgwrap</strong> allows you to use all characters in a passphrase even &#92;000, but this does not mean that <strong>gpg</strong> will accept it. <strong>gpg</strong> may reject your passphrase or may only read a part of it, if it contains characters like &#92;012 (in C also known as &#92;n).</p></li><li><p>If you set the environment variable <strong>GPGWRAP_PASSPHRASE</strong> you should take special care with the backslash character, because <strong>gpgwrap</strong> uses backslash to escape octal numbers, (see option -F). Therefore write backslash itself as octal number: &#92;134.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    
<pre>
<strong>gpgwrap</strong> -p /path/to/a/secret/file  &#92;
<strong>gpg</strong> -c -z 0 --batch --no-tty  &#92;
    --cipher-algo blowfish &lt; infile &gt; outfile

</pre>
<p>Read passphrase from /path/to/a/secret/file and execute <strong>gpg</strong> to do symmetric encryption of infile and write it to outfile.</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p><strong>gpgwrap</strong> -i -a  &#92; <strong>gpg</strong> -c -z 0 --batch --no-tty  &#92;     --cipher-algo blowfish &lt; infile &gt; outfile Same as above except that <strong>gpgwrap</strong> prompts twice for the passphrase.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p><strong>gpgwrap</strong> -F -i - &lt;&lt;EOL <strong>gpg</strong> --decrypt --batch --no-tty &lt; \*(Q"$HOME/infile1\*(Q" &gt; \*(Q"$HOME/outfile1\*(Q" <strong>gpg</strong> --decrypt --batch --no-tty &lt; \*(Q"$HOME/infile2\*(Q" &gt; \*(Q"$HOME/outfile2\*(Q" <strong>gpg</strong> --decrypt --batch --no-tty &lt; \*(Q"$HOME/infile3\*(Q" &gt; \*(Q"$HOME/outfile3\*(Q" <strong>gpg</strong> --decrypt --batch --no-tty &lt; \*(Q"$HOME/infile4\*(Q" &gt; \*(Q"$HOME/outfile4\*(Q" EOL <strong>gpgwrap</strong> prompts for the passphrase and executes four instances of <strong>gpg</strong> to decrypt the given files.</p>
  </dd>
  <dt>
    4.
  </dt>
  <dd>
    <p><strong>GPGWRAP_PASSPHRASE</strong>=\*(Q"mysecretpassphrase\*(Q" export <strong>GPGWRAP_PASSPHRASE</strong> <strong>gpgwrap</strong> -F -c -v /tmp/cmdfile1 - /tmp/cmdfile2 &lt;&lt;EOL <strong>gpg</strong> --decrypt --batch --no-tty &lt; \*(Q"$HOME/infile1\*(Q" &gt; \*(Q"$HOME/outfile1\*(Q" <strong>gpg</strong> --decrypt --batch --no-tty &lt; \*(Q"$HOME/infile2\*(Q" &gt; \*(Q"$HOME/outfile2\*(Q" <strong>gpg</strong> --decrypt --batch --no-tty &lt; \*(Q"$HOME/infile3\*(Q" &gt; \*(Q"$HOME/outfile3\*(Q" <strong>gpg</strong> --decrypt --batch --no-tty &lt; \*(Q"$HOME/infile4\*(Q" &gt; \*(Q"$HOME/outfile4\*(Q" EOL Same as above except that <strong>gpgwrap</strong> gets the passphrase via the environment variable, reads commands additionally from other files and checks the exit code of every <strong>gpg</strong> instance. This means if one <strong>gpg</strong> command has a non zero exit code, no further commands are executed. Furthermore <strong>gpgwrap</strong> produces verbose output.</p>
  </dd>
  <dt>
    5.
  </dt>
  <dd>
    <p><strong>GPGWRAP_PASSPHRASE</strong>=\*(Q"$(<strong>gpgwrap</strong> -P -i -a)\*(Q" export <strong>GPGWRAP_PASSPHRASE</strong></p><p><strong>find</strong> . -maxdepth 1 -type f | while read FILE; do     FILE2=\*(Q"$FILE.bz2.gpg\*(Q"     <strong>bzip2</strong> -c \*(Q"$FILE\*(Q" |     <strong>gpgwrap</strong> <strong>gpg</strong> -c -z 0 --batch --no-tty  &#92;         --cipher-algo blowfish &gt; \*(Q"$FILE2\*(Q" &&     <strong>touch</strong> -r \*(Q"$FILE\*(Q" \*(Q"$FILE2\*(Q" &&     <strong>rm</strong> -f \*(Q"$FILE\*(Q" done Read in passphrase, compress all files in the current directory, encrypt them and keep date from original file.</p>
  </dd>
  <dt>
    6.
  </dt>
  <dd>
    <p><strong>find</strong> . -maxdepth 1 -type f -name '*.bz2.gpg' | <strong>awk</strong> '{     printf(\*(Q"gpg --decrypt --batch --no-tty --quiet \*(Q");     printf(\*(Q"--no-secmem-warning &lt; %s&#92;n\*(Q", $0);     }' | <strong>gpgwrap</strong> -F -i -c - | <strong>bzip2</strong> -d -c - | <strong>grep</strong> -i 'data' Decrypt all *.bz2.gpg files in the current directory, decompress them and print out all occurances of data. If you pipe the result to <strong>less</strong> you get into trouble because <strong>gpgwrap</strong> and <strong>less</strong> try to read from the TTY at the same time. In such a case it is better to use the environment variable to give the passphrase (the example above shows how to do this).</p>
  </dd>
  <dt>
    7.
  </dt>
  <dd>
    <p><strong>GPGWRAP_PASSPHRASE</strong>=\*(Q"$(<strong>gpgwrap</strong> -P -i -a)\*(Q" export <strong>GPGWRAP_PASSPHRASE</strong></p><p><strong>gpgwrap</strong> -P | <strong>ssh</strong> -C -x -P -l user host \*(Q"     <strong>GPGWRAP_PASSPHRASE</strong>=&#92;\*(Q"&#92;$(<strong>cat</strong>)&#92;\*(Q"     ...     \*(Q" Prompt for a passphrase twice and write it to the <strong>GPGWRAP_PASSPHRASE</strong> environment variable.</p>
  </dd>
  <dt>
    8.
  </dt>
  <dd>
    <p><strong>echo</strong> -n \*(Q"Passphrase: \*(Q" <strong>stty</strong> -echo read <strong>GPGWRAP_PASSPHRASE</strong> <strong>echo</strong> <strong>stty</strong> echo export <strong>GPGWRAP_PASSPHRASE</strong> Another way to prompt manually for the passphrase. It was needed in combination with older versions of <strong>gpgwrap</strong>, because they did not upport -P. Be aware that with this method no automatic conversion to backslash escaped octal numbers takes place.</p>
  </dd>
  <dt>
    9.
  </dt>
  <dd>
    <p><strong>echo</strong> \*(Q"mysecretpassphrase\*(Q" | <strong>gpg</strong> --batch --no-tty --passphrase-fd 0  &#92;     --output outfile --decrypt infile Cheap method to give passphrase to <strong>gpg</strong> without <strong>gpgwrap</strong>. Note that you can't use stdin to pass a file to <strong>gpg</strong>, because stdin is already used for the passphrase.</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p><strong>gpg</strong> --batch --no-tty  &#92;     --passphrase-fd 3 3&lt; /path/to/a/secret/file  &#92;     &lt; infile &gt; outfile This is a more advanced method to give the passphrase, it is equivalent to Option -p of <strong>gpgwrap</strong>. This example should at least work with the bash.</p>
  </dd>
  <dt>
    11.
  </dt>
  <dd>
    <p><strong>gpg</strong> --batch --no-tty --passphrase-fd 3  &#92;     3&lt; &lt;(echo \*(Q"mysecretpassphrase\*(Q")  &#92;     &lt; infile &gt; outfile Like above, but the passphrase is given directly. This example should at least work with the bash.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>In version 0.02 of <strong>gpgwrap</strong> the exit code of <strong>gpg</strong> was only returned if <strong>gpgwrap</strong> read the passphrase from a file. Since version 0.03, only -F omits exit code checking by default, but it can be enabled with -c.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gpgwrap&hellip;</h2>
        <div class="sectioncontent">
<p><strong>gpg</strong>, <strong>gpg-agent</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Karsten Scheibler</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gpgv2.1.html"><span aria-hidden="true">&larr;</span> gpgv2.1: Verify openpgp signatures</a></li>
   <li class="next"><a href="gphelp.1.html">gphelp.1: Gp-pari online help script <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
