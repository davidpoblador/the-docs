<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>aj-snapshot: Aj-snapshot</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Aj-snapshot">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="aj-snapshot (1) manual">
  <meta name="twitter:description" content="Aj-snapshot">
  <meta name="twitter:image" content="https://www.carta.tech/images/aj-snapshot-aj-snapshot-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/aj-snapshot.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="aj-snapshot (1) manual" />
  <meta property="og:description" content="Aj-snapshot" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/aj-snapshot-aj-snapshot-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">aj-snapshot<small> (1)</small></h1>
        <p class="lead">Aj-snapshot</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/aj-snapshot.1.html">
      <span itemprop="name">aj-snapshot: Aj-snapshot</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/aj-snapshot/">
      <span itemprop="name">aj-snapshot</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/aj-snapshot.1.html">
      <span itemprop="name">aj-snapshot: Aj-snapshot</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>aj-snapshot </strong>[ <strong>-adfjqrx</strong> ] [ <strong>-p </strong><em>polling_interval</em> ] [ <strong>-i </strong><em>client_name</em> ]... [ <em>FILE</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Aj-snapshot is a small program that can be used to make snapshots of the connections made between JACK and/or ALSA clients. Because JACK can provide both audio and MIDI support to programs, aj-snapshot can store both types of connections for JACK. ALSA, on the other hand, only provides routing facilities for MIDI clients. If you call aj-snapshot without any options, aj-snapshot will store all current ALSA <strong>and</strong> JACK connections to <em>FILE</em>. The file will be an XML file, and you can use a text-editor if you want to edit it manually.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-a </strong>or <strong>--alsa</strong></p><ul>
<li><p>Only store or restore ALSA midi connections. Also works in daemon mode.</p></li>
</ul><p><strong>-d </strong>or <strong>--daemon</strong></p><ul>
<li><p>Run aj-snapshot in daemon mode. Aj-snapshot will first try to restore the connections from the specified snapshot file. After this, it will wait for new ports to be registered with ALSA or JACK. Every second by default, aj-snapshot will check if new ports were registered in ALSA or JACK. When this is the case, it will try to restore the connections from your snapshot file. If you start aj-snapshot in daemon mode, you don't need to specify the <strong>-r</strong>,<strong>--restore</strong> flag as it is implied anyway.</p></li><li><p>If you send the HUP signal to the daemon, the daemon will reload the snapshot file. This gives you the possibility to trigger a connections restore. For an example on how to do this, see the EXAMPLES section below. When you combine the daemon mode with the <strong>-x</strong>,<strong>--remove</strong> option, sending the HUP signal to the daemon will clear all connections before restoring.</p></li><li><p>When the JACK server is stopped (or crashes) while aj-snapshot runs in daemon mode, aj-snapshot will try to keep running. When the JACK server is started again later, aj-snapshot will reattach automatically and restore your connections when needed.</p></li>
</ul><p><strong>-f </strong>or <strong>--force</strong></p><ul>
<li><p>When you try to save a snapshot over an existing file, aj-snapshot will ask you if you want to overwrite that file. With this option, you can force aj-snapshot to overwrite that file.</p></li>
</ul><p><strong>-j </strong>or <strong>--jack</strong></p><ul>
<li><p>Only store or restore JACK audio and midi connections. Also works in daemon mode.</p></li>
</ul><p><strong>-p </strong><em> interval</em></p><ul>
<li><p>Whenever a program registers a port with ALSA or JACK, aj-snapshot will see if there are connections in the snapshot file that should be restored. By default, aj-snapshot will check (poll) if there are new ports every second (1000 milliseconds). With this option you can choose how often aj-snapshot should check for new ports. The value of <em>interval</em> should be specified in milliseconds.</p></li>
</ul><p><strong>-q </strong>or <strong>--quiet</strong></p><ul>
<li><p>Don't print any information about the connections that are stored or restored.</p></li>
</ul><p><strong>-r </strong>or <strong>--restore</strong></p><ul>
<li><p>When you specify the <strong>-r</strong> flag, aj-snapshot will try to restore all ALSA and JACK connections from <em>FILE</em>. (without it, aj-snapshot will try to <strong>store</strong> connections to <em>FILE</em>). You can combine this option with the <strong>-a</strong> or <strong>-j</strong> options, if you want to restore ALSA or JACK connections only.</p></li>
</ul><p><strong>-x </strong>or <strong>--remove</strong></p><ul>
<li><p>The <strong>-x</strong> option can be used when restoring connections, or when running in daemon mode. With this option, aj-snapshot will remove all existing connections before restoring the snapshot file. When you combine it with the <strong>-a</strong> or <strong>-j</strong> option, only the connections for the specific subsystem (ALSA or JACK) will be removed. Without the <strong>-x</strong> option, aj-snapshot will try to restore connections on top of the connections that are already active.</p></li><li><p>There is one more way in which you can use the <strong>-x</strong> option. If you call aj-snapshot without the <em>FILE</em> argument, you can use the <strong>-x</strong> option to remove all existing ALSA and JACK connections (without doing anything else). As before you can combine it with the <strong>-a</strong> or <strong>-j</strong> options.</p></li>
</ul><p><strong>-i </strong><em> client_name</em></p><ul>
<li><p>You can use this option to name a client that should be ignored by aj-snapshot. You should write the exact name of the client after the -i option. If that name contains spaces, or other characters that have special meaning to the shell, you should put the name between single (safest) or double quotes. To know the exact name of a client, you could save a snapshot and look up the name in the snapshot file. If you want to ignore multiple clients, you have to repeat the <strong>-i</strong> option with different client names (the maximum is 50 clients).</p></li>
</ul><p><strong>-h </strong>or <strong>--help</strong><strong></strong></p><ul>
<li><p>Print a short help message</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p><strong>aj-snapshot test.snap</strong></p><ul>
<li><p>Stores a snapshot of all current ALSA and JACK connections to a file called "test.snap". If that file already exists, aj-snapshot will ask you if you want to overwrite that file.</p></li>
</ul><p><strong>aj-snapshot -r test.snap</strong></p><ul>
<li><p>Restores all ALSA and JACK connections from the file "test.snap". This will leave any other active connections intact.</p></li>
</ul><p><strong>aj-snapshot -xr test.snap</strong></p><ul>
<li><p>Restore all ALSA and JACK connections from the file "test.snap", but remove all existing connections first.</p></li>
</ul><p><strong>aj-snapshot -a test.snap</strong></p><ul>
<li><p>Store all current ALSA connections to "test.snap".</p></li>
</ul><p><strong>aj-snapshot -rj test.snap</strong></p><ul>
<li><p>Restore all JACK connections from "test.snap". This means that ALSA connections that might be stored in the file won't be restored.</p></li>
</ul><p><strong>aj-snapshot -qfj test.snap</strong></p><ul>
<li><p>Store all current JACK connections to "test.snap". Don't print any info on standard out (be quiet), and forcibly overwrite "test.snap" if it already exists.</p></li>
</ul><p><strong>aj-snapshot -ax</strong></p><ul>
<li><p>Remove all ALSA connections</p></li>
</ul><p><strong>aj-snapshot -d test.snap &</strong></p><ul>
<li><p>Run aj-snapshot in daemon mode and make it a background process (&). Whenever a new ALSA or JACK client registers a port, connections from test.snap will be restored.</p></li>
</ul><p><strong>aj-snapshot -djx test.snap &</strong></p><ul>
<li><p>Run aj-snapshot in daemon mode for the JACK connections in "test.snap". Remove all existing JACK connections whenever the connections from test.snap are restored.</p></li>
</ul><p>1) <strong>aj-snapshot -d test.snap &</strong></p><p>2) <strong>aj-snapshot -f test.snap</strong></p><p>3) <strong>kill -HUP $(pidof aj-snapshot)</strong></p><ul>
<li><p>1) First start up aj-snapshot in daemon mode with the file "test.snap".</p><p>2) After some connection changes, a second instance of aj-snapshot (which is not run in daemon mode) overwrites that file with the new connections state.</p><p>3) Send the HANGUP signal to the daemon to make it reload the file with the new connections state (see 'man kill', and 'man pidof').</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Lieven Moors and Jari Suominen</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>To report aj-snapshot bugs, or if you have feature requests:</p><p>Aj-snapshot home page:</p><p>Clone the git repository:</p><p>git clone</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2009-2012 Lieven Moors and Jari Suominen.</p><p>License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.</p><p>This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="aj.1.html"><span aria-hidden="true">&larr;</span> aj.1: Aj, aj5  command-line launchers for load-time weaving</a></li>
   <li class="next"><a href="aj5.1.html">aj5.1: Aj, aj5  command-line launchers for load-time weaving <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
