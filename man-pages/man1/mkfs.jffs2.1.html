<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mkfs.jffs2: Create a jffs2 file system image from directory</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create a jffs2 file system image from directory">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mkfs.jffs2 (1) manual">
  <meta name="twitter:description" content="Create a jffs2 file system image from directory">
  <meta name="twitter:image" content="https://www.carta.tech/images/mtd-utils-mkfs.jffs2-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mkfs.jffs2.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mkfs.jffs2 (1) manual" />
  <meta property="og:description" content="Create a jffs2 file system image from directory" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mtd-utils-mkfs.jffs2-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mkfs.jffs2<small> (1)</small></h1>
        <p class="lead">Create a jffs2 file system image from directory</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mkfs.jffs2.1.html">
      <span itemprop="name">mkfs.jffs2: Create a jffs2 file system image from directory</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mtd-utils/">
      <span itemprop="name">mtd-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mkfs.jffs2.1.html">
      <span itemprop="name">mkfs.jffs2: Create a jffs2 file system image from directory</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mkfs.jffs2</strong> [ <strong>-p,--pad[=SIZE]</strong> ] [ <strong>-r,-d,--root</strong> <em>directory</em> ] [ <strong>-s,--pagesize=SIZE</strong> ] [ <strong>-e,--eraseblock=SIZE</strong> ] [ <strong>-c,--cleanmarker=SIZE</strong> ] [ <strong>-n,--no-cleanmarkers</strong> ] [ <strong>-o,--output</strong> <em>image.jffs2</em> ] [ <strong>-l,--little-endian</strong> ] [ <strong>-b,--big-endian</strong> ] [ <strong>-D,--devtable=FILE</strong> ] [ <strong>-f,--faketime</strong> ] [ <strong>-q,--squash</strong> ] [ <strong>-U,--squash-uids</strong> ] [ <strong>-P,--squash-perms</strong> ] [ <strong>--with-xattr</strong> ] [ <strong>--with-selinux</strong> ] [ <strong>--with-posix-acl</strong> ] [ <strong>-m,--compression-mode=MODE</strong> ] [ <strong>-x,--disable-compressor=NAME</strong> ] [ <strong>-X,--enable-compressor=NAME</strong> ] [ <strong>-y,--compressor-priority=PRIORITY:NAME</strong> ] [ <strong>-L,--list-compressors</strong> ] [ <strong>-t,--test-compression</strong> ] [ <strong>-h,--help</strong> ] [ <strong>-v,--verbose</strong> ] [ <strong>-V,--version</strong> ] [ <strong>-i,--incremental</strong> <em>image.jffs2</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The program <strong>mkfs.jffs2</strong> creates a JFFS2 (Second Journalling Flash File System) file system image and writes the resulting image to the file specified by the <strong>-o</strong> option or by default to the standard output, unless the standard output is a terminal device in which case mkfs.jffs2 will abort.</p><p>The file system image is created using the files and directories contained in the directory specified by the option <strong>-r</strong> or the present directory, if the <strong>-r</strong> option is not specified.</p><p>Each block of the files to be placed into the file system image are compressed using one of the available compressors depending on the selected compression mode.</p><p>File systems are created with the same endianness as the host, unless the <strong>-b</strong> or <strong>-l</strong> options are specified.  JFFS2 driver in the 2.4 Linux kernel only supported images having the same endianness as the CPU. As of 2.5.48, the kernel can be changed with a #define to accept images of the non-native endianness. Full bi-endian support in the kernel is not planned.</p><p>It is unlikely that JFFS2 images are useful except in conjuction with the MTD (Memory Technology Device) drivers in the Linux kernel, since the JFFS2 file system driver in the kernel requires MTD devices.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Options that take SIZE arguments can be specified as either decimal (e.g., 65536), octal (0200000), or hexidecimal (0x1000).</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-p, --pad[=SIZE]</strong></p>
  </dt>
  <dd>
    <p>Pad output to SIZE bytes with 0xFF.  If SIZE is not specified, the output is padded to the end of the final erase block.</p>
  </dd>
  <dt>
    <p><strong>-r, -d, --root=DIR</strong></p>
  </dt>
  <dd>
    <p>Build file system from directory DIR.  The default is the current directory.</p>
  </dd>
  <dt>
    <p><strong>-s, --pagesize=SIZE</strong></p>
  </dt>
  <dd>
    <p>Use page size SIZE.  The default is 4 KiB.  This size is the maximum size of a data node.  Set according to target system's memory management page size (NOTE: this is NOT related to NAND page size).</p>
  </dd>
  <dt>
    <p><strong>-e, --eraseblock=SIZE</strong></p>
  </dt>
  <dd>
    <p>Use erase block size SIZE.  The default is 64 KiB.  If you use a erase block size different than the erase block size of the target MTD device, JFFS2 may not perform optimally. If the SIZE specified is below 4096, the units are assumed to be KiB.</p>
  </dd>
  <dt>
    <p><strong>-c, --cleanmarker=SIZE</strong></p>
  </dt>
  <dd>
    <p>Write \'CLEANMARKER\' nodes with the size specified. It is not normally appropriate to specify a size other than the default 12 bytes.</p>
  </dd>
  <dt>
    <p><strong>-n, --no-cleanmarkers</strong></p>
  </dt>
  <dd>
    <p>Do not write \'CLEANMARKER\' nodes to the beginning of each erase block. This option can be useful for creating JFFS2 images for use on NAND flash, and for creating images which are to be used on a variety of hardware with differing eraseblock sizes.</p>
  </dd>
  <dt>
    <p><strong>-o, --output=FILE</strong></p>
  </dt>
  <dd>
    <p>Write JFFS2 image to file FILE.  Default is the standard output.</p>
  </dd>
  <dt>
    <p><strong>-l, --little-endian</strong></p>
  </dt>
  <dd>
    <p>Create a little-endian JFFS2 image.  Default is to make an image with the same endianness as the host.</p>
  </dd>
  <dt>
    <p><strong>-b, --big-endian</strong></p>
  </dt>
  <dd>
    <p>Create a big-endian JFFS2 image.  Default is to make an image with the same endianness as the host.</p>
  </dd>
  <dt>
    <p><strong>-D, --devtable=FILE</strong></p>
  </dt>
  <dd>
    <p>Use the named FILE as a device table file, for including devices and changing permissions in the created image when the user does not have appropriate permissions to create them on the file system used as source.</p>
  </dd>
  <dt>
    <p><strong>-f, --faketime</strong></p>
  </dt>
  <dd>
    <p>Change all file timestamps to \'0\' for regression testing.</p>
  </dd>
  <dt>
    <p><strong>-q, --squash</strong></p>
  </dt>
  <dd>
    <p>Squash permissions and owners, making all files be owned by root and removing write permission for \'group\' and \'other\'.</p>
  </dd>
  <dt>
    <p><strong>-U, --squash-uids</strong></p>
  </dt>
  <dd>
    <p>Squash owners making all files be owned by root.</p>
  </dd>
  <dt>
    <p><strong>-P, --squash-perms</strong></p>
  </dt>
  <dd>
    <p>Squash permissions, removing write permission for \'group\' and \'other\'.</p>
  </dd>
  <dt>
    <p><strong>--with-xattr</strong></p>
  </dt>
  <dd>
    <p>Enables xattr, stuff all xattr entries into jffs2 image file.</p>
  </dd>
  <dt>
    <p><strong>--with-selinux</strong></p>
  </dt>
  <dd>
    <p>Enables xattr, stuff only SELinux Labels into jffs2 image file.</p>
  </dd>
  <dt>
    <p><strong>--with-posix-acl</strong></p>
  </dt>
  <dd>
    <p>Enable xattr, stuff only POSIX ACL entries into jffs2 image file.</p>
  </dd>
  <dt>
    <p><strong>-m, --compression-mode=MODE</strong></p>
  </dt>
  <dd>
    <p>Set the default compression mode. The default mode is <strong>priority</strong> which tries the compressors in a predefinied order and chooses the first successful one. The alternatives are: <strong>none</strong> (mkfs will not compress) and <strong>size</strong> (mkfs will try all compressor and chooses the one which have the smallest result).</p>
  </dd>
  <dt>
    <p><strong>-x, --disable-compressor=NAME</strong></p>
  </dt>
  <dd>
    <p>Disable a compressor. Use <strong>-L</strong> to see the list of the available compressors and their default states.</p>
  </dd>
  <dt>
    <p><strong>-X, --enable-compressor=NAME</strong></p>
  </dt>
  <dd>
    <p>Enable a compressor. Use <strong>-L</strong> to see the list of the available compressors and their default states.</p>
  </dd>
  <dt>
    <p><strong>-y, --compressor-priority=PRIORITY:NAME</strong></p>
  </dt>
  <dd>
    <p>Set the priority of a compressor. Use <strong>-L</strong> to see the list of the available compressors and their default priority. Priorities are used by priority compression mode.</p>
  </dd>
  <dt>
    <p><strong>-L, --list-compressors</strong></p>
  </dt>
  <dd>
    <p>Show the list of the available compressors and their states.</p>
  </dd>
  <dt>
    <p><strong>-t, --test-compression</strong></p>
  </dt>
  <dd>
    <p>Call decompress after every compress - and compare the result with the original data -, and some other check.</p>
  </dd>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>Display help text.</p>
  </dd>
  <dt>
    <p><strong>-v, --verbose</strong></p>
  </dt>
  <dd>
    <p>Verbose operation.</p>
  </dd>
  <dt>
    <p><strong>-V, --version</strong></p>
  </dt>
  <dd>
    <p>Display version information.</p>
  </dd>
  <dt>
    <p><strong>-i, --incremental=FILE</strong></p>
  </dt>
  <dd>
    <p>Generate an appendage image for FILE. If FILE is written to flash and flash is appended with the output, then it seems as if it was one thing.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The format and grammar of the device table file does not allow it to create symbolic links when the symbolic links are not already present in the root working directory.</p><p>However, symbolic links may be specified in the device table file using the <em>l</em> type for the purposes of setting their permissions and ownership.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>JFFS2 limits device major and minor numbers to 8 bits each.  Some consider this a bug.</p><p><strong>mkfs.jffs2</strong> does not properly handle hard links in the input directory structure. Currently, hard linked files will be expanded to multiple identical files in the output image.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>David Woodhouse</p><p>Manual page written by David Schleef &lt;ds@schleef.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mkfs.jffs2&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/mkfs.8.html"><strong>mkfs</strong>(8)</a>, <strong>mkfs.jffs</strong>(1), <strong>fakeroot</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mkfs.cpm.1.html"><span aria-hidden="true">&larr;</span> mkfs.cpm.1: Make a cp/m file system</a></li>
   <li class="next"><a href="mkfs.s3ql.1.html">mkfs.s3ql.1: Create an s3ql file system <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
