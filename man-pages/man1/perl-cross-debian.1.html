<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>perl-cross-debian: Long term maintenance of cross-build support for the debian configuration of perl</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Long term maintenance of cross-build support for the debian configuration of perl">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="perl-cross-debian (1) manual">
  <meta name="twitter:description" content="Long term maintenance of cross-build support for the debian configuration of perl">
  <meta name="twitter:image" content="https://www.carta.tech/images/perl-cross-debian-perl-cross-debian-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/perl-cross-debian.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="perl-cross-debian (1) manual" />
  <meta property="og:description" content="Long term maintenance of cross-build support for the debian configuration of perl" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/perl-cross-debian-perl-cross-debian-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">perl-cross-debian<small> (1)</small></h1>
        <p class="lead">Long term maintenance of cross-build support for the debian configuration of perl</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/perl-cross-debian.1.html">
      <span itemprop="name">perl-cross-debian: Long term maintenance of cross-build support for the debian configuration of perl</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/perl-cross-debian/">
      <span itemprop="name">perl-cross-debian</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/perl-cross-debian.1.html">
      <span itemprop="name">perl-cross-debian: Long term maintenance of cross-build support for the debian configuration of perl</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-debian</strong> [<strong>--rootdir=</strong><strong>DIRECTORY</strong>] <strong>--variant=</strong><strong></strong><em>STRING</em> <strong>perl-cross-debian</strong> <strong>--clean</strong> <strong>perl-cross-debian</strong> [{<strong>-h</strong>&nbsp;|&nbsp;<strong>--help</strong>} | {<strong>-v</strong>&nbsp;|&nbsp;<strong>--version</strong>}]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-debian</strong> supports the long term maintenance of cross-build support for the Debian configuration of perl.</p><p><strong>perl-cross-debian</strong> is not expected to be run directly on the command line, it is executed by the modified debian/rules of a Debian source package of perl, within the constraints of a cross-build. <strong>perl-cross-debian</strong> uses the cross-building environment set by <strong>dpkg-architecture -aARCH</strong> to provide essential configuration values for the requested architecture to avoid executing cross-built binaries within the cross-build. Full support is limited to specific versions of perl already packaged in Debian and only for selected architectures.</p><p><strong>perl-cross-debian</strong> copies pre-produced config files into the current perl build tree to prevent the build from needing to execute test binaries during the configuration stage by providing the values of the tests in advance. <strong>perl-cross-debian</strong> then extracts values from the cached files to update the build information and package Makefiles.</p><p><strong>perl-cross-debian</strong> then relies on a patched Makefile.SH to call the host perl interpreter instead of the perl interpreter being built internally.</p><p>See <em>Running the cross build</em> for details of how to prepare the Debian packages of perl for cross-building for the one of the currently supported host architectures. (Patches to apply to supported Debian versions of perl are included in /usr/share/perl-cross-debian/patches).</p><p>See <em>perl-cross-staging (1)</em> for information on how to extend <strong>perl-cross-debian</strong> to other host architectures and other versions of perl.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND</h2>
        <div class="sectioncontent">
<p><strong>--variant </strong><strong></strong><em>VARIANT</em></p><p>Name of the current perl build variant (static, debug or shared), passed in via debian/rules, must be specified once for each iteration.</p><p><strong>--clean</strong></p><p>Runs the <strong>perl-cross-debian</strong> clean target and exits zero. <strong>--clean</strong> overrides any <strong>--variant</strong> command - the clean operation does not depend on the current variant.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>--rootdir </strong><strong></strong><em>DIRECTORY</em></p><p>Debug support for testing with unreleased config files, uses the files from the rootdir instead of looking in the /usr/share/perl-cross-debian/$(DEB_HOST_GNU_TYPE)/$(PERL_VERSION) directory. ($(PERL_VERSION) in this instance is the output of <strong>/bin/bash debian/config.debian --full-version</strong>.)</p><p><strong>-?</strong>, <strong>-h</strong>, <strong>--help</strong>, <strong>--version</strong></p><p>Show summary of options and the version information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-debian</strong> implements a safeguard that the perl interpreter to be used during the cross-build is the same upstream version as the perl interpreter to be cross-built due to limitations of DynaLoader.pm :</p>
<pre>
arm-linux-gnueabi-gcc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -D_FORTIFY_SOURCE=2 -g -O2 -fstack-protector
 --param=ssp-buffer-size=4 -Wformat -Werror=format-security -fno-strict-aliasing -pipe -I/usr/local/include
 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=&#92;"3.39_02&#92;" -DXS_VERSION=&#92;"3.39_02&#92;"
 -fPIC "-I../.."   Cwd.c
Running Mkbootstrap for Cwd ()
DynaLoader object version 1.13 does not match $DynaLoader::VERSION 1.14 at ../../lib/DynaLoader.pm line 86.
Compilation failed in require at ../../lib/ExtUtils/Mkbootstrap.pm line 27.

</pre>
<p>Instead, <strong>perl-cross-debian</strong> dies with a version mismatch and fails the cross-build. Ensure that the installed perl interpreter is upgraded before testing a cross-build of the updated perl source code (or use a chroot). When using a chroot and old-style dpkg-cross dependencies, consider preparing at least the zlib and bzip2 dependencies outside the chroot as a new version of perl is frequently not installable with lots of perl modules such as those used by dpkg-cross. e.g. zlib1g-dev-armel-cross and libbz2-dev-armel-cross as well as libdb-dev-armel-cross and libgdbm-dev-armel-cross.</p>
<pre>
sudo xapt -a armel -b zlib1g-dev libbz2-dev libdb-dev libgdbm-dev

</pre>
<p>The -cross packages are in /var/lib/xapt/output and need to be copied into the chroot and installed with <strong>dpkg -i ./*</strong></p><p><strong>perl-cross-debian</strong> also implements a safeguard to prevent cross-builds when <strong>DEB_BUILD_OPTIONS="nocheck"</strong> has not been set prior to starting the build. Cross-build failures due to the running of test code within the perl build are not always easy to identify, so <strong>perl-cross-debian</strong> checks for this build option and fails the cross-build if it is not set. (The check occurs inside <strong>perl-cross-debian</strong> so the clean target will have been run before the check is made.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RUNNING THE CROSS BUILD</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-debian</strong> needs some changes to the perl package before cross-building, so ensure that Makefile.SH and debian/rules are both patched and that the cross dependencies and cross compiler are installed.</p><p>Patches are carried in the <strong>perl-cross-debian</strong> package in /usr/share/perl-cross-debian/patches.</p><p><strong>debuild</strong> is preferred as this will provide a build log and run lintian (by default) which means that the built packages will be checked to ensure that the binaries have been correctly compiled for the cross architecture (amongst the normal checks). Run the cross build with:</p>
<pre>
DEB_BUILD_OPTIONS="nocheck" debuild -aarmel -us -uc -d

</pre>
<p>Note the use of <em>the -d option</em> as dpkg cannot check cross-build dependencies until MutiArch -dev packages are in use and the requirement for DEB_BUILD_OPTIONS to disable the test suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTED VERSIONS AND ARCHITECTURES</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-debian</strong> support is patchy but can be improved. Only specific architectures at specific versions are supported - if you do not find the files for the requested version in the directory of the architecture required, see perl-cross-staging (1) for information on how this information can be added and also for details of ongoing work with perl upstream.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CLEAN TARGET SUPPORT</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-debian</strong> includes support for a custom clean target for cross-builds to ensure that version-specific content generated during the cross-build is cleaned up before dpkg-source tries to verify the source package. If there are additional files which need to be cleaned, file a bug against <strong>perl-cross-debian</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTENSION INSTALLATION</h2>
        <div class="sectioncontent">
<p>The current method of building and installing the extensions does need testing and improvement. Whilst the main emphasis for a perl cross build is to support bootstrapping by having the normal perl interpreter available instead of just miniperl, there may be less emphasis on the correct functioning of the extensions and modules normally packaged by a native perl build. Problems relating to any use of perl extensions and modules when the cross built perl packages are installed should be reported as bugs in <strong>perl-cross-debian</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTENDING PERL-CROSS-DEBIAN</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-debian</strong> provides some POD documentation of how to extend support to new architectures and how to update existing support for new versions of perl.</p><p>See /usr/share/doc/perl-cross-debian/converting-native.pod and /usr/share/doc/perl-cross-debian/new-arch.pod</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Neil Williams</strong> &lt;codehelp@debian.org&gt;</p><p>Wrote this manpage for the Debian system.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2012 Neil Williams</p><p>This manual page was written for the Debian system (and may be used by others).</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2 or (at your option) any later version published by the Free Software Foundation.</p><p>On Debian systems, the complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="perfexplorer_configure.1.html"><span aria-hidden="true">&larr;</span> perfexplorer_configure.1: Links perfexplorer to your perfdmf database.</a></li>
   <li class="next"><a href="perl-cross-staging.1.html">perl-cross-staging.1: Long term maintenance of cross-build support for the debian configuration of perl <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
