<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>commit-patch: Commit patches to darcs, git, mercurial, bazaar, monotone, subversion, or cvs repositories</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Commit patches to darcs, git, mercurial, bazaar, monotone, subversion, or cvs repositories">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="commit-patch (1) manual">
  <meta name="twitter:description" content="Commit patches to darcs, git, mercurial, bazaar, monotone, subversion, or cvs repositories">
  <meta name="twitter:image" content="https://www.carta.tech/images/commit-patch-commit-patch-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/commit-patch.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="commit-patch (1) manual" />
  <meta property="og:description" content="Commit patches to darcs, git, mercurial, bazaar, monotone, subversion, or cvs repositories" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/commit-patch-commit-patch-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">commit-patch<small> (1)</small></h1>
        <p class="lead">Commit patches to darcs, git, mercurial, bazaar, monotone, subversion, or cvs repositories</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/commit-patch.1.html">
      <span itemprop="name">commit-patch: Commit patches to darcs, git, mercurial, bazaar, monotone, subversion, or cvs repositories</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/commit-patch/">
      <span itemprop="name">commit-patch</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/commit-patch.1.html">
      <span itemprop="name">commit-patch: Commit patches to darcs, git, mercurial, bazaar, monotone, subversion, or cvs repositories</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>commit-patch [<strong>--amend</strong>] [<strong>-m</strong> <em>message</em>] [<strong>-F</strong> <em>message-file</em>] [<strong>-v</strong>] [<strong>--dry-run</strong>] [<em>patch-file</em>]</p><p>commit-partial [<strong>--amend</strong>] [<strong>-v</strong>] [<strong>--dry-run</strong>] [<strong>--retry</strong>] [<em>file</em> ...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Normally version control systems don't allow fine grained commits. <strong>commit-patch</strong> allows the user to control <em>exactly</em> what gets committed (or \*(L"recorded\*(R", in <em>Darcs</em> parlance) by letting the user supply a patch to be committed rather than using the files in the current working directory. If <em>patch-file</em> is not supplied on the command line then the patch will be read from standard input.</p><p><strong>commit-partial</strong> is like commit-patch except that it will create a patch from the current changes in the current working directory and launch your editor so that you can edit the patch and the commit message (using the <strong>\s-1VISUAL\s0</strong> environment variable, or if that isn't set the <strong>\s-1EDITOR\s0</strong> environment variable, or, if <em>that</em> isn't set, <strong>vi</strong>. Any files you specify will be passed to your version control's diff command.</p><p><strong>commit-patch</strong> currently supports the following version control systems: <strong></strong><strong>Darcs</strong><strong></strong>, <strong></strong><strong>Git</strong><strong></strong>, <strong></strong><strong>Mercurial</strong><strong></strong>, <strong></strong><strong>Bazaar</strong><strong></strong>, <strong></strong><strong>Monotone</strong><strong></strong>, <strong></strong><strong>Subversion</strong><strong></strong>, and <strong></strong><strong>\s-1CVS\s0</strong><strong></strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-a</strong>, <strong>--amend</strong> - Amend a previous commit. Currently only <strong></strong><strong>Darcs</strong><strong></strong> and <strong></strong><strong>Git</strong><strong></strong> support this option. When used with <strong></strong><strong>Git</strong><strong></strong> it will amend the previous commit. When used with <strong></strong><strong>Darcs</strong><strong></strong>, <strong></strong><strong>Darcs</strong><strong></strong> will ask you which patch you want to amend.</p><p><strong>-m</strong>, <strong>--message</strong>=<em>message</em> - An optional <em>message</em> to use as the commit text. If the message is multiple lines then <em>Darcs</em>, <em>Git</em>, and <em>Mercurial</em> will use the first line as the patch name and the rest as commit details. If the \*(C`-m\*(C' option is not specified then the result will be the same as whatever the underlying version control system would do if you didn't specify a message name on the command line. That is, <strong>commit-patch</strong> does not interfere with the patch naming process of the underlying version control system; <em>Darcs</em> will still ask you interactively; <em>\s-1CVS\s0</em> and <em>Subversion</em> will still launch your editor.</p><p><strong>-F</strong>, <strong>--message-file</strong>=<em>filename</em> - You can optionally get the commit message from a file. This is generally only useful for scripting <strong>commit-patch</strong>.</p><p><strong>-v</strong>, <strong>--verbose</strong> - Turn on debugging. This will print the commands that <strong>commit-patch</strong> is running to get the patch committed.</p><p><strong>-n</strong>, <strong>--dry-run</strong> - Turn on more paranoid debugging. This will print the commands that <strong>commit-patch</strong> will run to get the patch committed but it won't actually run those commands.</p><p><strong>-r</strong>, <strong>--retry</strong> - Only available in <em>commit-partial</em>. This will reload the last patch that was attempted to be committed into your editor instead of the current changes in the directory. This is for cases where the patch fails to commit for some reason and you want to try to fix it instead of starting over.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p><strong>commit-patch</strong> works by manipulating the working directory using \*(C`patch\*(C', \*(C`interdiff\*(C', and the underlying version control system's \*(C`diff\*(C'.  If any part of the process fails, <strong>commit-patch</strong> will attempt to restore the working directory to the state it was before the command was run. Any errors from the underlying version control system or from patch will be printed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>The patch specified on the command line must originate from the same place as the current directory. That is, the following will not work:</p>
<pre>
  cvs diff -u &gt; ../a.patch
  cd ..
  commit-patch a.patch
</pre>
<p>You <strong>must</strong> run <strong>commit-patch</strong> from the same directory that the original patch was based from.</p><p><em>Darcs</em>, <em>Git</em> and <em>Mercurial</em> put \*(C`a/\*(C' and \*(C`b/\*(C' in front of all the paths in the diff output. Don't worry about this; <strong>commit-patch</strong> takes it into account.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Typical <em>\s-1CVS\s0</em> usage:</p><p>  cvs diff -u &gt; a.patch   emacs a.patch   commit-patch a.patch</p><p><em>Mercurial</em> usage with a message specified:</p><p>  hg diff &gt; a.patch   emacs a.patch   commit-patch -m "This is a commit message" a.patch</p><p><em>Darcs</em> usage with a multi-line message specified:</p><p>  darcs diff -u &gt; a.patch   emacs a.patch   commit-patch -m &apos;This is the patch name   Here are the patch details&apos; a.patch</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<ul>
<li><p>David Caldwell &lt;david@porkrind.org&gt;</p></li><li><p>Jim Radford &lt;radford@blackbean.org&gt;</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2003-2013 by David Caldwell and Jim Radford.</p><p><strong>commit-patch</strong> is distributed under the \s-1GNU\s0 General Public License. See the \s-1COPYING\s0 file in the distribution for more details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p><strong>commit-patch</strong> was originally called \*(C`cvs-commit-patch\*(C' and was a bash script written in 2003 by Jim Radford (with David Caldwell in the room drawing the procedure on a white board). David later converted it do \*(C`darcs-commit-patch\*(C', then integrated them back together into <strong>commit-patch</strong>. <em>Mercurial</em> support was then added. At some point David translated from bash into perl because funky bash quoting issues were causing problems with a repository that had a space in one of the directory names.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="commit-partial.1.html"><span aria-hidden="true">&larr;</span> commit-partial.1: Commit patches to darcs, git, mercurial, bazaar, monotone, subversion, or cvs repositories</a></li>
   <li class="next"><a href="commit_agent.1.html">commit_agent.1: Generic ctn manual page <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
