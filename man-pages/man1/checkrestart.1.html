<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>checkrestart: Check which processes need to be restarted after an upgrade</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Check which processes need to be restarted after an upgrade">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="checkrestart (1) manual">
  <meta name="twitter:description" content="Check which processes need to be restarted after an upgrade">
  <meta name="twitter:image" content="https://www.carta.tech/images/debian-goodies-checkrestart-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/checkrestart.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="checkrestart (1) manual" />
  <meta property="og:description" content="Check which processes need to be restarted after an upgrade" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/debian-goodies-checkrestart-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">checkrestart<small> (1)</small></h1>
        <p class="lead">Check which processes need to be restarted after an upgrade</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/checkrestart.1.html">
      <span itemprop="name">checkrestart: Check which processes need to be restarted after an upgrade</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/debian-goodies/">
      <span itemprop="name">debian-goodies</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/checkrestart.1.html">
      <span itemprop="name">checkrestart: Check which processes need to be restarted after an upgrade</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>checkrestart [ -hvpa ] [ -b blacklist_file ] [ -i package_name ]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>checkrestart</strong> program tries to determine if there are processes in the system that need to be restarted after a system upgrade. This is necessary since an upgrade will usually bring new system libraries and running processes will be still using the old versions of the libraries. In <em>stable</em> Debian GNU/Linux systems this is typically needed to eliminate a system exposure to a vulnerability which might have been fixed by upgrading a library which that process makes use of.</p><p>Consequently, <strong>checkrestart</strong> is sometimes used as an audit tool to find outdated versions of libraries in use, particularly after security upgrades. Administrators should not, however, rely on its output completely (see <strong>BUGS</strong> below).</p><p>This script needs to run as root in order to obtain the information it needs for analysis.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h,</strong><em>--help</em></p>
  </dt>
  <dd>
    <p>Show the program help and exit.</p>
  </dd>
  <dt>
    <p><strong>-v,</strong><em>--verbose</em></p>
  </dt>
  <dd>
    <p>Generate detailed output. This output includes the list of all processes found using deleted files or descriptors as well as the deleted files and descriptors found.</p>
  </dd>
  <dt>
    <p><strong>-p,</strong><em>--package</em></p>
  </dt>
  <dd>
    <p>Only process deleted files that belong to a package, ignoring deleted files which do not have an associated package in the package system.</p>
  </dd>
  <dt>
    <p><strong>-a,</strong><em>--all</em></p>
  </dt>
  <dd>
    <p>Process all deleted files regardless of location. This makes the program analyse deleted files even if they would be discarded because they are located in locations, such as <em>/tmp</em> , which are known to produce false positives. It will take preceded if used simultaneously with the <em>-p</em> option.</p>
  </dd>
  <dt>
    <p><strong>-b</strong><em>file,</em><strong>--blacklist=file</strong></p>
  </dt>
  <dd>
    <p>Read a blacklist of regular expressions from <em>file.</em> Any files matching the patterns will be ignored.</p>
  </dd>
  <dt>
    <p><strong>-i</strong><em>name,</em><strong>--ignore=name</strong></p>
  </dt>
  <dd>
    <p>Ignore services that are associated to the package name provided in <em>name.</em></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p>The program will exit with error (1) if a non-root user tries to run it. Otherwise, it will always exit with error status 0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>Start it as user root without parameters:</p>
<pre>
  # checkrestart
  Found 20 processes using old versions of upgraded files
  (15 distinct programs)
  (14 distinct packages)
</pre>

<pre>
  Of these, 12 seem to contain init scripts which can be used to restart them:
  The following packages seem to have init scripts that could be used to restart them:
  gpm:
          3044    /usr/sbin/gpm
  rpcbind:
          2208    /sbin/rpcbind
  bind9:
          8463    /usr/sbin/named
  openssh-server:
          22124   /usr/sbin/sshd
  ntp:
          4078    /usr/sbin/ntpd
  tftpd-hpa:
          3417    /usr/sbin/in.tftpd
  uptimed:
          2704    /usr/sbin/uptimed
  cron:
          3019    /usr/sbin/cron
  postfix:
          22145   /usr/lib/postfix/qmgr
          8892    /usr/lib/postfix/master
  hddtemp:
          3174    /usr/sbin/hddtemp
  autofs:
          2792    /usr/sbin/automount
  openbsd-inetd:
          3254    /usr/sbin/inetd
</pre>

<pre>
  These are the init scripts:
  service gpm restart
  service rpcbind restart
  service bind9 restart
  service ssh restart
  service ntp restart
  service tftpd-hpa restart
  service uptimed restart
  service cron restart
  service postfix restart
  service hddtemp restart
  service autofs restart
  service openbsd-inetd restart
</pre>

<pre>
  These processes do not seem to have an associated init script to restart them:
  isc-dhcp-client:
          3775    /sbin/dhclient
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>This program might fail if the output of the <em>lsof</em> utility changes since it depends on it to detect which deleted files are used by processes. It might also output some false positives depending on the processes' behaviour since it does not check yet if the (deleted) files in use are really libraries.</p><p>If you find a false positive in <strong>checkrestart</strong> please provide the following information when submitting a bug report:</p>
<dl class='dl-vertical'>
  <dt>
    &ndash;
  </dt>
  <dd>
    <p>The output of <strong>checkrestart</strong> using the <em>-v</em> (verbose) option.</p>
  </dd>
  <dt>
    &ndash;
  </dt>
  <dd>
    <p>The output of running the following command as root:</p>
  </dd>

</dl>

<pre>
        lsof | egrep 'delete|DEL|path inode'
</pre>
<p><strong>Checkrestart</strong> is also sensitive to the kernel version in use. And might fail to work with newer (or older) versions.</p><p>A rewrite to make it less dependent on <em>lsof</em> could improve this, however.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO checkrestart&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/lsof.8.html"><strong>lsof</strong>(8)</a></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>checkrestart</strong> was written by Matt Zimmerman for the Debian GNU/Linux distribution.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENCE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2001 Matt Zimmerman &lt;mdz@debian.org&gt; Copyright (C) 2007,2010-2011 Javier Fernandez-Sanguino &lt;jfs@debian.org&gt;</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2, or (at your option) any later version.</p><p>On Debian systems, a copy of the GNU General Public License may be found in /usr/share/common-licenses/GPL.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="checkndx.1.html"><span aria-hidden="true">&larr;</span> checkndx.1: A collection of tools for xbase database files</a></li>
   <li class="next"><a href="checksctp.1.html">checksctp.1: Check if kernel supports sctp <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
