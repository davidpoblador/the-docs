<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>djvuserve: Generate indirect djvu documents on the fly.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Generate indirect djvu documents on the fly.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="djvuserve (1) manual">
  <meta name="twitter:description" content="Generate indirect djvu documents on the fly.">
  <meta name="twitter:image" content="https://www.carta.tech/images/djvuserve-djvuserve-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/djvuserve.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="djvuserve (1) manual" />
  <meta property="og:description" content="Generate indirect djvu documents on the fly." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/djvuserve-djvuserve-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">djvuserve<small> (1)</small></h1>
        <p class="lead">Generate indirect djvu documents on the fly.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/djvuserve.1.html">
      <span itemprop="name">djvuserve: Generate indirect djvu documents on the fly.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/djvuserve/">
      <span itemprop="name">djvuserve</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/djvuserve.1.html">
      <span itemprop="name">djvuserve: Generate indirect djvu documents on the fly.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Program <strong>djvuserve</strong> is a <small>CGI</small> program that can be executed by a <small>HTTP</small> server for serving DjVu documents. This program is able to convert a bundled multi-page document into an indirect document on the fly.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING DJVUSERVE</h2>
        <div class="sectioncontent">
<p>Program <strong>djvuserve</strong> must first be installed as a <small>CGI</small> program for your web server. There are several ways to achieve this.   The Apache web server, for instance, often defines a specific directory for <small>CGI</small> programs using the <strong>ScriptAlias</strong> directive. Assume that the file <strong>httpd.conf</strong> contains the following line:</p><ul>
<li><p><strong>ScriptAlias /cgi&ndash;bin/ </strong><em></em><strong>/var/www/cgi&ndash;bin</strong><em></em></p></li>
</ul><p>It is then sufficient to create a small executable shell script <em>/var/www/cgi&ndash;bin/</em><strong>djvuserve</strong> containing the following lines:</p><ul>
<li><p><strong>#!/bin/sh</strong></p><p><strong>exec </strong><em>/full/path/to/</em><strong>djvuserve</strong></p></li>
</ul><p>Suppose that a large bundled multi-page DjVu document is available at the following <small>URL.</small></p><ul>
<li><p><em>http</em><strong></strong><em>://server/dir/doc.djvu</em></p></li>
</ul><p>The <small>CGI</small> program <strong>djvuserve</strong> lets you access this same document as an indirect multi-page DjVu document using the following <small>URL.</small></p><ul>
<li><p><em>http</em><strong></strong><em>://server</em><strong>/cgi&ndash;bin/djvuserve/</strong><em>dir/doc.djvu</em><strong>/index.djvu</strong></p></li>
</ul><p>Serving indirect multi-page DjVu documents provides for efficiently browsing large document without transferring unnecessary pages over the network. See <a href="../man1/djvu.1.html"><strong>djvu</strong>(1)</a></strong> for more information.</p><p>Furthermore <strong>djvuserve</strong> searches certain keywords among the <small>CGI</small> arguments of the <small>URL.</small> The keyword <strong>bundled</strong> forces serving a bundled document using</p><ul>
<li><p><em>http</em><strong></strong><em>://server</em><strong>/cgi&ndash;bin/djvuserve/</strong><em>dir/doc.djvu</em><strong>?bundled</strong></p></li>
</ul><p>The keyword <strong>download</strong> inserts a content disposition <small>HTTP</small> header that suggests to display a save dialog instead of displaying the document.</p><ul>
<li><p><em>http</em><strong></strong><em>://server</em><strong>/cgi&ndash;bin/djvuserve/</strong><em>dir/doc.djvu</em><strong>?download</strong></p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING DJVUSERVE AS A HANDLER</h2>
        <div class="sectioncontent">
<p>The Apache web server provides a way to automatically execute <strong>djvuserve</strong> for all DjVu documents. This can be achieved using the following directives in either the Apache configuration file or the <strong>.htaccess</strong> files.</p><ul>
<li><p><strong>Action djvu-server /cgi&ndash;bin/djvuserve/</strong></p><p><strong>AddHandler djvu-server .djvu</strong></p></li>
</ul><p>Apache then executes program <strong>djvuserve</strong> for serving all DjVu files. Providing the <small>URL</small> of DjVu file serves this DjVu file as usual, except that bundled multipage documents are converted to indirect documents on the fly. This convenience comes at the expense of the computational cost of executing <strong>djvuserve</strong> whenever a DjVu file is requested.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TECHNICAL DETAILS</h2>
        <div class="sectioncontent">
<p>Program <strong>djvuserve</strong> provides a mean to directly access any component of a bundled multi-page DjVu document can be accessed using an extended <small>URL.</small> Suppose that the component file representing page 1 is named <strong>p0001.djvu</strong>. The following <small>URL</small> provides a direct access to this page:</p><ul>
<li><p><em>http</em><strong></strong><em>://server</em><strong>/cgi&ndash;bin/djvuserve/</strong><em>dir/doc.djvu</em><strong>/p0001.djvu</strong></p></li>
</ul><p>It is preferred however to access individual pages using the <strong>CGI</strong> style arguments described in <a href="../man1/nsdejavu.1.html"><strong>nsdejavu</strong>(1)</a>, as in the following <small>URL.</small></p><ul>
<li><p><em>http</em><strong></strong><em>://server</em><strong>/cgi&ndash;bin/djvuserve/</strong><em>dir/doc.djvu</em><strong>?djvuopts&page=12</strong></p></li>
</ul><p>The special component file name <strong>index.djvu</strong> is recognized as a request for the index of the corresponding indirect multi-page document.  In fact, when you access a bundled document using <strong>djvuserve</strong>, the browser gets redirected to the following <small>URL:</small></p><ul>
<li><p><em>http</em><strong></strong><em>://server</em><strong>/cgi&ndash;bin/djvuserve/</strong><em>dir/doc.djvu</em><strong>/index.djvu</strong></p></li>
</ul><p>and then behaves as if the bundled file was a directory containing the various component files of an equivalent indirect document.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESS CONTROL</h2>
        <div class="sectioncontent">
<p>Program <strong>djvuserve</strong>, like many <small>CGI</small> programs, bypasses a number of access protections established in a web server. Assume for instance that your web site contains DjVu files protected by a password. Program <strong>djvuserve</strong> knows nothing about this protection and will happily serve any DjVu file associated with a valid <small>URL.</small></p><p>Access control with <strong>djvuserve</strong> can be implemented by first remembering that the web server always executes program <strong>djvuserve</strong> via shell script <em>/var/www/cgi&ndash;bin/</em><strong>djvuserve.</strong></p><p>This script can decide to execute the real program <strong>djvuserve</strong> on the basis of the target filename available in the environment variable <small>PATH_TRANSLATED.</small></p><p>There can be several such scripts providing access to various collections of DjVu files.  Each of these scripts can be password protected using the usual methods supported by your web server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN BUGS</h2>
        <div class="sectioncontent">
<p>Hyperlinks specified using a relative <small>URL</small> may not work with <strong>djvuserve.</strong> These <small>URLs</small> are relative to the <small>URL</small> of the DjVu document. Yet <strong>djvuserve</strong> changes the apparent document <small>URL</small> <em>http://server/dir/doc.djvu</em> into the more complicated <small>URL</small> <em>http://server</em><strong>/cgi&ndash;bin/djvuserve/</strong><em>dir/doc.djvu</em><strong>/index.djvu.</strong> The extra components change the interpretation of relative <small>URLs.</small></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREDITS</h2>
        <div class="sectioncontent">
<p>This program was written by Leon Bottou &lt;leonb@users.sourceforge.com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO djvuserve&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/djvu.1.html"><strong>djvu</strong>(1)</a>, <a href="../man1/djvmcvt.1.html"><strong>djvmcvt</strong>(1)</a>, <a href="../man1/nsdejavu.1.html"><strong>nsdejavu</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="djvused.1.html"><span aria-hidden="true">&larr;</span> djvused.1: Multi-purpose djvu document editor.</a></li>
   <li class="next"><a href="djvusmooth.1.html">djvusmooth.1: Graphical editor for djvu <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
