<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mysqlauditadmin: Maintain the audit log</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Maintain the audit log">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mysqlauditadmin (1) manual">
  <meta name="twitter:description" content="Maintain the audit log">
  <meta name="twitter:image" content="https://www.carta.tech/images/mysql-utilities-mysqlauditadmin-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mysqlauditadmin.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mysqlauditadmin (1) manual" />
  <meta property="og:description" content="Maintain the audit log" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mysql-utilities-mysqlauditadmin-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mysqlauditadmin<small> (1)</small></h1>
        <p class="lead">Maintain the audit log</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mysqlauditadmin.1.html">
      <span itemprop="name">mysqlauditadmin: Maintain the audit log</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mysql-utilities/">
      <span itemprop="name">mysql-utilities</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mysqlauditadmin.1.html">
      <span itemprop="name">mysqlauditadmin: Maintain the audit log</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mysqlauditadmin [</strong><strong></strong><em>OPTIONS</em><strong>]... </strong> <strong>mysqlauditadmin [</strong><strong></strong><em>OPTIONS</em><strong>]... [</strong><strong></strong><em>COMMAND</em><strong>]</strong> <strong>mysqlauditadmin l=</strong><strong></strong><em>user:pass@host:port</em><strong> [</strong><strong></strong><em>OPTIONS</em><strong>]... [</strong><strong></strong><em>COMMAND</em><strong>[--value=</strong><strong></strong><em>VALUE</em><strong>]]</strong> <strong>mysqlauditadmin --file-stats --audit-log-name=</strong><strong></strong><em>FULL_PATH</em> <strong>mysqlauditadmin copy --audit-log-name=</strong><strong></strong><em>FULL_PATH</em><strong> --copy-to=</strong><strong></strong><em>DESTINATION</em><strong> [--remote-login=</strong><strong></strong><em>user:host</em><strong>]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This utility allow you to maintain the \m[blue]<strong>audit log</strong>\m[]\s-2\u[1]\d\s+2, allowing you to monitor the audit log file growth and control its rotation. Rotation refers to the action of replacing the current audit log file by a new one for continuous use, renaming (with a timestamp extension) and copying the previously used audit log file to a defined location.</p><p>This utility allows you to view and modify a subset of audit log control variables, display the audit log file status, perform on-demand rotation of the log file, and copy files to other locations. These features enable you to easily monitor the audit log file growth and control its rotation (automatically based on the defined file size threshold, or manually by a on-demand command).</p><p>The available actions include the following:</p><p><strong>copy</strong></p><p>This command copies the audit log specified by <strong>--audit-log-name</strong> to the destination path specified by <strong>--copy-to</strong>. The <strong>--remote-login</strong> option can be used to copy log files from a remote location. Note: the destination path must be locally accessible by the current user.</p><p><strong>policy</strong></p><p>The policy command is used to change the audit logging policy. The accepted values are the following, which are set using the <strong>--value</strong> option.</p><p><strong>Note</strong></p><p>The <strong>--server</strong> option is also required to execute this command.</p><p>ALL: log all events</p><p>NONE: log nothing</p><p>LOGINS: only log login events</p><p>QUERIES: only log query events</p><p>DEFAULT: sets the default log policy</p><p><strong>rotate_on_size</strong></p><p>This command sets the file size threshold for automatic rotation of the audit log (the audit_log_rotate_on_size variable). The value is set using the <strong>--value</strong> option, and must be in the range (0, 4294967295). This command also requires the <strong>--server</strong> option to be specified. Note: if the variable is set with a value that is not a multiple of 4096, then it is truncated to the nearest multiple.</p><p><strong>rotate</strong></p><p>This command is used to perform an on-demand audit log rotation, and only requires the <strong>--server</strong> option to be passed. Note: this command has no effect if the audit log file size is smaller than 4096, which is the minimum value allowed that is greater than 0 for the audit_log_rotate_on_size variable variable).</p>
<pre>
      OPTIONS
</pre>
<p><strong>mysqlauditadmin</strong> accepts the following command-line options:</p><p>--audit-log-name=&lt;AUDIT_LOG_FILE&gt;</p><p>Full path and file name for the audit log file. Used by the <strong>--file-stats</strong> option, and the <em>copy</em> command.</p><p>--copy-to=&lt;COPY_DESTINATION&gt;</p><p>The location to copy the specified audit log file. The path must be locally accessible for the current user.</p><p>--file-stats</p><p>Display the audit log file statistics.</p><p>--help</p><p>Display a help message and exit.</p><p>--remote-login=&lt;REMOTE_LOGIN&gt;</p><p>User name and host to be used for the remote login, for copying log files. It is defined using the following format: &lt;<em>user</em>&gt;:&lt;<em>host or IP</em>&gt;. Usage will prompt for the password.</p><p>--server=&lt;SERVER&gt;</p><p>Connection information for the server in the format: &lt;<em>user</em>&gt;[:&lt;<em>passwd</em>&gt;]@&lt;<em>host</em>&gt;[:&lt;<em>port</em>&gt;][:&lt;<em>socket</em>&gt;] or &lt;<em>login-path</em>&gt;[:&lt;<em>port</em>&gt;][:&lt;<em>socket</em>&gt;].</p><p>--show-options</p><p>Display the audit log system variables.</p><p>--value=&lt;VALUE&gt;</p><p>Value used to set variables based on the specified commands, such as <em>policy</em> and <em>rotate_on_size</em>.</p><p>--server1=&lt;source&gt;</p><p>Connection information for the first server in the format: &lt;<em>user</em>&gt;[:&lt;<em>passwd</em>&gt;]@&lt;<em>host</em>&gt;[:&lt;<em>port</em>&gt;][:&lt;<em>socket</em>&gt;] or &lt;<em>login-path</em>&gt;[:&lt;<em>port</em>&gt;][:&lt;<em>socket</em>&gt;].</p><p>--verbose, -v</p><p>Specify how much information to display. Use this option multiple times to increase the amount of information. For example, <strong>-v</strong> = verbose, <strong>-vv</strong> = more verbose, <strong>-vvv</strong> = debug.</p><p>--version</p><p>Display version information and exit.</p>
<pre>
      NOTES
</pre>
<p>This utility is available as of μ 1.2.0.</p><p>This utility can only be applied to servers with the \m[blue]<strong>audit log plugin enabled</strong>\m[]\s-2\u[2]\d\s+2. And the audit log plugin is available as of MySQL Server versions 5.5.28 and 5.6.10.</p><p>This utility requires Python version 2.6 or higher, but does not support Python 3.</p><p>The path to the MySQL client tools should be included in the PATH environment variable in order to use the authentication mechanism with login-paths. This will allow the utility to use the my_print_defaults tools, which is required to read the login-path values from the login configuration file (.mylogin.cnf). This feature exists as of MySQL Server 5.6.6, see \m[blue]<strong></strong><strong>mysql_config_editor</strong> &ndash; MySQL Configuration Utility\m[]\s-2\u[3]\d\s+2.</p>
<pre>
      LIMITATIONS
</pre>
<p>The <strong>--remote-login</strong> option is not supported on Microsoft Windows platforms. For Microsoft Windows, use UNC paths and perform a local copy operation, omitting the <strong> --remote-login</strong> option.</p>
<pre>
      EXAMPLES
</pre>
<p>To display the audit log system variables, run the following command:</p>
<pre>
$ mysqlauditadmin --show-options --server=root@localhost:3310
  #
  # Audit Log Variables and Options
  #
  +---------------------------+---------------+
  | Variable_name             | Value         |
  +---------------------------+---------------+
  | audit_log_buffer_size     | 1048576       |
  | audit_log_file            | audit.log     |
  | audit_log_flush           | OFF           |
  | audit_log_policy          | ALL           |
  | audit_log_rotate_on_size  | 0             |
  | audit_log_strategy        | ASYNCHRONOUS  |
  +---------------------------+---------------+
</pre>
<p>To perform a (manual) rotation of the audit log file, use the following command:</p>
<pre>
shell&gt; mysqlauditadmin --server=root@localhost:3310 rotate
#
# Executing ROTATE command.
#
</pre>
<p>To display the audit log file statistics, run the following command:</p>
<pre>
shell&gt; mysqlauditadmin --file-stats --audit-log-name=../SERVER/data/audit.log
  +------------------------------+--------+---------------------------+---------------------------+
  | File                         | Size   | Created                   | Last Modified             |
  +------------------------------+--------+---------------------------+---------------------------+
  | audit.log                    | 3258   | Wed Sep 26 11:07:43 2012  | Wed Sep 26 11:07:43 2012  |
  | audit.log.13486539046497235  | 47317  | Wed Sep 26 11:05:04 2012  | Wed Sep 26 11:05:04 2012  |
  +------------------------------+--------+---------------------------+---------------------------+
</pre>
<p>To change the audit log policy to log only query events, and show the system variables before and after the execution of the <em>policy</em> command, use the following command:</p>
<pre>
shell&gt; mysqlauditadmin --show-options --server=root@localhost:3310 policy &#92;
    --value=QUERIES
  #
  # Showing options before command.
  #
  # Audit Log Variables and Options
  #
  +---------------------------+---------------+
  | Variable_name             | Value         |
  +---------------------------+---------------+
  | audit_log_buffer_size     | 1048576       |
  | audit_log_file            | audit.log     |
  | audit_log_flush           | OFF           |
  | audit_log_policy          | ALL           |
  | audit_log_rotate_on_size  | 0             |
  | audit_log_strategy        | ASYNCHRONOUS  |
  +---------------------------+---------------+
  #
  # Executing POLICY command.
  #
  #
  # Showing options after command.
  #
  # Audit Log Variables and Options
  #
  +---------------------------+---------------+
  | Variable_name             | Value         |
  +---------------------------+---------------+
  | audit_log_buffer_size     | 1048576       |
  | audit_log_file            | audit.log     |
  | audit_log_flush           | OFF           |
  | audit_log_policy          | QUERIES       |
  | audit_log_rotate_on_size  | 0             |
  | audit_log_strategy        | ASYNCHRONOUS  |
  +---------------------------+---------------+
</pre>
<p>To change the audit log automatic file rotation size to 32535, and show the system variables before and after the execution of the <em>rotate_on_size</em> command, use the following command. (Notice that the value set is actually 28672 because the specified rotate_on_size value is truncated to a multiple of 4096):</p>
<pre>
shell&gt; mysqlauditadmin --show-options --server=root@localhost:3310 rotate_on_size &#92;
     --value=32535
  #
  # Showing options before command.
  #
  # Audit Log Variables and Options
  #
  +---------------------------+---------------+
  | Variable_name             | Value         |
  +---------------------------+---------------+
  | audit_log_buffer_size     | 1048576       |
  | audit_log_file            | audit.log     |
  | audit_log_flush           | OFF           |
  | audit_log_policy          | ALL           |
  | audit_log_rotate_on_size  | 0             |
  | audit_log_strategy        | ASYNCHRONOUS  |
  +---------------------------+---------------+
  #
  # Executing ROTATE_ON_SIZE command.
  #
  #
  # Showing options after command.
  #
  # Audit Log Variables and Options
  #
  +---------------------------+---------------+
  | Variable_name             | Value         |
  +---------------------------+---------------+
  | audit_log_buffer_size     | 1048576       |
  | audit_log_file            | audit.log     |
  | audit_log_flush           | OFF           |
  | audit_log_policy          | ALL           |
  | audit_log_rotate_on_size  | 28672         |
  | audit_log_strategy        | ASYNCHRONOUS  |
  +---------------------------+---------------+
</pre>
<p>To perform a copy of a audit log file to another location, use the following command:</p>
<pre>
shell&gt; mysqlauditadmin --audit-log-name=../SERVER/data/audit.log.13486539046497235 &#92;
     copy --copy-to=/BACKUP/Audit_Logs
</pre>
<p>To copy a audit log file from a remote server/location to the current location (user password will be prompted), use the following command:</p>
<pre>
shell&gt; mysqlauditadmin --audit-log-name=audit.log.13486539046497235 &#92;
     copy --remote-login=user:host --copy-to=.
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>audit log</p><p>http://dev.mysql.com/doc/refman/5.6/en/audit-log-plugin.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>audit log plugin enabled</p><p>http://dev.mysql.com/doc/refman/5.6/en/audit-log-plugin-installation.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p><strong>mysql_config_editor</strong> &ndash; MySQL Configuration Utility</p><p>http://dev.mysql.com/doc/refman/5.6/en/mysql-config-editor.html</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mysqlauditadmin&hellip;</h2>
        <div class="sectioncontent">
<p>For more information, please refer to the MySQL Utilities section of the MySQL Workbench Reference Manual, which is available online at http://dev.mysql.com/doc/workbench/en/.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Oracle Corporation (http://dev.mysql.com/).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mysql-client-5.5-mysqladmin.1.html"><span aria-hidden="true">&larr;</span> mysqladmin.1: Client for administering a mysql server</a></li>
   <li class="next"><a href="mysqlauditgrep.1.html">mysqlauditgrep.1: Search an audit log <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
