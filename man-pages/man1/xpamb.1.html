<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xpamb: The \s-1xpa\s0 message bus</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The \s-1xpa\s0 message bus">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xpamb (1) manual">
  <meta name="twitter:description" content="The \s-1xpa\s0 message bus">
  <meta name="twitter:image" content="https://www.carta.tech/images/xpa-tools-xpamb-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/xpamb.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xpamb (1) manual" />
  <meta property="og:description" content="The \s-1xpa\s0 message bus" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xpa-tools-xpamb-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xpamb<small> (1)</small></h1>
        <p class="lead">The \s-1xpa\s0 message bus</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/xpamb.1.html">
      <span itemprop="name">xpamb: The \s-1xpa\s0 message bus</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xpa-tools/">
      <span itemprop="name">xpa-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/xpamb.1.html">
      <span itemprop="name">xpamb: The \s-1xpa\s0 message bus</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>The xpamb program can act as a \*(L"classical\*(R" message bus interface between clients and servers. A client can send a data request to the message bus, which then interfaces with multiple servers and returns the data back to the client.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>For xpaset, several optional switches are used to save data and manipulate the stored data:</p><ul>
<li><p><strong>\-data [name]</strong> Add the supplied data buffer to a pool of stored data buffers, using the specified name as a unique identifier for later retrieval. An error occurs if the name already exists (use either <strong>replace</strong> or <strong>del</strong> to rectify this). The <strong>\-add</strong> switch is supported for backwards compatibility with xpa 2.0.</p></li><li><p><strong>\-replace [name]</strong> Replace previously existing stored data having the same unique name with new data. This essentially is a combination of the <strong>del</strong> and <strong>data</strong> commands.</p></li><li><p><strong>\-info [\*(L"'info string'\*(R"]</strong> When adding a data buffer, you can specify an informational string to be stored with that data.  This string will be returned by xpaget:</p>
<pre>
  xpaget xpamb foo \-info
</pre>
<p>(along with other information such as the date/time of storage and the size of the data buffer) if the \-info switch is specified. If the info string contains spaces, you must enclose it in <strong>two</strong> sets of quotes:   cat foo | xpaset xpamb \-store foo \-info "&apos;this is info on foo&apos;" The first set of quotes is removed by the shell while the second is used to delineate the info string.</p></li><li><p><strong>\-send [name]</strong> Broadcast the stored data buffer to the named template.</p></li><li><p><strong>\-del [name]</strong> Delete the named data buffer and free all allocated space.</p></li>
</ul><p>Switches can be used in any combination that makes sense. For example:</p><p>  cat foo.fits | xpaset xpamb \-store foo \-info "FITS" "DS9:*" fits foo.fits</p><p>will broadcast the foo.fits image to all access points of class <strong>\s-1DS9\s0</strong>.  In addition, the foo.fits file will be stored under the name of <strong>foo</strong> for later manipulation such as:</p><p>  xpaset \-p xpamb \-send foo "DS9:*" fits foo.fits</p><p>will re-broadcast the foo.fits image to all access points of class \*(L"\s-1DS9\s0\*(R".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A \*(L"classical\*(R" message bus (such as ToolTalk) consists of servers and clients, along with a mediating program that transfers data between different processes. \s-1XPA\s0 takes a slightly different approach in that communication between clients and servers is direct.  This generally is the correct technique when there is only one connection (or even a small number of connections), but can become inefficient for the serving program if a large amount of data is being transferred to many clients. For example, if a real-time data acquisition program is broadcasting a \s-1FITS\s0 image to several clients, it would need to transmit that image to each client individually.  This might interfere with its own processing cycles.  The preferable mechanism would be to pass the image off to an intermediate program that can then broadcast the data to the several clients.</p><p>The <strong>xpamb</strong> program can alleviate such problems by functioning as a message bus in cases where such an intermediary process is wanted.  It pre-defines a single access point named XPAMB - xpamb to which data can be sent for re-broadcast. You also can tell <strong>xpamb</strong> to save the data, and associate with that data a new access point, so that it can be retrieved later on.</p><p>All interaction with <strong>xpamb</strong> is performed through <strong>xpaset</strong> and <strong>xpaget</strong> (or the corresponding \s-1API\s0 routines, <strong></strong><strong>XPASet()</strong><strong></strong> and <strong></strong><strong>XPAGet()</strong><strong></strong>) to the XPAMB - xpamb access point. That is, <strong>xpamb is just</strong> another XPA-enabled program that responds to requests from clients. The paramlist is used to specify the targets to which the data will be for re-broadcast, as well as the re-broadcast paramlist:</p><p>  data | xpaset xpamb [switches] broadcast\-target broadcast\-paramlist</p><p>Optional switches are used to store data, and manipulate stored data, and are described below.</p><p>In its simplest form, you can, for example, send a \s-1FITS\s0 image to xpamb for broadcasting to all ds9 image simply by executing:</p><p>  cat foo.fits | xpaset xpamb "DS9:*" fits foo.fits</p><p>Since <strong>\s-1DS9\s0</strong> is the class name for the ds9 image display program, this will result in the \s-1FITS\s0 image being re-sent to all fits access points for all active image display programs.</p><p>You can send stored data and new data to the same set of access points at the same time.  The stored data always is send first, followed by the new data:</p><p>  cat foo2.fits | xpaset xpamb \-send foo "DS9:*" fits foo.fits</p><p>will first send the foo.fits file, and then the foo2.fits file to all access points of class <strong>\s-1DS9\s0</strong>.  Notice that in this example, the foo2.fits file is not stored, but it could be stored by using the <strong>\-store [name]</strong> switch on the command line.</p><p>The <strong>xpaget</strong> command can be used to retrieve a data from \s-1XPA\s0 access points or from a stored data buffer, or retrieve information about a stored data buffer.  If no arguments are given:</p><p>  xpaget xpamb</p><p>then information about all currently stored data buffers is returned. This information includes the data and time at which the data was stored, the size in bytes of the data, and the supplied info string.</p><p>If arguments are specified, they will be in the form:</p><p>  xpaget xpamb [\-info] [\-data] [name [paramlist]]</p><p>If the optional <strong>\-info</strong> and/or <strong>\-data</strong> switches are specified, then information and/or data will be returned for the named data buffer following the switches. You can use either or both of these switches in a single command. For example, if the \-info switch is used:</p><p>  xpaget xpamb \-info foo</p><p>then the info about that stored data buffer will be returned. If the \-data is used with a specific name:</p><p>  xpaget xpamb \-data foo</p><p>then the stored data itself will be returned. If both are used:</p><p>  xpaget xpamb \-info \-data foo</p><p>then the info will be returned, followed by the data. Note that it is an error to specify one of these switches without a data buffer name and that the paramlist will be ignored.</p><p>If neither the <strong>\-info</strong> or <strong>\-data</strong> switch is specified, then the name refers to an \s-1XPA\s0 access point (with an optional paramlist following). For example:</p><p>  xpaget xpamb ds9 file</p><p>is equivalent to:</p><p>  xpaget ds9 file</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xpamb&hellip;</h2>
        <div class="sectioncontent">
<p>See <a href="../man7/xpa.7.html"><strong>xpa</strong>(7)</a> for a list of \s-1XPA\s0 help pages</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xpaint.1.html"><span aria-hidden="true">&larr;</span> xpaint.1: Simple paint program</a></li>
   <li class="next"><a href="xpans.1.html">xpans.1: The \s-1xpa\s0 name server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
