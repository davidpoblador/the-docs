<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gbak: Gbak  backup/restore firebird database</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Gbak  backup/restore firebird database">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gbak (1) manual">
  <meta name="twitter:description" content="Gbak  backup/restore firebird database">
  <meta name="twitter:image" content="https://www.carta.tech/images/firebird2.5-server-common-gbak-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/gbak.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gbak (1) manual" />
  <meta property="og:description" content="Gbak  backup/restore firebird database" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/firebird2.5-server-common-gbak-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gbak<small> (1)</small></h1>
        <p class="lead">Gbak  backup/restore firebird database</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gbak.1.html">
      <span itemprop="name">gbak: Gbak  backup/restore firebird database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/firebird2.5-server-common/">
      <span itemprop="name">firebird2.5-server-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gbak.1.html">
      <span itemprop="name">gbak: Gbak  backup/restore firebird database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>gbak</strong>  -b [backup option ...]  [common option ...]  <em>source</em> <em>target</em></p><p><strong>gbak</strong>  -c|-r [restore option ...]  [common option ...]  <em>source</em> <em>target</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>gbak</strong> is the tool for managing Firebird database backup and restore.</p><p>In backup mode <em>source</em> is an existing database path (may include server name) and <em>target</em> is backup file name. It could be also a special device name like /dev/stdout (to redirect backup data to STDOUT) or /dev/st to put the backup on tape.</p><p>In restore mode <em>source</em> is existing backup file (or special device like /dev/stdin for STDIN or /dev/st to get the backup from tape) and <em>target</em> is path to firebird database and may include server name.</p><p>All options can be abbreviated. Below both full versions of options and the shortest possible versions are given.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMON OPTIONS</h2>
        <div class="sectioncontent">
<h3>-user \fIusername\fR</h3>
<p>User name to use when connecting to database. Overrides environment variable. See <strong>ENVIRONMENT</strong>.</p>
<h3>-ro[le] \fIrole_name\fR</h3>
<p>SQL role to use when connecting to database. Overrides environment variable. See <strong>ENVIRONMENT</strong>.</p>
<h3>-pas[sword] \fIpassword\fR</h3>
<p>Password to use when connecting to database. Overrides environment variable. See <strong>ENVIRONMENT</strong>.</p>
<h3>-se[rvice]</h3>
<p>Use services manager when talking to a database.</p>
<h3>-v[erify]</h3>
<p>Report each action.</p><p>Displays verbose information about what metadata is being processed, what table is being backed up/restores and how many records are processed.</p>
<h3>-y \fIpath\fR</h3>
<p>Redirect status/error messages to the given path.</p>
<h3>-z</h3>
<p>Report full version number before doing anything else.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BACKUP OPTIONS</h2>
        <div class="sectioncontent">
<h3>-b[ackup_database]</h3>
<p>Turn on backup mode.</p>
<h3>-co[nvert]</h3>
<p>Convert external tables into tables.</p><p>Normally external tables are ignored during backup and restore. With <strong>-convert</strong> option external tables are included in the backup as any other regular table. When such a backup is restored, these previously external tables are created as regular tables.</p>
<h3>-fa[ctor] \fInum\fR</h3>
<p>Blocking factor. Output is written in block of <em>num</em> bytes. Useful when backing up to a tape.</p>
<h3>-g[arbage_collect]</h3>
<p>Inhibit garbage collection.</p><p>Normally Firebird runs a garbage collector when reading through the tables. Since the backup process reads all the tables, this forces garbage collection of the whole database. In case you make the backup just to restore it over the existing database this garbage collection is unnecessary. Another reason to use this options is if a garbage collection is engaged by other means - either by using gfix or the automatic sweep. Using this switch speeds up the backup process and also can help in some cases of backing up damaged databases.</p>
<h3>-ig[nore]</h3>
<p>Ignore records with bad checksums.</p><p>This option should be used only when backing up damaged databases.</p>
<h3>-l[imbo]</h3>
<p>Ignore transactions in limbo.</p><p>This switch causes the backup process to ignore transactions in limbo state.</p>
<h3>-m[etadata_only]</h3>
<p>Backup metadata only.</p><p>With this option only the metadata is written to the backup. This includes all tables/views/triggers/indexes/stored procedures/domains/generators etc. No table data is included in backup. Such a backup is useful for creating an "empty" copy of a database.</p>
<h3>-nt</h3>
<p>Use non-transportable backup format.</p><p>By default a "transportable" backup format is used. This means you can backup a database on little-endian machine and restore it on big-endian machine and vice versa. By using <strong>-nt</strong> the backup is only useful on machines with the same "endianness".</p>
<h3>-ol[d_descriptions]</h3>
<p>save old-style metadata descriptions</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESTORE OPTIONS</h2>
        <div class="sectioncontent">
<h3>-c[reate_database]</h3>
<p>Turn on restore mode.</p><p><em>target</em> database will be created and must not already exist.</p>
<h3>-r[ecreate_database] [o[verwrite]]</h3>
<p>Like <strong>-create_database</strong>, but by adding <strong>overwrite</strong> one can force replacement of the target database.</p>
<h3>-rep[lace_database]</h3>
<p>Like <strong>-create_database</strong>, but the target is overwritten if it exists.</p>
<h3>-bu[ffers] \fInum\fR</h3>
<p>When creating target database, ignore information about database buffers stored in the backup and use specified number of buffers.</p>
<h3>-e[xpand]</h3>
<p>Normally, Firebird uses RLE compression for strings when storing them on disk. This option turns this compression off.</p>
<h3>-i[nactive]</h3>
<p>Restore indexes in inactive state. This can be used to restore a backup, containing data inconsistent with foreign key/unique constraints.</p>
<h3>-k[ill]</h3>
<p>Do not create shadows when restoring.</p><p>Normally and database shadows are created during restore. This option inhibits this.</p>
<h3>-mo[de] \fIaccess\fR</h3>
<p>Restore database with given <em>access</em>.</p><p>Valid values for <em>access</em> are <strong>read_only</strong> and <strong>read_write</strong>. Default is to restore the database with its original access mode.</p>
<h3>-n[o_validity]</h3>
<p>Restore database without its validity constraints. This includes foreign key, unique and check constraints. Useful for restoring a backup, containing inconsistent data.</p>
<h3>-o[ne_at_a_time]</h3>
<p>Commit restoring transaction after restoring each table.</p>
<h3>-p[age_size] \fInum\fR</h3>
<p>Override page size stored in the backup.  Valid values for <em>num</em> are 1024, 2048, 4096, 8192, 16384 and 32768.</p>
<h3>-use_[all_space]</h3>
<p>Normally, Fireburd reserves some space on each data page for further use. This reserved space is used for newly inserted data and for keeping older versions of the data. Having space reserved for this purpose "near" to the data speeds up modifications. If the database will used mainly for read operations, specifying <strong>-use_all_space</strong> will save some space.</p><p>This option is particularly useful when restoring a read-only database, since read-only databases do not need any additional space for back-versions.</p>
<h3>-fix_fss_metadata \fIcharset\fR</h3>
<p>When restoring metadata, in case it is not valid UTF8, try to convert from the specified character set. Useful when table descriptions are given in some national non-UTF8 encoding, which was possible with Firebird before version 2.5</p>
<h3>-fix_fss_data \fIcharset\fR</h3>
<p>When restoring table data, in case a column defined with UNICODE_FSS character set contains no valid UTF8 (which was possible with versions of Firebird prior to 2.5), try to convert the data from the specified character set.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESTORING TO MULTIPLE-FILE DATABASE</h2>
        <div class="sectioncontent">
<p>Previously, Firebird was not able to work with 64-bit file pointers thus limiting databases to (about) 2GB of size per database.</p><p>Since 2GB is not much of data since years, there is a mechanism for spreading the database into multiple files. This way you can have multiple 2GB files, containing all your data.</p><p>When restoring to multiple-file database the target argument is of form: <em>file_1</em> <em>pages_1</em>   <em>file_2</em> <em>pages_2</em> ... <em>file_N-1</em> <em>pages_N-1</em>   <em>file_N</em></p><p>Each <em>pages_n</em> specifies at most how many pages to put in <em>file_n</em>.  Last in the list is a filename without page limit - it will contain all the pages not fit in <em>file_N-1</em>. Note that <em>pages_n</em> is measured in pages, not bytes so the maximum possible number depends on page size.</p><p>Imagine you have a filesystem (or an ancient OS) which only supports 32-bit file pointers. To play safe, you decide to split your database on 2GB files. If the page size for the database is 8192, then each file can have up to 2*1024*1024*1024/8192 = 262144 pages.</p><h3>NOTE</h3>
<p>Note that on a recent OS and filesystem Firebird can use 64-bit file pointers rendering multi-file databases unnecessary.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>As all other Firebird utilities, gbak accepts following environment variables:</p>
<dl class='dl-vertical'>
  <dt>
    ISC_USER
  </dt>
  <dd>
    <p>default value for <strong>-user</strong> option</p>
  </dd>
  <dt>
    ISC_ROLE
  </dt>
  <dd>
    <p>default value for <strong>-role</strong> option</p>
  </dd>
  <dt>
    ISC_PASSWORD
  </dt>
  <dd>
    <p>default value for <strong>-password</strong> option</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>In all examples <strong>-user</strong>, <strong>-role</strong> and <strong>-password</strong> options are omitted for clarity.  In a real world situation they (or their corresponding enviromnemt variables) should be used.</p><p>Note that filename extensions used here are just recommended. Using unified extensions scheme helps guess file type just by looking at its extension.</p><p>Here are some commonly used extensions:</p>
<dl class='dl-vertical'>
  <dt>
    .fdb
  </dt>
  <dd>
    <p>Firebird database</p>
  </dd>
  <dt>
    .gdb
  </dt>
  <dd>
    <p>Firebird database, legacy extension from the days when Firebird was Interbase. gdb actually comes from Grotton database, named after the company that created the software back in 1984.</p>
  </dd>
  <dt>
    .fdb.2
  </dt>
  <dd>
    <p>Second file of multi-file database</p>
  </dd>
  <dt>
    .fdb.3
  </dt>
  <dd>
    <p>Third file of multi-file database</p>
  </dd>
  <dt>
    .fdb.<em>N</em>
  </dt>
  <dd>
    <p><em>N</em>-th file of multi-file database</p>
  </dd>
  <dt>
    .fbk
  </dt>
  <dd>
    <p>Firebird backup file</p>
  </dd>
  <dt>
    .gbk
  </dt>
  <dd>
    <p>Legacy extension for backup file</p>
  </dd>
  <dt>
    .fbk.gz
  </dt>
  <dd>
    <p>Gzipped backup file</p>
  </dd>

</dl>
<h3>Backup a database into a compressed format:</h3>
<p>gbak -b db-srv:/database.fdb /dev/stdout | gzip &gt; /file.fbk.gz</p>
<h3>Restore a database into new filename:</h3>
<p>zcat /file.fbk.gz | gbak -c /dev/stdin db-srv:/new-database.fdb</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manpage was written by Damyan Ivanov &lt;dam@modsoftsys.com&gt; for Debian GNU/Linux but may be used by others. Permission is granted to use this document, with or without modifications, provided that this notice is retained. If we meet some day, and you think this stuff is worth it, you can buy me a beer in return.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>&copy; 2004,2007 Damyan Ivanov</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gbackground.1.html"><span aria-hidden="true">&larr;</span> gbackground.1: Interval-based gnome background changer</a></li>
   <li class="next"><a href="gbase.1.html">gbase.1: Small numeric base converter <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
