<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>desproxy: A tcp tunnel for http proxies</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A tcp tunnel for http proxies">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="desproxy (1) manual">
  <meta name="twitter:description" content="A tcp tunnel for http proxies">
  <meta name="twitter:image" content="https://www.carta.tech/images/desproxy-desproxy-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/desproxy.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="desproxy (1) manual" />
  <meta property="og:description" content="A tcp tunnel for http proxies" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/desproxy-desproxy-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">desproxy<small> (1)</small></h1>
        <p class="lead">A tcp tunnel for http proxies</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/desproxy.1.html">
      <span itemprop="name">desproxy: A tcp tunnel for http proxies</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/desproxy/">
      <span itemprop="name">desproxy</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/desproxy.1.html">
      <span itemprop="name">desproxy: A tcp tunnel for http proxies</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  desproxy remote_host remote_port proxy_host proxy_port local_port
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>None.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>\s-1HTTP\s0 proxies are network servers that are used to give \s-1HTTP\s0 (web) access to computers that are not connected to the Internet. This is a typical scenario in corporate networks and recently in home networks too. \s-1HTTP\s0 proxies connect to the Internet either directly or via a parent proxy (which in fact connects to the Internet directly or via another parent proxy, and so on...)</p><p>\s-1HTTP\s0 clients (web browsers) use \s-1HTTP\s0 proxies to request web pages; the \s-1HTTP\s0 server just forwards those request to the destination server. All the negotiation is done via the \s-1HTTP\s0 protocol, which is designed just to carry \s-1HTTP\s0 requests and no generic (\s-1TCP/IP\s0) traffic. That is why you can't (normally) use Internet applications beside your web server if you are behind a \s-1HTTP\s0 proxy.</p><p>That is what desproxy is good for. Desproxy is a \s-1TCP\s0 tunnel, which means desproxy can forward \s-1TCP/IP\s0 traffic via a \s-1HTTP\s0 proxy. Desproxy uses a \s-1HTTP/1\s0.1 method (\s-1CONNECT\s0) to establish \s-1TCP/IP\s0 connections on demand. \s-1CONNECT\s0 is used for \s-1SSL\s0 connections when accessing to secure sites, so if you can access sites that support \s-1SSL\s0 (www.hotmail.com for example) you can use desproxy.</p><p>Not all \s-1IP\s0 (Internet) traffic is just \s-1TCP/IP\s0. In fact there are two more protocols widely used in the Internet not supported by desproxy: \s-1UDP\s0 and \s-1ICMP:\s0</p><ul>
<li><p>\s-1ICMP\s0 is used to manage large \s-1IP\s0 networks. The only application using \s-1ICMP\s0 you may miss is ping.</p></li><li><p>\s-1UDP\s0 is an unreliable connection-less fast transport protocol, mostly used in network games and other applications that need low latency network traffic. Notably \s-1DNS\s0 uses \s-1UDP\s0 packets for fast delivery.</p></li>
</ul><h3>Will desproxy work with my \s-1HTTP\s0 proxy?</h3>
<p>Short answer: just give it a try</p><p>Long answer: desproxy should work with every \s-1HTTP\s0 proxy, with the following exceptions:</p><ul>
<li><p>\s-1MS\s0 Proxies with \s-1NTLM\s0 authentication. \s-1NTLM\s0 is a proprietary authentication method from Microsoft, not a standard authentication method. Maybe in the future desproxy will support \s-1NTLM\s0 authentication, but currently it doesn't.</p></li><li><p>\s-1HTTP/1\s0.0 Proxies. Desproxy needs the \s-1CONNECT\s0 method, which is only available from \s-1HTTP/1\s0.1 protocol version. It's very unlikely your proxy doesn't accept \s-1HTTP/1\s0.1 requests.</p></li><li><p>\s-1HTTP/1\s0.1 Proxies without the \s-1CONNECT\s0 method. Maybe your network administrator deactivated \s-1CONNECT\s0 support in the proxy, or maybe \s-1CONNECT\s0 is restricted to the \s-1HTTPS\s0 port (443).</p></li>
</ul>
<h3>Assumptions</h3>
<p>Let's assume the following:</p><ul>
<li><p>your \s-1HTTP\s0 proxy host name is \*(L"proxy\*(R" and its address is \*(L"192.0.0.1\*(R"</p></li><li><p>your \s-1HTTP\s0 proxy port is \*(L"8080\*(R"</p></li><li><p>your \s-1HTTP\s0 proxy doesn't need authentication. It case you need \s-1HTTP\s0 authentication, please read [2]this.</p></li><li><p>your system console will be a terminal (xterm, the console or a virtual terminal) if you are running Linux, *BSD or other UN*X</p></li>
</ul>
<h3>About connections</h3>
<p>Imagine you need a network application that uses only one \s-1TCP/IP\s0 connection with just one server. That's the case of \s-1IRC\s0 in which you connect to an \s-1IRC\s0 server or ssh where you tipically connect just to one \s-1UNIX\s0 computer at a time. That's what I called a \*(L"static connection\*(R".</p><p>Of course that's not the case of a web browser or a file sharing program, both of them doing several connections at a time to different computers. That's what I call \*(L"dynamic connections\*(R".</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STATIC CONNECTIONS EXAMPLES</h2>
        <div class="sectioncontent">
<h3>item How to use desproxy to connect to \s-1IRC\s0</h3>
<p>Suppose you want to connect to \s-1IRC\s0 using irc.undernet.org port 6667 as your \s-1IRC\s0 server. First you have to start a system console (see Assumptions above for details) and type</p><p>    desproxy irc.undernet.org 6667 proxy 8080 1080</p><p>That should start desproxy, giving you the copyright notice along with some information. The following is a screen capture from desproxy 0.0.23</p><p>    -----------------------------------     desproxy                     0.0.23</p><p>    (c) Miguelanxo Otero Salgueiro 2001</p><p>    This release brought to you patched     by Rutger Nijlunsig.</p><p>    See RutgerWork.txt in documentation     for details about new features.</p><p>    Great work guy!     -----------------------------------     TCP port 1080 Binded & Listening     Press ENTER to Quit</p><p>Desproxy reports it is listening in local port 1080 ready for a connection.</p><p>Open your favourite \s-1IRC\s0 client (install it first ;D) and connect to 127.0.0.1 port 1080 as your irc server (127.0.0.1 is a virtual \s-1IP\s0, always referencing to your local machine). Then, your \s-1IRC\s0 client should connect to desproxy. It looks like</p><p>    Connection request from 127.0.0.1, port 1220     Connecting to http proxy (proxy:8080)     Bidirectional connection established</p><p>Then you should be able to use your \s-1IRC\s0 client as if you were directly connected to irc.undernet.org.</p>
<h3>How to use desproxy to log in a computer using ssh</h3>
<p>Suppose you have a shell account in a computer that supports secure connections via ssh. Let's assume it's called shell.corporate.com. \s-1SSH\s0 uses port number 22 by default. So start a new system console and type:</p><p>   desproxy shell.corporate.com 22 proxy 8080 1080</p><p>Then, tell your ssh client to connect to localhost (127.0.0.1) port 1080 and you should get a ssh password prompt!</p>
<h3>How to use desproxy to use other static clients</h3>
<p>Let's assume you want to use network application X, which doesn't support \s-1HTTP\s0 proxies but use one \s-1TCP/IP\s0 connection (like \s-1IRC\s0 and \s-1SSH\s0). To make X work with desproxy, you just have to 1) Search for the default port of that application 2) Search for the default server of that application and 3) Start desproxy, passing that info as command line parameters. Format is</p><p>    desproxy remote_host remote_port proxy_host proxy_port local_port</p><p>Just give a local_port of your desire, but always over 1023, cause lower ports may need administrator privileges.</p>
<h3>About \s-1HTTP\s0 Authentication</h3>
<p>Some \s-1HTTP\s0 proxies need for security reasons a method of checking client's identity. That's called \s-1HTTP\s0 authentication (or \s-1HTTP\s0 authorization).</p><p>Despoxy now supports Basic \s-1HTTP\s0 authentication. If your proxy needs other kind of authentication (either Digest or \s-1NTLM\s0) desproxy won't work.</p><p>For desproxy to work with a \s-1HTTP\s0 proxy that needs authentication, you have to tell desproxy which username and password to use. Desproxy reads the environment variable \s-1PROXY_USER\s0 to get that info.</p><p>Suppose your proxy username is \*(L"mayka\*(R" and your proxy password is \*(L"007sgotLTK\*(R". Then, before using any of the desproxy programs you should type this in your system console:</p><p>    set PROXY_USER=mayka:007sgotLTK</p><p>Beware passwords can include some characters that should be escaped from the system console. For example, if your password is \*(L"moon!=sun\*(R", and you are running Linux, you should type</p><p>    export PROXY_USER=yourusername:moon&#92;!&#92;=sun</p><p>Note characters \*(L"!\*(R" and \*(L"=\*(R" are escaped using the backslash \*(L"&#92;\*(R". If you are running \s-1MS\s0 Windows, as long as I know, you don't have to escape any valid password character.</p><p>head1 Troubleshooting</p><p>A normal desproxy session looks like this:</p><p>    $ desproxy 127.0.0.1 21 127.0.0.1 4480 2222</p><p>    -----------------------------------     desproxy                  &lt;version&gt;</p><p>    HTTP/1.1     (c) Miguelanxo Otero Salgueiro 2001     -----------------------------------</p><p>    Listening on port 2222     Connection request from 127.0.0.1, port 1227     Connecting to http proxy (127.0.0.1:4480)     Bidirectional connection stablished     (127.0.0.1:21) &lt;-&gt; (localhost)     End of connection.</p><p>Here, a connection to local ftp server (127.0.0.1:21) is made by using local proxy (127.0.0.1:4480). You can see how, after the connection is accepted, desproxy connected to the proxy, interchanged some bytes (a \s-1FTP\s0 session) and terminates the connection.</p><p>Desproxy is quite self explanatory about errors. Desproxy-inetd is far more obscure, because the way inetd uses it (can't print error messages) to the console.</p><p>Basically there are two kind of errors:</p><ul>
<li><p>Errors reported when connecting to the proxy: the http page showing the error is displayed.</p></li><li><p>Every other error: a short error message is displayed.</p></li>
</ul><p>Some common \s-1HTTP\s0 errors (as reported by the proxy)</p><p>     * HTTP 400 Bad Request - Some versions of desproxy (0.0.21) cause        this error (FATAL)      * HTTP 403 Forbidden - Forbidden to do that (FATAL)      * HTTP 404 Not Found - Page not found, or resource not found (MINOR)      * HTTP 405 Method not Allowed - Can&apos;t do CONNECT method (FATAL)      * HTTP 500 Internal Server Error - Maybe you&apos;re trying to connect to        a remote closed port (remote site reported connection refused)        (MINOR)      * HTTP 503 Service Unavailable -&gt; The proxy can&apos;t reach the site        (MINOR)      * HTTP 505 HTTP Version Not Supported - CONNECT method not available        (FATAL)      * HTTP 502 Bad Gateway - Stands for "DNS lookup error" (MINOR)</p><p>(\s-1FATAL\s0) - Forget about using desproxy, you can't surpass the proxy. (\s-1TODO\s0) - To do, not yet implemented. (\s-1MINOR\s0) - Temporary fault or maybe your fault.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    \s-1PROXY_USER\s0
  </dt>
  <dd>
    <p>An example:    PROXY_USER=mayka:007sgotLTK Beware passwords can include some characters that should be escaped from the system console. For example, if your password is \*(L"moon!=sun\*(R", and you are running Linux, you should type</p>
  </dd>
  <dt>
    \s-1PROXY_USER\s0
  </dt>
  <dd>
    <p>An example:     PROXY_USER=yourusername:moon&#92;!&#92;=sun Note characters \*(L"!\*(R" and \*(L"=\*(R" are escaped using the backslash \*(L"&#92;\*(R".</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>None.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO desproxy&hellip;</h2>
        <div class="sectioncontent">
<p><em>dnsproxy-dns</em>\|(1), <em>dnsproxy-inetd</em>\|(1), <em>dnsproxy-socksserver</em>\|(1), <em>connect</em>\|(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>This manual page was written by Jari Aalto &lt;jari.aalto@cante.net&gt;, for the Debian \s-1GNU\s0 system (but may be used by others). Released under license \s-1GPL\s0 v2 or, at your option, any later version.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="desmume-glade.1.html"><span aria-hidden="true">&larr;</span> desmume-glade.1: Nintendo ds emulator</a></li>
   <li class="next"><a href="desproxy-dns.1.html">desproxy-dns.1: Dns for dynamic connections <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
