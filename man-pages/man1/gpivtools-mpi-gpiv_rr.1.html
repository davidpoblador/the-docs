<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gpiv_rr: Interrogates an image (pair) in order to obtain displacements of particles for (digital) particle image velocimetry (piv)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Interrogates an image (pair) in order to obtain displacements of particles for (digital) particle image velocimetry (piv)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gpiv_rr (1) manual">
  <meta name="twitter:description" content="Interrogates an image (pair) in order to obtain displacements of particles for (digital) particle image velocimetry (piv)">
  <meta name="twitter:image" content="https://www.carta.tech/images/gpivtools-mpi-gpiv_rr-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/gpivtools-mpi-gpiv_rr.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gpiv_rr (1) manual" />
  <meta property="og:description" content="Interrogates an image (pair) in order to obtain displacements of particles for (digital) particle image velocimetry (piv)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gpivtools-mpi-gpiv_rr-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gpiv_rr<small> (1)</small></h1>
        <p class="lead">Interrogates an image (pair) in order to obtain displacements of particles for (digital) particle image velocimetry (piv)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpiv_rr.1.html">
      <span itemprop="name">gpiv_rr: Interrogates an image (pair) in order to obtain displacements of particles for (digital) particle image velocimetry (piv)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gpivtools-mpi/">
      <span itemprop="name">gpivtools-mpi</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpiv_rr.1.html">
      <span itemprop="name">gpiv_rr: Interrogates an image (pair) in order to obtain displacements of particles for (digital) particle image velocimetry (piv)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>gpiv_rr</strong> [<strong>--cf </strong><em>int</em>] [<strong>--cl </strong><em>int</em>] [<strong>--cp </strong><em>int</em>] [<strong>-g</strong>] [<strong>--gauss</strong>] [<strong>-h</strong> | <strong>--help</strong>] [<strong>--ifit </strong><em>0/1/2/3</em>] [<strong>--ischeme </strong><em>int</em>] [<strong>--ia_size_i </strong><em>int</em>] [<strong>--ia_size_f </strong><em>int</em>] [<strong>--ia_shift </strong><em>int</em>] [<strong>--linec </strong><em>int</em> <em>int</em> <em>int</em>] [<strong>--liner </strong><em>int</em> <em>int</em> <em>int</em>] [<strong>-o</strong>] [<strong>-p</strong> | <strong>--print</strong>] [<strong>--peak </strong><em>int</em>] [<strong>--p_piv</strong>]  [<strong>--point </strong><em>int int</em>] [<strong>--rf </strong><em>int</em>] [<strong>--rl </strong><em>int</em>] [<strong>--rp </strong><em>int</em>] [<strong>-s </strong><em>float</em>] [<strong>--spof</strong>] [<strong>-v</strong> | <strong>--version</strong>] [<strong>--val_r </strong><em>int</em>] [<strong>--val_s </strong><em>int</em>] [<strong>--val_t </strong><em>float</em>] [<em>filename</em>] &lt; <em>stdin</em> &gt; <em>stdout</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>gpiv_rr</strong> inte<em>rr</em>ogates an image or image pair that is obtained from a fluid flow by the so-called Digital Particle Image Velocimetry (DPIV) technique. Therefore, image(s) are sub-divided into interrogation areas on a rectangular grid.  At each interrogation area the mean (or most probable) particle displacement is estimated. This is done by correlating the belonging interrogation areas of an image-pair by means of the Fast Fourier Transformation (FFT) technique, resulting into a two-dimensional correlation function. The location of the highest function peak, then, represents the mean or most probable displacement of the particle images that have been resident within the interrogation areas. Estimation of the correlation peak at sub-pixel level may be calculated by different interpolation schemes. The program allows cross-correlation of single-exposed images on different frames or auto-correlation of a multi-exposed single-frame image. Interrogation areas of arbitrary sizes may be used in order to obtain an optimum spatial resolution. Adaptive sizes of interrogation areas allow for large dynamic ranges of the particle displacements. Zero offsetting of the interrogation areas by an iterative interrogation process results into higher accuracy/lower biases of the particle image displacements. A central differential interrogation scheme than might be applied. This may result into improved estimators, compared with the 'classical' forward interrogation scheme, especially in case of strong shear strain and vorticity of the flow. Most accurate results, however, are obtained by deforming the images towards each other by using the PIV estimators. As a convergence criterium for these iterative procedures, the cumulative difference (defined by GPIV_CUM_RESIDU_MIN = 0.25) between the PIV estimators from the current and the previous iteration is used. After each interrogation the PIV estimators are validated. Before outliers are substituted as defined by the <strong>VALID</strong> parameters, it will be tried if the PIV estimator from the second or third highest correlation peak will be valid.</p><p><strong>gpiv_rr</strong> is fed with images of the following formats: Portable Network Graphics (<em>filename</em><strong>.png</strong>), raw binary data (<em>filename</em><strong>.r</strong>) that is accompanied by an ASCII header file (<em>filename</em><strong>.h</strong>), HDF5 (<em>filename</em><strong>.hdf</strong>), <strong>tif</strong>, <strong>gif</strong>, <strong>pgm</strong>, <strong>bmp </strong>and LaVision's (tm) uncompressed image format (<em>filename</em><strong>.img</strong>). For cross-correlation the second image frame has to be concatenated after the first one into a single image file. This might be performed by <strong>gpiv_combing</strong>. Image parameters are read from the header or from other parameter resources (containing the key <strong>IMG</strong>) in case they are absent in the image header.</p><p>The configuration parameters (containing the <strong>EVAL</strong> or <strong>VALID</strong>) key may be overruled by the command line options, as explained below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Options</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--cf </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Specify the first column <em>N</em> in the image to interrogate. If --ad_int has been used, the first column has to be equal or larger than (int_size_2  - int_size_1)/2.</p>
  </dd>
  <dt>
    <p><strong>--cl </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Specify the last column <em>N</em> in the image to interrogate.</p>
  </dd>
  <dt>
    <p><strong>--cp </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Pre-shift of <em>N</em> columns. This can be used if there is a common mean flow in x-direction in the area of observation. Relative small interrogation areas (allowing a high spatial resolution) may be used in that case with conservation of a high probability in finding the correct displacement peaks.</p>
  </dd>
  <dt>
    <p><strong>-g</strong></p>
  </dt>
  <dd>
    <p>Graphic visualisation of the output with gnuplot. Can only be used in combination with <em>filename</em>).</p>
  </dd>
  <dt>
    <p><strong>--gauss</strong></p>
  </dt>
  <dd>
    <p>Gauss weighting of interrogation area to reduce high spatial frequency signal generated by the boundaries.</p>
  </dd>
  <dt>
    <p><strong>-h</strong> | <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Print a help message on standard output and exit successfully.</p>
  </dd>
  <dt>
    <p><strong>--ifit </strong><em>0/1/2/3</em></p>
  </dt>
  <dd>
    <p>Three-point interpolation model for peak maximum estimation at sub-pixel level. <em>0</em>: none, <em>1</em>: Gauss, <em>2</em>: Parabolic or <em>3</em> Center of Gravity.</p>
  </dd>
  <dt>
    <p><strong>--ischeme </strong><em>0/1/2/3/4</em></p>
  </dt>
  <dd>
    <p>Interrogation scheme: no correction (0),</p><p>linear kernel weighting (1); This is applied to the calculation of the correlation function; the weighting of the image data decreases towards the edges of the interrogation region. Kernel weighting compensates this effect. Will be disabled if interrogation area size of image 2 differs from image 1.</p><p>zero offset (2); Searches (iteratively) the correlation peak by zero offsetting the interrogation area's, until the peak maximum lies between (-1,-1) and (1,1). The images are interrogated by the 'classic' forward differential scheme.  During the last iteration step, sub-pixel displacement will be calculated as defined with <strong>-ifit</strong>.</p><p>Zero offset with central differential (3); The images are interrogated by the central differential scheme. This is done by displacing the interrogation area of the first image with half the (integer) magnitude of the pre-shift value in negative direction and displacing the interrogation area of the second image in positive direction (of identic magnitude).</p><p>Image deformation (4); The images of a pair are deformed following the particle displacements obtained from the initial PIV estimators or from the previous iteration step. The first image is deformed in positive direction with half the (float) magnitudes of the estimators and the second image in negative direction. In this way, both deformed images will show the particle positions at the moment in-between the recordings. After the iteration has been converged and -p option has been used, the deformed images are stored (defined by GPIV_DEFORMED_IMG_NAME = gpiv_defimg) in TMPDIR (/tmp for UNIX-like systems), which may be used as a check.</p>
  </dd>
  <dt>
    <p><strong>--ia_size_i </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Initial size of the interrogation area's <em>N</em>. <em>N</em> must be equal or larger than <strong>ia_size_f</strong>.</p><p>The sizes must be chosen in such a way that the particle displacements remain within 1/4th of the interrogation area's in order to keep the in-plane errors at minimum.</p><p>Choosing larger sizes of the initial interrogation area's allows high dynamic ranges of the estimators. In that case, the largest particle displacements may contribute adequately to the calculation of the estimators, while the estimators of the smallest flow scales are not smoothed by the large, initial, dimensions of the interrogation area's. The dimensions of the interrogation area's of the first and second image start with <strong>ia_size_i</strong>. For each next image interrogation, the sizes will be halved until they will be equal to the final <strong>ia_size_f</strong> value. The estimator will be used as a local pre-shift (zero offsetting, as defined by <strong>--ischeme</strong>). In case <strong>ia_size_f</strong> and/or <strong>ia_size_i</strong> is not a power of two, the sizes of the interrogation area's will be reduced with the appropriate factor during the last (iterative) interrogation in order to set them equal to <strong>ia_size_f</strong>. During the last interrogation, the estimator will be between (-1,-1) and (1,1).  Then, sub-pixel displacement will be calculated as defined by <strong>--ifit</strong>.</p>
  </dd>
  <dt>
    <p><strong>--ia_size_f </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Final size of the interrogation area's <em>N</em>, expressed in pixels. May be chosen arbitrarily.</p>
  </dd>
  <dt>
    <p><strong>--ia_shift </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Shift of adjacent interrogation areas <em>N</em>, expressed in pixels.</p>
  </dd>
  <dt>
    <p><strong>--linec </strong><em>COL RF RL</em></p>
  </dt>
  <dd>
    <p>selects a vertical line at column <em>COL</em> to interrogate from the first row <em>RF</em> to the last row <em>RL</em></p>
  </dd>
  <dt>
    <p><strong>--liner </strong><em>ROW CF CL</em></p>
  </dt>
  <dd>
    <p>selects an horizontal line at row <em>ROW</em> to interrogate from the first column <em>CF</em> to the last column <em>CL</em></p>
  </dd>
  <dt>
    <p><strong>-p</strong> | <strong>--print</strong></p>
  </dt>
  <dd>
    <p>Print parameters, command line options, progress of calculation and eventually used input and output filenames to stdout. The output is identic of <em>filename</em><strong>.par</strong>, in case <strong>-f</strong> is used.</p>
  </dd>
  <dt>
    <p><strong>--peak </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Find the <em>N</em>-th maximum of the correlation peak. In case of auto-correlation, the second peak is taken by default, as the first peak denotes the zero-shift of the particle displacements.</p>
  </dd>
  <dt>
    <p><strong>--p_piv</strong></p>
  </dt>
  <dd>
    <p>Print the piv results to stdout, even if <strong>-f</strong> has been specified.</p>
  </dd>
  <dt>
    <p><strong>--point </strong><em>COL ROW</em></p>
  </dt>
  <dd>
    <p>Select a single area in the image to interrogate at location <em>COL</em> ROW. This option might be useful for substitution of erroneous displacement vectors. A new estimation of the particle displacement with --peak, then, may give a correct result. Mind to use <strong>--p_piv</strong> if <strong>-f</strong> is used; else the original data file will be overwritten with a single point analyses.</p>
  </dd>
  <dt>
    <p><strong>--rf  </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Specify the first row <em>N</em> in the image to interrogate. If <strong>-ad_int</strong> has been used, the first row has to be equal or larger than (<strong>int_size_2</strong> - <strong>int_size_1</strong>)/2.</p>
  </dd>
  <dt>
    <p><strong>--rl </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Specify the last row <em>N</em> in the image to interrogate.</p>
  </dd>
  <dt>
    <p><strong>--rp </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Pre-shift of <em>N</em> rows. This can be used if there is a common mean flow in y-direction. Relative small interrogation areas (allowing a high spatial resolution) may be used in that case with conservation of a high probability in finding the correct displacement peaks.</p>
  </dd>
  <dt>
    <p><strong>-s </strong><em>S</em></p>
  </dt>
  <dd>
    <p>Scale factor for graphical output with gnuplot. This will only affect the length of the vectors that represent the particle image displacement magnitude, but not the PIV data itself. In order to adapt the scaling of the data, see gpiv_scale.</p>
  </dd>
  <dt>
    <p><strong>--spof</strong></p>
  </dt>
  <dd>
    <p>Applies symmetric phase only filtering. This option may drasticly improve the SNR with higher and thinner covariance peak. Especially useful when there is flare or high reflections (from boundaries, for example) in one of the two image frames from a PIV image pair. (Werner, Meas. Sci. Technol., 16, 601-618).</p>
  </dd>
  <dt>
    <p><strong>-v</strong> | <strong>--version</strong></p>
  </dt>
  <dd>
    <p>Print version information on standard output then exit successfully.</p>
  </dd>
  <dt>
    <p><strong>--val_r </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Validation parameter to define residue type: Signal to Noise Ratio (<em>N</em> = 0), median value from surroundings (<em>N</em> = 1) or normalised median (<em>N</em> = 2).</p>
  </dd>
  <dt>
    <p><strong>--val_s </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Validation parameter to substitute an erroneous vector by: nothing (<em>N</em> = 0), local mean from the surroundings (<em>N</em> = 1), the median of the surroundings (<em>N</em> = 2) or the estimation from the next highest correlation peak (<em>N</em> = 3).</p>
  </dd>
  <dt>
    <p><strong>--val_t </strong><em>F</em></p>
  </dt>
  <dd>
    <p>Validation parameter representing the threshold value (float number) of residues to be accepted.</p>
  </dd>
  <dt>
    <p><em>filename</em></p>
  </dt>
  <dd>
    <p>Using the full <em>filename</em> of the input image overrides <em>stdin</em> and <em>stdout</em>. Output will be written to <em>filename</em><strong>.piv</strong>. Parameters are stored in <em>filename</em><strong>.par</strong> and may be used for future use by including them in <em>./gpivrc</em>. If <em>stdin</em> and <em>stdout</em> are used, the input is expected to be a PNG formatted image.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gpiv_rr&hellip;</h2>
        <div class="sectioncontent">
<p>gpivtools</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><strong>gpiv_rr</strong> has been tested with artificial images and with PIV images from gas and liquid flows. Comparison with PIV data, obtained from different algorithms, and with literature results that similar data reliability and accuracy may be obtained with this program.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Gerber Van der Graaf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The program seems to work fine. Though as the PIV technology itself is subject of research, this program is constantly under development.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gpivtools-gpiv_rr.1.html"><span aria-hidden="true">&larr;</span> gpiv_rr.1: Interrogates an image (pair) in order to obtain displacements of particles for (digital) particle image velocimetry (piv)</a></li>
   <li class="next"><a href="gpivtools-gpiv_s-avg.1.html">gpiv_s-avg.1: Spatial statistics of piv data. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
