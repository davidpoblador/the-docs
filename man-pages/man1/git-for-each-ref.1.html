<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>git-for-each-ref: Output information on each ref</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Output information on each ref">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="git-for-each-ref (1) manual">
  <meta name="twitter:description" content="Output information on each ref">
  <meta name="twitter:image" content="https://www.carta.tech/images/git-man-git-for-each-ref-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/git-for-each-ref.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="git-for-each-ref (1) manual" />
  <meta property="og:description" content="Output information on each ref" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/git-man-git-for-each-ref-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">git-for-each-ref<small> (1)</small></h1>
        <p class="lead">Output information on each ref</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/git-for-each-ref.1.html">
      <span itemprop="name">git-for-each-ref: Output information on each ref</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/git-man/">
      <span itemprop="name">git-man</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/git-for-each-ref.1.html">
      <span itemprop="name">git-for-each-ref: Output information on each ref</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<em>git for-each-ref</em> [--count=&lt;count&gt;] [--shell|--perl|--python|--tcl]
                   [(--sort=&lt;key&gt;)...] [--format=&lt;format&gt;] [&lt;pattern&gt;...]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Iterate over all refs that match &lt;pattern&gt; and show them according to the given &lt;format&gt;, after sorting them according to the given set of &lt;key&gt;. If &lt;count&gt; is given, stop after showing that many refs. The interpolated values in &lt;format&gt; can optionally be quoted as string literals in the specified host language allowing their direct evaluation in that language.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>&lt;count&gt;</p><p>By default the command shows all refs that match &lt;pattern&gt;. This option makes it stop after showing that many refs.</p><p>&lt;key&gt;</p><p>A field name to sort on. Prefix - to sort in descending order of the value. When unspecified, refname is used. You may use the --sort=&lt;key&gt; option multiple times, in which case the last key becomes the primary key.</p><p>&lt;format&gt;</p><p>A string that interpolates %(fieldname) from the object pointed at by a ref being shown. If fieldname is prefixed with an asterisk (*) and the ref points at a tag object, the value for the field in the object tag refers is used. When unspecified, defaults to %(objectname) SPC %(objecttype) TAB %(refname). It also interpolates %% to %, and %xx where xx are hex digits interpolates to character with hex code xx; for example %00 interpolates to &#92;0 (NUL), %09 to &#92;t (TAB) and %0a to &#92;n (LF).</p><p>&lt;pattern&gt;...</p><p>If one or more patterns are given, only refs are shown that match against at least one pattern, either using <a href="../man3/fnmatch.3.html"><strong>fnmatch</strong>(3)</a> or literally, in the latter case matching completely or from the beginning up to a slash.</p><p>--shell, --perl, --python, --tcl</p><p>If given, strings that substitute %(fieldname) placeholders are quoted as string literals suitable for the specified host language. This is meant to produce a scriptlet that can directly be `eval`ed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FIELD NAMES</h2>
        <div class="sectioncontent">
<p>Various values from structured fields in referenced objects can be used to interpolate into the resulting output, or as sort keys.</p><p>For all objects, the following names can be used:</p><p>refname</p><p>The name of the ref (the part after $GIT_DIR/). For a non-ambiguous short name of the ref append :short. The option core.warnAmbiguousRefs is used to select the strict abbreviation mode.</p><p>objecttype</p><p>The type of the object (blob, tree, commit, tag).</p><p>objectsize</p><p>The size of the object (the same as <em>git cat-file -s</em> reports).</p><p>objectname</p><p>The object name (aka SHA-1). For a non-ambiguous abbreviation of the object name append :short.</p><p>upstream</p><p>The name of a local ref which can be considered &ldquo;upstream&rdquo; from the displayed ref. Respects :short in the same way as refname above. Additionally respects :track to show "[ahead N, behind M]" and :trackshort to show the terse version: "&gt;" (ahead), "&lt;" (behind), "&lt;&gt;" (ahead and behind), or "=" (in sync). Has no effect if the ref does not have tracking information associated with it.</p><p>HEAD</p><p><em>*</em> if HEAD matches current ref (the checked out branch), &apos; &apos; otherwise.</p><p>color</p><p>Change output color. Followed by :&lt;colorname&gt;, where names are described in color.branch.*.</p><p>In addition to the above, for commit and tag objects, the header field names (tree, parent, object, type, and tag) can be used to specify the value in the header field.</p><p>Fields that have name-email-date tuple as its value (author, committer, and tagger) can be suffixed with name, email, and date to extract the named component.</p><p>The complete message in a commit and tag object is contents. Its first line is contents:subject, where subject is the concatenation of all lines of the commit message up to the first blank line. The next line is <em>contents:body</em>, where body is all of the lines after the first blank line. Finally, the optional GPG signature is contents:signature.</p><p>For sorting purposes, fields with numeric values sort in numeric order (objectsize, authordate, committerdate, taggerdate). All other fields are used to sort in their byte-value order.</p><p>In any case, a field name that refers to a field inapplicable to the object referred by the ref does not cause an error. It returns an empty string instead.</p><p>As a special case for the date-type fields, you may specify a format for the date by adding one of :default, :relative, :short, :local, :iso8601, :rfc2822 or :raw to the end of the fieldname; e.g. %(taggerdate:relative).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>An example directly producing formatted text. Show the most recent 3 tagged commits:</p>
<pre>
#!/bin/sh

git for-each-ref --count=3 --sort=&apos;-*authordate&apos; &#92;
--format=&apos;From: %(*authorname) %(*authoremail)
Subject: %(*subject)
Date: %(*authordate)
Ref: %(*refname)

%(*body)
&apos; &apos;refs/tags&apos;
</pre>
<p>A simple example showing the use of shell eval on the output, demonstrating the use of --shell. List the prefixes of all heads:</p>
<pre>
#!/bin/sh

git for-each-ref --shell --format="ref=%(refname)" refs/heads | &#92;
while read entry
do
        eval "$entry"
        echo `dirname $ref`
done
</pre>
<p>A bit more elaborate report on tags, demonstrating that the format may be an entire script:</p>
<pre>
#!/bin/sh

fmt=&apos;
        r=%(refname)
        t=%(*objecttype)
        T=${r#refs/tags/}

        o=%(*objectname)
        n=%(*authorname)
        e=%(*authoremail)
        s=%(*subject)
        d=%(*authordate)
        b=%(*body)

        kind=Tag
        if test "z$t" = z
        then
                # could be a lightweight tag
                t=%(objecttype)
                kind="Lightweight tag"
                o=%(objectname)
                n=%(authorname)
                e=%(authoremail)
                s=%(subject)
                d=%(authordate)
                b=%(body)
        fi
        echo "$kind $T points at a $t object $o"
        if test "z$t" = zcommit
        then
                echo "The commit was authored by $n $e
at $d, and titled

    $s

Its message reads as:
"
                echo "$b" | sed -e "s/^/    /"
                echo
        fi
&apos;

eval=`git for-each-ref --shell --format="$fmt" &#92;
        --sort=&apos;*objecttype&apos; &#92;
        --sort=-taggerdate &#92;
        refs/tags`
eval "$eval"
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO git-for-each-ref&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/git-show-ref.1.html"><strong>git-show-ref</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GIT</h2>
        <div class="sectioncontent">
<p>Part of the <a href="../man1/git.1.html"><strong>git</strong>(1)</a> suite</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="git-fmt-merge-msg.1.html"><span aria-hidden="true">&larr;</span> git-fmt-merge-msg.1: Produce a merge commit message</a></li>
   <li class="next"><a href="git-format-patch.1.html">git-format-patch.1: Prepare patches for e-mail submission <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
