<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ci: Check in rcs revisions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Check in rcs revisions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ci (1) manual">
  <meta name="twitter:description" content="Check in rcs revisions">
  <meta name="twitter:image" content="https://www.carta.tech/images/rcs-ci-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ci.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ci (1) manual" />
  <meta property="og:description" content="Check in rcs revisions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/rcs-ci-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ci<small> (1)</small></h1>
        <p class="lead">Check in rcs revisions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ci.1.html">
      <span itemprop="name">ci: Check in rcs revisions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/rcs/">
      <span itemprop="name">rcs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ci.1.html">
      <span itemprop="name">ci: Check in rcs revisions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ci</strong> [<em>options</em>]<em> file </em>.\|.\|.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ci</strong> stores new revisions into \*os. Each file name matching an \*r suffix is taken to be an \*o. All others are assumed to be working files containing new revisions. <strong>ci</strong> deposits the contents of each working file into the corresponding \*o. If only a working file is given, <strong>ci</strong> tries to find the corresponding \*o in an \*r subdirectory and then in the working file's directory. For more details, see <small>FILE NAMING</small> below.</p><p>For <strong>ci</strong> to work, the caller's login must be on the access list, except if the access list is empty or the caller is the superuser or the owner of the file. To append a new revision to an existing branch, the tip revision on that branch must be locked by the caller.  Otherwise, only a new branch can be created.  This restriction is not enforced for the owner of the file if non-strict locking is used (see <a href="../man1/rcs.1.html"><strong>rcs</strong>(1)</a>). A lock held by someone else can be broken with the <strong>rcs</strong> command.</p><p>Unless the <strong>-f</strong> option is given, <strong>ci</strong> checks whether the revision to be deposited differs from the preceding one. If not, instead of creating a new revision <strong>ci</strong> reverts to the preceding one. To revert, ordinary <strong>ci</strong> removes the working file and any lock; <strong>ci&nbsp;-l</strong> keeps and <strong>ci&nbsp;-u</strong> removes any lock, and then they both generate a new working file much as if <strong>co&nbsp;-l</strong> or <strong>co&nbsp;-u</strong> had been applied to the preceding revision. When reverting, any <strong>-n</strong> and <strong>-s</strong> options apply to the preceding revision.</p><p>For each revision deposited, <strong>ci</strong> prompts for a log message. The log message should summarize the change and must be terminated by end-of-file or by a line containing <strong>.</strong>&nbsp;by itself. If several files are checked in <strong>ci</strong> asks whether to reuse the previous log message. If the standard input is not a terminal, <strong>ci</strong> suppresses the prompt and uses the same log message for all files. See also <strong>-m</strong>.</p><p>If the \*o does not exist, <strong>ci</strong> creates it and deposits the contents of the working file as the initial revision (default number: <strong>1.1</strong>). The access list is initialized to empty. Instead of the log message, <strong>ci</strong> requests descriptive text (see <strong>-t</strong> below).</p><p>The number <em>rev</em> of the deposited revision can be given by any of the options <strong>-f</strong>, <strong>-i</strong>, <strong>-I</strong>, <strong>-j</strong>, <strong>-k</strong>, <strong>-l</strong>, <strong>-M</strong>, <strong>-q</strong>, <strong>-r</strong>, or <strong>-u</strong>. <em>rev</em> can be symbolic, numeric, or mixed. Symbolic names in <em>rev</em> must already be defined; see the <strong>-n</strong> and <strong>-N</strong> options for assigning names during checkin. If <em>rev</em> is <strong>$</strong>, <strong>ci</strong> determines the revision number from keyword values in the working file.</p><p>If <em>rev</em> begins with a period, then the default branch (normally the trunk) is prepended to it. If <em>rev</em> is a branch number followed by a period, then the latest revision on that branch is used.</p><p>If <em>rev</em> is a revision number, it must be higher than the latest one on the branch to which <em>rev</em> belongs, or must start a new branch.</p><p>If <em>rev</em> is a branch rather than a revision number, the new revision is appended to that branch.  The level number is obtained by incrementing the tip revision number of that branch. If <em>rev</em> indicates a non-existing branch, that branch is created with the initial revision numbered <em>rev</em><strong>.1</strong>.<strong></strong></p><p>If <em>rev</em> is omitted, <strong>ci</strong> tries to derive the new revision number from the caller's last lock.  If the caller has locked the tip revision of a branch, the new revision is appended to that branch. The new revision number is obtained by incrementing the tip revision number. If the caller locked a non-tip revision, a new branch is started at that revision by incrementing the highest branch number at that revision. The default initial branch and level numbers are <strong>1</strong>.</p><p>If <em>rev</em> is omitted and the caller has no lock, but owns the file and locking is not set to <em>strict</em>, then the revision is appended to the default branch (normally the trunk; see the <strong>-b</strong> option of <a href="../man1/rcs.1.html"><strong>rcs</strong>(1)</a>).</p><p>Exception: On the trunk, revisions can be appended to the end, but not inserted.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-r</strong><em>rev</em></p>
  </dt>
  <dd>
    <p>Check in revision <em>rev</em>.</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>The bare <strong>-r</strong> option (without any revision) has an unusual meaning in <strong>ci</strong>. With other \*r commands, a bare <strong>-r</strong> option specifies the most recent revision on the default branch, but with <strong>ci</strong>, a bare <strong>-r</strong> option reestablishes the default behavior of releasing a lock and removing the working file, and is used to override any default <strong>-l</strong> or <strong>-u</strong> options established by shell aliases or scripts.</p>
  </dd>
  <dt>
    <p><strong>-l</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>works like <strong>-r</strong>, except it performs an additional <strong>co&nbsp;-l</strong> for the deposited revision.  Thus, the deposited revision is immediately checked out again and locked. This is useful for saving a revision although one wants to continue editing it after the checkin.</p>
  </dd>
  <dt>
    <p><strong>-u</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>works like <strong>-l</strong>, except that the deposited revision is not locked. This lets one read the working file immediately after checkin.</p><p>The <strong>-l</strong>, bare <strong>-r</strong>, and <strong>-u</strong> options are mutually exclusive and silently override each other. For example, <strong>ci&nbsp;-u&nbsp;-r</strong> is equivalent to <strong>ci&nbsp;-r</strong> because bare <strong>-r</strong> overrides <strong>-u</strong>.</p>
  </dd>
  <dt>
    <p><strong>-f</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>forces a deposit; the new revision is deposited even it is not different from the preceding one.</p>
  </dd>
  <dt>
    <p><strong>-k</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>searches the working file for keyword values to determine its revision number, creation date, state, and author (see <strong>co</strong>(1)), and assigns these values to the deposited revision, rather than computing them locally. It also generates a default login message noting the login of the caller and the actual checkin date. This option is useful for software distribution.  A revision that is sent to several sites should be checked in with the <strong>-k</strong> option at these sites to preserve the original number, date, author, and state. The extracted keyword values and the default log message can be overridden with the options <strong>-d</strong>, <strong>-m</strong>, <strong>-s</strong>, <strong>-w</strong>, and any option that carries a revision number.</p>
  </dd>
  <dt>
    <p><strong>-q</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>quiet mode; diagnostic output is not printed. A revision that is not different from the preceding one is not deposited, unless <strong>-f</strong> is given.</p>
  </dd>
  <dt>
    <p><strong>-i</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>initial checkin; report an error if the \*o already exists. This avoids race conditions in certain applications.</p>
  </dd>
  <dt>
    <p><strong>-j</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>just checkin and do not initialize; report an error if the \*o does not already exist.</p>
  </dd>
  <dt>
    <p><strong>-I</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>interactive mode; the user is prompted and questioned even if the standard input is not a terminal.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>[<em>date</em>]</p>
  </dt>
  <dd>
    <p>uses <em>date</em> for the checkin date and time. The <em>date</em> is specified in free format as explained in <strong>co</strong>(1). This is useful for lying about the checkin date, and for <strong>-k</strong> if no date is available. If <em>date</em> is empty, the working file's time of last modification is used.</p>
  </dd>
  <dt>
    <p><strong>-M</strong>[<em>rev</em>]</p>
  </dt>
  <dd>
    <p>Set the modification time on any new working file to be the date of the retrieved revision. For example, <strong>ci&nbsp;-d&nbsp;-M&nbsp;-u</strong><em>&nbsp;f</em> does not alter <em>f</em>'s modification time, even if <em>f</em>'s contents change due to keyword substitution. Use this option with care; it can confuse <a href="../man1/make.1.html"><strong>make</strong>(1)</a>.</p>
  </dd>
  <dt>
    <p><strong>-m</strong>[<em>msg</em>]</p>
  </dt>
  <dd>
    <p>uses the string <em>msg</em> as the log message for all revisions checked in. If <em>msg</em> is omitted, it defaults to "*** empty log message ***". By convention, log messages that start with <strong>#</strong> are comments and are ignored by programs like GNU Emacs's <strong>vc</strong> package. Also, log messages that start with <strong>{</strong><em>clumpname</em><strong>}</strong> (followed by white space) are meant to be clumped together if possible, even if they are associated with different files; the <strong>{</strong><em>clumpname</em><strong>}</strong> label is used only for clumping, and is not considered to be part of the log message itself.</p>
  </dd>
  <dt>
    <p><strong>-n</strong><em>name</em></p>
  </dt>
  <dd>
    <p>assigns the symbolic name <em>name</em> to the number of the checked-in revision. <strong>ci</strong> prints an error message if <em>name</em> is already assigned to another number.</p>
  </dd>
  <dt>
    <p><strong>-N</strong><em>name</em></p>
  </dt>
  <dd>
    <p>same as <strong>-n</strong>, except that it overrides a previous assignment of <em>name</em>.</p>
  </dd>
  <dt>
    <p><strong>-s</strong><em>state</em></p>
  </dt>
  <dd>
    <p>sets the state of the checked-in revision to the identifier <em>state</em>. The default state is <strong>Exp</strong>.</p>
  </dd>
  <dt>
    <p><strong>-t</strong><em>file</em></p>
  </dt>
  <dd>
    <p>writes descriptive text from the contents of the named <em>file</em> into the \*o, deleting the existing text. The <em>file</em> cannot begin with <strong>-</strong>.</p>
  </dd>
  <dt>
    <p><strong>-t-</strong><em>string</em></p>
  </dt>
  <dd>
    <p>Write descriptive text from the <em>string</em> into the \*o, deleting the existing text.</p><p>The <strong>-t</strong> option, in both its forms, has effect only during an initial checkin; it is silently ignored otherwise.</p><p>During the initial checkin, if <strong>-t</strong> is not given, <strong>ci</strong> obtains the text from standard input, terminated by end-of-file or by a line containing <strong>.</strong>&nbsp;by itself. The user is prompted for the text if interaction is possible; see <strong>-I</strong>.</p><p>For backward compatibility with older versions of \*r, a bare <strong>-t</strong> option is ignored.</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Set the \*o's modification time to the new revision's time if the former precedes the latter and there is a new revision; preserve the \*o's modification time otherwise. If you have locked a revision, <strong>ci</strong> usually updates the \*o's modification time to the current time, because the lock is stored in the \*o and removing the lock requires changing the \*o. This can create an \*o newer than the working file in one of two ways: first, <strong>ci&nbsp;-M</strong> can create a working file with a date before the current time; second, when reverting to the previous revision the \*o can change while the working file remains unchanged. These two cases can cause excessive recompilation caused by a <a href="../man1/make.1.html"><strong>make</strong>(1)</a> dependency of the working file on the \*o. The <strong>-T</strong> option inhibits this recompilation by lying about the \*o's date. Use this option with care; it can suppress recompilation even when a checkin of one working file should affect another working file associated with the same \*o. For example, suppose the \*o's time is 01:00, the (changed) working file's time is 02:00, some other copy of the working file has a time of 03:00, and the current time is 04:00. Then <strong>ci&nbsp;-d&nbsp;-T</strong> sets the \*o's time to 02:00 instead of the usual 04:00; this causes <a href="../man1/make.1.html"><strong>make</strong>(1)</a> to think (incorrectly) that the other copy is newer than the \*o.</p>
  </dd>
  <dt>
    <p><strong>-w</strong><em>login</em></p>
  </dt>
  <dd>
    <p>uses <em>login</em> for the author field of the deposited revision. Useful for lying about the author, and for <strong>-k</strong> if no author is available.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Print \*r's version number.</p>
  </dd>
  <dt>
    <p><strong>-V</strong><em>n</em></p>
  </dt>
  <dd>
    <p>Emulate \*r version <em>n</em>. See <strong>co</strong>(1) for details.</p>
  </dd>
  <dt>
    <p><strong>-x</strong><em>suffixes</em></p>
  </dt>
  <dd>
    <p>specifies the suffixes for \*os. A nonempty suffix matches any file name ending in the suffix. An empty suffix matches any file name of the form <strong>RCS/</strong><em>frag</em> or <em>frag1</em><strong>/RCS/</strong><em>frag2.</em> The <strong>-x</strong> option can specify a list of suffixes separated by <strong>/</strong>. For example, <strong>-x,v/</strong> specifies two suffixes: <strong>,v</strong> and the empty suffix. If two or more suffixes are specified, they are tried in order when looking for an \*o; the first one that works is used for that file. If no \*o is found but an \*o can be created, the suffixes are tried in order to determine the new \*o's name. The default for <em>suffixes</em> is installation-dependent; normally it is <strong>,v/</strong> for hosts like Unix that permit commas in file names, and is empty (i.e. just the empty suffix) for other hosts.</p>
  </dd>
  <dt>
    <p><strong>-z</strong><em>zone</em></p>
  </dt>
  <dd>
    <p>specifies the date output format in keyword substitution, and specifies the default time zone for <em>date</em> in the <strong>-d</strong><em>date</em> option. The <em>zone</em> should be empty, a numeric \*u offset, or the special string <strong>LT</strong> for local time. The default is an empty <em>zone</em>, which uses the traditional \*r format of \*u without any time zone indication and with slashes separating the parts of the date; otherwise, times are output in \*i 8601 format with time zone indication. For example, if local time is January 11, 1990, 8pm Pacific Standard Time, eight hours west of \*u, then the time is output as follows:</p>
<pre>
<em>option</em>	<em>time output</em>
<strong>-z</strong>	<strong>1990/01/12 04:00:00</strong>	<em>(default)</em>
<strong>-zLT</strong>	<strong>1990-01-11 20:00:00-08</strong>
<strong>-z+05:30</strong>	<strong>1990-01-12 09:30:00+05:30</strong>
</pre>
<p>The <strong>-z</strong> option does not affect dates stored in \*os, which are always \*u.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE NAMING</h2>
        <div class="sectioncontent">
<p>Pairs of \*os and working files can be specified in three ways (see also the example section).</p><p>1) Both the \*o and the working file are given. The \*o name is of the form <em>frag1</em><strong>/</strong><em>workfileX</em> and the working file name is of the form <em>frag2</em><strong>/</strong><em>workfile</em> where <em>frag1</em><strong>/</strong> and <em>frag2</em><strong>/</strong> are (possibly different or empty) file names, <em>workfile</em> is a file name, and <em>X</em> is an \*r suffix. If <em>X</em> is empty, <em>frag1</em><strong>/</strong> must start with <strong>RCS/</strong> or must contain <strong>/RCS/</strong>.</p><p>2) Only the \*o is given. Then the working file is created in the current directory and its name is derived from the \*o name by removing <em>frag1</em><strong>/</strong> and the suffix <em>X</em>.</p><p>3) Only the working file is given. Then <strong>ci</strong> considers each \*r suffix <em>X</em> in turn, looking for an \*o of the form <em>frag2</em><strong>/RCS/</strong><em>workfileX</em> or (if the former is not found and <em>X</em> is nonempty) <em>frag2</em><strong>/</strong><em>workfileX.</em></p><p>If the \*o is specified without a file name in 1) and 2), <strong>ci</strong> looks for the \*o first in the directory <strong>./RCS</strong> and then in the current directory.</p><p><strong>ci</strong> reports an error if an attempt to open an \*o fails for an unusual reason, even if the \*o's name is just one of several possibilities. For example, to suppress use of \*r commands in a directory <em>d</em>, create a regular file named <em>d</em><strong>/RCS</strong> so that casual attempts to use \*r commands in <em>d</em> fail because <em>d</em><strong>/RCS</strong> is not a directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Suppose <strong>,v</strong> is an \*r suffix and the current directory contains a subdirectory <strong>RCS</strong> with an \*o <strong>io.c,v</strong>. Then each of the following commands check in a copy of <strong>io.c</strong> into <strong>RCS/io.c,v</strong> as the latest revision, removing <strong>io.c</strong>.</p>
<pre>
ci  io.c;    ci  RCS/io.c,v;   ci  io.c,v;
ci  io.c  RCS/io.c,v;    ci  io.c  io.c,v;
ci  RCS/io.c,v  io.c;    ci  io.c,v  io.c;
</pre>
<p>Suppose instead that the empty suffix is an \*r suffix and the current directory contains a subdirectory <strong>RCS</strong> with an \*o <strong>io.c</strong>. The each of the following commands checks in a new revision.</p>
<pre>
ci  io.c;    ci  RCS/io.c;
ci  io.c  RCS/io.c;
ci  RCS/io.c  io.c;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE MODES</h2>
        <div class="sectioncontent">
<p>An \*o created by <strong>ci</strong> inherits the read and execute permissions from the working file.  If the \*o exists already, <strong>ci</strong> preserves its read and execute permissions. <strong>ci</strong> always turns off all write permissions of \*os.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>Temporary files are created in the directory containing the working file, and also in the temporary directory (see <strong>\s-1TMPDIR\s0</strong> under <strong>\s-1ENVIRONMENT\s0</strong>). A semaphore file or files are created in the directory containing the \*o. With a nonempty suffix, the semaphore names begin with the first character of the suffix; therefore, do not specify an suffix whose first character could be that of a working file name. With an empty suffix, the semaphore names end with <strong>_</strong> so working file names should not end in <strong>_</strong>.</p><p><strong>ci</strong> never changes an \*o or working file. Normally, <strong>ci</strong> unlinks the file and creates a new one; but instead of breaking a chain of one or more symbolic links to an \*o, it unlinks the destination file instead. Therefore, <strong>ci</strong> breaks any hard or symbolic links to any working file it changes; and hard links to \*os are ineffective, but symbolic links to \*os are preserved.</p><p>The effective user must be able to search and write the directory containing the \*o. Normally, the real user must be able to read the \*r and working files and to search and write the directory containing the working file; however, some older hosts cannot easily switch between real and effective users, so on these hosts the effective user is used for all accesses. The effective user is the same as the real user unless your copies of <strong>ci</strong> and <strong>co</strong> have setuid privileges. As described in the next section, these privileges yield extra security if the effective user owns all \*os and directories, and if only the effective user can write \*r directories.</p><p>Users can control access to \*os by setting the permissions of the directory containing the files; only users with write access to the directory can use \*r commands to change its \*os. For example, in hosts that allow a user to belong to several groups, one can make a group's \*r directories writable to that group only. This approach suffices for informal projects, but it means that any group member can arbitrarily change the group's \*os, and can even remove them entirely. Hence more formal projects sometimes distinguish between an \*r administrator, who can change the \*os at will, and other project members, who can check in new revisions but cannot otherwise change the \*os.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SETUID USE</h2>
        <div class="sectioncontent">
<p>To prevent anybody but their \*r administrator from deleting revisions, a set of users can employ setuid privileges as follows.</p><ul>
<li><p>Check that the host supports \*r setuid use. Consult a trustworthy expert if there are any doubts. It is best if the <strong>seteuid</strong> system call works as described in Posix 1003.1a Draft 5, because \*r can switch back and forth easily between real and effective users, even if the real user is <strong>root</strong>. If not, the second best is if the <strong>setuid</strong> system call supports saved setuid (the {\s-1_POSIX_SAVED_IDS\s0} behavior of Posix 1003.1-1990); this fails only if the real or effective user is <strong>root</strong>. If \*r detects any failure in setuid, it quits immediately.</p></li><li><p>Choose a user <em>A</em> to serve as \*r administrator for the set of users. Only <em>A</em> can invoke the <strong>rcs</strong> command on the users' \*os. <em>A</em> should not be <strong>root</strong> or any other user with special powers. Mutually suspicious sets of users should use different administrators.</p></li><li><p>Choose a file name <em>B</em> to be a directory of files to be executed by the users.</p></li><li><p>Have <em>A</em> set up <em>B</em> to contain copies of <strong>ci</strong> and <strong>co</strong> that are setuid to <em>A</em> by copying the commands from their standard installation directory <em>D</em> as follows:</p></li>
</ul>
<pre>
<strong>mkdir</strong>  <em>B</em>
<strong>cp</strong>  <em>D</em>\^<strong>/c[io]</strong>  <em>B</em>
<strong>chmod  go-w,u+s</strong>  <em>B</em><strong>/c[io]</strong>
</pre>
<ul>
<li><p>Have each user prepend <em>B</em> to their command search path as follows:</p></li>
</ul>
<pre>
<strong>PATH=</strong><em>B</em><strong>:$PATH;  export  PATH</strong>  # ordinary shell
<strong>set  path=(</strong><em>B</em>  <strong>$path)</strong>  # C shell
</pre>
<ul>
<li><p>Have <em>A</em> create each \*r directory <em>R</em> with write access only to <em>A</em> as follows:</p></li>
</ul>
<pre>
<strong>mkdir</strong>  <em>R</em>
<strong>chmod  go-w</strong>  <em>R</em>
</pre>
<ul>
<li><p>If you want to let only certain users read the \*os, put the users into a group <em>G</em>, and have <em>A</em> further protect the \*r directory as follows:</p></li>
</ul>
<pre>
<strong>chgrp</strong>  <em>G  R</em>
<strong>chmod  g-w,o-rwx</strong>  <em>R</em>
</pre>
<ul>
<li><p>Have <em>A</em> copy old \*os (if any) into <em>R</em>, to ensure that <em>A</em> owns them.</p></li><li><p>An \*o's access list limits who can check in and lock revisions. The default access list is empty, which grants checkin access to anyone who can read the \*o. If you want limit checkin access, have <em>A</em> invoke <strong>rcs&nbsp;-a</strong> on the file; see <a href="../man1/rcs.1.html"><strong>rcs</strong>(1)</a>. In particular, <strong>rcs&nbsp;-e&nbsp;-a</strong><em>A</em> limits access to just <em>A</em>.</p></li><li><p>Have <em>A</em> initialize any new \*os with <strong>rcs&nbsp;-i</strong> before initial checkin, adding the <strong>-a</strong> option if you want to limit checkin access.</p></li><li><p>Give setuid privileges only to <strong>ci</strong>, <strong>co</strong>, and <strong>rcsclean</strong>; do not give them to <strong>rcs</strong> or to any other command.</p></li><li><p>Do not use other setuid commands to invoke \*r commands; setuid is trickier than you think!</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>\s-1RCSINIT\s0</strong></p>
  </dt>
  <dd>
    <p>Options prepended to the argument list, separated by spaces. A backslash escapes spaces within an option. The <strong>\s-1RCSINIT\s0</strong> options are prepended to the argument lists of most \*r commands. Useful <strong>\s-1RCSINIT\s0</strong> options include <strong>-q</strong>, <strong>-V</strong>, <strong>-x</strong>, and <strong>-z</strong>.</p>
  </dd>
  <dt>
    <p><strong>\s-1RCS_MEM_LIMIT\s0</strong></p>
  </dt>
  <dd>
    <p>An integer <em>lim</em>, measured in kilobytes, specifying the threshold under which commands will try to use memory-based operations for processing the \*o. (For \*os of size <em>lim</em> kilobytes or greater, RCS will use the slower standard input/output routines.) Default value is 256.</p>
  </dd>
  <dt>
    <p><strong>\s-1TMPDIR\s0</strong></p>
  </dt>
  <dd>
    <p>Name of the temporary directory. If not set, the environment variables <strong>\s-1TMP\s0</strong> and <strong>\s-1TEMP\s0</strong> are inspected instead and the first value found is taken; if none of them are set, a host-dependent default is used, typically <strong>/tmp</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>For each revision, <strong>ci</strong> prints the \*o, the working file, and the number of both the deposited and the preceding revision. The exit status is zero if and only if all operations were successful.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IDENTIFICATION</h2>
        <div class="sectioncontent">
<p>Author: Walter F. Tichy.</p><p>Manual Page Revision: \*(Rv; Release Date: \*(Dt.</p><p>Copyright &copy; 2010-2014 Thien-Thi Nguyen.</p><p>Copyright &copy; \*(EY Paul Eggert.</p><p>Copyright &copy; 1982, 1988, 1989 Walter F. Tichy.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ci&hellip;</h2>
        <div class="sectioncontent">
<p><strong>co</strong>(1), <strong>emacs</strong>(1), <a href="../man1/ident.1.html"><strong>ident</strong>(1)</a>, <a href="../man1/make.1.html"><strong>make</strong>(1)</a>, <a href="../man1/rcs.1.html"><strong>rcs</strong>(1)</a>, <a href="../man1/rcsclean.1.html"><strong>rcsclean</strong>(1)</a>, <a href="../man1/rcsdiff.1.html"><strong>rcsdiff</strong>(1)</a>, <a href="../man1/rcsmerge.1.html"><strong>rcsmerge</strong>(1)</a>, <a href="../man1/rlog.1.html"><strong>rlog</strong>(1)</a>, <a href="../man2/setuid.2.html"><strong>setuid</strong>(2)</a>, <strong>rcsfile</strong>(5).</p><p>Walter F. Tichy, \*r\*-A System for Version Control, <em>Software\*-Practice & Experience</em> <strong>15</strong>, 7 (July 1985), 637-654.</p><p>The full documentation for \*r is maintained as a Texinfo manual. If the <a href="../man1/info.1.html"><strong>info</strong>(1)</a> and \*r programs are properly installed at your site, the command</p><ul>
<li><p><strong>info rcs</strong></p></li>
</ul><p>should give you access to the complete manual. Additionally, the \*r homepage:</p><ul>
<li><p><strong>http://www.gnu.org/software/rcs/</strong></p></li>
</ul><p>has news and links to the latest release, development site, etc.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="chvt.1.html"><span aria-hidden="true">&larr;</span> chvt.1: Change foreground virtual terminal</a></li>
   <li class="next"><a href="cif2cbf.1.html">cif2cbf.1: Convert a cif to a cbf file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
