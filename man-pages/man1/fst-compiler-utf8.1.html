<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fst-compiler-utf8: Two compilers for sfst programs</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Two compilers for sfst programs">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fst-compiler-utf8 (1) manual">
  <meta name="twitter:description" content="Two compilers for sfst programs">
  <meta name="twitter:image" content="https://www.carta.tech/images/sfst-fst-compiler-utf8-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/fst-compiler-utf8.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fst-compiler-utf8 (1) manual" />
  <meta property="og:description" content="Two compilers for sfst programs" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/sfst-fst-compiler-utf8-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fst-compiler-utf8<small> (1)</small></h1>
        <p class="lead">Two compilers for sfst programs</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/fst-compiler-utf8.1.html">
      <span itemprop="name">fst-compiler-utf8: Two compilers for sfst programs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/sfst/">
      <span itemprop="name">sfst</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/fst-compiler-utf8.1.html">
      <span itemprop="name">fst-compiler-utf8: Two compilers for sfst programs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fst-compiler</strong> <em>grammar-file</em> [ <em>output-file</em> ]</p><p><strong>fst-compiler-utf8</strong> <em>grammar-file</em> [ <em>output-file</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-c</strong></p>
  </dt>
  <dd>
    <p>Store the transducer in compact format which is used by fst-infl2.</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>Store the transducer in lowmem format.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>Switch surface and analysis layer of the transducer. You have to use this switch in order to use <em>fst-infl (fst-infl2, fst-infl3)</em> for generation rather than analysis.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>fst-compiler</strong> is a compiler for finite-state transducer programs. It generates a minimized finite state transducer which can be used with <em>fst-mor,</em> <em>fst-infl,</em> <em>fst-print,</em> <em>fst-compare,</em> <em>fst-parse,</em> and <em>fst-lattice.</em> The compact transducer representation which is generated with the -c flag, is supported by <em>fst-infl2,</em> <em>fst-train,</em> and <em>fst-match.</em> The memory-efficient transducer representation which is generated with the -l flag, is only supported by <em>fst-infl3.</em></p><p>The first program argument is the name of a file which contains the transducer program. The programming language is described below. The second argument is the name of the file to which the resulting transducer will be written in binary form. If a second argument is missing, the output will be written to <em>stdout.</em></p><p><em>fst-compiler-utf8</em> differs from <em>fst-compiler</em> only in the character encoding. <em>fst-compiler-utf8</em> supports UTF8 encoding of the source files whereas <em>fst-compiler</em> is to be used for 8-Bit character codes like latin1 which are an extension of the ASCII code. Information about the encoding is stored in the transducer files and used by the other SFST programs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE FORMATS</h2>
        <div class="sectioncontent">
<p>A transducer program consists of an (optional) sequence of <em>alphabet</em> and <em>variable</em> definitions followed by a single <em>transducer expression</em> which defines the result transducer.</p><p><small>Alphabet</small></p><p>An alphabet definition consists of the keyword ALPHABET followed by = and some transducer expression e.g.</p>
<dl class='dl-vertical'>
  <dt>
    
<pre>
    ALPHABET = [a-z]:[A-Z]
</pre>

  </dt>
  <dd>
    
  </dd>

</dl>
<p>This command redefines the alphabet as the set of symbol pairs occurring on the transitions of the transducer. Occurrences of two-level operators, negation operators and unquoted periods always have to be preceded by an alphabet definition.</p><p><small>Variables</small></p><p>There are two different types of variables. <em>Symbol set variables</em> are enclosed by hash signs (#) and take symbol sequences (see below) as values:</p>
<dl class='dl-vertical'>
  <dt>
    
<pre>
    #UC# = A-Z
    #LC# = a-z
</pre>

  </dt>
  <dd>
    
  </dd>

</dl>
<p><em>Transducer variables</em> are enclosed by dollar signs and take transducer expressions as values:</p>
<dl class='dl-vertical'>
  <dt>
    
<pre>
    $MAP$ = [a-z]:[A-Z]+
    $MAP$ = [#LC#]:[#UC#]+
</pre>

  </dt>
  <dd>
    
  </dd>

</dl>
<p>Variables whose name starts with the symbol `=' are special <em>agreement</em> variables. If an agreement variable occurs more than once in a transducer expression, it will always have the same value. Consider the following transducer program:</p>
<dl class='dl-vertical'>
  <dt>
    
<pre>
    $=1$ = [abc]
    $=1$ X $=1$
</pre>

  </dt>
  <dd>
    
  </dd>

</dl>
<p>The result transducer recognizes the strings aXa, bXb, and cXc. Only acyclic transducers (i.e. transducers with a finite set of string mappings) can be assigned to agreement variables.</p><p><small>Symbols</small></p><p>A symbol is either</p><p>- a single character like A s 5,</p><p>- a quoted character like &#92;* or &#92;_,</p>
<dl class='dl-vertical'>
  <dt>
    <p>- a multi-character symbol like &lt;X&gt; or &lt;ab.c5&gt; (which is always</p>
  </dt>
  <dd>
    <p>enclosed in angle brackets) or</p>
  </dd>
  <dt>
    <p>- a backslash followed by a number which is the numeric code of the</p>
  </dt>
  <dd>
    <p>designated character</p>
  </dd>

</dl>
<p>- the null symbol &lt;&gt;.</p><p><small>Symbol sequence</small></p><p>A symbol sequence is a sequence of characters, multi-character symbols and character ranges, e.g. a-z &#92;. &lt;x&gt;.</p><p><small>symbol range</small></p><p>A symbol range is either</p><p>- a single symbol</p><p>- a symbol sequence enclosed in square brackets like [A-Za-z] or</p><p>- a symbol sequence starting with ^ and enclosed in square brackets like [^A-Za-z] (designating the complement of [a-zA-Z]) or</p><p>- the period (which represents any symbol from the alphabet)</p><p><small>Transducer expressions</small></p><p>A transducer expression (TE) is recursively defined as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p>- A pair of two symbol ranges separated by a colon is a TE.</p>
  </dt>
  <dd>
    <p>[a-z]:[a-Z]</p>
  </dd>
  <dt>
    <p>- A single symbol range like [a-z] is a TE.</p>
  </dt>
  <dd>
    <p>It is a short form for [a-z]:[a-z].</p>
  </dd>
  <dt>
    <p>- Two symbol sequences enclosed in braces and separated by a colon are</p>
  </dt>
  <dd>
    <p>a TE. {a[bc]}:{def} is equivalent to a:d b:e &lt;&gt;:f | a:d c:e &lt;&gt;:f.</p>
  </dd>
  <dt>
    <p>- X Y is a TE if X and Y are TEs.</p>
  </dt>
  <dd>
    <p>(Blanks are ignored unless they are quoted.)</p>
  </dd>
  <dt>
    <p>- (X) is a TE if X is a TE.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>- X op is a TE is X is a TE and op is either * (Kleene's star operator), +</p>
  </dt>
  <dd>
    <p>(Kleene's plus operator), or ? (optionality operator)</p>
  </dd>
  <dt>
    <p>- op X is a TE is X is a TE and op is either ! (negation operator), ^</p>
  </dt>
  <dd>
    <p>(target language extraction operator), _ (source language extraction operator), or ^_ (source and target switch operator).</p>
  </dd>
  <dt>
    <p>- X op Y is a TE is X and Y are TEs and op is either & (conjunction</p>
  </dt>
  <dd>
    <p>operator), | (disjunction operator), || (composition operator), or - (subtraction operator)</p>
  </dd>
  <dt>
    <p>- L x op y R is a TE if L and R are TEs, x and y are symbol ranges and</p>
  </dt>
  <dd>
    <p>op is either =&gt; (two-level restriction), &lt;= (two-level coercion), or &lt;=&gt; (two-level restriction and coercion).</p>
  </dd>
  <dt>
    <p>- X op L__R is a TE if X, L and R are TEs and op is either ^-&gt; (upward</p>
  </dt>
  <dd>
    <p>replacement), _-&gt; (downward replacement), /-&gt; (leftward replacement) or \-&gt; (rightward replacement). Furthermore, L and R must define automata (i.e. which map their strings onto themselves). These operators correspond to Karttunen's replace operators. If the arrow is followed by a question mark (?), the replacement becomes optional.</p>
  </dd>
  <dt>
    <p>- X &lt;&lt; l is a TE if X is a TE, and l is either of the form</p>
  </dt>
  <dd>
    <p>a or the form a:b where a and b are single characters or symbols. The result is a transducer where l was freely inserted into X. The transducer ab &lt;&lt; c for instance is equivalent to c*ac*bc*.</p>
  </dd>
  <dt>
    <p>- X op Y L1__R2, ... , LN__RN is a TE if X,Y, L1 through LN and R1</p>
  </dt>
  <dd>
    <p>through RN are TEs, and op is either =&gt; (general restriction), &lt;= (general coercion), ^=&gt; (general surface restriction), ^&lt;= (general surface coercion), ^&lt;=&gt; (general surface restriction and coercion), _=&gt; (general deep restriction), _&lt;= (general deep coercion), _&lt;=&gt; (general deep restriction and coercion). (These operators were implemented following a suggestion by Anssi Yli-Jyra.)</p>
  </dd>
  <dt>
    <p>- "fname" is a TE. The compiler reads the file named fname and turns</p>
  </dt>
  <dd>
    <p>it into a transducer of the form line1|line2|line3|... where linex is the x-th line of the file. All characters other than : and nbsp;are interpreted literally (i.e. not as operators). This TE is typically used e.g. to read morpheme list from a file.</p>
  </dd>
  <dt>
    <p>- "&lt;fname&gt;" is a TE. The compiler reads a pre-compiled transducer from</p>
  </dt>
  <dd>
    <p>the file named fname. This</p>
  </dd>

</dl>
<p>Further Features</p><p>Comments start with the symbol % and extend up to the end of the line. Blanks are ignored unless they are quoted. Expressions terminate at the end of a line unless the end of line is preceded by a backslash. The command</p>
<dl class='dl-vertical'>
  <dt>
    <p>#include "fname"</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>can be used to insert source code from a file named fname. The command</p>
<dl class='dl-vertical'>
  <dt>
    <p>RE &gt;&gt; "fname"</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>stores the regular expression RE in the file fname. The command</p>
<dl class='dl-vertical'>
  <dt>
    <p>#use hopcroft</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>tells the compiler to use the Hopcroft minimisation algorithm from now on, and</p>
<dl class='dl-vertical'>
  <dt>
    <p>#use default</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>switsches back to the default minimisation algorithm (Brzozowski). The command</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>Here is an example of a simple transducer program. Assuming that the file "adj-stems" contains the two lines</p><p>easy late big</p><p>this transducer will correctly analyze the adjective forms easy, easier, easiest and late, later, and latest.</p><p>ALPHABET = [a-zA-Z] y:i e:&lt;&gt; &lt;ADJ&gt;:&lt;&gt;</p><p>$R$ = y&lt;=&gt;i (&lt;ADJ&gt;:&lt;&gt; e)</p><p>$R2$ = e&lt;=&gt;&lt;&gt; (&lt;ADJ&gt;:&lt;&gt; e)</p><p>$R$ = $R$ & $R2$</p><p>$Stems$ = "adj-stems"</p><p>$S$ = $Stems$ &lt;ADJ&gt; (&lt;pos&gt;:&lt;&gt;|&lt;cmp&gt;:{er}|&lt;sup&gt;:{est})</p><p>$S$ || $R$</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>fst-compiler</strong> returns 0 unless some error occurs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The compiler gets the operator precedence wrong in case of two-level rules and interprets the expression "ab c&lt;=&gt;d ef" as "a(b c&lt;=&gt;d (ef))". Therefore, you should always surround the left context of two-level rules with parenthesis: (ab) c&lt;=&gt;d (ef)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fst-compiler-utf8&hellip;</h2>
        <div class="sectioncontent">
<p>fst-mor, fst-infl, fst-infl2, fst-infl3, fst-print, fst-compact, fst-parse, fst-compare, fst-compact, fst-lowmem, fst-lattice, fst-train</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Helmut Schmid, Institute for Computational Linguistics, University of Stuttgart, Email: schmid@ims.uni-stuttgart.de, This software is available under the GNU Public License.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fst-compiler.1.html"><span aria-hidden="true">&larr;</span> fst-compiler.1: Two compilers for sfst programs</a></li>
   <li class="next"><a href="fst-generate.1.html">fst-generate.1: Randomly generate strings of character pairs from a transducer <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
