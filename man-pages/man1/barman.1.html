<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>barman: Backup and recovery manager for postgresql</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Backup and recovery manager for postgresql">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="barman (1) manual">
  <meta name="twitter:description" content="Backup and recovery manager for postgresql">
  <meta name="twitter:image" content="https://www.carta.tech/images/barman-barman-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/barman.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="barman (1) manual" />
  <meta property="og:description" content="Backup and recovery manager for postgresql" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/barman-barman-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">barman<small> (1)</small></h1>
        <p class="lead">Backup and recovery manager for postgresql</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/barman.1.html">
      <span itemprop="name">barman: Backup and recovery manager for postgresql</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/barman/">
      <span itemprop="name">barman</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/barman.1.html">
      <span itemprop="name">barman: Backup and recovery manager for postgresql</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>barman</strong> [<em>OPTIONS</em>] {COMMAND}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><a href="../man1/barman.1.html"><strong>barman</strong>(1)</a> is an administration tool for disaster recovery of PostgreSQL servers written in Python. barman can perform remote backups of multiple servers in business critical environments and helps DBAs during the recovery phase.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-v, --version</strong></p><p>Show program version number and exit.</p><p><strong>-q, --quiet</strong></p><p>Do not output anything. Useful for cron scripts.</p><p><strong>-h, --help</strong></p><p>Show a help message and exit.</p><p><strong>-c CONFIG, --config CONFIG</strong></p><p>Use the specified configuration file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WHERE COMMAND CAN BE:</h2>
        <div class="sectioncontent">
<p>Important: every command has an help option</p><p><strong>cron</strong></p><p>Perform maintenance tasks, such as moving incoming WAL files to the appropriate directory.</p><p><strong>list-server</strong></p><p>Show all the configured servers, and their descriptions.</p><p><strong>show-server SERVERNAME</strong></p><p>Show information about SERVERNAME, including: conninfo, backup_directory, wals_directory and many more. Specify all as SERVERNAME to show information about all the configured servers.</p><p><strong>status SERVERNAME</strong></p><p>Show information about the status of a server, including: number of available backups, archive_command, archive_status and many more.</p>
<pre>
Example:
Server main:
  description: PostgreSQL Example Database
  PostgreSQL version: 9.1.1
  PostgreSQL Data directory: /var/lib/pgsql/9.1/data
  archive_command: rsync -a %p barman@test-backup-server:/srv/barman/main/incoming/%f
  archive_status: last shipped WAL segment 0000000100000009000000ED
  current_xlog: 0000000100000009000000EF
  No. of available backups: 1
  first/last available backup: 20120528T113358
</pre>
<p><strong>check SERVERNAME</strong></p><p>Show diagnostic information about SERVERNAME, including: ssh connection check, PostgreSQL version, configuration and backup directories. Specify all as SERVERNAME to show diagnostic information about all the configured servers.</p><p><strong>--nagios</strong></p><p>Nagios plugin compatible output</p><p><strong>diagnose</strong></p><p>Collect diagnostic information about the server where barman is installed and all the configured servers, including: global configuration, SSH version, Python version, rsync version, as well as current configuration and status of all servers.</p><p><strong>backup SERVERNAME</strong></p><p>Perform a backup of SERVERNAME using parameters specified in the configuration file. Specify all as SERVERNAME to perform a backup of all the configured servers.</p><p><strong>--immediate-checkpoint</strong></p><p>forces the initial checkpoint to be done as quickly as possible. Overrides value of the parameter immediate_checkpoint, if present in the configuration file.</p><p><strong>--no-immediate-checkpoint</strong></p><p>forces to wait for the checkpoint. Overrides value of the parameter immediate_checkpoint, if present in the configuration file.</p><p><strong>--retry-times</strong></p><p>Number of retries of data copy during base backup after an error. Overrides value of the parameter basebackup_retry_times, if present in the configuration file.</p><p><strong>--no-retry</strong></p><p>Same as --retry-times 0</p><p><strong>--retry-sleep</strong></p><p>Number of seconds of wait after a failed copy, before retrying. Overrides value of the parameter basebackup_retry_sleep, if present in the configuration file.</p><p><strong>--no-immediate-checkpoint</strong></p><p>Forces the number of retries of data copy to 0. Overrides value of the parameter basebackup_retry_times, if present in the configuration file.</p><p><strong>list-backup SERVERNAME</strong></p><p>Show available backups for SERVERNAME. This command is useful to retrieve a backup ID.</p><p>Example: servername 20111104T102647 - Fri Nov 4 10:26:48 2011 - Size: 17.0 MiB - WAL Size: 100 B</p>
<pre>
Here 20111104T102647 is the backup ID.
</pre>
<p><strong>show-backup SERVERNAME BACKUPID</strong></p><p>Show detailed information about a particular backup, identified by the server name and the backup ID. See the "Backup ID shortcuts" section below for available shortcuts.</p>
<pre>
Example:
Backup 20111104T102647:
  Server Name       : main
  PostgreSQL Version: 90101
  PGDATA directory  : /var/lib/pgsql/9.1/data
</pre>

<pre>
Base backup information:
  Disk usage      : 17.0 MiB
  Timeline        : 1
  Begin WAL       : 000000010000000000000002
  End WAL         : 000000010000000000000002
  WAL number      : 0
  Begin time      : 2011-11-04 10:26:47.357260
  End time        : 2011-11-04 10:26:48.888903
  Begin Offset    : 32
  End Offset      : 160
  Begin XLOG      : 0/2000020
  End XLOG        : 0/20000A0
</pre>

<pre>
WAL information:
  No of files     : 0
  Disk usage      : 0 B
  Last available  : None
</pre>

<pre>
Catalog information:
  Previous Backup : - (this is the oldest base backup)
  Next Backup     : - (this is the latest base backup)
</pre>
<p><strong>list-files [OPTIONS] SERVERNAME BACKUPID</strong></p><p>List all the files in a particular backup, identified by the server name and the backup ID. See the "Backup ID shortcuts" section below for available shortcuts.</p><p><strong>--target TARGET_TYPE</strong></p><p>Possible values for TARGET_TYPE are:</p><p><strong>data</strong> - lists just the data files;</p><p><strong>standalone</strong> - lists the base backup files, including required WAL files;</p><p><strong>wal</strong> - lists all the WAL files between the start of the base backup and the end of the log / the start of the following base backup (depending on whether the specified base backup is the most recent one available);</p><p><strong>full</strong> - same as data + wal. Defaults to standalone</p><p><strong>rebuild-xlogdb SERVERNAME</strong></p><p>Perform a rebuild of the WAL file metadata for SERVERNAME (or every server, using the all shortcut) guessing it from the disk content. The metadata of the WAL archive is contained in the xlog.db file, and every Barman server has its own copy.</p><p><strong>recover [OPTIONS] SERVERNAME BACKUPID DESTINATIONDIRECTORY</strong></p><p>Recover a backup in a given directory (local or remote, depending on the --remote-ssh-command option settings). See the "Backup ID shortcuts" section below for available shortcuts.</p><p><strong>--target-tli TARGET_TLI</strong></p><p>Recover the specified timeline.</p><p><strong>--target-time TARGET_TIME</strong></p><p>Recover to the specified time. You can use any valid unambiguous representation. e.g: "YYYY-MM-DD HH:MM:SS.mmm".</p><p><strong>--target-xid TARGET_XID</strong></p><p>Recover to the specified transaction ID.</p><p><strong>--target-name TARGET_NAME</strong></p><p>Recover to the named restore point previously created with the pg_create_restore_point(name) (for PostgreSQL 9.1 and above users).</p><p><strong>--exclusive</strong></p><p>Set target xid to be non inclusive.</p><p><strong>--tablespace NAME:LOCATION</strong></p><p>Specify tablespace relocation rule.</p><p><strong>--remote-ssh-command SSH_COMMAND</strong></p><p>This options activates remote recovery, by specifying the secure shell command to be launched on a remote host. This is the equivalent of the "ssh_command" server option in the configuration file for remote recovery. Example: <em>ssh postgres@db2</em>.</p><p><strong>--retry-times</strong></p><p>Number of retries of data copy during base backup after an error. Overrides value of the parameter basebackup_retry_times, if present in the configuration file.</p><p><strong>--retry-sleep</strong></p><p>Number of seconds of wait after a failed copy, before retrying. Overrides value of the parameter basebackup_retry_sleep, if present in the configuration file.</p><p><strong>--no-immediate-checkpoint</strong></p><p>Forces the number of retries of data copy to 0. Overrides value of the parameter basebackup_retry_times, if present in the configuration file.</p><p><strong>delete SERVERNAME BACKUPID</strong></p><p>Delete the specified backup. See the "Backup ID shortcuts" section below for available shortcuts.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BACKUP ID SHORTCUTS</h2>
        <div class="sectioncontent">
<p>Rather than using the timestamp backup ID, you can use any of the following shortcuts/aliases to identity a backup for a given server:</p><p><strong>first</strong></p><p>Oldest available backup for that server, in chronological order.</p><p><strong>last</strong></p><p>Latest available backup for that server, in chronological order.</p><p><strong>latest</strong></p><p>same ast <strong>last</strong>.</p><p><strong>oldest</strong></p><p>same ast <strong>first</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>0</strong></p><p>Success</p><p><strong>Not zero</strong></p><p>Failure</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Barman has been extensively tested, and is currently being used in several production environments. However, we cannot exclude the presence of bugs.</p><p>Any bug can be reported via the Sourceforge bug tracker. Along the bug submission, users can provide developers with diagnostics information obtained through the barman diagnose command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>In alphabetical order:</p><p>Gabriele Bartolini &lt;gabriele.bartolini@2ndquadrant.it&gt; (core team, project leader)</p><p>Giuseppe Broccolo &lt;giuseppe.broccolo@2ndquadrant.it&gt; (core team, QA/testing)</p><p>Giulio Calacoci &lt;giulio.calacoci@2ndquadrant.it&gt; (core team, developer)</p><p>Francesco Canovai &lt;francesco.canovai@2ndquadrant.it&gt; (core team, QA/testing)</p><p>Marco Nenciarini &lt;marco.nenciarini@2ndquadrant.it&gt; (core team, team leader)</p><p>Past contributors:</p><p>Carlo Ascani</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESOURCES</h2>
        <div class="sectioncontent">
<p>Homepage: http://www.pgbarman.org/</p><p>Documentation: http://docs.pgbarman.org/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Barman is the exclusive property of 2ndQuadrant Italia and its code is distributed under GNU General Public License v3.</p><p>Copyright &copy; 2011-2014 2ndQuadrant Italia (Devise.IT S.r.l.) - http://www.2ndQuadrant.it/.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bareos-tray-monitor.1.html"><span aria-hidden="true">&larr;</span> bareos-tray-monitor.1: Bareos's 'system tray' monitor</a></li>
   <li class="next"><a href="barnowl.1.html">barnowl.1: Tty\(hybased zephyr client <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
