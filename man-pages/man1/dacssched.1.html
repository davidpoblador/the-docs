<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dacssched: Rule-based command scheduling</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Rule-based command scheduling">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dacssched (1) manual">
  <meta name="twitter:description" content="Rule-based command scheduling">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-dacssched-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/dacssched.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dacssched (1) manual" />
  <meta property="og:description" content="Rule-based command scheduling" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-dacssched-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dacssched<small> (1)</small></h1>
        <p class="lead">Rule-based command scheduling</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dacssched.1.html">
      <span itemprop="name">dacssched: Rule-based command scheduling</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dacssched.1.html">
      <span itemprop="name">dacssched: Rule-based command scheduling</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dacssched</strong> [<strong>-h</strong> | <strong>-help</strong>] [<strong>-ll&nbsp;</strong><strong></strong><em>log_level</em>] [<strong>-q</strong>] [{<strong>-r</strong>&nbsp;|&nbsp;<strong>-rules</strong>}&nbsp;<em>rules_uri</em>] [{<strong>-s</strong>&nbsp;|&nbsp;<strong>-sched</strong>}&nbsp;<em>sched_uri</em>] [<strong>-v</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program is part of the <strong>DACS</strong> suite. It is a stand-alone program that neither accepts the usual <strong>DACS</strong> command line options (<em>dacsoptions</em>) nor accesses any <strong>DACS</strong> configuration files.</p><p>The <strong>dacssched</strong> command runs other programs when specified conditions have been met. It does this by periodically examining a schedule, which, for each scheduled event, identifies the necessary conditions and the command line to be executed should the conditions be satisfied. Rules are stored separately from the schedule, although in a future version it might be possible to contain them with their schedule.</p><p>Although <strong>dacssched</strong> is conceptually similar to \m[blue]<a href="../man8/cron.8.html"><strong>cron</strong>(8)</a></strong>\m[]\s-2\u[1]\d\s+2, \m[blue]<strong>atrun</strong>(8)</strong>\m[]\s-2\u[2]\d\s+2, and other programs used to schedule a command to be executed or a reminder to be sent at certain times or dates, there are some important differences. First, because the <strong>DACS</strong> rule evaluation engine is used, conditions much more broad and complex than simply the time or date can be used to schedule a command - <strong>DACS</strong>\m[blue]<strong>expressions</strong>\m[]\s-2\u[3]\d\s+2 are available. For instance, a rule to manage automated file backup could be written to take into account context other than simply the day of the week and the time of day, if necessary even running external programs to assist in making the determination. Second, both a schedule and the rules referenced by a schedule are accessed through the <strong>DACS</strong> virtual filestore, which means they can be stored in file or database, retrieved by HTTP, and so on.</p><p><strong>Note</strong></p><p>Although this program may be useful, it is currently merely a prototype intended for demonstration and experimentation purposes. Some configuration capabilities, features, and security steps required by a production version have not been implemented. The prototype must be invoked periodically; a production version would run in the background and automatically rescan the schedule at a given frequency. Note that because of its flexibility, the schedule must be polled at a suitable frequency - in general, the program cannot compute when the next scheduled event will occur. Also because events need not be triggered by a time or date, some events may need to "self-disabling" so that they are not repeatedly executed unintentionally.</p><h3>Operation</h3>
<p>The program loads a <em>schedule</em>, which either comes from a default file or a location specified on the command line. A schedule is an ordinary text file, each line of which is either blank, a comment, or a scheduled event. The file is processed in the order in which the events appear from the top. Initial whitespace on any line is ignored. A comment line begins with a "#" character. A scheduled event consists of a <em>name</em>, followed by whitespace, followed by a command. If <em>name</em> evaluates to <strong>True</strong> (i.e., it grants access), the command is executed through \m[blue]<a href="../man3/system.3.html"><strong>system</strong>(3)</a></strong>\m[]\s-2\u[4]\d\s+2. If rule evaluation fails because of an error, the event is not executed. Events are not removed from the schedule after their command has been executed.</p><p>A <em>name</em>, which must begin with a slash, has no significance to <strong>dacssched</strong>; it is simply a label that is used to identify the rule to apply and is matched against a rule&apos;s service element.</p><p>Here is a simple schedule containing one event:</p>
<pre>
# A simple schedule
/setdate   /usr/local/sbin/rdate -a
</pre>
<p>If the condition labelled /setdate is <strong>True</strong> the specified command will be executed.</p><p>A simple rule such as the following might be associated with the event:</p>
<pre>
&lt;acl_rule status="enabled"&gt;
    &lt;services&gt;
      &lt;service url_pattern="/setdate"/&gt;
    &lt;/services&gt;

   &lt;rule order="allow,deny"&gt;
     &lt;allow&gt;
       time(hour) eq 2 and time(min) eq 0
     &lt;/allow&gt;
   &lt;/rule&gt;
&lt;/acl_rule&gt;
</pre>
<p>This rule enables the event /setdate at 2:00am every day. We will assume that the schedule is processed exactly once per minute.</p><p>Internally, <strong>dacssched</strong> converts the scheduled event above into the expression:</p>
<pre>
rule("/setdate", <em>rule_uri</em>)
</pre>
<p>(where <em>rule_uri</em> specifies the ruleset to use) and then evaluates the expression. Please refer to the \m[blue]<strong></strong><strong>rule</strong> predicate\m[]\s-2\u[5]\d\s+2 for additional information.</p>
<h3>OPTIONS</h3>
<p>The arguments are processed as they are examined (left-to-right) and their ordering can be significant.</p><p>By default, the program will look for a schedule in the file <em>${Conf::DACS_HOME}</em>/dacssched/sched. (default: /usr/local/dacs/dacssched/sched) The default location for the rules is <em>${Conf::DACS_HOME}</em>/dacssched/acls. (default: /usr/local/dacs/dacssched/acls)</p><p>The following command line flags are recognized:</p><p><strong>-h</strong></p><p>Prints the usage blurb.</p><p><strong>-ll</strong> <em>log_level</em></p><p>Set the debugging output level to <em>log_level</em> (see \m[blue]<a href="../man1/dacs.1.html"><strong>dacs</strong>(1)</a></strong>\m[]\s-2\u[6]\d\s+2). The default level is warn, and the <strong>-v</strong> flag bumps the level to debug or trace.</p><p><strong>-q</strong></p><p>Be quiet, except for error messages. The <strong>-v</strong> and <strong>-ll</strong> flags are independent of this.</p><p><strong>-r</strong> <em>rule_uri</em></p><p><strong>-rules</strong> <em>rule_uri</em></p><p>This flag specifies the ruleset to be used. It can be an absolute pathname or a URI in the syntax of the \m[blue]<strong>VFS</strong>\m[]\s-2\u[7]\d\s+2 configuration directive. Examples:</p>
<pre>
-r "[acls1]dacs-fs:/local/acls"
-rules /usr/local/myrules
</pre>
<p><strong>-s</strong> <em>sched_uri</em></p><p><strong>-sched</strong> <em>sched_uri</em></p><p>This flag specifies the schedule. It can be an absolute pathname or a URI in the syntax of the \m[blue]<strong>VFS</strong>\m[]\s-2\u[7]\d\s+2 configuration directive.</p><p><strong>-v</strong></p><p>Increase the level of debugging output. The flag may be repeated.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>The program exits 0 if everything was fine, 1 if an error occurred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dacssched&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<a href="../man5/dacs.exprs.5.html"><strong>dacs.exprs</strong>(5)</a></strong>\m[]\s-2\u[3]\d\s+2, \m[blue]<a href="../man5/dacs.acls.5.html"><strong>dacs.acls</strong>(5)</a></strong>\m[]\s-2\u[8]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Distributed Systems Software (\m[blue]<strong>www.dss.ca</strong>\m[]\s-2\u[9]\d\s+2)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright2003-2013 Distributed Systems Software. See the \m[blue]<strong>LICENSE</strong>\m[]\s-2\u[10]\d\s+2 file that accompanies the distribution for licensing information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man8/cron.8.html"><strong>cron</strong>(8)</a></p><p>http://www.freebsd.org/cgi/man.cgi?query=cron&apropos=0&sektion=8&manpath=FreeBSD+9.1-RELEASE&format=html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><strong>atrun</strong>(8)</p><p>http://www.freebsd.org/cgi/man.cgi?query=atrun&apropos=0&sektion=8&manpath=FreeBSD+9.1-RELEASE&format=html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>expressions</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p><a href="../man3/system.3.html"><strong>system</strong>(3)</a></p><p>http://www.freebsd.org/cgi/man.cgi?query=system&apropos=0&sektion=3&manpath=FreeBSD+9.1-RELEASE&format=html</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p><strong>rule</strong> predicate</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html#rule</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p><a href="../man1/dacs.1.html"><strong>dacs</strong>(1)</a></p><p>http://dacs.dss.ca/man/dacs.1.html</p>
  </dd>
  <dt>
     7.
  </dt>
  <dd>
    <p>VFS</p><p>http://dacs.dss.ca/man/dacs.conf.5.html#VFS</p>
  </dd>
  <dt>
     8.
  </dt>
  <dd>
    <p><a href="../man5/dacs.acls.5.html"><strong>dacs.acls</strong>(5)</a></p><p>http://dacs.dss.ca/man/dacs.acls.5.html</p>
  </dd>
  <dt>
     9.
  </dt>
  <dd>
    <p>www.dss.ca</p><p>http://www.dss.ca</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p>LICENSE</p><p>http://dacs.dss.ca/man/../misc/LICENSE</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dacsrlink.1.html"><span aria-hidden="true">&larr;</span> dacsrlink.1: Create and administer rule links</a></li>
   <li class="next"><a href="dacstoken.1.html">dacstoken.1: Administer hash-based one-time passwords <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
