<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmccabe: Calculate mccabe cyclomatic complexity or non-commented line counts for c and c++ programs</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Calculate mccabe cyclomatic complexity or non-commented line counts for c and c++ programs">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pmccabe (1) manual">
  <meta name="twitter:description" content="Calculate mccabe cyclomatic complexity or non-commented line counts for c and c++ programs">
  <meta name="twitter:image" content="https://www.carta.tech/images/pmccabe-pmccabe-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pmccabe.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pmccabe (1) manual" />
  <meta property="og:description" content="Calculate mccabe cyclomatic complexity or non-commented line counts for c and c++ programs" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pmccabe-pmccabe-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmccabe<small> (1)</small></h1>
        <p class="lead">Calculate mccabe cyclomatic complexity or non-commented line counts for c and c++ programs</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmccabe.1.html">
      <span itemprop="name">pmccabe: Calculate mccabe cyclomatic complexity or non-commented line counts for c and c++ programs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pmccabe/">
      <span itemprop="name">pmccabe</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmccabe.1.html">
      <span itemprop="name">pmccabe: Calculate mccabe cyclomatic complexity or non-commented line counts for c and c++ programs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pmccabe [-bCdfFntTvV?] [file(s)]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>pmccabe</em> processes the named files, or standard input if none are named. In default mode it calculates statistics including McCabe cyclomatic complexity for each function. The files are expected to be either C (ANSI or K&R) or C++.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-?</strong></p>
  </dt>
  <dd>
    <p>Print an informative usage message.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Print column headers</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Print <em>pmccabe</em> version number</p>
  </dd>

</dl>
<h3>De-commenting mode</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Intended to help count non-commented source lines via something like:</p><ul>
<li><p>pmccabe -d *.c | grep -v '^[&lt;blank&gt;&lt;tab&gt;]*$' | wc -l</p><p>Comments are removed, <em>cpp</em> directives are replaced by <strong>cpp</strong>, string literals are replaced by <strong>STRINGLITERAL</strong>, character constants are replaced by <strong>CHARLITERAL</strong>. The resulting source code is much easier to parse. This is the first step performed by <em>pmccabe</em> so that its parser can be simpler.</p></li>
</ul>
  </dd>

</dl>
<p>None of the other options work sensibly with <strong>-d</strong>.</p>
<h3>Line-counting mode</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>Counts non-commented source lines. The output format is identical to that of the <em>anac</em> program except that column headers and totals must be requested if desired. If you want column headers add <strong>-v</strong>. If you want totals add <strong>-t</strong>. If all you want is totals add <strong>-T</strong>.</p>
  </dd>

</dl>

<h3>Complexity mode (default)</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-C</strong></p>
  </dt>
  <dd>
    <p>Custom output format - don't use it.</p>
  </dd>
  <dt>
    <p><strong>-c</strong></p>
  </dt>
  <dd>
    <p>Report non-commented, non-blank lines per function (and file) instead of the raw number of lines. <strong>Note that pre-processor directives are NOT counted.</strong></p>
  </dd>
  <dt>
    <p><strong>-b</strong></p>
  </dt>
  <dd>
    <p>Output format compatible with compiler error browsing tools which understand "classic" compiler errors. Numerical sorting on this format is possible using:</p><ul>
<li><p>sort -n +1 -t%</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>Print column totals. Note the total number of lines is *NOT* the number of non-commented source lines - it's the same as would be reported by "wc -l".</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Print column totals *ONLY*.</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>Include per-file totals along with the per-function totals.</p>
  </dd>
  <dt>
    <p><strong>-F</strong></p>
  </dt>
  <dd>
    <p>Print per-file totals but NOT per-function totals.</p>
  </dd>

</dl>

<h3>Parsing</h3>
<p><em>pmccabe</em> ignores all <em>cpp</em> preprocessor directives - calculating the complexity of the appearance of the code rather than the complexity after the preprocessor mangles the code. This is especially important since simple things like <a href="../man3/getchar.3.html"><strong>getchar</strong>(3)</a></em> expand into macros which increase complexity.</p>
<h3>Output Format</h3>
<p>A line is written to standard output for each function found of the form:</p><ul>
<li>
<pre>
Modified McCabe Cyclomatic Complexity
|   Traditional McCabe Cyclomatic Complexity
|       |    # Statements in function
|       |        |   First line of function
|       |        |       |   # lines in function
|       |        |       |       |  filename(definition line number):function
|       |        |       |       |           |
5       6       11      34      27      gettoken.c(35): matchparen
</pre>
</li>
</ul><p>Column 1 contains cyclomatic complexity calculated by adding 1 (for the function) to the occurences of <strong>for</strong>, <strong>if</strong>, <strong>while</strong>, <strong>switch</strong>, <strong>&&</strong>, <strong>||</strong>, and <strong>?</strong>. Unlike "normal" McCabe cyclomatic complexity, each case in a switch statement is not counted as additional complexity. This treatment of switch statements and complexity may be more useful than the "normal" measure for judging maintenance effort and code difficulty.</p><p>Column 2 is the cyclomatic complexity calculated in the "usual" way with regard to switch statements. Specifically it is calculated as in column 1 but counting each <strong>case</strong> rather than the <strong>switch</strong> and may be more useful than column 1 for judging testing effort.</p><p>Column 3 contains a statement count. It is calculated by adding each occurence of <strong>for</strong>,<strong> if</strong>,<strong> while</strong>, <strong>switch</strong>, <strong>?</strong>, and semicolon within the function. One possible surprise is that <strong>for</strong> statements have a minimum statement count of 3. This is realistic since <strong>for(A; B; C){...}</strong> is really shorthand for <strong>A; while (B) { ...  C;}</strong>. The number of statements within a file is the sum of the number of statements for each function implemented within that file, plus one for each of those functions (because functions are statements too), plus one for each other file-scoped statement (usually declarations).</p><p>Column 4 contains the first line number in the function.  This is not necessarily the same line on which the function name appears.</p><p>Column 5 is the number of lines of the function, from the number in column 4 through the line containing the closing curly brace.</p><p>The final column contains the file name, line number on which the function name occurs, and the name of the function.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">APPLICATIONS</h2>
        <div class="sectioncontent">
<p>The obvious application of <em>pmccabe</em> is illustrated by the following which gives a list of the "top ten" most complex functions:</p><ul>
<li>
<pre>
pmccabe *.c | sort -nr | head -10
</pre>
</li>
</ul><p>Many files contain more than one C function and sometimes it would be useful to extract each function separately. <strong>matchparen()</strong> (see example output above) can be extracted from gettoken.c by extracting 27 lines starting with line 34. This can form the basis of tools which operate on functions instead of files (e.g., use as a front-end for <a href="../man1/diff.1.html"><strong>diff</strong>(1)</a></em>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p><em>pmccabe</em> returns a nonzero exit status if files could not be opened and upon encountering some parsing errors.</p><p>Error messages to standard error, usually explaining that the parser is confused about something, mimic classic C compiler error messages.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNINGS</h2>
        <div class="sectioncontent">
<p><em>pmccabe</em> is confused by unmatched curly braces or parentheses which sometimes occur with hasty use of <em>cpp</em> directives. In these cases a diagnostic is printed and the complexity results for the files named may be unreliable. Most times the "#ifdef" directives may be modified such that the curly braces match. Note that if <em>pmccabe</em> is confused by a <em>cpp</em> directive, most pretty printers will be too. In some cases, preprocessing with <strong>unifdef</strong>(1) may be appropriate.</p><p>Statement counting could arguably be improved by: counting occurences of the comma operator, multiple assignments, assignments within conditional tests, and logical conjunction. However since there is no crisp statement definition from the language or from people I've queried, statement counting will probably not be improved.  If you have a crisp definition I'll be happy to consider it.</p><p>Templates cause <em>pmccabe</em>'s scanner to exit.</p><p>It's a shame that <em>ctags</em> output isn't provided.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Paul Bame</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pmccabe&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/codechanges.1.html"><strong>codechanges</strong>(1)</a>, <a href="../man1/decomment.1.html"><strong>decomment</strong>(1)</a>, <a href="../man1/vifn.1.html"><strong>vifn</strong>(1)</a>, <a href="../man1/sort.1.html"><strong>sort</strong>(1)</a>, <a href="../man1/diff.1.html"><strong>diff</strong>(1)</a>, <em>wc</em>(1), <a href="../man1/grep.1.html"><strong>grep</strong>(1)</a>, <strong>unifdef</strong>(1), <a href="../man1/head.1.html"><strong>head</strong>(1)</a>, <strong>anac</strong>(1)</p><p>http://parisc-linux.org/~bame/pmccabe/</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pmatop.1.html"><span aria-hidden="true">&larr;</span> pmatop.1: System & process monitor</a></li>
   <li class="next"><a href="pmcd.1.html">pmcd.1: Performance metrics collector daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
