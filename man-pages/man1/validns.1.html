<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>validns: Dns and dsnsec zone file validator</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Dns and dsnsec zone file validator">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="validns (1) manual">
  <meta name="twitter:description" content="Dns and dsnsec zone file validator">
  <meta name="twitter:image" content="https://www.carta.tech/images/validns-validns-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/validns.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="validns (1) manual" />
  <meta property="og:description" content="Dns and dsnsec zone file validator" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/validns-validns-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">validns<small> (1)</small></h1>
        <p class="lead">Dns and dsnsec zone file validator</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/validns.1.html">
      <span itemprop="name">validns: Dns and dsnsec zone file validator</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/validns/">
      <span itemprop="name">validns</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/validns.1.html">
      <span itemprop="name">validns: Dns and dsnsec zone file validator</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This document describes validns version 0.8</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>validns <em>-h</em> validns [<em>options</em>] <em>zone-file</em></p><p>For validating stdin, specify "-" in place of <em>zone-file</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Coming soon.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Produce usage text and quit.</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>Quit on first validation error. Normally, validns continues working on a zone after encountering a parsing or validation error.</p>
  </dd>
  <dt>
    <p><strong>-p </strong><em>name</em></p>
  </dt>
  <dd>
    <p>Activate policy check <em>name</em>. By default, only basic checks and DNSSEC checks are performed. This option can be specified multiple times. See <strong>POLICY CHECKS</strong>, below, for details. The following names are understood:</p>
<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>single-ns</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>cname-other-data</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>dname</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>dnskey</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>nsec3param-not-apex</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>mx-alias</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>ns-alias</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>rp-txt-exists</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>tlsa-host</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>all</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-n </strong><em>N</em></p>
  </dt>
  <dd>
    <p>Use N worker threads for parallelizable operations. The default is 0, meaning no parallelization. Currently only signature verification is parallelizable.</p>
  </dd>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>quiet - do not produce any output</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>print validation summary/stats</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>be extra verbose</p>
  </dd>
  <dt>
    <p><strong>-I </strong><em>path</em></p>
  </dt>
  <dd>
    <p>use this path for $INCLUDE files</p>
  </dd>
  <dt>
    <p><strong>-z </strong><em>origin</em></p>
  </dt>
  <dd>
    <p>use this origin as initial $ORIGIN</p>
  </dd>
  <dt>
    <p><strong>-t </strong><em>epoch-time</em></p>
  </dt>
  <dd>
    <p>Use specified time instead of the current time when verifying validity of the signatures. This option may be specified multiple times, in which case every signature is checked against all specified times.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BASIC CHECKS</h2>
        <div class="sectioncontent">
<p>Every record and every supported directive should be parsable, which consitutes the most basic check of all. The validns program will report the exact reason why it cannot parse a record or a directive.</p><p>Other basic checks include:</p>
<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>there could only be one SOA in a zone;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>the first record in the zone must be an SOA record;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>a record outside the apex;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>TTL values differ within an RR set (excepting <em>RRSIG</em>);</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DNSSEC CHECKS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p><em>type</em> exists, but NSEC does not mention it for <em>name</em>;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NSEC mentions <em>type</em>, but no such record found for <em>name</em>;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NSEC says <em>x</em> is the last name, but <em>z</em> exists;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NSEC says <em>z</em> comes after <em>x</em>, but nothing does;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NSEC says <em>z</em> comes after <em>x</em>, but <em>y</em> does;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>signature is too new;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>signature is too old;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>RRSIG exists for non-existing type <em>type</em>;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>RRSIG\[aq]s original TTL differs from corresponding record\[aq]s;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>RRSIG(<em>type</em>): cannot find a signer key;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>RRSIG(<em>type</em>): cannot verify the signature;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>RRSIG(<em>type</em>): cannot find the right signer key;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NSEC3 record name is not valid;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>multiple NSEC3 with the same record name;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>no corresponding NSEC3 found for <em>name</em>;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p><em>type</em> exists, but NSEC3 does not mention it for <em>name</em>;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NSEC3 mentions <em>type</em>, but no such record found for <em>name</em>;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>there are more record types than NSEC3 mentions for <em>name</em>;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>broken NSEC3 chain, expected <em>name</em>, but nothing found;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>broken NSEC3 chain, expected <em>name1</em>, but found <em>name2</em>;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NSEC3 without a corresponding record (or empty non-terminal).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">POLICY CHECKS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>there should be at least two NS records per name (or zero);</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>CNAME and other data (excluding possible RRSIG and NSEC);</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>DNAME checks: no multiple DNAMEs, no descendants of a node with a DNAME; please note that DNAME/CNAME clash is handled by CNAME and other data check already;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>DNSKEY checks: public key too short, leading zero octets in public key exponent or modulus;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NSEC3PARAM, if present, should only be at the zone apex.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>MX exchange should not be an alias</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>NS nsdname should not be an alias</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>TXT domain name mentioned in RP record must have a corresponding TXT record if it is within the zone</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>domain name of a TLSA record must be a proper prefixed DNS name</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>textual segments in <em>TXT</em> and <em>HINFO</em> must be enclosed in double quotes;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>there cannot be more than 20 textual segments in a <em>TXT</em> record;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p><em>$INCLUDE</em> directive is not implemented;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>a dot within a label is not currently supported;</p>
  </dd>

</dl>
<p>If at least one NSEC3 record uses opt-out flag, validns assumes it is used as much as possible, that is, every unsigned delegation does not have a corresponding NSEC3 record. This is done for reasons of efficiency, to avoid calculating cryptographic hashes of every unsigned delegation. If this assumption is wrong for a zone, validns will produce spurious validation errors.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p>Thanks go to Andy Holdaway, Daniel Stirnimann, Dennis Kjaer Jensen, Goran Bengtson, Hirohisa Yamaguchi, Hugo Salgado, Jake Zack, Jakob Schlyter, Koh-ichi Ito, Mathieu Arnold, Miek Gieben, Patrik Wallstrom, Paul Wouters, Ryan Eby, Tony Finch, Willem Toorop, and YAMAGUCHI Takanori for bug reports, testing, discussions, and occasional patches.</p><p>Special thanks to Stephane Bortzmeyer and Phil Regnauld.</p><p>Thanks for AFNIC which funded major portion of the development. Thanks for SWITCH for additional funding.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Anton Berezin.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="validateDescriptor.1.html"><span aria-hidden="true">&larr;</span> validateDescriptor.1: Simple component descriptor validator</a></li>
   <li class="next"><a href="valknut.1.html">valknut.1: Valknut  multi-platform direct connect client <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
