<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>makedepf90: Creates makefile dependency list for fortran source files.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Creates makefile dependency list for fortran source files.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="makedepf90 (1) manual">
  <meta name="twitter:description" content="Creates makefile dependency list for fortran source files.">
  <meta name="twitter:image" content="https://www.carta.tech/images/makedepf90-makedepf90-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/makedepf90.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="makedepf90 (1) manual" />
  <meta property="og:description" content="Creates makefile dependency list for fortran source files." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/makedepf90-makedepf90-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">makedepf90<small> (1)</small></h1>
        <p class="lead">Creates makefile dependency list for fortran source files.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/makedepf90.1.html">
      <span itemprop="name">makedepf90: Creates makefile dependency list for fortran source files.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/makedepf90/">
      <span itemprop="name">makedepf90</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/makedepf90.1.html">
      <span itemprop="name">makedepf90: Creates makefile dependency list for fortran source files.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>makedepf90</strong> [<strong>-h</strong>] [<strong>-V</strong>] [<strong>-W</strong>|<strong>-Wmissing</strong>] [<strong>-Wconfused</strong>] [<strong>-m</strong> <em>fmt</em>] [<strong>-u</strong> <em>modulename</em>] [<strong>-d</strong> <em>file</em>] [<strong>-r</strong> <em>rule</em>] [<strong>-R</strong> <em>file rule</em>] [<strong>-fixed</strong>|<strong>-free</strong>] [<strong>-o</strong> <em>name-of-executable</em>] [<strong>-coco</strong>] [<strong>-D</strong> <em>NAME</em>] [<strong>-b</strong> <em>path</em>] [<strong>-I</strong> <em>PATH1:PATH2:...</em>] [<strong>-nosrc</strong>] <em>sourcefile(s)</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>makedepf90</em> is a program for automatic creation of dependency lists and compilation rules for Makefiles.</p><p>The original idea was to provide the same functionality for Fortran as</p><p>gcc -MM *.c</p><p>does for C.  Nowadays makedepf90 actually supersedes this functionality, making me wonder if I should extend makedepf90 to support C and C++ too ;-).</p><p><em>makedepf90</em> supports both <strong>modules</strong>, <strong>include</strong>:s, <strong>cpp</strong>(1) <strong>#include</strong>:s, <strong>f90ppr</strong>(1) <strong>$include</strong>:s and <strong>coco</strong>(1) <strong>??includes</strong> and set-files.</p><p><em>makedepf90</em> reads Fortran source files given on the command line, and writes a dependency list to stdout; for every file it writes a line with the following format:</p><p><em>targets</em> : <em>prerequisites</em></p><p><em>Targets</em> are the files that will be the result of compiling the file with the <strong>-c</strong> option, and <em>prerequisites</em> are files that are needed to compile the file. In addition, <em>makedepf90</em> can optionally create the dependency line and make-rule needed to link the final executable.</p><h3>Fortran dependencies</h3>
<p>The files needed to compile a file, i.e the <em>prerequisites</em> of the file are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>&ndash;</strong></p>
  </dt>
  <dd>
    <p>The source file itself</p>
  </dd>
  <dt>
    <p><strong>&ndash;</strong></p>
  </dt>
  <dd>
    <p>Files with interface information about USEd modules, created by the compiler while compiling the modules (often named <em>modulename</em>.mod or something similar, hereafter called <em>mod-files</em>).</p>
  </dd>
  <dt>
    <p><strong>&ndash;</strong></p>
  </dt>
  <dd>
    <p>Include-files (including files included and mod-files of modules USEd from these include-files).</p>
  </dd>
  <dt>
    <p><strong>&ndash;</strong></p>
  </dt>
  <dd>
    <p><strong>Coco</strong> set-files, if <strong>coco</strong>(1) is being used and set-files exist.</p>
  </dd>

</dl>
<p>Since different compilers use different naming conventions for the mod-files, listing them in the dependency list results in non-portable makefiles.  Therefore it's common practise to list the object file (<em>filename</em>.o) corresponding to the sourcefile containing the USEd modules instead.  This is the default behaviour of <em>makedepf90</em>.  To change this, use the <strong>-m</strong> option (e.g <strong>-m</strong> "%m.mod" if your compiler names the mod files <em>modulename</em>.mod)</p><p>Include files not found in the working directory will not be listed in the dependency list, assuming they are part of a (seldom changing) library not part of the program.  Neither will mod-files of modules whose definitions aren't found be listed by the same reason.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>These options may be given anywhere, in any order, on the command line. Space between an option and its argument is optional.  Options may not be grouped (<strong>-hW</strong> is not the same thing as <strong>-h -W</strong>).</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong> or <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Print a short help message to stdout and quit.</p>
  </dd>
  <dt>
    <p><strong>-V</strong> or <strong>--version</strong></p>
  </dt>
  <dd>
    <p>Print version and copyright information to stdout and quit</p>
  </dd>
  <dt>
    <p><strong>-W</strong> or <strong>-Wmissing</strong></p>
  </dt>
  <dd>
    <p>Print warnings about missing modules and include files</p>
  </dd>
  <dt>
    <p><strong>-Wconfused</strong></p>
  </dt>
  <dd>
    <p>Print warnings when confused (either because of bugs in makedepf90 itself, or because of wierd things in your source files).  If makedepf90 misses some dependencies, or do other wierd things, this option might give some idea on whats going on.</p>
  </dd>
  <dt>
    <p><strong>-m</strong><em> fmt</em></p>
  </dt>
  <dd>
    <p>Tell <em>makedepf90</em> that mod-files will have names of the format <em>fmt</em>.  <em>fmt</em> may contain the modifiers <strong>%f</strong> for <em>filename</em> (without file name .suffix), <strong>%m</strong> for <em>modulename</em> (in lowercase), <strong>%M</strong> for <em>MODULENAME</em> (in uppercase) and <strong>%%</strong> for '%'.  Default is "%f.o".</p>
  </dd>
  <dt>
    <p><strong>-u</strong><em> modulename</em></p>
  </dt>
  <dd>
    <p>Ignore all modules named <em>modulename</em>.</p>
  </dd>
  <dt>
    <p><strong>-d</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Make all targets dependent on <em>file</em>.</p>
  </dd>
  <dt>
    <p><strong>-r</strong><em> rule</em></p>
  </dt>
  <dd>
    <p>Add <em>rule</em> (indented by a tab) to all dependency lines except lines given rule(s) with the <strong>-R</strong> option.</p>
  </dd>

</dl>
<p><em>rule</em> may contains the following modifiers: <strong>%f</strong> for the name of the source file (without suffix) the dependency line is created for, and <strong>%%</strong> for '%'.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-R</strong><em> 'pattern' 'rule'</em></p>
  </dt>
  <dd>
    <p>Compile files matching the shell pattern <em>pattern</em> using the rule <em>rule</em>. In <em>pattern</em>, the following wildcards can be used: <strong>*</strong> = any number of any characters, <strong>?</strong> = any character and <strong>[abc]</strong> = any of <strong>a</strong>, <strong>b</strong> or <strong>c</strong>.  Note that the patter-matching is to be performed by <em>makedepf90</em>, not the shell.  Therefore <em>pattern</em> should be enclosed in quotes (<strong>"</strong> or <strong>'</strong>).  For <em>rule</em> applies the same rules as for <strong>-r</strong> above.</p>
  </dd>

</dl>
<p>Note that there is a subtle difference between "<strong>-r</strong> <em>rule</em>" and "<strong>-R</strong> '*' <em>rule</em>".  In the former case <em>rule</em> will be applied only to lines not given any rule using <strong>-R</strong>, while in the latter case, <em>rule</em> will be applied to <em>all</em> lines.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-fixed</strong> / <strong>-free</strong></p>
  </dt>
  <dd>
    <p>Treat the files as fixed/free source format.  If both options are given, the latter is used.  Default: Files with suffixes <strong>.f, .F, .for, .FOR </strong>or<strong> .ftn</strong> are treated as fixed format and <strong>.f90, .F90, .f95 </strong>or<strong> .F95</strong> are treated as free format.</p>
  </dd>
  <dt>
    <p><strong>-o</strong><em> name</em></p>
  </dt>
  <dd>
    <p>This option will cause <em>makedepf90</em> to define the Makefile macro <strong>FOBJ</strong>=<em>objectfiles</em>, and a dependency line + rule for the final linking process to create the executable <em>name</em>.  To set the linking rule, use the option <strong>-l</strong>.</p>
  </dd>
  <dt>
    <p><strong>-l</strong><em> rule</em></p>
  </dt>
  <dd>
    <p>Use <em>rule</em> when linking the executable.  The default is</p><p><strong>$(FC) -o $@ $(FFLAGS) $(LDFLAGS) $(FOBJ) $(LIBS)</strong>.</p><p>This option has no effect unless <strong>-o</strong> is used.</p>
  </dd>
  <dt>
    <p><strong>-coco</strong></p>
  </dt>
  <dd>
    <p>Look for <strong>coco</strong>(1) set-files (<strong>coco</strong> ??include:s are supported automatically).  This option implies <strong>-free</strong>.</p>
  </dd>
  <dt>
    <p><strong>-D</strong><em> NAME</em></p>
  </dt>
  <dd>
    <p>Define the pre-processor symbol <em>NAME</em>.</p>
  </dd>
  <dt>
    <p><strong>-b</strong><em> path</em></p>
  </dt>
  <dd>
    <p>Dependency tree and link rule will assume objects are placed in <em>path</em>. This is useful if the build places object files in a different directory than the source files.</p>
  </dd>
  <dt>
    <p><strong>-I</strong><em> list-of-paths</em></p>
  </dt>
  <dd>
    <p>Look for source/include files in the <em>list-of-paths</em>, if not found in current working directory.  Here, <em>list-of-paths</em> is a colon separated list of path names.</p>
  </dd>
  <dt>
    <p><strong>-nosrc</strong></p>
  </dt>
  <dd>
    <p>Don't list the source file among the prerequisites.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<h3>Basic Usage</h3>
<p>Here's an example of basic <em>makedepf90</em> usage together with <a href="../man1/make.1.html"><strong>make</strong>(1)</a>.  Create a file named <strong>Makefile</strong> with the following contents:</p><p>----------------------</p><p> # FC = the compiler to use  FC=f90</p><p> # Compiler options  FFLAGS=-O</p><p> # List libraries used by the program here  LIBS=</p><p> # Suffix-rules:  Begin by throwing away all old suffix-  # rules, and then create new ones for compiling  # *.f90-files.  .SUFFIXES:  .SUFFIXES: .f90 .o</p><p> .f90.o:</p><p>	$(FC) -c $(FFLAGS) $&lt;</p><p> # Include the dependency-list created by makedepf90 below  include .depend</p><p> # target 'clean' for deleting object- *.mod- and other  # unwanted files  clean:</p><p>	rm -f *.o *.mod core</p><p> # Create a dependency list using makedepf90.  All files  # that needs to be compiled to build the program,  # i.e all source files except include files, should  # be given on the command line to makedepf90.  #  # The argument to the '-o' option will be the name of the  # resulting program when running 'make', in this case  # 'foobar'  depend .depend:</p><p>	makedepf90 -o foobar *.f90 &gt; .depend</p><p>-----------------------</p><p>(Note that all the indented lines should be indented with tabs, not spaces)</p><p>With this makefile, the command <strong>make</strong> should perform all the commands needed to compile and link the program <em>foobar</em> out of all *.f90 files in the working directory.</p><p>The dependency list <em>.depend</em> will be (re)created if <em>.depend</em> doesn't exist, or if the command <strong>make depend</strong> is run. This should be done every time changes has been made to the program that affect the dependencies of the files (e.g if new source files has been added to the project).</p>
<h3>Example With Coco</h3>
<p>If you are using a pre-processor, things might get more complicated.  If you are lucky, your compiler supports your pre-processor and runs it on your code automatically, but if it doesn't, you have to give the commands to run the pre-processor yourself.  Below is an example of an Makefile for <strong>coco</strong>(1)-users.</p><p>-----------------------  FC=f90</p><p> FFLAGS=-O</p><p> PREPROCESSOR=coco</p><p> .SUFFIXES:  .SUFFIXES: .f .f90 .o</p><p> # Files ending in .f90 are compiled directly ...  .f90.o:</p>
<pre>
        $(FC) -c $(FFLAGS) $&lt;
</pre>
<p> # ... while those ending in .f are preprocessed first.  .f.o:</p>
<pre>
        $(PREPROCESSOR) $*; $(FC) -c $(FFLAGS) $*.f90
</pre>
<p> include .depend</p><p> clean:</p><p>	rm -f *.o *.mod core</p><p> depend .depend:</p>
<pre>
        makedepf90 -coco -o foobar *.f90 *.f &gt; .depend
</pre>
<p>-----------------------</p><p><strong>NOTE:</strong> Some implementations of <a href="../man1/make.1.html"><strong>make</strong>(1)</a> will not execute any commands &ndash; not even <strong>make depend</strong> &ndash; with the Makefiles above unless there exists a file named <em>.depend</em>. To overcome this problem, either run <em>makedepf90</em> manually, or begin by creating an empty <em>.depend</em> file with the command <strong>touch .depend</strong>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Most error and warning messages are self explanatory, but some of them might need some further explanations:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>WARNING: recursion limit reached in file </strong><em>filename</em></p>
  </dt>
  <dd>
    <p>When recursively parsing include files, makedepf90 has reached the recursion limit.  Possible reasons are: either you have some <em>really</em> complicated systems of include files, or you have recursive includes (e.g an include file that includes itself).  In the latter case; fix it, your Fortran compiler will not like it either.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS AND LIMITATIONS</h2>
        <div class="sectioncontent">
<p>Makedepf90's support for pre processor conditionals and macro expension (#if:s, #define:s etc) is rather weak, but should work well enough for most cases.</p><p>The include file search algorithm is broken.  I may fix it some day.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO makedepf90&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/make.1.html"><strong>make</strong>(1)</a>, <strong>f90</strong>(1), <strong>cpp</strong>(1), <strong>fpp</strong>(1), <strong>f90ppr</strong>(1), <strong>coco</strong>(1)</p><p>The makedepf90 web site is found at</p><p>http://www.iki.fi/erik.edelmann/makedepf90</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License version 2 as published by the Free Software Foundation.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Erik Edelmann &lt;Erik.Edelmann@iki.fi&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="makedepend.1.html"><span aria-hidden="true">&larr;</span> makedepend.1: Create dependencies in makefiles</a></li>
   <li class="next"><a href="makedic.1.html">makedic.1: Utility program for generating your own "kanjidic" style dictionaries <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
