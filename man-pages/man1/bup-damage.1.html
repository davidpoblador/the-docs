<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bup-damage: Randomly destroy blocks of a file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Randomly destroy blocks of a file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bup-damage (1) manual">
  <meta name="twitter:description" content="Randomly destroy blocks of a file">
  <meta name="twitter:image" content="https://www.carta.tech/images/bup-doc-bup-damage-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/bup-damage.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bup-damage (1) manual" />
  <meta property="og:description" content="Randomly destroy blocks of a file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/bup-doc-bup-damage-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bup-damage<small> (1)</small></h1>
        <p class="lead">Randomly destroy blocks of a file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/bup-damage.1.html">
      <span itemprop="name">bup-damage: Randomly destroy blocks of a file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/bup-doc/">
      <span itemprop="name">bup-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/bup-damage.1.html">
      <span itemprop="name">bup-damage: Randomly destroy blocks of a file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>bup damage [-n count][-s maxsize] [--percent pct][-S seed] [--equal] &lt;filenames...&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Use bup&nbsp;damage to deliberately destroy blocks in a .pack or .idx file (from .bup/objects/pack) to test the recovery features of <a href="../man1/bup-fsck.1.html"><strong>bup-fsck</strong>(1)</a> or other programs.</p><p><em>THIS PROGRAM IS EXTREMELY DANGEROUS AND WILL DESTROY YOUR DATA</em></p><p>bup&nbsp;damage is primarily useful for automated or manual tests of data recovery tools, to reassure yourself that the tools actually work.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-n, --num=</strong><em>numblocks</em></p>
  </dt>
  <dd>
    <p>the number of separate blocks to damage in each file (default 10). Note that it\[aq]s possible for more than one damaged segment to fall in the same <a href="../man1/bup-fsck.1.html"><strong>bup-fsck</strong>(1)</a> recovery block, so you might not damage as many recovery blocks as you expect. If this is a problem, use --equal.</p>
  </dd>
  <dt>
    <p><strong>-s, --size=</strong><em>maxblocksize</em></p>
  </dt>
  <dd>
    <p>the maximum size, in bytes, of each damaged block (default 1 unless --percent is specified). Note that because of the way <a href="../man1/bup-fsck.1.html"><strong>bup-fsck</strong>(1)</a> works, a multi-byte block could fall on the boundary between two recovery blocks, and thus damaging two separate recovery blocks. In small files, it\[aq]s also possible for a damaged block to be larger than a recovery block. If these issues might be a problem, you should use the default damage size of one byte.</p>
  </dd>
  <dt>
    <p><strong>--percent=</strong><em>maxblockpercent</em></p>
  </dt>
  <dd>
    <p>the maximum size, in percent of the original file, of each damaged block. If both --size and --percent are given, the maximum block size is the minimum of the two restrictions. You can use this to ensure that a given block will never damage more than one or two <a href="../man1/git-fsck.1.html"><strong>git-fsck</strong>(1)</a> recovery blocks.</p>
  </dd>
  <dt>
    <p><strong>-S, --seed=</strong><em>randomseed</em></p>
  </dt>
  <dd>
    <p>seed the random number generator with the given value. If you use this option, your tests will be repeatable, since the damaged block offsets, sizes, and contents will be the same every time. By default, the random numbers are different every time (so you can run tests in a loop and repeatedly test with different damage each time).</p>
  </dd>
  <dt>
    <p><strong>--equal</strong></p>
  </dt>
  <dd>
    <p>instead of choosing random offsets for each damaged block, space the blocks equally throughout the file, starting at offset 0. If you also choose a correct maximum block size, this can guarantee that any given damage block never damages more than one <a href="../man1/git-fsck.1.html"><strong>git-fsck</strong>(1)</a> recovery block. (This is also guaranteed if you use -s&nbsp;1.)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<ul>
<li>
<pre>
#&nbsp;make&nbsp;a&nbsp;backup&nbsp;in&nbsp;case&nbsp;things&nbsp;go&nbsp;horribly&nbsp;wrong
cp&nbsp;-a&nbsp;~/.bup/objects/pack&nbsp;~/bup-packs.bak

#&nbsp;generate&nbsp;recovery&nbsp;blocks&nbsp;for&nbsp;all&nbsp;packs
bup&nbsp;fsck&nbsp;-g

#&nbsp;deliberately&nbsp;damage&nbsp;the&nbsp;packs
bup&nbsp;damage&nbsp;-n&nbsp;10&nbsp;-s&nbsp;1&nbsp;-S&nbsp;0&nbsp;~/.bup/objects/pack/*.{pack,idx}

#&nbsp;recover&nbsp;from&nbsp;the&nbsp;damage
bup&nbsp;fsck&nbsp;-r

</pre>
</li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO bup-damage&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/bup-fsck.1.html"><strong>bup-fsck</strong>(1)</a>, <a href="../man1/par2.1.html"><strong>par2</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUP</h2>
        <div class="sectioncontent">
<p>Part of the <a href="../man1/bup.1.html"><strong>bup</strong>(1)</a> suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Avery Pennarun &lt;apenwarr@gmail.com&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bup-daemon.1.html"><span aria-hidden="true">&larr;</span> bup-daemon.1: Listens for connections and runs bupserver</a></li>
   <li class="next"><a href="bup-drecurse.1.html">bup-drecurse.1: Recursively list files in your filesystem <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
