<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>kadmin: Kerberos v5 database administration program</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Kerberos v5 database administration program">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="kadmin (1) manual">
  <meta name="twitter:description" content="Kerberos v5 database administration program">
  <meta name="twitter:image" content="https://www.carta.tech/images/krb5-user-kadmin-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/kadmin.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="kadmin (1) manual" />
  <meta property="og:description" content="Kerberos v5 database administration program" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/krb5-user-kadmin-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">kadmin<small> (1)</small></h1>
        <p class="lead">Kerberos v5 database administration program</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/kadmin.1.html">
      <span itemprop="name">kadmin: Kerberos v5 database administration program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/krb5-user/">
      <span itemprop="name">krb5-user</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/kadmin.1.html">
      <span itemprop="name">kadmin: Kerberos v5 database administration program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>kadmin</strong> [<strong>-O</strong>|<strong>-N</strong>] [<strong>-r</strong> <em>realm</em>] [<strong>-p</strong> <em>principal</em>] [<strong>-q</strong> <em>query</em>] [[<strong>-c</strong> <em>cache_name</em>]|[<strong>-k</strong> [<strong>-t</strong> <em>keytab</em>]]|<strong>-n</strong>] [<strong>-w</strong> <em>password</em>] [<strong>-s</strong> <em>admin_server</em>[:<em>port</em>]]</p><p><strong>kadmin.local</strong> [<strong>-r</strong> <em>realm</em>] [<strong>-p</strong> <em>principal</em>] [<strong>-q</strong> <em>query</em>] [<strong>-d</strong> <em>dbname</em>] [<strong>-e</strong> <em>enc</em>:<em>salt</em> ...] [<strong>-m</strong>] [<strong>-x</strong> <em>db_args</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>kadmin and kadmin.local are command-line interfaces to the Kerberos V5 administration system.  They provide nearly identical functionalities; the difference is that kadmin.local directly accesses the KDC database, while kadmin performs operations using <a href="../man8/kadmind.8.html"><strong>kadmind</strong>(8)</a></em>. Except as explicitly noted otherwise, this man page will use "kadmin" to refer to both versions.  kadmin provides for the maintenance of Kerberos principals, password policies, and service key tables (keytabs).</p><p>The remote kadmin client uses Kerberos to authenticate to kadmind using the service principal <strong>kadmin/ADMINHOST</strong> (where <em>ADMINHOST</em> is the fully-qualified hostname of the admin server) or <strong>kadmin/admin</strong>. If the credentials cache contains a ticket for one of these principals, and the <strong>-c</strong> credentials_cache option is specified, that ticket is used to authenticate to kadmind.  Otherwise, the <strong>-p</strong> and <strong>-k</strong> options are used to specify the client Kerberos principal name used to authenticate.  Once kadmin has determined the principal name, it requests a service ticket from the KDC, and uses that service ticket to authenticate to kadmind.</p><p>Since kadmin.local directly accesses the KDC database, it usually must be run directly on the master KDC with sufficient permissions to read the KDC database.  If the KDC database uses the LDAP database module, kadmin.local can be run on any host which can access the LDAP server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-r</strong><strong> </strong><em>realm</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use <em>realm</em> as the default database realm.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-p</strong><strong> </strong><em>principal</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use <em>principal</em> to authenticate.  Otherwise, kadmin will append <strong>/admin</strong> to the primary principal name of the default ccache, the value of the <strong>USER</strong> environment variable, or the username as obtained with getpwuid, in order of preference.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-k</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Use a keytab to decrypt the KDC response instead of prompting for a password.  In this case, the default principal will be <strong>host/hostname</strong>.  If there is no keytab specified with the <strong>-t</strong> option, then the default keytab will be used.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-t</strong><strong> </strong><em>keytab</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use <em>keytab</em> to decrypt the KDC response.  This can only be used with the <strong>-k</strong> option.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-n</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Requests anonymous processing.  Two types of anonymous principals are supported.  For fully anonymous Kerberos, configure PKINIT on the KDC and configure <strong>pkinit_anchors</strong> in the client&apos;s <a href="../man5/krb5.conf.5.html"><strong>krb5.conf</strong>(5)</a></em>.  Then use the <strong>-n</strong> option with a principal of the form <strong>@REALM</strong> (an empty principal name followed by the at-sign and a realm name).  If permitted by the KDC, an anonymous ticket will be returned.  A second form of anonymous tickets is supported; these realm-exposed tickets hide the identity of the client but not the client&apos;s realm.  For this mode, use <strong>kinit</strong> -n with a normal principal name.  If supported by the KDC, the principal (but not realm) will be replaced by the anonymous principal.  As of release 1.8, the MIT Kerberos KDC only supports fully anonymous operation.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-c</strong><strong> </strong><em>credentials_cache</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use <em>credentials_cache</em> as the credentials cache.  The cache should contain a service ticket for the <strong>kadmin/ADMINHOST</strong> (where <em>ADMINHOST</em> is the fully-qualified hostname of the admin server) or <strong>kadmin/admin</strong> service; it can be acquired with the <a href="../man1/kinit.1.html"><strong>kinit</strong>(1)</a></em> program.  If this option is not specified, kadmin requests a new service ticket from the KDC, and stores it in its own temporary ccache.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-w</strong><strong> </strong><em>password</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use <em>password</em> instead of prompting for one.  Use this option with care, as it may expose the password to other users on the system via the process list.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-q</strong><strong> </strong><em>query</em><strong></strong></p>
  </dt>
  <dd>
    <p>Perform the specified query and then exit.  This can be useful for writing scripts.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-d</strong><strong> </strong><em>dbname</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the name of the KDC database.  This option does not apply to the LDAP database module.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-s</strong><strong> </strong><em>admin_server</em><strong>[:</strong><em>port</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Specifies the admin server which kadmin should contact.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-m</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If using kadmin.local, prompt for the database master password instead of reading it from a stash file.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-e</strong><strong> </strong><em>enc</em><strong>:</strong><em>salt</em><strong> ...</strong></p>
  </dt>
  <dd>
    <p>Sets the keysalt list to be used for any new keys created.  See <em>Keysalt_lists</em> in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em> for a list of possible values.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-O</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Force use of old AUTH_GSSAPI authentication flavor.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-N</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Prevent fallback to AUTH_GSSAPI authentication flavor.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x</strong><strong> </strong><em>db_args</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the database specific arguments.  Options supported for the LDAP database module are:</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x host=</strong><strong></strong><em>hostname</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the LDAP server to connect to by a LDAP URI.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x binddn=</strong><strong></strong><em>bind_dn</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the DN of the object used by the administration server to bind to the LDAP server.  This object should have the read and write privileges on the realm container, the principal container, and the subtree that is referenced by the realm.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x bindpwd=</strong><strong></strong><em>bind_password</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the password for the above mentioned binddn.  Using this option may expose the password to other users on the system via the process list; to avoid this, instead stash the password using the <strong>stashsrvpw</strong> command of <a href="../man8/kdb5_ldap_util.8.html"><strong>kdb5_ldap_util</strong>(8)</a></em>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x debug=</strong><strong></strong><em>level</em><strong></strong></p>
  </dt>
  <dd>
    <p>sets the OpenLDAP client library debug level.  <em>level</em> is an integer to be interpreted by the library.  Debugging messages are printed to standard error.  New in release 1.12.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>When using the remote client, available commands may be restricted according to the privileges specified in the <a href="../man5/kadm5.acl.5.html"><strong>kadm5.acl</strong>(5)</a></em> file on the admin server.</p><h3>add_principal</h3>
<p><strong>add_principal</strong> [<em>options</em>] <em>newprinc</em></p><p>Creates the principal <em>newprinc</em>, prompting twice for a password.  If no password policy is specified with the <strong>-policy</strong> option, and the policy named <strong>default</strong> is assigned to the principal if it exists. However, creating a policy named <strong>default</strong> will not automatically assign this policy to previously existing principals.  This policy assignment can be suppressed with the <strong>-clearpolicy</strong> option.</p><p>This command requires the <strong>add</strong> privilege.</p><p>Aliases: <strong>addprinc</strong>, <strong>ank</strong></p><p>Options:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-expire</strong><strong> </strong><em>expdate</em><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>getdate</em> string) The expiration date of the principal.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-pwexpire</strong><strong> </strong><em>pwexpdate</em><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>getdate</em> string) The password expiration date.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-maxlife</strong><strong> </strong><em>maxlife</em><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>getdate</em> string) The maximum ticket life for the principal.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-maxrenewlife</strong><strong> </strong><em>maxrenewlife</em><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>getdate</em> string) The maximum renewable life of tickets for the principal.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-kvno</strong><strong> </strong><em>kvno</em><strong></strong></p>
  </dt>
  <dd>
    <p>The initial key version number.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-policy</strong><strong> </strong><em>policy</em><strong></strong></p>
  </dt>
  <dd>
    <p>The password policy used by this principal.  If not specified, the policy <strong>default</strong> is used if it exists (unless <strong>-clearpolicy</strong> is specified).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-clearpolicy</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Prevents any policy from being assigned when <strong>-policy</strong> is not specified.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>allow_postdated</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-allow_postdated</strong> prohibits this principal from obtaining postdated tickets.  <strong>+allow_postdated</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>allow_forwardable</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-allow_forwardable</strong> prohibits this principal from obtaining forwardable tickets.  <strong>+allow_forwardable</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>allow_renewable</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-allow_renewable</strong> prohibits this principal from obtaining renewable tickets.  <strong>+allow_renewable</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>allow_proxiable</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-allow_proxiable</strong> prohibits this principal from obtaining proxiable tickets.  <strong>+allow_proxiable</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>allow_dup_skey</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-allow_dup_skey</strong> disables user-to-user authentication for this principal by prohibiting this principal from obtaining a session key for another user.  <strong>+allow_dup_skey</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>requires_preauth</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>+requires_preauth</strong> requires this principal to preauthenticate before being allowed to kinit.  <strong>-requires_preauth</strong> clears this flag.  When <strong>+requires_preauth</strong> is set on a service principal, the KDC will only issue service tickets for that service principal if the client&apos;s initial authentication was performed using preauthentication.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>requires_hwauth</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>+requires_hwauth</strong> requires this principal to preauthenticate using a hardware device before being allowed to kinit. <strong>-requires_hwauth</strong> clears this flag.  When <strong>+requires_hwauth</strong> is set on a service principal, the KDC will only issue service tickets for that service principal if the client&apos;s initial authentication was performed using a hardware device to preauthenticate.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>ok_as_delegate</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>+ok_as_delegate</strong> sets the <strong>okay as delegate</strong> flag on tickets issued with this principal as the service.  Clients may use this flag as a hint that credentials should be delegated when authenticating to the service.  <strong>-ok_as_delegate</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>allow_svr</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-allow_svr</strong> prohibits the issuance of service tickets for this principal.  <strong>+allow_svr</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>allow_tgs_req</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-allow_tgs_req</strong> specifies that a Ticket-Granting Service (TGS) request for a service ticket for this principal is not permitted. <strong>+allow_tgs_req</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>allow_tix</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-allow_tix</strong> forbids the issuance of any tickets for this principal.  <strong>+allow_tix</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>needchange</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>+needchange</strong> forces a password change on the next initial authentication to this principal.  <strong>-needchange</strong> clears this flag.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>password_changing_service</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>+password_changing_service</strong> marks this principal as a password change service principal.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>ok_to_auth_as_delegate</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>+ok_to_auth_as_delegate</strong> allows this principal to acquire forwardable tickets to itself from arbitrary users, for use with constrained delegation.</p>
  </dd>
  <dt>
    <p><strong>{-|+}</strong><strong>no_auth_data_required</strong><strong></strong></p>
  </dt>
  <dd>
    <p><strong>+no_auth_data_required</strong> prevents PAC or AD-SIGNEDPATH data from being added to service tickets for the principal.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-randkey</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Sets the key of the principal to a random value.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-nokey</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Causes the principal to be created with no key.  New in release 1.12.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-pw</strong><strong> </strong><em>password</em><strong></strong></p>
  </dt>
  <dd>
    <p>Sets the password of the principal to the specified string and does not prompt for a password.  Note: using this option in a shell script may expose the password to other users on the system via the process list.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-e</strong><strong> </strong><em>enc</em><strong>:</strong><em>salt</em><strong>,...</strong></p>
  </dt>
  <dd>
    <p>Uses the specified keysalt list for setting the keys of the principal.  See <em>Keysalt_lists</em> in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em> for a list of possible values.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x</strong><strong> </strong><em>db_princ_args</em><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates database-specific options.  The options for the LDAP database module are:</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x dn=</strong><strong></strong><em>dn</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the LDAP object that will contain the Kerberos principal being created.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x linkdn=</strong><strong></strong><em>dn</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the LDAP object to which the newly created Kerberos principal object will point.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x containerdn=</strong><strong></strong><em>container_dn</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the container object under which the Kerberos principal is to be created.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x tktpolicy=</strong><strong></strong><em>policy</em><strong></strong></p>
  </dt>
  <dd>
    <p>Associates a ticket policy to the Kerberos principal.</p>
<dl class='dl-vertical'>
  <dt>
    Note
  </dt>
  <dd>
    
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p>The <strong>containerdn</strong> and <strong>linkdn</strong> options cannot be specified with the <strong>dn</strong> option.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p>If the <em>dn</em> or <em>containerdn</em> options are not specified while adding the principal, the principals are created under the principal container configured in the realm or the realm container.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><em>dn</em> and <em>containerdn</em> should be within the subtrees or principal container configured in the realm.</p>
  </dd>

</dl>

  </dd>

</dl>
<p>Example:</p>
<pre>
kadmin: addprinc jennifer
WARNING: no policy specified for "jennifer@ATHENA.MIT.EDU";
defaulting to no policy.
Enter password for principal jennifer@ATHENA.MIT.EDU:
Re-enter password for principal jennifer@ATHENA.MIT.EDU:
Principal "jennifer@ATHENA.MIT.EDU" created.
kadmin:
</pre>

<h3>modify_principal</h3>
<p><strong>modify_principal</strong> [<em>options</em>] <em>principal</em></p><p>Modifies the specified principal, changing the fields as specified. The options to <strong>add_principal</strong> also apply to this command, except for the <strong>-randkey</strong>, <strong>-pw</strong>, and <strong>-e</strong> options.  In addition, the option <strong>-clearpolicy</strong> will clear the current policy of a principal.</p><p>This command requires the <em>modify</em> privilege.</p><p>Alias: <strong>modprinc</strong></p><p>Options (in addition to the <strong>addprinc</strong> options):</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-unlock</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Unlocks a locked principal (one which has received too many failed authentication attempts without enough time between them according to its password policy) so that it can successfully authenticate.</p>
  </dd>

</dl>

<h3>rename_principal</h3>
<p><strong>rename_principal</strong> [<strong>-force</strong>] <em>old_principal</em> <em>new_principal</em></p><p>Renames the specified <em>old_principal</em> to <em>new_principal</em>.  This command prompts for confirmation, unless the <strong>-force</strong> option is given.</p><p>This command requires the <strong>add</strong> and <strong>delete</strong> privileges.</p><p>Alias: <strong>renprinc</strong></p>
<h3>delete_principal</h3>
<p><strong>delete_principal</strong> [<strong>-force</strong>] <em>principal</em></p><p>Deletes the specified <em>principal</em> from the database.  This command prompts for deletion, unless the <strong>-force</strong> option is given.</p><p>This command requires the <strong>delete</strong> privilege.</p><p>Alias: <strong>delprinc</strong></p>
<h3>change_password</h3>
<p><strong>change_password</strong> [<em>options</em>] <em>principal</em></p><p>Changes the password of <em>principal</em>.  Prompts for a new password if neither <strong>-randkey</strong> or <strong>-pw</strong> is specified.</p><p>This command requires the <strong>changepw</strong> privilege, or that the principal running the program is the same as the principal being changed.</p><p>Alias: <strong>cpw</strong></p><p>The following options are available:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-randkey</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Sets the key of the principal to a random value.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-pw</strong><strong> </strong><em>password</em><strong></strong></p>
  </dt>
  <dd>
    <p>Set the password to the specified string.  Using this option in a script may expose the password to other users on the system via the process list.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-e</strong><strong> </strong><em>enc</em><strong>:</strong><em>salt</em><strong>,...</strong></p>
  </dt>
  <dd>
    <p>Uses the specified keysalt list for setting the keys of the principal.  See <em>Keysalt_lists</em> in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em> for a list of possible values.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-keepold</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Keeps the existing keys in the database.  This flag is usually not necessary except perhaps for <strong>krbtgt</strong> principals.</p><p>Example:</p>
<pre>
kadmin: cpw systest
Enter password for principal systest@BLEEP.COM:
Re-enter password for principal systest@BLEEP.COM:
Password for systest@BLEEP.COM changed.
kadmin:
</pre>

  </dd>

</dl>

<h3>purgekeys</h3>
<p><strong>purgekeys</strong> [<strong>-all</strong>|<strong>-keepkvno</strong> <em>oldest_kvno_to_keep</em>] <em>principal</em></p><p>Purges previously retained old keys (e.g., from <strong>change_password</strong> -keepold) from <em>principal</em>.  If <strong>-keepkvno</strong> is specified, then only purges keys with kvnos lower than <em>oldest_kvno_to_keep</em>.  If <strong>-all</strong> is specified, then all keys are purged.  The <strong>-all</strong> option is new in release 1.12.</p><p>This command requires the <strong>modify</strong> privilege.</p>
<h3>get_principal</h3>
<p><strong>get_principal</strong> [<strong>-terse</strong>] <em>principal</em></p><p>Gets the attributes of principal.  With the <strong>-terse</strong> option, outputs fields as quoted tab-separated strings.</p><p>This command requires the <strong>inquire</strong> privilege, or that the principal running the the program to be the same as the one being listed.</p><p>Alias: <strong>getprinc</strong></p><p>Examples:</p>
<pre>
kadmin: getprinc tlyu/admin
Principal: tlyu/admin@BLEEP.COM
Expiration date: [never]
Last password change: Mon Aug 12 14:16:47 EDT 1996
Password expiration date: [none]
Maximum ticket life: 0 days 10:00:00
Maximum renewable life: 7 days 00:00:00
Last modified: Mon Aug 12 14:16:47 EDT 1996 (bjaspan/admin@BLEEP.COM)
Last successful authentication: [never]
Last failed authentication: [never]
Failed password attempts: 0
Number of keys: 2
Key: vno 1, DES cbc mode with CRC-32, no salt
Key: vno 1, DES cbc mode with CRC-32, Version 4
Attributes:
Policy: [none]

kadmin: getprinc -terse systest
systest@BLEEP.COM   3    86400     604800    1
785926535 753241234 785900000
tlyu/admin@BLEEP.COM     786100034 0    0
kadmin:
</pre>

<h3>list_principals</h3>
<p><strong>list_principals</strong> [<em>expression</em>]</p><p>Retrieves all or some principal names.  <em>expression</em> is a shell-style glob expression that can contain the wild-card characters <strong>?</strong>, <strong>*</strong>, and <strong>[]</strong>.  All principal names matching the expression are printed.  If no expression is provided, all principal names are printed.  If the expression does not contain an <strong>@</strong> character, an <strong>@</strong> character followed by the local realm is appended to the expression.</p><p>This command requires the <strong>list</strong> privilege.</p><p>Alias: <strong>listprincs</strong>, <strong>get_principals</strong>, <strong>get_princs</strong></p><p>Example:</p>
<pre>
kadmin:  listprincs test*
test3@SECURE-TEST.OV.COM
test2@SECURE-TEST.OV.COM
test1@SECURE-TEST.OV.COM
testuser@SECURE-TEST.OV.COM
kadmin:
</pre>

<h3>get_strings</h3>
<p><strong>get_strings</strong> <em>principal</em></p><p>Displays string attributes on <em>principal</em>.</p><p>This command requires the <strong>inquire</strong> privilege.</p><p>Alias: <strong>getstr</strong></p>
<h3>set_string</h3>
<p><strong>set_string</strong> <em>principal</em> <em>key</em> <em>value</em></p><p>Sets a string attribute on <em>principal</em>.  String attributes are used to supply per-principal configuration to the KDC and some KDC plugin modules.  The following string attributes are recognized by the KDC:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>session_enctypes</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the encryption types supported for session keys when the principal is authenticated to as a server.  See <em>Encryption_types</em> in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em> for a list of the accepted values.</p><p>This command requires the <strong>modify</strong> privilege.</p><p>Alias: <strong>setstr</strong></p>
  </dd>

</dl>

<h3>del_string</h3>
<p><strong>del_string</strong> <em>principal</em> <em>key</em></p><p>Deletes a string attribute from <em>principal</em>.</p><p>This command requires the <strong>delete</strong> privilege.</p><p>Alias: <strong>delstr</strong></p>
<h3>add_policy</h3>
<p><strong>add_policy</strong> [<em>options</em>] <em>policy</em></p><p>Adds a password policy named <em>policy</em> to the database.</p><p>This command requires the <strong>add</strong> privilege.</p><p>Alias: <strong>addpol</strong></p><p>The following options are available:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-maxlife</strong><strong> </strong><em>time</em><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>getdate</em> string) Sets the maximum lifetime of a password.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-minlife</strong><strong> </strong><em>time</em><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>getdate</em> string) Sets the minimum lifetime of a password.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-minlength</strong><strong> </strong><em>length</em><strong></strong></p>
  </dt>
  <dd>
    <p>Sets the minimum length of a password.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-minclasses</strong><strong> </strong><em>number</em><strong></strong></p>
  </dt>
  <dd>
    <p>Sets the minimum number of character classes required in a password.  The five character classes are lower case, upper case, numbers, punctuation, and whitespace/unprintable characters.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-history</strong><strong> </strong><em>number</em><strong></strong></p>
  </dt>
  <dd>
    <p>Sets the number of past keys kept for a principal.  This option is not supported with the LDAP KDC database module.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-maxfailure</strong><strong> </strong><em>maxnumber</em><strong></strong></p>
  </dt>
  <dd>
    <p>Sets the number of authentication failures before the principal is locked.  Authentication failures are only tracked for principals which require preauthentication.  The counter of failed attempts resets to 0 after a successful attempt to authenticate.  A <em>maxnumber</em> value of 0 (the default) disables lockout.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-failurecountinterval</strong><strong> </strong><em>failuretime</em><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>getdate</em> string) Sets the allowable time between authentication failures.  If an authentication failure happens after <em>failuretime</em> has elapsed since the previous failure, the number of authentication failures is reset to 1.  A <em>failuretime</em> value of 0 (the default) means forever.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-lockoutduration</strong><strong> </strong><em>lockouttime</em><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>getdate</em> string) Sets the duration for which the principal is locked from authenticating if too many authentication failures occur without the specified failure count interval elapsing. A duration of 0 (the default) means the principal remains locked out until it is administratively unlocked with <strong>modprinc</strong> -unlock.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-allowedkeysalts</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the key/salt tuples supported for long-term keys when setting or changing a principal&apos;s password/keys.  See <em>Keysalt_lists</em> in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em> for a list of the accepted values, but note that key/salt tuples must be separated with commas (&apos;,&apos;) only.  To clear the allowed key/salt policy use a value of &apos;-&apos;.</p><p>Example:</p>
<pre>
kadmin: add_policy -maxlife "2 days" -minlength 5 guests
kadmin:
</pre>

  </dd>

</dl>

<h3>modify_policy</h3>
<p><strong>modify_policy</strong> [<em>options</em>] <em>policy</em></p><p>Modifies the password policy named <em>policy</em>.  Options are as described for <strong>add_policy</strong>.</p><p>This command requires the <strong>modify</strong> privilege.</p><p>Alias: <strong>modpol</strong></p>
<h3>delete_policy</h3>
<p><strong>delete_policy</strong> [<strong>-force</strong>] <em>policy</em></p><p>Deletes the password policy named <em>policy</em>.  Prompts for confirmation before deletion.  The command will fail if the policy is in use by any principals.</p><p>This command requires the <strong>delete</strong> privilege.</p><p>Alias: <strong>delpol</strong></p><p>Example:</p>
<pre>
kadmin: del_policy guests
Are you sure you want to delete the policy "guests"?
(yes/no): yes
kadmin:
</pre>

<h3>get_policy</h3>
<p><strong>get_policy</strong> [ <strong>-terse</strong> ] <em>policy</em></p><p>Displays the values of the password policy named <em>policy</em>.  With the <strong>-terse</strong> flag, outputs the fields as quoted strings separated by tabs.</p><p>This command requires the <strong>inquire</strong> privilege.</p><p>Alias: getpol</p><p>Examples:</p>
<pre>
kadmin: get_policy admin
Policy: admin
Maximum password life: 180 days 00:00:00
Minimum password life: 00:00:00
Minimum password length: 6
Minimum number of password character classes: 2
Number of old keys kept: 5
Reference count: 17

kadmin: get_policy -terse admin
admin     15552000  0    6    2    5    17
kadmin:
</pre>
<p>The "Reference count" is the number of principals using that policy. With the LDAP KDC database module, the reference count field is not meaningful.</p>
<h3>list_policies</h3>
<p><strong>list_policies</strong> [<em>expression</em>]</p><p>Retrieves all or some policy names.  <em>expression</em> is a shell-style glob expression that can contain the wild-card characters <strong>?</strong>, <strong>*</strong>, and <strong>[]</strong>.  All policy names matching the expression are printed.  If no expression is provided, all existing policy names are printed.</p><p>This command requires the <strong>list</strong> privilege.</p><p>Aliases: <strong>listpols</strong>, <strong>get_policies</strong>, <strong>getpols</strong>.</p><p>Examples:</p>
<pre>
kadmin:  listpols
test-pol
dict-only
once-a-min
test-pol-nopw

kadmin:  listpols t*
test-pol
test-pol-nopw
kadmin:
</pre>

<h3>ktadd</h3>

<pre>
<strong>ktadd</strong> [options] <em>principal</em>
<strong>ktadd</strong> [options] <strong>-glob</strong> <em>princ-exp</em>
</pre>
<p>Adds a <em>principal</em>, or all principals matching <em>princ-exp</em>, to a keytab file.  Each principal&apos;s keys are randomized in the process. The rules for <em>princ-exp</em> are described in the <strong>list_principals</strong> command.</p><p>This command requires the <strong>inquire</strong> and <strong>changepw</strong> privileges. With the <strong>-glob</strong> form, it also requires the <strong>list</strong> privilege.</p><p>The options are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-k[eytab]</strong><strong> </strong><em>keytab</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use <em>keytab</em> as the keytab file.  Otherwise, the default keytab is used.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-e</strong><strong> </strong><em>enc</em><strong>:</strong><em>salt</em><strong>,...</strong></p>
  </dt>
  <dd>
    <p>Uses the specified keysalt list for setting the new keys of the principal.  See <em>Keysalt_lists</em> in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em> for a list of possible values.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-q</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Display less verbose information.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-norandkey</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Do not randomize the keys. The keys and their version numbers stay unchanged.  This option is only available in kadmin.local, and cannot be specified in combination with the <strong>-e</strong> option.</p><p>An entry for each of the principal&apos;s unique encryption types is added, ignoring multiple keys with the same encryption type but different salt types.</p><p>Example:</p>
<pre>
kadmin: ktadd -k /tmp/foo-new-keytab host/foo.mit.edu
Entry for principal host/foo.mit.edu@ATHENA.MIT.EDU with kvno 3,
     encryption type aes256-cts-hmac-sha1-96 added to keytab
     FILE:/tmp/foo-new-keytab
kadmin:
</pre>

  </dd>

</dl>

<h3>ktremove</h3>
<p><strong>ktremove</strong> [options] <em>principal</em> [<em>kvno</em> | <em>all</em> | <em>old</em>]</p><p>Removes entries for the specified <em>principal</em> from a keytab.  Requires no permissions, since this does not require database access.</p><p>If the string "all" is specified, all entries for that principal are removed; if the string "old" is specified, all entries for that principal except those with the highest kvno are removed.  Otherwise, the value specified is parsed as an integer, and all entries whose kvno match that integer are removed.</p><p>The options are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-k[eytab]</strong><strong> </strong><em>keytab</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use <em>keytab</em> as the keytab file.  Otherwise, the default keytab is used.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-q</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Display less verbose information.</p><p>Example:</p>
<pre>
kadmin: ktremove kadmin/admin all
Entry for principal kadmin/admin with kvno 3 removed from keytab
     FILE:/etc/krb5.keytab
kadmin:
</pre>

  </dd>

</dl>

<h3>lock</h3>
<p>Lock database exclusively.  Use with extreme caution!  This command only works with the DB2 KDC database module.</p>
<h3>unlock</h3>
<p>Release the exclusive database lock.</p>
<h3>list_requests</h3>
<p>Lists available for kadmin requests.</p><p>Aliases: <strong>lr</strong>, <strong>?</strong></p>
<h3>quit</h3>
<p>Exit program.  If the database was locked, the lock is released.</p><p>Aliases: <strong>exit</strong>, <strong>q</strong></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>The kadmin program was originally written by Tom Yu at MIT, as an interface to the OpenVision Kerberos administration program.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO kadmin&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/kpasswd.1.html"><strong>kpasswd</strong>(1)</a></em>, <a href="../man8/kadmind.8.html"><strong>kadmind</strong>(8)</a></em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>MIT</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>1985-2013, MIT</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="kabikaboo.1.html"><span aria-hidden="true">&larr;</span> kabikaboo.1: Recursive writing assistant</a></li>
   <li class="next"><a href="kadu.1.html">kadu.1: Kadu- instant messenger for gadu-gadu protocol <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
