<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gpsfake: Test harness for gpsd, simulating a gps</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Test harness for gpsd, simulating a gps">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gpsfake (1) manual">
  <meta name="twitter:description" content="Test harness for gpsd, simulating a gps">
  <meta name="twitter:image" content="https://www.carta.tech/images/python-gps-gpsfake-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/gpsfake.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gpsfake (1) manual" />
  <meta property="og:description" content="Test harness for gpsd, simulating a gps" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/python-gps-gpsfake-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gpsfake<small> (1)</small></h1>
        <p class="lead">Test harness for gpsd, simulating a gps</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpsfake.1.html">
      <span itemprop="name">gpsfake: Test harness for gpsd, simulating a gps</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/python-gps/">
      <span itemprop="name">python-gps</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpsfake.1.html">
      <span itemprop="name">gpsfake: Test harness for gpsd, simulating a gps</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>gpsfake</strong> [-1] [-h] [-b] [-f] [-c&nbsp;<em>interval</em>] [-i] [-D&nbsp;<em>debuglevel</em>] [-l] [-m&nbsp;<em>monitor</em>] [-g] [-n] [-o&nbsp;<em>options</em>] [-p] [-P&nbsp;<em>port</em>] [-r&nbsp;<em>initcmd</em>] [-s&nbsp;<em>speed</em>] [-u] [-t] [-v] [<em>logfile</em>...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>gpsfake is a test harness for gpsd and its clients. It opens a pty (pseudo-TTY), launches a gpsd instance that thinks the slave side of the pty is its GPS device, and repeatedly feeds the contents of one or more test logfiles through the master side to the GPS. If there are multiple logfiles, sentences from them are interleaved in the order the files are specified.</p><p>gpsfake does not require root privileges, and can be run concurrently with a production gpsd instance without causing problems.</p><p>The logfiles may contain packets in any supported format, including in particular NMEA, SiRF, TSIP, or Zodiac. Leading lines beginning with # will be treated as comments and ignored, except in the following special cases:</p><p>a comment of the form #Date: yyyy-mm-dd (ISO8601 date format) may be used to set the initial date for the log.</p><p>a comment of the form #Serial: [0-9]* [78][NOE][12] may be used to set serial parameters for the log - baud rate, word length, stop bits.</p><p>a comment of the form #Transport: UDP may be used to fake a UDP source rather than the normal pty.</p><p>The gpsd instance is run in foreground. The thread sending fake GPS data to the daemon is run in background.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>With the -1 option, the logfile is interpreted once only rather than repeatedly. This option is intended to facilitate regression testing.</p><p>The <strong>-b</strong> enables a twirling-baton progress indicator on standard error. At termination, it reports elapsed time.</p><p>The <strong>-c</strong> sets the delay between sentences in seconds. Fractional values of seconds are legal. The default is zero (no delay).</p><p>The <strong>-l</strong> makes the program dump a line or packet number just before each sentence is fed to the daemon. If the sentence is textual (e.g. NMEA), the text is dumped as well. If not, the packet will be dumped in hexadecimal (except for RTCM packets, which aren&apos;t dumped at all). This option is useful for checking that gpsfake is getting packet boundaries right.</p><p>The <strong>-i</strong> is for single-stepping through logfiles. It dumps the line or packet number (and the sentence if the protocol is textual) followed by "? ". Only when the user keys Enter is the line actually fed to gpsd.</p><p>The <strong>-m</strong> specifies a monitor program inside which the daemon should be run. This option is intended to be used with <a href="../man1/valgrind.1.html"><strong>valgrind</strong>(1)</a>, <strong>gdb</strong>(1) and similar programs.</p><p>The <strong>-g</strong> uses the monitor facility to run the gpsd instance within gpsfake under control of gdb.</p><p>The <strong>-f</strong> configures gpsd to bind to a random dynamic/private port (range 49152 - 65535). Its main use is within regression-test scripts so they won&apos;t collide with a production instance.</p><p>The <strong>-o</strong> specifies options to pass to the daemon. The -n option passes -n to start the daemon reading the GPS without waiting for a client (equivalent to -o "-n"). The <strong>-D</strong> passes a -D option to the daemon: thus -D 4 is shorthand for -o "-D 4".</p><p>The -p ("pipe") option sets watcher mode and dumps the NMEA and GPSD notifications generated by the log to standard output. This is useful for regression-testing.</p><p>The -P ("port") option sets the daemon&apos;s listening port.</p><p>The <strong>-r</strong> specifies an initialization command to use in pipe mode. The default is <strong>?WATCH={"enable":true,"json":true}</strong>.</p><p>The <strong>-s</strong> sets the baud rate for the slave tty. The default is 4800.</p><p>The <strong>-t</strong> forces the test framework to use TCP rather than pty devices. Besides being a test of TCP source handling, this may be useful for testing from within chroot jails where access to pty devices is locked out.</p><p>The <strong>-u</strong> forces the test framework to use UDP rather than pty devices. Besides being a test of UDP source handling, this may be useful for testing from within chroot jails where access to pty devices is locked out.</p><p>The <strong>-v</strong> enables verbose progress reports to stderr. It is mainly useful for debugging gpsfake itself.</p><p>The <strong>-x</strong> dumps packets as gpsfake gathers them. It is mainly useful for debugging gpsfake itself.</p><p>The <strong>-h</strong> makes gpsfake print a usage message and exit.</p><p>The argument must be the name of a file containing the data to be cycled at the device. gpsfake will print a notification each time it cycles.</p><p>Normally, gpsfake creates a pty for each logfile and passes the slave side of the device to the daemon. If the header comment in the logfile contains the string "UDP", packets are instead shipped via UDP port 5000 to the address 192.168.0.1.255. You can monitor them with this: <strong>tcpdump -s0 -n -A -i lo udp and port 5000</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MAGIC COMMENTS</h2>
        <div class="sectioncontent">
<p>Certain magic comments in test load headers can change the conditions of the test. These are:</p><p>Serial:</p><p>May contain a serial-port setting such as 4800 7N2 - baud rate followed by 7 or 8 for byte length, N or O or E for parity and 1 or 2 for stop bits. The test is run with those settings on the slave port that the daemon sees.</p><p>Transport:</p><p>Values &apos;TCP&apos; and &apos;UDP&apos; force the use of TCP and UDP feeds respectively (the default is a pty).</p><p>Delay-Cookie:</p><p>Must be followed by two whitespace-separated fields, a delimiter character and a numeric delay in seconds. Instead of being broken up by packet boundaries, the test load is split on the delimiters. The delay is performed after each feed. Can be useful for imposing write boundaries in the middle of packets.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CUSTOM TESTS</h2>
        <div class="sectioncontent">
<p>gpsfake is a trivial wrapper around a Python module, also named gpsfake, that can be used to fully script sessions involving a gpsd instance, any number of client sessions, and any number of fake GPSes feeding the daemon instance with data from specified sentence logs.</p><p>Source and embedded documentation for this module is shipped with the gpsd development tools. You can use it to torture-test either gpsd itself or any gpsd-aware client application.</p><p>Logfiles for the use with gpsfake can be retrieved using gpspipe, gpscat, or gpsmon from the gpsd distribution, or any other application which is able to create a compatible output.</p><p>If gpsfake exits with "Cannot execute gpsd: executable not found." the environment variable GPSD_HOME can be set to the path where gpsd can be found. (instead of adding that folder to the PATH environment variable</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gpsfake&hellip;</h2>
        <div class="sectioncontent">
<p><strong>gpsd</strong>(8), <a href="../man1/gps.1.html"><strong>gps</strong>(1)</a>, <a href="../man3/libgps.3.html"><strong>libgps</strong>(3)</a>, <strong>libgpsd</strong>(3), <a href="../man1/gpsctl.1.html"><strong>gpsctl</strong>(1)</a>, <a href="../man1/gpspipe.1.html"><strong>gpspipe</strong>(1)</a>, <a href="../man1/gpsprof.1.html"><strong>gpsprof</strong>(1)</a><a href="../man1/gpsmon.1.html"><strong>gpsmon</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Eric S. Raymond &lt;esr@thyrsus.com&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gpsdecode.1.html"><span aria-hidden="true">&larr;</span> gpsdecode.1: Decode gps, rtcm or ais streams into a readable format</a></li>
   <li class="next"><a href="gpsk31.1.html">gpsk31.1: A psk31 mode communications program <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
