<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gpgdir: Recursive directory encryption with gnupg</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Recursive directory encryption with gnupg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gpgdir (1) manual">
  <meta name="twitter:description" content="Recursive directory encryption with gnupg">
  <meta name="twitter:image" content="https://www.carta.tech/images/signing-party-gpgdir-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/gpgdir.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gpgdir (1) manual" />
  <meta property="og:description" content="Recursive directory encryption with gnupg" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/signing-party-gpgdir-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gpgdir<small> (1)</small></h1>
        <p class="lead">Recursive directory encryption with gnupg</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpgdir.1.html">
      <span itemprop="name">gpgdir: Recursive directory encryption with gnupg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/signing-party/">
      <span itemprop="name">signing-party</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpgdir.1.html">
      <span itemprop="name">gpgdir: Recursive directory encryption with gnupg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>gpgdir -e|-d &lt;directory&gt; [options]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>gpgdir</strong> is a perl script that uses the CPAN GnuPG::Interface perl module to recursively encrypt and decrypt directories using gpg. <strong>gpgdir</strong> recursively descends through a directory in order to make sure it encrypts or decrypts every file in a directory and all of its subdirectories.  By default the mtime and atime values of all files will be preserved upon encryption and decryption (this can be disabled with the <strong>--no-preserve-times</strong> option).  Note that in <strong>--encrypt</strong> mode, gpgdir will delete the original files that it successfully encrypts (unless the <strong>--no-delete</strong> option is given).  However, upon startup gpgdir first asks for a the decryption password to be sure that a dummy file can successfully be encrypted and decrypted.  The initial test can be disabled with the <strong>--skip-test</strong> option so that a directory can easily be encrypted without having to also specify a password (this is consistent with <strong>gpg</strong> behavior).  Also, note that gpgdir is careful not encrypt hidden files and directories.  After all, you probably don't want your ~/.gnupg directory or ~/.bashrc file to be encrypted.  The key <strong>gpgdir</strong> uses to encrypt/decrypt a directory is specified in ~/.gpgdirrc.</p><p>Finally, <strong>gpgdir</strong> can use the <strong>wipe</strong> program with the <strong>--Wipe</strong> command line option to securely delete the original unencrypted files after they have been successfully encrypted.  This elevates the security stance of gpgdir since it is more difficult to recover the unencrypted data associated with files from the filesystem after they are encrypted (unlink() does not erase data blocks even though a file is removed).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-e</strong>, <strong>-\^-encrypt</strong>lt;directory&gt;</p>
  </dt>
  <dd>
    <p>Recursively encrypt all files in the directory specified on the command line. All original files will be deleted (a password check is performed first to make sure that the correct password to unlock the private GnuPG key is known to the user).</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>-\^-decrypt</strong>lt;directory&gt;</p>
  </dt>
  <dd>
    <p>Recursively decrypt all files in the directory specified on the command line. The encrypted .gpg version of each file will be deleted.</p>
  </dd>
  <dt>
    <p><strong>-\^-sign</strong>lt;directory&gt;</p>
  </dt>
  <dd>
    <p>Recursively sign all files in the directory specified on the command line.  For each file, a detached .asc signature will be created.</p>
  </dd>
  <dt>
    <p><strong>-\^-verify</strong>lt;directory&gt;</p>
  </dt>
  <dd>
    <p>Recursively verify all .asc signatures for files in the directory specified on the command line.</p>
  </dd>
  <dt>
    <p><strong>-g</strong>, <strong>-\^-gnupg-dir</strong>lt;directory&gt;</p>
  </dt>
  <dd>
    <p>Specify which .gnupg directory will be used to find GnuPG keys.  The default is ~/.gnupg if this option is not used.  This option allows gpgdir to be run as one user but use the keys of another user (assuming permissions are setup correctly, etc.).</p>
  </dd>
  <dt>
    <p><strong>-p</strong>, <strong>-\^-pw-file</strong>lt;pw-file&gt;</p>
  </dt>
  <dd>
    <p>Read decryption password from <strong>pw-file</strong> instead of typing it on the command line.</p>
  </dd>
  <dt>
    <p><strong>-t</strong>, <strong>-\^-test-mode</strong></p>
  </dt>
  <dd>
    <p>Run an encryption and decryption test against a dummy file and exit.  This test is always run by default in both <strong>--encrypt</strong> and <strong>--decrypt</strong> mode.</p>
  </dd>
  <dt>
    <p><strong>-S</strong>, <strong>-\^-Symmetric</strong></p>
  </dt>
  <dd>
    <p>Instruct <strong>gpgdir</strong> to encrypt to decrypt files using a symmetric cipher supported by GnuPG (CAST5 is commonly used).  This results in a significant speed up for the encryption/decryption process.</p>
  </dd>
  <dt>
    <p><strong>-T</strong>, <strong>-\^-Trial-run</strong></p>
  </dt>
  <dd>
    <p>Show what encrypt/decrypt actions would take place without actually doing them.  The filesystem is not changed in any way in this mode.</p>
  </dd>
  <dt>
    <p><strong>-I</strong>, <strong>-\^-Interactive</strong></p>
  </dt>
  <dd>
    <p>Prompt the user before actually encrypting or decrypting each file.  This is useful to have fine-grained control over <strong>gpgdir</strong> operations as it recurses through a directory structure.</p>
  </dd>
  <dt>
    <p><strong>-F</strong>, <strong>-\^-Force</strong></p>
  </dt>
  <dd>
    <p>Tell <strong>gpgdir</strong> to ignore non-fatal error conditions, such as the inability to encrypt or decrypt individual files because of permissions errors.</p>
  </dd>
  <dt>
    <p><strong>-\^-Exclude</strong>lt;pattern&gt;</p>
  </dt>
  <dd>
    <p>Instruct gpgdir to skip all files that match <strong>pattern</strong> as a regex match against each filename.  This is similar to the <strong>--exclude</strong> option in the standard GNU tar command.</p>
  </dd>
  <dt>
    <p><strong>-\^-Exclude-from</strong>lt;file&gt;</p>
  </dt>
  <dd>
    <p>Instruct gpgdir to exclude all files matched by patterns listed in <strong>file.</strong> This is similar to the <strong>--exclude-from</strong> the GNU tar command.</p>
  </dd>
  <dt>
    <p><strong>-\^-Include</strong>lt;pattern&gt;</p>
  </dt>
  <dd>
    <p>Instruct gpgdir to only include files that match <strong>pattern</strong> as a regex match against each filename.</p>
  </dd>
  <dt>
    <p><strong>-\^-Include-from</strong>lt;file&gt;</p>
  </dt>
  <dd>
    <p>Instruct gpgdir to only include files matched by patterns listed in <strong>file.</strong></p>
  </dd>
  <dt>
    <p><strong>-W</strong>, <strong>-\^-Wipe</strong></p>
  </dt>
  <dd>
    <p>Use the <strong>wipe</strong> program to securely delete files after they have been successfully encrypted.</p>
  </dd>
  <dt>
    <p><strong>-O</strong>, <strong>-\^-Obfuscate-filename</strong></p>
  </dt>
  <dd>
    <p>Tell <strong>gpgdir</strong> to obfuscate the file names of files that it encrypts (in -e mode).  The names of each file are stored within the file .gpgdir_map_file for every sub-directory, and this file is itself encrypted.  In decryption mode (-d), the -O argument reverses the process so that the original files are restored.</p>
  </dd>
  <dt>
    <p><strong>-\^-overwrite-encrypted</strong></p>
  </dt>
  <dd>
    <p>Overwrite encrypted files even if a previous &lt;file&gt;.gpg file already exists.</p>
  </dd>
  <dt>
    <p><strong>-\^-overwrite-decrypted</strong></p>
  </dt>
  <dd>
    <p>Overwrite decrypted files even if the previous unencrypted file already exists.</p>
  </dd>
  <dt>
    <p><strong>-K</strong>, <strong>-\^-Key-id</strong>lt;id&gt;</p>
  </dt>
  <dd>
    <p>Manually specify a GnuPG key ID from the command line.  Because GnuPG supports matching keys with a string, <strong>id</strong> does not strictly have to be a key ID; it can be a string that uniquely matches a key in the GnuPG key ring.</p>
  </dd>
  <dt>
    <p><strong>-D</strong>, <strong>-\^-Default-key</strong></p>
  </dt>
  <dd>
    <p>Use the key that GnuPG defines as the default, i.e. the key that is specified by the <strong>default-key</strong> variable in ~/.gnupg/options.  If the default-key variable is not defined within ~/.gnupg/options, then GnuPG tries to use the first suitable key on its key ring (the initial encrypt/decrypt test makes sure that the user knows the corresponding password for the key).</p>
  </dd>
  <dt>
    <p><strong>-a</strong>, <strong> -\^-agent</strong></p>
  </dt>
  <dd>
    <p>Instruct <strong>gpgdir</strong> to acquire gpg key password from a running <strong>gpg-agent</strong> instance.</p>
  </dd>
  <dt>
    <p><strong>-A</strong>, <strong>-\^-Agent-info</strong>lt;connection<strong>\info&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the value of the GPG_AGENT_INFO environment variable as returned by the <strong>gpg-agent --daemon</strong> command. If the <strong>gpgdir --agent</strong> command line argument is used instead of <strong>--Agent-info,</strong> then gpgdir assumes that the GPG_AGENT_INFO environment variable has already been set in the current shell.</p>
  </dd>
  <dt>
    <p><strong>-s</strong>, <strong> -\^-skip-test</strong></p>
  </dt>
  <dd>
    <p>Skip encryption and decryption test.  This will allow <strong>gpgdir</strong> to be used to encrypt a directory without specifying a password (which normally gets used in encryption mode to test to make sure decryption against a dummy file works properly).</p>
  </dd>
  <dt>
    <p><strong>-q</strong>, <strong>-\^-quiet</strong></p>
  </dt>
  <dd>
    <p>Print as little as possible to the screen when encrypting or decrypting a directory.</p>
  </dd>
  <dt>
    <p><strong>-\^-no-recurse</strong></p>
  </dt>
  <dd>
    <p>Instruct gpgdir to not recurse through any subdirectories of the directory that is being encrypted or decrypted.</p>
  </dd>
  <dt>
    <p><strong>-\^-no-password</strong></p>
  </dt>
  <dd>
    <p>Instruct gpgdir to not ask the user for a password.  This is only useful when a gpg key literally has no associated password (this is not common).</p>
  </dd>
  <dt>
    <p><strong>-\^-no-delete</strong></p>
  </dt>
  <dd>
    <p>Instruct gpgdir to not delete original files at encrypt time.</p>
  </dd>
  <dt>
    <p><strong>-\^-no-preserve</strong>times</p>
  </dt>
  <dd>
    <p>Instruct gpgdir to not preserve original file mtime and atime values upon encryption or decryption.</p>
  </dd>
  <dt>
    <p><strong>-l</strong>, <strong> -\^-locale&nbsp;lt;locale&gt;</strong></p>
  </dt>
  <dd>
    <p>Provide a locale setting other than the default "C" locale.</p>
  </dd>
  <dt>
    <p><strong>-\^-no-locale</strong></p>
  </dt>
  <dd>
    <p>Do not set the locale at all so that the default system locale will apply.</p>
  </dd>
  <dt>
    <p><strong>-v</strong>, <strong>-\^-verbose</strong></p>
  </dt>
  <dd>
    <p>Run in verbose mode.</p>
  </dd>
  <dt>
    <p><strong>-V</strong>, <strong>-\^-Version</strong></p>
  </dt>
  <dd>
    <p>Print version number and exit.</p>
  </dd>
  <dt>
    <p><strong>-h</strong>, <strong>-\^-help</strong></p>
  </dt>
  <dd>
    <p>Print usage information and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><strong>~/.gpgdirrc</strong></p><p>Contains the key id of the user gpg key that will be used to encrypt or decrypt the files within a directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following examples illustrate the command line arguments that could be supplied to gpgdir in a few situations:</p><p>To encrypt a directory:</p><p><strong>$ gpgdir -e /some/dir</strong></p><p>To encrypt a directory, and use the wipe command to securely delete the original unencrypted files:</p><p><strong>$ gpgdir -W -e /some/dir</strong></p><p>To encrypt a directory with the default GnuPG key defined in ~/.gnupg/options:</p><p><strong>$ gpgdir -e /some/dir --Default-key</strong></p><p>To decrypt a directory with a key specified in ~/.gpgdirrc:</p><p><strong>$ gpgdir -d /some/dir</strong></p><p>To encrypt a directory but skip all filenames that contain the string "host":</p><p><strong>$ gpgdir -e /some/dir --Exclude host</strong></p><p>To encrypt a directory but only encrypt those files that contain the string "passwd":</p><p><strong>$ gpgdir -e /some/dir --Include passwd</strong></p><p>To acquire the GnuPG key password from a running gpg-agent daemon in order to decrypt a directory (this requires that gpg-agent has the password):</p><p><strong>$ gpgdir -A /tmp/gpg-H4DBhc/S.gpg-agent:7046:1 -d /some/dir</strong></p><p>To encrypt a directory but skip the encryption/decryption test (so you will not be prompted for a decryption password):</p><p><strong>$ gpgdir -e /some/dir -s</strong></p><p>To encrypt a directory and no subdirectories:</p><p><strong>$ gpgdir -e /some/dir --no-recurse</strong></p><p>To encrypt root's home directory, but use the GnuPG keys associated with the user "bob":</p><p><strong># gpgdir -e /root -g /home/bob/.gnupg</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPENDENCIES</h2>
        <div class="sectioncontent">
<p><strong>gpgdir</strong> requires that gpg, the Gnu Privacy Guard (http://www.gnupg.org) is installed. <strong>gpgdir</strong> also requires the GnuPG::Interface perl module from CPAN, but it is bundled with <strong>gpgdir</strong> and is installed in /usr/lib/gpgdir at install-time so it does not pollute the system perl library tree.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gpgdir&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/gpg.1.html"><strong>gpg</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Michael Rash &lt;mbr@cipherdyne.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONTRIBUTORS</h2>
        <div class="sectioncontent">
<p>Many people who are active in the open source community have contributed to gpgdir; see the <strong>CREDITS</strong> file in the gpgdir sources.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Send bug reports to mbr@cipherdyne.org. Suggestions and/or comments are always welcome as well.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISTRIBUTION</h2>
        <div class="sectioncontent">
<p><strong>gpgdir</strong> is distributed under the GNU General Public License (GPL), and the latest version may be downloaded from <strong>http://www.cipherdyne.org</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gpgconf.1.html"><span aria-hidden="true">&larr;</span> gpgconf.1: Modify .gnupg home directories</a></li>
   <li class="next"><a href="gpgme-config.1.html">gpgme-config.1: Script to get information about the installed version of gpgme <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
