<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mrtg-rrd: How to use rrdtool with mrtg</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="How to use rrdtool with mrtg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mrtg-rrd (1) manual">
  <meta name="twitter:description" content="How to use rrdtool with mrtg">
  <meta name="twitter:image" content="https://www.carta.tech/images/mrtg-mrtg-rrd-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mrtg-rrd.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mrtg-rrd (1) manual" />
  <meta property="og:description" content="How to use rrdtool with mrtg" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mrtg-mrtg-rrd-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mrtg-rrd<small> (1)</small></h1>
        <p class="lead">How to use rrdtool with mrtg</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mrtg-rrd.1.html">
      <span itemprop="name">mrtg-rrd: How to use rrdtool with mrtg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mrtg/">
      <span itemprop="name">mrtg</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mrtg-rrd.1.html">
      <span itemprop="name">mrtg-rrd: How to use rrdtool with mrtg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>After using \s-1MRTG\s0 for some time you may find some limitations, mostly in the areas of performance and graphing flexibility. These are exactly the areas addressed by RRDtool. To learn more about RRDtool check out its website on</p>
<pre>
 http://oss.oetiker.ch/rrdtool
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RRDTOOL INTEGRATION</h2>
        <div class="sectioncontent">
<p>When using mrtg with RRDtool you are replacing <em>rateup</em> with the RRDtool perl module <em>RRDs.pm</em>. To enable RRDtool support in mrtg you have to add the line</p><p> LogFormat: rrdtool</p><p>to your mrtg config file.</p><p>\s-1MRTG\s0 needs access to both the RRDtool perl module <strong>RRDs.pm</strong> and to the <strong>rrdtool</strong> executable.</p><p>If these two items are not installed in locations where perl can find them on its own, then you can use the following two parameters to supply the appropriate directories.</p><p>For the location of the <strong>rrdtool</strong> executable you put</p><p> PathAdd: /usr/local/rrdtool/bin/</p><p>or</p><p> PathAdd: c:&#92;rrdtool&#92;bin</p><p>For the location of the perl module it would be:</p><p> LibAdd: /usr/local/rrdtool/lib/perl/</p><p>or</p><p> LibAdd: c:&#92;rrdtool&#92;bin&#92;lib&#92;perl</p><p>When you have made this modification to the configuration file, several things will happen when you run mrtg again with the new config file:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>mrtg will take all your old \*(C`.log\*(C' files and <strong>convert</strong> them to \*(C`.rrd\*(C' format. (The \*(C`.log\*(C' files don't get touched in the process, so if things don't work out they are still there.)</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>mrtg will use <strong>rrdtool</strong> to update its databases. These will have a new format called <em>rrd</em> which is totally different than the native <em>log</em> format of the classic mrtg.</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>mrtg will <strong>not</strong> create any webpages of graphs anymore. It will only query the routers for traffic information and update its <em>rrd</em> databases.</p>
  </dd>

</dl>
<p>The advantage of whole thing is that the mrtg will become <strong>much</strong> faster. Expect the runtime to drop to 20% of the previous value. (I would like to get some feedback on this from folks with large installations.)</p><p>Mind you, though, while the logging process of RRDtool is <strong>very</strong> fast, you are also gaining some time by neither creating graphs nor updating webpages. The idea behind this is that it is more efficient to create graphs and webpages on demand by using a cgi script.</p><p>At the moment there is no <strong>official</strong> script to do this, but two contributers have created such scripts:</p>
<dl class='dl-vertical'>
  <dt>
    One4All aka 14all.cgi
  </dt>
  <dd>
    <p>This was the first program to take over the webpage creation and graphing task. It has been developed by Rainer Bawidamann rainer.bawidamann@web.de. You can find a copy on Rainers website: http://my14all.sourceforge.net/ The program comes with its own documentation</p>
  </dd>
  <dt>
    <strong>routers2.cgi</strong>
  </dt>
  <dd>
    <p>This is another \s-1CGI\s0 frontend for mrtg running with rrdtool. The main difference between this and 14all is that the web pages it creates are much more stylish than the ones from mrtg, plus they support User Defined summary graphs and different levels of Authentication and Authorisation. This has been written by Steve Shipway (steve@steveshipway.org). You obtain a copy, and find a forum and demonstration system at http://www.steveshipway.org/software/ The program comes with its own installation instructions and install script.</p>
  </dd>
  <dt>
    <strong>mrtg-rrd</strong>
  </dt>
  <dd>
    <p>The mrtg-rrd script is a CGI/FastCGI application by Jan \*(L"Yenya\*(R" Kasprzak for displaying \s-1MRTG\s0 graphs from data in the RRDtool format. It is an intended replacement for the 14all.cgi script. It can make your monitoring system faster because \s-1MRTG\s0 does not have to generate all the \s-1PNG\s0 files with graphs every 5 minutes or so. Instead of this the graphs are generated on-demand when the user wants to see them. http://www.fi.muni.cz/~kas/mrtg-rrd/</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUTURE</h2>
        <div class="sectioncontent">
<p>Just as a side note: \s-1MRTG-3\s0 will be based entirely on rrdtool technology. But don't wait for it ... get going <strong>now</strong>!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Tobias Oetiker &lt;tobi@oetiker.ch&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mrtg-reference.1.html"><span aria-hidden="true">&larr;</span> mrtg-reference.1: Mrtg 2.17.4 configuration reference</a></li>
   <li class="next"><a href="mrtg-sensors.1.html">mrtg-sensors.1: Returns data from lm-sensors <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
