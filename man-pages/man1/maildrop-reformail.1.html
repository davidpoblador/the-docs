<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>reformail: E-mail reformatting tool</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="E-mail reformatting tool">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="reformail (1) manual">
  <meta name="twitter:description" content="E-mail reformatting tool">
  <meta name="twitter:image" content="https://www.carta.tech/images/maildrop-reformail-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/maildrop-reformail.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="reformail (1) manual" />
  <meta property="og:description" content="E-mail reformatting tool" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/maildrop-reformail-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">reformail<small> (1)</small></h1>
        <p class="lead">E-mail reformatting tool</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/reformail.1.html">
      <span itemprop="name">reformail: E-mail reformatting tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/maildrop/">
      <span itemprop="name">maildrop</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/reformail.1.html">
      <span itemprop="name">reformail: E-mail reformatting tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>reformail</strong> -s command [option...] <strong>reformail</strong> -D len <em>filename</em> <strong>reformail</strong> -x&nbsp;<em>header:</em>... <strong>reformail</strong> -X&nbsp;<em>header:</em>... <strong>reformail</strong> [<em>options</em>...]</p><p>See below for additional options</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>reformail</strong> program reads a message on standard input, reformats it in some way, and writes the message to standard output:</p><h3>Splitting mailboxes into individual messages</h3>
<p>The <strong>-s</strong> option splits the mbox-formatted mailbox file on standard input into individual messages. An external program is executed for each message. The contents of each individual message will be provided to the external program on standard input.</p><p>If the <strong>FILENO</strong> environment variable is set to a number, <strong>reformail</strong> will consecutively increment <strong>FILENO</strong> each time the program is executed for each individual message.</p><p>If <strong>FILENO</strong> is not set, it&apos;s initial value will be "000". If <strong>FILENO</strong> is set to a non-numeric value, <strong>FILENO</strong> will remain unchanged.</p>
<h3>Detecting duplicate messages</h3>
<p>The <strong>-D</strong> option implements a simple way to delete duplicate messages in incoming mail. <em>filename</em> is a file that will be approximately &apos;<em>len</em>&apos; bytes long. This file will be used by <strong>reformail</strong> to save message IDs seen in recent mail. <strong>reformail</strong> reads the message on standard input. If the message has a Message-ID: header that&apos;s already in the cache file, <strong>reformail</strong> terminates with the exit code set to 0. Otherwise, <strong>reformail</strong> terminates with the exit code set to 1.</p><p><strong>Note</strong></p><p>Unlike a similar feature in the <strong>formail</strong> command, <strong>reformail</strong> takes care of locking the file, so it&apos;s not necessary to implement your own locking mechanism for this option.</p>
<h3>Extracting headers</h3>
<p>The <strong>-x</strong> and <strong>-X</strong> options extract the indicated headers from the message, and print them to standard output. Multiple <strong>-x</strong> and <strong>-X</strong> options can be specified at the same time, and may be intermixed.</p><p>The <strong>-x</strong> option extracts and prints the contents of the header. The <strong>-X</strong> option prints the name of the header as well.</p><p>In all other situations, <strong>reformail</strong> copies the message on its standard input to its standard output, reformatting the message as follows:</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>-a&apos;header: value&apos;</p><p>Append a custom header to the message if this header does not already exist. If the header is either Message-ID: or Resent-Message-ID: and the value is empty, <strong>reformail</strong> generates a (hopefully) unique message ID for you.</p><p>-A&apos;header: value&apos;</p><p>Append a custom header to the message even if this header already exists. If the header is either Message-ID: or Resent-Message-ID: and the value is empty, <strong>reformail</strong> generates a (hopefully) unique message ID for you.</p><p>-c</p><p>Concatenate multi-line headers. Headers split on multiple lines are combined into a single line.</p><p>-d<em>n</em></p><p>If n is 1, each line will be terminated with CRLF. If n is 0 (default), each line will be terminated with LF. <strong>reformail</strong> reads a message with either line terminator, and will force the message to have the specified line termination.</p><p>-f0</p><p>Any initial blank lines are removed. If the first non-blank line is a "From_" line, it gets converted to a "Return-Path:" header, and any existing "Return-Path:" header gets removed. If the message does not start with a "From_" line, the message remains unchanged.</p><p>-f1</p><p>Add the "From_" line to the message, if it&apos;s not there. <strong>reformail</strong> will attempt to generate the "From_" line from any Errors-To:, Return-Path:, or From: headers in the message. "root" will be used if <strong>reformail</strong> is unable to determine the return address.</p><p>-i&apos;<em>header: value</em>&apos;</p><p>Appends a custom header to the message. If this header already exists it is renamed by prepending "Old-" to the name of the header.</p><p>-I&apos;<em>header: value</em>&apos;</p><p>Append a custom header to the message. If this header already exists in the message, the old header is completely removed. If the value is empty, any existing header is completely removed, and nothing gets appended.</p><p>-R oldheader: newheader:</p><p>Rename the indicated header.</p><p>-u&apos;header:&apos;</p><p>If this header occurs multiple times in the message, remove all occurrences except the first one.</p><p>-U&apos;header:&apos;</p><p>If this header occurs multiple times in the message, remove all occurrences except the last one.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTOREPLIES</h2>
        <div class="sectioncontent">
<p>The autoreply options from earlier versions of <strong>mailbot</strong> have been moved into \m[blue]<strong></strong><a href="../man1/mailbot.1.html"><strong>mailbot</strong>(1)</a>\m[]\s-2\u[1]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>For the <strong>-a</strong>, <strong>-A</strong>, and <strong>-I</strong> options, a space after the header name and the colon is considered to be a non-empty field.</p><p>Do not provide the same header to more than one family of header-modifying options, such as <strong>-u</strong>/<strong>-U</strong> and <strong>-a</strong>/<strong>-A</strong>. Doing so yields unpredictable results. It&apos;s better to run <strong>reformail</strong> several times (use a pipe, perhaps).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO reformail&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong></strong><a href="../man8/courier.8.html"><strong>courier</strong>(8)</a>\m[]\s-2\u[2]\d\s+2, <a href="../man8/sendmail.8.html"><strong>sendmail</strong>(8)</a>, \m[blue]<strong></strong><a href="../man1/mailbot.1.html"><strong>mailbot</strong>(1)</a>\m[]\s-2\u[1]\d\s+2, \m[blue]<strong></strong><a href="../man1/maildrop.1.html"><strong>maildrop</strong>(1)</a>\m[]\s-2\u[3]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Sam Varshavchik</strong></p><p>Author</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man1/mailbot.1.html"><strong>mailbot</strong>(1)</a></p><p>[set $man.base.url.for.relative.links]/mailbot.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man8/courier.8.html"><strong>courier</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/courier.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p><a href="../man1/maildrop.1.html"><strong>maildrop</strong>(1)</a></p><p>[set $man.base.url.for.relative.links]/maildrop.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="courier-maildrop-reformail.1.html"><span aria-hidden="true">&larr;</span> reformail.1: E-mail reformatting tool</a></li>
   <li class="next"><a href="courier-maildrop-reformime.1.html">reformime.1: Mime e-mail reformatting tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
