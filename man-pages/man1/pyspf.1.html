<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pyspf: Pure-python spf library</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Pure-python spf library">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pyspf (1) manual">
  <meta name="twitter:description" content="Pure-python spf library">
  <meta name="twitter:image" content="https://www.carta.tech/images/spf-tools-python-pyspf-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pyspf.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pyspf (1) manual" />
  <meta property="og:description" content="Pure-python spf library" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/spf-tools-python-pyspf-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pyspf<small> (1)</small></h1>
        <p class="lead">Pure-python spf library</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pyspf.1.html">
      <span itemprop="name">pyspf: Pure-python spf library</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/spf-tools-python/">
      <span itemprop="name">spf-tools-python</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pyspf.1.html">
      <span itemprop="name">pyspf: Pure-python spf library</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>2.0.9</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>SPF does email sender validation.  For more information about SPF, please see http://www.openspf.org/</p><p>One incompatible change was introduced in version 1.7.  Prior to version 1.7, connections from a local IP address (127...) would always return a Pass result.  The special case was eliminated.  Programs calling pySPF should not do SPF checks on locally submitted mail.</p><p>This SPF client is intended to be installed on the border MTA, checking if incoming SMTP clients are permitted to forward mail.  The SPF check should be done during the MAIL FROM:&lt;...&gt; command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>There are multiple ways to use this package:</p>
<pre>
    To check an incoming mail request:
        % pyspf [-v] {ip} {sender} {helo}
        % pyspf 69.55.226.139 tway@optsw.com mx1.wayforward.net
</pre>

<pre>
    To test an SPF record:
        % pyspf [-v] "v=spf1..." {ip} {sender} {helo}
        % pyspf "v=spf1 +mx +ip4:10.0.0.1 -all" 10.0.0.1 tway@foo.com a
</pre>

<pre>
    To fetch an SPF record:
        % pyspf {domain}
        % pyspf wayforward.net
</pre>

<pre>
    To test this script (and to output this usage message):
        % pyspf
</pre>
<p>For instance, during an SMTP exchange from client 69.55.226.139::</p>
<pre>
        S: 220 mail.example.com ESMTP Postfix
        C: EHLO mx1.wayforward.net
        S: 250-mail.example.com
        S: ...
        S: 250 8BITMIME
        C: MAIL FROM:&lt;terry@wayforward.net&gt;
</pre>
<p>Then the following command line would check if this is a valid sender:</p>
<pre>
        % pyspf 69.55.226.139 terry@wayforward.net mx1.wayforward.net
        ('pass', 250, 'sender SPF authorized')
</pre>
<p>Command line calls return RFC 4408 result codes, i.e. 'pass', 'fail', 'neutral', \'softfail, 'permerror', or 'temperror'.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RFC 4408/7208 TEST SUITE</h2>
        <div class="sectioncontent">
<p>The package also installs the python-spf test driver and the current (as of the release date) YAML (Yet Another Markup Language) RFC 4408/7208 test definitions.  As errors or improvements in the test definitions are approved, they are available from:</p><p>&lt;http://www.openspf.net/Test_Suite&gt;</p><p>To run the test suite, change the directory the test suite is installed in:</p><p>$ cd /usr/share/doc/python-spf</p><p>Uncompress testspf.py.gz, testspf.py.gz, and rfc4408-tests.yml.gz</p><p>and then run testspf.py:</p><p>$ python testspf.py (also works with python3)</p><p>The test suite supports multiple allowed results with a warning for a non-preferred result.  For the current version, the expected results are:</p><p>WARN: spfonly in rfc4408-tests.yml, 4.4/1: fail preferred to none WARN: invalid-domain-long in rfc4408-tests.yml, ['4.3/1', '5/10/3']: permerror preferred to fail WARN: txttimeout in rfc4408-tests.yml, 4.4/1: fail preferred to temperror WARN: invalid-domain-empty-label in rfc4408-tests.yml, ['4.3/1', '5/10/3']: permerror preferred to fail WARN: exists-dnserr in rfc4408-tests.yml, 5.7/3: fail preferred to temperror WARN: spfoverride in rfc4408-tests.yml, 4.5/5: pass preferred to fail WARN: multitxt1 in rfc4408-tests.yml, 4.5/5: pass preferred to permerror WARN: mx-limit in rfc4408-tests.yml, 10.1/7: neutral preferred to permerror WARN: multispf2 in rfc4408-tests.yml, 4.5/6: permerror preferred to pass WARN: invalid-domain-long-via-macro in rfc4408-tests.yml, ['4.3/1', '5/10/3']: permerror preferred to fail</p><p>Due to the resolution of a number of ambiguities in the SPF specification in RFC 7208, there should be no warnings for the RFC 7208 portions of the test suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pyspf&hellip;</h2>
        <div class="sectioncontent">
<p>RFC 7208, &lt;http://www.openspf.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>This version of <strong>pyspf</strong> was written by Terence Way &lt;terry-spf@wayforward.net&gt; and updated by Stuart Gathman &lt;stuart@bmsi.com&gt; and Scott Kitterman &lt;scott@kitterman.com&gt;.</p><p>This man-page was created by Scott Kitterman &lt;scott@kitterman.com&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pysnmpwalk.1.html"><span aria-hidden="true">&larr;</span> pysnmpwalk.1: Options and behaviour common to most of the pysnmp command-line tools</a></li>
   <li class="next"><a href="pyspf-type99.1.html">pyspf-type99.1: Python type txt to type 99/spf conversion script <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
