<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shptree: Create a quadtree-based spatial index for a shape data set</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create a quadtree-based spatial index for a shape data set">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shptree (1) manual">
  <meta name="twitter:description" content="Create a quadtree-based spatial index for a shape data set">
  <meta name="twitter:image" content="https://www.carta.tech/images/mapserver-bin-shptree-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/shptree.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shptree (1) manual" />
  <meta property="og:description" content="Create a quadtree-based spatial index for a shape data set" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mapserver-bin-shptree-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shptree<small> (1)</small></h1>
        <p class="lead">Create a quadtree-based spatial index for a shape data set</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/shptree.1.html">
      <span itemprop="name">shptree: Create a quadtree-based spatial index for a shape data set</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mapserver-bin/">
      <span itemprop="name">mapserver-bin</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/shptree.1.html">
      <span itemprop="name">shptree: Create a quadtree-based spatial index for a shape data set</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>shptree</strong> \kx [ <em>shpfile</em> [<em>depth</em>] [<em>index_format</em>] | <strong>-v</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>shptree</strong> creates a quadtree-based spatial index for a Shape data set. The default tree depth is calculated so that each tree node (quadtree cell) contains 8 shapes. Do not use the default with point files, a value between 6 and 10 seems to work ok. Your millage may vary and you'll need to do some experimenting.</p><p>This utility is a must for any MapServer application that uses Shape data sets. <strong>shptree</strong> creates a spatial index of your Shape data set, using a quadtree method. This means that MapServer will use this index to quickly find the appropriate shapes to draw. It creates a file of the same name as your Shape data set, with a .qix file extension. The quadtree method breaks the file into 4 quadrants, recursively until only a few shapes are contained in each quadrant. This minimum number can be set with the <em>depth</em> parameter of the command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>shpfile</em></p>
  </dt>
  <dd>
    <p>The name of the .shp file to index.</p>
  </dd>
  <dt>
    <p><em>depth</em></p>
  </dt>
  <dd>
    <p>(Optional) The maximum depth of the index to create, default is 0 meaning that <strong>shptree</strong> will calculate a reasonable default depth.</p>
  </dd>
  <dt>
    <p><em>index_format</em></p>
  </dt>
  <dd>
    <p>(Optional) One of:</p>
<dl class='dl-vertical'>
  <dt>
    <p>\*(T&lt;<strong>NL</strong>\*(T&gt;</p>
  </dt>
  <dd>
    <p>LSB byte order, using new index format</p>
  </dd>
  <dt>
    <p>\*(T&lt;<strong>NM</strong>\*(T&gt;</p>
  </dt>
  <dd>
    <p>MSB byte order, using new index format</p>
  </dd>

</dl>
<p>The following old format options are deprecated:</p>
<dl class='dl-vertical'>
  <dt>
    <p>\*(T&lt;<strong>N</strong>\*(T&gt;</p>
  </dt>
  <dd>
    <p>Native byte order</p>
  </dd>
  <dt>
    <p>\*(T&lt;<strong>L</strong>\*(T&gt;</p>
  </dt>
  <dd>
    <p>LSB (intel) byte order</p>
  </dd>
  <dt>
    <p>\*(T&lt;<strong>M</strong>\*(T&gt;</p>
  </dt>
  <dd>
    <p>MSB byte order</p>
  </dd>

</dl>
<p>The default <em>index_format</em> on this system is: \*(T&lt;<strong>NL</strong>\*(T&gt;</p>
  </dd>
  <dt>
    <p>\*(T&lt;<strong>-v</strong>\*(T&gt;</p>
  </dt>
  <dd>
    <p>Display mapserver version and build options.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Shape data sets are native to MapServer, and therefore do not require the .shp extension in the DATA path of the LAYER. In fact, in order for MapServer to use the .qix extension you MUST NOT specify the extension, for example:</p>
<pre>
\*(T&lt;
       LAYER
         ...
         DATA "us_states"    #MapServer will search for us_states.qix and will use it
         ...
       END

       LAYER
         ...
         DATA "us_states.shp" #MapServer will search for us_states.shp.qix and won't find it
         ...
       END
      \*(T&gt;
</pre>
<p>Note: As of MapServer 5.2 the qix will be used even when the .shp extension is specified.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
\*(T&lt;
shptree us_states.shp
  creating index of new  LSB format
      \*(T&gt;
</pre>
<p>Result:</p><p>A file named 'us_states.qix' is created in the same location. (note that you can use the <a href="../man1/shptreevis.1.html"><strong>shptreevis</strong>(1)</a> utility to view the actual quadtree quadrants that are used by MapServer in this qix file)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO shptree&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/shptreetst.1.html"><strong>shptreetst</strong>(1)</a>, <a href="../man1/shptreevis.1.html"><strong>shptreevis</strong>(1)</a>, <a href="../man1/sortshp.1.html"><strong>sortshp</strong>(1)</a></p><p>The &#92;$2 \(la&#92;$1\(ra&#92;$3 may also contain information on this utility.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="shptest.1.html"><span aria-hidden="true">&larr;</span> shptest.1: Create some shapefiles for testing</a></li>
   <li class="next"><a href="shptreetst.1.html">shptreetst.1: Execute a spatial query on an existing spatial index <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
