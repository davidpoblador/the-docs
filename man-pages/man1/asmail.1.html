<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>asmail: The afterstep e-mail monitor</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The afterstep e-mail monitor">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="asmail (1) manual">
  <meta name="twitter:description" content="The afterstep e-mail monitor">
  <meta name="twitter:image" content="https://www.carta.tech/images/asmail-asmail-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/asmail.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="asmail (1) manual" />
  <meta property="og:description" content="The afterstep e-mail monitor" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/asmail-asmail-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">asmail<small> (1)</small></h1>
        <p class="lead">The afterstep e-mail monitor</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/asmail.1.html">
      <span itemprop="name">asmail: The afterstep e-mail monitor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/asmail/">
      <span itemprop="name">asmail</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/asmail.1.html">
      <span itemprop="name">asmail: The afterstep e-mail monitor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>asmail</strong> [-h] [-V] [-v] [-nox]</p>
<pre>
        [-insecure]
        [-noconfig]
        [-f <em>resource file</em>]
        [-geometry <em>X geometry specification</em>]
        [-iconic]
        [-withdrawn]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>asmail</strong> is a X11 application that acts as an e-mail monitor for a number of various format mailboxes. The <strong>asmail</strong> provides a distinctive Afterstep window manager look and feel and features multiple options to allow the customization.</p><p>Basically, the tool shows you the following:</p><p>- The background image changes depending on whether</p>
<pre>
  there is e-mail in your mailboxes or not.
  Custom images may be loaded and used for animation
  sequences.
</pre>
<p>- The tool will display the number of e-mails waiting</p>
<pre>
  in each mailbox and/or the total numbers for all
  mailboxes together.
</pre>
<p>- For each mailbox, there is a status indicator that</p>
<pre>
  shows whether the update is running at this moment
  and indicates if there is an error. The same indicator
  shows up next to the summary line.
</pre>
<p>The folowing indicators are used for the status display:</p>
<pre>
  <strong>R</strong>  An update on the mailbox is running at this moment.
     For small mailboxes with fast access, you may never
     actually see it - so fast it disappears.
</pre>

<pre>
  <strong>L</strong>  An error occured that has to do with the login
     procedure. Most probably, your name/password
     combination was not accepted by the server.
</pre>

<pre>
  <strong>C</strong>  A connection problem. <strong>asmail</strong> could not
     connect to the server for some reason. The reasons
     may be many - server down, network unreachable,
     service not available and so on.
</pre>

<pre>
  <strong>T</strong>  A time-out has occured while <strong>asmail</strong> was
     waiting for the server's answer. If you have a
     frequent problem with this but the server seems
     to be available in other applicaitons, try
     increasing the "timeout" setting for the mailbox.
</pre>

<pre>
  <strong>F</strong>  This is an indicator of a general error condition.
     Something is wrong, maybe the configuration is not
     correct, or the mailbox is not readable. Check the
     output of <strong>asmail</strong> by running from the terminal -
     this should give you an idea of what is wrong.
</pre>
<p>The resource files may be specified with a command line option. The logic of <strong>asmail</strong> is simple: first it parses the resource file that you specified on the command line. If you do not specify the resource file on the command line, <strong>asmail</strong> will look in the default location (~/.asmailrc). If it exists, <strong>asmail</strong> will parse that one. If no configuration file was given on the command line and there is no configuration file in the default location, <strong>asmail</strong> will attempt to monitor the mailbox specified by the <strong>$MAILBOX</strong> environment variable.</p><p><strong>How asmail distinguishes between old and new mail.</strong></p><p>The <strong>UNIX mailbox</strong> format does not contain any indication on the outside. The mailbox must be parsed to check if some e-mail is new. Parsing the mailbox is an expensive operation, especially if the mailbox is large. <strong>asmail</strong> checks the mailbox file modification time with the <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a> system call. When the file modification time changes, the mailbox is parsed. The lines "<strong>From </strong>" are counted and taken to be the number of e-mails in the box. After each "<strong>From </strong>" line, asmail looks for the "<strong>Status:</strong>" header. This header contains flags when the message was seen and read. Messages without this header line (or with an empty header) are considered to be new.</p><p>The <strong>Maildir</strong> format is very well-behaved. There are separate folders for old and new e-mails so we just count the number of files in "<strong>cur</strong>" and "<strong>new</strong>" subdirectories. The "<strong>tmp</strong>" subdirectory is ignored since this is the temporary storage and is not supposed to be taken into account.</p><p>The <strong>mH</strong> format is somewhere between Maildir and the UNIX mailbox formats. It is used by mh, nmh, balsa and xfmail among others. The messages are all stored in separate files, one message per file, and all of the messages in a single directory. Each message file is named with an increasing number, so the first message recieved in the mailbox is stored as "1" and the 39th message is stored as "39". There are two ways that the status of the messages are kept track of. Traditionally, the mH tools used a file called "<strong>.mh_sequences</strong>", which is stored in the mH directory, to keep track of status. This file contains a series of sequences, each one starting with a token followed by a colon and then by a series of message numebrs, representing the messages that belong to that sequence. It looks something like this:</p><p>unseen: 1 2 3-5 19 25-31</p><p>Although there are many sequences, some standard and some user-defined, if the <strong>use-mh-sequences</strong> configuration option is set to "yes" for that mailbox, then asmail will parse this file, looking for the "unseen" sequence to determine how many messages are new. Some mail clients don't use the .mh_sequences file and instead treat the files in the mH mailbox just like a collection of seperate messages from a UNIX mailbox. So, if the <strong>use-mh-sequences</strong> configuration option is set to "no", or is not specified at all, then asmail will parse all of the files in the mH directory, searching for the <strong>Status</strong> header. Therefore, this mode is definitely the most "processor hungry" format from the point of view of <strong>asmail</strong>. mh, nmh, and newer versions of balsa utilize the .mh_sequences file, while older versions of balsa and xfmail do not.  It is not known how other clients treat mH mailboxes.</p><p>The <strong>POP3</strong> protocol does not support the notion of new or old e-mail. Your e-mail client keeps a list of messages and can tell whether you read one of them or not. Since <strong>asmail</strong> does not keep a list of messages there is no way to tell a new message from the old one. Ok, so what we do is assume that all e-mail is new at start-up. This is a logical assumption for most of the people because they store the e-mail locally and remove it from the server. Others are out of luck. Now, when the number of messages decreases, we assume that you read all your e-mail and deleted some, so all messages are marked as old. When the number of messages increases, we assume that the new mail arrived and we report the additional mail as new.</p><p>The <strong>IMAP</strong> protocol is very well behaved, it reports the number of new e-mails and the number of old e-mails if you ask politely :) Since we open the mailbox in read-only mode, we do not cause any status changes for the mailbox on the server. The <strong>IMAP</strong> server will store a special e-mail into your mailbox if it is in UNIX format. This e-mail allows the server to keep track of the new and old e-mails. The server will not report this e-mail into the number of e-mails, so that if you check your <strong>UNIX mailbox</strong> directly the number of messages will be one more.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    -h
  </dt>
  <dd>
    <p>prints a short description and usage message.</p>
  </dd>
  <dt>
    -V
  </dt>
  <dd>
    <p>Version control. Prints out the version of the program.</p>
  </dd>
  <dt>
    -v
  </dt>
  <dd>
    <p>Verbose mode. In this mode, <strong>asmail</strong> will print the information about mailboxes onto the controlling terminal. The information includes: number of updates requested, per mailbox: thread PID, [<strong>R</strong>]unning or idle, any errors are signalled with leters (see above) and the number of e-mails in the format new/old. This mode is useful for debugging or could be used to monitor mailboxes without X Windows interface (give the <strong>-nox</strong> option).</p>
  </dd>
  <dt>
    -f resource file
  </dt>
  <dd>
    <p>Specifies the alternative location for the resource file. The default location is ~/.asmailrc If the alternative file is specified, the default location is ignored.</p>
  </dd>
  <dt>
    -geometry X geometry specification
  </dt>
  <dd>
    <p>Specifies the size and position of the application on the screen in the standard X11 format (see <strong>XParseGeometry (3x)</strong> for details):</p><p>[=][&lt;width&gt;{xX}&lt;height&gt;][{+-}&lt;xoffset&gt;{+-}&lt;yoffset&gt;]</p>
  </dd>
  <dt>
    -noconfig
  </dt>
  <dd>
    <p>Forces <strong>asmail</strong> to ignore the resource file even if one is present. <strong>asmail</strong> will run with all default settings and check the Unix mailbox specified by the <strong>$MAIL</strong> environment variable.</p>
  </dd>
  <dt>
    -nox
  </dt>
  <dd>
    <p>Starts the <strong>asmail</strong> application in the terminal-only mode. The X Windows interface is not started. The configuration file is still parsed as usual though.</p><p>This option implies <strong>-v</strong> option.</p>
  </dd>
  <dt>
    -insecure
  </dt>
  <dd>
    <p>Usually, <strong>asmail</strong> will check that the resource file has the <strong>600</strong> mode, that is there are no access rights for "group" and "others". If such access rights are granted, <strong>asmail</strong> will complain and exit. This is done to make you remember the passwords you put into the resource file. If there are no passwords stored in the file (e.g. you are using UNIX mailbox on the local machine) the check is not applied.</p><p>This option forces <strong>asmail</strong> to continue operation even if the resource file has insecure permissions and passwords are stored in that file.</p>
  </dd>
  <dt>
    -iconic
  </dt>
  <dd>
    <p>This option will cause <strong>asmail</strong> to start up as an icon rather than as a normal window. The application can still be de-iconized and iconized as usual.</p>
  </dd>
  <dt>
    -withdrawn
  </dt>
  <dd>
    <p>This option will cause <strong>asmail</strong> to start up in a so-called "withdrawn" mode. This mode is used by <strong>WindowMaker</strong> window manager to dock the application into their version of the <strong>Wharf</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESOURCE FILE SYNTAX</h2>
        <div class="sectioncontent">
<p>The syntax of the resource file is described in a separate man page under <strong>asmailrc</strong> (5).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INVOCATION</h2>
        <div class="sectioncontent">
<p><strong>asmail</strong> can be called in different ways.  The most common invocation is the command line:</p>
<pre>
	user@host[1]% asmail &

</pre>
<p>Another way to call <strong>asmail</strong> is from the window manager:</p>
<pre>
	*Wharf "asmail" nil Swallow "asmail" /usr/local/bin/asmail &

</pre>
<p>This line, when placed in the <em>wharf</em> file in the users Afterstep configuration directory will cause <strong>asmail</strong> to become a button on the <strong>Wharf (1)</strong> button bar under the <strong>afterstep (1)</strong> window manager.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>My programs do not have bugs, they just develop random features ;-)</p><p>Well, there are limitations. All the strings for the color names, file names, and other strings have the length limit of 256 characters (terminating zero included). The program will complain about very long names in the configuration file.</p><p>The number of mailboxes is not limited by the space on the icon but the stats will be chopped (not shown) if you have too many and they do not fit into the icon. Make sure you pick up a tall icon if you have many mailboxes and want to see info on each of them because they are shown from the top down and there is no way to change this.</p><p>The information about mailboxes will not appear when you use "shaped" windows with transparency if it is printed in the transparent area.</p><p><strong>asmail</strong> may interfere with your mail client program when you use the POP3 server. There is no way to login to the POP3 server twice (from the mail client and <strong>asmail</strong>), so there is an inherent race condition between the two. The one that tries to log in second, will fail. <strong>asmail</strong> logs out immediately after checking so your mail client will have a much higher chance of precluding <strong>asmail</strong> from logging in than the other way around.</p><p>If the program is not satisfied with the specification of one of the mailboxes, it will print an error message, set the status for that mailbox to <strong>F</strong> (Failed) and exit the thread (only the thread that is responsible for handling that particular mailbox). Other mailboxes will be checked normally. Check the standard output of the tool to see what the problem is.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>~/.asmailrc</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO asmail&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/asmailrc.5.html"><strong>asmailrc</strong>(5)</a> <strong>afterstep</strong>(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHTS</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2002-2007  Albert Dorofeev &lt;albert@tigr.net&gt;</p><p>Distributed under GNU General Public License v2 ; see LICENSE file for more informations.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Albert "Tigr" Dorofeev &lt;albert@tigr.net&gt;</p><p>See the README file for credits.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="asm_count.1.html"><span aria-hidden="true">&larr;</span> asm_count.1: Count physical lines of code, in each input file</a></li>
   <li class="next"><a href="asmix.1.html">asmix.1: The afterstep volume control knob <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
