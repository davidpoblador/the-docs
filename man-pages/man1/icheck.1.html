<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>icheck: C interface abi/api checker</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="C interface abi/api checker">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="icheck (1) manual">
  <meta name="twitter:description" content="C interface abi/api checker">
  <meta name="twitter:image" content="https://www.carta.tech/images/icheck-icheck-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/icheck.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="icheck (1) manual" />
  <meta property="og:description" content="C interface abi/api checker" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/icheck-icheck-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">icheck<small> (1)</small></h1>
        <p class="lead">C interface abi/api checker</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/icheck.1.html">
      <span itemprop="name">icheck: C interface abi/api checker</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/icheck/">
      <span itemprop="name">icheck</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/icheck.1.html">
      <span itemprop="name">icheck: C interface abi/api checker</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><em>icheck</em> <strong>--canonify</strong> [[<strong>--baseline</strong> <strong>FILE</strong>] ...] [<strong>OPTIONS</strong>] [<strong>GCC_OPTIONS</strong>] [--] <strong>files</strong></p><p><em>icheck</em> <strong>--compare</strong> [<strong>OPTIONS</strong>] <strong>old_file</strong> <strong>new_file</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A tool for statically checking C interfaces for API and ABI changes. All changes to type declarations that can cause ABI changes should be detected, along with most API changes.</p><p>icheck is intended for use with libraries, as a method of preventing ABI drift.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>Reduce a set of source files to a canonical interface file with --canonify, then compare two such interface files with --compare. If there are interface changes between them, icheck will describe the changes and fail.</p><p><strong>--canonify</strong> [[<strong>--baseline</strong> <strong>FILE</strong>] ...] [<strong>OPTIONS</strong>] [<strong>GCC_OPTIONS</strong>] [--] <strong>files</strong></p><p>Canonify the source code files (typically .h headers) to be compared later with <strong>--compare</strong>. Usually used with the <strong>-o</strong> option to save the summary to a file.</p><p><strong>--compare</strong> [<strong>OPTIONS</strong>] <strong>old_file</strong> <strong>new_file</strong></p><p>Reads two canonical interface files generated with <strong>--canonify</strong> and compares the structure of the source code to the changes in the Application Public Interface (the developer interface or API) and the Application Binary Interface (ABI) used to link against other programs or libraries.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<h3>ICHECK OPTIONS</h3>
<p><strong>-o</strong>, <strong>--output</strong> <strong>FILE</strong></p><p>Emit output to FILE, rather than stdout.</p><p><strong>--debug</strong> <strong>N</strong></p><p>Dump debugging information.</p><p><strong>--only</strong> <strong>THING</strong></p><p>Only process the given THING.</p><p><strong>--skip-from</strong> <strong>FILE</strong></p><p>Skip unnecessary things from <strong>FILE</strong>.</p><p><strong>--skip-from-re</strong> <strong>regexp</strong></p><p>Skip unnecessary things from files matching the regular expression.</p><p><strong>--only-from</strong> <strong>FILE</strong></p><p>Only take things from <strong>FILE</strong>.</p><p><strong>--only-from-re</strong> <strong>regexp</strong></p><p>Only take things from files matching the regular expression.</p><p><strong>GCC_OPTIONS</strong></p><p>GCC_OPTIONS are passed through to gcc -E</p>
<h3>HELP OPTIONS</h3>
<p><strong>--help</strong></p><p>Display the help synopsis for <em>icheck</em>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>All source files are preprocessed with gcc, so canonify needs the same include information as the source code - follow the syntax from the Makefile to include -I options to <strong>cpp</strong> (or <strong>gcc</strong>) so that all necessary headers can be located. <strong>icheck</strong> will abort if any required headers cannot be found. The source must be compileable; icheck cannot process files which cannot be directly compiled. If a header is missing #include statements, or otherwise requires being used in a special way, then it cannot be directly processed with icheck. Instead, write a stub C file that sets things up appropriately and then #includes the header.</p><p><em>icheck</em> <strong>--canonify</strong> <strong>-o</strong> <strong>~/icheck/oldversion</strong> <strong>-I/usr/include/foo-2.0</strong> <strong>/usr/src/bar/src/foobar.h</strong></p><p>Prepare a text summary of the foobar.h file and all files it includes. The summary is written out to <strong>~/icheck/oldversion</strong>. Repeat for <strong>/usr/src/bar1/src/foobar.h</strong> - the same file in the newer source directory, outputting to a new file, e.g. <strong>~/icheck/newversion</strong>.</p><p><em>icheck</em> <strong>--compare</strong> <strong>-o</strong> <strong>~/icheck/results.txt</strong> <strong>~/icheck/oldversion</strong> <strong>~/icheck/newversion</strong></p><p>Writes the report of the comparison of the two summary files. The report indicates all the changes in the ABI and/or API found during the comparison.</p><p><em>icheck</em> <strong>--canonify</strong> <strong>-o</strong> <strong>debian/icheck.canonical</strong> <strong>-Idebian/foo-dev/usr/include</strong> <strong>debian/foo-dev/usr/include/foobar.h</strong></p><p><em>icheck</em> <strong>--compare</strong> <strong>debian/icheck.manifest</strong> <strong>debian/icheck.canonical</strong></p><p>These two statements, included in a <strong>debian/rules</strong> file, will cause the package build to fail if the API or ABI has changed in unexpected ways, where icheck.manifest is a copy of the expected interface, included in the package.</p><p>Note that the arguments to --compare are themselves valid C files which are preprocessed, so icheck.manifest can contain C preprocessor logic. This can be useful when a package exports different interfaces depending on the host architecture. In this case, you can't replace it with a new copy of icheck.canonical when the interface changes and you need to update the manifest. Rather than updating the entire manifest by hand, put the hand-written interface descriptions in one file (<strong>icheck.static-manifest</strong>) and then use:</p><p><em>icheck</em> <strong>--canonify</strong> <strong>--baseline</strong> <strong>debian/icheck.static-manifest</strong> <strong>-o</strong> <strong>debian/icheck.dynamic-manifest</strong></p><p>Lastly, create icheck.manifest containing:</p>
<pre>
#include "icheck.static-manifest"
#include "icheck.dynamic-manifest"
</pre>
<p>This allows you to update some parts of the manifest by hand, while still automatically generating the rest.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OUTPUT</h2>
        <div class="sectioncontent">
<p>icheck generates a lengthly description of every possible API or ABI change, based on type information. It does not investigate the actual program code, and so it is possible that some type changes it detects are not actual ABI or API changes. However, this normally only happens when the program code was explicitly written for it. If in doubt, assume it's changed.</p><p>At the end, icheck provides a summary of the changes. Note that the directions here are dependent on the order of the arguments to --compare: the older interface must come first, or the directions will be the other way around. The meanings of the various terms are as follows:</p>
<dl class='dl-vertical'>
  <dt>
    ABI
  </dt>
  <dd>
    <p>The ABI is compatible if things compiled against one version of the interface will work when run using the other version.</p>
  </dd>
  <dt>
    API
  </dt>
  <dd>
    <p>The API is compatible if things compiled against one version of the interface can be compiled against the other.</p>
  </dd>
  <dt>
    forwards-compatible
  </dt>
  <dd>
    <p>An interface is forwards-compatible if things compiled against the old version will work with the new. This is the important feature for <strong>soname</strong> changes.</p>
  </dd>
  <dt>
    backwards-compatible
  </dt>
  <dd>
    <p>An interface is backwards-compatible if things compiled against the new version will work with the old. This is the important feature for <strong>shlibs version</strong> changes. If you aren't building Debian packages, you probably don't care about changes which aren't backwards-compatible.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><em>icheck</em> was written by Andrew Suffield &lt;asuffield@debian.org&gt;.</p><p>This manual page was written by Neil Williams &lt;linux@codehelp.co.uk&gt; and Andrew Suffield &lt;asuffield@debian.org&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="iceweasel.1.html"><span aria-hidden="true">&larr;</span> iceweasel.1: A web browser for x11 derived from the mozilla browser</a></li>
   <li class="next"><a href="ick.1.html">ick.1: Intercal compiler <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
