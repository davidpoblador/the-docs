<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sdiag: Scheduling diagnostic tool for slurm</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Scheduling diagnostic tool for slurm">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sdiag (1) manual">
  <meta name="twitter:description" content="Scheduling diagnostic tool for slurm">
  <meta name="twitter:image" content="https://www.carta.tech/images/slurm-client-sdiag-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/sdiag.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sdiag (1) manual" />
  <meta property="og:description" content="Scheduling diagnostic tool for slurm" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/slurm-client-sdiag-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sdiag<small> (1)</small></h1>
        <p class="lead">Scheduling diagnostic tool for slurm</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/sdiag.1.html">
      <span itemprop="name">sdiag: Scheduling diagnostic tool for slurm</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/slurm-client/">
      <span itemprop="name">slurm-client</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/sdiag.1.html">
      <span itemprop="name">sdiag: Scheduling diagnostic tool for slurm</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>sview</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>sdiag shows information related to slurmctld execution about: threads, agents, jobs, and scheduling algorithms. The goal is to obtain data from slurmctld behaviour helping to adjust configuration parameters or queues policies. The main reason behind is to know SLURM behaviour under systems with a high throughput.</p><p>It has two execution modes. The default mode <strong>--all</strong> shows several counters and statistics explained later, and there is another execution option <strong>--reset</strong> for resetting those values.</p><p>Values are reset at midnight UTC time by default.</p><p>The first block of information is related to global slurmctld execution:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Server thread count</strong></p>
  </dt>
  <dd>
    <p>The number of current active slurmctld threads. A high number would mean a high load processing events like job submissions, jobs dispatching, jobs completing, etc. If this is often close to MAX_SERVER_THREADS it could point to a potential bottleneck.</p>
  </dd>
  <dt>
    <p><strong>Agent queue size</strong></p>
  </dt>
  <dd>
    <p>SLURM design has scalability in mind and sending messages to thousands of nodes is not a trivial task. The agent mechanism helps to control communication between the slurm daemons and the controller for a best effort. If this values is close to MAX_AGENT_CNT there could be some delays affecting jobs management.</p>
  </dd>
  <dt>
    <p><strong>Jobs submitted</strong></p>
  </dt>
  <dd>
    <p>Number of jobs submitted since last reset</p>
  </dd>
  <dt>
    <p><strong>Jobs started</strong></p>
  </dt>
  <dd>
    <p>Number of jobs started since last reset. This includes backfilled jobs.</p>
  </dd>
  <dt>
    <p><strong>Jobs completed</strong></p>
  </dt>
  <dd>
    <p>Number of jobs completed since last reset.</p>
  </dd>
  <dt>
    <p><strong>Jobs canceled</strong></p>
  </dt>
  <dd>
    <p>Number of jobs canceled since last reset.</p>
  </dd>
  <dt>
    <p><strong>Jobs failed</strong></p>
  </dt>
  <dd>
    <p>Number of jobs failed since last reset.</p>
  </dd>

</dl>
<p>The second block of information is related to main scheduling algorithm based on jobs priorities. A scheduling cycle implies to get the job_write_lock lock, then trying to get resources for jobs pending, starting from the most priority one and going in descendent order. Once a job can not get the resources the loop keeps going but just for jobs requesting other partitions. Jobs with dependencies or affected  by accounts limits are not processed.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Last cycle</strong></p>
  </dt>
  <dd>
    <p>Time in microseconds for last scheduling cycle.</p>
  </dd>
  <dt>
    <p><strong>Max cycle</strong></p>
  </dt>
  <dd>
    <p>Time in microseconds for the maximum scheduling cycle since last reset.</p>
  </dd>
  <dt>
    <p><strong>Total cycles</strong></p>
  </dt>
  <dd>
    <p>Number of scheduling cycles since last reset. Scheduling is done in periodically and when a job is submitted or a job is completed.</p>
  </dd>
  <dt>
    <p><strong>Mean cycle</strong></p>
  </dt>
  <dd>
    <p>Mean of scheduling cycles since last reset</p>
  </dd>
  <dt>
    <p><strong>Mean depth cycle</strong></p>
  </dt>
  <dd>
    <p>Mean of cycle depth. Depth means number of jobs processed in a scheduling cycle.</p>
  </dd>
  <dt>
    <p><strong>Cycles per minute</strong></p>
  </dt>
  <dd>
    <p>Counter of scheduling executions per minute</p>
  </dd>
  <dt>
    <p><strong>Last queue length</strong></p>
  </dt>
  <dd>
    <p>Length of jobs pending queue.</p>
  </dd>

</dl>
<p>The third block of information is related to backfilling scheduling algorithm. A backfilling scheduling cycle implies to get locks for jobs, nodes and partitions objects then trying to get resources for jobs pending. Jobs are processed based on priorities. If a job can not get resources the algorithm calculates when it could get them obtaining a future start time for the job. Then next job is processed and the algorithm tries to get resources for that job but avoiding to affect the <em>previous ones</em>, and again it calculates the future start time if not current resources available. The backfilling algorithm takes more time for each new job to process since more priority jobs can not be affected. The algorithm itself takes measures for avoiding a long execution cycle and for taking all the locks for too long.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Total backfilled jobs (since last slurm start)</strong></p>
  </dt>
  <dd>
    <p>Number of jobs started thanks to backfilling since last slurm start.</p>
  </dd>
  <dt>
    <p><strong>Total backfilled jobs (since last stats cycle start)</strong></p>
  </dt>
  <dd>
    <p>Number of jobs started thanks to backfilling since last time stats where reset. By default these values are reset at midnight UTC time.</p>
  </dd>
  <dt>
    <p><strong>Total cycles</strong></p>
  </dt>
  <dd>
    <p>Number of scheduling cycles since last reset</p>
  </dd>
  <dt>
    <p><strong>Last cycle when</strong></p>
  </dt>
  <dd>
    <p>Time when last execution cycle happened in format "weekday Month MonthDay hour:minute.seconds year"</p>
  </dd>
  <dt>
    <p><strong>Last cycle</strong></p>
  </dt>
  <dd>
    <p>Time in microseconds of last backfilling cycle. It counts only execution time removing sleep time inside a scheduling cycle when it takes too much time. Note that locks are released during the sleep time so that other work can proceed.</p>
  </dd>
  <dt>
    <p><strong>Max cycle</strong></p>
  </dt>
  <dd>
    <p>Time in microseconds of maximum backfilling cycle execution since last reset. It counts only execution time removing sleep time inside a scheduling cycle when it takes too much time. Note that locks are released during the sleep time so that other work can proceed.</p>
  </dd>
  <dt>
    <p><strong>Mean cycle</strong></p>
  </dt>
  <dd>
    <p>Mean of backfilling scheduling cycles in microseconds since last reset</p>
  </dd>
  <dt>
    <p><strong>Last depth cycle</strong></p>
  </dt>
  <dd>
    <p>Number of processed jobs during last backfilling scheduling cycle. It counts every process even if it has no option to execute due to dependencies or limits.</p>
  </dd>
  <dt>
    <p><strong>Last depth cycle (try sched)</strong></p>
  </dt>
  <dd>
    <p>Number of processed jobs during last backfilling scheduling cycle. It counts only processes with a chance to run waiting for available resources. These jobs are which makes the backfilling algorithm heavier.</p>
  </dd>
  <dt>
    <p><strong>Depth Mean</strong></p>
  </dt>
  <dd>
    <p>Mean of processed jobs during backfilling scheduling cycles since last reset.</p>
  </dd>
  <dt>
    <p><strong>Depth Mean (try sched)</strong></p>
  </dt>
  <dd>
    <p>Mean of processed jobs during backfilling scheduling cycles since last reset. It counts only processes with a chance to run waiting for available resources. These jobs are which makes the backfilling algorithm heavier.</p>
  </dd>
  <dt>
    <p><strong>Last queue length</strong></p>
  </dt>
  <dd>
    <p>Number of jobs pending to be processed by backfilling algorithm. A job appears as much times as partitions it requested.</p>
  </dd>
  <dt>
    <p><strong>Queue length Mean</strong></p>
  </dt>
  <dd>
    <p>Mean of jobs pending to be processed by backfilling algorithm.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-a</strong>, <strong>--all</strong></p>
  </dt>
  <dd>
    <p>Get and report information. This is the default mode of operation.</p>
  </dd>
  <dt>
    <p><strong>-h</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Print description of options and exit.</p>
  </dd>
  <dt>
    <p><strong>-r</strong>, <strong>--reset</strong></p>
  </dt>
  <dd>
    <p>Reset counters. Only used by user SlurmUser or root.</p>
  </dd>
  <dt>
    <p><strong>--usage</strong></p>
  </dt>
  <dd>
    <p>Print list of options and exit.</p>
  </dd>
  <dt>
    <p><strong>-V</strong>, <strong>--version</strong></p>
  </dt>
  <dd>
    <p>Print current version number and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2010-2011 Barcelona Supercomputing Center.</p><p>Copyright (C) 2010-2013 SchedMD LLC.</p><p>SLURM is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>SLURM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sdiag&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/sinfo.1.html"><strong>sinfo</strong>(1)</a>, <strong>squeue</strong>(1), <strong>scontrol</strong>(1), <a href="../man5/slurm.conf.5.html"><strong>slurm.conf</strong>(5)</a>,</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sdf2fps.1.html"><span aria-hidden="true">&larr;</span> sdf2fps.1: Sdf2fps</a></li>
   <li class="next"><a href="sdiff.1.html">sdiff.1: Side-by-side merge of file differences <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
