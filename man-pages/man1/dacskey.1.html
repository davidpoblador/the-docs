<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dacskey: Generate encryption keys for dacs</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Generate encryption keys for dacs">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dacskey (1) manual">
  <meta name="twitter:description" content="Generate encryption keys for dacs">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-dacskey-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/dacskey.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dacskey (1) manual" />
  <meta property="og:description" content="Generate encryption keys for dacs" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-dacskey-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dacskey<small> (1)</small></h1>
        <p class="lead">Generate encryption keys for dacs</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dacskey.1.html">
      <span itemprop="name">dacskey: Generate encryption keys for dacs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dacskey.1.html">
      <span itemprop="name">dacskey: Generate encryption keys for dacs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dacskey</strong> [<em>\m[blue]</em><strong>dacsoptions</strong>\m[]\s-2\u[1]\d\s+2]</p><p>[<strong>-check</strong> | <strong>-gen</strong> | <strong>-priv</strong> | <strong>-private</strong> | <strong>-pub</strong> | <strong>-public</strong>]</p><p>[<strong>-p</strong> | <strong>-pf&nbsp;</strong><strong></strong><em>passphrase-file</em>] [<strong>-pem</strong>] [<strong>-vfs</strong>] [<strong>-rsa_key_bits</strong>&nbsp;<em>number</em>] [<strong>--</strong>] <em>keyfile</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program is part of the <strong>DACS</strong> suite.</p><p>The <strong>dacskey</strong> utility generates encryption keys for <strong>DACS</strong> that are cryptographically sound. Keys are represented externally as an XML document called a keyfile. The program can also validate a keyfile or display a key.</p><p>Keys are created for at least three different purposes, although every keyfile has the same format:</p><p>Keys that are shared by all of the jurisdictions within the same <strong>DACS</strong> federation, identified by the virtual filestore item type federation_keys. It is through these "master" keys that any jurisdiction is able to decrypt and validate credentials created by any other jurisdiction within the same federation quickly and without any additional communication. These keys are generated initially by a designated federation administrator at the time a federation is created. These keys can be generated at any jurisdiction within the federation.</p><p>Ideally, new keys should be generated at regular intervals and also whenever warranted to maintain security, such as when a jurisdiction leaves the federation or if a key may have been compromised. When a jurisdiction joins a federation, it must receive a copy of the current keys. There is currently no automated key management support; administrators must distribute these keys to all jurisdictions over a secure channel whenever they are changed. Besides using some method of encryption to ensure the keys remain private during distribution, take care not to mangle the XML document (e.g., through line breaks or truncation).</p><p>Keys that are used by a jurisdiction for its own purposes, identified by the virtual filestore item type jurisdiction_keys. These keys are kept private to the jurisdiction (they are not shared with any other jurisdiction) and are ordinarily generated at that jurisdiction. These keys should be regenerated periodically as a routine security measure.</p><p>Keys that are used by a <strong>DACS</strong> application at a particular jurisdiction for its own purposes (\m[blue]<a href="../man1/dacsgrid.1.html"><strong>dacsgrid</strong>(1)</a></strong>\m[]\s-2\u[2]\d\s+2, for instance). These keys should be regenerated periodically, but take care to retain the old keys so that they can be used for decryption before information is re-encrypted using the new keys.</p><p>The program ordinarily uses <strong>OpenSSL</strong>&apos;s \m[blue]<strong>ssl</strong>(3)</strong>\m[]\s-2\u[3]\d\s+2 library to acquire high-quality random material. In certain situations, an experienced administrator might find the <strong>-p</strong> and <strong>-pf</strong> options useful; others should avoid them, however.</p><p>When keys are generated, the output is written to <em>keyfile</em>, which is either created or truncated. In this context, <em>keyfile</em> must be a pathname. Unless directly written to where federation_keys (or jurisdiction_keys) points, <em>keyfile</em> must be copied there.</p><p>Assuming that the default site configuration file (conf/site.conf-std, which establishes default locations for these files) has been installed:</p>
<pre>
% dacskey -u mysite.example.com -q fkeys
% install -o root -g www -m 0640 fkeys &#92;
      /usr/local/dacs/federations/example.com/federation_keyfile
% dacskey -u mysite.example.com -q jkeys
% install -o root -g www -m 0640 jkeys &#92;
      /usr/local/dacs/federations/example.com/mysite/jurisdiction_keyfile
</pre>
<p>The owner, group, and mode assigned to these files in this example are typical but are only suggestions.</p><p><strong>Security</strong></p><p>A keyfile generated by this command must be accessible (readable and writable) <em>only</em> by <strong>DACS</strong> web services and the <strong>DACS</strong> administrator. It must be kept unreadable and unwritable by all others.</p><p>When not generating keys, by default <em>keyfile</em> is a pathname. If the <strong>-vfs</strong> flag is given, then <em>keyfile</em> is a <strong>DACS</strong> URI, item type, or absolute pathname.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>In addition to the standard \m[blue]<strong></strong><em>dacsoptions</em>\m[]\s-2\u[1]\d\s+2, <strong>dacskey</strong> recognizes these options:</p><p><strong>-gen</strong></p><p>Generate new keys. This is the default operation.</p><p><strong>-check</strong></p><p>Validate <em>keyfile</em>, an existing keyfile. The <em>keyfile</em> is expressed as a vfs-ref or an absolute filename (see \m[blue]<strong>dacs.conf</strong>(5)</strong>\m[]\s-2\u[4]\d\s+2).</p><p><strong>-priv</strong></p><p><strong>-private</strong></p><p>Print the private key found in <em>keyfile</em>, an existing keyfile, to stdout. The private key is <em>not</em> encrypted. If the <strong>-pem</strong> flag is present, the PEM format is used, otherwise the <strong>DACS</strong> base-64 encoding is used (the latter is used when keys appear in XML attribute values).</p><p><strong>-pub</strong></p><p><strong>-public</strong></p><p>Print the public key found in <em>keyfile</em>, an existing keyfile, to stdout. If the <strong>-pem</strong> flag is present, the PEM format is used, otherwise the <strong>DACS</strong> base-64 encoding is used (the latter is used when keys appear in XML attribute values).</p><p><strong>-p</strong></p><p>Rather than using the default source for generating random strings, derive the random strings from material read from the standard input. The user is prompted for input. This option should not be used under normal circumstances.</p><p><strong>-pem</strong></p><p>When printing a key, use the PEM format.</p><p><strong>-pf</strong> <em>passphrase-file</em></p><p>Rather than using the default source for generating random strings, derive the random strings from material read from <em>passphrase-file</em>. If the filename argument is "<strong>-</strong>", the standard input is read. This option should not be used under normal circumstances.</p><p><strong>-rsa_key_bits</strong> <em>number</em></p><p>This specifies the length of the RSA modulus, in bits, used for asymmetric key generation. Used as the <em>num</em> argument to \m[blue]<strong>RSA_generate_key</strong>(3)</strong>\m[]\s-2\u[5]\d\s+2, the value must satisfy that function&apos;s constraints.</p><p><strong>--</strong></p><p>This argument explicitly marks the end of the flags.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>The program exits 0 if everything was fine, 1 if an error occurred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dacskey&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<a href="../man1/dacsauth.1.html"><strong>dacsauth</strong>(1)</a></strong>\m[]\s-2\u[6]\d\s+2, \m[blue]<a href="../man1/dacsgrid.1.html"><strong>dacsgrid</strong>(1)</a></strong>\m[]\s-2\u[2]\d\s+2, \m[blue]<a href="../man1/dacsinit.1.html"><strong>dacsinit</strong>(1)</a></strong>\m[]\s-2\u[7]\d\s+2, \m[blue]<a href="../man1/dacsrlink.1.html"><strong>dacsrlink</strong>(1)</a></strong>\m[]\s-2\u[8]\d\s+2\m[blue]<a href="../man1/dacstoken.1.html"><strong>dacstoken</strong>(1)</a></strong>\m[]\s-2\u[9]\d\s+2, \m[blue]<a href="../man7/dacs.install.7.html"><strong>dacs.install</strong>(7)</a></strong>\m[]\s-2\u[10]\d\s+2, \m[blue]<a href="../man8/dacs_acs.8.html"><strong>dacs_acs</strong>(8)</a></strong>\m[]\s-2\u[11]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Distributed Systems Software (\m[blue]<strong>www.dss.ca</strong>\m[]\s-2\u[12]\d\s+2)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright2003-2013 Distributed Systems Software. See the \m[blue]<strong>LICENSE</strong>\m[]\s-2\u[13]\d\s+2 file that accompanies the distribution for licensing information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>dacsoptions</p><p>http://dacs.dss.ca/man/dacs.1.html#dacsoptions</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man1/dacsgrid.1.html"><strong>dacsgrid</strong>(1)</a></p><p>http://dacs.dss.ca/man/dacsgrid.1.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p><strong>ssl</strong>(3)</p><p>http://www.freebsd.org/cgi/man.cgi?query=ssl&apropos=0&sektion=3&manpath=FreeBSD+9.1-RELEASE&format=html</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p><strong>dacs.conf</strong>(5)</p><p>http://dacs.dss.ca/man/dacs.conf.5.html#VFS</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p><strong>RSA_generate_key</strong>(3)</p><p>http://www.freebsd.org/cgi/man.cgi?query=RSA_generate_key&apropos=0&sektion=3&manpath=FreeBSD+9.1-RELEASE&format=html</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p><a href="../man1/dacsauth.1.html"><strong>dacsauth</strong>(1)</a></p><p>http://dacs.dss.ca/man/dacsauth.1.html</p>
  </dd>
  <dt>
     7.
  </dt>
  <dd>
    <p><a href="../man1/dacsinit.1.html"><strong>dacsinit</strong>(1)</a></p><p>http://dacs.dss.ca/man/dacsinit.1.html</p>
  </dd>
  <dt>
     8.
  </dt>
  <dd>
    <p><a href="../man1/dacsrlink.1.html"><strong>dacsrlink</strong>(1)</a></p><p>http://dacs.dss.ca/man/dacsrlink.1.html</p>
  </dd>
  <dt>
     9.
  </dt>
  <dd>
    <p><a href="../man1/dacstoken.1.html"><strong>dacstoken</strong>(1)</a></p><p>http://dacs.dss.ca/man/dacstoken.1.html</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p><a href="../man7/dacs.install.7.html"><strong>dacs.install</strong>(7)</a></p><p>http://dacs.dss.ca/man/dacs.install.7.html</p>
  </dd>
  <dt>
    11.
  </dt>
  <dd>
    <p><a href="../man8/dacs_acs.8.html"><strong>dacs_acs</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_acs.8.html</p>
  </dd>
  <dt>
    12.
  </dt>
  <dd>
    <p>www.dss.ca</p><p>http://www.dss.ca</p>
  </dd>
  <dt>
    13.
  </dt>
  <dd>
    <p>LICENSE</p><p>http://dacs.dss.ca/man/../misc/LICENSE</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dacsinit.1.html"><span aria-hidden="true">&larr;</span> dacsinit.1: Configure a minimal dacs federation interactively</a></li>
   <li class="next"><a href="dacslist.1.html">dacslist.1: List jurisdictions <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
