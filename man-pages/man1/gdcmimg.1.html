<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gdcmimg: Manipulate dicom image file. gdcmimg is a low level tool to allow de-/encapsulation from/to dicom image. this tool does not understand transfer syntax conversion. it will encapsulate the raw data as-is. this has some impact in some cases, see special warnings below.  it is important to note that gdcmimg can only encapsulate proper input file, for instance jpg and or jp2 are accepted since an associated dicom transfer syntax can be found. however input such as tiff and/or png are not, since dicom does not support those. see instead a tool such as gdcm2vtk.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manipulate dicom image file. gdcmimg is a low level tool to allow de-/encapsulation from/to dicom image. this tool does not understand transfer syntax conversion. it will encapsulate the raw data as-is. this has some impact in some cases, see special warnings below.  it is important to note that gdcmimg can only encapsulate proper input file, for instance jpg and or jp2 are accepted since an associated dicom transfer syntax can be found. however input such as tiff and/or png are not, since dicom does not support those. see instead a tool such as gdcm2vtk.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gdcmimg (1) manual">
  <meta name="twitter:description" content="Manipulate dicom image file. gdcmimg is a low level tool to allow de-/encapsulation from/to dicom image. this tool does not understand transfer syntax conversion. it will encapsulate the raw data as-is. this has some impact in some cases, see special warnings below.  it is important to note that gdcmimg can only encapsulate proper input file, for instance jpg and or jp2 are accepted since an associated dicom transfer syntax can be found. however input such as tiff and/or png are not, since dicom does not support those. see instead a tool such as gdcm2vtk.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libgdcm-tools-gdcmimg-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/gdcmimg.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gdcmimg (1) manual" />
  <meta property="og:description" content="Manipulate dicom image file. gdcmimg is a low level tool to allow de-/encapsulation from/to dicom image. this tool does not understand transfer syntax conversion. it will encapsulate the raw data as-is. this has some impact in some cases, see special warnings below.  it is important to note that gdcmimg can only encapsulate proper input file, for instance jpg and or jp2 are accepted since an associated dicom transfer syntax can be found. however input such as tiff and/or png are not, since dicom does not support those. see instead a tool such as gdcm2vtk." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libgdcm-tools-gdcmimg-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gdcmimg<small> (1)</small></h1>
        <p class="lead">Manipulate dicom image file. gdcmimg is a low level tool to allow de-/encapsulation from/to dicom image. this tool does not understand transfer syntax conversion. it will encapsulate the raw data as-is. this has some impact in some cases, see special warnings below.  it is important to note that gdcmimg can only encapsulate proper input file, for instance jpg and or jp2 are accepted since an associated dicom transfer syntax can be found. however input such as tiff and/or png are not, since dicom does not support those. see instead a tool such as gdcm2vtk.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gdcmimg.1.html">
      <span itemprop="name">gdcmimg: Manipulate dicom image file. gdcmimg is a low level tool to allow de-/encapsulation from/to dicom image. this tool does not understand transfer syntax conversion. it will encapsulate the raw data as-is. this has some impact in some cases, see special warnings below.  it is important to note that gdcmimg can only encapsulate proper input file, for instance jpg and or jp2 are accepted since an associated dicom transfer syntax can be found. however input such as tiff and/or png are not, since dicom does not support those. see instead a tool such as gdcm2vtk.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libgdcm-tools/">
      <span itemprop="name">libgdcm-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gdcmimg.1.html">
      <span itemprop="name">gdcmimg: Manipulate dicom image file. gdcmimg is a low level tool to allow de-/encapsulation from/to dicom image. this tool does not understand transfer syntax conversion. it will encapsulate the raw data as-is. this has some impact in some cases, see special warnings below.  it is important to note that gdcmimg can only encapsulate proper input file, for instance jpg and or jp2 are accepted since an associated dicom transfer syntax can be found. however input such as tiff and/or png are not, since dicom does not support those. see instead a tool such as gdcm2vtk.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
gdcmimg [options] file-in file-out
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>gdcmimg</strong> command line tool can be used in two fashions:</p><ul>
<li><p>1. Converting a recognized file format into its encapsulated DICOM counterpart,</p></li><li><p>2. Anonymizing a rectangular portion of a DICOM file.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">

<pre>
file-in   input filename (non-DICOM)

file-out  DICOM output filename
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<h3>PARAMETERS</h3>

<pre>
  -i --input     Input filename
  -o --output    Output filename
</pre>

<h3>OPTIONS</h3>

<pre>
     --endian %s       Endianness (LSB/MSB).
  -d --depth %d        Depth (Either 8/16/32 or BitsAllocated eg. 12 when known).
     --sign %s         Pixel sign (0/1).
     --spp  %d         Sample Per Pixel (1/3).
  -s --size %d,%d      Size.
  -C --sop-class-uid   SOP Class UID (name or value).
  -T --study-uid       Study UID.
  -S --series-uid      Series UID.
     --root-uid        Root UID.
</pre>

<h3>fill options</h3>

<pre>
  -R --region %d,%d    Region.
  -F --fill %d         Fill with pixel value specified.
</pre>

<h3>general options</h3>

<pre>
  -h   --help
         print this help text and exit

  -v   --version
         print version information and exit

  -V   --verbose
         verbose mode (warning+error).

  -W   --warning
         warning mode, print warning information

  -E   --error
         error mode, print error information

  -D   --debug
         debug mode, print debug information
</pre>

<h3>environment variable</h3>

<pre>
  GDCM_ROOT_UID Root UID
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Supported File Format (appropriate file extension) gdcmimg</h2>
        <div class="sectioncontent">
<p>will base it's conversion process based on the file extension. Follows the list of recognized file extension. When no extension is found, DICOM file is assumed.</p><p>input format</p>
<pre>
  * RAW       (raw, rawl, gray, rgb)
  * RLE       (rle)
  * PNM       (pgm, pnm, ppm)
  * JPEG-LS   (jls)
  * JPEG 2000 (jp2, j2k, j2c, jpx, jpc)
  * JPEG      (jpg, jpeg, ljpg, ljpeg)
  * DICOM     ()

</pre>
<p>output format:</p>
<pre>
  * PGM       (pgm, pnm, ppm)
  * DICOM     ()

</pre>
<p>For RAW file format, you should take special care of the --endian option. For the (old) JPEG file format, both the lossy and lossless format are supported, user should pay attention to the --sign option. For file format such as RLE or RAW, user is expected to fill in information required to find the dimension and type of input data as there is no other way to find this information. For all other file format, the properties are derived from the file format itself.</p><p>PNM file are supposed to be big endian (important for depth &gt; 8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Typical usage</h2>
        <div class="sectioncontent">
<h3>Remove a rectangular part of the image</h3>
<p>To fill the region [0,100]x[0,100] of a DICOM image simply do:</p>
<pre>
$ gdcmimg --fill 0 --region 0,100,0,100 -i input.dcm -o output_black.dcm
</pre>
<p>Warning: if the Pixel Data is compressed, the image is first decompressed so that pixel can be set to 0, but it is not re-compressed.</p>
<h3>Convert RAW to DICOM</h3>
<p>Recognized extension is .raw, .rawl, .gray or .rgb (case insensitive)</p>
<pre>
$ gdcmimg --size 512,512 --depth 16 -i input.raw -o output.dcm
</pre>
<p>the image will be a Secondary Capture.</p><p>When the input is 3 component, one need to specify explicitly the Samples Per Pixel:</p>
<pre>
$ gdcmimg --size 512,512 --spp 3  input_rgb.raw output_rgb.dcm
</pre>
<p>When the filename contains .rgb as file extension output is automatically recognized as RGB no need to specify --spp</p>
<pre>
$ gdcmimg --size 512,512 input.rgb output_rgb.dcm
</pre>
<p>You can use the <strong>dd</strong> cmd line to skip any header you would like to discard, for instance, if you would like to skip the first 108 bytes, simply do:</p>
<pre>
$ dd skip=108 bs=1 if=input.raw of=output.raw
</pre>
<p>.raw and .rawl extension are equivalent. You need to explicitly specify the endianess manually:</p>
<pre>
$ gdcmimg --endian MSB --size 512,512 --depth 16 -i input.raw -o output.dcm
</pre>
<p>or</p>
<pre>
$ gdcmimg --endian LSB --size 512,512 --depth 16 -i input.raw -o output.dcm
</pre>

<h3>Convert PGM/PNM/PPM to DICOM</h3>
<p>Recognized extensions are .pgm, .pnm, .ppm (case insensitive)</p>
<pre>
$ gdcmimg -i input.pgm -o output.dcm
</pre>
<p>the image will be a Secondary Capture</p>
<h3>Convert RLE to DICOM</h3>
<p>Recognized extension is .rle (case insensitive)</p>
<pre>
$ gdcmimg --size 512,512 --depth 16 -i input.rle -o output.dcm
</pre>
<p>the image will be a Secondary Capture</p>
<h3>Convert JPEG to DICOM</h3>
<p>Recognized extensions are .jpg, .jpeg, .ljpg, .ljpeg (case insensitive)</p>
<pre>
$ gdcmimg -i input.ljpeg -o output.dcm
</pre>
<p>the image will be a Secondary Capture</p>
<h3>Convert J2K to DICOM</h3>
<p>Recognized extensions are .j2k, .jp2, .jpc, jpx, j2c (case insensitive)</p>
<pre>
$ gdcmimg -i input.j2k -o output.dcm
</pre>
<p>the image will be a Secondary Capture.</p><p>All Pixel informations (Bits Stored/Allocated...) will be derived from the image itself, and not from the command line options.</p>
<h3>Specifying a SOP Class UID</h3>
<p>Instead of the default Secondary Capture Image Storage, one may want to specify, say VL Photographic Image Storage.</p>
<pre>
$ gdcmimg --sop-class-uid 1.2.840.10008.5.1.4.1.1.77.1.4 input.jpg output.dcm
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Multiple Files</h2>
        <div class="sectioncontent">
<p>gdcmimg handle nicely a set of files (for instance jpeg):</p>
<pre>
$ gdcmimg 1.jpg 2.jpg 3.jpg 4.jpg output.dcm
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Start Offset</h2>
        <div class="sectioncontent">
<p>In some case, one may want to create a 2D slice from an arbitrary volume (e.g 3D). In which case --offset becomes handy:</p>
<pre>
$ gdcmimg --offset 4954104330 --size 1673,1673 Input3D_1673_1673_1775.raw slice_1770.dcm
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Warning</h2>
        <div class="sectioncontent">
<p>There are a couple of issues with gdcmimg implementation:</p><p>For RAW file, one should pay attention that when using --endian MSB the Pixel Data will be encapsulated as is (not touched by gdcmimg). Therefore the only possible transfer syntax available is Implicit VR Big Endian DLX (G.E Private). GDCM does handle this private Transfer Syntax. So if you need to convert this Transfer Syntax to another one (and allow Pixel Data manipulation), you can use:</p>
<pre>
$ gdcmconv --raw --force input_big_endian_dlx.raw -o output_implicit_vr_little_endian.dcm
</pre>
<p>For JFIF file and JP2 file (with header) the header is copied into the Pixel Data element which is illegal for JP2. Use gdcmconv to properly re-encode a JP2/JFIF file into J2K/JPG.</p>
<pre>
$ gdcmimg input.jp2 output_jp2.dcm
$ gdcmconv --j2k --force output_jp2.dcm output_j2k.dcm
</pre>
<p>For RLE file, no check is done for crossing the row boundary. It is recommended to use gdcmconv --rle to re-encode into a proper RLE file in case of doubt.</p><p>Of course if the compression is not ok with your setup, you can always de-encapsulated the DICOM file (typically JPEG) to a non-encapsulated form, using gdcmconv:</p>
<pre>
$ gdcmconv --raw input_jpeg.dcm output_raw.dcm
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gdcmimg&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/gdcmdump.1.html"><strong>gdcmdump</strong>(1)</a>, <a href="../man1/gdcm2vtk.1.html"><strong>gdcm2vtk</strong>(1)</a>, <a href="../man1/gdcmraw.1.html"><strong>gdcmraw</strong>(1)</a>, <strong>convert</strong>(1), <strong>dd</strong>(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2006-2011 Mathieu Malaterre</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gdcmgendir.1.html"><span aria-hidden="true">&larr;</span> gdcmgendir.1: Tool to generate a dicomdir file from a file-set.</a></li>
   <li class="next"><a href="gdcminfo.1.html">gdcminfo.1: Display meta info about the input dicom file. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
