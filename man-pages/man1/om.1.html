<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>om: Control openmoko phone hardware</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Control openmoko phone hardware">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="om (1) manual">
  <meta name="twitter:description" content="Control openmoko phone hardware">
  <meta name="twitter:image" content="https://www.carta.tech/images/omhacks-om-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/om.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="om (1) manual" />
  <meta property="og:description" content="Control openmoko phone hardware" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/omhacks-om-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">om<small> (1)</small></h1>
        <p class="lead">Control openmoko phone hardware</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/om.1.html">
      <span itemprop="name">om: Control openmoko phone hardware</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/omhacks/">
      <span itemprop="name">omhacks</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/om.1.html">
      <span itemprop="name">om: Control openmoko phone hardware</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>om</strong> <em>help</em></p><p><strong>om</strong> <em>--help</em></p><p><strong>om</strong> <em>--version</em></p><p><strong>om</strong> <em>sysfs name </em>[<em>name</em>...]</p><p><strong>om</strong> <em>backlight brightness </em>[<em>0-100</em>]</p><p><strong>om</strong> <em>backlight</em></p><p><strong>om</strong> <em>backlight get-max</em></p><p><strong>om</strong> <em>backlight &lt;brightness&gt;</em></p><p><strong>om</strong> <em>touchscreen lock</em></p><p><strong>om</strong> <em>screen power </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>screen resolution </em>[<em>normal|qvga-normal</em>]</p><p><strong>om</strong> <em>screen glamo-bus-timings </em>[<em>4-4-4|2-4-2</em>]</p><p><strong>om</strong> <em>bt </em>[<em>--swap</em>] <em>power </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>gsm </em>[<em>--swap</em>] <em>power </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>gsm flowcontrol </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>gps </em>[<em>--swap</em>] <em>power </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>gps </em>[<em>--swap</em>] <em>keep-on-in-suspend </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>gps send-ubx &lt;class&gt; &lt;type&gt; </em>[<em>payload_byte0</em>] [<em>payload_byte1</em>] ...</p><p><strong>om</strong> <em>wifi </em>[<em>--swap</em>] <em>power </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>wifi maxperf &lt;iface&gt; </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>wifi keep-bus-on-in-suspend </em>[<em>1/0</em>]</p><p><strong>om</strong> <em>battery temperature</em></p><p><strong>om</strong> <em>battery energy</em></p><p><strong>om</strong> <em>battery consumption</em></p><p><strong>om</strong> <em>battery charger-limit </em>[<em>0-500</em>]</p><p><strong>om</strong> <em>power</em></p><p><strong>om</strong> <em>power all-off</em></p><p><strong>om</strong> <em>resume-reason</em></p><p><strong>om</strong> <em>resume-reason contains &lt;val&gt;</em></p><p><strong>om</strong> <em>led &lt;name&gt;</em></p><p><strong>om</strong> <em>led &lt;name&gt; &lt;brightness&gt;</em></p><p><strong>om</strong> <em>led &lt;name&gt; &lt;brightness&gt; timer &lt;ontime&gt; &lt;offtime&gt;</em></p><p><strong>om</strong> <em>uevent dump</em></p><p><strong>om</strong> <em>usb mode </em>[<em>device|host</em>]</p><p><strong>om</strong> <em>usb charger-mode </em>[<em>charge-battery|power-usb</em>]</p><p><strong>om</strong> <em>usb charger-limit </em>[<em>0|100|500</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>om provides a command line interface to various OpenMoko specific pieces of hardware. Note that om talks directly to the kernel and might not properly co-exist with fso-frameworkd that also wants to control the same pieces of hardware. However, using om to read the state of the hardware should be safe even when using fso-frameworkd.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>om backlight brightness [0-100]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets backlight brightness. Units are percentage of maximum brightness. Reports true brightness only if the screen has not been blanked with <strong>om screen power 0</strong>.</p>
  </dd>
  <dt>
    <p><strong>om backlight &lt;brightness&gt;</strong></p>
  </dt>
  <dd>
    <p>Set backlight brightness. Units are driver specific, maximum value can be queried with <strong>om backlight get-max</strong>. This interface is not recommended but is kept for compatibility reasons.</p>
  </dd>
  <dt>
    <p><strong>om backlight get-max</strong></p>
  </dt>
  <dd>
    <p>Get maximum value of brightness. Typically the maximum value is 255 under Linux 2.6.29 and 63 under Linux 2.6.34.</p>
  </dd>
  <dt>
    <p><strong>om backlight</strong></p>
  </dt>
  <dd>
    <p>Read backlight brightness. This is an integer between zero and what <strong>om backlight get-max</strong> returns. Reports true brightness only if the screen has not been blanked with <strong>om screen power 0</strong>. This interface is not recommended but is kept for compatibility reasons.</p>
  </dd>
  <dt>
    <p><strong>om touchscreen lock</strong></p>
  </dt>
  <dd>
    <p>Locks touchscreen and waits for any signal to unlock it. This is useful when you want to keep the phone running in a pocket and don't want the backlight to turn on every time you accidentally touch the screen. Locking is done in a way that does not depend on X so if X server crashes and restarts your screen will still stay locked.</p>
  </dd>
  <dt>
    <p><strong>om screen power [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the power state of the screen. Note that Xorg and fso-frameworkd do not know how to read the power status of the screen (frameworkd reads it on startup only). If Xorg turns the screen and after that you turn the screen off with omhacks then touching the screen won't turn the screen on (Xorg thinks the screen is still on and does not bother to try to power it on).</p>
  </dd>
  <dt>
    <p><strong>om screen resolution [normal|qvga-normal]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the screen resolution. This lowlevel interface should not be used when Xorg is running but is useful when using applications that can draw directly to the framebuffer (like mplayer -vo fbdev). The argument <strong>normal</strong> means 480x640 and <strong>qvga-normal</strong> means 240x320. After you have changed the screen resolution you also need to change the framebuffer resolution with e.g. the fbset tool using for example the following /etc/fb.modes entries:</p><table class="table table-striped">
<tr>
<th>mode "480x640"</th></tr>

<tr>
<td>  geometry 480 640 480 1280 16</td></tr>

<tr>
<td>  timings 40816 8 16 2 16 8 2</td></tr>

<tr>
<td>  rgba 5/11,6/5,5/0,0/0</td></tr>

<tr>
<td>endmode</td></tr>

<tr>
<td>mode "240x320"</td></tr>

<tr>
<td>  geometry 240 420 240 320 16</td></tr>

<tr>
<td>  timings 100000 8 88 2 2 8 2</td></tr>

<tr>
<td>  accel false</td></tr>

<tr>
<td>endmode</td></tr>
</table>
  </dd>
  <dt>
    <p><strong>om screen glamo-bus-timings [4-4-4|2-4-2]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the timings of the memory bus between the CPU and the glamo graphics chip. Numbers are SRAM interface timings of the CPU. According to http://lists.openmoko.org/pipermail/community/2010-July/062495.html using 2-4-2 is more appropriate, view that article and following discussion for more details.</p>
  </dd>
  <dt>
    <p><strong>om bt [--swap] power [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the power state of bluetooth. Bluetooth is connected to USB bus so it might take a while for it to appear in lsusb and be usable after power on.</p>
  </dd>
  <dt>
    <p><strong>om power</strong></p>
  </dt>
  <dd>
    <p>List the power status of various devices.</p>
  </dd>
  <dt>
    <p><strong>om power all-off</strong></p>
  </dt>
  <dd>
    <p>Disable power to bluetooth, GSM, GPS and WLAN.</p>
  </dd>
  <dt>
    <p><strong>om gsm [--swap] power [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the power state of GSM.</p>
  </dd>
  <dt>
    <p><strong>om gsm flowcontrol [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the state of GSM flowcontrol. When flowcontrol is enabled GSM chip will generate an interrupt when it has data and will not try to send it over serial port until flowcontrol is disabled. Enabling flowcontrol before suspend and disabling it after resume is required to make sure no data is lost during suspend.</p>
  </dd>
  <dt>
    <p><strong>om gps [--swap] power [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the power state of GPS.</p>
  </dd>
  <dt>
    <p><strong>om gps [--swap] keep-on-in-suspend [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the flag that causes GPS to stay powered on during suspend. This is useful if you want to keep GPS fix during suspend.</p>
  </dd>
  <dt>
    <p><strong>om gps send-ubx &lt;class&gt; &lt;type&gt; [payload_byte0] [payload_byte1] ...</strong></p>
  </dt>
  <dd>
    <p>Send arbitrary UBX protocol command to the GPS chip. Please read "ANTARIS_Protocol_Specification(GPS.G3-X-03002).chm" to understand the protocol. Here are examples of commands that are tested to work:</p><table class="table table-striped">
<tr>
<th>class</th>
<th>type</th>
<th>payload</th>
<th>description</th></tr>

<tr>
<td>06</td>
<td>01</td>
<td>f0 01 00</td>
<td>disable GPGLL messages</td></tr>

<tr>
<td>06</td>
<td>01</td>
<td>f0 02 00</td>
<td>disable GPGSA messages</td></tr>

<tr>
<td>06</td>
<td>01</td>
<td>f0 03 00</td>
<td>disable GPGSV messages</td></tr>

<tr>
<td>06</td>
<td>01</td>
<td>f0 05 00</td>
<td>disable GPGTG messages</td></tr>

<tr>
<td>06</td>
<td>01</td>
<td>f0 08 00</td>
<td>disable GPZDA messages</td></tr>

<tr>
<td>06</td>
<td>08</td>
<td>fa 00 01 00 00 00</td>
<td>report position 4 times/s</td></tr>

<tr>
<td>06</td>
<td>08</td>
<td>f4 01 01 00 00 00</td>
<td>report position 2 times/s</td></tr>
</table>
  </dd>
  <dt>
    <p><strong>om wifi [--swap] power [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the power state of WLAN.</p>
  </dd>
  <dt>
    <p><strong>om wifi maxperf &lt;iface&gt; [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the maxperf mode of WLAN. Enabling this increases energy consumption but lowers latency. Note that root privileges are not currently required for tuning this wifi parameter so a local user can cause DoS by constantly disabling maximum performance mode.</p>
  </dd>
  <dt>
    <p><strong>om wifi keep-bus-on-in-suspend [1/0]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the the flag that controls whether the MCI bus between wifi and CPU will be kept powered on during suspend. You need to keep it powered on if you want to use wake-on-wireless.</p>
  </dd>
  <dt>
    <p><strong>om battery temperature</strong></p>
  </dt>
  <dd>
    <p>Reads battery temperature. Units are degrees Centigrade.</p>
  </dd>
  <dt>
    <p><strong>om battery energy</strong></p>
  </dt>
  <dd>
    <p>Reads the current energy percentage of the battery.</p>
  </dd>
  <dt>
    <p><strong>om battery consumption</strong></p>
  </dt>
  <dd>
    <p>Reads the current energy consumption as measure by the battery. Units are microamperes. Negative value indicates that battery is being charged.</p>
  </dd>
  <dt>
    <p><strong>om battery charger-limit [0-500]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the upper limit for battery charger current. Units are milliamperes.  Normally USB charger limit and battery charger limit have the same value. However, sometimes it is useful to charger battery very slowly or not at all and still power rest of the system from USB. This allows one for example to keep battery at its recommended storage capacity of 40% without having to physically remove the battery.  Note that kernel will round the limit to nearest suitable value which is usually a few milliamperes lower than the supplied limit. Changing USB charger limit will reset also this limit to the same value so you must first set the USB charger limit and only then the battery charger limit.</p>
  </dd>
  <dt>
    <p><strong>om resume-reason</strong></p>
  </dt>
  <dd>
    <p>Read the reason for the most recent resume. If there are multiple resume reasons they are separated by newlines. Possible values include (but are not limited to)</p><table class="table table-striped">
<tr>
<th>EINT01_GSM</th></tr>

<tr>
<td>EINT05_WLAN</td></tr>

<tr>
<td>EINT09_PMU:button</td></tr>

<tr>
<td>EINT09_PMU:usb_connect</td></tr>

<tr>
<td>EINT09_PMU:usb_disconnect</td></tr>

<tr>
<td>EINT09_PMU:rtc_alarm</td></tr>

<tr>
<td>EINT09_PMU:low_battery</td></tr>
</table>
  </dd>
  <dt>
    <p><strong>om resume-reason contains &lt;val&gt;</strong></p>
  </dt>
  <dd>
    <p>Checks if resume reasons include the given string.</p>
  </dd>
  <dt>
    <p><strong>om led</strong></p>
  </dt>
  <dd>
    <p>Lists the state of all LED devices. The printed names are native kernel names and can change between kernel versions.</p>
  </dd>
  <dt>
    <p><strong>om led &lt;name&gt;</strong></p>
  </dt>
  <dd>
    <p>Lists the state of the given LED device. In addition to native kernel names you can also use the aliases vibrator, power_orange, power_blue and aux_red to get portability across different kernel versions.</p>
  </dd>
  <dt>
    <p><strong>om led &lt;name&gt; &lt;brightness&gt;</strong></p>
  </dt>
  <dd>
    <p>Sets the brightness of the given LED device to the given brightness. Brightness is an integer from 0 to 255 but only the vibrator device really cares about the brightness value. See <strong>om</strong> led for a list of supported aliases.</p>
  </dd>
  <dt>
    <p><strong>om led &lt;name&gt; &lt;brightness&gt; timer &lt;ontime&gt; &lt;offtime&gt;</strong></p>
  </dt>
  <dd>
    <p>In addition to above also makes the LED blink. Ontime and offtime are in milliseconds. See <strong>om led</strong> for a list of supported aliases.</p>
  </dd>
  <dt>
    <p><strong>om uevent dump</strong></p>
  </dt>
  <dd>
    <p>Dump uevent events to stdout.</p>
  </dd>
  <dt>
    <p><strong>om usb mode [device|host]</strong></p>
  </dt>
  <dd>
    <p>Read or set the USB mode. In device mode the phone can talk to USB hosts (PCs or phones in host mode). In host mode the phone can talk to USB devices. See also the <strong>om usb charger-mode</strong> option.</p>
  </dd>
  <dt>
    <p><strong>om usb charger-mode [charge-battery|power-usb]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the USB charger mode. Normally you want to charge the battery in device mode and power the USB bus in host mode but it is possible to for example use an external battery power the USB bus so that the phone can be in host mode and still charge itself over USB.</p>
  </dd>
  <dt>
    <p><strong>om usb charger-limit [0|100|500]</strong></p>
  </dt>
  <dd>
    <p>Reads or sets the charger limit of USB. Units are in milliamperes and control the current that the phone will draw from the USB bus. When the phone is in device mode and some gadget driver is loaded it will negotiate the highest allowed charging current automatically. However, if you are using a dumb external USB battery it might be necessary to force larger limit than the default of 100 mA. Do not set the limit to be too large if your charger can not handle it!</p>
  </dd>
  <dt>
    <p><strong>om sysfs name [name...]</strong></p>
  </dt>
  <dd>
    <p>Shows the sysfs path associated with internal <strong>om</strong> path. This option is only useful for debugging <strong>om</strong> itself. Examples of valid arguments include actual_brightness, battery, brightness, chg_curlim, max_brightness, pm-bt, pm-gps, pm-gsm, pm-wlan, resume_reason, resume_reason2, screen_resolution, usb_charger_mode, usb_mode.</p>
  </dd>
  <dt>
    <p><strong>--help</strong></p>
  </dt>
  <dd>
    <p>print this help message</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>print version and exit</p>
  </dd>
  <dt>
    <p><strong>--swap</strong></p>
  </dt>
  <dd>
    <p>set new value and print old value</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="olwmslave.1.html"><span aria-hidden="true">&larr;</span> olwmslave.1: Helper program for olwm</a></li>
   <li class="next"><a href="om-led.1.html">om-led.1: Control openmoko phone leds <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
