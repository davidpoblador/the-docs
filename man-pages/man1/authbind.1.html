<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>authbind: Bind sockets to privileged ports without root</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Bind sockets to privileged ports without root">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="authbind (1) manual">
  <meta name="twitter:description" content="Bind sockets to privileged ports without root">
  <meta name="twitter:image" content="https://www.carta.tech/images/authbind-authbind-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/authbind.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="authbind (1) manual" />
  <meta property="og:description" content="Bind sockets to privileged ports without root" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/authbind-authbind-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">authbind<small> (1)</small></h1>
        <p class="lead">Bind sockets to privileged ports without root</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/authbind.1.html">
      <span itemprop="name">authbind: Bind sockets to privileged ports without root</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/authbind/">
      <span itemprop="name">authbind</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/authbind.1.html">
      <span itemprop="name">authbind: Bind sockets to privileged ports without root</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>authbind</strong> [<em>options</em>] <em>program</em> [<em>argument</em> ...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>authbind</strong> allows a program which does not or should not run as root to bind to low-numbered ports in a controlled way.</p><p>You must invoke the program using <strong>authbind</strong>.  <strong>authbind</strong> will set up some environment variables, including an <strong>LD_PRELOAD</strong>, which will allow the program (including any subprocesses it may run) to bind to low-numbered (&lt;512) ports if the system is configured to allow this.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--deep</strong></p>
  </dt>
  <dd>
    <p>Normally, <strong>authbind</strong> arranges for only the program which it directly invokes to be affected by its special version of <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a>. If you specify <strong>--deep</strong> then all programs which that program invokes directly or indirectly will be affected, so long as they do not unset the environment variables set up by <strong>authbind</strong>.</p>
  </dd>
  <dt>
    <p><strong>--depth</strong><em> levels</em></p>
  </dt>
  <dd>
    <p>Causes <strong>authbind</strong> to affect programs which are <em>levels</em> deep in the calling graph.  The default is <strong>--depth 1</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESS CONTROL</h2>
        <div class="sectioncontent">
<p>Access to low numbered ports is controlled by permissions and contents of files in a configuration area, <strong>/etc/authbind</strong>.</p><p>Firstly, <strong>/etc/authbind/byport/</strong><em>port</em> is tested.  If this file is accessible for execution to the calling user, according to <a href="../man2/access.2.html"><strong>access</strong>(2)</a>, then binding to the port is authorised.  If the file can be seen not to exist (the existence check returns <strong>ENOENT</strong>) then further tests will be used to find authorisation; otherwise, binding is not authorised, and the <strong>bind</strong> call will return with the <strong>errno</strong> value from the <a href="../man2/access.2.html"><strong>access</strong>(2)</a> call, usually <strong>EACCES</strong> (<em>Permission denied</em>).</p><p>Secondly, if that test fails to resolve the matter, <strong>/etc/authbind/byaddr/</strong><em>addr</em><strong>,</strong><em>port</em> (any protocol) or failing that <strong>/etc/authbind/byaddr/</strong><em>addr</em><strong>:</strong><em>port</em> (IPv4 only) is tested, in the same manner as above.  Here <em>addr</em> is as from <strong>inet_ntop</strong>, and <em>port</em> is the (local) TCP or UDP port number, expressed as an unsigned integer in the minimal non-zero number of digits.</p><p>Thirdly, for IPv6 only: since the textual representation from <strong>inet_ntop</strong> is complicated to predict, a variant of <em>addr</em> is also tested which does not use the double colon abbreviation: each 16-byte chunk expressed in the minimal nonzero number of hex digits (i.e. with leading zeroes removed), the chunks being separated by colons as is conventional.</p><p>Fourthly, if the question is still unresolved, the file <strong>/etc/authbind/byuid/</strong><em>uid</em> will be opened and read.  If the file does not exist then the binding is not authorised and <strong>bind</strong> will return <strong>EPERM</strong> (<em>Operation not permitted</em>, or <em>Not owner</em>). If the file does exist it will be searched for a line of the form</p>
<pre>
<em>addrmin</em>[<strong>-</strong><em>addrmax</em>]<strong>,</strong><em>portmin</em>[<strong>-</strong><em>portmax</em>]
<em>addr</em>[<strong>/</strong><em>length</em>]<strong>,</strong><em>portmin</em>[<strong>-</strong><em>portmax</em>]
<em>addr4</em><strong>/</strong><em>length</em><strong>:</strong><em>portmin</em><strong>,</strong><em>portmax</em>
</pre>
<p>matching the request. The first form requires that the address lies in the relevant range (inclusive at both ends). The second and third forms require that the initial <em>length</em> bits of <em>addr</em> match those in the proposed <strong>bind</strong> call.  The third form is only available for IPv4 since IPv6 addresses contain colons. Addresses in the byuid file can be in any form acceptable to inet_pton.  In all cases the proposed port number must lie is in the inclusive range specified.  If such a line is found then the binding is authorised. Otherwise it is not, and <strong>bind</strong> will fail with <strong>ENOENT</strong> (<em>No such file or directory</em>).</p><p>If a read error occurs, or the directory <strong>/etc/authbind</strong> cannot be accessed, then not only will <strong>bind</strong> fail, but an error message will be printed to stderr.  Unrecognised lines in <strong>/etc/authbind/byuid/</strong><em>uid</em> files are silently ignored, as are lines whose <em>addr</em> has non-zero bits more than <em>length</em> from the top or where some <em>min</em> is larger than <em>max</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>So for example an attempt by uid 432 to bind to port 80 of address [2620:106:e002:f00f::21] would result in authbind calling <a href="../man2/access.2.html"><strong>access</strong>(2)</a></em> on, in order,</p><p><strong>/etc/authbind/byport/80</strong></p><p><strong>/etc/authbind/byaddr/2620:106:e002:f00f::21,80</strong></p><p><strong>/etc/authbind/byaddr/2620:106:e002:f00f:0:0:0:21,80</strong></p><p>If none of these files exist, authbind will read</p><p><strong>/etc/authbind/byuid/432</strong></p><p>and search for a line to permit the relevant access; examples of lines which would do so are:</p><p><strong>2620:106:e002:f00f::21,80</strong></p><p><strong>::/0,80</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PORTS 512-1023</h2>
        <div class="sectioncontent">
<p>Authorising binding to ports from 512 to 1023 inclusive is not recommended.  Some protocols (including some versions of NFS) authorise clients by seeing that they are using a port number in this range.  So by authorising a program to be a server for such a port, you are also authorising it to impersonate the whole host for those protocols.</p><p>To make sure that this isn't done by accident, if the port number requested is in the range 512-1023, authbind will expect the permission files to have an additional <strong>!</strong> at the start of their leafname.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MECHANISM</h2>
        <div class="sectioncontent">
<p>The shared library loaded using <strong>LD_PRELOAD</strong> overrides the <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a> system call.  When a program invoked via <strong>authbind</strong> calls <strong>bind</strong> to bind a socket to a low-numbered TCP/IP port, and if the program doesn't already have an effective uid of 0, the version of <strong>bind</strong> supposed by <strong>authbind</strong> forks and executes a setuid-root helper program.  For non-TCP/IP sockets, high-numbered ports, or programs which are already root, <strong>authbind</strong> passes the call to the original <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a> system call, which is found using <a href="../man3/dlsym.3.html"><strong>dlsym</strong>(3)</a> with the handle <strong>RTLD_NEXT</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERROR HANDLING</h2>
        <div class="sectioncontent">
<p>Usually the normal C error handling mechanisms apply.  If <strong>authbind</strong> cannot find the program it has been asked to execute it will print a message to stderr and exit with code 255.</p><p>The helper program usually reports back to the shared library with an exit status containing an <strong>errno</strong> value which encodes whether the <strong>bind</strong> was permitted and successful.  This will be returned to the calling program in the usual way.</p><p>In the case of apparent configuration or other serious errors the library and/or the helper program may cause messages to be printed to the program's stderr, was well as returning -1 from <strong>bind</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p><strong>authbind</strong> currently only supports IPv4 and IPv6 sockets. Programs which open other kinds of sockets will not benefit from <strong>authbind</strong>, but it won't get in their way.</p><p>The use of <strong>LD_PRELOAD</strong> makes an <strong>authbind</strong> installation specific to a particular C library.  This version is for GNU/Linux libc6 (glibc2).</p><p><strong>authbind</strong> may not operate correctly with multithreaded programs.  It is inherently very difficult (if not impossible) to perform the kind of trickery that authbind does while preventing all undesirable interactions between authbind's activities and those of (say) a threading runtime system.</p><p>It is quite possible that <strong>authbind</strong> and other programs and facilities which use <strong>LD_PRELOAD</strong> may interfere with each other, causing unpredictable behaviour or even core dumps. <strong>authbind</strong> is known sometimes not to work correctly with <strong>fakeroot</strong>, for example (even supposing it could be determined what `correctly' means in this context).</p><p><strong>authbind</strong> is ineffective with setuid programs, because they do not honour <strong>LD_PRELOAD</strong> references outside the system directories, for security reasons.  (In fact, setuid programs should not honour <strong>LD_PRELOAD</strong> at all.) Of course a setuid-root program does not need <strong>authbind</strong>, but it might be useful to apply it to program which are setuid to another user or setgid.  If the author or builder of such a programs wishes it to use authbind they could have it load the <strong>libauthbind</strong> library explicitly rather than via <strong>LD_PRELOAD</strong>.</p><p>Some programs may have trouble because <strong>authbind</strong> spawns a child process `under their feet', causing (for example) a <a href="../man2/fork.2.html"><strong>fork</strong>(2)</a> to happen and <strong>SIGCHLD</strong> signal to be delivered.  Unfortunately the Unix API does not make it possible to deal with this problem in a sane way.</p><p>The access control configuration scheme is somewhat strange.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES AND ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/usr/lib/authbind/libauthbind.so.1.0</em></p>
  </dt>
  <dd>
    <p>The shared library which <strong>authbind</strong> causes to be loaded using <strong>LD_PRELOAD</strong>, and which actually implements the diversion of <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a> to an external program.</p>
  </dd>
  <dt>
    <p><em>LD_PRELOAD</em></p>
  </dt>
  <dd>
    <p>The variable used by the dynamic linker when starting dynamically linked programs and deciding which shared libraries to load and modifed by the <strong>authbind</strong> program to allow it to override the usual meaning of <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a><strong>.</strong></p>
  </dd>
  <dt>
    <p><em>AUTHBIND_LIB</em></p>
  </dt>
  <dd>
    <p>If set, forces <strong>authbind</strong> to use its value as the path to the shared library to put in <strong>LD_PRELOAD</strong>, instead of the compiled-in value.  In any case, unless <strong>--deep</strong> was specified, <strong>authbind</strong> will set this variable to the name of the library actually added to <strong>LD_PRELOAD</strong>, so that the library can find and remove the right entry.</p>
  </dd>
  <dt>
    <p><em>AUTHBIND_LEVELS</em></p>
  </dt>
  <dd>
    <p>This variable is set by <strong>authbind</strong> to the number of levels left from the <strong>--depth</strong> or <strong>--deep</strong> option, minus one.  It is decremented during <strong>_init</strong> by the library on each program call, and the library will remove itself from the <strong>LD_PRELOAD</strong> when it reaches zero.  The special value <strong>y</strong> means <strong>--deep</strong> was specified.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO authbind&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man2/bind.2.html"><strong>bind</strong>(2)</a>, <a href="../man8/authbind-helper.8.html"><strong>authbind-helper</strong>(8)</a>, <a href="../man3/dlsym.3.html"><strong>dlsym</strong>(3)</a>, <a href="../man8/ld.so.8.html"><strong>ld.so</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>authbind</strong> and this manpage were written by Ian Jackson.  They are Copyright (C)1998,2012 by him and released under the GNU General Public Licence; there is NO WARRANTY.  See <strong>/usr/doc/authbind/copyright</strong> and <strong>/usr/doc/copyright/GPL</strong> for details.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="auth-relaytest.1.html"><span aria-hidden="true">&larr;</span> auth-relaytest.1: Attempt to use authenticated smtp to relay to a dsbl-compliant host</a></li>
   <li class="next"><a href="authpasswd.1.html">authpasswd.1: Generate login passwords <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
