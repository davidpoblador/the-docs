<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ctdbd: The ctdb cluster daemon</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The ctdb cluster daemon">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ctdbd (1) manual">
  <meta name="twitter:description" content="The ctdb cluster daemon">
  <meta name="twitter:image" content="https://www.carta.tech/images/ctdb-ctdbd-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ctdbd.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ctdbd (1) manual" />
  <meta property="og:description" content="The ctdb cluster daemon" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ctdb-ctdbd-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ctdbd<small> (1)</small></h1>
        <p class="lead">The ctdb cluster daemon</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ctdbd.1.html">
      <span itemprop="name">ctdbd: The ctdb cluster daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ctdb/">
      <span itemprop="name">ctdb</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ctdbd.1.html">
      <span itemprop="name">ctdbd: The ctdb cluster daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ctdbd</strong> [<em>OPTION</em>...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>ctdbd is the main CTDB daemon.</p><p>Note that ctdbd is not usually invoked directly. It is invoked via <a href="../man1/ctdbd_wrapper.1.html"><strong>ctdbd_wrapper</strong>(1)</a> or via the initscript.</p><p>See <strong>ctdb</strong>(7) for an overview of CTDB.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERAL OPTIONS</h2>
        <div class="sectioncontent">
<p>-d, --debug=<em>DEBUGLEVEL</em></p><p>This option sets the debug level to DEBUGLEVEL, which controls what will be written to the logfile. The default is 0 which will only log important events and errors. A larger number will provide additional logging.</p><p>See the DEBUG LEVELS section in <strong>ctdb</strong>(7) for more information.</p><p>--dbdir=<em>DIRECTORY</em></p><p>DIRECTORY on local storage where ctdbd keeps a local copy of TDB databases. This directory is local for each node and should not be stored on the shared cluster filesystem.</p><p>This directory would usually be /var/lib/ctdb</p><p>--dbdir-persistent=<em>DIRECTORY</em></p><p>DIRECTORY on local storage where ctdbd keeps a local copy of persistent TDB databases. This directory is local for each node and should not be stored on the shared cluster filesystem.</p><p>This directory would usually be /var/lib/ctdb/persistent</p><p>--dbdir-state=<em>DIRECTORY</em></p><p>DIRECTORY on local storage where ctdbd keep internal state TDB files. This directory is local for each node and should not be stored on the shared cluster filesystem.</p><p>This directory would usually be /var/lib/ctdb/state</p><p>--event-script-dir=<em>DIRECTORY</em></p><p>DIRECTORY where the CTDB event scripts are stored. See the EVENT SCRIPTS section in <strong>ctdb</strong>(7) for more information.</p><p>Default is <strong>CTDB_BASE</strong>/events.d, so usually /etc/ctdb/events.d, which is part of the CTDB installation.</p><p>--logfile=<em>FILENAME</em></p><p>FILENAME where ctdbd will write its log. This is usually /var/log/log.ctdb.</p><p>--log-ringbuf-size=<em>NUM</em></p><p>Set the size of the log ringbuffer to NUM entries.</p><p>CTDB uses an in-memory ringbuffer containing NUM most recent log entries for all log levels (except DEBUG). The ringbugger can be useful for extracting detailed logs even if some entries are not logged to the regular logs.</p><p>Use the <strong>ctdb getlog</strong> command to retrieve log entries from the ringbuffer.</p><p>--lvs</p><p>This option is used to activate the LVS capability on a CTDB node. Please see the LVS section in <strong>ctdb</strong>(7) for more information.</p><p>--max-persistent-check-errors=<em>NUM</em></p><p>NUM specifies the maximum number of health check failures allowed for persistent databases during startup.</p><p>The default value is 0. Setting this to non-zero allows a node with unhealthy persistent databases to startup and join the cluster as long as there is another node with healthy persistent databases.</p><p>--nlist=<em>FILENAME</em></p><p>FILENAME containing a list of the private IP addresses, one per line, for each node in the cluster. This file <em>must be the same on each node</em> in the cluster.</p><p>Default is <strong>CTDB_BASE</strong>/nodes, so usually /etc/ctdb/nodes.</p><p>--no-lmaster</p><p>This argument specifies that this node can NOT become an lmaster for records in the database. This means that it will never show up in the vnnmap. This feature is primarily used for making a cluster span across a WAN link and use CTDB as a WAN-accelerator.</p><p>Please see the REMOTE CLUSTER NODES section in <strong>ctdb</strong>(7) for more information.</p><p>--no-recmaster</p><p>This argument specifies that this node can NOT become a recmaster for the database. This feature is primarily used for making a cluster span across a WAN link and use CTDB as a WAN-accelerator.</p><p>Please see the REMOTE CLUSTER NODES section in <strong>ctdb</strong>(7) for more information.</p><p>--notification-script=<em>FILENAME</em></p><p>FILENAME specifying a script to be invoked by ctdbd when certain state changes occur.</p><p>This file is usually /etc/ctdb/notify.sh.</p><p>Please see the NOTIFICATION SCRIPT section in <strong>ctdb</strong>(7) for more information.</p><p>--pidfile=<em>FILENAME</em></p><p>FILENAME for file containing process ID of main CTDB daemon. This file is automatically created and removed by CTDB.</p><p>The default is to not create a PID file.</p><p>--public_addresses=<em>FILENAME</em></p><p>FILENAME specifying a file containing the public IP addresses to use on the cluster when CTDB should use IP takeover. This file contains a list of IP addresses, netmasks and interfaces. CTDB will distribute these public IP addresses appropriately across the available nodes.</p><p>The IP addresses specified in this file can differ across nodes.</p><p>This is usually the file /etc/ctdb/public_addresses</p><p>--public-interface=<em>INTERFACE</em></p><p>INTERFACE on which to attach public IP addresses or on which to attach the single-public-ip when used.</p><p>When using public IP addresses, this is only required if interfaces are not explicitly specified in the public addresses file.</p><p>--reclock=<em>FILENAME</em></p><p>FILENAME is the name of the recovery lock file stored in <em>shared storage</em> that ctdbd uses to prevent split brains from occuring.</p><p>It is possible to run CTDB without a recovery lock file, but then there will be no protection against split brain if the cluster/network becomes partitioned. Using CTDB without a reclock file is strongly discouraged.</p><p>--single-public-ip=<em>IPADDR</em></p><p>IPADDR specifies the single IP that CTDB will use in conjuction with LVS.</p><p>Please see the LVS section in <strong>ctdb</strong>(7) for more information.</p><p>--start-as-disabled</p><p>This makes ctdbd start in the DISABLED state.</p><p>To allow the node to host public IP addresses and services, it must be manually enabled using the <strong>ctdb enable</strong> command.</p><p>Please see the NODE STATES section in <strong>ctdb</strong>(7) for more information about the DISABLED state.</p><p>--start-as-stopped</p><p>This makes ctdbd start in the STOPPED state.</p><p>To allow the node to take part in the cluster it must be manually continued with the the <strong>ctdb enable</strong> command.</p><p>Please see the NODE STATES section in <strong>ctdb</strong>(7) for more information about the STOPPED state.</p><p>--syslog</p><p>Send log messages to syslog instead of the CTDB logfile. This option overrides --logfile. The default is to log to a file.</p><p>--transport=tcp|infiniband</p><p>This option specifies which transport to use for ctdbd internode communications. The default is "tcp".</p><p>The "infiniband" support is not regularly tested.</p><p>-?, --help</p><p>Display a summary of options.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEBUGGING OPTIONS</h2>
        <div class="sectioncontent">
<p>-i, --interactive</p><p>Enable interactive mode. This will make ctdbd run in the foreground and not detach from the terminal. By default ctdbd will detach itself and run in the background as a daemon.</p><p>--listen=<em>IPADDR</em></p><p>This specifies which IP address that ctdbd will bind to.</p><p>By default ctdbd will bind to the first address it finds in the /etc/ctdb/nodes file that is also present on the local system.</p><p>This option is only required when you want to run multiple ctdbd daemons/nodes on the same physical host in which case there would be multiple entries in /etc/ctdb/nodes that would match a local interface.</p><p>--nopublicipcheck</p><p>This option is used when testing with multiple local daemons on a single machine. It disables checks related to public IP addresses.</p><p>--nosetsched</p><p>This is a debugging option. This option is only used when debugging ctdbd.</p><p>Normally ctdbd will change its scheduler to run as a real-time process. This is the default mode for a normal ctdbd operation to gurarantee that ctdbd always gets the CPU cycles that it needs.</p><p>This option is used to tell ctdbd to <em>not</em> run as a real-time process and instead run ctdbd as a normal userspace process. This is useful for debugging and when you want to run ctdbd under valgrind or gdb. (You don&apos;t want to attach valgrind or gdb to a real-time process.)</p><p>--socket=<em>FILENAME</em></p><p>FILENAME specifies the name of the Unix domain socket that ctdbd will create. This socket is used by local clients to communicate with ctdbd.</p><p>The default is /tmp/ctdb.socket . You only need to use this option if you plan to run multiple ctdbd daemons on the same physical host, usually for testing.</p><p>--script-log-level=<em>DEBUGLEVEL</em></p><p>This option sets the debug level of event script output to DEBUGLEVEL. The default is ERR (0).</p><p>See the DEBUG LEVELS section in <strong>ctdb</strong>(7) for more information.</p><p>--sloppy-start</p><p>This is debugging option. This speeds up the initial recovery during startup at the expense of some consistency checking. <em>Don&apos;t use this option in production</em>.</p><p>--torture</p><p>This option is only used for development and testing of CTDB. It adds artificial errors and failures to the common codepaths in ctdbd to verify that ctdbd can recover correctly from failures.</p><p><em>Do not use this option</em> unless you are developing and testing new functionality in CTDB.</p><p>--valgrinding</p><p>This is a debugging option. This option is only used when debugging ctdbd. This enables additional debugging capabilities and implies --nosetsched.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ctdbd&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/ctdb.1.html"><strong>ctdb</strong>(1)</a>, <a href="../man1/ctdbd_wrapper.1.html"><strong>ctdbd_wrapper</strong>(1)</a>, <a href="../man1/onnode.1.html"><strong>onnode</strong>(1)</a>, <strong>ctdb</strong>(7), <strong>ctdb-tunables</strong>(7), \m[blue]<strong>http://ctdb.samba.org/</strong>\m[]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This documentation was written by Ronnie Sahlberg, Amitay Isaacs, Martin Schwenke</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2007 Andrew Tridgell, Ronnie Sahlberg</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, see \m[blue]<strong>http://www.gnu.org/licenses</strong>\m[].</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ctdb.1.html"><span aria-hidden="true">&larr;</span> ctdb.1: Ctdb management utility</a></li>
   <li class="next"><a href="ctdbd_wrapper.1.html">ctdbd_wrapper.1: Wrapper for ctdbd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
