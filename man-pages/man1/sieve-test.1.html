<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sieve-test: Pigeonholes sieve script tester</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Pigeonholes sieve script tester">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sieve-test (1) manual">
  <meta name="twitter:description" content="Pigeonholes sieve script tester">
  <meta name="twitter:image" content="https://www.carta.tech/images/dovecot-sieve-sieve-test-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/sieve-test.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sieve-test (1) manual" />
  <meta property="og:description" content="Pigeonholes sieve script tester" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dovecot-sieve-sieve-test-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sieve-test<small> (1)</small></h1>
        <p class="lead">Pigeonholes sieve script tester</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/sieve-test.1.html">
      <span itemprop="name">sieve-test: Pigeonholes sieve script tester</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dovecot-sieve/">
      <span itemprop="name">dovecot-sieve</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/sieve-test.1.html">
      <span itemprop="name">sieve-test: Pigeonholes sieve script tester</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>sieve-test</strong> [<em>options</em>] <em>script-file</em> <em>mail-file</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>sieve-test</strong> command is part of the Pigeonhole Project (<a href="../man7/pigeonhole.7.html"><strong>pigeonhole</strong>(7)</a>), which adds Sieve (RFC 5228) support to the Dovecot secure IMAP and POP3 server (<a href="../man1/dovecot.1.html"><strong>dovecot</strong>(1)</a>).</p><p>Using the <strong>sieve-test</strong> command, the execution of Sieve scripts can be tested. This evaluates the script for the provided message, yielding a set of Sieve actions. Unless the <strong>-e</strong> option is specified, it does not actually execute these actions, meaning that it does not store or forward the message anywere. In stead, it prints a detailed list of what actions would normally take place. Note that, even when <strong>-e</strong> is specified, no messages are ever transmitted to remote SMTP recipients. The outgoing messages are always printed to <strong>stdout</strong> in stead.</p><p>This is a very useful tool to debug the execution of Sieve scripts. It can be used to verify newly installed scripts for the intended behaviour and it can provide more detailed information about script execution problems that are reported by the Sieve plugin, for example by tracing the execution and evaluation of commands and tests respectively.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-a</strong><em>orig-recipient-address</em></p>
  </dt>
  <dd>
    <p>The original envelope recipient address. This is what Sieve&apos;s envelope test will compare to when the &quot;to&quot; envelope part is requested. Some tests and actions will also use this as the script owner&apos;s e-mail address. If this option is omitted, the recipient address is retrieved from the &quot;Envelope-To:&quot;, or &quot;To:&quot; message headers. If none of these headers is present either, the recipient address defaults to <em>recipient@example.com</em>.</p>
  </dd>
  <dt>
    <p><strong>-c</strong><em>config-file</em></p>
  </dt>
  <dd>
    <p>Alternative Dovecot configuration file path.</p>
  </dd>
  <dt>
    <p><strong>-C</strong></p>
  </dt>
  <dd>
    <p>Force compilation. By default, the compiled binary is stored on disk. When this binary is found during the next execution of <strong>sieve-test</strong> and its modification time is more recent than the script file, it is used and the script is not compiled again. This option forces the script to be compiled, thus ignoring any present binary. Refer to <a href="../man1/sievec.1.html"><strong>sievec</strong>(1)</a> for more information about Sieve compilation.</p>
  </dd>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>Enable Sieve debugging.</p>
  </dd>
  <dt>
    <p><strong>-d</strong><em>dump-file</em></p>
  </dt>
  <dd>
    <p>Causes a dump of the generated code to be written to the specified file. This is identical to the dump produced by <a href="../man1/sieve-dump.1.html"><strong>sieve-dump</strong>(1)</a>. Using &apos;-&apos; as filename causes the dump to be written to <strong>stdout</strong>.</p>
  </dd>
  <dt>
    <p><strong>-e</strong></p>
  </dt>
  <dd>
    <p>Enables true execution of the set of actions that results from running the script. In combination with the <strong>-l</strong> parameter, the actual delivery of messages can be tested. Note that this will not transmit any messages to remote SMTP recipients. Such actions only print the outgoing message to <strong>stdout</strong>.</p>
  </dd>
  <dt>
    <p><strong>-f</strong><em>envelope-sender</em></p>
  </dt>
  <dd>
    <p>The envelope sender address (return path). This is what Sieve&apos;s envelope test will compare to when the &quot;from&quot; envelope part is requested. Also, this is where response messages are &apos;sent&apos; to. If this option is omitted, the sender address is retrieved from the &quot;Return-Path:&quot;, &quot;Sender:&quot; or &quot;From:&quot; message headers. If none of these headers is present either, the sender envelope address defaults to <em>sender@example.com</em>.</p>
  </dd>
  <dt>
    <p><strong>-l</strong><em>mail-location</em></p>
  </dt>
  <dd>
    <p>The location of the user&apos;s mail store. The syntax of this option&apos;s <em>mail-location</em> parameter is identical to what is used for the mail_location setting in the Dovecot config file. This parameter is typically used in combination with <strong>-e</strong> to test the actual delivery of messages. If <strong>-l</strong> is omitted when <strong>-e</strong> is specified, mail store actions like fileinto and keep are skipped.</p>
  </dd>
  <dt>
    <p><strong>-m</strong><em>default-mailbox</em></p>
  </dt>
  <dd>
    <p>The mailbox where the keep action stores the message. This is &quot;INBOX&quot; by default.</p>
  </dd>
  <dt>
    <p><strong>-r</strong><em>recipient-address</em></p>
  </dt>
  <dd>
    <p>The final envelope recipient address. Some tests and actions will use this as the script owner&apos;s e-mail address. For example, this is what is used by the vacation action to check whether a reply is appropriate. If the <strong>-r</strong> option is omitted, the orignal envelope recipient address will be used in stead (see <strong>-a</strong> option for more info).</p>
  </dd>
  <dt>
    <p><strong>-s</strong><em>script-file</em></p>
  </dt>
  <dd>
    <p>Specify additional scripts to be executed before the main script. Multiple <strong>-s</strong> arguments are allowed and the specified scripts are executed sequentially in the order specified at the command line.</p>
  </dd>
  <dt>
    <p><strong>-t</strong><em>trace-file</em></p>
  </dt>
  <dd>
    <p>Enables runtime trace debugging. Trace debugging provides detailed insight in the operations performed by the Sieve script. Refer to the runtime trace debugging section below. The trace information is written to the specified file. Using '-' as filename causes the trace data to be written to <strong>stdout</strong>.</p>
  </dd>
  <dt>
    <p><strong>-T</strong><em>trace-option</em></p>
  </dt>
  <dd>
    <p>Configures runtime trace debugging, which is enabled with the -t option. Refer to the runtime trace debugging section below.</p>
  </dd>
  <dt>
    <p><strong>-x</strong><em>extensions</em></p>
  </dt>
  <dd>
    <p>Set the available extensions. The parameter is a space-separated list of the active extensions. By prepending the extension identifiers with <strong>+</strong> or <strong>-</strong>, extensions can be included or excluded relative to the configured set of active extensions. If no extensions have a <strong>+</strong> or <strong>-</strong> prefix, only those extensions that are explicitly listed will be enabled. Unknown extensions are ignored and a warning is produced.</p><p>For example <strong>-x</strong> &quot;+imapflags -enotify&quot; will enable the deprecated imapflags extension and disable the enotify extension. The rest of the active extensions depends on the <em>sieve_extensions</em> and <em>sieve_global_extensions</em> settings. By default, i.e. when <em>sieve_extensions</em> and <em>sieve_global_extensions</em> remain unconfigured, all supported extensions are available, except for deprecated extensions or those that are still under development.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>script-file</em></p>
  </dt>
  <dd>
    <p>Specifies the script to (compile and) execute.</p><p>Note that this tool looks for a pre-compiled binary file with a <em>.svbin</em> extension and with basename and path identical to the specified script. Use the <strong>-C</strong> option to disable this behavior by forcing the script to be compiled into a new binary.</p>
  </dd>
  <dt>
    <p><em>mail-file</em></p>
  </dt>
  <dd>
    <p>Specifies the file containing the e-mail message to test with.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<h3>RUNTIME TRACE DEBUGGING</h3>
<p>Using the <strong>-t</strong> option, the <strong>sieve-test</strong> tool can be configured to print detailed trace information on the Sieve script execution to a file or standard output. For example, the encountered commands, the performed tests and the matched values can be printed.</p><p>The runtime trace can be configured using the <strong>-T</strong> option, which can be specified multiple times. It can be used as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-Tlevel=...</strong></p>
  </dt>
  <dd>
    <p>Set the detail level of the trace debugging. One of the following values can be supplied:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>actions</em> (default)</p>
  </dt>
  <dd>
    <p>Only print executed action commands, like keep, fileinto, reject and redirect.</p>
  </dd>
  <dt>
    <p><em>commands</em></p>
  </dt>
  <dd>
    <p>Print any executed command, excluding test commands.</p>
  </dd>
  <dt>
    <p><em>tests</em></p>
  </dt>
  <dd>
    <p>Print all executed commands and performed tests.</p>
  </dd>
  <dt>
    <p><em>matching</em></p>
  </dt>
  <dd>
    <p>Print all executed commands, performed tests and the values matched in those tests.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-Tdebug</strong></p>
  </dt>
  <dd>
    <p>Print debug messages as well. This is usually only useful for developers and is likely to produce messy output.</p>
  </dd>
  <dt>
    <p><strong>-Taddresses</strong></p>
  </dt>
  <dd>
    <p>Print byte code addresses for the current trace output. Normally, only the current Sieve source code position (line number) is printed. The byte code addresses are equal to those listed in a binary dump produced using the <strong>-d</strong> option or by the <a href="../man1/sieve-dump.1.html"><strong>sieve-dump</strong>(1)</a></strong> command.</p>
  </dd>

</dl>

<h3>DEBUG SIEVE EXTENSION</h3>
<p>To improve script debugging, this Sieve implementation supports a custom Sieve language extension called &apos;vnd.dovecot.debug&apos;. It adds the <strong>debug_log</strong> command that allows logging debug messages.</p><p>Example:</p><p>require &quot;vnd.dovecot.debug&quot;;</p><p>if header :contains &quot;subject&quot; &quot;hello&quot; {</p>
<pre>
  debug_log &quot;Subject header contains hello!&quot;;
</pre>
<p>}</p><p>Tools such as <strong>sieve-test</strong>, <strong>sievec</strong> and <strong>sieve-dump</strong> have support for the vnd.dovecot.debug extension enabled by default and it is not necessary to enable nor possible to disable the availability of the debug extension with the <strong>-x</strong> option. The logged messages are written to <strong>stdout</strong> in this case.</p><p>In contrast, for the actual Sieve plugin for the Dovecot LDA (<a href="../man1/dovecot-lda.1.html"><strong>dovecot-lda</strong>(1)</a>) the vnd.dovecot.debug extension needs to be enabled explicitly using the <em>sieve_extensions</em> setting. The messages are then logged to the user's private script log file. If used in a global script, the messages are logged through the default Dovecot logging facility.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>sieve-test</strong> will exit with one of the following values:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>0</strong></p>
  </dt>
  <dd>
    <p>Execution was successful. (EX_OK, EXIT_SUCCESS)</p>
  </dd>
  <dt>
    <p><strong>1</strong></p>
  </dt>
  <dd>
    <p>Operation failed. This is returned for almost all failures. (EXIT_FAILURE)</p>
  </dd>
  <dt>
    <p><strong>64</strong></p>
  </dt>
  <dd>
    <p>Invalid parameter given. (EX_USAGE)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/dovecot/dovecot.conf</em></p>
  </dt>
  <dd>
    <p>Dovecot&apos;s main configuration file.</p>
  </dd>
  <dt>
    <p><em>/etc/dovecot/conf.d/90-sieve.conf</em></p>
  </dt>
  <dd>
    <p>Sieve interpreter settings (included from Dovecot&apos;s main configuration file)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs, including <em>doveconf -n</em> output, to the Dovecot Mailing List &lt;dovecot@dovecot.org&gt;. Information about reporting Dovecot and Pigeonhole bugs is available at: http://dovecot.org/bugreport.html</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sieve-test&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/dovecot.1.html"><strong>dovecot</strong>(1)</a>, <a href="../man1/dovecot-lda.1.html"><strong>dovecot-lda</strong>(1)</a>, <a href="../man1/sieve-dump.1.html"><strong>sieve-dump</strong>(1)</a>, <a href="../man1/sieve-filter.1.html"><strong>sieve-filter</strong>(1)</a>, <a href="../man1/sievec.1.html"><strong>sievec</strong>(1)</a>, <a href="../man7/pigeonhole.7.html"><strong>pigeonhole</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sieve-filter.1.html"><span aria-hidden="true">&larr;</span> sieve-filter.1: Pigeonholes sieve mailbox filter tool   warning: this tool is still experimental. read this manual carefully, and backup any important mail before using this tool. also note that some of the features documented here are not actually implemented yet; this is clearly indicated where applicable.</a></li>
   <li class="next"><a href="sievec.1.html">sievec.1: Pigeonholes sieve script compiler <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
