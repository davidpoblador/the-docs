<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lamboot: Start a lam multicomputer.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Start a lam multicomputer.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lamboot (1) manual">
  <meta name="twitter:description" content="Start a lam multicomputer.">
  <meta name="twitter:image" content="https://www.carta.tech/images/lam-runtime-lamboot-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/lamboot.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lamboot (1) manual" />
  <meta property="og:description" content="Start a lam multicomputer." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lam-runtime-lamboot-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lamboot<small> (1)</small></h1>
        <p class="lead">Start a lam multicomputer.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lamboot.1.html">
      <span itemprop="name">lamboot: Start a lam multicomputer.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lam-runtime/">
      <span itemprop="name">lam-runtime</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lamboot.1.html">
      <span itemprop="name">lamboot: Start a lam multicomputer.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>lamboot [-b] [-d] [-h] [-H] [-l] [-s] [-v] [-V] [-x] [-nn] [-np] [-c conf file] [-prefix /lam/install/path/] [-sessionprefix value] [-sessionsuffix value] [-withlamprefixpath value] [-ssi key value] [bhost]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-b</strong></p>
  </dt>
  <dd>
    <p>Assume local and remote shell are the same.  This means that only one remote shell invocation is used to each node.  If <strong>-b</strong> is not used, two remote shell invocations are used to each node.</p>
  </dd>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Turn on debugging output.  This implies -v.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Print the command help menu.</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>Delay hostname-to-IP-address resolution.</p>
  </dd>
  <dt>
    <p><strong>-prefix</strong></p>
  </dt>
  <dd>
    <p>Use the LAM installation specified in /lam/install/path/.  Not compatible with LAM/MPI versions prior to 7.1.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>Close stdio on the local node.</p>
  </dd>
  <dt>
    <p><strong>-ssi key value</strong></p>
  </dt>
  <dd>
    <p>Send arguments to various SSI modules.  See the "SSI" section, below.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Be verbose.</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>Run in fault tolerant mode.</p>
  </dd>
  <dt>
    <p><strong>-H</strong></p>
  </dt>
  <dd>
    <p>Do not display the command header.</p>
  </dd>
  <dt>
    <p><strong>-nn</strong></p>
  </dt>
  <dd>
    <p>Don't add "-n" to the remote agent command line</p>
  </dd>
  <dt>
    <p><strong>-np</strong></p>
  </dt>
  <dd>
    <p>Do not force the execution of $HOME/.profile on remote hosts</p>
  </dd>
  <dt>
    <p><strong>-session-prefix value</strong></p>
  </dt>
  <dd>
    <p>Set the session prefix, overriding LAM_MPI_SESSION_PREFIX.</p>
  </dd>
  <dt>
    <p><strong>-session-suffix value</strong></p>
  </dt>
  <dd>
    <p>Set the session suffix, overriding LAM_MPI_SESSION_SUFFIX.</p>
  </dd>
  <dt>
    <p><strong>-withlamprefixpath value</strong></p>
  </dt>
  <dd>
    <p>Override the internal installation path.  For internal use only, do not use unless you know what you are doing.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LAM_MPI_SESSION_PREFIX</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>LAM_MPI_SESSION_SUFFIX</strong></p>
  </dt>
  <dd>
    <p>It is possible to change the session directory used by LAM/MPI, normally of the form:</p>
  </dd>
  <dt>
    <p>tmpdir/lam-username@hostname[-suffix]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>tmpdir</p>
  </dt>
  <dd>
    <p>will be set to <em>LAM_MPI_SESSION_PREFIX</em> if set.  Otherwise, it will fall back to the value of <em>TMPDIR</em>. If neither of these are set, the default is /tmp.</p>
  </dd>
  <dt>
    <p>suffix</p>
  </dt>
  <dd>
    <p>can be overridden by the <em>LAM_MPI_SESSION_SUFFIX</em> environment variable.  If <em>LAM_MPI_SESSION_SUFFIX</em> is not set and LAM is running under a supported batch scheduling system, <em>$suffix</em> will be a value unique to the currently running job.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <em>lamboot</em> tool starts the LAM software on each of the machines specified in the boot schema, <em>bhost</em>. The boot schema specifies the hostnames of nodes to be used in the run-time MPI environment, and optionally lists how may CPUs LAM may used on each node. The user may wish to first run the <a href="../man1/recon.1.html"><strong>recon</strong>(1)</a> tool to verify that LAM can be started.</p><p>Starting LAM is a three step procedure.  In the first step, <a href="../man1/hboot.1.html"><strong>hboot</strong>(1)</a> is invoked on each of the specified machines.  Then each machine allocates a dynamic port and communicates it back to <em>lamboot</em> which collects them.  In the third step, <em>lamboot</em> gives each machine the list of machines/ports in order to form a fully connected topology.  If any machine was not able to start, or if a timeout period expires before the first step completes, <em>lamboot</em> invokes <a href="../man1/lamwipe.1.html"><strong>lamwipe</strong>(1)</a> to terminate LAM and reports the error.</p><p>The <em>bhost</em> file is a LAM boot schema written in the host file syntax.  See <a href="../man5/bhost.5.html"><strong>bhost</strong>(5)</a>.  Instead of the command line, a boot schema can be specified in the LAMBHOST environment variable.  Otherwise a default file, lam-bhost.def, is used.  LAM searches for <em>bhost</em> first in the local directory and then in the installation directory under etc/.</p><p>In addition, <em>lamboot</em> uses a process schema for the individual LAM nodes.  A process schema (see <a href="../man5/conf.5.html"><strong>conf</strong>(5)</a>) is a description of the processes which constitute the operating system on a node.  In general, the system administrator maintains this file -- LAM/MPI users will generally not need to change this file.  It is also possible for the user to customize the LAM software with a private process schema.</p><h3>The bhost file</h3>
<p>The format of the <em>bhost</em> file is documented in the <a href="../man5/bhost.5.html"><strong>bhost</strong>(5)</a> man page.</p><p><em>lamboot</em> will resolve all names in <em>bhost</em> on the node in which <em>lamboot</em> was invoked (the origin node).  After that, LAM will only use IP addresses, not names.  Specifically, the name resolution configuration on all other nodes is not used.  Hence, the the origin node must be able to resolve all the names in <em>bhost</em> to addresses that are reachable by all other nodes.</p><p>A common mistake is to list <em>localhost</em> (or any name that resolves to the special address 127.0.0.1 -- the loopback TCP/IP device) in a <em>bhost</em> file that contains other nodes.  In this case, the address 127.0.0.1 would be sent to each of the other nodes as the address of the origin node.  If the other nodes try to use 127.0.0.1 to contact the origin node, they will actually be contacting themselves, and would eventually timeout and fail.</p><p>The IP addresses obtained from <em>bhost</em> are used for LAM's meta messages: startup and shutdown of jobs, out-of-band messages used for coordination, etc.  The amount of traffic is fairly low (unless using the "lamd" mode of MPI message passing, in which case all MPI traffic will also utilize LAM's meta messages for transport -- see <strong>mpirun</strong>(1)).  When using the TCP RPI, these IP addresses are also used for MPI message passing via direct sockets between each pair of nodes.</p><p>A common case is where a "master" node has multiple network interface cards (NICs) -- one that is connected to a public network, and one that is connected to a private network where parallel jobs are to be run.  To include the master node in a <em>bhost</em> file, the IP name (or address) of the NIC on the private network should be listed in <em>bhost</em>. This ensures that all the other nodes can reach the master node on the private network.</p><p>As another example, some configurations have multiple TCP/IP NICs in each node of a parallel job.  One NIC is considered "slow" (e.g., 10Mbps), while the other is considered "fast" (e.g., 100Mbps).  It is desirable to allow LAM to take advantage of the higher bandwidth on the "fast" network for MPI messages.  As such, <em>bhost</em> should list the IP names (or addresses) of all the "fast" NICs. However, if the LAM RPI does not use TCP/IP (e.g., the Myrinet/GM RPI), the <em>bhost</em> file should probably list the "slow" NICs so that LAM's meta message traffic does not cause overhead and potentially detract from performance on the "fast" network from other high-performance applications.</p>
<h3>Delaying hostname lookups</h3>
<p>Normally, name resolution of hostnames is done on the machines where <em>lamboot</em> is invoked.  This is done for optimization reasons, so that the list of hostnames only needs to be resolved once (potentially minimizing the amount of DNS or other hostname-lookup network traffic).</p><p>However, in some non-uniform networking environments, this is not sufficient because each host may have a different IP address on each of its peers.  For example, host A may have address Z on host B, but have address Y on host C.</p><p>The <em>-l</em> option to <em>lamboot</em> will cause LAM to distribute hostnames to each node rather than a fully resolved set of IP addresses.  Hence, each node where LAM is booted will do its own name resolution on the list of hostnames.</p>
<h3>SSI (System Services Interface)</h3>
<p>The <em>-ssi</em> switch allows the passing of parameters to various SSI modules.  LAM's SSI modules are described in detail in <a href="../man7/lamssi.7.html"><strong>lamssi</strong>(7)</a>.  SSI modules have direct impact on MPI programs because they allow tunable parameters to be set at run time (such as which boot device driver to use, what parameters to pass to that driver, etc.).</p><p>The <em>-ssi</em> switch takes two arguments: <em>key</em> and <em>value</em>. The <em>key</em> argument generally specifies which SSI module will receive the value. For example, the <em>key</em> "boot" is used to select which RPI to be used for starting processes on remote nodes.  The <em>value</em> argument is the value that is passed.  For example:</p>
<dl class='dl-vertical'>
  <dt>
    <p>lamboot -ssi boot tm</p>
  </dt>
  <dd>
    <p>Tells LAM to use the "tm" boot module for native launching in PBSPro / OpenPBS environments (the tm boot module does not require a boot schema).</p>
  </dd>
  <dt>
    <p>lamboot -ssi boot rsh -ssi rsh_agent "ssh -x" boot_schema</p>
  </dt>
  <dd>
    <p>Tells LAM to use the "rsh" boot module, and tells the rsh module to use "ssh -x" as the specific agent to launch executables on remote nodes.</p>
  </dd>

</dl>
<p>And so on.  LAM's boot SSI modules are described in <a href="../man7/lamssi_boot.7.html"><strong>lamssi_boot</strong>(7)</a>. This page should be consulted for specific actions that are taken by, and how to tweak the run-time behavior of each boot module.</p><p>The <em>-ssi</em> switch can be used multiple times to specify different <em>key</em> and/or <em>value</em> arguments.  If the same <em>key</em> is specified more than once, the <em>value</em>s are concatenated with a comma (",") separating them.</p><p>Note that the <em>-ssi</em> switch is simply a shortcut for setting environment variables.  The same effect may be accomplished by setting corresponding environment variables before running <em>lamboot</em>. The form of the environment variables that LAM sets are: <em>LAM_MPI_SSI_key=value</em>.</p><p>Note that the <em>-ssi</em> switch overrides any previously set environment variables.  Also note that unknown <em>key</em> arguments are still set as environment variable -- they are not checked (by <em>lamwipe</em>) for correctness.  Illegal or incorrect <em>value</em> arguments may or may not be reported -- it depends on the specific SSI module.</p>
<h3>Remote Executable Invocation</h3>
<p>All tweakable aspects of launching executables on remote nodes during <em>lamboot</em> are discussed in <a href="../man7/lamssi.7.html"><strong>lamssi</strong>(7)</a> and <a href="../man7/lamssi_boot.7.html"><strong>lamssi_boot</strong>(7)</a>.  Topics include (but are not limited to): discovery of remote shell, run-time overrides of the agent use to launch remote executables (e.g., rsh and ssh), etc.</p>
<h3>Closing stdio</h3>
<p>The stdio of each LAM daemon on a remote host that is launched by <em>lamboot</em> is closed by default.  Normally, the stdio of the LAM daemon launched on the local host is left open so that the internal LAM <strong>tstdio</strong>(3) package works properly.  However, it is sometimes desirable to close the stdio of the local LAM daemon as well.  For example:</p><p>rsh somenode lamboot -s hostfile</p><p>This is because <em>rsh</em> waits for two conditions before exiting: <em>lamboot</em> to exit, and stdout / stderr to be closed.  Without <em>-s</em>, stdout / stderr would not be closed, and <em>rsh</em> (and <em>ssh</em>) will hang even though <em>lamboot</em> had completed. <em>-s</em> causes the stdout / stderr of the local LAM daemon to be closed upon invocation, which will allow <em>rsh</em> to complete.  Using <em>-s</em> will not affect <em>lamboot</em> in any other way, but it will prevent the <strong>tstdio</strong>(3) package from working properly.</p>
<h3>Fault Tolerance</h3>
<p>If the <em>-x</em> option is given, LAM runs in fault tolerant mode.  In this mode, nodes exchange ``heart beat'' messages periodically to make sure all nodes are running and the links connecting them are operational.  When a node's heart beats stop, it is declared ``dead'' and all LAM nodes (and processes) are notified.  This allows users to write fault tolerant applications that can degrade gracefully, or fully recover by replacing the defunct node with another (see <a href="../man1/lamgrow.1.html"><strong>lamgrow</strong>(1)</a>).  Since this mode introduces a performance penalty, it is not activated by default.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>lamboot -v</p>
  </dt>
  <dd>
    <p>Start LAM on the machines described in the default boot schema. Report about important steps as they are done.</p>
  </dd>
  <dt>
    <p>lamboot -d hostfile</p>
  </dt>
  <dd>
    <p>Start LAM on the machines described in file <em>hostfile</em>. Provide incredibly detailed reports on what is happening at each stage in the boot process.</p>
  </dd>
  <dt>
    <p>lamboot mynodes</p>
  </dt>
  <dd>
    <p>Start LAM on the machines described in the boot schema <em>mynodes</em>. Operate silently.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>laminstalldir/etc/lam-bhost.def</p>
  </dt>
  <dd>
    <p>default boot schema file, where "laminstalldir" is the directory where LAM/MPI was installed</p>
  </dd>
  <dt>
    <p>laminstalldir/etc/lam-conf.lamd</p>
  </dt>
  <dd>
    <p>default process schema file for LAM nodes</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lamboot&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/recon.1.html"><strong>recon</strong>(1)</a>, <a href="../man1/lamwipe.1.html"><strong>lamwipe</strong>(1)</a>, <a href="../man1/hboot.1.html"><strong>hboot</strong>(1)</a>, <strong>tstdio</strong>(3), <a href="../man5/bhost.5.html"><strong>bhost</strong>(5)</a>, <a href="../man5/conf.5.html"><strong>conf</strong>(5)</a>, <a href="../man5/lam-helpfile.5.html"><strong>lam-helpfile</strong>(5)</a>, <a href="../man7/lamssi.7.html"><strong>lamssi</strong>(7)</a>, <a href="../man7/lamssi_boot.7.html"><strong>lamssi_boot</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ladr_to_tptp.1.html"><span aria-hidden="true">&larr;</span> ladr_to_tptp.1: Undocumented ladr4 applications</a></li>
   <li class="next"><a href="lamclean.1.html">lamclean.1: Attempt to clean entire lam system. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
