<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>drr: Create a digitally reconstructed radiograph</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create a digitally reconstructed radiograph">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="drr (1) manual">
  <meta name="twitter:description" content="Create a digitally reconstructed radiograph">
  <meta name="twitter:image" content="https://www.carta.tech/images/plastimatch-drr-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/drr.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="drr (1) manual" />
  <meta property="og:description" content="Create a digitally reconstructed radiograph" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/plastimatch-drr-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">drr<small> (1)</small></h1>
        <p class="lead">Create a digitally reconstructed radiograph</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/drr.1.html">
      <span itemprop="name">drr: Create a digitally reconstructed radiograph</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/plastimatch/">
      <span itemprop="name">plastimatch</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/drr.1.html">
      <span itemprop="name">drr: Create a digitally reconstructed radiograph</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>drr [options] [infile]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A digitally reconstructed radiograph (DRR) is a synthetic radiograph which can be generated from a computed tomography (CT) scan. It is used as a reference image for verifying the correct setup position of a patient prior to radiation treatment.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DRR USAGE</h2>
        <div class="sectioncontent">
<p>The drr program that comes with plastimatch takes a CT image as input, and generates one or more output images.  The input image is in MHA format, and the output images can be either pgm, pfm, or raw format.  The command line usage is:</p>
<pre>
Usage: drr [options] [infile]
Options:
 -A hardware       Either "cpu" or "cuda" (default=cpu)
 -a num            Generate num equally spaced angles
 -N ang            Difference between neighboring angles (in degrees)
 -nrm "x y z"      Set the normal vector for the panel
 -vup "x y z"      Set the vup vector (toward top row) for the panel
 -g "sad sid"      Set the sad, sid (in mm)
 -r "r c"          Set output resolution (in pixels)
 -s scale          Scale the intensity of the output file
 -e                Do exponential mapping of output values
 -c "r c"          Set the image center (in pixels)
 -z "s1 s2"        Set the physical size of imager (in mm)
 -w "r1 r2 c1 c2"  Only produce image for pixes in window (in pix)
 -t outformat      Select output format: pgm, pfm or raw
 -i algorithm      Choose algorithm {exact,uniform}
 -o "o1 o2 o3"     Set isocenter position
 -I infile         Set the input file in mha format
 -O outprefix      Generate output files using the specified prefix
</pre>
<p>The drr program can be used in either <em>single image mode</em> or <em>rotational mode</em>.  In single image mode, you specify the complete geometry of the x-ray source and imaging panel for a single image.  In rotational mode, the imaging geometry is assumed to be</p><p>The command line options are described in more details as follows.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-A hardware</strong></p>
  </dt>
  <dd>
    <p>Choose the threading mode, which is either "cpu" or "cuda". The default value is "cpu".</p><p>When using CPU hardware, DRR generation uses OpenMP for multicore acceleration if your compiler supports this.  Gcc and Microsoft Visual Studio Professional compilers support OpenMP, but Microsoft Visual Studio Express does not.</p><p>At the current time, cuda acceleration is not working.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-a num</strong></p>
  </dt>
  <dd>
    <p>Generate num equally spaced angles</p>
  </dd>
  <dt>
    <p><strong>-r  r1 r2 </strong></p>
  </dt>
  <dd>
    <p>Set the resolution of the imaging panel (in pixels).  Here, r1 refers to the number of rows, and r2 refers to the number of columns.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SINGLE IMAGE MODE</h2>
        <div class="sectioncontent">
<p>The following example illustrates the use of single image mode:</p>
<pre>
drr -nrm "1 0 0" &#92;
    -vup "0 0 1" &#92;
    -g "1000 1500" &#92;
    -r "1024 768" &#92;
    -z "400 300" &#92;
    -c "383.5 511.5" &#92;
    -o "0 -20 -50" &#92;
    input_file.mha
</pre>
<p>In the above example, the isocenter is chosen to be (0, -20, -50), the location marked on the CT image.  The orientation of the projection image is controlled by the <strong>nrm</strong> and <strong>vup</strong> options.  Using the default values of (1, 0, 0) and (0, 0, 1) yields the DRR shown on the right: [image] [image]</p><p>By changing the normal direction (<strong>nrm</strong>), we can choose different beam direction within an isocentric orbit.  For example, an anterior-posterior (AP) DRR is generated with a normal of (0, -1, 0) as shown below: [image]</p><p>The rotation of the imaging panel is selected using the <strong>vup</strong> option. The default value of <strong>vup</strong> is (0, 0, 1), which means that the top of the panel is oriented toward the positive z direction in world coordinates.  If we wanted to rotate the panel by 45 degrees counter-clockwise on our AP view, we would set <strong>vup</strong> to the (1, 0, 1) direction, as shown in the image below. Note that <strong>vup</strong> doesn&apos;t have to be normalized. [image]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ROTATIONAL MODE</h2>
        <div class="sectioncontent">
<p>In rotional mode, multiple images are created.  The source and imaging panel are assumed to rotate in a circular orbit around the isocenter. The circular orbit is performed around the Z axis, and the images are generated every <strong>-N ang</strong> degrees of the orbit.  This is illustrated using the following example:</p>
<pre>
drr -N 20 &#92;
    -a 18 &#92;
    -g "1000 1500" &#92;
    -r "1024 768" &#92;
    -z "400 300" &#92;
    -o "0 -20 -50" &#92;
    input_file.mha
</pre>
<p>In the above example, 18 images are generated at a 20 degree interval, as follows: [image]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Plastimatch is a collaborative project.  For additional documentation, please visit http://plastimatch.org.  For questions, comments, and bug reports, please visit http://groups.google.com/group/plastimatch.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Plastimatch development team (C) 2010-2013.  You are free to use, modify, and distribute plastimatch according to a BSD-style license.  Please see LICENSE.TXT for details.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="drpython.1.html"><span aria-hidden="true">&larr;</span> drpython.1: Simple and customizable editor for the python language</a></li>
   <li class="next"><a href="drs_checkthredds.1.html">drs_checkthredds.1:  <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
