<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>funimage: Create a fits image from a funtools data file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create a fits image from a funtools data file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="funimage (1) manual">
  <meta name="twitter:description" content="Create a fits image from a funtools data file">
  <meta name="twitter:image" content="https://www.carta.tech/images/funtools-funimage-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/funimage.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="funimage (1) manual" />
  <meta property="og:description" content="Create a fits image from a funtools data file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/funtools-funimage-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">funimage<small> (1)</small></h1>
        <p class="lead">Create a fits image from a funtools data file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/funimage.1.html">
      <span itemprop="name">funimage: Create a fits image from a funtools data file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/funtools/">
      <span itemprop="name">funtools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/funimage.1.html">
      <span itemprop="name">funimage: Create a fits image from a funtools data file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>funimage [\-a] &lt;iname&gt; &lt;oname&gt; [bitpix=n] funimage [\-l] &lt;iname&gt; &lt;oname&gt; &lt;xcol:xdims&gt; &lt;ycol:ydims&gt; &lt;vcol&gt; [bitpix=n] funimage [\-p x|y] &lt;iname&gt; &lt;oname&gt; [bitpix=n]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<pre>
  -a       # append to existing output file as an image extension
  -l       # input is a list file containing xcol, ycol, value
  -p [x|y] # project along x or y axis to create a 1D image
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>funimage</strong> creates a primary \s-1FITS\s0 image from the specified \s-1FITS\s0 Extension and/or Image Section of a \s-1FITS\s0 file, or from an Image Section of a non-FITS array, or from a raw event file.</p><p>The first argument to the program specifies the \s-1FITS\s0 input image, array, or raw event file to process.  If \*(L"stdin\*(R" is specified, data are read from the standard input. Use Funtools Bracket Notation to specify \s-1FITS\s0 extensions, image sections, and filters.  The second argument is the output \s-1FITS\s0 file.  If \*(L"stdout\*(R" is specified, the \s-1FITS\s0 image is written to the standard output.  By default, the output pixel values are of the same data type as those of the input file (or type \*(L"int\*(R" when binning a table), but this can be overridden using an optional third argument of the form:</p><p>  bitpix=n</p><p>where n is 8,16,32,\-32,\-64, for unsigned char, short, int, float and double, respectively.</p><p>If the input data are of type image, the appropriate section is extracted and blocked (based on how the Image Section is specified), and the result is written to the \s-1FITS\s0 primary image.  When an integer image containing the \s-1BSCALE\s0 and \s-1BZERO\s0 keywords is converted to float, the pixel values are scaled and the scaling keywords are deleted from the output header. When converting integer scaled data to integer (possibly of a different size), the pixels are not scaled and the scaling keywords are retained.</p><p>If the input data is a binary table or raw event file, these are binned into an image, from which a section is extracted and blocked, and written to a primary \s-1FITS\s0 image.  In this case, it is necessary to specify the two columns that will be used in the 2D binning.  This can be done on the command line using the <strong>bincols=(x,y)</strong> keyword:</p><p>  funcnts "foo.ev[EVENTS,bincols=(detx,dety)]"</p><p>The full form of the <strong>bincols=</strong> specifier is:</p><p>  bincols=([xname[:tlmin[:tlmax:[binsiz]]]],[yname[:tlmin[:tlmax[:binsiz]]]])</p><p>where the tlmin, tlmax, and binsiz specifiers determine the image binning dimensions:</p><p>  dim = (tlmax - tlmin)/binsiz     (floating point data)   dim = (tlmax - tlmin)/binsiz + 1 (integer data)</p><p>Using this syntax, it is possible to bin any two columns of a binary table at any bin size.  Note that the tlmin, tlmax, and binsiz specifiers can be omitted if \s-1TLMIN\s0, \s-1TLMAX\s0, and \s-1TDBIN\s0 header parameters (respectively) are present in the \s-1FITS\s0 binary table header for the column in question. Note also that if only one parameter is specified, it is assumed to be tlmax, and tlmin defaults to 1. If two parameters are specified, they are assumed to be tlmin and tlmax. See Binning \s-1FITS\s0 Binary Tables and Non-FITS Event Files for more information about binning parameters.</p><p>By default, a new 2D \s-1FITS\s0 image file is created and the image is written to the primary \s-1HDU\s0.  If the <strong>\-a</strong> (append) switch is specified, the image is appended to an existing \s-1FITS\s0 file as an \s-1IMAGE\s0 extension. (If the output file does not exist, the switch is effectively ignored and the image is written to the primary \s-1HDU\s0.)  This can be useful in a shell programming environment when processing multiple \s-1FITS\s0 images that you want to combine into a single final \s-1FITS\s0 file.</p><p><strong>funimage</strong> also can take input from a table containing columns of x, y, and value (e.g., the output from <strong>fundisp \-l</strong> which displays each image x and y and the number of counts at that position.) When the <strong>\-l</strong> (list) switch is used, the input file is taken to be a \s-1FITS\s0 or \s-1ASCII\s0 table containing (at least) three columns that specify the x and y image coordinates and the value of that image pixel. In this case, <strong>funimage</strong> requires four extra arguments: xcolumn:xdims, ycolumn:ydims, vcolumn and bitpix=n. The x and y col:dim information takes the form:</p><p>  name:dim               # values range from 1 to dim   name:min:max           # values range from min to max   name:min:max:binsiz    # dimensions scaled by binsize</p><p>In particular, the min value should be used whenever the minimum coordinate value is something other than one. For example:</p><p>  funimage -l foo.lst foo.fits xcol:0:512 ycol:0:512 value bitpix=-32</p><p>The list feature also can be used to read unnamed columns from standard input: simply replace the column name with a null string. Note that the dimension information is still required:</p><p>  funimage -l stdin foo.fits "":0:512 "":0:512 "" bitpix=-32   240 250 1   255 256 2   ...   ^D</p><p>The list feature provides a simple way to generate a blank image. If you pass a Column-based Text File to funimage in which the text header contains the required image information, then funimage will correctly make a blank image. For example, consider the following text file (called foo.txt):</p><p>  x:I:1:10  y:I:1:10   ------    ------   0         0</p><p>This text file defines two columns, x and y, each of data type 32\-bit int and image dimension 10. The command:</p><p>  funimage foo.txt foo.fits bitpix=8</p><p>will create an empty \s-1FITS\s0 image called foo.fits containing a 10x10 image of unsigned char:</p><p>  fundisp foo.fits            1      2      3      4      5      6      7      8      9     10       ------ ------ ------ ------ ------ ------ ------ ------ ------ ------   10:      0      0      0      0      0      0      0      0      0      0    9:      0      0      0      0      0      0      0      0      0      0    8:      0      0      0      0      0      0      0      0      0      0    7:      0      0      0      0      0      0      0      0      0      0    6:      0      0      0      0      0      0      0      0      0      0    5:      0      0      0      0      0      0      0      0      0      0    4:      0      0      0      0      0      0      0      0      0      0    3:      0      0      0      0      0      0      0      0      0      0    2:      0      0      0      0      0      0      0      0      0      0    1:      1      0      0      0      0      0      0      0      0      0</p><p>Note that the text file must contain at least one row of data. However, in the present example, event position 0,0 is outside the limits of the image and will be ignored. (You can, of course, use real x,y values to seed the image with data.)</p><p>Furthermore, you can use the \s-1TEXT\s0 filter specification to obviate the need for an input text file altogether. The following command will create the same 10x10 char image without an actual input file:</p><p>  funimage stdin'[TEXT(x:I:10,y:I:10)]' foo.fits bitpix=8 &lt; /dev/null or   funimage /dev/null'[TEXT(x:I:10,y:I:10)]' foo.fits bitpix=8</p><p>You also can use either of these methods to generate a region mask simply by appending a region inside the filter brackets and specfying <strong>mask=all</strong> along with the bitpix. For example, the following command will generate a 10x10 char mask using 3 regions:</p><p>  funimage stdin'[TEXT(x:I:10,y:I:10),cir(5,5,4),point(10,1),-cir(5,5,2)]' &#92;   foo.fits bitpix=8,mask=all &lt; /dev/null</p><p>The resulting mask looks like this:</p><p>  fundisp foo.fits            1      2      3      4      5      6      7      8      9     10       ------ ------ ------ ------ ------ ------ ------ ------ ------ ------   10:      0      0      0      0      0      0      0      0      0      0    9:      0      0      0      0      0      0      0      0      0      0    8:      0      0      1      1      1      1      1      0      0      0    7:      0      1      1      1      1      1      1      1      0      0    6:      0      1      1      0      0      0      1      1      0      0    5:      0      1      1      0      0      0      1      1      0      0    4:      0      1      1      0      0      0      1      1      0      0    3:      0      1      1      1      1      1      1      1      0      0    2:      0      0      1      1      1      1      1      0      0      0    1:      0      0      0      0      0      0      0      0      0      2</p><p>You can use <strong>funimage</strong> to create 1D image projections along the x or y axis using the <strong>\-p [x|y]</strong> switch. This capability works for both images and tables. For example consider a \s-1FITS\s0 table named ev.fits containing the following rows:</p><p>         X        Y   -------- --------          1        1          1        2          1        3          1        4          1        5          2        2          2        3          2        4          2        5          3        3          3        4          3        5          4        4          4        5          5        5</p><p>A corresponding 5x5 image, called dim2.fits, would therefore contain:</p><p>              1          2          3          4          5      ---------- ---------- ---------- ---------- ----------   5:          1          1          1          1          1   4:          1          1          1          1          0   3:          1          1          1          0          0   2:          1          1          0          0          0   1:          1          0          0          0          0</p><p>A projection along the y axis can be performed on either the table or the image:</p><p>  funimage -p y ev.fits stdout | fundisp stdin               1          2          3          4          5      ---------- ---------- ---------- ---------- ----------   1:          1          2          3          4          5</p><p>  funimage -p y dim2.fits stdout | fundisp stdin               1          2          3          4          5      ---------- ---------- ---------- ---------- ----------   1:          1          2          3          4          5</p><p>Furthermore, you can create a 1D image projection along any column of a table by using the <strong>bincols=[column]</strong> filter specification and specifying a single column. For example, the following command projects the same 1D image along the y axis of a table as use of the <strong>\-p y</strong> switch:</p><p>  funimage ev.fits'[bincols=y]' stdout | fundisp stdin               1          2          3          4          5      ---------- ---------- ---------- ---------- ----------   1:          1          2          3          4          5</p><p>Examples:</p><p>Create a \s-1FITS\s0 image from a \s-1FITS\s0 binary table:</p><p>  [sh] funimage test.ev test.fits</p><p>Display the \s-1FITS\s0 image generated from a blocked section of \s-1FITS\s0 binary table:</p><p>  [sh]  funimage "test.ev[2:8,3:7,2]" stdout | fundisp stdin                     1         2         3             --------- --------- ---------          1:        20        28        36          2:        28        36        44</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO funimage&hellip;</h2>
        <div class="sectioncontent">
<p>See <a href="../man7/funtools.7.html"><strong>funtools</strong>(7)</a> for a list of Funtools help pages</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="funhist.1.html"><span aria-hidden="true">&larr;</span> funhist.1: Create a 1d histogram of a column (from a fits binary table or raw event file) or an image</a></li>
   <li class="next"><a href="funindex.1.html">funindex.1: Create an index for a column of a fits binary table <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
