<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>git-merge-base: Find as good common ancestors as possible for a merge</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Find as good common ancestors as possible for a merge">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="git-merge-base (1) manual">
  <meta name="twitter:description" content="Find as good common ancestors as possible for a merge">
  <meta name="twitter:image" content="https://www.carta.tech/images/git-man-git-merge-base-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/git-merge-base.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="git-merge-base (1) manual" />
  <meta property="og:description" content="Find as good common ancestors as possible for a merge" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/git-man-git-merge-base-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">git-merge-base<small> (1)</small></h1>
        <p class="lead">Find as good common ancestors as possible for a merge</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/git-merge-base.1.html">
      <span itemprop="name">git-merge-base: Find as good common ancestors as possible for a merge</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/git-man/">
      <span itemprop="name">git-man</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/git-merge-base.1.html">
      <span itemprop="name">git-merge-base: Find as good common ancestors as possible for a merge</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<em>git merge-base</em> [-a|--all] &lt;commit&gt; &lt;commit&gt;...
<em>git merge-base</em> [-a|--all] --octopus &lt;commit&gt;...
<em>git merge-base</em> --is-ancestor &lt;commit&gt; &lt;commit&gt;
<em>git merge-base</em> --independent &lt;commit&gt;...
<em>git merge-base</em> --fork-point &lt;ref&gt; [&lt;commit&gt;]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>git merge-base</em> finds best common ancestor(s) between two commits to use in a three-way merge. One common ancestor is <em>better</em> than another common ancestor if the latter is an ancestor of the former. A common ancestor that does not have any better common ancestor is a <em>best common ancestor</em>, i.e. a <em>merge base</em>. Note that there can be more than one merge base for a pair of commits.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPERATION MODES</h2>
        <div class="sectioncontent">
<p>As the most common special case, specifying only two commits on the command line means computing the merge base between the given two commits.</p><p>More generally, among the two commits to compute the merge base from, one is specified by the first commit argument on the command line; the other commit is a (possibly hypothetical) commit that is a merge across all the remaining commits on the command line.</p><p>As a consequence, the <em>merge base</em> is not necessarily contained in each of the commit arguments if more than two commits are specified. This is different from <a href="../man1/git-show-branch.1.html"><strong>git-show-branch</strong>(1)</a> when used with the --merge-base option.</p><p>--octopus</p><p>Compute the best common ancestors of all supplied commits, in preparation for an n-way merge. This mimics the behavior of <em>git show-branch --merge-base</em>.</p><p>--independent</p><p>Instead of printing merge bases, print a minimal subset of the supplied commits with the same ancestors. In other words, among the commits given, list those which cannot be reached from any other. This mimics the behavior of <em>git show-branch --independent</em>.</p><p>--is-ancestor</p><p>Check if the first &lt;commit&gt; is an ancestor of the second &lt;commit&gt;, and exit with status 0 if true, or with status 1 if not. Errors are signaled by a non-zero status that is not 1.</p><p>--fork-point</p><p>Find the point at which a branch (or any history that leads to &lt;commit&gt;) forked from another branch (or any reference) &lt;ref&gt;. This does not just look for the common ancestor of the two commits, but also takes into account the reflog of &lt;ref&gt; to see if the history leading to &lt;commit&gt; forked from an earlier incarnation of the branch &lt;ref&gt; (see discussion on this mode below).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>-a, --all</p><p>Output all merge bases for the commits, instead of just one.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISCUSSION</h2>
        <div class="sectioncontent">
<p>Given two commits <em>A</em> and <em>B</em>, git merge-base A B will output a commit which is reachable from both <em>A</em> and <em>B</em> through the parent relationship.</p><p>For example, with this topology:</p>
<pre>
         o---o---o---B
        /
---o---1---o---o---o---A
</pre>
<p>the merge base between <em>A</em> and <em>B</em> is <em>1</em>.</p><p>Given three commits <em>A</em>, <em>B</em> and <em>C</em>, git merge-base A B C will compute the merge base between <em>A</em> and a hypothetical commit <em>M</em>, which is a merge between <em>B</em> and <em>C</em>. For example, with this topology:</p>
<pre>
       o---o---o---o---C
      /
     /   o---o---o---B
    /   /
---2---1---o---o---o---A
</pre>
<p>the result of git merge-base A B C is <em>1</em>. This is because the equivalent topology with a merge commit <em>M</em> between <em>B</em> and <em>C</em> is:</p>
<pre>
       o---o---o---o---o
      /                 &#92;
     /   o---o---o---o---M
    /   /
---2---1---o---o---o---A
</pre>
<p>and the result of git merge-base A M is <em>1</em>. Commit <em>2</em> is also a common ancestor between <em>A</em> and <em>M</em>, but <em>1</em> is a better common ancestor, because <em>2</em> is an ancestor of <em>1</em>. Hence, <em>2</em> is not a merge base.</p><p>The result of git merge-base --octopus A B C is <em>2</em>, because <em>2</em> is the best common ancestor of all commits.</p><p>When the history involves criss-cross merges, there can be more than one <em>best</em> common ancestor for two commits. For example, with this topology:</p>
<pre>
---1---o---A
    &#92; /
     X
    / &#92;
---2---o---o---B
</pre>
<p>both <em>1</em> and <em>2</em> are merge-bases of A and B. Neither one is better than the other (both are <em>best</em> merge bases). When the --all option is not given, it is unspecified which best one is output.</p><p>A common idiom to check "fast-forward-ness" between two commits A and B is (or at least used to be) to compute the merge base between A and B, and check if it is the same as A, in which case, A is an ancestor of B. You will see this idiom used often in older scripts.</p>
<pre>
A=$(git rev-parse --verify A)
if test "$A" = "$(git merge-base A B)"
then
        ... A is an ancestor of B ...
fi
</pre>
<p>In modern git, you can say this in a more direct way:</p>
<pre>
if git merge-base --is-ancestor A B
then
        ... A is an ancestor of B ...
fi
</pre>
<p>instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISCUSSION ON FORK-POINT MODE</h2>
        <div class="sectioncontent">
<p>After working on the topic branch created with git checkout -b topic origin/master, the history of remote-tracking branch origin/master may have been rewound and rebuilt, leading to a history of this shape:</p>
<pre>
                 o---B1
                /
---o---o---B2--o---o---o---B (origin/master)
        &#92;
         B3
          &#92;
           Derived (topic)
</pre>
<p>where origin/master used to point at commits B3, B2, B1 and now it points at B, and your topic branch was started on top of it back when origin/master was at B3. This mode uses the reflog of origin/master to find B3 as the fork point, so that the topic can be rebased on top of the updated origin/master by:</p>
<pre>
$ fork_point=$(git merge-base --fork-point origin/master topic)
$ git rebase --onto origin/master $fork_point topic
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO git-merge-base&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/git-rev-list.1.html"><strong>git-rev-list</strong>(1)</a>, <a href="../man1/git-show-branch.1.html"><strong>git-show-branch</strong>(1)</a>, <a href="../man1/git-merge.1.html"><strong>git-merge</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GIT</h2>
        <div class="sectioncontent">
<p>Part of the <a href="../man1/git.1.html"><strong>git</strong>(1)</a> suite</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="git-merge.1.html"><span aria-hidden="true">&larr;</span> git-merge.1: Join two or more development histories together</a></li>
   <li class="next"><a href="git-merge-file.1.html">git-merge-file.1: Run a three-way file merge <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
