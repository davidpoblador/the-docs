<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>duply: A shell frontend to duplicity for simplified backups</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A shell frontend to duplicity for simplified backups">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="duply (1) manual">
  <meta name="twitter:description" content="A shell frontend to duplicity for simplified backups">
  <meta name="twitter:image" content="https://www.carta.tech/images/duply-duply-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/duply.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="duply (1) manual" />
  <meta property="og:description" content="A shell frontend to duplicity for simplified backups" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/duply-duply-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">duply<small> (1)</small></h1>
        <p class="lead">A shell frontend to duplicity for simplified backups</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/duply.1.html">
      <span itemprop="name">duply: A shell frontend to duplicity for simplified backups</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/duply/">
      <span itemprop="name">duply</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/duply.1.html">
      <span itemprop="name">duply: A shell frontend to duplicity for simplified backups</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>duply</strong> <em>profile</em> <strong>create</strong></p><p><strong>duply</strong> <em>profile command [options ...]</em></p><p><strong>duply</strong> <em>profile command[_command_...] [options ...]</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Duply</strong> deals as a wrapper for the mighty duplicity magic. It simplifies running duplicity with cron or on command line by:</p>
<pre>
  - keeping recurring settings in profiles per backup job
  - enabling batch operations eg. backup_verify_purge
  - executing pre/post scripts for every command
  - precondition checking for flawless duplicity operation
</pre>
<p>For each backup job one configuration profile must be created. The profile folder will be stored under <em>~/.duply/«profile»</em> (where '~' is the current users home directory).</p><p><em>Hint</em>: If the folder <em>/etc/duply</em> exists, the profiles for the superuser root will be searched and created there.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>First time usage (profile creation):</p><p>    duply &lt;profile&gt; create</p><p>General usage in single mode (see \s-1EXAMPLES\s0):</p><p>    duply &lt;profile&gt; &lt;command&gt; [&lt;options&gt; ...]</p><p>General usage in batch mode joining commands with '_' (see \s-1EXAMPLES\s0):</p><p>    duply &lt;profile&gt; &lt;command&gt;[[_|+|-]&lt;command&gt;[_|+|-]...] [&lt;options&gt; ...]</p><p>For batches the conditional separators can also be written as pseudo commands and(+), or(-). See \s-1SEPARATORS\s0 for details.</p><p>Non <strong>duply</strong> options are passed on to duplicity (see \s-1OPTIONS\s0). All config parameters can also be defined in the environment instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEPARATORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>_ (underscore)</strong>
  </dt>
  <dd>
    <p>neutral separator</p>
  </dd>
  <dt>
    <strong>+ (plus sign), _and_</strong>
  </dt>
  <dd>
    <p>conditional \s-1AND\s0; the next command will only be executed if the previous succeeded</p>
  </dd>
  <dt>
    <strong>- (minus sign), _or_</strong>
  </dt>
  <dd>
    <p>conditional \s-1OR\s0; the next command will only be executed if the previous failed</p>
  </dd>

</dl>
<p>Example: 'pre+bkp-verify_post' translates to 'pre_and_bkp_or_verify_post'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROFILE</h2>
        <div class="sectioncontent">
<h3>location for profiles</h3>
<p>Indicated by a path or a profile name i.e. <em>sample</em>, which is resolved to <em>~/.duply/sample</em> ('~' expands to environment variable $HOME).</p><p>Superuser root can place profiles under <em>/etc/duply</em>. Simply create the folder manually before running duply as superuser.</p><p>\s-1ATTENTION:\s0 Already existing profiles in root's profile folder will cease to work unless they are moved to the new location manually.</p>
<h3>using profiles</h3>
<p>Usually only the profile name will be used:</p><p>    duply humbug backup</p><p>Alternatively a <em>path</em> might be used. This might be useful for quick testing, restoring or exotic locations. Shell expansion should work as usual:</p><p>    duply ~/.duplytest/humbug backup</p><p>\s-1ATTENTION:\s0 The path must contain at least one '/', e.g <em>./test</em> instead of only <em>test</em>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>usage</strong>
  </dt>
  <dd>
    <p>Get usage help text.</p>
  </dd>
  <dt>
    <strong>and/or</strong>
  </dt>
  <dd>
    <p>Pseudo commands for better batch cmd readability (see \s-1SEPARATORS\s0).</p>
  </dd>
  <dt>
    <strong>create</strong>
  </dt>
  <dd>
    <p>Creates a configuration profile.</p>
  </dd>
  <dt>
    <strong>backup</strong>
  </dt>
  <dd>
    <p>Backup with pre/post script execution (as batch the same as: pre_bkp_post)</p><ul>
<li><p>as <em>full</em> backup if parameter full_if_older matches or no earlier backup is found.</p></li><li><p>as <em>incremental</em> backup in all other cases.</p></li>
</ul>
  </dd>
  <dt>
    <strong>bkp</strong>
  </dt>
  <dd>
    <p>As above but without executing pre/post scripts.</p>
  </dd>
  <dt>
    <strong>full</strong>
  </dt>
  <dd>
    <p>Force full backup.</p>
  </dd>
  <dt>
    <strong>incr</strong>
  </dt>
  <dd>
    <p>Force incremental backup.</p>
  </dd>
  <dt>
    <strong>pre</strong>
  </dt>
  <dd>
    <p>Execute only script '&lt;profile&gt;/pre' (for debugging purposes).</p>
  </dd>
  <dt>
    <strong>post</strong>
  </dt>
  <dd>
    <p>Execute only script '&lt;profile&gt;/post' (for debugging purposes).</p>
  </dd>
  <dt>
    <strong>list</strong> <em>[«age»]</em>
  </dt>
  <dd>
    <p>List all files in backup (as it was at <em>age</em>, default: now).</p>
  </dd>
  <dt>
    <strong>status</strong>
  </dt>
  <dd>
    <p>Print backup sets and chains currently in repository.</p>
  </dd>
  <dt>
    <strong>verify</strong> <em>[«age»]</em> <em>[--compare-data]</em>
  </dt>
  <dd>
    <p>List files changed, since <em>age</em> if given.</p>
  </dd>
  <dt>
    <strong>verifyPath</strong> <em>[«rel_path_in_bkp»]</em> <em>[«local_path»]</em> <em>[«age»]</em> <em>[--compare-data]</em>
  </dt>
  <dd>
    <p>List changes of a file or folder path in backup compared to a local path, since <em>age</em> if given.</p>
  </dd>
  <dt>
    <strong>restore</strong> <em>«target_path»</em> <em>[«age»]</em>
  </dt>
  <dd>
    <p>Restore the complete backup to <em>target_path</em> (as it was at <em>age</em>).</p>
  </dd>
  <dt>
    <strong>fetch</strong> <em>src_path target_path</em> <em>[«age»]</em>
  </dt>
  <dd>
    <p>Fetch single file/folder from backup (as it was at <em>age</em>).</p>
  </dd>
  <dt>
    <strong>purge</strong> <em>[«max_age»]</em> <em>[--force]</em>
  </dt>
  <dd>
    <p>List outdated backup archives (older than <em>max_age</em>). Use option <em>--force</em> to actually delete these files.</p>
  </dd>
  <dt>
    <strong>purgeFull</strong> <em>[«max_full_backups»]</em> <em>[--force]</em>
  </dt>
  <dd>
    <p>List outdated backup files. <em>max_full_backups</em> being the number of full backups and associated incrementals to keep, counting in reverse chronological order. Use option <em>--force</em> to actually delete these files.</p>
  </dd>
  <dt>
    <strong>purgeIncr</strong> <em>[«max_fulls_with_incrs»]</em> <em>[--force]</em>
  </dt>
  <dd>
    <p>List outdated incremental backup files. <em>max_fulls_with_incrs</em> being the number of full backups which associated incrementals  will be kept, counting in reverse chronological order. Use option <em>--force</em> to actually delete these files.</p>
  </dd>
  <dt>
    <strong>cleanup</strong> <em>[--force]</em>
  </dt>
  <dd>
    <p>List broken backup chain files archives (e.g. after unfinished run). Use option <em>--force</em> to actually delete these files.</p>
  </dd>
  <dt>
    <strong>version</strong>
  </dt>
  <dd>
    <p>Show version information of <strong>duply</strong> and needed programs.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>--force</strong>
  </dt>
  <dd>
    <p>Passed to duplicity (see commands: purge, purge-full, purge-incr, cleanup).</p>
  </dd>
  <dt>
    <strong>--preview</strong>
  </dt>
  <dd>
    <p>Do nothing but print out generated duplicity command lines.</p>
  </dd>
  <dt>
    <strong>--disable-encryption</strong>
  </dt>
  <dd>
    <p>Disable encryption, override profile settings.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TIME FORMATS</h2>
        <div class="sectioncontent">
<p>For all time related parameters like age, max_age etc. refer to the duplicity manpage for all available formats. Here some examples:</p><p>  · 2002-01-25T07:00:00+02:00 (full date time format string)   · 2002/3/5 (date string YYYY/MM/DD)   · 12D (interval, 12 days ago)   · 1h78m (interval, 1 hour 78 minutes ago)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PRE/POST SCRIPTS</h2>
        <div class="sectioncontent">
<p>Useful internal duply variables will be readable in the scripts. Some of interest may be</p><p>   CONFDIR, SOURCE, TARGET_URL_&lt;PROT|HOSTPATH|USER|PASS&gt;,    GPG_&lt;KEYS_ENC|KEY_SIGN|PW&gt;, CMD_&lt;PREV|NEXT&gt;, CMD_ERR</p><p>The CMD_* variables were introduced to allow different actions according to the command the scripts were attached to e.g. 'pre_bkp_post_pre_verify_post' will call the pre script two times, with \s-1CMD_NEXT\s0 variable set to 'bkp' on the first and to 'verify' on the second run. \s-1CMD_ERR\s0 holds the exit code of the \s-1CMD_PREV\s0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Create profile 'humbug':</p><p>    duply humbug create</p><p>and then edit the resulting <em>conf</em> file of this profile.</p><p>Backup 'humbug' now:</p><p>    duply humbug backup</p><p>List available backup sets of profile 'humbug':</p><p>    duply humbug status</p><p>List and delete obsolete backup archives of 'humbug':</p><p>    duply humbug purge --force</p><p>Restore latest backup of 'humbug' to /mnt/restore:</p><p>    duply humbug restore /mnt/restore</p><p>Restore /etc/passwd of 'humbug' from 4 days ago to /root/pw:</p><p>    duply humbug fetch etc/passwd /root/pw 4D</p><p>See <em>man duplicity</em>, section \s-1TIME\s0 \s-1FORMATS\s0 for the time format.</p><p>A one line <em>batch job</em> on 'humbug' for cron execution:</p><p>    duply humbug backup_verify_purge --force</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>Files in the profile folder(~/.duply/&lt;profile&gt;):</p><p>  conf .......... main profile configuration file   pre ........... pre script (see above for details)   post .......... post script (see above for details)   gpgkey.*.asc .. exported GnuPG key file(s)   exclude ....... a globbing list of included or excluded files/folders</p><p>The rules for the <em>exclude</em> file can be found in <em>man duplicity</em>, section \s-1FILE\s0 \s-1SELECTION\s0).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IMPORTANT</h2>
        <div class="sectioncontent">
<p>Copy the <em>whole</em> profile folder after the first backup to a safe place. It contains everything needed to restore your backups. You will need it if you have to restore the backup from another system (e.g. after a system crash). Keep access to these files restricted as they contain <em>all</em> information (gpg data, ftp data) to access and modify your backups.</p><p>Repeat this step after <em>all</em> configuration changes. Some configuration options are crucial for restoration.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>This program is still in development. If you find bugs write a bug report on:</p>
<pre>
  http://sourceforge.net/projects/ftplicity/.
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>For newer versions see http://sourceforge.net/projects/ftplicity/.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT and LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2006 Christiane Ruetten, 2008-2014 Edgar Soldin</p><p>This package is free software; you can redistribute it and/or modify it under the terms of the \s-1GNU\s0 General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>On Debian systems, the complete text of the \s-1GNU\s0 General Public License version 2 can be found in the file `/usr/share/common-licenses/GPL-2'.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Duply was written by Christiane Ruetten (initial version, named ftplicity) and Edgar Soldin.</p><p>This manual page was written by Joachim Wiedorn &lt;ad_debian at joonet.de&gt; for the Debian project (and may be used by others).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO duply&hellip;</h2>
        <div class="sectioncontent">
<p><em>duplicity</em>\|(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dupload.1.html"><span aria-hidden="true">&larr;</span> dupload.1: Utility to upload debian packages</a></li>
   <li class="next"><a href="dupvserver.1.html">dupvserver.1: Creates a new debian vserver by copying an other one. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
