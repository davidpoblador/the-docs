<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>surface: Adjustable tension continuous curvature surface gridding algorithm</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Adjustable tension continuous curvature surface gridding algorithm">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="surface (1gmt) manual">
  <meta name="twitter:description" content="Adjustable tension continuous curvature surface gridding algorithm">
  <meta name="twitter:image" content="https://www.carta.tech/images/gmt-manpages-surface-1gmt.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1gmt/gmt-manpages-surface.1gmt.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="surface (1gmt) manual" />
  <meta property="og:description" content="Adjustable tension continuous curvature surface gridding algorithm" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gmt-manpages-surface-1gmt.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">surface<small> (1gmt)</small></h1>
        <p class="lead">Adjustable tension continuous curvature surface gridding algorithm</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/surface.1gmt.html">
      <span itemprop="name">surface: Adjustable tension continuous curvature surface gridding algorithm</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gmt-manpages/">
      <span itemprop="name">gmt-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/surface.1gmt.html">
      <span itemprop="name">surface: Adjustable tension continuous curvature surface gridding algorithm</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>surface</strong> [ <em>xyzfile</em> ] <strong>-G</strong><em>outputfile.grd</em> <strong>-I</strong><em>x_inc</em>[<strong>m|c</strong>][/<em>y_inc</em>[<strong>m|c</strong>]] <strong>-R</strong><em>west/east/south/north</em>[<strong>r</strong>] [ <strong>-A</strong><em>aspect_ratio</em> ] [ <strong>-C</strong><em>convergence_limit</em> ] [ <strong>-H</strong>[<em>nrec</em>] ] [ <strong>-L</strong> ] [ <strong>-Ll</strong><em>lower</em> ] [ <strong>-Lu</strong><em>upper</em> ] [ <strong>-N</strong><em>max_iterations</em> ] [ <strong>-Q</strong> ] [ <strong>-S</strong><em>search_radius</em>[<strong>m</strong>] ] [ <strong>-T</strong><em>tension_factor</em>[<strong>ib</strong>] ] [ <strong>-V</strong>[<strong>l</strong>] ] [ <strong>-Z</strong><em>over-relaxation_factor</em> ] [ <strong>-:</strong> ] [ <strong>-bi</strong>[<strong>s</strong>][<em>n</em>] ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>surface</strong> reads randomly-spaced (x,y,z) triples from standard input [or <em>xyzfile</em>] and produces a binary grdfile of gridded values z(x,y) by solving:</p>
<pre>
        (1 - T) * L (L (z)) + T * L (z) = 0
</pre>
<p>where T is a tension factor between 0 and 1, and L indicates the Laplacian operator. T = 0 gives the "minimum curvature" solution which is equivalent to SuperMISP and the ISM packages. Minimum curvature can cause undesired oscillations and false local maxima or minima (See Smith and Wessel, 1990), and you may wish to use T &gt; 0 to suppress these effects. Experience suggests T ~ 0.25 usually looks good for potential field data and T should be larger (T ~ 0.35) for steep topography data. T = 1 gives a harmonic surface (no maxima or minima are possible except at control data points). It is recommended that the user pre-process the data with <strong>blockmean</strong>, <strong>blockmedian</strong>, or <strong>blockmode</strong> to avoid spatial aliasing and eliminate redundant data. You may impose lower and/or upper bounds on the solution. These may be entered in the form of a fixed value, a grdfile with values, or simply be the minimum/maximum input data values.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>xyzfile</em></p>
  </dt>
  <dd>
    <p>3 column ASCII file [or binary, see <strong>-b</strong>] holding (x,y,z) data values. If no file is specified, <strong>surface</strong> will read from standard input.</p>
  </dd>
  <dt>
    <p><strong>-G</strong></p>
  </dt>
  <dd>
    <p>Output file name. Output is a binary 2-D <em>.grd</em> file.</p>
  </dd>
  <dt>
    <p><strong>-I</strong></p>
  </dt>
  <dd>
    <p><em>x_inc</em> [and optionally <em>y_inc</em>] is the grid spacing. Append <strong>m</strong> to indicate minutes or <strong>c</strong> to indicate seconds.</p>
  </dd>
  <dt>
    <p><strong>-R</strong></p>
  </dt>
  <dd>
    <p><em>west, east, south,</em> and <em>north</em> specify the Region of interest. To specify boundaries in degrees and minutes [and seconds], use the dd:mm[:ss] format. Append <strong>r</strong> if lower left and upper right map coordinates are given instead of wesn.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-A</strong></p>
  </dt>
  <dd>
    <p>Aspect ratio. If desired, grid anisotropy can be added to the equations. Enter <em>aspect_ratio</em>, where dy = dx / <em>aspect_ratio</em> relates the grid dimensions. [Default = 1 assumes isotropic grid.]</p>
  </dd>
  <dt>
    <p><strong>-C</strong></p>
  </dt>
  <dd>
    <p>Convergence limit. Iteration is assumed to have converged when the maximum absolute change in any grid value is less than <em>convergence_limit</em>. (Units same as data z units). [Default is scaled to 0.1 percent of typical gradient in input data.]</p>
  </dd>
  <dt>
    <p><strong>-H</strong></p>
  </dt>
  <dd>
    <p>Input file(s) has Header record(s). Number of header records can be changed by editing your .gmtdefaults file. If used, <strong>GMT</strong> default is 1 header record. Not used with binary data.</p>
  </dd>
  <dt>
    <p><strong>-L</strong></p>
  </dt>
  <dd>
    <p>Without any modifier, this option indicates that x is longitude and may be periodic in 360 degrees. With optional arguments it will instead impose limits on the output solution. <strong>l</strong><em>lower</em> sets the lower bound. <em>lower</em> can be the name of a grdfile with lower bound values, a fixed value, <strong>d</strong> to set to minimum input value, or <strong>u</strong> for unconstrained [Default]. <strong>u</strong><em>upper</em> sets the upper bound and can be the name of a grdfile with upper bound values, a fixed value, <strong>d</strong> to set to maximum input value, or <strong>u</strong> for unconstrained [Default].</p>
  </dd>
  <dt>
    <p><strong>-N</strong></p>
  </dt>
  <dd>
    <p>Number of iterations. Iteration will cease when <em>convergence_limit</em> is reached or when number of iterations reaches <em>max_iterations</em>. [Default is 250.]</p>
  </dd>
  <dt>
    <p><strong>-Q</strong></p>
  </dt>
  <dd>
    <p>Suggest grid dimensions which have a highly composite greatest common factor. This allows surface to use several intermediate steps in the solution, yielding faster run times and better results. The sizes suggested by <strong>-Q</strong> can be achieved by altering <strong>-R</strong> and/or <strong>-I</strong>. You can recover the <strong>-R</strong> and <strong>-I</strong> you want later by using grdsample or grdcut on the output of surface.</p>
  </dd>
  <dt>
    <p><strong>-S</strong></p>
  </dt>
  <dd>
    <p>Search radius. Enter <em>search_radius</em> in same units as x,y data; append <strong>m</strong> to indicate minutes. This is used to initialize the grid before the first iteration; it is not worth the time unless the grid lattice is prime and cannot have regional stages. [Default = 0.0 and no search is made.]</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Tension factor[s]. These must be between 0 and 1. Tension may be used in the interior solution (above equation, where it suppresses spurious oscillations) and in the boundary conditions (where it tends to flatten the solution approaching the edges). Using zero for both values results in a minimum curvature surface with free edges, i.e. a natural bicubic spline. Use <strong>-T</strong><em>tension_factor</em><strong>i</strong> to set interior tension, and <strong>-T</strong><em>tension_factor</em><strong>b</strong> to set boundary tension. If you do not append <strong>i</strong> or <strong>b</strong>, both will be set to the same value. [Default = 0 for both gives minimum curvature solution.]</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Selects verbose mode, which will send progress reports to stderr [Default runs "silently"]. <strong>-Vl</strong> will report the convergence after each iteration; <strong>-V</strong> will report only after each regional grid is converged.</p>
  </dd>
  <dt>
    <p><strong>-Z</strong></p>
  </dt>
  <dd>
    <p>Over-relaxation factor. This parameter is used to accelerate the convergence; it is a number between 1 and 2. A value of 1 iterates the equations exactly, and will always assure stable convergence. Larger values overestimate the incremental changes during convergence, and will reach a solution more rapidly but may become unstable. If you use a large value for this factor, it is a good idea to monitor each iteration with the <strong>-Vl</strong> option. [Default = 1.4 converges quickly and is almost always stable.]</p>
  </dd>
  <dt>
    <p><strong>-:</strong></p>
  </dt>
  <dd>
    <p>Toggles between (longitude,latitude) and (latitude,longitude) input/output. [Default is (longitude,latitude)]. Applies to geographic coordinates only.</p>
  </dd>
  <dt>
    <p><strong>-bi</strong></p>
  </dt>
  <dd>
    <p>Selects binary input. Append <strong>s</strong> for single precision [Default is double]. Append <em>n</em> for the number of columns in the binary file(s). [Default is 3 input columns].</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To grid 5 by 5 minute gravity block means from the ASCII data in hawaii_5x5.xyg, using a <em>tension_factor</em> = 0.25, a <em>convergence_limit</em> = 0.1 milligal, writing the result to a file called <em>hawaii_grd.grd</em>, and monitoring each iteration, try:</p><p>surface hawaii_5x5.xyg <strong>-R</strong>198/208/18/25 <strong>-I</strong>5<strong>m -G</strong>hawaii_grd.grd <strong>-T</strong>0.25 <strong>-C</strong>0.1 <strong>-VL</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p><strong>surface</strong> will complain when more than one data point is found for any node and suggest that you run <strong>blockmean</strong>, <strong>blockmedian</strong>, or <strong>blockmode</strong> first. If you did run <strong>blockm*</strong> and still get this message it usually means that your grid spacing is so small that you need more decimals in the output format used by <strong>blockm*</strong>. You may specify more decimal places by editing the parameter D_FORMAT in your .gmtdefaults file prior to running <strong>blockm*</strong>, or choose binary input and/or output using single or double precision storage.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO surface&hellip;</h2>
        <div class="sectioncontent">
<p><em>blockmean</em>(1gmt), <em>blockmedian</em>(1gmt), <em>blockmode</em>(1gmt), <em>gmt</em>(1gmt), <em>nearneighbor</em>(1gmt), <em>triangulate</em>(1gmt)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REFERENCES</h2>
        <div class="sectioncontent">
<p>Smith, W. H. F, and P. Wessel, 1990, Gridding with continuous curvature splines in tension, <em>Geophysics</em>, 55, 293-305.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gmt-surface.1gmt.html"><span aria-hidden="true">&larr;</span> surface.1gmt: Adjustable tension continuous curvature surface gridding algorithm</a></li>
   <li class="next"><a href="gmt-trend1d.1gmt.html">trend1d.1gmt: Fit a [weighted] [robust] polynomial [or fourier] model for y = f(x) to xy[w] data. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
