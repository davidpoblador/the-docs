<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>nnadmin: Nn database administration</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Nn database administration">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="nnadmin (1m) manual">
  <meta name="twitter:description" content="Nn database administration">
  <meta name="twitter:image" content="https://www.carta.tech/images/nn-nnadmin-1m.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1m/nnadmin.1m.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="nnadmin (1m) manual" />
  <meta property="og:description" content="Nn database administration" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nn-nnadmin-1m.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">nnadmin<small> (1m)</small></h1>
        <p class="lead">Nn database administration</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1m/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1m/nnadmin.1m.html">
      <span itemprop="name">nnadmin: Nn database administration</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nn/">
      <span itemprop="name">nn</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1m/nnadmin.1m.html">
      <span itemprop="name">nnadmin: Nn database administration</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>nnadmin</strong> [ <em>commands</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>nnadmin</em> is a control program for the <em>nnmaster</em>(1M) daemon which is responsible for building and maintaining the database used by the <em>nn</em>(1) news reader.</p><p><em>nnadmin</em> allows you to display extracts from the log file, display the "raw" contents of the database, make consistency checks on the database, instruct the running <em>nnmaster</em> to expire one or more groups, alter the options of the running <em>nnmaster</em>, and much more.</p><p><em>nnadmin</em> runs in two modes: interactive and non-interactive.</p><p>In interactive mode, simple one line menus are used to show the available operations which are then selected by typing the letter associated with the command (normally the first letter in the command name).</p><p>In non-interactive mode, the <em>commands</em> argument will be used as a series of key-strokes which are interpreted exactly as if they were typed in from the keyboard in interactive mode.  For example, to stop the <em>nnmaster</em>, the following invocation of nnadmin can be used:</p><p>	<em>nnadmin</em> MK</p><p>which will select the (M)aster submenu from the main menu, and then the (K)ill entry from the submenu.</p><p>In non-interactive mode, the menus are not displayed and the commands are not echoed!  <em>nnadmin</em> will exit when there are no more key-strokes to be read from the <em>commands</em> argument.  It is not possible to specify a group name in the <em>commands</em> argument, so the functionalities of <em>nnadmin</em> that relates to specific groups are only available in interactive mode.</p><p>Some "dangerous" commands will require that you confirm them by following them by "Y" on the command line.  The most noteable are IY (initialize database) and EY (expire all groups).  These commands will be marked with a <strong>[Y]</strong> following the command name.</p><p>You can also invoke an interactive <em>nnadmin</em> using the <strong>:admin</strong> command in <em>nn</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SHELL ESCAPES</h2>
        <div class="sectioncontent">
<p>At all prompts you can hit `!' to spawn a subshell.</p><p>The working directory of the subshell will be changed to the database directory when invoked from the MASTER or DUMP menus, and it will changed to the group's spool directory (if it exists) when invoked from the GROUP menu.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MAIN MENU</h2>
        <div class="sectioncontent">
<p>From the main menu (identified by the <strong>ADMIN</strong> prompt) you can select the following operations:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>C)onf</strong></p>
  </dt>
  <dd>
    <p>Show current configuration parameters such as directories, files, programs, network usage, etc.</p>
  </dd>
  <dt>
    <p><strong>E)xpire [Y]</strong></p>
  </dt>
  <dd>
    <p>Send a request to the <em>nnmaster</em> daemon to schedule (and run) expire for all groups in the database.</p>
  </dd>
  <dt>
    <p><strong>G)roups</strong></p>
  </dt>
  <dd>
    <p>Enter the GROUP submenu.</p>
  </dd>
  <dt>
    <p><strong>I)nit [Y]</strong></p>
  </dt>
  <dd>
    <p>Send a request to the <em>nnmaster</em> daemon to recollect all groups in the database.</p>
  </dd>
  <dt>
    <p><strong>L)og</strong></p>
  </dt>
  <dd>
    <p>Enter the LOG submenu.</p>
  </dd>
  <dt>
    <p><strong>M)aster</strong></p>
  </dt>
  <dd>
    <p>Enter the MASTER submenu.</p>
  </dd>
  <dt>
    <p><strong>Q)uit</strong></p>
  </dt>
  <dd>
    <p>Quit <em>nnadmin</em>.</p>
  </dd>
  <dt>
    <p><strong>S)tat</strong></p>
  </dt>
  <dd>
    <p>Print general statistics about the database.  See the section on Database Statistics below.</p>
  </dd>
  <dt>
    <p><strong>U)pdate</strong></p>
  </dt>
  <dd>
    <p>Update the incore copy of the database master index.</p>
  </dd>
  <dt>
    <p><strong>V)alidate</strong></p>
  </dt>
  <dd>
    <p>Make a thorough consistency check on the database.  If inconsistencies are found in a group, you will be asked whether a request should be sent to the <em>nnmaster</em> daemon to recollect the group (in non-interactive mode, requests will be sent automatically for all corrupted groups).</p>
  </dd>
  <dt>
    <p><strong>W)akeup</strong></p>
  </dt>
  <dd>
    <p>Send a wakeup signal to the <em>nnmaster</em> daemon to have it receive messages sent to it, perform the required actions, and then collect articles as necessary.</p>
  </dd>
  <dt>
    <p><strong>Z</strong> (silent validation)</p>
  </dt>
  <dd>
    <p>This operation is identical to the Validate operation, expect that no output is produced during the consistency check; this operation is used by the <em>nnmaster</em> to execute the -<strong>C</strong> option.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE MASTER MENU</h2>
        <div class="sectioncontent">
<p>The master menu (identified by the <strong>MASTER</strong> prompt) provides access to overall database information, and to send control messages to the <em>nnmaster</em> daemon.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>C)heck</strong></p>
  </dt>
  <dd>
    <p>In interactive mode and in verbose batch mode (<em>nnadmin</em> MC), print a message telling whether <em>nnmaster</em> is running or not. In silent batch mode (<em>nnadmin</em> =MC) exit with a status code of 0 if <em>nnmaster</em> is running and 1 otherwise; this may be useful is administrative scripts.</p>
  </dd>
  <dt>
    <p><strong>D)ump</strong></p>
  </dt>
  <dd>
    <p>Enter the DUMP submenu.</p>
  </dd>
  <dt>
    <p><strong>F)iles</strong></p>
  </dt>
  <dd>
    <p>Print a listing (using <em>ls</em>(1)) of all the data and index files in the database.</p>
  </dd>
  <dt>
    <p><strong>G)roup</strong></p>
  </dt>
  <dd>
    <p>Print the master index entry for a single group identified by its internal group number.</p>
  </dd>
  <dt>
    <p><strong>K)ill</strong></p>
  </dt>
  <dd>
    <p>Stop the <em>nnmaster</em> when it has finished its current task.</p>
  </dd>
  <dt>
    <p><strong>O)ptions</strong></p>
  </dt>
  <dd>
    <p>Change the runtime options of the running <em>nnmaster</em> daemon. Currently, only the value of the -r and -e options can be modified.</p>
  </dd>
  <dt>
    <p><strong>S)tat</strong></p>
  </dt>
  <dd>
    <p>Print general statistics about the database.  See the section on Database Statistics below.</p>
  </dd>
  <dt>
    <p><strong>T)race</strong></p>
  </dt>
  <dd>
    <p>Turn the trace option -t on or off in the running <em>nnmaster</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE DUMP MENU</h2>
        <div class="sectioncontent">
<p>The dump menu (identified by the <strong>DUMP</strong> prompt) allows you to print the master index entry for various selections of groups in the database.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>A)ll</strong></p>
  </dt>
  <dd>
    <p>Print all groups in the database.</p>
  </dd>
  <dt>
    <p><strong>E)mpty</strong></p>
  </dt>
  <dd>
    <p>Print the empty groups in the database.</p>
  </dd>
  <dt>
    <p><strong>H)oles</strong></p>
  </dt>
  <dd>
    <p>Print the groups where the `min' field in the active file is not the first article saved in the database (because it doesn't exist or because it is ignored for some other reason, e.g. bad or old).</p>
  </dd>
  <dt>
    <p><strong>I)gnored</strong></p>
  </dt>
  <dd>
    <p>Print groups which are ignored, either in the GROUPS file or because of some other condition (mainly no spool directory).</p>
  </dd>
  <dt>
    <p><strong>N)on-empty</strong></p>
  </dt>
  <dd>
    <p>Print the non-empty groups in the database.</p>
  </dd>
  <dt>
    <p><strong>V)alid</strong></p>
  </dt>
  <dd>
    <p>Print the groups which are present in the active file.</p>
  </dd>
  <dt>
    <p><strong>in(W)alid</strong></p>
  </dt>
  <dd>
    <p>Print the groups in the database which are not present in the active file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE LOG MENU</h2>
        <div class="sectioncontent">
<p>The log menu (identified by the <strong>LOG</strong> prompt) enables you the extract specific entries from the log file, and to truncate the log file.</p><p>The entries in the log file share the following format:</p><p>	&lt;class&gt;: &lt;date&gt; &lt;time&gt; (&lt;user&gt;): &lt;message&gt;</p><p>where &lt;class&gt; identifies the message class, the &lt;date&gt; and &lt;time&gt; specify when the entry was made, the &lt;user&gt; specifies who created the entry (the letter "M" denote the <em>nnmaster</em>), and the &lt;message&gt; is the text of the entry.</p><p>To extract the log file entries of a specific class, simply enter the letter identifying the class:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>A - admin to master communication</strong></p>
  </dt>
  <dd>
    <p>This class of messages are related to the sending of messages from an <em>nnadmin</em> program to the <em>nnmaster</em> daemon.</p>
  </dd>
  <dt>
    <p><strong>B - bad articles</strong></p>
  </dt>
  <dd>
    <p>Reports about bad articles which have been ignored or removed (controlled by the -<strong>b</strong> and -<strong>B</strong> options to <em>nnmaster</em>).</p>
  </dd>
  <dt>
    <p><strong>C - collection statistics</strong></p>
  </dt>
  <dd>
    <p>Statistics about collection of new articles.  The message has the format:</p><p>	Collect: <em>nnn</em> art, <em>ppp</em> gr, <em>ttt</em> s</p><p>meaning that <em>nnn</em> articles in <em>ppp</em> groups were collected in <em>ttt</em> seconds (real time).</p>
  </dd>
  <dt>
    <p><strong>E - fatal errors</strong></p>
  </dt>
  <dd>
    <p>Fatal errors encountered during operation.  These errors require manual intervention to be fixed (some of the fatal errors occur if thing that "cannot happen" happens anyway, and may indicate a bug in the software).</p>
  </dd>
  <dt>
    <p><strong>M - nnmaster messages.</strong></p>
  </dt>
  <dd>
    <p>Master start/stop messages.</p>
  </dd>
  <dt>
    <p><strong>N - NNTP related messages</strong></p>
  </dt>
  <dd>
    <p>Various messages related to the NNTP part of the nnmaster, mostly about lost connections and failed attempts to connect to the NNTP server.  These messages should only appear if you use NNTP, and your NNTP server is down for some reason.</p>
  </dd>
  <dt>
    <p><strong>O - old articles</strong></p>
  </dt>
  <dd>
    <p>Reports related to ignoring (and removing) old articles when building the database (controlled by the -<strong>O</strong> and -<strong>B</strong> options to <em>nnmaster</em>).</p>
  </dd>
  <dt>
    <p><strong>R - reports</strong></p>
  </dt>
  <dd>
    <p>Non-fatal error which enables the <em>nnmaster</em> to continue operation, but may prevent a user to run <em>nn</em> (file access problems).  Reported problems should be checked.  The most common report message will probably be</p><p>	some.group: no directory</p><p>which indicates that the spool directory for that group has disappeared (most likely because it has been rmgroup'ed).</p>
  </dd>
  <dt>
    <p><strong>T - trace output</strong></p>
  </dt>
  <dd>
    <p>Messages produced as a result of using the -t option on the <em>nnmaster</em>.  This is primarily for debugging purposes.</p>
  </dd>
  <dt>
    <p><strong>U - usage statistics</strong></p>
  </dt>
  <dd>
    <p>If <em>nn</em> is compiled with the STATISTICS option enabled, an entry will be made in the log file every time a user has spent more than five minutes on news reading.  The message will have the following format:</p><p>	USAGE <em>hours.minutes</em></p><p>Since it is possible to suspend <em>nn</em>, or leave the terminal while <em>nn</em> is active, <em>nn</em> tries to be intelligent when it calculates the usage time so it will reflect the actual time spent on news reading.  The usage statistics can be summarized using the <em>nnusage</em>(1M) program.</p>
  </dd>
  <dt>
    <p><strong>V - validation errors</strong></p>
  </dt>
  <dd>
    <p>When inconsistencies are detected in the database during validation, an entry for each corrupted group will be entered in the log file.</p>
  </dd>
  <dt>
    <p><strong>X - expire statistics</strong></p>
  </dt>
  <dd>
    <p>Messages similar to the Collect statistics reporting the result of running expire on the database.  Reports related to ignoring, removing, renumbering, and reactivation of groups are also given class X.</p>
  </dd>

</dl>
<p>To extract a specific entry class, <a href="../man1/grep.1.html"><strong>grep</strong>(1)</a> is used, so it may take a while on a large log file.</p><p>There are also a few special operations on the log file:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>G)roup</strong></p>
  </dt>
  <dd>
    <p>Extract the entries which refers to a specified group.</p>
  </dd>
  <dt>
    <p><strong>(1-9) tail</strong></p>
  </dt>
  <dd>
    <p>Invoke <a href="../man1/tail.1.html"><strong>tail</strong>(1)</a> to extract the last 10-90 entries in the log file.</p>
  </dd>
  <dt>
    <p><strong>space</strong></p>
  </dt>
  <dd>
    <p>Equivalent to <strong>1</strong> (list last 10 lines of log).</p>
  </dd>
  <dt>
    <p><strong>(.) all</strong></p>
  </dt>
  <dd>
    <p>Display the complete log file.</p>
  </dd>
  <dt>
    <p><strong>(@) clean [Y]</strong></p>
  </dt>
  <dd>
    <p>Move the Log file to Log.old, and create a new empty Log file.  If you want to clean out the old log file as well, simply repeat the clean operation (this will result in an empty Log.old file.)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE GROUP MENU</h2>
        <div class="sectioncontent">
<p>When you enter the group menu (identified by the <strong>GROUP</strong> prompt), <em>nnadmin</em> will prompt you for the name of a news group, which you can enter with the usual completion feature described in the <em>nn</em>(1) manual.  You can then perform the following operations on the specified group:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>C)lear_flag</strong></p>
  </dt>
  <dd>
    <p>Clear a group specific flag.  See the section on group flags below.</p>
  </dd>
  <dt>
    <p><strong>D)ata</strong></p>
  </dt>
  <dd>
    <p>Dump the contents of the data file containing the extracted article headers for the group.</p>
  </dd>
  <dt>
    <p><strong>E)xpire</strong></p>
  </dt>
  <dd>
    <p>Request the <em>nnmaster</em> to run expire on the group.</p>
  </dd>
  <dt>
    <p><strong>F)iles</strong></p>
  </dt>
  <dd>
    <p>List the files (using <em>ls</em>(1)) containing the index and data for the group.</p>
  </dd>
  <dt>
    <p><strong>G)roup</strong></p>
  </dt>
  <dd>
    <p>Switch to another group.</p>
  </dd>
  <dt>
    <p><strong>H)eader</strong></p>
  </dt>
  <dd>
    <p>Dump the master index entry for the group.</p>
  </dd>
  <dt>
    <p><strong>R)ecollect</strong></p>
  </dt>
  <dd>
    <p>Request the <em>nnmaster</em> to recollect all articles in the group.</p>
  </dd>
  <dt>
    <p><strong>S)et_flag</strong></p>
  </dt>
  <dd>
    <p>Set a group specific flag.  See the section on group flags below.</p>
  </dd>
  <dt>
    <p><strong>V)alidate</strong></p>
  </dt>
  <dd>
    <p>Perform validation on the group's database information.</p>
  </dd>
  <dt>
    <p><strong>Z)ap [Y]</strong></p>
  </dt>
  <dd>
    <p>Remove group from news system - this will be done by running the <em>rmgroup</em> program which must reside in the NEWS_LIB directory. Of course, this should be done with great caution.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INDIVIDUAL GROUP FLAGS</h2>
        <div class="sectioncontent">
<p>You can set and clear the following flags for individual groups to control the future behaviour of <em>nnmaster</em> on that group.</p><p>Notice that these flags will be reset to their default value if you reinitialize the database using <em>nnmaster</em> -I.  To change these flags permanently, they should be set or cleared in the GROUPS file.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>A)lways_digest</strong></p>
  </dt>
  <dd>
    <p>Normally, <em>nnmaster</em> will only attempt to split digests into individual articles if it can easily recognize an article as a digest. This requires that the word "digest" appears somewhere in the subject line, and that one of the first few lines in the body of the article loosely matches the subject.  A few news groups frequently receives digests which break one or both of these requirements.  To have <em>nnmaster</em> split these digests into individual articles anyway, you can turn on the "always digest" flag on these news groups. This will instruct <em>nnmaster</em> to treat <em>all</em> articles in the group as digests (naturally, articles which are then found not to contain other articles are still treated as normal articles.)</p>
  </dd>
  <dt>
    <p><strong>C)ontrol</strong></p>
  </dt>
  <dd>
    <p>This is a special flag for the control group.  It indicates that the "Newsgroups:" field in the article header cannot be trusted (it does not specify the groups to which the article has been posted.)</p>
  </dd>
  <dt>
    <p><strong>D)irectory missing</strong></p>
  </dt>
  <dd>
    <p>This flag indicates that the spool directory for the news group cannot be found (the group has probably been removed with <em>rmgroup</em>(1M)). It is set automatically be the <em>nnmaster</em> if it cannot access the directory.  When the flag is set, <em>nnmaster</em> completely ignores the group, so it can be used to disable news collection in specific groups.  If you recreate the group or the directory manually, you must also clear this flag to have the <em>nnmaster</em> recognize the group again.</p>
  </dd>
  <dt>
    <p><strong>M)oderated</strong></p>
  </dt>
  <dd>
    <p>Indicates that the group is moderated.  This flag is normally initialized automatically from the active file, and it should not be changed lightly.</p>
  </dd>
  <dt>
    <p><strong>N)ever_digest</strong></p>
  </dt>
  <dd>
    <p>This is the opposite of the "always digest" flag; when set, the <em>nnmaster</em> will never attempt to split any articles in that group into subarticles.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATABASE STATISTICS DISPLAY</h2>
        <div class="sectioncontent">
<p>When you select the (S)tat operation in the main or master menus, you will get some general statistics about the database:</p>
<dl class='dl-vertical'>
  <dt>
    <p>initialized</p>
  </dt>
  <dd>
    <p>The time when the database was last rebuild using <em>nnmaster</em> -I.</p>
  </dd>
  <dt>
    <p>last_scan, last_size</p>
  </dt>
  <dd>
    <p>The time stamp on the active file and its size the last time the <em>nnmaster</em> read it.</p>
  </dd>
  <dt>
    <p>no of groups</p>
  </dt>
  <dd>
    <p>The total number of groups in the database.</p>
  </dd>
  <dt>
    <p>Articles</p>
  </dt>
  <dd>
    <p>The total number of articles in all groups.  This is not an exact number, because it will count split digests as a single article (making the number too small), and it may count some articles that have been expired (making the number too large).</p>
  </dd>
  <dt>
    <p>Disk usage</p>
  </dt>
  <dd>
    <p>The total number of (1 kbyte) disk blocks occupied by the database.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MASTER INDEX ENTRIES</h2>
        <div class="sectioncontent">
<p>The master index entries displayed when you select the (H)eader operation in the master and group menus contain the following information:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>group_name  group_number</em></p>
  </dt>
  <dd>
    <p>The first line of the display will show the name of the group and the internal group number which is used to identify the group in the database.</p>
  </dd>
  <dt>
    <p>first/last art</p>
  </dt>
  <dd>
    <p>This is the numbers of the first and last article that are currently stored in the database.</p>
  </dd>
  <dt>
    <p>active info</p>
  </dt>
  <dd>
    <p>This is the numbers of the first and last article in the news system as read from the active file.  They will normally match the numbers above, but they may differ while the <em>nnmaster</em> is working on the group (or it has not yet collected all the articles in the group).</p>
  </dd>
  <dt>
    <p>Offsets: index-&gt;..., data-&gt;...</p>
  </dt>
  <dd>
    <p>These values show the starting position for the next write operation on the index and data files.  They are primarily used for consistency checking and recovery after a system crash, but after an "expire by rewrite" operation (expire method 2) which is performed "in-situ", the data and index files may physically be longer than the actual data stored in them.</p>
  </dd>
  <dt>
    <p>Flags:</p>
  </dt>
  <dd>
    <p>This shows the current flags set for this group.  If no flags are set, the field is omitted from the display.  One extra flag which was not explained above is the BLOCKED flag; it is a temporary locking flag set on a group by the <em>nnmaster</em> while it is updating the database files for that group to prevent <em>nn</em> clients to access that group.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RAW DATABASE DISPLAY</h2>
        <div class="sectioncontent">
<p>When you select the (D)ata operation on the group menu, you will get a combined display of the raw data and index files for that group.  The index file contains a single 32 bit value for each existing article number.  This value is an offset into the data file pointing to the header for the corresponding article.</p><p>When <em>nn</em> want to access the article from number N to the last article, it looks up the offset for article number N in the index file, and uses this as the starting point for reading article header information in the data file.  It then simply reads to the end of the data file in which the article headers for articles number N+1, N+2, and so on follows immediately after the header for article number N.</p><p>The article header information is presented in a very terse form; each of the output lines are described below for reference purposes:</p>
<dl class='dl-vertical'>
  <dt>
    <p>offset = <em>xxxx</em>    , article # = <em>nnnnn</em>   (type)</p>
  </dt>
  <dd>
    <p>This shows the offset into the data file and the article number.  The offset is stored in the index file for quick access.  If no <em>type</em> is printed it is a normal article.  Other types are: "digest header" and "digest sub-article".</p>
  </dd>
  <dt>
    <p>xpost(<em>count</em>):  <em>nnn</em>, <em>nnn</em>, <em>nnn</em>, ...</p>
  </dt>
  <dd>
    <p>Cross-postings to other groups are encoded as a list of internal group numbers.</p>
  </dd>
  <dt>
    <p>ts=<em>nn</em> hp=<em>nn</em> fp=<em>nn</em> lp=<em>nn</em> ref=<em>nn</em>[+Re] lines=<em>nn</em></p>
  </dt>
  <dd>
    <p>These values are used by <em>nn</em> to sort, present, and access an article:</p><p><strong>ts</strong> is the <em>time stamp</em> on the article; it is a simple encoding of the posting date and time found in the Date: field.</p><p><strong>hp</strong>, <strong>fp</strong>, and <strong>lp</strong> are offsets into the file containing the article text: the <em>header</em> position, <em>first text position</em>, and <em>last text position</em>. The first will be zero for normal articles, but not for articles in a split digest.  The last will be equal to the length of the file for normal articles, but not inside digests.</p><p><strong>ref</strong> is the number of references on the Reference: line.  If "+Re" follows the number, the subject line contained a "Re:" prefix which has been removed.</p>
  </dd>
  <dt>
    <p>Sender(<em>length</em>): <em>name</em></p>
  </dt>
  <dd>
    <p>The name of the sender in "ready to print" format, i.e. reduced to 16 characters as explained in the <em>nn</em> manual.</p>
  </dd>
  <dt>
    <p>Subj(<em>length</em>): <em>subject</em></p>
  </dt>
  <dd>
    <p>This is the full subject line from the article header (except for Re: prefixes in various formats).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>The $db, $lib, and $news used below are synonyms for the DB_DIRECTORY, LIB_DIRECTORY, and the news system's lib directories respectively.</p><p>$db/MASTER	Database master index</p><p>$db/GROUPS	News group names in MASTER file order</p><p>$db/DATA/<em>nnn</em>.x	Index file for group number <em>nnn</em></p><p>$db/DATA/<em>nnn</em>.d	Data file for group number <em>nnn</em></p><p>$master/GATE	Message channel from <em>nnadmin</em> to <em>nnmaster</em></p><p>$master/MPID	The process id of the <em>nnmaster</em> daemon.</p><p>$Log	The log file (truncate it regularly!)</p><p>The MASTER file contains a record for each news group, occurring in the same sequence as the group names in the GROUPS file.  The sequence also defines the group numbers used to identify the files in the database and in a few other places.</p><p>The GATE file will be created by <em>nnadmin</em> when needed, and removed by <em>nnmaster</em> when it has read it.  Therefore, to send a message to the <em>nnmaster</em> requires that you are allowed to write in the $master directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO nnadmin&hellip;</h2>
        <div class="sectioncontent">
<p>nn(1), <a href="../man1/nncheck.1.html"><strong>nncheck</strong>(1)</a>, <a href="../man1/nngrep.1.html"><strong>nngrep</strong>(1)</a>, <a href="../man1/nntidy.1.html"><strong>nntidy</strong>(1)</a></p><p>nnquery(1M), nnusage(1M), <a href="../man8/nnmaster.8.html"><strong>nnmaster</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNINGS</h2>
        <div class="sectioncontent">
<p>The GATE file is created with the owner and modes of the user that runs <em>nnadmin</em> which may cause problems if the owner of the <em>nnmaster</em> process (normally "news") is not allowed to read the created GATE file (a "umask" of 022 is ok.)  Unless you allow ordinary users to create files in the LIB directory where the GATE file resides, only the owner of the directory (normally "news") and "root" can use <em>nnadmin</em> to send messages to the <em>nnmaster</em>. However, to send a wakeup signal to the master, anybody can run</p><p>	<em>nnmaster</em> -w</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The user interface is completely out of line with the rest of the <em>nn</em> family, and the way to run <em>nnadmin</em> in the non-interactive mode is a bit bizarre.  This is not likely to change, because I believe there are more important things to do!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Kim F. Storm, Texas Instruments A/S, Denmark</p><p>E-mail: storm@texas.dk</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="nnacct.1m.html"><span aria-hidden="true">&larr;</span> nnacct.1m: News accounting and access authorization (nn)</a></li>
   <li class="next"><a href="nnstats.1m.html">nnstats.1m: Display nnmaster collection and expire statistics <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
