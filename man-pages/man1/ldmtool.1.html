<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ldmtool: A tool to manage microsoft windows dynamic disks</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A tool to manage microsoft windows dynamic disks">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ldmtool (1) manual">
  <meta name="twitter:description" content="A tool to manage microsoft windows dynamic disks">
  <meta name="twitter:image" content="https://www.carta.tech/images/ldmtool-ldmtool-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ldmtool.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ldmtool (1) manual" />
  <meta property="og:description" content="A tool to manage microsoft windows dynamic disks" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ldmtool-ldmtool-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ldmtool<small> (1)</small></h1>
        <p class="lead">A tool to manage microsoft windows dynamic disks</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ldmtool.1.html">
      <span itemprop="name">ldmtool: A tool to manage microsoft windows dynamic disks</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ldmtool/">
      <span itemprop="name">ldmtool</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ldmtool.1.html">
      <span itemprop="name">ldmtool: A tool to manage microsoft windows dynamic disks</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ldmtool</strong> [options] <strong>ldmtool</strong> [options] scan [<em>device</em>...] <strong>ldmtool</strong> [options] show diskgroup {<em>disk&nbsp;group&nbsp;GUID</em>} <strong>ldmtool</strong> [options] show {volume | partition | disk} {<em>disk&nbsp;group&nbsp;GUID</em>} {<em>object&nbsp;name</em>} <strong>ldmtool</strong> [options] {create | remove} all <strong>ldmtool</strong> [options] {create | remove} volume {<em>disk&nbsp;group&nbsp;GUID</em>} {<em>volume&nbsp;name</em>}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-d|--device</strong> <em>device</em></p><p>Automatically scan <em>device</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ldmtool</strong> is a tool for managing Microsoft Windows dynamic disks, which use Microsoft&apos;s LDM metadata. It can inspect them, and also create and remove device-mapper block devices which can be mounted.</p><p>Although a filesystem can be mounted read-write and its contents modified, <strong>ldmtool</strong> is not able to modify the LDM metadata itself. That is, it cannot create, remove or edit dynamic disks.</p><p>It is also not able to mount RAID5 volumes which have a partition missing, although it can mount mirrored volumes with a partition missing. However, mounting a volume with a missing partition is not recommended, as ldmtool does not update the LDM metadata in any way. This means Windows will have no way to determine that the partitions are not synchronised when it subsequently mounted, which may result in corruption.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INVOCATION</h2>
        <div class="sectioncontent">
<p><strong>ldmtool</strong> can be invoked either as a shell to run multiple actions, or to run a single action and return. If an action is given on the command line it will run in single action mode. If no action is given it will launch a shell.</p><h3>Shell mode</h3>
<p>When invoked as a shell, <strong>ldmtool</strong> will not scan any block devices by default. If any block devices are given on the command line with the <strong>-d</strong> option, these will be scanned. Otherwise, block devices must be scanned explicitly with the <strong>scan</strong> action.</p><p>Exit shell mode by sending an EOF, or with the quit or exit actions.</p>
<h3>Single action mode</h3>
<p>When invoked to run a single action all block devices will be scanned by default. In this case, if any block devices are specified with the <strong>-d</strong> option, only those block devices will be scanned.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESULTS</h2>
        <div class="sectioncontent">
<p><strong>ldmtool</strong> returns results as JSON-formatted data. The precise data returned is described in detail below. If a command fails it will not return any JSON data, but will instead display an error message. In shell mode, failure can be detected by the lack of a JSON-formatted result. In single action mode the caller can additionally check the exit code of the command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACTIONS</h2>
        <div class="sectioncontent">
<h3>scan [device...]</h3>
<p>Scan all [device]s for LDM metadata.</p><p>Returns a list of all known disk group GUIDs. Note that it doesn&apos;t just return newly discovered disk groups.</p>
<h3>show diskgroup {\fIGUID\fR}</h3>
<p>Return detailed information about a single disk group.</p><p><strong>Returns:</strong></p><p>name</p><p>The human-readable name of the disk group</p><p>guid</p><p>The Windows-assigned GUID of the disk group</p><p>volumes</p><p>A list of the names of all volumes in the disk group</p><p>disks</p><p>A list of the name of all disks in the disk group</p>
<h3>show volume {\fIdisk&nbsp;group&nbsp;GUID\fR} {\fIvolume&nbsp;name\fR}</h3>
<p>Return detailed information about a volume.</p><p><strong>Returns:</strong></p><p>name</p><p>The name of the volume</p><p>type</p><p>The volume type. One of: simple , spanned , striped , mirrored , raid5</p><p>size</p><p>The size of the volume in sectors</p><p>chunk-size</p><p>The chunk size, in sectors, used by striped and raid5 volumes. For other volume types it will be 0.</p><p>hint</p><p>The volume mounting hint. This value specifies how Windows expects the volume to be mounted. For a volume with an assigned drive letter, it might be &apos;E:&apos;.</p><p>partitions</p><p>A list of the names of the partitions which constitute this volume.</p>
<h3>show partition {\fIdisk&nbsp;group&nbsp;GUID\fR} {\fIpartition&nbsp;name\fR}</h3>
<p>Return detailed information about a partition.</p><p><strong>Returns:</strong></p><p>name</p><p>The name of the partition</p><p>start</p><p>The offset, in sectors, of the start of the partition from the beginning of the disk</p><p>size</p><p>The size of the partition in sectors</p><p>disk</p><p>The name of the disk the partition is on</p>
<h3>show disk {\fIdisk&nbsp;group&nbsp;GUID\fR} {\fIdisk&nbsp;name\fR}</h3>
<p>Return detailed information about a disk.</p><p><strong>Returns:</strong></p><p>name</p><p>The human-readable name of the disk</p><p>guid</p><p>The GUID of the disk</p><p>present</p><p>Whether the disk has been discovered during scanning: true or false</p><p><strong>If the disk is present, additionally returns:</strong></p><p>device</p><p>The name of the host device (e.g. /dev/sda)</p><p>data-start</p><p>The start sector of the data portion of the disk</p><p>data-size</p><p>The size, in sectors, of the data portion of the disk</p><p>metadata-start</p><p>The start sector of the metadata portion of the disk</p><p>metadata-size</p><p>The size, in sectors, of the metadata portion of the disk</p>
<h3>create {volume&nbsp;{&nbsp;\fIdisk&nbsp;group&nbsp;GUID\fR&nbsp;}&nbsp;{&nbsp;\fIvolume&nbsp;name\fR&nbsp;} | all}</h3>
<p>Create a device-mapper device for either the specified volume or all volumes in all detected disk groups.</p><p>Returns a list of the device-mapper device names which were created by this action. Note that if a device already existed for a volume it will not be returned in this list.</p>
<h3>remove {volume&nbsp;{&nbsp;\fIdisk&nbsp;group&nbsp;GUID\fR&nbsp;}&nbsp;{&nbsp;\fIvolume&nbsp;name\fR&nbsp;} | all}</h3>
<p>Remove device-mapper devices for either the specified volume or all volumes in all detected disk groups.</p><p>Returns a list of the device-mapper device names which were removed by this action. Note that if no device existed for a volume it will not be returned in this list.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following examples form a sequence from a single session of ldmtool running in shell mode.</p><p>Scan all loop devices for LDM metadata:</p>
<pre>
ldm&gt; scan /dev/loop[0-9]*
[
  "03c0c4fc-8b6f-402b-9431-4be2e5823b1c",
  "06495a84-fbfd-11e1-8cf9-52540061f5db"
]


</pre>
<p>Two disk groups were detected. The list contains their GUIDs.</p><p>Show detailed information about one of the disk groups:</p>
<pre>
ldm&gt; show diskgroup 06495a84-fbfd-11e1-8cf9-52540061f5db
{
  "name" : "WIN-ERRDJSBDAVF-Dg0",
  "guid" : "06495a84-fbfd-11e1-8cf9-52540061f5db",
  "volumes" : [
    "Volume4",
    "Volume1",
    "Volume2",
    "Volume3",
    "Volume5"
  ],
  "disks" : [
    "Disk1",
    "Disk2",
    "Disk3",
    "Disk4",
    "Disk5",
    "Disk6",
    "Disk7",
    "Disk8",
    "Disk9"
  ]
}


</pre>
<p>Show detailed information about one of the volumes in the disk group:</p>
<pre>
ldm&gt; show volume 06495a84-fbfd-11e1-8cf9-52540061f5db Volume1
{
  "name" : "Volume1",
  "type" : "spanned",
  "size" : 129024,
  "chunk-size" : 0,
  "hint" : "E:",
  "partitions" : [
    "Disk1-01",
    "Disk2-01"
  ]
}


</pre>
<p>Show detailed information about one of the partitions in the volume:</p>
<pre>
ldm&gt; show partition 06495a84-fbfd-11e1-8cf9-52540061f5db Disk1-01
{
  "name" : "Disk1-01",
  "start" : 65,
  "size" : 96256,
  "disk" : "Disk1"
}


</pre>
<p>Show detailed information about the disk containing the partition:</p>
<pre>
ldm&gt; show disk 06495a84-fbfd-11e1-8cf9-52540061f5db Disk1
{
  "name" : "Disk1",
  "guid" : "06495a85-fbfd-11e1-8cf9-52540061f5db",
  "present" : true,
  "device" : "/dev/loop15",
  "data-start" : 63,
  "data-size" : 100289,
  "metadata-start" : 100352,
  "metadata-size" : 2048
}


</pre>
<p>Create a device-mapper device for a volume:</p>
<pre>
ldm&gt; create volume 06495a84-fbfd-11e1-8cf9-52540061f5db Volume1
[
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume1"
]


</pre>
<p>A new device-mapper device has been created, called ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume1. Depending on how udev is configured, it will probably now be available as /dev/mapper/ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume1.</p><p>Create device-mapper devices for all volumes in both disk groups:</p>
<pre>
ldm&gt; create all
[
  "ldm_vol_Red-nzv8x6obywgDg0_Volume2",
  "ldm_vol_Red-nzv8x6obywgDg0_Volume1",
  "ldm_vol_Red-nzv8x6obywgDg0_Volume4",
  "ldm_vol_Red-nzv8x6obywgDg0_Stripe1",
  "ldm_vol_Red-nzv8x6obywgDg0_Raid1",
  "ldm_vol_Red-nzv8x6obywgDg0_Volume3",
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume4",
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume2",
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume3",
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume5"
]


</pre>
<p>Note that ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume1 is not in the list of devices which were created as it already existed.</p><p>Remove the device-mapper device for a single volume:</p>
<pre>
ldm&gt; remove volume 06495a84-fbfd-11e1-8cf9-52540061f5db Volume2
[
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume2"
]


</pre>

<pre>
ldm&gt; remove all
[
  "ldm_vol_Red-nzv8x6obywgDg0_Volume2",
  "ldm_vol_Red-nzv8x6obywgDg0_Volume1",
  "ldm_vol_Red-nzv8x6obywgDg0_Volume4",
  "ldm_vol_Red-nzv8x6obywgDg0_Stripe1",
  "ldm_vol_Red-nzv8x6obywgDg0_Raid1",
  "ldm_vol_Red-nzv8x6obywgDg0_Volume3",
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume4",
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume1",
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume3",
  "ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume5"
]


</pre>
<p>Note that ldm_vol_WIN-ERRDJSBDAVF-Dg0_Volume2 is not in the list of devices which were removed, as it was removed previously.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Matthew Booth</strong> &lt;mbooth@redhat.com&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ldmd2.1.html"><span aria-hidden="true">&larr;</span> ldmd2.1: Manual page for llvm d compiler</a></li>
   <li class="next"><a href="ldns-chaos.1.html">ldns-chaos.1: Give some information about a nameserver <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
