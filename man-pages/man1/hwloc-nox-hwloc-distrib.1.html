<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>hwloc-distrib: Build a number of cpu masks distributed on the system</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Build a number of cpu masks distributed on the system">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="hwloc-distrib (1) manual">
  <meta name="twitter:description" content="Build a number of cpu masks distributed on the system">
  <meta name="twitter:image" content="https://www.carta.tech/images/hwloc-nox-hwloc-distrib-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/hwloc-nox-hwloc-distrib.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="hwloc-distrib (1) manual" />
  <meta property="og:description" content="Build a number of cpu masks distributed on the system" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/hwloc-nox-hwloc-distrib-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">hwloc-distrib<small> (1)</small></h1>
        <p class="lead">Build a number of cpu masks distributed on the system</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/hwloc-distrib.1.html">
      <span itemprop="name">hwloc-distrib: Build a number of cpu masks distributed on the system</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/hwloc-nox/">
      <span itemprop="name">hwloc-nox</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/hwloc-distrib.1.html">
      <span itemprop="name">hwloc-distrib: Build a number of cpu masks distributed on the system</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>hwloc-distrib</strong> [<em>options</em>] <em>&lt;integer&gt;</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--single</strong></p>
  </dt>
  <dd>
    <p>Singlify each output to a single CPU.</p>
  </dd>
  <dt>
    <p><strong>--taskset</strong></p>
  </dt>
  <dd>
    <p>Show CPU set strings in the format recognized by the taskset command-line program instead of hwloc-specific CPU set string format.</p>
  </dd>
  <dt>
    <p><strong>-v</strong> <strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>Verbose messages.</p>
  </dd>
  <dt>
    <p><strong>-i</strong> &lt;file&gt;, <strong>--input</strong> &lt;file&gt;</p>
  </dt>
  <dd>
    <p>Read topology from XML file &lt;file&gt; (instead of discovering the topology on the local machine).  If &lt;file&gt; is "-", the standard input is used.  XML support must have been compiled in to hwloc for this option to be usable.</p>
  </dd>
  <dt>
    <p><strong>-i</strong> &lt;directory&gt;, <strong>--input</strong> &lt;directory&gt;</p>
  </dt>
  <dd>
    <p>Read topology from the chroot specified by &lt;directory&gt; (instead of discovering the topology on the local machine).  This option is generally only available on Linux.  The chroot was usually created by gathering another machine topology with hwloc-gather-topology.</p>
  </dd>
  <dt>
    <p><strong>-i</strong> &lt;specification&gt;, <strong>--input</strong> &lt;specification&gt;</p>
  </dt>
  <dd>
    <p>Simulate a fake hierarchy (instead of discovering the topology on the local machine). If &lt;specification&gt; is "node:2 pu:3", the topology will contain two NUMA nodes with 3 processing units in each of them. The &lt;specification&gt; string must end with a number of PUs.</p>
  </dd>
  <dt>
    <p><strong>--if</strong> &lt;format&gt;, <strong>--input-format</strong> &lt;format&gt;</p>
  </dt>
  <dd>
    <p>Enforce the input in the given format, among <strong>xml</strong>, <strong>fsroot</strong> and <strong>synthetic</strong>.</p>
  </dd>
  <dt>
    <p><strong>--ignore</strong> &lt;type&gt;</p>
  </dt>
  <dd>
    <p>Ignore all objects of type &lt;type&gt; in the topology.</p>
  </dd>
  <dt>
    <p><strong>--from</strong> &lt;type&gt;</p>
  </dt>
  <dd>
    <p>Distribute starting from objects of the given type instead of from the top of the topology hierarchy, i.e. ignoring the structure given by objects above.</p>
  </dd>
  <dt>
    <p><strong>--to</strong> &lt;type&gt;</p>
  </dt>
  <dd>
    <p>Distribute down to objects of the given type instead of down to the bottom of the topology hierarchy, i.e. ignoring the structure given by objects below. This may be useful if some latitude is desired for the binding, e.g. just bind several processes to each socket without specifying a single core for each of them.</p>
  </dd>
  <dt>
    <p><strong>--at</strong> &lt;type&gt;</p>
  </dt>
  <dd>
    <p>Distribute among objects of the given type.  This is equivalent to specifying both <strong>--from</strong> and <strong>--to</strong> at the same time.</p>
  </dd>
  <dt>
    <p><strong>--reverse</strong></p>
  </dt>
  <dd>
    <p>Distribute by starting with the last objects first, and singlify CPU sets by keeping the last bit (instead of the first bit).</p>
  </dd>
  <dt>
    <p><strong>--restrict</strong> &lt;cpuset&gt;</p>
  </dt>
  <dd>
    <p>Restrict the topology to the given cpuset.</p>
  </dd>
  <dt>
    <p><strong>--whole-system</strong></p>
  </dt>
  <dd>
    <p>Do not consider administration limitations.</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>Report version and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>hwloc-distrib generates a series of CPU masks corresponding to a distribution of a given number of elements over the topology of the machine. The distribution is done recursively from the top of the hierarchy (or from the level specified by option <strong>--from</strong>) down to the bottom of the hierarchy (or down to the level specified by option <strong>--to</strong>, or until only one element remains), splitting the number of elements at each encountered hierarchy level not ignored by options <strong>--ignore</strong>.</p><p>This can e.g. be used to distribute a set of processes hierarchically according to the topology of a machine. These masks can be used with <a href="../man1/hwloc-bind.1.html"><strong>hwloc-bind</strong>(1)</a>.</p><p><strong>NOTE:</strong> It is highly recommended that you read the <a href="../man7/hwloc.7.html"><strong>hwloc</strong>(7)</a> overview page before reading this man page.  Most of the concepts described in <a href="../man7/hwloc.7.html"><strong>hwloc</strong>(7)</a> directly apply to the hwloc-bind utility.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>hwloc-distrib's operation is best described through several examples.</p><p>If 4 processes have to be distributed across a machine, their CPU masks may be obtained with:</p>
<pre>
    $ hwloc-distrib 4
    0x0000000f
    0x00000f00
    0x000000f0
    0x0000f000
</pre>
<p>To distribute only among the second socket, the topology should be restricted:</p>
<pre>
    $ hwloc-distrib --restrict $(hwloc-calc socket:1) 4
    0x00000010
    0x00000020
    0x00000040
    0x00000080
</pre>
<p>To get a single processor of each CPU masks (prevent migration in case of binding)</p>
<pre>
    $ hwloc-distrib 4 --single
    0x00000001
    0x00000100
    0x00000010
    0x00001000
</pre>
<p>Each output line may be converted independently with hwloc-calc:</p>
<pre>
    $ hwloc-distrib 4 --single | hwloc-calc --taskset
    0x1
    0x100
    0x10
    0x1000
</pre>
<p>To convert the output into a list of processors that may be passed to dplace -c inside a mpirun command line:</p>
<pre>
    $ hwloc-distrib 4 --single | xargs hwloc-calc --pulist
    0,8,4,16
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Upon successful execution, hwloc-distrib displays one or more CPU mask strings.  The return value is 0.</p><p>hwloc-distrib will return nonzero if any kind of error occurs, such as (but not limited to) failure to parse the command line.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO hwloc-distrib&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/hwloc.7.html"><strong>hwloc</strong>(7)</a>, <a href="../man1/hwloc-gather-topology.1.html"><strong>hwloc-gather-topology</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="hwloc-hwloc-distrib.1.html"><span aria-hidden="true">&larr;</span> hwloc-distrib.1: Build a number of cpu masks distributed on the system</a></li>
   <li class="next"><a href="hwloc-hwloc-gather-topology.1.html">hwloc-gather-topology.1: Saves the relevant linux topology files and the lstopo output for later (possibly offline) usage <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
