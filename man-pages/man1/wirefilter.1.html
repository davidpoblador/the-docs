<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>wirefilter: Wire packet filter for virtual distributed ethernet</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Wire packet filter for virtual distributed ethernet">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="wirefilter (1) manual">
  <meta name="twitter:description" content="Wire packet filter for virtual distributed ethernet">
  <meta name="twitter:image" content="https://www.carta.tech/images/vde2-wirefilter-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/wirefilter.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="wirefilter (1) manual" />
  <meta property="og:description" content="Wire packet filter for virtual distributed ethernet" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/vde2-wirefilter-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">wirefilter<small> (1)</small></h1>
        <p class="lead">Wire packet filter for virtual distributed ethernet</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/wirefilter.1.html">
      <span itemprop="name">wirefilter: Wire packet filter for virtual distributed ethernet</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/vde2/">
      <span itemprop="name">vde2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/wirefilter.1.html">
      <span itemprop="name">wirefilter: Wire packet filter for virtual distributed ethernet</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>wirefilter</strong></p><p>[<strong>-f</strong><em> rcfile</em>] [<strong>-l</strong><em> loss</em>] [<strong>-l</strong><em> lostburst</em>] [<strong>-d</strong><em> delay</em>] [<strong>-D</strong><em> dup</em>] [<strong>-b</strong><em> bandwidth</em>] [<strong>-s</strong><em> interface_speed</em>] [<strong>-c</strong><em> channel_bufsize</em>] [<strong>-n</strong><em> noise_factor</em>] [<strong>-m</strong><em> mtu_size</em>] [<strong>-M</strong><em> mgmt socket</em>] [<strong>-v</strong><em> vde_plug1:vde_plug2</em>] [<strong>--daemon</strong><em>]</em> [<strong>--pidfile</strong><em> pidfile_path]</em> [<strong>--blink</strong><em> blink]</em> [<strong>--blinkid</strong><em> blink_identifier]</em> [<strong>-N</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A <strong>wirefilter</strong> is able to emulate delays and packet loss on virtual wires. e.g.:</p><p><strong></strong> dpipe vde_plug /tmp/s1 = wirefilter -l 10 = vde_plug /tmp/s2</p><p>creates a wire between two vde_switches (with sockets /tmp/s1 and /tmp/s2 respectively). This cable looses 10% of the packets in each direction.</p><p>The same cable can be created using:</p><p><strong></strong> wirefilter -v /tmp/s1:/tmp/s2 -l 10</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-f </strong><em>rcfile</em><strong></strong></p>
  </dt>
  <dd>
    <p>use a startup configuration file. It is useful for complex defitions such as those for the Markov mode (see below). The startup configuration file has the same syntax of the management interface, in other word it is a script of management commands executed before the first packet is forwarded.</p>
  </dd>
  <dt>
    <p><strong>-l </strong><em>loss</em><strong></strong></p>
  </dt>
  <dd>
    <p>percentage of loss as a floating point number. It is possible to specify different loss percentage for the two channels: LR20.5 means 20.5% of packet flowing left to right are lost, RL10 means 10% from right to left.</p>
  </dd>
  <dt>
    <p><strong>-L </strong><em>lostburst</em><strong></strong></p>
  </dt>
  <dd>
    <p>when this is not zero, wirefilter uses the Gilbert model for bursty errors. This is the mean length of lost packet bursts. (it is a two state Markov chain: the probability to exit from the faulty state is <em>1/lostburst</em>, the probability to enter the faulty state is <em>loss/(lostburst-(1-loss))</em>. The loss rate converges to the value <em>loss</em>.</p>
  </dd>
  <dt>
    <p><strong>-d </strong><em>delay</em><strong></strong></p>
  </dt>
  <dd>
    <p>Extra delay (in milliseconds). This delay is added to the real communication delay.  Packets are temporarily stored and resent after the delay.  It is possible to specify different values for LR and RL like in the previous option.  When the delay is specified as two numbers with a + in between, the first is the standard delay and the second is a random variation. 1000+500 means that the delay can be randomly chosen between half second and 1.5 seconds. It is possible to add 'U' or 'N' at the end. 1000+500U means that the dealys are uniformly distributed, 1000+500N means that the delays follow a Gaussian normal distribution (more than 98% of the values are inside the limits).</p>
  </dd>
  <dt>
    <p><strong>-D </strong><em>dup</em><strong></strong></p>
  </dt>
  <dd>
    <p>percentage of dup packet. It has the same syntax of -l. Do not use dup factor 100% because it means that each packet is sent infinite times.</p>
  </dd>
  <dt>
    <p><strong>-b </strong><em>bandwidth</em><strong></strong></p>
  </dt>
  <dd>
    <p>Channel bandwidth in Bytes/sec. It has the same syntax of -d. It is also possible to use suffixes K,M,G to abbreviate 2^10, 2^20, 2^30. 128K means 128KBytes/sec. 128+64K means 64i to 196KBytes/sec. Sender is not prevented from sending packets, delivery is delayed to limit the bandwidth to the desired value. (Like a bottleneck along the path) U and N after the values (e.g. 128+64KN) set the statistic distribution to use (uniform or normal).</p>
  </dd>
  <dt>
    <p><strong>-s </strong><em>speed</em><strong></strong></p>
  </dt>
  <dd>
    <p>Interface speed in Bytes/sec. It has the same syntax of -b. Input is blocked for the tramission time of the packet, thus the sender is prevented from sending too fast.</p>
  </dd>
  <dt>
    <p><strong>-c </strong><em>channel_bufsize</em><strong></strong></p>
  </dt>
  <dd>
    <p>Channel buffer size (in Bytes): maximum size of the packet queue. Exceeding packets are discarded.</p>
  </dd>
  <dt>
    <p><strong>-n </strong><em>noise factor</em><strong></strong></p>
  </dt>
  <dd>
    <p>Number of bits damaged/one megabyte.</p>
  </dd>
  <dt>
    <p><strong>-m </strong><em>mtu size</em><strong></strong></p>
  </dt>
  <dd>
    <p>Packets longer than mtu_size are discarded.</p>
  </dd>
  <dt>
    <p><strong>-N</strong></p>
  </dt>
  <dd>
    <p>nofifo. with -N packets can be reordered.</p>
  </dd>
  <dt>
    <p><strong>-M </strong><em>mgmt socket</em><strong></strong></p>
  </dt>
  <dd>
    <p>the unix socket where the parameters (loss percentage, delay etc) can be checked and changed runtime. <a href="../man1/unixterm.1.html"><strong>unixterm</strong>(1)</a> can be used as a remote terminal for wirefilter.</p>
  </dd>
  <dt>
    <p><strong>-v </strong><em>vde_plug1:vde_plug2</em><strong></strong></p>
  </dt>
  <dd>
    <p>If this option is used, the two local vde_plugs (vde_plug1 and vde_plug2) will be connected each other instead of stdin/stdout, using the libvdeplug libraries. This option activates an interactive management session on console (stdin/stdout).</p>
  </dd>
  <dt>
    <p><strong>--mgmtmode </strong><em>mode</em><strong></strong></p>
  </dt>
  <dd>
    <p>this option sets the access mode of the mgmt socket. The command syntax is quite simple. <strong>help</strong> provides the list of commands. It is possible to load a script file using the <strong>load</strong> management command.</p>
  </dd>
  <dt>
    <p><strong>--daemon</strong></p>
  </dt>
  <dd>
    <p>wirefilter becomes a daemon</p>
  </dd>
  <dt>
    <p><strong>--pidfile </strong><em>pathnamefP</em></p>
  </dt>
  <dd>
    <p>wirefilter saves its pid into the  file.</p>
  </dd>
  <dt>
    <p><strong>--blinkid </strong><em>name</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option defines the id sent for each packet to the blink server (see the --blink option below). The stardard identifier for a wirefilter is the process pid.</p>
  </dd>
  <dt>
    <p><strong>--blink </strong><em>socket</em><strong></strong></p>
  </dt>
  <dd>
    <p>wirefilter sends a log message to the specified PF_UNIX/DATAGRAM socket for each packet sent. Each packet has the format: id direction length. e.g:</p>
<pre>
6768 LR 44
6768 LR 44
6768 RL 100
6768 LR 100
6768 LR 44
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Markov mode</h2>
        <div class="sectioncontent">
<p>wirefilter provides also a more complex set of parameters using a Markov chain to emulate different states of the link and the tranistions between states. Each state is represented by a node. Markov chain parameters can be set with management commands or rc files only. In fact, due to the large number of parameters the command line would have been unreadable.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>markov-numnodes </strong><em>n</em><strong></strong></p>
  </dt>
  <dd>
    <p>defines the number of different states. All the parameters of the connection can be defined node by node. Nodes are numbered starting from zero (to n-1). e.g.:</p>
<pre>
delay 100+10N[4]
loss 10[2]
</pre>
<p>these command define a delay of 90-110 ms (normal distribution) for the node number 4 and a 10 loss for the node 2. It is possible to resize the Markov chain at run-time. New nodes are unreachable and do not have any edge to other states (i.e. each new node has a loopback edge to the node itself with 100% probability). When reducing the number of nodes, the weight of the edges towards deleted nodes is added to the loopback edge. When the current node of the emulation is deleted, node 0 becomes the current node. (The emulation always starts from node 0).</p>
  </dd>
  <dt>
    <p><strong>markov-time </strong><em>ms</em><strong></strong></p>
  </dt>
  <dd>
    <p>time period (ms) for the markov chain computation. Each <em>ms</em> microseconds a random number generator decides which is the next state (default value=100ms).</p>
  </dd>
  <dt>
    <p><strong>markov-name </strong><em>n,name</em><strong></strong></p>
  </dt>
  <dd>
    <p>assign a name to a node of the markov chain.</p>
  </dd>
  <dt>
    <p><strong>markov-setnode </strong><em>n</em><strong></strong></p>
  </dt>
  <dd>
    <p>manually set the current node to the node <em>n</em>.</p>
  </dd>
  <dt>
    <p><strong>setedge </strong><em>n1,n2,w</em><strong></strong></p>
  </dt>
  <dd>
    <p>define an edge between <em>n1</em> and <em>n2</em>; <em>w</em> is the weight (probability percentage) of the edge. The loopback edge (from a node to itself) is always computed as 100% minus the sum of the weights of outgoing edges.</p>
  </dd>
  <dt>
    <p><strong>showedges [ </strong><em>n</em><strong> ]</strong></p>
  </dt>
  <dd>
    <p>list the edges from node <em>n</em> (or from the current node when the command has no parameters). Null weight edges are omitted.</p>
  </dd>
  <dt>
    <p><strong>showcurrent</strong></p>
  </dt>
  <dd>
    <p>show the current Markov state.</p>
  </dd>
  <dt>
    <p><strong>showinfo [ </strong><em>n</em><strong> ]</strong></p>
  </dt>
  <dd>
    <p>show status and information on state (node)  <em>n</em>. If the parameter is omitted it shows the status and information on the current state.</p>
  </dd>
  <dt>
    <p><strong>markov-debug [ </strong><em>n</em><strong> ]</strong></p>
  </dt>
  <dd>
    <p>set the debug level for the current management connection. In the actual implementation when n is greater than zero each change of markov node causes the output of a debug trace. Debug tracing get disabled when <em>n</em> is zero or the parameter is missing.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTICE</h2>
        <div class="sectioncontent">
<p>Virtual Distributed Ethernet is not related in any way with www.vde.com ("Verband der Elektrotechnik, Elektronik und Informationstechnik" i.e. the German "Association for Electrical, Electronic & Information Technologies").</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO wirefilter&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/vde_switch.1.html"><strong>vde_switch</strong>(1)</a>, <a href="../man1/vdeq.1.html"><strong>vdeq</strong>(1)</a>. <a href="../man1/dpipe.1.html"><strong>dpipe</strong>(1)</a>. <a href="../man1/unixterm.1.html"><strong>unixterm</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>VDE is a project by Renzo Davoli &lt;renzo@cs.unibo.it&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="wipe.tr-asc.1.html"><span aria-hidden="true">&larr;</span> wipe.tr-asc.1: None</a></li>
   <li class="next"><a href="wistrut.1.html">wistrut.1: The wmii ewmh strut manager <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
