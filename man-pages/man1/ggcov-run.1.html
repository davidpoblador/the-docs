<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ggcov-run: Run an instrumented test program</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run an instrumented test program">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ggcov-run (1) manual">
  <meta name="twitter:description" content="Run an instrumented test program">
  <meta name="twitter:image" content="https://www.carta.tech/images/ggcov-ggcov-run-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ggcov-run.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ggcov-run (1) manual" />
  <meta property="og:description" content="Run an instrumented test program" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ggcov-ggcov-run-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ggcov-run<small> (1)</small></h1>
        <p class="lead">Run an instrumented test program</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ggcov-run.1.html">
      <span itemprop="name">ggcov-run: Run an instrumented test program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ggcov/">
      <span itemprop="name">ggcov</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ggcov-run.1.html">
      <span itemprop="name">ggcov-run: Run an instrumented test program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ggcov-run</strong> [<em>options</em>] [<strong>--</strong>] <em>program</em> <em>args...</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Ggcov-run</strong> can be used to run a test program, instrumented using <strong>gcc --coverage</strong> when built, under certain conditions.  It's use is entirely optional, as the default behaviour of the gcc instrumention is designed to be useful under most conditions.</p><p><strong>Ggcov-run</strong> takes as arguments a program and it's arguments, and runs the program with some behavioural modifications (in the manner of <strong>strace</strong>).  If given no options, the program is run without any modifications.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GCDA FILE LOCATIONS</h2>
        <div class="sectioncontent">
<p>One problem with the default behaviour of the gcc instrumentation involves the locations of coverage data.  Instrumented test programs will read, modify and re-write <em>.gcda</em> files when the program exits. The locations of those files are chosen by the compiler at compile time; the files will be placed in the build directory next to the corresponding <em>.c</em> file.  The compiler saves this information in the <em>.o</em> file.  For example, if you compile the file <em>foo.c</em> in the directory <em>/home/me/software/quux</em>, then the pathname <em>/home/me/software/quux/foo.gcda</em> is hardcoded in the test program. Of course, programs that examine coverage data, like <strong>ggcov</strong>, look for the <em>.gcda</em> files there.</p><p>For many test applications this works just fine.  Problems arise however when the instrumented program needs to be run on another machine, or as another userid, or the build directory is volatile, or in any other test scenario where the build directory either does not exist or is not writable by the running test program.  In these cases, you need to do some ad-hoc file moving before and after testing in order to get the <em>.gcda</em> files in the right location on the right machine with the right permissions.</p><p>A better approach is to use <strong>ggcov-run</strong> with the <strong>--gcda-prefix</strong> option.  This option takes as a value a directory which is prepended to the pathname of each <em>.gcda</em> file the test program accesses.  So, continuing the above example, running the test program like this:</p>
<pre>
me$ ggcov-run --gcda-prefix=/tmp/gcda ./testprogram test-args...
</pre>
<p>will result in a <em>.gcda</em> file being written to <em>/tmp/gcda/home/me/software/quux/foo.gcda</em>.  The directory tree will be automatically created as the <em>.gcda</em> files are written, and the file and directory permissions will allow read access for all users.</p><p>Note that <strong>ggcov</strong> also has a <strong>--gcda-prefix</strong> option which can be used to search for <em>.gcda</em> files in locations other than the build directory.  In our example:</p>
<pre>
me$ cd /home/me/software/quux
me$ ggcov --gcda-prefix=/tmp/gcda -r .
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-p</strong> <em>dir</em>, <strong>--gcda-prefix</strong>=<em>dir</em></p>
  </dt>
  <dd>
    <p>Cause the test program, and any child processes it runs, to redirect any absolute filename ending in <em>.gcda</em> to a filename underneath the directory <em>dir</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p><strong>Ggcov-run</strong> uses a shared library shim and the <em>LD_PRELOAD</em> feature of the runtime linker to intercept certain library calls by the instrumented program.  For very good security reasons, <em>LD_PRELOAD</em> is disabled for setuid or setgid programs.  So if your test program relies on setuid behaviour, <strong>ggcov-run</strong> will not work.  One possible workaround is to use <strong>sudo</strong> or <strong>su</strong> to change userid before using <strong>ggcov-run</strong>, like this:</p>
<pre>
me$ sudo -u otheruser ggcov-run --gcda-prefix=/foo ./testprogram
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Greg Banks <em>&lt;gnb@users.sourceforge.net&gt;</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>ggcov is Copyright &copy; 2001-2011 Greg Banks <em>&lt;gnb@users.sourceforge.net&gt;</em>.</p><p>This is free software; see the COPYING file for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ggcov-run&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/ggcov-run.1.html"><strong>ggcov-run</strong>(1)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ggcov.1.html"><span aria-hidden="true">&larr;</span> ggcov.1: A gnome frontend for exploring gcov coverage data</a></li>
   <li class="next"><a href="ggcov-webdb.1.html">ggcov-webdb.1: Generate intermediate database for ggcov web interface <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
