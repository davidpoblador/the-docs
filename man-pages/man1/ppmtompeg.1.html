<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ppmtompeg: Encodes mpeg-1 bitstreams</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Encodes mpeg-1 bitstreams">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ppmtompeg (1) manual">
  <meta name="twitter:description" content="Encodes mpeg-1 bitstreams">
  <meta name="twitter:image" content="https://www.carta.tech/images/netpbm-ppmtompeg-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ppmtompeg.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ppmtompeg (1) manual" />
  <meta property="og:description" content="Encodes mpeg-1 bitstreams" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/netpbm-ppmtompeg-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ppmtompeg<small> (1)</small></h1>
        <p class="lead">Encodes mpeg-1 bitstreams</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ppmtompeg.1.html">
      <span itemprop="name">ppmtompeg: Encodes mpeg-1 bitstreams</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/netpbm/">
      <span itemprop="name">netpbm</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ppmtompeg.1.html">
      <span itemprop="name">ppmtompeg: Encodes mpeg-1 bitstreams</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ppmtompeg</strong> [ <strong></strong><em>options</em><strong></strong> ] <strong></strong><em>parameter-file</em><strong></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ppmtompeg</strong> produces an MPEG-1 video stream.  param_file is a parameter file which includes a list of input files and other parameters.  The file is described in detail below.  The -gop, -combine_gops, -frames, and -combine_frames options are all exclusive.  This man page is probably incomplete.  For complete usage, see the User's Guide.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-stat stat_file</strong> : causes the encoder to append the statistics to the file <em>stat_file</em>. In any case, the statistics are output to stdout.  The statistics use the following abbreviations:  bits per block (bpb), bits per frame (bpf), seconds per frame (spf), and bits per second (bps). <strong>-quiet num_seconds</strong> : causes the program to not report remaining time for at least num_seconds seconds.  A negative values tells the program not to report at all.  0 is the default (reports once after each frame).  Note that the time remaining is an estimate and does not take into account time to read in frames. <strong>-realquiet</strong> : causes the encoder to run silently, with the only screen output being errors. Particularly useful when reading input from stdin. <strong>-no_frame_summary</strong> : prevents the program from printing a summary line for each frame <strong>-float_dct</strong> : forces the encoder to use a more accurate, yet more computationally expensive version of the DCT. <strong>-gop gop_num</strong> : causes the encoder to only encode the numbered GOP (first GOP is 0).  The parameter file is the same as for normal usage.  The output file will be the normal output file with the suffix ".gop.&lt;gop_num&gt;"  No sequence info is output. <strong>-combine_gops</strong> : causes the encoder to simply combine some GOP files into a single MPEG stream.  A sequence header/ender are inserted.  In this case, the parameter file need only contain the YUV_SIZE value, an output file, and perhaps a list of input GOP files (see below). <strong>-frames first_frame last_frame</strong> : causes the encoder to only encode the frames from first_frame to last_frame, inclusive.  The parameter file is the same as for normal usage. The output will be placed in separate files, one per frame, with the file names being the normal output file with the suffix ".frame.&lt;frame num&gt;"  No GOP header information is output.  (Thus, the parameter file need not include the GOP_SIZE value) <strong>-combine_frames</strong> : causes the encoder to simply combine some frames into a single MPEG stream. Sequence and GOP headers are inserted appropriately.  In this case, the parameter file need only contain the YUV_SIZE value, the GOP_SIZE value, an output file, and perhaps a list of frame files (see below). <strong>-nice</strong> : causes the program to run any remote processes 'nicely.'  This is only relevant if the program is using parallel encoding.  (see 'man nice.') <strong>-max_machines num_machines</strong> : causes the program to use no more than num_machines machines as slaves for use in parallel encoding. <strong>-snr</strong> : print the signal-to-noise ratio.  Prints SNR (Y U V) and peak SNR (Y U V) for each frame.  In summary, prints averages of luminance only (Y).  SNR is defined as 10*log(variance of original/variance of error).  Peak SNR is defined as 20*log(255/RMSE).  Note that the encoder will run a little slower if you want it to print the SNR. <strong>-mse</strong> : computes the mean squared error per block.  Also automatically computes the quality of the images when set, so there is no need to specify -snr then. <strong>-bit_rate_info rate_file</strong> : prints bit rate information into the file rate_file.  Bit rate info is bits per frame, and also bits per I-frame-to-I-frame. <strong>-mv-histogram</strong> : prints histogram of motion vectors as part of statistics.  There are three histograms -- one for P, forward B, and backward B vectors.  Each histogram is a 2-dimensional array, and there is one entry for each vector in the search window.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETER FILE</h2>
        <div class="sectioncontent">
<p>The parameter file MUST contain the following lines (except when using the -combine_gops or -combine_frames options):</p><p>PATTERN &lt;pattern&gt; OUTPUT &lt;output file&gt; INPUT_DIR &lt;directory&gt;</p><p>all input files must reside in this directory.  If you want to refer to the current directory, use '.' (an empty INPUT_DIR value would refer to the root directory).  If input files will be coming in from standard input, use 'stdin'.</p><p>INPUT</p><p>This line must be followed by a list of the input files (in display order) and then the line</p><p>END_INPUT</p><p>There are three types of lines between INPUT and END_INPUT.  First, a line may simply be the name of an input file.  Secondly, the line may be of the form</p><p>&lt;single_star_expr&gt; [x-y]</p><p>single_star_expr can have a single '*' in it.  It is replaced by all the numbers between x and y inclusive.  So, for example, the line</p><p>tennis*.ppm [12-15]</p><p>is replaced by tennis12.ppm, tennis13.ppm, tennis14.ppm, tennis15.ppm. Uniform zero-padding occurs, as well.  For example, the line</p><p>football.*.ppm [001-130]</p><p>is replaced by football.001.ppm, football.002.ppm, ..., football.009.ppm, football.010.ppm, ..., football.130.ppm.  The third type of line is:</p><p>&lt;single_star_expr&gt; [x-y+s]</p><p>Where the line is treated exactly as above, except that we skip by s.  Thus, the line</p><p>football.*.ppm [001-130+4]</p><p>is replaced by football.001.ppm, football.005.ppm, football.009.ppm, football.013.ppm, etc.</p><p>BASE_FILE_FORMAT &lt;YUV or PPM or PNM or JPEG or JMOVIE&gt;</p><p>All the input files must be converted to YUV, JPEG(v4), JMOVIE, PNM, or PPM format.  This line specifies which of the three formats (actually PPM is a subset of PNM).  The reason for having a separate PPM option is for simplicity.  If your files are RAWBITS ppm files, then use the PPM option rather than the PNM.  Also, depending on the system, file reads will go much faster with the PPM option (as opposed to PNM).</p><p>INPUT_CONVERT &lt;conversion command&gt;</p><p>You must specify how to convert a file to the base file format.  In the conversion command, each '*' is replaced by the filename (the items listed between INPUT and END_INPUT).  If no conversion is necessary, then you would just say:</p><p>INPUT_CONVERT *</p><p>If you had a bunch of gif files, you might say:</p><p>INPUT_CONVERT giftoppm *</p><p>If you have a bunch of separate a.Y, a.U, and a.V files, then you might say:</p><p>INPUT_CONVERT cat *.Y *.U *.V</p><p>Input conversion is not allowed with input from stdin.</p><p>GOP_SIZE &lt;n&gt;</p><p>n is roughly the number of frames in a Group of Pictures (roughly because a GOP must begin with an I-frame)</p><p>SLICES_PER_FRAME &lt;n&gt;</p><p>n is roughly the number of slices per frame.  Note, at least one MPEG player may complain if slices do not start at the left side of an image.  To ensure this does not happen, make sure the number of rows is divisible by SLICES_PER_FRAME.</p><p>PIXEL &lt;FULL or HALF&gt;</p><p>use half-pixel motion vectors, or only full-pixel ones</p><p>RANGE &lt;n&gt;</p><p>use a search range of +/- n pixels</p><p>PSEARCH_ALG &lt;algorithm&gt;</p><p>algorithm must be one of {EXHAUSTIVE, TWOLEVEL, SUBSAMPLE, LOGARITHMIC}. Tells what kind of search procedure should be used for P-frames. Exhaustive gives the best compression, but logarithmic is the fastest.  You select the desired combination of speed and compression. TWOLEVEL is an exhaustive full-pixel search, followed by a local half- pixel search around the best full-pixel vector (the PIXEL option is ignored for this search algorithm).</p><p>BSEARCH_ALG &lt;algorithm&gt;</p><p>algorithm must be one of {SIMPLE, CROSS2, EXHAUSTIVE}.  Tells what kind of search procedure should be used for B-frames.  Simple means find best forward and backward vectors, then interpolate.  Cross2 means find those two vectors, then see what backward vector best matches the best forward vector, and vice versa.  Exhaustive does an n-squared search and is EXTREMELY slow in relation to the others (Cross2 is about twice as slow as Simple).</p><p>IQSCALE &lt;n&gt;</p><p>use n as the qscale for I-frames</p><p>PQSCALE &lt;n&gt;</p><p>use n as the qscale for P-frames</p><p>BQSCALE &lt;n&gt;</p><p>use n as the qscale for B-frames</p><p>REFERENCE_FRAME &lt;ORIGINAL or DECODED&gt;</p><p>If ORIGINAL is specified, then the original images are used when computing motion vectors.  To be more accurate, use DECODED, in which the decoded images are used.  This should increase the quality of the image, but will take a bit longer to encode.</p><p>The following lines are optional:</p><p>FORCE_I_ALIGN</p><p>This option is only relevant for parallel execution (see below).  It forces each processor to encode a block of N frames, where N must be a multiple of the pattern length.  Since the first frame in any pattern is an I-frame, this forces each block encoded by a processor to begin with an I-frame.</p><p>foo</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>If the BASE_FILE_FORMAT is YUV, then the parameter file must contain:</p><p>YUV_SIZE &lt;w&gt;x&lt;h&gt;</p><p>where w = width, h = height (in pixels) of image, and</p><p>YUV_FORMAT &lt;ABEKAS or PHILLIPS or UCB or EYUV or pattern&gt;.</p><p>See the file doc/INPUT.FORMAT for more information.</p><p>If the -combine-gops option is used, then only the YUV_SIZE and OUTPUT values need be specified in the parameter file.  In addition, the parameter file may specify input GOP files in the same manner as normal input files -- except instead of using INPUT_DIR, INPUT, and END_INPUT, use GOP_INPUT_DIR, GOP_INPUT, and GOP_END_INPUT.  If no input GOP files are specified, then the default is to use the output file name with suffix ".gop.&lt;gop_num&gt;" starting from 0 as the input files.</p><p>If the -combine-frames option is used, then only the YUV_SIZE, GOP_SIZE, and OUTPUT values need be specified in the parameter file.  In addition, the parameter file may specify input frame files in the same manner as normal input files -- except instead of using INPUT_DIR, INPUT, and END_INPUT, use FRAME_INPUT_DIR, FRAME_INPUT, and FRAME_END_INPUT.  If no input frame files are specified, then the default is to use the output file name with suffix ".frame.&lt;frame_num&gt;" starting from 0 as the input files.</p><p>Any number of spaces and tabs may come between each option and value.  Lines beginning with '#' are ignored.  Any other lines are ignored except for those between INPUT and END_INPUT.  This allows you to use the same parameter file for normal usage and for -combine_gops and -combine_frames.</p><p>The encoder is case-sensitive so, except for file names and directories, everything should be in upper case.</p><p>The lines may appear in any order, except the following exceptions. INPUT must appear before END_INPUT  (also, GOP_INPUT before GOP_END_INPUT and FRAME_INPUT before FRAME_END_INPUT).  All lines between INPUT and END_INPUT must be the frames in play order.</p><p>The encoder is prepared to handle up to 16 B frames between reference frames when encoding with input from stdin.  To increase this amount, change the constant B_FRAME_RUN in frame.c and recompile.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARALLEL OPERATION</h2>
        <div class="sectioncontent">
<p>The encoder may be run on multiple machines at once.  To do so, add a line "PARALLEL" in the parameter file, followed by a listing, one machine per line, then "END_PARALLEL".  Each of the lines should be in one of two forms. If the machine has access to the file server, then the line should be:</p><p>	&lt;machine&gt; &lt;user&gt; &lt;executable&gt;</p><p>The executable is normally ppmtompeg (you may need to give the complete path if you've built for different architectures). If the machine is a remote machine, then the line should be:</p><p>	REMOTE &lt;machine&gt; &lt;user&gt; &lt;executable&gt; &lt;parameter file&gt;</p><p>Full paths should generally be used when describing executables and parameter files.  This INCLUDES the parameter file given as an argument to the original call to ppmtompeg.  Also, .rhosts files on the appropriate machines should have the appropriate information.</p><p>The encoder will use the original machine for the master and I/O server processes, and uses the listed machines as slaves to do the computation.</p><p>Optional lines are RSH &lt;remote shell command&gt;</p><p>The encoder uses the remote shell command to start processes on other machines.  The default command is 'rsh.'  If your machine supports a different command, specify it here.</p><p>PARALLEL_TEST_FRAMES &lt;n&gt;</p><p>n is the number of frames to encode initially on each processor</p><p>PARALLEL_TIME_CHUNKS &lt;t&gt;</p><p>subsequently, each slave processor will be asked to encode for approximately t seconds.  Smaller values of &lt;t&gt; increase communication, but improve load balancing. The default values for these two options are n = 3 frames and t = 30 seconds.</p><p>PARALLEL_PERFECT</p><p>If this line is present, then scheduling is done on the assumption that work distribution will be perfectly even -- meaning that each machine is about the same speed.  The frames will simply be divided up evenly between the processors.  This has the advantage of very minimal scheduling overhead, but is obviously wrong if machines have varying speeds, or if the network load makes performance uneven.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This is version 1.5 it contins new features and bug fixes from version 1.3.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Not really a bug, but at least a limitation: If writing to an output file, ppmtompeg sometimes uses &lt;filename&gt;.* as temporary files.</p><p>No known bugs, but if you find any, report them to mpeg-bugs@plateau.cs.berkeley.edu.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Kevin Gong - University of California, Berkeley, keving@cs.berkeley.edu Ketan Patel - University of California, Berkeley, kpatel@cs.berkeley.edu Dan Wallach - University of California, Berkeley, dwallach@cs.berkeley.edu Darryl Brown - University of California, Berkeley, darryl@cs.berkeley.edu Eugene Hung - University of California, Berkeley, eyhung@cs.berkeley.edu Steve Smoot - University of California, Berkeley, smoot@cs.berkeley.edu</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ppmtomitsu.1.html"><span aria-hidden="true">&larr;</span> ppmtomitsu.1: Convert a portable pixmap to a mitsubishi s340-10 file</a></li>
   <li class="next"><a href="ppmtoneo.1.html">ppmtoneo.1: Convert a portable pixmap into an atari neochrome .neo file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
