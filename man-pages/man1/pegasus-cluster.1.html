<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pegasus-cluster: Run a list of applications</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run a list of applications">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pegasus-cluster (1) manual">
  <meta name="twitter:description" content="Run a list of applications">
  <meta name="twitter:image" content="https://www.carta.tech/images/pegasus-wms-pegasus-cluster-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pegasus-cluster.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pegasus-cluster (1) manual" />
  <meta property="og:description" content="Run a list of applications" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pegasus-wms-pegasus-cluster-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pegasus-cluster<small> (1)</small></h1>
        <p class="lead">Run a list of applications</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pegasus-cluster.1.html">
      <span itemprop="name">pegasus-cluster: Run a list of applications</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pegasus-wms/">
      <span itemprop="name">pegasus-wms</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pegasus-cluster.1.html">
      <span itemprop="name">pegasus-cluster: Run a list of applications</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>pegasus-cluster</strong> [<strong>-d</strong>] [<strong>-e</strong> | <strong>-f</strong>] [<strong>-S ec</strong>] [<strong>-s fn</strong>] [<strong>-R fn</strong>] [<strong>-n nr</strong>] [<strong>inputfile</strong>]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>pegasus-cluster</strong> tool executes a list of application in the order specified (assuming sequential mode.) It is generally used to do horizontal clustering of independent application, and does not care about any application failures. Such failures should be caught by using <strong>pegasus-kickstart</strong> to start application.</p><p>In vertical clustering mode, the <em>hard failure</em> mode is encouraged, ending execution as soon as one application fails. When running a complex workflow through <strong>pegasus-cluster</strong> , the order of applications in the input file must be topologically sorted.</p><p>Applications are usually using <strong>pegasus-kickstart</strong> to execute. In the <strong>pegasus-kickstart</strong> case, all invocations of <strong>pegasus-kickstart</strong> except the first should add the <strong>pegasus-kickstart</strong> option <em>-H</em> to supress repeating the XML preamble and certain other headers of no interest when repeated.</p><p><strong>pegasus-cluster</strong> permits shell-style quoting. One level of quoting is removed from the arguments. Please note that <strong>pegasus-kickstart</strong> will also remove one level of quoting.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">
<p><strong>-d</strong></p><p>This option increases the debug level. Debug message are generated on <em>stdout</em> . By default, debugging is minimal.</p><p><strong>-e</strong></p><p>This flag turns on the old behavior of <strong>pegasus-cluster</strong> to always run everything <em>and</em> return success no matter what. The <strong>-e</strong> flag is mutually exclusive with the <strong>-f</strong> flag. By default, all applications are executed regardles of failures. Any detected application failure results in a non-zero exit status from <strong>pegasus-cluster</strong>.</p><p><strong>-f</strong></p><p>In hard failure mode, as soon as one application fails, either through a non-zero exit code, or by dying on a signal, further execution is stopped. In parallel execution mode, one or more other applications later in the sequence file may have been started already by the time failure is detected. <strong>Pegasus-cluster</strong> will wait for the completion of these applications, but not start new ones. The <strong>-f</strong> flag is mutually exclusive with the <strong>-e</strong> flag. By default, all applications are executed regardless of failures. Any detected application failure results in a non-zero exit status from <strong>pegasus-cluster</strong>.</p><p><strong>-h</strong></p><p>This option prints the help message and exits the program.</p><p><strong>-s fn</strong></p><p>This option will send protocol message (for Mei) to the specified file. By default, all message are written to <em>stdout</em> .</p><p><strong>-R fn</strong></p><p>The progress reporting feature, if turned on, will write one event record whenever an application is started, and one event record whenever an application finished. This is to enable tracking of jobs in progress. By default, track logs are not written, unless the environment variable <em>SEQEXEC_PROGRESS_REPORT</em> is set. If set, progress reports are appended to the file pointed to by the environment variable.</p><p><strong>-S ec</strong></p><p>This option is a multi-option, which may be used multiple times. For each given non-zero exit-code of an application, mark it as a form of success. In <strong>-f</strong> mode, this means that <strong>pegasus-cluster</strong> will not fail when seeing this exit code from any application it runs. By default, all non-zero exit code constitute failure.</p><p><strong>-n nr</strong></p><p>This option determines the amount of parallel execution. Typically, parallel execution is only recommended on multi-core systems, and must be deployed rather carefully, i.e. only completely independent jobs across of whole <em>inputfile</em> should ever be attempted to be run in parallel. The argument <strong>nr</strong> is the number of parallel jobs that should be used. In addition to a non-negative integer, the word <em>auto</em> is also understood. When <em>auto</em> is specified, <strong>pegasus-cluster</strong> will attempt to automatically determine the number of cores available in the system. Strictly sequential execution, as if <em>nr</em> was 1, is the default. If the environment variable <em>SEQEXEC_CPUS</em> is set, it will determine the default number of CPUs.</p><p><strong>inputfile</strong></p><p>The input file specifies a list of application to run, one per line. Comments and empty lines are permitted. The comment character is the octothorpe (#), and extends to the end of line. By default, <strong>pegasus-cluster</strong> uses <em>stdin</em> to read the list of applications to execute.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>The <strong>pegasus-cluster</strong> tool returns 1, if an illegal option was used. It returns 2, if the status file from option <strong>-s</strong> cannot be opened. It returns 3, if the input file cannot be opened. It does <em>not</em> return any failure for failed applications in old-exit <strong>-e</strong> mode. In <em>default</em> and hard failure <strong>-f</strong> mode, it will return 5 for true failure. The determination of failure is modified by the <strong>-S</strong> option.</p><p>All other internal errors being absent, <strong>pegasus-cluster</strong> will always return 0 when run without <strong>-f</strong> . Unlike shell, it will <em>not</em> return the last application\(cqs exit code. In <em>default</em> mode, it will return 5, if any application failed. Unlike shell, it will <em>not</em> return the last application\(cqs exit code. However, it will execute all applications. The determination of failure is modified by the <strong>-S</strong> flag. In <strong>-f</strong> mode, *pegasus-cluster returns either 0 if all main sequence applications succeeded, or 5 if one failed; or more than one in parallel execution mode. It will run only as long as applications were successful. As before, the *-S flag determines what constitutes a failure.</p><p>The <strong>pegasus-cluster</strong> application will also create a small summary on <em>stdout</em> for each job, and one for itself, about the success and failure. The field <strong>failed</strong> reports any exit code that was not zero or a signal of death termination. It does <em>not</em> include non-zero exit codes that were marked as success using the <strong>-S</strong> option.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TASK SUMMARY</h2>
        <div class="sectioncontent">
<p>Each task executed by <strong>pegasus-cluster</strong> generates a record bracketed by square brackets like this (each entry is broken over two lines for readability):</p>
<pre>
[cluster-task id=1, start="2011-04-27T14:31:25.340-07:00", duration=0.521,
 status=0, line=1, pid=18543, app="/bin/usleep"]
[cluster-task id=2, start="2011-04-27T14:31:25.342-07:00", duration=0.619,
 status=0, line=2, pid=18544, app="/bin/usleep"]
[cluster-task id=3, start="2011-04-27T14:31:25.862-07:00", duration=0.619,
 status=0, line=3, pid=18549, app="/bin/usleep"]
</pre>
<p>Each record is introduced by the string <em>cluster-task</em> with the following constituents, where strings are quoted:</p><p><strong>id</strong></p><p>This is a numerical value for main sequence application, indicating the application\(cqs place in the sequence file. The setup task uses the string <em>setup</em> , and the cleanup task uses the string <em>cleanup</em> .</p><p><strong>start</strong></p><p>is the ISO 8601 time stamp, with millisecond resolution, when the application was started. This string is quoted.</p><p><strong>duration</strong></p><p>is the application wall-time duration in seconds, with millisecond resolution.</p><p><strong>status</strong></p><p>is the <em>raw</em> exit status as returned by the <em>wait</em> family of system calls. Typically, the exit code is found in the high byte, and the signal of death in the low byte. Typically, 0 indicates a successful execution, and any other value a problem. However, details could differ between systems, and exit codes are only meaningful on the same os and architecture.</p><p><strong>line</strong></p><p>is the line number where the task was found in the main sequence file. Setup- and cleanup tasks don\(cqt have this attribute.</p><p><strong>pid</strong></p><p>is the process id under which the application had run.</p><p><strong>app</strong></p><p>is the path to the application that was started. As with the progress record, any <strong>pegasus-kickstart</strong> will be parsed out so that you see the true application.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PEGASUS-CLUSTER SUMMARY</h2>
        <div class="sectioncontent">
<p>The final summary of counts is a record bracketed by square brackets like this (broken over two lines for readability):</p>
<pre>
[cluster-summary stat="ok", lines=3, tasks=3, succeeded=3, failed=0, extra=0,
 duration=1.143, start="2011-04-27T14:31:25.338-07:00", pid=18542, app="./seqexec"]
</pre>
<p>The record is introduced by the string <em>cluster-summary</em> with the following constituents:</p><p><strong>stat</strong></p><p>The string <em>fail</em> when <strong>pegasus-cluster</strong> would return with an exit status of 5. Concretely, this is any failure in <em>default</em> mode, and first failure in <strong>-f</strong> mode. Otherwise, it will always be the string <em>ok</em> , if the record is produced.</p><p><strong>lines</strong></p><p>is the stopping line number of the input sequence file, indicating how far processing got. Up to the number of cores additional lines may have been parsed in case of <strong>-f</strong> mode.</p><p><strong>tasks</strong></p><p>is the number of tasks processed.</p><p><strong>succeeded</strong></p><p>is the number of main sequence jobs that succeeded.</p><p><strong>failed</strong></p><p>is the number of main sequence jobs that failed. The failure condition depends on the <strong>-S</strong> settings, too.</p><p><strong>extra</strong></p><p>is 0, 1 or 2, depending on the existence of setup- and cleanup jobs.</p><p><strong>duration</strong></p><p>is the duration in seconds, with millisecond resolution, how long *pegasus-cluster ran.</p><p><strong>start</strong></p><p>is the start time of <strong>pegasus-cluster</strong> as ISO 8601 time stamp.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pegasus-cluster&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/pegasus-kickstart.1.html"><strong>pegasus-kickstart</strong>(1)</a></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>The <strong>-S</strong> option sets success codes globally. It is not possible to activate success codes only for one specific application, and doing so would break the shell compatibility. Due to the global nature, use success codes sparingly as last resort emergency handler. In better plannable environments, you should use an application wrapper instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The following shows an example input file to <strong>pegasus-cluster</strong> making use of <strong>pegasus-kickstart</strong> to track applications.</p>
<pre>
#
# mkdir
/path/to/pegasus-kickstart -R HPC -n mkdir /bin/mkdir -m 2755 -p split-corpus split-ne-corpus
#
# drop-dian
/path/to/pegasus-kickstart -H -R HPC -n drop-dian -o &apos;^f-new.plain&apos; /path/to/drop-dian /path/to/f-tok.plain /path/to/f-tok.NE
#
# split-corpus
/path/to/pegasus-kickstart -H -R HPC -n split-corpus /path/to/split-seq-new.pl 23 f-new.plain split-corpus/corpus.
#
# split-corpus
/path/to/pegasus-kickstart -H -R HPC -n split-corpus /path/to/split-seq-new.pl 23 /path/to/f-tok.NE split-ne-corpus/corpus.
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p>A number of environment variables permits to influence the behavior of <strong>pegasus-cluster</strong> during run-time.</p><p><strong>SEQEXEC_PROGRESS_REPORT</strong></p><p>If this variable is set, and points to a writable file location, progress report records are appended to the file. While care is taken to atomically append records to the log file, in case concurrent instances of <strong>pegasus-cluster</strong> are running, broken Linux NFS may still garble some content.</p><p><strong>SEQEXEC_CPUS</strong></p><p>If this variable is set to a non-negative integer, that many CPUs are attempted to be used. The special value <em>auto</em> permits to auto-detect the number of CPUs available to <strong>pegasus-cluster</strong> on the system.</p><p><strong>SEQEXEC_SETUP</strong></p><p>If this variable is set, and contains a single fully-qualified path to an executable and arguments, this executable will be run before any jobs are started. The exit code of this setup job will have no effect upon the main job sequence. Success or failure will not be counted towards the summary.</p><p><strong>SEQEXEC_CLEANUP</strong></p><p>If this variable is set, and contains a single fully-qualified path to an executable and arguments, this executable will be before <strong>pegasus-cluster</strong> quits. Failure of any previous job will have no effect on the ability to run this job. The exit code of the cleanup job will have no effect on the overall success or failure state. Success or failure will not be counted towards the summary.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>As you may have noticed, <strong>pegasus-cluster</strong> had the name <strong>seqexec</strong> in previous incantations. We are slowly moving to the new name to avoid clashes in a larger OS installation setting. However, there is no pertinent need to change the internal name, too, as no name clashes are expected.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Jens-S. Vöckler &lt;voeckler at isi dot edu&gt;</p><p>Pegasus <strong>http://pegasus.isi.edu/</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pegasus-cleanup.1.html"><span aria-hidden="true">&larr;</span> pegasus-cleanup.1: Removes files during pegasus workflows enactment.</a></li>
   <li class="next"><a href="pegasus-config.1.html">pegasus-config.1: The authority for where parts of the pegasus system exists on the filesystem. pegasus-config can be used to find libraries such as the dax generators. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
