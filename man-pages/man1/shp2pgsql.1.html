<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shp2pgsql: Shapefile to postgis loader</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shapefile to postgis loader">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shp2pgsql (1) manual">
  <meta name="twitter:description" content="Shapefile to postgis loader">
  <meta name="twitter:image" content="https://www.carta.tech/images/postgis-shp2pgsql-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/shp2pgsql.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shp2pgsql (1) manual" />
  <meta property="og:description" content="Shapefile to postgis loader" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/postgis-shp2pgsql-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shp2pgsql<small> (1)</small></h1>
        <p class="lead">Shapefile to postgis loader</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/shp2pgsql.1.html">
      <span itemprop="name">shp2pgsql: Shapefile to postgis loader</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/postgis/">
      <span itemprop="name">postgis</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/shp2pgsql.1.html">
      <span itemprop="name">shp2pgsql: Shapefile to postgis loader</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">
<p>shp2pgsql [<em>options</em>] <em>shapefile</em> [<em>schema</em><strong>.</strong>]<em>table</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The shp2pgsql data loader converts ESRI Shape files into SQL suitable for insertion into a PostGIS/PostgreSQL database.</p><p>Version: 1.1.5 (2006/10/06)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>The &lt;shapefile&gt; is the name of the shape file, without any extension information. For example, 'roads' would be the name of the shapefile comprising the 'roads.shp', 'roads.shx', and 'roads.dbf' files.</p><p>The &lt;tablename&gt; is the (optionally schema-qualified) name of the database table you want the data stored in in the database. Within that table, the geometry will be placed in the 'geo_value' column by default.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The loader has several operating modes distinguished by command line flags:</p><p>(Note that -a, -c, -d and -p are mutually exclusive.)</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Drops the database table before creating a new table with the data in the Shape file.</p>
  </dd>
  <dt>
    <p><strong>-a</strong></p>
  </dt>
  <dd>
    <p>Appends data from the Shape file into the database table. Note that to use this option to load multiple files, the files must have the same attributes and same data types.</p>
  </dd>
  <dt>
    <p><strong>-c</strong></p>
  </dt>
  <dd>
    <p>Creates a new table and populates it from the Shape file. This is the default mode.</p>
  </dd>
  <dt>
    <p><strong>-p</strong></p>
  </dt>
  <dd>
    <p>Only produces the table creation SQL code, without adding any actual data. This can be used if you need to completely separate the table creation and data loading steps.</p>
  </dd>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>Use the PostgreSQL "dump" format for the output data. This can be combined with -a, -c and -d. It is much faster to load than the default "insert" SQL format. Use this for very large data sets.</p>
  </dd>
  <dt>
    <p><strong>-w</strong></p>
  </dt>
  <dd>
    <p>Output WKT format, instead of WKB.  Note that this can introduce coordinate drifts due to loss of precision.</p>
  </dd>
  <dt>
    <p><strong>-e</strong></p>
  </dt>
  <dd>
    <p>Execute each statement on its own, without using a transaction. This allows loading of the majority of good data when there are some bad geometries that generate errors.  Note that this cannot be used with the -D flag as the "dump" format always uses a transaction.</p>
  </dd>
  <dt>
    <p><strong>-s</strong> [&lt;<em>FROM_SRID</em>&gt;:]&lt;<em>SRID</em>&gt;</p>
  </dt>
  <dd>
    <p>Creates and populates the geometry tables with the specified SRID. If FROM_SRID is given, the geometries will be reprojected. Reprojection cannot be used with -D.</p>
  </dd>
  <dt>
    <p><strong>-G</strong></p>
  </dt>
  <dd>
    <p>Use the geography type instead of geometry.  Geography is used to store lat/lon data.  At the moment the only spatial reference supported is 4326.</p>
  </dd>
  <dt>
    <p><strong>-g</strong> &lt;<em>geometry_column</em>&gt;</p>
  </dt>
  <dd>
    <p>Specify the name of the geometry column (mostly useful in append mode).</p>
  </dd>
  <dt>
    <p><strong>-k</strong></p>
  </dt>
  <dd>
    <p>Keep idendifiers case (column, schema and attributes). Note that attributes in Shapefile are usually all UPPERCASE.</p>
  </dd>
  <dt>
    <p><strong>-i</strong></p>
  </dt>
  <dd>
    <p>Coerce all integers to standard 32-bit integers, do not create 64-bit bigints, even if the DBF header signature appears to warrant it.</p>
  </dd>
  <dt>
    <p><strong>-S</strong></p>
  </dt>
  <dd>
    <p>Generate simple Geometries instead of MULTIgeometries. Shape files don't differ between LINESTRINGs and MULTILINESTRINGs, so shp2pgsql generates MULTILINESTRINGs by default. This switch will produce LINESTRINGs instead, but shp2pgsql will fail when it hits a real MULTILINESTRING. The same works for POLYGONs vs. MULTIPOLYGONs.</p>
  </dd>
  <dt>
    <p><strong>-W</strong> &lt;<em>encoding</em>&gt;</p>
  </dt>
  <dd>
    <p>Specify the character <em>encoding</em> of Shapefile's attributes. If this option is used the output will be encoded in UTF-8.</p>
  </dd>
  <dt>
    <p><strong>-I</strong></p>
  </dt>
  <dd>
    <p>Create a GiST index on the geometry column.</p>
  </dd>
  <dt>
    <p><strong>-N</strong> &lt;<em>policy</em>&gt;</p>
  </dt>
  <dd>
    <p>Specify NULL geometries handling policy (insert,skip,abort).</p>
  </dd>
  <dt>
    <p><strong>-T</strong> &lt;<em>tablespace</em>&gt;</p>
  </dt>
  <dd>
    <p>Specify the tablespace for the new table.  Indexes will still use the default tablespace unless the -X parameter is also used.  The PostgreSQL documentation has a good description on when to use custom tablespaces.</p>
  </dd>
  <dt>
    <p><strong>-X</strong> &lt;<em>tablespace</em>&gt;</p>
  </dt>
  <dd>
    <p>Specify the tablespace for the new table's indexes.  This applies to the primary key index, and the GIST spatial index if -I is also used.</p>
  </dd>
  <dt>
    <p><strong>-?</strong></p>
  </dt>
  <dd>
    <p>Display version and usage information.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSTALLATION</h2>
        <div class="sectioncontent">
<p>To compile the program from source, simply run "make" in the source directory. Then copy the binary in your shell search path (or wherever you like). This text is also available as a man page in the ../doc/man/ directory, ready for copying it into the manual search path on unixoid systems.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>An example session using the loader to create an input file and uploading it might look like this:</p><p># <strong>shp2pgsql shaperoads roadstable roadsdb &gt; roads.sql</strong></p><p># <strong>psql -d roadsdb -f roads.sql</strong></p><p>A conversion and upload can be done all in one step using UNIX pipes:</p><p># <strong>shp2pgsql shaperoads roadstable roadsdb | psql -d roadsdb</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Originally written by Jeff Lounsbury &lt;jeffloun@refractions.net&gt;. Improved and maintained by Sandro Santilli &lt;strk@refractions.net&gt;. Includes small contributions and improvements by others.</p><p>This application uses functionality from shapelib 1.2.9 by Frank Warmerdam &lt;warmerda@gdal.velocet.ca&gt; to read from ESRI Shape files.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO shp2pgsql&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/pgsql2shp.1.html"><strong>pgsql2shp</strong>(1)</a></p><p>More information is available at http://postgis.refractions.net</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="shp2img.1.html"><span aria-hidden="true">&larr;</span> shp2img.1: Create a map image from a mapfile</a></li>
   <li class="next"><a href="shp2pgsql-gui.1.html">shp2pgsql-gui.1: Graphical user interface for shp2pgsql <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
