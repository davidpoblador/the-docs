<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cvs-buildpackage: Build debian packages from a cvs repository.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Build debian packages from a cvs repository.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="cvs-buildpackage (1) manual">
  <meta name="twitter:description" content="Build debian packages from a cvs repository.">
  <meta name="twitter:image" content="https://www.carta.tech/images/cvs-buildpackage-cvs-buildpackage-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/cvs-buildpackage.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="cvs-buildpackage (1) manual" />
  <meta property="og:description" content="Build debian packages from a cvs repository." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cvs-buildpackage-cvs-buildpackage-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">cvs-buildpackage<small> (1)</small></h1>
        <p class="lead">Build debian packages from a cvs repository.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cvs-buildpackage.1.html">
      <span itemprop="name">cvs-buildpackage: Build debian packages from a cvs repository.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cvs-buildpackage/">
      <span itemprop="name">cvs-buildpackage</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cvs-buildpackage.1.html">
      <span itemprop="name">cvs-buildpackage: Build debian packages from a cvs repository.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>cvs-buildpackage</strong> <em>[options]</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This manual page explains the Debian <strong>cvs-buildpackage</strong> utility, which is used to build Debian packages whose sources are stored in a <em>CVS</em> repository. This is a <strong>CVS</strong> -aware wrapper around dpkg-buildpackage, and it first parses <em>./debian/changelog;</em> exports the corresponding version (tagged <em>debian_version_&lt;$version&gt;</em> ), and runs <strong>dpkg-buildpackage</strong> in the exported tree.  It looks for uncommitted files in the source tree, and offers to abort before doing anything so that the user may commit the files in, if they wish. <strong>cvs-buildpackage</strong> can also optionally automatically re-tag all files before exporting the source (this functionality is only relevant in the top level directory of a checked out Debian package source tree, of course).</p><p>Please note that the <strong>work</strong> directory referred to below is the scratch directory where the program does its work; it is where it shall export the sources from CVS, and it assumes full control of that directory <em>Read:</em> anything in that directory, apart from the orig source files, can be deleted by <strong>cvs-buildpackage</strong> Make sure not to have <em>your</em> checked out sources/working directory in the same location, as you may lose data.</p><p>If this utility is not run from a top level directory of a checked out Debian package source tree, then to build an old version the cvs module name or the package name have to be supplied on the command line.</p><p>Combined with the companion utilities <strong>cvs-inject</strong> and <strong>cvs-upgrade,</strong> this provides an infrastructure to facilitate the use of <strong>CVS</strong> by Debian maintainers. This allows one to keep separate CVS branches of a package for <em>stable,</em> <em>unstable,</em> and possibly <em>experimental</em> distributions, along with the other benefits of a version control system.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-h</strong> Print out a usage message.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-M&lt;module&gt;</strong></p>
  </dt>
  <dd>
    <p>The name of the CVS module.</p>
  </dd>
  <dt>
    <p><strong>-P&lt;package&gt;</strong></p>
  </dt>
  <dd>
    <p>Sets the name of the package. Very useful if this is not running in the CVS checked out source tree, in which case one also needs the version of the package, which may optionally be determined by checking out the latest <strong>debian/changelog</strong> file.</p>
  </dd>
  <dt>
    <p><strong>-V&lt;version&gt;</strong></p>
  </dt>
  <dd>
    <p>The version number of the package. In conjunction with setting the package name, this option allows operation outside a CVS source tree (just needs the repository).</p>
  </dd>
  <dt>
    <p><strong>-T&lt;tag&gt;</strong></p>
  </dt>
  <dd>
    <p>The CVS tag to use for exporting sources, rather than constructing one from the version. This assumes you know what you are doing.</p>
  </dd>
  <dt>
    <p><strong>-U&lt;tag&gt;</strong></p>
  </dt>
  <dd>
    <p>The CVS tag to use for the upstream tag, rather than constructing one from the upstream version. This assumes you know what you are doing.</p>
  </dd>
  <dt>
    <p><strong>-C&lt;Build</strong>Command&gt;</p>
  </dt>
  <dd>
    <p>Sets the name of the builder program invoked, nominally set to <strong>dpkg-buildpackage.</strong> However, the user may choose to use a different build program, or a wrapper, or even <em>'chroot /opt/root dpkg-buildpackage'</em> to build the package in a <em>chroot</em> jail, if desired. (Obviously, this requires that the Work directory to be a subdirectory of a previously set up chroot jail).  One may also hook in <strong>pbuilder</strong> by setting this variable to <em>'pdebuild --auto-debsign --buildresult ../'</em><strong>.</strong> (Again, this requires that pbuilder has been set up correctly). This argument overrides the settings in the environment variable <strong>CVSDEB_BUILDPACKAGE,</strong> and the configuration file variable <strong>conf_buildpackage.</strong></p>
  </dd>
  <dt>
    <p><strong>-G&lt;get method&gt;</strong></p>
  </dt>
  <dd>
    <p>This option, if set, should contain a command to execute to get the original tarball into the current directory. This can then be used to allow one to get the original file using, for instance, <strong>wget</strong> or <strong>curl</strong>. This overrides the <strong>CVSDEB_GET_ORIG</strong> environment variable and the <strong>conf_get_orig</strong> configuration file option.</p>
  </dd>
  <dt>
    <p><strong>-A</strong></p>
  </dt>
  <dd>
    <p>Use <strong>apt-get source</strong> to retrive the original tarball. This option has no effect unless a source package with the correct upstream version has already been uploaded and is referenced from a <strong>Sources</strong> file known to <strong>apt</strong>. If <strong>-A</strong> and <strong>-G</strong> are both given, <strong>-G</strong> is tried first, and <strong>apt</strong> is used only if that did not produce the tarball. This overrides the <strong>CVSDEB_USE_APT</strong> environment variable and the <strong>conf_use_apt</strong> configuration file option.</p>
  </dd>
  <dt>
    <p><strong>-R&lt;root&nbsp;directory&gt;</strong></p>
  </dt>
  <dd>
    <p>Root of the original sources archive. We expect to find the <em>&lt;package&nbsp;name&gt;_&lt;version&gt;.orig.tar.gz</em> file under <em>&lt;root&nbsp;directory&gt;/package&nbsp;name&gt;/</em> unless the cvs-buildpackage work directory has been set, or we want to export the original sources from the vendor branch of the <em>CVS</em> tree. If the cvs-buildpackage work directory is set anywhere, (command line, configuration file, environment variable), the root directory value is ignored, since we only need the root directory to set defaults for the cvs-buildpackage work directory. This argument overrides the settings in the environment variable <strong>CVSDEB_ROOTDIR,</strong> and the configuration file variable <strong>conf_rootdir.</strong> Please note that the cvs-buildpackage work directory referred to here is the scratch directory where this program works, not the directory that the human uses to work in. This should probably not be a sub dir of <strong>CVSROOT,</strong> since cvs shall refuse to export packages there, and the script shall fail.</p>
  </dd>
  <dt>
    <p><strong>-W&lt;work directory&gt;</strong></p>
  </dt>
  <dd>
    <p>The full path name for the cvs-buildpackage working directory, into which the sources will be exported out of CVS and which should contain the original <em>&lt;package&nbsp;name&gt;_&lt;version&gt;.orig.tar.gz</em> Please note that it is not strictly essential to have the original sources, as this script will check out the vendor branch version tagged as <strong>upstream_version_&lt;version&gt;</strong> (without the Debian revision). However, these recreated original sources are likely to be different for consecutive runs of cvs-buildpackage, and very likely to be different from the pristine original sources (different enough to cause problems with an upload). Thus it is <strong>strongly</strong> advisable to keep the orig.tar.gz file around. Setting this variable overrides the settings for the root directory. This argument also overrides the settings in the environment variable <strong>CVSDEB_WORKDIR,</strong> and the configuration file variable <strong>conf_workdir.</strong> Please note that the cvs-buildpackage work directory referred to here is the scratch directory where this program works, not the directory that the human uses to work in. Also, you should specify an absolute path name for the work directory.  This should probably not be a sub dir of <strong>CVSROOT,</strong> since cvs shall refuse to export packages there, and the script shall fail.</p>
  </dd>
  <dt>
    <p><strong>-F</strong></p>
  </dt>
  <dd>
    <p>The Force Tag option. This only has effect if run in the source directory. If set, it forces a <em>cvs tag -F</em> operation to be performed before exporting the sources. This argument overrides the settings in the environment variable <strong>CVSDEB_FORCETAG,</strong> and the configuration file variable <strong>conf_forcetag.</strong> The default action is not to force a tag before export.</p>
  </dd>
  <dt>
    <p><strong>-E</strong></p>
  </dt>
  <dd>
    <p>The Full Export option. Normally, cvs-buildpackage will export all the data from CVS using <em>cvs export.</em> If the orig.tar.gz is not available in the working directory, the full tree will be exported from CVS regardless of whether this option is set or not. This option overrides the environment variable <strong>CVSDEB_FULLEXPORT,</strong> and the configuration file variable <strong>conf_fullexport.</strong></p>
  </dd>
  <dt>
    <p><strong>-op</strong></p>
  </dt>
  <dd>
    <p>The opposite of full export. Using this option resets the value of full export. Normally, cvs-buildpackage will export all the data from CVS using <em>cvs export.</em> With this option set, cvs-buildpackage will extract the orig.tar.gz in the cvs-buildpackage working directory, and then use the <em>cvs rdiff</em> command to bring that tree up-to-date with the CVS tree we're building. Please look at the <strong>-f&lt;fix_script&gt;</strong> option to see how to massage the source tree after extraction and patching.</p>
  </dd>
  <dt>
    <p><strong>-ctp</strong></p>
  </dt>
  <dd>
    <p>Include <em>package</em><strong>_</strong> at the start of the CVS tag.  This overrides the <strong>CVSDEB_PACKAGEINTAG</strong> environment variable and the <strong>conf_forcetag</strong> configuration file option.  The default is not to include the prefix.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>The no exec (or dry-run) option, causing <strong>cvs-buildpackage</strong> to print out all actions that would be taken without actually executing them.</p>
  </dd>
  <dt>
    <p><strong>-f&lt;fix_script&gt;</strong></p>
  </dt>
  <dd>
    <p>This option, if set, should point to a script that should be run just from the top level of the source tree to set up permissions of scripts that have been created by pathching the sources from an recently extracted original tar file (the behaviour attained by setting the <strong>-op</strong> option. This script is called with two arguments, the package name, and version. This script is only relevant when that option has been used. There a number of variables that are exported into the environment, for example <strong>package</strong> contains the name of the package, <strong>non_epoch_version</strong> contains the version of the package without the epoch, <strong>upstream_version</strong> contains the upstream version. <strong>debian_version</strong> contains the debian revision. <strong>cvstag</strong> contains the cvs tag, and <strong>cvs_upstream_tag</strong> contains the tag for the upstream version.</p>
  </dd>
  <dt>
    <p><strong>-H&lt;hook_script&gt;</strong></p>
  </dt>
  <dd>
    <p>This option, if set, should point to a script that should be run just before calling <strong>dpkg-buildpackage.</strong> Ideally, things like this are done using the modules file and programs, but is still provided here for convenience. This script is called with two arguments, the package name, and version. There a number of variables that are exported into the environment, for example <strong>package</strong> contains the name of the package, <strong>non_epoch_version</strong> contains the version of the package without the epoch, <strong>upstream_version</strong> contains the upstream version. <strong>debian_version</strong> contains the debian revision. <strong>cvstag</strong> contains the cvs tag, and <strong>cvs_upstream_tag</strong> contains the tag for the upstream version. This argument overrides the settings in the environment variable <strong>CVSDEB_HOOK</strong> which in turn over rides the configuration file option <strong>conf_hook_script.</strong></p>
  </dd>
  <dt>
    <p><strong>-x&lt;prefix&gt;</strong></p>
  </dt>
  <dd>
    <p>This option provides the CVS default module prefix (should really fix the CVS modules file). This argument overrides the settings in the environment variable <strong>CVSDEB_PREFIX.</strong> <strong>Note:</strong> The configuration file variable <strong>conf_prefix is not honoured by</strong> <strong>cvs-buildpackage,</strong> since the prefix is required to calculate the variables that are supposed to be defined when we load the config file (chicken and egg problem).</p>
  </dd>

</dl>
<p>The rest of the command line arguments are passed on, uninterpreted, to <strong>dpkg-buildpackage,</strong> though we do pay attention to the -r <strong>(root command)</strong> option (which gives the command to achieve root access, usually <em>sudo, fakeroot,</em> or <em>super</em> ).  The -r option overrides the other means of setting the root command, namely, the environment variable <strong>CVSDEB_ROOTCOMMAND,</strong> which in turn overrides the config file option <strong>conf_rootcommand.</strong> No attempt is made to check any other option. Please use the -h option to see which of the <strong>dpkg-buildpackage</strong> options are supported and passed on.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>Apart from the runtime options, <strong>cvs-buildpackage</strong> also looks for site-wide defaults in the file <em>/etc/cvsdeb.conf.</em> After that, it looks for and reads <em>~/.cvsdeb.conf .</em> The default configuration allows there to be a site wide override for the root or the cvs-buildpackage working directories on the site, but the <em>cvsdeb.conf</em> files are actually Bourne shell snippets, and any legal shell directives may be included in there. <strong>Note:</strong> Caution is urged with this file, since you can totally change the way that the script behaves by suitable editing this file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO cvs-buildpackage&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/dpkg-buildpackage.1.html"><strong>dpkg-buildpackage</strong>(1)</a>, <a href="../man1/cvs-inject.1.html"><strong>cvs-inject</strong>(1)</a>, <a href="../man1/cvs-upgrade.1.html"><strong>cvs-upgrade</strong>(1)</a>, <a href="../man5/cvsdeb.conf.5.html"><strong>cvsdeb.conf</strong>(5)</a>, <a href="../man1/cvs.1.html"><strong>cvs</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written Manoj Srivastava &lt;srivasta@debian.org&gt;, for the Debian GNU/Linux system.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="cvs-autoreleasedeb.1.html"><span aria-hidden="true">&larr;</span> cvs-autoreleasedeb.1: Automatic release of debian packages from cvs</a></li>
   <li class="next"><a href="cvs-clean.1.html">cvs-clean.1: Delete all files and directories not registered with cvs <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
