<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ips: Intelligent process status</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Intelligent process status">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ips (1) manual">
  <meta name="twitter:description" content="Intelligent process status">
  <meta name="twitter:image" content="https://www.carta.tech/images/ips-ips-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ips.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ips (1) manual" />
  <meta property="og:description" content="Intelligent process status" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ips-ips-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ips<small> (1)</small></h1>
        <p class="lead">Intelligent process status</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ips.1.html">
      <span itemprop="name">ips: Intelligent process status</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ips/">
      <span itemprop="name">ips</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ips.1.html">
      <span itemprop="name">ips: Intelligent process status</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ips [column-options] [select-options] [sort-options]</strong> <strong>[other-options] [macro-names]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Ips</strong> is an intelligent ps-like program which displays process or thread status obtained from the <em>/proc</em> filesystem. It has features to make tracking of active, semi-active, and transient processes easy. It is extremely configurable, but is still efficient. <strong>Ips</strong> tries to consume as little runtime as possible by only collecting as much information as is needed for the particular display specified.</p><p><strong>Ips</strong> normally displays the process status once and then exits, but it can also act like a <em>top</em> program to display process status repeatedly. The output can be displayed line by line as for a dumb terminal, displayed through the <em>curses</em> library using cursor addressing, or displayed in a raw X11 window. The output can be colored to highlight rows of interest.</p><p>The information to be displayed about processes can be selected on a column-by-column basis. Each column displayes one piece of information about the processes. The set of columns to be displayed and their order may be changed.</p><p>Processes can be selected for displaying based on the values of one or more columns. Some selection criteria are pre-defined for efficiency and convenience, such as the process id and user name. Other selection criteria can be defined using general expressions which refer to any combination of the column values.</p><p>The order that processes are displayed is based on sorting the values of one or more columns. The set of columns to sort by, the order of the columns for sorting, and whether each sorting is normal or reversed can be changed. Arbitrary expressions based on the values of the columns can also be used for sorting.</p><p>Process lines can be colored based on arbitrary expressions so as to highlight the processes of interest. The foreground color, background color, underlining, and boldness can be set for the output. The header lines can also be colored.</p><p><strong>Ips</strong> reads initilization files to define macros which make it easy to specify useful combinations of configuration options. Therefore many different output formats and short-cuts to common option combinations can be used.</p><p>Options to <strong>ips</strong> are minus signs followed by short words or phrases. Multiple options cannot be combined together following one minus sign (unlike the case with many other utilities). Options are processed in the order that they are given on the command line. Combinations of options which appear to do conflicting actions are permitted. This is because each option merely modifies the state left from the previous options. The state left after all the options have been processed is the one which is actually executed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SPECIFYING COLUMNS FOR OUTPUT</h2>
        <div class="sectioncontent">
<p>There are many columns of information which can be selected for display. Each column displays one item of information about the displayed processes. The set of columns and their order can be specified by the user.</p><p>Each column has a defined width, which is usually adequate to hold the widest possible data item for that column. This width is just a default and can be changed if desired. The data items shown within a column are left justified, right justified, or centered within the column width according to the type of column. In some cases the column width might not be adequate to show the complete data item, and in this case the item is truncated to the column width. Truncation is indicated by a vertical bar at the right edge of the column. (The usual columns which require truncation are the <em>command</em> and <em>environment</em> columns, which displays the full command line or environment string for a process.)</p><p>The <em>ips</em> program enforces a limit on the total width used for displaying of columns. If too many columns are selected for display, then one or more columns from the right are removed until the remaining columns fit within the total width. The width limit is usually implicitly set by the terminal or window's width. But if desired, the width limit can be explicitly specified by the user. (This is convenient if the <em>ips</em> program's output is being piped to another process, for example.)</p><p>If the final displayed column does not extend out to the total width limit, then that column's width is extended to include the remaining columns. This allows more of the data item to be seen before it requires truncation. (Typically, the <em>command</em> column is the rightmost column so as to take advantage of these extra columns.)</p><p>The options for manipulating columns are <em>-col</em>, <em>-addcol</em>, <em>-remcol</em>, <em>-sep</em>, <em>-width</em>, <em>-colwidth</em>, <em>-vert</em>, and <em>-listcolumns</em>.</p><p>The <em>-col</em> option first clears any existing list of column names for display, and then sets the new list of column names to be displayed as specified. The columns are displayed in the order specified in the option. If there is a duplicate column name in the list, then only the last use of the column name is effective.</p><p>The <em>-addcol</em> option adds the specified columns to the existing list of column names to be displayed. The new columns are added in the order specified, and by default are appended after previously existing columns in the list. If any of the column names are already in the existing list, then they are removed from the list before being added back into it. An argument can be a number, in which case any later column names are inserted into the list starting at the specified column number. Out of range column numbers are silently changed to the nearest legal value. For example, <strong>ips -addcol 2 uid gid 999 percentcpu</strong> adds the user id column as column 2, the group id column as column 3, and appends the percentage cpu column after all other columns.</p><p>The <em>-remcol</em> option removes the specified columns from the list of column names, without caring whether or not the columns were in the list.</p><p>The <em>-sep</em> option specifies the separation between adjacent columns in the display. It has one argument, which is the number of spaces to insert between each pair of columns. The default separation is 2 spaces.</p><p>The <em>-width</em> option specifies the total width available for the display of columns. It has one argument, which is the number of columns available. If this option is not given and the output is to <strong>stdout</strong>, then the width is obtained from the kernel if <strong>stdout</strong> is a terminal, or else is set to 80 columns if <strong>stdout</strong> is not a terminal.</p><p>The <em>-colwidth</em> option specifies the width of a particular column. It has one or two arguments. The first argument is the name of the column whose width is to be set. The second argument is the desired width of the column. If the second argument is not given, then the column width is set to its default value.</p><p>The <em>-vert</em> option changes the output format from the default horizontal one into a vertical one. In vertical format, the status for each process is multi-line where each displayed value uses a complete line. The beginning of each line contains the column heading and a colon character, unless the <em>-noheader</em> option was used. Each value is left justified to the same position on the line and can use the rest of the available output width. The <em>-sep</em> option sets the number of spaces between the widest column header and the beginning of the values. If multiple processes are being displayed, then a blank line separates their status lines.</p><p>The <em>-listcolumns</em> option simply lists the names of the available columns and then exits. The heading for the column and the default width of the column is also shown.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SELECTION OF PROCESSES FOR DISPLAY</h2>
        <div class="sectioncontent">
<p>The set of processes to be shown can be specified by a number of options. Each of these options specifies a condition to be met. Processes will only be shown which meet all of the specified conditions.</p><p>The options which specify conditions to be met are <em>-pid</em>, <em>-user</em>, <em>-group</em>, <em>-my</em>, <em>-noroot</em>, <em>-noself</em>, <em>-active</em>, <em>-top</em>, and <em>-cond</em>.</p><p>The <em>-pid</em> option is followed by one or more process ids, and restricts the display to only the specified processes if they exist. Using this option multiple times adds to the list of process ids to be shown.</p><p>The <em>-user</em> option is followed by one or more user names or user ids, and restricts the display to processes with those user ids if they exist. Using this option multiple times adds to the list of users to be shown.</p><p>The <em>-group</em> option is followed by one or more group names or group ids, and restricts the display to processes with those group ids if they exist. Using this option multiple times adds to the list of groups to be shown.</p><p>The <em>-program</em> option is followed by one or more program names, and restricts the display to processes having those program names if they exist. A program name is the name of the executable file which started the process (as displayed in the <em>program</em> column). This is not always the same name as shown in the command line arguments. Using this option multiple times adds to the list of programs to be shown.</p><p>The <em>-my</em> option only selects process which have my user id.</p><p>The <em>-noroot</em> option disables selection of processes which run as root.</p><p>The <em>-noself</em> option removes the <strong>ips</strong> process from the display.</p><p>The <em>-active</em> option only shows processes which are either running or which have run recently.</p><p>The <em>-top</em> option limits the display to a specified number of processes. After displaying the specified number of processes, further ones are ignored. If no argument is given to the option, then the height of the terminal or window is used to limit the number of displayed processes.</p><p>The previous options can only select processes which match a small set of possible conditions. The <em>-cond</em> option is different, and understands general expressions. The expression is specified in the argument following the option. (The argument usually needs quoting to avoid being split into multiple arguments or having its tokens interpreted by the shell.)</p><p>You can select processes matching a condition which is any combination of the column values for the process. This is done by specifying an expression to be evaluated for each process. If the result of the expression is non-zero or non-null, then the process is selected. If the expression cannot be evaluated (such as an attempt to divide by zero), then no error is generated but the process will not be selected.</p><p>Most of the expression syntax from C can be applied to the column values, such as arithmetic, comparisons, logical ANDs and ORs, the use of parentheses, the question mark operator, and some built-in functions. Numeric and string constants can be used within expressions. Numbers are usually decimal, but are octal if started with a leading 0, and hex if started with a leading 0x. Strings are enclosed in a pair of matching single or double quotes. Generally, string values must be compared with string values, and numeric values compared with numeric values. But in some cases numeric values can be converted to strings for comparison.</p><p>Column values are represented in the expressions by their column names as listed by the <em>-listcolumns</em> option, where unique abbreviations are allowed. Values from multiple columns can be used in the same expression, and can be compared against each other. Some column values are numeric, whereas other column values are strings.</p><p>The value obtained from using a column name is usually its <em>base</em> value, which is the unformatted primitive unit of information for the column. For example, for runtimes, this is the number of <em>jiffies</em> of runtime the process has used (i.e., 100's of seconds). A base value can be either a numeric or string value, depending on the column.</p><p>You can apply qualifiers to the column names to use alternate representations of a column value. A qualifier is a word following the column name which is separated from it by a period. The allowed qualifiers are <em>base</em>, <em>show</em>, and <em>test</em>.</p><p>Using the <em>base</em> qualifier is the same thing as using the column name by itself (the base value).</p><p>Using the <em>show</em> qualifier returns the column value as a string value which is the same as is displayed for the column. So for example, for runtimes the <em>show</em> value contains colons and periods separating hours, minutes, and parts of seconds.</p><p>Using the <em>test</em> qualifier returns a boolean value (1 for TRUE and 0 for FALSE) indicating whether some useful aspect of the column is true. The meaning of this test varies depending on the column. For example, for the column showing the parent pid, the test returns whether or not the process has a parent (i.e., not 0 or 1).</p><p>There are several functions that can be used within expressions. These are <em>min</em>, <em>max</em>, <em>abs</em>, <em>strlen</em>, <em>match</em>, <em>cmp</em>, <em>str</em>, and <em>my</em>.</p><p>The <em>min</em>, <em>max</em>, and <em>abs</em> functions take numeric arguments, and take the minimum of two numbers, the maximum of two numbers, or the absolute value of a number.</p><p>The <em>strlen</em> function returns length of the string argument, or if a number was given, the length of the string representation of that number.</p><p>The <em>cmp</em> function compares two arguments and returns -1, 0, or 1 according to whether the first argument is less than, equal to, or greater than the second argument. If both arguments are numeric, then the comparison is done on their values. Otherwise, the comparison is done as a string, converting a numeric argument to a string value if required.</p><p>The <em>match</em> function takes two arguments which may be string or numeric values. Numeric values are converted into the corresponding string value. The first argument is a string value to be tested. The second argument is a wildcard pattern to match against. The wildcard syntax is like filename matching, so '?' means any single character, '*' means any sequence of characters, and '[]' matches single occurances of the enclosed characters. The function returns 1 if the string matches, and 0 if it does not.</p><p>The <em>-str</em> function converts its argument to a string value.</p><p>The <em>my</em> function takes one argument, which is a column name (possibly qualified). It returns the value of that column for the <strong>ips</strong> process <em>itself</em>. For example, <em>my(ttyname)</em> returns a string which is my terminal name. In order to be of maximum use, the <em>uid</em>, <em>user</em>, <em>gid</em>, and <em>group</em> columns return the user's real group and user ids for the <em>my</em> function, even if the <strong>ips</strong> program has been made setuid.</p><p>Upper case names can be used within expressions, which are macro names to be expanded into sub-expressions. These macro names are defined in the initialization files. The expansion of the macro must be a complete expression on its own, with proper use of parenthesis and operators. The macro name is replaced with the result of evaluating the sub-expression, and so can be a number or a string. The definition of a sub-expression can also contain macro names which will also be evaluated.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SORTING OF DISPLAYED PROCESSES</h2>
        <div class="sectioncontent">
<p>The default sorting order of displayed processes is by their process id. But the list of displayed processes can be sorted based on any combination of the column values. The columns to be sorted by do not have to be restricted to the set of columns which are being displayed.</p><p>The first specified sorting column is used to sort the processes. If two or more processes have the same value for the first sorting column, then they are sorted by the second specified sorting column (if specified). This process continues as long as there are sorting columns specified and any processes still need sorting. If any processes are still left with matching sorting values after all the sorting columns have been used, then the process ids are used for a final sort.</p><p>Sorting on a column can be either a normal sort, or a reverse sort. In a normal sort, processes with smaller values will be displayed first. In a reverse sort, processes with larger values will be displayed first. Values are compared based on the type of column used for sorting. Some columns sort based on integer values, and some sort based on string values. Even if the displayed value is a string, the sorting may be based on the underlying integral <em>base</em> value. (The <em>start-time</em> column is an example.)</p><p>The <em>-sort</em>, <em>-revsort</em>, <em>-sortexpr</em>, <em>-revsortexpr</em>, and <em>-nosort</em> options are used to specify sorting values.</p><p>The <em>-sort</em> and <em>-revsort</em> options are used to append columns to the sorting list, either for normal sorting or for reverse sorting. They are followed by the list of columns to be added for sorting.</p><p>The <em>-sortexpr</em> and <em>-revsortexpr</em> options append an arbitrary expression to the sorting list, either for normal sorting or for reverse sorting. The expression can be made up of column names, numbers, strings, and operators, as in the <em>-cond</em> option. Sorting is done on the result of the expression which may be a numeric or string value.</p><p>The <em>-nosort</em> removes all columns from the sorting list, leaving only the default sort based on process id.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COLORING OF THE OUTPUT</h2>
        <div class="sectioncontent">
<p>By default, all of the output text from <strong>ips</strong> is shown in the normal foreground and background colors of the output method (e.g., black on white for X11 output).</p><p>The information line, the header line, and the process rows can be individually colored by specifying foreground colors, background colors, and attributes for them.</p><p>The specification of a color is most generally given by string consisting of three parts which are separated by slash characters. These three parts are a foreground color name, a background color name, and attribute letters.</p><p>If only one slash is present then only a foreground and background color name is given, with no attributes. If no slash is present then only a foreground color name is given with no background name or attributes.</p><p>If a color name is empty or has the special value <em>default</em>, then that color is the default color of the output method.</p><p>The attribute letters can be either <strong>'</strong><em>b</em><strong>'</strong> to indicate bold (or bright) text, or else <strong>'</strong><em>u</em><strong>'</strong> to indicated underlined text, or else both.</p><p>Examples of color specifications are: <strong>red</strong>, <strong>/blue</strong>, <strong>green/yellow</strong>, <strong>default/default</strong>, <strong>//u</strong>, and <strong>red//bu</strong>. These set a foreground of red with a default background, a default foreground with a blue background, a foreground of green with a yellow background, a default foreground and background, a default foreground and background with the text underlined, and a red foreground with a default background with the text underlined and made bold.</p><p>The available colors depends on the output method, as well as the naming convention of the colors.</p><p>For X11 output, many colors are available and can be named explicitly or else specified using 3 or 6 hexadecimal digits following a hash mark to give the red, green, and blue components.</p><p>For curses and terminal output, up to 256 colors can be used (according to the capabilities of the terminal). The colors are numeric values from 0 to 255, with the first 8 being the primary colors, the next 8 being the secondary colors, the last 20 or so being gray scale colors, and the others an arbitrary color. Alternatively, the names of the eight primary colors can be used.</p><p>The information line can be colored using the <em>-infocolor</em> option. The header line can be colored using the <em>-headercolor</em> option.</p><p>The process rows being output can be colored using one or more uses of the <em>-rowcolor</em> option. This option takes two arguments. The first argument is a color specification. The second argument is an expression to be evaluated for the process being shown in the row, as in the <em>-cond</em> option. If the condition is true then the row will be colored in the specified color.</p><p>If multiple <em>-rowcolor</em> options are used and multiple conditions match a row, then the color of the last matching condition is used for the row.</p><p>Rows which are not matched by the conditions in any <em>-rowcolor</em> option are colored in the default foreground and background colors.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SPECIFYING THE DISPLAY METHOD</h2>
        <div class="sectioncontent">
<p>The output from <em>ips</em> can be displayed using one of several different methods. The <em>-once</em>, <em>-loop</em>, <em>-curses</em>, and <em>-x11</em> options are used to specify which of the display methods are used. The default option is <em>-once</em>.</p><p>Both of the <em>-once</em> and <em>-loop</em> options specifies a display method which writes the process status to <strong>stdout</strong> line by line using no cursor addressing sequences. Such output is suitable for saving to a file using redirection of standard output or for processing in a pipeline. The difference between the two options indicates whether or not the output is a once-only snapshot or is to be repeated indefinitely in a loop. There is no limit to the number of lines that can be written. The <em>-clear</em> option can be used with either of these options to write the standard ANSI clear screen escape sequence before each display of the process status.</p><p>The <em>-curses</em> option specifies a display method which uses the <strong>curses</strong>(3) library for efficient updating of the screen using cursor addressing sequences. This display uses the whole terminal screen. The screen can be resized if desired. The number of lines of information is limited by the size of the screen so that only a subset of the status might be visible at one time. However, the display can be scrolled automatically or manually so that eventually all of the status can be seen. The <em>ips</em> program is in looping mode for this display method. The program can be terminated by typing the <strong>q</strong> or <strong>ESCAPE</strong> characters into the terminal.</p><p>The <em>-x11</em> option specifies a display method which uses a raw X11 window (i.e., without using a terminal emulator such as <em>xterm</em>). The window can be resized if desired. The number of lines of information is limited by the number of rows in the window so that only a subset of the status might be visible at one time. However, the display can be scrolled automatically or manually so that eventually all of the status can be seen. The <em>ips</em> program is in looping mode for this display method. The program can be terminated by typing the <strong>q</strong> or <strong>ESCAPE</strong> characters into the window or by closing the window using the window manager.</p><p>The <em>-display</em>, <em>-geometry</em>, <em>-font</em>, <em>-foreground</em>, and <em>-background</em> options can be used to set the display name, window geometry, font name, foreground color, and background color for the X11 window. If no display name is set then the default one using the <strong>DISPLAY</strong> environment variable is used. The default window geometry is 150x50. The default font is the <strong>fixed</strong> font, which is a mono-space (i.e., fixed-width) font. If a different font is specified then it should also be a mono-space font. The default foreground and background colors are <strong>black</strong> and <strong>white</strong>.</p><p>Note: The X11 display mode is optional and must have been compiled into <em>ips</em> when it was built. This allows <em>ips</em> to be built for systems which have no X11 libraries installed. If your version of <em>ips</em> does not have X11 support, then the use of the <em>-x11</em> option will produce an error message and fail.</p><p>For all of the looping display methods, the <em>-sleep</em> option can be used to set the sleep time in seconds between updates. (If not given, the default sleep time is 10 seconds.) The argument to this option can be a fixed point value, so that for example, a value of 0.5 specifies a sleep of 1/2 second.</p><p>The <em>-scroll</em> and <em>-overlap</em> options can be used for the curses and X11 display modes. The <em>-scroll</em> option sets the time interval in seconds for automatic scolling of the display if more processes are displayed than will fit. The default scroll time is 30 seconds. Note that the scrolling interval does not affect how often the display is updated (use <em>-sleep</em> for that). It just means that when the display is next updated, if the required time since the last scrolling had elapsed, then scrolling occurs for that update. It might take many update cycles before scrolling allows all of the process status to be seen. Scrolling wraps around, so that after the last process has been seen in the display, then the next scrolled display will return to the first process again. A scroll time of zero disables automatic scrolling completely.</p><p>The <em>-overlap</em> option specifies the number of lines of process status which are duplicated when scrolling occurs. The default overlap is one line.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THREAD HANDLING</h2>
        <div class="sectioncontent">
<p>Depending on the options used, the <strong>ips</strong> program shows either the status of the processes in the system or the status of the threads in the system. Without any options only processes are shown. In order to show thread information, the <em>-showthreads</em> option must be used.</p><p>Some processes only consist of one thread of execution, which is the case for most simple programs which have no use for multi-threading. For these processes, the showing of processes or threads gives the same results and there are no problems in interpreting their status.</p><p>However, some processes contain more than one thread of execution. Threads share many of their attributes with each other, such as their memory and opened files, but have distinct program counters, stack pointers, runtime, and process state. The threads of a process all have the same process id, but have another id called the thread id (tid) which distinguishes them. One of the threads is called the main thread and has a thread id which is the same as the process id.</p><p>When <strong>ips</strong> shows only processes, then the status shown for a process consisting of multiple threads can be slightly misleading. The shared attributes are shown correctly for the process. However, some of the distinct status values are only those of the main thread, while those values for the other threads are ignored. Examples of these values are the program counter and the process state.</p><p>In particular, the process state can give very misleading status of the process. If the main thread is sleeping, but another thread is constantly running, the state of the process can be misleadingly reported as 'S'. In this case, the runtime of the process increases quickly and is shown as active, however it never appears to be running.</p><p>The runtime of a process is the sum of all of the runtimes of the individual threads, and so is generally meaningful. Note that in a multi-cpu system where multiple threads can simultaneously run, the runtime of a process can appear to increase faster than the clock rate since multiple threads can contribute the full elapsed time to the process runtime.</p><p>When <strong>ips</strong> is showing thread status then all of the above problems are avoided. Each thread of a process is then shown with its correct status. This includes the program counter, the process state, and the runtime. In this case, threads which are running will show their state as 'R' as expected. Also note that when threads are shown, the display of the main thread is only that of that particular thread, so that its runtime is no longer the sum of all of the threads.</p><p>Even when only processes are being shown, the state information for the process can optionally be more accurate than indicated above. If the <em>-usethreads</em> option is used or if the <em>states</em> column is used, then the <strong>ips</strong> program will examine the states of all of the theads of a process, and select the most important state among all of the threads as the state to show for the process as a whole. For example, the priority order of the states starts with the 'R', 'D', and 'S' states so that, for example, if any thread is running, then the state of the process is 'R' as expected.</p><p>The <em>states</em> column shows all of the states of the threads of a process using multiple letters and numeric counts. For example, a value of 'R3DS2' indicates that there are three running threads, one thread in a disk I/O wait, and two sleeping threads.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND INPUT WHILE RUNNING</h2>
        <div class="sectioncontent">
<p>The curses and X11 display modes allow commands to be typed while they are running. Commands are not visible as they are typed to the screen or window. The commands are read character by character so that they are executed immediately when complete without requiring a terminating newline. If the command is one which affects the display then the current sleep is canceled so that the display can show the result.</p><p>Some commands accept an optional numeric argument which is typed just prior to the command. This numeric argument can be a non-negative integer value or a non-negative fixed point number. Commands which only accept an integer value ignore any fractional part. If a numeric argument is not given, the commands will use a default value. If a numeric argument is typed, but you no longer want to use it (as when you have made a typing mistake), then the backspace or delete keys will totally remove any partially typed numeric argument. At this point you can type in a new numeric argument (if desired).</p><p>The <strong>s</strong> command sets the sleep time to the number of seconds specified in the preceding numeric argument. The command accepts a fixed point value so that sleeps less than one second are possible. If no argument is given then the sleep time is set to the default value of 10 seconds.</p><p>The <strong>a</strong> command sets the automatic scrolling time to the number of seconds specified in the preceding numeric argument. If no argument is given then the autoscroll time is set to the default value of 30 seconds. A value of 0 disables autoscrolling.</p><p>The <strong>t</strong> and <strong>b</strong> commands change the display to show the top or the bottom of the process list. (These are the first and last pages of the display.)</p><p>The <strong>n</strong> and <strong>p</strong> commands change the display to show the next or previous page of the process list. If the next page is past the end of the list then the first page is displayed. Similarly, if the previous page is before the beginning of the list then the last page is displayed.</p><p>The <strong>o</strong> command sets the number of lines of overlap between pages of data to the value specified in the preceding numeric argument. If no argument is given then the overlap value is set to the default value of 1 line.</p><p>The <strong>i</strong> command enables or disables an information line at the top of the display which shows the total number of process and threads in the system, the number of threads or processes which are currently being shown, the sleep time, the currently displayed page number, and if the display is frozen, an indication of that fact. Without any arguments, the display of the information line is toggled. A zero argument disables the line. A nonzero argument enables the line.</p><p>The <strong>h</strong> command enables or disables the column header line at the top of the display. Without any arguments, the display of the header line is toggled. A zero argument disables the header. A nonzero argument enables the header.</p><p>The <strong>'f'</strong> command enables or disables the frozen state of the display. Without any arguments, the frozen state is toggled. A nonzero argument freezes the display. A zero argument unfreezes the display. While the display is frozen, the <em>ips</em> program simply waits for further commands (ignoring the normal sleep and autoscroll times). The automatic collection of new process data is disabled. Automatic scrolling is also disabled. However, commands can still be typed while the display is frozen to perform scrolling or process status updating on demand.</p><p>A <strong>SPACE</strong> or <strong>RETURN</strong> character updates the display immediately. New process data will be collected for the display. This occurs even if the display is currently frozen.</p><p>The <strong>r</strong> command refreshes the contents of the display to fix any glitches. This is mostly intended for curses use when other programs output to the screen, or when the terminal emulator misbehaves.</p><p>A <strong>q</strong> or <strong>ESCAPE</strong> character quits <em>ips</em>.</p><p>All other characters are illegal and ring the bell.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INITIALIZATION FILES AND MACROS</h2>
        <div class="sectioncontent">
<p>For convenience and to allow users to configure the output to their liking, <em>ips</em> reads two initialization files on startup. The first of the files to be read is the system initialization file <em>/etc/ips.init</em> which is used to set system defaults for <strong>ips</strong>.</p><p>The second initialization file to be read is the user initialization file <em>$HOME/.ipsrc</em> located in each user's home directory. This allows each user to modify the system defaults for their own use. The reading of the user's initialization file can be disabled by using the <em>-noinit</em> option. If used, this option must be the first option after the command name.</p><p>The contents of the initialization files are very simple. Each line of the file can be blank, be a comment, or be a macro definition. If any line ends in a backslash, then the backslash is replaced by a space and the next line is appended to it. Comment lines have a hash mask character as their first non-blank character. Comment lines and blank lines are ignored.</p><p>The first line of initialization files must consist of the word <strong>#ips#</strong>, otherwise an error message will be generated and the program will exit.</p><p>Macro definitions are used to replace single arguments on the command line with possibly large replacement strings with many arguments. The replacement strings can themselves use macros, and these new macros are also removed and replaced. Macro replacement continues until either no more macros remain to be replaced, or until the allowed macro depth is exceeded.</p><p>Macro names are usually distinguished from non-macros by the fact that macros begin with upper case letters. Since column names are all in lower case, there is no problem distinguishing between a column name and a macro name.</p><p>There are three different types of macros in <em>ips</em>. These types are distinguished by the location of the macro usage within the command line. The three types of macros are commands, columns, and expressions. Command macros define a list of command line options and their arguments. Column macros define a list of column names. Expression macros define a sub-expression for the <em>-cond</em>, <em>-sortexpr</em>, and <em>-revsortexpr</em> options.</p><p>Because the meaning of these three types of macros differs so much, and the replacement strings for the macros would generally make no sense if used for a different type of macro, the three types of macros have independent name spaces. This means that the same macro name could be defined three times, once for each type of macro.  (But this is probably bad practice).</p><p>To define a macro in an initialization file, you use one of the keywords <em>option</em>, <em>column</em>, or <em>expr</em>, followed by the macro name and the replacement strings for the macro, all on one line (taking into account the use of backslashes to continue lines). The macro names must begin with an upper case letter.</p><p>The <em>option</em> keyword defines a macro as being one or more command line options. The replacement string consists of a number of space separated options and arguments as used on the command line, including the leading hyphens for the options. Arguments for options must be contained within the macro expansion itself. The macro expansion can itself contain macros which will also be expanded into more options.</p><p>As the single exception to the requirement that macro names are in upper case, if a word appears on the <strong>ips</strong> command line which is not an option, and which cannot be an argument for an option, then that word with its initial letter converted to upper case is treated as an option macro to be expanded.</p><p>An important special case of this is a word typed immediately after the <strong>ips</strong> program name. This is typically a macro name which defines a particular format of display. For example, the command <strong>ips top</strong> would expand the option macro named <strong>Top</strong> which could be defined to emulate the output of the <strong>top</strong> program.</p><p>The <em>column</em> keyword defines a macro as being a list of column names. The replacement string consists of a number of space separated column names. The macro expansion can itself contain macros which will also be expanded into more column names.</p><p>The <em>expr</em> keyword defines a macro which is an expression used for the <em>-cond</em>, <em>-sortexpr</em>, or <em>-revsortexpr</em> options. The replacement string consists of a complete expression using numbers, strings, column names, and possibly other macros which will also be expanded.</p><p>Here is an example of a valid initialization file:</p>
<pre>
#ips#

# The special command macro run by default
option	SysInit	-col pid parent user summary runtime command


# Definitions for other commands of interest
option	Stop	-cond Stop
option	Cmd	-col pid command -sep 1
option	Env	-col pid environment -sep 1
option	Vert	-vert -sep 1 -col All
option	Mytty	-cond Mytty

option	Top	-sep 1 -col pid user summary runtime &#92;
		percentcpu command -revsort percentcpu &#92;
		-revsort runorder -curses -clear -active


# Definitions for groups of columns
column	Run	runtime idletime percentcpu
column	Regs	eip esp
column	Sigs	signalcatch signalignore signalblock
column	Size	residentsetsize percentmemory size
column	Stdio	stdin stdout stderr

# All columns
column	All	pid parentpid uid user gid group &#92;
		processgroup ttyprocessgroup &#92;
		state flags nice priority realtimepriority policy &#92;
		systemtime usertime runtime childruntime &#92;
		threads percentcpu runorder &#92;
		residentsetsize size percentmemory &#92;
		active idletime starttime age realtimer &#92;
		eip esp waitchannel waitsymbol &#92;
		pagefaults minorpagefaults majorpagefaults &#92;
		pageswaps childpageswaps &#92;
		signalcatch signalignore signalblock &#92;
		ttyname ttydevice &#92;
		openfiles stdin stdout stderr stdio &#92;
		currentdirectory rootdirectory executable &#92;
		summary program command environment


# Definitions for expressions used in conditions
expr	Me	(uid == my(uid))
expr	Server	(uid &lt; 100)
expr	User	!Server
expr	Stop	(state == 'T')
expr	Mytty	(ttydev == my(ttydev))
</pre>
<p>The special option macro names of <strong>SysInit</strong> and <strong>UserInit</strong> are automatically expanded (if they are defined) at the start of every run of <strong>ips</strong>. These macros are used to initialize parameters to default values. Examples of this initialization is to specify the default list of columns to be displayed and the default sleep time when looping. The <strong>SysInit</strong> macro definition is usually contained in the system initialization file, while the <strong>UserInit</strong> macro definition is usually contained in the user's initialization file. Parameters set by these macros can be modified by using options on the command line.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USEFUL MACROS</h2>
        <div class="sectioncontent">
<p>The standard supplied system initialization file <em>/etc/ips.init</em> contains many macros of interest. This section describes some of the standard macros which are provided. Remember that these macros can be used in lower case on the command line.</p><p>Warning: These macros might not actually work on your system as described here since they can be changed by the system administrator. The system administrator may also have added other useful macros which are not described here. You should examine the macro definitions in the initialization file in order to make full use of <strong>ips</strong>.</p><p>The default macro <em>SysInit</em> adds a condition to only show your own processes. So in order to see other user's processes, you must disable that condition explicitly or else use a macro which disables it. The <em>Nocond</em> macro removes all conditions on the selection of processes allowing you to see all processes.</p><p>The user name column is not shown by default. The <em>Long</em> macro changes the displayed columns to include the user name and the parent pid.</p><p>The <em>All</em> macro combines the <em>Nocond</em> and <em>Long</em> macros to show all processes in a nice display.</p><p>The <em>Pack</em> macro shows many useful columns together including the user and group ids, the state of stdio, and the process age.</p><p>The <em>Cmd</em> and <em>Env</em> macros show only the process id and the command line or environment so that you can see much more of these columns than is usual.</p><p>The <em>Files</em> macro shows columns related to files, such as the number of open files, the status of stdio, and the current and root directories.</p><p>The <em>Cpu</em> macro shows a snapshot display of the currently active processes. It has a two second sleep in order to detect running processes. The <em>Top</em> macro shows the same display format, but in a looping manner using <em>curses</em> and including recently active processes.</p><p>The width of the runtime columns is not adequate to hold really large runtimes. The <em>Widerun</em> macro increases the width of these columns to show larger runtimes.</p><p>The <em>Wide</em> macro makes the output width be as large as possible, allowing the showing of very long command lines or environments.</p><p>The <em>Vert</em> macro sets the output format to vertical and shows every column value.</p><p>The <em>Tty</em> macro adds a condition to only show processes which are on a terminal.</p><p>The <em>Mytty</em> macro adds a condition to only show processes which are on your own terminal.</p><p>The <em>Stop</em> macro adds a condition to show stopped processes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OTHER FEATURES</h2>
        <div class="sectioncontent">
<p>There are several other features of <strong>ips</strong> which can be specified using command line options. These options are <em>-default</em>, <em>-read</em>, <em>-initsleep</em>, <em>-noheader</em>, <em>-activetime</em>, <em>-deathtime</em>, <em>-synctime</em>, <em>-listmacros</em>, <em>-listcolumns</em>, <em>-version</em>, <em>-end</em>, and <em>-help</em>.</p><p>The <em>-default</em> option is useful to reset parameters that have been set by previous options. In particular, it is useful to reset parameters that have been set by the initialization files. It accepts one or more option names (without the leading hyphens). Any parameter set by the indicated option is restored to its initial state as when the <strong>ips</strong> program started. For example, <strong>-default pid</strong> removes any previous restriction on the process ids that can be shown.</p><p>The output from the <em>-help</em> option will briefly describe the use of the remaining options.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COLUMN DESCRIPTIONS</h2>
        <div class="sectioncontent">
<p>Some of the columns for displaying are self-evident. But many of them need an explanation, and this is done here. Due to the permissions on /proc, some of the column values may not be available for every process. Columns marked as <strong>restricted</strong> are only available if the process has your own user id, you are running as root, or the <strong>ips</strong> program itself is setuid to root.</p><p>The <em>state</em> column shows the current state of the process. This is a single letter, where 'R' is runnable, 'D' is disk I/O, 'T' is stopped, 'S' is sleeping, 'Z' is zombie, and ' ' is dead (nonexistent).</p><p>The <em>eip</em> and <em>esp</em> columns show the instruction pointer and stack pointer of the process. The instruction pointer is also known as the program counter, or PC.</p><p>The <em>waitchannel</em> column shows the hex address within the kernel that the process is sleeping on. This is zero if the process is not sleeping. Usually, different reasons for sleeping use different addresses.</p><p>The <em>waitsymbol</em> column shows the symbolic address within the kernel that the process is sleeping on. This is blank if the process is not sleeping.</p><p>The <em>program</em> and <em>command</em> columns show the program name and command line of the process. The program name is just the name of the executable file without any arguments. The command line shows the arguments that the program was started with. If no command line arguments were supplied to the program, then this column shows the program name enclosed in parenthesis.</p><p>The <em>idletime</em> column shows the number of minutes that the process has been idle. An idle process is one which has not (detectably) run at all in the indicated interval. The idle time is only known by examining processes over time, and so the true idle time of a process which existed before <strong>ips</strong> was run is not known. In these cases, the idle time is simply the amount of time that <strong>ips</strong> has been running, and the times are marked with a leading plus sign.</p><p>The <em>active</em> column shows whether or not the process has been active. It shows one of the values "active" or "idle". This column is provided mainly for use in sorting and selecting.</p><p>The <em>ttyname</em> and <em>ttydevice</em> columns show the controlling terminal of the process, which is usually the terminal where the user logged into. The device is the kernel's id for the terminal, and is just a number. The name is found by searching /dev for a character device which has that same id and then displaying the device name with the /dev removed.</p><p>The <em>user</em>, <em>uid</em>, <em>group</em>, and <em>gid</em> columns show the user ids and group ids of a process. The uid and gid are the numeric ids as used by the kernel. The user and group are the conversion of those ids to user names and group names, as found in the /etc/passwd and /etc/group files.</p><p>The <em>percentcpu</em> column shows the percentage of CPU time that the process has used in a certain recent time interval called the sample interval. The samples are taken at a maximum rate of five times a second according to the current sleep time of the <strong>ips</strong> program. The sample interval is a sliding value so as to give an average cpu percentage over a specified number of seconds. This makes the values less 'jumpy' than instantaneous cpu percentages would give and act more like the system load averages. The sample interval is set using the <em>-percentseconds</em> option, which can have a value from 0 to 20. The default sample interval is 10 seconds. The percentage runtime is 100 times the quotient of the runtime used during the sample interval by the sample interval itself. Note that for a multi-threaded process on a multi-cpu system, the percentage runtime can reach multiples of 100.</p><p>The <em>residentsetsize</em> column is the number of K of memory used by the process. Pages of a process which are not in memory are not counted by this column.</p><p>The <em>starttime</em> and <em>age</em> columns show the time at which the process was created. The start time is the time of day the process started, and if the process was in existence for over one day, then the number of days previously that the process was started. The age is the number of minutes that the process has existed, and is the difference between the current time and the time that the process started.</p><p>The <em>flags</em> column shows some kernel flags associated with the process, in hex.</p><p>The <em>minorpagefaults</em>, <em>majorpagefaults</em>, and <em>pagefaults</em> columns show the number of minor page faults, major page faults, and the total page faults of the process. Minor page faults are faults on pages that do not require any disk I/O, which are copy on write or touching empty pages. Major page faults are faults which require disk I/O, such as reading in of text file pages or swap pages.</p><p>The <em>signalcatch</em>, <em>signalignore</em>, and <em>signalblock</em> columns show the state of signal handling for the process. Each of these value is a hex value, where signal N is bit number N-1 (counting from bit 0 at the right). Caught signals are those for which a signal handler is installed. Ignored signals are those for which the process is ignoring signals. Blocked signals are those which are pending delivery, but which the process has blocked from being delivered.</p><p>The <em>openfiles</em> column displays the number of open files that the process has. This column is restricted.</p><p>The <em>runorder</em> column shows the relative run order of the processes. The run order is a monotonically increasing value representing the number of process samplings that <strong>ips</strong> has made since it started. Processes are assigned the current run order value whenever they are seen to have been active since the last sample. Processes with a larger run order value have run more recently.</p><p>The <em>currentdirectory</em> column gives the current working directory of the process in the kernel's internal values of device number and inode number, separated by a colon. The device number is in hex, and the inode number is in decimal. This column is restricted.</p><p>The <em>rootdirectory</em> column gives the root directory of the process in the kernel's internal values of device number and inode number, separated by a colon. The device number is in hex, and the inode number is in decimal. This column is restricted.</p><p>The <em>executable</em> column gives the device number and inode number of the executable file for the process, separated by a colon. The device number is in hex, and the inode number is in decimal. This column is restricted.</p><p>The <em>realtimer</em> column shows the amount of time that the process wants to sleep before being woken up. This is either just the number of seconds, or else is the number of seconds and parts of seconds. This value does not decrement as time passes, so you don't know when the sleep time will expire.</p><p>The <em>stdin</em>, <em>stdout</em>, and <em>stderr</em> columns show the file names associated with the stdin, stdout, or stderr file descriptors of the process. These columns are restricted.</p><p>The <em>stdio</em> column shows a summary of the files associated with the stdin, stdout, or stderr file descriptors of the process. This is in the form of a three character string with one character for each of the <strong>stdin</strong>, <strong>stdout</strong>, and <strong>stderr</strong> file descriptors. The character is 'T' for a terminal, 'P' for a pipe, 'S' for a socket, 'N' for /dev/null, 'F' for some other file, and '-' for a closed file descriptor (or if the information is unavailable). This column is restricted.</p><p>The <em>summary</em> column shows many flag characters which summarize some of the state of the process. This consists of a string of 14 characters, where each character is either a dash or a letter. A letter indicates the specified condition is true for that character position, whereas a dash indicates that the condition is false for that character position.</p><p>Character 1 is the state of the process, except that if the process is sleeping, then it is 'A' for recently active, or 'I' for idle, and if the process has died (i.e., no longer existent), then it is '-'. Character 2 is 'W' if the process has no resident memory, and is therefore swapped out. Character 3 is 'N' if the process has been niced, and is 'H' if the process has been given as higher priority than normal. Character 4 is 'S' if the process is a session id leader. Character 5 is 'P' if the process is a process group leader. Character 6 is 'T' if the process has a controlling terminal. Character 7 is 'F' if the process is a foreground process, which means that its process group matches its controlling terminal's process group. Character 8 is 'I' if the process has no parent, meaning it is owned by <strong>init</strong>. Character 9 is 'h' if the process is catching SIGHUP or 'H' if the process is ignoring SIGHUP. Character 10 is 't' if the process is catching SIGTERM or 'T' if the process is ignoring SIGTERM. Character 11 is 'U' if the process has your user id. Character 12 is 'G' if the process has your group id. Character 13 is 'R' if the process is running as root. Character 14 shows the age of the process. It is 'N' for a new process, 'M' for a process one minute old, 'F' for a process five minutes old, 'T' for a process ten minutes old, 'H' for a process one hour old, 'D' for a process one day old, and 'W' for a process one week old.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PERFORMANCE</h2>
        <div class="sectioncontent">
<p>Some data is only collected if the columns using that data are used. Here 'used' means either displaying, selecting on, or sorting by the column. Avoiding columns when they are not required will save the time used to collect that data.</p><p>Most process status is obtained by scanning the /proc directory looking for filenames which are numeric (which are the process ids). For each of these processes, the file /proc/&lt;pid&gt;/stat must be opened and read to collect most of the process status.</p><p>If detailed thread information is requested, then the directories /proc/&lt;pid&gt;/task must be scanned for filenames which are numeric (which are the thread ids). For each of these threads, the file /proc/&lt;pid&gt;/task/&lt;tid&gt;/stat must be opened and read to collect the thread status.</p><p>Additional files in /proc might need to be read to get the full status that is required.</p><p>Using the <em>-pid</em> option will save much work, since then the scan of /proc is avoided and only the specified process ids will be examined. Using <em>-noself</em> avoids looking at our own process.</p><p>Using the <em>-my</em>, <em>-user</em>, <em>-group</em>, and <em>-noroot</em> options will save time reading and parsing of the process status for the eliminated processes, and stop collection of other data for the eliminated processes.</p><p>The <em>-top</em> and <em>-cond</em> options may save time by eliminating the display of process information. But the information is still collected.</p><p>The <em>-synctime</em> option changes the interval on which the full process status is collected for inactive processes.  (See the RISKS section below.) Setting this to a shorter time interval will increase the runtime.</p><p>The <em>command</em> column requires the opening and reading of /proc/&lt;pid&gt;/cmdline whenever the process has changed state or when the synctime has expired.</p><p>The <em>environment</em> column requires the opening and reading of /proc/&lt;pid&gt;/environ whenver the process has changed state or when the synctime has expired.</p><p>The <em>active</em>, <em>idletime</em>, and <em>percentcpu</em> columns and the <em>-active</em> option require that the <strong>ips</strong> program sample the processes twice before displaying anything, with a small sleep between the two samples. So there will be a delay before seeing anything.</p><p>The <em>ttyname</em> column requires the reading of /dev to find the list of character devices. This work adds a delay to the program before anything is displayed. It is only required once per run.</p><p>The <em>openfiles</em> column requires the reading of all the files in /proc/&lt;pid&gt;/fd whenever the process has changed state or when the synctime has expired.</p><p>The <em>stdin</em>, <em>stdout</em>, <em>stderr</em>, and <em>stdio</em> columns require the link values of one or more of the /proc/&lt;pid&gt;/fd/&lt;fd&gt; files to obtain their information whenever the process has changed state or when the synctime has expired.</p><p>The <em>currentdirectory</em> column requires the reading of the /proc/&lt;pid&gt;/cwd file whenever the process has changed state or when the synctime has expired.</p><p>The <em>rootdirectory</em> column requires the reading of the /proc/&lt;pid&gt;/root file whenever the process has changed state or when the synctime has expired.</p><p>The <em>waitsymbol</em> column requires the reading of the /proc/&lt;pid&gt;/wchan file whenever the process has changed state or when the synctime has expired.</p><p>The <em>executable</em> column requires the reading of the /proc/&lt;pid&gt;/exe file whenever the process has changed state or when the synctime has expired.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RISKS</h2>
        <div class="sectioncontent">
<p>The determination of whether a process has been active since the last sample is not completely foolproof. Some of the process data is only collected when a process has been active, or else has not been collected for a while, and so there is a small risk that the data is obsolete. The columns which are not necessarily collected on every update are the ones which require examining /proc files other than the main status file. These columns include the command line, the environment, the current directory, and the number of opened files.</p><p>The <strong>ips</strong> program checks many process status values to determine whether or not a process has been active since the last sampling. If any of these differ from the last sampling, then the process is active. These values are the process state, runtime, flags, page faults, start time, stack pointer, instruction pointer, and wait channel. New process are always active, and processes whose state is 'R' or 'D' are always active.</p><p>It is possible that a process which wakes up for only a short time, does very little and then goes back to sleep will appear to be inactive. (The kernel only has a 1/100 second runtime resolution, and so the small runtime of the process might not have been seen by the kernel.)</p><p>The <em>-synctime</em> option can be used to reduce or expand this risk of showing obsolete data. It accepts the number of seconds at which the complete status of the process is collected even when it is idle. It defaults to one minute. Setting the synctime to zero produces a status with no obsolete data.</p><p>The list of user names, group names, and device names are only collected when <strong>ips</strong> is first started. Changes to the password file, group files, or device files will not be seen while the program is running.</p><p>The data collected by <strong>ips</strong> is dynamic. It can change even while the status is being collected for a single process. So the data shown is only a snapshot and is never absolutely consistent.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITS</h2>
        <div class="sectioncontent">
<p>The following are some limits to the operation of <strong>ips</strong>. These are compile-time constants, and could be increased if required by recompiling the program.</p><p>You can only specify 100 process ids for the <em>-pid</em> option.</p><p>You can only specify 100 user names or ids for the <em>-user</em> option.</p><p>You can only specify 100 group names or ids for the <em>-group</em> option.</p><p>You can only have 1000 arguments on a command line.</p><p>The maximum output width is 31K characters, where K is 1024.</p><p>The maximum command string length is 10K.</p><p>The maximum environment string length is 20K.</p><p>The maximum program name string length is 32. This length is imposed by the kernel which only has a buffer of this size.</p><p>The maximum separation between columns is 20 spaces.</p><p>The maximum depth of expansion of option macros is 20.</p><p>The maximum depth of expansion of expression macros is 20.</p><p>The maximum number of seconds for calculating cpu percentages is 20 seconds.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The <em>-clear</em> option clears the screen by outputting the ANSI escape sequence for clearing the screen. If your terminal does not understand this escape sequence then this option will not work correctly.</p><p>Proportional spaced fonts do not work correctly in the X11 display mode.</p><p>Using both of the <em>-vert</em> and <em>-top</em> options together without any argument does nothing useful. The number of processes shown will be dependent on the screen height, but the output will not be limited to the screen height since each process status prints on multiple lines.</p><p>Pagination of output when using the <em>-vert</em> option is not correct.</p><p>There are no quoting characters for macro definitions, so you cannot create single arguments which contain blanks. This means that if you use the <em>-cond</em>, <em>-sortexpr</em>, or <em>-revsortexpr</em> options in the macro definition file, then the following expression must not contain any blanks. However, you <em>can</em> use blanks in the definition of an expression macro.</p><p>The specification of a window position for X11 using the <em>-geometry</em> option does not work correctly.</p><p>This program is dependent on the layout of the /proc file system which changes depending on the kernel version. This particular version of <em>ips</em> works for kernel version 2.6.13.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUTURES</h2>
        <div class="sectioncontent">
<p>I would like to allow macros to accept arguments enclosed in parenthesis, and have those arguments substituted into the replacement string at the locations matching parameter names for the macro.</p><p>I would like to allow user-defined columns where the user can define the format of the data to be displayed using the results of expressions on other column data.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREDITS</h2>
        <div class="sectioncontent">
<p>Some of the knowledge on how to process and display the data from /proc was obtained by reading the procps version 0.97 code by Michael K. Johnson.</p><p>The pattern matching code was adapted from code written by Ingo Wilken.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<pre>
David I. Bell
dbell@canb.auug.org.au
25 April 2010
</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="iproxy.1.html"><span aria-hidden="true">&larr;</span> iproxy.1: Proxy that enables tcp service access to iphone/ipod</a></li>
   <li class="next"><a href="ipsort.1.html">ipsort.1: Sort a file using ipv4 addresses at the beginning of each line. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
