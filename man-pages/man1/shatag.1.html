<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shatag: Tag files with their sha-256 checksums</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Tag files with their sha-256 checksums">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shatag (1) manual">
  <meta name="twitter:description" content="Tag files with their sha-256 checksums">
  <meta name="twitter:image" content="https://www.carta.tech/images/shatag-shatag-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/shatag.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shatag (1) manual" />
  <meta property="og:description" content="Tag files with their sha-256 checksums" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/shatag-shatag-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shatag<small> (1)</small></h1>
        <p class="lead">Tag files with their sha-256 checksums</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/shatag.1.html">
      <span itemprop="name">shatag: Tag files with their sha-256 checksums</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/shatag/">
      <span itemprop="name">shatag</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/shatag.1.html">
      <span itemprop="name">shatag: Tag files with their sha-256 checksums</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>shatag</strong> [<strong>-fhlLqrtuv0</strong>] [<strong>-d </strong><em>DATABASE</em>] [<strong>-n </strong><em>NAME</em>] [<strong>-R </strong><em>NAME</em>]... [<em>FILES</em>]...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>shatag</strong> is a tool for computing and caching SHA-256 file checksums, and efficiently search for identical file across systems. Checksums are stored using the POSIX Extended Attributes filesystem facility, and are preserved when files are moved or renamed. Checksums can be fetched from a remote host and stored in an sqlite database for fast lookups.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>When invoked with no options, <strong>shatag</strong> just displays the cached, valid checksums. If no files are specified, it applies to all non-hidden files in the current directory. The output format is identical to the one of the <strong>sha256sum</strong> command.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>-0, --null</strong>
  </dt>
  <dd>
    <p>Instead of outputting one record per line (like <strong>sha256sum</strong> does,) separate records with null characters.</p>
  </dd>
  <dt>
    <strong>-d </strong><em>DATABASE</em>, <strong>--database </strong><em>DATABASE</em><strong></strong>
  </dt>
  <dd>
    <p>Set the path of the SQLite database to query when using <strong>-l</strong> , <strong>-L</strong> or <strong>-p</strong> (The default path is $HOME/.shatagdb, overridable from the config file)</p><p>Instead of a file name, a PostgreSQL database can be specified with a prefix of "pg:" followed by a psycopg2 DSN string, like:</p><p>"pg:dbname=shatag user=myuser password=mypassword host=192.168.1.3"</p>
  </dd>
  <dt>
    <strong>-f, --force</strong>
  </dt>
  <dd>
    <p>When running with <strong>-t</strong> or <strong>-u</strong> , recompute the checksum even if the file modification time has not changed. If the old checksum differs, report the file as corrupted.</p>
  </dd>
  <dt>
    <strong>-h, --help</strong>
  </dt>
  <dd>
    <p>Displays the help message</p>
  </dd>
  <dt>
    <strong>-l, --lookup</strong>
  </dt>
  <dd>
    <p>Instead of displaying the checksums, look them up against the local database and indicate if the file exists. A <strong>yellow -</strong> mark indicates that the file does not exist somewhere else, a <strong>green =</strong> that the file exists at one or several remote locations, a <strong>red +</strong> that the file has a duplicate on the local system, and a <strong>magenta *</strong> that the file is empty.</p>
  </dd>
  <dt>
    <strong>-L, --lookup-verbose</strong>
  </dt>
  <dd>
    <p>Instead of displaying the checksums, look them up against the local database. Print all the known remote locations for identical files.</p>
  </dd>
  <dt>
    <strong>-n </strong><em>NAME</em>, <strong>--name </strong><em>NAME</em><strong></strong>
  </dt>
  <dd>
    <p>Name of local storage (defaults to canonical local host name). This needs to be correct if the local database contains entries for this own host.</p>
  </dd>
  <dt>
    <strong>-p, --put</strong>
  </dt>
  <dd>
    <p>Record found tags in the database, for duplicate detection.</p>
  </dd>
  <dt>
    <strong>-q, --quiet</strong>
  </dt>
  <dd>
    <p>Do not display the valid checksums when they are found.</p>
  </dd>
  <dt>
    <strong>-r, --recursive</strong>
  </dt>
  <dd>
    <p>Recurse trough subdirectories</p>
  </dd>
  <dt>
    <strong>-R </strong><em>NAME</em>, <strong>--remote </strong><em>NAME</em><strong></strong>
  </dt>
  <dd>
    <p>When using <strong>-l</strong> or <strong>-L</strong> , This is used to restrict the set of remote names to consider. If present, other storages will be ignored.</p>
  </dd>
  <dt>
    <strong>-t, --tag</strong>
  </dt>
  <dd>
    <p>Compute new checksums for files that don't have one, or when it is outdated.</p>
  </dd>
  <dt>
    <strong>-u, --update</strong>
  </dt>
  <dd>
    <p>Recompute the outdated checksums only. Be aware that this can behave counter-intuitively; outdated checksums will only exists for files that have been appended to or partially modified. Many programs dealing with small files (some well-known text editors, notably) will overwrite the whole file when saving, and the new file will be lacking a checksum entirely. For these cases, use <strong>-t instead.</strong></p>
  </dd>
  <dt>
    <strong>-v, --verbose</strong>
  </dt>
  <dd>
    <p>Report encoutered files that have an outated or missing checksum.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Retag a whole directory and record everything to the database:</p>
<pre>
<strong>shatag -pqrt .</strong>
</pre>
<p>Check files in the current directory for remote duplicates:</p>
<pre>
<strong>shatag -l</strong>
</pre>
<p>Show alternate locations for duplicates of a single file:</p>
<pre>
<strong>shatag -L somefile</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>~/.shatagrc</p>
  </dt>
  <dd>
    <p>YAML configuration file. Currently has only two possible configuration keys: "database", which sets the database path (by default, ~/.shatagdb) and "name" for the volume name in the database (default to canonical host name.)</p><p>Examples:</p><p>database: /var/lib/shatag.db   # sqlite3 backend database: "pg: dbname=shatag host=localhost user=shatag password=xxxsecretpasswordxxx"  # postgres backend database: http://service.com/shatag   # http backend database: insecure-https://service.com/shatag  # http backend, skip ssl certificate verification</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Support for non-ASCII filenames across systems of different and/or inconsistent encodings have not been fully tested.</p><p>Not all option combinations are sensible.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report shatag bugs to the bugtracker at http://bitbucket.org/maugier/shatag,</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO shatag&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/shatag-add.1.html"><strong>shatag-add</strong>(1)</a>, <strong>shatag-mkdb</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sharesec.1.html"><span aria-hidden="true">&larr;</span> sharesec.1: Set or get share acls</a></li>
   <li class="next"><a href="shatag-add.1.html">shatag-add.1: Add checksums to the local database for further procressing. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
