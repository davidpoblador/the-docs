<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lamtrace: Unload lam trace data.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Unload lam trace data.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lamtrace (1) manual">
  <meta name="twitter:description" content="Unload lam trace data.">
  <meta name="twitter:image" content="https://www.carta.tech/images/lam-runtime-lamtrace-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/lamtrace.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lamtrace (1) manual" />
  <meta property="og:description" content="Unload lam trace data." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lam-runtime-lamtrace-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lamtrace<small> (1)</small></h1>
        <p class="lead">Unload lam trace data.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lamtrace.1.html">
      <span itemprop="name">lamtrace: Unload lam trace data.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lam-runtime/">
      <span itemprop="name">lam-runtime</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lamtrace.1.html">
      <span itemprop="name">lamtrace: Unload lam trace data.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>lamtrace [-hkvR] [-mpi] [-l listno] [-f #secs] [filename] [nodes] [processes]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Print useful information on this command.</p>
  </dd>
  <dt>
    <p><strong>-k</strong></p>
  </dt>
  <dd>
    <p>Copy and do not remove trace data.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Be verbose.</p>
  </dd>
  <dt>
    <p><strong>-R</strong></p>
  </dt>
  <dd>
    <p>Delete all trace data from the specified nodes.</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>Unload only from the given list number.</p>
  </dd>
  <dt>
    <p><strong>-mpi</strong></p>
  </dt>
  <dd>
    <p>Unload trace data for an MPI application.</p>
  </dd>
  <dt>
    <p><strong>-f #secs</strong></p>
  </dt>
  <dd>
    <p>Signal target processes to flush trace data to the daemon. Then wait #secs before unloading.</p>
  </dd>
  <dt>
    <p><strong>filename</strong></p>
  </dt>
  <dd>
    <p>Place trace data into this file (default: def.lamtr).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The -t option of <strong>mpirun</strong>(1) and <strong>loadgo</strong>(1) allows the application to generate execution traces. These traces are first stored in a buffer within each application process. When the buffer is full and when the application terminates, the runtime buffer is flushed to the trace daemon (a structural component within the LAM daemon). The trace daemon will also collect data up to a pre-compiled limit. Beyond this limit, the oldest traces in will be forgotten in favor of the newer traces.</p><p>After an application has finished, the record of its execution is stored in the trace daemons of each node that was running the application. The <em>lamtrace</em> command can be used to retrieve these traces and store them in one file for display by a performance visualization tool, such as <a href="../man1/xmpi.1.html"><strong>xmpi</strong>(1)</a>. If the application was started by <a href="../man1/xmpi.1.html"><strong>xmpi</strong>(1)</a>, <em>lamtrace</em> is not normally needed as the equivalent functionality is invoked with a button.</p><p>Incomplete trace data can be unloaded while the application is running. The output file must not exist prior to invoking <em>lamtrace</em>. This is a good situation to use the -k option, which preserves the trace daemon's contents after unloading. Each reload will then get the entire run's trace data up to the present time.</p><p>A running process is likely to be holding the most recent trace data in an internal buffer. A standard LAM signal, LAM_SIGTRACE (see <strong>doom</strong>(1)), causes trace enabled processes to flush the internal trace buffer to the daemon. The -f option tells <em>lamtrace</em> to send this signal to all target processes before unloading trace data. A race condition develops between the target process storing trace data to the daemon and the unloading procedure. The problem is foisted upon the user who gives a delay parameter after -f.</p><p>Trace data are organized by node, process identifier and list number. A process can store traces on any node, although the local node is the obvious, least intrusive choice. The process can identify itself in any meaningful way (<a href="../man2/getpid.2.html"><strong>getpid</strong>(2)</a> is a good idea) The list number is also chosen by the process. These values may be set by an instrumented library, such as <strong>libmpi</strong>(3), or directly by the application with <strong>lam_rtrstore</strong>(2). Unloading flexibility follows that of storing with the -l option selecting the list number, and standard LAM command line mnemonics selecting nodes and processes.</p><p>Dropping old traces when a pre-compiled volume limit is reached only happens for positive list numbers. Traces in negatively numbered lists will be collected until the underlying system runs out of memory. Do not use negative list numbers for high volume trace data.</p><p>If no process selection is given on the command line, trace data will be unloaded for all processes on each specified node.</p><p>LAM, its trace daemon and <em>lamtrace</em> are all unaware of the format and meaning of traces.</p><p>The -R option does not unload trace data. It causes the target trace daemons to free the memory occupied by trace data in the given list. If all lists are specified (no -l option), the trace daemon is effectively reset to its state after initiating LAM.</p><h3>Unloading MPI Trace Data</h3>
<p>A special capability, selected by the -mpi option, exists to search for and unload only the trace data generated by an MPI application. For this purpose, <em>lamtrace</em> is aware of the particular reserved list numbers that <strong>libmpi</strong>(3) uses to store traces. It begins by searching all specified nodes and processes (the whole LAM multicomputer, if nothing is specified) for a special trace generated by process rank 0 in MPI_COMM_WORLD of an MPI application. This special trace contains the node and process identifiers of all processes in that MPI_COMM_WORLD communicator. <em>lamtrace</em> then uses the node / process information to collect all trace data generated by <strong>libmpi</strong>(3).</p><p>If multiple world communicators exist within LAM's trace daemons, the first one found is used. Multiple worlds may be present due to multiple concurrent applications, trace data from a previous run not removed (either with <em>lamtrace</em> or <a href="../man1/lamclean.1.html"><strong>lamclean</strong>(1)</a>), or an application that spawns processes. A particular world communicator can be located by providing precise node and process location to <em>lamtrace</em>.</p><p>The -mpi option is not compatible with the -l option.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>lamtrace -v -mpi mytraces</p>
  </dt>
  <dd>
    <p>Unload trace data into the file "mytraces" from the first MPI application found in a search of the entire LAM multicomputer. Report on important steps as they are done.</p>
  </dd>
  <dt>
    <p>lamtrace n30 -l 5 p21367</p>
  </dt>
  <dd>
    <p>Unload trace data from list 5 of process ID 21367 on node 30. Operate silently.</p>
  </dd>
  <dt>
    <p>lamtrace -mpi n30 p21367</p>
  </dt>
  <dd>
    <p>Unload trace data from the MPI application world group whose process rank 0 has PID 21367 and is/was running on node 30.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Since trace data can be unloaded during an application's execution, there should be a way to incrementally append to an output file. This is a bit tricky with -mpi, but it can be done.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>def.lamtr</p>
  </dt>
  <dd>
    <p>default output file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lamtrace&hellip;</h2>
        <div class="sectioncontent">
<p><strong>mpirun</strong>(1), <strong>loadgo</strong>(1), <strong>lam_rtrstore</strong>(1), <a href="../man1/lamclean.1.html"><strong>lamclean</strong>(1)</a>, <strong>libmpi</strong>(3), <a href="../man1/xmpi.1.html"><strong>xmpi</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lamson.1.html"><span aria-hidden="true">&larr;</span> lamson.1: Lamson is a modern pythonic mail server built like a web application server.</a></li>
   <li class="next"><a href="lamwipe.1.html">lamwipe.1: Shutdown lam. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
