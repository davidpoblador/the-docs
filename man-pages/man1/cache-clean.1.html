<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cache-clean: Administration tool for the a-rex cache.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Administration tool for the a-rex cache.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="cache-clean (1) manual">
  <meta name="twitter:description" content="Administration tool for the a-rex cache.">
  <meta name="twitter:image" content="https://www.carta.tech/images/nordugrid-arc-arex-cache-clean-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/cache-clean.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="cache-clean (1) manual" />
  <meta property="og:description" content="Administration tool for the a-rex cache." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nordugrid-arc-arex-cache-clean-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">cache-clean<small> (1)</small></h1>
        <p class="lead">Administration tool for the a-rex cache.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cache-clean.1.html">
      <span itemprop="name">cache-clean: Administration tool for the a-rex cache.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nordugrid-arc-arex/">
      <span itemprop="name">nordugrid-arc-arex</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cache-clean.1.html">
      <span itemprop="name">cache-clean: Administration tool for the a-rex cache.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>cache-clean [-h] [-s] [-m NN -M NN] [-E N] [-D debug_level]</p>
<pre>
  [ -c &lt;arex_config_file&gt; | &lt;dir1&gt; [&lt;dir2&gt; [...]] ]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>cache-clean</strong> is a tool for administrators of ARC server installations to safely remove A-REX cache data and to provide an overview of the contents of the cache.  It is used by the A-REX to automatically manage cache contents.</p><p>There are two modes of operation - printing statistics and deleting files. If <strong>-s</strong> is used, then statistics are printed on each cache. If <strong>-m</strong> and <strong>-M</strong> are used then files in each cache are deleted if the free space on the file system is less than that given by <strong>-m,</strong> in the order of least recently accessed, until the free space is equal to what is specified by <strong>-M.</strong> If <strong>-E</strong> is used, then all files accessed less recently than the given time are deleted. <strong>-E</strong> can be used in combination with <strong>-m</strong> and <strong>-M</strong> but deleting files using <strong>-E</strong> is carried out first. If after this the cache free space is still less than that given by <strong>-m</strong> then cleaning according to those options is performed. Cache directories are given by <strong>dir1, dir2..</strong> or taken from the config file specified by <strong>-c</strong> or the ARC_CONFIG environment variable.</p><p><strong>-h</strong> - print short help</p><p><strong>-s</strong> - print cache statistics, without deleting anything. The output displays for each cache the number of deletable (and locked) files, the total size of these files, the percentage usage of the file system in which the cache is stored, and a histogram of access times of the files in the cache.</p><p><strong>-m</strong> - the minimum free space (as % of the file system) at which to start cleaning</p><p><strong>-M</strong> - the minimum free space (as % of the file system) at which to stop cleaning</p><p><strong>-E</strong> - files accessed less recently than the given time period will be deleted. Example values of this option are 1800, 90s, 24h, 30d. The default when no suffix is given is seconds.</p><p><strong>-D</strong> - debug level. Possible values are FATAL, ERROR, WARNING, INFO, VERBOSE or DEBUG. Default level is INFO.</p><p><strong>-c</strong> - path to an A-REX config file, xml or ini format</p><p>This tool is run periodically by the A-REX to keep the size of each cache within the limits specified in the configuration file. Therefore cleaning should not be performed manually, unless the cache size needs to be reduced temporarily. For performance reasons it may however be desirable to run cache-clean independently on the machine hosting the cache file system, if this is different from the A-REX host. The most useful function for administrators is to give an overview of the contents of the cache, using the <strong>-s</strong> option.</p><p>Within each cache directory specified in the configuration file, there is a subdirectory for data (data/) and one for per-job hard links (joblinks/). See the A-REX Administration Guide for more details. <strong>cache-clean</strong> should only operate on the data subdirectory, therefore when giving <strong>dir</strong> arguments they should be the top level cache directory. <strong>cache-clean</strong> will then automatically only look at files within the data directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p><strong>cache-clean -m20 -M30 -E30d -D VERBOSE -c /etc/arc.conf</strong></p><p>Cache directories are taken from the configuration file <strong>/etc/arc.conf</strong> and all cache files accessed more than 30 days ago are deleted. Then if the free space in a cache is below 20%, data is deleted until the free space reaches 30%. Verbose debug output is enabled so information is output on each file that is deleted.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>APACHE LICENSE Version 2.0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>ARC software is developed by the NorduGrid Collaboration (http://www.nordugrid.org), please consult the AUTHORS file distributed with ARC. Please report bugs and feature requests to http://bugzilla.nordugrid.org</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="cacaview.1.html"><span aria-hidden="true">&larr;</span> cacaview.1: Ascii image browser</a></li>
   <li class="next"><a href="cache-list.1.html">cache-list.1: List contents of the a-rex cache. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
