<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mailplate: Reformat mail drafts according to templates</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Reformat mail drafts according to templates">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mailplate (1) manual">
  <meta name="twitter:description" content="Reformat mail drafts according to templates">
  <meta name="twitter:image" content="https://www.carta.tech/images/mailplate-mailplate-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mailplate.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mailplate (1) manual" />
  <meta property="og:description" content="Reformat mail drafts according to templates" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mailplate-mailplate-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mailplate<small> (1)</small></h1>
        <p class="lead">Reformat mail drafts according to templates</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mailplate.1.html">
      <span itemprop="name">mailplate: Reformat mail drafts according to templates</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mailplate/">
      <span itemprop="name">mailplate</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mailplate.1.html">
      <span itemprop="name">mailplate: Reformat mail drafts according to templates</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mailplate</strong> [[<strong>--new</strong>&nbsp;|&nbsp;<strong>-n</strong>] | [<strong>--editor</strong>&nbsp;|&nbsp;<strong>-e</strong>]] [<strong>--keep-unknown</strong> | <strong>-k</strong>] [<strong>--verbose</strong> | <strong>-v</strong>] [<strong>--debug</strong> | <strong>-d</strong>] <em>template-name</em> <em>message-file</em> <strong>mailplate</strong> [<strong>--keep-unknown</strong> | <strong>-k</strong>] [<strong>--verbose</strong> | <strong>-v</strong>] [<strong>--debug</strong> | <strong>-d</strong>] <em>template-name</em> &lt;&nbsp;<em>message-data</em> <strong>mailplate</strong> [[<strong>--auto</strong>&nbsp;|&nbsp;<strong>-a</strong>] | [<strong>--menu</strong>&nbsp;|&nbsp;<strong>-m</strong>]] [[<strong>--new</strong>&nbsp;|&nbsp;<strong>-n</strong>] | [<strong>--editor</strong>&nbsp;|&nbsp;<strong>-e</strong>]] [<strong>--keep-unknown</strong> | <strong>-k</strong>] [<strong>--verbose</strong> | <strong>-v</strong>] [<strong>--debug</strong> | <strong>-d</strong>] <em>message-file</em> <strong>mailplate</strong> [[<strong>--auto</strong>&nbsp;|&nbsp;<strong>-a</strong>] | [<strong>--menu</strong>&nbsp;|&nbsp;<strong>-m</strong>]] [<strong>--keep-unknown</strong> | <strong>-k</strong>] [<strong>--verbose</strong> | <strong>-v</strong>] [<strong>--debug</strong> | <strong>-d</strong>] &lt;&nbsp;<em>message&nbsp;data</em> <strong>mailplate</strong> [<strong>--help</strong> | <strong>-h</strong>] <strong>mailplate</strong> [<strong>--version</strong> | <strong>-V</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mailplate</strong> is a programme that reformats mail drafts according to a given template. The template may be specified on the command line, but mailplate can also use control information from the template files to automatically select an appropriate template (<strong>--auto</strong>). A selection menu feature is planned (<strong>--menu</strong>).</p><p>Applying a template means obtainined select data from an existing mail message (unless <strong>--new</strong> is specified) and to fill it into appropriate slots in the template. Messages are processed in three parts: headers, body, and signature.</p><p>When <strong>--new</strong> is given, an empty instantiation of the template is written to <em>stdout</em>. At the moment, <strong>--new</strong> cannot be combined with <strong>--editor</strong>.</p><p>The template can define two types of headers: mandatory and preservatory. Mandatory headers take precedence over headers in the existing message and thus overwrite them. Preservatory headers instruct mailplate to port their data from the existing mail message. Headers in the existing message but not defined in the template are dropped, unless <strong>--keep-unknown</strong> is given.</p><p>Body and signature are separated by \'-- \'. If this sentinel is not found, no signature is extracted. Templates can be interpolated and data filled into slots. Helper slots are filled with the output of helper commands (which must be defined in the configuration), environment variable slots are just that, and mail variable slots can be filled with data obtained by running regexps or commands over the message.</p><p>This script can be run in multiple ways:</p><p>\h'-04'&bull;\h'+03'As a filter, it applies a template to data from <em>stdin</em> and writes the result to <em>stdout</em>.</p><p>\h'-04'&bull;\h'+03'When <strong>--editor</strong> is passed, the script spawns <strong>sensible-editor</strong> on the result. It may thus be used as the editor for your mail user agent.</p><p>\h'-04'&bull;\h'+03'Given a file, it modifies the file, unless it cannot write to the file, in which case it writes to <em>stdout</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>These programs follow the usual GNU command line syntax, with long options starting with two dashes (`--\'):</p><p><strong>--auto</strong>, <strong>-a</strong></p><p>Turn on template auto-discovery.</p><p><strong>--menu</strong>, <strong>-m</strong></p><p>Choose from a list of templates (not yet implemented)</p><p><strong>--new</strong>, <strong>-n</strong></p><p>Create a new message.</p><p><strong>--editor</strong>, <strong>-e</strong></p><p>Spawn editor once template is applied.</p><p><strong>--keep-unknown</strong>, <strong>-k</strong></p><p>Preserve mail headers not specified in template.</p><p><strong>--verbose</strong>, <strong>-v</strong></p><p>Write informational messages to <em>stderr</em>.</p><p><strong>--debug</strong>, <strong>-d</strong></p><p>Start a debugger after initialisation.</p><p><strong>--help</strong>, <strong>-h</strong></p><p>Show summary of options.</p><p><strong>--version</strong>, <strong>-V</strong></p><p>Show version of program.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MUTT INTEGRATION</h2>
        <div class="sectioncontent">
<p>I use mailplate as my <em>$editor</em> for mutt, with the following setting in my <em>~/.mutt/muttrc</em>:</p>
<pre>
      set editor="~/.bin/mail/mailplate --edit --auto --keep-unknown"

</pre>
<p>mailplate currently has a bit of a limitation, or at least I have not figured out a way how to work around it sensibly yet. If you re-edit a message from mutt\(cqs compose menu, it causes mailplate to reprocess the message, which you may not want.</p><p>Similarly, if you find yourself editing messages from the index or pager, you probably also don\(cqt want mailplate to get in the way. For these cases, I currently use the following two keybindings:</p>
<pre>
      macro compose     e \':set my_editor="$editor"&lt;enter&gt;:set editor=sensible-editor&lt;enter&gt;&lt;edit-headers&gt;:set editor="$my_editor"&lt;enter&gt;\' "invoke normal editor to edit message"
      macro index,pager e \':set my_editor="$editor"&lt;enter&gt;:set editor=sensible-editor&lt;enter&gt;&lt;edit&gt;:set editor="$my_editor"&lt;enter&gt;\' "invoke normal editor to edit message"

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VIM INTEGRATION</h2>
        <div class="sectioncontent">
<p>I am often editing a message with vim and find that I need to use a different identity. For this purpose, I have the following keybindings in my <em>~/.vim/ftplugin/mail.vim</em>:</p>
<pre>
      nmap &lt;buffer&gt; &lt;F1&gt;      :w&lt;CR&gt;:%!mailplate --keep-unknown --auto&lt;CR&gt;
      nmap &lt;buffer&gt; &lt;C-P&gt;&lt;F1&gt; :w&lt;CR&gt;:%!mailplate --keep-unknown private&lt;CR&gt;
      nmap &lt;buffer&gt; &lt;C-P&gt;&lt;F2&gt; :w&lt;CR&gt;:%!mailplate --keep-unknown debian&lt;CR&gt;

</pre>
<p>Now when I reply to a message, mailplate automatically choses the right template, and if I later change my mind, I can press C-p, to override the choice and select the private template, or just hit to have it re-run the auto-detection.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mailplate&hellip;</h2>
        <div class="sectioncontent">
<p>http://madduck.net/code/mailplate/</p><p><em>/usr/share/doc/mailplate/README</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by martin f. krafft &lt;madduck@madduck.net&gt; with help from Carl Fürstenberg.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2007 martin f. krafft</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mailping-success.1.html"><span aria-hidden="true">&larr;</span> mailping-success.1: Munin plugin to graph time since last mail delivery</a></li>
   <li class="next"><a href="courier-mta-mailq.1.html">mailq.1: Display the mail queue <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
