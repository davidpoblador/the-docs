<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>apxs: Apache extension tool</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Apache extension tool">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="apxs (1) manual">
  <meta name="twitter:description" content="Apache extension tool">
  <meta name="twitter:image" content="https://www.carta.tech/images/apache2-dev-apxs-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/apxs.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="apxs (1) manual" />
  <meta property="og:description" content="Apache extension tool" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/apache2-dev-apxs-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">apxs<small> (1)</small></h1>
        <p class="lead">Apache extension tool</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/apxs.1.html">
      <span itemprop="name">apxs: Apache extension tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/apache2-dev/">
      <span itemprop="name">apache2-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/apxs.1.html">
      <span itemprop="name">apxs: Apache extension tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>apxs</strong> -<strong>g</strong> [ -<strong>S</strong> <em>name</em>=<em>value</em> ] -<strong>n</strong> <em>modname</em></p><p><strong>apxs</strong> -<strong>q</strong> [ -<strong>v</strong> ] [ -<strong>S</strong> <em>name</em>=<em>value</em> ] <em>query</em> ...</p><p><strong>apxs</strong> -<strong>c</strong> [ -<strong>S</strong> <em>name</em>=<em>value</em> ] [ -<strong>o</strong> <em>dsofile</em> ] [ -<strong>I</strong> <em>incdir</em> ] [ -<strong>D</strong> <em>name</em>=<em>value</em> ] [ -<strong>L</strong> <em>libdir</em> ] [ -<strong>l</strong> <em>libname</em> ] [ -<strong>Wc,</strong><em>compiler-flags</em> ] [ -<strong>Wl,</strong><em>linker-flags</em> ] <em>files</em> ...</p><p><strong>apxs</strong> -<strong>i</strong> [ -<strong>S</strong> <em>name</em>=<em>value</em> ] [ -<strong>n</strong> <em>modname</em> ] [ -<strong>a</strong> ] [ -<strong>A</strong> ] <em>dso-file</em> ...</p><p><strong>apxs</strong> -<strong>e</strong> [ -<strong>S</strong> <em>name</em>=<em>value</em> ] [ -<strong>n</strong> <em>modname</em> ] [ -<strong>a</strong> ] [ -<strong>A</strong> ] <em>dso-file</em> ...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUMMARY</h2>
        <div class="sectioncontent">
<p>apxs is a tool for building and installing extension modules for the Apache HyperText Transfer Protocol (HTTP) server. This is achieved by building a dynamic shared object (DSO) from one or more source or object <em>files</em> which then can be loaded into the Apache server under runtime via the LoadModule directive from mod_so.</p><p>So to use this extension mechanism your platform has to support the DSO feature and your Apache httpd binary has to be built with the mod_so module. The apxs tool automatically complains if this is not the case. You can check this yourself by manually running the command</p>
<pre>
      $ httpd -l

</pre>
<p>The module mod_so should be part of the displayed list. If these requirements are fulfilled you can easily extend your Apache server's functionality by installing your own modules with the DSO mechanism by the help of this apxs tool:</p>
<pre>
      $ apxs -i -a -c mod_foo.c
      gcc -fpic -DSHARED_MODULE -I/path/to/apache/include -c mod_foo.c
      ld -Bshareable -o mod_foo.so mod_foo.o
      cp mod_foo.so /path/to/apache/modules/mod_foo.so
      chmod 755 /path/to/apache/modules/mod_foo.so
      [activating module `foo' in /path/to/apache/etc/httpd.conf]
      $ apachectl restart
      /path/to/apache/sbin/apachectl restart: httpd not running, trying to start
      [Tue Mar 31 11:27:55 1998] [debug] mod_so.c(303): loaded module foo_module
      /path/to/apache/sbin/apachectl restart: httpd started
      $ _

</pre>
<p>The arguments <em>files</em> can be any C source file (.c), a object file (.o) or even a library archive (.a). The apxs tool automatically recognizes these extensions and automatically used the C source files for compilation while just using the object and archive files for the linking phase. But when using such pre-compiled objects make sure they are compiled for position independent code (PIC) to be able to use them for a dynamically loaded shared object. For instance with GCC you always just have to use -fpic. For other C compilers consult its manual page or at watch for the flags apxs uses to compile the object files.</p><p>For more details about DSO support in Apache read the documentation of mod_so or perhaps even read the src/modules/standard/mod_so.c source file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<h3>Common Options</h3>

<dl class='dl-vertical'>
  <dt>
    <p>-n <em>modname</em></p>
  </dt>
  <dd>
    <p>This explicitly sets the module name for the -i (install) and -g (template generation) option. Use this to explicitly specify the module name. For option -g this is required, for option -i the apxs tool tries to determine the name from the source or (as a fallback) at least by guessing it from the filename.</p>
  </dd>

</dl>

<h3>Query Options</h3>

<dl class='dl-vertical'>
  <dt>
    <p>-q</p>
  </dt>
  <dd>
    <p>Performs a query for variables and environment settings used to build httpd. When invoked without <em>query</em> parameters, it prints all known variables and their values. The optional -v parameter formats the list output. .PP Use this to manually determine settings used to build the httpd that will load your module. For instance use INC=-I`apxs -q INCLUDEDIR` .PP inside your own Makefiles if you need manual access to Apache's C header files.</p>
  </dd>

</dl>

<h3>Configuration Options</h3>

<dl class='dl-vertical'>
  <dt>
    <p>-S <em>name</em>=<em>value</em></p>
  </dt>
  <dd>
    <p>This option changes the apxs settings described above.</p>
  </dd>

</dl>

<h3>Template Generation Options</h3>

<dl class='dl-vertical'>
  <dt>
    <p>-g</p>
  </dt>
  <dd>
    <p>This generates a subdirectory <em>name</em> (see option -n) and there two files: A sample module source file named mod_<em>name</em>.c which can be used as a template for creating your own modules or as a quick start for playing with the apxs mechanism. And a corresponding Makefile for even easier build and installing of this module.</p>
  </dd>

</dl>

<h3>DSO Compilation Options</h3>

<dl class='dl-vertical'>
  <dt>
    <p>-c</p>
  </dt>
  <dd>
    <p>This indicates the compilation operation. It first compiles the C source files (.c) of <em>files</em> into corresponding object files (.o) and then builds a dynamically shared object in <em>dsofile</em> by linking these object files plus the remaining object files (.o and .a) of <em>files</em>. If no -o option is specified the output file is guessed from the first filename in <em>files</em> and thus usually defaults to mod_<em>name</em>.so.</p>
  </dd>
  <dt>
    <p>-o <em>dsofile</em></p>
  </dt>
  <dd>
    <p>Explicitly specifies the filename of the created dynamically shared object. If not specified and the name cannot be guessed from the <em>files</em> list, the fallback name mod_unknown.so is used.</p>
  </dd>
  <dt>
    <p>-D <em>name</em>=<em>value</em></p>
  </dt>
  <dd>
    <p>This option is directly passed through to the compilation command(s). Use this to add your own defines to the build process.</p>
  </dd>
  <dt>
    <p>-I <em>incdir</em></p>
  </dt>
  <dd>
    <p>This option is directly passed through to the compilation command(s). Use this to add your own include directories to search to the build process.</p>
  </dd>
  <dt>
    <p>-L <em>libdir</em></p>
  </dt>
  <dd>
    <p>This option is directly passed through to the linker command. Use this to add your own library directories to search to the build process.</p>
  </dd>
  <dt>
    <p>-l <em>libname</em></p>
  </dt>
  <dd>
    <p>This option is directly passed through to the linker command. Use this to add your own libraries to search to the build process.</p>
  </dd>
  <dt>
    <p>-Wc,<em>compiler-flags</em></p>
  </dt>
  <dd>
    <p>This option passes <em>compiler-flags</em> as additional flags to the libtool --mode=compile command. Use this to add local compiler-specific options.</p>
  </dd>
  <dt>
    <p>-Wl,<em>linker-flags</em></p>
  </dt>
  <dd>
    <p>This option passes <em>linker-flags</em> as additional flags to the libtool --mode=link command. Use this to add local linker-specific options.</p>
  </dd>
  <dt>
    <p>-p</p>
  </dt>
  <dd>
    <p>This option causes apxs to link against the apr/apr-util libraries. This is useful when compiling helper programs that use the apr/apr-util libraries.</p>
  </dd>

</dl>

<h3>DSO Installation and Configuration Options</h3>

<dl class='dl-vertical'>
  <dt>
    <p>-i</p>
  </dt>
  <dd>
    <p>This indicates the installation operation and installs one or more dynamically shared objects into the server's <em>modules</em> directory.</p>
  </dd>
  <dt>
    <p>-a</p>
  </dt>
  <dd>
    <p>This activates the module by automatically adding a corresponding LoadModule line to Apache's httpd.conf configuration file, or by enabling it if it already exists.</p>
  </dd>
  <dt>
    <p>-A</p>
  </dt>
  <dd>
    <p>Same as option -a but the created LoadModule directive is prefixed with a hash sign (#), <em>i.e.</em>, the module is just prepared for later activation but initially disabled.</p>
  </dd>
  <dt>
    <p>-e</p>
  </dt>
  <dd>
    <p>This indicates the editing operation, which can be used with the -a and -A options similarly to the -i operation to edit Apache's httpd.conf configuration file without attempting to install the module.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Assume you have an Apache module named mod_foo.c available which should extend Apache's server functionality. To accomplish this you first have to compile the C source into a shared object suitable for loading into the Apache server under runtime via the following command:</p>
<pre>
      $ apxs -c mod_foo.c
      /path/to/libtool --mode=compile gcc ... -c mod_foo.c
      /path/to/libtool --mode=link gcc ... -o mod_foo.la mod_foo.slo
      $ _

</pre>
<p>Then you have to update the Apache configuration by making sure a LoadModule directive is present to load this shared object. To simplify this step apxs provides an automatic way to install the shared object in its "modules" directory and updating the httpd.conf file accordingly. This can be achieved by running:</p>
<pre>
      $ apxs -i -a mod_foo.la
      /path/to/instdso.sh mod_foo.la /path/to/apache/modules
      /path/to/libtool --mode=install cp mod_foo.la /path/to/apache/modules
      ...
      chmod 755 /path/to/apache/modules/mod_foo.so
      [activating module `foo' in /path/to/apache/conf/httpd.conf]
      $ _

</pre>
<p>This way a line named</p>
<pre>
      LoadModule foo_module modules/mod_foo.so

</pre>
<p>is added to the configuration file if still not present. If you want to have this disabled per default use the -A option, <em>i.e.</em></p>
<pre>
      $ apxs -i -A mod_foo.c

</pre>
<p>For a quick test of the apxs mechanism you can create a sample Apache module template plus a corresponding Makefile via:</p>
<pre>
      $ apxs -g -n foo
      Creating [DIR]  foo
      Creating [FILE] foo/Makefile
      Creating [FILE] foo/modules.mk
      Creating [FILE] foo/mod_foo.c
      Creating [FILE] foo/.deps
      $ _

</pre>
<p>Then you can immediately compile this sample module into a shared object and load it into the Apache server:</p>
<pre>
      $ cd foo
      $ make all reload
      apxs -c mod_foo.c
      /path/to/libtool --mode=compile gcc ... -c mod_foo.c
      /path/to/libtool --mode=link gcc ... -o mod_foo.la mod_foo.slo
      apxs -i -a -n "foo" mod_foo.la
      /path/to/instdso.sh mod_foo.la /path/to/apache/modules
      /path/to/libtool --mode=install cp mod_foo.la /path/to/apache/modules
      ...
      chmod 755 /path/to/apache/modules/mod_foo.so
      [activating module `foo' in /path/to/apache/conf/httpd.conf]
      apachectl restart
      /path/to/apache/sbin/apachectl restart: httpd not running, trying to start
      [Tue Mar 31 11:27:55 1998] [debug] mod_so.c(303): loaded module foo_module
      /path/to/apache/sbin/apachectl restart: httpd started
      $ _

</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="apwal.1.html"><span aria-hidden="true">&larr;</span> apwal.1: Powerful application launcher</a></li>
   <li class="next"><a href="apxs2.1.html">apxs2.1: Apache extension tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
