<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mkdns323fw: Build firmware images for the dns-323 from a kernel and initrd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Build firmware images for the dns-323 from a kernel and initrd">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mkdns323fw (1) manual">
  <meta name="twitter:description" content="Build firmware images for the dns-323 from a kernel and initrd">
  <meta name="twitter:image" content="https://www.carta.tech/images/dns323-firmware-tools-mkdns323fw-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mkdns323fw.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mkdns323fw (1) manual" />
  <meta property="og:description" content="Build firmware images for the dns-323 from a kernel and initrd" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dns323-firmware-tools-mkdns323fw-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mkdns323fw<small> (1)</small></h1>
        <p class="lead">Build firmware images for the dns-323 from a kernel and initrd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mkdns323fw.1.html">
      <span itemprop="name">mkdns323fw: Build firmware images for the dns-323 from a kernel and initrd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dns323-firmware-tools/">
      <span itemprop="name">dns323-firmware-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mkdns323fw.1.html">
      <span itemprop="name">mkdns323fw: Build firmware images for the dns-323 from a kernel and initrd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mkdns323fw</strong> -k KERNEL -i INITRD [-d DEFAULTS] -p PRODUCT_ID -c CUSTOM_ID -m MODEL_ID -o OUTPUTFILE</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>mkdns323fw creates firmware images suitable for upload to the D-link DNS-323 and other, similar devices based on the same basic firmware image, such as the Conceptronics CH3SNAS.  These firmware images contain a kernel and initrd, as well as various product-specific values and checksums.</p><p>This command can be very dangerous; although it attempts to do some very, very basic sanity checking, it is still quite easy to generate a firmware file that, when loaded into your device, will kill it stone dead.  This program is not able to check that you're uploading valid data to your device; if you brick it, you're on your own. <strong>-k</strong> kernel, <strong>--kernel</strong>=<em>kernel</em></p><ul>
<li><p>specify the file containing the kernel image to embed in the firmware image. This must be a uBoot image file, as produced by <a href="../man1/mkimage.1.html"><strong>mkimage</strong>(1)</a> with appropriate options to specify it as a kernel image.  Attempts to provide a non-uBoot file will fail, while specifying a non-kernel uBoot file may well brick your device.  This option is required. <strong>-i</strong> initrd, <strong>--initrd</strong>=<em>initrd</em></p></li><li><p>the initrd file to embed in the firmware image.  This must be a uBoot image file, as produced by <a href="../man1/mkimage.1.html"><strong>mkimage</strong>(1)</a> with appropriate options to specify it as a ramdisk.  The tool will refuse to embed a non-uBoot file, however a dodgy ramdisk will likely brick your device. <strong>-d</strong> defaults.tar.gz, <strong>--defaults</strong>=<em>defaults.tar.gz</em></p></li><li><p>The firmware format has the ability to embed a tarball with a default configuration; if you want to do this, you may use this option to do so. However, the devices that the author has dealt with do not require such a thing, and leaving it out still produces a valid firmware (and one that is a bit smaller, to boot). <strong>-s</strong> signature, <strong>--defaults</strong>=<em>signature</em></p></li><li><p>For reasons that will probably remain unknown until the ends of time, there are (at least) two different firmware signatures running around that are otherwise identical in their internal structure, which are used for different devices.  This option exists to allow you to specify the signature that you want to use in your firmware build.  Valid values for this option are currently <em></em> FrodoII</p><p>(the default if this option is not specified), <em></em> Chopper</p><p>or <em></em> Gandolf</p><p>which is used in some devices.  See the table at the top of the script if you don't know which value to use for your device. <strong>--p product_id</strong>, <strong>--product-id</strong>=<em>product_id</em> <strong>--c custom_id</strong>, <strong>--custom-id</strong>=<em>custom_id</em> <strong>--m model_id</strong>, <strong>--model-id</strong>=<em>model_id</em></p></li><li><p>Specify the product, custom, and model ID that this firmware image is intended for.  As several different devices share the same firmware format, the intended device type is encoded in these fields.  If you do not specify the correct values for the device that you are targetting with your firmware, it is quite likely that the device will refuse the upload.</p></li><li><p>Known-good values for various devices are provided in the header of the script; please look there for more information.  You can also obtain the values you need by downloading an existing firmware for the device you're targetting and doing a bit of digging. <strong>-o</strong> outputfile, <strong>--output</strong>=<em>outputfile</em></p></li><li><p>Where to write the completed firmware image.  Will overwrite any existing file of the same name.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>E-mail bug reports to <strong>theshed+dns323-firmware-tools@hezmatt.org</strong>. I don't guarantee to be able to help, but I'll give it a shot.  Patches are far more helpful.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>mkdns323fw</strong> was written by Matt Palmer, based on reverse-engineering work done by Leschinsky Oleg.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2008 Matt Palmer.</p><p>This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE, to the extent permitted by law.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mkdns323fw&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/mkimage.1.html"><strong>mkimage</strong>(1)</a>, <a href="../man1/splitdns323fw.1.html"><strong>splitdns323fw</strong>(1)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mkdiskimage.1.html"><span aria-hidden="true">&larr;</span> mkdiskimage.1: Create a blank ms-dos formatted hard disk image</a></li>
   <li class="next"><a href="mkelf-linux.1.html">mkelf-linux.1: Make network bootable image <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
