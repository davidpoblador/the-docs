<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dh_configpackage: Add maintainer script rules to displace, hide, or transform files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Add maintainer script rules to displace, hide, or transform files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dh_configpackage (1) manual">
  <meta name="twitter:description" content="Add maintainer script rules to displace, hide, or transform files">
  <meta name="twitter:image" content="https://www.carta.tech/images/config-package-dev-dh_configpackage-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/dh_configpackage.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dh_configpackage (1) manual" />
  <meta property="og:description" content="Add maintainer script rules to displace, hide, or transform files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/config-package-dev-dh_configpackage-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dh_configpackage<small> (1)</small></h1>
        <p class="lead">Add maintainer script rules to displace, hide, or transform files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dh_configpackage.1.html">
      <span itemprop="name">dh_configpackage: Add maintainer script rules to displace, hide, or transform files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/config-package-dev/">
      <span itemprop="name">config-package-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dh_configpackage.1.html">
      <span itemprop="name">dh_configpackage: Add maintainer script rules to displace, hide, or transform files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dh_configpackage</strong> [<strong>--displace</strong> <em>path</em>] [<strong>--hide</strong> <em>path</em>] [<strong>--undisplace</strong> <em>path</em>] [<strong>--unhide</strong> <em>file</em>] [<strong>--transform</strong> <em>transformation</em>] [<em>debhelper&nbsp;options</em>] [<strong>-n</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>dh_configpackage</strong> is a debhelper program to create \*(L"configuration packages\*(R".  These packages provide an ideal way to distribute configurations to target systems while still affording local system administrators a degree of control over their workstations.  The motivation and philosophy behind this style of packaging is described in detail on the config-package-dev website.  Configuration packages make use of dpkg diversions and maintainer script snippets to provide three primary operations: displacing, hiding, and transforming files.</p><p>The <em>displace</em> operation consists of replacing a file on the target system.  The original file is renamed out of the way and diverted in the dpkg database.  The replacement file is then installed by the package, and the config-package-dev maintainer script snippets create a symlink from the original name.  A common use of this is to install a wrapper script for an executable.</p><p>The <em>transform</em> operation is a special case of the displace operation. At build time, a \*(L"transform script\*(R" is applied to the original source, and the result is used as the replacement in the displace operation.  A common use of this is to change one value in a config file without needing to re-type the entire config file (and risk bit-rot).</p><p>The <em>hide</em> operation is yet another special case of the displace operation, namely that there is no replacement or symlink.  Instead, the file is diverted to a unique path on the target system, thus preserving its contents.  A common use of this is to suppress a snippet file in a configuration directory (e.g. /etc/foo.d), thus disabling a specific operation or configuration.</p><p>The <em>displace extension</em> is a suffix appended to the diverted versions of files, and this suffix plus the string \*(L"-orig\*(R" is appended to the original versions of the files.  The default value is the first word of the package name.  For example, the extension for debathena-bin-example would be \*(L".debathena\*(R".  So if debathena-bin-example displaced /bin/true, the original /bin/true would be found at /bin/true.debathena-orig and the new version (installed by e.g. dh_install) found at /bin/true.debathena.  /bin/true itself would become a symbolic link. (For the remainder of this documentation, \*(L".debathena\*(R" will be used as the displace extension.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    debian/<em>package</em>.displace
  </dt>
  <dd>
    <p>List the files to displace, one per line, including the full path and displace extension.  For example, to displace /usr/bin/true to /usr/bin/true.debathena, you would list \*(L"/usr/bin/true.debathena\*(R" in the file.  (As with other Debhelper commands, you can omit the initial leading slash in pathnames in the package, but these examples retain it.)</p>
  </dd>
  <dt>
    debian/<em>package</em>.hide
  </dt>
  <dd>
    <p>List the files to hide, one per line, including the full path and displace extension.  As noted above, these files won't actually be removed, but merely diverted and renamed to a unique path below /usr/share/<em>package</em>.</p>
  </dd>
  <dt>
    debian/<em>package</em>.undisplace
  </dt>
  <dd>
    <p>List the files to undisplace, one per line, including the full path and displace extension.  <strong>\s-1NOTE:\s0</strong> This is only needed when a new version of the package no longer needs to displace a file (for example, if an upstream bug was fixed).  Packages automatically undo all operations upon removal or deconfiguration.</p>
  </dd>
  <dt>
    debian/<em>package</em>.unhide
  </dt>
  <dd>
    <p>List the files to unhide, one per line, including the full path and displace extension.  <strong>\s-1NOTE:\s0</strong> As with undisplace, this is only needed when a new version of the package no longer needs to hide a file.</p>
  </dd>
  <dt>
    debian/<em>package</em>.transform
  </dt>
  <dd>
    <p>Each line in the file specifies a transformation.  A transformation consists of two space-separated fields: the full path of the target file including the displace extension and the transformation command itself.  The transformation can either be a single shell command, or an executable file in the debian directory.  The transformation takes the original source of the file on stdin and prints its transformation on stdout.  Transformations are typically performed by perl, sed, or awk, but there is no limitation on what can be used as a transformation. For example, to transform /etc/school.conf by replacing all occurrences of the word 'Harvard' with the word '\s-1MIT\s0', you might specify the following line:</p>
<pre>
 /etc/school.conf.debathena sed -e &apos;s/Harvard/MIT/g&apos;
</pre>
<p>Or, storing the command in a separate script:  /etc/school.conf.debathena debian/transform_school.conf.pl If the transformation script fails, the package build fails. You can use this with e.g. Perl's \*(C`or die\*(C' syntax to make sure that the source file of the transformation has not changed from what you expected. <em>Transformation sources</em>: Under normal operation, the source (passed on stdin) for the transformation is the name of the diversion without the divert extension.  In some cases, you may wish to use a different source (e.g. a sample configuration file in /usr/share/doc).  You can specify this source as an optional field between the diversion filename and the transformation.  This field must begin with a '&lt;' immediately followed by the full path to the source.  Taking the example above, we might alter it as follows:  /etc/school.conf.debathena &lt;/usr/share/doc/school/conf.example sed -e &apos;s/Harvard/MIT/g&apos; <strong>\s-1NOTE:\s0</strong> There is no \*(L"untransform\*(R" operation.  Because a transform operation is a special case of a displace operation, the \*(L"undisplace\*(R" operation is the correct way of removing a no-longer-needed transformation in future versions of the package.</p>
  </dd>
  <dt>
    debian/<em>package</em>.displace-extension
  </dt>
  <dd>
    <p>This file is used to specify the displace extension for any files diverted by this package, if you do not want to accept the default of the first word in the package name.  It will not normally be present. (See \*(L"\s-1CAVEATS\s0\*(R".)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>-n</strong>, <strong>--noscripts</strong>
  </dt>
  <dd>
    <p>Do not modify maintainer scripts.  This is a standard debhelper option, though you are strongly discouraged from using it except for debugging, as these operations rely heavily on the maintainer scripts.</p>
  </dd>
  <dt>
    <strong>--displace</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--hide</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--undisplace</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--unhide</strong> <em>path</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>--transform</strong> <em>transformation</em>
  </dt>
  <dd>
    <p>These options allow for specifying an operation on the command line. The argument to the option is the same as a single line of the corresponding file, as described above.  You may specify multiple occurrences of <strong>--displace</strong>, or you may invoke <strong>dh_configpackage</strong> repeatedly with different invocations.  The most common use of this format is in a rules file when performing conditional operations, in an \*(C`override_dh_configpackage\*(C' target in the \*(C`rules\*(C' file.  See the debathena-conffile-example-1.1 package in /usr/share/doc/config-package-dev/EXAMPLES for one such use.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>Because the displace extension is automatically generated from the package name, renaming the package can have unintended consequences. If you must rename a package such that the first component of the name changes, specify the old extension using the \*(C`displace-extension\*(C' file (see above).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dh_configpackage&hellip;</h2>
        <div class="sectioncontent">
<p><em>debhelper</em>\|(7), The config-package-dev homepage &lt;http://debathena.mit.edu/config-package-dev&gt;</p><p>This program is a part of config-package-dev.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>config-package-dev was written by Anders Kaseorg &lt;andersk@mit.edu&gt; and Tim Abbott &lt;tabbott@mit.edu&gt;. The debhelper port is by Geoffrey Thomas &lt;geofft@mit.edu&gt;.  Documentation by Jonathan Reed &lt;jdreed@mit.edu&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dh_bash-completion.1.html"><span aria-hidden="true">&larr;</span> dh_bash-completion.1: Install bash completions for package</a></li>
   <li class="next"><a href="dh_dkms.1.html">dh_dkms.1: Correctly handle dkms usage by a kernel module package <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
