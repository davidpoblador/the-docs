<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>funtable: Copy selected rows from a funtools file to a fits binary table</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Copy selected rows from a funtools file to a fits binary table">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="funtable (1) manual">
  <meta name="twitter:description" content="Copy selected rows from a funtools file to a fits binary table">
  <meta name="twitter:image" content="https://www.carta.tech/images/funtools-funtable-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/funtable.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="funtable (1) manual" />
  <meta property="og:description" content="Copy selected rows from a funtools file to a fits binary table" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/funtools-funtable-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">funtable<small> (1)</small></h1>
        <p class="lead">Copy selected rows from a funtools file to a fits binary table</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/funtable.1.html">
      <span itemprop="name">funtable: Copy selected rows from a funtools file to a fits binary table</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/funtools/">
      <span itemprop="name">funtools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/funtable.1.html">
      <span itemprop="name">funtable: Copy selected rows from a funtools file to a fits binary table</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>funtable [\-a] [\-i|\-z] [\-m] [\-s cols] &lt;iname&gt; &lt;oname&gt; [columns]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<pre>
  -a    # append to existing output file as a table extension
  -i    # for image data, only generate X and Y columns
  -m    # for tables, write a separate file for each region
  -s "col1 ..." # columns on which to sort
  -z    # for image data, output zero-valued pixels
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>funtable</strong> selects rows from the specified \s-1FITS\s0 Extension (binary table only) of a \s-1FITS\s0 file, or from a non-FITS raw event file, and writes those rows to a \s-1FITS\s0 binary table file. It also will create a \s-1FITS\s0 binary table from an image or a raw array file.</p><p>The first argument to the program specifies the \s-1FITS\s0 file, raw event file, or raw array file.  If \*(L"stdin\*(R" is specified, data are read from the standard input. Use Funtools Bracket Notation to specify \s-1FITS\s0 extensions, and filters.  The second argument is the output \s-1FITS\s0 file.  If \*(L"stdout\*(R" is specified, the \s-1FITS\s0 binary table is written to the standard output.  By default, all columns of the input file are copied to the output file.  Selected columns can be output using an optional third argument in the form:</p><p>  "column1 column1 ... columnN"</p><p>The <strong>funtable</strong> program generally is used to select rows from a \s-1FITS\s0 binary table using Table Filters and/or Spatial Region Filters. For example, you can copy only selected rows (and output only selected columns) by executing in a command such as:</p><p>  [sh] funtable "test.ev[pha==1&&pi==10]" stdout "x y pi pha" | fundisp stdin          X       Y     PHA        PI    ------- ------- ------- ---------          1      10       1        10          1      10       1        10          1      10       1        10          1      10       1        10          1      10       1        10          1      10       1        10          1      10       1        10          1      10       1        10          1      10       1        10          1      10       1        10</p><p>The special column <strong>$REGION</strong> can be specified to write the region id of each row:</p><p>  [sh $] funtable "test.ev[time-(int)time&gt;=.99&&annulus(0 0 0 10 n=3)]" stdout 'x y time $REGION' | fundisp stdin           X        Y                  TIME     REGION    -------- -------- --------------------- ----------           5       -6           40.99000000          3           4       -5           59.99000000          2          -1        0          154.99000000          1          -2        1          168.99000000          1          -3        2          183.99000000          2          -4        3          199.99000000          2          -5        4          216.99000000          2          -6        5          234.99000000          3          -7        6          253.99000000          3</p><p>Here only rows with the proper fractional time and whose position also is within one of the three annuli are written.</p><p>Columns can be excluded from display using a minus sign before the column:</p><p>  [sh $] funtable "test.ev[time-(int)time&gt;=.99]" stdout "-time" | fundisp stdin           X        Y      PHA         PI          DX          DY    -------- -------- -------- ---------- ----------- -----------           5       -6        5         -6        5.50       -6.50           4       -5        4         -5        4.50       -5.50          -1        0       -1          0       -1.50        0.50          -2        1       -2          1       -2.50        1.50          -3        2       -3          2       -3.50        2.50          -4        3       -4          3       -4.50        3.50          -5        4       -5          4       -5.50        4.50          -6        5       -6          5       -6.50        5.50          -7        6       -7          6       -7.50        6.50</p><p>All columns except the time column are written.</p><p>In general, the rules for activating and de-activating columns are:</p><ul>
<li><p>If only exclude columns are specified, then all columns but the exclude columns will be activated.</p></li><li><p>If only include columns are specified, then only the specified columns are activated.</p></li><li><p>If a mixture of include and exclude columns are specified, then all but the exclude columns will be active; this last case is ambiguous and the rule is arbitrary.</p></li>
</ul><p>In addition to specifying columns names explicitly, the special symbols <em>+</em> and <em>-</em> can be used to activate and de-activate <em>all</em> columns. This is useful if you want to activate the $REGION column along with all other columns.  According to the rules, the syntax \*(L"$REGION\*(R" only activates the region column and de-activates the rest. Use \*(L"+ $REGION\*(R" to activate all columns as well as the region column.</p><p>Ordinarily, only the selected table is copied to the output file.  In a \s-1FITS\s0 binary table, it sometimes is desirable to copy all of the other \s-1FITS\s0 extensions to the output file as well. This can be done by appending a '+' sign to the name of the extension in the input file name. For example, the first command below copies only the \s-1EVENT\s0 table, while the second command copies other extensions as well:</p><p>  [sh] funtable "/proj/rd/data/snr.ev[EVENTS]" events.ev   [sh] funtable "/proj/rd/data/snr.ev[EVENTS+]" eventsandmore.ev</p><p>If the input file is an image or a raw array file, then <strong>funtable</strong> will generate a \s-1FITS\s0 binary table from the pixel values in the image. Note that it is not possible to specify the columns to output (using command-line argument 3). Instead, there are two ways to create such a binary table from an image. By default, a 3\-column table is generated, where the columns are \*(L"X\*(R", \*(L"Y\*(R", and \*(L"\s-1VALUE\s0\*(R". For each pixel in the image, a single row (event) is generated with the \*(L"X\*(R" and \*(L"Y\*(R" columns assigned the dim1 and dim2 values of the image pixel, respectively and the \*(L"\s-1VALUE\s0\*(R" column assigned the value of the pixel. With sort of table, running <strong>funhist</strong> on the \*(L"\s-1VALUE\s0\*(R" column will give the same results as running <strong>funhist</strong> on the original image.</p><p>If the <strong>\-i</strong> (\*(L"individual\*(R" rows) switch is specified, then only the \*(L"X\*(R" and \*(L"Y\*(R" columns are generated. In this case, each positive pixel value in the image generates n rows (events), where n is equal to the integerized value of that pixel (plus 0.5, for floating point data).  In effect, <strong>\-i</strong> approximately recreates the rows of a table that would have been binned into the input image. (Of course, this is only approximately correct, since the resulting x,y positions are integerized.)</p><p>If the <strong>\-s [col1 col2 ... coln]</strong> (\*(L"sort\*(R") switch is specified, the output rows of a binary table will be sorted using the specified columns as sort keys. The sort keys must be scalar columns and also must be part of the output file (i.e. you cannot sort on a column but not include it in the output). This facility uses the <strong>_sort</strong> program (included with funtools), which must be accessible via your path.</p><p>For binary tables, the <strong>\-m</strong> (\*(L"multiple files\*(R") switch will generate a separate file for each region in the filter specification i.e. each file contains only the rows from that region. Rows which pass the filter but are not in any region also are put in a separate file.</p><p>The separate output file names generated by the <strong>\-m</strong> switch are produced automatically from the root output file to contain the region id of the associated region. (Note that region ids start at 1, so that the file name associated with id 0 contains rows that pass the filter but are not in any given region.) Output file names are generated as follows:</p><ul>
<li><p>A $n specification can be used anywhere in the root file name (suitably quoted to protect it from the shell) and will be expanded to be the id number of the associated region. For example:   funtable -m input.fits'[cir(512,512,1);cir(520,520,1)...]' 'foo.goo_$n.fits' will generate files named foo.goo_0.fits (for rows not in any region but still passing the filter), foo.goo_1.fits (rows in region id #1, the first region), foo.goo_2.fits (rows in region id #2), etc. Note that single quotes in the output root are required to protect the '$' from the shell.</p></li><li><p>If $n is not specified, then the region id will be placed before the first dot (.) in the filename. Thus:   funtable -m input.fits'[cir(512,512,1);cir(520,520,1)...]' foo.evt.fits will generate files named foo0.evt.fits (for rows not in any region but still passing the filter), foo1.evt.fits (rows in region id #1), foo2.evt.fits (rows in region id #2), etc.</p></li><li><p>If no dot is specified in the root output file name, then the region id will be appended to the filename. Thus:   funtable -m input.fits'[cir(512,512,1);cir(520,520,1)...]' 'foo_evt' will generate files named foo_evt0 (for rows not in any region but still passing the filter), foo_evt1 (rows in region id #1), foo_evt2 (rows in region id #2), etc.</p></li>
</ul><p>The multiple file mechanism provide a simple way to generate individual source data files with a single pass through the data.</p><p>By default, a new \s-1FITS\s0 file is created and the binary table is written to the first extension.  If the <strong>\-a</strong> (append) switch is specified, the table is appended to an existing \s-1FITS\s0 file as a \s-1BINTABLE\s0 extension. Note that the output \s-1FITS\s0 file must already exist.</p><p>If the <strong>\-z</strong> (\*(L"zero\*(R" pixel values) switch is specified and <strong>\-i</strong> is not specified, then pixels having a zero value will be output with their \*(L"\s-1VALUE\s0\*(R" column set to zero. Obviously, this switch does not make sense when individual events are output.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO funtable&hellip;</h2>
        <div class="sectioncontent">
<p>See <a href="../man7/funtools.7.html"><strong>funtools</strong>(7)</a> for a list of Funtools help pages</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="funsky.1.html"><span aria-hidden="true">&larr;</span> funsky.1: Convert between image and sky coordinates</a></li>
   <li class="next"><a href="funtbl.1.html">funtbl.1: Extract a table from funtools ascii output <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
