<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lockout: Avoid slacking and impose productivity and discipline on yourself</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Avoid slacking and impose productivity and discipline on yourself">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lockout (1) manual">
  <meta name="twitter:description" content="Avoid slacking and impose productivity and discipline on yourself">
  <meta name="twitter:image" content="https://www.carta.tech/images/lockout-lockout-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/lockout.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lockout (1) manual" />
  <meta property="og:description" content="Avoid slacking and impose productivity and discipline on yourself" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lockout-lockout-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lockout<small> (1)</small></h1>
        <p class="lead">Avoid slacking and impose productivity and discipline on yourself</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lockout.1.html">
      <span itemprop="name">lockout: Avoid slacking and impose productivity and discipline on yourself</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lockout/">
      <span itemprop="name">lockout</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lockout.1.html">
      <span itemprop="name">lockout: Avoid slacking and impose productivity and discipline on yourself</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">WARNING</h2>
        <div class="sectioncontent">
<p>This program is \s-1VERY\s0 \s-1DANGEROUS\s0.  If it fails, you may end up not knowing the root password to your own computer (in which case you need to boot into single-user mode).  There are no known reports of this actually happening, but we don't know how stupid you are.  Also, you should probably not run this on a multi-user system.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
 lockout lock HhMm | Hh | Mm
 lockout lock HH:MM
 lockout lock HH:MMam | HH:MMpm
 lockout lock HHam | HHpm
 lockout lock
</pre>
<p> lockout unlock [force]</p><p> lockout status</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Lockout is a tool that imposes discipline on you so that you get some work done.  For example, lockout can be used to install a firewall that does not let you browse the Web.  Lockout changes the root password for a specified duration; this prevents you from secretly ripping down the firewall and then browsing the Web anyway.  In case of an emergency, you can reboot your computer to undo the effects of lockout and to restore the original root password.</p><p>Obviously, <strong>lockout lock</strong> and <strong>lockout unlock</strong> can only be run by root. <strong>lockout status</strong> can be run by any user.</p><p><strong>lockout</strong> without any parameters shows a brief help message.</p><p><strong>lockout lock</strong> takes one optional parameter.  If no parameter is given, you are dropped in interactive mode and asked for the duration of the lock or the time at which the lock should be lifted.  You can also supply this as a parameter on the command line.  Lockout understands various time formats.  You can specify a delay, e.g., <em>3h</em> (3 hours), <em>1h30m</em> (1 hour and 30 minutes), or <em>90m</em> (1 hour and 30 minutes), or you can specify absolute time, e.g., <em>2pm</em>, <em>2:30am</em>, <em>15:30</em>, etc.  You will be asked to confirm the time at which lockout will unlock your system.  If you type \*(L"yes\*(R", lockout executes <em>/etc/lockout/lock.sh</em> and changes the root password to something completely random.  <em>/etc/lockout/lock.sh</em> is a shell script that you write.  It takes measures to make sure you stop slacking.  For example, it could install a firewall that prevents outgoing connections to port 80.  See the \*(L"\s-1EXAMPLES\s0\*(R" section below.</p><p><strong>lockout unlock</strong> takes an optional <em>force</em> parameter.  Without any parameters, <strong>lockout lock</strong> will check whether it is time to unlock the system and, if so, executes <em>/etc/lockout/unlock.sh</em>, which is a shell script that you write.  It should undo the effects of <em>/etc/lockout/lock.sh</em>, executed when the system was locked.  If you pass the <em>force</em> parameter to <strong>lockout</strong> unlock, lockout will forcibly unlock your system, whether it was really time for that or not.  <strong>lockout unlock</strong> should be called every minute by cron. See \*(L"\s-1CONFIGURATION\s0\*(R".</p><p><strong>lockout status</strong> will print out the time at which the system is going to be unlocked.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>/etc/cron.d/lockout <strong>must</strong> contain the following two entries:</p><p>    */1 * * * *         root    /usr/bin/lockout unlock &gt;/dev/null 2&gt;&1     @reboot             root    /usr/bin/lockout unlock force &gt;/dev/null 2&gt;&1</p><p>The examples that follow assume you are using <em>sudo</em>\|(8) and you have a file, <em>/etc/lockout/sudoers.normal</em> which is the normal <em>/etc/sudoers</em> file, and <em>/etc/lockout/sudoers.lock</em>, which is the <em>/etc/sudoers</em> file when lockout locks your computer.  This example also assumes you are using <em>iptables</em>\|(8). <em>/var/lib/iptables/active</em> should contain your default firewall rules, and <em>/var/lib/iptables/work</em> should contain the firewall rules that enforce discipline.  See below for an example.</p><p><em>/etc/lock/lock.sh</em> imposes discipline.  For example:</p><p>    #!/bin/sh     /etc/init.d/iptables load work     cp /etc/lockout/sudoers.lock /etc/sudoers</p><p><em>/etc/lock/unlock.sh</em> undoes these effects.  For example:</p><p>    #!/bin/sh     /etc/init.d/iptables restart     cp /etc/lockout/sudoers.normal /etc/sudoers</p><p>Your <em>/var/lib/iptables/work</em> may look something like this:</p><p>    *filter     :INPUT ACCEPT [1047:99548]     :FORWARD ACCEPT [0:0]     :OUTPUT ACCEPT [1104:120792]</p><p>    # allow incoming packets from localhost, ntp,     # and existing connections     -A INPUT -i lo -j ACCEPT     -A INPUT -p udp -m udp --source-port ntp -m state --state ESTABLISHED -j ACCEPT     -A INPUT -m state --state ESTABLISHED -j ACCEPT     -A INPUT -p tcp -j DROP     -A INPUT -p udp -j DROP</p><p>    # allow outgoing connections for email and DNS     -A OUTPUT -d 127.0.0.1/8 -j ACCEPT     -A OUTPUT -p tcp -m tcp --dport smtp -j ACCEPT     -A OUTPUT -p tcp -m tcp --dport domain -j ACCEPT     -A OUTPUT -p udp -m udp --dport domain -j ACCEPT     -A OUTPUT -j DROP     COMMIT</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>    lockout lock 2h30m   [locks out for 2h and 30m]     lockout lock 90m     [locks out for 1h and 30m]     lockout lock 3pm     [locks out until 3pm]     lockout lock 3:20am  [locks out until 3:20am]     lockout lock 15:20   [locks out until 3:20pm]</p><p>    lockout status       [shows when the system is going to be unlocked]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/etc/lockout/lock.sh</em>: executed when running <strong>lockout lock</strong></p><p><em>/etc/lockout/unlock.sh</em>: executed when running <strong>lockout unlock</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lockout&hellip;</h2>
        <div class="sectioncontent">
<p><em>usermod</em>\|(8), <em>iptables</em>\|(8), <em>passwd</em>\|(1), <em>cron</em>\|(8), <em>crontab</em>\|(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Arguably, a program that changes the root password to something random with the possibility of never recovering the original password might be considered a bug by itself.  Other than that, no known bugs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Thomer M. Gil, http://thomer.com/lockout/</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lockmail.maildrop.1.html"><span aria-hidden="true">&larr;</span> lockmail.maildrop.1: Create mail lock files</a></li>
   <li class="next"><a href="locktest.1.html">locktest.1: Find differences in locking between two smb servers <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
