<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>maildiracl: Manage access control lists</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manage access control lists">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="maildiracl (1) manual">
  <meta name="twitter:description" content="Manage access control lists">
  <meta name="twitter:image" content="https://www.carta.tech/images/courier-base-maildiracl-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/maildiracl.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="maildiracl (1) manual" />
  <meta property="og:description" content="Manage access control lists" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/courier-base-maildiracl-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">maildiracl<small> (1)</small></h1>
        <p class="lead">Manage access control lists</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/maildiracl.1.html">
      <span itemprop="name">maildiracl: Manage access control lists</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/courier-base/">
      <span itemprop="name">courier-base</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/maildiracl.1.html">
      <span itemprop="name">maildiracl: Manage access control lists</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>maildiracl</strong> {-reset} {<em>maildir</em>} <strong>maildiracl</strong> {-list} {<em>maildir</em>} {<em>INBOX[.folder]</em>} <strong>maildiracl</strong> {-set} {<em>maildir</em>} {<em>INBOX[.folder]</em>} {<em>[-]identifier</em>} {<em>[+/-]rights</em>} <strong>maildiracl</strong> {-delete} {<em>maildir</em>} {<em>INBOX[.folder]</em>} {<em>[-]identifier</em>} <strong>maildiracl</strong> {-compute} {<em>maildir</em>} {<em>INBOX[.folder]</em>} {<em>identifier</em>...}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>maildiracl</strong> manages &ldquo;access control lists&rdquo; (or ACLs) of the Courier IMAP server maildir folders. Access control lists are used primarily to provide fine-grained control for accessing virtual shared folders via IMAP.</p><p><strong>Note</strong></p><p>The Courier IMAP server server implements two types of shared folders: filesystem permission-based shared folders, as well as virtual shared folders based on IMAP access control lists. Use the <strong>maildiracl</strong> command to set up access control lists for virtual shared folders. Use the \m[blue]<strong></strong><a href="../man1/maildirmake.1.html"><strong>maildirmake</strong>(1)</a>\m[]\s-2\u[1]\d\s+2, command to implement shared folders based on filesystem permissions.</p><p>See the Courier IMAP server documentation for additional information on setting up virtual shared folders.</p><h3>ACL overview</h3>
<p>ACLs provide a fine-grained mechanism for controlling access to shared folders. ACLs may be used to specify, for example, that user1 may only open and read the messages in the folder; and user2 can not only do that, but also delete messages, and create subfolders.</p><p>Each folder maintains its own individual access control list, that specifies who can do what to the folder. An ACL is a list of &ldquo;identifier&rdquo; and &ldquo;rights&rdquo; pairs. Each &ldquo;identifier&rdquo; and &ldquo;rights&rdquo; pair means that an entity called &ldquo;identifier&rdquo; (using the UTF-8 character set) is allowed to do &ldquo;rights&rdquo; on this folder. &ldquo;rights&rdquo; consists of one or more letters, each letter signifies a particular action:</p><p>a</p><p><em>identifier</em> may modify this folder&apos;s ACLs.</p><p>c</p><p><em>identifier</em> may create subfolders of this folder (this includes renaming another folder as this folder&apos;s subfolders).</p><p>e</p><p><em>identifier</em> may remove deleted messages from this folder.</p><p>i</p><p><em>identifier</em> may add messages to this folder (either uploading them one by one, or copying messages from another folder).</p><p>l</p><p><em>identifier</em> may actually see that this folder exists. If <em>identifier</em> does not have the &ldquo;l&rdquo; right on this folder, the folder is effectively invisible to <em>identifier</em>.</p><p>r</p><p><em>identifier</em> may open this folder. Note that if <em>identifier</em> knows the name of this folder, it can open it even if <em>identifier</em> does not the &ldquo;l&rdquo; right on this folder.</p><p>s</p><p><em>identifier</em> may mark messages in this folder as seen, or unseen.</p><p>t</p><p><em>identifier</em> may mark messages in this folder as deleted, or undeleted.</p><p>w</p><p><em>identifier</em> may change other status flags of messages in this folder. May also add or remove custom keywords on individual messages.</p><p>x</p><p><em>identifier</em> may delete this folder (which includes renaming this folder as another mailbox&apos;s subfoler.</p><p><strong>Negative rights</strong></p><p>An ACL entry of &ldquo;-identifier&rdquo; and &ldquo;rights&rdquo; is called a &ldquo;negative right&rdquo;, which explicitly removes &ldquo;rights&rdquo; from &ldquo;identifier&rdquo;. More than one &ldquo;identifier&rdquo; is usually used to determine the actual rights someone has for the given folder. The actual access rights are determined by taking all rights from all applicable <em>identifier</em>, than subtracting any negative rights, as specified in the following section.</p><p><strong>Identifiers</strong></p><p>Access rights on a given folder are computed by obtained the rights on the following identifiers, then subtracting the negative rights on the same identifiers:</p><p>owner</p><p>The owner of the maildir containing this folder. The maildir&apos;s INBOX&apos;s ACL defaults to all rights for its owner. A new folder&apos;s ACL is the same as its parent&apos;s ACL. In all cases, trying to remove the &ldquo;a&rdquo; right from the owner (either directly or using a negative right) results in an error.</p><p>anyone</p><p>This identifier refers literally to every userid. The associated rights (or negative rights) are always used.</p><p>anonymous</p><p>This is a synonym from &ldquo;anyone&rdquo;.</p><p>user=<em>loginid</em></p><p>Rights (or negative rights) for IMAP account &ldquo;loginid&rdquo;.</p><p><strong>Note</strong></p><p>&ldquo;loginid&rdquo; is what&apos;s logged to syslog after a succesful login. In some situations &ldquo;loginid&rdquo; is not exactly the actual login ID used by the IMAP client.</p><p>group=<em>name</em></p><p>Rights (or negative rights) for account group &ldquo;name&rdquo;. Access rights are granted to an account group as a whole. The account options feature of the Courier Authentication Library specifies which account belongs to which account group. See courier-authlib&apos;s documentation for more information.</p><p>administrators</p><p>This is an alias for &ldquo;group=administrators&rdquo;. Accounts that are members of an account group called &ldquo;administrators&rdquo; are considered administrative accounts, and automatically receive all access rights on all accessible folders.</p><p>Consider the following access control list:</p>
<pre>
owner          aceilrstwx
anyone         lr
user=john      w
-user=mary     r
administrators aceilrstwx
</pre>
<p>This access control list specifies that the folder&apos;s owner has complete control over the mailbox (as well as the administrators, which have complete access to every folder); everyone else can see it and open it, except for &ldquo;mary&rdquo; who can see that the mailbox exists, but can&apos;t open it; additionally, &ldquo;john&rdquo; can change the status and keywords of individual messages (but not mark them as deleted/undeleted or seen/unseen, which requires additional rights).</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>maildiracl -reset </strong><strong></strong><em>maildir</em></p><p>This command resets access control lists in <em>maildir</em> which as a path to a maildir. Under certain conditions, the files where a folder&apos;s ACLs are saved may continue to exist after the folder is removed. The -reset options goes through <em>maildir</em> and removes all stale ACL files for removed folders.</p><p><strong>Note</strong></p><p>The Courier IMAP server normally performs this maintenance function automatically. It is not necessary to run this command under normal conditions.</p><p><strong>maildiracl -list</strong> <strong></strong><em>maildir</em><strong></strong> <strong></strong><em>folder</em><strong></strong></p><p>This command lists the access control lists set for <em>folder</em>. <em>folder</em> must be either &ldquo;INBOX&rdquo; or &ldquo;INBOX.folder.subfolder&rdquo;, which is the same naming convention for the Courier IMAP server. <strong>maildiracl -set</strong> <strong></strong><em>maildir</em><strong></strong> <strong></strong><em>folder</em><strong></strong> <strong></strong><em>identifier</em><strong></strong> <strong></strong><em>rights</em></p><p>Puts <em>identifier</em> (which may begin with a minus sign to specify a negative right) and <em>rights</em> in <em>folder</em>&apos;s access control list. Existing rights for <em>identifier</em> (or <em>identifier</em>) are replaced by <em>rights</em> unless &ldquo;rights&rdquo; begins with &ldquo;+&rdquo; or &ldquo;-&rdquo;, which modifies the existing rights by adding or removing from them accordingly. Some examples:</p>
<pre>
maildiracl -set /home/user1/Maildir INBOX.Sent user=john lr

maildiracl -set /home/user2/Maildir INBOX.Notes anyone -r

maildiracl -set /home/user3/Maildir INBOX.Private -user=tom +r
</pre>
<p><strong>Note</strong></p><p>Observe that the last command <em>revokes</em> the &ldquo;r&rdquo; right from &ldquo;tom&rdquo;, by adding it as a negative right.</p><p><strong>maildiracl -delete</strong> <strong></strong><em>maildir</em><strong></strong> <strong></strong><em>folder</em><strong></strong> <strong></strong><em>identifier</em></p><p>This command removes <em>identifier</em> from <em>folder</em>&apos;s access control list, if it exists. Use &ldquo;-<em>identifier</em>&rdquo; to remove negative rights. <strong>maildiracl -compute</strong> <strong></strong><em>maildir</em><strong></strong> <strong></strong><em>folder</em><strong></strong> [<strong></strong><em>identifier</em><strong>]+</strong></p><p>This command takes a list of one or more <em>identifier</em>s. All access rights for the <em>identifier</em>s are combined together, then any appropriate negative rights are removed, and the result is printed on standard output. Use the following procedure to compute access rights the same way as they are computed by the Courier IMAP server:</p>
<pre>
maildiracl -compute /home/tom46/Maildir INBOX.Sent owner user=tom46
</pre>
<p>This command computes access rights &ldquo;tom46&rdquo; has on his own folder.</p>
<pre>
maildiracl -compute /home/john34/Maildir INBOX.Public user=tom46
</pre>
<p>This command computes access rights &ldquo;tom46&rdquo; has on &ldquo;john34&rdquo;&apos;s folder.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IRREVOCABLE ACCESS RIGHTS</h2>
        <div class="sectioncontent">
<p>The owner of the mailbox must always have the &ldquo;a&rdquo; amd &ldquo;l&rdquo; access rights. The administrators group must always have all access rights to all folders. Attempts to set access control lists, that do not include these minimum access rights, will be rejected.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>All identifiers are specified using the UTF-8 character set.</p><p>All non-Latin letters in folder names are specified using the modified-UTF7 coding as used in IMAP.</p><p>This implementation of access control lists is based on version 2 (or &ldquo;ACL2&rdquo;) of IMAP access control lists, which is a work-in-progress. The existing IMAP ACL, \m[blue]<strong>RFC 2086</strong>\m[]\s-2\u[2]\d\s+2 is transparently implemented inside the ACL2 model.</p><p>If history&apos;s of any guidance, ACL2 is subject to change at any time. Be sure to check the release notes when upgrading to a newer version of this software. The &ldquo;ACL overview&rdquo; portion of this manual page is a <em>very</em> brief summary of ACL2, which leaves out optional parts of ACL2 that are not implemented.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO maildiracl&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong></strong><a href="../man1/maildirmake.1.html"><strong>maildirmake</strong>(1)</a>\m[]\s-2\u[1]\d\s+2, \m[blue]<strong></strong><a href="../man1/maildirkw.1.html"><strong>maildirkw</strong>(1)</a>\m[]\s-2\u[3]\d\s+2,</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Sam Varshavchik</strong></p><p>Author</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man1/maildirmake.1.html"><strong>maildirmake</strong>(1)</a></p><p>[set $man.base.url.for.relative.links]/maildirmake.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>RFC 2086</p><p>http://www.rfc-editor.org/rfc/rfc2086.txt</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p><a href="../man1/maildirkw.1.html"><strong>maildirkw</strong>(1)</a></p><p>[set $man.base.url.for.relative.links]/maildirkw.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="maildir2mbox.1.html"><span aria-hidden="true">&larr;</span> maildir2mbox.1: Move mail from a maildir to an mbox</a></li>
   <li class="next"><a href="maildirkw.1.html">maildirkw.1: Set maildir message keywords <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
