<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>imake: C preprocessor interface to the make utility</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="C preprocessor interface to the make utility">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="imake (1) manual">
  <meta name="twitter:description" content="C preprocessor interface to the make utility">
  <meta name="twitter:image" content="https://www.carta.tech/images/xutils-dev-imake-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/imake.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="imake (1) manual" />
  <meta property="og:description" content="C preprocessor interface to the make utility" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xutils-dev-imake-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">imake<small> (1)</small></h1>
        <p class="lead">C preprocessor interface to the make utility</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/imake.1.html">
      <span itemprop="name">imake: C preprocessor interface to the make utility</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xutils-dev/">
      <span itemprop="name">xutils-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/imake.1.html">
      <span itemprop="name">imake: C preprocessor interface to the make utility</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>imake</strong> [ <strong>-D</strong><em>define</em> ] [ <strong>-I</strong><em>dir</em> ] [ <strong>-U</strong><em>define</em> ] [ <strong>-T</strong><em>template</em> ] [ <strong>-f</strong> <em>filename</em> ] [ <strong>-C</strong> <em>filename</em> ] [ <strong>-s</strong> <em>filename</em> ] [ <strong>-e</strong> ] [ <strong>-v</strong> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Imake</em> is used to generate <em>Makefiles</em> from a template, a set of <em>cpp</em> macro functions, and a per-directory input file called an <em>Imakefile</em>.  This allows machine dependencies (such as compiler options, alternate command names, and special <em>make</em> rules) to be kept separate from the descriptions of the various items to be built.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The following command line options may be passed to <em>imake</em>:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-D</strong><em>define</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option is passed directly to <em>cpp</em>.  It is typically used to set directory-specific variables.  For example, the X Window System used this flag to set <em>TOPDIR</em> to the name of the directory containing the top of the core distribution and <em>CURDIR</em> to the name of the current directory, relative to the top.</p>
  </dd>
  <dt>
    <p><strong>-I</strong><em>directory</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option is passed directly to <em>cpp</em>.  It is typically used to indicate the directory in which the <em>imake</em> template and configuration files may be found.</p>
  </dd>
  <dt>
    <p><strong>-U</strong><em>define</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option is passed directly to <em>cpp</em>.  It is typically used to unset variables when debugging <em>imake</em> configuration files.</p>
  </dd>
  <dt>
    <p><strong>-T</strong><em>template</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option specifies the name of the master template file (which is usually located in the directory specified with <em>-I</em>) used by <em>cpp</em>. The default is <em>Imake.tmpl</em>.</p>
  </dd>
  <dt>
    <p><strong>-f </strong><em>filename</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option specifies the name of the per-directory input file.  The default is <em>Imakefile</em>.</p>
  </dd>
  <dt>
    <p><strong>-C </strong><em>filename</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option specifies the name of the .c file that is constructed in the current directory.  The default is <em>Imakefile.c</em>.</p>
  </dd>
  <dt>
    <p><strong>-s </strong><em>filename</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option specifies the name of the <em>make</em> description file to be generated but <em>make</em> should not be invoked. If the <em>filename</em> is a dash (-), the output is written to <em>stdout</em>.  The default is to generate, but not execute, a <em>Makefile</em>.</p>
  </dd>
  <dt>
    <p><strong>-e</strong></p>
  </dt>
  <dd>
    <p>This option indicates the <em>imake</em> should execute the generated <em>Makefile</em>.  The default is to leave this to the user.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>This option indicates that <em>imake</em> should print the <em>cpp</em> command line that it is using to generate the <em>Makefile</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOW IT WORKS</h2>
        <div class="sectioncontent">
<p><em>Imake</em> invokes <em>cpp</em> with any <em>-I</em> or <em>-D</em> flags passed on the command line and passes the name of a file containing the following 3 lines:</p>
<pre>
		#define IMAKE_TEMPLATE "Imake.tmpl"
		#define INCLUDE_IMAKEFILE &lt;Imakefile&gt;
		#include IMAKE_TEMPLATE

</pre>
<p>where <em>Imake.tmpl</em> and <em>Imakefile</em> may be overridden by the <em>-T</em> and <em>-f</em> command options, respectively.</p><p>The IMAKE_TEMPLATE typically reads in a file containing machine-dependent parameters (specified as <em>cpp</em> symbols), a site-specific parameters file, a file defining variables, a file containing <em>cpp</em> macro functions for generating <em>make</em> rules, and finally the <em>Imakefile</em> (specified by INCLUDE_IMAKEFILE) in the current directory.  The <em>Imakefile</em> uses the macro functions to indicate what targets should be built; <em>imake</em> takes care of generating the appropriate rules.</p><p><em>Imake</em> configuration files contain two types of variables, imake variables and make variables.  The imake variables are interpreted by cpp when <em>imake</em> is run.  By convention they are mixed case.  The make variables are written into the <em>Makefile</em> for later interpretation by <em>make.</em> By convention make variables are upper case.</p><p>The rules file (usually named <em>Imake.rules</em> in the configuration directory) contains a variety of <em>cpp</em> macro functions that are configured according to the current platform.  <em>Imake</em> replaces any occurrences of the string ``@@'' with a newline to allow macros that generate more than one line of <em>make</em> rules. For example, the macro</p><p> #define      program_target(program, objlist)        @@&#92; program:        objlist         @@&#92;</p>
<pre>
        $(CC)  -o  $@  objlist  $(LDFLAGS)
</pre>
<p>when called with <em>program_target(foo, foo1.o  foo2.o)</em> will expand to</p><p>foo:    foo1.o  foo2.o</p>
<pre>
        $(CC)  -o  $@  foo1.o  foo2.o  $(LDFLAGS)
</pre>
<p><em>Imake</em> also replaces any occurrences of the word ``XCOMM'' with the character ``#'' to permit placing comments in the Makefile without causing ``invalid directive'' errors from the preprocessor.</p><p>Some complex <em>imake</em> macros require generated <em>make</em> variables local to each invocation of the macro, often because their value depends on parameters passed to the macro. Such variables can be created by using an <em>imake</em> variable of the form <strong>XVARdef</strong><em>n</em>, where <em>n</em> is a single digit. A unique <em>make</em> variable will be substituted.  Later occurrences of the variable <strong>XVARuse</strong><em>n</em> will be replaced by the variable created by the corresponding <strong>XVARdef</strong><em>n</em>.</p><p>On systems whose <em>cpp</em> reduces multiple tabs and spaces to a single space, <em>imake</em> attempts to put back any necessary tabs (<em>make</em> is very picky about the difference between tabs and spaces).  For this reason, colons (:) in command lines must be preceded by a backslash (&#92;).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USE WITH THE X WINDOW SYSTEM</h2>
        <div class="sectioncontent">
<p>The X Window System used <em>imake</em> extensively up through the X11R6.9 release, for both full builds within the source tree and external software. X has since moved to GNU autoconf and automake for its build system in X11R7.0 and later releases, but still maintains imake for building existing external software programs that have not yet converted.</p><p>As mentioned above, two special variables, <em>TOPDIR</em> and <em>CURDIR,</em> are set to make referencing files using relative path names easier.  For example, the following command is generated automatically to build the <em>Makefile</em> in the directory <em>lib/X/</em> (relative to the top of the sources):</p><p>	%  ../.././config/imake  -I../.././config  &#92; 		-DTOPDIR=../../.   -DCURDIR=./lib/X When building X programs outside the source tree, a special symbol <em>UseInstalled</em> is defined and <em>TOPDIR</em> and <em>CURDIR</em> are omitted.  If the configuration files have been properly installed, the script <a href="../man1/xmkmf.1.html"><strong>xmkmf</strong>(1)</a> may be used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT FILES</h2>
        <div class="sectioncontent">
<p>Here is a summary of the files read by <em>imake</em> as used by X. The indentation shows what files include what other files.</p>
<pre>
    Imake.tmpl  generic variables
        site.def        site-specific, BeforeVendorCF defined
        *.cf    machine-specific
            *Lib.rules  shared library rules
        site.def        site-specific, AfterVendorCF defined
        Imake.rules     rules
        Project.tmpl    X-specific variables
            *Lib.tmpl   shared library variables
        Imakefile
            Library.tmpl        library rules
            Server.tmpl server rules
            Threads.tmpl        multi-threaded rules
</pre>
<p>Note that <em>site.def</em> gets included twice, once before the <em>*.cf</em> file and once after.  Although most site customizations should be specified after the <em>*.cf</em> file, some, such as the choice of compiler, need to be specified before, because other variable settings may depend on them.</p><p>The first time <em>site.def</em> is included, the variable BeforeVendorCF is defined, and the second time, the variable AfterVendorCF is defined.  All code in <em>site.def</em> should be inside an #ifdef for one of these symbols.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>Imakefile.c</p>
  </dt>
  <dd>
    <p>temporary input file for cpp</p>
  </dd>
  <dt>
    <p>/tmp/Imf.XXXXXX</p>
  </dt>
  <dd>
    <p>temporary Makefile for -s</p>
  </dd>
  <dt>
    <p>/tmp/IIf.XXXXXX</p>
  </dt>
  <dd>
    <p>temporary Imakefile if specified Imakefile uses # comments</p>
  </dd>
  <dt>
    <p>/usr/bin/cpp</p>
  </dt>
  <dd>
    <p>default C preprocessor</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO imake&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/make.1.html"><strong>make</strong>(1)</a>, <a href="../man1/xmkmf.1.html"><strong>xmkmf</strong>(1)</a></p>
<dl class='dl-vertical'>
  <dt>
    <p>Paul DuBois</p>
  </dt>
  <dd>
    <p>imake-Related Software and Documentation, http://www.snake.net/software/imake-stuff/</p>
  </dd>
  <dt>
    <p>Paul DuBois</p>
  </dt>
  <dd>
    <p>Software Portability with imake, Second Edition, O'Reilly & Associates, 1996.</p>
  </dd>
  <dt>
    <p>S. I. Feldman,</p>
  </dt>
  <dd>
    <p>Make &ndash; A Program for Maintaining Computer Programs</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p>The following environment variables may be set, however their use is not recommended as they introduce dependencies that are not readily apparent when <em>imake</em> is run:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>IMAKEINCLUDE</strong></p>
  </dt>
  <dd>
    <p>If defined, this specifies a ``-I'' include argument to pass to the C preprocessor.  E.g., ``-I/usr/X11/config''.</p>
  </dd>
  <dt>
    <p><strong>IMAKECPP</strong></p>
  </dt>
  <dd>
    <p>If defined, this should be a valid path to a preprocessor program. E.g., ``/usr/local/cpp''. By default, <em>imake</em> will use cc -E or /usr/bin/cpp, depending on the OS specific configuration.</p>
  </dd>
  <dt>
    <p><strong>IMAKEMAKE</strong></p>
  </dt>
  <dd>
    <p>If defined, this should be a valid path to a make program, such as ``/usr/local/make''. By default, <em>imake</em> will use whatever <em>make</em> program is found using <a href="../man3/execvp.3.html"><strong>execvp</strong>(3)</a>.</em> This variable is only used if the ``-e'' option is specified.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Todd Brunhoff, Tektronix and MIT Project Athena; Jim Fulton, MIT X Consortium</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="imagination.1.html"><span aria-hidden="true">&larr;</span> imagination.1: Dvd slide show maker</a></li>
   <li class="next"><a href="imapcopy.1.html">imapcopy.1: Imap backup, copy and migration tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
