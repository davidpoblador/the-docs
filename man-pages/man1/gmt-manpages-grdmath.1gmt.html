<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>grdmath: Reverse polish notation calculator for grd files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Reverse polish notation calculator for grd files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="grdmath (1gmt) manual">
  <meta name="twitter:description" content="Reverse polish notation calculator for grd files">
  <meta name="twitter:image" content="https://www.carta.tech/images/gmt-manpages-grdmath-1gmt.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1gmt/gmt-manpages-grdmath.1gmt.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="grdmath (1gmt) manual" />
  <meta property="og:description" content="Reverse polish notation calculator for grd files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gmt-manpages-grdmath-1gmt.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">grdmath<small> (1gmt)</small></h1>
        <p class="lead">Reverse polish notation calculator for grd files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/grdmath.1gmt.html">
      <span itemprop="name">grdmath: Reverse polish notation calculator for grd files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gmt-manpages/">
      <span itemprop="name">gmt-manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/grdmath.1gmt.html">
      <span itemprop="name">grdmath: Reverse polish notation calculator for grd files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>grdmath</strong> [ <strong>-F</strong> ] [ <strong>-I</strong><em>xinc</em>[<strong>m|c</strong>][/<em>yinc</em>[<strong>m|c</strong>]] <strong>-R</strong><em>west/east/south/north</em> <strong>-V</strong>] <em>operand</em> [ <em>operand</em> ] <strong>OPERATOR</strong> [ <em>operand</em> ] <strong>OPERATOR</strong> ... <strong>=</strong> <em>outgrdfile</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>grdmath</strong> will perform operations like add, subtract, multiply, and divide on one or more grd files or constants using Reverse Polish Notation (RPN) syntax (e.g., Hewlett-Packard calculator-style). Arbitrarily complicated expressions may therefore be evaluated; the final result is written to an output grd file. When two grd files are on the stack, each element in file A is modified by the corresponding element in file B. However, some operators only require one operand (see below). If no grdfiles are used in the expression then options <strong>-R, -I</strong> must be set (and optionally <strong>-F</strong>).</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>operand</em></p>
  </dt>
  <dd>
    <p>If <em>operand</em> can be opened as a file it will be read as a grd file. If not a file, it is interpreted as a numerical constant or a special symbol (see below).</p>
  </dd>
  <dt>
    <p><em>outgrdfile</em> is a 2-D grd file that will hold the final result.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>OPERATORS</strong></p>
  </dt>
  <dd>
    <p>Choose among the following operators:</p><p>Operator n_args Returns</p><p><strong>ABS</strong> 1 abs (A).</p><p><strong>ACOS</strong> 1 acos (A).</p><p><strong>ACOSH</strong> 1 acosh (A).</p><p><strong>ADD(+)</strong> 2 A + B.</p><p><strong>AND</strong> 2 NaN if A and B == NaN, B if A == NaN, else A.</p><p><strong>ASIN</strong> 1 asin (A).</p><p><strong>ASINH</strong> 1 asinh (A).</p><p><strong>ATAN</strong> 1 atan (A).</p><p><strong>ATAN2</strong> 2 atan2 (A, B).</p><p><strong>ATANH</strong> 1 atanh (A).</p><p><strong>BEI</strong> 1 bei (A).</p><p><strong>BER</strong> 1 ber (A).</p><p><strong>CDIST</strong> 2 Cartesian distance between grid nodes and stack x,y.</p><p><strong>CEIL</strong> 1 ceil (A) (smallest integer &gt;= A).</p><p><strong>CHIDIST</strong> 2 Chi-squared-distribution P(chi2,nu), with chi2 = A and nu = B.</p><p><strong>COS</strong> 1 cos (A) (A in radians).</p><p><strong>COSD</strong> 1 cos (A) (A in degrees).</p><p><strong>COSH</strong> 1 cosh (A).</p><p><strong>CURV</strong> 1 Curvature of A (Laplacian).</p><p><strong>D2DX2</strong> 1 d^2(A)/dx^2 2nd derivative.</p><p><strong>D2DY2</strong> 1 d^2(A)/dy^2 2nd derivative.</p><p><strong>D2R</strong> 1 Converts Degrees to Radians.</p><p><strong>DDX</strong> 1 d(A)/dx 1st derivative.</p><p><strong>DDY</strong> 1 d(A)/dy 1st derivative.</p><p><strong>DILOG</strong> 1 Dilog (A).</p><p><strong>DIV(/)</strong> 2 A / B.</p><p><strong>DUP</strong> 1 Places duplicate of A on the stack.</p><p><strong>ERF</strong> 1 Error function of A.</p><p><strong>ERFC</strong> 1 Complementory Error function of A.</p><p><strong>ERFINV</strong> 1 Inverse error function of A.</p><p><strong>EQ</strong> 2 1 if A == B, else 0.</p><p><strong>EXCH</strong> 2 Exchanges A and B on the stack.</p><p><strong>EXP</strong> 1 exp (A).</p><p><strong>EXTREMA</strong> 1 Local Extrema: +2/-2 is max/min, +1/-1 is saddle with max/min in x, 0 elsewhere.</p><p><strong>FDIST</strong> 4 F-dist Q(var1,var2,nu1,nu2), with var1 = A, var2 = B, nu1 = C, and nu2 = D.</p><p><strong>FLOOR</strong> 1 floor (A) (greatest integer &lt;= A).</p><p><strong>FMOD</strong> 2 A % B (remainder).</p><p><strong>GDIST</strong> 2 Great distance (in degrees) between grid nodes and stack lon,lat.</p><p><strong>GE</strong> 2 1 if A &gt;= B, else 0.</p><p><strong>GT</strong> 2 1 if A &gt; B, else 0.</p><p><strong>HYPOT</strong> 2 hypot (A, B).</p><p><strong>I0</strong> 1 Modified Bessel function of A (1st kind, order 0).</p><p><strong>I1</strong> 1 Modified Bessel function of A (1st kind, order 1).</p><p><strong>IN</strong> 2 Modified Bessel function of A (1st kind, order B).</p><p><strong>INV</strong> 1 1 / A.</p><p><strong>ISNAN</strong> 1 1 if A == NaN, else 0.</p><p><strong>J0</strong> 1 Bessel function of A (1st kind, order 0).</p><p><strong>J1</strong> 1 Bessel function of A (1st kind, order 1).</p><p><strong>JN</strong> 2 Bessel function of A (1st kind, order B).</p><p><strong>K0</strong> 1 Modified Kelvin function of A (2nd kind, order 0).</p><p><strong>K1</strong> 1 Modified Bessel function of A (2nd kind, order 1).</p><p><strong>KN</strong> 2 Modified Bessel function of A (2nd kind, order B).</p><p><strong>KEI</strong> 1 kei (A).</p><p><strong>KER</strong> 1 ker (A).</p><p><strong>LE</strong> 2 1 if A &lt;= B, else 0.</p><p><strong>LMSSCL</strong> 1 LMS scale estimate (LMS STD) of A.</p><p><strong>LOG</strong> 1 log (A) (natural log).</p><p><strong>LOG10</strong> 1 log10 (A).</p><p><strong>LOG1P</strong> 1 log (1+A) (accurate for small A).</p><p><strong>LOWER</strong> 1 The lowest (minimum) value of A.</p><p><strong>LT</strong> 2 1 if A &lt; B, else 0.</p><p><strong>MAD</strong> 1 Median Absolute Deviation (L1 STD) of A.</p><p><strong>MAX</strong> 2 Maximum of A and B.</p><p><strong>MEAN</strong> 1 Mean value of A.</p><p><strong>MED</strong> 1 Median value of A.</p><p><strong>MIN</strong> 2 Minimum of A and B.</p><p><strong>MODE</strong> 1 Mode value (LMS) of A.</p><p><strong>MUL(x)</strong> 2 A * B.</p><p><strong>NAN</strong> 2 NaN if A == B, else A.</p><p><strong>NEG</strong> 1 -A.</p><p><strong>NRAND</strong> 2 Normal, random values with mean A and std. deviation B.</p><p><strong>OR</strong> 2 NaN if A or B == NaN, else A.</p><p><strong>PLM</strong> 3 Associated Legendre polynomial P(-1&lt;A&lt;+1) degree B order C.</p><p><strong>POP</strong> 1 Delete top element from the stack.</p><p><strong>POW(^)</strong> 2 A ^ B.</p><p><strong>R2</strong> 2 R2 = A^2 + B^2.</p><p><strong>R2D</strong> 1 Convert Radians to Degrees.</p><p><strong>RAND</strong> 2 Uniform random values between A and B.</p><p><strong>RINT</strong> 1 rint (A) (nearest integer).</p><p><strong>SIGN</strong> 1 sign (+1 or -1) of A.</p><p><strong>SIN</strong> 1 sin (A) (A in radians).</p><p><strong>SIND</strong> 1 sin (A) (A in degrees).</p><p><strong>SINH</strong> 1 sinh (A).</p><p><strong>SQRT</strong> 1 sqrt (A).</p><p><strong>STD</strong> 1 Standard deviation of A.</p><p><strong>STEP</strong> 1 Heaviside step function: H(A).</p><p><strong>STEPX</strong> 1 Heaviside step function in x: H(x-A).</p><p><strong>STEPY</strong> 1 Heaviside step function in y: H(y-A).</p><p><strong>SUB(-)</strong> 2 A - B.</p><p><strong>TAN</strong> 1 tan (A) (A in radians).</p><p><strong>TAND</strong> 1 tan (A) (A in degrees).</p><p><strong>TANH</strong> 1 tanh (A).</p><p><strong>TDIST</strong> 2 Student's t-distribution A(t,nu) = 1 - 2p, with t = A, and nu = B.'</p><p><strong>UPPER</strong> 1 The highest (maximum) value of A.</p><p><strong>XOR</strong> 2 B if A == NaN, else A.</p><p><strong>Y0</strong> 1 Bessel function of A (2nd kind, order 0).</p><p><strong>Y1</strong> 1 Bessel function of A (2nd kind, order 1).</p><p><strong>YLM</strong> 2 Re and Im normalized surface harmonics (degree A, order B).</p><p><strong>YN</strong> 2 Bessel function of A (2nd kind, order B).</p>
  </dd>
  <dt>
    <p><strong>SYMBOLS</strong></p>
  </dt>
  <dd>
    <p>The following symbols have special meaning:</p><p><strong>PI</strong> 3.1415926...</p><p><strong>E </strong> 2.7182818...</p><p><strong>X </strong> Grid with x-coordinates</p><p><strong>Y </strong> Grid with y-coordinates</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-I</strong></p>
  </dt>
  <dd>
    <p><em>x_inc</em> [and optionally <em>y_inc</em>] is the grid spacing. Append <strong>m</strong> to indicate minutes or <strong>c</strong> to indicate seconds.</p>
  </dd>
  <dt>
    <p><strong>-R</strong></p>
  </dt>
  <dd>
    <p><em>west, east, south,</em> and <em>north</em> specify the Region of interest. To specify boundaries in degrees and minutes [and seconds], use the dd:mm[:ss] format. Append <strong>r</strong> if lower left and upper right map coordinates are given instead of wesn.</p>
  </dd>
  <dt>
    <p><strong>-F</strong></p>
  </dt>
  <dd>
    <p>Select pixel registration (used with <strong>-R, -I</strong>). [Default is grid registration].</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Selects verbose mode, which will send progress reports to stderr [Default runs "silently"].</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BEWARE</h2>
        <div class="sectioncontent">
<p>The operator <strong>GDIST</strong> calculates spherical distances bewteen the (lon, lat) point on the stack and all node positions in the grid. The grid domain and the (lon, lat) point are expected to be in degrees. The operator <strong>YLM</strong> calculates the fully normalized spherical harmonics for degree L and order M for all positions in the grid, which is assumed to be in degrees. <strong>YLM</strong> returns two grids, the Real (cosine) and Imaginary (sine) component of the complex spherical harmonic. Use the <strong>POP</strong> operator (and <strong>EXCH</strong>) to get rid of one of them. The operator <strong>PLM</strong> calculates the associated Legendre polynomial of degree L and order M, and its argument is the cosine of the colatitude which must satisfy -1 &lt;= x &lt;= +1. Unlike <strong>YLM</strong>, <strong>PLM</strong> is not normalized.</p><p>All the derivatives are based on central finite differences, with natural boundary conditions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To take log10 of the average of 2 files, use</p>
<pre>
        grdmath file1.grd file2.grd <strong>ADD</strong> 0.5 <strong>MUL LOG10 =</strong> file3.grd
</pre>
<p>Given the file ages.grd, which holds seafloor ages in m.y., use the relation depth(in m) = 2500 + 350 * sqrt (age) to estimate normal seafloor depths:</p>
<pre>
        grdmath ages.grd <strong>SQRT</strong> 350 <strong>MUL </strong>2500 <strong>ADD =</strong> depths.grd
</pre>
<p>To find the angle a (in degrees) of the largest principal stress from the stress tensor given by the three files s_xx.grd s_yy.grd, and s_xy.grd from the relation tan (2*a) = 2 * s_xy / (s_xx - s_yy), try</p>
<pre>
        grdmath 2 s_xy.grd <strong>MUL</strong> s_xx.grd s_yy.grd <strong>SUB DIV ATAN2</strong> 2 <strong>DIV =</strong> direction.grd
</pre>
<p>To calculate the fully normalized spherical harmonic of degree 8 and order 4 on a 1 by 1 degree world map, using the real amplitude 0.4 and the imaginary amplitude 1.1, try</p>
<pre>
        grdmath <strong>-R</strong>0/360/-90/90 <strong>-I</strong>1 8 4 <strong>YML</strong> 1.1 <strong>MUL EXCH</strong> 0.4 <strong>MUL ADD</strong> = harm.grd
</pre>
<p>To extract the locations of local maxima that exceed 100 mGal in the file faa.grd, try</p>
<pre>
        grdmath faa.grd <strong>DUP EXTREMA</strong> 2 <strong>EQ MUL DUP</strong> 100 <strong>GT NAN MUL</strong> = z.grd
</pre>

<pre>
        grd2xyz z.grd <strong>-S</strong> &gt; max.xyz
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Files that has the same name as some operators, e.g., ADD, SIGN, =, etc. cannot be read and must not be present in the current directory. Piping of files are not allowed. The stack limit is hard-wired to 50. All functions expecting a positive radius (e.g., log, kei, etc.) are passed the absolute value of their argument.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REFERENCES</h2>
        <div class="sectioncontent">
<p>Abramowitz, M., and I. A. Stegun, 1964, <em>Handbook of Mathematical</em> Functions, Applied Mathematics Series, vol. 55, Dover, New York.</p><p>Press, W. H., S. A. Teukolsky, W. T. Vetterling, B. P. Flannery, 1992, <em>Numerical Recipes</em>, 2nd edition, Cambridge Univ., New York.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO grdmath&hellip;</h2>
        <div class="sectioncontent">
<p><em>gmt</em>(1gmt), <em>gmtmath</em>(1gmt), <em>grd2xyz</em>(1gmt), <em>grdedit</em>(1gmt), <em>grdinfo</em>(1gmt), <em>xyz2grd</em>(1gmt)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gmt-grdmath.1gmt.html"><span aria-hidden="true">&larr;</span> grdmath.1gmt: Reverse polish notation calculator for grid files</a></li>
   <li class="next"><a href="gmt-grdpaste.1gmt.html">grdpaste.1gmt: Paste together two .grd files along a common edge. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
