<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rpost: Post an article to an nntp news server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Post an article to an nntp news server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="rpost (1) manual">
  <meta name="twitter:description" content="Post an article to an nntp news server">
  <meta name="twitter:image" content="https://www.carta.tech/images/suck-rpost-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/rpost.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="rpost (1) manual" />
  <meta property="og:description" content="Post an article to an nntp news server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/suck-rpost-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">rpost<small> (1)</small></h1>
        <p class="lead">Post an article to an nntp news server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/rpost.1.html">
      <span itemprop="name">rpost: Post an article to an nntp news server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/suck/">
      <span itemprop="name">suck</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/rpost.1.html">
      <span itemprop="name">rpost: Post an article to an nntp news server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><em>rpost</em> [</p><p>hostname ] [ <strong>@filename</strong> ] [ <strong>-s</strong><em>|</em><strong>-S</strong> filename ] [ <strong>-e</strong><em>|</em><strong>-E</strong> filename ] [ <strong>-b</strong> batchfile ] [ <strong>-r</strong> rnews_file rnews_path ] [ <strong>-p</strong> prefix ] [ <strong>-Q</strong> ] [ <strong>-d</strong> ] [ <strong>-U</strong> userid ] [ <strong>-P</strong> password ] [ <strong>-M</strong> ] [ <strong>-N</strong> port_number ] [ <strong>-l</strong> phrase_file ] [ <strong>-D</strong> ] [ <strong>-T</strong> timeout ] [ <strong>-u</strong> ] [ <strong>-n</strong> ]</p><p>[ <strong>-F</strong> perl_file ] [ <strong>-i</strong> ] [ <strong>-z</strong> ] [ <strong>-f</strong> filter $$o=&lt;outfile&gt; filter_arg1 ... ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Rpost</em> will post one or more articles, specified by <em>hostname.</em> If hostname is not specified, rpost will use the environment variable <strong>NNTPSERVER.</strong> The hostname may optionally include the port number, in the form <strong>Host:Port</strong> If this form is used, any port number specified via the -N option will be ignored.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Generic Options</h2>
        <div class="sectioncontent">
<p><strong>\@filename</strong></p><p>This option tells rpost to read other options from a file in addition to the command line.</p><p><strong>-D</strong> This option tells rpost to log various debugging messages to "debug.suck", primarily for use by the developer.</p><p><strong>-e</strong><em>|</em><strong>-E</strong> filename</p><p>These options will send all error messages (normally displayed on stderr), to an alternate file.  The lower case version, -e, will send the error messages to the compiled-in default defined in suck_config.h.  The default is suck.errlog. The upper case version, -E, requires the filename parameter.  All error messages will then be sent to this file.</p><p><strong>-i</strong></p><p>This option tells rpost to ignore the 201 (no posting allowed) from the welcoming message and to try and post anyway.   Some news servers (inn-2.3.1) send 201 no posting allowed when they are using the AUTHINFO commands to verify permission to post.</p><p><strong>-l</strong> phrase_file</p><p>This option tells rpost to load in an alternate phrase file, instead of using the built-in messages.  This allows you to have rpost print phrases in another language, or to allow you to customize the messages without re-building. See the "FOREIGN LANGUAGE PHRASES" in suck.1 for more details.</p><p><strong>-M</strong></p><p>This option tells rpost to send the "mode reader" command to the remote server.  If you get an invalid command message from rpost immediately after the welcome announcement, then try this option.</p><p><strong>-n</strong></p><p>This option tells rpost to show the name of the file as it is being uploaded.</p><p><strong>-N</strong> port_number</p><p>This option tells rpost to use an alternate NNRP port number when connecting to the host, instead of the default port number, 119.</p><p><strong>-s</strong><em>|</em><strong>-S</strong> filename</p><p>These options will send all status messages (normally displayed on stdout), to an alternate file.  The lower case version, -s, will send the status messages to the compiled-in default defined in suck_config.h.  The default is /dev/null, so no status messages will be displayed.  The upper case version, -S, requires the filename parameter.  All status messages will then be sent to this file.</p><p><strong>-T</strong> This option overrides the compiled-in TIMEOUT value. This is how long rpost waits for data from the remote host before timing out and aborting.</p><p><strong>-u</strong> This option tells rpost to send the AUTHINFO USER command immediately upon connect to the remote server, rather than wait for a request for authorization.  You must supply the -U and -P options when you use this option.</p><p><strong>-U</strong> userid <strong>-P</strong> password</p><p>These two options let you specify a userid and password, if your NNTP server requires them.</p><p><strong>-Q</strong></p><p>This option allows you to specify the userid and password via the environment variables "NNTP_USER" and "NNTP_PASS" instead of on the command line.  This prevents a potential security issue where someone doing a ps command can see your login and password.</p><p><strong>-z</strong> This option tells rpost to use SSL to communicate with the remote hosts, if SSL was compiled into rpost.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STDIN MODE</h2>
        <div class="sectioncontent">
<p>rpost</p><p>rpost hostname</p><p>rpost reads one article from stdin and sends it to the NNTP server. The article must have a header of at least two lines, namely Newsgroups: and Subject: and a body (the article). Header and body have to be separated by a newline.  Rpost does not change the article in any way.</p><p>Rpost uses the POST command to post your article, just like any standard newsreader.  This is handy when using SLIP and PPP, since most providers do not allow any other method to post articles (such as nntpsend or innxmit).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BATCH MODE</h2>
        <div class="sectioncontent">
<p><em>rpost</em></p><p>hostname <strong>-b</strong> batchfile <strong>-p</strong> prefix <strong>-d</strong></p><p>This batch mode allows you to give rpost a list of articles, and have them all posted.</p><p>-b batchfile</p><p>A listing of the articles to be posted.  This parameter is REQUIRED. This file contains one article per line, with the line being the path to the file containing the article. For example:</p><p>-b /usr/spool/news/out.going/pixi</p><p>IF there are any problems uploading a specific article, a "failed" file will be created.  It will be called "batchfile".fail, and contain the line from this batchfile for the article(s) that did not successfully upload. This file can be used to re-run the failed messages through rpost.  NOTE: duplicate articles are NOT considered an error for the fail file.</p><p>-d</p><p>If the upload of articles is successful, this option will cause rpost to  delete the batchfile named in the -b option.</p><p>-p prefix</p><p>If the batchfile does not contain a full path, but rather a partial path, this parameter must be specified.  This is useful when the batch file is generated by another program. For example, Inn lists the path in the out.going file relative to its base directory /usr/spool/news.  In that case just use:</p><p> -p /usr/spool/news</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RNEWS MODE</h2>
        <div class="sectioncontent">
<p><em>rpost</em></p><p>hostname <strong>-r</strong> rnews_file rnews_path</p><p>This option allows you to use rnews generated file(s) to post.  It requires two parameters.</p><p>rnews_file - this is the base name for the rnews files.  If you have your rnews file(s) called batch1, batch2, etc., then this argument would be "batch".</p><p>rnews_path - this is the path to the location of the rnews files.</p><p>-r batch /usr/tmp/rnews</p><p>-d</p><p>If the upload of all the articles from any of the rnews files is successful, then this option will cause rpost to delete that particular rnews file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILTER MODES</h2>
        <div class="sectioncontent">
<p>-f filter $$o=&lt;outfile&gt; filter_arg1 filter_arg2 ...</p><p>In many cases, each article must be massaged before the remote NNTP will accept it.  This option, and the embedded perl filter option below, lets you do that.  These filters do not work in STDIN mode, but in the batch and rnews modes from above. Note that the -f .... option must be the LAST option, as everything that follows it is passed to the filter, except as noted below. There are three required parameters with this:</p><p>$$o=&lt;outfile&gt;	- &lt;outfile&gt; is the name of the file produced by your filter that will get uploaded to the remote NNTP server. THIS IS NOT passed to your filter program.  This can be specified anywhere on the command line AFTER the -f filter argument, either before the filter name, or after it.</p><p>filter - name of the program to call.  Whatever follows filter, EXCEPT for the $$o, are arguments passed to the filter.</p><p>arg1 - The first argument to your filter program/script.  It most likely will be $$i, which rpost fills in with the name of the article that needs to be cleaned up.</p><p>arg2 ... - any additional args needed can be specified.</p><p>Let's clarify this a bit with an example.  Some NNTP servers don't like to receive articles with the NNTP-Posting-Host filled in. Create a short shell script to delete this from a file:</p><p>-myscr--------------------------------------------</p><p>#!/bin/sh</p><p>sed -e "/^NNTP-Posting-Host/d" $1 &gt; $2</p><p>-end myscr----------------------------------------</p><p>Then call rpost like this:</p><p>rpost localhost -b /usr/spool/news/out.going/pixi -f myscr &#92;$&#92;$o=/tmp/FILTERED_MSG &#92;$&#92;$i /tmp/FILTERED_MSG</p><p>Then, before each article is uploaded, myscr is called like such:</p><p>myscr infilename /tmp/FILTERED_MSG</p><p>After myscr has finished, rpost uploads the cleaned up article, stored in /tmp/FILTERED_MSG, to the remote NNTP server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTE:</h2>
        <div class="sectioncontent">
<p>The $$o and $$i have to be escaped, using either the backslashes as above, or with single quotes, to prevent the shell from trying to interpret these as variables.  Failure to escape them will result in rpost not working!</p><p><strong>-F</strong> perlfilter</p><p>This option allows you to use an embedded perl filter to filter your articles. In order to use this, you must edit the Makefile, and define the various PERL_ options. It has a couple of advantages over the -f option above.  Because it is embedded perl, there are no forks and execls() done, so it should be faster. Also, you don't need to worry about the arguments to the program and escaping $$, etc as above.</p><p>Rpost will, when it starts up, load in the perlfilter file designated and parse it for syntax errors.  Then, for each article to be uploaded, rpost will call the subroutine "perl_rpost", contained in the perlfilter file.  See sample/put.news.pl for a complete working example.  There are three key points you need to be aware of when creating your filter.</p><p>1. The perlfilter file must contain the line "package Embed::Persistant;", so that variables in the perlfilter file don't clash with rpost variables, and the subroutine must be called "perl_rpost".  This can be changed by editting the PERL_RPOST_SUB define in suck_config.h.</p><p>2. The perl_rpost subroutine receives the input file name as its sole argument, and must return the full path to the location of the filtered article as a single scalar string (return $outfile).</p><p>3. The subroutine must explicitly close the output file (containing the filtered argument) before it returns.  This is because perl will only do an automatic close upon program completion (in our case when rpost exits), or when the file handle is reused (the next time the subroutine is called).  If the close is not done, then more than likely, a 0 byte file will exist when rpost tries to post the article, and errors will result.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNING:</h2>
        <div class="sectioncontent">
<p>Be very careful with what the filter program deletes from the article.  Deleting the wrong line can have bad effects later on.  For example, do not delete the MSG-ID line, as this could cause a single message to be posted many times, depending on the configuration of both the local and remote newserver.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RPOST ARGUMENT FILE</h2>
        <div class="sectioncontent">
<p>If you specify @filename on the command line, rpost will read from filename and parse it for any arguments that you wish to pass to rpost.  You specify the same arguments in this file as you do on the command line.  The arguments can be on one line, or spread out among more than one line.  You may also use comments.  Comments begin with '#' and go to the end of a line.  All command line arguments override arguments in the file.  One advantage to using the file instead of the command line, is that you don't have to escape any special characters, such as $.</p><p># Sample Argument file</p><p>-b batch # batch file option</p><p>-M	# use mode reader option</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT VALUES</h2>
        <div class="sectioncontent">
<p>Rpost returns the following exit values:</p><p>0 = success</p><p>1 = error posting an article</p><p>2 = unable to do NNTP authorization with the remote server.</p><p>3 = unexpected answer to command when doing NNTP authorization.</p><p>-1 = other fatal error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO rpost&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/suck.1.html"><strong>suck</strong>(1)</a>, <a href="../man1/testhost.1.html"><strong>testhost</strong>(1)</a>, <strong>lpost</strong>(1).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="rpmlint.1.html"><span aria-hidden="true">&larr;</span> rpmlint.1: Check common problems in rpm packages</a></li>
   <li class="next"><a href="rpsblast.1.html">rpsblast.1: Basic local alignment search tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
