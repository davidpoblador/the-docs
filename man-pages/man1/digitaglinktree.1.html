<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>digitaglinktree: Export tag structure of photos in digikam to the filesystem.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Export tag structure of photos in digikam to the filesystem.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="digitaglinktree (1) manual">
  <meta name="twitter:description" content="Export tag structure of photos in digikam to the filesystem.">
  <meta name="twitter:image" content="https://www.carta.tech/images/digikam-digitaglinktree-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/digitaglinktree.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="digitaglinktree (1) manual" />
  <meta property="og:description" content="Export tag structure of photos in digikam to the filesystem." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/digikam-digitaglinktree-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">digitaglinktree<small> (1)</small></h1>
        <p class="lead">Export tag structure of photos in digikam to the filesystem.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/digitaglinktree.1.html">
      <span itemprop="name">digitaglinktree: Export tag structure of photos in digikam to the filesystem.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/digikam/">
      <span itemprop="name">digikam</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/digitaglinktree.1.html">
      <span itemprop="name">digitaglinktree: Export tag structure of photos in digikam to the filesystem.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>digitaglinktree</strong></p><p><strong>-l</strong><em> taglinkdir</em> | <strong>-A</strong><em> archivedir</em></p><p><strong>-d</strong><em> database</em></p><p><strong>[-r</strong><em> rootdir]</em></p><p><strong>[-H|-f|-a|-v|-C]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>digitaglinktree </strong> will create a linktree for all photos in a digikam database that have tags set on them. Tags (like eg. "family", "events", ...)  are used in digikam to create virtual folders containing images that all have one or more tags assigned. Please note: Photos that have no tags at all assigned are silently ignored by this script. The program will not modify or even touch your original photos managed by digikam.</p><p>The script can be used in two ways: If you call it using Option  -l <em>taglinkdir</em>  the script will create the user specified directory  <em>taglinkdir</em> and inside this directory it will create sub directories for digikam tags  set on the photos. Inside these subdirectories it will finally  place symbolic or hard links  (see -H) to photos having the tags in question.  As a result you will see the tags of your photos as folders and in these folders you will find links to your original photos.</p><p>In this way you can access the collection of all images that share a certain tag by changing directory to the folder with the tags name created by this script. This allows you e.g. to run JAlbum a photo album software that needs to find the pictures to be put into a web album in the filesystem because JAlbum cannot access digikams virtual folders directly.</p><p>The second way of calling this script is the so called archive-mode by setting option  -A <em>archiveDir</em>.</p><p>Archive mode is thought for people who want to archive tagged photos independently of digikams root directories and the photos therein.  This way you can put your photos and their tag structure in eg. a tar archive and send it  to a friend, who can look at the photos via their tag structure. In this mode the script creates the directory given as  parameter to -A and in this directory two more subdirectories. One named Photos and a second named Tags.  The Photos directory contains hard links to your original photos, and the Tags directory contains a subdirectory for each Tag used by any of your photos. Inside this subdirectory there are links (either symbolic or hard links) to the files in the Photos directory. This way the archive  directory needs nearly no additional space on your harddisk and you have an archive that  allows you or a friend to easily look at the photos tag structure.</p><p>Another benefit from using this script is that you have kind of a backup of your tag settings for all of your photos. The backup is simply the directory structure containing links to the original images that wear the tags. This could become important if for whatever reason the digikam.db file gets corrupted or even lost.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND-LINE OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong> -l</strong><em> taglinkdir</em></p>
  </dt>
  <dd>
    <p>Parameter <em> taglinkdir</em> denotes a directory in which the tag structure of all your photos stored in rootdir will be exported to by creating subdirectories for each tag and placing symbolic links in these subdirectories that point to the original photo wearing the tags. If calling the script with option  -l<em> taglinkDir</em> you also have to  specify options -r  <em>rootdir</em> as well as -d <em>database</em>.</p>
  </dd>
  <dt>
    <p><strong> -A </strong><em>archivedirectory</em></p>
  </dt>
  <dd>
    <p><em>archivedirectory</em> denotes a directory into which the script will export the photos  and their tag structure. -A has to be used together with option  -r  <em>rootdir</em> if using digikam version &lt; 0.10, as well as -d<em> database</em> else the script will terminate.  Inside the archive  directory the script will create a Photos and a Tags directory. It will put hard links in the  Photos directory  that point to your original photos. By using hard links you are independent  of changes in your digikam root directory but on the other hand you are limited to one filesystem.  So the directory given by -r <em>rootdir</em> and the directory specified for -A <em>archivedir</em> have to be  one the same filesystem. If using digikam in version &gt;= 0.10 you cannot specify <em>-r rootdir</em> . Instead the root paths of all albums are taken from digikams database directly. However still the requirement holds, that <em>archivedir</em> has to be on the same filesystem like all the root directories containing photos you defined in digikam. If one of digikams root directories is on another filesystem this one will not be processed, since hardlinking the photos inside the Photos directory would not work in this case! The Tags subdirectory will contain links to the files in the Photos directory. This way you have one archive directory that is completely self contained. You can tar it, send it to a friend or  just put it somewhere for archivel or backup purposes. Usually only those photos will be archived that have a digikam tag set on them. By using option -C however you can perform a complete archive. See -C for more infos.</p>
  </dd>
  <dt>
    <p><strong> -d </strong><em>database</em></p>
  </dt>
  <dd>
    <p><em>database</em> is the complete path including the filename to digikams photo database which usually can be found in digikams root directory. The files name  is usually digikam.db .</p>
  </dd>
  <dt>
    <p><strong> -r </strong><em>rootdir</em></p>
  </dt>
  <dd>
    <p><em>rootdir</em> denotes the digikam base directory containing all your photos if you are using digikam in a version before 0.10. If you are using digikam 0.10 or newer you must not use this option. If you do it anyway you will see a hint that the option given will be ignored because digikams version 0.10 database contains the root directories of all albums defined in digikam.</p>
  </dd>
  <dt>
    <p><strong> -C</strong></p>
  </dt>
  <dd>
    <p>When the script is called with option -A <em>archivedir</em> only those photos will be archived (by placing links) in the Photos subdirectory of <em>archivedir</em> that have at least one digikam tag set. By setting option -C all photos will be  archived to  <em>archivedir</em> no matter if they have a tag set or not. Note: This only changes the contents of the Photos  subdirectory not of the Tags subdirectory in the <em>archivedir</em> directory.</p>
  </dd>
  <dt>
    <p><strong> -a </strong></p>
  </dt>
  <dd>
    <p>By default the script will try to create relative symbolic links from the directory  <em>taglinkdir</em>  set by option -l to the photo files under <em>rootdir</em> given by option -r. Using this option will result in  absolute symbolic links beeing created instead of relative ones.</p>
  </dd>
  <dt>
    <p><strong> -H </strong></p>
  </dt>
  <dd>
    <p>By default the script will create soft (symbolic) links from the Tag-Tree to the photos. By setting option -H the script will use hard links instead. Please note that hard links can only be created inside one filesystem. So your photos and the Tag tree have to be one the same filesystem. If not you will see a warning about this problem and the script will not run.</p>
  </dd>
  <dt>
    <p><strong> -f </strong></p>
  </dt>
  <dd>
    <p>In digikam photos can have hierachical tags (tags that have subtags). In this case digitaglinktree would by default add a directory for the tag and a subdirectory for each of the subtags of this tag. By setting <strong> -f </strong> a subtag is treated like a regular tag just as its parent tag so digitaglinktree will create all subdirectories for tags and subtags at the same level independent of the tag - subtag hierarchy.</p>
  </dd>
  <dt>
    <p><strong> -Y </strong></p>
  </dt>
  <dd>
    <p>Create year directory under each tag directory. Year information is taken from "Date taken" in database.</p>
  </dd>
  <dt>
    <p><strong> -i </strong><em>tag1,..,tagn</em></p>
  </dt>
  <dd>
    <p><em>tag1,..,tagn</em> Include only images with tags in the list. Use comma as tag separator. Default is "none". Use "all" to include all tags at once if you really want this. Better try a list with only some tags first to see how long it takes to complete.</p>
  </dd>
  <dt>
    <p><strong> -e </strong><em>tag1,..,tagn</em></p>
  </dt>
  <dd>
    <p><em>tag1,..,tagn</em> Exclude images with tags in the list. Use comma as tag separator. Default is "none".</p>
  </dd>
  <dt>
    <p><strong> -M </strong><em>level_number</em></p>
  </dt>
  <dd>
    <p><em>level_number</em> specify the number of directory level. <em>-M</em> specifies that instead of following normal tag hierarchy, it creates a hierarchy combining different tags together and not only within one tag hierarchy (for example combining Places and People tags). You have to add tags to be included by using the option -i (see above). Depending on the level given and the number of tags you have included and how many photos you manage using digikam, this option may take a considerable amount of time (possibly more than one  hour) to complete! <em>level_number</em> of "5" seems to be the maximum reasonable level to start with in this mode. Options -A -C -a -H -f not tested with this option!</p>
  </dd>
  <dt>
    <p><strong> -V </strong></p>
  </dt>
  <dd>
    <p>Verbose mode.</p>
  </dd>
  <dt>
    <p><strong> -v </strong></p>
  </dt>
  <dd>
    <p>Prints the scripts version number and exits.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>By default this script will run with all photo databases created by digikam version 0.10 as well as older version like 0.9 and 0.8. If you still have digikam version 0.7 then you have to reconfigure the script itself.</p><p>You have to reconfigure the script by setting the path to the sqlite binary that is used by the script to query the digikam database digikam.db. Since very old digikam version use sqlite in version 2, but later digikam versions need sqlite version 3 you have to take care to install the correct version of sqlite for the installed digikam version and to set the path to the correct sqlite executable in the scripts head:</p><p>Choose</p><p>$SQLITE="/usr/bin/sqlite3";</p><p>for digikam version 0.8x and 0.9x and 0.10x</p><p>$SQLITE="/usr/bin/sqlite";</p><p>for digikam version 0.7x.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>A call to digitaglinktree is shown below:</p><p>digiTagLinktree  -l /home/user/tags</p>
<pre>
            -d /home/user/photos/digikam.db
</pre>
<p>In this example we assume that you are running digikam version 0.10 or higher so that no option -r was used to specify the photo root dir. Instead this information will automatically be fetched from digikams database.</p><p>In case you want to run the script on a digikam database that was created by digikam version 0.9 or earlier you have to use -r to specify the root directory where you keep all your photos that are managed by digikam:</p><p>digiTagLinktree -l /home/user/tags</p>
<pre>
            -d /home/user/photos/digikam.db
</pre>
<p>In this example digikams photo root denoted by -r is /home/user/photos.</p><p>Option -l /home/user/tags tells the script that all the subdirectories and symbolic links will be placed in the directory /home/user/tags. The folder was chosen so that the tags-directory is not under digikams photo root. You may put the tags folder inside digikams photoroot but this is not the preferred method. Because the link directory contains only links this tag structure does hardly need any additional space on your harddisk.</p><p>digiTagLinktree -r /home/user/photos -l /home/user/tags 	    -d /home/user/photos/digikam.db</p>
<pre>
            -i People,Place
            -M 2
            -Y
</pre>
<p>In this example if you have an image with the tags People/me, Place/home from 1970 it will create the following directory (link to the image under _all directory)</p><p>/home/user/tags/Date/1970/_all/</p><p>/home/user/tags/Date/1970/People/me/_all/</p><p>/home/user/tags/Date/1970/People/me/Place/home/_all/</p><p>/home/user/tags/Date/1970/Place/home/_all/</p><p>/home/user/tags/Date/1970/Place/home/People/me/_all/</p><p>same starting with /Place ... same starting with /People ...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p><strong>digitaglinktree</strong> was written by Rainer Krienke &lt;krienke at uni-koblenz.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="digikam.1.html"><span aria-hidden="true">&larr;</span> digikam.1: Digital photo management application for kde</a></li>
   <li class="next"><a href="digitemp.1.html">digitemp.1: Program to read from 1-wire temperature sensors. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
