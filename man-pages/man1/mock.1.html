<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mock: Build srpms in a chroot</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Build srpms in a chroot">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mock (1) manual">
  <meta name="twitter:description" content="Build srpms in a chroot">
  <meta name="twitter:image" content="https://www.carta.tech/images/mock-mock-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mock.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mock (1) manual" />
  <meta property="og:description" content="Build srpms in a chroot" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mock-mock-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mock<small> (1)</small></h1>
        <p class="lead">Build srpms in a chroot</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mock.1.html">
      <span itemprop="name">mock: Build srpms in a chroot</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mock/">
      <span itemprop="name">mock</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mock.1.html">
      <span itemprop="name">mock: Build srpms in a chroot</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">
<p>mock  [options] <strong>--rebuild</strong> <em>SRPM [</em><em>SRPM...</em>]</p><p>mock  [options] <strong>--buildsrpm</strong> {--spec <em>spec</em> --sources <em>src</em> | --scm-enable}</p><p>mock  [options] <strong>--chroot</strong> <em>&lt;cmd&gt;</em></p><p>mock  [options] {<strong>--init</strong>|<strong>clean</strong>|<strong>shell</strong>}</p><p>mock  [options] <strong>--installdeps</strong> {SRPM|RPM}</p><p>mock  [options] <strong>--install</strong> PACKAGE</p><p>mock  [options] <strong>--update</strong></p><p>mock  [options] <strong>--remove</strong> PACKAGE</p><p>mock  [options] <strong>--orphanskill</strong></p><p>mock  [options] <strong>--copyin</strong> <em>path [</em><em>path...</em>] <em>destination</em></p><p>mock  [options] <strong>--copyout</strong> <em>path [</em><em>path...</em>] <em>destination</em></p><p>mock  [options] <strong>--scm-enable</strong> [<em>--scm-option key=value ...</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Mock is a simple program that will build source RPMs inside a chroot. It doesn't do anything terribly fancy other than populate a chroot with the contents specified by a configuration file, then build any input SRPM(s) in that chroot.</p><p>The content of a chroot is specified by the configuration specified with the <strong>-r</strong> option. The default configuration file is /etc/mock/default.cfg, which is usually a symlink to one of the installed configurations.</p><p>There is a site-wide configuration file, /etc/mock/site-defaults.cfg, which can be used to specify site-wide options. The shipped version of this file has no active options, but does have a list of all of the configuration options, examples of how to set them, and their default values.</p><p>For backwards compatibility, old-style commands, ("rebuild", "init", "clean", etc.) without leading '--' are still accepted, but are deprecated. See COMMANDS section, below, for detailed listing of all commands.</p><p>To use mock, a user should become a member of the <strong>mock</strong> group by adding their username to the <strong>mock</strong> line in /etc/group. This can be done with the following command:</p>
<pre>
        <strong>sudo /usr/sbin/usermod -a -G mock $USER</strong>
</pre>
<p>Note that mock is not intended to be run directly as root.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--clean</strong></p>
  </dt>
  <dd>
    <p>Purge the chroot tree.</p>
  </dd>
  <dt>
    <p><strong>--scrub=</strong><em>TYPE</em></p>
  </dt>
  <dd>
    <p>Completely remove the specified chroot or cache dir or all of the chroot and cache.  <em>TYPE</em> is one of all, chroot, cache, root-cache, c-cache, or yum-cache.</p>
  </dd>
  <dt>
    <p><strong>--init</strong></p>
  </dt>
  <dd>
    <p>Initialize a chroot (clean, install chroot packages, etc.)</p>
  </dd>
  <dt>
    <p><strong>--rebuild</strong></p>
  </dt>
  <dd>
    <p>If no command is specified, rebuild is assumed. Rebuilds the specified SRPM(s). The buildroot is cleaned first, unless --no-clean is specified.</p>
  </dd>
  <dt>
    <p><strong>--buildsrpm</strong></p>
  </dt>
  <dd>
    <p>Builds the specified SRPM either from a spec file and source file/directory or from SCM. The buildroot is cleaned first, unless --no-clean is specified.</p>
  </dd>
  <dt>
    <p><strong>--shell</strong></p>
  </dt>
  <dd>
    <p>Run the specified command interactively within the chroot (which must already be initialized -- no 'clean' is performed). If no command specified, /bin/sh is run.</p>
  </dd>
  <dt>
    <p><strong>--chroot</strong></p>
  </dt>
  <dd>
    <p>Run the specified command non-interactively within the chroot (which must already be initialized -- no 'clean' is performed). Command output will be sent to the log files.</p>
  </dd>
  <dt>
    <p><strong>--installdeps</strong></p>
  </dt>
  <dd>
    <p>Find out deps for SRPM or RPM, and do a yum install to put them in the buildroot. Buildroot must already be initialized -- no 'clean' is performed</p>
  </dd>
  <dt>
    <p><strong>--install</strong></p>
  </dt>
  <dd>
    <p>Do a yum install PACKAGE inside the buildroot. Buildroot must already be initialized -- no 'clean' is performed</p>
  </dd>
  <dt>
    <p><strong>--update</strong></p>
  </dt>
  <dd>
    <p>Do a yum update inside the buildroot. Buildroot must already be initialized -- no 'clean' is performed</p>
  </dd>
  <dt>
    <p><strong>--remove</strong></p>
  </dt>
  <dd>
    <p>Do a yum remove PACKAGE inside the buildroot. Buildroot must already be initialized -- no 'clean' is performed</p>
  </dd>
  <dt>
    <p><strong>--orphanskill</strong></p>
  </dt>
  <dd>
    <p>No-op mode that simply checks that no stray processes are running in the chroot. Kills any processes that it finds using specified root.</p>
  </dd>
  <dt>
    <p><strong>--copyin</strong></p>
  </dt>
  <dd>
    <p>Copies the source paths (files or directory trees) into the chroot at the specified destination path.</p>
  </dd>
  <dt>
    <p><strong>--copyout</strong></p>
  </dt>
  <dd>
    <p>Copies the source paths (files or directory trees) from the chroot to the specified destination path.</p>
  </dd>
  <dt>
    <p><strong>--scm-enable</strong></p>
  </dt>
  <dd>
    <p>Enable building from an SCM (CVS/Git/SVN). The SCM repository must be configured in site-defaults.cfg before SCM checkouts are possible. SCM package and branch can be defined with <strong>--scm-option</strong> arguments, see site-defaults.cfg for more information.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-r</strong> <em>CHROOT</em>, <strong>--root</strong>=<em>CHROOT</em></p>
  </dt>
  <dd>
    <p>Uses specified chroot configuration as defined in /etc/mock/&lt;<em>chroot</em>&gt;.cfg. If none specified, uses the chroot linked to by /etc/mock/default.cfg</p>
  </dd>
  <dt>
    <p><strong>--offline</strong></p>
  </dt>
  <dd>
    <p>Run in 'offline' mode where we tell 'yum' to run completely from local cache. Also disables cache expiry for the mock yum cache.</p>
  </dd>
  <dt>
    <p><strong>--no-clean</strong></p>
  </dt>
  <dd>
    <p>Do not clean chroot before building package.</p>
  </dd>
  <dt>
    <p><strong>--cleanup-after</strong></p>
  </dt>
  <dd>
    <p>Clean chroot after building. Use with --resultdir. Only active for '--rebuild'.</p>
  </dd>
  <dt>
    <p><strong>--no-cleanup-after</strong></p>
  </dt>
  <dd>
    <p>Don't clean chroot after building. If automatic cleanup is enabled, use this to disable.</p>
  </dd>
  <dt>
    <p><strong>--cache-alterations</strong></p>
  </dt>
  <dd>
    <p>Rebuild the root cache after making alterations to the chroot (i.e. --install). Only useful when using tmpfs plugin.</p>
  </dd>
  <dt>
    <p><strong>--target=</strong><em>ARCH</em></p>
  </dt>
  <dd>
    <p>This argument is passed to rpmbuild to specify the target arch to build. It defaults to whatever is specified for --arch, or whatever is specified in the config file as config_opts['target_arch'].</p>
  </dd>
  <dt>
    <p><strong>--arch=</strong><em>ARCH</em></p>
  </dt>
  <dd>
    <p>Calls the linux personality() syscall to tell the kernel to emulate a secondary architecture. For example, building i386 packages on an x86_64 buildhost.</p>
  </dd>
  <dt>
    <p><strong>-D </strong>"<em>MACRO EXPR</em>", <strong>--define=</strong>"<em>MACRO EXPR</em>"</p>
  </dt>
  <dd>
    <p>Specify macro definitions used for the build.  This option may be used multiple times, just as the rpmbuild --define option can be.  For example:</p><p><strong>--define "with_extra_cheese 1" --define="packager Monkey"</strong></p>
  </dd>
  <dt>
    <p><strong>--with=</strong><em>OPTION</em></p>
  </dt>
  <dd>
    <p>Enable configure OPTION for build.  This option may be used multiple times.  For example:</p><p><strong>--with=extra_cheese</strong></p>
  </dd>
  <dt>
    <p><strong>--without=</strong><em>OPTION</em></p>
  </dt>
  <dd>
    <p>Disable configure OPTION for build.  This option may be used multiple times.  For example:</p><p><strong>--without=anchovies</strong></p>
  </dd>
  <dt>
    <p><strong>--resultdir=</strong><em>RESULTDIR</em></p>
  </dt>
  <dd>
    <p>Change directory where resulting files (RPMs and build logs) are written. Resultdir can contain python-string substitutions for any variable in the chroot config. For example:</p><p><strong>--resultdir=./my/"%(dist)s"/"%(target_arch)s"/</strong></p>
  </dd>
  <dt>
    <p><strong>--uniqueext=</strong><em>text</em></p>
  </dt>
  <dd>
    <p>Arbitrary, unique extension to append to buildroot directory name</p>
  </dd>
  <dt>
    <p><strong>--configdir=</strong><em>CONFIGDIR</em></p>
  </dt>
  <dd>
    <p>Change directory where config files are found</p>
  </dd>
  <dt>
    <p><strong>--rpmbuild_timeout=</strong><em>SECONDS</em></p>
  </dt>
  <dd>
    <p>Fail build if rpmbuild takes longer than 'timeout' seconds</p>
  </dd>
  <dt>
    <p><strong>--unpriv</strong></p>
  </dt>
  <dd>
    <p>Drop privileges before running command when using --chroot</p>
  </dd>
  <dt>
    <p><strong>--cwd=</strong><em>DIR</em></p>
  </dt>
  <dd>
    <p>Change to the specified directory (relative to the chroot) before running command when using --chroot</p>
  </dd>
  <dt>
    <p><strong>-q</strong>, <strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>Be quiet.</p>
  </dd>
  <dt>
    <p><strong>-v</strong>, <strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>Output verbose progress information.</p>
  </dd>
  <dt>
    <p><strong>--trace</strong></p>
  </dt>
  <dd>
    <p>Enables verbose tracing of function enter/exit with function arguments and return codes. Useful for debugging mock itself.</p>
  </dd>
  <dt>
    <p><strong>--enable-plugin=</strong><em>PLUGIN</em></p>
  </dt>
  <dd>
    <p>Enable the specified plugin.  This option may be used multiple times.</p>
  </dd>
  <dt>
    <p><strong>--disable-plugin=</strong><em>PLUGIN</em></p>
  </dt>
  <dd>
    <p>Disable the specified plugin.  This option may be used multiple times.</p>
  </dd>
  <dt>
    <p><strong>--plugin-option </strong><em>PLUGIN</em><strong>:</strong><em>KEY</em><strong>=</strong><em>VALUE</em></p>
  </dt>
  <dd>
    <p>Set plugin specific parameter. This option may be used multiple times.</p>
  </dd>
  <dt>
    <p><strong>-h</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Show usage information and exit.</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>Show version number and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/etc/mock/</em> - default configuration directory</p><p><em>/var/lib/mock</em> - directory where chroots are created</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To rebuild test.src.rpm using the Fedora 14 configuration for x86_64</p><p><strong>mock -r fedora-14-x86_64 --rebuild /path/to/test.src.rpm</strong></p><p>Note that the available configurations are found in the /etc/mock directory with the extension .cfg. To specify a configuration use the filename without the trailing .cfg extension.</p><p>To place the output RPMs and logs in a specified location.</p><p><strong>mock -r fedora-14-i386 --resultdir=./my-results /path/to/your.src.rpm</strong></p><p>To build a package from the default SCM repository configured in site-defaults.cfg use the following arguments.</p><p><strong>mock -r fedora-14-i386 --scm-enable --scm-option package=pkg</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>To report bugs in mock, go to:</p><p><em>http://bugzilla.redhat.com/bugzilla</em>.</p><p>Select the query option, using product <strong>Fedora Hosted Projects</strong> and component <strong>mock</strong> and press the <strong>Start Search</strong> button. If there is a bug similar to the one you are seeing, add your information to the comments. If not, go to the new bug page using the same product and component and fill in the form.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Michael Brown &lt;mebrown@michaels-house.net&gt;</p><p>Clark Williams &lt;williams@redhat.com&gt;</p><p>Seth Vidal &lt;skvidal@linux.duke.edu&gt;</p><p>and a cast of...tens</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mock&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/yum.8.html"><strong>yum</strong>(8)</a> <a href="../man8/rpmbuild.8.html"><strong>rpmbuild</strong>(8)</a> http://fedoraproject.org/wiki/Projects/Mock</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mocha.1.html"><span aria-hidden="true">&larr;</span> mocha.1: Simple, flexible, fun test framework</a></li>
   <li class="next"><a href="mockchain.1.html">mockchain.1: Chain package builder. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
