<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>splitlog: Split www server (httpd) access logfiles</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Split www server (httpd) access logfiles">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="splitlog (1) manual">
  <meta name="twitter:description" content="Split www server (httpd) access logfiles">
  <meta name="twitter:image" content="https://www.carta.tech/images/wwwstat-splitlog-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/splitlog.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="splitlog (1) manual" />
  <meta property="og:description" content="Split www server (httpd) access logfiles" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/wwwstat-splitlog-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">splitlog<small> (1)</small></h1>
        <p class="lead">Split www server (httpd) access logfiles</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/splitlog.1.html">
      <span itemprop="name">splitlog: Split www server (httpd) access logfiles</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/wwwstat/">
      <span itemprop="name">wwwstat</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/splitlog.1.html">
      <span itemprop="name">splitlog: Split www server (httpd) access logfiles</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>splitlog</strong> [<strong>-f</strong> <em>configfile</em>] [<em>options</em>...] [<strong>--</strong>] [ <em>logfile</em> |  <strong>+</strong> | <strong>-</strong> ]...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>splitlog</strong> reads a sequence of <strong>httpd</strong> common logfile format (CLF) access_log files and/or the standard input and splits the logfile entries into separate files according to the entry's requested URL or virtual host prefix.</p><p><strong>splitlog</strong> is intended to be run periodically by the webmaster as a means for providing individual logfiles for each of the customers of a server, since it is less efficient for the server itself to generate multiple logfiles. <strong>splitlog</strong> does not make any changes to the input file and can be configured to write the split files in any directory. By default, a cached DNS lookup is performed on any IP addresses which are unresolved in the input file.  The log entries can also be anonymized if there are concerns about the requesting clients' privacy.</p><p><strong>splitlog</strong> is a <strong>perl</strong> script, which means you need to have a <strong>perl</strong> interpreter to run the program.  It has been tested with <strong>perl</strong> versions 4.036 and 5.002.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<h3>Configuration Options</h3>
<p>These options define how <strong>splitlog</strong> should establish defaults and interpret the command-line.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-f</strong><em> filename</em></p>
  </dt>
  <dd>
    <p>Get the configuration defaults from the given file.  If used, this <strong>must</strong> be the first argument on the command-line, since it needs to be interpreted before the other command options.  The file <strong>splitlog.rc</strong> is included with the distribution as an example of this file; it contains <strong>perl</strong> source code which directly sets the control and display options provided by <strong>splitlog</strong> and contains a function for altering the split logfile name-selection algorithm.  If <em>filename</em> is not a pathname, the include path (see <strong>FILES</strong>) is searched for <em>filename</em>. An empty string as <em>filename</em> will disable this feature. [<strong>-f</strong> "splitlog.rc"]</p>
  </dd>
  <dt>
    <p><strong>--</strong></p>
  </dt>
  <dd>
    <p>Last option (the remaining arguments are treated as input files).</p>
  </dd>

</dl>

<h3>Diagnostic Options</h3>
<p>These options provide information about <strong>splitlog</strong> usage or about some unusual aspects of the logfile(s) being processed.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Help &ndash; display usage information to STDERR and then exit.</p>
  </dd>
  <dt>
    <p><strong>-e</strong></p>
  </dt>
  <dd>
    <p>Display to STDERR all invalid log entries. Invalid log entries can occur if the server is miswriting or overwriting its own log, if the request is made by a broken client or proxy, or if a malicious attacker is trying to gain privileged access to your system.</p>
  </dd>

</dl>

<h3>Process Options</h3>
<p>These options modify how and where logfile entries are written.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>Discard any logfile entries without a filename key instead of placing them in a special OTHERS.log.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Use a prefix of the input file entries (ended by the first ":" or space) for selecting the output filename instead of, or in addition to, the URL path. The most likely use for such a prefix is for the requested virtual host.</p>
  </dd>
  <dt>
    <p><strong>-dir</strong><em> directory</em></p>
  </dt>
  <dd>
    <p>Place the output logfiles in the given directory instead of the current working directory.</p>
  </dd>
  <dt>
    <p><strong>-anon</strong><em> imu</em></p>
  </dt>
  <dd>
    <p>Anonymize the logfile entries before writing them to split logs. The value is some combination of the letters "i" (ident field is removed), "m" (machine name is replaced with ANON or 0), and "u" (authentication userid field is removed).</p>
  </dd>

</dl>
<p><strong>-dns</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-nodns</strong></p>
  </dt>
  <dd>
    <p>Do (<strong>-dns</strong>) or don't (<strong>-nodns</strong>) use the system's hostname lookup facilities to find the DNS hostname associated with any unresolved IP addresses. Looking up a DNS name may be <strong>very</strong> slow, particularly when the results are negative (no DNS name), which is why a caching capability is included as well. [<strong>-dns</strong>]</p>
  </dd>
  <dt>
    <p><strong>-cache</strong><em> filename</em></p>
  </dt>
  <dd>
    <p>Use the given DBM database as the read/write persistent DNS cache (the .dir and .pag extensions are appended automatically). Cached entries (including negative results) are removed after the time configured for $DNSexpires [two months].  No caching is performed if <em>filename</em> is the empty string, which may be needed if your system does not support DBM or NDBM functionality. Running <strong>-dns</strong> without a persistent cache is not recommended. [<strong>-cache</strong> "dnscache"]</p>
  </dd>

</dl>

<h3>Search Options</h3>
<p>These options are used to include or exclude logfile entries from being output according to whether or not they match a given pattern. The pattern is supplied in the form of a <strong>perl regular expression</strong>, except that the characters "+" and "." are escaped automatically unless the <strong>-noescape</strong> option is given. Enclose the pattern in single-quotes to prevent the command shell from interpreting some special characters. Multiple occurrences of the same option results in an OR-ing of the regular expressions.</p><p><strong>-a</strong><em> regexp</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-A</strong><em> regexp</em></p>
  </dt>
  <dd>
    <p>Include (<strong>-a</strong>) or exclude (<strong>-A</strong>) all requests containing a hostname/IP address matching the given perl regular expression.</p>
  </dd>

</dl>
<p><strong>-c</strong><em> regexp</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-C</strong><em> regexp</em></p>
  </dt>
  <dd>
    <p>Include (<strong>-c</strong>) or exclude (<strong>-C</strong>) all requests resulting in an <strong>HTTP</strong> status code matching the given perl regular expression.</p>
  </dd>

</dl>
<p><strong>-d</strong><em> regexp</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-D</strong><em> regexp</em></p>
  </dt>
  <dd>
    <p>Include (<strong>-d</strong>) or exclude (<strong>-D</strong>) all requests occurring on a date (e.g., "Feb 02 1994") matching the given perl regular expression.</p>
  </dd>

</dl>
<p><strong>-t</strong><em> regexp</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-T</strong><em> regexp</em></p>
  </dt>
  <dd>
    <p>Include (<strong>-t</strong>) or exclude (<strong>-T</strong>) all requests occurring during the hour (e.g., "23" is 11pm - 12pm) matching the given perl regular expression.</p>
  </dd>

</dl>
<p><strong>-m</strong><em> regexp</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-M</strong><em> regexp</em></p>
  </dt>
  <dd>
    <p>Include (<strong>-m</strong>) or exclude (<strong>-M</strong>) all requests using an HTTP method (e.g., "HEAD") matching the given perl regular expression.</p>
  </dd>

</dl>
<p><strong>-n</strong><em> regexp</em></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-N</strong><em> regexp</em></p>
  </dt>
  <dd>
    <p>Include (<strong>-n</strong>) or exclude (<strong>-N</strong>) all requests on a URL (archive name) matching the given perl regular expression.</p>
  </dd>
  <dt>
    <p><strong>-noescape</strong></p>
  </dt>
  <dd>
    <p>Do not escape the special characters ("+" and ".") in the remaining search options.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INPUT</h2>
        <div class="sectioncontent">
<p>After parsing the options, the remaining arguments on the command-line are treated as input arguments and are read in the order given. If no input arguments are given, the configured default logfile is read [<strong>+</strong>].</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-</strong></p>
  </dt>
  <dd>
    <p>Read from standard input (STDIN).</p>
  </dd>
  <dt>
    <p><strong>+</strong></p>
  </dt>
  <dd>
    <p>Read the default logfile. [as configured]</p>
  </dd>
  <dt>
    <p><em>logfile</em>...</p>
  </dt>
  <dd>
    <p>Read the given logfile.  If the <em>logfile</em>'s extension indicates that is is compressed (gz|z|Z), then pipe it through the configured decompression program [<strong>gunzip -c</strong>] first.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>In most cases, <strong>splitlog</strong> is run on a periodic basis by a wrapper program as a <strong>crontab</strong> entry shortly after midnight, typically in conjunction with rotating the current logfile.  The <strong>-D today</strong> option can be used to split the main logfile on a daily basis without rotation.</p><p>All of the command-line options, and a few options that are not available from the command-line, can be changed within the user configuration file (see <strong>splitlog.rc</strong>). This file is actually a <strong>perl</strong> library module which is executed as part of the program's initialization. The example provided with the distribution includes complete documentation on what variables can be set and their range of values. If the default algorithm for selecting the split logfile name isn't desired, or if some set of names should be combined into a single file, then uncomment the user_path_map() function and define your own name-selection algorithm.</p><p>The <strong>wwwstat</strong> program can be used to analyze the resulting logfiles. See <strong>wwwstat</strong> for a description of the common logfile format.</p><h3>Perl Regular Expressions</h3>
<p>The Search Options and many of the configuration file settings allow for full use of perl regular expressions (with the exception that the -a, -A, -n and -N options treat '+' and '.' characters as normal alphabetic characters unless they are preceded by the <strong>-noescape</strong> option).  Most people only need to know the following special characters:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>^</strong></p>
  </dt>
  <dd>
    <p>at start of pattern, means "starts with pattern".</p>
  </dd>
  <dt>
    <p><strong>$</strong></p>
  </dt>
  <dd>
    <p>at end of pattern, means "ends with pattern".</p>
  </dd>
  <dt>
    <p><strong>(...)</strong></p>
  </dt>
  <dd>
    <p>groups pattern elements as a single element.</p>
  </dd>
  <dt>
    <p><strong>?</strong></p>
  </dt>
  <dd>
    <p>matches preceding element zero or one times.</p>
  </dd>
  <dt>
    <p><strong>*</strong></p>
  </dt>
  <dd>
    <p>matches preceding element zero or more times.</p>
  </dd>
  <dt>
    <p><strong>+</strong></p>
  </dt>
  <dd>
    <p>matches preceding element one or more times.</p>
  </dd>
  <dt>
    <p><strong>.</strong></p>
  </dt>
  <dd>
    <p>matches any single character.</p>
  </dd>
  <dt>
    <p><strong>[...]</strong></p>
  </dt>
  <dd>
    <p>denotes a class of characters to match. [^...] negates the class. Inside a class, '-' indicates a range of characters.</p>
  </dd>
  <dt>
    <p><strong>(A|B|C)</strong></p>
  </dt>
  <dd>
    <p>matches if A or B or C matches.</p>
  </dd>

</dl>
<p>Depending on your command shell, some special characters may need to be escaped on the command line or enclosed in single-quotes to avoid shell interpretation.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>HOME</strong></p>
  </dt>
  <dd>
    <p>Location of user's home directory, placed on INC path.</p>
  </dd>
  <dt>
    <p><strong>LOGDIR</strong></p>
  </dt>
  <dd>
    <p>Used instead of HOME if latter is undefined.</p>
  </dd>
  <dt>
    <p><strong>PERLLIB</strong></p>
  </dt>
  <dd>
    <p>A colon-separated list of directories in which to look for the user configuration file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>Unless a pathname is supplied, the configuration file is obtained from the current directory, the user's home directory (<strong>HOME</strong> or <strong>LOGDIR</strong>), the standard library path (<strong>PERLLIB</strong>), and the directory indicated by the command pathname (in that order).</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>splitlog.rc</strong></p>
  </dt>
  <dd>
    <p>User configuration file.</p>
  </dd>

</dl>
<p><strong>dnscache.dir</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>dnscache.pag</strong></p>
  </dt>
  <dd>
    <p>DBM files for persistent DNS cache.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO splitlog&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/crontab.1.html"><strong>crontab</strong>(1)</a>, <strong>httpd</strong>(1m), <strong>perl</strong>(1), <a href="../man1/wwwstat.1.html"><strong>wwwstat</strong>(1)</a></p><p>More info and the latest version of splitlog can be obtained from</p>
<pre>
     http://www.ics.uci.edu/pub/websoft/wwwstat/
      ftp://www.ics.uci.edu/pub/websoft/wwwstat/
</pre>
<p>If you have any suggestions, bug reports, fixes, or enhancements, please join the &lt;wwwstat-users@ics.uci.edu&gt; mailing list by sending e-mail with "subscribe" in the subject of the message to the request address &lt;wwwstat-users-request@ics.uci.edu&gt;.  The list is archived at the above address.</p><h3>More About Perl</h3>

<dl class='dl-vertical'>
  <dt>
    <p>The Perl Language Home Page</p>
  </dt>
  <dd>
    <p>http://www.perl.com/perl/index.html</p>
  </dd>
  <dt>
    <p>Johan Vromans' Perl Reference Guide</p>
  </dt>
  <dd>
    <p>http://www.xs4all.nl/~jvromans/perlref.html</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Roy Fielding (fielding@ics.uci.edu), University of California, Irvine. Please do not send questions or requests to the author, since the number of requests has long since overwhelmed his ability to reply, and all future support will be through the mailing list (see above).</p><p>This work has been sponsored in part by the Defense Advanced Research Projects Agency under Grant Numbers MDA972-91-J-1010 and F30602-94-C-0218. This software does not necessarily reflect the position or policy of the U.S. Government and no official endorsement should be inferred.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="splitkeys.1.html"><span aria-hidden="true">&larr;</span> splitkeys.1: Split an openpgp keyring</a></li>
   <li class="next"><a href="splitmail++.1.html">splitmail++.1: Split mailbox files prior to indexing <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
