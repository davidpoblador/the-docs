<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xymongrep: Pick out lines in hosts.cfg</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Pick out lines in hosts.cfg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xymongrep (1) manual">
  <meta name="twitter:description" content="Pick out lines in hosts.cfg">
  <meta name="twitter:image" content="https://www.carta.tech/images/xymon-client-xymongrep-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/xymongrep.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xymongrep (1) manual" />
  <meta property="og:description" content="Pick out lines in hosts.cfg" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xymon-client-xymongrep-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xymongrep<small> (1)</small></h1>
        <p class="lead">Pick out lines in hosts.cfg</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/xymongrep.1.html">
      <span itemprop="name">xymongrep: Pick out lines in hosts.cfg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xymon-client/">
      <span itemprop="name">xymon-client</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/xymongrep.1.html">
      <span itemprop="name">xymongrep: Pick out lines in hosts.cfg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>xymongrep --help</strong></p><p><strong>xymongrep --version</strong></p><p><strong>xymongrep [--noextras] [--test-untagged] [--web] [--net] TAG [TAG...]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><a href="../man1/xymongrep.1.html"><strong>xymongrep</strong>(1)</a></em> is for use by extension scripts that need to pick out the entries in a hosts.cfg file that are relevant to the script.</p><p>The utility accepts test names as parameters, and will then parse the hosts.cfg file and print out the host entries that have at least one of the wanted tests specified. Tags may be given with a trailing asterisk '*', e.g. "xymongrep http*" is needed to find all http and https tags.</p><p>The xymongrep utility supports the use of "include" directives inside the hosts.cfg file, and will find matching tags in all included files.</p><p>If the DOWNTIME or SLA tags are used in the <a href="../man5/hosts.cfg.5.html"><strong>hosts.cfg</strong>(5)</a></em> file, these are interpreted relative to the current time. xymongrep then outputs a "INSIDESLA" or "OUTSIDESLA" tag for easier use by scripts that want to check if the current time is inside or outside the expected uptime window.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    --noextras
  </dt>
  <dd>
    <p>Remove the "testip", "dialup", "INSIDESLA" and "OUTSIDESLA" tags from the output.</p>
  </dd>
  <dt>
    --test-untagged
  </dt>
  <dd>
    <p>When using the XYMONNETWORK environment variable to test only hosts on a particular network segment, xymonnet will ignore hosts that do not have any "NET:x" tag. So only hosts that have a NET:$XYMONNETWORK tag will be tested.</p><p>With this option, hosts with no NET: tag are included in the test, so that all hosts that either have a matching NET: tag, or no NET: tag at all are tested.</p>
  </dd>
  <dt>
    --no-down[=TESTNAME]
  </dt>
  <dd>
    <p>xymongrep will query the Xymon server for the current status of the "conn" test, and if TESTNAME is specified also for the current state of the specified test. If the status of the "conn" test for a host is non-green, or the status of the TESTNAME test is disabled, then this host is ignored and will not be included in the output. This can be used to ignore hosts that are down, or hosts where the custom test is disabled.</p>
  </dd>
  <dt>
    --web
  </dt>
  <dd>
    <p>Search the hosts.cfg file following include statements as a Xymon web-server would.</p>
  </dd>
  <dt>
    --net
  </dt>
  <dd>
    <p>Search the hosts.cfg file following include statements as when running xymonnet.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>If your hosts.cfg file looks like this</p>
<pre>
   192.168.1.1   www.test.com  # ftp telnet !oracle
   192.168.1.2   db1.test.com  # oracle
   192.168.1.3   mail.test.com # smtp
</pre>
<p>and you have a custom Xymon extension script that performs the "oracle" test, then running "xymongrep oracle" would yield</p>
<pre>
   192.168.1.1   www.test.com  # !oracle
   192.168.1.2   db1.test.com  # oracle
</pre>
<p>so the script can quickly find the hosts that are of interest.</p><p>Note that the reverse-test modifier - "!oracle" - is included in the output; this also applies to the other test modifiers defined by Xymon (the dial-up and always-true modifiers).</p><p>If your extension scripts use more than one tag, just list all of the interesting tags on the command line.</p><p>xymongrep also supports the "NET:location" tag used by xymonnet, so if your script performs network checks then it will see only the hosts that are relevant for the test location that the script currently executes on.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USE IN EXTENSION SCRIPTS</h2>
        <div class="sectioncontent">
<p>To integrate xymongrep into an existing script, look for the line in the script that grep's in the $HOSTSCFG file. Typically it will look somewhat like this:</p>
<pre>
   $GREP -i "^[0-9].*#.*TESTNAME" $HOSTSCFG | ... code to handle test
</pre>
<p>Instead of the grep, we will use xymongrep. It then becomes</p>
<pre>
   $XYMONHOME/bin/xymongrep TESTNAME | ... code to handle test
</pre>
<p>which is simpler, less error-prone and more efficient.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    XYMONNETWORK
  </dt>
  <dd>
    <p>If set, xymongrep outputs only lines from hosts.cfg that have a matching NET:$XYMONNETWORK setting.</p>
  </dd>
  <dt>
    HOSTSCFG
  </dt>
  <dd>
    <p>Filename for the Xymon <a href="../man5/hosts.cfg.5.html"><strong>hosts.cfg</strong>(5)</a></em> file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    $HOSTSCFG
  </dt>
  <dd>
    <p>The Xymon hosts.cfg file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xymongrep&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/hosts.cfg.5.html"><strong>hosts.cfg</strong>(5)</a>, <a href="../man5/xymonserver.cfg.5.html"><strong>xymonserver.cfg</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xymongen.1.html"><span aria-hidden="true">&larr;</span> xymongen.1: Xymon webpage generator</a></li>
   <li class="next"><a href="xymonnet.1.html">xymonnet.1: Xymon network test tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
