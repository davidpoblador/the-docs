<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tile4ms: Create a tile index shape data set for use with mapserver's tileindex feature</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create a tile index shape data set for use with mapserver's tileindex feature">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tile4ms (1) manual">
  <meta name="twitter:description" content="Create a tile index shape data set for use with mapserver's tileindex feature">
  <meta name="twitter:image" content="https://www.carta.tech/images/mapserver-bin-tile4ms-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/tile4ms.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tile4ms (1) manual" />
  <meta property="og:description" content="Create a tile index shape data set for use with mapserver's tileindex feature" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mapserver-bin-tile4ms-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tile4ms<small> (1)</small></h1>
        <p class="lead">Create a tile index shape data set for use with mapserver's tileindex feature</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tile4ms.1.html">
      <span itemprop="name">tile4ms: Create a tile index shape data set for use with mapserver's tileindex feature</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mapserver-bin/">
      <span itemprop="name">mapserver-bin</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tile4ms.1.html">
      <span itemprop="name">tile4ms: Create a tile index shape data set for use with mapserver's tileindex feature</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>tile4ms</strong> \kx [ <em>metafile</em> <em>tilefile</em> [<strong>-tile-path-only</strong>] | <strong>-h</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>tile4ms</strong> creates a tile index Shape data set for use with MapServer's TILEINDEX feature. The program creates a Shape data set of rectangles from extents of all the Shape data sets listed in <em>metafile</em> (one Shape data set name per line) and the associated DBF with the filename for each shape tile in a column called LOCATION as required by mapserv.</p><p><em>Note:</em> Similar functionality can be found in the GDAL commandline utilities &#92;$2 \(la&#92;$1\(ra&#92;$3 (for vectors) and (for rasters).</p><p><strong>tile4ms</strong> creates a Shape data set containing the MBR (minimum bounding rectangle) of all shapes in the files provided, which can then be used in the LAYER object's TILEINDEX parameter of the mapfile. The new filed created with this command is used by MapServer to only load the files assocated with that extent (or tile).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>metafile</em></p>
  </dt>
  <dd>
    <p>INPUT file containing list of shapefile names. (complete paths 255 chars max, no extension)</p>
  </dd>
  <dt>
    <p><em>tilefile</em></p>
  </dt>
  <dd>
    <p>OUTPUT shape file of extent rectangles and names of tiles in <em>tilefile</em>.dbf</p>
  </dd>
  <dt>
    <p>\*(T&lt;<strong>-tile-path-only</strong>\*(T&gt;</p>
  </dt>
  <dd>
    <p>Optional flag. If specified then only the path to the shape files will be stored in the LOCATION field instead of storing the full filename.</p>
  </dd>
  <dt>
    <p>\*(T&lt;<strong>-h</strong>\*(T&gt;</p>
  </dt>
  <dd>
    <p>Display usage information</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p><strong>Short Example</strong></p><p>Create tileindex.shp for all tiles under the /path/to/data directory:</p>
<pre>
\*(T&lt;
       cd /path/to/data
       find . -name "/*.shp" -print &gt; metafile.txt
       tile4ms metafile.txt tileindex
      \*(T&gt;
</pre>
<p><strong>Long Example</strong></p><p>This example uses TIGER Census data, where the data contains files divided up by county (in fact there are over 3200 counties, a very large dataset indeed). In this example we will show how to display all lakes for the state of Minnesota. (note that here we have already converted the TIGER data into Shape format, but you could keep the data in TIGER format and use the ogrtindex utility instead) The TIGER Census data for Minnesota is made up of 87 different counties, each containing its own lakes file ('wp.shp').</p>
<dl class='dl-vertical'>
  <dt>
    <p>1.</p>
  </dt>
  <dd>
    <p>We need to create the 'meta-file' for the tile4ms command. This is a text file of the paths to all 'wp.shp' files for the MN state. To create this file we can use a few simple commands:</p>
<pre>
\*(T&lt;
   find -name *wp.shp -print &gt; wp_list.txt
          \*(T&gt;
</pre>
<p>The newly created file might look like the following (after removing the full path):</p>
<pre>
\*(T&lt;
   001&#92;wp.shp
   003&#92;wp.shp
   005&#92;wp.shp
   007&#92;wp.shp
   009&#92;wp.shp
   011&#92;wp.shp
   013&#92;wp.shp
   015&#92;wp.shp
   017&#92;wp.shp
   019&#92;wp.shp
   ...
            \*(T&gt;
</pre>

  </dd>
  <dt>
    <p>2.</p>
  </dt>
  <dd>
    <p>Execute the tile4ms command with the newly created meta-file to create the index file:</p>
<pre>
\*(T&lt;
   tile4ms wp_list.txt index
     Processed 87 of 87 files
            \*(T&gt;
</pre>

  </dd>
  <dt>
    <p>3.</p>
  </dt>
  <dd>
    <p>A new file named 'index.shp' is created. This is the index file with the MBRs of all 'wp.shp' files for the entire state, as shown in Figure 1. The attribute table of this file contains a field named 'LOCATION', that contains the path to each 'wp.shp file', as shown in Figure 2.</p><p><strong>Figure 1: Index file created by tile4ms utility</strong></p><p><strong>Figure 2: Attributes of index file created by tile4ms utility</strong></p>
  </dd>
  <dt>
    <p>4.</p>
  </dt>
  <dd>
    <p>The final step is to use this in your mapfile.</p>
<dl class='dl-vertical'>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>LAYER object's TILEINDEX - must point to the location of the index file</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>LAYER object's TILEITEM - specify the name of the field in the index file containing the paths (default is 'location')</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>do not need to use the LAYER's DATA parameter</p>
  </dd>

</dl>
<p>For example:</p>
<pre>
\*(T&lt;
   LAYER
     NAME 'mn-lakes'
     STATUS ON
     TILEINDEX "index"
     TILEITEM "location"
     TYPE POLYGON
     CLASS
       NAME "mn-lakes"
       STYLE
         COLOR 0 0 255
       END
     END
   END
                \*(T&gt;
</pre>
<p>When you view the layer in a MapServer application, you will notice that when you are zoomed into a small area of the state only those lakes layers are loaded, which speeds up the application.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tile4ms&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/shp2img.1.html"><strong>shp2img</strong>(1)</a>, <a href="../man1/shptree.1.html"><strong>shptree</strong>(1)</a>, <a href="../man1/shptreetst.1.html"><strong>shptreetst</strong>(1)</a>, <a href="../man1/shptreevis.1.html"><strong>shptreevis</strong>(1)</a>, <a href="../man1/sortshp.1.html"><strong>sortshp</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tilda.1.html"><span aria-hidden="true">&larr;</span> tilda.1: First person shooter console likeness terminal</a></li>
   <li class="next"><a href="tiled.1.html">tiled.1: Tile map editor <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
