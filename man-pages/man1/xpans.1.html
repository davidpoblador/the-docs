<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xpans: The \s-1xpa\s0 name server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The \s-1xpa\s0 name server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xpans (1) manual">
  <meta name="twitter:description" content="The \s-1xpa\s0 name server">
  <meta name="twitter:image" content="https://www.carta.tech/images/xpa-tools-xpans-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/xpans.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xpans (1) manual" />
  <meta property="og:description" content="The \s-1xpa\s0 name server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xpa-tools-xpans-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xpans<small> (1)</small></h1>
        <p class="lead">The \s-1xpa\s0 name server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/xpans.1.html">
      <span itemprop="name">xpans: The \s-1xpa\s0 name server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xpa-tools/">
      <span itemprop="name">xpa-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/xpans.1.html">
      <span itemprop="name">xpans: The \s-1xpa\s0 name server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  xpans [\-h] [\-e] [\-k sec] [\-p port] [\-l log] [\-s security log] [\-P n]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>  \-h            print help message   \-e            exit when there are no more XPA connections   \-k            send keepalive messages every n sec   \-l            log data base entries to specified file   \-p            listen for connections on specified port   \-s            log security info for each connection to specified file   \-P            accept proxy requests (P=1) using separate thread (P=2)   -\-version     display version and exit</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The xpans name server is an XPA-enabled program that is used to manage the names and ports of \s-1XPA\s0 access points. It is started automatically when an \s-1XPA\s0 access point is registered. You can access the name server using xpaget to get a list of registered access points.</p><p>The <em>xpans</em> name server provides a crucial link between \s-1XPA\s0 clients and servers.  When an \s-1XPA\s0 server defines an access point using <em>XPANew()</em>, <em>XPACmdNew()</em>, or <em>XPAInfoNew()</em>, the name of the access point is registered in the name service, along with connection information. The name server then matches class:name templates passed to it by \s-1XPA\s0 clients with these registered entries, so that the clients can communicate with the appropriate servers.</p><p>The socket connection between an XPA-enabled program and <em>xpans</em> is kept open until the former exits (or explicitly closes the connection). Apparently, some Internet equipment (e.g. \s-1DSL\s0 modems) can cause such a connection to time-out after a period of inactivity. To prevent this from happening, you can use the \-k [sec] switch to send a short keep-alive message to each open connection after the specified time delay. (Note that this application level use of keep-alive is necessary only if you are serving XPA-enabled clients over the Internet and have to deal with long-term connections involving \s-1DSL\s0 or similar equipment.  \s-1XPA\s0 uses the ordinary socket-level keep-alive, which works for all other cases.) \s-1NB\s0 (12/2/2009): Out-of-band (\s-1URG\s0) \s-1TCP\s0 data, used by xpans keep-alive, is changed by some Cisco routers into in-band data. Encountering such a router will break the keep-alive function and may break your \s-1XPA\s0 server as well. Proceed with caution!</p><p>The <em>xpans</em> program will be started automatically (assuming it can be found in the user's path) when the first \s-1XPA\s0 access point is registered.  It therefore need not be started explicitly.  However, when started automatically, the <em>\-e</em> switch is used, so that the name server will exit when there are no more \s-1XPA\s0 access points registered. If you wish to keep the name server running continually, simply start it manually without the <em>\-e</em> switch.</p><p>The name server will keep a log of registered access points if the <em>\-l [log]</em> switch is used on the command line (this is the case for automatic start-up).  The log contains enough name and connection information to allow you to re-register all \s-1XPA\s0 access points in case the name server process is terminated prematurely. For example, after the ds9 access point is registered,the log will contain the entry:</p><p>  add 838e2f67:1863 ds9 ds9 gs eric</p><p>If <em>xpans</em> is terminated but ds9 still is running, you can re-register both access points for the ds9 process by running:</p><p>  xpaset \-p 838e2f67:1863 \-nsconnect</p><p>Notice that the ip:port specifier is used with <em>xpaset</em> to bypass the need for contacting the name server (which does not have the name registered yet!)</p><p>The name server will keep a log of security information if the \-s [security log] switch is used on the command line. For each accepted connection, (including connections via the <em>xpaget</em> command), information will be logged about the host issuing the command and the parameters passed into the program. This is most useful when <em>xpans</em> is accepting connections from untrusted machines.</p><p>When an \s-1XPA\s0 access point is removed by a server using <em></em><em>XPAFree()</em><em></em>, the access information is removed from the name server.  If an XPA-enabled process is terminated, all names registered by that process will be removed automatically.  The log file is always updated to reflect the currently registered access points.</p><p>The name server itself has an \s-1XPA\s0 access point names <em>xpans</em> registered through which you can find out information about currently registered access points (assuming you have access to the name server; see \s-1XPA\s0 Access Control for more information). For each registered access point, the following information is returned:</p><p>  class         # class of the access point   name          # name of the access point   access        # allowed access (g=xpaget,s=xpaset,i=xpainfo)   id            # socket access method (host:port for inet, file for local/unix)   user          # user name of access point owner</p><p>For example, to display all currently registered access points, simply execute:</p><p>  xpaget xpans</p><p>Continuing the example of ds9 above, this will return:</p><p>  DS9 ds9 gs 838e2f67:1863 eric</p><p>If the same program has been started with different \s-1XPA\s0 access names, you can look up only names matching a specified template. For example, assume that ds9 has been started up using:</p><p>  ds9 &   ds9 \-title ds9\-1\-eric &   ds9 \-title ds9\-2\-eric &</p><p>To lookup all ds9 access points which end in \*(L".eric\*(R" and which can be accessed using <em>xpaset</em>, use:</p><p>  xpaget xpans "DS9:*.eric" "s" "*"</p><p>This will return:</p><p>  DS9 ds9\-2\-eric gs 838e29d3:42102 eric   DS9 ds9\-1\-eric gs 838e29d3:42105 eric</p><p>The third argument \*(L"*\*(R" requests all access points from all users. You also can specify a specific user name and only access points registered by that user will be returned.</p><p>The name server uses the <em>\s-1XPA_METHOD\s0</em> environment variable to determine whether it should listen for requests on \s-1INET\s0 or \s-1LOCAL\s0 sockets.  Since \s-1XPA\s0 access points also use this environment variable, the choice of socket method will be consistent.  Note that, when \s-1INET\s0 sockets are used, a local server can be accessed from remote machines if the <em>\s-1XPA_NSINET\s0</em> environment variable is set to point to the local machine.  See \s-1XPA\s0 Environment Variables for more information.</p><p>An experimental feature of xpans is its ability to act as a proxy to \s-1XPA\s0 servers behind firewalls that want to communicate with external processes.  The basic idea is the following: an \s-1XPA\s0 server (call it \*(L"foo\*(R") on host1, possibly behind a firewall, makes a remote connection to a proxy-enabled xpans program on host2 (specifying host2's \s-1XPA\s0 method). For example:</p><p>  xpaset \-p foo \-remote &apos;host2:28571&apos; + \-proxy   # on host1</p><p>When this is done, host2 can use xpaset, xpaget, and xpainfo calls to communicate with the \s-1XPA\s0 server foo. All command communication is performed via the xpans socket connection between foo on host1 and xpans on host2 (which was initiated by foo from inside the firewall). Data communication is similarly performed using a socket connection initiated on host1 (usually with a port value two greater than the port value of the main xpans socket connection). An xpaset or xpaget call on host2 contacts xpans, which performs an <em>XPASet()</em> or <em>XPAGet()</em> call to foo, passing commands and data back and forth between the two programs.</p><p>By default, proxy connections are not allowed by xpans. If the \-P switch is specified with a value of 1, proxy connection are allowed, but all proxy communication is performed in the same thread as xpans processing. If a value of 2 is specified, the proxy processing is performed in a separate thread (assuming pthreads are supported on your system). Because xpa callback processing of any type can take a long time and therefore can interfere with normal xpans processing, threaded proxy connections (\-P 2) are recommended.  When using proxy connections, it might also be useful to set the \s-1XPA_IOCALLSXPA\s0 environment variable, so that multiple proxy requests can be handled at the same time, instead of serially.</p><p>Note that this proxy interface to xpans is experimental. It is used to provide remote data analysis capabilities on the Chandra-Ed system using ds9.  (See http://chandra\-ed.cfa.harvard.edu and http://hea\-www.harvard.edu/saord/ds9 for more details). As always, please contact us if you have problems or questions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xpans&hellip;</h2>
        <div class="sectioncontent">
<p>See <a href="../man7/xpa.7.html"><strong>xpa</strong>(7)</a> for a list of \s-1XPA\s0 help pages</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xpamb.1.html"><span aria-hidden="true">&larr;</span> xpamb.1: The \s-1xpa\s0 message bus</a></li>
   <li class="next"><a href="xpaset.1.html">xpaset.1: Send data to one or more \s-1xpa\s0 servers <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
