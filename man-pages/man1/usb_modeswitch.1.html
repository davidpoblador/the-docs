<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>usb_modeswitch: Control the mode of 'multi-state' usb devices</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Control the mode of 'multi-state' usb devices">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="usb_modeswitch (1) manual">
  <meta name="twitter:description" content="Control the mode of 'multi-state' usb devices">
  <meta name="twitter:image" content="https://www.carta.tech/images/usb-modeswitch-usb_modeswitch-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/usb_modeswitch.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="usb_modeswitch (1) manual" />
  <meta property="og:description" content="Control the mode of 'multi-state' usb devices" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/usb-modeswitch-usb_modeswitch-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">usb_modeswitch<small> (1)</small></h1>
        <p class="lead">Control the mode of 'multi-state' usb devices</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/usb_modeswitch.1.html">
      <span itemprop="name">usb_modeswitch: Control the mode of 'multi-state' usb devices</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/usb-modeswitch/">
      <span itemprop="name">usb-modeswitch</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/usb_modeswitch.1.html">
      <span itemprop="name">usb_modeswitch: Control the mode of 'multi-state' usb devices</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>usb_modeswitch</strong> [<strong>-heWQDIvpVPmM23rwKdHSOBGTNALnsRiuagft</strong>] [<strong>-c </strong><em>filename</em><strong>]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Several new USB devices have their proprietary Windows drivers onboard, most of them WWAN and WLAN  dongles. When plugged in for the first time, they act like a flash storage and start installing the Windows driver from there. If the driver is already installed, it makes the storage device disappear and a new device, mainly composite with modem ports, shows up.</p><p>On Linux, in most cases the drivers are available as kernel modules, such as "usbserial" or "option". However, the device initially binds to "usb-storage" by default. <strong>usb_modeswitch</strong> can then send a provided bulk message (most likely a mass storage command) to the device; this message has to be determined by analyzing the actions of the Windows driver.</p><p>In some cases, USB control commands are used for switching. These cases are handled by custom functions, and no bulk message needs to be provided.</p><p>Usually, the program is distributed with a set of configurations for many known devices, which allows a fully automatic handling of a device upon insertion, made possible by combining usb_modeswitch with the wrapper script <strong>usb_modeswitch_dispatcher</strong> which is launched by the udev daemon.</p><p>Note that <strong>usb_modeswitch</strong> itself has no specific Linux dependencies.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>This program follows the usual GNU command line syntax, with long options starting with two dashes ('--').  A summary of options is included below.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>-h</strong> <strong>--help</strong>         
  </dt>
  <dd>
    <p>Show summary of options.</p>
  </dd>
  <dt>
    <strong>-e</strong> <strong>--version</strong>         
  </dt>
  <dd>
    <p>Print version information and exit</p>
  </dd>
  <dt>
    <strong>-v</strong> <strong>--default-vendor NUM</strong>         
  </dt>
  <dd>
    <p>Vendor ID to look for (mandatory), usually given as hex number (example: 0x12d1). Each USB device is identified by a number officialy assigned to the vendor by the USB association and a number for the respective model (product ID) chosen by the vendor</p>
  </dd>
  <dt>
    <strong>-p</strong> <strong>--default-product NUM</strong>         
  </dt>
  <dd>
    <p>Product ID to look for (mandatory)</p>
  </dd>
  <dt>
    <strong>-V</strong> <strong>--target-vendor NUM</strong>         
  </dt>
  <dd>
    <p>Target vendor ID. When given will be searched for and detected initially for information purposes. If success checking (option -s) is active, providing target IDs (vendor/product) or target class is recommended</p>
  </dd>
  <dt>
    <strong>-j</strong> <strong>--find-mbim</strong>         
  </dt>
  <dd>
    <p>Return configuration number with MBIM interface and exit.</p>
  </dd>
  <dt>
    <strong>-P</strong> <strong>--target-product NUM</strong>         
  </dt>
  <dd>
    <p>Target product ID</p>
  </dd>
  <dt>
    <strong>-b</strong> <strong>--bus-num NUM</strong>         
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>-g</strong> <strong>--device-num NUM</strong>         
  </dt>
  <dd>
    <p>If bus and device number are provided, the handling of a specific device on a specific USB port is guaranteed, in contrast to using only the USB ID. This is important if there are multiple similar devices on a system</p>
  </dd>
  <dt>
    <strong>-C</strong> <strong>--target-class NUM</strong>         
  </dt>
  <dd>
    <p>Target Device Class according to the USB specification. Some devices keep their original vendor/product ID after successful switching. To prevent them from being treated again, the device class can be checked. For unswitched devices it is always 8 (storage class), for switched modems it is often 0xff (vendor specific). In composite modes, the class of the first interface is watched</p>
  </dd>
  <dt>
    <strong>-m</strong> <strong>--message-endpoint NUM</strong>         
  </dt>
  <dd>
    <p>A specific endpoint to use for data transfers. Only for testing purposes; usually endpoints are determined from the device attributes</p>
  </dd>
  <dt>
    <strong>-M</strong> <strong>--message-content STRING</strong>         
  </dt>
  <dd>
    <p>A bulk message to send as a switching command. Provided as a hexadecimal string</p>
  </dd>
  <dt>
    <strong>-2, -3</strong>  <strong>--message-content2, --message-content3 STRING</strong>         
  </dt>
  <dd>
    <p>Additional bulk messages to send as switching commands. Provided as hexadecimal strings. When used with mass storage commands, setting <strong>--need-response</strong> is strongly advised to comply with specifications and to avoid likely errors</p>
  </dd>
  <dt>
    <strong>-w</strong> <strong>--release-delay NUM</strong>         
  </dt>
  <dd>
    <p>After issuing all bulk messages, wait for NUM milliseconds before releasing the interface. Required for some modems on older systems (especially after an EJECT message)</p>
  </dd>
  <dt>
    <strong>-n</strong> <strong>--need-response</strong>         
  </dt>
  <dd>
    <p>Read the response (command status wrapper) to a mass storage command transfer. Some devices have trouble switching if the response is not read; most are disappearing right away. When sending multiple mass storage commands with <strong>-2</strong> and <strong>-3</strong>, this may need to be set to avoid transfer errors</p>
  </dd>
  <dt>
    <strong>-r</strong> <strong>--response-endpoint NUM</strong>         
  </dt>
  <dd>
    <p>Try to read the response to a storage command from there if option -n is active. Only for testing purposes; usually endpoints are determined from the device attributes</p>
  </dd>
  <dt>
    <strong>-K</strong> <strong>--std-eject</strong>         
  </dt>
  <dd>
    <p>Apply the standard SCSI sequence of "Allow Medium Removal" and "Eject". Implies <strong>-n</strong>. One 'Message' can be added with <strong>-M</strong> that will be transmitted after the eject sequence</p>
  </dd>
  <dt>
    <strong>-d</strong> <strong>--detach-only</strong>         
  </dt>
  <dd>
    <p>Just detach the current driver. This is sufficient for some early devices to switch successfully. Otherwise this feature can be used as a 'scalpel' for special cases, like separating the driver from individual interfaces</p>
  </dd>
  <dt>
    <strong>-H</strong> <strong>--huawei-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by older Huawei devices</p>
  </dd>
  <dt>
    <strong>-J</strong> <strong>--huawei-new-mode</strong>         
  </dt>
  <dd>
    <p>Send a specific bulk message used by all newer Huawei devices</p>
  </dd>
  <dt>
    <strong>-S</strong> <strong>--sierra-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by Sierra devices</p>
  </dd>
  <dt>
    <strong>-G</strong> <strong>--gct-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by GCT chipsets</p>
  </dd>
  <dt>
    <strong>-T</strong> <strong>--kobil-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by Kobil devices</p>
  </dd>
  <dt>
    <strong>-N</strong> <strong>--sequans-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by Sequans chipset</p>
  </dd>
  <dt>
    <strong>-A</strong> <strong>--mobileaction-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by the MobileAction device</p>
  </dd>
  <dt>
    <strong>-B</strong> <strong>--qisda-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by Qisda devices</p>
  </dd>
  <dt>
    <strong>-E</strong> <strong>--quanta-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by Quanta devices</p>
  </dd>
  <dt>
    <strong>-F</strong> <strong>--pantech-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by Pantech devices</p>
  </dd>
  <dt>
    <strong>-Z</strong> <strong>--blackberry-mode</strong>         
  </dt>
  <dd>
    <p>Send a special control message used by some newer Blackberry devices</p>
  </dd>
  <dt>
    <strong>-O</strong> <strong>--sony-mode</strong>         
  </dt>
  <dd>
    <p>Apply a special sequence used by Sony Ericsson devices. Implies option --check-success</p>
  </dd>
  <dt>
    <strong>-L</strong> <strong>--cisco-mode</strong>         
  </dt>
  <dd>
    <p>Send a sequence of bulk messages used by Cisco devices</p>
  </dd>
  <dt>
    <strong>-R</strong> <strong>--reset-usb</strong>         
  </dt>
  <dd>
    <p>Send a USB reset command to the device. Can be combined with any switching method or stand alone. It is always done as the last step of all device interactions. Few devices need it to complete the switching; apart from that it may be useful during testing</p>
  </dd>
  <dt>
    <strong>-c</strong> <strong>--config-file FILENAME</strong>         
  </dt>
  <dd>
    <p>Use a specific config file. If any ID or switching options are given as command line parameters, this option is ignored. In that case all mandatory parameters have to be provided on the command line</p>
  </dd>
  <dt>
    <strong>-f</strong> <strong>--long-config STRING</strong>         
  </dt>
  <dd>
    <p>Provide device details in config file syntax as a multiline string on the command line</p>
  </dd>
  <dt>
    <strong>-t</strong> <strong>--stdinput</strong>         
  </dt>
  <dd>
    <p>Read the device details in config file syntax from standard input, e.g. redirected from a command pipe (multiline text)</p>
  </dd>
  <dt>
    <strong>-Q</strong> <strong>--quiet</strong>         
  </dt>
  <dd>
    <p>Don't show progress or error messages</p>
  </dd>
  <dt>
    <strong>-W</strong> <strong>--verbose</strong>         
  </dt>
  <dd>
    <p>Print all settings before running and show libusb debug messages</p>
  </dd>
  <dt>
    <strong>-D</strong> <strong>--sysmode</strong>         
  </dt>
  <dd>
    <p>Changes the behaviour of the program slightly. A success message including the effective target device ID is put out and a syslog notice is issued. Mainly for integration with a wrapper script</p>
  </dd>
  <dt>
    <strong>-s</strong> <strong>--check-success NUM</strong>         
  </dt>
  <dd>
    <p>After switching, keep checking for the result up to max. NUM seconds. If target IDs or target class were provided, their appearance indicates certain success. Otherwise the disconnection of the original device is rated as likely proof</p>
  </dd>
  <dt>
    <strong>-I</strong> <strong>--no-inquire</strong>         
  </dt>
  <dd>
    <p>do not obtain SCSI attributes from device (default is on). For proper identification of differing devices the attributes of the storage part provide valuable information. This is not needed for devices that are known and supported</p>
  </dd>
  <dt>
    <strong>-i</strong> <strong>--interface NUM</strong>         
  </dt>
  <dd>
    <p>Select initial USB interface (default: 0). Only for testing purposes</p>
  </dd>
  <dt>
    <strong>-u</strong> <strong>--configuration NUM</strong>         
  </dt>
  <dd>
    <p>Select USB configuration (applied after any other possible switching actions)</p>
  </dd>
  <dt>
    <strong>-a</strong> <strong>--altsetting NUM</strong>         
  </dt>
  <dd>
    <p>Select alternative USB interface setting (applied after switching). Mainly for testing</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was originally written by Didier Raboud (didier@raboud.com) for the <strong>Debian</strong> system. Additions made by Josua Dietze. Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2 or any later version published by the Free Software Foundation.</p><p>The complete text of the current GNU General Public License can be found in http://www.gnu.org/licenses/gpl.txt</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="usb-devices.1.html"><span aria-hidden="true">&larr;</span> usb-devices.1: Print usb device details</a></li>
   <li class="next"><a href="usb_modeswitch_dispatcher.1.html">usb_modeswitch_dispatcher.1: Wrapper for usb_modeswitch, not intended for direct invocation. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
