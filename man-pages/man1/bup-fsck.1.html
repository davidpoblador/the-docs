<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bup-fsck: Verify or repair a bup repository</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Verify or repair a bup repository">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bup-fsck (1) manual">
  <meta name="twitter:description" content="Verify or repair a bup repository">
  <meta name="twitter:image" content="https://www.carta.tech/images/bup-doc-bup-fsck-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/bup-fsck.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bup-fsck (1) manual" />
  <meta property="og:description" content="Verify or repair a bup repository" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/bup-doc-bup-fsck-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bup-fsck<small> (1)</small></h1>
        <p class="lead">Verify or repair a bup repository</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/bup-fsck.1.html">
      <span itemprop="name">bup-fsck: Verify or repair a bup repository</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/bup-doc/">
      <span itemprop="name">bup-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/bup-fsck.1.html">
      <span itemprop="name">bup-fsck: Verify or repair a bup repository</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>bup fsck [-r][-g] [-v][&#92;--quick] [-j <em>jobs</em>][&#92;--par2-ok] [--disable-par2][filenames...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>bup&nbsp;fsck is a tool for validating bup repositories in the same way that git&nbsp;fsck validates git repositories.</p><p>It can also generate and/or use "recovery blocks" using the <a href="../man1/par2.1.html"><strong>par2</strong>(1)</a> tool (if you have it installed). This allows you to recover from damaged blocks covering up to 5% of your .pack files.</p><p>In a normal backup system, damaged blocks are less important, because there tends to be enough data duplicated between backup sets that a single damaged backup set is non-critical. In a deduplicating backup system like bup, however, no block is ever stored more than once, even if it is used in every single backup. If that block were to be unrecoverable, <em>all</em> your backup sets would be damaged at once. Thus, it\[aq]s important to be able to verify the integrity of your backups and recover from disk errors if they occur.</p><p><em>WARNING</em>: bup fsck\[aq]s recovery features are not available unless you have the free <a href="../man1/par2.1.html"><strong>par2</strong>(1)</a> package installed on your bup server.</p><p><em>WARNING</em>: bup fsck obviously cannot recover from a complete disk failure. If your backups are important, you need to carefully consider redundancy (such as using RAID for multi-disk redundancy, or making off-site backups for site redundancy).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-r, --repair</strong></p>
  </dt>
  <dd>
    <p>attempt to repair any damaged packs using existing recovery blocks. (Requires <a href="../man1/par2.1.html"><strong>par2</strong>(1)</a>.)</p>
  </dd>
  <dt>
    <p><strong>-g, --generate</strong></p>
  </dt>
  <dd>
    <p>generate recovery blocks for any packs that don\[aq]t already have them. (Requires <a href="../man1/par2.1.html"><strong>par2</strong>(1)</a>.)</p>
  </dd>
  <dt>
    <p><strong>-v, --verbose</strong></p>
  </dt>
  <dd>
    <p>increase verbosity (can be used more than once).</p>
  </dd>
  <dt>
    <p><strong>--quick</strong></p>
  </dt>
  <dd>
    <p>don\[aq]t run a full git&nbsp;verify-pack on each pack file; instead just check the final checksum. This can cause a significant speedup with no obvious decrease in reliability. However, you may want to avoid this option if you\[aq]re paranoid. Has no effect on packs that already have recovery information.</p>
  </dd>
  <dt>
    <p><strong>-j, --jobs=</strong><em>numjobs</em></p>
  </dt>
  <dd>
    <p>maximum number of pack verifications to run at a time. The optimal value for this option depends how fast your CPU can verify packs vs. your disk throughput. If you run too many jobs at once, your disk will get saturated by seeking back and forth between files and performance will actually decrease, even if <em>numjobs</em> is less than the number of CPU cores on your system. You can experiment with this option to find the optimal value.</p>
  </dd>
  <dt>
    <p><strong>--par2-ok</strong></p>
  </dt>
  <dd>
    <p>immediately return 0 if <a href="../man1/par2.1.html"><strong>par2</strong>(1)</a> is installed and working, or 1 otherwise. Do not actually check anything.</p>
  </dd>
  <dt>
    <p><strong>--disable-par2</strong></p>
  </dt>
  <dd>
    <p>pretend that <a href="../man1/par2.1.html"><strong>par2</strong>(1)</a> is not installed, and ignore all recovery blocks.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<ul>
<li>
<pre>
#&nbsp;generate&nbsp;recovery&nbsp;blocks&nbsp;for&nbsp;all&nbsp;packs&nbsp;that&nbsp;don\[aq]t
#&nbsp;have&nbsp;them
bup&nbsp;fsck&nbsp;-g

#&nbsp;generate&nbsp;recovery&nbsp;blocks&nbsp;for&nbsp;a&nbsp;particular&nbsp;pack
bup&nbsp;fsck&nbsp;-g&nbsp;~/.bup/objects/pack/153a1420cb1c8*.pack

#&nbsp;check&nbsp;all&nbsp;packs&nbsp;for&nbsp;correctness&nbsp;(can&nbsp;be&nbsp;very&nbsp;slow!)
bup&nbsp;fsck

#&nbsp;check&nbsp;all&nbsp;packs&nbsp;for&nbsp;correctness&nbsp;and&nbsp;recover&nbsp;any
#&nbsp;damaged&nbsp;ones
bup&nbsp;fsck&nbsp;-r

#&nbsp;check&nbsp;a&nbsp;particular&nbsp;pack&nbsp;for&nbsp;correctness&nbsp;and&nbsp;recover
#&nbsp;it&nbsp;if&nbsp;damaged
bup&nbsp;fsck&nbsp;-r&nbsp;~/.bup/objects/pack/153a1420cb1c8*.pack

#&nbsp;check&nbsp;if&nbsp;recovery&nbsp;blocks&nbsp;are&nbsp;available&nbsp;on&nbsp;this&nbsp;system
if&nbsp;bup&nbsp;fsck&nbsp;--par2-ok;&nbsp;then
&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"par2&nbsp;is&nbsp;ok"
fi

</pre>
</li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO bup-fsck&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/bup-damage.1.html"><strong>bup-damage</strong>(1)</a>, <strong>fsck</strong>(1), <a href="../man1/git-fsck.1.html"><strong>git-fsck</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUP</h2>
        <div class="sectioncontent">
<p>Part of the <a href="../man1/bup.1.html"><strong>bup</strong>(1)</a> suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Avery Pennarun &lt;apenwarr@gmail.com&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bup-drecurse.1.html"><span aria-hidden="true">&larr;</span> bup-drecurse.1: Recursively list files in your filesystem</a></li>
   <li class="next"><a href="bup-ftp.1.html">bup-ftp.1: Ftp-like client for navigating bup repositories <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
