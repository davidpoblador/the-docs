<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>antsRegistration: Part of ants registration suite</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Part of ants registration suite">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="antsRegistration (1) manual">
  <meta name="twitter:description" content="Part of ants registration suite">
  <meta name="twitter:image" content="https://www.carta.tech/images/ants-antsRegistration-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/antsRegistration.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="antsRegistration (1) manual" />
  <meta property="og:description" content="Part of ants registration suite" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ants-antsRegistration-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">antsRegistration<small> (1)</small></h1>
        <p class="lead">Part of ants registration suite</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/antsRegistration.1.html">
      <span itemprop="name">antsRegistration: Part of ants registration suite</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ants/">
      <span itemprop="name">ants</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/antsRegistration.1.html">
      <span itemprop="name">antsRegistration: Part of ants registration suite</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<h3>COMMAND:</h3>
<ul>
<li><p>antsRegistration</p></li><li><p>This program is a user-level registration application meant to utilize ITKv4-only classes. The user can specify any number of "stages" where a stage consists of a transform; an image metric; and iterations, shrink factors, and smoothing sigmas for each level.Note that dimensionality, metric, transform, output, convergence, shrink-factors and smoothing-sigmas parameters are mandatory.</p></li>
</ul>
<h3>OPTIONS:</h3>
<p><strong>-d</strong>, <strong>--dimensionality</strong> 2/3</p><ul>
<li><p>This option forces the image to be treated as a specified-dimensional image. If not specified, we try to infer the dimensionality from the input image. <strong>-o</strong>, <strong>--output</strong> outputTransformPrefix</p></li><li><p>[outputTransformPrefix,&lt;outputWarpedImage&gt;,&lt;outputInverseWarpedImage&gt;]</p></li><li><p>Specify the output transform prefix (output format is .nii.gz ). Optionally, one can choose to warp the moving image to the fixed space and, if the inverse transform exists, one can also output the warped fixed image. Note that only the images specified in the first metric call are warped. Use antsApplyTransforms to warp other images using the resultant transform(s). <strong>-a</strong>, <strong>--write-composite-transform</strong> 1/(0)</p></li><li><p>Boolean specifying whether or not the composite transform (and its inverse, if it exists) should be written to an hdf5 composite file. This is false by default so that only the transform for each stage is written to file. &lt;VALUES&gt;: 0 <strong>-p</strong>, <strong>--print-similarity-measure-interval</strong> &lt;unsignedIntegerValue&gt;</p></li><li><p>Prints out the CC similarity metric measure between the full-size input fixed and the transformed moving images at each iteration a value of 0 (the default) indicates that the full scale computation should not take placeany value greater than 0 represents the interval of full scale metric computation. &lt;VALUES&gt;: 0 <strong>-v</strong>, <strong>--write-interval-volumes</strong> &lt;unsignedIntegerValue&gt;</p></li><li><p>Writes out the output volume at each iteration. It helps to present the registration process as a short movie a value of 0 (the default) indicates that this option should not take placeany value greater than 0 represents the interval between the iterations which outputs are written to the disk. &lt;VALUES&gt;: 0 <strong>-z</strong>, <strong>--collapse-output-transforms</strong> (1)/0</p></li><li><p>Collapse output transforms. Specifically, enabling this option combines all adjacent transforms wherepossible. All adjacent linear transforms are written to disk in the forman itk affine transform (called xxxGenericAffine.mat). Similarly, all adjacent displacement field transforms are combined when written to disk (e.g. xxxWarp.nii.gz and xxxInverseWarp.nii.gz (if available)). &lt;VALUES&gt;: 1</p></li>
</ul>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-n</strong>, <strong>--interpolation</strong> Linear</p>
  </dt>
  <dd>
    <p>NearestNeighbor MultiLabel[&lt;sigma=imageSpacing&gt;,&lt;alpha=4.0&gt;] Gaussian[&lt;sigma=imageSpacing&gt;,&lt;alpha=1.0&gt;] BSpline[&lt;order=3&gt;] CosineWindowedSinc WelchWindowedSinc HammingWindowedSinc LanczosWindowedSinc</p><ul>
<li><p>Several interpolation options are available in ITK. These have all been made available. Currently the interpolator choice is only used to warp (and possibly inverse warp) the final output image(s). <strong>-g</strong>, <strong>--restrict-deformation</strong> PxQxR</p></li><li><p>This option allows the user to restrict the optimization of the displacement field transform on a per-component basis. For example, if one wants to limit the deformation of a 3-D volume to the first two dimensions, this is possible by specifying a weight vector of '1x1x0'.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-q</strong>, <strong>--initial-fixed-transform</strong> initialTransform</p>
  </dt>
  <dd>
    <p>[initialTransform,&lt;useInverse&gt;] [fixedImage,movingImage,initializationFeature]</p><ul>
<li><p>Specify the initial fixed transform(s) which get immediately incorporated into the composite transform. The order of the transforms is stack-esque in that the last transform specified on the command line is the first to be applied. In addition to initialization with ITK transforms, the user can perform an initial translation alignment by specifying the fixed and moving images and selecting an initialization feature. These features include using the geometric center of the images (=0), the image intensities (=1), or the origin of the images (=2).</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-r</strong>, <strong>--initial-moving-transform</strong> initialTransform</p>
  </dt>
  <dd>
    <p>[initialTransform,&lt;useInverse&gt;] [fixedImage,movingImage,initializationFeature]</p><ul>
<li><p>Specify the initial moving transform(s) which get immediately incorporated into the composite transform. The order of the transforms is stack-esque in that the last transform specified on the command line is the first to be applied. In addition to initialization with ITK transforms, the user can perform an initial translation alignment by specifying the fixed and moving images and selecting an initialization feature. These features include using the geometric center of the images (=0), the image intensities (=1), or the origin of the images (=2). <strong>-m</strong>, <strong>--metric</strong> CC[fixedImage,movingImage,metricWeight,radius,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]</p></li><li><p>MI[fixedImage,movingImage,metricWeight,numberOfBins,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;] Mattes[fixedImage,movingImage,metricWeight,numberOfBins,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;] MeanSquares[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;] Demons[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;] GC[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;] ICP[fixedPointSet,movingPointSet,metricWeight,&lt;samplingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;] PSE[fixedPointSet,movingPointSet,metricWeight,&lt;samplingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;,&lt;pointSetSigma=&gt;,&lt;kNeighborhood=50&gt;] JHCT[fixedPointSet,movingPointSet,metricWeight,&lt;samplingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;,&lt;pointSetSigma=&gt;,&lt;kNeighborhood=50&gt;,&lt;alpha=1.1&gt;,&lt;useAnisotropicCovariances=1&gt;]</p></li><li><p>These image metrics are available--- CC: ANTS neighborhood cross correlation, MI: Mutual information, Demons: (Thirion), MeanSquares, and GC: Global Correlation. The "metricWeight" variable is used to modulate the per stage weighting of the metrics. The metrics can also employ a sampling strategy defined by a sampling percentage. The sampling strategy defaults to 'None' (aka a dense sampling of one sample per voxel), otherwise it defines a point set over which to optimize the metric. The point set can be on a regular lattice or a random lattice of points slightly perturbed to minimize aliasing artifacts. samplingPercentage defines the fraction of points to select from the domain. In addition, three point set metrics are available: Euclidean (ICP), Point-set expectation (PSE), and Jensen-Havrda-Charvet-Tsallis (JHCT).</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-t</strong>, <strong>--transform</strong> Rigid[gradientStep]</p>
  </dt>
  <dd>
    <p>Affine[gradientStep] CompositeAffine[gradientStep] Similarity[gradientStep] Translation[gradientStep] BSpline[gradientStep,meshSizeAtBaseLevel] GaussianDisplacementField[gradientStep,updateFieldVarianceInVoxelSpace,totalFieldVarianceInVoxelSpace] BSplineDisplacementField[gradientStep,updateFieldMeshSizeAtBaseLevel,totalFieldMeshSizeAtBaseLevel,&lt;splineOrder=3&gt;] TimeVaryingVelocityField[gradientStep,numberOfTimeIndices,updateFieldVarianceInVoxelSpace,updateFieldTimeVariance,totalFieldVarianceInVoxelSpace,totalFieldTimeVariance] TimeVaryingBSplineVelocityField[gradientStep,velocityFieldMeshSize,&lt;numberOfTimePointSamples=4&gt;,&lt;splineOrder=3&gt;] SyN[gradientStep,updateFieldVarianceInVoxelSpace,totalFieldVarianceInVoxelSpace] BSplineSyN[gradientStep,updateFieldMeshSizeAtBaseLevel,totalFieldMeshSizeAtBaseLevel,&lt;splineOrder=3&gt;] Exponential[gradientStep,updateFieldVarianceInVoxelSpace,velocityFieldVarianceInVoxelSpace,&lt;numberOfIntegrationSteps&gt;] BSplineExponential[gradientStep,updateFieldMeshSizeAtBaseLevel,velocityFieldMeshSizeAtBaseLevel,&lt;numberOfIntegrationSteps&gt;,&lt;splineOrder=3&gt;]</p><ul>
<li><p>Several transform options are available. The gradientStep or learningRate characterizes the gradient descent optimization and is scaled appropriately for each transform using the shift scales estimator. Subsequent parameters are transform-specific and can be determined from the usage. For the B-spline transforms one can also specify the smoothing in terms of spline distance (i.e. knot spacing).</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-c</strong>, <strong>--convergence</strong> MxNxO</p>
  </dt>
  <dd>
    <p>[MxNxO,&lt;convergenceThreshold=1e-6&gt;,&lt;convergenceWindowSize=10&gt;]</p><ul>
<li><p>Convergence is determined from the number of iterations per level and is determined by fitting a line to the normalized energy profile of the last N iterations (where N is specified by the window size) and determining the slope which is then compared with the convergence threshold. <strong>-s</strong>, <strong>--smoothing-sigmas</strong> MxNxO...</p></li><li><p>Specify the sigma of gaussian smoothing at each level. Units are given in terms of voxels ('vox') or physical spacing ('mm'). Example usage is '4x2x1mm' and '4x2x1vox' where no units implies voxel spacing. <strong>-f</strong>, <strong>--shrink-factors</strong> MxNxO...</p></li><li><p>Specify the shrink factor for the virtual domain (typically the fixed image) at each level. <strong>-u</strong>, <strong>--use-histogram-matching</strong></p></li><li><p>Histogram match the images before registration. <strong>-l</strong>, <strong>--use-estimate-learning-rate-once</strong></p></li><li><p>turn on the option that lets you estimate the learning rate step size only at the beginning of each level. * useful as a second stage of fine-scale registration. <strong>-w</strong>, <strong>--winsorize-image-intensities</strong> [lowerQuantile,upperQuantile]</p></li><li><p>Winsorize data based on specified quantiles. <strong>-x</strong>, <strong>--masks</strong> [fixedImageMask,movingImageMask]</p></li><li><p>Image masks to limit voxels considered by the metric. <strong>--float</strong></p></li><li><p>Use 'float' instead of 'double' for computations. &lt;VALUES&gt;: 0 <strong>-h</strong></p></li><li><p>Print the help menu (short version). <strong>--help</strong></p></li><li><p>Print the help menu. &lt;VALUES&gt;: 1</p></li>
</ul>
  </dd>

</dl>


        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="antsMotionCorrStats.1.html"><span aria-hidden="true">&larr;</span> antsMotionCorrStats.1: Part of ants registration suite</a></li>
   <li class="next"><a href="any2djvu.1.html">any2djvu.1: Convert .ps/.ps.gz/.pdf to .djvu <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
