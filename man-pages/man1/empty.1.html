<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>empty: Run processes under pseudo-terminal sessions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run processes under pseudo-terminal sessions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="empty (1) manual">
  <meta name="twitter:description" content="Run processes under pseudo-terminal sessions">
  <meta name="twitter:image" content="https://www.carta.tech/images/empty-expect-empty-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/empty.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="empty (1) manual" />
  <meta property="og:description" content="Run processes under pseudo-terminal sessions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/empty-expect-empty-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">empty<small> (1)</small></h1>
        <p class="lead">Run processes under pseudo-terminal sessions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/empty.1.html">
      <span itemprop="name">empty: Run processes under pseudo-terminal sessions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/empty-expect/">
      <span itemprop="name">empty-expect</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/empty.1.html">
      <span itemprop="name">empty: Run processes under pseudo-terminal sessions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>empty</strong> -f [-i fifo1 -o fifo2] [-p file.pid] [-L file.log] command [command args]</p><p><strong>empty</strong> -w [-Sv] [-t n] [-i fifo2 -o fifo1] key1 [answer1] ... [keyX answerX]</p><p><strong>empty</strong> -s [-Sc] -o fifo1 [request]</p><p><strong>empty</strong> -r [-b size] [-t n] [-i fifo2]</p><p><strong>empty</strong> -l</p><p><strong>empty</strong> -k [pid] [signal]</p><p><strong>empty</strong> -h</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>empty</strong> is an utility that provides a simple interface to execute and/or interact with processes under pseudo-terminal sessions. This tool is definitely useful in programming of shell scripts which are used to communicate with interactive programs like telnet or ftp. In some cases <strong>empty</strong> can be a substitution for TCL/expect or other similar programming tools.</p><p>There are several common forms of command lines for <strong>empty.</strong> But the first execution of <strong>empty</strong> is usually a start in the daemon mode to <strong>fork</strong> a new <strong>command</strong> (process) under PTY-session. This can be done with <strong>-f</strong> key. An interface for the input and output data channels of the forked process is performed by two fifo files which names may be specified with <strong>-i</strong> and <strong>-o</strong> keys. These files are automatically created/deleted any time you start/exit <strong>empty</strong> daemon, so you must not create them manually. If you did not specify these fifo files in the command line, <strong>empty</strong> names them by itself basing on its PID and PID of forked PTY process.</p><p>At this point any application can easily communicate with forked process by writing data to the input fifo and reading answers from the output fifo, see <strong>EXAMPLES</strong> section for the details. To simplify this operations, <strong>empty</strong> offers an interface to just <strong>send</strong> any data (use <strong>-s</strong> key), or even to <strong>watch</strong> the output fifo for multiple <strong>keyphrases</strong> and reply to the input fifo with one of the <strong>responses</strong> (see <strong>-w</strong> key).</p><p><strong>Note!</strong> Input fifo for <strong>empty -f ...</strong> is usually an output fifo for <strong>empty -w</strong> and <strong>empty -s</strong> forms. And output fifo of <strong>empty -f ...</strong> is an input fifo for <strong>empty -w ...</strong></p><p>If something goes wrong the forked process may be <strong>killed</strong> by the standard kill command, or using <strong>-k</strong> key of <strong>empty.</strong> See <strong>-p</strong> option to save PID of empty daemon process.</p><p>The following options are available:</p>
<dl class='dl-vertical'>
  <dt>
    <p>-f</p>
  </dt>
  <dd>
    <p>fork, spawn, start or execute a new process specified by the <strong>command</strong> and its arguments. If you omit fifo files, <strong>empty</strong> with its job control algorithm will create them under /tmp directory using this templates: empty.PPID.PID.in and empty.PPID.PID.out, here PPID is usually your shell system process ID and PID is system process ID of empty-daemon.</p>
  </dd>
  <dt>
    <p>-s</p>
  </dt>
  <dd>
    <p>send data (request) to the forked process. If fifo file was not specified with <strong>-o</strong> key, <strong>empty</strong> will try to find an automatically created fifo file it in /tmp directory. Instead of command line you can send your <strong>request</strong> or data directly to standard input (stdin) of <strong>empty</strong></p>
  </dd>
  <dt>
    <p>-w</p>
  </dt>
  <dd>
    <p><strong>watch</strong> for one or more <strong>keyphrases</strong> and if specified send the appropriated <strong>response</strong> to the input fifo. If <strong>response</strong> is not set, <strong>empty</strong> waits for the proper <strong>keyphrase</strong> then exits. With <strong>-w</strong> key <strong>empty</strong> returns the number of matched keyphrase-response pair, or 255 if fails to find this match (see -t key for details of possible exit on timeout).</p>
  </dd>
  <dt>
    <p>-r</p>
  </dt>
  <dd>
    <p>read from output FIFO one line (default) or one block of data (if <strong>-b size</strong> was specified). If <strong>-t n</strong> key was placed, exit on timeout.</p>
  </dd>
  <dt>
    <p>-l</p>
  </dt>
  <dd>
    <p>list automatically created jobs by your shell. <strong>NB!</strong> Your custom jobs, which fifo files you specified with <strong>-i</strong> and <strong>-o</strong> keys, are not displayed. So if you did not specify fifo files with <strong>-i</strong> and <strong>-o</strong> keys all operations are done under the job marked <strong>current</strong></p>
  </dd>
  <dt>
    <p>-k</p>
  </dt>
  <dd>
    <p>send <strong>signal</strong> to the process with <strong>pid.</strong> If you did not specify pid, <strong>empty</strong> tries to find it within the list of automatically created jobs. If <strong>signal</strong> is omitted the default SIGTERM is used.</p>
  </dd>
  <dt>
    <p>-h</p>
  </dt>
  <dd>
    <p>print short help message and exit</p>
  </dd>
  <dt>
    <p>-i fifo1</p>
  </dt>
  <dd>
    <p>a fifo file, which is used as input for a forked process.</p>
  </dd>
  <dt>
    <p>-o fifo2</p>
  </dt>
  <dd>
    <p>a fifo file, which is used as output for a forked process.</p>
  </dd>
  <dt>
    <p>-L file.log</p>
  </dt>
  <dd>
    <p>This option allows to log the whole <strong>empty</strong> session to a file. Marks &gt;&gt;&gt; and &lt;&lt;&lt; show the directions of data flow.</p>
  </dd>
  <dt>
    <p>--logfile-mode=mode</p>
  </dt>
  <dd>
    <p>This option allows to choose the mode of the log file created with the -L option. The default mode is 0600.</p>
  </dd>
  <dt>
    <p>-p file.pid</p>
  </dt>
  <dd>
    <p>Save PID of empty daemon process to a file</p>
  </dd>
  <dt>
    <p>-t n</p>
  </dt>
  <dd>
    <p>If input FIFO is empty, wait for n seconds (default is 10) to receive the <strong></strong> keyphrase then exit on timeout with 255 code.</p>
  </dd>
  <dt>
    <p>-c</p>
  </dt>
  <dd>
    <p>force <strong>empty</strong> to use stdin for data or requests.</p>
  </dd>
  <dt>
    <p>-S</p>
  </dt>
  <dd>
    <p>Strip the last character from the input. Works with -s and -w keys</p>
  </dd>
  <dt>
    <p>-v</p>
  </dt>
  <dd>
    <p>kvazi verbose mode. Show all contents of received buffer.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>Start a new PTY-session with telnet to localhost:</p>
  </dt>
  <dd>
    
<pre>
	empty -f -i in.fifo -o out.fifo -p empty.pid -L empty.log telnet localhost
</pre>

  </dd>
  <dt>
    <p>Interact with telnet:</p>
  </dt>
  <dd>
    
<pre>
	empty -w -i out.fifo -o in.fifo ogin 'my_user&#92;n'
	empty -w -i out.fifo -o in.fifo assword 'my_password&#92;n'
</pre>

  </dd>
  <dt>
    <p>Send commands to telnet with empty:</p>
  </dt>
  <dd>
    
<pre>
	empty -s -o in.fifo who
	empty -s -o in.fifo "ls -la /&#92;n"
</pre>

  </dd>
  <dt>
    <p>The same using STDIN:</p>
  </dt>
  <dd>
    
<pre>
	echo who | empty -s -o in.fifo
	echo "ls -la /" | empty -s -o in.fifo
</pre>

  </dd>
  <dt>
    <p>Just cat output from telnet:</p>
  </dt>
  <dd>
    
<pre>
	cat out.fifo
</pre>

  </dd>
  <dt>
    <p>Read one line from out.fifo:</p>
  </dt>
  <dd>
    
<pre>
	empty -r -i out.fifo
</pre>

  </dd>
  <dt>
    <p>Send commands to telnet with ordinary echo:</p>
  </dt>
  <dd>
    
<pre>
	echo "who am i" &gt; in.fifo
	echo "uname -a" &gt; in.fifo
</pre>

  </dd>
  <dt>
    <p>Kill a process with PID 1234:</p>
  </dt>
  <dd>
    
<pre>
	empty -k 1234
or
	kill 1234
Telnet session with automatically created jobs:
	empty -f telnet localhost
</pre>

  </dd>
  <dt>
    <p>Interact with telnet using job control:</p>
  </dt>
  <dd>
    
<pre>
	empty -w ogin 'my_user&#92;n'
	empty -w assword 'my_password&#92;n'
</pre>

  </dd>
  <dt>
    <p>List automatically created jobs:</p>
  </dt>
  <dd>
    
<pre>
	empty -l

	PPID    PID     TYPE    FILENAME
	479     706     in      /tmp/empty.479.706.in
	479     706     out     /tmp/empty.479.706.out
	479     711     in      /tmp/empty.479.711.in
	479     711     out     /tmp/empty.479.711.out

	479     711     current
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SECURITY</h2>
        <div class="sectioncontent">
<p>It is considered insecure to send a password in the command line like this:</p>
<pre>
	empty -w assword 'my_password&#92;n'

</pre>
<p>or like this:</p>
<pre>
	empty -s 'my_password&#92;n'

</pre>
<p>The reason is that the command line arguments are visible to the system while <strong>empty</strong> is running. Any local user can see them with ps(1), sometimes they are visible even remotely with <strong>finger</strong>(1). Also your server may have some monitoring tools which may store the output from ps(1) in their logs. There are also other, more complicated ways to compromise this information. Generally, you should take command line arguments as (possibly) visible to every one unless you really know what you're doing.</p><p><strong>empty</strong> with '-s' flag runs quickly in most cases, but still it can hang for a number of reasons (like fifo overloading), and even if it runs quick you still cannot be sure that no one will see its command line arguments even in this short time. <strong>empty</strong> with '-w' flag is even worse because it must wait for the keyphrase.</p><p>A better way to send the password to the supervised program is to read it from file:</p>
<pre>
	empty -s [common options] &lt;./password-file

</pre>
<p>or from a pipe:</p>
<pre>
	get-password-of-user "$user" |empty -s [common options]

</pre>
<p>You should still make sure that you do not send any password via command line while creating this file, and certainly you should set some safe permissions to this file AND its directory (with the parent directories) before reading the password from the file OR writing the password to it.</p><p>Another possible way is to use your shell's builtin (but see below):</p>
<pre>
	echo "$password" |empty -s [common options]

</pre>
<p>Many shells like <a href="../man1/bash.1.html"><strong>bash</strong>(1)</a>, <strong>csh</strong>(1) and FreeBSD's sh(1) do not call external <a href="../man1/echo.1.html"><strong>echo</strong>(1)</a> command but use their own builtin echo command. Since no external command is started (the shell itself does all that <a href="../man1/echo.1.html"><strong>echo</strong>(1)</a> must do), nothing is shown in the process list. It is beyond this manual page to discuss the way to make sure that your shell uses the builtin command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p>If any error occurs <strong>empty</strong> usually exits with code 255. Otherwise zero or some positive value (see <strong>-w</strong> key) is returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO empty&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/expect.1.html"><strong>expect</strong>(1)</a>, <a href="../man8/chat.8.html"><strong>chat</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>empty</strong> was made by Mikhail E. Zakharov. This software was based on the basic idea of pty version 4.0 Copyright (c) 1992, Daniel J. Bernstein but no code was ported from pty4. SECURITY section of this manual page was contributed by Sergey Redin.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="empathy-accounts.1.html"><span aria-hidden="true">&larr;</span> empathy-accounts.1: Accounts configuration dialog for empathy instant messaging client</a></li>
   <li class="next"><a href="empty-page.1.html">empty-page.1: Empty page detector of the exactimage toolkit <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
