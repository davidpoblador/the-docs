<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>darcs-monitor: Darcs add-on that sends mail about newly pushed changes</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Darcs add-on that sends mail about newly pushed changes">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="darcs-monitor (1) manual">
  <meta name="twitter:description" content="Darcs add-on that sends mail about newly pushed changes">
  <meta name="twitter:image" content="https://www.carta.tech/images/darcs-monitor-darcs-monitor-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/darcs-monitor.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="darcs-monitor (1) manual" />
  <meta property="og:description" content="Darcs add-on that sends mail about newly pushed changes" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/darcs-monitor-darcs-monitor-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">darcs-monitor<small> (1)</small></h1>
        <p class="lead">Darcs add-on that sends mail about newly pushed changes</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/darcs-monitor.1.html">
      <span itemprop="name">darcs-monitor: Darcs add-on that sends mail about newly pushed changes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/darcs-monitor/">
      <span itemprop="name">darcs-monitor</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/darcs-monitor.1.html">
      <span itemprop="name">darcs-monitor: Darcs add-on that sends mail about newly pushed changes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>darcs-monitor</strong> [ <em>option</em> ... ] <strong>email</strong> <em>recipient</em> [ <strong>email</strong> <em>recipient</em> ... ] [ <em>repository</em> ... ]</p><p><strong>darcs-monitor</strong> <strong>-h</strong> | <strong>--help</strong></p><p><strong>darcs-monitor</strong> <strong>--version</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>darcs-monitor</strong> reads one or more <a href="../man1/darcs.1.html"><strong>darcs</strong>(1)</a> repositories and sends email about every change it has not previously sent an email about to the same address. To have darcs-monitor run every time someone pushes to a repository, add the following lines to <em>_darcs/prefs/defaults</em>.</p><ul>
<li><p><strong>apply</strong> <strong>posthook</strong> <strong>darcs-monitor</strong> <strong>--charset=</strong><em>charset</em> <strong>email</strong> <em>recipient</em> [ <strong>email</strong> <em>recipient</em> ... ]</p><p><strong>apply</strong> <strong>run-posthook</strong></p></li>
</ul><p>In the above, <em>charset</em> should be the MIME charset that patches (including their metadata) are in, and <em>recipient</em> should be the email address where emails should be sent.  You can specify more than one recipient by repeating the email parameter.</p><p>You can also run <strong>darcs-monitor</strong> from <a href="../man1/crontab.1.html"><strong>crontab</strong>(1)</a> or from the command line. In those cases, it is easiest to specify the path to the repository on the command line after other arguments. In fact, you can specify more than one.</p><p>By default, mail is sent by calling <em>/usr/sbin/sendmail</em>. Another <strong>sendmail (1)</strong> binary can be specified by using a command-line switch.</p><p>You can customise the email by providing a template. You should put your own template in the file <em>_darcs/third-party/darcs-monitor/email-template</em> (you can use other files, but then you have to specify where it is). In the template you can use the following substitutions:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>%RECIPIENT%</strong></p>
  </dt>
  <dd>
    <p>the email address to which email is sent</p>
  </dd>
  <dt>
    <p><strong>%DIFF%</strong></p>
  </dt>
  <dd>
    <p>the Darcs-provided diff -u of the patch</p>
  </dd>
  <dt>
    <p><strong>%CHANGES%</strong></p>
  </dt>
  <dd>
    <p>a Darcs-provided summary of changes</p>
  </dd>
  <dt>
    <p><strong>%REPO%</strong></p>
  </dt>
  <dd>
    <p>the path to the repository</p>
  </dd>
  <dt>
    <p><strong>%SHORTREPO%</strong></p>
  </dt>
  <dd>
    <p>the final component of the path to the repository</p>
  </dd>
  <dt>
    <p><strong>%AUTHOR%</strong></p>
  </dt>
  <dd>
    <p>the patch author</p>
  </dd>
  <dt>
    <p><strong>%DATE%</strong></p>
  </dt>
  <dd>
    <p>the patch date</p>
  </dd>
  <dt>
    <p><strong>%HASH%</strong></p>
  </dt>
  <dd>
    <p>the patch Darcs hash</p>
  </dd>
  <dt>
    <p><strong>%TITLE%</strong></p>
  </dt>
  <dd>
    <p>the patch name</p>
  </dd>
  <dt>
    <p><strong>%COMMENT%</strong></p>
  </dt>
  <dd>
    <p>the patch comment</p>
  </dd>

</dl>
<p>Also, in the template, two percent signs in sequence <strong></strong>(<strong>%%</strong>) start a comment that extends to the end of the current line.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>-n, --dry-run</p>
  </dt>
  <dd>
    <p>Do not actually do anything, but do mark it done.</p>
  </dd>
  <dt>
    <p>--darcs-path=FILE</p>
  </dt>
  <dd>
    <p>Provide the location of the <a href="../man1/darcs.1.html"><strong>darcs</strong>(1)</a> executable.</p>
  </dd>
  <dt>
    <p>--darcs-args=ARGS</p>
  </dt>
  <dd>
    <p>Provide additional arguments to <a href="../man1/darcs.1.html"><strong>darcs</strong>(1)</a>, separating arguments with commas.</p>
  </dd>
  <dt>
    <p>--use-sendmail[=FILE]</p>
  </dt>
  <dd>
    <p>Use <a href="../man1/sendmail.1.html"><strong>sendmail</strong>(1)</a> (either at <em>/usr/sbin/sendmail</em> or at <em>FILE</em>).</p>
  </dd>
  <dt>
    <p>-d, --max-diff=SIZE</p>
  </dt>
  <dd>
    <p>Only include the first SIZE bytes of the diff in the e-mail.</p>
  </dd>
  <dt>
    <p>--charset=CHARSET</p>
  </dt>
  <dd>
    <p>Specify the MIME name of the repository's character set.</p>
  </dd>
  <dt>
    <p>-h, --help</p>
  </dt>
  <dd>
    <p>Show usage.</p>
  </dd>
  <dt>
    <p>--version</p>
  </dt>
  <dd>
    <p>Show version.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p>Success is indicated by 0, failure by any other exit status.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/usr/share/darcs-monitor/default-template</em></p>
  </dt>
  <dd>
    <p>The default email template.  See above for the format.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>darcs-monitor</strong> was written by Antti-Juhani Kaijanaho.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO darcs-monitor&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/darcs.1.html"><strong>darcs</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="darcs.1.html"><span aria-hidden="true">&larr;</span> darcs.1: An advanced revision control system</a></li>
   <li class="next"><a href="dares.1.html">dares.1: Rescue files from damaged cds and dvds <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
