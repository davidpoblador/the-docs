<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmgetopt: Performance co-pilot shell script option parser</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Performance co-pilot shell script option parser">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmgetopt<small> (1)</small></h1>
        <p class="lead">Performance co-pilot shell script option parser</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmgetopt.1.html">
      <span itemprop="name">pmgetopt: Performance co-pilot shell script option parser</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pcp/">
      <span itemprop="name">pcp</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmgetopt.1.html">
      <span itemprop="name">pmgetopt: Performance co-pilot shell script option parser</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>$PCP_BINADM_DIR/pmgetopt</strong> [<strong>-c</strong>|<strong>--config</strong> <em>file</em>] [<strong>-p</strong>|<strong>--progname</strong> <em>name</em>] [<strong>-u</strong>|<strong>--usage</strong>] [<strong>--</strong>] [<em>parameters</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>pmgetopt</strong> is used to perform command line option parsing for shell scripts used in the Performance Co-Pilot (PCP toolkit). It is also used to generate usage messages for those scripts.</p><p>The parameters given to <strong>pmgetopt</strong> take two forms: initially, options specific to <strong>pmgetopt</strong> itself are passed in, and terminated using the -- mechanism. Thereafter, all of the parameters passed into the shell script should be passed (usually this is simply the "$@" variable).</p><p>The options specific to <strong>pmgetopt</strong> are as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-c</strong>,<strong>--config</strong></p>
  </dt>
  <dd>
    <p>A configuration <em>file</em> in the format described below is passed to <strong>pmconfig</strong> using this option. If this option is omitted, then <strong>pmconfig</strong> will read its configuration from the standard input stream.</p>
  </dd>
  <dt>
    <p><strong>-p</strong>,<strong>--progname</strong></p>
  </dt>
  <dd>
    <p>When parsing the calling shell scripts parameters, error and usage messages will contain the given program <em>name</em> rather than referring to <strong>pmgetopt</strong> itself as the source of the error.</p>
  </dd>
  <dt>
    <p><strong>-u</strong>,<strong>--usage</strong></p>
  </dt>
  <dd>
    <p>A usage message appropriate for the calling shell script to present as its own can be generated using the option.</p>
  </dd>

</dl>
<p><strong>pmgetopt</strong> parses the given parameters, and produces output in a format suitable for sourcing in the calling shell script. When both short and long forms of an argument are allowed by the specification, <strong>pmgetopt</strong> will always indicate the short form for simpler shell processing. If arguments are presented that do not match the configuration, a request for a usage message (-?) will be generated for the calling script to respond to. Any non-option parameters will be echoed back to the calling script preceded by the double-hyphen delimiter.  Thus a script should stop handling options when this delimiter is detected, and begin the handling of any non-option arguments.</p><p>Unlike with the shell built-in <em>getopt</em> command, variables like $OPTARG are not set and the calling script will typically employ use of the shell built-in <em>eval</em>, <em>set</em> and positional <em>shift</em> commands to ensure option processing occurs correctly.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>The configuration format used by <strong>pmgetopt</strong> is intended to closely reflect the usage message which would be generated in the presence of invalid arguments (or the <strong>-?</strong>,<strong>--help</strong> option).</p><p>There are primarily two types of configuration line - commands and options. Commands allow metadata to be passed into the option processing process, and options are the allowable command line options that the shell script will accept. Command lines are preceded by the hash character, whereas option lines will always begin with a hyphen (either single or double). Any other line in the configuration, which may include usage headers or descriptive text, has no impact on the option parsing and will be copied unmodified into the usage message.</p><p>The set of commands is: <em>getopt</em> (provide short-argument option specification manually, if not present this will be generated from the options presented), <em>usage</em> (provide short one-line summary used at the head of the usage message, which will be prefixed by the <em>progname</em> before reporting), and <em>end</em> which informs <strong>pmgetopt</strong> to stop processing further commands and options - any subsequent text encountered will be simply appended to the usage message.</p><p>A short-hand notation exists for each of the standard PCP options, as described in <strong>PCPIntro</strong>(1). If any of these options (e.g <strong>--host</strong>) appears as a single word on any line, it will be transformed into the appropriate option for the shell script, including all metadata about that option (whether it accepts an argument, both short and long option forms, and so on).</p><p>Use of the equals symbol ("=") indicates the presence of a required argument to any option, for both short and long forms. Any non-standard option must be accompanied by a non-empty description of that argument.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>As an example, the following is a valid configuration:</p>
<pre>
# Usage: [options] node...

Options:
    --archive
    -d, --delay            pause between updates for archive replay
    --host
    --interval
    -i=INST, --insts=INST  comma-separated metrics instance list
    -r                     output raw counters (no rate conversion)
    --width=N              set the width of each column of output
    --timezone
    --help
</pre>
<p>This configuration will produce the following usage message, when run as shown. $ pmgetopt --usage --progname=clusterstat -- "$@" Usage: clusterstat [options] node...</p><p>Options:</p>
<pre>
  -a FILE, --archive=FILE
                        metrics source is a PCP log archive
  -d, --delay           pause between updates for archive replay
  -h HOST, --host=HOST  metrics source is PMCD on host
  -t DELTA, --interval=DELTA
                        sampling interval
  -i INST, --insts=INST comma-separated metrics instance list
  -r                    output raw counters (no rate conversion)
  --width=N             set the width of each column of output
  -Z TZ, --timezone=TZ  set reporting timezone
  -?, --help            show this usage message and exit
</pre>
<p>Several examples of <strong>pmgetopt</strong> use form part of the PCP toolkit, in particular the <a href="../man1/pcp.1.html"><strong>pcp</strong>(1)</a> and <a href="../man1/pmlogmv.1.html"><strong>pmlogmv</strong>(1)</a> scripts provide good reference examples.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PCP ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <a href="../man5/pcp.conf.5.html"><strong>pcp.conf</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pmgetopt&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/pcp.1.html"><strong>pcp</strong>(1)</a>, <a href="../man1/pmlogmv.1.html"><strong>pmlogmv</strong>(1)</a>, <strong>pmgetopt_r</strong>(3), <a href="../man5/pcp.conf.5.html"><strong>pcp.conf</strong>(5)</a> and <a href="../man5/pcp.env.5.html"><strong>pcp.env</strong>(5)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pmgenmap.1.html"><span aria-hidden="true">&larr;</span> pmgenmap.1: Generate c code to simplify handling of performance metrics</a></li>
   <li class="next"><a href="pmhostname.1.html">pmhostname.1: Report hostname <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
