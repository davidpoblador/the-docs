<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>iwatch: Realtime filesystem monitoring program using inotify</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Realtime filesystem monitoring program using inotify">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="iwatch (1) manual">
  <meta name="twitter:description" content="Realtime filesystem monitoring program using inotify">
  <meta name="twitter:image" content="https://www.carta.tech/images/iwatch-iwatch-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/iwatch.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="iwatch (1) manual" />
  <meta property="og:description" content="Realtime filesystem monitoring program using inotify" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/iwatch-iwatch-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">iwatch<small> (1)</small></h1>
        <p class="lead">Realtime filesystem monitoring program using inotify</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/iwatch.1.html">
      <span itemprop="name">iwatch: Realtime filesystem monitoring program using inotify</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/iwatch/">
      <span itemprop="name">iwatch</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/iwatch.1.html">
      <span itemprop="name">iwatch: Realtime filesystem monitoring program using inotify</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>iwatch</strong> [<strong>-d</strong>] [<strong>-f</strong> &lt;config file&gt;] [<strong>-v</strong>] [<strong>-p</strong> &lt;pid file&gt;]
<strong>iwatch</strong> [<strong>-c</strong> <em>command</em>] [<strong>-C</strong> <em>charset</em>] [<strong>-e</strong> event[,event[,..]]] [<strong>-h</strong>|<strong>--help</strong>] [<strong>-m</strong> &lt;email address&gt;]
       [<strong>-r</strong>] [<strong>-s</strong> &lt;on|off&gt;] [<strong>-t</strong> &lt;filter string&gt;] [<strong>-v</strong>] [<strong>--version</strong>] [<strong>-x</strong> <em>exception</em>]
       [<strong>-X</strong> &lt;regex <em>string</em> <em>as</em> <em>exception</em>&gt;] &lt;target&gt;

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>inotify (inode notify) is a Linux kernel subsystem that monitors events in filesystems and reports those events to applications in real time.</p><p>inotify can be used to monitor individual files or directories. When a directory is monitored, inotify will return events for the directory itself, and for files inside this directory. The inotify support was added to Linux Kernel 2.6.13.</p><p>iWatch is a Perl wrap to inotify to monitor changes in specific directories or files, sending alarm to the system administrator in real time. It can:</p><ul>
<li><p>Send notifications via email about changes.</p></li><li><p>Take programmable actions immediately, <em>as</em> emit alerts via XMPP messages, WhatsApp or execute a local program or script.</p></li><li><p>Act <em>as</em> HIDS (Host-based Intrusion Detection System) or an integrity checker, complementing the local firewall systems.</p></li>
</ul><p>iWatch can run <em>as</em> daemon, <em>as</em> well a simple <em>command</em>. The daemon mode uses a XML configuration file, and put a list of directories and files (targets) to monitor. The <em>command</em> line mode will run without a configuration file. You just need to put the necessary information (target to watch, email, <em>exception</em>, recursivity, events to monitor and <em>command</em> to execute) in the <em>command</em> line. The options for both modes cannot be mixed together.</p><p>In the XML configuration file, each target can have its own email contact point. This contact point will get an email notification for any changes in the monitored targets. You can monitor a directory recursively, and you can also setup a list of exceptions where you do not want to monitor directory/file inside a monitored directory. It is also possible to disable email notification, and instead setup a <em>command</em> to be executed if an event occurs. Per default iWatch only monitor following events: close_write, create, delete, move, delete_self and move_self. But you can specify any possible events, like access, attrib, modify or all_events. See the EVENTS section for more details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Usage for daemon mode (background) of iWatch:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-d</strong> Execute the application <em>as</em> daemon. iWatch will run in foregroud without this option.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-f</strong> &lt;config_file.xml&gt; Specify alternative configuration file. Default is /etc/<strong>iwatch</strong>/iwatch.xml.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-p</strong> &lt;pid_file&gt; Specify an alternate pid file. Default: /var/run/iwatch.pid.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-v</strong> Be verbose.</p>
  </dd>

</dl>
<p>Usage for <em>command</em> line mode (foreground) of iWatch:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-c</strong> &lt;<em>command</em>&gt; You can specify a <em>command</em> to be executed if an event occurs. For details about the available strings, take a look at STRINGS FOR COMMAND section.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-C</strong> &lt;<em>charset</em>&gt; Specify the <em>charset</em> (default is utf-8).</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-e</strong> &lt;event[,event[,..]]&gt; Specify a list of events that you want to watch. For details about possible events, take a look at EVENTS section.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-h</strong>, <strong>--help</strong> Print help message.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-m</strong> &lt;email_address&gt; Contact point's email address. Without this option, iWatch will not send any email notification.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-r</strong> Recursivity when watching a directory.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-s</strong> on|off Enable or disable reports to the syslog (default is off/disabled).</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-t</strong> &lt;filter&gt; Specify a filter <em>string</em> (regex) to compare with the filename or directory name. It will report events only if the file/directory name matches the filter <em>string</em>. It is useful if you want watch a file like /etc/passwd or /etc/shadow. Instead watching this single file, just watch the /etc directory with filter="passwd|shadow", because if you watch only the passwd/shadow file, the watcher will be deleted after one change of this file and you will not get another notification. This is caused by the application that changes passwd or shadow (e.g. passwd or chfn), they do not change the files directly, but create a new file and move it to passwd or shadow file. So, this <em>command</em> will remove the inode and therefore the watcher.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-v</strong> Verbose mode. This option will show the main current action.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>--version</strong> Print the version number.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-x</strong> &lt;<em>exception</em> file or directory&gt; Specify the file or directory which should not be watched.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p><strong>-X</strong> &lt;regex <em>string</em> <em>as</em> <em>exception</em>&gt; Similar to <strong>-x</strong> but specifying a regex <em>string</em> <em>as</em> <em>exception</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STRINGS FOR COMMAND</h2>
        <div class="sectioncontent">
<p>When using the '<strong>-c</strong> &lt;<em>command</em>&gt;' option, these strings will be available:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>%c Event cookie number.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>%e Event name.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>%f Full path of the filename that gets an event.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>%F The old filename in case moved_to event.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>%p Program name (iWatch).</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>%v Version number.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EVENTS</h2>
        <div class="sectioncontent">
<p>Following are the possible events you can use with the '<strong>-e</strong>' option:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>access file was accessed.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>attrib file attributes changed.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>close file closed, regardless of read/write mode.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>close_nowrite file closed, after being opened in read-only mode.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>close_write file closed, after being opened in writeable mode.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>create a file was created within watched directory.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>delete a file was deleted within watched directory.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>delete_self the watched file was deleted.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>ignored file was ignored.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>isdir event occurred against dir.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>modify file was modified.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>move a file/dir within watched directory was moved.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>moved_from file was moved away from.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>moved_to file was moved to.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>oneshot only send event once.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>open file was opened.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>q_overflow event queued overflowed.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>unmount file system on which watched file exists was unmounted.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>default close_write, create, delete, move, delete_self and move_self.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>all_events all events.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND LINE USAGE EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>$ <strong>iwatch</strong> /tmp Monitor changes in /tmp directory with default events.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>$ <strong>iwatch</strong> <strong>-r</strong> <strong>-e</strong> access,create <strong>-m</strong> root@example.com <strong>-x</strong> /etc/mail /etc Monitor only access and create events in /etc directory, recursively, with /etc/mail <em>as</em> <em>exception</em>, and send email notification to root@example.com.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>$ <strong>iwatch</strong> <strong>-r</strong> <strong>-c</strong> (w;ps <strong>-ef</strong>)|mail <strong>-s</strong> '%f was changed' root@localhost /bin Monitor /bin directory, recursively, and execute the commands 'w' and 'ps <strong>-ef</strong>', sending the results to root@localhost, using '&lt;path_filename&gt; was changed' <em>as</em> subject. To see about '%f' take a look at STRINGS FOR COMMAND section.</p>
  </dd>
  <dt>
    <p><strong></strong></p>
  </dt>
  <dd>
    <p>$ <strong>iwatch</strong> <strong>-r</strong> <strong>-X</strong> '.svn' ~/projects Monitor ~/projects directory, recursively, but exclude any .svn directories inside. This cannot be done with a normal '<strong>-x</strong>' option since '<strong>-x</strong>' can only exclude the defined path.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILE EXAMPLE</h2>
        <div class="sectioncontent">
<p>The default configuration file is /etc/<strong>iwatch</strong>/iwatch.xml. See an example:</p>
<pre>
    &lt;?xml version="1.0" ?&gt;
    &lt;!DOCTYPE config SYSTEM "/etc/iwatch/iwatch.dtd" &gt;

    &lt;config&gt;
     &lt;guard email="root@example.com" name="iWatch"/&gt;
     &lt;watchlist&gt;
     &lt;title&gt;WEB server integrity monitoring&lt;/title&gt;
     &lt;contactpoint email="someone@example.com" name="Administrator"/&gt;
        &lt;path type="recursive" syslog="on" alert="off" exec="echo %p: %e %f | /usr/bin/sendxmpp -t foo@jabber-br.org"&gt;/var/www&lt;/path&gt;
        &lt;path type="exception"&gt;/var/www/counter&lt;/path&gt;
     &lt;/watchlist&gt;
    &lt;/config&gt;

</pre>
<p>The two first lines will define the XML version and the file that defines the pattern used by iWatch (the default is /etc/<strong>iwatch</strong>/iwatch.dtd). These lines needn't be changed.</p><p>The &lt;config&gt; statement is used to mark the configuration start point. The last line of the configuration must be &lt;/config&gt;. The 'guard email' line is used to specify the sender email and name to be used when sending notifications by email. In other words, this line defines the 'From:' email field. The &lt;watchlist&gt;&lt;/watchlist&gt; delimits a block of definitions about a watch or some watches procedures.</p><p>The &lt;config&gt;&lt;/config&gt; place can have several &lt;watchlist&gt;&lt;/watchlist&gt; blocks. Inside these blocks (&lt;watchlist&gt;&lt;/watchlist&gt;), the &lt;title&gt;&lt;/title&gt; space is used to add a title that will identify the purpose of the block. The 'contactpoint' line contains the destination email address (To:) and name when sending notifications by email.</p><p>Each &lt;path&gt;&lt;/path&gt; line can monitor a file/directory and execute actions. The first path line showed will monitor recursively the directory /var/www. As no events was defined, iWatch will employ the default event (close_write, create, delete, move, delete_self and move_self events). If an event occurs, the syslog will register it and a message reporting the program name (%p = iWatch), the event (%e) and the monitored file/directory name (%f) will be sent via XMPP protocol (sendxmpp external program) to foo@jabber-br.org. Note that alert="off" will disable any sending email. Another important point is that a second line is excluding the /var/www/counter file/directory from observation.</p><p>The showed example uses the sendxmpp <em>command</em>. Other good possibility is to apply the yowsup-cli <em>command</em> to send WhatsApp messages.</p><p>A new example. With configuration showed below, iWatch will work over three &lt;watchlist&gt; blocks.</p>
<pre>
    &lt;?xml version="1.0" ?&gt;
    &lt;!DOCTYPE config SYSTEM "iwatch.dtd"&gt;

    &lt;config&gt;
     &lt;guard email="admin@localhost" name="iWatch"&gt;&lt;/guard&gt;
     &lt;watchlist&gt;
     &lt;title&gt;Public Website&lt;/title&gt;
     &lt;contactpoint email="webmaster@example.com" name="WebMaster"/&gt;
        &lt;path type="single"&gt;/var/www/localhost/htdocs&lt;/path&gt;
        &lt;path type="single" syslog="on"&gt;/var/www/localhost/htdocs/About&lt;/path&gt;
        &lt;path type="recursive"&gt;/var/www/localhost/htdocs/Photos&lt;/path&gt;
     &lt;/watchlist&gt;
     &lt;watchlist&gt;
     &lt;title&gt;Operating System&lt;/title&gt;
     &lt;contactpoint email="admin@localhost" name="Administrator"/&gt;
        &lt;path type="recursive"&gt;/etc/apache2&lt;/path&gt;
        &lt;path type="single"&gt;/etc/passwd&lt;/path&gt;
        &lt;path type="recursive"&gt;/etc/mail&lt;/path&gt;
        &lt;path type="exception"&gt;/etc/mail/statistics&lt;/path&gt;
        &lt;path type="single" filter="shadow|passwd"&gt;/etc&lt;/path&gt;
     &lt;/watchlist&gt;
     &lt;watchlist&gt;
     &lt;title&gt;Only Test&lt;/title&gt;
     &lt;contactpoint email="root@localhost" name="Administrator"/&gt;
         &lt;path type="single" alert="off" exec="(w;ps -ef)|mail -s %f root@localhost"&gt;/tmp/dir1&lt;/path&gt;
         &lt;path type="single" events="access,close" alert="off" exec="(w;ps -ef)|mail -s %f root@localhost"&gt;/tmp/dir2&lt;/path&gt;
         &lt;path type="single" events="default,access" alert="off" exec="(w;ps -ef)|mail -s '%f is accessed' root@localhost"&gt;/tmp/dir3&lt;/path&gt;
         &lt;path type="single" events="all_events" alert="off"&gt;/tmp/dir4&lt;/path&gt;
     &lt;/watchlist&gt;
    &lt;/config&gt;

</pre>
<p>The first &lt;watchlist&gt; block monitors a directories and has special actions for two files but no execute a <em>command</em> in neither of them. The first path is a single (non recursive) directory /var/www/localhost/htdocs and any notification will be sent to the contact point webmaster@example.com. Note that have no events specified. So, the default (close_write, create, delete, move, delete_self and move_self) will be used. The second path is the file /var/www/localhost/htdocs/About. This file is inside the last directory. The difference is that all activities over this file will be logged in /var/log/syslog. The third path will monitor, recursively, the directory /var/www/localhost/htdocs/Photos (also inside of the first directory). No log. Default events will be notified via mail.</p><p>The second block has five monitoring. All notification will be sent to admin@localhost. The main novelty over the first block is that a path uses a 'filter' instruction to watch /etc/shadow and /etc/passwd at the same time. To understand better this situation, see the '<strong>-t</strong>' in OPTIONS section.</p><p>The last block monitors a default event in first line and several non default events in the following three lines. In all lines the 'alert' is defined <em>as</em> 'off'. So, iWatch will not send emails using the builtin mail engine. However, in three lines the external <em>command</em> 'mail' was used to send personalized emails.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LEARNING ABOUT EVENTS</h2>
        <div class="sectioncontent">
<p>A tip to learn about events is watch the iWatch <em>command</em> executing with '<strong>-e</strong> all_events' option. The following example will monitor a 'ls /tmp' <em>command</em>.</p>
<pre>
    $ iwatch -e all_events /tmp
    [17/Jun/2014 11:22:59] IN_ISDIR,IN_OPEN /tmp
    [17/Jun/2014 11:22:59] IN_ISDIR,IN_CLOSE_NOWRITE /tmp

</pre>
<p>Another example, that monitors the creating of a file inside /tmp:</p>
<pre>
    $ iwatch -e all_events /tmp
    [17/Jun/2014 11:29:43] IN_MODIFY /tmp/file.txt
    [17/Jun/2014 11:29:43] IN_OPEN /tmp/file.txt
    [17/Jun/2014 11:29:43] IN_MODIFY /tmp/file.txt
    [17/Jun/2014 11:29:43] IN_CLOSE_WRITE /tmp/file.txt
    [17/Jun/2014 11:29:43] * /tmp/file.txt is closed

</pre>
<p>So, in the last example occurred modify, open and close_write actions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RULES VALIDATION</h2>
        <div class="sectioncontent">
<p>Since version 0.2.0 iWatch checks the validity of XML file if it has following entry in the first two lines:</p>
<pre>
    &lt;?xml version="1.0" ?&gt;
    &lt;!DOCTYPE config SYSTEM "iwatch.dtd"&gt;

</pre>
<p>The check will be made over a pattern described by /etc/<strong>iwatch</strong>/iwatch.dtd file. Without the showed two lines, iWatch will just give a warning that you have to use DTD file, and it continues to run <em>as</em> normal without XML validation. The iWatch's XML format is very simple and easy to understand, and it uses following DTD :</p>
<pre>
    &lt;!ELEMENT config (guard,watchlist+)&gt;
    &lt;!ATTLIST config
       charset CDATA "utf-8"
    &gt;
    &lt;!ELEMENT guard (#PCDATA)&gt;
    &lt;!ATTLIST guard
       email  CDATA #REQUIRED
       name   CDATA #IMPLIED
    &gt;
    &lt;!ELEMENT watchlist (title,contactpoint,path+)&gt;
    &lt;!ELEMENT title (#PCDATA)&gt;
    &lt;!ELEMENT contactpoint (#PCDATA)&gt;
    &lt;!ATTLIST contactpoint
       email  CDATA #REQUIRED
       name   CDATA #IMPLIED
    &gt;
    &lt;!ELEMENT path (#PCDATA)&gt;
    &lt;!ATTLIST path
       type   CDATA          #REQUIRED
       alert  (on|off) "off"
       events CDATA          #IMPLIED
       exec   CDATA          #IMPLIED
       filter CDATA          #IMPLIED
       syslog (on|off) "off"

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO iwatch&hellip;</h2>
        <div class="sectioncontent">
<p><strong>sendxmpp</strong>(1), <strong>yowsup-cli</strong>(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>iWatch was written by Cahya Wirawan &lt;cahya@gmx.at&gt;.</p><p>This manual page was written by Michael Prokop &lt;mika@debian.org&gt; and updated/improved by Joao Eriberto Mota Filho &lt;eriberto@debian.org&gt; for the Debian project (but may be used by others).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ivview.1.html"><span aria-hidden="true">&larr;</span> ivview.1: Fast, interactive 3d viewer of inventor files</a></li>
   <li class="next"><a href="iwyu.1.html">iwyu.1: Analyze #includes in c and c++ source files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
