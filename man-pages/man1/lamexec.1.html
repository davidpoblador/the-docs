<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lamexec: Run non-mpi programs on lam nodes.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Run non-mpi programs on lam nodes.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lamexec (1) manual">
  <meta name="twitter:description" content="Run non-mpi programs on lam nodes.">
  <meta name="twitter:image" content="https://www.carta.tech/images/lam-runtime-lamexec-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/lamexec.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lamexec (1) manual" />
  <meta property="og:description" content="Run non-mpi programs on lam nodes." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lam-runtime-lamexec-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lamexec<small> (1)</small></h1>
        <p class="lead">Run non-mpi programs on lam nodes.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lamexec.1.html">
      <span itemprop="name">lamexec: Run non-mpi programs on lam nodes.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lam-runtime/">
      <span itemprop="name">lam-runtime</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lamexec.1.html">
      <span itemprop="name">lamexec: Run non-mpi programs on lam nodes.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>lamexec [-fhvD] [-c # | -np #] [-nw | -w] [-pty] [-s node] [-x VAR1[=VALUE1][,VAR2[=VALUE2],...]] [where] program [-- args]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-c #</strong></p>
  </dt>
  <dd>
    <p>Synonym for <em>-np</em> (see below).</p>
  </dd>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>Use the executable program location as the current working directory for created processes.  The current working directory of the created processes will be set before the user's program is invoked.</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>Do not configure standard I/O file descriptors - use defaults.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Print useful information on this command.</p>
  </dd>
  <dt>
    <p><strong>-np #</strong></p>
  </dt>
  <dd>
    <p>(see below). Run this many copies of the program on the given nodes.  This option indicates that the specified file is an executable program and not an application schema.  If no nodes are specified, all LAM nodes are considered for scheduling; LAM will schedule the programs in a round-robin fashion, "wrapping around" (and scheduling multiple copies on a single node) if necessary.</p>
  </dd>
  <dt>
    <p><strong>-nw</strong></p>
  </dt>
  <dd>
    <p>Do not wait for all processes to complete before exiting <em>lamexec</em>. This option is mutually exclusive with <em>-w</em>.</p>
  </dd>
  <dt>
    <p><strong>-pty</strong></p>
  </dt>
  <dd>
    <p>Enable pseudo-tty support.  Among other things, this enabled line-buffered output (which is probably what you want).  The only reason that this feature is not enabled by default is because it is so new and has not been extensively tested yet.</p>
  </dd>
  <dt>
    <p><strong>-s node</strong></p>
  </dt>
  <dd>
    <p>Load the program from this node.  This option is not valid on the command line if an application schema is specified.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Be verbose; report on important steps as they are done.</p>
  </dd>
  <dt>
    <p><strong>-w</strong></p>
  </dt>
  <dd>
    <p>Wait for all applications to exit before <em>lamexec</em> exits.</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>Export the specified environment variables to the remote nodes before executing the program.  Existing environment variables can be specified (see the Examples section, below), or new variable names specified with corresponding values.  The parser for the <em>-x</em> option is not very sophisticated; it does not even understand quoted values.  Users are advised to set variables in the environment, and then use <em>-x</em> to export (not define) them.</p>
  </dd>
  <dt>
    <p><strong>where</strong></p>
  </dt>
  <dd>
    <p>A set of node and/or CPU identifiers indicating where to start</p>
  </dd>
  <dt>
    <p><strong>-- args</strong></p>
  </dt>
  <dd>
    <p>Pass these runtime arguments to every new process.  This must always be the last argument to <em>lamexec</em>. This option is not valid on the command line if an application schema is specified.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>lamexec</em> is essentially a clone of the <strong>mpirun</strong>(1), but is intended for non-MPI programs.</p><p>One invocation of <em>lamexec</em> starts a non-MPI application running under LAM.  To start the same program on all LAM nodes, the application can be specified on the <em>lamexec</em> command line.  To start multiple applications on the LAM nodes, an application schema is required in a separate file.  See <a href="../man5/appschema.5.html"><strong>appschema</strong>(5)</a> for a description of the application schema syntax, but it essentially contains multiple <em>lamexec</em> command lines, less the command name itself.  The ability to specify different options for different instantiations of a program is another reason to use an application schema.</p><h3>Location Nomenclature</h3>
<p>The location nomenclature that is used for the where clause mention in the SYNOPSIS section, above, is identical to <strong>mpirun</strong>(1)'s nomenclature.  See the <strong>mpirun</strong>(1) man page for a lengthy discussion of the location nomenclature.</p><p>Note that the by-CPU syntax, while valid for <em>lamexec</em>, is not quite as meaningful because process rank ordering in MPI_COMM_WORLD is irrelevant.  As such, the by-node nomenclature is typically the preferred syntax for <em>lamexec</em>.</p>
<h3>Application Schema or Executable Program?</h3>
<p>To distinguish the two different forms, <em>lamexec</em> looks on the command line for nodes or the <em>-c</em> option.  If neither is specified, then the file named on the command line is assumed to be an application schema.  If either one or both are specified, then the file is assumed to be an executable program.  If nodes and <em>-c</em> both are specified, then copies of the program are started on the specified nodes according to an internal LAM scheduling policy.  Specifying just one node effectively forces LAM to run all copies of the program in one place.  If <em>-c</em> is given, but not nodes, then all LAM nodes are used.  If nodes is given, but not <em>-c</em>, then one copy of the program is run on each node.</p>
<h3>Program Transfer</h3>
<p>By default, LAM searches for executable programs on the target node where a particular instantiation will run.  If the file system is not shared, the target nodes are homogeneous, and the program is frequently recompiled, it can be convenient to have LAM transfer the program from a source node (usually the local node) to each target node.  The <em>-s</em> option specifies this behavior and identifies the single source node.</p>
<h3>Locating Files</h3>
<p>LAM looks for an executable program by searching the directories in the user's PATH environment variable as defined on the source node(s). This behavior is consistent with logging into the source node and executing the program from the shell.  On remote nodes, the "." path is the home directory.</p><p>LAM looks for an application schema in three directories: the local directory, the value of the LAMAPPLDIR environment variable, and laminstalldir/boot, where "laminstalldir" is the directory where LAM/MPI was installed.</p>
<h3>Standard I/O</h3>
<p>LAM directs UNIX standard input to /dev/null on all remote nodes.  On the local node that invoked <em>lamexec</em>, standard input is inherited from <em>lamexec</em>. The default is what used to be the -w option to prevent conflicting access to the terminal.</p><p>LAM directs UNIX standard output and error to the LAM daemon on all remote nodes.  LAM ships all captured output/error to the node that invoked <em>lamexec</em> and prints it on the standard output/error of <em>lamexec</em>. Local processes inherit the standard output/error of <em>lamexec</em> and transfer to it directly.</p><p>Thus it is possible to redirect standard I/O for LAM applications by using the typical shell redirection procedure on <em>lamexec</em>.</p><p>% lamexec N my_app  my_input  my_output</p><p>The <em>-f</em> option avoids all the setup required to support standard I/O described above.  Remote processes are completely directed to /dev/null and local processes inherit file descriptors from <a href="../man1/lamboot.1.html"><strong>lamboot</strong>(1)</a>.</p>
<h3>Pseudo-tty support</h3>
<p>The <em>-pty</em> option enabled pseudo-tty support for process output.  This allows, among other things, for line buffered output from remote nodes (which is probably what you want).</p><p>This option is not currently the default for <em>lamexec</em> because it has not been thoroughly tested on a variety of different Unixes. Users are encouraged to use <em>-pty</em> and report any problems back to the LAM Team.</p>
<h3>Current Working Directory</h3>
<p>The current working directory for new processes created on the local node is inherited from <em>lamexec</em>. The current working directory for new processes created on remote nodes is the remote user's home directory.  This default behavior is overridden by the <em>-D</em> option.</p><p>The <em>-D</em> option will change the current working directory of new processes to the directory where the executable resides before the new user's program is invoked.</p><p>An alternative to the <em>-D</em> option is the <em>-wd</em> option. <em>-wd</em> allows the user to specify an arbitrary current working directory (vs. the location of the executable).  Note that the <em>-wd</em> option can be used in application schema files (see <a href="../man5/appschema.5.html"><strong>appschema</strong>(5)</a>) as well.</p>
<h3>Process Environment</h3>
<p>Processes in the application inherit their environment from the LAM daemon upon the node on which they are running.  The environment of a LAM daemon is fixed upon booting of the LAM with <a href="../man1/lamboot.1.html"><strong>lamboot</strong>(1)</a> and is inherited from the user's shell.  On the origin node this will be the shell from which <a href="../man1/lamboot.1.html"><strong>lamboot</strong>(1)</a> was invoked and on remote nodes this will be the shell started by <strong>rsh</strong>(1).  When running dynamically linked applications which require the LD_LIBRARY_PATH environment variable to be set, care must be taken to ensure that it is correctly set when booting the LAM.</p>
<h3>Exported Environment Variables</h3>
<p>The <em>-x</em> option to <em>lamexec</em> can be used to export specific environment variables to the new processes.  While the syntax of the <em>-x</em> option allows the definition of new variables, note that the parser for this option is currently not very sophisticated - it does not even understand quoted values.  Users are advised to set variables in the environment and use <em>-x</em> to export them; not to define them.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>lamexec N prog1</p>
  </dt>
  <dd>
    <p>Load and execute prog1 on all nodes. Search for the executable file on each node.</p>
  </dd>
  <dt>
    <p>lamexec -c 8 prog1</p>
  </dt>
  <dd>
    <p>Run 8 copies of prog1 wherever LAM wants to run them.</p>
  </dd>
  <dt>
    <p>lamexec n8-10 -v -nw -s n3 prog1 -- -q</p>
  </dt>
  <dd>
    <p>Load and execute prog1 on nodes 8, 9, and 10.  Search for prog1 on node 3 and transfer it to the three target nodes.  Report as each process is created.  Give "-q" as a command line to each new process. Do not wait for the processes to complete before exiting <em>lamexec</em>.</p>
  </dd>
  <dt>
    <p>lamexec -v myapp</p>
  </dt>
  <dd>
    <p>Parse the application schema, myapp, and start all processes specified in it.  Report as each process is created.</p>
  </dd>
  <dt>
    <p>lamexec N N -pty -wd /workstuff/output -x DISPLAY run_app.csh</p>
  </dt>
  <dd>
    <p>Run the application "run_app.csh" (assumedly a C shell script) twice on each node in the system (ideal for 2-way SMPs).  Also enable pseudo-tty support, change directory to /workstuff/output, and export the DISPLAY variable to the new processes (perhaps the shell script will invoke an X application such as xv to display output).</p>
  </dd>
  <dt>
    <p>lamexec -np 5 -D `pwd`/my_application</p>
  </dt>
  <dd>
    <p>A common usage of <em>lamexec</em> in environments where a filesystem is shared between all nodes in the multicomputer, using the shell-escaped "pwd" command specifies the full name of the executable to run.  This prevents the need for putting the directory in the path; the remote notes will have an absolute filename to execute (and change directory to it upon invocation).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>lamexec: Exec format error</p>
  </dt>
  <dd>
    <p>A non-ASCII character was detected in the application schema. This is usually a command line usage error where <em>lamexec</em> is expecting an application schema and an executable file was given.</p>
  </dd>
  <dt>
    <p>lamexec: syntax error in application schema, line XXX</p>
  </dt>
  <dd>
    <p>The application schema cannot be parsed because of a usage or syntax error on the given line in the file.</p>
  </dd>
  <dt>
    <p>filename: No such file or directory</p>
  </dt>
  <dd>
    <p>This error can occur in two cases.  Either the named file cannot be located or it has been found but the user does not have sufficient permissions to execute the program or read the application schema.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p><em>lamexec</em> returns 0 if all processes started by <em>lamexec</em> exit normally.  A non-zero value is returned if an internal error occurred in lamexec, or one or more processes exited abnormally.  If an internal error occurred in lamexec, the corresponding error code is returned.  In the event that one or more processes exit with non-zero exit code, the return value of the process that <em>lamexec</em> first notices died abnormally will be returned.  Note that, in general, this will be the first process that died but is not guaranteed to be so.</p><p>However, note that if the <em>-nw</em> switch is used, the return value from lamexec does not indicate the exit status of the processes started by it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lamexec&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/mpimsg.1.html"><strong>mpimsg</strong>(1)</a>, <strong>mpirun</strong>(1), <a href="../man1/mpitask.1.html"><strong>mpitask</strong>(1)</a>, <strong>loadgo</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lame.1.html"><span aria-hidden="true">&larr;</span> lame.1: Create mp3 audio files</a></li>
   <li class="next"><a href="lamgrow.1.html">lamgrow.1: Extend a lam multicomputer. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
