<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ods-ksmutil: Opendnssec zone and key management</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Opendnssec zone and key management">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ods-ksmutil (1) manual">
  <meta name="twitter:description" content="Opendnssec zone and key management">
  <meta name="twitter:image" content="https://www.carta.tech/images/opendnssec-enforcer-sqlite3-ods-ksmutil-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/opendnssec-enforcer-sqlite3-ods-ksmutil.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ods-ksmutil (1) manual" />
  <meta property="og:description" content="Opendnssec zone and key management" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/opendnssec-enforcer-sqlite3-ods-ksmutil-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ods-ksmutil<small> (1)</small></h1>
        <p class="lead">Opendnssec zone and key management</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ods-ksmutil.1.html">
      <span itemprop="name">ods-ksmutil: Opendnssec zone and key management</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/opendnssec-enforcer-sqlite3/">
      <span itemprop="name">opendnssec-enforcer-sqlite3</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ods-ksmutil.1.html">
      <span itemprop="name">ods-ksmutil: Opendnssec zone and key management</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ods-ksmutil setup</strong></p><p><strong>ods-ksmutil [ start | stop | notify ]</strong></p><p><strong>ods-ksmutil update [ kasp | zonelist | conf | all ]</strong></p><p><strong>ods-ksmutil zone [ add | delete | list ]</strong> ...</p><p><strong>ods-ksmutil zonelist [ import | export ]</strong></p><p><strong>ods-ksmutil key [ generate | import | export | list | purge | rollover | ksk-retire | ds-seen | delete ]</strong> ...</p><p><strong>ods-ksmutil rollover list</strong> ...</p><p><strong>ods-ksmutil policy [ export | import | purge ]</strong> ...</p><p><strong>ods-ksmutil repository list</strong> ...</p><p><strong>ods-ksmutil backup [ list | prepare | commit | rollback | done ]</strong></p><p><strong>ods-ksmutil database backup</strong> ...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>ods-ksmutil</em> manages the operation of the KASP Enforcer, which is the part of OpenDNSSEC that triggers key generation and signing operations on domains based on policies with user-defined timing and security requirements. Since everything beyond this management utility is usually automatic, <em>ods-ksmutil</em> is the primary tool for managing OpenDNSSEC.  Among the functions of <em>ods-ksmutil</em> are key management, updates to the zone list and manually rolling keys to recover from exceptional situations like key loss.</p><p>To get started, a first invocation of <em>ods-ksmutil setup</em> is needed; see SETUP AND UPDATE COMMANDS below for details. After this is done, the rest of the functionality of <em>ods-ksmutil</em> becomes available.</p><p>The following sections discuss the subcommands in logical groups, detailing any options that they support.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERIC OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-c </strong><em>configfile</em><strong>, --config </strong><em>configfile</em><strong></strong></p>
  </dt>
  <dd>
    <p>Change the conf.xml file that is used from the default.</p>
  </dd>
  <dt>
    <p><strong>help</strong></p>
  </dt>
  <dd>
    <p>This can be used as a subcommand to <em>ods-ksmutil</em> or it can be used after a partial subcommand.  In response, <em>ods-ksmutil</em> will give a synopsis of how to continue the command.</p>
  </dd>
  <dt>
    <p><strong>-V, --version</strong></p>
  </dt>
  <dd>
    <p>Display version number</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SETUP AND UPDATE SUBCOMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>setup</strong></p>
  </dt>
  <dd>
    <p>Import conf.xml, kasp.xml and zonelist.xml into a database. This deletes any current management information from the database with OpenDNSSEC management information, including any references to keys.  Updates to an existing setup should therefore not normally run this subcommand, but <strong>update</strong> instead.</p>
  </dd>
  <dt>
    <p><strong>update kasp</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>update zonelist</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>update conf</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>update all</strong></p>
  </dt>
  <dd>
    <p>Update the database with the contents of the respective configuration file, or all those files.  The result is comparable to the <strong>setup</strong> subcommand, except that management information about OpenDNSSEC is not deleted.(Also note that update kasp does not remove any policies from the database, policy purge can be used to remove unused policies).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ZONE MANAGEMENT SUBCOMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>zone add --zone|-z </strong><em>zone</em><strong> [--policy|-p </strong><em>name</em><strong>] [--in-type|-j </strong><em>type</em><strong>] [--out-type|-q </strong><em>type</em><strong>] [--input|-i </strong><em>input</em><strong>] [--output|-o </strong><em>output</em><strong>] [--no-xml]</strong></p>
  </dt>
  <dd>
    <p>Add a zone to both zonelist.xml and the database.  This is equivalent to manually editing zonelist.xml and then running the <strong>update zonelist</strong> subcommand. The --zone option names the zone to add; the --policy option names the policy to use instead of default; the --in-type and --out-type specify the type of input and output adapters (should be DNS or File, default is File); the --input option specifies a non-standard location for the unsigned zone (default is /var/lib/opendnssec/unsigned/ZONE) or the DNS input file(default is /etc/opendnssec/addns.xml); the --output option specifies a non-standard location for the signed zone (default is /var/lib/opendnssec/signed/ZONE) or the DNS output file(default is /etc/opendnssec/addns.xml). The --no-xml flag stops the zonelist.xml file from being updated. This is suitable for a batch mode where you will add multiple zones and then just write zonelist once at the end.</p>
  </dd>
  <dt>
    <p><strong>zone delete --zone|-z </strong><em>name</em><strong> [--no-xml]</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>zone delete --all|-a</strong></p>
  </dt>
  <dd>
    <p>Delete one zone (or all zones, respectively) from both zonelist.xml and the database.  This is equivalent to manually editing zonelist.xml and then running the <strong>update zonelist</strong> subcommand. The --no-xml flag stops the zonelist.xml file from being updated. This is suitable for a batch mode where you will delete multiple zones and then just write zonelist once at the end.</p>
  </dd>
  <dt>
    <p><strong>zone list</strong></p>
  </dt>
  <dd>
    <p>List zones from the zonelist.xml. TODO:Not from the database?</p>
  </dd>
  <dt>
    <p><strong>zonelist export</strong></p>
  </dt>
  <dd>
    <p>Export list of zones from the database in the same format as zonelist.xml</p>
  </dd>
  <dt>
    <p><strong>zonelist import</strong></p>
  </dt>
  <dd>
    <p>Synchronise the database with the contents of zonelist.xml; identical to "update zonelist"</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KEY MANAGEMENT SUBCOMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>key generate --policy|-p </strong><em>name</em><strong> --interval|-n </strong><em>interval</em><strong> [--zonetotal|-Z </strong><em>zonetotal</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Create enough keys for the named policy to last for the period of time given by interval.  See INTERVAL FORMAT for the format of timing specifications.</p><p>If configured to, OpenDNSSEC will automatically create keys when the need arises.  This command can be used to pregenerate keys (maybe for the expected lifetime of an HSM) to help with backup policies.  It is also a convenient method of pregenerating a set of keys to allow a disaster recovery site to have a copy of the keys without needed to synchronise keys generated on the fly.</p><p>By default the command generates keys for all the zones found on the specified policy. If the optional parameter --zonetotal is specified then keys will be generated for that total number of zones, regardless of how many are actually currently on the policy.</p>
  </dd>
  <dt>
    <p><strong>key import --algorithm|-g </strong><em>algname</em><strong> --bits|-b </strong><em>bits</em><strong> --repository|-r </strong><em>repo</em><strong> --cka_id|-k </strong><em>ckaid</em><strong> --zone|-z </strong><em>zone</em><strong> --keytype|-t </strong><em>type</em><strong> --keystate|-e </strong><em>state</em><strong> --time|-w </strong><em>time</em><strong> [--check-repository|-C </strong><em>checkrepository</em><strong>] [--retire|-y </strong><em>time</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Add a key which was created outside of the OpenDNSSEC code into the database. In doing so, the further details involved in key management must be specified in options.</p><p>The --algorithm option names the algorithm used with this key; the --bits specifies the strength of this algorithm as a key size in bits.</p><p>The --repository option names the repository in which the key should be stored; the --cka_id option specifies the name that will be used to identify this key in that repository; the --zone option specifies the zone for which this key is to be used; the --keytype option specifies whether this key should serve as a KSK or a ZSK.  See KEY TYPES below for an introduction to these terms.</p><p>The --keystate option specifies the state in which the key will be after import, and must be one of the options defined in the KEY STATES section below. the --time option specifies the time that this key was created; the --check-repository option specified that the key import should fail if no matching key with the specified cka_id exists in the Repository. the --retire option specifies the time that this key should be retired. These last two options take the formats given in the TIME FORMATS section below.</p>
  </dd>
  <dt>
    <p><strong>key export --zone|-z </strong><em>name</em><strong> [--keystate|-e </strong><em>state</em><strong>] [--keytype|-t </strong><em>type</em><strong>] [--ds]</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>key export --all [--keystate|-e </strong><em>state</em><strong>] [--keytype|-t </strong><em>type</em><strong>] [--ds]</strong></p>
  </dt>
  <dd>
    <p>Export the keys for a particular zone, or for all zones respectively, from the database.  The --ds option can be used to retrieve DS records for upload to a registry instead of the full key; the --keystate option can be used to limit the output to keys in a given state; the --keytype option can be used to limit the output to keys of a given type.  See the <em>KEY TYPES and KEY STATES sections below for a specification of possible</em> key types and states.</p>
  </dd>
  <dt>
    <p><strong>key list [--zone name] [--verbose] [--keystate|--all|-e </strong><em>state</em><strong>|-a] [--keytype </strong><em>type</em><strong>|-t </strong><em>type</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>List information about keys in all zones, or in a particular zone. By default keys in the GENERATE and DEAD state are not displayed.</p><p>The --verbose option is used to list additional information about each key.</p><p>The --keystate option can be used to limit the output to keys in a given state. If the --all option is used then keys in all states (including GENERATE and DEAD) are displayed. The --keytype option can be used to limit the output to keys of a given type.  See the <em>KEY TYPES and KEY STATES sections below for a specification of possible</em> key types and states.</p>
  </dd>
  <dt>
    <p><strong>key purge --zone|-z </strong><em>name</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>key purge --policy|-p </strong><em>name</em><strong></strong></p>
  </dt>
  <dd>
    <p>Remove any keys in the Dead state from the repository and from the database of the KASP Enforcer.  The options --zone and --policy are used to limit this operation to a single named zone or policy, respectively.</p>
  </dd>
  <dt>
    <p><strong>key rollover --zone|-z </strong><em>name</em><strong> --keytype </strong><em>type</em><strong>|-t </strong><em>type</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>key rollover --zone|-z </strong><em>name</em><strong> --all|-a</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>key rollover --policy|-p </strong><em>name</em><strong> --keytype </strong><em>type</em><strong>|-t </strong><em>type</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>key rollover --policy|-p </strong><em>name</em><strong> --all|-a</strong></p>
  </dt>
  <dd>
    <p>Rollover active keys on the named zone or policy, respectively. This command is used to intiate manual rollovers; if it is not given, OpenDNSSEC will automatically rollover keys when the need arises. (Or, in the case of KSKs it will start the rollover process, to finish the KSK rollover see ksk-roll below.)</p><p>The --keytype option specifies the type of key to roll. Alternatively the --all option can be used which will roll both types of keys. After running, the KASP Enforcer will be woken up so that the signer can be sent the new information.</p><p>If the policy that the zone is on specifies that keys are shared then all zones on that policy will be rolled. If appropriate, a backup of the sqlite DB file is made.</p><p>If there are no keys ready to take over from the current key then the rollover will not occur immediately, but will be put off until the is a key in the ready state.</p>
  </dd>
  <dt>
    <p><strong>key ksk-retire --zone|-z </strong><em>zone</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>key ksk-retire --keytag|-x </strong><em>keytag</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>key ksk-retire --cka_id|-k </strong><em>ckaid</em><strong></strong></p>
  </dt>
  <dd>
    <p>Indicate to OpenDNSSEC that a currently active key should be retired. If key identifiers are not provided then the oldest key in the zone will be retired.</p><p>If only one key is in the active state then this command will exit with an error message, as completing would leave no active keys.</p>
  </dd>
  <dt>
    <p><strong>key ds-seen --zone|-z </strong><em>zone</em><strong> --keytag|-x </strong><em>keytag</em><strong> [--no-notify|-l] [--no-retire|-f]</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>key ds-seen --zone|-z </strong><em>zone</em><strong> --cka_id|-k </strong><em>ckaid</em><strong> [--no-notify|-l] [--no-retire|-f]</strong></p>
  </dt>
  <dd>
    <p>Indicate to OpenDNSSEC that a submitted DS record has appeared in the parent zone, and thereby trigger the completion of a KSK rollover. Note that this action is not yet standardised, and can therefore not be solved in a generic, automatic way.  This command was designed for inclusion in any personalised setup that may or may not be automated.</p><p>There are several ways to specify which DS is in DNS, and the options reflect these alternatives.  The --keytag option specifies the short integer that serves as a DNSSEC handle to a key; the --cka_id option refers to a key by way of its long hexadecimal identifier used to identify the key in the repository.</p><p>An optional --no-notify flag can also be passed in, which prevents the enforcer being notified of this change. If this flag is used then the enforcer must be manually notified with the 'ods-enforcerd notify' command or the changes will not take effect until the next scheduled run of the enforcer.</p><p>An optional --no-retire flag can also be passed in, without this the existing key is moved into the retired state at the same time as making the new key active. If you wish to delay this step then pass in this flag and use the ksk-retire command when needed.</p>
  </dd>
  <dt>
    <p><strong>key delete --cka_id|-k </strong><em>ckaid</em><strong> [--no-hsm]</strong></p>
  </dt>
  <dd>
    <p>Remove a named key from the system.</p><p>Keys in the GENERATE or DEAD state can be safely removed from the system as they are not in use.</p><p>The --no-hsm flag can be provided if you want to leave the key material on the HSM.</p>
  </dd>
  <dt>
    <p><strong>rollover list</strong></p>
  </dt>
  <dd>
    <p>List the expected dates and times of upcoming rollovers.  This can be used to get an idea of upcoming work, such as the non-standardised submission of DS records to a registry.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">POLICY ADMINISTRATION SUBCOMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>policy export [--policy|--all|-p|-a]</strong></p>
  </dt>
  <dd>
    <p>Export a policy from the database in the same format as the kasp.xml file.</p>
  </dd>
  <dt>
    <p><strong>policy import</strong></p>
  </dt>
  <dd>
    <p>Update the database with the contents of kasp.xml; identical to "update kasp".</p>
  </dd>
  <dt>
    <p><strong>policy purge</strong></p>
  </dt>
  <dd>
    <p>* Experimental *</p><p>Remove any policies which have no zones associated with them. Note that this command has only been tested in a lab environment and so caution is recommended.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPOSITORY AND BACKUP SUBCOMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>repository list</strong></p>
  </dt>
  <dd>
    <p>List repositories from the database.</p>
  </dd>
  <dt>
    <p><strong>backup list --repository|-r name</strong></p>
  </dt>
  <dd>
    <p>List the backups that have been made on the given repository. The --repository option specifies what repository to list.</p>
  </dd>
  <dt>
    <p><strong>backup prepare --repository|-r name</strong></p>
  </dt>
  <dd>
    <p>Start a two-phase key backup procedure. Prepare the keys generated up to here for backup.  Any keys generated automatically by OpenDNSSEC after this command are not guaranteed to be backed up, and will therefore not be taken into account when committing the prepared keys for use by OpenDNSSEC.  The next command is usually either <strong>backup commit</strong> or, in case of failure of the key backup itself, <strong>backup rollback</strong>.  This sequence works reliably if the KASP Enforcer is running.  If it is not, the single-phase backup of <strong>backup done</strong> provides a one-phase backup alternative.</p>
  </dd>
  <dt>
    <p><strong>backup commit --repository|-r name</strong></p>
  </dt>
  <dd>
    <p>Successfully end a two-phase key backup procedure. After a key backup has succeeded, release all previously prepared keys for service by OpenDNSSEC.  Any keys that were generated since the last issued preparation will not be released as it is uncertain whether these are actually backed up.</p>
  </dd>
  <dt>
    <p><strong>backup rollback --repository|-r name</strong></p>
  </dt>
  <dd>
    <p>Safely end a failed two-phase key backup procedure. After a key backup has failed, rollback all previously prepapared keys to the state where they are generated, but not yet available for service by OpenDNSSEC.  After fixing this problem, a new attempt to backup the keys can be made.</p>
  </dd>
  <dt>
    <p><strong>backup done --repository|-r name [--force]</strong></p>
  </dt>
  <dd>
    <p>*DEPRECATED*</p><p>Indicate that a backup of the given repository has been done, all non-backed up keys will now be marked as backed up. The --repository option specifies what repository to list.</p><p>Note that the KASP Enforcer may take the initiative to generate keys after the backup has started and before the backup is done.  This single-phase backup command waives that, which is safe when the KASP Enforcer is not running.  If you intend to keep the Enforcer running, you will instead want to use the two-phase <strong>backup prepare</strong> followed by either <strong>backup commit</strong> or <strong>backup rollback</strong>.</p>
  </dd>
  <dt>
    <p><strong>database backup [--output|-o output]</strong></p>
  </dt>
  <dd>
    <p>Make a copy of the database of the KASP Enforcer (if using sqlite). This command ensures that the database is in a consistent state by taking a lock out first.  The --output option specifies where the output should go; if not specified, the output goes to the usual enforcer.db.backup file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROCESS CONTROL SUBCOMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>start|stop|notify</strong></p>
  </dt>
  <dd>
    <p>Start, stop or send "SIGHUP" to the ods-enforcerd process.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KEY STATES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>GENERATE</p>
  </dt>
  <dd>
    <p>The key has just been generated, but is not ready for use.</p>
  </dd>
  <dt>
    <p>PUBLISH</p>
  </dt>
  <dd>
    <p>The key has been published in the parent zone.</p>
  </dd>
  <dt>
    <p>READY</p>
  </dt>
  <dd>
    <p>The key is ready for use. E.g. according to settings in the policy the key has been published for long enough to have propagated to all resolvers.</p>
  </dd>
  <dt>
    <p>ACTIVE</p>
  </dt>
  <dd>
    <p>The key is actively being used to sign one or more zones.</p>
  </dd>
  <dt>
    <p>RETIRE</p>
  </dt>
  <dd>
    <p>The key has either reached the end of its scheduled life, or it has been rolled prematurely. However, records signed with it may still be cached sp the key is still being published.</p>
  </dd>
  <dt>
    <p>DEAD</p>
  </dt>
  <dd>
    <p>The key has been retired for long enough that its use is no longer cached, so it has been removed from the zone.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KEY TYPES</h2>
        <div class="sectioncontent">
<p>Keys can be of two types: KSK or ZSK.  These terms are explained in more detail in <strong>opendnssec</strong>(1).</p><p>In DNS records, the KSK can usually be recognised by having its SEP (Secure Entry Point) flag set.  But please note that officially this is a mere hint.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERVAL FORMAT</h2>
        <div class="sectioncontent">
<p>When specifying an interval for a key generation run the ISO 8601 standard is used, e.g. P2Y6M for 2 years and 6 months; or PT12H30M for 12 hours and 30 minutes. Note that a year is assumed to be 365 days and a month is assumed to be 31 days.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TIME FORMATS</h2>
        <div class="sectioncontent">
<p>When specifying a generation/retire time for a key being imported the following formats are understood:</p>
<dl class='dl-vertical'>
  <dt>
    <p>YYYYMMDD[HH[MM[SS]]]</p>
  </dt>
  <dd>
    <p>(all numeric)</p>
  </dd>
  <dt>
    <p>D-MMM-YYYY[:| ]HH[:MM[:SS]]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>DD-MMM-YYYY[:| ]HH[:MM[:SS]]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>YYYY-MMM-DD[:| ]HH[:MM[:SS]]</p>
  </dt>
  <dd>
    <p>(alphabetic month)</p>
  </dd>
  <dt>
    <p>D-MM-YYYY[:| ]HH[:MM[:SS]]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>DD-MM-YYYY[:| ]HH[:MM[:SS]]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>YYYY-MM-DD[:| ]HH[:MM[:SS]]</p>
  </dt>
  <dd>
    <p>(numeric month)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/etc/opendnssec/conf.xml</strong></p>
  </dt>
  <dd>
    <p>The main configuration file for OpenDNSSEC.</p>
  </dd>
  <dt>
    <p><strong>/etc/opendnssec/zonelist.xml</strong></p>
  </dt>
  <dd>
    <p>The list of zones, as defined in conf.xml.</p>
  </dd>
  <dt>
    <p><strong>/etc/opendnssec/kasp.xml</strong></p>
  </dt>
  <dd>
    <p>The configuration of policies that define timing and security, as defined in conf.xml.</p>
  </dd>
  <dt>
    <p><strong>/var/lib/opendnssec/enforcer.db.backup</strong></p>
  </dt>
  <dd>
    <p>A backup file of the database used by the KASP Enforcer.Note that this does not include the keys, which are to be extracted from its own repository.</p>
  </dd>
  <dt>
    <p><strong>/var/lib/opendnssec/unsigned/</strong></p>
  </dt>
  <dd>
    <p>The location that is usually configured in conf.xml to contain unsigned zones.</p>
  </dd>
  <dt>
    <p><strong>/var/lib/opendnssec/signed/</strong></p>
  </dt>
  <dd>
    <p>The location that is usually configured in conf.xml to contain signed zones.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ods-ksmutil&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/ods-control.8.html"><strong>ods-control</strong>(8)</a>, <a href="../man8/ods-enforcerd.8.html"><strong>ods-enforcerd</strong>(8)</a>, <a href="../man1/ods-hsmspeed.1.html"><strong>ods-hsmspeed</strong>(1)</a>, <a href="../man1/ods-hsmutil.1.html"><strong>ods-hsmutil</strong>(1)</a>, <a href="../man1/ods-kaspcheck.1.html"><strong>ods-kaspcheck</strong>(1)</a>, <a href="../man8/ods-signer.8.html"><strong>ods-signer</strong>(8)</a>, <a href="../man8/ods-signerd.8.html"><strong>ods-signerd</strong>(8)</a>, <a href="../man5/ods-timing.5.html"><strong>ods-timing</strong>(5)</a>, <a href="../man7/opendnssec.7.html"><strong>opendnssec</strong>(7)</a>, <strong>http://www.opendnssec.org/</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>ods-ksmutil</strong> was written by Sion Lloyd and Nominet as part of the OpenDNSSEC project.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="opendnssec-enforcer-mysql-ods-ksmutil.1.html"><span aria-hidden="true">&larr;</span> ods-ksmutil.1: Opendnssec zone and key management</a></li>
   <li class="next"><a href="ods-server.1.html">ods-server.1: Minimal obex server based on obex-data-server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
