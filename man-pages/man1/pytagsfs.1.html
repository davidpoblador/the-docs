<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pytagsfs: Filesystem mapping media files to an arbitrary directory structure</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Filesystem mapping media files to an arbitrary directory structure">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pytagsfs (1) manual">
  <meta name="twitter:description" content="Filesystem mapping media files to an arbitrary directory structure">
  <meta name="twitter:image" content="https://www.carta.tech/images/pytagsfs-pytagsfs-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pytagsfs.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pytagsfs (1) manual" />
  <meta property="og:description" content="Filesystem mapping media files to an arbitrary directory structure" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pytagsfs-pytagsfs-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pytagsfs<small> (1)</small></h1>
        <p class="lead">Filesystem mapping media files to an arbitrary directory structure</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pytagsfs.1.html">
      <span itemprop="name">pytagsfs: Filesystem mapping media files to an arbitrary directory structure</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pytagsfs/">
      <span itemprop="name">pytagsfs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pytagsfs.1.html">
      <span itemprop="name">pytagsfs: Filesystem mapping media files to an arbitrary directory structure</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pytagsfs</strong> [OPTIONS] {<em>sourcedir</em>} {<em>mountpoint</em>}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>pytagsfs is a FUSE filesystem that was designed to present multiple views of tagged media files. For instance, a directory tree containing audio files could be mapped to a new directory structure organizing those same files by album, genre, release date, etc.</p><p>To get a feel for what&apos;s possible, see the section called &ldquo;EXAMPLES&rdquo;.</p><p>Log messages are kept in a limited-size ring buffer in memory, and can be read from the virtual file named ".log", under the mount point root.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>--version</strong></p><p>show version of program and exit</p><p><strong>-h</strong>, <strong>--help</strong></p><p>show summary of options and exit</p><p><strong>-f</strong></p><p>foreground operation</p><p><strong>-d</strong></p><p>enable debug output (implies -f)</p><p><strong>-s</strong></p><p>disable multi-threaded operation</p><p><strong>-r</strong></p><p>mount read-only</p><p><strong>-o</strong> opt[,opt...]</p><p>mount options</p><p><strong>-o</strong> format=FORMAT</p><p>format string for destination paths (see the section called &ldquo;FORMAT STRINGS&rdquo;)</p><p><strong>-o</strong> srcfilter=EXPR</p><p>adds a source path filter; may be specified more than once (see the section called &ldquo;PATH FILTERS&rdquo;)</p><p><strong>-o</strong> dstfilter=EXPR</p><p>adds a destination path filter; may be specified more than once (see the section called &ldquo;PATH FILTERS&rdquo;)</p><p><strong>-o</strong> iocharset=ENCODING</p><p>mounted tree character encoding (default utf-8)</p><p><strong>-o</strong> source_iocharset=ENCODING</p><p>source directory character encoding (default utf-8)</p><p><strong>-o</strong> ro</p><p>synonym for -r (Linux)</p><p><strong>-o</strong> rdonly</p><p>synonym for -r (Darwin, FreeBSD, NetBSD, OpenBSD)</p><p><strong>-o</strong> allow_other</p><p>allow access to other users</p><p><strong>-o</strong> allow_root</p><p>allow access to root</p><p><strong>-o</strong> nonempty</p><p>allow mounts over non-empty file/dir</p><p><strong>-o</strong> uid=UID</p><p>set file owner</p><p><strong>-o</strong> gid=GID</p><p>set file group</p><p><strong>-o</strong> verbosity=VERBOSITY</p><p>log level; must be one of "debug", "info", "warning", "error", "critical"; defaults to "warning"</p><p><strong>-o</strong> logsize=LOGSIZE</p><p>length of log file ring buffer</p><p><strong>-o</strong> debug</p><p>synonym for -d</p><p><strong>-o</strong> force_write_support</p><p>Force write support on systems that are not known to have correct mmap semantics. This option is dangerous and can lead to file corruption with some applications on some systems!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FORMAT STRINGS</h2>
        <div class="sectioncontent">
<p>A format string must be specified for each pytagsfs mount. The format string specifies the structure of the virtual filesystem mount by defining a template for virtual paths. For instance, the following format string defines a virtual filesystem layout that organizes media files by artist, then by album, and, finally, by track name:</p>
<pre>
/%{artist}/%{album}/%{track}.%{extension}
</pre>
<h3>Substitutions</h3>
<p>The format string should contain zero or more substitution sequences. Each such sequence begins with a percent sign (%).</p><p>Substitution sequences may be specified in either long or short forms. Long-form substitution sequences are written as "%{KEY}", where KEY corresponds with a meta-data key. The set of available keys varies from file to file, however, many media files feature some or all of the following long keys:</p><p><strong>filename</strong>  name of the original file</p><p><strong>parent</strong>  name of the original file&apos;s parent directory</p><p><strong>extension</strong>  extension of the original file</p><p><strong>tracknumber</strong>  track number; concise (like 7)</p><p><strong>TRACKNUMBER</strong>  track number; two digits with leading zeros (like 07)</p><p><strong>artist</strong>  artist</p><p><strong>composer</strong> composer</p><p><strong>title</strong>  track title</p><p><strong>album</strong>  album title</p><p><strong>year</strong>  year of release</p><p><strong>genre</strong>  genre</p><p>Short-form substitution sequences are written as "%X". Each such sequence is an abbreviation for a long-form sequence, as indicated below:</p><p><strong>f</strong>  filename</p><p><strong>p</strong>  parent</p><p><strong>e</strong>  extension</p><p><strong>n</strong>  number</p><p><strong>N</strong>  NUMBER</p><p><strong>a</strong>  artist</p><p><strong>c</strong>  composer</p><p><strong>t</strong>  title</p><p><strong>l</strong>  album</p><p><strong>y</strong>  year</p><p><strong>g</strong>  genre</p>
<h3>Modifiers</h3>
<p>Format strings can be further extended to perform string translations on parameters prior to substitution. Such translations are indicated by the inclusion of a modifier character after the percent sign. For instance, "%^a" indicates an all-caps version of the artist name, as does "%^{artist}".</p><p>The full list of modifier characters follows:</p><p><strong>^</strong>  UPPERCASE</p><p><strong>_</strong>  lowercase</p><p><strong>!</strong>  Title Case</p>
<h3>Conditional Expressions</h3>
<p>Normally, any file for which a parameter required by the format string cannot be determined is implicitly excluded from the resulting filesystem. Conditionals can be used to express that these files should be included, but that those portions of the format string that cannot be rendered should be omitted or replaced.</p><p>Two types of conditional expressions may be used: "if" expressions and "if-else" expressions. The contents of an "if" expression are omitted unless all parameters within that expressions can be successfully evaluated. An "if-else" expression is similar, except that, if the expression does not evaluate, an alternative will be used instead. Use the following syntax:</p><p>%?<em>expr</em>%?</p><p>%?<em>expr</em>%:<em>alt</em>%?</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PATH FILTERS</h2>
        <div class="sectioncontent">
<p>Path filters can be used to limit the set of files presented by the filesystem using regular expressions. Files are filtered by source path or by destination path, inclusively (limiting the set of paths to those that match the regular expression) or exclusively (limiting the set of paths to those that do <em>not</em> match the regular expression).</p><p>Use the mount options <strong>srcfilter</strong> and <strong>dstfilter</strong> to filter by source path and destination path, respectively. Filters are inclusive unless the filter parameter starts with an exclamation point, in which case the regular expression is assumed to be the part of the parameter following the exclamation point.</p><p>Multiple filters of any kind may be used, and are applied in the order that they are specified on the command line. See the section called &ldquo;EXAMPLES&rdquo; for some sample filters.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>View media files in src, with original filenames in a flat directory structure:</p>
<pre>
$ pytagsfs -o format=&apos;/%f&apos; src mnt
</pre>
<p>View media files in src by album on mnt:</p>
<pre>
$ pytagsfs -o format=&apos;/%a/%f&apos; src mnt
</pre>
<p>A more complex album-based view:</p>
<pre>
$ pytagsfs -o format=&apos;/%a - %l/%N %a - %t [%l].%e&apos;
</pre>
<p>This is like above, but filters the result. I use this to display my files by album, but exclude compilations (which I&apos;ve tagged to include a hyphen in the album name, like "various - album"):</p>
<pre>
$ pytagsfs -o &#92;
  format=&apos;/%a - %l/%N %a - %t [%l].%e&apos;,&#92;
  dstfilter=&apos;!^/[^/]* - [^/]* - [^/]*/&apos; &#92;
  src albums
</pre>
<p>I use this to display the compilations:</p>
<pre>
$ pytagsfs -o &#92;
  format=&apos;/%l/%N %a - %t [%l].%e&apos;,&#92;
  dstfilter=&apos;^/[^/]* - [^/]*/&apos; &#92;
  src compilations
</pre>
<p>Maybe you only want to see files that start with "a" and end in ".mp3"?</p>
<pre>
$ pytagsfs -o &#92;
  format=&apos;/%f&apos;,dstfilter=&apos;^/a&apos;,dstfilter=&apos;&#92;.mp3$&apos; &#92;
  src mnt
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UNMOUNTING</h2>
        <div class="sectioncontent">
<p>To unmount the filesystem on Linux use <a href="../man1/fusermount.1.html"><strong>fusermount</strong>(1)</a>:</p>
<pre>
$ fusermount -u mnt

</pre>
<p>To unmount the filesystem on OS X or *BSD use <strong>umount</strong>(1):</p>
<pre>
$ umount mnt

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Please report bugs on launchpad at http://launchpad.net/products/pytagsfs/+bugs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pytagsfs&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/fusermount.1.html"><strong>fusermount</strong>(1)</a>, <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a>, <a href="../man8/umount.8.html"><strong>umount</strong>(8)</a>, <a href="../man1/pytags.1.html"><strong>pytags</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Forest Bond</strong></p><p>Author.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2007, 2008, 2009</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pytags.1.html"><span aria-hidden="true">&larr;</span> pytags.1: Set and remove tags on media files from filename and options</a></li>
   <li class="next"><a href="pytest.1.html">pytest.1: Run python unit tests <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
