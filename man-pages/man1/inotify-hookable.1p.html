<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>inotify-hookable: Blocking command-line interface to inotify</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Blocking command-line interface to inotify">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="inotify-hookable (1p) manual">
  <meta name="twitter:description" content="Blocking command-line interface to inotify">
  <meta name="twitter:image" content="https://www.carta.tech/images/inotify-hookable-inotify-hookable-1p.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1p/inotify-hookable.1p.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="inotify-hookable (1p) manual" />
  <meta property="og:description" content="Blocking command-line interface to inotify" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/inotify-hookable-inotify-hookable-1p.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">inotify-hookable<small> (1p)</small></h1>
        <p class="lead">Blocking command-line interface to inotify</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/inotify-hookable.1p.html">
      <span itemprop="name">inotify-hookable: Blocking command-line interface to inotify</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/inotify-hookable/">
      <span itemprop="name">inotify-hookable</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/inotify-hookable.1p.html">
      <span itemprop="name">inotify-hookable: Blocking command-line interface to inotify</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Watch a directory, tell us when things change in it:</p>
<pre>
    inotify-hookable --watch-directories /tmp/watch-this
</pre>
<p>Watch a git tree, some configs, and a repository of static assets, restart the webserver or compress those assets if anything changes:</p><p>    inotify-hookable &#92;         --watch-directories /etc/uwsgi &#92;         --watch-directories /git_tree/central &#92;         --watch-directories /etc/app-config &#92;         --watch-directories /git_tree/static_assets &#92;         --on-modify-path-command "^(/etc/uwsgi|/git_tree/central|/etc/app-config)=sudo /etc/init.d/uwsgi restart" &#92;         --on-modify-path-command "^/git_tree/static_assets=(cd /git_tree/static_assets && compress_static_assets)"</p><p>Or watch specific files:</p><p>    inotify-hookable &#92;         --watch-files /var/www/cgi-bin/mod_perl_handler &#92;         --on-modify-command "apachectl restart"</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This simple command-line program is my replacement for the functionality offered by Plack's Filesys::Notify::Simple. I found that on very large git trees Plack would spend an inordinate amount watching the filesystem for changes.</p><p>This program uses Linux::Inotify2, so the kernel will notify it <strong>instantly</strong> when something changes (actually it's so fast that we have to work around how fast it sends us events).</p><p>The result is that you can run this e.g. in a screen session and have it watch your development environment, and your webserver will have begun restarting before your finger leaves the <em>save</em> button.</p><p>vim and emacs temporary files are ignored by default (see \*(C`--ignore-paths\*(C'.) so you can edit your files without your server restarting unnecessarily.</p><p>Currently the command-line interface for this is the only one that really makes sense, this module is entirely blocking (although it could probably run in another process via \s-1POE\s0 or something). Patches welcome.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Specify this to watch a directory, you can give this however many times you like to watch lots of directories. Watch a file, specify multiple times for multiple files. You can watch files and directories in the same command. If you supply this any directory you give will be recursively watched. This is on by default. A command that will be run when something is modified. A key-value pair where the key is a regex that'll be matched against a modified path, and the value is a command that'll be run. See the \*(L"\s-1SYNOPSIS\s0\*(R" for an example.</p><p>Useful for e.g. restarting a webserver if you modify directory <em>A</em> but compressing some static assets if you modify directory <em>B</em>. Linux will send you inotify events <strong>really</strong> fast, so fast that if you run something like:</p><p>    touch foo bar</p><p>You might get an event for <em>foo</em> in one batch, followed by an event for <em>bar</em> later on.</p><p>To deal with this we enter a loop when we start getting events and sleep for a default of 100 microseconds, as long as we keep getting events we keep sleeping for 100 microseconds, but as soon as we haven't received anything new we fire off our event handlers. Regexes for files/directories to ignore events for. By default this is set to regexes for vim and emacs temporary files, \*(C`qr{&#92;..*sw.&#92;z}\*(C' and \*(C`qr{&#92;.&#92;#[^/]+&#92;z}\*(C' respectively.</p><p>The regexes match after any \*(C`/\*(C' in the path or the beginning of the string. Spew out some verbose debug output while running.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGMENT</h2>
        <div class="sectioncontent">
<p>This module was originally developed at and for Booking.com. With approval from Booking.com, this module was generalized and put on \s-1CPAN\s0, for which the authors would like to express their gratitude.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>\*(Aevar Arnfjo\*:r\*(d- Bjarmason &lt;avar@cpan.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="inline2test.1p.html"><span aria-hidden="true">&larr;</span> inline2test.1p: The test::inline 2 test compiler</a></li>
   <li class="next"><a href="ipv4calc.1p.html">ipv4calc.1p:  <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
