<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>buffer: Very fast reblocking program</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Very fast reblocking program">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="buffer (1) manual">
  <meta name="twitter:description" content="Very fast reblocking program">
  <meta name="twitter:image" content="https://www.carta.tech/images/buffer-buffer-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/buffer.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="buffer (1) manual" />
  <meta property="og:description" content="Very fast reblocking program" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/buffer-buffer-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">buffer<small> (1)</small></h1>
        <p class="lead">Very fast reblocking program</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/buffer.1.html">
      <span itemprop="name">buffer: Very fast reblocking program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/buffer/">
      <span itemprop="name">buffer</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/buffer.1.html">
      <span itemprop="name">buffer: Very fast reblocking program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">
<p><strong>buffer</strong> [<strong>-S size</strong>] [<strong>-b blocks</strong>] [<strong>-s size</strong>] [<strong>-z size</strong>] [<strong>-m size</strong>] [<strong>-p percentage</strong>] [<strong>-u microseconds</strong>] [<strong>-B</strong>] [<strong>-t</strong>] [<strong>-Z</strong>] [<strong>-i filename</strong>] [<strong>-o filename</strong>] [<strong>-d</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-i filename</strong></p>
  </dt>
  <dd>
    <p>Use the given file as the input file.  The default is stdin.</p>
  </dd>
  <dt>
    <p><strong>-o filename</strong></p>
  </dt>
  <dd>
    <p>Use the given file as the output file.  The default is stdout.</p>
  </dd>
  <dt>
    <p><strong>-S size</strong></p>
  </dt>
  <dd>
    <p>After every chunk of this size has been written, print out how much has been written so far. Also prints the total throughput. By default this is not set.</p>
  </dd>
  <dt>
    <p><strong>-s size</strong></p>
  </dt>
  <dd>
    <p>Size in bytes of each block.  The default blocksize is 10k to match the normal output of the <strong>tar</strong>(1)</em> program.</p>
  </dd>
  <dt>
    <p><strong>-z size</strong></p>
  </dt>
  <dd>
    <p>Combines the <strong>-S</strong> and <strong>-s</strong> flags.</p>
  </dd>
  <dt>
    <p><strong>-b blocks</strong></p>
  </dt>
  <dd>
    <p>Number of blocks to allocate to shared memory circular buffer. Defaults to the number required to fill up the shared memory requested.</p>
  </dd>
  <dt>
    <p><strong>-m size</strong></p>
  </dt>
  <dd>
    <p>Maximum size of the shared memory chunk to allocate for the circular queue. Defaults to one megabyte.</p>
  </dd>
  <dt>
    <p><strong>-p percentage</strong></p>
  </dt>
  <dd>
    <p>Only start a write when the given percentage of the internal queue is full.  A percentage around 75 often proves best. Defaults to zero.</p>
  </dd>
  <dt>
    <p><strong>-u microseconds</strong></p>
  </dt>
  <dd>
    <p>After every write pause for this many microseconds.  Defaults to zero. (Surprisingly a small sleep, 100 usecs, after each write can greatly enhance throughput on some drives.)</p>
  </dd>
  <dt>
    <p><strong>-B</strong></p>
  </dt>
  <dd>
    <p>Force each block written to be padded out to the blocksize.  This is needed by some tape and cartridge drives.  Defaults to unpadded.  This only affects the last block written.</p>
  </dd>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>On exiting print to stderr a brief message showing the total number of bytes written.</p>
  </dd>
  <dt>
    <p><strong>-Z</strong></p>
  </dt>
  <dd>
    <p>If reading/writing directly to a character device (like a tape drive) then after each gigabyte perform an lseek to the start of the file. Use this flag with extreme care.  It can only be used on devices where an lseek does not rewind the tape but does reset the kernels position flags.  It is used to allow more than 2 gigabytes to be written.</p>
  </dd>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Print debug information to stderr during operation.</p>
  </dd>

</dl>
<p>Sizes are a number with an optional trailing character.   A 'b' multiplies the size by 512, a 'k' by 1024 and an 'm' by a meg.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Buffer</em> reads from standard input reblocking to the given blocksize and writes each block to standard output.</p><p>Internally <em>buffer</em> is a pair of processes communicating via a large circular queue held in shared memory.  The reader process only has to block when the queue is full and the writer process when the queue is empty. <em>Buffer</em> is designed to try and keep the writer side continuously busy so that it can stream when writing to tape drives.  When used to write tapes with an intervening network <em>buffer</em> can result in a considerable increase in throughput.</p><p>The default settings for <em>buffer</em> are normally good enough.  If you are a heavy tape user then it is worth your while trying out various different combinations of options. In particular running a <em>buffer</em> at both ends of the pipe can provide a substantial increase (see last example below).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>$ <strong>buffer &lt; /etc/termcap &gt; /dev/rst8</strong></p><p>$ <strong>tar cf - . | rsh somehost 'buffer &gt; /dev/rst8'</strong></p><p>$ <strong>dump fu - | rsh somehost 'buffer -s 16k &gt; /dev/nrst8'</strong></p><p>$ <strong>tar cf - . | buffer |</strong></p><p>&nbsp;&nbsp;&nbsp;rsh somehost 'buffer -S 500K -p 75 &gt; /dev/rst0'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUFFER LIMITS</h2>
        <div class="sectioncontent">
<p>There are 2 limits in <em>buffer</em> affecting the maximum total buffer size: The maximum number of blocks (2048) and the maximum size of a block (512kB). This results in a maximum total buffer size of 1GB.</p><p>Note that there is also a kernel limit for the maximum size of a shared memory segment (used by <em>buffer</em> internally) which is typically much lower than the limits in <em>buffer</em>. So if <em>buffer</em> complains about not being able to create a shared memory segment, this limit might have to be raised using the command <strong>sysctl kernel.shmmax=</strong><em>XXX</em> (see also <strong>sysctl</strong>(1) and <a href="../man5/proc.5.html"><strong>proc</strong>(5)</a>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Internally, for printing purposes, buffer counts in terms of the number of kilobytes output.  If the blocksize you use is not a whole number of kilobytes then the numbers printed will be inaccurate.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THANKS</h2>
        <div class="sectioncontent">
<p>Thanks to Kevin Twidle &lt;kpt@doc.ic.ac.uk&gt; for a lot of early suggestions and patches to make it work with non-tar/dump tapes to exabyte drives.</p><p>Thanks to Andi Karrer &lt;karrer@bernina.ethz.ch&gt;, Rumi Zahir &lt;rumi@iis.ethz.ch&gt; and Christoph Wicki &lt;wicki@iis.ethz.ch&gt; for patches to make buffer work when trying to write single tape files of greater than 2 gigabytes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO buffer&hellip;</h2>
        <div class="sectioncontent">
<p>dd(1), <strong>tar</strong>(1), <strong>rsh</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="buddy-ng.1.html"><span aria-hidden="true">&larr;</span> buddy-ng.1: A tool to work with easside-ng</a></li>
   <li class="next"><a href="buffy.1.html">buffy.1: Mail folder monitor. monitor new and unread messages in a collection of mail folders. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
