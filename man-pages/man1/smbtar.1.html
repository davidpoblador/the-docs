<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>smbtar: Shell script for backing up smb/cifs shares directly to unix tape drives</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shell script for backing up smb/cifs shares directly to unix tape drives">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="smbtar (1) manual">
  <meta name="twitter:description" content="Shell script for backing up smb/cifs shares directly to unix tape drives">
  <meta name="twitter:image" content="https://www.carta.tech/images/smbclient-smbtar-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/smbtar.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="smbtar (1) manual" />
  <meta property="og:description" content="Shell script for backing up smb/cifs shares directly to unix tape drives" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/smbclient-smbtar-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">smbtar<small> (1)</small></h1>
        <p class="lead">Shell script for backing up smb/cifs shares directly to unix tape drives</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/smbtar.1.html">
      <span itemprop="name">smbtar: Shell script for backing up smb/cifs shares directly to unix tape drives</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/smbclient/">
      <span itemprop="name">smbclient</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/smbtar.1.html">
      <span itemprop="name">smbtar: Shell script for backing up smb/cifs shares directly to unix tape drives</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>smbtar [-r] [-i] [-a] [-v] {-s&nbsp;server} [-p&nbsp;password] [-x&nbsp;services] [-X] [-N&nbsp;filename] [-b&nbsp;blocksize] [-d&nbsp;directory] [-l&nbsp;loglevel] [-u&nbsp;user] [-t&nbsp;tape] {filenames}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This tool is part of the <a href="../man7/samba.7.html"><strong>samba</strong>(7)</a> suite.</p><p>smbtar is a very small shell script on top of <a href="../man1/smbclient.1.html"><strong>smbclient</strong>(1)</a> which dumps SMB shares directly to tape.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>-s server</p><p>The SMB/CIFS server that the share resides upon.</p><p>-x service</p><p>The share name on the server to connect to. The default is "backup".</p><p>-X</p><p>Exclude mode. Exclude filenames... from tar create or restore.</p><p>-d directory</p><p>Change to initial <em>directory </em> before restoring / backing up files.</p><p>-v</p><p>Verbose mode.</p><p>-p password</p><p>The password to use to access a share. Default: none</p><p>-u user</p><p>The user id to connect as. Default: UNIX login name.</p><p>-a</p><p>Reset DOS archive bit mode to indicate file has been archived.</p><p>-t tape</p><p>Tape device. May be regular file or tape device. Default: <em>$TAPE</em> environmental variable; if not set, a file called tar.out.</p><p>-b blocksize</p><p>Blocking factor. Defaults to 20. See <strong>tar</strong>(1) for a fuller explanation.</p><p>-N filename</p><p>Backup only files newer than filename. Could be used (for example) on a log file to implement incremental backups.</p><p>-i</p><p>Incremental mode; tar files are only backed up if they have the archive bit set. The archive bit is reset after each file is read.</p><p>-r</p><p>Restore. Files are restored to the share from the tar file.</p><p>-l log level</p><p>Log (debug) level. Corresponds to the <em>-d</em> flag of <a href="../man1/smbclient.1.html"><strong>smbclient</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p>The <em>$TAPE</em> variable specifies the default tape device to write to. May be overridden with the -t option.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The smbtar script has different options from ordinary tar and from smbclient&apos;s tar command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>Sites that are more careful about security may not like the way the script handles PC passwords. Backup and restore work on entire shares; should work on file lists. smbtar works best with GNU tar and may not work well with other versions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>See the <em>DIAGNOSTICS</em> section for the <a href="../man1/smbclient.1.html"><strong>smbclient</strong>(1)</a> command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This man page is correct for version 3 of the Samba suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO smbtar&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/smbd.8.html"><strong>smbd</strong>(8)</a>, <a href="../man1/smbclient.1.html"><strong>smbclient</strong>(1)</a>, <a href="../man5/smb.conf.5.html"><strong>smb.conf</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.</p><p>Ricky Poulten wrote the tar extension and this man page. The smbtar script was heavily rewritten and improved by Martin Kraemer. Many thanks to everyone who suggested extensions, improvements, bug fixes, etc. The man page sources were converted to YODL format (another excellent piece of Open Source software, available at ftp://ftp.icce.rug.nl/pub/unix/) and updated for the Samba 2.0 release by Jeremy Allison. The conversion to DocBook for Samba 2.2 was done by Gerald Carter. The conversion to DocBook XML 4.2 for Samba 3.0 was done by Alexander Bokovoy.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="smbstatus.1.html"><span aria-hidden="true">&larr;</span> smbstatus.1: Report on current samba connections</a></li>
   <li class="next"><a href="smbtorture.1.html">smbtorture.1: Run a series of tests against a smb server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
