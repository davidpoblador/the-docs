<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>img2mercgrd: Extract region of img, preserving mercator, save as grd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Extract region of img, preserving mercator, save as grd">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="img2mercgrd (1gmt) manual">
  <meta name="twitter:description" content="Extract region of img, preserving mercator, save as grd">
  <meta name="twitter:image" content="https://www.carta.tech/images/gmt-img2mercgrd-1gmt.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1gmt/img2mercgrd.1gmt.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="img2mercgrd (1gmt) manual" />
  <meta property="og:description" content="Extract region of img, preserving mercator, save as grd" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gmt-img2mercgrd-1gmt.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">img2mercgrd<small> (1gmt)</small></h1>
        <p class="lead">Extract region of img, preserving mercator, save as grd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/img2mercgrd.1gmt.html">
      <span itemprop="name">img2mercgrd: Extract region of img, preserving mercator, save as grd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gmt/">
      <span itemprop="name">gmt</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/img2mercgrd.1gmt.html">
      <span itemprop="name">img2mercgrd: Extract region of img, preserving mercator, save as grd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>img2mercgrd</strong> <em>imgfile</em> <strong>-G</strong><em>grdfile</em> <strong>-R</strong><em>west</em>/<em>east</em>/<em>south</em>/<em>north</em>[<strong>r</strong>] <strong>-T</strong><em>type</em> [ <strong>-C</strong> ] [ <strong>-D</strong>[<em>minlat/maxlat</em>] ] [ <strong>-N</strong><em>navg</em> ] [ <strong>-S</strong><em>scale</em> ] [ <strong>-V</strong> ] [ <strong>-W</strong><em>maxlon</em> ] [ <strong>-m</strong><em>minutes</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>img2mercgrd</strong> reads an img format file and creates a grid file.  The Spherical Mercator projection of the img file is preserved, so that the region <strong>-R</strong> set by the user is modified slightly; the modified region corresponds to the edges of pixels [or groups of <em>navg</em> pixels].  The grid file header is set so that the x and y axis lengths represent distance from the west and south edges of the image, measured in user default units, with <strong>-Jm</strong> 1 and the adjusted <strong>-R</strong>.  By setting the default <strong>ELLIPSOID</strong> = Sphere, the user can make overlays with the adjusted <strong>-R</strong> so that they match. See <strong>EXAMPLES</strong> below.  The adjusted <strong>-R</strong> is also written in the grdheader remark, so it can be found later.  The <strong>-T</strong><em>type</em> selects all data or only data at constrained pixels, and can be used to create a grid of 1s and 0s indicating constraint locations.  The output grid file is pixel registered; it inherits this from the img file.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>imgfile</em></p>
  </dt>
  <dd>
    <p>An img format file such as the marine gravity or seafloor topography fields estimated from satellite altimeter data by Sandwell and Smith.  If the user has set an environment variable <strong>$GMT_IMGDIR</strong>, then <strong>img2mercgrd</strong> will try to find <em>imgfile</em> in <strong>$GMT_IMGDIR</strong>; else it will try to open <em>imgfile</em> directly.</p>
  </dd>
  <dt>
    <p><strong>-G</strong></p>
  </dt>
  <dd>
    <p><em>grdfile</em> is the name of the output grid file.</p>
  </dd>
  <dt>
    <p><strong>-R</strong></p>
  </dt>
  <dd>
    <p><em>west, east, south,</em> and <em>north</em> specify the Region of interest, and you may specify them in decimal degrees or in [+-]dd:mm[:ss.xxx][W|E|S|N] format.  Append <strong>r</strong> if lower left and upper right map coordinates are given instead of w/e/s/n.  The two shorthands <strong>-Rg</strong> and <strong>-Rd</strong> stand for global domain (0/360 and -180/+180 in longitude respectively, with -90/+90 in latitude). Alternatively, specify the name of an existing grid file and the <strong>-R</strong> settings (and grid spacing, if applicable) are copied from the grid.</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p><em>type</em> handles the encoding of constraint information.  <em>type</em> = 0 indicates that no such information is encoded in the img file (used for pre-1995 versions of the gravity data; all more recent files do not support this choice) and gets all data.  <em>type</em> &gt; 0 indicates that constraint information is encoded (1995 and later (current) versions of the img files) so that one may produce a grid file as follows: <strong>-T</strong><em>1</em> gets data values at all points, <strong>-T</strong><em>2</em> gets data values at constrained points and NaN at interpolated points; <strong>-T</strong><em>3</em> gets 1 at constrained points and 0 at interpolated points.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-C</strong></p>
  </dt>
  <dd>
    <p>Set the x and y Mercator coordinates relative to projection center (lon = lat = 0) [Default is relative to lower left corner of grid].</p>
  </dd>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>Use the extended latitude range -80.738/+80.738.  Alternatively, append <em>minlat/maxlat</em> as the latitude extent of the input img file.  [Default is -72.006/72.006].</p>
  </dd>
  <dt>
    <p><strong>-N</strong></p>
  </dt>
  <dd>
    <p>Average the values in the input img pixels into <em>navg</em> by <em>navg</em> squares, and create one output pixel for each such square.  If used with <strong>-T</strong><em>3</em> it will report an average constraint between 0 and 1.  If used with <strong>-T</strong><em>2</em> the output will be average data value or NaN according to whether average constraint is &gt; 0.5. <em>navg</em> must evenly divide into the dimensions of the imgfile in pixels. [Default <em>1</em> does no averaging].</p>
  </dd>
  <dt>
    <p><strong>-S</strong></p>
  </dt>
  <dd>
    <p>Multiply the img file values by <em>scale</em> before storing in grid file.  [Default is 1.0]. (img topo files are stored in (corrected) meters; gravity files in mGal*10; vertical deflection files in microradians*10, vertical gravity gradient files in Eotvos*10. Use <strong>-S</strong> 0.1 for those files.)</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Selects verbose mode, which will send progress reports to stderr [Default runs "silently"]. Particularly recommended here, as it is helpful to see how the coordinates are adjusted.</p>
  </dd>
  <dt>
    <p><strong>-m</strong></p>
  </dt>
  <dd>
    <p>Indicate <em>minutes</em> as the width of an input img pixel in minutes of longitude. [Default is 2.0].</p>
  </dd>
  <dt>
    <p><strong>-W</strong></p>
  </dt>
  <dd>
    <p>Indicate <em>maxlon</em> as the maximum longitude extent of the input img file.  Versions since 1995 have had <em>maxlon</em> = 360.0, while some earlier files had <em>maxlon</em> = 390.0.  [Default is 360.0].</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To extract data in the region <strong>-R</strong>-40/40/-70/-30 from <em>world_grav.img.7.2</em>, run</p><p><strong>img2mercgrd</strong> world_grav.img.7.2 <strong>-G</strong> merc_grav.grd <strong>-R</strong>-40/40/-70/-30 <strong>-T</strong> 1 <strong>-V</strong></p><p>Note that the <strong>-V</strong> option tells us that the range was adjusted to <strong>-R</strong>-40/40/-70.0004681551/-29.9945810754.   We can also use <strong>grdinfo</strong> to find that the grid file header shows its region to be <strong>-R</strong> 0/80/0/67.9666667   This is the range of x,y we will get from a Spherical Mercator projection using <strong>-R</strong>-40/40/-70.0004681551/-29.9945810754 and <strong>-Jm</strong> 1.  Thus, to take ship.lonlatgrav and use it to sample the merc_grav.grd, we can do this:</p><p><strong>gmtset</strong> <strong>ELLIPSOID</strong> Sphere</p><p><strong>mapproject</strong> <strong>-R</strong>-40/40/-70.0004681551/-29.9945810754 <strong>-Jm</strong> 1 ship.lonlatgrav | <strong>grdtrack</strong> <strong>-G</strong> merc_grav.grd | <strong>mapproject</strong> <strong>-R</strong>-40/40/-70.0004681551/-29.9945810754 <strong>-Jm</strong> 1 <strong>-I</strong> &gt; ship.lonlatgravsat</p><p>It is recommended to use the above method of projecting and unprojecting the data in such an application, because then there is only one interpolation step (in <strong>grdtrack</strong>).  If one first tries to convert the grid file to lon,lat and then sample it, there are two interpolation steps (in conversion and in sampling).</p><p>To make a lon,lat grid from the above grid we can use</p><p><strong>grdproject</strong> merc_grav.grd <strong>-R</strong>-40/40/-70.0004681551/-29.9945810754 <strong>-Jm</strong> 1 <strong>-I</strong> <strong>-F</strong> <strong>-D</strong> 2m <strong>-G</strong> grav.grd</p><p>In some cases this will not be easy as the <strong>-R</strong> in the two coordinate systems may not align well. When this happens, we can also use (in fact, it may be always better to use)</p><p><strong>grd2xyz</strong> merc_grav.grd | <strong>mapproject</strong> <strong>-R</strong>-40/40/-70.0004681551/-29.994581075 <strong>-Jm</strong> 1 <strong>-I</strong> | <strong>surface</strong> <strong>-R</strong>-40/40/-70/70 <strong>-I</strong> 2m <strong>-G</strong> grav.grd</p><p>To make a Mercator map of the above region, suppose our .gmtdefaults4 <strong>MEASURE_UNIT</strong> is inch.  Then since the above merc_grav.grd file is projected with <strong>-Jm</strong> 1 it is 80 inches wide.  We can make a map 8 inches wide by using <strong>-Jx</strong> 0.1 on any map programs applied to this grid (e.g., <strong>grdcontour</strong>, <strong>grdimage</strong>, <strong>grdview</strong>), and then for overlays which work in lon,lat (e.g., <strong>psxy</strong>, <strong>pscoast</strong>) we can use the above adjusted <strong>-R</strong> and <strong>-Jm</strong> 0.1 to get the two systems to match up.</p><p>However, we can be smarter than this.  Realizing that the input img file had pixels 2.0 minutes wide (or checking the nx and ny with grdinfo merc_grav.grd) we realize that merc_grav.grd used the full resolution of the img file and it has 2400 by 2039 pixels, and at 8 inches wide this is 300 pixels per inch.  We decide we don't need that many and we will be satisfied with 100 pixels per inch, so we want to average the data into 3 by 3 squares.  (If we want a contour plot we will probably choose to average the data much more (e.g., 6 by 6) to get smooth contours.) Since 2039 isn't divisible by 3 we will get a different adjusted OPT(R) this time:</p><p><strong>img2mercgrd</strong> world_grav.img.7.2 <strong>-G</strong> merc_grav_2.grd <strong>-R</strong>-40/40/-70/-30 <strong>-T</strong> 1 <strong>-N</strong> 3 <strong>-V</strong></p><p>This time we find the adjusted region is <strong>-R</strong>-40/40/-70.023256525/-29.9368261101 and the output is 800 by 601 pixels, a better size for us.  Now we can create an artificial illumination file for this using <strong>grdgradient</strong>:</p><p><strong>grdgradient</strong> merc_grav_2.grd <strong>-G</strong> illum.grd <strong>-A</strong> 0/270 <strong>-N</strong> e0.6</p><p>and if we also have a cpt file called "grav.cpt" we can create a color shaded relief map like this:</p><p><strong>grdimage</strong> merc_grav_2.grd <strong>-I</strong> illum.grd <strong>-C</strong> grav.cpt <strong>-Jx</strong> 0.1 <strong>-K</strong> &gt; map.ps</p><p><strong>psbasemap</strong> <strong>-R</strong>-40/40/-70.023256525/-29.9368261101 <strong>-Jm</strong> 0.1 <strong>-B</strong> a10 <strong>-O</strong> &gt;&gt; map.ps</p><p>Suppose you want to obtain only the constrained data values from an img file, in lat/lon coordinates. Then run <strong>img2mercgrd</strong> with the <strong>-T</strong> 2 option, use <strong>grd2xyz</strong> to dump the values, pipe through grep -v NaN to eliminate NaNs, and pipe through <strong>mapproject</strong> with the inverse projection as above.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO img2mercgrd&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/gmt.1.html"><strong>GMT</strong>(1)</a>, <strong>grdproject</strong>(1), <strong>mapproject</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="img2grd.1gmt.html"><span aria-hidden="true">&larr;</span> img2grd.1gmt: Extract region of img in mercator or geographic form</a></li>
   <li class="next"><a href="isogmt.1gmt.html">isogmt.1gmt: Run gmt command or script in isolation mode <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
