<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>drivemap: Show block devices in a tree of dependencies</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Show block devices in a tree of dependencies">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="drivemap (1) manual">
  <meta name="twitter:description" content="Show block devices in a tree of dependencies">
  <meta name="twitter:image" content="https://www.carta.tech/images/bilibop-common-drivemap-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/drivemap.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="drivemap (1) manual" />
  <meta property="og:description" content="Show block devices in a tree of dependencies" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/bilibop-common-drivemap-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">drivemap<small> (1)</small></h1>
        <p class="lead">Show block devices in a tree of dependencies</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/drivemap.1.html">
      <span itemprop="name">drivemap: Show block devices in a tree of dependencies</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/bilibop-common/">
      <span itemprop="name">bilibop-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/drivemap.1.html">
      <span itemprop="name">drivemap: Show block devices in a tree of dependencies</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>drivemap</strong> [<em>-i</em>|<em>--info</em> [<em>-w</em>|<em>--width</em> <strong>N</strong>]] [<em>-d</em>|<em>--drive</em>] [<em>FILE</em>]</p><p><strong>drivemap</strong> [<em>-i</em>|<em>--info</em> [<em>-w</em>|<em>--width</em> <strong>N</strong>]] [<em>-p</em>|<em>--mountpoint</em>] [<em>-f</em>|<em>--backing-file</em>] [<em>-n</em>|<em>--dm-name</em>] [<em>-m</em>|<em>--mark</em>] [<em>FILE</em>]</p><p><strong>drivemap</strong> <em>-h</em>|<em>--help</em></p><p><strong>drivemap</strong> [<em>--debug</em>] [<em>-x</em>|<em>--set-x</em>] [<em>OPTIONS</em>] [<em>FILE</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>drivemap</strong> is a shell script using the <em>proc</em>, <em>sysfs</em> and <em>udev</em> databases to display block devices in a tree of dependencies. It is based on <strong>bilibop-common</strong> shell functions and supports <strong>device-mapper</strong> (including dm-crypt and LVM) and <strong>loop</strong> devices, with some limitations. <strong>RAID</strong> devices and <strong>mhddfs</strong> filesystems are not supported. See the <strong>ENHANCEMENTS AND LIMITATIONS</strong> section below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>When no <em>FILE</em> argument is invoked, the command is applied to all drives. If a <em>FILE</em> is given as argument and exists, then the command applies to the drive hosting it. FILE can be a regular file, a directory or a block device.</p><p><strong>--debug</strong></p><p>Display debug information on stderr. When this option is invoked, each called function prints its name. See also &apos;<strong>--set-x</strong>&apos;.</p><p><strong>-d</strong>, <strong>--drive</strong></p><p>Only show the drive node instead of its tree.</p><p><strong>-f</strong>, <strong>--backing-file</strong></p><p>Try to replace each loop device in the tree by its backing file. This can fail in some cases: for example on DebianLive systems, a loop device is associated to <em>filesystem.squashfs</em> from into the initramfs environment; the path of the backing file in <em>/sys</em> is not updated when the squashfs itself becomes the new root filesystem. And so the filename stored in <em>backing_file</em> is obsolete, and will not be displayed here.</p><p><strong>-h</strong>, <strong>--help</strong></p><p>Print a summary of options on stdout and exit.</p><p><strong>-i</strong>, <strong>--info</strong></p><p>Display additional information about block devices. For drives, this includes the ID (as found in <em>/dev/disk/by-id</em>), and the size (human readable). For other devices (partitions and virtual block devices), this includes the filesystem type ant its size.</p><p><strong>-m</strong>, <strong>--mark</strong></p><p>If a <em>FILE</em> is given as argument, append a mark (a star between parenthesis: <em>(*)</em>) to the name of the device hosting this FILE. Otherwise, append a mark to the name of the device hosting the current working directory.</p><p><strong>-n</strong>, <strong>--dm-name</strong></p><p>Replace device-mapper nodes (<em>/dev/dm-*</em>) by device-mapper names (<em>/dev/mapper/*</em>), which are statically attributed and generally easier to understand.</p><p><strong>-p</strong>, <strong>--mountpoint</strong></p><p>Show the mountpoints of mounted devices, and show swap devices in use.</p><p><strong>-w</strong> <strong>N</strong>, <strong>--width</strong>=<strong>N</strong></p><p>Format the output on <strong>N</strong> columns. Can be used with &apos;<strong>--info</strong>&apos; and/or &apos;<strong>--mountpoint</strong>&apos;. If N is not an integer or is greater than the number of columns of the screen, then the output will use the full width of the screen. If this option is not used, then the default is to display the result on 70 columns.</p><p><strong>-x</strong>, <strong>--set-x</strong></p><p>Display debug information on stderr. When this option is invoked, the shell script is set as <strong>-x</strong>, for more debug details. See also &apos;<strong>--debug</strong>&apos;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENHANCEMENTS AND LIMITATIONS</h2>
        <div class="sectioncontent">
<p><strong>drivemap</strong> is a part of the <a href="../man7/bilibop.7.html"><strong>bilibop</strong>(7)</a> project. It has initially been written to be applied to the external drive hosting the running system. By design, it don't support <strong>RAID</strong> devices, and will never support them. Another design issue is that <a href="../man8/lvm.8.html"><strong>lvm</strong>(8)</a> Volume Groups should contain only one Physical Volume. We assume that there is no sense to use several Physical Volumes on the same drive for the same Volume Group. Adopting a parent/child mindview, we say that each device can have at most one parent but zero to several children. Since the script has been extended to be applied to all drives connected to the computer, this sounds like a bug.</p><p>Unlike the <strong>lsblk</strong>(1) command, <strong>drivemap</strong> integrates loopback devices in the tree of dependencies. In fact, the question that can be asked is the following:</p><p>" What will happen to the content of other physical or virtual block devices if I <strong>dd</strong>(1), <a href="../man1/shred.1.html"><strong>shred</strong>(1)</a> or <a href="../man1/wipe.1.html"><strong>wipe</strong>(1)</a> this one or this one ? "</p><p>And then it appears that <em>slaves</em> and <em>holders</em> information in sysfs are not sufficient to organize block devices in a tree, or should be extended. For the same reason, logical partitions are shown as subdevices of primary extended partitions.</p><p>Only block devices whose contents is hosted by a physical disk are shown: this means if a loop device is associated to a file residing on a temporary filesystem (tmpfs, i.e. the RAM), this device will not be shown. This is <strong>NOT</strong> a bug: as said by its name, <strong>drivemap</strong> builts and displays a &apos;<strong>map</strong> <strong>of</strong> <strong>drive</strong>(s)&apos;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>List the physical drives actually known by the kernel:</p><ul>
<li><p><strong>drivemap -d</strong></p></li>
</ul><p>Find the drive hosting the running system, and display its ID and size:</p><ul>
<li><p><strong>drivemap -id /</strong></p></li>
</ul><p>Show where is my current working directory on a disk with a complex partition scheme (LVM + LUKS + LVM):</p><ul>
<li><p><strong>drivemap -min .</strong></p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>See the <strong>ENHANCEMENTS AND LIMITATIONS</strong> section above.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/sys/class/block/*/holders</p><p>/sys/class/block/*/slaves</p><p>/sys/class/block/loop?*/loop/backing_file</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO drivemap&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/bilibop.7.html"><strong>bilibop</strong>(7)</a>, <a href="../man8/lsbilibop.8.html"><strong>lsbilibop</strong>(8)</a>, <strong>lsblk</strong>(1), <a href="../man8/lvm.8.html"><strong>lvm</strong>(8)</a>, <a href="../man7/udev.7.html"><strong>udev</strong>(7)</a>, <a href="../man8/udevadm.8.html"><strong>udevadm</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page has been written by Bilibop Project &lt;quidame@poivron.org&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="drill.1.html"><span aria-hidden="true">&larr;</span> drill.1: Get (debug) information out of dns(sec)</a></li>
   <li class="next"><a href="drivemount_applet.1.html">drivemount_applet.1: Drive mount applet for the gnome panel. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
