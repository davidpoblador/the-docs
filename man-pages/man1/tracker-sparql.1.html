<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tracker-sparql: Use sparql to query the tracker databases.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Use sparql to query the tracker databases.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tracker-sparql (1) manual">
  <meta name="twitter:description" content="Use sparql to query the tracker databases.">
  <meta name="twitter:image" content="https://www.carta.tech/images/tracker-utils-tracker-sparql-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/tracker-sparql.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tracker-sparql (1) manual" />
  <meta property="og:description" content="Use sparql to query the tracker databases." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/tracker-utils-tracker-sparql-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tracker-sparql<small> (1)</small></h1>
        <p class="lead">Use sparql to query the tracker databases.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tracker-sparql.1.html">
      <span itemprop="name">tracker-sparql: Use sparql to query the tracker databases.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/tracker-utils/">
      <span itemprop="name">tracker-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tracker-sparql.1.html">
      <span itemprop="name">tracker-sparql: Use sparql to query the tracker databases.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>tracker-sparql</strong> [<em>OPTION</em>...] [-q <em>QUERY</em>] | [-f <em>FILE</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>tracker-sparql</strong> allows the caller to run an RDF query on the database. This can be done two ways. Either by providing a <em>FILE</em> with the query or by providing a string with the <em>QUERY</em> string.</p><p>The <em>FILE</em> argument can be either a local path or a URI. It also does not have to be an absolute path.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-?, --help</strong></p>
  </dt>
  <dd>
    <p>Show summary of options.</p>
  </dd>
  <dt>
    <p><strong>-f, --file=FILE</strong></p>
  </dt>
  <dd>
    <p>Use a <em>FILE</em> with SPARQL content to query or update.</p>
  </dd>
  <dt>
    <p><strong>-q, --query=SPARQL</strong></p>
  </dt>
  <dd>
    <p>Use a <em>SPARQL</em> string to query the database with.</p>
  </dd>
  <dt>
    <p><strong>-u, --update</strong></p>
  </dt>
  <dd>
    <p>This has to be used with <strong>--query.</strong> This tells <strong>tracker-sparql</strong> to use the SPARQL update extensions so it knows it isn't a regular data lookup request. So if your query is intended to change data in the database, this option is needed.</p>
  </dd>
  <dt>
    <p><strong>-c, --list-classes</strong></p>
  </dt>
  <dd>
    <p>Returns a list of classes which describe the ontology used for storing data. These classes are also used in queries. For example, <em>http://www.w3.org/2000/01/rdf-schema#Resource</em> is one of many classes which should be returned here.</p>
  </dd>
  <dt>
    <p><strong>-x, --list-class-prefixes</strong></p>
  </dt>
  <dd>
    <p>Returns a list of classes and their related prefixes. Prefixes are used to make querying a lot simpler and are much like an alias. For example, <em>http://www.w3.org/2000/01/rdf-schema#Resource</em> has the prefix <em>rdfs</em> so queries can be cut down to:</p><p>"SELECT ?u WHERE { ?u a rdfs:Resource }"</p>
  </dd>
  <dt>
    <p><strong>-p, --list-properties=CLASS</strong></p>
  </dt>
  <dd>
    <p>Returns a list of properties which pertain to a class. You can use both formats here for the class, either the full name <em>http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#Video</em> or the shortened prefix name <em>nfo:Video</em>.</p><p>This gives the following result:</p>
<pre>
$ tracker-sparql -p nfo:Video

Properties: 2
  http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#frameRate
  http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#frameCount
</pre>
<p>These properties <em>nfo:frameRate</em> and <em>nfo:frameCount</em> can then be used in queries (see also <strong>--query</strong> ).</p><p>See also <strong>--tree</strong></p>
  </dd>
  <dt>
    <p><strong>-n, --list-notifies=CLASS</strong></p>
  </dt>
  <dd>
    <p>Returns a list of classes which are notified over D-Bus about any changes that occur in the database. <em>CLASS</em> does not have to be supplied here. This is optional and filters the results according to any argument supplied. With no <em>CLASS</em>, all classes are listed.</p>
  </dd>
  <dt>
    <p><strong>-i, --list-indexes=PROPERTY</strong></p>
  </dt>
  <dd>
    <p>Returns a list of properties which are indexed in the database. Indexes improves query speed but also add an indexing penalty. <em>PROPERTY</em> does not have to be supplied here. This is optional and filters the results according to any argument supplied. With no <em>PROPERTY</em>, all properties are listed.</p>
  </dd>
  <dt>
    <p><strong>-t, --tree [&lt;CLASS&gt;]</strong></p>
  </dt>
  <dd>
    <p>Prints a tree showing all parent classes of <em>CLASS</em> in the ontology. <em>CLASS</em> can be provided in shorthand or longhand (see <strong>--get-shorthand</strong> and <strong>--get-longhand</strong> for details). For example:</p>
<pre>
$ tracker-sparql -t nmo:MMSMessage
ROOT
  +-- rdfs:Resource (C)
  |  +-- nie:InformationElement (C)
  |  |  +-- nfo:Document (C)
  |  |  |  +-- nfo:TextDocument (C)
  |  |  |  |  `-- nmo:Message (C)
  |  |  |  |  |  +-- nmo:PhoneMessage (C)
  |  |  |  |  |  |  `-- nmo:MMSMessage (C)
</pre>
<p>If no <em>CLASS</em> is given, the entire tree is shown.</p><p>The <strong>--search</strong> command line option can be used to highlight parts of the tree you're looking for. The search is case insensitive.</p><p>The <strong>--properties</strong> command line option can be used to show properties for each class displayed, for example:</p>
<pre>
$ tracker-sparql -t nfo:FileDataObject -p
ROOT
  +-- rdfs:Resource (C)
  |  --&gt; http://purl.org/dc/elements/1.1/contributor (P)
  |  --&gt; http://purl.org/dc/elements/1.1/coverage (P)
  |  --&gt; http://purl.org/dc/elements/1.1/creator (P)
  |  --&gt; http://purl.org/dc/elements/1.1/date (P)
  |  --&gt; http://purl.org/dc/elements/1.1/description (P)
  |  --&gt; http://purl.org/dc/elements/1.1/format (P)
  |  --&gt; http://purl.org/dc/elements/1.1/identifier (P)
  |  --&gt; http://purl.org/dc/elements/1.1/language (P)
  |  --&gt; http://purl.org/dc/elements/1.1/publisher (P)
  |  --&gt; http://purl.org/dc/elements/1.1/relation (P)
  |  --&gt; http://purl.org/dc/elements/1.1/rights (P)
  |  --&gt; http://purl.org/dc/elements/1.1/source (P)
  |  --&gt; http://purl.org/dc/elements/1.1/subject (P)
  |  --&gt; http://purl.org/dc/elements/1.1/title (P)
  |  --&gt; http://purl.org/dc/elements/1.1/type (P)
  |  --&gt; nao:deprecated (P)
  |  --&gt; nao:hasTag (P)
  |  --&gt; nao:identifier (P)
  |  --&gt; nao:isRelated (P)
  |  --&gt; nao:lastModified (P)
  |  --&gt; nao:numericRating (P)
  |  --&gt; rdf:type (P)
  |  --&gt; rdfs:comment (P)
  |  --&gt; rdfs:label (P)
  |  --&gt; tracker:added (P)
  |  --&gt; tracker:damaged (P)
  |  --&gt; tracker:modified (P)
  |  +-- nie:DataObject (C)
  |  |  --&gt; nfo:belongsToContainer (P)
  |  |  --&gt; nie:byteSize (P)
  |  |  --&gt; nie:created (P)
  |  |  --&gt; nie:dataSource (P)
  |  |  --&gt; nie:interpretedAs (P)
  |  |  --&gt; nie:isPartOf (P)
  |  |  --&gt; nie:lastRefreshed (P)
  |  |  --&gt; nie:url (P)
  |  |  --&gt; tracker:available (P)
  |  |  +-- nfo:FileDataObject (C)
  |  |  |  --&gt; nfo:fileCreated (P)
  |  |  |  --&gt; nfo:fileLastAccessed (P)
  |  |  |  --&gt; nfo:fileLastModified (P)
  |  |  |  --&gt; nfo:fileName (P)
  |  |  |  --&gt; nfo:fileOwner (P)
  |  |  |  --&gt; nfo:fileSize (P)
  |  |  |  --&gt; nfo:hasHash (P)
  |  |  |  --&gt; nfo:permissions (P)
</pre>

  </dd>
  <dt>
    <p><strong>-s, --search=TERM</strong></p>
  </dt>
  <dd>
    <p>Returns a list of classes and properties which partially match <em>TERM</em> in the ontology. This is a case insensitive match, for example:</p>
<pre>
$ tracker-sparql -s text

Classes: 4
  http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#TextDocument
  http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#PlainTextDocument
  http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#PaginatedTextDocument
  http://www.tracker-project.org/temp/nmm#SynchronizedText

Properties: 4
  http://www.tracker-project.org/ontologies/tracker#fulltextIndexed
  http://www.semanticdesktop.org/ontologies/2007/01/19/nie#plainTextContent
  http://www.semanticdesktop.org/ontologies/2007/03/22/nmo#plainTextMessageContent
  http://www.tracker-project.org/temp/scal#textLocation
</pre>
<p>See also <strong>--tree</strong></p>
  </dd>
  <dt>
    <p><strong>--get-shorthand &lt;CLASS&gt;</strong></p>
  </dt>
  <dd>
    <p>Returns the shorthand for a class given by a URL. For example:</p>
<pre>
$ tracker-sparql --get-shorthand http://www.semanticdesktop.org/ontologies/2007/03/22/nmo#plainTextMessageContent
nmo:plainTextMessageContent
</pre>

  </dd>
  <dt>
    <p><strong>--get-longhand &lt;CLASS&gt;</strong></p>
  </dt>
  <dd>
    <p>Returns the longhand for a class given in the form of CLASS:PROPERTY. For example:</p>
<pre>
$ tracker-sparql --get-longhand nmm:MusicPiece
http://www.tracker-project.org/temp/nmm#MusicPiece
</pre>

  </dd>
  <dt>
    <p><strong>-V, --version</strong></p>
  </dt>
  <dd>
    <p>Print version.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>TRACKER_SPARQL_BACKEND</strong></p>
  </dt>
  <dd>
    <p>This option allows you to choose which backend you use for connecting to the database. This choice can limit your functionality. There are three settings.</p><p>With "<strong>direct</strong>" the connection to the database is made directly to the file itself on the disk, there is no intermediary daemon or process. The "<strong>direct</strong>" approach is purely <em>read-only</em>.</p><p>With "<strong>bus</strong>" the <strong>tracker-store</strong> process is used to liase with the database queuing all requests and managing the connections via an IPC / D-Bus. This adds a small overhead <em>BUT</em> this is the only approach you can use if you want to <em>write</em> to the database.</p><p>With "<strong>auto</strong>" the backend is decided for you, much like it would be if this environment variable was undefined.</p>
  </dd>
  <dt>
    <p><strong>TRACKER_PRAGMAS_FILE</strong></p>
  </dt>
  <dd>
    <p>Tracker has a fixed set of PRAGMA settings for creating its SQLite connection. With this environment variable pointing to a text file you can override these settings. The file is a &#92;n separated list of SQLite queries to execute on any newly created SQLite connection in tracker-store.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>List all classes</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?cl WHERE { ?cl a rdfs:Class }"
</pre>

  </dd>
  <dt>
    <p>List all properties for the Resources class (see --list-properties)</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?prop WHERE {
      ?prop a rdf:Property ;
      rdfs:domain &lt;http://www.w3.org/2000/01/rdf-schema#Resource&gt;
 }"
</pre>

  </dd>
  <dt>
    <p>List all class namespace prefixes</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?prefix ?ns WHERE {
      ?ns a tracker:Namespace ;
      tracker:prefix ?prefix
  }"
</pre>

  </dd>
  <dt>
    <p>List all music files</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?song WHERE { ?song a nmm:MusicPiece }"
</pre>

  </dd>
  <dt>
    <p>List all music albums</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?album ?title COUNT(?song)
                     AS songs
                     SUM(?length) AS totallength
                     WHERE {
      ?album a nmm:MusicAlbum ;
      nie:title ?title .
      ?song nmm:musicAlbum ?album ;
      nfo:duration ?length
  } GROUP BY ?album"
</pre>

  </dd>
  <dt>
    <p>List all music from a particular artist</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?song ?title WHERE {
      ?song nmm:performer [ nmm:artistName 'Artist Name' ] ;
      nie:title ?title
  }"
</pre>

  </dd>
  <dt>
    <p>Set the played count for a song</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -u -q "DELETE {
      &lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter ?count
  } WHERE {
      &lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter ?count
  } INSERT {
      &lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter 42
  }"
</pre>

  </dd>
  <dt>
    <p>List all image files</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?image WHERE { ?image a nfo:Image }"
</pre>

  </dd>
  <dt>
    <p>List all image files with a specific tag</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?image WHERE {
      ?image a nfo:Image ;
      nao:hasTag [ nao:prefLabel 'tag' ]
  }"
</pre>

  </dd>
  <dt>
    <p>List all image files created on a specific month and order by date</p>
  </dt>
  <dd>
    
<pre>
$ tracker-sparql -q "SELECT ?image ?date WHERE {
      ?image a nfo:Image ;
      nie:contentCreated ?date .
      FILTER (?date &gt;= '2008-07-01T00:00:00' &&
              ?date &lt;  '2008-08-01T00:00:00')
  } ORDER BY ?date"
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tracker-sparql&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/tracker-store.1.html"><strong>tracker-store</strong>(1)</a>, <a href="../man1/tracker-info.1.html"><strong>tracker-info</strong>(1)</a>.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>http://nepomuk.semanticdesktop.org/</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>http://www.w3.org/TR/rdf-sparql-query/</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tracker-search.1.html"><span aria-hidden="true">&larr;</span> tracker-search.1: Search all content for keywords</a></li>
   <li class="next"><a href="tracker-store.1.html">tracker-store.1: Database indexer and query daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
