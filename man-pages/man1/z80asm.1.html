<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>z80asm: Assembler for the z80 microprocessor</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Assembler for the z80 microprocessor">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="z80asm (1) manual">
  <meta name="twitter:description" content="Assembler for the z80 microprocessor">
  <meta name="twitter:image" content="https://www.carta.tech/images/z80asm-z80asm-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/z80asm.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="z80asm (1) manual" />
  <meta property="og:description" content="Assembler for the z80 microprocessor" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/z80asm-z80asm-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">z80asm<small> (1)</small></h1>
        <p class="lead">Assembler for the z80 microprocessor</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/z80asm.1.html">
      <span itemprop="name">z80asm: Assembler for the z80 microprocessor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/z80asm/">
      <span itemprop="name">z80asm</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/z80asm.1.html">
      <span itemprop="name">z80asm: Assembler for the z80 microprocessor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>z80asm</strong> [<em>options</em>]<em> </em>[<em>files...</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Z80asm is an assembler for Z80 assembly. If no input files are specified, stdin is used.  If no output file is specified, "a.bin" is used.  If "-" is specified as output file, stdout is used.  This makes it possible to use the assembler in a pipeline.</p><p>When multiple input files are specified, the assembler first uses all files which were specified with -i or --input, in the order given.  After that, all files which were specified as non-option arguments are assembled, also in the order given.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>Show summary of options and exit.</p>
  </dd>
  <dt>
    <p><strong>-V, --version</strong></p>
  </dt>
  <dd>
    <p>Display version information and exit.</p>
  </dd>
  <dt>
    <p><strong>-v, --verbose</strong></p>
  </dt>
  <dd>
    <p>Be verbose.  Specify multiple times to be more verbose.  Messages are sent to standard error.</p>
  </dd>
  <dt>
    <p><strong>-l, --list</strong>[=filename]</p>
  </dt>
  <dd>
    <p>Write a list file.  No filename or '-' means stderr.</p>
  </dd>
  <dt>
    <p><strong>-L, --label</strong>[=filename]</p>
  </dt>
  <dd>
    <p>Write a label file.  No filename or '-' means stderr.</p>
  </dd>
  <dt>
    <p><strong>-p, --label-prefix</strong>=prefix</p>
  </dt>
  <dd>
    <p>prefix all labels with this prefix.</p>
  </dd>
  <dt>
    <p><strong>-i, --input</strong>=filename</p>
  </dt>
  <dd>
    <p>Specify an input file (-i may be omitted).  '-' means stdin.</p>
  </dd>
  <dt>
    <p><strong>-o, --output</strong>=filename</p>
  </dt>
  <dd>
    <p>Specify the output file.  '-' or completely omitting the option means stdout.</p>
  </dd>
  <dt>
    <p><strong>-I, --includepath</strong>=dirname</p>
  </dt>
  <dd>
    <p>Add a directory to the include path.  The order in which the directories are tried is from back to front: the last directory specified has the highest priority.  "/usr/share/z80asm" is always in the include path (with lowest priority), you don't have to specify it.</p>
  </dd>
  <dt>
    <p><strong>-f, --force</strong></p>
  </dt>
  <dd>
    <p>Produce output even in case of errors.  Normally the output, list and label files are removed when assembly is unsuccesful.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ASSEMBLER DIRECTIVES</h2>
        <div class="sectioncontent">
<p>All mnemonics and registers are case insensitive.  All other text (in particular, labels and macros) are not. Undocumented opcodes are as much as possible supported:</p>
<dl class='dl-vertical'>
  <dt>
    <p>sll and sli are equal and can both be used.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>ixh, ixl, iyh and iyl can be used.</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>Assembler directives are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>incbin</strong> 'filename'</p>
  </dt>
  <dd>
    <p>Include a binary file into the resulting assembled file.  This can be used to include text files, or images, sound files, etc.  The filename is searched for in the current directory, and then in the include path, just like for include. Also like for include, the quotes can be any character (but must match) and no substitution is performed (so ~ is not your home directory).</p>
  </dd>
  <dt>
    <p><strong>defb</strong> or <strong>db</strong> arg, arg, arg, ...</p>
  </dt>
  <dd>
    <p>Define bytes.</p>
  </dd>
  <dt>
    <p><strong>defm</strong> or <strong>dm</strong> <strong></strong><strong>String</strong><strong></strong>, 'String'</p>
  </dt>
  <dd>
    <p>Define message.  Each character in the string is stored as one byte.  Backslash escapes are allowed, as in characters in expressions.  Unlike the argument for include, the quotes must really be quotes (but they can be single or double quotes.  The closing quote must match the opening quote.)</p>
  </dd>

</dl>
<p>defb/db and defm/dm are really aliases; either can take both quoted strings and numbers:</p><p>defb "This text should be in a buffer&#92;r&#92;n", 0</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>defs</strong> or <strong>ds</strong> count [, value]</p>
  </dt>
  <dd>
    <p>Define space.  count bytes are reserved.  Each of them is initialised to the specified value, or 0 if no value is specified.</p>
  </dd>
  <dt>
    <p><strong>defw</strong> or <strong>dw</strong> arg, arg, arg, ...</p>
  </dt>
  <dd>
    <p>Define words.  Each argument is stored as two bytes, the low order byte first.</p>
  </dd>
  <dt>
    <p><strong>end</strong></p>
  </dt>
  <dd>
    <p>End assembly of this source file.  Any remaining lines are copied into the list file (if present), but not assembled.</p>
  </dd>
  <dt>
    <p>label: <strong>equ</strong> expression</p>
  </dt>
  <dd>
    <p>Define label to have value expression.</p>
  </dd>

</dl>
<p><strong>if</strong> expression</p><p>code block 1</p><p><strong>else</strong></p><p>code block 2</p><p><strong>else</strong></p><p>code block 3</p><p><strong>...</strong></p><p>code block n</p><p><strong>endif</strong></p><p>Conditionally assemble code.  If expression is not 0, all odd code blocks are assembled, if expression is 0, all even blocks are assembled.  Usually only one or two code blocks are present.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>include</strong> 'file'</p>
  </dt>
  <dd>
    <p>Include file into the source.  The quotes around the file for include are mandatory, but you can choose the quotes yourself.  eg, you may use % or even a letter as a quote.  The filename does not undergo any expansion, so &#92;, ~, $, etc are passed as written (which means ~ will not be your home directory.) The filename is used as specified, and then prefixed with each directory in the include path, until it can be opened.</p>
  </dd>

</dl>
<p>label: <strong>macro</strong> arg1, arg2, ...</p><p>code block</p><p><strong>endif</strong></p><p>Define a macro.  The macro can be used where an opcode is expected.  The code block is then substituted, with the given values for the arguments.  This is a textual substitution, so the following example is valid:</p><p>makelabel name</p><p>label_name:</p><p>endm</p><p>This will generate a label with a constructed name (it's not a very useful example, but it shows the possiblities).</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>org</strong> address</p>
  </dt>
  <dd>
    <p>Set the "program counter" to address.  This does not add any bytes to the resulting binary, it only determines how the rest of the code is interpreted (in particular, the value of labels and <strong>$</strong>).</p>
  </dd>
  <dt>
    <p><strong>seek</strong> offset</p>
  </dt>
  <dd>
    <p>Seek to position offset in the output file.  This can be used for overwiting previously assembled code, for example for patching a binary which was included using <strong>incbin</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPRESSIONS</h2>
        <div class="sectioncontent">
<p>All expressions can use the following operators, in order of precedence: (<strong>a</strong>, <strong>b</strong> and <strong>c</strong> denote subexpressions)</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>a ? b : c</strong></p>
  </dt>
  <dd>
    <p>If a is not zero, return b, otherwise c</p>
  </dd>
  <dt>
    <p><strong>a | b</strong></p>
  </dt>
  <dd>
    <p>bitwise or</p>
  </dd>
  <dt>
    <p><strong>a ^ b</strong></p>
  </dt>
  <dd>
    <p>bitwise xor</p>
  </dd>
  <dt>
    <p><strong>a & b</strong></p>
  </dt>
  <dd>
    <p>bitwise and</p>
  </dd>
  <dt>
    <p><strong>a == b, a = b, a != b</strong></p>
  </dt>
  <dd>
    <p>equality</p>
  </dd>
  <dt>
    <p><strong>a &lt;= b, a &gt;= b, a &lt; b, a &gt; b</strong></p>
  </dt>
  <dd>
    <p>inequality</p>
  </dd>
  <dt>
    <p><strong>a &lt;&lt; b, a &gt;&gt; b</strong></p>
  </dt>
  <dd>
    <p>bit shift</p>
  </dd>
  <dt>
    <p><strong>a + b, a - b</strong></p>
  </dt>
  <dd>
    <p>addition and subtraction</p>
  </dd>
  <dt>
    <p><strong>a * b, a / b, a % b</strong></p>
  </dt>
  <dd>
    <p>multiplication, division and modulo</p>
  </dd>
  <dt>
    <p><strong>~a, +a, -a</strong></p>
  </dt>
  <dd>
    <p>bitwise not, no effect and negation</p>
  </dd>
  <dt>
    <p><strong>?</strong>label</p>
  </dt>
  <dd>
    <p>1 if label exists, 0 if it does not.  This does not generate an error if label does not exist.  Note that this is usually evaluated immediately (if the rest of the expression permits), and it does not check if the label is defined later.  This means it can be used as the argument of <strong>if</strong> , to get the functionality of #ifdef in C.</p>
  </dd>
  <dt>
    <p><strong>(a)</strong></p>
  </dt>
  <dd>
    <p>parenthesis</p>
  </dd>

</dl>
<p>Literals in expressions may be written as: (case does not matter)</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>@c11</strong></p>
  </dt>
  <dd>
    <p>arbitrary base number (specified by 'c' so c+1 == 10: here base is 13)</p>
  </dd>
  <dt>
    <p><strong>14, 14d, @914</strong></p>
  </dt>
  <dd>
    <p>decimal number</p>
  </dd>
  <dt>
    <p><strong>016, 16o, 16q, &o16, @716</strong></p>
  </dt>
  <dd>
    <p>octal number</p>
  </dd>
  <dt>
    <p><strong>0Eh, 0xE, &hE, $E, @FE</strong></p>
  </dt>
  <dd>
    <p>hexadecimal number (for the first notations, the first character must be 0-9)</p>
  </dd>
  <dt>
    <p><strong>%1110, 1110b, &b1110, @11110</strong></p>
  </dt>
  <dd>
    <p>binary number</p>
  </dd>
  <dt>
    <p><strong>'s'</strong></p>
  </dt>
  <dd>
    <p>ASCII code of 's'</p>
  </dd>
  <dt>
    <p><strong>'&#92;&#92;n', '&#92;&#92;r', '&#92;&#92;a', '&#92;&#92;t'</strong></p>
  </dt>
  <dd>
    <p>Newline, carriage return, alert, tab</p>
  </dd>
  <dt>
    <p><strong>'&#92;&#92;nnn'</strong></p>
  </dt>
  <dd>
    <p>Octal ASCII code</p>
  </dd>
  <dt>
    <p><strong>$</strong></p>
  </dt>
  <dd>
    <p>address of first byte of current command</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LABELS</h2>
        <div class="sectioncontent">
<p>In all expressions, labels may be used.  However, there are some expressions where the value must be computable at once, and therefore only previously defined labels may be used.  This is the case for:</p>
<dl class='dl-vertical'>
  <dt>
    <p>- The argument of org</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>- The argument of seek</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>- The argument of equ (eg, a label definition)</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>- The first argument of ds</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>- The argument of if</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>In all other expressions, labels which are defined later may be used.</p><p>Labels must consist of letters, digits, underscores and periods, and must not start with a digit.  Labels are case sensitive.</p><p>Labels starting with a period (.) are <strong>local</strong> , which means their scope is only the current include file or macro definition (and files included/macros called from it).  This is particularly useful for macros, to prevent duplicate definitions when using a macro more than once.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p>If assembly was successful, no output is produced (except the result, and messages triggered by --verbose) and 0 is returned.  At any error, there is output on the standard error and 1 is returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Parts that are not assembled because of an if statement and macros which are defined but never used are only checked to have a correct command. The argument is not parsed.  This means that if the file passes through the assembler with no warnings or errors, it may still not assemble correctly in a different setting (where the if's give different results).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>If you find a bug, or want to send comments, please use the web interface at http://savannah.nongnu.org/projects/z80asm/ or send an e-mail to wijnen@debian.org.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Z80asm was written by Bas Wijnen &lt;wijnen@debian.org&gt;. Some patches were provided by Jan Wilmans &lt;jw@dds.nl&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="yyt.1.html"><span aria-hidden="true">&larr;</span> yyt.1: A psuedo tty program which automatically converts among chinese encodings.</a></li>
   <li class="next"><a href="z80dasm.1.html">z80dasm.1: Z80 assembly generating disassembler <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
