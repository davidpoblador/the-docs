<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tapestat - Report tape statistics.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Report tape statistics.">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tapestat<small> (1)</small></h1>
        <p class="lead">Report tape statistics.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tapestat.1.html">
      <span itemprop="name">tapestat</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/sysstat/">
      <span itemprop="name">sysstat</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tapestat.1.html">
      <span itemprop="name">tapestat</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>tapestat [ -k | -m ] [ -t ] [ -V ] [ -y ] [ -z ] [</strong> <em>interval</em> <strong>[</strong> <em>count</em> <strong>] ]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The <strong>tapestat</strong> command is used for monitoring the activity of tape drives connected to a system.</p>
<p class='spacer'>

<p>The first report generated by the <strong>tapestat</strong> command provides statistics concerning the time since the system was booted, unless the <strong>-y</strong> option is used, when this first report is omitted. Each subsequent report covers the time since the previous report.</p>
<p class='spacer'>

<p>The <em>interval</em> parameter specifies the amount of time in seconds between each report. The <em>count</em> parameter can be specified in conjunction with the <em>interval</em> parameter. If the <em>count</em> parameter is specified, the value of <em>count</em> determines the number of reports generated at <em>interval</em> seconds apart. If the <em>interval</em> parameter is specified without the <em>count</em> parameter, the <strong>tapestat</strong> command generates reports continuously.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORT</h2>
        <div class="sectioncontent">

<p>The <strong>tapestat</strong> report provides statistics for each tape drive connected to the system. The following data are displayed:</p>
<p class='spacer'>

  <p><strong>r/s</strong> The number of reads issued expressed as the number per second averaged over the interval.</p>
<p class='spacer'>

  <p><strong>w/s</strong> The number of writes issued expressed as the number per second averaged over the interval.</p>
<p class='spacer'>

  <p><strong>kB_read/s | MB_read/s</strong> The amount of data read expressed in kilobytes (by default or if option -k used) or megabytes (if option -m used) per second averaged over the interval.</p>
<p class='spacer'>

  <p><strong>kB_wrtn/s | MB_wrtn/s</strong> The amount of data written expressed in kilobytes (by default or if option -k used) or megabytes (if option -m used) per second averaged over the interval.</p>
<p class='spacer'>

  <p><strong>%Rd</strong> Read percentage wait - The percentage of time over the interval spent waiting for read requests to complete. The time is measured from when the request is dispatched to the SCSI mid-layer until it signals that it completed.</p>
<p class='spacer'>

  <p><strong>%Wr</strong> Write percentage wait - The percentage of time over the interval spent waiting for write requests to complete. The time is measured from when the request is dispatched to the SCSI mid-layer until it signals that it completed.</p>
<p class='spacer'>

  <p><strong>%Oa</strong> Overall percentage wait - The percentage of time over the interval spent waiting for any I/O request to complete (read, write, and other).</p>
<p class='spacer'>

  <p><strong>Rs/s</strong> The number of I/Os, expressed as the number per second averaged over the interval, where a non-zero residual value was encountered.</p>
<p class='spacer'>

<p><strong>Ot/s</strong> The number of I/Os, expressed as the number per second averaged over the interval, that were included as "other". Other I/O includes ioctl calls made to the tape driver and implicit operations performed by the tape driver such as rewind on close (for tape devices that implement rewind on close). It does not include any I/O performed using methods outside of the tape driver (e.g. via sg ioctls).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-horizontal'>
    <dt>-k</dt>
    <dd>
  <p>Show the amount of data written or read in kilobytes per second instead of megabytes. This option is mutually exclusive with -m.</p>
    </dd>
    <dt>-m</dt>
    <dd>
  <p>Show the amount of data written or read in megabytes per second instead of kilobytes. This option is mutually exclusive with -k.</p>
    </dd>
    <dt>-t</dt>
    <dd>
  <p>Display time stamps. The time stamp format may depend on the value of the S_TIME_FORMAT environment variable (see below).</p>
    </dd>
    <dt>-V</dt>
    <dd>
  <p>Print version and exit.</p>
    </dd>
    <dt>-y</dt>
    <dd>
  <p>Omit the initial statistic showing values since boot.</p>
    </dd>
    <dt>-z</dt>
    <dd>
  <p>Tell <strong>tapestat</strong> to omit output for any tapes for which there was no activity during the sample period.</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSIDERATIONS</h2>
        <div class="sectioncontent">

<p>It is possible for a percentage value (read, write, or other) to be greater than 100 percent (the <strong>tapestat</strong> command will never show a percentage value more than 999). If rewinding a tape takes 40 seconds where the interval time is 5 seconds the %Oa value would show as 0 in the intervals before the rewind completed and then show as approximately 800 percent when the rewind completes.</p>
<p class='spacer'>

<p>Similar values will be observed for %Rd and %Wr if a tape drive stops reading or writing and then restarts (that is it stopped streaming). In such a case you may see the r/s or w/s drop to zero and the %Rd/%Wr value could be higher than 100 when reading or writing continues (depending on how long it takes to restart writing or reading). This is only an issue if it happens a lot as it may cause tape wear and will impact on the backup times.</p>
<p class='spacer'>

<p>For fast tape drives you may see low percentage wait times. This does not indicate an issue with the tape drive. For a slower tape drive (e.g. an older generation DDS drive) the speed of the tape (and tape drive) is much slower than filesystem I/O, percent wait times are likely to be higher. For faster tape drives (e.g. LTO) the percentage wait times are likely to be lower as program writing to or reading from tape is going to be doing a lot more filesystem I/O because of the higher throughput.</p>
<p class='spacer'>

<p>Although tape statistics are implemented in the kernel using atomic variables they cannot be read atomically as a group. All of the statistics values are read from different files under /sys, because of this there may be I/O completions while reading the different files for the one tape drive. This may result in a set of statistics for a device that contain some values before an I/O completed and some after.</p>
<p class='spacer'>

<p>This command uses rounding down as the rounding method when calculating per second statistics. If, for example, you are using dd to copy one tape to another and running <strong>tapestat</strong> with an interval of 5 seconds and over the interval there were 3210 writes and 3209 reads then w/s would show 642 and r/s 641 (641.8 rounded down to 641). In such a case if it was a tar archive being copied (with a 10k block size) you would also see a difference between the kB_read/s and kB_wrtn/s of 2 (one I/O 10k in size divided by the interval period of 5 seconds). If instead there were 3210 writes and 3211 reads both w/s and r/s would both show 642 but you would still see a difference between the kB_read/s and kB_wrtn/s values of 2 kB/s.</p>
<p class='spacer'>

<p>This command is provided with an interval in seconds. However internally the interval is tracked per device and can potentially have an effect on the per second statistics reported. The time each set of statistics is captured is kept with those statistics. The difference between the current and previous time is converted to milliseconds for use in calculations. We can look at how this can impact the statistics reported if we use an example of a tar archive being copied between two tape drives using dd. If both devices reported 28900 kilobytes transferred and the reading tape drive had an interval of 5001 milliseconds and the writing tape drive 5000 milliseconds that would calculate out as 5778 kB_read/s and 5780 kB_wrtn/s.</p>
<p class='spacer'>

<p>The impact of some retrieving statistics during an I/O completion, rounding down, and small differences in the interval period on the statistics calculated should be minimal but may be non-zero.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<p>The <strong>tapestat</strong> command takes into account the following environment variables:</p>
<p class='spacer'>

  <dl class='dl-horizontal'>
    <dt>S_COLORS</dt>
    <dd>
  <p>When this variable is set, display statistics in color on the terminal. Possible values for this variable are <em>never</em>, <em>always</em> or <em>auto</em> (the latter is the default).</p>
<p class='spacer'>

  <p>Please note that the color (being red, yellow, or some other color) used to display a value is not indicative of any kind of issue simply because of the color. It only indicates different ranges of values.</p>
<p class='spacer'>

    </dd>
    <dt>S_COLORS_SGR</dt>
    <dd>
  <p>Specify the colors and other attributes used to display statistics on the terminal. Its value is a colon-separated list of capabilities that defaults to <strong>H=31;1:I=32;22:M=34;1:N=33;1:Z=33;22</strong>. Supported capabilities are:</p>
<p class='spacer'>

      <dl class='dl-vertical'>
        <dt><strong>H=</strong></dt>
        <dd>
      <p>SGR (Select Graphic Rendition) substring for percentage values greater than or equal to 75%.</p>
<p class='spacer'>

        </dd>
        <dt><strong>I=</strong></dt>
        <dd>
      <p>SGR substring for tape names.</p>
<p class='spacer'>

        </dd>
        <dt><strong>M=</strong></dt>
        <dd>
      <p>SGR substring for percentage values in the range from 50% to 75%.</p>
<p class='spacer'>

        </dd>
        <dt><strong>N=</strong></dt>
        <dd>
      <p>SGR substring for non-zero statistics values.</p>
<p class='spacer'>

        </dd>
        <dt><strong>Z=</strong></dt>
        <dd>
      <p>SGR substring for zero values.</p>
        </dd>
      </dl>
<p class='spacer'>

    </dd>
    <dt>S_TIME_FORMAT</dt>
    <dd>
  <p>If this variable exists and its value is <strong>ISO</strong> then the current locale will be ignored when printing the date in the report header. The <strong>tapestat</strong> command will use the ISO 8601 format (YYYY-MM-DD) instead. The timestamp displayed with option -t will also be compliant with ISO 8601 format.</p>
<p class='spacer'>

    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p><em>/sys</em> filesystem must be mounted for <strong>tapestat</strong> to work. It will not work on kernels that do not have sysfs support</p>
<p class='spacer'>

<p>This command requires kernel version 4.2 or later (or tape statistics support backported for an earlier kernel version).</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<p><em>/sys/class/scsi_tape/st&lt;num&gt;/stats/*</em> Statistics files for tape devices.</p>
<p class='spacer'>

<p><em>/proc/uptime</em> contains system uptime.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Initial revision by Shane M. SEYMOUR (shane.seymour &lt;at&gt; hpe.com)</p>
<p class='spacer'>

<p>Modified for sysstat by Sebastien Godard (sysstat &lt;at&gt; orange.fr)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>iostat</strong>(1), <a href="../man1/mpstat.1.html"><strong>mpstat</strong>(1)</a></p>
<p class='spacer'>

<p><em>http://pagesperso-orange.fr/sebastien.godard/</em></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tailf.1.html"><span aria-hidden="true">&larr;</span> tailf.1: follow the growth of a log file</a></li>
   <li class="next"><a href="taskset.1.html">taskset.1: set or retrieve a process's CPU affinity <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
