<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>refdbxp: Converts short and full citation formats in sgml and xml documents containing refdb citations.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Converts short and full citation formats in sgml and xml documents containing refdb citations.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="refdbxp (1) manual">
  <meta name="twitter:description" content="Converts short and full citation formats in sgml and xml documents containing refdb citations.">
  <meta name="twitter:image" content="https://www.carta.tech/images/refdb-clients-refdbxp-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/refdbxp.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="refdbxp (1) manual" />
  <meta property="og:description" content="Converts short and full citation formats in sgml and xml documents containing refdb citations." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/refdb-clients-refdbxp-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">refdbxp<small> (1)</small></h1>
        <p class="lead">Converts short and full citation formats in sgml and xml documents containing refdb citations.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/refdbxp.1.html">
      <span itemprop="name">refdbxp: Converts short and full citation formats in sgml and xml documents containing refdb citations.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/refdb-clients/">
      <span itemprop="name">refdb-clients</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/refdbxp.1.html">
      <span itemprop="name">refdbxp: Converts short and full citation formats in sgml and xml documents containing refdb citations.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>refdbxp</strong> [<strong>-h</strong>] [<strong>-s</strong>] [<strong>-t</strong>&nbsp;<em>input-format</em>] <em>refdbxp</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>refdbxp allows the interconversion of the short and full notation of citations in the supported SGML and XML documents of <strong>RefDB</strong>(7). See the RefDB manual (see below) for information about the two notations. The conversion is round-trip safe, and it supports mixing short and full notation in the same source document. Full-notation citations will use the correct encoding for first and subsequent citations of the same reference.</p><p><strong>Note</strong></p><p>You should be aware that refdbxp is not a SGML or XML-aware tool. It is a simple text replacement tool with some restrictions:</p><p>If you comment out citation elements, they still count as if they were present when the first/subsequent citation issue is resolved (refdbxp simply doesn&apos;t know about the concept of a comment). In the following example, the citation in the last line will be the only one transformed, but it will be formatted as a subsequent citation of reference 9, not as the first citation:</p>
<pre>
&lt;!-- &lt;citation role="REFDB"&gt;9;&lt;/citation&gt; first occurrence --&gt;
&lt;!-- other stuff inbetween --&gt;
&lt;citation role="REFDB"&gt;9;&lt;/citation&gt;&lt;!-- second occurrence --&gt;

</pre>
<p>If you use SGML/XML tags within a comment and nest this comment ingeniously between the start tag and the end tag of an element relevant for refdbxp, you shoot yourself in the foot. You do not want to use code like this (why would you, anyways?):</p>
<pre>
&lt;citation role="REFDB"&gt;&lt;!-- &lt;/citation&gt; --&gt;2;5;9;&lt;/citation&gt;
</pre>
<p>refdbxp does not include external entities. The whole document refdbxp is supposed to convert needs to be in one chunk.</p><p>refdbxp currently does not support multiple databases per document.</p><p>One way to work around the problem with comments is to create a copy of your master source and use a small script to remove comments just before you process and transform your text. To work around the fact that refdbxp does not treat external entities correctly, use a tool like <strong>sgmlnorm</strong> (shipped with the Jade/OpenJade packages) to preprocess the document. To work around the missing support of multiple databases, well... just wait.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-h</strong></p><p>Prints a command synopsis on the screen and exits.</p><p><strong>-s</strong></p><p>Create citations using the short notation. The default is to use the full notation.</p><p><strong>-t</strong> <em>input-format</em></p><p>Select the type of input. Currently supported values are <em>db31</em> (DocBook SGML version 3.1 or later), <em>db31x</em> (DocBook XML, all versions), and <em>teix</em> (TEI XML).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>Lets first try the most common usage of refdbxp. The following command expands all citations, regardless of whether they are written in short or full notation, to the full notation and writes the result to a new file foo.full.sgml. The input from foo.sgml is assumed to be DocBook SGML:</p>
<pre>
	~$
	<strong>refdbxp -t db31 &lt; foo.sgml &gt; foo.full.sgml</strong>

</pre>
<p>The following command goes the other way. This time we convert all citations of a TEI XML document, regardless of whether they are written in short or full notation, to the short notation and write the result to a new file:</p>
<pre>
	~$
	<strong>refdbxp -t teix -s &lt; bar.xml &gt; bar.short.xml</strong>

</pre>
<p>The last example shows how to treat documents that consist of several files. The DocBook SGML master file foo_master.sgml includes several other subdocuments as external entities. Treating those files individually with refdbxp would screw up things as the first/subsequent citation issue would not be treated correctly and collisions of automatically created element IDs would result. The following command comes to the rescue and expands all citations in the document correctly:</p>
<pre>
	~$
	<strong>osgmlnorm -dn /usr/local/share/sgml/docbook/4.1/docbook.dcl foo_master.sgml | refdbxp -t db31 &gt; foo.full.sgml</strong>

</pre>
<p><strong>Note</strong></p><p>You may have realized that there&apos;s two small problems with this procedure. First, using (o)sgmlnorm will also include the external entity that contains (or will contain once it&apos;s created) the bibliography element created by refdb. One way around this is to use a mock file that just contains the entity reference in a comment. Lets assume your document foo.sgml wants to include the bibliography by using the entity declaration %bibliography; at the proper location. The entity is declared in the declaration subset at the top of your sourcefile as the external file foo.bib.sgml. Then you should create a file foo.bib.sgml with the following contents:</p>
<pre>
&lt;!--&bibliography;--&gt;
</pre>
<p>We have to outcomment the entity reference as these may be nested, i.e. the parser would try to replace this entity again and fail because the entity is already opened. After the conversion you just need to uncomment the parameter entity. If you like long commands, you could do this on the fly like this:</p>
<pre>
	  ~$
	  <strong>osgmlnorm -dn /usr/local/share/sgml/docbook/4.1/docbook.dcl foo_master.sgml | refdbxp -t db31 | sed &apos;s%&lt;!--&#92;&bibliography;--&gt;%&#92;&bibliography;%&apos; &gt; foo.full.sgml</strong>

</pre>
<p>Second, (o)nsgmlnorm will not output the internal declaration subset that we need at least to declare the parameter entity for the bibliography. You could fix this with a sed command along the lines of the command shown above or add it back manually.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO refdbxp&hellip;</h2>
        <div class="sectioncontent">
<p><strong>RefDB</strong> (7), <strong>refdbnd</strong> (1).</p><p><em>RefDB manual (local copy) </em> PREFIX/share/doc/refdb-&lt;version&gt;/refdb-manual/index.html</p><p><em>RefDB manual (web) </em> &lt;\m[blue]<strong>http://refdb.sourceforge.net/manual/index.html</strong>\m[]&gt;</p><p><em>RefDB on the web </em> &lt;\m[blue]<strong>http://refdb.sourceforge.net/</strong>\m[]&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>refdbxp was written by Markus Hoenicka &lt;markus@mhoenicka.de&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="refdbnd.1.html"><span aria-hidden="true">&larr;</span> refdbnd.1: Creates a skeleton document and a makefile for refdb</a></li>
   <li class="next"><a href="refdes_renum.1.html">refdes_renum.1: Geda/gaf refdes renumbering utility <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
