<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gmtmath: Reverse polish notation calculator for data tables</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Reverse polish notation calculator for data tables">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gmtmath (1gmt) manual">
  <meta name="twitter:description" content="Reverse polish notation calculator for data tables">
  <meta name="twitter:image" content="https://www.carta.tech/images/gmt-gmtmath-1gmt.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1gmt/gmt-gmtmath.1gmt.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gmtmath (1gmt) manual" />
  <meta property="og:description" content="Reverse polish notation calculator for data tables" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gmt-gmtmath-1gmt.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gmtmath<small> (1gmt)</small></h1>
        <p class="lead">Reverse polish notation calculator for data tables</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/gmtmath.1gmt.html">
      <span itemprop="name">gmtmath: Reverse polish notation calculator for data tables</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gmt/">
      <span itemprop="name">gmt</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/gmtmath.1gmt.html">
      <span itemprop="name">gmtmath: Reverse polish notation calculator for data tables</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>gmtmath</strong> [ <strong>-C</strong><em>cols</em> ] [ <strong>-H</strong><em>nrec</em> ] [ <strong>-N</strong><em>n_col</em>/<em>t_col</em> ] [ <strong>-Q</strong> ]  [ <strong>-S</strong> ][ <strong>-T</strong><em>t_min/t_max/t_inc</em> ] [ <strong>-V</strong> ] [ <strong>-bi</strong>[<strong>s</strong>][<em>n</em>] ] [ <strong>-bo</strong>[<strong>s</strong>][<em>n</em>] ] <em>operand</em> [ <em>operand</em> ] <strong>OPERATOR</strong> [ <em>operand</em> ] <strong>OPERATOR</strong> ... <strong>=</strong> [ <em>outfile</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>gmtmath</strong> will perform operations like add, subtract, multiply, and divide on one or more table data files or constants using Reverse Polish Notation (RPN) syntax (e.g., Hewlett-Packard calculator-style). Arbitrarily complicated expressions may therefore be evaluated; the final result is written to an output file [or standard output]. When two data tables are on the stack, each element in file A is modified by the corresponding element in file B. However, some operators only require one operand (see below). If no data tables are used in the expression then options <strong>-T, -N</strong> must be set (and optionally <strong>-b</strong>). By default, all columns except the "time" column are operated on, but this can be changed (see <strong>-C</strong>).</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>operand</em></p>
  </dt>
  <dd>
    <p>If <em>operand</em> can be opened as a file it will be read as an ASCII (or binary, see <strong>-bi</strong>) table data file. If not a file, it is interpreted as a numerical constant or a special symbol (see below).</p>
  </dd>
  <dt>
    <p><em>outfile</em> is a table data file that will hold the final result. If not given then</p>
  </dt>
  <dd>
    <p>the output is sent to stdout.</p>
  </dd>
  <dt>
    <p><strong>OPERATORS</strong></p>
  </dt>
  <dd>
    <p>Choose among the following operators:</p><p>Operator n_args Returns</p><p><strong>ABS</strong> 1 abs (A).</p><p><strong>ACOS</strong> 1 acos (A).</p><p><strong>ACOSH</strong> 1 acosh (A).</p><p><strong>ADD(+)</strong> 2 A + B.</p><p><strong>AND</strong> 2 NaN if A and B == NaN, B if A == NaN, else A.</p><p><strong>ASIN</strong> 1 asin (A).</p><p><strong>ASINH</strong> 1 asinh (A).</p><p><strong>ATAN</strong> 1 atan (A).</p><p><strong>ATAN2</strong> 2 atan2 (A, B).</p><p><strong>ATANH</strong> 1 atanh (A).</p><p><strong>BEI</strong> 1 bei (A).</p><p><strong>BER</strong> 1 ber (A).</p><p><strong>CEIL</strong> 1 ceil (A) (smallest integer &gt;= A).</p><p><strong>CHIDIST</strong> 2 Chi-squared-distribution P(chi2,nu), with chi2 = A and nu = B.</p><p><strong>COS</strong> 1 cos (A) (A in radians).</p><p><strong>COSD</strong> 1 cos (A) (A in degrees).</p><p><strong>COSH</strong> 1 cosh (A).</p><p><strong>D2DT2</strong> 1 d^2(A)/dt^2 2nd derivative.</p><p><strong>D2R</strong> 1 Converts Degrees to Radians.</p><p><strong>DILOG</strong> 1 Dilog (A).</p><p><strong>DIV(/)</strong> 2 A / B.</p><p><strong>DDT</strong> 1 d(A)/dt 1st derivative.</p><p><strong>DUP</strong> 1 Places duplicate of A on the stack.</p><p><strong>ERF</strong> 1 Error function of A.</p><p><strong>ERFC</strong> 1 Complementory Error function of A.</p><p><strong>ERFINV</strong> 1 Inverse error function of A.</p><p><strong>EQ</strong> 2 1 if A == B, else 0.</p><p><strong>EXCH</strong> 2 Exchanges A and B on the stack.</p><p><strong>EXP</strong> 1 exp (A).</p><p><strong>FDIST</strong> 4 F-dist Q(var1,var2,nu1,nu2), with var1 = A, var2 = B, nu1 = C, and nu2 = D.</p><p><strong>FLOOR</strong> 1 floor (A) (greatest integer &lt;= A).</p><p><strong>FMOD</strong> 2 A % B (remainder).</p><p><strong>GE</strong> 2 1 if A &gt;= B, else 0.</p><p><strong>GT</strong> 2 1 if A &gt; B, else 0.</p><p><strong>HYPOT</strong> 2 hypot (A, B).</p><p><strong>I0</strong> 1 Modified Bessel function of A (1st kind, order 0).</p><p><strong>I1</strong> 1 Modified Bessel function of A (1st kind, order 1).</p><p><strong>IN</strong> 2 Modified Bessel function of A (1st kind, order B).</p><p><strong>INT</strong> 1 Numerically integrate A.</p><p><strong>INV</strong> 1 1 / A.</p><p><strong>ISNAN</strong> 1 1 if A == NaN, else 0.</p><p><strong>J0</strong> 1 Bessel function of A (1st kind, order 0).</p><p><strong>J1</strong> 1 Bessel function of A (1st kind, order 1).</p><p><strong>JN</strong> 2 Bessel function of A (1st kind, order B).</p><p><strong>K0</strong> 1 Modified Kelvin function of A (2nd kind, order 0).</p><p><strong>K1</strong> 1 Modified Bessel function of A (2nd kind, order 1).</p><p><strong>KN</strong> 2 Modified Bessel function of A (2nd kind, order B).</p><p><strong>KEI</strong> 1 kei (A).</p><p><strong>KER</strong> 1 ker (A).</p><p><strong>LE</strong> 2 1 if A &lt;= B, else 0.</p><p><strong>LMSSCL</strong> 1 LMS scale estimate (LMS STD) of A.</p><p><strong>LOG</strong> 1 log (A) (natural log).</p><p><strong>LOG10</strong> 1 log10 (A).</p><p><strong>LOG1P</strong> 1 log (1+A) (accurate for small A).</p><p><strong>LOWER</strong> 1 The lowest (minimum) value of A.</p><p><strong>LT</strong> 2 1 if A &lt; B, else 0.</p><p><strong>MAD</strong> 1 Median Absolute Deviation (L1 STD) of A.</p><p><strong>MAX</strong> 2 Maximum of A and B.</p><p><strong>MEAN</strong> 1 Mean value of A.</p><p><strong>MED</strong> 1 Median value of A.</p><p><strong>MIN</strong> 2 Minimum of A and B.</p><p><strong>MODE</strong> 1 Mode value (LMS) of A.</p><p><strong>MUL(x)</strong> 2 A * B.</p><p><strong>NAN</strong> 2 NaN if A == B, else A.</p><p><strong>NEG</strong> 1 -A.</p><p><strong>NRAND</strong> 2 Normal, random values with mean A and std. deviation B.</p><p><strong>OR</strong> 2 NaN if A or B == NaN, else A.</p><p><strong>PLM</strong> 3 Associated Legendre polynomial P(-1&lt;A&lt;+1) degree B order C.</p><p><strong>POP</strong> 1 Delete top element from the stack.</p><p><strong>POW(^)</strong> 2 A ^ B.</p><p><strong>R2</strong> 2 R2 = A^2 + B^2.</p><p><strong>R2D</strong> 1 Convert Radians to Degrees.</p><p><strong>RAND</strong> 2 Uniform random values between A and B.</p><p><strong>RINT</strong> 1 rint (A) (nearest integer).</p><p><strong>SIGN</strong> 1 sign (+1 or -1) of A.</p><p><strong>SIN</strong> 1 sin (A) (A in radians).</p><p><strong>SIND</strong> 1 sin (A) (A in degrees).</p><p><strong>SINH</strong> 1 sinh (A).</p><p><strong>SQRT</strong> 1 sqrt (A).</p><p><strong>STD</strong> 1 Standard deviation of A.</p><p><strong>STEP</strong> 1 Heaviside step function H(A).</p><p><strong>STEPT</strong> 1 Heaviside step function H(t-A).</p><p><strong>SUB(-)</strong> 2 A - B.</p><p><strong>SUM</strong> 1 Cumulative sum of A</p><p><strong>TAN</strong> 1 tan (A) (A in radians).</p><p><strong>TAND</strong> 1 tan (A) (A in degrees).</p><p><strong>TANH</strong> 1 tanh (A).</p><p><strong>TDIST</strong> 2 Student's t-distribution A(t,nu) = 1 - 2p, with t = A, and nu = B.'</p><p><strong>UPPER</strong> 1 The highest (maximum) value of A.</p><p><strong>XOR</strong> 2 B if A == NaN, else A.</p><p><strong>Y0</strong> 1 Bessel function of A (2nd kind, order 0).</p><p><strong>Y1</strong> 1 Bessel function of A (2nd kind, order 1).</p><p><strong>YN</strong> 2 Bessel function of A (2nd kind, order B).</p>
  </dd>
  <dt>
    <p><strong>SYMBOLS</strong></p>
  </dt>
  <dd>
    <p>The following symbols have special meaning:</p><p><strong>PI</strong> 3.1415926...</p><p><strong>E </strong> 2.7182818...</p><p><strong>T </strong> Table with t-coordinates</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-C</strong></p>
  </dt>
  <dd>
    <p>Select the columns that will be operated on until next occurrence of <strong>-C</strong>. List columns separated by commas; ranges like 1,3-5,7 are allowed. [<strong>-C</strong> (no arguments) resets the default action of using all columns except time column (see <strong>-N</strong>]. <strong>-Ca</strong> selects all columns, inluding time column, while <strong>-Cr</strong> reverses (toggles) the current choices.</p>
  </dd>
  <dt>
    <p><strong>-H</strong></p>
  </dt>
  <dd>
    <p>Input file(s) has Header record(s). Number of header records can be changed by editing your .gmtdefaults file. If used, <strong>GMT</strong> default is 1 header record.</p>
  </dd>
  <dt>
    <p><strong>-N</strong></p>
  </dt>
  <dd>
    <p>Select the number of columns and the column number that contains the "time" variable. Columns are numbered starting at 0 [2/0].</p>
  </dd>
  <dt>
    <p><strong>-Q</strong></p>
  </dt>
  <dd>
    <p>Quick mode for scalar calculation. Shorthand for <strong>-Ca -N</strong>1/0 <strong>-T</strong>0/0/1.</p>
  </dd>
  <dt>
    <p><strong>-S</strong></p>
  </dt>
  <dd>
    <p>Only report the first row of the results [Default is all rows]. This is useful if you have computed a statistic (say the MODE) and only want to report a single number instead of numerous records with idendical values.</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Required when no input files are given. Sets the t-coordinates of the first and last point and the equidistant sampling interval for the "time" column (see <strong>-N</strong>). If there is no time column (only data columns), give <strong>-T</strong> with no arguments; this also implies <strong>-Ca</strong>.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Selects verbose mode, which will send progress reports to stderr [Default runs "silently"].</p>
  </dd>
  <dt>
    <p><strong>-bi</strong></p>
  </dt>
  <dd>
    <p>Selects binary input. Append <strong>s</strong> for single precision [Default is double]. Append <em>n</em> for the number of columns in the binary file(s).</p>
  </dd>
  <dt>
    <p><strong>-bo</strong></p>
  </dt>
  <dd>
    <p>Selects binary output. Append <strong>s</strong> for single precision [Default is double].</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BEWARE</h2>
        <div class="sectioncontent">
<p>The operator <strong>PLM</strong> calculates the associated Legendre polynomial of degree L and order M, and its argument is the cosine of the colatitude which must satisfy -1 &lt;= x &lt;= +1. <strong>PLM</strong> is not normalized.</p><p>All derivatives are based on central finite differences, with natural boundary conditions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To take log10 of the average of 2 data files, use</p>
<pre>
        gmtmath file1.d file2.d <strong>ADD</strong> 0.5 <strong>MUL LOG10 =</strong> file3.d
</pre>
<p>Given the file samples.d, which holds seafloor ages in m.y. and seafloor depth in m, use the relation depth(in m) = 2500 + 350 * sqrt (age) to print the depth anomalies:</p>
<pre>
        gmtmath samples.d T <strong>SQRT</strong> 350 <strong>MUL </strong>2500 <strong>ADD SUB =</strong> | lpr
</pre>
<p>To take the average of columns 1 and 4-6 in the three data sets sizes.1, sizes.2, and sizes.3, use</p>
<pre>
        gmtmath <strong>-C</strong>1,4-6 sizes.1 sizes.2 <strong>ADD</strong> sizes.3 <strong>ADD 3 DIV =</strong> ave.d
</pre>
<p>To take the 1-column data set ages.d and calculate the modal value and assign it to a variable, try</p>
<pre>
        set mode_age = `gmtmath <strong>-S -T</strong> ages.d <strong>MODE</strong> <strong>=</strong>`
</pre>
<p>To use gmtmath as a RPN Hewlett-Packard calculator on scalars (i.e., no input files) and calculate arbitrary expressions, use the <strong>-Q</strong> option. As an example, we will calculate the value of Kei (((1 + 1.75)/2.2) + cos (60)) and store the result in the shell variable z:</p>
<pre>
        set z = `gmtmath <strong>-Q</strong> 1 1.75 <strong>ADD</strong> 2.2 <strong>DIV</strong> 60 <strong>COSD ADD KEI =</strong>`
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Files that have the same name as some operators, e.g., ADD, SIGN, =, etc. cannot be read and must not be present in the current directory. Piping of files is not allowed on input, but the output can be sent to stdout. The stack limit is hard-wired to 50. All functions expecting a positive radius (e.g., log, kei, etc.) are passed the absolute value of their argument.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REFERENCES</h2>
        <div class="sectioncontent">
<p>Abramowitz, M., and I. A. Stegun, 1964, <em>Handbook of Mathematical</em> Functions, Applied Mathematics Series, vol. 55, Dover, New York.</p><p>Press, W. H., S. A. Teukolsky, W. T. Vetterling, B. P. Flannery, 1992, <em>Numerical Recipes</em>, 2nd edition, Cambridge Univ., New York.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gmtmath&hellip;</h2>
        <div class="sectioncontent">
<p><em>gmt</em>(1gmt), <em>grd2xyz</em>(1gmt), <em>grdedit</em>(1gmt), <em>grdinfo</em>(1gmt), <em>grdmath</em>(1gmt), <em>xyz2grd</em>(1gmt)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gmtlogo.1gmt.html"><span aria-hidden="true">&larr;</span> gmtlogo.1gmt: Adding a gmt graphics logo overlay to an illustration</a></li>
   <li class="next"><a href="gmt-manpages-gmtmath.1gmt.html">gmtmath.1gmt: Reverse polish notation calculator for data tables <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
