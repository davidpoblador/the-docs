<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dacsexpr: Dacs expression language shell and interpreter</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Dacs expression language shell and interpreter">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dacsexpr (1) manual">
  <meta name="twitter:description" content="Dacs expression language shell and interpreter">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-dacsexpr-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/dacsexpr.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dacsexpr (1) manual" />
  <meta property="og:description" content="Dacs expression language shell and interpreter" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-dacsexpr-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dacsexpr<small> (1)</small></h1>
        <p class="lead">Dacs expression language shell and interpreter</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dacsexpr.1.html">
      <span itemprop="name">dacsexpr: Dacs expression language shell and interpreter</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/dacsexpr.1.html">
      <span itemprop="name">dacsexpr: Dacs expression language shell and interpreter</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dacsexpr</strong> [<strong>-x</strong>] [<em>\m[blue]</em><strong>dacsoptions</strong>\m[]\s-2\u[1]\d\s+2] [<strong>-dl</strong>] [<strong>-e</strong>&nbsp;<em>expr</em>] [<strong>-n</strong>] [<strong>-p</strong>] [<strong>-s</strong>] [<strong>-h</strong> | <strong>-help</strong>] [<strong>-test</strong>]</p><p>[<strong>--</strong>] [<em>filename</em>] [<em>script-arg</em>...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program is part of the <strong>DACS</strong> suite.</p><p>The <strong>dacsexpr</strong> utility evaluates <strong>DACS</strong> expressions (see \m[blue]<a href="../man5/dacs.exprs.5.html"><strong>dacs.exprs</strong>(5)</a></strong>\m[]\s-2\u[2]\d\s+2). It is often a useful aid when composing or testing expressions to be used in access control rules, or when debugging ACLs and configuration directives. While they continue to be referred to as "expressions" for historical reasons, it has become possible to write small programs, and the language can also be useful as a simple scripting language independent of the rest of <strong>DACS</strong>.</p><p>If an expression is provided, it is evaluated and the result is printed to the standard output. At most one expression can be specified. If the <strong>-q</strong> flag is given (one of the \m[blue]<strong></strong><em>dacsoptions</em>\m[]\s-2\u[1]\d\s+2), nothing is printed, expression evaluation errors are suppressed, and the program terminates with an appropriate \m[blue]<strong>exit status</strong>\m[]\s-2\u[3]\d\s+2; otherwise the result is written to the standard output. If neither a <strong>-q</strong> flag is given nor any flag that controls the logging level, then the logging level is set to warn overriding any configuration file logging level directive; this behaviour is usually convenient.</p><p>If no expression is provided, the program reads its standard input. If the input is not coming from a terminal type device, the program runs in "batch mode" and prompting is suppressed; otherwise, the program runs in "interactive mode". When prompted in interactive mode, enter <strong>help</strong> for assistance. If the \m[blue]<strong>readline</strong>(3)</strong>\m[]\s-2\u[4]\d\s+2 functionality was configured when the program was built, command line editing and history are available in interactive mode.</p><p>If the program is executed through the system&apos;s "#!" mechanism, one or more command line arguments can be given:</p>
<pre>
#!/usr/local/dacs/bin/dacsexpr -test
// expect-exact:17
${x} = 17;
</pre>
<p>Such programs always use the script file as input, therefore no expression or other file can be specified on the "#!" line.</p><p>The <em>Env</em> namespace is initialized from the program&apos;s environment. For example, if the value of the environment variable <strong>LOGNAME</strong> is bobo, then <em>${Env::LOGNAME}</em> will be instantiated with that value. Syntactically invalid variable names are silently ignored.</p><p><strong>Note</strong></p><p>Configuration directives and the <em>Conf</em> variable namespace are available only if a configuration file is processed (e.g., by giving the <strong>-uj</strong> command line flag). This is relevant, for example, if the \m[blue]<strong>http()</strong>\m[]\s-2\u[5]\d\s+2 function is called using the https scheme because proper operation will require the \m[blue]<strong>SSL_PROG</strong>\m[]\s-2\u[6]\d\s+2 directive to be configured. See \m[blue]<strong>dacs.conf</strong>(5)</strong>\m[]\s-2\u[7]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>If an expression or file has not already been specified, a filename may appear as the last argument. If <em>filename</em> is "-", the standard input is read.</p><p><strong>-dl</strong></p><p>Print debugging information to stderr.</p><p><strong>-e</strong> <em>expr</em></p><p>The given expression is evaluated.</p><p><strong>-h</strong></p><p><strong>-help</strong></p><p>Display a help message and exit.</p><p><strong>-n</strong></p><p>Do not evaluate any expressions, only check for syntax errors.</p><p><strong>-p</strong></p><p>Print the final result to the standard output, unless it has been suppressed by <strong>-q</strong> or <strong>-n</strong>. Without this flag, the result would have to be output by the program.</p><p>-s</p><p>If a single expression is being evaluated from the command line or a file and the result of evaluation is a string or bstring, the output will be surrounded by quotes unless this flag is specified.</p><p><strong>-test</strong></p><p>The input is a test case. A test case consists of options followed by an expression. There can be zero or more options, one per line, embedded within a // style comment:</p>
<pre>
{ whitespace* "//" whitespace* <em>option-name</em> ":" <em>option-value</em> end-of-line }*
</pre>
<p>No whitespace is allowed before or after the ":". As a special case, lines having the following format are ignored:</p>
<pre>
whitespace* "///" .* end-of-line
</pre>
<p>The first non-option line terminates the options and is the first line of the expression to be evaluated.</p><p>Here is an example:</p>
<pre>
/// Test bitwise shifts
// expect-exact:1024
1 &lt;&lt; 10
</pre>
<p>An option controls how the test is to be performed and gives the expected result:</p><p>expect:<em>regex</em></p><p>expect-regex:<em>regex</em></p><p>The result string must match <em>regex</em>. These two option names are equivalent.</p><p>expect-identical:<em>string</em></p><p>The result string must match <em>string</em> exactly.</p><p>expect-exact:<em>string</em></p><p>The result string must match <em>string</em> exactly, except that C-style character constants (preceded by a backslash) in <em>string</em> are interpolated.</p><p>expect-code:<em>code</em></p><p>The result code must match <em>code</em>, which is 0 if the result is <strong>True</strong>, 1 if the result is <strong>False</strong>, and 2 if an error occurs. If this option is not given, a default code of 0 is assumed.</p><p>expect-type:<em>type</em></p><p>The type of the result must match <em>type</em>, which can be integer, real, string, bstring, literal, or undef.</p><p>expect-flags:<em>flags</em></p><p>Currently, the only recognized values for <em>flags</em> are rw_namespaces and ro_namespaces. The former allows the test to create or modify variables in the <em>DACS</em>, <em>Args</em>, or <em>Env</em> namespace; by default, these namespaces are read-only. This might be useful when testing \m[blue]<strong>from()</strong>\m[]\s-2\u[8]\d\s+2, for instance, because it allows the test to set a value for <em>${DACS::REMOTE_ADDR}</em>. The default behaviour can be explicitly selected by specifying ro_namespaces.</p><p>show-result:{yes | no}</p><p>The result is printed to the standard output only if the option value is yes.</p><p>If the test fails, a descriptive message is printed to the standard error. The program&apos;s exit status will be 0 if the test was successful, 1 otherwise.</p><p>This example should succeed without displaying the result:</p>
<pre>
// expect-exact:2
// expect-type:integer
/// show-result:yes
1 + 1
</pre>
<p><strong>Note</strong></p><p>The <strong>DACS</strong> distribution includes a set of test cases in the src/tests directory that can be run for regression testing (do "make tests" from the src directory). Some of the functions provided by \m[blue]<a href="../man5/dacs.exprs.5.html"><strong>dacs.exprs</strong>(5)</a></strong>\m[]\s-2\u[2]\d\s+2 are also used internally by <strong>DACS</strong>, so it is critical that all tests are successful even for functions that are not used from the user level.</p><p>-x</p><p>If this is the very first flag it indicates that <strong>dacsexpr</strong> is being executed as a script via the system&apos;s "#!" mechanism. This might be useful if the program&apos;s heuristic for determining this is incorrect. The last argument must be a filename.</p><p>--</p><p>This argument explicitly marks the last flag argument. A filename argument might follow.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following command evaluates the expression argument (note that it is a single argument to the command) and outputs the result to stdout:</p>
<pre>
% dacsexpr -e "1+1"
2
% dacsexpr -e &apos;${Env::USER}&apos;
"bobo"
% dacsexpr -u example.com -e &apos;"FEDERATION_NAME=" . ${Conf::FEDERATION_NAME}&apos;
"FEDERATION_NAME=EXAMPLE"
% dacsexpr - a b c &lt;&lt;HERE
? print("First arg is &#92;"&#92;${Argv::1}&#92;"")
? HERE
First arg is "a"
% cat ex
#!/usr/local/dacs/bin/dacsexpr

print("Argv[2] is ${Argv::2}");
% chmod 0755 ex
% ./ex foo bar baz
Argv[2] is bar
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>If an error occurs, a message may be written to stderr, depending on the logging level. In general, the program exits 0 if and only if everything was fine. If a command line expression is evaluated, the program exits 0 if the expression evaluates to <strong>True</strong>, 1 if it evaluates to <strong>False</strong>, and 2 if an error occurs. If an explicit call to <strong>exit()</strong> is made and no true error condition occurred, then the program will exit with the argument value.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dacsexpr&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<a href="../man5/dacs.exprs.5.html"><strong>dacs.exprs</strong>(5)</a></strong>\m[]\s-2\u[2]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>New and little-used features should be used with care. This advice applies to all software.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Distributed Systems Software (\m[blue]<strong>www.dss.ca</strong>\m[]\s-2\u[9]\d\s+2)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright2003-2013 Distributed Systems Software. See the \m[blue]<strong>LICENSE</strong>\m[]\s-2\u[10]\d\s+2 file that accompanies the distribution for licensing information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>dacsoptions</p><p>http://dacs.dss.ca/man/dacs.1.html#dacsoptions</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man5/dacs.exprs.5.html"><strong>dacs.exprs</strong>(5)</a></p><p>http://dacs.dss.ca/man/dacs.exprs.5.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>exit status</p><p>http://dacs.dss.ca/man/#diagnostics</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p><strong>readline</strong>(3)</p><p>http://www.freebsd.org/cgi/man.cgi?query=readline&apropos=0&sektion=3&manpath=FreeBSD+9.1-RELEASE&format=html</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p>http()</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html#http</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p>SSL_PROG</p><p>http://dacs.dss.ca/man/dacs.conf.5.html#SSL_PROG</p>
  </dd>
  <dt>
     7.
  </dt>
  <dd>
    <p><strong>dacs.conf</strong>(5)</p><p>http://dacs.dss.ca/man/dacs.conf.5.html</p>
  </dd>
  <dt>
     8.
  </dt>
  <dd>
    <p>from()</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html#from</p>
  </dd>
  <dt>
     9.
  </dt>
  <dd>
    <p>www.dss.ca</p><p>http://www.dss.ca</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p>LICENSE</p><p>http://dacs.dss.ca/man/../misc/LICENSE</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dacsemail.1.html"><span aria-hidden="true">&larr;</span> dacsemail.1: Simple outgoing email agent</a></li>
   <li class="next"><a href="dacsgrid.1.html">dacsgrid.1: Administer grid-based one-time passwords <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
