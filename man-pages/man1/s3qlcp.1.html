<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>s3qlcp: Copy-on-write replication on s3ql file systems</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Copy-on-write replication on s3ql file systems">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="s3qlcp (1) manual">
  <meta name="twitter:description" content="Copy-on-write replication on s3ql file systems">
  <meta name="twitter:image" content="https://www.carta.tech/images/s3ql-s3qlcp-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/s3qlcp.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="s3qlcp (1) manual" />
  <meta property="og:description" content="Copy-on-write replication on s3ql file systems" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/s3ql-s3qlcp-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">s3qlcp<small> (1)</small></h1>
        <p class="lead">Copy-on-write replication on s3ql file systems</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/s3qlcp.1.html">
      <span itemprop="name">s3qlcp: Copy-on-write replication on s3ql file systems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/s3ql/">
      <span itemprop="name">s3ql</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/s3qlcp.1.html">
      <span itemprop="name">s3qlcp: Copy-on-write replication on s3ql file systems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
s3qlcp [options] &lt;source-dir&gt; &lt;dest-dir&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>S3QL is a file system for online data storage. Before using S3QL, make sure to consult the full documentation (rather than just the man pages which only briefly document the available userspace commands).</p><p>The <strong>s3qlcp</strong> command duplicates the directory tree <strong>source-dir</strong> into <strong>dest-dir</strong> without physically copying the file contents. Both source and destination must lie inside the same S3QL file system.</p><p>The replication will not take any additional space. Only if one of directories is modified later on, the modified data will take additional storage space.</p><p><strong>s3qlcp</strong> can only be called by the user that mounted the file system and (if the file system was mounted with <strong>--allow-other</strong> or <strong>--allow-root</strong>) the root user.</p><p>Note that:</p><ul>
<li><p>After the replication, both source and target directory will still be completely ordinary directories. You can regard <strong>&lt;src&gt;</strong> as a snapshot of <strong>&lt;target&gt;</strong> or vice versa. However, the most common usage of <strong>s3qlcp</strong> is to regularly duplicate the same source directory, say <strong>documents</strong>, to different target directories. For a e.g. monthly replication, the target directories would typically be named something like <strong>documents_January</strong> for the replication in January, <strong>documents_February</strong> for the replication in February etc. In this case it is clear that the target directories should be regarded as snapshots of the source directory.</p></li><li><p>Exactly the same effect could be achieved by an ordinary copy program like <strong>cp -a</strong>. However, this procedure would be orders of magnitude slower, because <strong>cp</strong> would have to read every file completely (so that S3QL had to fetch all the data over the network from the backend) before writing them into the destination folder.</p></li>
</ul><h3>Snapshotting vs Hardlinking</h3>
<p>Snapshot support in S3QL is inspired by the hardlinking feature that is offered by programs like <em>rsync</em> or <em>storeBackup</em>. These programs can create a hardlink instead of copying a file if an identical file already exists in the backup. However, using hardlinks has two large disadvantages:</p><ul>
<li><p>backups and restores always have to be made with a special program that takes care of the hardlinking. The backup must not be touched by any other programs (they may make changes that inadvertently affect other hardlinked files)</p></li><li><p>special care needs to be taken to handle files which are already hardlinked (the restore program needs to know that the hardlink was not just introduced by the backup program to safe space)</p><p>S3QL snapshots do not have these problems, and they can be used with any backup program.</p></li>
</ul>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The <strong>s3qlcp</strong> command accepts the following options:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>--debug-modules</strong><em></em><strong>&lt;modules&gt;</strong></p>
  </dt>
  <dd>
    <p>Activate debugging output from specified modules (use commas to separate multiple modules). Debug messages will be written to the target specified by the <strong>--log</strong> option.</p>
  </dd>
  <dt>
    <p><strong>--debug</strong></p>
  </dt>
  <dd>
    <p>Activate debugging output from all S3QL modules. Debug messages will be written to the target specified by the <strong>--log</strong> option.</p>
  </dd>
  <dt>
    <p><strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>be really quiet</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>just print program version and exit</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT CODES</h2>
        <div class="sectioncontent">
<p><strong>s3qlcp</strong> may terminate with the following exit codes:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>0</strong></p>
  </dt>
  <dd>
    <p>Everything went well.</p>
  </dd>
  <dt>
    <p><strong>1</strong></p>
  </dt>
  <dd>
    <p>An unexpected error occured. This may indicate a bug in the program.</p>
  </dd>
  <dt>
    <p><strong>2</strong></p>
  </dt>
  <dd>
    <p>Invalid command line argument.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO s3qlcp&hellip;</h2>
        <div class="sectioncontent">
<p>The S3QL homepage is at <em>https://bitbucket.org/nikratio/s3ql/</em>.</p><p>The full S3QL documentation should also be installed somewhere on your system, common locations are <strong>/usr/share/doc/s3ql</strong> or <strong>/usr/local/doc/s3ql</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>© 2008 Nikolaus Rath &lt;Nikolaus@rath.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="s3qladm.1.html"><span aria-hidden="true">&larr;</span> s3qladm.1: Manage s3ql file systems</a></li>
   <li class="next"><a href="s3qlctrl.1.html">s3qlctrl.1: Control a mounted s3ql file system <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
