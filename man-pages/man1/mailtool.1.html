<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mailtool: Process mailboxes</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Process mailboxes">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mailtool (1) manual">
  <meta name="twitter:description" content="Process mailboxes">
  <meta name="twitter:image" content="https://www.carta.tech/images/cone-mailtool-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mailtool.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mailtool (1) manual" />
  <meta property="og:description" content="Process mailboxes" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cone-mailtool-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mailtool<small> (1)</small></h1>
        <p class="lead">Process mailboxes</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mailtool.1.html">
      <span itemprop="name">mailtool: Process mailboxes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cone/">
      <span itemprop="name">cone</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mailtool.1.html">
      <span itemprop="name">mailtool: Process mailboxes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mailtool</strong> [options...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p><strong>mailtool</strong> is a diagnostic utility for handling various operations on mailboxes. <strong>mailtool</strong>\'s main uses include: display the list of folders in a mailbox; displaying list of messages in a mailbox; and copying mailboxes.</p><p>The following mailboxes can be accessed by <strong>mailtool</strong>:</p><p>imap://<em>userid</em>@<em>server</em>[/options]</p><p>An IMAP account. <strong>mailtool</strong> will prompt for the login password.</p><p>imaps://<em>userid</em>@<em>server</em>[/options]</p><p>An IMAP account accessed via an encrypted SSL connection.</p><p>pop3://<em>userid</em>@<em>server</em>[/options]</p><p>A POP3 account. <strong>mailtool</strong> will prompt for the login password.</p><p>pop3s://<em>userid</em>@<em>server</em>[/options]</p><p>A POP3 account accessed via an encrypted SSL connection.</p><p>maildir:<em>path</em></p><p>A local maildir mailbox. path specifies the maildir\'s location relative to the home directory (NOT the current directory).</p><p>mbox:<em>path</em></p><p>Local mbox mail folders. path specifies the path to an mbox folder file, or a directory containing mbox folders, relative to the home directory (NOT the current directory).</p><p>inbox:<em>path</em></p><p>Local mbox mail folders, like &ldquo;mbox:<em>path</em>&rdquo;; additionally, the system spool mailbox is automatically copied to $HOME/Inbox, which is accessible as folder INBOX.</p><p>The name of a remote IMAP or POP3 server may be followed by one or more options that control various settings of the IMAP or POP3 connection:</p><p>/cram</p><p>Do not open the account unless the server supports secure password authentication. Secure password authentication verifies the account\'s password using a challenge/response authentication mechanism (where the label "cram" comes from). The actual password is never actually transmitted to the server, and therefore cannot be intercepted while in transit over an untrusted network.</p><p>Secure password authentication is not supported by all servers. This option may not work with some servers. This option does not enable secure password authentication, it only mandates its use. If the server supports secure password authentication, it will be used even without the /cram option. Traditional userid/password authentication will be used only if the server does not implement secure password authentication. The /cram option makes secure password authentication mandatory.</p><p>The /cram option is marginally useful even with encrypted server connections. The secure password authentication never sends the explicit password to the server. Encryption makes it theoretically impossible to recover the password from an encrypted data connection; but with secure authentication the password is never sent over the connection in the first place (the password\'s validity is certified by exchanging certain mathematical calculations between the server and the client). If the server is compromised, the compromised server will not receive the account password (unless the password is recovered from the server in other ways).</p><p>/imap</p><p>Do not use the SMAP if the server claims the availability of this experimental mail access protocol, and fall back to IMAP compatibility mode (this option is meaningful only with &ldquo;imap://&rdquo; and &ldquo;imaps://&rdquo; URLs).</p><p>/notls</p><p>Do not upgrade a plain connection to an encrypted one. This option is primarily used for testing and debugging purposes. Sometimes this option might be useful with servers that claim to offer encryption, but are unable to do so when taken up on their offer.</p><p>/novalidate-cert</p><p>Do not validate the server\'s SSL certificate when using an encrypted connection. Normally the mail server\'s SSL certificate must be validate when using an encrypted connection. The certificate\'s name must match the server\'s name, and the certificate must be signed by a trusted certificate authority.</p><p>The encrypted connection normally fails if the certificate cannot be validate. Validation requires that a list of trusted certificate authorities must be known and configured. It\'s simply impossible to know which certificate authorities are valid without an explicit list of valid, known, trusted, certificate authorities. If a trusted authority list is not configured, no certificate can be validated. If the server\'s certificate is a self-signed certificate (this is often used for testing purposes), or if it\'s not signed by a known authority, the encrypted connection fails.</p><p>This /novalidate-cert option disables certificate validation. The encrypted connection will be established even if the server\'s certificate would otherwise be rejected.</p><p><strong>Note</strong></p><p>This option is applicable even when an encrypted IMAP or POP3 connection is not explicitly requested. Many mail servers are capable of automatically upgrading unencrypted connections to a fully-encrypted connection. If a mail server claims to be able to use encryption, then there\'s no reason not to use it. The result is that all encryption certification requirements still apply even when encryption is not explicitly requested.</p><h3>Displaying mailbox contents</h3>
<p><strong>mailtool</strong> -tree | -list  <em>account</em></p><p>-tree shows a hierarchical representation of mail folders in <em>account</em>. -list generates a simple folder listing, one folder name per line. -tree shows folder names, while -list shows the actual mail folder path in <em>account</em>.</p>
<pre>
mailtool -tree imap://jsmith@mail.example.com/novalidate-cert/cram
</pre>

<h3>Creating folders</h3>
<p><strong>mailtool</strong> -create | -createdir  <em>folder</em> <em>name</em> <em>account</em></p><p>-create creates a new subfolder of <em>folder</em> in <em>account</em>. The new subfolder\'s name is <em>name</em>. -createdir creates a new folder directory (a folder that contains other folders).</p>
<pre>
mailtool -create INBOX.lists announcements maildir:Maildir
</pre>
<p>This command creates a new folder &ldquo;announcements&rdquo; as a subfolders of &ldquo;INBOX.lists&rdquo; in the local maildir.</p>
<h3>Deleting folders</h3>
<p><strong>mailtool</strong> -delete | -deletedir  <em>folder</em> <em>account</em></p><p>-delete deletes an existing <em>folder</em> in <em>account</em>.</p><p>-deletedir deletes a folder directory.</p>
<pre>
mailtool -delete INBOX.lists.announcements maildir:Maildir
</pre>

<h3>Renaming folders</h3>
<p><strong>mailtool</strong> -rename <em>oldfolder</em> <em>folder</em> <em>name</em> <em>account</em></p><p>-renames renames an existing <em>oldfolder</em>. The folder is renamed as <em>name</em>, as a subfolder of <em>folder</em>. <em>folder</em> may be an empty string if the folder should be moved to the top level of <em>account</em>\'s folder hierarchy.</p>
<pre>
mailtool -rename INBOX.lists.announcements INBOX.lists Announcements maildir:Maildir
</pre>
<p>The folder &ldquo;INBOX.lists.announcements&rdquo; is renamed to &ldquo;INBOX.lists.Announcements&rdquo;. This slightly unusual way to rename folder allows folders to be relocated in the mail <em>account</em>\'s folder hierarchy.</p>
<h3>Reading folder\'s index</h3>
<p><strong>mailtool</strong> -index <em>folder</em> <em>account</em></p><p>-index downloads and prints a summary of all messages in <em>folder</em>, in <em>account</em>. The summary shows the sender\'s and recipients\' address, the message\'s subject, and size.</p>
<pre>
mailtool -index INBOX imap://john@mail.example.com/novalidate-cert
</pre>

<h3>Removing a message from a folder</h3>
<p><strong>mailtool</strong> -remove <em>folder</em> <em>n</em> <em>account</em></p><p>-remove removes message #<em>n</em> (ranging from 1 to the number of messages in the folder) in <em>folder</em>, in <em>account</em>. The message numbers may be obtained by using -index.</p><p><em>n</em> may be a comma-separated list of message numbers, in strictly numerically increasing order. -remove confirms the list of messages to remove and issues a &ldquo;Ready:&rdquo; prompt. Press ENTER to remove the messages.</p>
<pre>
mailtool -remove INBOX 28,31 imap://john@mail.example.com/novalidate-cert
</pre>

<h3>Filtering messages</h3>
<p><strong>mailtool</strong> -filter <em>folder</em> <em>account</em></p><p>-filter is a combination of -index and -remove. <em>folder</em>\'s index is downloaded, and the summary of each message is shown, one message at a time. Each message\'s summary is followed by a prompt: &ldquo;Delete, Skip, or Exit&rdquo;. Pressing D removes the message, S leaves the message unchanged, and E leaves the remaining messages unchanged.</p>
<pre>
mailtool -filter INBOX pop3://john@mail.example.com/novalidate-cert
</pre>
<p><strong>Note</strong></p><p>-filter is not meant to be used with large folders. Unless messages are removed quickly, the connection to the server may be disconnected for inactivity.</p>
<h3>Copying folders</h3>
<p><strong>mailtool</strong> [-recurse] -tofolder <em>tofolder</em> -copyto <em>toaccount</em> -fromfolder <em>fromfolder</em> <em>fromaccount</em></p><p>This command copies an entire folder, fromfolder in fromaccount to a new folder, tofolder (which will be created, if necessary) in toaccount. Optionally, -recurse specifies that all subfolders of fromfolder should also be copied.</p>
<pre>
mailtool -tofolder INBOX -copyto maildir:Maildir &#92;
    -fromfolder "INBOX" imap://mbox100@mail.example.com/novalidate-cert

mailtool -recurse -tofolder INBOX.converted_mail &#92;
    -copyto maildir:Maildir -fromfolder "mail" &#92;
        imap://mbox100@mail.example.com/novalidate-cert
</pre>
<p>This example first copies the INBOX on the IMAP server to $HOME/Maildir, then copies subfolders of &ldquo;mail&rdquo; on the IMAP server to the &ldquo;converted_mail&rdquo; subfolder in the maildir.</p>
<pre>
mailtool -tofolder INBOX -copyto maildir:Maildir &#92;
   -fromfolder "INBOX" inbox:mail

mailtool -recurse -tofolder INBOX.converted_mail &#92;
    -copyto maildir:Maildir -fromfolder "" mbox:mail

</pre>
<p>This example first copies $HOME/Inbox (accessed as the INBOX folder in inbox:mail) to $HOME/Maildir, then copies mbox folders from $HOME/mail to the &ldquo;converted_mail&rdquo; subfolder in the maildir.</p><p><strong>Note</strong></p><p>Mail accounts that contain hybrid folders (folders that contain both messages and subfolders) can only be copied to account types that also support hybrid folders: either local maildirs, or to remote servers that support hybrid folders.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mailtool&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/cone.1.html"><strong>cone</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Sam Varshavchik</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mailtoe.1.html"><span aria-hidden="true">&larr;</span> mailtoe.1: A train-on-error simulator for use with dbacl.</a></li>
   <li class="next"><a href="mailutil.1.html">mailutil.1: Mail utility program <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
