<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>hfssh: Tcl interpreter with hfs extensions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Tcl interpreter with hfs extensions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="hfssh (1) manual">
  <meta name="twitter:description" content="Tcl interpreter with hfs extensions">
  <meta name="twitter:image" content="https://www.carta.tech/images/hfsutils-tcltk-hfssh-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/hfssh.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="hfssh (1) manual" />
  <meta property="og:description" content="Tcl interpreter with hfs extensions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/hfsutils-tcltk-hfssh-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">hfssh<small> (1)</small></h1>
        <p class="lead">Tcl interpreter with hfs extensions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/hfssh.1.html">
      <span itemprop="name">hfssh: Tcl interpreter with hfs extensions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/hfsutils-tcltk/">
      <span itemprop="name">hfsutils-tcltk</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/hfssh.1.html">
      <span itemprop="name">hfssh: Tcl interpreter with hfs extensions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>hfssh [<em>script</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>hfssh</strong> is a Tcl interpreter like <strong>tclsh</strong>(1) but which also implements the following extensions to support manipulation of Macintosh HFS media:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>hfs mount</strong><em> path [partno]</em></p>
  </dt>
  <dd>
    <p>Mounts the indicated HFS partition from the given <em>path</em>. An HFS volume handle is returned, which may be used for further volume commands described below.</p>
  </dd>
  <dt>
    <p><strong>hfs zero</strong><em> path nparts</em></p>
  </dt>
  <dd>
    <p>The given <em>path</em> is overwritten with a Macintosh partition structure which can accommodate up to <em>nparts</em> partitions. All space on the medium is initially allocated to an empty partition, from which new partitions can be created using <strong>hfs mkpart</strong>. The number of blocks in this empty space available for partitioning is returned.</p>
  </dd>
  <dt>
    <p><strong>hfs mkpart</strong><em> path nblocks</em></p>
  </dt>
  <dd>
    <p>A new HFS partition is created from the available free space on the specified Macintosh-partitioned medium. The partition is created with a size of <em>nblocks</em>. Any remaining free blocks left in the empty partition space can be further allocated to other new partitions, as long as there are enough partition slots remaining.</p><ul>
<li><p>N.B. When the last remaining partition slot is used, all remaining free space must be allocated to it. It is therefore best to consider this when initially creating the total number of partition slots with <strong>hfs zero</strong>.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>hfs nparts</strong><em> path</em></p>
  </dt>
  <dd>
    <p>This command returns the number of HFS partitions which exist on the Macintosh-formatted medium specified by <em>path</em>. If <em>path</em> does not appear to have a Macintosh partition map, or if an error occurs, this command will return -1. Otherwise, it will return a number greater than or equal to 0.</p>
  </dd>
  <dt>
    <p><strong>hfs format</strong><em> path partno vname [bblist]</em></p>
  </dt>
  <dd>
    <p>This command creates a new HFS volume by formatting the given <em>path</em> and partition <em>partno</em> and giving it a volume label <em>vname</em>.</p><ul>
<li><p>If it is desired to "spare" some blocks from being used by the volume, a list of "bad block" numbers can be given, relative to the beginning of the partition. The given blocks will be mapped out of use (if possible) and the size of the resulting volume will be decreased.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>hfs flushall</strong></p>
  </dt>
  <dd>
    <p>All pending changes to all open volumes are flushed immediately. This is useful to do periodically to avoid accidental loss of data when volumes are open for long periods of time.</p>
  </dd>
  <dt>
    <p><strong>hfs chartrans</strong><em> fromset toset string</em></p>
  </dt>
  <dd>
    <p>This command translates the given <em>string</em> from the <em>fromset</em> character set to the <em>toset</em> set. Both <em>fromset</em> and <em>toset</em> can be one of <strong>latin1</strong> (ISO 8859-1) or <strong>macroman</strong> (MacOS Standard Roman). A new (translated) string is returned.</p><ul>
<li><p>The translation is not necessarily reversible, since the two character sets do not have a complete one-to-one mapping.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>hfs version</strong></p>
  </dt>
  <dd>
    <p>The current running version of <strong>hfsutils</strong> is returned.</p>
  </dd>
  <dt>
    <p><strong>hfs copyright</strong></p>
  </dt>
  <dd>
    <p>A copyright notice is returned.</p>
  </dd>
  <dt>
    <p><strong>hfs author</strong></p>
  </dt>
  <dd>
    <p>The name and email address of the author of <strong>hfsutils</strong> is returned.</p>
  </dd>
  <dt>
    <p><strong>hfs license</strong></p>
  </dt>
  <dd>
    <p>A license statement for <strong>hfsutils</strong> is returned.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>vname</strong></p>
  </dt>
  <dd>
    <p>The volume name of the given <em>vol</em> handle is returned. This is also the name of the volume's root directory, needed to construct absolute pathnames on the volume.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>size</strong></p>
  </dt>
  <dd>
    <p>A list of two numbers is returned; the first is the total size of the given <em>vol</em> (in bytes), and the second is the number of free bytes that are currently available.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>crdate</strong></p>
  </dt>
  <dd>
    <p>The creation date of the given <em>vol</em> is returned, expressed as a number of seconds since 00:00:00 01-Jan-1970 UTC.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>mddate</strong></p>
  </dt>
  <dd>
    <p>The last modification date of the given <em>vol</em> is returned, expressed as a number of seconds since 00:00:00 01-Jan-1970 UTC.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>islocked</strong></p>
  </dt>
  <dd>
    <p>A boolean value (either 1 or 0) is returned, indicating whether the given <em>vol</em> handle is locked for read-only access. It may be locked because the medium is physically locked through hardware, or because the medium was opened read-only for special reasons (such as another process also has the medium open).</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>umount</strong></p>
  </dt>
  <dd>
    <p>The indicated <em>vol</em> is unmounted, flushing any unsaved data to the volume and closing the access path to the medium. The <em>vol</em> handle subsequently becomes invalid for further use.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>cwd</strong></p>
  </dt>
  <dd>
    <p>A numeric value is returned indicating the catalog node ID (CNID) of the current working directory on the given <em>vol</em>. This value can be passed to <em>vol </em><strong>dirinfo</strong> to learn the directory's name and parent CNID.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>path</strong></p>
  </dt>
  <dd>
    <p>A list of directory names is returned, representing the hierarchy between the root and the current directory. These names can be joined with <em>vol </em><strong>sepchar</strong> characters (:) to construct an absolute pathname to the current directory.</p><ul>
<li><p>The same information can be acquired by traversing the CNIDs from the current directory to the root using <em>vol</em> <strong>dirinfo</strong>. (The root directory always has a CNID of 2.)</p></li>
</ul>
  </dd>
  <dt>
    <p><em>vol </em><strong>dir</strong><em> [path]</em></p>
  </dt>
  <dd>
    <p>A list is returned describing the contents of the given directory <em>path</em> (defaulting to the current directory) on the given <em>vol</em>. Each element of the list describes one entry, and contains a set of attribute/value pairs represented as another list, suitable for assignment to a Tcl array using <strong>array set</strong>.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>flush</strong></p>
  </dt>
  <dd>
    <p>All pending changes to the given volume are flushed immediately.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>sepchar</strong></p>
  </dt>
  <dd>
    <p>The HFS path separator character ":" is returned.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>cd</strong><em> path</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>vol </em><strong>chdir</strong><em> path</em></p>
  </dt>
  <dd>
    <p>The current working directory on the given volume is changed to <em>path</em>, which may be either an absolute or relative path.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>dirinfo</strong><em> cnid</em></p>
  </dt>
  <dd>
    <p>A two-element list describing the directory having the given <em>cnid</em> on the given <em>vol</em> is returned. The first element contains the name of the directory, while the second element contains the CNID of the directory's parent. Two CNID values are special: the root directory of the volume has CNID 2, and the "parent" of the root directory is returned with CNID 1.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>open</strong><em> path</em></p>
  </dt>
  <dd>
    <p>The file on <em>vol</em> having the given <em>path</em> is opened. An HFS file handle is returned, which may be used for further file commands described below.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>stat</strong><em> path</em></p>
  </dt>
  <dd>
    <p>Information about the file or directory having the given <em>path</em> is returned in much the same way as <em>vol </em><strong>dir</strong> except that only the single argument is described (not its contents).</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>mkdir</strong><em> path</em></p>
  </dt>
  <dd>
    <p>A new directory on <em>vol</em> having the given <em>path</em> is created. All of the parent directories leading to <em>path</em> must already exist, but <em>path</em> itself must not.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>rmdir</strong><em> path</em></p>
  </dt>
  <dd>
    <p>The directory on <em>vol</em> with the given <em>path</em> is removed. The directory must be empty.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>delete</strong><em> path</em></p>
  </dt>
  <dd>
    <p>The file on <em>vol</em> with the given <em>path</em> is removed. Both resource and data forks of the file are deleted.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>touch</strong><em> path</em></p>
  </dt>
  <dd>
    <p>The modification time for the file or directory specified by <em>path</em> on the given <em>vol</em> is updated to the current time.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>glob</strong><em> pattern</em></p>
  </dt>
  <dd>
    <p>The given <em>pattern</em> is treated as a list of globbing patterns, each of which may be expanded to the names of files or directories on the given <em>vol</em> according to the globbing rules described in the <a href="../man1/hfsutils.1.html"><strong>hfsutils</strong>(1)</a> documentation. The resulting pathnames are returned in a (possibly longer) list. If a pattern does not match any file or directory name, it is returned in the resulting list unchanged.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>bless</strong><em> path</em></p>
  </dt>
  <dd>
    <p>The folder named by the given path is "blessed" as the MacOS System Folder. For this to be useful, the folder should contain valid Macintosh System and Finder files.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>rename</strong><em> oldpath newpath</em></p>
  </dt>
  <dd>
    <p>The existing <em>oldpath</em> on the given <em>vol</em> is renamed to <em>newpath</em>, possibly changing its location at the same time. If <em>newpath</em> already exists, it must be a directory, and the item will simply be moved into it keeping the same name. (In the latter case, there must not be another file or directory already with the same name; in no case will another file or directory be overwritten.)</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>create</strong><em> path type creator</em></p>
  </dt>
  <dd>
    <p>A new, empty file is created on <em>vol</em> having the given <em>path</em>, and an HFS file handle is returned in the same manner as <em>vol</em> <strong>open</strong>. The file is given the specified MacOS <em>type</em> and <em>creator</em> codes, which must be 4 character strings.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>copy</strong><em> srcpath dstvol dstpath</em></p>
  </dt>
  <dd>
    <p>The given file <em>srcpath</em> located on <em>vol</em> is copied to <em>dstpath</em> located on <em>dstvol</em> (which may be the same as <em>vol</em>). The file and its attributes are copied verbatim; no translation is performed.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>copyin</strong><em> mode srcpath dstpath</em></p>
  </dt>
  <dd>
    <p>The specified local (UNIX) <em>srcpath</em> is copied into the given <em>vol</em> as a file having the specified (HFS) <em>dstpath</em>. A translation <em>mode</em> must be given as one of <strong>macbinary</strong>, <strong>binhex</strong>, <strong>text</strong>, or <strong>raw</strong>.</p>
  </dd>
  <dt>
    <p><em>vol </em><strong>copyout</strong><em> mode srcpath dstpath</em></p>
  </dt>
  <dd>
    <p>The specified (HFS) <em>srcpath</em> on the given <em>vol</em> is copied out as a local file having the specified (UNIX) <em>dstpath</em>. A translation <em>mode</em> must be given as one of <strong>macbinary</strong>, <strong>binhex</strong>, <strong>text</strong>, or <strong>raw</strong>.</p>
  </dd>
  <dt>
    <p><em>file </em><strong>close</strong></p>
  </dt>
  <dd>
    <p>The indicated <em>file</em> is closed, all pending changes to the file are flushed, and the file handle becomes invalid for any subsequent operation.</p>
  </dd>
  <dt>
    <p><em>file </em><strong>tell</strong></p>
  </dt>
  <dd>
    <p>A numeric index is returned indicating the character position within <em>file</em> at which the next read or write operation will occur.</p>
  </dd>
  <dt>
    <p><em>file </em><strong>stat</strong></p>
  </dt>
  <dd>
    <p>Information about the given <em>file</em> is returned in much the same way as <em>vol</em> <strong>stat</strong>.</p>
  </dd>
  <dt>
    <p><em>file </em><strong>getfork</strong></p>
  </dt>
  <dd>
    <p>If the given <em>file</em> is currently performing I/O on its data fork, the string "data" is returned. Otherwise, the string "rsrc" is returned. When files are opened, they will default to read/write on their data fork. The current fork may be changed with <em>file</em> <strong>setfork</strong>.</p>
  </dd>
  <dt>
    <p><em>file </em><strong>setfork</strong><em> fork</em></p>
  </dt>
  <dd>
    <p>The current fork of the given <em>file</em> is set to <em>fork</em> (which must be one of <strong>data</strong> or <strong>rsrc</strong>), and the current read/write position is reset to the beginning of the file.</p>
  </dd>
  <dt>
    <p><em>file </em><strong>seek</strong><em> pos [from]</em></p>
  </dt>
  <dd>
    <p>The character position for the next read or write on <em>file</em> is changed to <em>pos</em>, relative to the indicated <em>from</em> position, which must be one of <strong>start</strong>, <strong>current</strong>, or <strong>end</strong>. The default is to position relative to the <strong>start</strong> of the file.</p>
  </dd>
  <dt>
    <p><em>file </em><strong>read</strong><em> length</em></p>
  </dt>
  <dd>
    <p><em>length</em> bytes are read from the current read/write position in <em>file</em>, and these bytes are returned as a string. This string may be shorter than <em>length</em> in some circumstances, or may even be empty, indicating the end of the file has been reached.</p>
  </dd>
  <dt>
    <p><em>file </em><strong>write</strong><em> string</em></p>
  </dt>
  <dd>
    <p>The given <em>string</em> is written to <em>file</em> at the current read/write position. The number of bytes actually written to the file is returned, and may be less than the length of the string in unusual circumstances (such as when the volume is full).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO hfssh&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/hfsutils.1.html"><strong>hfsutils</strong>(1)</a>, <a href="../man1/hfs.1.html"><strong>hfs</strong>(1)</a>, <strong>tclsh</strong>(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Precautions are taken to ensure all open files and mounted volumes are cleanly closed and unmounted before exiting the shell, however abnormal termination (e.g. CTRL-C) can circumvent this, potentially leaving volumes in an inconsistent state. Judicious use of <strong>hfs flushall</strong> may help reduce this risk.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Tcl does not provide a mechanism for manipulating arbitrary binary data. Therefore caution should be used when reading or writing files containing anything other than plain text.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Robert Leslie &lt;rob@mars.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="hfs.1.html"><span aria-hidden="true">&larr;</span> hfs.1: Shell for manipulating hfs volumes</a></li>
   <li class="next"><a href="hfsutils.1.html">hfsutils.1: Tools for reading and writing macintosh hfs volumes <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
