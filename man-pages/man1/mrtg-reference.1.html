<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mrtg-reference: Mrtg 2.17.4 configuration reference</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Mrtg 2.17.4 configuration reference">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mrtg-reference (1) manual">
  <meta name="twitter:description" content="Mrtg 2.17.4 configuration reference">
  <meta name="twitter:image" content="https://www.carta.tech/images/mrtg-mrtg-reference-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mrtg-reference.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mrtg-reference (1) manual" />
  <meta property="og:description" content="Mrtg 2.17.4 configuration reference" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mrtg-mrtg-reference-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mrtg-reference<small> (1)</small></h1>
        <p class="lead">Mrtg 2.17.4 configuration reference</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mrtg-reference.1.html">
      <span itemprop="name">mrtg-reference: Mrtg 2.17.4 configuration reference</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mrtg/">
      <span itemprop="name">mrtg</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mrtg-reference.1.html">
      <span itemprop="name">mrtg-reference: Mrtg 2.17.4 configuration reference</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">OVERVIEW</h2>
        <div class="sectioncontent">
<p>The runtime behaviour of \s-1MRTG\s0 is governed by a configuration file. Run-of-the-mill configuration files can be generated with <strong>cfgmaker</strong>. (Check cfgmaker). But for more elaborate configurations some hand-tuning is required.</p><p>This document describes all the configuration options understood by the mrtg software.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">
<p>\s-1MRTG\s0 configuration file syntax follows some simple rules:</p><ul>
<li><p>Keywords must start at the beginning of a line.</p></li><li><p>Lines which follow a keyword line which start with a blank are appended to the keyword line</p></li><li><p>Empty Lines are ignored</p></li><li><p>Lines starting with a # sign are comments.</p></li><li><p>You can add other files into the configuration file using <strong>Include:</strong> <em>file</em> Example:</p>
<pre>
 Include: base-options.inc
</pre>
<p>If included files are specified with relative paths, both the current working directory and the directory containing the main config file will be searched for the files.  The current working directory will be searched first. If the included filename contains an asterisk, then this is taken as a wildcard for zero or more characters, and all matching files are included. Thus, you can use this statement to include all files in a specified subdirectory. Example:  Include: servers/*.cfg In this case, you should be very careful that your wildcard pattern does not find a match relative to the current working directory if you mean it to be relative to the main config file directory, since the working directory is checked for a match first (as with a normal Include directive).  Therefore, use of something like '*/*' is discouraged.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GLOBAL KEYWORDS</h2>
        <div class="sectioncontent">
<h3>WorkDir</h3>
<p>WorkDir specifies where the logfiles and the webpages should be created.</p><p>Example:</p><p> WorkDir: /usr/tardis/pub/www/stats/mrtg</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONAL GLOBAL KEYWORDS</h2>
        <div class="sectioncontent">
<h3>HtmlDir</h3>
<p>HtmlDir specifies the directory where the html (or shtml, but we'll get on to those later) lives.</p><p>\s-1NOTE:\s0 Workdir overrides the settings for htmldir, imagedir and logdir.</p><p>Example:</p><p> Htmldir: /www/mrtg/</p>
<h3>ImageDir</h3>
<p>ImageDir specifies the directory where the images live. They should be under the html directory.</p><p>Example:</p><p> Imagedir: /www/mrtg/images</p>
<h3>LogDir</h3>
<p>LogDir specifies the directory where the logs are stored. This need not be under htmldir directive.</p><p>Example:</p><p> Logdir: /www/mrtg/logs</p>
<h3>Forks (\s-1UNIX\s0 only)</h3>
<p>With system that supports fork (\s-1UNIX\s0 for example), mrtg can fork itself into multiple instances while it is acquiring data via snmp.</p><p>For situations with high latency or a great number of devices this will speed things up considerably. It will not make things faster, though, if you query a single switch sitting next door.</p><p>As far as I know \s-1NT\s0 can not fork so this option is not available on \s-1NT\s0.</p><p>Example:</p><p> Forks: 4</p>
<h3>EnableIPv6</h3>
<p>When set to yes, IPv6 support is enabled if the required libraries are present (see the mrtg-ipv6 manpage). When IPv6 is enabled, mrtg can talk to routers using \s-1SNMP\s0 over IPv6 and targets may be specified by their numeric IPv6 addresses as well as by hostname or IPv4 address.</p><p>If IPv6 is enabled and the target is a hostname, mrtg will try to resolve the hostname to an IPv6 address and, if this fails, to an IPv4 address. Note that mrtg will only use IPv4 if you specify an IPv4 address or a hostname with no corresponding IPv6 address; it will not fall back to IPv4 if it simply fails to communicate with the target using IPv6. This is by design.</p><p>Note that many routers do not currently support \s-1SNMP\s0 over IPv6. Use the <em>IPv4Only</em> per target option for these routers.</p><p>IPv6 is disabled by default.</p><p>Example:</p><p> EnableIPv6: Yes</p>
<h3>EnableSnmpV3</h3>
<p>When set to yes, uses the Net::SNMP module instead of the \s-1SNMP_SESSION\s0 module for generating snmp queries.  This allows the use of SNMPv3 if other snmpv3 parameters are set.</p><p>SNMPv3 is disabled by default.</p><p>Example:</p><p> EnableSnmpV3: yes</p>
<h3>Refresh</h3>
<p>How many seconds apart should the browser (Netscape) be instructed to reload the page? If this is not defined, the default is 300 seconds (5 minutes).</p><p>Example:</p><p> Refresh: 600</p>
<h3>Interval</h3>
<p>How often do you call mrtg? The default is 5 minutes. If you call it less often, you should specify it here. This does two things:</p><ul>
<li><p>The generated \s-1HTML\s0 page contains the right information about the calling interval ...</p></li><li><p>A \s-1META\s0 header in the generated \s-1HTML\s0 page will instruct caches about the time-to-live of this page .....</p></li>
</ul><p>In this example, we tell mrtg that we will be calling it every 10 minutes. If you are calling mrtg every 5 minutes, you can leave this line commented out.</p><p>Example:</p><p> Interval: 10</p><p>Note that unless you are using rrdtool you can not set Interval to less than 5 minutes. If you are using rrdtool you can set interval in the format</p><p> Interval: MM[:SS]</p><p>Down to 1 second. Note though, setting the Interval for an rrdtool/mrtg setup will influence the initial creation of the database. If you change the interval later, all existing databases will remain at the resolution they were initially created with. Also note that you must make sure that your mrtg-rrd Web-frontend can deal with this kind of Interval setting.</p>
<h3>MaxAge</h3>
<p>\s-1MRTG\s0 relies heavily on the real time clock of your computer. If the time is set to a wrong value, especially if it is advanced far into the future, this will cause mrtg to expire lots of supposedly old data from the log files.</p><p>To prevent this, you can add a 'reasonability' check by specifying a maximum age for log files. If a file seems to be older, mrtg will not touch it but complain instead, giving you a chance to investigate the cause.</p><p>Example:</p><p> MaxAge: 7200</p><p>The example above will make mrtg refuse to update log files older than 2 hours (7200 seconds).</p>
<h3>WriteExpires</h3>
<p>With this switch mrtg will generate .meta files for \s-1CERN\s0 and Apache servers which contain Expiration tags for the html and gif files. The *.meta files will be created in the same directory as the other files, so you will have to set \*(L"MetaDir .\*(R" and \*(L"MetaFiles on\*(R" in your apache.conf or .htaccess file for this to work</p><p>\s-1NOTE:\s0 If you are running Apache-1.2 or later, you can use the mod_expire to achieve the same effect ... see the file htaccess.txt</p><p>Example:</p><p> WriteExpires: Yes</p>
<h3>NoMib2</h3>
<p>Normally we ask the \s-1SNMP\s0 device for 'sysUptime' and 'sysName' properties. Some do not have these. If you want to avoid getting complaints from mrtg about these missing properties, specify the nomib2 option.</p><p>An example of agents which do not implement base mib2 attributes are Computer Associates - Unicenter \s-1TNG\s0 Agents.  \s-1CA\s0 relies on using the base \s-1OS\s0 \s-1SNMP\s0 agent in addition to its own agents to supplement the management of a system.</p><p>Example:</p><p> NoMib2: Yes</p>
<h3>SingleRequest</h3>
<p>Some \s-1SNMP\s0 implementations can not deal with requests asking for multiple snmp variables in one go. Set this in your cfg file to force mrtg to only ask for one variable per request.</p><p>Examples</p><p> SingleRequest: Yes</p>
<h3>SnmpOptions</h3>
<p>Apart from the per target timeout options, you can also configure the behaviour of the snmpget process on a more profound level. SnmpOptions accepts a hash of options. The following options are currently supported:</p><p> timeout                   =&gt; $default_timeout,  retries                   =&gt; $default_retries,  backoff                   =&gt; $default_backoff,  default_max_repetitions   =&gt; $max_repetitions,  use_16bit_request_ids     =&gt; 1,  lenient_source_port_matching =&gt; 0,  lenient_source_address_matching =&gt; 1</p><p>The values behind the options indicate the current default value. Note that these settings \s-1OVERRIDE\s0 the per target timeout settings.</p><p>A per-target SnmpOptions[] keyword will override the global settings. That keyword is primarily for SNMPv3.</p><p>The 16bit request ids are the only way to query the broken \s-1SNMP\s0 implementation of \s-1SMC\s0 Barricade routers.</p><p>Example:</p><p> SnmpOptions: retries =&gt; 2, only_ip_address_matching =&gt; 0</p><p>Note that \s-1AS/400\s0 snmp seems to be broken in a way which prevents mrtg from working with it unless</p><p> SnmpOptions: lenient_source_port_matching =&gt; 1</p><p>is set.</p>
<h3>IconDir</h3>
<p>If you want to keep the mrtg icons in someplace other than the working (or imagedir) directory, use the <em>IconDir</em> variable for defining the url of the icons directory.</p><p>Example:</p><p> IconDir: /mrtgicons/</p>
<h3>LoadMIBs</h3>
<p>Load the \s-1MIB\s0 file(s) specified and make its OIDs available as symbolic names. For better efficiancy, a cache of MIBs is maintained in the WorkDir.</p><p>Example:</p><p> LoadMIBs: /dept/net/mibs/netapp.mib,/usr/local/lib/ft100m.mib</p>
<h3>Language</h3>
<p>Switch output format to the selected Language (Check the <em>translate</em> directory to see which languages are supported at the moment. In this directory you can also find instructions on how to create new translations).</p><p>Currently the following laguages are supported:</p><p>big5 brazilian bulgarian catalan chinese croatian czech danish dutch eucjp french galician gb gb2312 german greek hungarian icelandic indonesia iso2022jp italian korean lithuanian malay norwegian polish portuguese romanian russian russian1251 serbian slovak slovenian spanish swedish turkish ukrainian</p><p>Example:</p><p> Language: danish</p>
<h3>LogFormat</h3>
<p>Setting LogFormat to 'rrdtool' in your mrtg.cfg file enables rrdtool mode. In rrdtool mode, mrtg relies on <strong>rrdtool</strong> to do its logging. See mrtg-rrd.</p><p>Example:</p><p> LogFormat: rrdtool</p>
<h3>LibAdd</h3>
<p>If you are using rrdtool mode and your <strong>rrdtool</strong> Perl module (RRDs.pm) is not installed in a location where perl can find it on its own, you can use LibAdd to supply an appropriate path.</p><p>Example:</p><p> LibAdd: /usr/local/rrdtool/lib/perl/</p>
<h3>PathAdd</h3>
<p>If the <strong>rrdtool</strong> executable can not be found in the normal \*(C`PATH\*(C', you can use this keyword to add a suitable directory to your path.</p><p>Example:</p><p> PathAdd: /usr/local/rrdtool/bin/</p>
<h3>RRDCached</h3>
<p>If you are running RRDTool 1.4 or later with <strong>rrdcached</strong>, then you can configure \s-1MRTG\s0 to take advantage of this for updates, either by using the \s-1RRDCACHED_ADDRESS\s0 environment variable, or by setting the RRDCached keyword in the configuration file.  Note that, if both are set, the configuration file keyword will take precedence.</p><p>Only \s-1UNIX\s0 domain sockets are fully supported prior to RRDTool v1.5, and you should note that using RRDCached mode will disable all Threshold checking normally done by \s-1MRTG\s0.  Appropriate warning messages will be printed if necessary.</p><p>Examples:</p><p> RRDCached: unix:/var/tmp/rrdcached.sock</p><p> RRDCached: localhost:42217</p>
<h3>RunAsDaemon</h3>
<p>The RunAsDaemon keyword enables daemon mode operation. The purpose of daemon mode is that \s-1MRTG\s0 is launched once and not repeatedly (as it is with cron). This behavior saves computing resourses as loading and parsing of configuration files happens only once on startup, and if the configuration file is modified.</p><p>Using daemon mode \s-1MRTG\s0 itself is responible for timing the measurement intervals. Therfore its important to set the Interval keyword to an apropiate value.</p><p>Note that when using daemon mode \s-1MRTG\s0 should no longer be started from cron as each new process runs forever. Instead \s-1MRTG\s0 should be started from the command prompt or by a system startup script.</p><p>If you want mrtg to run under a particular user and group (it is not recomended to run \s-1MRTG\s0 as root) then you can use the <strong>--user=</strong><em>user_name</em> and <strong>--group=</strong><em>group_name</em> options on the mrtg commandline.</p><p> mrtg --user=mrtg_user --group=mrtg_group mrtg.cfg</p><p>Also note that in daemon mode restarting the process is required in order to activate changes in the config file.</p><p>Under \s-1UNIX\s0, the Daemon switch causes mrtg to fork into background after checking its config file. On Windows \s-1NT\s0 the \s-1MRTG\s0 process will detach from the console, but because the \s-1NT/2000\s0 shell waits for its children you have to use this special start sequence when you launch the program:</p><p> start /b perl mrtg mrtg.cfg</p><p>You may have to add path information equal to what you add when you run mrtg from the commandline.</p><p>Example</p><p> RunAsDaemon: Yes  Interval:    5</p><p>This makes \s-1MRTG\s0 run as a daemon beginning data collection every 5 minutes</p><p>If you are daemontools and still want to run mrtg as a daemon you can additionally specify</p><p> NoDetach:     Yes</p><p>this will make mrtg run but without detaching it from the terminal.</p><p>If the modification date on the configuration file changes during operation, then \s-1MRTG\s0 will re-read the configuration on the next polling cycle.  Note that sub-files which are included from the main configuration do not have their modification times monitored, only the top-level file is so checked.</p>
<h3>ConversionCode</h3>
<p>Some devices may produce non-numeric values that would nevertheless be useful to graph with \s-1MRTG\s0 if those values could be converted to numbers. The ConversionCode keyword specifies the path to a file containing Perl code to perform such conversions. The code in this file must consist of one or more Perl subroutines. Each subroutine must accept a single string argument and return a single numeric value. When RRDtool is in use, a decimal value may be returned. When the name of one of these subroutines is specified in a target definition (see below), \s-1MRTG\s0 calls it twice for that target, once to convert the the input value being monitored and a second time to convert the output value. The subroutine must return an undefined value if the conversion fails. In case of failure, a warning may be posted to the \s-1MRTG\s0 log file using Perl's warn function. \s-1MRTG\s0 imports the subroutines into a separate name space (package MRTGConversion), so the user need not worry about pollution of \s-1MRTG\s0's global name space. \s-1MRTG\s0 automatically prepends this package declaration to the user-supplied code.</p><p>Example: Suppose a particular \s-1OID\s0 returns a character string whose length is proportional to the value to be monitored. To convert this string to a number that can be graphed by \s-1MRTG\s0, create a file arbitrarily named \*(L"MyConversions.pl\*(R" containing the following code:</p><p> # Return the length of the string argument  sub Length2Int {    my $value = shift;    return length( $value );  }</p><p>Then include the following global keyword in the \s-1MRTG\s0 configuration file (assuming that the conversion code file is saved in the mrtg/bin directory along with mrtg itself):</p><p> ConversionCode: MyConversions.pl</p><p>This will cause \s-1MRTG\s0 to include the definition of the subroutine Length2Int in its execution environment. Length2Int can then be invoked on any target by appending \*(L"|Length2Int\*(R" to the target definition as follows:</p><p> Target[myrouter]: 1.3.6.1.4.1.999.1&1.3.6.1.4.1.999.1:public@mydevice|Length2Int</p><p>See \*(L"Extended Host Name Syntax\*(R" below for complete target definition syntax information.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PER TARGET CONFIGURATION</h2>
        <div class="sectioncontent">
<p>Each monitoring target must be identified by a unique name. This name must be appended to each parameter belonging to the same target. The name will also be used for naming the generated webpages, logfiles and images for this target.</p><h3>Target</h3>
<p>With the <em>Target</em> keyword you tell mrtg what it should monitor. The <em>Target</em> keyword takes arguments in a wide range of formats:</p>
<dl class='dl-vertical'>
  <dt>
    Basic
  </dt>
  <dd>
    <p>The most basic format is \*(L"port:community@router\*(R" This will generate a traffic graph for the interface 'port' of the host 'router' (dns name or \s-1IP\s0 address) and it will use the community 'community' (snmp password) for the snmp query. Example:  Target[myrouter]: 2:public@wellfleet-fddi.domain If your community contains a \*(L"@\*(R" or a \*(L" \*(R" these characters must be escaped with a \*(L"&#92;\*(R".  Target[bla]: 2:stu&#92; pi&#92;@d@router</p>
  </dd>
  <dt>
    SNMPv2c
  </dt>
  <dd>
    <p>If you have a fast router you might want to try to poll the ifHC* counters. This feature gets activated by switching to SNMPv2c. Unfortunately not all devices support SNMPv2c yet. If it works, this will prevent your counters from wraping within the 5 minute polling interval, since we now use 64 bit instead of the normal 32 bit. Example:  Target[myrouter]: 2:public@router1:::::2</p>
  </dd>
  <dt>
    SNMPv3
  </dt>
  <dd>
    <p>As an alternative to SNMPv2c, SNMPv3 provides access to the ifHC* counters, along with encryption.  Not all devices support SNMPv3, and you will also need the perl Net::SNMP library in order to use it.  It is recommended that cfgmaker be used to generate configurations involving SNMPv3, as it will check if the Net::SNMP library is loadable, and will switch to SNMPv2c if v3 is unavailable. \s-1SNMP\s0 v3 requires additional authentication parameters, passed using the SnmpOptions[] per-target keyword. Example:</p>
<pre>
  Target[myrouter]: 2:router1:::::3
  SnmpOptions[myrouter]: username=&gt;'user1'
</pre>

  </dd>
  <dt>
    noHC
  </dt>
  <dd>
    <p>Not all routers that support SNMPv2 or SNMPv3 provide the ifHC* counters on every interface.  The noHC[] per-target keyword signals that the low-speed counters ifInOctets and ifOutOctets should be queried instead. cfgmaker will automatically insert this tag if SNMPv2 or SNMPv3 is specified but the ifHC* counters are unavailable. Example:</p>
<pre>
  Target[myrouter]: #Bri0:router1:::::3
  SnmpOptions[myrouter]: username=&gt;'user1'
  noHC[myrouter]: yes
</pre>

  </dd>
  <dt>
    Reversing
  </dt>
  <dd>
    <p>Sometimes you are sitting on the wrong side of the link, and you would like to have mrtg report Incoming traffic as Outgoing and vice versa. This can be achieved by adding the '-' sign in front of the \*(L"Target\*(R" description. It flips the incoming and outgoing traffic rates. Example:  Target[ezci]: -1:public@ezci-ether.domain</p>
  </dd>
  <dt>
    Explicit OIDs
  </dt>
  <dd>
    <p>You can also explicitly define which \s-1OID\s0 to query by using the following syntax 'OID_1&OID_2:community@router' The following example will retrieve error counts for input and output on interface 1.  \s-1MRTG\s0 needs to graph two variables, so you need to specify two \s-1OID\s0's such as temperature and humidity or error input and error output. Example:  Target[myrouter]: 1.3.6.1.2.1.2.2.1.14.1&1.3.6.1.2.1.2.2.1.20.1:public@myrouter</p>
  </dd>
  <dt>
    \s-1MIB\s0 Variables
  </dt>
  <dd>
    <p>\s-1MRTG\s0 knows a number of symbolic \s-1SNMP\s0 variable names. See the file mibhelp.txt for a list of known names. One example are the ifInErrors and ifOutErrors. This means you can specify the above as: Example:  Target[myrouter]: ifInErrors.1&ifOutErrors.1:public@myrouter</p>
  </dd>
  <dt>
    SnmpWalk
  </dt>
  <dd>
    <p>It may be that you want to monitor an snmp object that is only reachable by 'walking'. You can get mrtg to walk by prepending the \s-1OID\s0 with the string <strong>WaLK</strong> or if you want a particular entry from the table returned by the walk you can use <strong>WaLK</strong><em>x</em> where <em>x</em> is a number starting from 0 (!). Example:   Target[myrouter]: WaLKstrangeOid.1&WaLKstrangeOid.2:public@myrouter</p><p>  Target[myrouter]: WaLK3strangeOid.1&WaLK4strangeOid.2:public@myrouter</p>
  </dd>
  <dt>
    SnmpGetNext
  </dt>
  <dd>
    <p>A special case of an snmp object that is only reachable by 'walking' occurs when a single snmpgetnext will return the correct value, but snmpwalk fails. This may occur with snmp V2 or V3, as the snmpgetbulk method is used in these versions. You can get mrtg to use getnext instead of getbulk by prepending the \s-1OID\s0 with the string <strong>GeTNEXT</strong>. Example:   Target[myrouter]: GeTNEXTstrangeOid&GeTNEXTstrangeOid:public@myrouter</p>
  </dd>
  <dt>
    Counted \s-1SNMP\s0 Walk
  </dt>
  <dd>
    <p>In other situations, an snmpwalk is needed to count rows, but the actual data is uninteresting.  For example, counting the number of mac-addresses in a \s-1CAM\s0 table, or the number of simultaneous dialup sessions.  You can get \s-1MRTG\s0 to count the number of instances by prepending the \s-1OID\s0 with the string <strong>CnTWaLK</strong>.  The following will retrieve the number of simultaneous \s-1VOIP\s0 calls on some routers: Example:    Target[myrouter]: CnTWaLK1.3.6.1.4.1.9.10.55.1.1.1.1.3&CnTWaLK1.3.6.1.4.1.9.10.55.1.1.1.1.3:public@myrouter</p>
  </dd>
  <dt>
    Interface by \s-1IP\s0
  </dt>
  <dd>
    <p>Sometimes \s-1SNMP\s0 interface index can change, like when new interfaces are added or removed. This can cause all Target entries in your config file to become offset, causing \s-1MRTG\s0 to graphs wrong instances etc. \s-1MRTG\s0 supports \s-1IP\s0 address instead of ifindex in target definition. Then \s-1MRTG\s0 will query snmp device and try to map \s-1IP\s0 address to the current ifindex. You can use \s-1IP\s0 addresses in every type of target definition by adding \s-1IP\s0 address of the numbered interface after \s-1OID\s0 and separation char '/'. Make sure that the given \s-1IP\s0 address is used on your same target router, especially when graphing two different OIDs and/or interface split by '&' delimiter. You can tell cfgmaker to generate such references with the option <strong>--ifref=ip</strong>. Example:  Target[myrouter]: /1.2.3.4:public@wellfleet-fddi.domain  Target[ezci]: -/1.2.3.4:public@ezci-ether.domain  Target[myrouter]: ifInErrors/1.2.3.4&ifOutErrors/1.2.3.4:public@myrouter</p>
  </dd>
  <dt>
    Interface by Description
  </dt>
  <dd>
    <p>If you can not use \s-1IP\s0 addresses you might want to use the interface names. This works similar to the \s-1IP\s0 address aproach except that the prefix to use is a &#92; instead of a / You can tell cfgmaker to generate such references with the option <strong>--ifref=descr</strong>. Example:  Target[myrouter]: &#92;My-Interface2:public@wellfleet-fddi.domain  Target[ezci]: -&#92;My-Interface2:public@ezci-ether.domain  Target[myrouter]: ifInErrors&#92;My-If2&ifOutErrors&#92;My-If3:public@myrouter If your description contains a \*(L"&\*(R", a \*(L":\*(R", a \*(L"@\*(R" or a \*(L" \*(R" you can include them but you must escape with a backlash:  Target[myrouter]: &#92;fun&#92;:&#92; ney&#92;&ddd:public@hello.router</p>
  </dd>
  <dt>
    Interface by Name
  </dt>
  <dd>
    <p>This is the only sensible way to reference the interfaces of your switches. You can tell cfgmaker to generate such references with the option <strong>--ifref=name</strong>. Example:  Target[myrouter]: #2/11:public@wellfleet-fddi.domain  Target[ezci]: -#2/11:public@ezci-ether.domain  Target[myrouter]: ifInErrors#3/7&ifOutErrors#3/7:public@myrouter If your description contains a \*(L"&\*(R", a \*(L":\*(R", a \*(L"@\*(R" or a \*(L" \*(R" you can include them but you must escape with a backlash:  Target[myrouter]: #&#92;:&#92; fun:public@hello.router Note that the # sign will be interpreted as a comment character if it is the first non white-space character on the line.</p>
  </dd>
  <dt>
    Interface by Ethernet Address
  </dt>
  <dd>
    <p>When the \s-1SNMP\s0 interface index changes, you can key that interface by its 'Physical Address', sometimes called a 'hard address', which is the \s-1SNMP\s0 variable 'ifPhysAddress'.  Internally, \s-1MRTG\s0 matches the Physical Address from the *.cfg file to its current index, and then uses that index for the rest of the session. You can use the Physical Address in every type of target definition by adding the Physical Address after the \s-1OID\s0 and the separation char '!' (analogous to the \s-1IP\s0 address option).  The Physical address is specified as '-' delimited octets, such as \*(L"0a-0-f1-5-23-18\*(R" (omit the double quotes). Note that some routers use the same Hardware Ethernet Address for all of their Interfaces which prevents unique interface identification. Mrtg will notice such problems and alert you. You can tell cfgmaker to generate configuration files with hardware ethernet address references by using the option <strong>--ifref=eth</strong>. Example:  Target[myrouter]: !0a-0b-0c-0d:public@wellfleet-fddi.domain  Target[ezci]: -!0-f-bb-05-71-22:public@ezci-ether.domain  Target[myrouter]: 1.3.6.1.2.1.2.2.1.14!0a-00-10-23-44-51& *BREAK*             1.3.6.1.2.1.2.2.1.14!0a-00-10-23-44-51:public@myrouter  Target[myrouter]: ifInErrors!0a-00-10-23-44-51& *BREAK*             ifOutErrors!0a-00-10-23-44-51:public@myrouter Join the lines at *BREAK* ...</p>
  </dd>
  <dt>
    Interface by Type
  </dt>
  <dd>
    <p>It seems that there are devices that try to defy all monitoring efforts: the interesting interfaces have neither ifName nor a constant ifDescr not to mention a persistent ifIndex. The only way to get a constant mapping is by looking at the interface type, because the interface you are interested in is unique in the device you are looking at ... You can tell cfgmaker to generate such references with the option <strong>--ifref=type</strong>. Example:  Target[myrouter]: %13:public@wellfleet-fddi.domain  Target[ezci]: -%13:public@ezci-ether.domain  Target[myrouter]: ifInErrors%13&ifOutErrors%14:public@myrouter</p>
  </dd>
  <dt>
    Extended positioning of ifIndex
  </dt>
  <dd>
    <p>There are OIDs that contain the interface index at some inner position within the \s-1OID\s0. To use the above mentioned Interface by IP/Description/Name/Type methods in the target definition the keyword 'IndexPOS' can be used to indicate the position of ifIndex. If 'IndexPOS' is not used the ifIndex will be appended at the end of the \s-1OID\s0. Example:  Target[myrouter]: OID.IndexPOS.1/1.2.3.4&OID.IndexPOS.1/1.2.3.4:public@myrouter Replace \s-1OID\s0 by your numeric \s-1OID\s0.</p>
  </dd>
  <dt>
    Extended Host Name Syntax
  </dt>
  <dd>
    <p>In all places where ``community@router'' is accepted, you can add additional parameters for the \s-1SNMP\s0 communication using colon-separated suffixes. You can also append a pipe symbol ( | ) and the name of a numeric conversion subroutine as described under the global keyword \*(L"ConversionCode\*(R" above. The full syntax is as follows:  community@router[:[port][:[timeout][:[retries][:[backoff][:[version]][|name]]]]] where the meaning of each parameter is as follows:</p>
<dl class='dl-vertical'>
  <dt>
    port
  </dt>
  <dd>
    <p>the \s-1UDP\s0 port under which to contact the \s-1SNMP\s0 agent (default: 161) The complete syntax of the port parameter is  remote_port[!local_address[!local_port]] Some machines have additional security features that only allow \s-1SNMP\s0 queries to come from certain \s-1IP\s0 addresses. If the host doing the query has multiple interface, it may be necessary to specify the interface the query should come from. The port parameter allows the specification of the port of the machine being queried. In addition, the \s-1IP\s0 address (or hostname) and port of the machine doing the query may be specified. Examples:  somehost  somehost:161  somehost:161!192.168.2.4!4000 use 192.168.2.4 and port 4000 as source  somehost:!192.168.2.4 use 192.168.2.4 as source  somehost:!!4000 use port 4000 as source</p>
  </dd>
  <dt>
    timeout
  </dt>
  <dd>
    <p>initial timeout for \s-1SNMP\s0 queries, in seconds (default: 2.0)</p>
  </dd>
  <dt>
    retries
  </dt>
  <dd>
    <p>number of times a timed-out request will be retried (default: 5)</p>
  </dd>
  <dt>
    backoff
  </dt>
  <dd>
    <p>factor by which the timeout is multiplied on every retry (default: 1.0).</p>
  </dd>
  <dt>
    version
  </dt>
  <dd>
    <p>for \s-1SNMP\s0 version. If you have a fast router you might want to put a '2' here.  For authenticated or encrypted \s-1SNMP\s0, you can try to put a '3' here.  This will make mrtg try to poll the 64 bit counters and thus prevent excessive counter wrapping. Not all routers support this though. \s-1SNMP\s0 v3 requires additional setup, see SnmpOptions[] for full details. Example:  3:public@router1:::::2</p>
  </dd>
  <dt>
    name
  </dt>
  <dd>
    <p>the name of the subroutine that \s-1MRTG\s0 will call to convert the input and output values to integers. See the complete example under the global keyword \*(L"ConversionCode\*(R" above. Example:  1.3.6.1.4.1.999.1&1.3.6.1.4.1.999.2:public@mydevice:161::::2|Length2Int This would retrieve values from the \s-1OID\s0 1.3.6.1.4.1.999.1 for input and .2 for output on mydevice using \s-1UDP\s0 port 161 and \s-1SNMP\s0 version 2, and would execute the user-defined numeric conversion subroutine Length2Int to convert those values to integers.</p>
  </dd>

</dl>
<p>A value that equals the default value can be omitted.  Trailing colons can be omitted, too. The pipe symbol followed by the name parameter, if present, must come at the end. There must be no spaces around the colons or pipe symbol. Example:   Target[ezci]: 1:public@ezci-ether.domain:9161::4 This would refer to the input/output octet counters for the interface with <em>ifIndex 1</em> on <em>ezci-ether.domain</em>, as known by the \s-1SNMP\s0 agent listening on \s-1UDP\s0 port 9161.  The standard initial timeout (2.0 seconds) is used, but the number of retries is set to four.  The backoff value is the default.</p>
  </dd>
  <dt>
    Numeric IPv6 addresses
  </dt>
  <dd>
    <p>If IPv6 is enabled you may also specify a target using its IPv6 address. To avoid ambiguity with the port number, numeric IPv6 addresses must be placed in square brackets. Example:  Target[IPv6test]: 2:public@[2001:760:4::]:6161::4</p>
  </dd>
  <dt>
    External Monitoring Scripts
  </dt>
  <dd>
    <p>If you want to monitor something which does not provide data via snmp you can use some external program to do the data gathering. The external command must return 4 lines of output:</p>
<dl class='dl-vertical'>
  <dt>
    Line 1
  </dt>
  <dd>
    <p>current state of the first variable, normally 'incoming bytes count'</p>
  </dd>
  <dt>
    Line 2
  </dt>
  <dd>
    <p>current state of the second variable, normally 'outgoing bytes count'</p>
  </dd>
  <dt>
    Line 3
  </dt>
  <dd>
    <p>string (in any human readable format), telling the uptime of the target.</p>
  </dd>
  <dt>
    Line 4
  </dt>
  <dd>
    <p>string, telling the name of the target.</p>
  </dd>

</dl>
<p>Depending on the type of data your script returns you might want to use the 'gauge' or 'absolute' arguments for the <em>Options</em> keyword. Example:  Target[myrouter]: &#96;/usr/local/bin/df2mrtg /dev/dsk/c0t2d0s0&#96; Note the use of the backticks (`), not apostrophes (') around the command. If you want to use a backtick in the command name this can be done but you must escape it with a backslash ... If your script does not have any data to return but does not want mrtg to complain about invalid data, it can return '\s-1UNKNOWN\s0' instead of a number. Note though that only rrdtool is realy equipped to handle unknown data well.</p>
  </dd>
  <dt>
    Multi Target Syntax
  </dt>
  <dd>
    <p>You can also combine several target definitions in a mathematical expression. Any syntactically correct expression that the Perl interpreter can evaluate to will work. An expression could be used, for example, to aggregate both B channels in an \s-1ISDN\s0 connection or to calculate the percentage hard disk utilization of a server from the absolute used space and total capacity. Examples:  Target[myrouter]: 2:public@wellfleetA + 1:public@wellfleetA</p><p> Target[myrouter]: .1.3.6.1.4.1.999.1&.1.3.6.1.4.1.999.2:public@mydevice /      .1.3.6.1.4.1.999.3&.1.3.6.1.4.1.999.4:public@mydevice * 100 Note that whitespace must surround each target definition in the expression. Target definitions themselves must not contain whitespace, except in interface descriptions and interface names, where each whitespace character is escaped by a backslash. \s-1MRTG\s0 automatically rounds the result of the expression to an integer unless RRDTool logging is in use and the gauge option is in effect for the target. Internally \s-1MRTG\s0 uses Perl's Math::BigFloat package to calculate the result of the expression with 40 digits of precision. Even in extreme cases, where, for example, you take the difference of two 64-bit integers, the result of the expression should be accurate.</p>
  </dd>
  <dt>
    \s-1SNMP\s0 Request Optimization
  </dt>
  <dd>
    <p>\s-1MRTG\s0 is designed to economize on its \s-1SNMP\s0 requests. Where a target definition appears more than once in the configuration file, \s-1MRTG\s0 requests the data from the device only once per round of data collection and uses the collected data for each instance of a particular target. Recognition of two target definitions as being identical is based on a simple string match rather than any kind of deeper semantic analysis. Example:  Target[Targ1]: 1:public@CiscoA  Target[Targ2]: 2:public@CiscoA  Target[Targ3]: 1:public@CiscoA + 2:public@CiscoA  Target[Targ4]: 1:public@CISCOA This results in a total of three \s-1SNMP\s0 requests. Data for 1:public@CiscoA and 2:public@CiscoA are requested only once each, and used for Targ1, Targ2, and Targ3. Targ4 causes another \s-1SNMP\s0 request for 1:public@CISCOA, which is not recognized as being identical to 1:public@CiscoA.</p>
  </dd>

</dl>

<h3>MaxBytes</h3>
<p>The maximum value either of the two variables monitored are allowed to reach. For monitoring router traffic this is normally the bytes per second this interface port can carry.</p><p>If a number higher than <em>MaxBytes</em> is returned, it is ignored. Also read the section on <em>AbsMax</em> for further info. The <em>MaxBytes</em> value is also used in calculating the Y range for unscaled graphs (see the section on <em>Unscaled</em>).</p><p>Since most links are rated in bits per second, you need to divide their maximum bandwidth (in bits) by eight (8) in order to get bytes per second. This is very important to make your unscaled graphs display realistic information. T1 = 193000, 56K = 7000, 10 \s-1MB\s0 Ethernet = 1250000, 100 \s-1MB\s0 Ethernet = 12500000. The <em>MaxBytes</em> value will be used by mrtg to decide whether it got a valid response from the router.</p><p>If you need two different MaxBytes values for the two monitored variables, you can use MaxBytes1 and MaxBytes2 instead of MaxBytes.</p><p>Example:</p><p> MaxBytes[myrouter]: 1250000</p>
<h3>Title</h3>
<p>Title for the \s-1HTML\s0 page which gets generated for the graph.</p><p>Example:</p><p> Title[myrouter]: Traffic Analysis for Our Nice Company</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONAL PER TARGET KEYWORDS</h2>
        <div class="sectioncontent">
<h3>PageTop</h3>
<p>Things to add to the top of the generated \s-1HTML\s0 page.  Note that you can have several lines of text as long as the first column is empty.</p><p>Note that the continuation lines will all end up on the same line in the html page. If you want linebreaks in the generated html use the '&#92;n' sequence.</p><p>Example:</p><p> PageTop[myrouter]: &lt;H1&gt;Traffic Analysis for ETZ C95.1&lt;/H1&gt;    Our Campus Backbone runs over an FDDI line&#92;n    with a maximum transfer rate of 12.5 megabytes per    Second.</p>
<h3>RouterUptime</h3>
<p>In cases where you calculate the used bandwidth from several interfaces you normally don't get the router uptime and router name displayed on the web page.</p><p>If these interfaces are on the same router and the uptime and name should be displayed you have to specify its community and address again with the <em>RouterUptime</em> keyword.</p><p>If you want to use a special \s-1OID\s0 for querying the router uptime, use prepend the oid.</p><p>Example:</p><p> Target[kacisco.comp.edu]: 1:public@194.64.66.250 + 2:public@194.64.66.250  RouterUptime[kacisco.comp.edu]: public@194.64.66.250</p><p> RouterUptime[kacisco.comp.edu]: hrSystemUptime.0:public@194.64.66.250</p>
<h3>RouterName</h3>
<p>If the default name of the router is incorrect/uninformative, you can use RouterName to specify a different \s-1OID\s0 on either the same or a different host.</p><p>A practical example: sysName on BayTech \s-1DS72\s0 units always display \*(L"ds72\*(R", no matter what you set the Unit \s-1ID\s0 to be.  Instead, the Unit \s-1ID\s0 is stored at 1.3.6.1.4.1.4779.1.1.3.0, so we can have \s-1MRTG\s0 display this instead of sysName.</p><p>Example:</p><p> RouterName[kacisco.comp.edu]: 1.3.6.1.4.1.4779.1.1.3.0</p><p>A different \s-1OID\s0 on a different host can also be specified:</p><p> RouterName[kacisco.comp.edu]: 1.3.6.1.4.1.4779.1.1.3.0:public@194.64.66.251</p>
<h3>MaxBytes1</h3>
<p>Same as MaxBytes, for variable 1.</p>
<h3>MaxBytes2</h3>
<p>Same as MaxBytes, for variable 2.</p>
<h3>IPv4Only</h3>
<p>Many IPv6 routers do not currently support \s-1SNMP\s0 over IPv6 and must be monitored using IPv4. The IPv4Only option forces mrtg to use IPv4 when communicating with the target, even if IPv6 is enabled. This is useful if the target is a hostname with both IPv4 and IPv6 addresses; without the IPv4Only keyword, monitoring such a router will not work if IPv6 is enabled.</p><p>If set to no (the default), mrtg will use IPv6 unless the target has no IPv6 addresses, in which case it will use IPv4. If set to yes, mrtg will only use IPv4.</p><p>Note that if this option is set to yes and the target does not have an IPv4 address, communication with the target will fail.</p><p>This option has no effect if IPv6 is not enabled.</p><p>Example:</p><p> Target[v4onlyrouter_1]: 1:public@v4onlyrouter  IPv4Only[v4onlyrouter_1]: Yes</p>
<h3>SnmpOptions (V3)</h3>
<p>SNMPv3 requires a fairly rich set of options.  This per-target keyword allows access to the User Security Model of SNMPv3.  Options are listed in the same syntax as a perl hash.</p><p><em>Security Modes</em></p><p>SNMPv3 has three security modes, defined on the device being polled. For example, on Cisco routers the security mode is defined by the snmp-server group global configuration command.</p>
<dl class='dl-vertical'>
  <dt>
    NoAuthNoPriv
  </dt>
  <dd>
    <p>Neither Authentication nor Privacy is defined.  Only the Username option is specified for this mode. Example:  SnmpOptions[myrouter]: username=&gt;&apos;user1&apos;</p>
  </dd>
  <dt>
    AuthNoPriv
  </dt>
  <dd>
    <p>Uses a Username and a password.  The password can be hashed using the snmpkey application, or passed in plain text along with the ContextEngineID Example:  SnmpOptions[myrouter]: username=&gt;&apos;user1&apos;,authpassword=&gt;&apos;example&apos;,    contextengineid=&gt;&apos;80000001110000004000000&apos;</p>
  </dd>
  <dt>
    Priv
  </dt>
  <dd>
    <p>Both Authentication and Privacy is defined.  The default privacy protocol is des. Example:  SnmpOptions[myrouter]: authkey=&gt;'0x1e93ab5a396e2af234c8920e61cfe2028072c0e2',</p>
<pre>
   authprotocol=&gt;'sha',privprotocol=&gt;'des',username=&gt;'user1',
   privkey=&gt;'0x498d74940c5872ed387201d74b9b25e2'
</pre>

  </dd>

</dl>
<p><em>snmp options</em></p><p>The following option keywords are recognized:</p>
<dl class='dl-vertical'>
  <dt>
    username
  </dt>
  <dd>
    <p>The user associated with the User Security Model</p>
  </dd>
  <dt>
    contextname
  </dt>
  <dd>
    <p>An \s-1SNMP\s0 agent can define multiple contexts.  This keyword allows them to be polled.</p>
  </dd>
  <dt>
    contextengineid
  </dt>
  <dd>
    <p>A unique 24-byte string identifying the snmp-agent.</p>
  </dd>
  <dt>
    authpassword
  </dt>
  <dd>
    <p>The plaintext password for a user in either AuthNoPriv or Priv mode.</p>
  </dd>
  <dt>
    authkey
  </dt>
  <dd>
    <p>A md5 or sha hash of the plain-text password, along with the engineid. Use the snmpkey commandline program to generate this hash, or use Net::SNMP::Security::USM in a script.</p>
  </dd>
  <dt>
    authprotocol {sha|md5}
  </dt>
  <dd>
    <p>The hashing algorithm defined on the \s-1SNMP\s0 client.  Defaults to md5.</p>
  </dd>
  <dt>
    privpassword
  </dt>
  <dd>
    <p>A plaintext pre-shared key for encrypting snmp packets in Priv mode.</p>
  </dd>
  <dt>
    privkey
  </dt>
  <dd>
    <p>A hash of the plain-text pre-shared key, along with the engineid. Use the snmpkey commandline program to generate this hash, or use Net::SNMP::Security::USM in a script.</p>
  </dd>
  <dt>
    privprotocol {des|3desede|aescfb128|aescfb192|aescfb256}
  </dt>
  <dd>
    <p>Specifies the encryption method defined on the snmp agent.  The default is des.</p>
  </dd>

</dl>

<h3>PageFoot</h3>
<p>Things to add to the bottom of the generated \s-1HTML\s0 page.  Note that you can have several lines of text as long as the first column is empty.</p><p>Note that the continuation lines will all end up on the same line in the html page. If you want linebreaks in the generated html use the '&#92;n' sequence.</p><p>The material will be added just before the &lt;/BODY&gt; tag:</p><p>Example:</p><p> PageFoot[myrouter]: Contact &lt;A HREF="mailto:peter@x.yz"&gt;Peter&lt;/A&gt;   if you have questions regarding this page</p>
<h3>AddHead</h3>
<p>Use this tag like the <em>PageTop</em> header, but its contents will be added between &lt;/TITLE&gt; and &lt;/HEAD&gt;.</p><p>Example:</p><p> AddHead[myrouter]: &lt;link rev="made" href="mailto:mrtg@blabla.edu"&gt;</p>
<h3>BodyTag</h3>
<p>BodyTag lets you supply your very own &lt;body ...&gt; tag for the generated webpages.</p><p>Example:</p><p> BodyTag[myrouter]: &lt;BODY LEFTMARGIN="1" TOPMARGIN="1"                       BACKGROUND="/stats/images/bg.neo2.gif"&gt;</p>
<h3>AbsMax</h3>
<p>If you are monitoring a link which can handle more traffic than the <em>MaxBytes</em> value. Eg, a line which uses compression or some frame relay link, you can use the <em>AbsMax</em> keyword to give the absolute maximum value ever to be reached. We need to know this in order to sort out unrealistic values returned by the routers. If you do not set <em>AbsMax</em>, rateup will ignore values higher than <em>MaxBytes</em>.</p><p>Example:</p><p> AbsMax[myrouter]: 2500000</p>
<h3>Unscaled</h3>
<p>By default each graph is scaled vertically to make the actual data visible even when it is much lower than <em>MaxBytes</em>.  With the <em>Unscaled</em> variable you can suppress this.  It's argument is a string, containing one letter for each graph you don't want to be scaled: d=day w=week m=month y=year.  There is also a special case to unset the variable completely: n=none. This could be useful in the event you need to override a global configuration. In the example scaling for the yearly and the monthly graph are suppressed.</p><p>Example:</p><p> Unscaled[myrouter]: ym</p>
<h3>WithPeak</h3>
<p>By default the graphs only contain the average values of the monitored variables - normally the transfer rates for incoming and outgoing traffic. The following option instructs mrtg to display the peak 5 minute values in the [w]eekly, [m]onthly and [y]early graph. In the example we define the monthly and the yearly graph to contain peak as well as average values.</p><p>Examples:</p><p> WithPeak[myrouter]: ym</p>
<h3>Suppress</h3>
<p>By default mrtg produces 4 graphs. With this option you can suppress the generation of selected graphs. The option value syntax is analogous to the above two options. In this example we suppress the yearly graph as it is quite empty in the beginning.</p><p>Example:</p><p> Suppress[myrouter]: y</p>
<h3>Extension</h3>
<p>By default, mrtg creates .html files. Use this option to tell mrtg to use a different extension. For example you could set the extension to php3, then you will be able to enclose \s-1PHP\s0 tags into the output (useful for getting a router name out of a database).</p><p>Example:</p><p> Extension[myrouter]: phtml</p>
<h3>Directory</h3>
<p>By default, mrtg puts all the files that it generates for each target (the GIFs, the \s-1HTML\s0 page, the log file, etc.) in <em>WorkDir</em>.</p><p>If the <em>Directory</em> option is specified, the files are instead put into a directory under <em>WorkDir</em> or Log-, Image- and HtmlDir). (For example the <em>Directory</em> option below would cause all the files for a target myrouter to be put into directory /usr/tardis/pub/www/stats/mrtg/myrouter/ .)</p><p>The directory must already exist; mrtg will not create it.</p><p>Example:</p><p> WorkDir: /usr/tardis/pub/www/stats/mrtg  Directory[myrouter]: myrouter</p><p>\s-1NOTE:\s0 the Directory option must always be 'relative' or bad things will happen.</p>
<h3>Clonedirectory</h3>
<p>If the <em>Directory</em> option is specified, the <em>Clonedirectory</em> option will copy all the contents of <em>Directory</em> to the <em>Clonedirectory</em>.</p><p>Example:</p><p> WorkDir: /usr/tardis/pub/www/stats/mrtg  Directory[myrouter]: myrouter  Clonedirectory[myrouter]: myclonedirectory</p><p>Optionally the target name can be changed in the cloning process.</p><p>Example:</p><p> WorkDir: /usr/tardis/pub/www/stats/mrtg  Directory[myrouter]: myrouter  Clonedirectory[myrouter]: myclonedirectory mynewtarget</p><p>\s-1NOTE1:\s0 The clone directory must already exist; mrtg will not create it.</p><p>\s-1NOTE2:\s0 The Clonedirectory option must also always be 'relative' or bad things will happen.</p><p>\s-1NOTE3:\s0 This requires the File::Copy module</p>
<h3>XSize and YSize</h3>
<p>By default mrtgs graphs are 100 by 400 pixels wide (plus some more for the labels. In the example we get almost square graphs ...</p><p>Note: XSize must be between 20 and 600; YSize must be larger than 20</p><p>Example:</p><p> XSize[myrouter]: 300  YSize[myrouter]: 300</p>
<h3>XZoom and YZoom</h3>
<p>If you want your graphs to have larger pixels, you can \*(L"Zoom\*(R" them.</p><p>Example:</p><p> XZoom[myrouter]: 2.0  YZoom[myrouter]: 2.0</p>
<h3>XScale and YScale</h3>
<p>If you want your graphs to be actually scaled use <em>XScale</em> and <em>YScale</em>. (Beware: while this works, the results look ugly (to be frank) so if someone wants to fix this: patches are welcome.</p><p>Example:</p><p> XScale[myrouter]: 1.5  YScale[myrouter]: 1.5</p>
<h3>YTics and YTicsFactor</h3>
<p>If you want to show more than 4 lines per graph, use YTics. If you want to scale the value used for the YLegend of these tics, use YTicsFactor. The default value for YTics is 4 and the default value for YTicsFactor is 1.0 .</p><p>Example:</p><p>Suppose you get values ranging from 0 to 700. You want to plot 7 lines and want to show 0, 1, 2, 3, 4, 5, 6, 7 instead of 0, 100, 200, 300, 400, 500, 600, 700.  You should write then:</p><p>  YTics[myrouter]: 7   YTicsFactor[myrouter]: 0.01</p>
<h3>Factor</h3>
<p>If you want to multiply all numbers shown below the graph with a constant factor, use this directive to define it ..</p><p>Example:</p><p>  Factor[as400]: 4096</p>
<h3>Step</h3>
<p>Change the default step from 5 * 60 seconds to something else (I have not tested this much ...)</p><p>Example:</p><p> Step[myrouter]: 60</p>
<h3>PNGTitle</h3>
<p>When using rateup for graph generation, this will print the given title in the graph it generates.</p><p>Example:</p><p> PNGTitle[myrouter]: WAN Link UK-US</p>
<h3>Options</h3>
<p>The <em>Options</em> Keyword allows you to set some boolean switches:</p>
<dl class='dl-vertical'>
  <dt>
    growright
  </dt>
  <dd>
    <p>The graph grows to the left by default. This option flips the direction of growth causing the current time to be at the right edge of the graph and the history values to the left of it.</p>
  </dd>
  <dt>
    bits
  </dt>
  <dd>
    <p>All the monitored variable values are multiplied by 8 (i.e. shown in bits instead of bytes) ... looks much more impressive :-) It also affects the 'factory default' labeling and units for the given target.</p>
  </dd>
  <dt>
    perminute
  </dt>
  <dd>
    <p>All the monitored variable values are multiplied by 60 (i.e. shown in units per minute instead of units per second) in case of small values more accurate graphs are displayed. It also affects the 'factory default' labeling and units for the given target.</p>
  </dd>
  <dt>
    perhour
  </dt>
  <dd>
    <p>All the monitored variable values are multiplied by 3600 (i.e. shown in units per hour instead of units per second) in case of small values more accurate graphs are displayed. It also affects the 'factory default' labeling and units for the given target.</p>
  </dd>
  <dt>
    noinfo
  </dt>
  <dd>
    <p>Suppress the information about uptime and device name in the generated webpage.</p>
  </dd>
  <dt>
    nopercent
  </dt>
  <dd>
    <p>Don't print usage percentages.</p>
  </dd>
  <dt>
    transparent
  </dt>
  <dd>
    <p>Make the background of the generated gifs transparent.</p>
  </dd>
  <dt>
    integer
  </dt>
  <dd>
    <p>Print summary lines below graph as integers without commas.</p>
  </dd>
  <dt>
    dorelpercent
  </dt>
  <dd>
    <p>The relative percentage of IN-traffic to OUT-traffic is calculated and displayed in the graph as an additional line. Note: Only a fixed scale is available (from 0 to 100%). Therefore if IN-traffic is greater than OUT-traffic then 100% is displayed. If you suspect that your IN-traffic is not always less than or equal to your OUT-traffic you are urged to not use this options. Note: If you use this option in combination with the <em>Colours</em> options, a fifth colour-name colour-value pair is required there.</p>
  </dd>
  <dt>
    avgpeak
  </dt>
  <dd>
    <p>There are some ISPs who use the average Peak values to bill their customers. Using this option \s-1MRTG\s0 displays these values for each graph. The value is built by averaging the max 5 minute traffic average for each 'step' shown in the graph. For the Weekly graph this means that it builds the average of all 2 hour intervals 5 minute peak values. (Confused? Thought so!)</p>
  </dd>
  <dt>
    gauge
  </dt>
  <dd>
    <p>Treat the values gathered from target as 'current status' measurements and not as ever incrementing counters. This would be useful to monitor things like disk space, processor load, temperature, and the like ... In the absence of 'gauge' or 'absolute' options, \s-1MRTG\s0 treats variables as a counters and calculates the difference between the current and the previous value and divides that by the elapsed time between the last two readings to get the value to be plotted.</p>
  </dd>
  <dt>
    absolute
  </dt>
  <dd>
    <p>This is for counter type data sources which reset their value when they are read. This means that rateup does not have to build the difference between the current and the last value read from the data source. The value obtained is still divided by the elapsed time between the current and the last reading, which makes it different from the 'gauge' option. Useful for external data gatherers.</p>
  </dd>
  <dt>
    derive
  </dt>
  <dd>
    <p>If you are using rrdtool as logger/grapher you can use a third type of data source. Derive is like counter, except that it is not required to go \s-1UP\s0 all the time. It is useful for situations where the change of some value should be graphed.</p>
  </dd>
  <dt>
    unknaszero
  </dt>
  <dd>
    <p>Log unknown data as zero instead of the default behaviour of repeating the last value seen. Be careful with this, often a flat line in the graph is much more obvious than a line at 0.</p>
  </dd>
  <dt>
    withzeroes
  </dt>
  <dd>
    <p>Normally we ignore all values which are zero when calculating the average transfer rate on a line. If this is not desirable use this option.</p>
  </dd>
  <dt>
    noborder
  </dt>
  <dd>
    <p>If you are using rateup to log data, \s-1MRTG\s0 will create the graph images. Normally these images have a shaded border around them. If you do not want the border to be drawn, enable this option. This option has no effect if you are not using rateup.</p>
  </dd>
  <dt>
    noarrow
  </dt>
  <dd>
    <p>As with the option above, this effects rateup graph generation only. Normally rateup will generate graphs with a small arrow showing the direction of the data. If you do not want this arrow to be drawn, enable this option. This option has no effect if you are not using rateup.</p>
  </dd>
  <dt>
    noi
  </dt>
  <dd>
    <p>When using rateup for graph generation, you can use this option to stop rateup drawing a graph for the 'I' or first variable. This also removes entries for this variable in the \s-1HTML\s0 page \s-1MRTG\s0 generates, and will remove the peaks for this variable if they are enabled. This allows you to hide this data, or can be very useful if you are only graphing one line of data rather than two. This option is not destructive - any data received for the the variable continued to be logged, it just isn't shown.</p>
  </dd>
  <dt>
    noo
  </dt>
  <dd>
    <p>Same as above, except relating to the 'O' or second variable.</p>
  </dd>
  <dt>
    nobanner
  </dt>
  <dd>
    <p>When using rateup for graph generation, this option disables \s-1MRTG\s0 adding the \s-1MRTG\s0 banner to the \s-1HTML\s0 pages it generates.</p>
  </dd>
  <dt>
    nolegend
  </dt>
  <dd>
    <p>When using rateup for graph generation, this option will stop \s-1MRTG\s0 from creating a legend at the bottom of the \s-1HTML\s0 pages it generates.</p>
  </dd>
  <dt>
    printrouter
  </dt>
  <dd>
    <p>When using rateup for graph generation, this option will print the router name in the graph it generates.  This option is overridden by the value of PNGTitle if one is given</p>
  </dd>
  <dt>
    pngdate
  </dt>
  <dd>
    <p>When using rateup for graph generation, this option will print a timestamp in the graph it generates, including a timezone if one is specified by the 'Timezone' parameter. This is aequivalent to setting TimeStrPost[x]: \s-1RU\s0</p>
  </dd>
  <dt>
    logscale
  </dt>
  <dd>
    <p>The <strong>logscale</strong> option causes rateup to display the data with the Y axis scaled logarithmically.  Doing so allows the normal traffic to occupy the majority of the vertical range, while still showing any spikes at their full height. <strong>logscale</strong> displays all the available data and will always produce well-behaved graphs.  People often consider a logarithmically scaled graph counterintuitive, however, and thus hard to interpret.</p>
  </dd>
  <dt>
    expscale
  </dt>
  <dd>
    <p>The <strong>expscale</strong> option causes rateup to display the data with the Y axis scaled exponentially.  Doing so emphasizes small changes at the top of the scale; this can be useful when graphing values that fluctuate by a small amount near the top of the scale, such as line voltage. <strong>expscale</strong> is essentially the inverse of <strong>logscale</strong>.</p>
  </dd>
  <dt>
    secondmean
  </dt>
  <dd>
    <p>The <strong>secondmean</strong> option sets the maximum value on the graph to the mean of the data greater than the mean of all data.  This produces a graph that focuses more on the typical data, while clipping large peaks. Using <strong>secondmean</strong> will give a more intutive linearly scaled graph, but can result in a uselessly high or low scale in some rare situations (specifically, when the data includes a large portion of values far from the actual mean) If a target includes both <strong>logscale</strong> and <strong>secondmean</strong> in the options, the <strong>secondmean</strong> takes precedence.</p>
  </dd>

</dl>
<p>Example:</p><p> Options[myrouter]: growright, bits</p>
<h3>kilo</h3>
<p>Use this option to change the multiplier value for building prefixes. Defaultvalue is 1000. This tag is for the special case that 1kB = 1024B, 1MB = 1024kB and so far.</p><p>Example:</p><p> kilo[myrouter]: 1024</p>
<h3>kMG</h3>
<p>Change the default multiplier prefixes (,k,M,G,T,P). In the tag <em>ShortLegend</em> define only the basic units. Format: Comma separated list of prefixed. Two consecutive commas or a comma at start or end of the line gives no prefix on this item. If you do not want prefixes, just put two consecutive commas. If you want to skip a magnitude select '-' as value.</p><p>Example: velocity in nm/s (nanometers per second) displayed in nm/h.</p><p> ShortLegend[myrouter]: m/h  kMG[myrouter]: n,u,m,,k,M,G,T,P  options[myrouter]: perhour</p>
<h3>Colours</h3>
<p>The <em>Colours</em> tag allows you to override the default colour scheme.  Note: All 4 of the required colours must be specified here. The colour name ('Colourx' below) is the legend name displayed, while the \s-1RGB\s0 value is the real colour used for the display, both on the graph and in the html doc.</p><p>Format is: Col1#RRGGBB,Col2#RRGGBB,Col3#RRGGBB,Col4#RRGGBB</p><p>Important: If you use the <em>dorelpercent</em> options tag a fifth colour name colour value pair is required: Col1#RRGGBB,Col2#RRGGBB,Col3#RRGGBB,Col4#RRGGBB,Col5#RRGGBB</p>
<dl class='dl-vertical'>
  <dt>
    Colour1
  </dt>
  <dd>
    <p>First variable (normally Input) on default graph.</p>
  </dd>
  <dt>
    Colour2
  </dt>
  <dd>
    <p>Second variable (normally Output) on default graph.</p>
  </dd>
  <dt>
    Colour3
  </dt>
  <dd>
    <p>Max first variable (input).</p>
  </dd>
  <dt>
    Colour4
  </dt>
  <dd>
    <p>Max second variable (output).</p>
  </dd>
  <dt>
    \s-1RRGGBB\s0
  </dt>
  <dd>
    <p>2 digit hex values for Red, Green and Blue.</p>
  </dd>

</dl>
<p>Example:</p><p> Colours[myrouter]: GREEN#00eb0c,BLUE#1000ff,DARK GREEN#006600,VIOLET#ff00ff</p>
<h3>Background</h3>
<p>With the <em>Background</em> tag you can configure the background colour of the generated \s-1HTML\s0 page.</p><p>Example:</p><p> Background[myrouter]: #a0a0a0a</p>
<h3>YLegend, ShortLegend, Legend[1234]</h3>
<p>The following keywords allow you to override the text displayed for the various legends of the graph and in the \s-1HTML\s0 document:</p>
<dl class='dl-vertical'>
  <dt>
    YLegend
  </dt>
  <dd>
    <p>The Y-axis label of the graph. Note that a text which is too long to fit in the graph will be silently ignored.</p>
  </dd>
  <dt>
    ShortLegend
  </dt>
  <dd>
    <p>The units string (default 'b/s') used for Max, Average and Current</p>
  </dd>
  <dt>
    Legend[1234IO]
  </dt>
  <dd>
    <p>The strings for the colour legend.</p>
  </dd>

</dl>
<p>Example:</p><p>  YLegend[myrouter]: Bits per Second   ShortLegend[myrouter]: b/s   Legend1[myrouter]: Incoming Traffic in Bits per Second   Legend2[myrouter]: Outgoing Traffic in Bits per Second   Legend3[myrouter]: Maximal 5 Minute Incoming Traffic   Legend4[myrouter]: Maximal 5 Minute Outgoing Traffic   LegendI[myrouter]: &nbsp;In:   LegendO[myrouter]: &nbsp;Out:</p><p>Note, if <em>LegendI</em> or <em>LegendO</em> are set to an empty string with</p><p> LegendO[myrouter]:</p><p>The corresponding line below the graph will not be printed at all.</p>
<h3>Timezone</h3>
<p>If you live in an international world, you might want to generate the graphs in different timezones. This is set in the \s-1TZ\s0 variable. Under certain operating systems like Solaris, this will provoke the localtime call to give the time in the selected timezone.</p><p>Example:</p><p> Timezone[myrouter]: Japan</p><p>The Timezone is the standard timezone of your system, ie Japan, Hongkong, \s-1GMT\s0, \s-1GMT+1\s0 etc etc.</p>
<h3>Weekformat</h3>
<p>By default, mrtg (actually rateup) uses the <em>strftime</em>\|(3) '%V' option to format week numbers in the monthly graphs.  The exact semantics of this format option vary between systems.  If you find that the week numbers are wrong, and your system's <em>strftime</em>\|(3) routine supports it, you can try another format option.  The \s-1POSIX\s0 '%V' option correspond to the widely used \s-1ISO\s0 8601 week numbering standard.  The week format character should be specified as a single letter; either W, V, or U.</p><p>The \s-1UNIX\s0 version of rateup uses the libc implementation of strftime. On Windows, the native strftime implementation does not know about %V. So there we use a different implementation of strftime that does support %V.</p><p>Example:</p><p> Weekformat[myrouter]: W</p>
<h3>RRDRowCount</h3>
<p>This affects the creation of new rrd files. By default rrds are created to hold about 1 day's worth of high resolution data. (plus 1 week of 30 minute data, 2 months of 2 hour data and 2 years of 1 day data).  With this Keyword you can change the number of base interval entries configured for new rrds as they get created. Note that you must take the interval time into account.</p><p>Example:</p><p> RRDRowCount[myrouter]: 1600</p>
<h3>RRDRowCount30m</h3>
<p>As per RRDRowCount, but for the \s-1RRA\s0's -typically- used for 30 minute data. Even so, you must still take the base interval into account.  Leaving out this keyword will force the old default of 800 rows.</p><p>Example:</p><p> RRDRowCount30m[myrouter]: 800</p>
<h3>RRDRowCount2h</h3>
<p>As per RRDRowCount, but for the \s-1RRA\s0's -typically- used for 2 hour data. Even so, you must still take the base interval into account.  Leaving out this keyword will force the old default of 800 rows.</p><p>Example:</p><p> RRDRowCount2h[myrouter]: 400</p>
<h3>RRDRowCount1d</h3>
<p>As per RRDRowCount, but for the \s-1RRA\s0's -typically- used for 1 day data. Even so, you must still take the base interval into account.  Leaving out this keyword will force the old default of 800 rows.</p><p>Example:</p><p> RRDRowCount1d[myrouter]: 200</p>
<h3>RRDHWRRAs</h3>
<p>Normally the RRDs created by \s-1MRTG\s0 will just contain the information gathered directly from the respective target. With this option you can tap into rrdtools advanced aberrant behaviour detection module based on Holt-Winters forecasting. The RRDHWRRAs property specifies the Holt-Winters RRAs as described in the rrdcreate manual page.</p><p>Note, this setting will only affect newly created RRDs (targets).</p><p>Example:</p><p> RRDHWRRAs[myrouter]: RRA:HWPREDICT:1440:0.1:0.0035:288</p>
<h3>TimeStrPos</h3>
<p>This defines placement of the timestamp string on the image. Possible values are \s-1RU\s0, \s-1LU\s0, \s-1RL\s0, \s-1LL\s0 (which stand, respectively, for RightUpper, LeftUpper, RightLower and LeftLower corner) and \s-1NO\s0 (for no timestamp). By default, no timestamp is placed on the image.</p><p>Example:</p><p> TimeStrPos[myrouter]: RU</p>
<h3>TimeStrFmt</h3>
<p>Using this keyword you may specify format of the timestamp to be placed on the image (if enabled by the TimeStrPos keyword). Specified string will be used by the <em>strftime()</em> function - see <em>strftime</em>\|(3) documentation for conversion specifiers available on your system. Default format: %Y-%m-%d %H:%M</p><p>Example:</p><p> TimeStrFmt[myrouter]: %H:%M:%S</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THRESHOLD CHECKING</h2>
        <div class="sectioncontent">
<p>Through its threshold checking functionality mrtg is able to detect threshold problems for the various targets and can call external scripts to handle those problems (e.g. send email or a page to an administrator).</p><p>Threshold checking is configured through the following parameters:</p><h3>ThreshDir (\s-1GLOBAL\s0)</h3>
<p>By defining ThreshDir to point to a writable directory, \s-1MRTG\s0 will only alert you when a threshold boundary has been crossed.</p><p>Example:</p><p> ThreshDir: /var/mrtg/thresh</p>
<h3>ThreshHyst (\s-1GLOBAL\s0)</h3>
<p>If a threshold is broken, and you have a threshdir defined, then mrtg will send mail once the threshold becomes 'unborken' to avoid situations where broken and unbroken messages get sent in close succession, we only send an unbroken message once the curent value is 0.1 (10%) away from the threshold. using the ThreshHyst config variable you can customize this value.</p><p>Example for 5%:</p><p> ThreshHyst: 0.05</p>
<h3>ThreshMailServer (\s-1GLOBAL\s0)</h3>
<p>Adderss of an \s-1SMTP\s0 server which is going to accept mail about Thresholds being broken and unbroken.</p>
<h3>ThreshMailSender (\s-1GLOBAL\s0)</h3>
<p>What is the sender address of the threshold mail.</p><p>Example:</p><p> ThreshMailSender: mrtg@example.com</p>
<h3>ThreshMailAddress (\s-1PER\s0 \s-1TARGET\s0)</h3>
<p>Email address for Threshold related Mails. This will only work if a mailserver has been configured.</p><p>Example:</p><p> ThreshMailAddress[_]: admin@example.com  ThreshMailAddress[router]:</p><p>This would bring threshold releaed mail to all but the target called 'router'.</p>
<h3>ThreshMinI  (\s-1PER\s0 \s-1TARGET\s0)</h3>
<p>This is the minimum acceptable value for the Input (first) parameter.  If the parameter falls below this value, the program specified in ThreshProgI will be run and a mail will be sent to the ThreshMailAddress if specified. If the value ends in '%' then the threshold is defined relative to MaxBytes.</p>
<h3>ThreshMaxI (\s-1PER\s0 \s-1TARGET\s0)</h3>
<p>Works the same as TheshMinI but it acts when the value is higher than ThreshMaxI.</p>
<h3>ThreshDesc (\s-1PER\s0 \s-1TARGET\s0)</h3>
<p>Its value will be assigned to the environment variable \s-1THRESH_DESC\s0 before any of the programs mentioned below are called. The programs can use the value of this variable to produce more user-friendly output.</p>
<h3>ThreshProgI  (\s-1PER\s0 \s-1TARGET\s0)</h3>
<p>This defines a program to be run if ThreshMinI or ThreshMaxI is broken. \s-1MRTG\s0 passes 3 arguments: the $router variable, the threshold value broken, and the current parameter value.</p>
<h3>ThreshProgOKI  (\s-1PER\s0 \s-1TARGET\s0)</h3>
<p>This defines a program to be run if the parameter is currently \s-1OK\s0 (based on ThreshMinI and ThreshMaxI), but wasn't \s-1OK\s0 on the previous running \*(-- based on the files found in ThreshDir. \s-1MRTG\s0 passes 3 arguments: the $router variable the unbroken threshold value, and the current parameter value.</p>
<h3>ThreshMinO, ThreshMaxO, ThreshProgO, and ThreshProgOKO</h3>
<p>These work the same as their *I counterparts, except on the Output (second) parameter.</p>
<h3>SetEnv</h3>
<p>When calling threshold scripts from within your cfg file you might want to pass some data on to the script. This can be done with the SetEnv configuration option which takes a series of environment variable assignments. Note that the quotes are mandatory. This does not work for external scripts. It is not possible to set environment variables per target.</p><p>Example:</p><p> SetEnv[myrouter]:  EMAIL="contact_email@someplace.net"                     HOST="www.some_server.net"</p>
<h3>\s-1HW\s0 Failure Bassed Threshold Checking</h3>
<p>When using rrd based logging with \s-1HW\s0 RRAs defined. You can use the confidence bounds violations stored in the \s-1FAILURES\s0 \s-1RRA\s0 for threshold based alerts.</p><p>There the all target specific threshold variables have a Hold-Winters counterpart:</p><p> ThreshMailAddress -&gt; HWThreshMailAddress  ThreshMinI        -&gt; HWThreshMinI  ...</p><p>The global variables for threshold checking are shared except for the</p><p> ThreshHyst        -&gt; HWThreshHyst</p><p>And HWThreshDesc sets the \s-1HWTHRESH_DESC\s0 variable.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PER TARGET DEFAULT VALUES</h2>
        <div class="sectioncontent">
<h3>Pre- and Postfix</h3>
<p>To save yourself some typing you can define a target called '^'. The text of every Keyword you define for this target will be \s-1PREPENDED\s0 to the corresponding Keyword of all the targets defined below this line. The same goes for a Target called '$' but its text will be \s-1APPENDED\s0.</p><p>Note that a space is inserted between the prepended text and the Keyword value, as well as between the Keyword value and the appended text. This works well for text-valued Keywords, but is not very useful for other Keywords. See the \*(L"default\*(R" target description below.</p><p>The example will make mrtg use a common header and a common contact person in all the pages generated from targets defined later in this file.</p><p>Example:</p><p> PageTop[^]: &lt;H1&gt;NoWhere Unis Traffic Stats&lt;/H1&gt;&lt;HR&gt;  PageTop[$]: Contact Peter Norton if you have any questions&lt;HR&gt;</p><p>To remove the prepend/append value, specify an empty value, e.g.:</p><p> PageTop[^]:  PageTop[$]:</p>
<h3>NoSpaceChar</h3>
<p>With \s-1PREPEND\s0 and \s-1APPEND\s0 (see below) there is normally a space inserted between the local value and the \s-1PRE-\s0 or \s-1APPEND\s0 value. Sometimes this is not desirable. You can use the global option <em>NoSpaceChar</em> to define a character which can be mentioned at the end of a $ or ^ definition in order to supress the space.</p><p>Example:</p><p>  NoSpaceChar: ~   Target[^]: 1.3.6.1.4.1.482.50.2.4.20.0&1.3.6.1.4.1.482.50.2.4.21.0:get@~   Target[a]: a.tolna.net   Target[b]: b.tolna.net   Target[c]: c.tolna.net   Target[d]: d.tolna.net</p>
<h3>Default Values</h3>
<p>The target name '_' specifies a default value for that Keyword. In the absence of explicit Keyword value, the prepended and the appended keyword value, the default value will be used.</p><p>Example:</p><p> YSize[_]: 150  Options[_]: growright,bits,nopercent  WithPeak[_]: ymw  Suppress[_]: y  MaxBytes[_]: 1250000</p><p>To remove the default value and return to the 'factory default', specify an empty value, e.g.:</p><p> YLegend[_]:</p><p>There can be several instances of setting the default/prepend/append values in the configuration file. The later setting replaces the previous one for the rest of the configuration file. The default/prepend/append values used for a given keyword/target pair are the ones that were in effect at the point in the configuration file where the target was mentioned for the first time.</p><p>Example:</p><p> MaxBytes[_]: 1250000  Target[myrouter.somplace.edu.2]: 2:public@myrouter.somplace.edu  MaxBytes[_]: 8000  Title[myrouter.somplace.edu.2]: Traffic Analysis for myrouter.somplace.edu IF 2</p><p>The default <em>MaxBytes</em> for the target myrouter.someplace.edu.2 in the above example will be 1250000, which was in effect where the target name myrouter.someplace.edu.2 first appeared in the config file.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND LINE OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>--user</strong> <em>username</em>  and <strong>--group</strong> <em>groupname</em>
  </dt>
  <dd>
    <p>Run as the given user and/or group. (Unix Only)</p>
  </dd>
  <dt>
    <strong>--lock-file</strong> <em>filename</em>
  </dt>
  <dd>
    <p>Use an alternate lock-file (the default is to use the configuration-file appended with \*(C`_l\*(C').</p>
  </dd>
  <dt>
    <strong>--confcache-file</strong> <em>filename</em>
  </dt>
  <dd>
    <p>Use an alternate confcache-file (the default is to use the configuration-file appended with \*(C`.ok\*(C')</p>
  </dd>
  <dt>
    <strong>--logging</strong> <em>filename</em>|<strong>eventlog</strong>
  </dt>
  <dd>
    <p>If this is set to writable filename, all output from mrtg (warnings, debug messages, errors) will go to <em>filename</em>. If you are running on Win32 you can specify <strong>eventlog</strong> instead of a filename which will send all error to the windows event log. <strong>\s-1NOTE:\s0</strong> Note, there is no Message \s-1DLL\s0 for mrtg included with mrtg. This has the side effect that the windows event logger will display a nice message with every entry in the event log, complaing about the fact that mrtg has no message dll. If you go to the mrtg contrib download area (on the website) you will find the mrtg-message-dll.zip which does contain such a thing.</p>
  </dd>
  <dt>
    <strong>--daemon</strong>
  </dt>
  <dd>
    <p>Put \s-1MRTG\s0 into the background, running as a daemon. This works the same way as the config file option, but the switch is required for proper \s-1FHS\s0 operation (because /var/run is writable only by root)</p>
  </dd>
  <dt>
    <strong>--fhs</strong>
  </dt>
  <dd>
    <p>Configure all mrtg paths to conform to the \s-1FHS\s0 specification; http://www.pathname.com/fhs/</p>
  </dd>
  <dt>
    <strong>--check</strong>
  </dt>
  <dd>
    <p>Only check the cfg file for errors. Do not do anything.</p>
  </dd>
  <dt>
    <strong>--pid-file=s</strong>
  </dt>
  <dd>
    <p>Define the name and path of the pid file for mrtg running as a daemon</p>
  </dd>
  <dt>
    <strong>--debug=s</strong>
  </dt>
  <dd>
    <p>Enable debug options. The argument of the debug option is a comma separated list of debug values:  cfg  - watch the config file reading  dir  - directory mangeling  base - basic program flow  tarp - target parser  snpo - snmp polling  coca - confcache operations  fork - forking view  time - some timing info  log  - logging of data via rateup or rrdtool  eval - print eval strings before evaluting them  prof - add hires timing info the rrd calls Example:  --debug="cfg,snpo"</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT CODES</h2>
        <div class="sectioncontent">
<p>An exit code of 0 indicates that all targets were successful.  Generally speaking, most codes greater than 0 indicate that there was an unrecoverable problem.  One exception to this is code 91, which indicates that at least one of the targets was successful.  A partial listing of the codes follows:</p><p>  0: All targets sucessful</p><p>  2: Config error (can&apos;t read, fatal error in config, etc)  17: Another MRTG process is processing config</p><p> 91: At least one target sucessful  92: No targets were sucessful</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<h3>Minimal mrtg.cfg</h3>
<p> WorkDir: /usr/tardis/pub/www/stats/mrtg  Target[r1]: 2:public@myrouter.somplace.edu  MaxBytes[r1]: 8000  Title[r1]: Traffic Analysis ISDN  PageTop[r1]: &lt;H1&gt;Stats for our ISDN Line&lt;/H1&gt;</p>
<h3>Cfg for several Routers.</h3>
<p> WorkDir: /usr/tardis/pub/www/stats/mrtg  Title[^]: Traffic Analysis for  PageTop[^]: &lt;H1&gt;Stats for  PageTop[$]: Contact The Chief if you notice anybody&lt;HR&gt;  MaxBytes[_]: 8000  Options[_]: growright</p><p> Title[isdn]: our ISDN Line  PageTop[isdn]: our ISDN Line&lt;/H1&gt;  Target[isdn]: 2:public@router.somplace.edu</p><p> Title[backb]: our Campus Backbone  PageTop[backb]: our Campus Backbone&lt;/H1&gt;  Target[backb]: 1:public@router.somplace.edu  MaxBytes[backb]: 1250000</p><p> # the following line removes the default prepend value  # defined above</p><p> Title[^]:</p><p> Title[isdn2]: Traffic for the Backup ISDN Line  PageTop[isdn2]: our ISDN Line&lt;/H1&gt;  Target[isdn2]: 3:public@router.somplace.edu</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Tobias Oetiker &lt;tobi@oetiker.ch&gt; and many contributors</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mrtg-ping-probe.1.html"><span aria-hidden="true">&larr;</span> mrtg-ping-probe.1: Ping probe module for multi router traffic grapher</a></li>
   <li class="next"><a href="mrtg-rrd.1.html">mrtg-rrd.1: How to use rrdtool with mrtg <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
