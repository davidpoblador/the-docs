<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mysqldiff: Identify differences among database objects</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Identify differences among database objects">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mysqldiff (1) manual">
  <meta name="twitter:description" content="Identify differences among database objects">
  <meta name="twitter:image" content="https://www.carta.tech/images/mysql-utilities-mysqldiff-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mysqldiff.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mysqldiff (1) manual" />
  <meta property="og:description" content="Identify differences among database objects" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mysql-utilities-mysqldiff-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mysqldiff<small> (1)</small></h1>
        <p class="lead">Identify differences among database objects</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mysqldiff.1.html">
      <span itemprop="name">mysqldiff: Identify differences among database objects</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mysql-utilities/">
      <span itemprop="name">mysql-utilities</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mysqldiff.1.html">
      <span itemprop="name">mysqldiff: Identify differences among database objects</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mysqldiff [</strong><strong></strong><em>options</em><strong>] {</strong><strong></strong><em>db1</em><strong>[</strong><strong></strong><em>:db1</em><strong>] | {</strong><strong></strong><em>db1.obj1</em><strong>[</strong><strong></strong><em>:db2.obj2</em><strong>]} ...</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This utility reads the definitions of objects and compares them using a diff-like method to determine whether they are the same. The utility displays the differences for objects that are not the same.</p><p>Use the notation db1:db2 to name two databases to compare, or, alternatively just db1 to compare two databases with the same name. The latter case is a convenience notation for comparing same-named databases on different servers.</p><p>The comparison may be run against two databases of different names on a single server by specifying only the <strong>--server1</strong> option. The user can also connect to another server by specifying the <strong>--server2</strong> option. In this case, db1 is taken from server1 and db2 from server2.</p><p>When a database pair is specified, all objects in one database are compared to the corresponding objects in the other. Any objects not appearing in either database produce an error.</p><p>To compare a specific pair of objects, add an object name to each database name in <em>db.obj</em> format. For example, use db1.obj1:db2.obj2 to compare two named objects, or db1.obj1 to compare an object with the same name in databases with the same name. It is not legal to mix a database name with an object name. For example, db1.obj1:db2 and db1:db2.obj2 are illegal.</p><p>The comparison may be run against a single server for comparing two databases of different names on the same server by specifying only the <strong>--server1</strong> option. Alternatively, you can also connect to another server by specifying the <strong>--server2</strong> option. In this case, the first object to compare is taken from server1 and the second from server2.</p><p>By default, the utility generates object differences as a difference report. However, you can generate a transformation report containing SQL statements for transforming the objects for conformity instead. Use the &apos;sql&apos; value for the <strong>--difftype</strong> option to produce a listing that contains the appropriate ALTER commands to conform the object definitions for the object pairs specified. If a transformation cannot be formed, the utility reports the diff of the object along with a warning statement. See important limitations in the NOTES section.</p><p>To specify how to display diff-style output, use one of the following values with the <strong>--difftype</strong> option:</p><p><strong>unified</strong> (default)</p><p>Display unified format output.</p><p><strong>context</strong></p><p>Display context format output.</p><p><strong>differ</strong></p><p>Display differ-style format output.</p><p><strong>sql</strong></p><p>Display SQL transformation statement output.</p><p>The <strong>--changes-for</strong> option controls the direction of the difference (by specifying the object to be transformed) in either the difference report (default) or the transformation report (designated with the <strong>--difftype=sql</strong> option). Consider the following command:</p>
<pre>
mysqldiff --server1=root@host1 --server2=root@host2 --difftype=sql &#92;
  db1.table1:dbx.table3
</pre>
<p>The leftmost database (db1) exists on the server designated by the <strong>--server1</strong> option (host1). The rightmost database (dbx) exists on the server designated by the <strong>--server2</strong> option (host2).</p><p><strong>--changes-for=server1</strong>: Produce output that shows how to make the definitions of objects on server1 like the definitions of the corresponding objects on server2.</p><p><strong>--changes-for=server2</strong>: Produce output that shows how to make the definitions of objects on server2 like the definitions of the corresponding objects on server1.</p><p>The default direction is server1.</p><p>For <strong>sql</strong> difference format, you can also see the reverse transformation by specifying the <strong>--show-reverse</strong> option.</p><p>The utility stops on the first occurrence of missing objects or when an object does not match. To override this behavior, specify the <strong>--force</strong> option to cause the utility to attempt to compare all objects listed as arguments.</p>
<pre>
      OPTIONS
</pre>
<p><strong>mysqldiff</strong> accepts the following command-line options:</p><p>--help</p><p>Display a help message and exit.</p><p>--changes-for=&lt;direction&gt;</p><p>Specify the server to show transformations to match the other server. For example, to see the transformation for transforming object definitions on server1 to match the corresponding definitions on server2, use <strong>--changes-for=server1</strong>. Permitted values are <strong>server1</strong> and <strong>server2</strong>. The default is <strong>server1</strong>.</p><p>--difftype=&lt;difftype&gt;, -d&lt;difftype&gt;</p><p>Specify the difference display format. Permitted format values are <strong>unified</strong>, <strong>context</strong>, <strong>differ</strong>, and <strong>sql</strong>. The default is <strong>unified</strong>.</p><p>--force</p><p>Do not halt at the first difference found. Process all objects to find all differences.</p><p>--quiet, -q</p><p>Do not print anything. Return only an exit code of success or failure.</p><p>--server1=&lt;source&gt;</p><p>Connection information for the first server in the format: &lt;<em>user</em>&gt;[:&lt;<em>passwd</em>&gt;]@&lt;<em>host</em>&gt;[:&lt;<em>port</em>&gt;][:&lt;<em>socket</em>&gt;] or &lt;<em>login-path</em>&gt;[:&lt;<em>port</em>&gt;][:&lt;<em>socket</em>&gt;].</p><p>--server2=&lt;source&gt;</p><p>Connection information for the second server in the format: &lt;<em>user</em>&gt;[:&lt;<em>passwd</em>&gt;]@&lt;<em>host</em>&gt;[:&lt;<em>port</em>&gt;][:&lt;<em>socket</em>&gt;] or &lt;<em>login-path</em>&gt;[:&lt;<em>port</em>&gt;][:&lt;<em>socket</em>&gt;].</p><p>--show-reverse</p><p>Produce a transformation report containing the SQL statements to conform the object definitions specified in reverse. For example, if <strong>--changes-for</strong> is set to server1, also generate the transformation for server2. Note: The reverse changes are annotated and marked as comments.</p><p>--verbose, -v</p><p>Specify how much information to display. Use this option multiple times to increase the amount of information. For example, <strong>-v</strong> = verbose, <strong>-vv</strong> = more verbose, <strong>-vvv</strong> = debug.</p><p>--version</p><p>Display version information and exit.</p><p>--width=&lt;number&gt;</p><p>Change the display width of the test report. The default is 75 characters.</p>
<pre>
      NOTES
</pre>
<p>You must provide connection parameters (user, host, password, and so forth) for an account that has the appropriate privileges to access all objects to be compared.</p><p>The SQL transformation feature has these known limitations:</p><p>When tables with partition differences are encountered, the utility generates the <strong>ALTER TABLE</strong> statement for all other changes but prints a warning and omits the partition differences.</p><p>If the transformation detects table options in the source table (specified with the <strong>--changes-for</strong> option) that are not changed or do not exist in the target table, the utility generates the <strong>ALTER TABLE</strong> statement for all other changes but prints a warning and omits the table option differences.</p><p>Rename for events is not supported. This is because <strong>mysqldiff</strong> compares objects by name. In this case, depending on the direction of the diff, the event is identified as needing to be added or a <strong>DROP EVENT</strong> statement is generated.</p><p>Changes in the definer clause for events are not supported.</p><p>SQL extensions specific to MySQL Cluster are not supported.</p><p>For the <strong>--difftype</strong> option, the permitted values are not case sensitive. In addition, values may be specified as any unambiguous prefix of a valid value. For example, <strong>--difftype=d</strong> specifies the differ type. An error occurs if a prefix matches more than one valid value.</p><p>The path to the MySQL client tools should be included in the PATH environment variable in order to use the authentication mechanism with login-paths. This will allow the utility to use the my_print_defaults tools which is required to read the login-path values from the login configuration file (.mylogin.cnf).</p><p>If any database object identifier specified as an argument contains special characters or is a reserved word, then it must be appropriately quoted with backticks (<strong>`</strong>). In turn, names quoted with backticks must also be quoted with single or double quotes depending on the operating system, i.e. (<strong>"</strong>) in Windows or (<strong>&apos;</strong>) in non-Windows systems, in order for the utilities to read backtick quoted identifiers as a single argument. For example, to show the difference between table <strong>weird`table1</strong> from database <strong>weird`db.name</strong> and table <strong>weird`table2</strong> from database <strong>other:weird`db.name</strong>, the objects pair must be specified using the following syntax (in non-Windows): <strong>&apos;`weird``db.name`.`weird``table1`:`other:weird``db.name`.`weird``table2`&apos;</strong>.</p>
<pre>
      EXAMPLES
</pre>
<p>To compare the employees and emp databases on the local server, use this command:</p>
<pre>
$ mysqldiff --server1=root@localhost employees:emp1
# server1 on localhost: ... connected.
WARNING: Objects in server1:employees but not in server2:emp1:
  EVENT: e1
Compare failed. One or more differences found.
$ mysqldiff --server1=root@localhost &#92;
           employees.t1:emp1.t1 employees.t3:emp1.t3
# server1 on localhost: ... connected.
# Comparing employees.t1 to emp1.t1                                [PASS]
# server1 on localhost: ... connected.
# Comparing employees.t3 to emp1.t3                                [PASS]
Success. All objects are the same.
$ mysqldiff --server1=root@localhost &#92;
         employees.salaries:emp1.salaries --differ
# server1 on localhost: ... connected.
# Comparing employees.salaries to emp1.salaries                    [FAIL]
# Object definitions are not the same:
  CREATE TABLE `salaries` (
    `emp_no` int(11) NOT NULL,
    `salary` int(11) NOT NULL,
    `from_date` date NOT NULL,
    `to_date` date NOT NULL,
    PRIMARY KEY (`emp_no`,`from_date`),
    KEY `emp_no` (`emp_no`)
- ) ENGINE=InnoDB DEFAULT CHARSET=latin1
?           ^^^^^
+ ) ENGINE=MyISAM DEFAULT CHARSET=latin1
?          ++ ^^^
Compare failed. One or more differences found.
</pre>
<p>The following examples show how to generate a transformation report. Assume the following object definitions:</p><p>Host1:</p>
<pre>
CREATE TABLE db1.table1 (num int, misc char(30));
</pre>
<p>Host2:</p>
<pre>
CREATE TABLE dbx.table3 (num int, notes char(30), misc char(55));
</pre>
<p>To generate a set of SQL statements that transform the definition of db1.table1 to dbx.table3, use this command:</p>
<pre>
$ mysqldiff --server1=root@host1 --server2=root@host2 &#92;
      --changes-for=server1 --difftype=sql &#92;
      db1.table1:dbx.table3
# server1 on host1: ... connected.
# server2 on host2: ... connected.
# Comparing db1.table1 to dbx.table3                               [FAIL]
# Transformation statements:
ALTER TABLE db1.table1
  ADD COLUMN notes char(30) AFTER a,
  CHANGE COLUMN misc misc char(55);
Compare failed. One or more differences found.
</pre>
<p>To generate a set of SQL statements that transform the definition of dbx.table3 to db1.table1, use this command:</p>
<pre>
$ mysqldiff --server1=root@host1 --server2=root@host2 &#92;
      --changes-for=server2 --difftype=sql &#92;
      db1.table1:dbx.table3
# server1 on host1: ... connected.
# server2 on host2: ... connected.
# Comparing db1.table1 to dbx.table3                               [FAIL]
# Transformation statements:
ALTER TABLE dbx.table3
  DROP COLUMN notes,
  CHANGE COLUMN misc misc char(30);
Compare failed. One or more differences found.
</pre>
<p>To generate a set of SQL statements that transform the definitions of dbx.table3 and db1.table1 in both directions, use this command:</p>
<pre>
$ mysqldiff --server1=root@host1 --server2=root@host2 &#92;
      --show-reverse --difftype=sql &#92;
      db1.table1:dbx.table3
# server1 on host1: ... connected.
# server2 on host2: ... connected.
# Comparing db1.table1 to dbx.table3                               [FAIL]
# Transformation statements:
# --destination=server1:
ALTER TABLE db1.table1
  ADD COLUMN notes char(30) AFTER a,
  CHANGE COLUMN misc misc char(55);
# --destination=server2:
# ALTER TABLE dbx.table3
#   DROP COLUMN notes,
#   CHANGE COLUMN misc misc char(30);
Compare failed. One or more differences found.
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mysqldiff&hellip;</h2>
        <div class="sectioncontent">
<p>For more information, please refer to the MySQL Utilities section of the MySQL Workbench Reference Manual, which is available online at http://dev.mysql.com/doc/workbench/en/.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Oracle Corporation (http://dev.mysql.com/).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mysqldbimport.1.html"><span aria-hidden="true">&larr;</span> mysqldbimport.1: Import object definitions or data into a databases</a></li>
   <li class="next"><a href="mysqldiskusage.1.html">mysqldiskusage.1: Show database disk usage <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
