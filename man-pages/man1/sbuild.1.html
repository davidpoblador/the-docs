<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sbuild: Build debian packages from source</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Build debian packages from source">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sbuild (1) manual">
  <meta name="twitter:description" content="Build debian packages from source">
  <meta name="twitter:image" content="https://www.carta.tech/images/sbuild-sbuild-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/sbuild.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sbuild (1) manual" />
  <meta property="og:description" content="Build debian packages from source" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/sbuild-sbuild-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sbuild<small> (1)</small></h1>
        <p class="lead">Build debian packages from source</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/sbuild.1.html">
      <span itemprop="name">sbuild: Build debian packages from source</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/sbuild/">
      <span itemprop="name">sbuild</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/sbuild.1.html">
      <span itemprop="name">sbuild: Build debian packages from source</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>sbuild</strong> [<strong>-h</strong>\[or]<strong>--help</strong> \[or] <strong>-V</strong>\[or]<strong>--version</strong>] [<strong>-v</strong>\[or]<strong>--verbose</strong> \[or] <strong>-q</strong>\[or]<strong>--quiet</strong>] [<strong>-D</strong>\[or]<strong>--debug</strong>] [<strong>-A</strong>\[or]<strong>--arch-all</strong>] [<strong>--archive=</strong><em>archive</em><strong></strong>] [<strong>-d</strong>\[or]<strong>--dist=</strong><em>distribution</em><strong></strong>] [<strong>-c</strong>\[or]<strong>--chroot=</strong><em>chroot</em><strong></strong>] [<strong>--arch=</strong><em>architecture</em><strong></strong>] [<strong>--build=</strong><em>architecture</em><strong></strong>] [<strong>--host=</strong><em>architecture</em><strong></strong>] [<strong>--profiles=</strong><em>profile[,...]</em><strong></strong>] [<strong>-s</strong>\[or]<strong>--source</strong>] [<strong>--force-orig-source</strong>] [<strong>--make-binNMU=</strong><em>changelog-entry</em><strong></strong>] [<strong>--binNMU=</strong><em>NMU-version</em><strong></strong>] [<strong>--append-to-version=</strong><em>string</em><strong></strong>] [<strong>--add-depends=</strong><em>dependency</em><strong></strong>] [<strong>--add-conflicts=</strong><em>dependency</em><strong></strong>] [<strong>--add-depends-arch=</strong><em>dependency</em><strong></strong>] [<strong>--add-conflicts-arch=</strong><em>dependency</em><strong></strong>] [<strong>--add-depends-indep=</strong><em>dependency</em><strong></strong>] [<strong>--add-conflicts-indep=</strong><em>dependency</em><strong></strong>] [<strong>-m</strong>\[or]<strong>--maintainer=</strong><em>maintainer</em><strong></strong>] [<strong>-e</strong>\[or]<strong>--uploader=</strong><em>uploader</em><strong></strong>] [<strong>-k</strong>\[or]<strong>--keyid=</strong><em>key-id</em><strong></strong>] [<strong>-j</strong>\[or]<strong>--jobs=</strong><em>n</em><strong></strong>] [<strong>--debbuildopt=</strong><em>option</em><strong></strong>] [<strong>--debbuildopts=</strong><em>options</em><strong></strong>] [<strong>--dpkg-source-opt=</strong><em>options</em><strong></strong>] [<strong>--dpkg-source-opts=</strong><em>options</em><strong></strong>] [<strong>-p</strong>\[or]<strong>--purge=</strong>purge-mode<strong></strong>] [<strong>--purge-build=</strong>purge-mode<strong></strong>] [<strong>--purge-deps=</strong>purge-mode<strong></strong>] [<strong>--purge-session=</strong>purge-mode<strong></strong>] [<strong>-b</strong>\[or]<strong>--batch]</strong> [<strong>-n</strong>\[or]<strong>--nolog</strong>] [<strong>--run-lintian</strong>] [<strong>--no-run-lintian</strong>] [<strong>--lintian-opt=</strong><em>options</em><strong></strong>] [<strong>--lintian-opts=</strong><em>options</em><strong></strong>] [<strong>--run-piuparts</strong>] [<strong>--no-run-piuparts</strong>] [<strong>--piuparts-opt=</strong><em>options</em><strong></strong>] [<strong>--piuparts-opts=</strong><em>options</em><strong></strong>] [<strong>--piuparts-root-arg=</strong><em>options</em><strong></strong>] [<strong>--piuparts-root-args=</strong><em>options</em><strong></strong>] [<strong>--pre-build-commands=</strong><em>string</em><strong></strong>] [<strong>--chroot-setup-commands=</strong><em>string</em><strong></strong>] [<strong>--starting-build-commands=</strong><em>string</em><strong></strong>] [<strong>--finished-build-commands=</strong><em>string</em><strong></strong>] [<strong>--chroot-cleanup-commands=</strong><em>string</em><strong></strong>] [<strong>--post-build-commands=</strong><em>string</em><strong></strong>] [<strong>--log-external-command-output</strong>] [<strong>--log-external-command-error</strong>] [<strong>--setup-hook=</strong><em>hook-script</em><strong></strong>] [<strong>--build-dep-resolver=</strong><em>resolver</em><strong></strong>] [<strong>--resolve-alternatives</strong>\[or]<strong>--no-resolve-alternatives</strong>] [<strong>--extra-package=</strong><em>package.deb</em><strong></strong>] [<strong>--extra-repository=</strong><em>spec</em><strong></strong>] [<strong>PACKAGE</strong>[<strong>.dsc</strong>]]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>sbuild</strong> rebuilds Debian binary packages from the corresponding Debian source, installing any missing source dependencies.  The build takes place in a dedicated clean build environment (chroot), rather than on the host system.</p><p><strong>sbuild</strong> can fetch the Debian source over a network, or it can use locally available sources.</p><p>sbuild is given a packages to process as the argument <strong>PACKAGE[.dsc]</strong>.  This argument is in the form of either a debianized package source directory, a source package name along with a version in the form <em>package_version</em>, or a .dsc file. If no arguments are given, the current working directory is passed as an argument.</p><p>For arguments given as source directories, dpkg-source is first run to produce a source .dsc file. Then, the package is built using the .dsc produced. For arguments in the form <em>package_version</em>, apt is used to download the source package. For arguments given as a .dsc file, sbuild builds the source packages directly. For .dsc files in remote locations, the source packages are downloaded first, then built.</p><p>It is also possible to run external commands with sbuild. See the section <strong>EXTERNAL COMMANDS</strong> for more on this.</p><p><strong>sbuild</strong> mails the build logs to a user.  It is configured by the configuration files <em>/etc/sbuild/sbuild.conf</em> and <em>~/.sbuildrc</em>.  An example sbuildrc is available in <em>/usr/share/doc/sbuild/examples/example.sbuildrc</em>.</p><p>You can build either using a local package with its .dsc file or a remote one by specifying an explicit dpkg version.</p><p>Note: When using schroot (recommended), the chroot having the name (or alias) of the specified distribution will be used; schroot uses a chroot named <em>$distribution-$arch-sbuild</em>, <em>$distribution-sbuild</em>, <em>$distribution-$arch</em> or <em>$distribution</em>, in that order of preference. The -c or --chroot option may be used to override the chroot to be used. When configured to use sudo (deprecated), sbuild will look for a symlink to a chroot with the same name as the distribution specified.  sbuild will use a symlink to the chroot located in <em>/etc/sbuild/chroot/$distribution</em>, or must be run in a directory containing a <em>chroot-$distribution</em> symlink to the chroot (not recommended, but done for backward compatibility).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Display this manual.</p>
  </dd>
  <dt>
    <p><strong>-V</strong>, <strong>--version</strong></p>
  </dt>
  <dd>
    <p>Print version information.</p>
  </dd>
  <dt>
    <p><strong>--add-depends=</strong><em>dependency</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--add-conflicts=</strong><em>dependency</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--add-depends-arch=</strong><em>dependency</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--add-conflicts-arch=</strong><em>dependency</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--add-depends-indep=</strong><em>dependency</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--add-conflicts-indep=</strong><em>dependency</em><strong></strong></p>
  </dt>
  <dd>
    <p>These options add a build dependencies to the source package being built, in addition to the build dependency information specified in debian/control. These dependencies will be concatenated directly to the Build-Depends, Build-Conflicts, Build-Depends-Arch, Build-Conflicts-Arch, Build-Depends-Indep and Build-Conflicts-Indep dependencies, respectively.  The options may be used any number of times to add multiple dependencies.  The format is identical to the format used in debian/control.</p>
  </dd>
  <dt>
    <p><strong>--arch=</strong><em>architecture</em><strong></strong></p>
  </dt>
  <dd>
    <p>Build using the architecture specified.  A chroot named <em>$distribution-$arch-sbuild</em> or <em>$distribution-arch</em> is searched for, in that order of preference.  The chroot must be installed and configured appropriately to build as that architecture, e.g. using <em>personality=linux32</em> to build i386 packages on an amd64 system.  Note that this option is equivalent to "--host=architecture --build=architecture".</p>
  </dd>
  <dt>
    <p><strong>--host=</strong><em>architecture</em><strong></strong></p>
  </dt>
  <dd>
    <p>Build using the host architecture specified.  If $host and $build don't match, a chroot named <em>$distribution-$build-$host-sbuild</em> or <em>$distribution-$build-$host</em> is searched for, falling back to <em>$distribution-$host-sbuild</em> or <em>$distribution-$host</em>, in that order of preference.  This option is only useful for cross-building when used together with --build.</p>
  </dd>
  <dt>
    <p><strong>--build=</strong><em>architecture</em><strong></strong></p>
  </dt>
  <dd>
    <p>Build using the build architecture specified.  This option is only useful for cross-building when used together with --host.  If --build is not specified, the default system architecture is assumed.</p>
  </dd>
  <dt>
    <p><strong>-A</strong>, <strong>--arch-all</strong></p>
  </dt>
  <dd>
    <p>Also build Architecture: all packages, i.e. use dpkg-buildpackage -b instead of -B.</p>
  </dd>
  <dt>
    <p><strong>--no-arch-all</strong></p>
  </dt>
  <dd>
    <p>Do not build Architecture: all packages, i.e. use dpkg-buildpackage -B instead of -b. This option is the opposite of --arch-all.</p>
  </dd>
  <dt>
    <p><strong>-b</strong>, <strong>--batch</strong></p>
  </dt>
  <dd>
    <p>Operate in batchmode, i.e. write a build-progress file during execution and files on shutdown to facilitate a clean restart.</p>
  </dd>
  <dt>
    <p><strong>-c</strong>, <strong>--chroot=</strong><em>chroot</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use the specified chroot. If not specified, the default is the first of <em>$distribution-$arch-sbuild</em>, <em>$distribution-sbuild</em>, <em>$distribution-$arch</em> or <em>$distribution</em> that exists.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--dist=</strong><em>distribution</em><strong></strong></p>
  </dt>
  <dd>
    <p>Fetch source packages from specified distribution.</p>
  </dd>
  <dt>
    <p><strong>--archive=</strong><em>archive</em><strong></strong></p>
  </dt>
  <dd>
    <p>Communicate with specified archive.</p>
  </dd>
  <dt>
    <p><strong>-D</strong>, <strong>--debug</strong></p>
  </dt>
  <dd>
    <p>Enable debug output.</p>
  </dd>
  <dt>
    <p><strong>--apt-clean</strong> <strong>--no-apt-clean</strong></p>
  </dt>
  <dd>
    <p>Run (or do not run) apt-get clean in the chroot before executing the build, overriding the default setting.</p>
  </dd>
  <dt>
    <p><strong>--apt-update</strong> <strong>--no-apt-update</strong></p>
  </dt>
  <dd>
    <p>Run (or do not run) apt-get update in the chroot before executing the build, overriding the default setting.</p>
  </dd>
  <dt>
    <p><strong>--apt-upgrade</strong> <strong>--no-apt-upgrade</strong></p>
  </dt>
  <dd>
    <p>Run (or do not run) apt-get upgrade in the chroot before executing the build, overriding the default setting.</p>
  </dd>
  <dt>
    <p><strong>--apt-distupgrade</strong> <strong>--no-apt-distupgrade</strong></p>
  </dt>
  <dd>
    <p>Run (or do not run) apt-get distupgrade in the chroot before executing the build, overriding the default setting.</p>
  </dd>
  <dt>
    <p><strong>-m</strong>, <strong>--maintainer=</strong><em>maintainer</em><strong></strong></p>
  </dt>
  <dd>
    <p>Specify the identity to use for GPG signing packages, and also used as the maintainer for binary NMUs.  This does not normally require setting (it defaults to the uploader).</p>
  </dd>
  <dt>
    <p><strong>-e</strong>, <strong>--uploader=</strong><em>uploader</em><strong></strong></p>
  </dt>
  <dd>
    <p>Passed to dpkg-genchanges and is used to set the Changed-by: field in the .changes file(s).</p>
  </dd>
  <dt>
    <p><strong>-k</strong>, <strong>--keyid=</strong><em>key-id</em><strong></strong></p>
  </dt>
  <dd>
    <p>Passed to dpkg-genchanges and is used to set the key to sign the .changes file(s).  Default is not using any key.</p>
  </dd>
  <dt>
    <p><strong>-j</strong>, <strong>--jobs=</strong><em>n</em><strong></strong></p>
  </dt>
  <dd>
    <p>Number of jobs to run simultaneously.  Passed through to dpkg-buildpackage.</p>
  </dd>
  <dt>
    <p><strong>--debbuildopt=</strong><em>option</em><strong></strong></p>
  </dt>
  <dd>
    <p>Pass the specified option directly to dpkg-buildpackage.</p>
  </dd>
  <dt>
    <p><strong>--debbuildopts=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Pass the specified options directly to dpkg-buildpackage.  The options should be separated by spaces.  If any options contain spaces, use --debbuildopt instead.</p>
  </dd>
  <dt>
    <p><strong>--dpkg-source-opt=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Pass the specified options directly to dpkg-source. This is only used when creating a source package from a Debianized source directory.</p><p><strong>NOTE:</strong> The '<em>-b</em>' option will always be passed to dpkg-source.</p>
  </dd>
  <dt>
    <p><strong>--dpkg-source-opts=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Extra options to be appended to existing options passed to dpkg-source.</p>
  </dd>
  <dt>
    <p><strong>--mail-log-to=</strong><em>email-address</em><strong></strong></p>
  </dt>
  <dd>
    <p>Send the build log to the specified email address.  This overrides the <em>$mailto</em> configuration option.</p>
  </dd>
  <dt>
    <p><strong>--mailfrom=</strong><em>email-address</em><strong></strong></p>
  </dt>
  <dd>
    <p>Email address used as the sender address for build logs.  This overrides the <em>$mailfrom</em> configuration option.</p>
  </dd>
  <dt>
    <p><strong>-n</strong>, <strong>--nolog</strong></p>
  </dt>
  <dd>
    <p>Do not create a package log file in the <em>$log_dir</em> directory and no build log file, but print everything to stdout. Also do not send any log mails.</p>
  </dd>
  <dt>
    <p><strong>-p</strong>, <strong>--purge=</strong><em>purge-mode</em><strong></strong></p>
  </dt>
  <dd>
    <p>Convenience option to set <em>purge-mode</em> for build directory, build dependencies and session.</p>
  </dd>
  <dt>
    <p><strong>--profiles=</strong><em>profile[,...]</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Specify the profile(s) we build, as a comma-separated list. Defaults to the space separated list of profiles in the <strong>DEB_BUILD_PROFILES</strong> environment variable.</p>
  </dd>
  <dt>
    <p><strong>--purge-build=</strong><em>purge-mode</em><strong></strong></p>
  </dt>
  <dd>
    <p><em>purge-mode</em> determines if the build directory will be deleted after a build. Possible values are <strong>always</strong> (default), <strong>never</strong>, and <strong>successful</strong>.</p>
  </dd>
  <dt>
    <p><strong>--purge-deps=</strong><em>purge-mode</em><strong></strong></p>
  </dt>
  <dd>
    <p><em>purge-mode</em> determines if the build dependencies will be removed after a build. Possible values are <strong>always</strong> (default), <strong>never</strong>, and <strong>successful</strong>.</p>
  </dd>
  <dt>
    <p><strong>--purge-session=</strong><em>purge-mode</em><strong></strong></p>
  </dt>
  <dd>
    <p>Purge the schroot session following a build.  This is useful in conjunction with the <em>--purge-build</em> and <em>--purge-deps</em> options when using snapshot chroots, since by default the snapshot will be deleted.  Possible values are <strong>always</strong> (default), <strong>never</strong>, and <strong>successful</strong>.</p>
  </dd>
  <dt>
    <p><strong>-s</strong>, <strong>--source</strong></p>
  </dt>
  <dd>
    <p>Also build source package, i.e. use dpkg-buildpackage without -B.</p>
  </dd>
  <dt>
    <p><strong>--no-source</strong></p>
  </dt>
  <dd>
    <p>Don't build source package, i.e. use dpkg-buildpackage with -B.  This option is the opposite of --source.</p>
  </dd>
  <dt>
    <p><strong>--force-orig-source</strong></p>
  </dt>
  <dd>
    <p>When used with in conjunction with -s, this option forces the inclusion of the orig.tar.gz file in the generated .changes file, even in cases where it would not normally be included, i.e. use dpkg-buildpackage -sa.</p>
  </dd>
  <dt>
    <p><strong>--use-snapshot</strong></p>
  </dt>
  <dd>
    <p>Installs the latest snapshot gcc compiler from the <em>gcc-snapshot</em> package, and alters the build environment to use the snapshot compiler for the build.</p>
  </dd>
  <dt>
    <p><strong>-v</strong>, <strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>Be verbose, i.e. all information goes to stdout as well as to the log files.</p>
  </dd>
  <dt>
    <p><strong>-q</strong>, <strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>Be quiet.  This is the opposite of --verbose.</p>
  </dd>
  <dt>
    <p><strong>--make-binNMU=</strong><em>changelog-entry</em><strong></strong></p>
  </dt>
  <dd>
    <p>With this option, <strong>sbuild</strong> will create a new changelog entry in debian/changelog of every package built. The version number will be in the format for binary-only NMUs (see --binNMU); the maintainer is set to the maintainer name configured for <strong>sbuild</strong>. <em>changelog-entry</em> will be used as the changelog entry following \[lq]Binary-only non-maintainer upload for ARCH -- no source changes\[rq]. Please note that the versions in the <em>PACKAGE_VERSION[.dsc]</em> arguments still have to be the unmodified (non-NMU ones) so that the sources can be found. The version number in log files and mails will be modified by <strong>sbuild</strong> automatically.</p>
  </dd>
  <dt>
    <p><strong>--binNMU=</strong><em>NMU-version</em><strong></strong></p>
  </dt>
  <dd>
    <p>The version number of the binary NMU.  This should be used in conjunction with --make-binNMU.  <em>version</em> is a single number for the (+b<em>n</em>) format used for binary NMUs.</p>
  </dd>
  <dt>
    <p><strong>--append-to-version=</strong><em>string</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option is similar to --make-binNMU except that it allows the user to specify an arbitrary string to be appended to the version number (immediately before the '+' in the Debian revision if --make-binNMU is also provided).</p>
  </dd>
  <dt>
    <p><strong>--run-lintian</strong></p>
  </dt>
  <dd>
    <p>Run lintian after a successful build.</p>
  </dd>
  <dt>
    <p><strong>--no-run-lintian</strong></p>
  </dt>
  <dd>
    <p>Don't run lintian after a successful build.  If sbuild is configured to run lintian by default, this option will prevent lintian being run.</p>
  </dd>
  <dt>
    <p><strong>--lintian-opt=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Run lintian with the specified options.</p>
  </dd>
  <dt>
    <p><strong>--lintian-opts=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Append extra options to existing options passed to lintian.</p>
  </dd>
  <dt>
    <p><strong>--run-piuparts</strong></p>
  </dt>
  <dd>
    <p>Run piuparts after a successful build.</p>
  </dd>
  <dt>
    <p><strong>--no-run-piuparts</strong></p>
  </dt>
  <dd>
    <p>Don't run piuparts after a successful build.  If sbuild is configured to run piuparts by default, this option will prevent piuparts being run.</p>
  </dd>
  <dt>
    <p><strong>--piuparts-opt=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Run piuparts with the specified options.</p>
  </dd>
  <dt>
    <p><strong>--piuparts-opts=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Append extra options to existing options passed to piuparts.</p>
  </dd>
  <dt>
    <p><strong>--piuparts-root-arg=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Add an argument that is used to launch piuparts as root. If no arguments are specified, piuparts will be launched via sudo.</p>
  </dd>
  <dt>
    <p><strong>--piuparts-root-args=</strong><em>options</em><strong></strong></p>
  </dt>
  <dd>
    <p>Add arguments that are used to launch piuparts as root. If no arguments are specified, piuparts will be launched via sudo.</p>
  </dd>
  <dt>
    <p><strong>--pre-build-commands=</strong><em>string</em><strong></strong></p>
  </dt>
  <dd>
    <p>Run this command before a build starts. This option can be used multiple times to add multiple commands.</p>
  </dd>
  <dt>
    <p><strong>--chroot-setup-commands=</strong><em>string</em><strong></strong></p>
  </dt>
  <dd>
    <p>Run these commands when a chroot is setup, before dependencies are installed. This option can be used multiple times to add multiple commands.</p>
  </dd>
  <dt>
    <p><strong>--starting-build-commands=</strong><em>string</em><strong></strong></p>
  </dt>
  <dd>
    <p>Run these commands after dependencies are installed, just before the package build starts. This option can be used multiple times to add multiple commands.</p>
  </dd>
  <dt>
    <p><strong>--finished-build-commands=</strong><em>string</em><strong></strong></p>
  </dt>
  <dd>
    <p>Run these commands immediately after the timed package build finishes. This option can be used multiple times to add multiple commands.</p>
  </dd>
  <dt>
    <p><strong>--chroot-cleanup-commands=</strong><em>string</em><strong></strong></p>
  </dt>
  <dd>
    <p>Run these commands when a chroot is cleaned up, before build directory is purged. This option can be used multiple times to add multiple commands.</p>
  </dd>
  <dt>
    <p><strong>--post-build-commands=</strong><em>string</em><strong></strong></p>
  </dt>
  <dd>
    <p>Run this command after a successful build. This option can be used multiple times to add multiple commands.</p>
  </dd>
  <dt>
    <p><strong>--log-external-command-output</strong></p>
  </dt>
  <dd>
    <p>Write output from external commands to the build log.</p>
  </dd>
  <dt>
    <p><strong>--log-external-command-error</strong></p>
  </dt>
  <dd>
    <p>Write error output from external commands to the build log.</p>
  </dd>
  <dt>
    <p><strong>--setup-hook=</strong><em>hook-script</em><strong></strong> <strong></strong><strong>DEPRECATED</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This option is deprecated. Use of this option will add <em>hook-script</em> to the external commands to run via <em>chroot-setup-commands</em>.</p>
  </dd>
  <dt>
    <p><strong>--build-dep-resolver=</strong><em>resolver</em><strong></strong></p>
  </dt>
  <dd>
    <p>Use the specified resolver to handle selecting the build dependencies. Supported resolvers are <em>apt</em> (the default), <em>aptitude</em> and <em>xapt</em>. The apt resolver is the most appropriate resolver for most users, for building for unstable, stable and other distributions.  If alternative build dependencies are used (excluding architecture restrictions), only the first alternative will be used; the others will be ignored.  The aptitude resolver is very similar, but smarter and slower, and it will consider all alternatives by default; it is suited to more complex situations, such as building packages for the experimental distribution, where packages need installing from multiple suites (<em>unstable</em> and <em>experimental</em>).  Due to performance and other issues (bug #139615), aptitude is not recommended for use by default.  The xapt resolver is intended only for cross-building, and is a temporary transitional feature which will be removed following the complete introduction of multi-arch support.</p>
  </dd>
  <dt>
    <p><strong>--resolve-alternatives</strong></p>
  </dt>
  <dd>
    <p>Allow the use of alternatives in Build-Depends, Build-Depends-Arch and Build-Depends-Indep.  This is the default for the aptitude dependency resolver.</p>
  </dd>
  <dt>
    <p><strong>--no-resolve-alternatives</strong></p>
  </dt>
  <dd>
    <p>Do not allow the use of alternatives in Build-Depends, Build-Depends-Arch and Build-Depends-Indep.  Note that alternatives for the same package (e.g. different versions) are still allowed.  This is the default for the apt and xapt dependency resolvers.</p>
  </dd>
  <dt>
    <p><strong>--extra-package=</strong><em>package.deb</em><strong></strong></p>
  </dt>
  <dd>
    <p>Make <em>package.deb</em> available for build-dependency resolution, by adding it to a temporary archive created by sbuild.  This makes it easier to build packages against locally-built build depenencies, without waiting for those packages to enter the main archive, or going through the hassle of maintaining a local archive and making it accessible inside the chroot.  <em>package.deb</em> is copied into the chroot, so it can refer to any path on the host system.</p>
  </dd>
  <dt>
    <p><strong>--extra-repository=</strong><em>spec</em><strong></strong></p>
  </dt>
  <dd>
    <p>Add a repository to the list of apt sources during the package build. The repository specification is a line suitable for an apt <a href="../man5/sources.list.5.html"><strong>sources.list</strong>(5)</a> file. For instance, you might use <strong>--extra-repository="deb http://ftp.debian.org/debian experimental main"</strong> to allow packages in the experimental distribution to fulfill build-dependencies. Note that the build chroot must already trust the key of this repository (see <a href="../man8/apt-secure.8.html"><strong>apt-secure</strong>(8)</a>).</p>
  </dd>
  <dt>
    <p><strong>--sbuild-mode=</strong><em>mode</em><strong></strong></p>
  </dt>
  <dd>
    <p>Behaviour changes for use in a buildd environment.  This overrides the <em>$sbuild_mode</em> configuration option.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTERNAL COMMANDS</h2>
        <div class="sectioncontent">
<p>Support to run external commands during an sbuild run is provided. A set of external commands can be run at various stages of a build. Providing commands to run is done through the appropriate options given on the command line and through the use of the configuration files. In the configuration file, the list of commands to run are placed in a hash of arrays of arrays of strings corresponding to the commands to run.</p><p>There are three sets of commands. The <em>pre/post-build-</em> commands are run external to the chroot. The <em>chroot-setup/cleanup-</em> commands and <em>Starting/Finished-Build-</em> commands are run inside the chroot. They are all run as root except the <em>Starting/Finishing-build-</em> commands, which are run as the current sbuild user.</p><p>Here is a summary of the ordering, user, internal/external to chroot for each command hook</p>
<pre>
<em>Initialise chroot session</em>

<strong>--pre-build-commands       root  outside chroot</strong>

<em>Setup the chroot and variables</em>

<strong>--chroot-setup-commands    root  inside chroot</strong>

<em>Update and upgrade packages</em>

<em>Install Dependencies</em>

<strong>--starting-build-commands  user  inside chroot</strong>

<em>Do actual build (dpkg-buildpackage)</em>

<strong>--finished-build-commands  user  inside chroot</strong>

<em>Run lintian (if configured)</em>

<em>Cleanup build files and dependencies</em>

<strong>--chroot-cleanup-commands  root  inside chroot</strong>

<em>Close schroot session</em>

<em>Run piuparts (if configured)</em>

<strong>--post-build-commands      root  outside chroot</strong>
</pre>
<p>Here's an example of how to edit the configuration files to run "foo" and "bar" with arguments before a build starts.</p><p><strong>$external_commands = {</strong></p><p><strong>    "pre-build-commands" =&gt; [</strong></p><p><strong>        ['foo', 'arg1', 'arg2'],</strong></p><p><strong>        ['bar', 'arg1', 'arg2', 'arg3'],</strong></p><p><strong>    ],</strong></p><p><strong>};</strong></p><p>Hash keys for commands to run at other stages have the same name as their corresponding command-line option name without the preceding '--'.</p><p>Here's an example of how to do the same with the previous example, except using the <em>--pre-build-commands</em> option.</p><p><strong>$ sbuild &#92;</strong></p><p><strong>      --pre-build-commands='foo arg1 arg2' &#92;</strong></p><p><strong>      --pre-build-commands='bar arg1 arg2 arg3'</strong></p><p>Besides running external commands, sbuild can also detect the use of certain percent escapes given as arguments. These are used to allow for a command to be supplied with a certain argument depending on the escape given. For example, it could be possible to have an external command be given the path to a .changes file.</p><p>Here is a listing of keywords and a description of what it's converted to.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>%%</strong></p>
  </dt>
  <dd>
    <p>Used to escape a '<em>%</em>'.</p>
  </dd>
  <dt>
    <p><strong>%d</strong>, <strong>%SBUILD_DSC</strong></p>
  </dt>
  <dd>
    <p>These escapes are converted to the absolute path to a package's .dsc file.</p>
  </dd>
  <dt>
    <p><strong>%c</strong>, <strong>%SBUILD_CHANGES</strong></p>
  </dt>
  <dd>
    <p>These escapes are converted to the absolute path to a package's source .changes file.</p>
  </dd>
  <dt>
    <p><strong>%a</strong>, <strong>%SBUILD_HOST_ARCH</strong></p>
  </dt>
  <dd>
    <p>These escapes are converted to the debian name of the architecture the build is being built for (e.g amd64, armhf).</p>
  </dd>
  <dt>
    <p><strong>%r</strong>, <strong>%SBUILD_CHROOT_DIR</strong></p>
  </dt>
  <dd>
    <p>These escapes are converted to the absolute path on the host to the root directory of the chroot. This variable is not set if the external command is run inside the chroot.</p>
  </dd>
  <dt>
    <p><strong>%b</strong>, <strong>%SBUILD_BUILD_DIR</strong></p>
  </dt>
  <dd>
    <p>These escapes are converted to the absolute path to the build directory inside the chroot.</p>
  </dd>
  <dt>
    <p><strong>%p</strong>, <strong>%SBUILD_PKGBUILD_DIR</strong></p>
  </dt>
  <dd>
    <p>These escapes are converted to the absolute path to the package build directory inside the chroot.</p>
  </dd>

</dl>
<p>Percent escapes are only substituted when an appropriate value is defined for them. At other times, it is left unchanged. For example, a .changes file is only defined at the end of a build, so using <em>%c</em> will only be substituted for post-build-commands.</p><p>Here's an example of using an escape to run a program foo on a .changes file after a build is done.</p><p><strong>$ sbuild --post-build-commands &#92;</strong></p><p><strong>      'foo %SBUILD_CHANGES'</strong></p><p>One final note, external commands are processed in the order they are given. Also, the commands given in a configuration file are processed first, then the commands given through the command line options.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOCAL ARCHIVE</h2>
        <div class="sectioncontent">
<p>The apt and aptitude resolvers create a local archive for installing build dependencies.  This is an internal implementation detail of the build dependency resolver, which is not user configurable, and is intended to be entirely transparent to the user.  The local archive exists only transiently during the package build.  It does not persist across builds, and it is only used to store the dummy dependency packages created for a single build.</p><p>The dependency resolvers do the following:</p>
<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>Create a dummy dependency package.  This contains the Build-Depends (and optionally Build-Depends-Arch and Build-Depends-Indep) as Depends, and Build-Conflicts (and optionally Build-Conflicts-Arch and Build-Conflicts-Indep) as Conflicts.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>Install the dummy dependency package into the local archive,</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>Generate the <em>Packages</em>, <em>Sources</em> and <em>Release</em> files.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>Write a <em>sources.list</em> file for the local archive into <em>/etc/apt/sources.list.d</em>.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>Inject the lists directly into <em>/var/lib/apt/lists</em>.  This step is to save running updating all apt sources which is undesirable during a build; apt and aptitude do not support updating a single source at present.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>Regenerate the apt caches to ensure everything is in sync.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>Install the dummy dependency package with apt or aptitude; the dummy package is pulled from the local apt archive, while all its dependencies are pulled from the regular configured apt sources.</p>
  </dd>

</dl>
<p>At the end of the build, the local archive is removed, along with the rest of the build tree.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p>The following environment variables are used by <strong>sbuild</strong>:</p>
<dl class='dl-vertical'>
  <dt>
    HOME
  </dt>
  <dd>
    <p>The home directory of the user.</p>
  </dd>
  <dt>
    LOGNAME
  </dt>
  <dd>
    <p>Used in lockfiles.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/sbuild/sbuild.conf</em></p>
  </dt>
  <dd>
    <p>Configuration, maintained by the system administrator.  This may be used to override the defaults.</p>
  </dd>
  <dt>
    <p><em>/etc/sbuild/chroot</em></p>
  </dt>
  <dd>
    <p>Directory containing symbolic links to chroots.  This is only used for sudo chroot access; schroot access uses the schroot chroot configuration.</p>
  </dd>
  <dt>
    <p><em>~/.sbuildrc</em></p>
  </dt>
  <dd>
    <p>User-specific configuration.</p>
  </dd>
  <dt>
    <p><em>/var/lib/sbuild</em></p>
  </dt>
  <dd>
    <p>Build trees, archive signing keys, build statistics and lock files.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Roman Hodek &lt;Roman.Hodek@informatik.uni-erlangen.de&gt;.</p><p><strong>sbuild</strong> is based on debbuild, written by James Troup &lt;james@nocrew.org&gt; and has been modified by</p>
<pre>
Ben Collins &lt;bcollins@debian.org&gt;,
Ryan Murray &lt;rmurray@debian.org&gt;,
Francesco Paolo Lovergine &lt;frankie@debian.org&gt;,
Michael Banck &lt;mbanck@debian.org&gt;, and
Roger Leigh &lt;rleigh@debian.org&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

<pre>
Copyright \[co] 1998-2000 Roman Hodek &lt;roman\@hodek.net&gt;
Copyright \[co] 1998-1999 James Troup &lt;troup\@debian.org&gt;
Copyright \[co] 2003-2006 Ryan Murray &lt;rmurray\@debian.org&gt;
Copyright \[co] 2001-2003 Rick Younie &lt;younie\@debian.org&gt;
Copyright \[co] 2003-2004 Francesco Paolo Lovergine &lt;frankie\@debian.org&gt;
Copyright \[co] 2005      Michael Banck &lt;mbanck\@debian.org&gt;
Copyright \[co] 2005-2009 Roger Leigh &lt;rleigh\@debian.org&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sbuild&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/sbuild.conf.5.html"><strong>sbuild.conf</strong>(5)</a>, <a href="../man1/sbuild-abort.1.html"><strong>sbuild-abort</strong>(1)</a>, <a href="../man8/sbuild-adduser.8.html"><strong>sbuild-adduser</strong>(8)</a>, <a href="../man1/sbuild-apt.1.html"><strong>sbuild-apt</strong>(1)</a>, <a href="../man1/sbuild-checkpackages.1.html"><strong>sbuild-checkpackages</strong>(1)</a>, <a href="../man8/sbuild-createchroot.8.html"><strong>sbuild-createchroot</strong>(8)</a>, <a href="../man1/sbuild-distupgrade.1.html"><strong>sbuild-distupgrade</strong>(1)</a>, <a href="../man1/sbuild-hold.1.html"><strong>sbuild-hold</strong>(1)</a>, <strong>sbuild-setup</strong>(7). <a href="../man1/sbuild-shell.1.html"><strong>sbuild-shell</strong>(1)</a>, <a href="../man1/sbuild-unhold.1.html"><strong>sbuild-unhold</strong>(1)</a>, <a href="../man1/sbuild-update.1.html"><strong>sbuild-update</strong>(1)</a>, <a href="../man1/sbuild-upgrade.1.html"><strong>sbuild-upgrade</strong>(1)</a>, <a href="../man1/schroot.1.html"><strong>schroot</strong>(1)</a>,</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sbtedit.1.html"><span aria-hidden="true">&larr;</span> sbtedit.1: Genbank submission template editor</a></li>
   <li class="next"><a href="sbuild-abort.1.html">sbuild-abort.1: Abort the current sbuild build <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
