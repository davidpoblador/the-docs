<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>perl-cross-staging: Long term maintenance of cross-build support for the debian configuration of perl</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Long term maintenance of cross-build support for the debian configuration of perl">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="perl-cross-staging (1) manual">
  <meta name="twitter:description" content="Long term maintenance of cross-build support for the debian configuration of perl">
  <meta name="twitter:image" content="https://www.carta.tech/images/perl-cross-debian-perl-cross-staging-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/perl-cross-staging.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="perl-cross-staging (1) manual" />
  <meta property="og:description" content="Long term maintenance of cross-build support for the debian configuration of perl" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/perl-cross-debian-perl-cross-staging-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">perl-cross-staging<small> (1)</small></h1>
        <p class="lead">Long term maintenance of cross-build support for the debian configuration of perl</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/perl-cross-staging.1.html">
      <span itemprop="name">perl-cross-staging: Long term maintenance of cross-build support for the debian configuration of perl</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/perl-cross-debian/">
      <span itemprop="name">perl-cross-debian</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/perl-cross-staging.1.html">
      <span itemprop="name">perl-cross-staging: Long term maintenance of cross-build support for the debian configuration of perl</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-staging</strong></p><p><strong>perl-cross-staging</strong> takes no commands or options.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>perl-cross-staging</strong> supports the long term maintenance of cross-build support for the Debian configuration of perl.</p><p><strong>perl-cross-staging</strong> assists in the producuction of config files from the current perl build tree to update existing perl-cross-debian support by staging native builds of perl patched to support <strong>perl-cross-staging</strong>.</p><p>Config files generated by <strong>perl-cross-staging</strong> need substantial manual editing and updating before being usable for a cross-build or inclusion into <strong>perl-cross-debian</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UPDATING CROSS CONFIG FILES</h2>
        <div class="sectioncontent">
<p>Each new version of perl introduces and rearranges the existing config values and the config.h and config.sh files for each variant need to be updated.</p><p>Some sections simply need to be moved around within the file for easier comparison, some sections will be new (and may need adjustment if the new values are architecture-sensitive) and some may need to be removed. Some values include the version string of the perl version being built. Some values include the name of the compiler or preprocessor. There are values which specify the original build directory and these need to be replaced with PERL_BUILD_DIR:</p>
<pre>
installarchlib=&apos;PERL_BUILD_DIR/debian/tmp/usr/lib/perl/5.16&apos;

</pre>
<p>Missing values will be easiest to spot as these cause the build to fail with invalid preprocessing directives.</p>
<pre>
config.h:2229:3: error: invalid preprocessing directive #HAS_STATIC_INLINE
config.h:2766:3: error: invalid preprocessing directive #HAS_SOCKADDR_SA_LEN
config.h:2773:3: error: invalid preprocessing directive #HAS_SIN6_SCOPE_ID
config.h:3614:3: error: invalid preprocessing directive #HAS_PRCTL
config.h:3615:3: error: invalid preprocessing directive #HAS_PRCTL_SET_NAME
</pre>
<p>Probably the biggest problem is reorganisation of the files which arises because the files are all generated, rather than edited. This can easily lead to sections being added in one place of the file and being repeated (with differing values) elsewhere. Use a comparison tool like <strong>meld</strong> to push snippets in and out of the staged files with usable previous/next search/find regexp support.</p><p>Once one of the variant files has been updated, merge the changes into the other staged variants before comparing those with the files from the previous version of perl.</p><p>Old perl version strings also need to be updated.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARCHITECTURE</h2>
        <div class="sectioncontent">
<p>Typically, <strong>perl-cross-staging</strong> is run for the native architecture on the expectation that most of the updates to the staged files will include changes for the cross architecture. e.g. updates for 5.16.2 were prepared by staging amd64 and porting the updates into the cross architecture files for 5.14.2.</p><p><strong>perl-cross-staging</strong> does support attempting to stage a cross build but this has not been tested. Please report success or failure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UPSTREAM SUPPORT</h2>
        <div class="sectioncontent">
<p>Note that work is ongoing to get perl cross-building upstream and this is not complete. <strong>perl-cross-staging</strong> will need changes once this work is complete. The aim is to make it easier to obtain the configuration value cache for architectures where real hardware or an emulation model can be accessed over a network. This work takes place at https://github.com/codehelp/perl/tree/jrobinson/configure-for-cross which is intermittently pulled into the main cross-configure branch at https://github.com/castaway/perl/tree/jrobinson/configure-for-cross</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Currently <strong>perl-cross-staging</strong> does not substitute the working directory for PERL_BUILD_DIR in the .sh scripts - this is left as one of the manual steps required before including the generated files into <strong>perl-cross-debian</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Neil Williams</strong> &lt;codehelp@debian.org&gt;</p><p>Wrote this manpage for the Debian system.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2012 Neil Williams</p><p>This manual page was written for the Debian system (and may be used by others).</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2 or (at your option) any later version published by the Free Software Foundation.</p><p>On Debian systems, the complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="perl-cross-debian.1.html"><span aria-hidden="true">&larr;</span> perl-cross-debian.1: Long term maintenance of cross-build support for the debian configuration of perl</a></li>
   <li class="next"><a href="perl-depends.1.html">perl-depends.1: Rough indicator of perl module dependencies <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
