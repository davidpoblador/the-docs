<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dimfilter: Directional filtering of 2-d gridded files in the space (or time) domain</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Directional filtering of 2-d gridded files in the space (or time) domain">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dimfilter (1gmt) manual">
  <meta name="twitter:description" content="Directional filtering of 2-d gridded files in the space (or time) domain">
  <meta name="twitter:image" content="https://www.carta.tech/images/gmt-dimfilter-1gmt.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1gmt/dimfilter.1gmt.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dimfilter (1gmt) manual" />
  <meta property="og:description" content="Directional filtering of 2-d gridded files in the space (or time) domain" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gmt-dimfilter-1gmt.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dimfilter<small> (1gmt)</small></h1>
        <p class="lead">Directional filtering of 2-d gridded files in the space (or time) domain</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/dimfilter.1gmt.html">
      <span itemprop="name">dimfilter: Directional filtering of 2-d gridded files in the space (or time) domain</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gmt/">
      <span itemprop="name">gmt</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1gmt/dimfilter.1gmt.html">
      <span itemprop="name">dimfilter: Directional filtering of 2-d gridded files in the space (or time) domain</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dimfilter</strong> <em>input_file.grd</em> <strong>-D</strong><em>distance_flag</em> <strong>-F</strong><em>&lt;filtertype&gt;&lt;width&gt;</em>[<em>mode</em>] <strong>-G</strong><em>output_file.grd</em> <strong>-N</strong><em>&lt;filtertype&gt;&lt;n_sectors&gt;</em> <strong>-Q</strong><em>cols</em> [ <strong>-I</strong><em>xinc</em>[<em>unit</em>][<strong>=</strong>|<strong>+</strong>][/<em>yinc</em>[<em>unit</em>][<strong>=</strong>|<strong>+</strong>]] ] [ <strong>-R</strong><em>west</em>/<em>east</em>/<em>south</em>/<em>north</em>[<strong>r</strong>] ] [ <strong>-T</strong> ] [ <strong>-V</strong> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>dimfilter</strong> will filter a <em>.grd</em> file in the space (or time) domain by dividing the given filter circle into <em>n_sectors</em>, applying one of the selected primary convolution or non-convolution filters to each sector, and choosing the final outcome according to the selected secondary filter.  It computes distances using Cartesian or Spherical geometries. The output <em>.grd</em> file can optionally be generated as a sub<strong>-R</strong>egion of the input and/or with a new <strong>-I</strong> ncrement.  In this way, one may have "extra space" in the input data so that the edges will not be used and the output can be within one-half-width of the input edges.  If the filter is low-pass, then the output may be less frequently sampled than the input. <strong>-Q</strong> is for the error analysis mode and only requires the total number of columns in the input file, which contains the filtered depths.  Finally, one should know that <strong>dimfilter</strong> will not produce a smooth output as other spatial filters do because it returns a minimum median out of <em>N</em> medians of <em>N</em> sectors.  The output can be edgy unless the input data is noise-free.  Thus, an additional filtering (e.g., Gaussian) to the DiM-filtered data is generally recommended.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>input_file.grd</em></p>
  </dt>
  <dd>
    <p>The file of points to be filtered.</p>
  </dd>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>Distance <em>flag</em> tells how grid (x,y) relates to filter <em>width</em> as follows:</p><p><em>flag</em> = 0:  grid (x,y) same units as <em>width</em>, Cartesian distances.</p><p><em>flag</em> = 1:  grid (x,y) in degrees, <em>width</em> in kilometers, Cartesian distances.</p><p><em>flag</em> = 2:  grid (x,y) in degrees, <em>width</em> in km, dx scaled by cos(middle y), Cartesian distances.</p><p>The above options are fastest because they allow weight matrix to be computed only once. The next three options are slower because they recompute weights for each latitude.</p><p><em>flag</em> = 3:  grid (x,y) in degrees, <em>width</em> in km, dx scaled by cosine(y), Cartesian distance calculation.</p><p><em>flag</em> = 4:  grid (x,y) in degrees, <em>width</em> in km, Spherical distance calculation.</p>
  </dd>
  <dt>
    <p><strong>-F</strong></p>
  </dt>
  <dd>
    <p>Sets the primary filter type.  Choose among convolution and non-convolution filters.  Append the filter code followed by the full diameter <em>width</em>. Available convolution filters are:</p><p>(<strong>b</strong>) Boxcar: All weights are equal.</p><p>(<strong>c</strong>) Cosine Arch: Weights follow a cosine arch curve.</p><p>(<strong>g</strong>) Gaussian: Weights are given by the Gaussian function.</p><p>Non-convolution filters are:</p><p>(<strong>m</strong>) Median: Returns median value.</p><p>(<strong>p</strong>) Maximum likelihood probability (a mode estimator): Return modal value. If more than one mode is found we return their average value.  Append - or + to the filter width if you rather want to return the smallest or largest of the modal values.</p>
  </dd>
  <dt>
    <p><strong>-N</strong></p>
  </dt>
  <dd>
    <p>Sets the secondary filter type and the number of bow-tie sectors. <em>n_sectors</em> must be integer and larger than 0. When <em>n_sectors</em> is set to 1, the secondary filter is not effective.  Available secondary filters are:</p><p>(<strong>l</strong>) Lower: Return the minimum of all filtered values.</p><p>(<strong>u</strong>) Upper: Return the maximum of all filtered values.</p><p>(<strong>a</strong>) Average: Return the mean of all filtered values.</p><p>(<strong>m</strong>) Median: Return the median of all filtered values.</p><p>(<strong>p</strong>) Mode: Return the mode of all filtered values.</p>
  </dd>
  <dt>
    <p><strong>-G</strong></p>
  </dt>
  <dd>
    <p><em>output_file.grd</em> is the output of the filter.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-I</strong></p>
  </dt>
  <dd>
    <p><em>x_inc</em> [and optionally <em>y_inc</em>] is the output Increment. Append <strong>m</strong> to indicate minutes, or <strong>c</strong> to indicate seconds. If  the new <em>x_inc, y_inc</em> are NOT integer multiples of the old ones (in the input data), filtering will be considerably slower. [Default:  Same as input.]</p>
  </dd>
  <dt>
    <p><strong>-R</strong></p>
  </dt>
  <dd>
    <p><em>west, east, south, </em>and <em>north</em> defines the Region of the output points.  [Default:  Same as input.]</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Toggle the node registration for the output grid so as to become the opposite of the input grid [Default gives the same registration as the input grid].</p>
  </dd>
  <dt>
    <p><strong>-Q</strong></p>
  </dt>
  <dd>
    <p><em>cols</em> is the total number of columns in the input file.  For this mode, it expects to read depths consisted of several columns. Each column represents a filtered grid with a filter width, which can be obtained by 'grd2xyz -Z'. The outcome will be median, MAD, and mean. So, the column with the medians is used to generate the regional component and the column with the MADs to conduct the error analysis.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Selects verbose mode, which will send progress reports to stderr [Default runs "silently"].</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GRID FILE FORMATS</h2>
        <div class="sectioncontent">
<p>By default <strong>GMT</strong> writes out grid as single precision floats in a COARDS-complaint netCDF file format. However, <strong>GMT</strong> is able to produce grid files in many other commonly used grid file formats and also facilitates so called "packing" of grids, writing out floating point data as 2- or 4-byte integers. To specify the precision, scale and offset, the user should add the suffix <strong>=</strong><em>id</em>[<strong>/</strong><em>scale</em><strong>/</strong><em>offset</em>[<strong>/</strong><em>nan</em>]], where <em>id</em> is a two-letter identifier of the grid type and precision, and <em>scale</em> and <em>offset</em> are optional scale factor and offset to be applied to all grid values, and <em>nan</em> is the value used to indicate missing data. When reading grids, the format is generally automatically recognized. If not, the same suffix can be added to input grid file names. See <strong>grdreformat</strong>(1) and Section 4.17 of the GMT Technical Reference and Cookbook for more information.</p><p>When reading a netCDF file that contains multiple grids, <strong>GMT</strong> will read, by default, the first 2-dimensional grid that can find in that file. To coax <strong>GMT</strong> into reading another multi-dimensional variable in the grid file, append <strong>?</strong><em>varname</em> to the file name, where <em>varname</em> is the name of the variable. Note that you may need to escape the special meaning of <strong>?</strong> in your shell program by putting a backslash in front of it, or by placing the filename and suffix between quotes or double quotes. The <strong>?</strong><em>varname</em> suffix can also be used for output grids to specify a variable name different from the default: "z". See <strong>grdreformat</strong>(1) and Section 4.18 of the GMT Technical Reference and Cookbook for more information, particularly on how to read splices of 3-, 4-, or 5-dimensional grids.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GEOGRAPHICAL AND TIME COORDINATES</h2>
        <div class="sectioncontent">
<p>When the output grid type is netCDF, the coordinates will be labeled "longitude", "latitude", or "time" based on the attributes of the input data or grid (if any) or on the <strong>-f</strong> or <strong>-R</strong> options. For example, both <strong>-f0x</strong> <strong>-f1t</strong> and <strong>-R</strong> 90w/90e/0t/3t will result in a longitude/time grid. When the x, y, or z coordinate is time, it will be stored in the grid as relative time since epoch as specified by <strong>TIME_UNIT</strong> and <strong>TIME_EPOCH</strong> in the .gmtdefaults file or on the command line. In addition, the <strong>unit</strong> attribute of the time variable will indicate both this unit and epoch.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Suppose that north_pacific_dbdb5.grd is a file of 5 minute bathymetry from 140E to 260E and 0N to 50N, and you want to find the medians of values within a 300km radius (600km full width) of the output points, which you choose to be from 150E to 250E and 10N to 40N, and you want the output values every 0.5 degree. To prevent the medians from being biased by the sloping plane, you want to divide the filter circle into 6 sectors and to choose the lowest value among 6 medians. Using spherical distance calculations, you need:</p><p><strong>dimfilter</strong> north_pacific_dbdb5.grd <strong>-G</strong> filtered_pacific.grd <strong>-Fm</strong>600 <strong>-D</strong> 4 <strong>-N</strong> l6 <strong>-R</strong>150/250/10/40 <strong>-I</strong> 0.5 <strong>-V</strong></p><p>Suppose that cape_verde.grd is a file of 0.5 minute bathymetry from 32W to 15W and 8N to 25N, and you want to remove small-length-scale features in order to define a swell in an area extending from 27.5W to 20.5W and 12.5N to 19.5N, and you want the output value every 2 minute. Using cartesian distance calculations, you need:</p><p><strong>dimfilter</strong> cape_verde.grd <strong>-G</strong> t.grd <strong>-Fm</strong>220 <strong>-Nl</strong>8 <strong>-D</strong> 2 <strong>-R</strong>-27.5/-20.5/12.5/19.5 <strong>-I</strong> 2m <strong>-V</strong></p><p><strong>grdfilter</strong> t.grd <strong>-G</strong> cape_swell.grd <strong>-Fg</strong>50 <strong>-D</strong> 2 <strong>-V</strong></p><p>Suppose that you found a range of filter widths for a given area, and you filtered the given bathymetric data using the range of filter widths (e.g., <em>f100.grd f110.grd f120.grd f130.grd</em>), and you want to define a regional trend using the range of filter widths, and you want to obtain median absolute deviation (MAD) estimates at each data point, you need:</p><p><strong>grd2xyz</strong> f100.grd <strong>-Z</strong> &gt; f100.d</p><p><strong>grd2xyz</strong> f110.grd <strong>-Z</strong> &gt; f110.d</p><p><strong>grd2xyz</strong> f120.grd <strong>-Z</strong> &gt; f120.d</p><p><strong>grd2xyz</strong> f130.grd <strong>-Z</strong> &gt; f130.d</p><p><strong>paste</strong> f100.d f110.d f120.d f130.d &gt; depths.d</p><p><strong>dimfilter</strong> depths.d <strong>-Q</strong>4 &gt; output.z</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>When working with geographic (lat, lon) grids, all three convolution filters (boxcar, cosine arch, and gaussian) will properly normalize the filter weights for the variation in gridbox size with latitude, and correctly determine which nodes are needed for the convolution when the filter "circle" crosses a periodic (0-360) boundary or contains a geographic pole.  However, the spatial filters, such as median and mode filters, do not use weights and thus should only be used on Cartesian grids (or at very low latitudes) only.  If you want to apply such spatial filters you should project your data to an equal-area projection and run dimfilter on the resulting Cartesian grid.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SCRIPT TEMPLATE</h2>
        <div class="sectioncontent">
<p>The dim.template.sh is a skeleton shell script that can be used to set up a complete DiM analysis, including the MAD analysis.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REFERENCE</h2>
        <div class="sectioncontent">
<p>Kim, S.-S., and Wessel, P. (2008), Directional Median Filtering for Regional-Residual Separation of Bathymetry, <em>Geochem. Geophys. Geosyst.,</em> 9(Q03005), doi:10.1029/2007GC001850.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dimfilter&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/gmt.1.html"><strong>GMT</strong>(1)</a>, <strong>grdfilter</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dat2gmt.1gmt.html"><span aria-hidden="true">&larr;</span> dat2gmt.1gmt: Convert an ascii file to a binary gmt file</a></li>
   <li class="next"><a href="gmt-filter1d.1gmt.html">filter1d.1gmt: Time domain filtering of 1-d time series <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
