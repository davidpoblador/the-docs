<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lfc-setacl: Set lfc directory/file access control lists</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Set lfc directory/file access control lists">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lfc-setacl (1) manual">
  <meta name="twitter:description" content="Set lfc directory/file access control lists">
  <meta name="twitter:image" content="https://www.carta.tech/images/lfc-lfc-setacl-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/lfc-setacl.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lfc-setacl (1) manual" />
  <meta property="og:description" content="Set lfc directory/file access control lists" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lfc-lfc-setacl-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lfc-setacl<small> (1)</small></h1>
        <p class="lead">Set lfc directory/file access control lists</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lfc-setacl.1.html">
      <span itemprop="name">lfc-setacl: Set lfc directory/file access control lists</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lfc/">
      <span itemprop="name">lfc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/lfc-setacl.1.html">
      <span itemprop="name">lfc-setacl: Set lfc directory/file access control lists</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lfc-setacl</strong> [<strong>-d</strong>] [<strong>-m</strong>] [<strong>-s</strong>] <em>acl_entries</em> <em>path</em>...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>lfc-setacl</strong> sets the Access Control List associated with a LFC directory/file.</p><p><em>acl_entries</em> is a comma separated list of entries. Each entry has colon separated fields: ACL type, id (uid or gid), permission. Only directories can have default ACL entries.</p><p>The entries look like:</p>
<pre>
     user::perm
     user:uid:perm
     group::perm
     group:gid:perm
     mask:perm
     other:perm
     default:user::perm
     default:user:uid:perm
     default:group::perm
     default:group:gid:perm
     default:mask:perm
     default:other:perm
</pre>
<p>The ACL type can be abbreviated to the first letter. The first "user" entry gives the permissions granted to the owner of the file. The following "user" entries show the permissions granted to specific users, they are sorted in ascending order of uid. The first "group" entry gives the permissions granted to the group owner of the file. The following "group" entries show the permissions granted to specific groups, they are sorted in ascending order of gid. The "mask" entry is the maximum permission granted to specific users or groups. It does not affect the "owner" and "other" permissions. The "mask" entry must be present if there are specific "user" or "group" entries. "default" entries associated with a directory are inherited as access ACL by the files or sub-directories created in that directory. The <strong>umask</strong> is not used. Sub-directories also inherit the default ACL as default ACL. As soon as there is one default ACL entry, the 3 default ACL base entries (default user, default group, default other) must be present.</p><p>The entry processing conforms to the Posix 1003.1e draft standard 17.</p><p>The effective user ID of the process must match the owner of the file or the caller must have ADMIN privilege in the Cupv database.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>path</em></p>
  </dt>
  <dd>
    <p>specifies the LFC pathname. If <em>path</em> does not start with <strong>/</strong>, it is prefixed by the content of the <strong>LFC_HOME</strong> environment variable.</p>
  </dd>
  <dt>
    <p><em>uid</em></p>
  </dt>
  <dd>
    <p>can be given as the username or the corresponding numeric id.</p>
  </dd>
  <dt>
    <p><em>gid</em></p>
  </dt>
  <dd>
    <p>can be given as the groupname or the corresponding numeric id.</p>
  </dd>
  <dt>
    <p><em>perm</em></p>
  </dt>
  <dd>
    <p>can be expressed as a combination of characters <strong>rwx-</strong> or as a value between 0 and 7.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>remove ACL entries. The "perm" field is ignored.</p>
  </dd>
  <dt>
    <p><strong>-m</strong></p>
  </dt>
  <dd>
    <p>modify existing ACL entries or add new entries.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>set the ACL entries. The complete set of ACL entries is replaced.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Let's create a directory:</p>
<pre>
	lfc-mkdir /grid/atlas/test/file.log/d6
</pre>
<p>and add write permission for user bcouturi:</p>
<pre>
	lfc-setacl -m u:bcouturi:rwx,m:rwx /grid/atlas/test/file.log/d6
</pre>
<p>Let's create a directory:</p>
<pre>
	lfc-mkdir /grid/atlas/test/file.log/d7
</pre>
<p>and add default ACLs to it:</p>
<pre>
	lfc-setacl -m d:u::7,d:g::7,d:o:5 /grid/atlas/test/file.log/d7
</pre>
<p>Let's check the resulting ACLs:</p>
<pre>
	lfc-getacl /grid/atlas/test/file.log/d7
# file: /grid/atlas/test/file.log/d7
# owner: baud
# group: c3
user::rwx
group::r-x              #effective:r-x
other::r-x
default:user::rwx
default:group::rwx
default:other::r-x
</pre>
<p>Let's create a sub-directory and check the resulting ACLs:</p>
<pre>
	lfc-mkdir /grid/atlas/test/file.log/d7/d2
	lfc-getacl /grid/atlas/test/file.log/d7/d2
# file: /grid/atlas/test/file.log/d7/d2
# owner: baud
# group: c3
user::rwx
group::rwx              #effective:rwx
other::r-x
default:user::rwx
default:group::rwx
default:other::r-x
</pre>
<p>Let's create a file in the same directory and check the resulting ACLs:</p>
<pre>
	lfc-touch /grid/atlas/test/file.log/d7/f2
	lfc-getacl /grid/atlas/test/file.log/d7/f2
# file: /grid/atlas/test/file.log/d7/f2
# owner: baud
# group: c3
user::rw-
group::rw-              #effective:rw-
other::r--
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p>This program returns 0 if the operation was successful or &gt;0 if the operation failed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lfc-setacl&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man4/Castor_limits.4.html"><strong>Castor_limits</strong>(4)</a></strong>, <a href="../man3/lfc_chmod.3.html"><strong>lfc_chmod</strong>(3)</a></strong>, <a href="../man3/lfc_chown.3.html"><strong>lfc_chown</strong>(3)</a></strong>, <strong>Cupvlist</strong>(1)</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>LCG Grid Deployment</strong> Team</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lfc-rmusrmap.1.html"><span aria-hidden="true">&larr;</span> lfc-rmusrmap.1: Suppress user entry corresponding to a given virtual uid or user name</a></li>
   <li class="next"><a href="lfc-setcomment.1.html">lfc-setcomment.1: Add/replace a comment associated with a file/directory <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
