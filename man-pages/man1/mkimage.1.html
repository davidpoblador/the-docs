<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mkimage: Generate image for u-boot</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Generate image for u-boot">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mkimage (1) manual">
  <meta name="twitter:description" content="Generate image for u-boot">
  <meta name="twitter:image" content="https://www.carta.tech/images/u-boot-tools-mkimage-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mkimage.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mkimage (1) manual" />
  <meta property="og:description" content="Generate image for u-boot" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/u-boot-tools-mkimage-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mkimage<small> (1)</small></h1>
        <p class="lead">Generate image for u-boot</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mkimage.1.html">
      <span itemprop="name">mkimage: Generate image for u-boot</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/u-boot-tools/">
      <span itemprop="name">u-boot-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mkimage.1.html">
      <span itemprop="name">mkimage: Generate image for u-boot</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mkimage</strong> -l [<strong>uimage file name</strong>]</p><p><strong>mkimage</strong> [<em>options</em>]<strong> -f [</strong>image tree source file<strong>]</strong> [<strong>uimage file name</strong>]</p><p><strong>mkimage</strong> [<em>options</em>]<strong> -F [</strong>uimage file name<strong>]</strong></p><p><strong>mkimage</strong> [<em>options</em>]<strong> (legacy mode)</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>mkimage</strong> command is used to create images for use with the U-Boot boot loader. These images can contain the linux kernel, device tree blob, root file system image, firmware images etc., either separate or combined.</p><p><strong>mkimage</strong> supports two different formats:</p><p>The old <em>legacy image</em> format concatenates the individual parts (for example, kernel image, device tree blob and ramdisk image) and adds a 64 bytes header containing information about target architecture, operating system, image type, compression method, entry points, time stamp, checksums, etc.</p><p>The new <em>FIT (Flattened Image Tree) format</em> allows for more flexibility in handling images of various types and also enhances integrity protection of images with stronger checksums. It also supports verified boot.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>List image information:</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-l [</strong><em>uimage file name</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>mkimage lists the information contained in the header of an existing U-Boot image.</p>
  </dd>

</dl>
<p><strong>Create old legacy image:</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-A [</strong><em>architecture</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set architecture. Pass -h as the architecture to see the list of supported architectures.</p>
  </dd>
  <dt>
    <p><strong>-O [</strong><em>os</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set operating system. bootm command of u-boot changes boot method by os type. Pass -h as the OS to see the list of supported OS.</p>
  </dd>
  <dt>
    <p><strong>-T [</strong><em>image type</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set image type. Pass -h as the image to see the list of supported image type.</p>
  </dd>
  <dt>
    <p><strong>-C [</strong><em>compression type</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set compression type. Pass -h as the compression to see the list of supported compression type.</p>
  </dd>
  <dt>
    <p><strong>-a [</strong><em>load addess</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set load address with a hex number.</p>
  </dd>
  <dt>
    <p><strong>-e [</strong><em>entry point</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set entry point with a hex number.</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>List the contents of an image.</p>
  </dd>
  <dt>
    <p><strong>-n [</strong><em>image name</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set image name to 'image name'.</p>
  </dd>
  <dt>
    <p><strong>-d [</strong><em>image data file</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Use image data from 'image data file'.</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>Set XIP (execute in place) flag.</p>
  </dd>

</dl>
<p><strong>Create FIT image:</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-c [</strong><em>comment</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Specifies a comment to be added when signing. This is typically a useful message which describes how the image was signed or some other useful information.</p>
  </dd>
  <dt>
    <p><strong>-D [</strong><em>dtc options</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Provide special options to the device tree compiler that is used to create the image.</p>
  </dd>
  <dt>
    <p><strong>-f [</strong><em>image tree source file</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Image tree source file that describes the structure and contents of the FIT image.</p>
  </dd>
  <dt>
    <p><strong>-F</strong></p>
  </dt>
  <dd>
    <p>Indicates that an existing FIT image should be modified. No dtc compilation is performed and the -f flag should not be given. This can be used to sign images with additional keys after initial image creation.</p>
  </dd>
  <dt>
    <p><strong>-k [</strong><em>key_directory</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Specifies the directory containing keys to use for signing. This directory should contain a private key file &lt;name&gt;.key for use with signing and a certificate &lt;name&gt;.crt (containing the public key) for use with verification.</p>
  </dd>
  <dt>
    <p><strong>-K [</strong><em>key_destination</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Specifies a compiled device tree binary file (typically .dtb) to write public key information into. When a private key is used to sign an image, the corresponding public key is written into this file for for run-time verification. Typically the file here is the device tree binary used by CONFIG_OF_CONTROL in U-Boot.</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>Specifies that keys used to sign the FIT are required. This means that they must be verified for the image to boot. Without this option, the verification will be optional (useful for testing but not for release).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>List image information:</p>
<pre>
<strong>mkimage -l uImage</strong>
</pre>
<p>Create legacy image with compressed PowerPC Linux kernel:</p>
<pre>
<strong>mkimage -A powerpc -O linux -T kernel -C gzip &#92;&#92;</strong>

<strong>-a 0 -e 0 -n Linux -d vmlinux.gz uImage</strong>
</pre>
<p>Create FIT image with compressed PowerPC Linux kernel:</p>
<pre>
<strong>mkimage -f kernel.its kernel.itb</strong>
</pre>
<p>Create FIT image with compressed kernel and sign it with keys in the /public/signing-keys directory. Add corresponding public keys into u-boot.dtb, skipping those for which keys cannot be found. Also add a comment.</p>
<pre>
<strong>mkimage -f kernel.its -k /public/signing-keys -K u-boot.dtb &#92;&#92;</strong>
-c "Kernel 3.8 image for production devices" kernel.itb
</pre>
<p>Update an existing FIT image, signing it with additional keys. Add corresponding public keys into u-boot.dtb. This will resign all images with keys that are available in the new directory. Images that request signing with unavailable keys are skipped.</p>
<pre>
<strong>mkimage -F -k /secret/signing-keys -K u-boot.dtb &#92;&#92;</strong>
-c "Kernel 3.8 image for production devices" kernel.itb
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOMEPAGE</h2>
        <div class="sectioncontent">
<p>http://www.denx.de/wiki/U-Boot/WebHome</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Nobuhiro Iwamatsu &lt;iwamatsu@nigauri.org&gt; and Wolfgang Denk &lt;wd@denx.de&gt;. It was updated for image signing by Simon Glass &lt;sjg@chromium.org&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mkid.1.html"><span aria-hidden="true">&larr;</span> mkid.1: Build an identifier database</a></li>
   <li class="next"><a href="mkjobtexmf.1.html">mkjobtexmf.1: Generate a texmf tree for a particular job <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
