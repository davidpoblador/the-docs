<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>r.compress: Compresses and decompresses raster maps.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Compresses and decompresses raster maps.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="r.compress (1grass) manual">
  <meta name="twitter:description" content="Compresses and decompresses raster maps.">
  <meta name="twitter:image" content="https://www.carta.tech/images/grass-doc-r.compress-1grass.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1grass/r.compress.1grass.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="r.compress (1grass) manual" />
  <meta property="og:description" content="Compresses and decompresses raster maps." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/grass-doc-r.compress-1grass.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">r.compress<small> (1grass)</small></h1>
        <p class="lead">Compresses and decompresses raster maps.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1grass/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1grass/r.compress.1grass.html">
      <span itemprop="name">r.compress: Compresses and decompresses raster maps.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/grass-doc/">
      <span itemprop="name">grass-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1grass/r.compress.1grass.html">
      <span itemprop="name">r.compress: Compresses and decompresses raster maps.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">KEYWORDS</h2>
        <div class="sectioncontent">
<p>raster, map management</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>r.compress</strong></p><p><strong>r.compress help</strong></p><p><strong>r.compress</strong> [-<strong>uq</strong>] <strong>map</strong>=<em>string</em>[,<em>string</em>,...]  [--<strong>verbose</strong>]  [--<strong>quiet</strong>]</p><h3>Flags:</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>-u</strong>
  </dt>
  <dd>
    <p>Uncompress the map</p>
  </dd>
  <dt>
    <strong>-q</strong>
  </dt>
  <dd>
    <p>Run quietly</p>
  </dd>
  <dt>
    <strong>--verbose</strong>
  </dt>
  <dd>
    <p>Verbose module output</p>
  </dd>
  <dt>
    <strong>--quiet</strong>
  </dt>
  <dd>
    <p>Quiet module output</p>
  </dd>

</dl>

<h3>Parameters:</h3>

<dl class='dl-vertical'>
  <dt>
    <strong>map</strong>=<em>string[,</em><em>string</em>,...]
  </dt>
  <dd>
    <p>Name of existing raster map(s)</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The GRASS program <em>r.compress</em> can be used to compress and decompress raster map layers.</p><p>During compression, this program reformats raster maps using a run-length-encoding (RLE) algorithm.  Raster map layers which contain very little information (such as boundary, geology, soils and land use maps) can be greatly reduced in size. Some raster map layers are shrunk to roughly 1% of their original sizes.  Raster map layers containing complex images such as elevation and photo or satellite images may increase slightly in size. All new raster maps are now automatically stored in compressed form (see FORMATS below).  GRASS programs can read both compressed and regular (uncompressed) file formats.  This allows the use of whichever raster data format consumes less space.</p><p>As an example, the Spearfish data base raster map layer <em>owner</em> was originally a size of 26600 bytes.  After it was compressed, the raster map became only 1249 bytes (25351 bytes smaller).</p><p>Raster files may be decompressed to return them to their original format, using the <strong>-u</strong> flag of <em>r.compress</em>. If <em>r.compress</em> is asked to compress a raster map which is already compressed (or to decompress an already decompressed raster map), it simply informs the user the map is already (de)compressed and exits.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><em>r.compress</em> can be run either non-interactively or interactively.  In non-interactive use, the user must specify the name(s) of the raster map layer(s) to be compressed (or decompressed) on the command line, using the form <strong>map=</strong><em>name</em>[,<em>name</em>,...] (where each <em>name</em> is the name of a raster map layer to be compressed or decompressed). The default behavior is to compress the named map(s).</p><h3>FORMATS</h3>
<p>Conceptually, a raster data file consists of rows of cells, with each row containing the same number of cells.  A cell consists of one or more bytes.  The number of bytes per cell depends on the category values stored in the cell. Category values in the range 0-255 require 1 byte per cell, while category values in the range 256-65535 require 2 bytes, and category values in the range above 65535 require 3 (or more) bytes per cell.</p><p>The <strong>decompressed</strong> raster map format matches the conceptual format.  For example, a raster map with 1 byte cells that is 100 rows with 200 cells per row, consists of 20,000 bytes.  Running the UNIX command <em>ls -l</em> on this file will show a size of 20,000.  If the cells were 2 byte cells, the file would require 40,000 bytes.  The map layer category values start with the upper left corner cell followed by the other cells along the northern boundary. The byte following the last byte of that first row is the first cell of the second row of category values (moving from left to right).  There are no end-of-row markers or other syncing codes in the raster map.  A cell header file (<em>cellhd</em>) is used to define how this string of bytes is broken up into rows of category values.</p><p>The <strong>compressed</strong> format is not so simple, but is quite elegant in its design. It not only requires less disk space to store the raster data, but often can result in faster execution of graphic and analysis programs since there is less disk I/O. There are two compressed formats: the pre-version 3.0 format (which GRASS programs can read but no longer produce), and the version 3.0 format (which is automatically used when new raster map layers are created).</p><p>RLE compression versus zlib compression: if the environment variable GRASS_INT_ZLIB exists, new raster maps will be compressed using zlib instead of RLE compression. In the cellhd file, the value for &quot;compressed" is 1 for RLE and 2 for zlib.</p><p>Obviously, decompression is controlled by the raster's "compressed" header value, not the environment variable.</p>
<h3>PRE-3.0 FORMAT:</h3>
<p>First 3 bytes (chars) - These are a special code that identifies the raster data as compressed.</p><p>Address array (long) - array (size of the number of rows + 1) of addresses pointing to the internal start of each row. Because each row may be a different size, this array is necessary to provide a mapping of the data.</p><p>Row by row, beginning at the northern edge of the data, a series of byte groups describes the data.  The number of bytes in each group is the number of bytes per cell plus one.  The first byte of each group gives a count (up to 255) of the number of cells that contain the category values given by the remaining bytes of the group.</p>
<h3>POST-3.0 FORMAT:</h3>
<p>The 3 byte code is not used. Instead, a field in the cell header is used to indicate compressed format.</p><p>The address array is the same.</p><p>The RLE format is the same as the pre-3.0 RLE, except that each row of data is preceded by a single byte containing the number of bytes per cell for the row, and if run-length-encoding the row would not require less space than non-run-length-encoding, then the row is not encoded.</p><p>These improvements give better compression than the pre-3.0 format in 99% of the raster data layers.  The kinds of raster data layers which get bigger are those in which each row would be larger if compressed (e.g., imagery band files).  But even in this case the raster data layer would only be larger by the size of the address array and the single byte preceding each row.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO r.compress&hellip;</h2>
        <div class="sectioncontent">
<p><em>r.support</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>James Westervelt,</p><p>Michael Shapiro,</p><p>U.S. Army Construction Engineering Research Laboratory</p><p><em>Last changed: $Date: 2012-07-19 11:29:45 +0200 (Thu, 19 Jul 2012) $</em></p><p>Full index</p><p>© 2003-2014 GRASS Development Team</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="r.clump.1grass.html"><span aria-hidden="true">&larr;</span> r.clump.1grass: Recategorizes data in a raster map by grouping cells that form physically discrete areas into unique categories.</a></li>
   <li class="next"><a href="r.in.aster.1grass.html">r.in.aster.1grass: Georeference, rectify and import terra-aster imagery and relative dem's using gdalwarp. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
