<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mini-dinstall: Daemon for updating debian packages in a repository</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Daemon for updating debian packages in a repository">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mini-dinstall (1) manual">
  <meta name="twitter:description" content="Daemon for updating debian packages in a repository">
  <meta name="twitter:image" content="https://www.carta.tech/images/mini-dinstall-mini-dinstall-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mini-dinstall.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mini-dinstall (1) manual" />
  <meta property="og:description" content="Daemon for updating debian packages in a repository" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mini-dinstall-mini-dinstall-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mini-dinstall<small> (1)</small></h1>
        <p class="lead">Daemon for updating debian packages in a repository</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mini-dinstall.1.html">
      <span itemprop="name">mini-dinstall: Daemon for updating debian packages in a repository</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mini-dinstall/">
      <span itemprop="name">mini-dinstall</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mini-dinstall.1.html">
      <span itemprop="name">mini-dinstall: Daemon for updating debian packages in a repository</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mini-dinstall</strong> [<em>options</em>] [<em>directory</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mini-dinstall</strong> is a tool for installing Debian packages into a personal APT repository; it is very similar to the <strong>dinstall</strong> tool on auric: it takes a changes file and installs it into the Debian archive.</p><p>The main focus of operation is a changes file. This file specifies a set of Debian binary packages, and often contains a source package too. Changes files are intended to group both Debian source and binary packages together, so that there is a single file to manipulate when uploading a package.</p><p><strong>mini-dinstall</strong> takes a changes file in its <em>incoming</em> directory (or on its command line in batch mode), and installs the files it references into a directory, and sets up Packages and Sources files for use with APT.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RUNNING</h2>
        <div class="sectioncontent">
<p><strong>mini-dinstall</strong> can run in one of two modes: batch mode or daemon mode. In batch mode, the queue is process immediately, and the command exits when it is done. In daemon mode, which is the default, <strong>mini-dinstall</strong> runs in the background and continually checks the queue, and will process it whenever it has changed.</p><p>The optional <em>directory</em> argument specifies the root directory of the queue. If no argument is specified, the value from the configuration file is used.</p><p>The following options can be used:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-v</strong>, <strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>display extra information while running</p>
  </dd>
  <dt>
    <p><strong>-q</strong>, <strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>display as little information as possible</p>
  </dd>
  <dt>
    <p><strong>-c</strong>, <strong>--config</strong>=<em>FILE</em></p>
  </dt>
  <dd>
    <p>use FILE as the configuration file, instead of <em>~/.mini-dinstall.conf</em></p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--debug</strong></p>
  </dt>
  <dd>
    <p>output debugging information to the terminal and to the log</p>
  </dd>
  <dt>
    <p><strong>--no-log</strong></p>
  </dt>
  <dd>
    <p>don't write any information to the logs</p>
  </dd>
  <dt>
    <p><strong>--no-db</strong></p>
  </dt>
  <dd>
    <p>disable lookups on package database. <strong>apt-ftparchive</strong> run without --db option</p>
  </dd>
  <dt>
    <p><strong>-n</strong>, <strong>--no-act</strong></p>
  </dt>
  <dd>
    <p>don't perform any changes; useful in combination with the <strong>-v</strong> flag</p>
  </dd>
  <dt>
    <p><strong>-b</strong>, <strong>--batch</strong></p>
  </dt>
  <dd>
    <p>run in batch mode</p>
  </dd>
  <dt>
    <p><strong>-r</strong>, <strong>--run</strong></p>
  </dt>
  <dd>
    <p>tell the currently running daemon to process the queue immediately</p>
  </dd>
  <dt>
    <p><strong>-k</strong>, <strong>--kill</strong></p>
  </dt>
  <dd>
    <p>kill the currently running daemon</p>
  </dd>
  <dt>
    <p><strong>--help</strong></p>
  </dt>
  <dd>
    <p>display a short overview of available options</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>display the software version</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p><strong>mini-dinstall</strong>'s main configuration file is <em>~/.mini-dinstall.conf</em>. The file consists of a number of different sections, each one applying to a different distribution (which corresponds to the Distribution field in a changes file). There is also a default section (<strong>DEFAULT</strong>), which applies to all distributions.</p><p>Each section can contain any number of</p><p>name = value</p><p>combinations, which set a configuration parameter for that distribution (or the default one). Lists should be separated by commas, strings need only be enclosed with quotes if they contain spaces or commas, and boolean values should be 1 for true, and 0 for false.</p><p>The configuration parameters available in the <strong>DEFAULT</strong> section are as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>archivedir</strong></p>
  </dt>
  <dd>
    <p>The root of the <strong>mini-dinstall</strong> archive. Must be set, either here or on the command line.</p>
  </dd>
  <dt>
    <p><strong>extra_keyrings</strong></p>
  </dt>
  <dd>
    <p>Additional GnuPG keyrings to use for signature verification.</p>
  </dd>
  <dt>
    <p><strong>incoming_permissions</strong></p>
  </dt>
  <dd>
    <p>The permissions for the <em>incoming</em> directory. <strong>mini-dinstall</strong> will attempt to set the directory's permissions at startup. A value of zero (\''0\'' or \''0000\'') will disable permission setting. Doing this, you MUST set permission for incoming by hand! Defaults to 0750.</p>
  </dd>
  <dt>
    <p><strong>keyrings</strong></p>
  </dt>
  <dd>
    <p>GnuPG keyrings to use for signature verification of changes files. Setting this parameter will modify the default list; it is generally better to modify <strong>extra_keyrings</strong> instead. Defaults to the keyrings from the debian-keyring package.</p>
  </dd>
  <dt>
    <p><strong>logfile</strong></p>
  </dt>
  <dd>
    <p>The filename (relative to <strong>archivedir</strong>) where information will be logged. Defaults to &ldquo;mini-dinstall.log&rdquo;.</p>
  </dd>
  <dt>
    <p><strong>mail_log_flush_count</strong></p>
  </dt>
  <dd>
    <p>Number of log messages after which queued messages will be sent to you. Defaults to 10.</p>
  </dd>
  <dt>
    <p><strong>mail_log_flush_level</strong></p>
  </dt>
  <dd>
    <p>The log level upon which to immediately send all queued log messages. Valid values are the same as for the <strong>mail_log_level</strong> option. Defaults to <strong>ERROR</strong>.</p>
  </dd>
  <dt>
    <p><strong>mail_log_level</strong></p>
  </dt>
  <dd>
    <p>The default log level which is sent to you by email. Valid values include <strong>DEBUG</strong>, <strong>INFO</strong>, <strong>WARN</strong>, <strong>ERROR</strong>, and <strong>CRITICAL</strong>. Defaults to <strong>ERROR</strong>.</p>
  </dd>
  <dt>
    <p><strong>mail_to</strong></p>
  </dt>
  <dd>
    <p>The user to whom logs should be mailed. Defaults to the current user.</p>
  </dd>
  <dt>
    <p><strong>mail_subject_template</strong></p>
  </dt>
  <dd>
    <p>Style of the email subject. Available substitution variables are <strong>source</strong>, <strong>version</strong>, <strong>maintainer</strong>, ... (all statements in .changes) and <strong>changes_without_dot</strong> (same as <strong>changes</strong>, but without lines with only a dot). Default is:</p><p> mini-dinstall: Successfully installed %(source)s %(version)s to %(distribution)s</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>mail_body_template</strong></p>
  </dt>
  <dd>
    <p>Style of the email body. Valid values are the same as for the <strong>mail_subject_template</strong> option. Default is:</p><p> Package: %(source)s  Maintainer: %(maintainer)s  Changed-By: %(changed-by)s  Changes:  %(changes_without_dot)s</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>tweet_server</strong></p>
  </dt>
  <dd>
    <p>server to push tweets. Possible values are <em>twitter</em> or <em>identica</em></p>
  </dd>
  <dt>
    <p><strong>tweet_user</strong></p>
  </dt>
  <dd>
    <p>username to login on tweet server</p>
  </dd>
  <dt>
    <p><strong>tweet_password</strong></p>
  </dt>
  <dd>
    <p>password to login on tweet server</p>
  </dd>
  <dt>
    <p><strong>tweet_template</strong></p>
  </dt>
  <dd>
    <p>Style of the tweet body. Valid values are the same as for the <strong>mail_subject_template</strong> option. Default is:</p><p> Installed %(source)s %(version)s to %(distribution)s</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>trigger_reindex</strong></p>
  </dt>
  <dd>
    <p>In daemon mode, whether or not to recreate the Packages and Sources files after every upload. If you disable this, you probably want to enable <strong>dynamic_reindex</strong>. You may want to disable this if you install a <em>lot</em> of packages. Defaults to enabled.</p>
  </dd>
  <dt>
    <p><strong>use_dnotify</strong></p>
  </dt>
  <dd>
    <p>If enabled, uses the <strong>dnotify</strong>(1) command to monitor directories for changes. Only relevant if <strong>dynamic_reindex</strong> is enabled. Defaults to false.</p>
  </dd>
  <dt>
    <p><strong>verify_sigs</strong></p>
  </dt>
  <dd>
    <p>Whether or not to verify signatures on changes files. Defaults to enabled if the debian-keyring package is installed, disabled otherwise.</p>
  </dd>

</dl>
<p>The configuration parameters that can be set in the <strong>DEFAULT</strong> section and the distribution-specific sections are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>alias</strong></p>
  </dt>
  <dd>
    <p>A list of alternative distribution names.</p>
  </dd>
  <dt>
    <p><strong>architectures</strong></p>
  </dt>
  <dd>
    <p>A list of architectures to create subdirectories for. Defaults to &ldquo;all, i386, powerpc, sparc&rdquo;.</p>
  </dd>
  <dt>
    <p><strong>archive_style</strong></p>
  </dt>
  <dd>
    <p>Either &ldquo;flat&rdquo; or &ldquo;simple-subdir&rdquo;. A flat archive style puts all of the binary packages into one subdirectory, while the simple archive style splits up the binary packages by architecture. Must be set.</p><p>Sources for the &ldquo;flat&rdquo; style should look like:</p><p> deb file:///home/walters/debian/ unstable/  deb-src file:///home/walters/debian/ unstable/  deb file:///home/walters/debian/ experimental/  deb-src file:///home/walters/debian/ experimental/</p><p>Sources for the &ldquo;subdir&rdquo; style should look like:</p><p> deb http://localhost/~walters/debian/ local/$(ARCH)/  deb http://localhost/~walters/debian/ local/all/  deb-src http://localhost/~walters/debian/ local/source/</p>
  </dd>
  <dt>
    <p><strong>chown_changes_files</strong></p>
  </dt>
  <dd>
    <p>Determines if the changes files should be made unreadable by others. This is enabled by default, and is a good thing, since somebody else could unexpectedly upload your package. Think carefully before changing this.</p>
  </dd>
  <dt>
    <p><strong>dynamic_reindex</strong></p>
  </dt>
  <dd>
    <p>If enabled, directories are watched for changes and new Packages and Sources files are created as needed. Only used in daemon mode. Defaults to true.</p>
  </dd>
  <dt>
    <p><strong>generate_release</strong></p>
  </dt>
  <dd>
    <p>Causes a Release file to be generated (see <strong>release_*</strong> below) if enabled. Disabled by default.</p>
  </dd>
  <dt>
    <p><strong>keep_old</strong></p>
  </dt>
  <dd>
    <p>Whether or not old packages should be kept, instead of deleting them when newer versions of the same packages are uploaded. Defaults to false.</p>
  </dd>
  <dt>
    <p><strong>mail_on_success</strong></p>
  </dt>
  <dd>
    <p>Whether to mail on successful installation. Defaults to true.</p>
  </dd>
  <dt>
    <p><strong>tweet_on_success</strong></p>
  </dt>
  <dd>
    <p>Whether to tweet (e.g. on twitter/identi.ca) on successful installation. Defaults to false.</p>
  </dd>
  <dt>
    <p><strong>max_retry_time</strong></p>
  </dt>
  <dd>
    <p>The maximum amount of time to wait for an incomplete upload before rejecting it. Specified in seconds. Defaults to two days.</p>
  </dd>
  <dt>
    <p><strong>poll_time</strong></p>
  </dt>
  <dd>
    <p>How often to poll directories (in seconds) for changes if <strong>dynamic_reindex</strong> is enabled. Defaults to 30 seconds.</p>
  </dd>
  <dt>
    <p><strong>post_install_script</strong></p>
  </dt>
  <dd>
    <p>This script is run after the changes file is installed, with the full path of the changes file as its argument.</p>
  </dd>
  <dt>
    <p><strong>pre_install_script</strong></p>
  </dt>
  <dd>
    <p>This script is run before the changes file is installed, with the full path of the changes file as its argument. If it exits with an error, the changes file is skipped.</p>
  </dd>
  <dt>
    <p><strong>release_codename</strong></p>
  </dt>
  <dd>
    <p>The Codename field in the Release file. Defaults to &ldquo;None&rdquo;.</p>
  </dd>
  <dt>
    <p><strong>release_description</strong></p>
  </dt>
  <dd>
    <p>The Description field in the Release file. Defaults to &ldquo;None&rdquo;.</p>
  </dd>
  <dt>
    <p><strong>release_label</strong></p>
  </dt>
  <dd>
    <p>The Label field in the Release file. Defaults to the current user's username.</p>
  </dd>
  <dt>
    <p><strong>release_origin</strong></p>
  </dt>
  <dd>
    <p>The Origin field in the Release file. Defaults to the current user's username.</p>
  </dd>
  <dt>
    <p><strong>release_suite</strong></p>
  </dt>
  <dd>
    <p>The Suite field in the Release file. Defaults to &ldquo;None&rdquo;.</p>
  </dd>
  <dt>
    <p><strong>experimental_release</strong></p>
  </dt>
  <dd>
    <p>The experimental_release field mark the release as experimental. Defaults to &ldquo;None&rdquo;.</p>
  </dd>
  <dt>
    <p><strong>release_signscript</strong></p>
  </dt>
  <dd>
    <p>If specified, this script will be called to sign Release files. It will be invoked in the directory containing the Release file, and should accept the filename of the Release file to sign as the first argument (note that it is passed a temporary filename, not <em>Release</em>). It should generate a detached signature in a file named <em>Release.gpg</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING DPUT</h2>
        <div class="sectioncontent">
<p>One convenient way to use <strong>mini-dinstall</strong> is in combination with <strong>dput</strong>'s &ldquo;local&rdquo; method. The author generally tests his Debian packages by using <strong>dput</strong> to upload them to a local repository, and then uses APT's &ldquo;file&rdquo; method to retrieve them locally. Here's a sample <strong>dput</strong> stanza:</p><p> [local]  fqdn = space-ghost.verbum.private  incoming = /src/debian/mini-dinstall/incoming  method = local  run_dinstall = 0  post_upload_command = mini-dinstall -r</p><p>Obviously, you should replace the &ldquo;fqdn&rdquo; and &ldquo;incoming&rdquo; values with whatever is appropriate for your machine.  Some sample APT methods were listed in the configuration section.</p><p>Now, all you have to do to test your Debian packages is:</p><p> $ dpkg-buildpackage  $ dput local ../program_1.2.3-1_powerpc.changes  # wait a few seconds  $ apt-get update  $ apt-get install program</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>mini-dinstall</strong> was originally written by Colin Walters &lt;walters@debian.org&gt; and is now maintained by Christoph Goehre &lt;christoph.goehre@gmx.de&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mini-dinstall&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/apt-get.8.html"><strong>apt-get</strong>(8)</a>, <strong>dnotify</strong>(1), <a href="../man1/dput.1.html"><strong>dput</strong>(1)</a>, <strong>gpg</strong><em>(1)</em></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mini-buildd-tool.1.html"><span aria-hidden="true">&larr;</span> mini-buildd-tool.1: Mini-buildd-tool - user/client tool box for mini-buildd instances.</a></li>
   <li class="next"><a href="mini-inetd.1.html">mini-inetd.1: Small tcp/ip connection dispatcher <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
