<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mimefilter: Filter a mime message stripping unwanted mime parts</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Filter a mime message stripping unwanted mime parts">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mimefilter (1) manual">
  <meta name="twitter:description" content="Filter a mime message stripping unwanted mime parts">
  <meta name="twitter:image" content="https://www.carta.tech/images/mimefilter-mimefilter-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mimefilter.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mimefilter (1) manual" />
  <meta property="og:description" content="Filter a mime message stripping unwanted mime parts" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mimefilter-mimefilter-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mimefilter<small> (1)</small></h1>
        <p class="lead">Filter a mime message stripping unwanted mime parts</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mimefilter.1.html">
      <span itemprop="name">mimefilter: Filter a mime message stripping unwanted mime parts</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mimefilter/">
      <span itemprop="name">mimefilter</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mimefilter.1.html">
      <span itemprop="name">mimefilter: Filter a mime message stripping unwanted mime parts</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>mimefilter [\s-1OPTIONS\s0]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>mimefilter</strong> script accept on \s-1STDIN\s0 a \s-1MIME\s0 conforming message, and outputs on \s-1STDOUT\s0 a \s-1MIME\s0 conforming message.</p><p>It strips every unwanted \s-1MIME\s0 part, warning by email the original author about this, and outputs a \s-1MIME\s0 compliant cleaned message, to be further processed by a mailing list software.</p><p>You may find it useful if you don't want certain attachments on your mailing lists, or if you want to allow just the text part from multipart/alternative messages, and so on.  You can easily fine tune the list of allowed \s-1MIME\s0 types to suit your particular needs, using normal Perl regexps.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The <strong>mimefilter</strong> script may take just an option, in either its short or long form:</p>
<dl class='dl-vertical'>
  <dt>
    <em>-h</em>, <em>--help</em>
  </dt>
  <dd>
    <p>Causes the script to print this very manpage and then succesfully exit.</p>
  </dd>

</dl>
<p>However, the <strong>mimefilter</strong> script won't bark at you if it discovers you supplied some other options as well, it'll just politely ignore them.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARGUMENTS</h2>
        <div class="sectioncontent">
<p>The <strong>mimefilter</strong> script cheerfully takes an unlimited number of command line arguments and happily discards them all.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>The <strong>mimefilter</strong> script will look for a system wide configuration file in <em>/etc/mimefilter.rc</em>, and for a local, per working directory, configuration file in <em>./mimefilter.rc</em>.  The latter may be used to override any or all of the parameters defined by the former, thus allowing easily per mailing list customization.</p><p>Several configuration parameters are provided, the most important being the list of admissible \s-1MIME\s0 types (where Perl regexps may be used), along with the list of never to be allowed ones (so that you may even specify, e.g., 'text/.*' in the admissible types list and 'text/html' in the never to be allowed one, to allow every text part but html ones).</p><p>See the default configuration file for examples of use and further documentation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>The <strong>mimefilter</strong> script will look for the following environment variables:</p>
<dl class='dl-vertical'>
  <dt>
    <em>list</em>
  </dt>
  <dd>
    <p>The name of the mailing list this message is intended for.  Used as the return address of the warning issued to the orginal author if the message is not already clean. The Smartlist mailing list software will automatically pass this variable to <strong>mimefilter</strong>.</p>
  </dd>
  <dt>
    <em>listaddr</em>
  </dt>
  <dd>
    <p>The address of the mailing list this message is inteded for.  Used in the <strong>X-Loop</strong> field of the warning issued to the original author if the message is not already clean. The Smartlist mailing list software will automatically pass this variable to <strong>mimefilter</strong>.</p>
  </dd>
  <dt>
    <em>listreq</em>
  </dt>
  <dd>
    <p>The administrative (owner) address of the mailing list this message is inteded for.  Used in the return address of the warning issued to the original author if the message is not already clean. The Smartlist mailing list software will automatically pass this variable to <strong>mimefilter</strong>.</p>
  </dd>
  <dt>
    <em>maintainer</em>
  </dt>
  <dd>
    <p>The email address of the maintainer of the mailing list this message is inteded for.  If it is defined, it is used to send the maintainer original carbon copies of messages that have been modified by this filter \*(-- if <em>filter_mime_cc_maintainer</em> is affermative, of course. The Smartlist mailing list software will automatically pass this variable to <strong>mimefilter</strong>.</p>
  </dd>
  <dt>
    <em>filter_mime_cc_maintainer</em>
  </dt>
  <dd>
    <p>A boolean flag: if affermative (i.e., if it matches the /y/i Perl regular expression), the <strong>mimefilter</strong> script will send carbon copies of every cleaned (modified) message to the maintainer of the mailing list the message is intended for. Users of the Smartlist mailing list software may conveniently set this variable in rc.custom.</p>
  </dd>
  <dt>
    <em>filter_mime</em>
  </dt>
  <dd>
    <p>The <strong>mimefilter</strong> script itself will pay no attention to this variable, but if you have followed what the author suggests in the \s-1RECOMMENDED\s0 \s-1USE\s0 \s-1WITH\s0 \s-1THE\s0 \s-1SMARTLIST\s0 \s-1MAILING\s0 \s-1LIST\s0 \s-1SOFTWARE\s0 section, you will need to define it affermative in rc.custom to activate this script:</p>
<pre>
        filter_mime = yes
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>The <strong>mimefilter</strong> script returns 0 on success and a positive integer on errors.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RECOMMENDED USE WITH THE SMARTLIST MAILING LIST SOFTWARE</h2>
        <div class="sectioncontent">
<p>Put the following lines in rc.local.s[012]0 (the right one just depends on your specific needs, look at rc.submit for more info):</p><p>    :0     * filter_mime ?? y     {             # Pass the mail trough mimefilter             :0 fw             | mimefilter</p><p>            # Executed if mimefilter died             :0 e             {                     :0 hfw                     | formail -A "X-Diagnostic: MIME filtering failed"</p><p>                    HOST=continue_with_rc.request             }</p><p>            # Trash empty messages (author&apos;s already been warned by mimefilter)             :0 Bh             * &lt; 1             /dev/null     }</p><p>Also remember to uncomment the appropriate line in rc.custom, to activate rc.local.s[012]0, and don't forget to customize the list of admissibile and never to be allowed \s-1MIME\s0 types in the configuration file(s).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING THIS SCRIPT WITH OTHER MAILING LIST SOFTWARE</h2>
        <div class="sectioncontent">
<p>The author believes no particular arrangements are necessary to use this script with mailing list software other than Smartlist, altough one should remember that <strong>mimefilter</strong> expects to find at least the <strong>list</strong>, <strong>listaddr</strong>, and <strong>listreq</strong> environment variables set.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mimefilter&hellip;</h2>
        <div class="sectioncontent">
<p>The Smartlist mailing list software documentation, the <em>mimefilter.rc</em>\|(5) man page (yet to be written).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Naaa... ;-)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UNRESTRICTIONS</h2>
        <div class="sectioncontent">
<p>This program is copylefted.  Refer to the \s-1GNU\s0 General Public License for conditions of use.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This program has been written and is actively maintained by Davide&nbsp;Giovanni&nbsp;Maria Salvetti, &lt;salve@linux.it&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>This script was originally aimed for use with a bunch of Smartlist served maling lists the author administers.  He believes it can be successfully used with other mailing list softwares as well.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mime-tool.1.html"><span aria-hidden="true">&larr;</span> mime-tool.1: A simple program to construct mime messages with attached files</a></li>
   <li class="next"><a href="mimegpg.1.html">mimegpg.1: Mime-gpg utility <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
