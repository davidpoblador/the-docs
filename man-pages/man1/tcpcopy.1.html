<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tcpcopy: Online request replication tool, sending client</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Online request replication tool, sending client">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tcpcopy (1) manual">
  <meta name="twitter:description" content="Online request replication tool, sending client">
  <meta name="twitter:image" content="https://www.carta.tech/images/tcpcopy-tcpcopy-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/tcpcopy.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tcpcopy (1) manual" />
  <meta property="og:description" content="Online request replication tool, sending client" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/tcpcopy-tcpcopy-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tcpcopy<small> (1)</small></h1>
        <p class="lead">Online request replication tool, sending client</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tcpcopy.1.html">
      <span itemprop="name">tcpcopy: Online request replication tool, sending client</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/tcpcopy/">
      <span itemprop="name">tcpcopy</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tcpcopy.1.html">
      <span itemprop="name">tcpcopy: Online request replication tool, sending client</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>tcpcopy </strong><em>-OPTIONS</em><strong> </strong><em>[OPTION_PARAM]</em><strong></strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>TCPCopy is an online request replication tool using netlink and raw sockets. It can copy TCP flows from production environment to testing environment in real-time with very small impact on normal operation, so that it is a very handful tool for distributed stress testing, hot backup, online testing and benchmarking.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-x</strong> <strong>&lt;TRANSFER,&gt;</strong></p>
  </dt>
  <dd>
    <p>Use <em>TRANSFER</em> to specify the IPs and ports of the source and target servers. Only IP address is supported, this means domain names cannot be used here.</p><ul>
<li><p>Suppose <em>sourceIP</em> and <em>sourcePort</em> are the IP and port number of the source host you want to copy from, <em>targetIP</em> and <em>targetPort</em> are the IP and port number of the target host you want to send requests to, the format of <em>TRANSFER</em> could be as following: <em>[sourceIP:]sourcePort-targetIP:targetPort,...</em></p></li><li><p>The IP address and the port number are segmented by ':' (colon), the <em>sourcePort</em> and <em>targetIP</em> are segmented by '-', and two <em>TRANSFER</em> are segmented by ',' (comma).</p></li><li><p>For example, <em>tcpcopy</em> <em>-x</em> <em>80-192.168.0.2:18080</em> would copy requests from TCP port 80 of localhost to port 18080 of the host at 192.168.0.2</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-c</strong> <strong>&lt;IP&gt;</strong></p>
  </dt>
  <dd>
    <p>Change localhost client IP address to this <em>IP</em> address when sending to the target host. This option is usually required when copying requests initiated from localhost.</p><ul>
<li><p>For example, <em>tcpcopy</em> <em>-x</em> <em>8080-192.168.0.2:8080</em> <em>-c</em> <em>192.168.0.1</em> would copy requests from port 8080 of localhost to port 8080 of target host at 192.168.0.2, while at the same time replace the client IP with 192.168.0.1 when it is localhost.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Run as a daemon.</p>
  </dd>
  <dt>
    <p><strong>-f</strong> <strong>&lt;NUM&gt;</strong></p>
  </dt>
  <dd>
    <p>Use this parameter to control the port number modification process and reduce port conflications when multiple TCPCopy instances are running in parallel. The value of <em>NUM</em> should be different for different TCPCopy instances. The maximum value allowed is 1023.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Print help text and exit.</p>
  </dd>
  <dt>
    <p><strong>-i</strong> <strong>&lt;PCAP_FILE&gt;</strong></p>
  </dt>
  <dd>
    <p>Set the pcap file name used to save to. Only valid for offline use of the program when it is configured to run at enable-offline mode.</p>
  </dd>
  <dt>
    <p><strong>-l</strong> <strong>&lt;LOG_FILE&gt;</strong></p>
  </dt>
  <dd>
    <p>Save logs in <em>LOG_FILE</em></p>
  </dd>
  <dt>
    <p><strong>-m</strong> <strong>&lt;MEM&gt;</strong></p>
  </dt>
  <dd>
    <p>Set the maximum memory allowed to be used by TCPCopy process in megabytes, to avoid TCPCopy occupying too much memory and cause impact on the online system. When the memory exceeds this limit, TCPCopy would quit automatically.</p><ul>
<li><p>This parameter is effective only when the Linux kernel version is 2.6.32 or above. Default value is 512.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-M</strong> <strong>&lt;MTU&gt;</strong></p>
  </dt>
  <dd>
    <p>MTU value sent to backend (default 1500).</p>
  </dd>
  <dt>
    <p><strong>-n</strong> <strong>&lt;NUM&gt;</strong></p>
  </dt>
  <dd>
    <p>Use <em>NUM</em> to set the replication times when you want to get a copied data stream that is as <em>NUM</em> times large as the original.</p><ul>
<li><p>The maximum allowd value of <em>NUM</em> is 1023. As multiple copying is done by modifying port numbers, the ports may conflict with each other, especially for intranet applications where there are few source IPs and most connections are short. Thus, TCPCopy would perform better when less copies are specified.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-p</strong> <strong>&lt;PORT&gt;</strong></p>
  </dt>
  <dd>
    <p>Set the target server listening port. Default value is 36524.</p>
  </dd>
  <dt>
    <p><strong>-P</strong> <strong>&lt;PIDFILE&gt;</strong></p>
  </dt>
  <dd>
    <p>Save PID in <em>PIDFILE</em> , only use in conjunction with -d option. <strong>-r</strong> <strong>&lt;PERCENT&gt;</strong> Set the percentage of sessions to transfer (integer, 1~100).</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Print version info and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>TCPCopy relies on packet capturing functions, which is not reliable when under heavy pressure, hence packet (request) loss rate can be much higher then. Also it is recommended to have the sending client and receiving server in the same intranet to reduce the packet (request) loss.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tcpcopy&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/intercept.1.html"><strong>intercept</strong>(1)</a>,</strong> <strong>/usr/share/doc/tcpcopy/README</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Aron Xu &lt;aron@debian.org&gt; for the Debian GNU/Linux system (but may be used by others).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tcpconnect.1.html"><span aria-hidden="true">&larr;</span> tcpconnect.1: General tcp/ip client</a></li>
   <li class="next"><a href="tcpd.1.html">tcpd.1: Tool for uml component diagrams <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
