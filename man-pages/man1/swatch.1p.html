<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>swatch: Simple watcher</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Simple watcher">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="swatch (1p) manual">
  <meta name="twitter:description" content="Simple watcher">
  <meta name="twitter:image" content="https://www.carta.tech/images/swatch-swatch-1p.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1p/swatch.1p.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="swatch (1p) manual" />
  <meta property="og:description" content="Simple watcher" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/swatch-swatch-1p.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">swatch<small> (1p)</small></h1>
        <p class="lead">Simple watcher</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/swatch.1p.html">
      <span itemprop="name">swatch: Simple watcher</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/swatch/">
      <span itemprop="name">swatch</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1p/swatch.1p.html">
      <span itemprop="name">swatch: Simple watcher</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>swatch</strong> [ <strong>--awk-field-syntax</strong> ] [ <strong>--config-file|-c</strong> <em>file</em> ] [ <strong>--daemon</strong> ] [ <strong>--extra-include-dir|-I</strong> <em>path</em> ] [ <strong>--extra-module|-M</strong> <em>module_name</em> ] [ <strong>--help|-h</strong> ] [ <strong>--input-record-separator</strong> <em>regex</em> ] [ <strong>--old-style-config|-O</strong> ] [ <strong>--pid-file</strong> <em>file</em> ] [ <strong>--restart-time|-r</strong> <em>time</em> ] [ <strong>--script-dir</strong> <em>path</em> ] [ <strong>--tail-args</strong> <em>arguments_for_tail_program</em> ] [ <strong>--tail-program-name</strong> <em>filename</em> ] [ <strong>--version|-V</strong> ] [ <strong>--use-cpan-file-tail</strong> ] [ [ <strong>--examine|-f</strong> <em>file_to_examine</em> ] | [ <strong>--read-pipe|-p</strong> <em>program_to_pipe_from</em> ] | [ <strong>--tail-file|-t</strong> <em>file_to_tail</em> ] ] [ <strong>--debug</strong> [ <em>level</em> ] ] [ <strong>--dump-script</strong> <em>filename</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Swatch</strong> is designed to monitor system activity. In order for <strong>Swatch</strong> to be useful, it requires a configuration file which contains <em>pattern(s)</em> to look for and <em>action(s)</em> to perform when each pattern is found.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND LINE OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>--awk-field-syntax</strong>
  </dt>
  <dd>
    <p>Use this option only if you want to overide regular expression backreferencing in favor of <strong></strong><strong>awk</strong><strong>\|(1)</strong> style field referencing. Included for backward compatability.</p>
  </dd>
  <dt>
    <strong>--config-file|-c</strong> <em>filename</em>
  </dt>
  <dd>
    <p>Tells <strong>swatch</strong> where to find its configuration file. The default is <em>${\s-1HOME\s0}/.swatchrc</em>.</p>
  </dd>
  <dt>
    <strong>--daemon</strong>
  </dt>
  <dd>
    <p>This tells <strong>swatch</strong> to run in the background and disassociate itself from any terminal.</p>
  </dd>
  <dt>
    <strong>--extra-include-dir|-I</strong> <em>path</em>
  </dt>
  <dd>
    <p>This tells <strong>swatch</strong> where to look for custom <em>action</em> modules.</p>
  </dd>
  <dt>
    <strong>--extra-module|-M</strong> <em>module_name</em>
  </dt>
  <dd>
    <p>This tells <strong>swatch</strong> what custom <em>action</em> modules to load in.</p>
  </dd>
  <dt>
    <strong>--help|-h</strong>
  </dt>
  <dd>
    <p>Prints usage information and exits.</p>
  </dd>
  <dt>
    <strong>--input-record-separator</strong>=<em>regular_expression</em>
  </dt>
  <dd>
    <p>Tells <strong>swatch</strong> to use <em>regular_expression</em> to delineate the boundary of each input record. The default is a carriage return.</p>
  </dd>
  <dt>
    <strong>--old-style-config|-O</strong>
  </dt>
  <dd>
    <p>This tells <strong>swatch</strong> that your configuration file is written using the syntax that was abandoned back in the 1990's.</p>
  </dd>
  <dt>
    <strong>--pid-file</strong> <em>file</em>
  </dt>
  <dd>
    <p>Writes the process \s-1ID\s0 to <em>file</em>. Useful when running in daemon mode.</p>
  </dd>
  <dt>
    <strong>--restart-time</strong>=<em>[+]hh:mm[am|pm]</em> or <strong>-r</strong> <em>[+]hh:mm[am|pm]</em>
  </dt>
  <dd>
    <p>Restart at the specified time where <em>hh</em> is hours and <em>mm</em> is minutes. If the am/pm indicator is omitted, then a 24-hour clock is assumed. If the time is preceded by the \*(L"+\*(R" character, then the restart time will be set to the current time plus the specified time and the am/pm indicator will be ignored.</p>
  </dd>
  <dt>
    <strong>--script-dir</strong>=<em>/path/to/directory</em>
  </dt>
  <dd>
    <p>This switch causes the temporary watcher script to be written to a file in the specified directory rather than the user's home directory. It is highly advised that you do <strong>\s-1NOT\s0</strong> use directories that are writable by others such as /tmp.</p>
  </dd>
  <dt>
    <strong>--tail-args</strong> <em>arguments_for_tail_program</em>
  </dt>
  <dd>
    <p>Pass specific options to the <strong></strong><strong>tail</strong><strong>\|(1)</strong> program.</p>
  </dd>
  <dt>
    <strong>--tail-program-name</strong> <em>filename</em>
  </dt>
  <dd>
    <p>Runs an alternate <strong></strong><strong>tail</strong><strong>\|(1)</strong> like program instead of the system default.</p>
  </dd>
  <dt>
    <strong>--version</strong> or <strong>-V</strong>
  </dt>
  <dd>
    <p>Prints version information and exits.</p>
  </dd>
  <dt>
    <strong>--use-cpan-file-tail</strong>
  </dt>
  <dd>
    <p>Use \s-1CPAN\s0's File::Tail module to read the log file instead of the <em>tail</em>\|(1) command.</p>
  </dd>

</dl>
<p>You may specify only one of the following options:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>--tail-file</strong>=<em>filename</em> or <strong>-t</strong> <em>filename</em>
  </dt>
  <dd>
    <p>Examine lines of text as they are added to filename.</p>
  </dd>
  <dt>
    <strong>--read-pipe</strong>=<em>command</em> or <strong>-p</strong> <em>command</em>
  </dt>
  <dd>
    <p>Examine input piped in from the <em>command</em>.</p>
  </dd>
  <dt>
    <strong>--examine</strong>=<em>filename</em> or <strong>-f</strong> <em>filename</em>
  </dt>
  <dd>
    <p>Use <em>filename</em> as the file to examine. <strong>Swatch</strong> will do a single pass through the named file.</p>
  </dd>

</dl>
<p>The following options are purely for debugging purposes, but are documented here for completeness:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>--debug</strong>[=<em>level</em>]
  </dt>
  <dd>
    <p>Spew out various levels of debugging for swatch developers.</p>
  </dd>
  <dt>
    <strong>--dump-script</strong>[=<em>filename</em>]
  </dt>
  <dd>
    <p>Instead of running the watcher script after it is generated, it is written to <em>filename</em> or to \s-1STDOUT\s0.</p>
  </dd>

</dl>
<p>If swatch is called with no options, it is the same as typing the command line</p>
<pre>
        swatch --config-file=~/.swatchrc --tail-file=/var/log/syslog
</pre>
<p>or if /var/log/messages exists</p><p>        swatch --config-file=~/.swatchrc --tail-file=/var/log/messages</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE CONFIGURATION FILE</h2>
        <div class="sectioncontent">
<p>The configuration file is used by the <strong></strong><strong>swatch</strong><strong>\|(8)</strong> program to determine what types of expression patterns to look for and what type of action(s) should be taken when a pattern is matched.</p><p>Each line should contain a keyword and a, sometimes optional, value for that keyword. The keyword and value are separated by a space or an equal (=) sign.</p><p>watchfor regex</p><p>ignore regex</p>
<dl class='dl-vertical'>
  <dt>
    <strong>echo [modes]</strong>
  </dt>
  <dd>
    <p>Echo the matched line. The text mode may be <em>normal</em>, <em>clear</em>, <em>reset</em>, <em>bold</em> <em>underline</em>, <em>underscore</em>, <em>blink</em>, <em>reverse</em>, <em>concealed</em>, <em>black</em>, <em>red</em> <em>green</em>, <em>yellow</em>, <em>blue</em>, <em>magenta</em>, <em>on_black</em>, <em>on_red</em>, <em>on_green</em> <em>on_yellow</em>, <em>on_blue</em>, <em>on_magenta</em>, <em>on_cyan</em>, <em>on_white</em>. The &lt;on_&gt; colors specify a highlighting color. Some modes may not work on some terminals. <strong>Normal</strong> is the default. For <strong>modes</strong> changes and additions check perl module Term::ANSIColor man page.</p>
  </dd>
  <dt>
    <strong>bell [N]</strong>
  </dt>
  <dd>
    <p>Echo the matched line, and send a bell <em>N</em> times (default = 1).</p>
  </dd>
  <dt>
    <strong>exec command</strong>
  </dt>
  <dd>
    <p>Execute <em>command</em>. The <em>command</em> may contain variables which are substituted with fields from the matched line. A <em></em><strong>$N</strong><em></em> will be replaced by the <em>Nth</em> field in the line. A <em></em><strong>$_</strong><em></em> will be replaced by the entire line. Variable <em></em><strong>$0</strong><em></em> will show the name of the executed script.</p>
  </dd>
  <dt>
    <strong>mail [addresses=address:address:...][,subject=your_text_here]</strong>
  </dt>
  <dd>
    <p>Send <em>mail</em> to <em>address(es)</em> containing the matched lines as they appear (default address is the user who is running the program). Note that the @ sign in the email addresses must be escaped with a backslash, like \*(L"user&#92;@example.com\*(R".</p>
  </dd>
  <dt>
    <strong>pipe command[,keep_open]</strong>
  </dt>
  <dd>
    <p>Pipe matched lines into <em>command</em>. Use the <strong>keep_open</strong> option to force the pipe to stay open until a different pipe action is run or until swatch exits.</p>
  </dd>
  <dt>
    <strong>write [user:user:...]</strong>
  </dt>
  <dd>
    <p>Use <strong></strong><strong>write</strong><strong>\|(1)</strong> to send matched lines to <em>user(s)</em>.</p>
  </dd>
  <dt>
    <strong>throttle hours:minutes:seconds,[key=message|regex|&lt;regexE</strong>]&gt;
  </dt>
  <dd>
    <p>This action has been depreciated. Use <strong>threshold</strong> instead For example,</p><p>throttle 15:00,key=\*(L"foo\*(R"</p><p>would look like this</p><p>threshold track_by=\*(L"foo\*(R",type=limit,count=1,seconds=900</p>
  </dd>
  <dt>
    <strong>threshold track_by=key, type=&lt;limit|threshold|both</strong>, count=number, seconds=number&gt;
  </dt>
  <dd>
    <p>Thresholding can be done for the complete <strong>watchfor</strong> block and/or for individual actions. Add \*(L"threshold=on\*(R" as an option along with the other threshold options when thresholding an individual action.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>track_by</strong>
  </dt>
  <dd>
    <p>The value of this should be something that is unique to the <strong>watchfor</strong> regular expression. Tip: enclose unique parts of the regular expression in parentheses, then use the sub matches as part of the value (e.g. track_by=\*(L"$2:$4\*(R").</p>
  </dd>
  <dt>
    <strong>type</strong>
  </dt>
  <dd>
    <p>There are three types of thresholding. They are as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>limit</strong>
  </dt>
  <dd>
    <p>Perform action(s) for the first "<strong>count</strong>\*(L" matches during the time interval specified by \*(R"<strong>seconds</strong>", then ignore events for the rest of the time interval (kind of like throttle)</p>
  </dd>
  <dt>
    <strong>threshold</strong>
  </dt>
  <dd>
    <p>Perform action(s) on each match for up to <strong>count</strong> matches during the time interval specified by <strong>seconds</strong></p>
  </dd>
  <dt>
    <strong>both</strong>
  </dt>
  <dd>
    <p>Perform actions(s) once per time interval after "<strong>count</strong>\*(L" matches occur, then ignore additional matches during the time interval specified by \*(R"<strong>seconds</strong>"</p>
  </dd>

</dl>

  </dd>

</dl>

  </dd>
  <dt>
    <strong>continue</strong>
  </dt>
  <dd>
    <p>Use this action to cause <strong>swatch</strong> to continue to try to match other pattern/action groups after it is done with the current pattern/action block.</p>
  </dd>
  <dt>
    <strong>quit</strong>
  </dt>
  <dd>
    <p>Use this action to cause <strong>swatch</strong> to clean up and quit immediately.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SPECIAL OPTION</h2>
        <div class="sectioncontent">
<p>The following may be used as an option for any of the above actions except for throttle and threshold.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>when=</strong><em>day_of_week:hour_of_day</em>
  </dt>
  <dd>
    <p>Use this option to specify windows of time and days when the action can be performed. For example:</p><p>mail=sysad-pager@somehost.somedomain,when=1-6:8-17</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FOR PERL HACKS ONLY</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>perlcode</strong> [<em>depth</em>] arbitrary_Perl_code
  </dt>
  <dd>
    <p>This permits you to easily insert random Perl code into your swatchrc file. The optional depth value tells swatch how deep into the code to put the perl code. (0=outside the main loop, 1=inside the main loop (default), 2=just inside the conditional used by the current watchfor statement, and 3=inside the throttle block). Its intended use is to permit variable substitution. For example:</p><p>perlcode $syslog=\*(L"^&#92;w{3}&#92;s+&#92;d{1,2}&#92;s+&#92;d{2}:&#92;d{2}:&#92;d{2}.*\*(R"; watchfor /$syslog hostname pppd/&gt;</p><p>but any valid Perl is permitted.  Remember the semicolon, and make judicious use of the <strong>--dump-script</strong> option if you run into trouble.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION EXAMPLE</h2>
        <div class="sectioncontent">
<p>In this example, a line which contains the string \*(L"file system full\*(R" will be echoed and the screen bell will sound.  Also, <strong>threshold</strong> will use what is matched within the parentheses as its key rather than trying to use the log message with its time stamp cut out. Multiple instances of the message will not be echoed if they appear within a minute of the first one. Instead the following message will be acted upon after the time interval has expired.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO swatch&hellip;</h2>
        <div class="sectioncontent">
<p><strong></strong><strong>signal</strong><strong>\|(3)</strong>, <strong></strong><strong>perl</strong><strong>\|(1)</strong>, <strong></strong><strong>perlre</strong><strong>\|(1)</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Upon receiving an \s-1ALRM\s0 or \s-1HUP\s0 signal swatch will re-read the configuration file and restart, except when used with the <em>--daemon</em> command line option where it will simply exit. Swatch will terminate gracefully when it receives a \s-1QUIT\s0, \s-1TERM\s0, or \s-1INT\s0 signal.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>    E. Todd Atkins     Todd.Atkins@StanfordAlumni.ORG</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>Swatch is a SourceForge project whose project page is at http://sourceforge.net/projects/swatch and homepage is at http://swatch.sourceforge.net</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="subs.1p.html"><span aria-hidden="true">&larr;</span> subs.1p: Convert, join, split, and re-time subtitles</a></li>
   <li class="next"><a href="tab2graph.1p.html">tab2graph.1p: Turn tabular data into a graph <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
