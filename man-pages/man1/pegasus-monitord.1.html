<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pegasus-monitord: Tracks a workflow progress, mining information</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Tracks a workflow progress, mining information">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pegasus-monitord (1) manual">
  <meta name="twitter:description" content="Tracks a workflow progress, mining information">
  <meta name="twitter:image" content="https://www.carta.tech/images/pegasus-wms-pegasus-monitord-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pegasus-monitord.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pegasus-monitord (1) manual" />
  <meta property="og:description" content="Tracks a workflow progress, mining information" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pegasus-wms-pegasus-monitord-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pegasus-monitord<small> (1)</small></h1>
        <p class="lead">Tracks a workflow progress, mining information</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pegasus-monitord.1.html">
      <span itemprop="name">pegasus-monitord: Tracks a workflow progress, mining information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pegasus-wms/">
      <span itemprop="name">pegasus-wms</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pegasus-monitord.1.html">
      <span itemprop="name">pegasus-monitord: Tracks a workflow progress, mining information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>pegasus-monitord</strong> [<strong>--help</strong>|<strong>-help</strong>] [<strong>--verbose</strong>|<strong>-v</strong>]
                 [<strong>--adjust</strong>|<strong>-a</strong> <em>i</em>] [<strong>--foreground</strong>|<strong>-N</strong>]
                 [<strong>--no-daemon</strong>|<strong>-n</strong>] [<strong>--job</strong>|<strong>-j</strong> <em>jobstate.log file</em>]
                 [<strong>--log</strong>|<strong>-l</strong> <em>logfile</em>] [<strong>--conf</strong> <em>properties file</em>]
                 [<strong>--no-recursive</strong>] [<strong>--no-database</strong> | <strong>--no-events</strong>]
                 [<strong>--replay</strong>|<strong>-r</strong>] [<strong>--no-notifications</strong>]
                 [<strong>--notifications-max</strong> <em>max_notifications</em>]
                 [<strong>--notifications-timeout</strong> <em>timeout</em>]
                 [<strong>--sim</strong>|<strong>-s</strong> <em>millisleep</em>] [<strong>--db-stats</strong>]
                 [<strong>--skip-stdout</strong>] [<strong>--force</strong>|<strong>-f</strong>]
                 [<strong>--socket</strong>] [<strong>--output-dir</strong> | <strong>-o</strong> <em>dir</em>]
                 [<strong>--dest</strong>|<strong>-d</strong> <em>PATH</em> or <em>URL</em>] [<strong>--encoding</strong>|<strong>-e</strong> <em>bp</em> | <em>bson</em>]
                 <em>DAGMan output file</em>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program follows a workflow, parsing the output of DAGMAN\(cqs dagman.out file. In addition to generating the jobstate.log file, <strong>pegasus-monitord</strong> can also be used mine information from the workflow dag file and jobs&apos; submit and output files, and either populate a database or write a NetLogger events file with that information. <strong>pegasus-monitord</strong> can also perform notifications when tracking a workflow\(cqs progress in real-time.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-h</strong>, <strong>--help</strong></p><p>Prints a usage summary with all the available command-line options.</p><p><strong>-v</strong>, <strong>--verbose</strong></p><p>Sets the log level for <strong>pegasus-monitord</strong>. If omitted, the default <em>level</em> will be set to <em>WARNING</em>. When this option is given, the log level is changed to <em>INFO</em>. If this option is repeated, the log level will be changed to <em>DEBUG</em>.</p><p>The log level in <strong>pegasus-monitord</strong> can also be adjusted interactively, by sending the <em>USR1</em> and <em>USR2</em> signals to the process, respectively for incrementing and decrementing the log level.</p><p><strong>-a</strong> <em>i</em>, <strong>--adjust</strong> <em>i</em></p><p>For adjusting time zone differences by <em>i</em> seconds, default is 0.</p><p><strong>-N</strong>, <strong>--foreground</strong></p><p>Do not daemonize <strong>pegasus-monitord</strong>, go through the motions as if (Condor).</p><p><strong>-n</strong>, <strong>--no-daemon</strong></p><p>Do not daemonize <strong>pegasus-monitord</strong>, keep it in the foreground (for debugging).</p><p><strong>-j</strong> <em>jobstate.log file</em>, <strong>--job</strong> <em>jobstate.log file</em></p><p>Alternative location for the <em>jobstate.log</em> file. The default is to write a <em>jobstate.log</em> in the workflow directory. An absolute file name should only be used if the workflow does not have any sub-workflows, as each sub-workflow will generate its own <em>jobstate.log</em> file. If an alternative, non-absolute, filename is given with this option, <strong>pegasus-monitord</strong> will create one file in each workflow (and sub-workflow) directory with the filename provided by the user with this option. If an absolute filename is provided and sub-workflows are found, a warning message will be printed and <strong>pegasus-monitord</strong> will not track any sub-workflows.</p><p><strong>--log</strong> <em>logfile</em>, <strong>--log-file</strong> <em>logfile</em></p><p>Specifies an alternative <em>logfile</em> to use instead of the <em>monitord.log</em> file in the main workflow directory. Differently from the <em>jobstate.log</em> file above, <strong>pegasus-monitord</strong> only generates one <em>logfile</em> per execution (and not one per workflow and sub-workflow it tracks).</p><p><strong>--conf</strong> <em>properties_file</em></p><p>is an alternative file containing properties in the <em>key=value</em> format, and allows users to override values read from the <em>braindump.txt</em> file. This option has precedence over the properties file specified in the <em>braindump.txt</em> file. Please note that these properties will apply not only to the main workflow, but also to all sub-workflows found.</p><p><strong>--no-recursive</strong></p><p>This options disables <strong>pegasus-monitord</strong> to automatically follow any sub-workflows that are found.</p><p><strong>--nodatabase</strong>, <strong>--no-database</strong>, <strong>--no-events</strong></p><p>Turns off generating events (when this option is given, <strong>pegasus-monitord</strong> will only generate the jobstate.log file). The default is to automatically log information to a SQLite database (see the <strong>--dest</strong> option below for more details). This option overrides any parameter given by the <strong>--dest</strong> option.</p><p><strong>-r</strong>, <strong>--replay</strong></p><p>This option is used to replay the output of an already finished workflow. It should only be used after the workflow is finished (not necessarily successfully). If a <em>jobstate.log</em> file is found, it will be rotated. However, when using a database, all previous references to that workflow (and all its sub-workflows) will be erased from it. When outputing to a bp file, the file will be deleted. When running in replay mode, <strong>pegasus-monitord</strong> will always run with the <strong>--no-daemon</strong> option, and any errors will be output directly to the terminal. Also, <strong>pegasus-monitord</strong> will not process any notifications while in replay mode.</p><p><strong>--no-notifications</strong></p><p>This options disables notifications completely, making <strong>pegasus-monitord</strong> ignore all the .notify files for all workflows it tracks.</p><p><strong>--notifications-max</strong> <em>max_notifications</em></p><p>This option sets the maximum number of concurrent notifications that <strong>pegasus-monitord</strong> will start. When the <em>max_notifications</em> limit is reached, <strong>pegasus-monitord</strong> will queue notifications and wait for a pending notification script to finish before starting a new one. If <em>max_notifications</em> is set to 0, notifications will be disabled.</p><p><strong>--notifications-timeout</strong> <em>timeout</em></p><p>Normally, <strong>pegasus-monitord</strong> will start a notification script and wait indefinitely for it to finish. This option allows users to set up a maximum <em>timeout</em> that <strong>pegasus-monitord</strong> will wait for a notification script to finish before terminating it. If notification scripts do not finish in a reasonable amount of time, it can cause other notification scripts to be queued due to the maximum number of concurrent scripts allowed by <strong>pegasus-monitord</strong>. Additionally, until all notification scripts finish, <strong>pegasus-monitord</strong> will not terminate.</p><p><strong>-s</strong> <em>millisleep</em>, <strong>--sim</strong> <em>millisleep</em></p><p>This option simulates delays between reads, by sleeping <em>millisleep</em> milliseconds. This option is mainly used by developers.</p><p><strong>--db-stats</strong></p><p>This option causes the database module to collect and print database statistics at the end of the execution. It has no effect if the <strong>--no-database</strong> option is given.</p><p><strong>--skip-stdout</strong></p><p>This option causes <strong>pegasus-monitord</strong> not to populate jobs&apos; stdout and stderr into the BP file or the Stampede database. It should be used to avoid increasing the database size substantially in cases where jobs are very verbose in their output.</p><p><strong>-f</strong>, <strong>--force</strong></p><p>This option causes <strong>pegasus-monitord</strong> to skip checking for another instance of itself already running on the same workflow directory. The default behavior prevents two or more <strong>pegasus-monitord</strong> instances from starting and running simultaneously (which would cause the bp file and database to be left in an unstable state). This option should noly be used when the user knows the previous instance of <strong>pegasus-monitord</strong> is <strong>NOT</strong> running anymore.</p><p><strong>--socket</strong></p><p>This option causes <strong>pegasus-monitord</strong> to start a socket interface that can be used for advanced debugging. The port number for connecting to <strong>pegasus-monitord</strong> can be found in the <em>monitord.sock</em> file in the workflow directory (the file is deleted when <strong>pegasus-monitord</strong> finishes). If not already started, the socket interface is also created when <strong>pegasus-monitord</strong> receives a <em>USR1</em> signal.</p><p><strong>-o</strong> <em>dir</em>, <strong>--ouput-dir</strong> <em>dir</em></p><p>When this option is given, <strong>pegasus-monitord</strong> will create all its output files in the directory specified by <em>dir.</em> This option is useful for allowing a user to debug a workflow in a directory the user does not have write permissions. In this case, all files generated by <strong>pegasus-monitord</strong> will have the workflow <em>wf_uuid</em> as a prefix so that files from multiple sub-workflows can be placed in the same directory. This option is mainly used by <strong>pegasus-analyzer</strong>. It is important to note that the location for the output BP file or database is not changed by this option and should be set via the <strong>--dest</strong> option.</p><p><strong>-d</strong> <em>URL</em> <em>params</em>, <strong>--dest</strong> <em>URL</em> <em>params</em></p><p>This option allows users to specify the destination for the log events generated by <strong>pegasus-monitord</strong>. If this option is omitted, <strong>pegasus-monitord</strong> will create a SQLite database in the workflow\(cqs run directory with the same name as the workflow, but with a <em>.stampede.db</em> prefix. For an <em>empty</em> scheme, <em>params</em> are a file path with <strong>-</strong> meaning standard output. For a <em>x-tcp</em> scheme, <em>params</em> are <em>TCP_host[:port=14380]</em>. For a database scheme, <em>params</em> are a <em>SQLAlchemy engine URL</em> with a database connection string that can be used to specify different database engines. Please see the examples section below for more information on how to use this option. Note that when using a database engine other than <strong>sqlite</strong>, the necessary Python database drivers will need to be installed.</p><p><strong>-e</strong> <em>encoding</em>, <strong>--encoding</strong> <em>encoding</em></p><p>This option specifies how to encode log events. The two available possibilities are <em>bp</em> and <em>bson</em>. If this option is not specified, events will be generated in the <em>bp</em> format.</p><p><em>DAGMan_output_file</em></p><p>The <em>DAGMan_output_file</em> is the only requires command-line argument in <strong>pegasus-monitord</strong> and must have the <em>.dag.dagman.out</em> extension.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>If the plan could be constructed, <strong>pegasus-monitord</strong> returns with an exit code of 0. However, in case of error, a non-zero exit code indicates problems. In that case, the <em>logfile</em> should contain additional information about the error condition.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p><strong>pegasus-monitord</strong> does not require that any environmental variables be set. It locates its required Python modules based on its own location, and therefore should not be moved outside of Pegasus&apos; bin directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Usually, <strong>pegasus-monitord</strong> is invoked automatically by <strong>pegasus-run</strong> and tracks the workflow progress in real-time, producing the <em>jobstate.log</em> file and a corresponding SQLite database. When a workflow fails, and is re-submitted with a rescue DAG, <strong>pegasus-monitord</strong> will automatically pick up from where it left previously and continue the <em>jobstate.log</em> file and the database.</p><p>If users need to create the <em>jobstate.log</em> file after a workflow is already finished, the <strong>--replay | -r</strong> option should be used when running <strong>pegasus-monitord</strong> manually. For example:</p>
<pre>
$ pegasus_monitord -r diamond-0.dag.dagman.out
</pre>
<p>will launch <strong>pegasus-monitord</strong> in replay mode. In this case, if a <em>jobstate.log</em> file already exists, it will be rotated and a new file will be created. If a <em>diamond-0.stampede.db</em> SQLite database already exists, <strong>pegasus-monitord</strong> will purge all references to the workflow id specified in the <em>braindump.txt</em> file, including all sub-workflows associated with that workflow id.</p>
<pre>
$ pegasus_monitord -r --no-database diamond-0.dag.dagman.out
</pre>
<p>will do the same thing, but without generating any log events.</p>
<pre>
$ pegasus_monitord -r --dest `pwd`/diamond-0.bp diamond-0.dag.dagman.out
</pre>
<p>will create the file <em>diamond-0.bp</em> in the current directory, containing NetLogger events with all the workflow data. This is in addition to the <em>jobstate.log</em> file.</p><p>For using a database, users should provide a database connection string in the format of:</p>
<pre>
dialect://username:password@host:port/database
</pre>
<p>Where <em>dialect</em> is the name of the underlying driver (<em>mysql</em>, <em>sqlite</em>, <em>oracle</em>, <em>postgres</em>) and <em>database</em> is the name of the database running on the server at the <em>host</em> computer.</p><p>If users want to use a different <em>SQLite</em> database, <strong>pegasus-monitord</strong> requires them to specify the absolute path of the alternate file. For example:</p>
<pre>
$ pegasus_monitord -r --dest sqlite:////home/user/diamond_database.db diamond-0.dag.dagman.out
</pre>
<p>Here are docs with details for all of the supported drivers: \m[blue]<strong>http://www.sqlalchemy.org/docs/05/reference/dialects/index.html</strong>\m[]</p><p>Additional per-database options that work into the connection strings are outlined there.</p><p>It is important to note that one will need to have the appropriate db interface library installed. Which is to say, <em>SQLAlchemy</em> is a wrapper around the mysql interface library (for instance), it does not provide a <em>MySQL</em> driver itself. The <strong>Pegasus</strong> distribution includes both <strong>SQLAlchemy</strong> and the <strong>SQLite</strong> Python driver.</p><p>As a final note, it is important to mention that unlike when using <em>SQLite</em> databases, using <strong>SQLAlchemy</strong> with other database servers, e.g. <em>MySQL</em> or <em>Postgres</em>, the target database needs to exist. So, if a user wanted to connect to:</p>
<pre>
mysql://pegasus-user:supersecret@localhost:localport/diamond
</pre>
<p>it would need to first connect to the server at <em>localhost</em> and issue the appropriate create database command before running <strong>pegasus-monitord</strong> as <strong>SQLAlchemy</strong> will take care of creating the tables and indexes if they do not already exist.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pegasus-monitord&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/pegasus-run.1.html"><strong>pegasus-run</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Gaurang Mehta &lt;gmehta at isi dot edu&gt;</p><p>Fabio Silva &lt;fabio at isi dot edu&gt;</p><p>Karan Vahi &lt;vahi at isi dot edu&gt;</p><p>Jens-S. Vöckler &lt;voeckler at isi dot edu&gt;</p><p>Pegasus Team \m[blue]<strong>http://pegasus.isi.edu</strong>\m[]</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pegasus-kickstart.1.html"><span aria-hidden="true">&larr;</span> pegasus-kickstart.1: Remote job wrapper</a></li>
   <li class="next"><a href="pegasus-mpi-cluster.1.html">pegasus-mpi-cluster.1: A tool for running computational workflows expressed as dags (directed acyclic graphs) on computational clusters using mpi. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
