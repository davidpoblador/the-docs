<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mongos: Mongodb shard utility</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Mongodb shard utility">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mongos (1) manual">
  <meta name="twitter:description" content="Mongodb shard utility">
  <meta name="twitter:image" content="https://www.carta.tech/images/mongodb-server-mongos-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mongos.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mongos (1) manual" />
  <meta property="og:description" content="Mongodb shard utility" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mongodb-server-mongos-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mongos<small> (1)</small></h1>
        <p class="lead">Mongodb shard utility</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mongos.1.html">
      <span itemprop="name">mongos: Mongodb shard utility</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mongodb-server/">
      <span itemprop="name">mongodb-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mongos.1.html">
      <span itemprop="name">mongos: Mongodb shard utility</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><em>mongos</em> for "MongoDB Shard," is a routing service for MongoDB shard configurations that processes queries from the application layer, and determines the location of this data in the <em>sharded cluster</em>, in order to complete these operations. From the perspective of the application, a <em>mongos</em> instance behaves identically to any other MongoDB instance.</p>
<dl class='dl-vertical'>
  <dt>
    Note
  </dt>
  <dd>
    <p>Changed in version 2.1.</p><p>Some aggregation operations using the <strong>aggregate</strong> will cause <em>mongos</em> instances to require more CPU resources than in previous versions. This modified performance profile may dictate alternate architecture decisions if you use the <em>aggregation framework</em> extensively in a sharded environment.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    See also
  </dt>
  <dd>
    <p><strong>/sharding</strong> and <strong>/core/sharded-clusters</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>mongos</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>--help, -h</strong></p>
  </dt>
  <dd>
    <p>Returns a basic help and usage text.</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>Returns the version of the <strong>mongod</strong> daemon.</p>
  </dd>
  <dt>
    <p><strong>--config &lt;filename&gt;, -f &lt;filename&gt;</strong></p>
  </dt>
  <dd>
    <p>Specifies a configuration file, that you can use to specify runtime-configurations. While the options are equivalent and accessible via the other command line arguments, the configuration file is the preferred method for runtime configuration of mongod. See the "<strong>/reference/configuration-options</strong>" document for more information about these options.</p><p>Not all configuration options for <strong>mongod</strong> make sense in the context of <em>mongos</em>.</p>
  </dd>
  <dt>
    <p><strong>--verbose, -v</strong></p>
  </dt>
  <dd>
    <p>Increases the amount of internal reporting returned on standard output or in the log file specified by <em>--logpath</em>. Use the <strong>-v</strong> form to control the level of verbosity by including the option multiple times, (e.g. <strong>-vvvvv</strong>.)</p>
  </dd>
  <dt>
    <p><strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>Runs the <em>mongos</em> instance in a quiet mode that attempts to limit the amount of output.</p>
  </dd>
  <dt>
    <p><strong>--port &lt;port&gt;</strong></p>
  </dt>
  <dd>
    <p>Specifies a TCP port for the <em>mongos</em> to listen for client connections. By default <em>mongos</em> listens for connections on port 27017.</p><p>UNIX-like systems require root access to access ports with numbers lower than 1024.</p>
  </dd>
  <dt>
    <p><strong>--bind_ip &lt;ip address&gt;</strong></p>
  </dt>
  <dd>
    <p>The IP address that the <em>mongos</em> process will bind to and listen for connections. By default <em>mongos</em> listens for connections on the localhost (i.e. <strong>127.0.0.1</strong> address.) You may attach <em>mongos</em> to any interface; however, if you attach <em>mongos</em> to a publicly accessible interface you must implement proper authentication or firewall restrictions to protect the integrity of your database.</p>
  </dd>
  <dt>
    <p><strong>--maxConns &lt;number&gt;</strong></p>
  </dt>
  <dd>
    <p>Specifies the maximum number of simultaneous connections that <em>mongos</em> will accept. This setting will have no effect if the value of this setting is higher than your operating system&apos;s configured maximum connection tracking threshold.</p><p>This is particularly useful for <em>mongos</em> if you have a client that creates a number of collections but allows them to timeout rather than close the collections. When you set <strong>maxConns</strong>, ensure the value is slightly higher than the size of the connection pool or the total number of connections to prevent erroneous connection spikes from propagating to the members of a <em>shard</em> cluster.</p>
<dl class='dl-vertical'>
  <dt>
    Note
  </dt>
  <dd>
    <p>You cannot set <strong>maxConns</strong> to a value higher than <em>20000</em>.</p>
  </dd>

</dl>

  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>--objcheck</strong></p>
  </dt>
  <dd>
    <p>Forces the <em>mongos</em> to validate all requests from clients upon receipt to ensure that invalid objects are never inserted into the database. This option has a performance impact, and is not enabled by default.</p>
  </dd>
  <dt>
    <p><strong>--logpath &lt;path&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify a path for the log file that will hold all diagnostic logging information.</p><p>Unless specified, <em>mongos</em> will output all log information to the standard output. Additionally, unless you also specify <em>--logappend</em>, the logfile will be overwritten when the process restarts.</p>
  </dd>
  <dt>
    <p><strong>--logappend</strong></p>
  </dt>
  <dd>
    <p>Specify to ensure that <em>mongos</em> appends additional logging data to the end of the logfile rather than overwriting the content of the log when the process restarts.</p>
  </dd>
  <dt>
    <p><strong>--syslog</strong></p>
  </dt>
  <dd>
    <p>New in version 2.1.0.</p><p>Sends all logging output to the host&apos;s <em>syslog</em> system rather than to standard output or a log file as with <em>--logpath</em>.</p>
<dl class='dl-vertical'>
  <dt>
    Warning
  </dt>
  <dd>
    <p>You cannot use <em>--syslog</em> with <em>--logpath</em>.</p>
  </dd>

</dl>

  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>--pidfilepath &lt;path&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify a file location to hold the "<em>PID</em>" or process ID of the <em>mongos</em> process. Useful for tracking the <em>mongos</em> process in combination with the <em>mongos --fork</em> option.</p><p>Without a specified <em>--pidfilepath</em> option, <em>mongos</em> creates no PID file.</p>
  </dd>
  <dt>
    <p><strong>--keyFile &lt;file&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the path to a key file to store authentication information. This option is only useful for the connection between <em>mongos</em> instances and components of the <em>sharded cluster</em>.</p>
<dl class='dl-vertical'>
  <dt>
    See also
  </dt>
  <dd>
    <p><em>sharding-security</em></p>
  </dd>

</dl>

  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>--nounixsocket</strong></p>
  </dt>
  <dd>
    <p>Disables listening on the UNIX socket. Without this option <em>mongos</em> creates a UNIX socket.</p>
  </dd>
  <dt>
    <p><strong>--unixSocketPrefix &lt;path&gt;</strong></p>
  </dt>
  <dd>
    <p>Specifies a path for the UNIX socket. Unless specified, <em>mongos</em> creates a socket in the <strong>/tmp</strong> path.</p>
  </dd>
  <dt>
    <p><strong>--fork</strong></p>
  </dt>
  <dd>
    <p>Enables a <em>daemon</em> mode for <strong>mongod</strong> which forces the process to the background. This is the normal mode of operation, in production and production-like environments, but may <em>not</em> be desirable for testing.</p>
  </dd>
  <dt>
    <p><strong>--configdb &lt;config1&gt;,&lt;config2&gt;&lt;:port&gt;,&lt;config3&gt;</strong></p>
  </dt>
  <dd>
    <p>Set this option to specify a configuration database (i.e. <em>config database</em>) for the <em>sharded cluster</em>. You must specify either 1 configuration server or 3 configuration servers, in a comma separated list.</p>
<dl class='dl-vertical'>
  <dt>
    Note
  </dt>
  <dd>
    <p><em>mongos</em> instances read from the first <em>config</em> server in the list provided. All <em>mongos</em> instances <strong>must</strong> specify the hosts to the <em>--configdb</em> setting in the same order.</p><p>If your configuration databases reside in more that one data center, order the hosts in the <em>--configdb</em> argument so that the config database that is closest to the majority of your <em>mongos</em> instances is first servers in the list.</p>
  </dd>

</dl>

  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    Warning
  </dt>
  <dd>
    <p>Never remove a config server from the <em>--configdb</em> parameter, even if the config server or servers are not available, or offline.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>--test</strong></p>
  </dt>
  <dd>
    <p>This option is for internal testing use only, and runs unit tests without starting a <em>mongos</em> instance.</p>
  </dd>
  <dt>
    <p><strong>--upgrade</strong></p>
  </dt>
  <dd>
    <p>This option updates the meta data format used by the <em>config database</em>.</p>
  </dd>
  <dt>
    <p><strong>--chunkSize &lt;value&gt;</strong></p>
  </dt>
  <dd>
    <p>The value of the <em>--chunkSize</em> determines the size of each <em>chunk</em>, <em>in megabytes</em>, of data distributed around the <em>sharded cluster</em>. The default value is 64 megabytes, which is the ideal size for chunks in most deployments: larger chunk size can lead to uneven data distribution, smaller chunk size often leads to inefficient movement of chunks between nodes. However, in some circumstances it may be necessary to set a different chunk size.</p><p>This option <em>only</em> sets the chunk size when initializing the cluster for the first time. If you modify the run-time option later, the new value will have no effect. See the "<em>sharding-balancing-modify-chunk-size</em>" procedure if you need to change the chunk size on an existing sharded cluster.</p>
  </dd>
  <dt>
    <p><strong>--ipv6</strong></p>
  </dt>
  <dd>
    <p>Enables IPv6 support to allow clients to connect to <em>mongos</em> using IPv6 networks. MongoDB disables IPv6 support by default in <strong>mongod</strong> and all utilities.</p>
  </dd>
  <dt>
    <p><strong>--jsonp</strong></p>
  </dt>
  <dd>
    <p>Permits <em>JSONP</em> access via an HTTP interface. Consider the security implications of allowing this activity before enabling this option.</p>
  </dd>
  <dt>
    <p><strong>--noscripting</strong></p>
  </dt>
  <dd>
    <p>Disables the scripting engine.</p>
  </dd>
  <dt>
    <p><strong>--nohttpinterface</strong></p>
  </dt>
  <dd>
    <p>New in version 2.1.2.</p><p>Disables the HTTP interface.</p>
  </dd>
  <dt>
    <p><strong>--localThreshold</strong></p>
  </dt>
  <dd>
    <p>New in version 2.2.</p><p><em>--localThreshold</em> affects the logic that <em>mongos</em> uses when selecting <em>replica set</em> members to pass read operations to from clients. Specify a value to <em>--localThreshold</em> in milliseconds. The default value is <strong>15</strong>, which corresponds to the default value in all of the client <strong>drivers</strong>.</p><p>When <em>mongos</em> receives a request that permits reads to <em>secondary</em> members, the <em>mongos</em> will:</p><ul>
<li><p>find the member of the set with the lowest ping time.</p></li><li><p>construct a list of replica set members that is within a ping time of 15 milliseconds of the nearest suitable member of the set.</p><p>If you specify a value for <em>--localThreshold</em>, <em>mongos</em> will construct the list of replica members that are within the latency allowed by this value.</p></li><li><p>The <em>mongos</em> will select a member to read from at random from this list.</p><p>The ping time used for a set member compared by the <em>--localThreshold</em> setting is a moving average of recent ping times, calculated, at most, every 10 seconds. As a result, some queries may reach members above the threshold until the <em>mongos</em> recalculates the average.</p><p>See the <em>replica-set-read-preference-behavior-member-selection</em> section of the <em>read preference</em> documentation for more information.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>--noAutoSplit</strong></p>
  </dt>
  <dd>
    <p>New in version 2.0.7.</p><p><em>--noAutoSplit</em> prevents <em>mongos</em> from automatically inserting metadata splits in a <em>sharded</em> collection. If set on all <em>mongos</em>, this will prevent MongoDB from creating new chunks as the data in a collection grows.</p><p>Because any <em>mongos</em> in a cluster can create a split, to totally disable splitting in a cluster you must set <em>--noAutoSplit</em> on all <em>mongos</em>.</p>
<dl class='dl-vertical'>
  <dt>
    Warning
  </dt>
  <dd>
    <p>With <em>--noAutoSplit</em> enabled, the data in your sharded cluster may become imbalanced over time. Enable with caution.</p>
  </dd>

</dl>

  </dd>

</dl>
<h3>SSL Options</h3>

<dl class='dl-vertical'>
  <dt>
    See
  </dt>
  <dd>
    <p><strong>/administration/ssl</strong> for full documentation of MongoDB&apos;s support.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>--authenticationDatabase &lt;dbname&gt;</strong></p>
  </dt>
  <dd>
    <p>New in version 2.4.</p><p>Specifies the database that holds the user&apos;s (e.g <em>--username</em>) credentials.</p><p>By default, <em>mongos</em> assumes that the database specified to the <em>--db</em> argument holds the user&apos;s credentials, unless you specify <em>--authenticationDatabase</em>.</p><p>See <strong>userSource</strong>, <strong>/reference/privilege-documents</strong> and <strong>/reference/user-privileges</strong> for more information about delegated authentication in MongoDB.</p>
  </dd>
  <dt>
    <p><strong>--authenticationMechanism &lt;name&gt;</strong></p>
  </dt>
  <dd>
    <p>New in version 2.4.</p><p>Specifies the authentication mechanism. By default, the authentication mechanism is <strong>MONGODB-CR</strong>, which is the MongoDB challenge/response authentication mechanism. In the MongoDB Subscriber Edition, <em>mongos</em> also includes support for <strong>GSSAPI</strong> to handle Kerberos authentication.</p><p>See <strong>/tutorial/control-access-to-mongodb-with-kerberos-authentication</strong> for more information about Kerberos authentication.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>MongoDB Documentation Project</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>2011-2013, 10gen, Inc.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mongorestore.1.html"><span aria-hidden="true">&larr;</span> mongorestore.1: Mongodb</a></li>
   <li class="next"><a href="mongosniff.1.html">mongosniff.1: Mongodb <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
