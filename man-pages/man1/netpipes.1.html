<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>netpipes: A package to manipulate bsd tcp/ip stream sockets  version 4.2</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A package to manipulate bsd tcp/ip stream sockets  version 4.2">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="netpipes (1) manual">
  <meta name="twitter:description" content="A package to manipulate bsd tcp/ip stream sockets  version 4.2">
  <meta name="twitter:image" content="https://www.carta.tech/images/netpipes-netpipes-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/netpipes.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="netpipes (1) manual" />
  <meta property="og:description" content="A package to manipulate bsd tcp/ip stream sockets  version 4.2" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/netpipes-netpipes-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">netpipes<small> (1)</small></h1>
        <p class="lead">A package to manipulate bsd tcp/ip stream sockets  version 4.2</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/netpipes.1.html">
      <span itemprop="name">netpipes: A package to manipulate bsd tcp/ip stream sockets  version 4.2</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/netpipes/">
      <span itemprop="name">netpipes</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/netpipes.1.html">
      <span itemprop="name">netpipes: A package to manipulate bsd tcp/ip stream sockets  version 4.2</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>faucet</strong> <em>port</em> (<strong>--in</strong>|<strong>--out</strong>|<strong>--err</strong>|<strong>--fd</strong> <em>n</em>)+ [<strong>--once</strong>] [<strong>--verbose</strong>] [<strong>--quiet</strong>] [<strong>--unix</strong>] [<strong>--foreignhost</strong> <em>addr</em>] [<strong>--foreignport</strong> <em>port</em>] [<strong>--localhost</strong> <em>addr</em>] [<strong>--serial</strong>] [<strong>--daemon</strong>] [<strong>--shutdown</strong> (r|w) ] [<strong>--pidfile</strong> <em>filename</em>] [<strong>--noreuseaddr</strong>] [<strong>--backlog</strong> <em>n</em>] [<strong>-</strong>[<strong>i</strong>][<strong>o</strong>][<strong>e</strong>][<strong>#</strong><em>3</em>[,<em>4</em>[,<em>5</em>...]]][<strong>v</strong>][<strong>1</strong>][<strong>q</strong>][<strong>u</strong>][<strong>d</strong>][<strong>s</strong>]] [<strong>-p</strong> <em>foreign-port</em>] [<strong>-h</strong> <em>foreign-host</em>] [<strong>-H</strong> <em>local-host</em>] <em>command</em> <em>args</em></p><p><strong>hose</strong> <em>hostname</em> <em>port</em> (<strong>--in</strong>|<strong>--out</strong>|<strong>--err</strong>|<strong>--fd</strong> <em>n</em>|<strong>--slave</strong>) [<strong>--verbose</strong>] [<strong>--unix</strong>] [<strong>--localport</strong> <em>port</em>] [<strong>--localhost</strong> <em>addr</em>] [<strong>--retry</strong> <em>n</em>] [<strong>--delay</strong> <em>n</em>] [<strong>--shutdown</strong> [r|w][a] ] [<strong>--noreuseaddr</strong>] [<strong>-</strong>[<strong>i</strong>][<strong>o</strong>][<strong>e</strong>][<strong>#</strong><em>3</em>[,<em>4</em>[,<em>5</em>...]]][<strong>s</strong>][<strong>v</strong>][<strong>u</strong>]] [<strong>-p</strong> <em>local-port</em>] [<strong>-h</strong> <em>local-host</em>] <em>command</em> <em>args</em></p><p><strong>encapsulate</strong> <strong>--fd</strong> <em>n</em> [ <strong>--verbose</strong> ] [ <strong>--subproc</strong> [ <strong>--infd</strong> <em>n</em>[<strong>=</strong><em>sid</em>] ] [ <strong>--outfd</strong> <em>n</em>[<strong>=</strong><em>sid</em>] ] [ <strong>--duplex</strong> <em>n</em>[<strong>=</strong><em>sid</em>] ] [ <strong>--Duplex</strong> <em>n</em>[<strong>=</strong><em>sid</em>] ] [ <strong>--DUPLEX</strong> <em>n</em>[<strong>=</strong><em>sid</em>] ] [ <strong>--prefer-local</strong> ] [ <strong>--prefer-remote</strong> ] [ <strong>--local-only</strong> ] [ <strong>--remote-only</strong> ] ] [ <strong>--client</strong> ] [ <strong>--server</strong> ] <strong>-</strong>[<strong>#</strong><em>n</em>][<strong>v</strong>][<strong>s</strong>[<strong>i</strong><em>n</em>][<strong>o</strong><em>n</em>][<strong>d</strong><em>n</em>][<strong>io</strong><em>n</em>][<strong>oi</strong><em>n</em>][<strong>l</strong>][<strong>r</strong>][<strong>L</strong>][<strong>R</strong>]] <em>command args ...</em></p><p><strong>sockdown</strong> [<em>fd</em> [<em>how</em>] ]</p><p><strong>getpeername</strong> [ <strong>-verbose</strong> ] [ <strong>-sock</strong> ] [ <em>fd</em> ]</p><p><strong>getsockname</strong> [ <strong>-verbose</strong> ] [ <strong>-peer</strong> ] [ <em>fd</em> ]</p><p><strong>timelimit.netpipes</strong> [ <strong>-v</strong> ] [ <strong>-nokill</strong> ] <em>time</em> <em>command args</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The netpipes package makes TCP/IP streams usable in shell scripts. It can also simplify client/server code by allowing the programmer to skip all the tedious programming bits related to sockets and concentrate on writing a filter/service.</p><p><em>``Why would anyone want to do that?''</em>  <em>-- Richard Stallman</em></p><p><strong>faucet</strong> is the server end of a TCP/IP stream.  It listens on a port of the local machine waiting for connections.  Every time it gets a connection it forks a process to perform a service for the connecting client.</p><p><strong>hose</strong> is the client end of a TCP/IP stream.  It actively connects to a remote port and execs a process to request a service.</p><p><strong>encapsulate</strong> is an implementation of the Session Control Protocol.  It allows you to multiplex several streams across a single TCP session and also transmits remote exit status.</p><p><strong>sockdown</strong> is a simple program designed to shut down part or all of the socket connection.  It is primarily useful when the processes connected to the socket perform both input and output.</p><p><strong>getpeername</strong> and <strong>getsockname</strong> are two names for a program designed to print out the addresses of the ends of a socket. <strong>getpeername</strong> prints the address of the remote end and <strong>getsockname</strong> prints the address of the local end.</p><p><strong>timelimit.netpipes </strong> limits the amount of foreground wallclock time a process may consume.  After the time limit runs out, it either kills the process, or exits and leaves it in the background.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Here is a simple command I often perform to transfer directory trees between machines.  (rsh does not work because one machine is connected using SLIP and .rhosts are out of the question).</p>
<pre>
server$ faucet 3000 --out tar cf - .
client$ hose server 3000 --in tar xvf -
</pre>
<p>Here is a minimal HTTP client.  It is so minimal it speaks old HTTP.</p>
<pre>
cairo$ hose www.cis.ufl.edu 80 --in --out &#92;
	sh -c "(echo 'GET /'; sockdown) & cat &gt; result"
</pre>
<p>And of course, there is Nick Trown's metaserver for Netrek</p>
<pre>
cairo$ hose metaserver.ecst.csuchico.edu 3521 --in cat
</pre>
<p>Allow me to apologize ahead of time for the convolutedness of the following example.  It requires an understanding of Bourne shell file descriptor redirection syntax (and illustrates why csh and tcsh suck eggs).  Do not try to type this from your tcsh command line.  Get a bash (GNU's Bourne Again SHell).</p><p>Suppose you want to distinguish between stdout and stderr of a remote process</p>
<pre>
remote$ faucet 3000 --fd 3 &#92;
   encapsulate --fd 3 --infd 0 --outfd 1 --outfd 2 --subproc &#92;
	remote-app
local$ hose remote 3000 --fd 3 &#92;
   encapsulate --fd 3 --outfd 3 --infd 4 --infd 5 --subproc &#92;
	sh -c "cat 0&lt;&4 3&gt;&- & cat 0&lt;&5 1&gt;&2 3&gt;&- & &#92;
	    cat 1&gt;&3 ; exec 3&gt;&-"
</pre>
<p>Close all unneeded file descriptors when you spawn a background task. That's why the backgrounded cats have 3&gt;&-.</p>
<pre>
server$ faucet 3000 --in --out --verbose enscript -2rGhp -
client$ ps aux | hose server 3000 --in --out &#92;
	sh -c " (cat &lt;&3; sockdown ) & cat &gt;&4 " 3&lt;&0 4&gt;&1 | &#92;
	lpr -Pps422
#or perhaps this, but I haven't tested it
client$ ps aux | hose server 3000 --fd 3 &#92;
	sh -c " (cat &gt;&3; sockdown 3 ) & cat &lt;&3 " | &#92;
	lpr -Pps422
</pre>
<p>This proves that hose <em>can</em> be used as part of a pipeline to perform a sort of remote procedure call (RPC).  After you have figured out that example, you will know how to use Bourne shell to shuffle file descriptors around.  It is a handy skill.</p><p>Now we go to the extreme, but simplify things by using the <em>--slave</em> option of hose.  The following is a socket relay</p>
<pre>
gateway$ faucet 3000 -io hose server 4000 --slave
</pre>
<p>It's a handy little bugger when you want to tunnel through a firewall on an occasional basis.  If you experience ``hanging'' of the connection, try using the <em>--netslave</em> option instead of <em>--slave</em>. (telnet proxies would benefit from this)</p><p>For those of you who use ssh, here's how to tunnel some information through an encrypted SSH port forward.</p>
<pre>
server$ faucet 3000 -1v --fd 1 --foreignhost server echo blah
client$ ssh -n -x -L 3000:server:3000 server sleep 60 &
client$ hose localhost 3000 --fd 0 -retry 10 cat
</pre>
<p>The trick with ssh's port forwarding, is that the <a href="../man2/shutdown.2.html"><strong>shutdown</strong>(2)</a> system call causes ssh to close both halves of the full-duplex connection instead of only one half.  That's why you have to use --fd 1 and --fd 0.  If you need to be able to close half of the connection while still using the other, use the encapsulate wrapper.</p>
<pre>
server$ faucet 3000 -1v --fd 3 --foreignhost server &#92;
	encapsulate --fd 3 --server -si0o1 tr a-z A-Z
client$ ssh -n -x -L 3000:server:3000 server sleep 60 &
client$ echo blah | hose localhost 3000 --fd 3 -retry 10 &#92;
	encapsulate --fd 3 --client
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REMARK</h2>
        <div class="sectioncontent">
<p>The Debian package maintainer has renamed <strong>timelimit</strong> to the more expressive <strong>timelimit.netpipes</strong>, as there exists a better alternative using the same short name, but which is actively maintained as an independent software.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO netpipes&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/faucet.1.html"><strong>faucet</strong>(1)</a>, <a href="../man1/hose.1.html"><strong>hose</strong>(1)</a>, <a href="../man1/encapsulate.1.html"><strong>encapsulate</strong>(1)</a>, <a href="../man1/sockdown.1.html"><strong>sockdown</strong>(1)</a>, <a href="../man1/getpeername.1.html"><strong>getpeername</strong>(1)</a>, <a href="../man1/timelimit.netpipes.1.html"><strong>timelimit.netpipes</strong>(1)</a>, <strong>timelimit</strong>(1).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Report any bugs or feature requests to thoth@purplefrog.com</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREDITS</h2>
        <div class="sectioncontent">
<p>Thanks to Harbor Development Inc. for funding some of the netpipes development.</p><p>Thanks to Michal Jaegermann &lt;michal@ellpspace.math.ualberta.ca&gt; for some bug fixes and glibc portability suggestions against 4.1.1 .</p><p>Big thanks to Joe Traister &lt;traister@gate.net&gt; for his signal handling patches, strerror surrogate, and other assorted hacks.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 1995-98 Robert Forsman</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DOWNLOAD</h2>
        <div class="sectioncontent">
<p>Export Version: ftp://ftp.purplefrog.com/pub/netpipes/</p><p>U.S./Canada version with ssl-auth: http://www.cryptography.org/ , then find it in the network/ subdirectory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Robert Forsman  thoth@purplefrog.com  Purple Frog Software  http://web.purplefrog.com/~thoth/</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="netpbm.1.html"><span aria-hidden="true">&larr;</span> netpbm.1: Package of graphics manipulation programs and libraries</a></li>
   <li class="next"><a href="netread.1.html">netread.1: Read data transported over network using netwrite <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
