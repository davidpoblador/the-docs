<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bmaptool: Create block map (bmap) for a file or copy a file using bmap</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create block map (bmap) for a file or copy a file using bmap">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bmaptool (1) manual">
  <meta name="twitter:description" content="Create block map (bmap) for a file or copy a file using bmap">
  <meta name="twitter:image" content="https://www.carta.tech/images/bmap-tools-bmaptool-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/bmaptool.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bmaptool (1) manual" />
  <meta property="og:description" content="Create block map (bmap) for a file or copy a file using bmap" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/bmap-tools-bmaptool-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bmaptool<small> (1)</small></h1>
        <p class="lead">Create block map (bmap) for a file or copy a file using bmap</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/bmaptool.1.html">
      <span itemprop="name">bmaptool: Create block map (bmap) for a file or copy a file using bmap</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/bmap-tools/">
      <span itemprop="name">bmap-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/bmaptool.1.html">
      <span itemprop="name">bmaptool: Create block map (bmap) for a file or copy a file using bmap</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>bmaptool</strong> [--help] [--version] [--quiet] [--debug] &lt;subcommand&gt; [&lt;options&gt;] &lt;args&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Bmaptool</em> is a generic tool for creating the block map (bmap) for a file and copying files using the block map. The idea is that large files, like raw system image files, can be copied or flashed a lot faster with <em>bmaptool</em> than with traditional tools, like "dd" or "cp".</p><p><em>Bmaptool</em> supports 2 subcommands:</p><p>1. <strong>copy</strong> - copy a file to another file using bmap or flash an image to a block device</p><p>2. <strong>create</strong> - create a bmap for a file</p><p>Please, find full documentation for the project at <strong>https://source.tizen.org/documentation/reference/bmaptool</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>--version</p><p>Print <em>bmaptool</em> version and exit.</p><p>-h, --help</p><p>Print short help text and exit.</p><p>-q, --quiet</p><p>Be quiet, do not print extra information.</p><p>-d, --debug</p><p>Print debugging messages.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<h3>\fBcopy\fR [options] IMAGE DEST</h3>
<p>Copy file IMAGE to the destination regular file or block device DEST using bmap. IMAGE may either be a local path or an URL. DEST may either be a regular file or a block device (only local).</p><p>Unless the bmap file is explicitly specified with the "--bmap" option, <em>bmaptool</em> automatically discovers it by looking for a file with the same basename as IMAGE but with the ".bmap" extension. The bmap file is only looked for in IMAGE's directory (or base URL, in case IMAGE was specified as an URL). If the bmap file is not found, <em>bmaptool</em> fails. To copy without bmap, use the "--nobmap" option.</p><p>Both IMAGE and the bmap file may be specified as an URL (http://, ftp://, https://, file://, ssh://). In order to make <em>bmaptool</em> use a proxy server, please, specify the proxy using the standard "$http_proxy", "$https_proxy", "$ftp_proxy" or "$no_proxy" environment variables.</p><p>If the server requires authentication, user name and password may be specified in the URL, for example "https://user:password@my.server.org/image.raw.bz2", or "ssh://user:password@host:path/to/image.raw".</p><p>IMAGE may be compressed, in which case <em>bmaptool</em> decompresses it on-the-fly. The compression type is detected by the file extension and the following extensions are supported:</p><p>1. ".gz", ".gzip", ".tar.gz" and ".tgz" for files and tar archives compressed with "<em>gzip</em>" program</p><p>2. ".bz2", "tar.bz2", ".tbz2", ".tbz", and ".tb2" for files and tar archives compressed with "<em>bzip2</em>" program</p><p>3. ".xz", ".tar.xz", ".txz" for files and tar archives compressed with "<em>xz</em>" program</p><p>4. ".lzo", "tar.lzo", ".tzo" for files and tar archives compressed with "<em>lzo</em>" program</p><p>IMAGE files with other extensions are assumed to be uncompressed. Note, <em>bmaptool</em> uses "<em>pbzip2</em>" and "<em>pigz</em>" programs for decompressing bzip2 and gzip archives faster, unless they are not available, in which case if falls-back to using "<em>bzip2</em>" and "<em>gzip</em>".</p><p>If DEST is a block device node (e.g., "/dev/sdg"), <em>bmaptool</em> opens it in exclusive mode. This means that it will fail if any other process has IMAGE block device node opened. This also means that no other processes will be able to open IMAGE until <em>bmaptool</em> finishes the copying. Please, see semantics of the "O_EXCL" flag of the "open()" syscall.</p><p>The bmap file typically contains SHA-256 checksum for itself as well as SHA-256 checksum for all the mapped data regions, which makes it possible to guarantee data integrity. <em>bmaptool</em> verifies the checksums and exits with an error in case of a mismatch. Checksum verification can be disabled using the "--no-verify" option. <em>bmaptool</em> does not verify that unampped areas contain only zeroes, because these areas are anyway dropped and are not used for anything.</p><p>The bmap file may be signed with OpenPGP (gpg). The signature may be either detached (a separate file) or "built into" the bmap file (so called "clearsign" signature).</p><p>The detached signature can be specified with the "--bmap-sig" option, otherwise <em>bmaptool</em> tries to automatically discover it by looking for a file with the same basename as the bmap file but with the ".asc" or ".sig" extension. This is very similar to the bmap file auto-discovery. So if a ".asc" or ".sig" file exists, <em>bmaptool</em> will verify the signature.</p><p>The clearsign signature is part of the bmap file and <em>bmaptool</em> automatically detected and verifies it.</p><p>If the signature is bad, <em>bmaptool</em> exits with an error. Bmap file signature verification can be disabled using the "--no-sig-verify" option.</p><p><strong>OPTIONS</strong></p><p>-h, --help</p><p>Print short help text about the "copy" subcommand and exit.</p><p>--bmap BMAP</p><p>Use bmap file "BMAP" for copying. If this option is not specified, <em>bmaptool</em> tries to automatically discover the bmap file.</p><p>--bmap-sig SIG</p><p>Use a detached OpenPGP signature file "SIG" for verifying the bmap file integrity and publisher. If this option is not specified, <em>bmaptool</em> tries to automatically discover the signature file.</p><p>--nobmap</p><p>Disable automatic bmap file discovery and force flashing entire IMAGE without bmap.</p><p>--no-verify</p><p>Do not verify data checksums when copying (not recommended). The checksums are stored in the bmap file, and normally <em>bmaptool</em> verifies that the data in IMAGE matches the checksums.</p><p>--no-sig-verify</p><p>Do not verify the OpenPGP bmap file signature (not recommended).</p><p><strong>EXAMPLES</strong></p><p><em>bmaptool</em> copy image.raw.bz2 /dev/sdg</p><p>Copy bz2-compressed local file "image.raw.bz2" to block device "/dev/sdg". The image file is uncompressed on-the-fly. The bmap file is discovered automatically. The OpenPGP signature is detected/discovered automatically too.</p><p><em>bmaptool</em> copy http://my-server.com/files/image.raw.bz2 $HOME/tmp/file</p><p>Copy bz2-compressed remote "image.raw.bz2" to regular file "$HOME/tmp/file". The image file is uncompressed on-the-fly. The bmap file is discovered automatically. The OpenPGP signature is detected/discovered automatically too.</p><p><em>bmaptool</em> copy --bmap image.bmap --bmap-sig image.bmap.asc image.raw /dev/sdg</p><p>Copy non-compressed local file "image.raw" to block device "/dev/sdg" using bmap file "image.bmap". Verify the bmap file signature using a detached OpenPGP signature from "imag.bmap.asc".</p>
<h3>\fBcreate\fR [options] IMAGE</h3>
<p>Generate bmap for a regular file IMAGE. Internally, this subcommand uses the Linux "FIEMAP" ioctl to find out which IMAGE blocks are mapped. However, if "FIEMAP" is not supported, the "SEEK_HOLE" feature of the "lseek" system call is used instead. By default, the resulting bmap file is printed to stdout, unless the "--output" option is used.</p><p>The IMAGE file is always synchronized before the block map is generated. And it is important to make sure that the IMAGE file is not modified when the bmap file is being generated, and after the bmap file has been generated. Otherwise the bmap file becomes invalid and checksum verification will fail.</p><p>The image file can further be signed using OpenPGP.</p><p><strong>OPTIONS</strong></p><p>-h, --help</p><p>Print short help text about the "create" subcommand and exit.</p><p>-o, --output OUTPUT</p><p>Save the generated bmap in the OUTPUT file (by default the bmap is printed to stdout).</p><p>--no-checksum</p><p>Generate a bmap file without SHA1 checksums (not recommended).</p><p><strong>EXAMPLES</strong></p><p><em>bmaptool</em> create image.raw</p><p>Generate bmap for the "image.raw" file and print it to stdout.</p><p><em>bmaptool</em> create -o image.bmap image.raw</p><p>Generate bmap for the "image.raw" file and save it in "image.bmap".</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Artem Bityutskiy &lt;artem.bityutskiy@linux.intel.com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Please, report bugs to Artem Bityutskiy &lt;artem.bityutskiy@linux.intel.com&gt; or to the bmap-tools mailing list &lt;bmap-tools@lists.infradead.org&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bluetoothctl.1.html"><span aria-hidden="true">&larr;</span> bluetoothctl.1: Bluetooth control tool</a></li>
   <li class="next"><a href="bmf.1.html">bmf.1: Efficient bayesian mail filter <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
