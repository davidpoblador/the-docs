<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>aviindex: Write and read text files describing the index of an avi file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Write and read text files describing the index of an avi file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="aviindex (1) manual">
  <meta name="twitter:description" content="Write and read text files describing the index of an avi file">
  <meta name="twitter:image" content="https://www.carta.tech/images/transcode-aviindex-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/aviindex.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="aviindex (1) manual" />
  <meta property="og:description" content="Write and read text files describing the index of an avi file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/transcode-aviindex-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">aviindex<small> (1)</small></h1>
        <p class="lead">Write and read text files describing the index of an avi file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/aviindex.1.html">
      <span itemprop="name">aviindex: Write and read text files describing the index of an avi file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/transcode/">
      <span itemprop="name">transcode</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/aviindex.1.html">
      <span itemprop="name">aviindex: Write and read text files describing the index of an avi file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>aviindex</strong> [ <strong>-o</strong> <em>ofile</em> <strong>-i</strong> <em>ifile</em> <strong>-f</strong> <strong>-n</strong> <strong>-x</strong> <strong>-v</strong> <strong>-h</strong> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p><strong>aviindex</strong> is Copyright (C) 2003,2004 by Tilmann Bitterberg</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>aviindex</strong> writes a text file describing the index of an AVI file. It analyses the content or index if available of the AVI file and prints this information in a human readable form.</p><p>An AVI file can have an optional chunk called "idx1" which contains information about keyframes (syncpoints) and locations of video frames resp. audio chunks. Though larger AVI files (&gt;2-4GB), so-called OpenDML AVI or also AVI 2 files, have a more complicated indexing system, which consists of a superindex referring to (possibly) several "standard" indexes, the "indexing principle" is the same. Movie players use such indexes to seek in files.</p><p><strong>aviindex</strong> reads the AVI file <em>ifile</em> and writes the index into <em>ofile</em>. This can either happen in "dumb" mode where <strong>aviindex</strong> looks for an existing index (and trusts this index!) in the file and dumps this index into a human readable form. The "dumb" mode is used, when <em>-n</em> is NOT specified or when the filesize of the input file is smaller than 2 GB.</p><p>In "smart" mode, <strong>aviindex</strong> scans through the complete AVI file and searches for chunks (may that video or audio) and reconstructs the index based on the information found. If an index chunk is found accidently, <strong>aviindex</strong> will use the information in this index to recover the keyframe information, which is important. <strong>aviindex</strong> will use smart mode, if given the <em>-n</em> option OR if the AVI file is larger than 2 GB. If the file is large, the index chunk cannot be found the usual way so one must use <em>-n</em> but it is possible that there is an index chunk in this file. Cross fingers.</p><p>Also in smart mode, <strong>aviindex</strong> analyzes the content of the video frame and tries to detect keyframes by looking at the data depending on the video codec.</p><p>The generated index file serves different purposes.</p>
<dl class='dl-vertical'>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>The library which handles AVI files in <a href="../man1/transcode.1.html"><strong>transcode</strong>(1)</a> can read such index files and use this file to rebuild the index instead of scanning through the whole AVI file over and over again. Reading the index from the index file is <strong>much</strong> faster than scanning through the AVI.</p>
  </dd>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>It can be used as a seeking file. When given to transcode via the --nav_seek switch, transcode will use the file to seek directly to the position you specified via -c. This also works for multiple -c ranges.</p>
  </dd>
  <dt>
    <p>*</p>
  </dt>
  <dd>
    <p>Its nice to have for debugging.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-o</strong> <em>ofile</em></p>
  </dt>
  <dd>
    <p>Specify the name of the output file.</p>
  </dd>
  <dt>
    <p><strong>-i</strong> <em>ifile</em></p>
  </dt>
  <dd>
    <p>Specify the name of the input file.</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>force the use of the existing index.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>force generating the index by scanning the file.</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>(implies -n) don't use any existing index to generate keyframes.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>show version.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>show help text.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MPLAYER</h2>
        <div class="sectioncontent">
<p><strong>aviindex</strong> can convert from and to mplayer-generated index files. Since mplayer-1.0pre3 mplayer has the ability to save the index via <em>-saveidx</em> FILE and load it again through <em>-loadidx</em> FILE. <strong>aviindex</strong> is able to convert an mplayer index file to a transcode index file and vice visa. It is not able to directly write an mplayer file, though. Example of a toolchain</p>
<pre>
  mplayer -frames 0 -saveidx mpidx broken.avi
  aviindex -i mpidx -o tcindex
  avimerge -x tcindex -i broken.avi -o fixed.avi
</pre>
<p>Or the other way round</p>
<pre>
  aviindex -i broken.avi -n -o broken.idx
  aviindex -i broken.idx -o mpidx
  mplayer -loadidx mpidx broken.avi
</pre>
<p>The major differences between the two index file formats is that the mplayer one is a binary format which is an exact copy of an index in the AVI file. <strong>aviindex</strong> \'s format is text based. See <strong>FORMAT</strong> for details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The command</p>
<pre>
  aviindex -i 3GBfile.avi -o 3GB.index
</pre>
<p>generates and index of the large file 3GBfile.avi. You can use the file 3GB.index to tell transcode to read the index from this file and not from the avi. This leads to much faster startup time.</p><p>Suppose 3GBfile.avi has DivX video and PCM sound and you want to encode several ranges.</p>
<pre>
transcode -V -i 3GBfile.avi --nav_seek 3GB.index &#92;
\	-x xvid,avi &#92;
\	-c 5000-6000,0:20:00-0:21:00,100000-100001 &#92;
\	-y xvid --lame_preset standard -o out.avi
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FORMAT</h2>
        <div class="sectioncontent">
<p>The format of the index file. The first 7 bytes in this file are "AVIIDX1" for easy detection and a comment of who created the file. The second line is a comment and describes the fields. Do not delete it. Each line (except the first 2) consists of exactly 8 fields all seperated by one space and describing one particular chunk of the AVI file.</p><p>Here is an example of an AVI file with two audio tracks.</p>
<pre>
AVIIDX1 # Generated by aviindex (transcode-0.6.8)
TAG TYPE CHUNK CHUNK/TYPE POS LEN KEY MS
00db 1 0 0 2048 8335 1 0.00
01wb 2 1 0 10392 847 1 0.00
01wb 2 2 1 11248 847 1 0.00
02wb 3 3 0 12104 847 1 0.00
02wb 3 4 1 12960 847 1 0.00
00db 1 5 1 13816 5263 0 0.00
00db 1 6 2 19088 3435 0 0.00
01wb 2 7 2 22532 834 1 0.00
</pre>
<p>The field <em>TAG</em> is the chunk descriptor. Its "00d*" for the video, "01wb" for the first audio track, "02wb" for the second audio track and so on.</p><p>The field <em>TYPE</em> is the type of the chunk. This is redundant because the type is also embedded into the TAG field but its a convenient thing to have. Its 1 for video, 2 for first audio track and 3 for second audio track.</p><p>The field <em>CHUNK</em> is the absolute chunk number in the AVI file. If you read the CHUNK field in the last line of the index file, you know how many chunks this AVI file has.</p><p>The field <em>CHUNK/TYPE</em> holds information about how many chunks of this type were previously found in the AVI file.</p><p>The field <em>POS</em> is the absolute byte position in the AVI file where this chunk can be found. Note this field can hold really large numbers if you are dealing with large AVIs.</p><p>The field <em>LEN</em> is the length of this chunk.</p><p>The field <em>KEY</em> holds information if this chunk is a keyframe. In the example above, all audio chunks are key-chunks, but only the first video frame is a key frame. This field is either 0 or 1.</p><p>The field <em>MS</em> holds information about how many milliseconds have passed. This field may be 0.00 if unknown.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p><strong>aviindex</strong> was written by Tilmann Bitterberg &lt;transcode at tibit.org&gt;</p><p>and is part of transcode.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO aviindex&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/avifix.1.html"><strong>avifix</strong>(1)</a>, <a href="../man1/avisync.1.html"><strong>avisync</strong>(1)</a>, <a href="../man1/avimerge.1.html"><strong>avimerge</strong>(1)</a>, <a href="../man1/avisplit.1.html"><strong>avisplit</strong>(1)</a>, <a href="../man1/tccat.1.html"><strong>tccat</strong>(1)</a>, <a href="../man1/tcdecode.1.html"><strong>tcdecode</strong>(1)</a>, <a href="../man1/tcdemux.1.html"><strong>tcdemux</strong>(1)</a>, <a href="../man1/tcextract.1.html"><strong>tcextract</strong>(1)</a>, <a href="../man1/tcprobe.1.html"><strong>tcprobe</strong>(1)</a>, <a href="../man1/tcscan.1.html"><strong>tcscan</strong>(1)</a>, <a href="../man1/transcode.1.html"><strong>transcode</strong>(1)</a>, <a href="../man1/mplayer.1.html"><strong>mplayer</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="avifix.1.html"><span aria-hidden="true">&larr;</span> avifix.1: Fix header of avi-file</a></li>
   <li class="next"><a href="avimake.1.html">avimake.1: Making tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
