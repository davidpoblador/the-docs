<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>esorex: Eso recipe execution tool</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Eso recipe execution tool">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="esorex (1) manual">
  <meta name="twitter:description" content="Eso recipe execution tool">
  <meta name="twitter:image" content="https://www.carta.tech/images/esorex-esorex-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/esorex.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="esorex (1) manual" />
  <meta property="og:description" content="Eso recipe execution tool" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/esorex-esorex-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">esorex<small> (1)</small></h1>
        <p class="lead">Eso recipe execution tool</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/esorex.1.html">
      <span itemprop="name">esorex: Eso recipe execution tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/esorex/">
      <span itemprop="name">esorex</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/esorex.1.html">
      <span itemprop="name">esorex: Eso recipe execution tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>esorex</strong> [<em>\,esorex-options\/</em>] <em>\,recipe \/</em>[<em>\,recipe-options\/</em>] <em>\,sof\/</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>EsoRex is the ESO Recipe Execution Tool. It can list, configure and execute CPL-based recipes from the command line.</p><p>One of the features provided by the CPL is the ability to create data-reduction algorithms that run as plugins (dynamic libraries). These are called recipes and are one of the main aspects of the CPL data-reduction development environment.</p><p>As these recipes are dynamic libraries, it is not possible to run them directly from the command line. However, ESO provides several tools to do this, thus saving recipe developers the need to write such an application themselves. One of these is GASGANO (a GUI-based tool) and the other is  EsoRex (which runs from the command line) and is described here.</p>
<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--help</strong></p>
  </dt>
  <dd>
    <p>Display this help and exit. If a recipe name is also given, then help will be given for it as well. [TRUE]</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>Display version information and exit. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--check-sof-exist</strong></p>
  </dt>
  <dd>
    <p>When TRUE, all the input files must exist  and be readable before calling the recipe. This option may also be set using the environment variable ESOREX_CHECK_SOF_EXIST. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--config</strong></p>
  </dt>
  <dd>
    <p>Configuration file to be used for EsoRex. This option may also be set using the environment variable ESOREX_CONFIG. []</p>
  </dd>
  <dt>
    <p><strong>--create-config</strong></p>
  </dt>
  <dd>
    <p>Creates a configuration file for Esorex. If set to TRUE a config file 'esorex.rc' is created in the '.esorex' directory in $HOME of the user.If a filename is specified, a config file will be created accordingly. If a recipe is specified in the command line, then the configuration file will be created for the recipe instead (called 'recipename.rc') Note that an existing file will be overwritten, but a backup file will be copied to 'filename.rc.bak' in the same directory. If the filename ends with extension .json then a machine-readable JSON format will be used. This option may also be set using the environment variable ESOREX_CREATE_CONFIG. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--link-dir</strong></p>
  </dt>
  <dd>
    <p>The directory in which a symbolic link to each of the product files should be written. The enable/disable switch to control whether the link is actually made is the '--suppress-link' option. This option may also be set using the environment variable ESOREX_LINK_DIR. [/tmp]</p>
  </dd>
  <dt>
    <p><strong>--log-dir</strong></p>
  </dt>
  <dd>
    <p>Directory where to place the logfile. This option may also be set using the environment variable ESOREX_LOG_DIR. [.]</p>
  </dd>
  <dt>
    <p><strong>--log-file</strong></p>
  </dt>
  <dd>
    <p>Filename of logfile. This option may also be set using the environment variable ESOREX_LOG_FILE. [esorex.log]</p>
  </dd>
  <dt>
    <p><strong>--log-level</strong></p>
  </dt>
  <dd>
    <p>Controls the severity level of messages that will be printed to the logfile. This option may also be set using the environment variable ESOREX_LOG_LEVEL. &lt;debug | info | warning | error | off&gt; [info]</p>
  </dd>
  <dt>
    <p><strong>--no-datamd5</strong></p>
  </dt>
  <dd>
    <p>Disables the computation of the MD5 data hash for FITS product files. This option may also be set using the environment variable ESOREX_NO_DATAMD5. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--no-checksum</strong></p>
  </dt>
  <dd>
    <p>Disables the computation of the standard FITS product checksums. This option may also be set using the environment variable ESOREX_NO_CHECKSUM. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--man-page</strong></p>
  </dt>
  <dd>
    <p>Display a manual page for the specified recipe, and then exit. Note that this option only applies to recipes, and that it does nothing for esorex by itself. See also the '--help' option. This option may also be set using the environment variable ESOREX_MAN_PAGE. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--mem-check</strong></p>
  </dt>
  <dd>
    <p>Report on memory status at completion of recipe execution. This option may also be set using the environment variable ESOREX_MEM_CHECK. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--msg-level</strong></p>
  </dt>
  <dd>
    <p>Controls the severity level of messages that will be printed to the terminal. This option may also be set using the environment variable ESOREX_MSG_LEVEL. &lt;debug | info | warning | error | off&gt; [info]</p>
  </dd>
  <dt>
    <p><strong>--output-dir</strong></p>
  </dt>
  <dd>
    <p>The directory where the product files should be finally moved to (all products are first created in the current dir). This option may also be set using the environment variable ESOREX_OUTPUT_DIR. [.]</p>
  </dd>
  <dt>
    <p><strong>--output-prefix</strong></p>
  </dt>
  <dd>
    <p>Prefix applied to any output file. For example, specifying 'pre' would translate 'filename.fits' to 'pre_0000.fits'. See also the '--suppress-prefix' option. This option may also be set using the environment variable ESOREX_OUTPUT_PREFIX. [out]</p>
  </dd>
  <dt>
    <p><strong>--output-readonly</strong></p>
  </dt>
  <dd>
    <p>When TRUE, any existing product files in the specified output directory will be set to read-only, for user, group and other. If FALSE, then EsoRex will use the default permissions for that account/directory. destroy any pre-existing files. This option exists for the Paranal operations environment. This option can additionally be used to prevent EsoRex from overwriting pre-existing files. This option may also be set using the environment variable ESOREX_OUTPUT_READONLY. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--paf-config</strong></p>
  </dt>
  <dd>
    <p>Configuration file for creation of PAF files. This option may also be set using the environment variable ESOREX_PAF_CONFIG. []</p>
  </dd>
  <dt>
    <p><strong>--params</strong></p>
  </dt>
  <dd>
    <p>List the input parameters and their current settings (whether from the command line or a configuration file) for the esorex application. Parameters are labelled using the parameter's alias. If a recipe is also specified, then the list of its parameters will also be generated in the same way. This option may also be set using the environment variable ESOREX_PARAMS. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--products-sof</strong></p>
  </dt>
  <dd>
    <p>Output file which contains the FITS files created by the recipe. If the filename ends with extension .json then a machine-readable JSON formatwill be used. This option may also be set using the environment variable ESOREX_PRODUCTS_SOF. []</p>
  </dd>
  <dt>
    <p><strong>--recipes</strong></p>
  </dt>
  <dd>
    <p>Display a list of all available recipes (that are available in the directory tree specified with '--recipe-dir'). This option may also be set using the environment variable ESOREX_RECIPES. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--recipe-config</strong></p>
  </dt>
  <dd>
    <p>Configuration file for any selected recipe. This option may also be set using the environment variable ESOREX_RECIPE_CONFIG. []</p>
  </dd>
  <dt>
    <p><strong>--recipe-dir</strong></p>
  </dt>
  <dd>
    <p>Directory containing recipe libraries. Note that esorex will recursively search not only the specified directory, but all sub-directories below it as well. Multiple directory heads may be specified, by separating the starting paths with colons (:). This option may also be set using the environment variable ESOREX_PLUGIN_DIR. [.]</p>
  </dd>
  <dt>
    <p><strong>--suppress-link</strong></p>
  </dt>
  <dd>
    <p>When TRUE, no symbolic link is created to the output product. However, if FALSE, then a symbolic link is created in the directory specified with the option '--link-dir' for each product that is created by the recipe. This option may also be set using the environment variable ESOREX_SUPPRESS_LINK. [TRUE]</p>
  </dd>
  <dt>
    <p><strong>--suppress-prefix</strong></p>
  </dt>
  <dd>
    <p>When TRUE, the original name of the output product, as produced by the recipe, is maintained. If FALSE, then the name of the output file is changed to the "prefix_number" format. The prefix can be altered using the '--output-prefix' option. This option may also be set using the environment variable ESOREX_SUPPRESS_PREFIX. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--time</strong></p>
  </dt>
  <dd>
    <p>Measure and show the recipe's execution time. This option may also be set using the environment variable ESOREX_TIME. [FALSE]</p>
  </dd>
  <dt>
    <p><strong>--unload-plugin</strong></p>
  </dt>
  <dd>
    <p>When TRUE, the plugin is unloaded after execution. If FALSE, the plugin is not unloaded after processing, so that a software like, e.g. valgrind, can be used for debugging the executed recipe. This option may also be set using the environment variable ESOREX_UNLOAD_PLUGIN. [TRUE]</p>
  </dd>

</dl>
<p>Libraries used: CPL = 6.5, CFITSIO = 3.37, WCSLIB, FFTW (double and single precision), OPENMP = 201307</p>
<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>
<p>Libraries used: CPL = 6.5, CFITSIO = 3.37, WCSLIB, FFTW (double and single precision), OPENMP = 201307</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HINTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">File permissions</h2>
        <div class="sectioncontent">
<p>When a recipe is used with the <strong>--suppress-prefix</strong> option, and the <strong>--output-dir</strong> is set to the current working directory, then the first execution of a recipe will work correctly, but subsequent executions may fail. This is due to output products being given &#96;read-only\' permission (to avoid the potential inadvertant loss of products). The recipe itself is unable to modify the permissions, and thus it fails when attempting to create the file. The solution (other than using a different output directory or prefixes) is to change the permission of these output files or delete them prior to any subsequent execution of that recipe.</p><p>This problem is less likely to occur in EsoRex v2+, due to the replacement of the <strong>--output-overwrite</strong> option with the <strong>--output-readonly</strong> (which is disabled by default). However, a determined user can still reach this situation, in which case the non-readable products must have their permissions changed, as described above.</p>
<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Configuration files</h2>
        <div class="sectioncontent">
<p>When creating configuration files, if the the recipe is provided on the command line, then EsoRex will generate the configuration file for this recipe. If no recipe name is given, then EsoRex will generate a configuration file for EsoRex itself. All configuration files are written in the $HOME/.esorex/ directory.</p>
<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Memory checking</h2>
        <div class="sectioncontent">
<p>It is possible to get EsoRex to check for memory leaks in the recipe that it is running, by enabling the <strong>--mem-check</strong> option. Then, at the conclusion of the recipe execution, and after memory deallocation, a list of all remaining allocated memory will be printed to screen. If there are no memory leaks, then no addition output is displayed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>All options can be set as environment parameters as well. See the previous paragraph for details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">/etc/esorex.rc $HOME/.esorex/esorex.rc</h2>
        <div class="sectioncontent">
<p>Default configuration files</p><p>The configuration file contains the EsoRex options, less the &#96;--\' switch, but prefixed with &#96;esorex.caller.\'. Blank lines are ignored and lines beginning with &#96;#\' are treated as comments.</p><p>Here is an example configuration file.</p><p> # Example EsoRex configuration file  #  esorex.caller.recipe-dir=/home/username/EsoRex/Plugins  esorex.caller.log-dir=.  esorex.caller.log-file=esorex.log  esorex.caller.log-file=esorex.log  esorex.caller.output-dir=.  esorex.caller.output-prefix=out_</p>
<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">filename.sof</h2>
        <div class="sectioncontent">
<p>A sof file contains a list of the input data. This data is specified in an sof file (which is just a text file), where each input file is specified with its associated classification and category. The format of each line in the sof file is as follows:</p><p> full-path-to-file  classification</p><p>Optionally, a third column may be provided. Permitted values are either RAW or CALIB. This is for when a recipe does not identify the type of input file, but as all ESO recipes are required to do so, this column is typically not needed.</p><p>An example sof file, for the mythological "ZIMOS" instrument, might look like this:</p><p> /data/mos/ZIMOS.03-12-26T01:05:06.fits  MOS_SCIENCE  /data/mos/ZIMOS.03-12-26T01:26:00.fits  MOS_SCIENCE  /data/mos/ZIMOS.03-12-26T01:47:04.fits  MOS_SCIENCE  /data/cal/master_bias4.fits             MASTER_BIAS  /data/cal/grs_LR_red.3.tfits            GRISM_TABLE  /data/gasgano/extract_table2.fits       EXTRACT_TABLE  /data/cal/badpixel.3.tfits              CCD_TABLE</p><p>For an concrete example for a specific instrument, check the documentation for that instrument.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by the CPL group (Pipeline System Department) European Southern Observatory / SDD - Garching</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs to &lt;cpl-help@eso.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2003-2012, European Southern Observatory.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="esniper.1.html"><span aria-hidden="true">&larr;</span> esniper.1: A lightweight ebay sniping tool</a></li>
   <li class="next"><a href="espctag.1.html">espctag.1: Edit tags of spc files (id666) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
