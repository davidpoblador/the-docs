<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>stalin: A global optimizing compiler for scheme</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A global optimizing compiler for scheme">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="stalin (1) manual">
  <meta name="twitter:description" content="A global optimizing compiler for scheme">
  <meta name="twitter:image" content="https://www.carta.tech/images/stalin-stalin-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/stalin.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="stalin (1) manual" />
  <meta property="og:description" content="A global optimizing compiler for scheme" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/stalin-stalin-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">stalin<small> (1)</small></h1>
        <p class="lead">A global optimizing compiler for scheme</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/stalin.1.html">
      <span itemprop="name">stalin: A global optimizing compiler for scheme</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/stalin/">
      <span itemprop="name">stalin</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/stalin.1.html">
      <span itemprop="name">stalin: A global optimizing compiler for scheme</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>stalin</strong></p>
  </dt>
  <dd>
    <p>[\|<strong>-version</strong>\|]</p><p>[\|<strong>-I</strong> <em>include-directory</em>\|]*</p><p>[\|[\|<strong>-s</strong>\||\|<strong>-x</strong>\||\|<strong>-q</strong>\||\|<strong>-t</strong>\|]\|]</p><p>[\|[\|<strong>-treat-all-symbols-as-external</strong>\||\|</p><p><strong></strong><strong>-do-not-treat-all-symbols-as-external</strong>\|]\|]</p><p>[\|[\|<strong>-index-allocated-string-types-by-expression</strong>\||\|</p><p><strong></strong><strong>-do-not-index-allocated-string-types-by-expression</strong>\|]\|]</p><p>[\|[\|<strong>-index-constant-structure-types-by-slot-types</strong>\||\|</p><p><strong></strong><strong>-do-not-index-constant-structure-types-by-slot-types</strong>\|]\|]</p><p>[\|[\|<strong>-index-constant-structure-types-by-expression</strong>\||\|</p><p><strong></strong><strong>-do-not-index-constant-structure-types-by-expression</strong>\|]\|]</p><p>[\|[\|<strong>-index-allocated-structure-types-by-slot-types</strong>\||\|</p><p><strong></strong><strong>-do-not-index-allocated-structure-types-by-slot-types</strong>\|]\|]</p><p>[\|[\|<strong>-index-allocated-structure-types-by-expression</strong>\||\|</p><p><strong></strong><strong>-do-not-index-allocated-structure-types-by-expression</strong>\|]\|]</p><p>[\|[\|<strong>-index-constant-headed-vector-types-by-element-type</strong>\||\|</p><p><strong></strong><strong>-do-not-index-constant-headed-vector-types-by-element-type</strong>\|]\|]</p><p>[\|[\|<strong>-index-constant-headed-vector-types-by-expression</strong>\||\|</p><p><strong></strong><strong>-do-not-index-constant-headed-vector-types-by-expression</strong>\|]\|]</p><p>[\|[\|<strong>-index-allocated-headed-vector-types-by-element-type</strong>\||\|</p><p><strong></strong><strong>-do-not-index-allocated-headed-vector-types-by-element-type</strong>\|]\|]</p><p>[\|[\|<strong>-index-allocated-headed-vector-types-by-expression</strong>\||\|</p><p><strong></strong><strong>-do-not-index-allocated-headed-vector-types-by-expression</strong>\|]\|]</p><p>[\|[\|<strong>-index-constant-nonheaded-vector-types-by-element-type</strong>\||\|</p><p><strong></strong><strong>-do-not-index-constant-nonheaded-vector-types-by-element-type</strong>\|]\|]</p><p>[\|[\|<strong>-index-constant-nonheaded-vector-types-by-expression</strong>\||\|</p><p><strong></strong><strong>-do-not-index-constant-nonheaded-vector-types-by-expression</strong>\|]\|]</p><p>[\|[\|<strong>-index-allocated-nonheaded-vector-types-by-element-type</strong>\||\|</p><p><strong></strong><strong>-do-not-index-allocated-nonheaded-vector-types-by-element-type</strong>\|]\|]</p><p>[\|[\|<strong>-index-allocated-nonheaded-vector-types-by-expression</strong>\||\|</p><p><strong></strong><strong>-do-not-index-allocated-nonheaded-vector-types-by-expression</strong>\|]\|]</p><p>[\|[\|<strong>-no-clone-size-limit</strong>\||\|</p><p><strong></strong><strong>-clone-size-limit</strong> <em>number-of-expressions</em>\|]\|]</p><p>[\|<strong>-split-even-if-no-widening</strong>\|]</p><p>[\|[\|<strong>-fully-convert-to-CPS</strong>\||\|</p><p><strong></strong><strong>-no-escaping-continuations</strong>\|]\|]</p><p>[\|<strong>-du</strong>\|]</p><p>[\|<strong>-Ob</strong>\|] [\|<strong>-Om</strong>\|] [\|<strong>-On</strong>\|] [\|<strong>-Or</strong>\|] [\|<strong>-Ot</strong>\|]</p><p>[\|<strong>-d0</strong>\|] [\|<strong>-d1</strong>\|] [\|<strong>-d2</strong>\|] [\|<strong>-d3</strong>\|] [\|<strong>-d4</strong>\|] [\|<strong>-d5</strong>\|] [\|<strong>-d6</strong>\|] [\|<strong>-d7</strong>\|]</p><p>[\|<strong>-closure-conversion-statistics</strong>\|]</p><p>[\|<strong>-dc</strong>\|] [\|<strong>-dC</strong>\|] [\|<strong>-dH</strong>\|] [\|<strong>-dg</strong>\|] [\|<strong>-dh</strong>\|]</p><p>[\|<strong>-d</strong>\|]</p><p>[\|<strong>-architecture</strong> <em>name</em>\|]</p><p>[\|[\|<strong>-baseline</strong>\||\|</p><p><strong></strong><strong>-conventional</strong>\||\|</p><p><strong></strong><strong>-lightweight</strong>\|]\|]</p><p>[\|[\|<strong>-immediate-flat</strong>\||\|</p><p><strong></strong><strong>-indirect-flat</strong>\||\|</p><p><strong></strong><strong>-immediate-display</strong>\||\|</p><p><strong></strong><strong>-indirect-display</strong>\||\|</p><p><strong></strong><strong>-linked</strong>\|]\|]</p><p>[\|[\|<strong>-align-strings</strong>\||\|<strong>-do-not-align-strings</strong>\|]\|]</p><p>[\|<strong>-de</strong>\|] [\|<strong>-df</strong>\|] [\|<strong>-dG</strong>\|] [\|<strong>-di</strong>\|] [\|<strong>-dI</strong>\|] [\|<strong>-dp</strong>\|] [\|<strong>-dP</strong>\|]</p><p>[\|<strong>-ds</strong>\|] [\|<strong>-dS</strong>\|] [\|<strong>-Tmk</strong>\|]</p><p>[\|<strong>-no-tail-call-optimization</strong>\|]</p><p>[\|<strong>-db</strong>\|] [\|<strong>-c</strong>\|] [\|<strong>-k</strong>\|]</p><p>[\|<strong>-cc</strong> <em>C-compiler</em>\|]</p><p>[\|<strong>-copt</strong> <em>C-compiler-option</em>\|]*</p><p>[\|<em>pathname</em>\|]</p>
  </dd>

</dl>
<p>Compiles the Scheme source file <em>pathname</em>.sc first into a C file <em>pathname</em>.c and then into an executable image <em>pathname</em>. Also produces a database file <em>pathname</em>.db. The <em>pathname</em> argument is required unless <strong>-version</strong> is specified.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Stalin is an extremely efficient compiler for Scheme.  It is designed to be used not as a development tool but rather as a means to generate efficient executable images either for application delivery or for production research runs.  In contrast to traditional Scheme implementations, Stalin is a batch-mode compiler.  There is no interactive READ-EVAL-PRINT loop.  Stalin compiles a single Scheme source file into an executable image (indirectly via C).  Running that image has equivalent semantics to loading the Scheme source file into a virgin Scheme interpreter and then terminating its execution.  The chief limitation is that it is not possible to LOAD or EVAL new expressions or procedure definitions into a running program after compilation.  In return for this limitation, Stalin does substantial global compile-time analysis of the source program under this closed-world assumption and produces executable images that are small, stand-alone, and fast.</p><p>Stalin incorporates numerous strategies for generating efficient code.  Among them, Stalin does global static type analysis using a soft type system that supports recursive union types.  Stalin can determine a narrow or even monomorphic type for each source code expression in arbitrary Scheme programs with no type declarations.  This allows Stalin to reduce, or often eliminate, run-time type checking and dispatching.  Stalin also does low-level representation selection on a per-expression basis.  This allows the use of unboxed base machine data representations for all monomorphic types resulting in extremely high-performance numeric code.  Stalin also does global static life-time analysis for all allocated data.  This allows much temporary allocated storage to be reclaimed without garbage collection.  Finally, Stalin has very efficient strategies for compiling closures.  Together, these compilation techniques synergistically yield efficient object code. Furthermore, the executable images created by Stalin do not contain (user-defined or library) procedures that aren't called, variables and parameters that aren't used, and expressions that cannot be reached.  This encourages a programming style whereby one creates and uses very general library procedures without fear that executable images will suffer from code bloat.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-version</strong></p>
  </dt>
  <dd>
    <p>Prints the version of Stalin and exits immediately.</p>
  </dd>

</dl>
<p>The following options control preprocessing:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-I</strong></p>
  </dt>
  <dd>
    <p>Specifies the directories to search for Scheme include files. This option can be repeated to specify multiple directories. Stalin first searches for include files in the current directory, then each of the directories specified in the command line, and finally in the default installation include directory.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>Includes the macros from the Scheme-&gt;C compatibility library. Currently, this defines the WHEN and UNLESS syntax.</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>Includes the macros from the Xlib and GL library. Currently, this defines the FOREIGN-FUNCTION and FOREIGN-DEFINE syntax. This implies <strong>-s</strong>.</p>
  </dd>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>Includes the macros from the QobiScheme library. Currently, this defines the DEFINE-STRUCTURE syntax, among other things. This implies <strong>-x</strong>.</p>
  </dd>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>Includes the macros needed to compile Stalin with itself. This implies <strong>-q</strong>.</p>
  </dd>

</dl>
<p>The following options control the precision of flow analysis:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-treat-all-symbols-as-external</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, generate a single abstract external symbol that is shared among all symbols.</p>
  </dd>
  <dt>
    <p><strong>-do-not-treat-all-symbols-as-external</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain symbols, generate a new abstract internal symbol for each distinct symbol constant in the program. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-index-allocated-string-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate strings, generate a new abstract string for each such expression. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-allocated-string-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate strings, generate a single abstract string that is shared among all such expressions.</p>
  </dd>

</dl>
<p>Note that there are no versions of the above options for element type because the element type of a string is always char. Furthermore, there are no versions of the above options for constant expressions because there is always only a single abstract constant string.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-index-constant-structure-types-by-slot-types</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain structures, generate a new abstract structure for each set of potential slot types for that structure.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-constant-structure-types-by-slot-types</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain structures, generate a single abstract structure that is shared among all sets of potential slot types for that structure. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-index-constant-structure-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expression that contain structures, generate a new abstract structure for each such expression. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-constant-structure-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain structures, generate a single abstract structure that is shared among all such expressions.</p>
  </dd>
  <dt>
    <p><strong>-index-allocated-structure-types-by-slot-types</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate structures, generate a new abstract structure for each set of potential slot types for that structure.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-allocated-structure-types-by-slot-types</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate structures, generate a single abstract structure that is shared among all sets of potential slot types for that structure. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-index-allocated-structure-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate structures, generate a new abstract structure for each such expression. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-allocated-structure-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate structures, generate a single abstract structure that is shared among all such expressions.</p>
  </dd>

</dl>
<p>Note that, currently, pairs are the only kind of structure that can appear in constant expressions. This may change in the future, if the reader is extended to support other kinds of structures.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-index-constant-headed-vector-types-by-element-type</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain headed vectors, generate a new abstract headed vector for each potential element type for that headed vector.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-constant-headed-vector-types-by-element-type</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain headed vectors, generate a single abstract headed vector that is shared among all potential element types for that headed vector. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-index-constant-headed-vector-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain headed vectors, generate a new abstract headed vector for each such expression. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-constant-headed-vector-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain headed vectors, generate a single abstract headed vector that is shared among all such expressions.</p>
  </dd>
  <dt>
    <p><strong>-index-allocated-headed-vector-types-by-element-type</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate headed vectors, generate a new abstract headed vector for each potential element type for that headed vector.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-allocated-headed-vector-types-by-element-type</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate headed vectors, generate a single abstract headed vector that is shared among all potential element types for that headed vector. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-index-allocated-headed-vector-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate headed vectors, generate a new abstract headed vector for each such expression. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-allocated-headed-vector-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate headed vectors, generate a single abstract headed vector that is shared among all such expressions.</p>
  </dd>
  <dt>
    <p><strong>-index-constant-nonheaded-vector-types-by-element-type</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain nonheaded vectors, generate a new abstract nonheaded vector for each potential element type for that nonheaded vector.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-constant-nonheaded-vector-types-by-element-type</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain nonheaded vectors, generate a single abstract nonheaded vector that is shared among all potential element types for that nonheaded vector. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-index-constant-nonheaded-vector-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain nonheaded vectors, generate a new abstract nonheaded vector for each such expression. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-constant-nonheaded-vector-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing constant expressions that contain nonheaded vectors, generate a single abstract nonheaded vector that is shared among all such expressions.</p>
  </dd>
  <dt>
    <p><strong>-index-allocated-nonheaded-vector-types-by-element-type</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate nonheaded vectors, generate a new abstract nonheaded vector for each potential element type for that nonheaded vector.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-allocated-nonheaded-vector-types-by-element-type</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate nonheaded vectors, generate a single abstract nonheaded vector that is shared among all potential element types for that nonheaded vector. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-index-allocated-nonheaded-vector-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate nonheaded vectors, generate a new abstract nonheaded vector for each such expression. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-do-not-index-allocated-nonheaded-vector-types-by-expression</strong></p>
  </dt>
  <dd>
    <p>During flow analysis, when processing procedure-call expressions that can allocate nonheaded vectors, generate a single abstract nonheaded vector that is shared among all such expressions.</p>
  </dd>

</dl>
<p>Note that, currently, constant expressions cannot contain nonheaded vectors and nonheaded vectors are never allocated by any procedure-call expression. ARGV is the only nonheaded vector. These options are included only for completeness and in case future extensions to the language allow nonheaded vector constants and procedures that allocate nonheaded vectors.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-no-clone-size-limit</strong></p>
  </dt>
  <dd>
    <p>Allow unlimited polyvariance, i.e. make copies of procedures of any size.</p>
  </dd>
  <dt>
    <p><strong>-clone-size-limit</strong></p>
  </dt>
  <dd>
    <p>Specify the polyvariance limit, i.e. make copies of procedures that have fewer than this many expressions. Must be a nonnegative integer. Defaults to 80. Specify 0 to disable polyvariance.</p>
  </dd>
  <dt>
    <p><strong>-split-even-if-no-widening</strong></p>
  </dt>
  <dd>
    <p>Normally, polyvariance will make a copy of a procedure only if it is called with arguments of different types. Specify this option to make copies of procedures even when they are called with arguments of the same type. This will allow them to be in-lined.</p>
  </dd>
  <dt>
    <p><strong>-fully-convert-to-CPS</strong></p>
  </dt>
  <dd>
    <p>Normally, lightweight CPS conversion is applied, converting only those expressions and procedures needed to support escaping continuations. When this option is specified, the program is fully converted to CPS.</p>
  </dd>
  <dt>
    <p><strong>-no-escaping-continuations</strong></p>
  </dt>
  <dd>
    <p>Normally, full continuations are supported. When this option is specified, the only continuations that are supported are those that cannot be called after the procedure that created the continuation has returned.</p>
  </dd>
  <dt>
    <p><strong>-du</strong></p>
  </dt>
  <dd>
    <p>Normally, after flow analysis, Stalin forces each type set to have at most one structure-type member of a given name, at most one headed-vector-type member, and at most one nonheaded-vector-type member. This option disables this, allowing type sets to have multiple structure-type members of a given name, multiple headed-vector-type members, and multiple nonheaded-vector-type members. Sometimes yields more efficient code and sometimes yields less efficient code.</p>
  </dd>

</dl>
<p>The following options control the amount of run-time error-checking code generated. Note that, independent of the settings of these options, Stalin will always generate code that obeys the semantics of the Scheme language for correct programs. These options only control the level of safety, that is the degree of run-time error checking for incorrect programs.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-Ob</strong></p>
  </dt>
  <dd>
    <p>Specifies that code to check for out-of-bound vector or string subscripts is to be suppressed. If not specified, a run-time error will be issued if a vector or string subscript is out of bounds. If specified, the behavior of programs that have an out-of-bound vector or string subscript is undefined.</p>
  </dd>
  <dt>
    <p><strong>-Om</strong></p>
  </dt>
  <dd>
    <p>Specifies that code to check for out-of-memory errors is to be suppressed. If not specified, a run-time error will be issued if sufficient memory cannot be allocated. If specified, the behavior of programs that run out of memory is undefined.</p>
  </dd>
  <dt>
    <p><strong>-On</strong></p>
  </dt>
  <dd>
    <p>Specifies that code to check for exact integer overflow is to be suppressed. If not specified, a run-time error will be issued on exact integer overflow. If specified, the behavior of programs that cause exact integer overflow is undefined. Currently, Stalin does not know how to generate overflow checking code so this option must be specified.</p>
  </dd>
  <dt>
    <p><strong>-Or</strong></p>
  </dt>
  <dd>
    <p>Specifies that code to check for various run-time file-system errors is to be suppressed. If not specified, a run-time error will be issued when an unsuccessful attempt is made to open or close a file. If specified, the behavior of programs that make such unsuccessful file-access attempts is undefined.</p>
  </dd>
  <dt>
    <p><strong>-Ot</strong></p>
  </dt>
  <dd>
    <p>Specifies that code to check that primitive procedures are passed arguments of the correct type is suppressed. If not specified, a run-time error will be issued if a primitive procedure is called with arguments of the wrong type. If specified, the behavior of programs that call a primitive procedure with data of the wrong type is undefined.</p>
  </dd>

</dl>
<p>The following options control the verbosity of the compiler:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-d0</strong></p>
  </dt>
  <dd>
    <p>Produces a compile-time backtrace upon a compiler error.</p>
  </dd>
  <dt>
    <p><strong>-d1</strong></p>
  </dt>
  <dd>
    <p>Produces commentary during compilation describing what the compiler is doing.</p>
  </dd>
  <dt>
    <p><strong>-d2</strong></p>
  </dt>
  <dd>
    <p>Produces a decorated listing of the source program after flow analysis.</p>
  </dd>
  <dt>
    <p><strong>-d3</strong></p>
  </dt>
  <dd>
    <p>Produces a decorated listing of the source program after equivalent types have been merged.</p>
  </dd>
  <dt>
    <p><strong>-d4</strong></p>
  </dt>
  <dd>
    <p>Produces a call graph of the source program.</p>
  </dd>
  <dt>
    <p><strong>-d5</strong></p>
  </dt>
  <dd>
    <p>Produces a description of all nontrivial native procedures generated.</p>
  </dd>
  <dt>
    <p><strong>-d6</strong></p>
  </dt>
  <dd>
    <p>Produces a list of all expressions and closures that allocate storage along with a description of where that storage is allocated.</p>
  </dd>
  <dt>
    <p><strong>-d7</strong></p>
  </dt>
  <dd>
    <p>Produces a trace of the lightweight closure-conversion process.</p>
  </dd>
  <dt>
    <p><strong>-closure-conversion-statistics</strong></p>
  </dt>
  <dd>
    <p>Produces a summary of the closure-conversion statistics. These are automatically processed by the program <em>bcl-to-latex.sc</em> which is run by the <em>bcl-benchmark</em> script (both in the <em>/usr/local/stalin/benchmarks</em> directory) to produce tables II, III, and IV, of the paper <em>Flow-Directed Lightweight Closure Conversion</em>.</p>
  </dd>

</dl>
<p>The following options control the storage management strategy used by compiled code:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-dc</strong></p>
  </dt>
  <dd>
    <p>Disables the use of <a href="../man3/alloca.3.html"><strong>alloca</strong>(3)</a></em>. Normally, the compiler will use <a href="../man3/alloca.3.html"><strong>alloca</strong>(3)</a></em> to allocate on the call stack when possible.</p>
  </dd>
  <dt>
    <p><strong>-dC</strong></p>
  </dt>
  <dd>
    <p>Disables the use of the Boehm conservative garbage collector. Normally, the compiler will use the Boehm collector to allocate data whose lifetime is not known to be short. Note that the compiler will still use the Boehm collector for some data if it cannot allocate that data on the stack or on a region.</p>
  </dd>
  <dt>
    <p><strong>-dH</strong></p>
  </dt>
  <dd>
    <p>Disables the use of regions for allocating data.</p>
  </dd>
  <dt>
    <p><strong>-dg</strong></p>
  </dt>
  <dd>
    <p>Generate code to produce diagnostic messages when region segments are allocated and freed.</p>
  </dd>
  <dt>
    <p><strong>-dh</strong></p>
  </dt>
  <dd>
    <p>Disables the use of expandable regions and uses fixed-size regions instead.</p>
  </dd>

</dl>
<p>The following options control code generation:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Specifies that inexact reals are represented as C doubles. Normally, inexact reals are represented as C floats.</p>
  </dd>
  <dt>
    <p><strong>-architecture</strong></p>
  </dt>
  <dd>
    <p>Specify the architecture for which to generate code. The default is to generate code for whatever architecture the compiler is run on. Currently, the known architectures are IA32, IA32-align-double, SPARC, SPARCv9, SPARC64, MIPS, Alpha, ARM, M68K, PowerPC, and S390.</p>
  </dd>
  <dt>
    <p><strong>-baseline</strong></p>
  </dt>
  <dd>
    <p>Do not perform lightweight closure conversion. Closures are created for all procedures. The user would not normally specify this option. It is only intended to measure the effectiveness of lightweight closure conversion. It is used by the <em>bcl-benchmark</em> script (in the <em>/usr/local/stalin/benchmarks</em> directory) to produce tables II, III, and IV, of the paper <em>Flow-Directed Lightweight Closure Conversion</em>.</p>
  </dd>
  <dt>
    <p><strong>-conventional</strong></p>
  </dt>
  <dd>
    <p>Perform a simplified version of lightweight closure conversion that does not rely on interprocedural analysis. Attempts to mimic what `conventional' compilers do (whatever that is). The user would not normally specify this option. It is only intended to measure the effectiveness of lightweight closure conversion. It is used by the <em>bcl-benchmark</em> script (in the <em>/usr/local/stalin/benchmarks</em> directory) to produce tables II, III, and IV of the paper <em>Flow-Directed Lightweight Closure Conversion</em>.</p>
  </dd>
  <dt>
    <p><strong>-lightweight</strong></p>
  </dt>
  <dd>
    <p>Perform lightweight closure conversion. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-immediate-flat</strong></p>
  </dt>
  <dd>
    <p>Generate code using immediate flat closures. This is not (yet) implemented.</p>
  </dd>
  <dt>
    <p><strong>-indirect-flat</strong></p>
  </dt>
  <dd>
    <p>Generate code using indirect flat closures. This is not (yet) implemented.</p>
  </dd>
  <dt>
    <p><strong>-immediate-display</strong></p>
  </dt>
  <dd>
    <p>Generate code using immediate display closures.</p>
  </dd>
  <dt>
    <p><strong>-indirect-display</strong></p>
  </dt>
  <dd>
    <p>Generate code using indirect display closures. This is not (yet) implemented.</p>
  </dd>
  <dt>
    <p><strong>-linked</strong></p>
  </dt>
  <dd>
    <p>Generate code using linked closures. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-align-strings</strong></p>
  </dt>
  <dd>
    <p>Align all strings to fixnum alignment. This will not work when strings are returned by foreign procedures that are not aligned to fixnum alignment. It will also not work when ARGV is used, since those strings are also not aligned to fixnum alignment. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-do-not-align-strings</strong></p>
  </dt>
  <dd>
    <p>Do not align strings to fixnum alignment. This must be specified when strings returned by foreign procedures are not aligned to fixnum alignment.</p>
  </dd>
  <dt>
    <p><strong>-de</strong></p>
  </dt>
  <dd>
    <p>Enables the compiler optimization known as EQ? forgery. Sometimes yields more efficient code and sometimes yields less efficient code.</p>
  </dd>
  <dt>
    <p><strong>-df</strong></p>
  </dt>
  <dd>
    <p>Disables the compiler optimization known as forgery.</p>
  </dd>
  <dt>
    <p><strong>-dG</strong></p>
  </dt>
  <dd>
    <p>Pass arguments using global variables instead of parameters whenever possible.</p>
  </dd>
  <dt>
    <p><strong>-di</strong></p>
  </dt>
  <dd>
    <p>Generate if statements instead of switch statements for dispatching.</p>
  </dd>
  <dt>
    <p><strong>-dI</strong></p>
  </dt>
  <dd>
    <p>Enables the use of immediate structures.</p>
  </dd>
  <dt>
    <p><strong>-dp</strong></p>
  </dt>
  <dd>
    <p>Enables representation promotion. Promotes some type sets from squeezed to squished or squished to general if this will decrease the amount of run-time branching or dispatching representation coercions. Sometimes yields more efficient code and sometimes yields less efficient code.</p>
  </dd>
  <dt>
    <p><strong>-dP</strong></p>
  </dt>
  <dd>
    <p>Enables copy propagation. Sometimes yields more efficient code and sometimes yields less efficient code.</p>
  </dd>
  <dt>
    <p><strong>-ds</strong></p>
  </dt>
  <dd>
    <p>Disables the compiler optimization known as squeezing.</p>
  </dd>
  <dt>
    <p><strong>-dS</strong></p>
  </dt>
  <dd>
    <p>Disables the compiler optimization known as squishing.</p>
  </dd>
  <dt>
    <p><strong>-Tmk</strong></p>
  </dt>
  <dd>
    <p>Enables generation of code that works with the Treadmarks distributed-shared-memory package. Currently this option is not fully implemented and is not known to work.</p>
  </dd>
  <dt>
    <p><strong>-no-tail-call-optimization</strong></p>
  </dt>
  <dd>
    <p>Stalin now generates code that is properly tail recursive, by default, in all but the rarest of circumstances. And it can be coerced into generating properly tail-recursive code in all circumstances by appropriate options. Some tail-recursive calls, those where the call site is in-lined in the target, are translated as C goto statements and always result in properly tail-recursive code. The rest are translated as C function calls in tail position. This relies on the C compiler to perform tail-call optimization. <strong>gcc</strong>(1)</em> versions 2.96 and 3.0.2 (and perhaps other versions) perform tail-call optimization on IA32 (and perhaps other architectures) when <strong>-foptimize-sibling-calls</strong> is specified. (<strong>-O2</strong> implies <strong>-foptimize-sibling-calls</strong>.) <strong>gcc</strong>(1)</em> only performs tail-call optimization on IA32 in certain circumstances. First, the target and the call site must have compatible signatures. To guarantee compatible signatures, Stalin passes parameters to C functions that are part of tail-recursive loops in global variables. Second, the target must not be declared <em>__attribute__ ((noreturn))</em>. Thus Stalin will not generate a <em>__attribute__ ((noreturn))</em> declaration for a function that is part of a tail-recursive loop even if Stalin knows that it never returns. Third, the function containing the call site cannot call <a href="../man3/alloca.3.html"><strong>alloca</strong>(3)</a></em>. <strong>gcc</strong>(1)</em> does no flow analysis. Any call to <a href="../man3/alloca.3.html"><strong>alloca</strong>(3)</a></em> in the function containing the call site, no matter whether the allocated data escapes, will disable tail-call optimization. Thus Stalin disables stack allocation of data in any procedure in-lined in a procedure that is part of a tail-recursive loop. Finally, the call site cannot contain a reentrant region because reentrant regions are freed upon procedure exit and a tail call would require an intervening region reclamation. Thus Stalin disables allocation of data on a reentrant region in any procedure that is part of a tail-recursive loop. Disabling these optimizations incurs a cost for the benefit of achieving tail-call optimization. If your C compiler does not perform tail-call optimization then you may wish not to pay the cost. The <strong>-no-tail-call-optimization</strong> option causes Stalin not to take these above four measures to generate code on which <strong>gcc</strong>(1)</em> would perform tail-call optimization. Even when specifying this option, Stalin still translates calls, where the call site is in-lined in the target, as C goto statements. There are three rare occasions that can still foil proper tail recursion. First, if you specify <strong>-dC</strong> you may force Stalin to use stack or region allocation even in a tail-call cycle. You can avoid this by not specifying <strong>-dC</strong>. Second, <strong>gcc</strong>(1)</em> will not perform tail-call optimization when the function containing the call site applies unary & to a local variable. <strong>gcc</strong>(1)</em> does no flow analysis. Any application of unary & to a local variable in the function containing the call site, no matter whether the pointer escapes, will disable tail-call optimization. Stalin can generate such uses of unary & when you specify <strong>-de</strong> or don't specify <strong>-df</strong>. You can avoid such cases by specifying <strong>-df</strong> and not specifying <strong>-de</strong>. Finally, <strong>gcc</strong>(1)</em> will not perform tail-call optimization when the function containing the call site calls <a href="../man3/setjmp.3.html"><strong>setjmp</strong>(3)</a></em>. <strong>gcc</strong>(1)</em> does no flow analysis. Any call to <a href="../man3/setjmp.3.html"><strong>setjmp</strong>(3)</a></em> in the function containing the call site, no matter whether the <em>jmp_buf</em>  escapes, will disable tail-call optimization. Stalin translates certain calls to <em>call-with-current-continuation</em> as calls to <a href="../man3/setjmp.3.html"><strong>setjmp</strong>(3)</a></em>. You can force Stalin not to do so by specifying <strong>-fully-convert-to-CPS</strong>. Stalin will generate a warning in the first and third cases, namely, when tail-call optimization is foiled by reentrant-region allocation or calls to <a href="../man3/alloca.3.html"><strong>alloca</strong>(3)</a></em> or <a href="../man3/setjmp.3.html"><strong>setjmp</strong>(3)</a></em>. So you can hold off specifying <strong>-fully-convert-to-CPS</strong> or refraining from specifying <strong>-dC</strong> until you see such warnings. No such warning is generated, however, when uses of unary & foil tail-call optimization. So you might want to always specify <strong>-df</strong> and refrain from specifying <strong>-de</strong> if you desire your programs to be properly tail recursive.</p>
  </dd>

</dl>
<p>The following options control the C-compilation phase:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-db</strong></p>
  </dt>
  <dd>
    <p>Disables the production of a database file.</p>
  </dd>
  <dt>
    <p><strong>-c</strong></p>
  </dt>
  <dd>
    <p>Specifies that the C compiler is not to be called after generating the C code. Normally, the C compiler is called after generating the C code to produce an executable image. This implies <strong>-k</strong>.</p>
  </dd>
  <dt>
    <p><strong>-k</strong></p>
  </dt>
  <dd>
    <p>Specifies that the generated C file is not to be deleted. Normally, the generated C file is deleted after it is compiled.</p>
  </dd>
  <dt>
    <p><strong>-cc</strong></p>
  </dt>
  <dd>
    <p>Specifies the C compiler to use. Defaults to <strong>gcc</strong>(1)</em>.</p>
  </dd>
  <dt>
    <p><strong>-copt</strong></p>
  </dt>
  <dd>
    <p>Specifies the options that the C compiler is to be called with. Normally the C compiler is called without any options. This option can be repeated to allow passing multiple options to the C compiler.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/usr/local/stalin/include/</em> default directory for Scheme include files and library archive files</p><p><em>/usr/local/stalin/include/Scheme-to-C-compatibility.sc</em> include file for Scheme-&gt;C compatibility</p><p><em>/usr/local/stalin/include/QobiScheme.sc</em> include file for QobiScheme</p><p><em>/usr/local/stalin/include/xlib.sc</em> include file for Xlib FPI</p><p><em>/usr/local/stalin/include/xlib-original.sc</em> include file for Xlib FPI</p><p><em>/usr/local/stalin/include/libstalin.a</em> library archive for Xlib FPI</p><p><em>/usr/local/stalin/include/gc.h</em> include file for the Boehm conservative garbage collector</p><p><em>/usr/local/stalin/include/libgc.a</em> library archive for the Boehm conservative garbage collector</p><p><em>/usr/local/stalin/include/stalin.architectures</em> the known architectures and their code-generation parameters</p><p><em>/usr/local/stalin/include/stalin-architecture-name</em> shell script that determines the architecture on which Stalin is running</p><p><em>/usr/local/stalin/stalin-architecture.c</em> program to construct a new entry for <em>stalin.architectures</em> with the code-generation parameters for the machine on which it is run</p><p><em>/usr/local/stalin/benchmarks</em> directory containing benchmarks from the paper <em>Flow-Directed Lightweight</em> Closure Conversion</p><p><em>/usr/local/stalin/benchmarks/bcl-benchmark</em> script for producing tables II, III, and IV from the paper <em>Flow-Directed</em> Lightweight Closure Conversion</p><p><em>/usr/local/stalin/benchmarks/bcl-to-latex.sc</em> Scheme program for producing tables II, III, and IV from the paper <em>Flow-Directed Lightweight Closure Conversion</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE&nbsp;ALSO</h2>
        <div class="sectioncontent">
<p><strong>sci</strong>(2), <strong>scc</strong>(2), <strong>gcc</strong>(1), <strong>ld</strong>(1), <a href="../man3/alloca.3.html"><strong>alloca</strong>(3)</a>, <a href="../man3/setjmp.3.html"><strong>setjmp</strong>(3)</a>, <strong>gc</strong>(8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Version 0.11 is an alpha release and contains many known bugs. Not everything is fully implemented. Bug mail should be addressed to <em>Bug-Stalin@AI.MIT.EDU</em> and not to the author. Please include the version number (0.11) in the message. Periodic announcements of bug fixes, enhancements, and new releases will be made to <em>Info-Stalin@AI.MIT.EDU</em>. Send mail to <em>Info-Stalin-Request@AI.MIT.EDU</em> to be added to the <em>Info-Stalin@AI.MIT.EDU</em> mailing list.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Jeffrey Mark Siskind</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THANKS</h2>
        <div class="sectioncontent">
<p>Rob Browning packaged version 0.11 for Debian Linux.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="st_snapshot.hourly.1.html"><span aria-hidden="true">&larr;</span> st_snapshot.hourly.1: Wrapper for st_snapshot</a></li>
   <li class="next"><a href="stalonetray.1.html">stalonetray.1: Stand-alone system tray (notification area) implementation. this document covers 0.8 version of stalonetray. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
