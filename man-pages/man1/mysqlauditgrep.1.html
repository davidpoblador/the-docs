<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mysqlauditgrep: Search an audit log</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Search an audit log">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mysqlauditgrep (1) manual">
  <meta name="twitter:description" content="Search an audit log">
  <meta name="twitter:image" content="https://www.carta.tech/images/mysql-utilities-mysqlauditgrep-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mysqlauditgrep.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mysqlauditgrep (1) manual" />
  <meta property="og:description" content="Search an audit log" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mysql-utilities-mysqlauditgrep-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mysqlauditgrep<small> (1)</small></h1>
        <p class="lead">Search an audit log</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mysqlauditgrep.1.html">
      <span itemprop="name">mysqlauditgrep: Search an audit log</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mysql-utilities/">
      <span itemprop="name">mysql-utilities</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mysqlauditgrep.1.html">
      <span itemprop="name">mysqlauditgrep: Search an audit log</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong> mysqlauditgrep [</strong><strong></strong><em>OPTIONS</em><strong>]... </strong><strong></strong><em>AUDIT_LOG_FILE</em><strong> </strong> <strong> mysqlauditgrep --file-stats[--format=</strong><strong></strong><em>FORMAT</em><strong>] </strong><strong></strong><em>AUDIT_LOG_FILE</em><strong> </strong> <strong> mysqlauditgrep --format=</strong><strong></strong><em>FORMAT</em><strong> </strong><strong></strong><em>AUDIT_LOG_FILE</em><strong> </strong> <strong> mysqlauditgrep [--users=</strong><strong></strong><em>USERS</em><strong>] [--start-date=</strong><strong></strong><em>START_DATE</em><strong>] [--end-date=</strong><strong></strong><em>END_DATE</em><strong>] [--pattern=</strong><strong></strong><em>PATTERN</em><strong>[--regexp]] [--query-type=</strong><strong></strong><em>QUERY_TYPE</em><strong>] [--event-type=</strong><strong></strong><em>EVENT_TYPE</em><strong>] [--status=</strong><strong></strong><em>STATUS</em><strong>] [--format=</strong><strong></strong><em>FORMAT</em><strong>] </strong><strong></strong><em>AUDIT_LOG_FILE</em><strong> </strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This utility allows you to search the current or archived audit logs, allowing you to display data from the audit log file according to the defined search criterion. It also allows you to output the results in different formats, namely GRID (default), TAB, CSV, VERTICAL, and RAW (the original XML format).</p><p>This utility allows you to search and filter the returned audit log records by: users (<strong>--users</strong>), date and time ranges (<strong>--start-date</strong> and <strong>--end-date</strong>), SQL query types (<strong>--query-type</strong>), logged event and record types (<strong>--event-type</strong>), status (<strong>--status</strong>), and matching patterns (<strong>--pattern</strong>). Any of these search options can be combined and used together, with the retrieved records resulting from all passed in options being true.</p><p>The <strong>--pattern</strong> supports two types of pattern matching: standard SQL, used with the SQL <em>LIKE</em> operator (SQL patterns), and standard <em>REGEXP</em> (POSIX regular expression patterns).</p><p>This utility always requires an audit log file to be passed in, so the <em>AUDIT_LOG_FILE</em> argument is searched as a full path and file name for the audit log file. If not specified, a notification concerning this requirement will be printed. And if <strong>--format</strong> is passed in without search parameters, then all the records of the audit log are displayed in the specified format.</p><p>The <strong>--file-stats</strong> option is not considered a search criteria, and is used to display the file statistics of a specified audit log. Other search options will be ignored when the <strong>--file-stats</strong> option is used, except the <strong>--format</strong> option will continue to format the results accordingly.</p><p>To specify the format of the generated results, use one of the following values with the <strong>--format</strong> option:</p><p><em>GRID (default)</em></p><p>Display output in grid or table format like that of the <strong>mysql</strong> monitor.</p><p><em>CSV</em></p><p>Display output in comma-separated values format.</p><p><em>VERTICAL</em></p><p>Display output in single-column format like that of the &#92;G command for the <strong>mysql</strong> monitor.</p><p><em>RAW</em></p><p>Display output results in the original raw format of the audit log records, which is written in XML.</p>
<pre>
      Standard SQL Pattern Matching
</pre>
<p>The simple patterns defined by the SQL standard enables users to use two characters with special meanings: &ldquo;%&rdquo; (percent) matches zero or more characters, and &ldquo;_&rdquo; (underscore) matches exactly one arbitrary character. In standard SQL, these types of patterns are used with the LIKE comparison operator, and they are case-insensitive by default. This utility assumes that they are case-insensitive.</p><p>For example:</p><p>"audit%"</p><p>Match any string that starts with "audit".</p><p>"%log%"</p><p>Match any string containing the word "log".</p><p>"%_"</p><p>Match any string consisting of one or more characters.</p><p>For documentation about the standard SQL pattern matching syntax, see \m[blue]<strong>Pattern Matching</strong>\m[]\s-2\u[1]\d\s+2.</p>
<pre>
      REGEXP Pattern Matching (POSIX)
</pre>
<p>Standard <em>REGEXP</em> patterns are more powerful than the simple patterns defined in the SQL standard. A regular expression is a string of ordinary and special characters specified to match other strings. Unlike SQL Patterns, <em>REGEXP</em> patterns are case-sensitive. The <em>REGEXP</em> syntax defines the following characters with special meaning:</p><p><em>.</em></p><p>Match any character.</p><p><em>^</em></p><p>Match the beginning of a string.</p><p><em>$</em></p><p>Match the end of a string.</p><p><em>&#92;</em></p><p>Match zero or more repetitions of the preceding regular expression.</p><p><em>+</em></p><p>Match one or more repetitions of the preceding regular expression.</p><p><em>?</em></p><p>Match zero or one repetition of the preceding regular expression.</p><p><em>|</em></p><p>Match either the regular expressions from the left or right of |.</p><p><em>[]</em></p><p>Indicates a set of characters to match. Note that, special characters lose their special meaning inside sets. In particular, ^ acquires a different meaning if it is the first character of the set, matching the complementary set (i.e., all the characters that are not in the set will be matched).</p><p><em>{m}</em></p><p>Match <em>m</em> repetitions of the preceding regular expression.</p><p><em>{m,n}</em></p><p>Match from <em>m</em> to <em>n</em> repetitions of the preceding regular expression.</p><p><em>()</em></p><p>Define a matching group, and matches the regular expression inside the parentheses.</p><p>For example:</p><p><em>"a&#92;*"</em></p><p>Match a sequence of zero or more a.</p><p><em>"a+"</em></p><p>Match a sequence of one or more a.</p><p><em>"a?"</em></p><p>Match zero or one a.</p><p><em>"ab|cd"</em></p><p>Match ab or cd.</p><p><em>"[axy]"</em></p><p>Match a, x or y.</p><p><em>"[a-f]"</em></p><p>Match any character in the range a to f (that is, a, b, c, d, e, or f).</p><p><em>"[^axy]"</em></p><p>Match any character <em>except</em>a, x or y.</p><p><em>"a{5}"</em></p><p>Match exactly five copies of a.</p><p><em>"a{2,5}"</em></p><p>Match from two to five copies of a.</p><p><em>"(abc)+"</em></p><p>Match one or more repetitions of abc.</p><p>This is a brief overview of regular expressions that can be used to define this type of patterns. The full syntax is described in the \m[blue]<strong>Python "re" module docs</strong>\m[]\s-2\u[2]\d\s+2, supporting the definition of much more complex pattern matching expression.</p>
<pre>
      OPTIONS
</pre>
<p><strong>mysqlauditgrep</strong> accepts the following command-line options:</p><p>--end-date=&lt;END_DATE&gt;</p><p>End date/time to retrieve log entries until the specified date/time range. If not specified or the value is 0, all entries to the end of the log are displayed. Accepted formats: "yyyy-mm-ddThh:mm:ss" or "yyyy-mm-dd".</p><p>--event-type=&lt;EVENT_TYPE&gt;</p><p>Comma-separated list of event types to search in all audit log records matching the specified types. Supported values are: Audit, Binlog Dump, Change user, Close stmt, Connect Out, Connect, Create DB, Daemon, Debug, Delayed insert, Drop DB, Execute, Fetch, Field List, Init DB, Kill, Long Data, NoAudit, Ping, Prepare, Processlist, Query, Quit, Refresh, Register Slave, Reset stmt, Set option, Shutdown, Sleep, Statistics, Table Dump, Time.</p><p>--file-stats</p><p>Display the audit log file statistics.</p><p>--format=FORMAT, -f FORMAT</p><p>Output format to display the resulting data. Supported format values: GRID (default), TAB, CSV, VERTICAL and RAW.</p><p>--help</p><p>Display a help message and exit.</p><p>--pattern=&lt;PATTERN&gt;, -e &lt;PATTERN&gt;</p><p>Search pattern to retrieve all entries with at least one attribute value matching the specified pattern. By default the standard SQL <em>LIKE</em> patterns are used for matching. If the <strong>--regexp</strong> option is set, then <em>REGEXP</em> patterns must be specified for matching.</p><p>--query-type=&lt;QUERY_TYPE&gt;</p><p>Comma-separated list of SQL statements/commands to search for and match. Supported values: CREATE, ALTER, DROP, TRUNCATE, RENAME, GRANT, REVOKE, SELECT, INSERT, UPDATE, DELETE, COMMIT, SHOW, SET, CALL, PREPARE, EXECUTE, DEALLOCATE.</p><p>--regexp, --basic-regexp, -G</p><p>Indicates that pattern matching will be performed using a regular expression <em>REGEXP</em> (from the Python re module). By default, the simple standard SQL <em>LIKE</em> patterns are used for matching. This affects how the value specified by the <strong>--pattern</strong> option is interpreted.</p><p>--start-date=&lt;START_DATE&gt;</p><p>Starting date/time to retrieve log entries from the specified date/time range. If not specified or the value is 0, all entries from the start of the log are displayed. Accepted formats: yyyy-mm-ddThh:mm:ss or yyyy-mm-dd.</p><p>--status=&lt;STATUS&gt;</p><p>Comma-separated list of status values or intervals to search for all audit log records with a matching status. Status values are non-negative integers (corresponding to MySQL error codes). Status intervals are closed (i.e., include both endpoints) and defined simply using a dash between its endpoints. For Example: 1051,1068-1075,1109,1146.</p><p>The --status option is available as of MySQL Utilities 1.2.4 / 1.3.3.</p><p>--users=&lt;USERS&gt;, -u &lt;USERS&gt;</p><p>Comma-separated list of user names, to search for their associated log entries. For example: "dan,jon,john,paul,philip,stefan".</p><p>--verbose, -v</p><p>Specify how much information to display. Use this option multiple times to increase the amount of information. For example, <strong>-v</strong> = verbose, <strong>-vv</strong> = more verbose, <strong>-vvv</strong> = debug.</p><p>--version</p><p>Display version information and exit.</p>
<pre>
      NOTES
</pre>
<p>This utility is available as of Î¼ 1.2.0.</p><p>This utility can only be applied to servers with the \m[blue]<strong>audit log plugin enabled</strong>\m[]\s-2\u[3]\d\s+2. And the audit log plugin is available as of MySQL Server versions 5.5.28 and 5.6.10.</p><p>This utility requires the use of Python version 2.6 or higher, but does not support Python 3.</p><p>Single or double quote characters (respectively, <em>&apos;</em> or <em>"</em>) can be used around option values. In fact, quotes are required to set some options values correctly, such as values with whitespace. For example, to specify the event types <strong>Create DB</strong> and <strong>Drop DB</strong> for the <strong>--event-type</strong> option, the following syntax must be used: <strong>--event-type=&apos;Create DB,Drop DB&apos;</strong> or <strong>--event-type="Create DB,Drop DB"</strong>.</p>
<pre>
      EXAMPLES
</pre>
<p>To display the audit log file statistics and output the results in CSV format, run the following command:</p>
<pre>
shell&gt; mysqlauditgrep --file-stats --format=CSV /SERVER/data/audit.log
  #
  # Audit Log File Statistics:
  #
  File,Size,Created,Last Modified
  audit.log,9101,Thu Sep 27 13:33:11 2012,Thu Oct 11 17:40:35 2012
  #
  # Audit Log Startup Entries:
  #
  SERVER_ID,STARTUP_OPTIONS,NAME,TIMESTAMP,MYSQL_VERSION,OS_VERSION,VERSION
  1,/SERVER/sql/mysqld --defaults-file=/SERVER/my.cnf,Audit,2012-09-27T13:33:11,5.5.29-log,x86_64-Linux,1
</pre>
<p>To display the audit log entries of specific users, use the following command:</p>
<pre>
shell&gt; mysqlauditgrep --users=tester1,tester2 /SERVER/data/audit.log
</pre>
<p>To display the audit log file statistics, run the following command:</p>
<pre>
shell&gt; mysqlauditgrep --users=tester1,tester2 /SERVER/data/audit.log
  +---------+------------+----------+----------------------+----------------+------------+----------+------------+------------+----------------------------------+
  | STATUS  | SERVER_ID  | NAME     | TIMESTAMP            | CONNECTION_ID  | HOST       | USER     | PRIV_USER  | IP         | SQLTEXT                          |
  +---------+------------+----------+----------------------+----------------+------------+----------+------------+------------+----------------------------------+
  | 0       | 1          | Connect  | 2012-09-28T11:26:50  | 9              | localhost  | root     | tester1    | 127.0.0.1  | None                             |
  | 0       | 1          | Query    | 2012-09-28T11:26:50  | 9              | None       | root     | tester1    | None       | SET @@session.autocommit = OFF   |
  | 0       | 1          | Ping     | 2012-09-28T11:26:50  | 9              | None       | root     | tester1    | None       | None                             |
  | 0       | 1          | Query    | 2012-09-28T11:26:50  | 9              | None       | root     | tester1    | None       | SHOW VARIABLES LIKE &apos;READ_ONLY&apos;  |
  | 0       | 1          | Query    | 2012-09-28T11:26:50  | 9              | None       | root     | tester1    | None       | COMMIT                           |
  | 0       | 1          | Ping     | 2012-09-28T11:26:50  | 9              | None       | root     | tester1    | None       | None                             |
  | 0       | 1          | Query    | 2012-09-28T11:26:50  | 9              | None       | root     | tester1    | None       | COMMIT                           |
  | 0       | 1          | Quit     | 2012-09-28T11:26:50  | 9              | None       | root     | tester1    | None       | None                             |
  | 0       | 1          | Connect  | 2012-10-10T15:55:55  | 11             | localhost  | tester2  | root       | 127.0.0.1  | None                             |
  | 0       | 1          | Query    | 2012-10-10T15:55:55  | 11             | None       | tester2  | root       | None       | select @@version_comment limit 1 |
  | 0       | 1          | Query    | 2012-10-10T15:56:10  | 11             | None       | tester2  | root       | None       | show databases                   |
  | 1046    | 1          | Query    | 2012-10-10T15:57:26  | 11             | None       | tester2  | root       | None       | show tables test                 |
  | 1046    | 1          | Query    | 2012-10-10T15:57:36  | 11             | None       | tester2  | root       | None       | show tables test                 |
  | 0       | 1          | Query    | 2012-10-10T15:57:51  | 11             | None       | tester2  | root       | None       | show tables in test              |
  | 0       | 1          | Quit     | 2012-10-10T15:57:59  | 11             | None       | tester2  | root       | None       | None                             |
  | 0       | 1          | Connect  | 2012-10-10T17:35:42  | 12             | localhost  | tester2  | root       | 127.0.0.1  | None                             |
  | 0       | 1          | Query    | 2012-10-10T17:35:42  | 12             | None       | tester2  | root       | None       | select @@version_comment limit 1 |
  | 0       | 1          | Quit     | 2012-10-10T17:47:22  | 12             | None       | tester2  | root       | None       | None                             |
  +---------+------------+----------+----------------------+----------------+------------+----------+------------+------------+----------------------------------+
</pre>
<p>To display the audit log entries for a specific date/time range, use the following command:</p>
<pre>
shell&gt; mysqlauditgrep --start-date=2012-09-27T13:33:47 --end-date=2012-09-28 /SERVER/data/audit.log
  +---------+----------------------+--------+----------------+---------------------------------------------------------------------------+
  | STATUS  | TIMESTAMP            | NAME   | CONNECTION_ID  | SQLTEXT                                                                   |
  +---------+----------------------+--------+----------------+---------------------------------------------------------------------------+
  | 0       | 2012-09-27T13:33:47  | Ping   | 7              | None                                                                      |
  | 0       | 2012-09-27T13:33:47  | Query  | 7              | SELECT * FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME LIKE &apos;audit%&apos;  |
  | 0       | 2012-09-27T13:33:47  | Query  | 7              | COMMIT                                                                    |
  | 0       | 2012-09-27T13:34:48  | Quit   | 7              | None                                                                      |
  | 0       | 2012-09-27T13:34:48  | Quit   | 8              | None                                                                      |
  +---------+----------------------+--------+----------------+---------------------------------------------------------------------------+
</pre>
<p>To display the audit log entries matching a specific SQL <em>LIKE</em> pattern, use the following command:</p>
<pre>
shell&gt; mysqlauditgrep --pattern="% = ___"; /SERVER/data/audit.log
  +---------+----------------------+--------+---------------------------------+----------------+
  | STATUS  | TIMESTAMP            | NAME   | SQLTEXT                         | CONNECTION_ID  |
  +---------+----------------------+--------+---------------------------------+----------------+
  | 0       | 2012-09-27T13:33:39  | Query  | SET @@session.autocommit = OFF  | 7              |
  | 0       | 2012-09-27T13:33:39  | Query  | SET @@session.autocommit = OFF  | 8              |
  | 0       | 2012-09-28T11:26:50  | Query  | SET @@session.autocommit = OFF  | 9              |
  | 0       | 2012-09-28T11:26:50  | Query  | SET @@session.autocommit = OFF  | 10             |
  +---------+----------------------+--------+---------------------------------+----------------+
</pre>
<p>To display the audit log entries matching a specific <em>REGEXP </em> pattern, use the following command:</p>
<pre>
shell&gt; mysqlauditgrep --pattern=".* = ..." --regexp /SERVER/data/audit.log
  +---------+----------------------+--------+---------------------------------+----------------+
  | STATUS  | TIMESTAMP            | NAME   | SQLTEXT                         | CONNECTION_ID  |
  +---------+----------------------+--------+---------------------------------+----------------+
  | 0       | 2012-09-27T13:33:39  | Query  | SET @@session.autocommit = OFF  | 7              |
  | 0       | 2012-09-27T13:33:39  | Query  | SET @@session.autocommit = OFF  | 8              |
  | 0       | 2012-09-28T11:26:50  | Query  | SET @@session.autocommit = OFF  | 9              |
  | 0       | 2012-09-28T11:26:50  | Query  | SET @@session.autocommit = OFF  | 10             |
  +---------+----------------------+--------+---------------------------------+----------------+
</pre>
<p>To display the audit log entries of specific query types, use the following command:</p>
<pre>
shell&gt; mysqlauditgrep --query-type=show,SET /SERVER/data/audit.log
  +---------+----------------------+--------+-------------------------------------------------+----------------+
  | STATUS  | TIMESTAMP            | NAME   | SQLTEXT                                         | CONNECTION_ID  |
  +---------+----------------------+--------+-------------------------------------------------+----------------+
  | 0       | 2012-09-27T13:33:39  | Query  | SET NAMES &apos;latin1&apos; COLLATE &apos;latin1_swedish_ci&apos;  | 7              |
  | 0       | 2012-09-27T13:33:39  | Query  | SET @@session.autocommit = OFF                  | 7              |
  | 0       | 2012-09-27T13:33:39  | Query  | SHOW VARIABLES LIKE &apos;READ_ONLY&apos;                 | 7              |
  | 0       | 2012-09-27T13:33:39  | Query  | SHOW VARIABLES LIKE &apos;datadir&apos;                   | 7              |
  | 0       | 2012-09-27T13:33:39  | Query  | SHOW VARIABLES LIKE &apos;basedir&apos;                   | 7              |
  | 0       | 2012-09-27T13:33:39  | Query  | SET NAMES &apos;latin1&apos; COLLATE &apos;latin1_swedish_ci&apos;  | 8              |
  | 0       | 2012-09-27T13:33:39  | Query  | SET @@session.autocommit = OFF                  | 8              |
  | 0       | 2012-09-27T13:33:39  | Query  | SHOW VARIABLES LIKE &apos;READ_ONLY&apos;                 | 8              |
  | 0       | 2012-09-27T13:33:39  | Query  | SHOW VARIABLES LIKE &apos;basedir&apos;                   | 8              |
  | 0       | 2012-09-28T11:26:50  | Query  | SET NAMES &apos;latin1&apos; COLLATE &apos;latin1_swedish_ci&apos;  | 9              |
  | 0       | 2012-09-28T11:26:50  | Query  | SET @@session.autocommit = OFF                  | 9              |
  | 0       | 2012-09-28T11:26:50  | Query  | SHOW VARIABLES LIKE &apos;READ_ONLY&apos;                 | 9              |
  | 0       | 2012-09-28T11:26:50  | Query  | SET NAMES &apos;latin1&apos; COLLATE &apos;latin1_swedish_ci&apos;  | 10             |
  | 0       | 2012-09-28T11:26:50  | Query  | SET @@session.autocommit = OFF                  | 10             |
  | 0       | 2012-09-28T11:26:50  | Query  | SHOW VARIABLES LIKE &apos;READ_ONLY&apos;                 | 10             |
  | 0       | 2012-09-28T11:26:50  | Query  | SET @@GLOBAL.audit_log_flush = ON               | 10             |
  | 0       | 2012-09-28T11:26:50  | Query  | SHOW VARIABLES LIKE &apos;audit_log_policy&apos;          | 10             |
  | 0       | 2012-09-28T11:26:50  | Query  | SHOW VARIABLES LIKE &apos;audit_log_rotate_on_size&apos;  | 10             |
  | 0       | 2012-10-10T15:56:10  | Query  | show databases                                  | 11             |
  | 1046    | 2012-10-10T15:57:26  | Query  | show tables test                                | 11             |
  | 1046    | 2012-10-10T15:57:36  | Query  | show tables test                                | 11             |
  | 0       | 2012-10-10T15:57:51  | Query  | show tables in test                             | 11             |
  +---------+----------------------+--------+-------------------------------------------------+----------------+
</pre>
<p>To display the audit log entries of specific event types, use the following command:</p>
<pre>
shell&gt; mysqlauditgrep --event-type="Ping,Connect" /SERVER/data/audit.log
  +---------+----------+----------------------+----------------+------------+---------+------------+------------+
  | STATUS  | NAME     | TIMESTAMP            | CONNECTION_ID  | HOST       | USER    | PRIV_USER  | IP         |
  +---------+----------+----------------------+----------------+------------+---------+------------+------------+
  | 0       | Connect  | 2012-09-27T13:33:39  | 7              | localhost  | root    | root       | 127.0.0.1  |
  | 0       | Ping     | 2012-09-27T13:33:39  | 7              | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-27T13:33:39  | 7              | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-27T13:33:39  | 7              | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-27T13:33:39  | 7              | None       | None    | None       | None       |
  | 0       | Connect  | 2012-09-27T13:33:39  | 8              | localhost  | root    | root       | 127.0.0.1  |
  | 0       | Ping     | 2012-09-27T13:33:39  | 8              | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-27T13:33:39  | 8              | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-27T13:33:47  | 7              | None       | None    | None       | None       |
  | 0       | Connect  | 2012-09-28T11:26:50  | 9              | localhost  | root    | tester     | 127.0.0.1  |
  | 0       | Ping     | 2012-09-28T11:26:50  | 9              | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-28T11:26:50  | 9              | None       | None    | None       | None       |
  | 0       | Connect  | 2012-09-28T11:26:50  | 10             | localhost  | root    | root       | 127.0.0.1  |
  | 0       | Ping     | 2012-09-28T11:26:50  | 10             | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-28T11:26:50  | 10             | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-28T11:26:50  | 10             | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-28T11:26:50  | 10             | None       | None    | None       | None       |
  | 0       | Ping     | 2012-09-28T11:26:50  | 10             | None       | None    | None       | None       |
  | 0       | Connect  | 2012-10-10T15:55:55  | 11             | localhost  | tester  | root       | 127.0.0.1  |
  | 0       | Connect  | 2012-10-10T17:35:42  | 12             | localhost  | tester  | root       | 127.0.0.1  |
  +---------+----------+----------------------+----------------+------------+---------+------------+------------+
</pre>
<p>To display the audit log entries with a specific status, use the following command:</p>
<pre>
shell&gt; mysqlauditgrep --status=1100-1199,1046 /SERVER/data/audit.log
  +---------+----------------------+--------+---------------------------------------------------------------------+----------------+
  | STATUS  | TIMESTAMP            | NAME   | SQLTEXT                                                             | CONNECTION_ID  |
  +---------+----------------------+--------+---------------------------------------------------------------------+----------------+
  | 1046    | 2012-10-10T15:57:26  | Query  | show tables test                                                    | 11             |
  | 1046    | 2012-10-10T15:57:36  | Query  | show tables test                                                    | 11             |
  | 1146    | 2012-10-10T17:44:55  | Query  | select * from teste.employees where salary &gt; 500 and salary &lt; 1000  | 12             |
  | 1046    | 2012-10-10T17:47:17  | Query  | select * from test_encoding where value = &apos;&lt;&gt;"&&apos;                    | 12             |
  +---------+----------------------+--------+---------------------------------------------------------------------+----------------+
</pre>
<p>Note: You can view all successful commands with <strong>--status=0</strong> and all unsuccessful ones with <strong>--status=1-9999</strong>.</p><p>To display the audit log entries matching several search criteria, use the following command:</p>
<pre>
shell&gt; mysqlauditgrep --users=root --start-date=0 --end-date=2012-10-10 --event-type=Query &#92;
     --query-type=SET --status=0 --pattern="%audit_log%" /SERVER/data/audit.log
  +---------+------------+--------+----------------------+----------------+-------+------------+------------------------------------+
  | STATUS  | SERVER_ID  | NAME   | TIMESTAMP            | CONNECTION_ID  | USER  | PRIV_USER  | SQLTEXT                            |
  +---------+------------+--------+----------------------+----------------+-------+------------+------------------------------------+
  | 0       | 1          | Query  | 2012-09-28T11:26:50  | 10             | root  | root       | SET @@GLOBAL.audit_log_flush = ON  |
  +---------+------------+--------+----------------------+----------------+-------+------------+------------------------------------+
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>Pattern Matching</p><p>http://dev.mysql.com/doc/refman/5.6/en/pattern-matching.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>Python "re" module docs</p><p>http://docs.python.org/2/library/re.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>audit log plugin enabled</p><p>http://dev.mysql.com/doc/refman/5.6/en/audit-log-plugin-installation.html</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mysqlauditgrep&hellip;</h2>
        <div class="sectioncontent">
<p>For more information, please refer to the MySQL Utilities section of the MySQL Workbench Reference Manual, which is available online at http://dev.mysql.com/doc/workbench/en/.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Oracle Corporation (http://dev.mysql.com/).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mysqlauditadmin.1.html"><span aria-hidden="true">&larr;</span> mysqlauditadmin.1: Maintain the audit log</a></li>
   <li class="next"><a href="mysqlbinlog.1.html">mysqlbinlog.1: Utility for processing binary log files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
