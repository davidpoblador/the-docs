<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ownetapi: Easy c-language 1-wire interface to the owserver protocol</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Easy c-language 1-wire interface to the owserver protocol">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ownetapi (1) manual">
  <meta name="twitter:description" content="Easy c-language 1-wire interface to the owserver protocol">
  <meta name="twitter:image" content="https://www.carta.tech/images/libownet-dev-ownetapi-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ownetapi.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ownetapi (1) manual" />
  <meta property="og:description" content="Easy c-language 1-wire interface to the owserver protocol" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libownet-dev-ownetapi-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ownetapi<small> (1)</small></h1>
        <p class="lead">Easy c-language 1-wire interface to the owserver protocol</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ownetapi.1.html">
      <span itemprop="name">ownetapi: Easy c-language 1-wire interface to the owserver protocol</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libownet-dev/">
      <span itemprop="name">libownet-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ownetapi.1.html">
      <span itemprop="name">ownetapi: Easy c-language 1-wire interface to the owserver protocol</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>libownet</strong> library to link with your program</p><h3>Handle</h3>
<p><strong>OWNET_HANDLE</strong></p><p>Handle to each owserver connection</p>
<h3>Initialization</h3>
<p><strong>OWNET_HANDLE OWNET_init( const char *</strong> <em>owserver_tcp_address_and_port</em> <strong>)</strong></p><p>Associate an <strong>owserver (1)</strong> tcp/ip address with a handle.</p>
<h3>Directory listing</h3>
<p><strong>int OWNET_dirlist( OWNET_HANDLE</strong> <em>owserver_handle</em> <strong>, const char *</strong> <em>onewire_path</em> <strong>, char **</strong> <em>comma_separated_list</em> <strong>)</strong></p><p>Create a comma-separated list of directory elements.</p><p><strong>int OWNET_dirprocess( OWNET_HANDLE</strong> <em>owserver_handle</em> <strong>, const char *</strong> <em>onewire_path</em> <strong>, void (*</strong> <em>dirfunc</em> <strong>) (void *, const char *), void *</strong> <em>passed_on_value</em> <strong>)</strong></p><p><strong>void</strong> <em>dirfunc</em> <strong>( void *</strong> <em>passed_on_value</em> <strong>, const char *</strong> <em>directory_element</em> <strong>)</strong></p><p>Apply function <em>dirfunc</em> to each directory element, along with an arbitrary passed_on_value.</p>
<h3>Get data</h3>
<p><strong>int OWNET_read( OWNET_HANDLE</strong> <em>owserver_handle</em> <strong>, const char *</strong> <em>onewire_path</em> <strong>, const char **</strong> <em>return_string</em> <strong>)</strong></p><p>Read a value (of specified size) from a 1-wire device.</p><p><strong>int OWNET_lread( OWNET_HANDLE</strong> <em>owserver_handle</em> <strong>, const char *</strong> <em>onewire_path</em> <strong>, const char **</strong> <em>return_string</em> <strong>, size_t</strong> <em>size</em> <strong>, off_t</strong> <em>offset</em> <strong>)</strong></p><p>Read a value (of specified size and offset) from a 1-wire device.</p><p><strong>int OWNET_present( OWNET_HANDLE</strong> <em>owserver_handle</em> <strong>, const char *</strong> <em>onewire_path</em> <strong>)</strong></p><p>Check if a 1-wire device is present.</p>
<h3>Set data</h3>
<p><strong>int OWNET_put( OWNET_HANDLE</strong> <em>owserver_handle</em> <strong>, const char *</strong> <em>onewire_path</em> <strong>, const char *</strong> <em>value_string</em> <strong>, size_t</strong> <em>size</em> <strong>)</strong></p><p>Write a value (of specified size) to a 1-wire device.</p><p><strong>int OWNET_lwrite( OWNET_HANDLE</strong> <em>owserver_handle</em> <strong>, const char *</strong> <em>onewire_path</em> <strong>, const char *</strong> <em>value_string</em> <strong>, size_t</strong> <em>size</em> <strong>, off_t</strong> <em>offset</em> <strong>)</strong></p><p>Write a value (of specified size and offset) to a 1-wire device.</p>
<h3>Close</h3>
<p><strong>void OWNET_close( OWNET_HANDLE</strong> <em>owserver_handle</em> <strong>)</strong></p><p>Close the connection to a particular owserver.</p><p><strong>void OWNET_closeall( void )</strong></p><p>Close all open owserver connections.</p><p><strong>void OWNET_finish( void )</strong></p><p>Close all open owserver connections and free all memory.</p>
<h3>Temperature scale</h3>
<p><strong>void OWNET_set_temperature_scale( char</strong> <em>temperature_scale</em> <strong>)</strong></p><p><strong>char OWNET_get_temperature_scale( void )</strong></p><p>Set and retrieve the temperature scale used for all communications.</p>
<h3>Device format</h3>
<p><strong>void OWNET_set_device_format( const char *</strong> <em>device_format</em> <strong>)</strong></p><p><strong>const char * OWNET_get_device_format( void )</strong></p><p>Set and retrieve the 1-wire device serial number format used for all communications.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTIONS</h2>
        <div class="sectioncontent">
<h3>OW_init</h3>
<p><em>OW_init_string</em> offers the full flexibility of the <strong>owfs (1)</strong> and <strong>owhttpd (1)</strong> command line.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>Arguments</em></p>
  </dt>
  <dd>
    <p>Can be as simple as jus the device name, a full parameter specification. One or more device names (includes tcp, serial, usb...) and command line switches. See <strong>owfs (1)</strong> for full syntax.</p>
  </dd>
  <dt>
    <p><em>Returns</em></p>
  </dt>
  <dd>
    <p>0 for success. -1 on error and <em>errno</em> will be set. <em>OW_finish</em> does not need to be called if <em>OW_init</em> fails.</p>
  </dd>
  <dt>
    <p><em>Sequence</em></p>
  </dt>
  <dd>
    <p>One of the <em>init</em> functions must be called before accessing the 1-wire bus. <em>OW_finish</em> is optional.</p>
  </dd>

</dl>

<h3>OW_init_args</h3>
<p><em>OW_init_args</em> offers the full flexibility of the <strong>owfs (1)</strong> and <strong>owhttpd (1)</strong> command line.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>Arguments</em></p>
  </dt>
  <dd>
    <p>One or more device names (includes tcp, serial, usb...) and command line switches. See <strong>owfs (1)</strong> for full syntax. Unlike <em>OW_init_string</em> the arguments are in argv/argc format.</p>
  </dd>
  <dt>
    <p><em>Returns</em></p>
  </dt>
  <dd>
    <p>0 for success. -1 on error and <em>errno</em> will be set. <em>OW_finish</em> does not need to be called if <em>OW_init</em> fails.</p>
  </dd>
  <dt>
    <p><em>Sequence</em></p>
  </dt>
  <dd>
    <p>One of the <em>init</em> functions must be called before accessing the 1-wire bus. <em>OW_finish</em> is optional.</p>
  </dd>

</dl>

<h3>OW_get</h3>
<p><em>OW_get</em> is used to get directory listings and file contents. The results are put in a dynamically allocated buffer.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>Arguments</em></p>
  </dt>
  <dd>
    <p><em>path</em> is the path to the directory or file (property). <em>*buffer</em> returns a pointer to a buffer containing the directory (comma separated) or value. <em>buffer_length</em> returns the length of the value/string in <em>buffer</em></p>
  </dd>
  <dt>
    <p><em>Returns</em></p>
  </dt>
  <dd>
    <p>number of bytes on success. -1 on error (and <em>errno</em> is set).</p>
  </dd>
  <dt>
    <p><em>Sequence</em></p>
  </dt>
  <dd>
    <p>One of the <em>init</em> functions must be called before accessing the 1-wire bus. <em>OW_finish</em> is optional.</p>
  </dd>
  <dt>
    <p><em>Important note</em></p>
  </dt>
  <dd>
    <p><em>buffer</em> is allocated ( with malloc ) by <em>OW_get</em> but must be freed in your program. See <strong>malloc (3)</strong> and <strong>free (3)</strong></p>
  </dd>

</dl>

<h3>OW_lread</h3>
<p><em>OW_lread</em> is used to read 1-wire memory chips. Think of it as a combination of <em>lseek</em> and <em>read</em> It allows random-access to the memory, specifying location and length. Unlike <em>OW_get</em> directories cannot be obtained and the buffer must be pre-allocated rather than allocated by the routine. <em>buffer</em> must be at least <em>size</em> length.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>Arguments</em></p>
  </dt>
  <dd>
    <p><em>path</em> is the path to the file (property). <em>buffer</em> is the (pre-allocated) memory area where the value will be placed. <em>size</em> is the length of bytes requested. <em>offset</em> is the position in file to start reading.</p>
  </dd>
  <dt>
    <p><em>Returns</em></p>
  </dt>
  <dd>
    <p>number of bytes on success. -1 on error (and <em>errno</em> is set).</p>
  </dd>
  <dt>
    <p><em>Sequence</em></p>
  </dt>
  <dd>
    <p>One of the <em>init</em> functions must be called before accessing the 1-wire bus. <em>OW_finish</em> is optional.</p>
  </dd>

</dl>

<h3>OW_put</h3>
<p><em>OW_put</em> is an easy way to write to 1-wire chips.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>Arguments</em></p>
  </dt>
  <dd>
    <p><em>path</em> is the path to the file (property). <em>buffer</em> is the value to be written. <em>buffer_length</em> is the length of the value <em>buffer.</em> <em>Returns</em> number of bytes on success. -1 on error (and <em>errno</em> is set).</p>
  </dd>
  <dt>
    <p><em>Sequence</em></p>
  </dt>
  <dd>
    <p>One of the <em>init</em> functions must be called before accessing the 1-wire bus. <em>OW_finish</em> is optional.</p>
  </dd>

</dl>

<h3>OW_lwrite</h3>
<p><em>OW_lwrite</em> is the companion of <em>OW_lread.</em> It allows writing to arbitrary positions in 1-wire memory. Think of it as a combination of <em>lseek</em> and <em>write.</em> <em>buffer</em> must be at least <em>size</em> length.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>Arguments</em></p>
  </dt>
  <dd>
    <p><em>path</em> is the path to the file (property). <em>buffer</em> is the data to be written. <em>size</em> is the length of bytes to be written. <em>offset</em> is the position in file to start writing.</p>
  </dd>
  <dt>
    <p><em>Returns</em></p>
  </dt>
  <dd>
    <p>number of bytes on success. -1 on error (and <em>errno</em> is set).</p>
  </dd>
  <dt>
    <p><em>Sequence</em></p>
  </dt>
  <dd>
    <p>One of the <em>init</em> functions must be called before accessing the 1-wire bus. <em>OW_finish</em> is optional.</p>
  </dd>

</dl>

<h3>OW_finish</h3>
<p><em>OW_finish</em> cleans up the <em>OWFS</em> 1-wire routines, releases devices and memory.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>Arguments</em></p>
  </dt>
  <dd>
    <p>None.</p>
  </dd>
  <dt>
    <p><em>Returns</em></p>
  </dt>
  <dd>
    <p>None</p>
  </dd>
  <dt>
    <p><em>Sequence</em></p>
  </dt>
  <dd>
    <p><em>OW_finish</em> is optional since cleanup is automatic on program exit.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<h3>1-Wire</h3>
<p><em>1-wire</em> is a wiring protocol and series of devices designed and manufactured by Dallas Semiconductor, Inc. The bus is a low-power low-speed low-connector scheme where the data line can also provide power.</p><p>Each device is uniquely and unalterably numbered during manufacture. There are a wide variety of devices, including memory, sensors (humidity, temperature, voltage, contact, current), switches, timers and data loggers. More complex devices (like thermocouple sensors) can be built with these basic devices. There are also 1-wire devices that have encryption included.</p><p>The 1-wire scheme uses a single <em>bus master</em> and multiple <em>slaves</em> on the same wire. The bus master initiates all communication. The slaves can be individually discovered and addressed using their unique ID.</p><p>Bus masters come in a variety of configurations including serial, parallel, i2c, network or USB adapters.</p>
<h3>OWFS design</h3>
<p><em>OWFS</em> is a suite of programs that designed to make the 1-wire bus and its devices easily accessible. The underlying priciple is to create a virtual filesystem, with the unique ID being the directory, and the individual properties of the device are represented as simple files that can be read and written.</p><p>Details of the individual slave or master design are hidden behind a consistent interface. The goal is to provide an easy set of tools for a software designer to create monitoring or control applications. There are some performance enhancements in the implementation, including data caching, parallel access to bus masters, and aggregation of device communication. Still the fundemental goal has been ease of use, flexibility and correctness rather than speed.</p>
<h3>libowcapi</h3>
<p><strong>libowcapi (1)</strong> is an encapsulation of the full <strong>libow</strong> library for C programs.</p><p><strong>libowcapi (1)</strong> allows a C program to use <em>OWFS</em> principles (consistent naming scheme, multiple adapters, devices, and compatibility) directly from a C program. There are analogous modules for other programming languages:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>C</em></p>
  </dt>
  <dd>
    <p>libowcapi</p>
  </dd>
  <dt>
    <p><em>perl</em></p>
  </dt>
  <dd>
    <p>owperl</p>
  </dd>
  <dt>
    <p><em>php</em></p>
  </dt>
  <dd>
    <p>owphp</p>
  </dd>
  <dt>
    <p><em>python</em></p>
  </dt>
  <dd>
    <p>owpython</p>
  </dd>
  <dt>
    <p><em>tcl</em></p>
  </dt>
  <dd>
    <p>owtcl</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>/* Simple directory listing -- no error checking */</p><p>#include &lt;ownetapi.h&gt;</p><p>char * buf;</p><p>size_t s ;</p><p>OWNET_init("localhost:4304");</p><p>OWNET_dirlist("/",&buf,&s) ;</p><p>printf("Directory %s\n",buf);</p><p>free(buf);</p><p>OWNET_finish() ;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ownetapi&hellip;</h2>
        <div class="sectioncontent">
<h3>Programs</h3>
<p><strong>owfs (1) owhttpd (1) owftpd (1) owserver (1)</strong> <strong>owdir (1) owread (1) owwrite (1) owpresent (1)</strong> <strong>owtap (1)</strong></p>
<h3>Configuration and testing</h3>
<p><strong>owfs (5) owtap (1) owmon (1)</strong></p>
<h3>Language bindings</h3>
<p><strong>owtcl (3) owperl (3) owcapi (3)</strong></p>
<h3>Clocks</h3>
<p><strong>DS1427 (3) <a href="../man3/DS1904.3.html"><strong>DS1904</strong>(3)</a> DS1994 (3) DS2404 (3) DS2404S (3) DS2415 (3) DS2417 (3)</strong></p>
<h3>ID</h3>
<p><strong>DS2401 (3) DS2411 (3) DS1990A (3)</strong></p>
<h3>Memory</h3>
<p><strong>DS1982 (3) DS1985 (3) DS1986 (3) DS1991 (3) DS1992 (3) DS1993 (3) DS1995 (3) DS1996 (3) DS2430A (3) DS2431 (3) DS2433 (3) DS2502 (3) DS2506 (3) DS28E04 (3) DS28EC20 (3)</strong></p>
<h3>Switches</h3>
<p><strong>DS2405 (3) DS2406 (3) DS2408 (3) DS2409 (3) DS2413 (3) DS28EA00 (3)</strong></p>
<h3>Temperature</h3>
<p><strong>DS1822 (3) DS1825 (3) DS1820 (3) DS18B20 (3) DS18S20 (3) DS1920 (3) DS1921 (3) DS1821 (3) DS28EA00 (3) DS28E04 (3)</strong></p>
<h3>Humidity</h3>
<p><strong>DS1922 (3)</strong></p>
<h3>Voltage</h3>
<p><strong>DS2450 (3)</strong></p>
<h3>Resistance</h3>
<p><strong>DS2890 (3)</strong></p>
<h3>Multifunction (current, voltage, temperature)</h3>
<p><strong>DS2436 (3) DS2437 (3) DS2438 (3) DS2751 (3) DS2755 (3) DS2756 (3) DS2760 (3) DS2770 (3) DS2780 (3) DS2781 (3) DS2788 (3) DS2784 (3)</strong></p>
<h3>Counter</h3>
<p><strong>DS2423 (3)</strong></p>
<h3>LCD Screen</h3>
<p><strong>LCD (3) DS2408 (3)</strong></p>
<h3>Crypto</h3>
<p><strong>DS1977 (3)</strong></p>
<h3>Pressure</h3>
<p><strong>DS2406 (3) -- TAI8570</strong></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>http://www.owfs.org</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Paul Alfille (paul.alfille@gmail.com)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ownet.1.html"><span aria-hidden="true">&larr;</span> ownet.1: Easy c-language 1-wire interface to the owserver protocol</a></li>
   <li class="next"><a href="ownetlib.1.html">ownetlib.1: Easy c-language 1-wire interface to the owserver protocol <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
