<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ibacm: Address and route resolution services for infiniband.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Address and route resolution services for infiniband.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ibacm (1) manual">
  <meta name="twitter:description" content="Address and route resolution services for infiniband.">
  <meta name="twitter:image" content="https://www.carta.tech/images/ibacm-ibacm-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ibacm.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ibacm (1) manual" />
  <meta property="og:description" content="Address and route resolution services for infiniband." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ibacm-ibacm-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ibacm<small> (1)</small></h1>
        <p class="lead">Address and route resolution services for infiniband.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ibacm.1.html">
      <span itemprop="name">ibacm: Address and route resolution services for infiniband.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ibacm/">
      <span itemprop="name">ibacm</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ibacm.1.html">
      <span itemprop="name">ibacm: Address and route resolution services for infiniband.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<em>ibacm</em> [-D] [-P] [-A addr_file] [-O option_file]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The IB ACM implements and provides a framework for name, address, and route (path) resolution services over InfiniBand. It is intended to address connection setup scalability issues running MPI applications on large clusters.  The IB ACM provides information needed to establish a connection, but does not implement the CM protocol.</p><p>A primary user of the ibacm service is the librdmacm library.  This enables applications to make use of the ibacm service without code changes or needing to be aware that the service is in use. librdmacm versions 1.0.12 - 1.0.15 can invoke IB ACM services when built using the --with-ib_acm option.  Version 1.0.16 and newer of librdmacm will automatically use the IB ACM if it is installed.  The IB ACM services tie in under the rdma_resolve_addr, rdma_resolve_route, and rdma_getaddrinfo routines. For maximum benefit, the rdma_getaddrinfo routine should be used, however existing applications should still see significant connection scaling benefits using the calls available in librdmacm 1.0.11 and previous releases.</p><p>The IB ACM is focused on being scalable and efficient.  The current implementation limits network traffic, SA interactions, and centralized services.  ACM supports multiple resolution protocols in order to handle different fabric topologies.</p><p>The IB ACM package is comprised of two components: the ibacm service and a test/configuration utility - ib_acme.  Both are userspace components and are available for Linux and Windows.  Additional details are given below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>-D</p>
  </dt>
  <dd>
    <p>run in daemon mode (default)</p>
  </dd>
  <dt>
    <p>-P</p>
  </dt>
  <dd>
    <p>run as standard process</p>
  </dd>
  <dt>
    <p>-A addr_file</p>
  </dt>
  <dd>
    <p>address configuration file</p>
  </dd>
  <dt>
    <p>-O option_file</p>
  </dt>
  <dd>
    <p>option configuration file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">QUICK START GUIDE</h2>
        <div class="sectioncontent">
<p>1. Prerequisites: libibverbs and libibumad must be installed. The IB stack should be running with IPoIB configured. These steps assume that the user has administrative privileges.</p><p>2. Install the IB ACM package.  This installs ibacm, ib_acme, and init.d scripts.</p><p>3. Run 'ibacm' as administrator to start the ibacm daemon.</p><p>4. Optionally, run 'ib_acme -d &lt;dest_ip&gt; -v' to verify that the ibacm service is running.</p><p>5. Install librdmacm, using the build option --with-ib_acm if needed. This build option is not needed with librdmacm 1.0.17 or newer. The librdmacm will automatically use the ibacm service. On failures, the librdmacm will fall back to normal resolution.</p><p>6. You can use ib_acme -P to gather performance statistics from the local ibacm daemon to see if the service is working correctly.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>ib_acme:</p><p>The ib_acme program serves a dual role.  It acts as a utility to test ibacm operation and help verify if the ibacm service and selected protocol is usable for a given cluster configuration.   Additionally, it automatically generates ibacm configuration files to assist with or eliminate manual setup.</p><p>ibacm configuration files:</p><p>The ibacm service relies on two configuration files.</p><p>The ibacm_addr.cfg file contains name and address mappings for each IB &lt;device, port, pkey&gt; endpoint.  Although the names in the ibacm_addr.cfg file can be anything, ib_acme maps the host name and IP addresses to the IB endpoints.  If the address file cannot be found, the ibacm service will attempt to create one using default values.</p><p>The ibacm_opts.cfg file provides a set of configurable options for the ibacm service, such as timeout, number of retries, logging level, etc. ib_acme generates the ibacm_opts.cfg file using static information.  If an option file cannot be found, ibacm will use default values.</p><p>ibacm:</p><p>The ibacm service is responsible for resolving names and addresses to InfiniBand path information and caching such data.  It should execute with administrative privileges.</p><p>The ibacm implements a client interface over TCP sockets, which is abstracted by the librdmacm library.  One or more back-end protocols are used by the ibacm service to satisfy user requests.  Although the ibacm supports standard SA path record queries on the back-end, it also supports a resolution protocol based on multicast traffic. The latter is not usable on all fabric topologies, specifically ones that may not have reversible paths or fabrics using torus routing. Users should use the ib_acme utility to verify that multicast protocol is usable before running other applications.</p><p>Conceptually, the ibacm service implements an ARP like protocol and either uses IB multicast records to construct path record data or queries the SA directly, depending on the selected route protocol.  By default, the ibacm services uses and caches SA path record queries.</p><p>Specifically, all IB endpoints join a number of multicast groups. Multicast groups differ based on rates, mtu, sl, etc., and are prioritized. All participating endpoints must be able to communicate on the lowest priority multicast group.  The ibacm assigns one or more names/addresses to each IB endpoint using the ibacm_addr.cfg file.  Clients provide source and destination names or addresses as input to the service, and receive as output path record data.</p><p>The service maps a client's source name/address to a local IB endpoint. If a client does not provide a source address, then the ibacm service will select one based on the destination and local routing tables.  If the destination name/address is not cached locally, it sends a multicast request out on the lowest priority multicast group on the local endpoint. The request carries a list of multicast groups that the sender can use. The recipient of the request selects the highest priority multicast group that it can use as well and returns that information directly to the sender. The request data is cached by all endpoints that receive the multicast request message.  The source endpoint also caches the response and uses the multicast group that was selected to construct or obtain path record data, which is returned to the client.</p><p>The current implementation of the IB ACM has several additional restrictions:</p><p>- The ibacm is limited in its handling of dynamic changes. ibacm must be stopped and restarted if a cluster is reconfigured.</p><p>- Cached data does not timed out and is only updated if a new resolution request is received from a different QPN than a cached request.</p><p>- Support for IPv6 has not been verified.</p><p>- The number of addresses that can be assigned to a single endpoint is limited to 4.</p><p>- The number of multicast groups that an endpoint can support is limited to 2.</p><p>The ibacm contains several internal caches.  These include caches for GID and LID destination addresses.  These caches can be optionally preloaded. ibacm supports the OpenSM dump_pr plugin "full" PathRecord format which is used to preload these caches. The file format is specified in the ibacm_opts.cfg file via the route_preload setting which should be set to full_opensm_v1 for this file format.  Default format is none which does not preload these caches. See dump_pr.notes.txt in dump_pr for more information on the full_opensm_v1 file format and how to configure OpenSM to generate this file.</p><p>Additionally, the name, IPv4, and IPv6 caches can be be preloaded by using the addr_preload option.  The default is none which does not preload these caches. To preload these caches, set this option to acm_hosts and configure the addr_data_file appropriately.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ibacm&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/ibacm.7.html"><strong>ibacm</strong>(7)</a>, <a href="../man1/ib_acme.1.html"><strong>ib_acme</strong>(1)</a>, <a href="../man7/rdma_cm.7.html"><strong>rdma_cm</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ib_write_lat.1.html"><span aria-hidden="true">&larr;</span> ib_write_lat.1: Rdma write latency test</a></li>
   <li class="next"><a href="ibam.1.html">ibam.1: The intelligent battery monitor <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
