<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pflogsumm: Produce postfix mta logfile summary  copyright (c) 1998-2010 by james s. seymour, release 1.1.5</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Produce postfix mta logfile summary  copyright (c) 1998-2010 by james s. seymour, release 1.1.5">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pflogsumm (1) manual">
  <meta name="twitter:description" content="Produce postfix mta logfile summary  copyright (c) 1998-2010 by james s. seymour, release 1.1.5">
  <meta name="twitter:image" content="https://www.carta.tech/images/pflogsumm-pflogsumm-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pflogsumm.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pflogsumm (1) manual" />
  <meta property="og:description" content="Produce postfix mta logfile summary  copyright (c) 1998-2010 by james s. seymour, release 1.1.5" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pflogsumm-pflogsumm-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pflogsumm<small> (1)</small></h1>
        <p class="lead">Produce postfix mta logfile summary  copyright (c) 1998-2010 by james s. seymour, release 1.1.5</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pflogsumm.1.html">
      <span itemprop="name">pflogsumm: Produce postfix mta logfile summary  copyright (c) 1998-2010 by james s. seymour, release 1.1.5</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pflogsumm/">
      <span itemprop="name">pflogsumm</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pflogsumm.1.html">
      <span itemprop="name">pflogsumm: Produce postfix mta logfile summary  copyright (c) 1998-2010 by james s. seymour, release 1.1.5</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
    pflogsumm -[eq] [-d &lt;today|yesterday&gt;] [--detail &lt;cnt&gt;]
        [--bounce-detail &lt;cnt&gt;] [--deferral-detail &lt;cnt&gt;]
        [-h &lt;cnt&gt;] [-i|--ignore-case] [--iso-date-time] [--mailq]
        [-m|--uucp-mung] [--no-no-msg-size] [--problems-first]
        [--rej-add-from] [--reject-detail &lt;cnt&gt;] [--smtp-detail &lt;cnt&gt;]
        [--smtpd-stats] [--smtpd-warning-detail &lt;cnt&gt;]
        [--syslog-name=string] [-u &lt;cnt&gt;] [--verbose-msg-detail]
        [--verp-mung[=&lt;n&gt;]] [--zero-fill] [file1 [filen]]

    pflogsumm -[help|version]

    If no file(s) specified, reads from stdin.  Output is to stdout.
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>    Pflogsumm is a log analyzer/summarizer for the Postfix MTA.  It is     designed to provide an over-view of Postfix activity, with just enough     detail to give the administrator a "heads up" for potential trouble     spots.</p><p>    Pflogsumm generates summaries and, in some cases, detailed reports of     mail server traffic volumes, rejected and bounced email, and server     warnings, errors and panics.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>    --bounce-detail &lt;cnt&gt;</p><p>                   Limit detailed bounce reports to the top &lt;cnt&gt;.  0                    to suppress entirely.</p><p>    -d today       generate report for just today     -d yesterday   generate report for just "yesterday"</p><p>    --deferral-detail &lt;cnt&gt;</p><p>                   Limit detailed deferral reports to the top &lt;cnt&gt;.  0                    to suppress entirely.</p><p>    --detail &lt;cnt&gt;</p><p>                   Sets all --*-detail, -h and -u to &lt;cnt&gt;.  Is                    over-ridden by individual settings.  --detail 0                    suppresses *all* detail.</p><p>    -e             extended (extreme? excessive?) detail</p><p>                   Emit detailed reports.  At present, this includes                    only a per-message report, sorted by sender domain,                    then user-in-domain, then by queue i.d.</p><p>                   WARNING: the data built to generate this report can                    quickly consume very large amounts of memory if a                    lot of log entries are processed!</p><p>    -h &lt;cnt&gt;       top &lt;cnt&gt; to display in host/domain reports.</p><p>                   0 = none.</p><p>                   See also: "-u" and "--*-detail" options for further                              report-limiting options.</p><p>    --help         Emit short usage message and bail out.</p><p>                   (By happy coincidence, "-h" alone does much the same,                    being as it requires a numeric argument :-).  Yeah, I                    know: lame.)</p><p>    -i     --ignore-case  Handle complete email address in a case-insensitive                    manner.</p><p>                   Normally pflogsumm lower-cases only the host and                    domain parts, leaving the user part alone.  This                    option causes the entire email address to be lower-                    cased.</p><p>    --iso-date-time</p><p>                   For summaries that contain date or time information,                    use ISO 8601 standard formats (CCYY-MM-DD and HH:MM),                    rather than "Mon DD CCYY" and "HHMM".</p><p>    -m             modify (mung?) UUCP-style bang-paths     --uucp-mung</p><p>                   This is for use when you have a mix of Internet-style                    domain addresses and UUCP-style bang-paths in the log.                    Upstream UUCP feeds sometimes mung Internet domain                    style address into bang-paths.  This option can                    sometimes undo the "damage".  For example:                    "somehost.dom!username@foo" (where "foo" is the next                    host upstream and "somehost.dom" was whence the email                    originated) will get converted to                    "foo!username@somehost.dom".  This also affects the                    extended detail report (-e), to help ensure that by-                     domain-by-name sorting is more accurate.</p><p>    --mailq        Run "mailq" command at end of report.</p><p>                   Merely a convenience feature.  (Assumes that "mailq"                    is in $PATH.  See "$mailqCmd" variable to path thisi                    if desired.)</p><p>    --no_bounce_detail     --no_deferral_detail     --no_reject_detail</p><p>                   These switches are deprecated in favour of                    --bounce-detail, --deferral-detail and                    --reject-detail, respectively.</p><p>                   Suppresses the printing of the following detailed                    reports, respectively:</p><p>                        message bounce detail (by relay)                         message deferral detail                         message reject detail</p><p>                   See also: "-u" and "-h" for further report-limiting                              options.</p><p>    --no-no-msg-size</p><p>                    Do not emit report on "Messages with no size data".</p><p>                    Message size is reported only by the queue manager.                     The message may be delivered long-enough after the                     (last) qmgr log entry that the information is not in                     the log(s) processed by a particular run of                     pflogsumm.  This throws off "Recipients by message                     size" and the total for "bytes delivered." These are                     normally reported by pflogsumm as "Messages with no                     size data."</p><p>    --no-smtpd-warnings</p><p>                   This switch is deprecated in favour of                    smtpd-warning-detail</p><p>                    On a busy mail server, say at an ISP, SMTPD warnings                     can result in a rather sizeable report.  This option                     turns reporting them off.</p><p>    --problems-first</p><p>                   Emit "problems" reports (bounces, defers, warnings,                    etc.) before "normal" stats.</p><p>    --rej-add-from                    For those reject reports that list IP addresses or                    host/domain names: append the email from address to                    each listing.  (Does not apply to "Improper use of                    SMTP command pipelining" report.)</p><p>    -q             quiet - don&apos;t print headings for empty reports</p><p>                   note: headings for warning, fatal, and "master"                    messages will always be printed.</p><p>    --reject-detail &lt;cnt&gt;</p><p>                   Limit detailed smtpd reject, warn, hold and discard                    reports to the top &lt;cnt&gt;.  0 to suppress entirely.</p><p>    --smtp-detail &lt;cnt&gt;</p><p>                   Limit detailed smtp delivery reports to the top &lt;cnt&gt;.                    0 to suppress entirely.</p><p>    --smtpd-stats</p><p>                   Generate smtpd connection statistics.</p><p>                   The "per-day" report is not generated for single-day                    reports.  For multiple-day reports: "per-hour" numbers                    are daily averages (reflected in the report heading).</p><p>    --smtpd-warning-detail &lt;cnt&gt;</p><p>                   Limit detailed smtpd warnings reports to the top &lt;cnt&gt;.                    0 to suppress entirely.</p><p>    --syslog-name=name</p><p>                   Set syslog-name to look for for Postfix log entries.</p><p>                   By default, pflogsumm looks for entries in logfiles                    with a syslog name of "postfix," the default.                    If you&apos;ve set a non-default "syslog_name" parameter                    in your Postfix configuration, use this option to                    tell pflogsumm what that is.</p><p>                   See the discussion about the use of this option under                    "NOTES," below.</p><p>    -u &lt;cnt&gt;       top &lt;cnt&gt; to display in user reports. 0 == none.</p><p>                   See also: "-h" and "--*-detail" options for further                              report-limiting options.</p><p>    --verbose-msg-detail</p><p>                   For the message deferral, bounce and reject summaries:                    display the full "reason", rather than a truncated one.</p><p>                   Note: this can result in quite long lines in the report.</p><p>    --verp-mung    do "VERP" generated address (?) munging.  Convert     --verp-mung=2  sender addresses of the form                    "list-return-NN-someuser=some.dom@host.sender.dom"                     to                       "list-return-ID-someuser=some.dom@host.sender.dom"</p><p>                    In other words: replace the numeric value with "ID".</p><p>                   By specifying the optional "=2" (second form), the                    munging is more "aggressive", converting the address                    to something like:</p><p>                        "list-return@host.sender.dom"</p><p>                   Actually: specifying anything less than 2 does the                    "simple" munging and anything greater than 1 results                    in the more "aggressive" hack being applied.</p><p>                   See "NOTES" regarding this option.</p><p>    --version      Print program name and version and bail out.</p><p>    --zero-fill    "Zero-fill" certain arrays so reports come out with                    data in columns that that might otherwise be blank.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>    Pflogsumm doesn&apos;t return anything of interest to the shell.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">
<p>    Error messages are emitted to stderr.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>    Produce a report of previous day&apos;s activities:</p><p>        pflogsumm -d yesterday /var/log/maillog</p><p>    A report of prior week&apos;s activities (after logs rotated):</p><p>        pflogsumm /var/log/maillog.0</p><p>    What&apos;s happened so far today:</p><p>        pflogsumm -d today /var/log/maillog</p><p>    Crontab entry to generate a report of the previous day&apos;s activity     at 10 minutes after midnight.</p><p>        10 0 * * * /usr/local/sbin/pflogsumm -d yesterday /var/log/maillog         2&gt;&1 |/usr/bin/mailx -s "&#96;uname -n&#96; daily mail stats" postmaster</p><p>    Crontab entry to generate a report for the prior week&apos;s activity.     (This example assumes one rotates ones mail logs weekly, some time     before 4:10 a.m. on Sunday.)</p><p>        10 4 * * 0   /usr/local/sbin/pflogsumm /var/log/maillog.0         2&gt;&1 |/usr/bin/mailx -s "&#96;uname -n&#96; weekly mail stats" postmaster</p><p>    The two crontab examples, above, must actually be a single line     each.  They&apos;re broken-up into two-or-more lines due to page     formatting issues.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pflogsumm&hellip;</h2>
        <div class="sectioncontent">
<p>    The pflogsumm FAQ: pflogsumm-faq.txt.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>    Pflogsumm makes no attempt to catch/parse non-Postfix log     entries.  Unless it has "postfix/" in the log entry, it will be     ignored.</p><p>    It&apos;s important that the logs are presented to pflogsumm in     chronological order so that message sizes are available when     needed.</p><p>    For display purposes: integer values are munged into "kilo" and     "mega" notation as they exceed certain values.  I chose the     admittedly arbitrary boundaries of 512k and 512m as the points at     which to do this--my thinking being 512x was the largest number     (of digits) that most folks can comfortably grok at-a-glance.     These are "computer" "k" and "m", not 1000 and 1,000,000.  You     can easily change all of this with some constants near the     beginning of the program.</p><p>    "Items-per-day" reports are not generated for single-day     reports.  For multiple-day reports: "Items-per-hour" numbers are     daily averages (reflected in the report headings).</p><p>    Message rejects, reject warnings, holds and discards are all     reported under the "rejects" column for the Per-Hour and Per-Day     traffic summaries.</p><p>    Verp munging may not always result in correct address and     address-count reduction.</p><p>    Verp munging is always in a state of experimentation.  The use     of this option may result in inaccurate statistics with regards     to the "senders" count.</p><p>    UUCP-style bang-path handling needs more work.  Particularly if     Postfix is not being run with "swap_bangpath = yes" and/or *is* being     run with "append_dot_mydomain = yes", the detailed by-message report     may not be sorted correctly by-domain-by-user.  (Also depends on     upstream MTA, I suspect.)</p><p>    The "percent rejected" and "percent discarded" figures are only     approximations.  They are calculated as follows (example is for     "percent rejected"):</p><p>        percent rejected =</p><p>            (rejected / (delivered + rejected + discarded)) * 100</p><p>    There are some issues with the use of --syslog-name.  The problem is     that, even with Postfix&apos; $syslog_name set, it will sometimes still     log things with "postfix" as the syslog_name.  This is noted in     /etc/postfix/sample-misc.cf:</p><p>        # Beware: a non-default syslog_name setting takes effect only         # after process initialization. Some initialization errors will be         # logged with the default name, especially errors while parsing         # the command line and errors while accessing the Postfix main.cf         # configuration file.</p><p>    As a consequence, pflogsumm must always look for "postfix," in logs,     as well as whatever is supplied for syslog_name.</p><p>    Where this becomes an issue is where people are running two or more     instances of Postfix, logging to the same file.  In such a case:</p><p>        . Neither instance may use the default "postfix" syslog name           and...</p><p>        . Log entries that fall victim to what&apos;s described in           sample-misc.cf will be reported under "postfix", so that if           you&apos;re running pflogsumm twice, once for each syslog_name, such           log entries will show up in each report.</p><p>    The Pflogsumm Home Page is at:</p><p>        http://jimsun.LinxNet.com/postfix_contrib.html</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REQUIREMENTS</h2>
        <div class="sectioncontent">
<p>    For certain options (e.g.: --smtpd-stats), Pflogsumm requires the     Date::Calc module, which can be obtained from CPAN at     http://www.perl.com.</p><p>    Pflogsumm is currently written and tested under Perl 5.8.3.     As of version 19990413-02, pflogsumm worked with Perl 5.003, but     future compatibility is not guaranteed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>    This program is free software; you can redistribute it and/or     modify it under the terms of the GNU General Public License     as published by the Free Software Foundation; either version 2     of the License, or (at your option) any later version.</p><p>    This program is distributed in the hope that it will be useful,     but WITHOUT ANY WARRANTY; without even the implied warranty of     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the     GNU General Public License for more details.</p><p>    You may have received a copy of the GNU General Public License     along with this program; if not, write to the Free Software     Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307,     USA.</p><p>    An on-line copy of the GNU General Public License can be found     http://www.fsf.org/copyleft/gpl.html.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pfc.1.html"><span aria-hidden="true">&larr;</span> pfc.1: Active precompiled filters generator</a></li>
   <li class="next"><a href="pfm.1.html">pfm.1: Graphical postgresql client using tcl/tk <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
