<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>h5math: Combine/create hdf5 files with math expressions</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Combine/create hdf5 files with math expressions">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="h5math (1) manual">
  <meta name="twitter:description" content="Combine/create hdf5 files with math expressions">
  <meta name="twitter:image" content="https://www.carta.tech/images/h5utils-h5math-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/h5math.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="h5math (1) manual" />
  <meta property="og:description" content="Combine/create hdf5 files with math expressions" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/h5utils-h5math-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">h5math<small> (1)</small></h1>
        <p class="lead">Combine/create hdf5 files with math expressions</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/h5math.1.html">
      <span itemprop="name">h5math: Combine/create hdf5 files with math expressions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/h5utils/">
      <span itemprop="name">h5utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/h5math.1.html">
      <span itemprop="name">h5math: Combine/create hdf5 files with math expressions</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>h5math</strong> [<em>OPTION</em>]... <em>OUTPUT-HDF5FILE</em> [<em>INPUT-HDF5FILES</em>...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>h5math takes any number of HDF5 files as input, along with a mathematical expression, and combines them to produce a new HDF5 file.</p><p>HDF5 is a free, portable binary format and supporting library developed by the National Center for Supercomputing Applications at the University of Illinois in Urbana-Champaign.  A single <em>h5</em> file can contain multiple data sets; by default, <em>h5math</em> creates a dataset called "h5math", but this can be changed via the <strong>-d</strong> option, or by using the syntax <em>HDF5FILE:DATASET</em>.  The <strong>-a</strong> option can be used to append new datasets to an existing HDF5 file. The same syntax is used to specify the dataset used in the input file(s); by default, the first dataset (alphabetically) is used.</p><p>A simple example of h5math's usage is:</p><ul>
<li><p>h5math -e "d1 + 2*d2" out.h5 foo.h5 bar.h5:blah</p></li>
</ul><p>which produces a new file, out.h5, by adding the first dataset in foo.h5 with twice the "blah" dataset in bar.h5.  In the expression (specified by <strong>-e</strong>), the first input dataset (from left to right) is referred to as <em>d1</em>, the second as <em>d2</em>, and so on.</p><p>In addition to input datasets, you can also use the x/y/z coordinates of each point in the expression, referenced by "x" "y" and "z" variables (for the first three dimensions) as well as a "t" variable that refers to the last dimension.  By default, these are integers starting at 0 at the corner of the dataset, but the <strong>-0</strong> option will change the x/y/z origin to the center of the dataset (t is unaffected), and the <strong>-r</strong> <em>res</em> option will specify the "resolution", dividing the x/y/z coordinates by <em>res</em>.</p><p>All of the input datasets must have the same dimensions, which are also the dimensions of the output.  If there are no input files, and you are defining the output purely by a mathematical formula, you can specify the dimensions of the output explicitly via the <strong>-n</strong> <em>size</em> option, where <em>size</em> is e.g. "2x2x2".</p><p>Sometimes, however, you want to use only a smaller-dimensional "slice" of multi-dimensional data.  To do this, you specify coordinates in one (or more) slice dimension(s), via the <strong>-xyzt</strong> options.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Display help on the command-line options and usage.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Print the version number and copyright info for h5math.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Verbose output.</p>
  </dd>
  <dt>
    <p><strong>-a</strong></p>
  </dt>
  <dd>
    <p>If the HDF5 output file already exists, append the data as a new dataset rather than overwriting the file (the default behavior).  An existing dataset of the same name within the file is overwritten, however.</p>
  </dd>
  <dt>
    <p><strong>-e</strong> <em>expression</em></p>
  </dt>
  <dd>
    <p>Specify the mathematical expression that is used to construct the output (generally in " quotes to group the expression as one item in the shell), in terms of the variables for the input datasets and the coordinates as described above.</p><p>Expressions use a C-like infix notation, with most standard operators and mathematical functions (+, sin, etc.) being supported.  This functionality is provided (and its features determined) by GNU libmatheval.</p>
  </dd>
  <dt>
    <p><strong>-f</strong> <em>filename</em></p>
  </dt>
  <dd>
    <p>Name of a text file to read the expression from, if no <strong>-e</strong> expression is specified.  Defaults to stdin.</p>
  </dd>
  <dt>
    <p><strong>-x</strong> <em>ix</em>, <strong>-y</strong> <em>iy</em>, <strong>-z</strong> <em>iz</em>, <strong>-t</strong> <em>it</em></p>
  </dt>
  <dd>
    <p>This tells <em>h5math</em> to use a particular slice of a multi-dimensional dataset.  e.g. <strong>-x</strong> uses the subset (with one less dimension) at an x index of <em>ix</em> (where the indices run from zero to one less than the maximum index in that direction).  Here, x/y/z correspond to the first/second/third dimensions of the HDF5 dataset. The <strong>-t</strong> option specifies a slice in the last dimension, whichever that might be.  See also the <strong>-0</strong> option to shift the origin of the x/y/z slice coordinates to the dataset center.</p>
  </dd>
  <dt>
    <p><strong>-0</strong></p>
  </dt>
  <dd>
    <p>Shift the origin of the x/y/z slice coordinates to the dataset center, so that e.g. -0 -x 0 (or more compactly -0x0) returns the central x plane of the dataset instead of the edge x plane.  (<strong>-t</strong> coordinates are not affected.)</p><p>This also shifts the origin of the x/y/z variables in the expression so that 0 is the center of the dataset.</p>
  </dd>
  <dt>
    <p><strong>-r</strong> <em>res</em></p>
  </dt>
  <dd>
    <p>Use a resolution <em>res</em> for x/y/z (but not t) variables in the expression, so that the data "grid" coordinates are divided by <em>res</em>.  The default <em>res</em> is 1.</p><p>For example, if the x dimension has 21 grid steps, setting a <em>res</em> of 20 will mean that x variables in the expression run from 0.0 to 1.0 (or -0.5 to 0.5 if <strong>-0</strong> is specified), instead of 0 to 20.</p><p><strong>-r</strong> does not affect the coordinates used for slices, which are always integers.</p>
  </dd>
  <dt>
    <p><strong>-n</strong> <em>size</em></p>
  </dt>
  <dd>
    <p>The output dataset must be the same size as the input datasets.  If there are no input datasets (if you are defining the output purely by a formula), then you must specify the output size manually with this option: <em>size</em> is of the form MxNxLx... (with M, N, L being integers) and may be of any dimensionality.</p>
  </dd>
  <dt>
    <p><strong>-d</strong> <em>name</em></p>
  </dt>
  <dd>
    <p>Write to dataset <em>name</em> in the output; otherwise, the output dataset is called "data" by default. Also use dataset <em>name</em> in the input; otherwise, the first input dataset (alphabetically) in a file is used.  Alternatively, use the syntax <em>HDF5FILE:DATASET</em> (which overrides the <strong>-d</strong> option).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Send bug reports to S. G. Johnson, stevenj@alum.mit.edu.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Written by Steven G. Johnson.  Copyright (c) 2005 by the Massachusetts Institute of Technology.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="h5ls.1.html"><span aria-hidden="true">&larr;</span> h5ls.1: Prints information about a file or dataset.</a></li>
   <li class="next"><a href="h5mkgrp.1.html">h5mkgrp.1: Creates a new hdf5 group in a file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
