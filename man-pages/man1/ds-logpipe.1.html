<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ds-logpipe: Create and read from a named pipe instead of a log file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create and read from a named pipe instead of a log file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ds-logpipe (1) manual">
  <meta name="twitter:description" content="Create and read from a named pipe instead of a log file">
  <meta name="twitter:image" content="https://www.carta.tech/images/389-ds-base-ds-logpipe-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ds-logpipe.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ds-logpipe (1) manual" />
  <meta property="og:description" content="Create and read from a named pipe instead of a log file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/389-ds-base-ds-logpipe-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ds-logpipe<small> (1)</small></h1>
        <p class="lead">Create and read from a named pipe instead of a log file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ds-logpipe.1.html">
      <span itemprop="name">ds-logpipe: Create and read from a named pipe instead of a log file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/389-ds-base/">
      <span itemprop="name">389-ds-base</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ds-logpipe.1.html">
      <span itemprop="name">ds-logpipe: Create and read from a named pipe instead of a log file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ds-logpipe.py</strong> /full/path/to/namedpipe</p>
<pre>
       [<em>-m maxlinestobuffer</em>] [<em>-u userid</em>] [<em>-s serverpidfile</em>] [<em>-t servertimeout</em>] [<em>--plugin=/path/to/pluginfile.py</em>] [<em>pluginfile.arg=value</em>]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Named Pipe Log Script allows you to replace a log file with a named pipe attached to a script. The server can then send the log output to a script instead of to a log file. This allows you to do many different things such as:</p><p> * log only certain events e.g. failed binds, connections from certain ip addresses, etc.  * log only lines that match a certain pattern  * log only the last N lines - useful for enabling full error log debug levels in production environments  * send an email or other notification when a certain event is detected</p><p>The script is written in python, and allows plugins. By default, the script will log the last N lines (default 1000). There are two plugins provided - one to log only failed bind attempts, and one that will log only lines that match given regular expressions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>A summary of options is included below.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>/full/path/to/namedpipe</strong></p>
  </dt>
  <dd>
    <p>Required - full path and file name of the named pipe. If this does not exist, it will be created.  If it exists and is a named pipe, the script will use it.  If it exists and is not a pipe, the script will abort.  The ownership will be the same as the user running the script (or see the -u option below).</p>
  </dd>
  <dt>
    <p><strong>-m|--maxlines=N</strong></p>
  </dt>
  <dd>
    <p>Number of lines to buffer - default is 1000</p>
  </dd>
  <dt>
    <p><strong>-u|--userid=user</strong></p>
  </dt>
  <dd>
    <p>The pipe and any other files created by the script will be chown()'d to this userid.  This may be a string userid name or a numeric userid value.</p>
  </dd>
  <dt>
    <p><strong>-s|--serverpidfile=/path/to/servername.pid</strong></p>
  </dt>
  <dd>
    <p>If you want the script to exit when a particular directory server exists, specify the full path to the file containing the server pid.  The default is usually something like /var/run/dirsrv/slapd-&lt;instancename&gt;.pid where &lt;instancename&gt; is usually the hostname</p>
  </dd>
  <dt>
    <p><strong>-t|--servertimeout=N</strong></p>
  </dt>
  <dd>
    <p>Since the serverpidfile may not exist yet when the script is run, the script will wait by default 60 seconds for the pid file to exist and the server to be started.  Use this option to specify a different timeout. The -t option only applies when using -s or --serverpid - otherwise it does nothing.</p>
  </dd>
  <dt>
    <p><strong>--serverpid=P</strong></p>
  </dt>
  <dd>
    <p>IF the server you want to track is already running, you can specify it using this argument.  If the specified pid is not valid, the script will abort.</p>
  </dd>
  <dt>
    <p><strong>-p|--plugin=/full/path/to/pluginname.py</strong></p>
  </dt>
  <dd>
    <p>Specify a plugin to use.  The plugin must be a python file and must end in <em>.py</em>.  It must specify a function called <em>plugin</em> and may specify functions called <em>pre</em> and <em>post</em>.</p>
  </dd>
  <dt>
    <p><strong>pluginname.arg1=value ... pluginname.argN=value</strong></p>
  </dt>
  <dd>
    <p>You can specify arguments to plugins on the command line.  If there is a plugin specified as --plugin=/full/path/to/pluginname.py, the arguments for that plugin are specified as <em>pluginname.argname=value</em>.  The script parses these arguments and passes them to the plugin <em>pre</em> function as a python dict.  IF there is more than one argument named <em>pluginname.argname</em> the values are passed as a python list.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIRECTORY SERVER NOTES</h2>
        <div class="sectioncontent">
<p>The directory server will usually need to be configured to log to the named pipe instead of the usual log file.  For example, use the following LDIF to tell the server to use the file <em>access.pipe</em> for the access log:  dn: cn=config  changetype: modify  replace: nsslapd-accesslog-maxlogsperdir  nsslapd-accesslog-maxlogsperdir: 1  -  replace: nsslapd-accesslog-logexpirationtime  nsslapd-accesslog-logexpirationtime: -1  -  replace: nsslapd-accesslog-logrotationtime  nsslapd-accesslog-logrotationtime: -1  -  replace: nsslapd-accesslog  nsslapd-accesslog: /var/log/dirsrv/slapd-localhost/access.pipe  -  replace: nsslapd-accesslog-logbuffering  nsslapd-accesslog-logbuffering: off</p><p>NOTE: Before doing this, you should save your current configuration so you can restore it later.  ldapsearch ... -s base -b "cn=config" nsslapd-accesslog-maxlogsperdir nsslapd-accesslog-logexpirationtime    nsslapd-accesslog-logrotationtime nsslapd-accesslog nsslapd-accesslog &gt; savedaccesslog.ldif</p><p>The error log and audit log have similarly named configuration attributes e.g. nsslapd-errorlog, nsslapd-auditlog.  Note that the audit log is disabled by default - use nsslapd-auditlog-logging-enabled: on to enable it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>ds-logpipe.py was written by the 389 Project.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs to https://fedorahosted.org/389/newticket.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2009 Red Hat, Inc.</p><p>This is free software.  You may redistribute copies of it under the terms of the Directory Server license found in the LICENSE file of this software distribution.  This license is essentially the GNU General Public License version 2 with an exception for plug-in distribution.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="drush.1.html"><span aria-hidden="true">&larr;</span> drush.1: Shell scripting interface for drupal</a></li>
   <li class="next"><a href="ds9.1.html">ds9.1: Image tool for astronomy <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
