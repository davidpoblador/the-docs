<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tpb: Program to use the ibm thinkpad (tm) special keys</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Program to use the ibm thinkpad (tm) special keys">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tpb (1) manual">
  <meta name="twitter:description" content="Program to use the ibm thinkpad (tm) special keys">
  <meta name="twitter:image" content="https://www.carta.tech/images/tpb-tpb-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/tpb.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tpb (1) manual" />
  <meta property="og:description" content="Program to use the ibm thinkpad (tm) special keys" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/tpb-tpb-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tpb<small> (1)</small></h1>
        <p class="lead">Program to use the ibm thinkpad (tm) special keys</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tpb.1.html">
      <span itemprop="name">tpb: Program to use the ibm thinkpad (tm) special keys</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/tpb/">
      <span itemprop="name">tpb</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tpb.1.html">
      <span itemprop="name">tpb: Program to use the ibm thinkpad (tm) special keys</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>tpb [options]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>With TPB it is possible to bind a program to the ThinkPad, Mail, Home and Search button. TPB can also run a callback program on each state change with the changed state and the new state as options. So it is possible to trigger several actions on different events. TPB	has a on-screen display (OSD) to show volume, mute, brightness and some other information. Furthermore TPB supports a software mixer, as the R series ThinkPads have no hardware mixer to change the volume.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>Display help.</p>
  </dd>
  <dt>
    <p><strong>-d, --daemon</strong></p>
  </dt>
  <dd>
    <p>Startup as daemon.</p>
  </dd>
  <dt>
    <p><strong>-c, --config=FILE</strong></p>
  </dt>
  <dd>
    <p>Read FILE as additional configuration file.</p>
  </dd>
  <dt>
    <p><strong>-A, --apm=STATE</strong></p>
  </dt>
  <dd>
    <p>Some ThinkPads generate mouse and keyboard events or have a high CPU load when polling /proc/apm. You may enable this, if you want the AC connected/AC disconnected messages. Default is off.</p>
  </dd>
  <dt>
    <p><strong>-P, --powermgt=STATE</strong></p>
  </dt>
  <dd>
    <p>The program apmiser (part of tpctl package) switches the power management mode according to the needs of the user. This results in lots of changes displayed in OSD. To avoid this, the power management messages can be turned off. Default is auto.</p>
  </dd>
  <dt>
    <p><strong>-x, --xevents=STATE</strong></p>
  </dt>
  <dd>
    <p>Some of the special keys generate X11 events instead of changing the nvram. TPB is able to grab those keys and run an application. In general events are only grabbed for keys for which a command is assigned or if the callback script is configured. However some people like to use the X11 events through xmodmap or the like. This option turns off the grabbing of all events regardless if they are configured or not. Affected keys are HOME, SEARCH, MAIL, FAVORITES, RELOAD, ABORT, BACKWARD, FORWARD and FN. Default is on.</p>
  </dd>
  <dt>
    <p><strong>-m, --mixer=STATE</strong></p>
  </dt>
  <dd>
    <p>Use OSS mixer to change volume and for mute/unmute. This should be use on models with no hardware mixer (volume and mute buttons show no effect). R31 is reported to have no hardware mixer. To use this you must enable write access to the NVRAM device (possibly dangerous). Possible values are on and off. Default is off.</p>
  </dd>
  <dt>
    <p><strong>-o, --osd=STATE</strong></p>
  </dt>
  <dd>
    <p>Show on-screen display for volume, mute and brightness. Possible values are on and off. Default is on.</p>
  </dd>
  <dt>
    <p><strong>-p, --poll=DELAY</strong></p>
  </dt>
  <dd>
    <p>Set delay between polls in microseconds. Default is 200000.</p>
  </dd>
  <dt>
    <p><strong>-t, --thinkpad=CMD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when ThinkPad button is pressed. It is possible to execute any program. The program needs to include the complete path to the executable. By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>-H, --home=CMD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Home button is pressed. By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>-S, --search=CMD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Search button is pressed. By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>-M, --mail=CMD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Mail button is pressed. By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>-W, --wireless=CMD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Wireless button is pressed. By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>-C, --callback=CMD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed each button press and state change. tpb passes an identifier as first argument and the new state as second argument to the callback. So you can do fancy things :) By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>-v, --verbose</strong></p>
  </dt>
  <dd>
    <p>Print information about pressed keys.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILE</h2>
        <div class="sectioncontent">
<p>The default values of tpb can be overridden using a configuration file. The priority of the configuration options is:</p>
<dl class='dl-vertical'>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>builtin defaults</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>configuration in /etc/tpbrc</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>configuration in $HOME/.tpbrc</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>configuration in file given with '--config' command line option</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>command line options</p>
  </dd>

</dl>
<p>tpb searches for the file '~/.tpbrc'. The configuration consists of lines of the form:</p>
<pre>
# COMMENT

KEYWORD ARGUMENT # COMMENT
</pre>
<p>Keywords are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>NVRAM</strong></p>
  </dt>
  <dd>
    <p>Should define the nvram device from where the information about the key states is read. Default is to try /dev/nvram, followed by /dev/misc/nvram.</p>
  </dd>
  <dt>
    <p><strong>POLLTIME</strong></p>
  </dt>
  <dd>
    <p>Defines the delay between polls in microseconds. Default is 200000.</p>
  </dd>
  <dt>
    <p><strong>THINKPAD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when ThinkPad button is pressed. It is possible to execute any program. By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>HOME</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Home button is pressed (only available on A and S series). By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>SEARCH</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Search button is pressed (only available on A and S series). By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>MAIL</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Mail button is pressed(only available on A and S series). By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>FAVORITES</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Favorites button is pressed (only available on A series). By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>RELOAD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Reload button is pressed (only available on A series). By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>ABORT</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Abort button is pressed (only available on A series). By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>BACKWARD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Backward button is pressed (only available on A series). By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>FORWARD</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Forward button is pressed (only available on A series). By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>FN</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed when Fn button is pressed. This is only triggered, when Fn is released again and it was not used for a key combination. By default no command is executed.</p>
  </dd>
  <dt>
    <p><strong>CALLBACK</strong></p>
  </dt>
  <dd>
    <p>String with command and options that should be executed each button press and state change. tpb passes an identifier as first argument and the new state as second argument to the callback. So you can do fancy things :) By default no command is executed. Supported identifiers and states are:</p>
<pre>
IDENTIFIER        STATES/VALUE
thinkpad          pressed
home              pressed
search            pressed
mail              pressed
favorites         pressed
reload            pressed
abort             pressed
backward          pressed
forward           pressed
fn                pressed
zoom              on, off
thinklight        on, off
display           lcd, crt, both
expand            on, off
brightness        PERCENT
volume            PERCENT
mute              on, off
ac_power          connected, disconnected
powermgt_ac       high, auto, manual
powermgt_battery  high, auto, manual
</pre>

  </dd>
  <dt>
    <p><strong>MIXER</strong></p>
  </dt>
  <dd>
    <p>Use OSS mixer to change volume and for mute/unmute. This should be use on models with no hardware mixer (volume and mute buttons show no effect). R31 is reported to have no hardware mixer. To use this you must enable write access to the NVRAM device (possibly dangerous). Possible values are on and off. Default is off.</p>
  </dd>
  <dt>
    <p><strong>MIXERSTEPS</strong></p>
  </dt>
  <dd>
    <p>Defines how much steps should be available when using the OSS mixer. Default is 14. If another number of steps is used, tpb needs write access to the nvram device.</p>
  </dd>
  <dt>
    <p><strong>MIXERDEV</strong></p>
  </dt>
  <dd>
    <p>Defines the mixer device to use for OSS mixer support. Default is /dev/mixer.</p>
  </dd>
  <dt>
    <p><strong>APM</strong></p>
  </dt>
  <dd>
    <p>Some ThinkPads generate mouse and keyboard events or have a high CPU load when polling /proc/apm. You may enable this, if you want the AC connected/AC disconnected messages. Default is off.</p>
  </dd>
  <dt>
    <p><strong>POWERMGT</strong></p>
  </dt>
  <dd>
    <p>The program apmiser (part of tpctl package) switches the power management mode according to the needs of the user. This results in lots of changes displayed in OSD. To avoid this, the power management messages can be turned off. Default is auto.</p>
  </dd>
  <dt>
    <p><strong>XEVENTS</strong></p>
  </dt>
  <dd>
    <p>Some of the special keys generate X11 events instead of changing the nvram. TPB is able to grab those keys and run an application. In general events are only grabbed for keys for which a command is assigned or if the callback script is configured. However some people like to use the X11 events through xmodmap or the like. This option turns off the grabbing of all events regardless if they are configured or not. Affected keys are HOME, SEARCH, MAIL, FAVORITES, RELOAD, ABORT, BACKWARD, FORWARD and FN. Default is on.</p>
  </dd>
  <dt>
    <p><strong>OSD</strong></p>
  </dt>
  <dd>
    <p>Show on-screen display for volume, mute and brightness. Possible values are on and off. Default is on.</p>
  </dd>
  <dt>
    <p><strong>OSDZOOM</strong></p>
  </dt>
  <dd>
    <p>Specific switch for showing on-screen display for zoom button. Possible values are on and off. Default is unset, follows the OSD option.</p>
  </dd>
  <dt>
    <p><strong>OSDTHINKLIGHT</strong></p>
  </dt>
  <dd>
    <p>Specific switch for showing on-screen display for thinklight button. Possible values are on and off. Default is unset, follows the OSD option.</p>
  </dd>
  <dt>
    <p><strong>OSDDISPLAY</strong></p>
  </dt>
  <dd>
    <p>Specific switch for showing on-screen display for display output button. Possible values are on and off. Default is unset, follows the OSD option.</p>
  </dd>
  <dt>
    <p><strong>OSDHVEXPANSION</strong></p>
  </dt>
  <dd>
    <p>Specific switch for showing on-screen display for HV expansion button. Possible values are on and off. Default is unset, follows the OSD option.</p>
  </dd>
  <dt>
    <p><strong>OSDBRIGHTNESS</strong></p>
  </dt>
  <dd>
    <p>Specific switch for showing on-screen display for brightness buttons. Possible values are on and off. Default is unset, follows the OSD option.</p>
  </dd>
  <dt>
    <p><strong>OSDVOLUME</strong></p>
  </dt>
  <dd>
    <p>Specific switch for showing on-screen display for ivolume and mute buttons. Possible values are on and off. Default is unset, follows the OSD option.</p>
  </dd>
  <dt>
    <p><strong>OSDPOWERMGT</strong></p>
  </dt>
  <dd>
    <p>Specific switch for showing on-screen display for ipower management changes. Possible values are on and off. Default is unset, follows the OSD option.</p>
  </dd>
  <dt>
    <p><strong>OSDFONT</strong></p>
  </dt>
  <dd>
    <p>Defines the font for the on-screen display. You may use "xfontsel" to choose one. Default is the default font of the xosd library.</p>
  </dd>
  <dt>
    <p><strong>OSDCOLOR</strong></p>
  </dt>
  <dd>
    <p>Defines the color of the on-screen display. You may use "xcolors" to choose one. Default is BLUE.</p>
  </dd>
  <dt>
    <p><strong>OSDTIMEOUT</strong></p>
  </dt>
  <dd>
    <p>Defines how long (in seconds) the on-screen display is shown after the last keys was pressed. Default is 3.</p>
  </dd>
  <dt>
    <p><strong>OSDOFFSET</strong></p>
  </dt>
  <dd>
    <p>For backward compatibility. Same as OSDVERTICAL.</p>
  </dd>
  <dt>
    <p><strong>OSDSHADOW</strong></p>
  </dt>
  <dd>
    <p>Defines the offset of the font shadow in pixels. Default is 2.</p>
  </dd>
  <dt>
    <p><strong>OSDSHADOWCOLOR</strong></p>
  </dt>
  <dd>
    <p>Defines the color of the shadow of the on-screen display. You may use "xcolors" to choose one. Default is BLACK.</p>
  </dd>
  <dt>
    <p><strong>OSDOUTLINE</strong></p>
  </dt>
  <dd>
    <p>Defines the width of the font outline in pixels. Default is 1.</p>
  </dd>
  <dt>
    <p><strong>OSDOUTLINECOLOR</strong></p>
  </dt>
  <dd>
    <p>Defines the color of the outline of the on-screen display. You may use "xcolors" to choose one. Default is BLACK.</p>
  </dd>
  <dt>
    <p><strong>OSDVERTICAL</strong></p>
  </dt>
  <dd>
    <p>Defines the offset from the top or bottom of the screen in pixels. Default is 25.</p>
  </dd>
  <dt>
    <p><strong>OSDHORIZONTAL</strong></p>
  </dt>
  <dd>
    <p>Defines the offset from the left or right of the screen in pixels. Only supported by xosd 2.0.0 and above. Default is 25.</p>
  </dd>
  <dt>
    <p><strong>OSDPOS</strong></p>
  </dt>
  <dd>
    <p>Defines where the osd is shown. Possible values are top, middle and bottom. The value middle is only supported by xosd 2.0.0 and above. Default is bottom.</p>
  </dd>
  <dt>
    <p><strong>OSDALIGN</strong></p>
  </dt>
  <dd>
    <p>Defines the alignment of the osd. Possible values are left, center and right. Default is left.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Requires NVRAM device /dev/nvram. This must be enabled in your kernel. Although the device file must exist. The device file could be created with \'mknod /dev/nvram c 10 144\'</p><p>This program was developed on a Thinkpad Model T21.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>tpb --osd=off --verbose --thinkpad="xterm -T ntpctl -e ntpctl"</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2002-2005, Markus Braun &lt;markus.braun@krawel.de&gt;</p><p>Licensed under GNU GPL version 2 or later. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Markus Braun</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tp512cvt.1.html"><span aria-hidden="true">&larr;</span> tp512cvt.1: Magtape conversion utility</a></li>
   <li class="next"><a href="tpbconv.1.html">tpbconv.1: Make a modifed run-input file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
