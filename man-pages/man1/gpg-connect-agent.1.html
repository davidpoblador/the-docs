<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gpg-connect-agent: Communicate with a running agent</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Communicate with a running agent">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gpg-connect-agent (1) manual">
  <meta name="twitter:description" content="Communicate with a running agent">
  <meta name="twitter:image" content="https://www.carta.tech/images/gnupg-agent-gpg-connect-agent-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/gpg-connect-agent.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gpg-connect-agent (1) manual" />
  <meta property="og:description" content="Communicate with a running agent" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gnupg-agent-gpg-connect-agent-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gpg-connect-agent<small> (1)</small></h1>
        <p class="lead">Communicate with a running agent</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpg-connect-agent.1.html">
      <span itemprop="name">gpg-connect-agent: Communicate with a running agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gnupg-agent/">
      <span itemprop="name">gnupg-agent</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gpg-connect-agent.1.html">
      <span itemprop="name">gpg-connect-agent: Communicate with a running agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>gpg-connect-agent</strong> [<em>options</em>]<em>[commands]</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>gpg-connect-agent</strong> is a utility to communicate with a running <strong>gpg-agent</strong>.  It is useful to check out the commands gpg-agent provides using the Assuan interface.  It might also be useful for scripting simple applications.  Input is expected at stdin and out put gets printed to stdout.</p><p>It is very similar to running <strong>gpg-agent</strong> in server mode; but here we connect to a running instance.</p><p>The following options may be used:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>Output additional information while running.</p>
  </dd>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>Try to be as quiet as possible.</p>
  </dd>
  <dt>
    <p><strong>--homedir </strong><em>dir</em></p>
  </dt>
  <dd>
    <p>Set the name of the home directory to <em>dir</em>. If this option is not used, the home directory defaults to \(oq<em>~/.gnupg</em>\(cq.  It is only recognized when given on the command line.  It also overrides any home directory stated through the environment variable \(oq<em>GNUPGHOME</em>\(cq or (on W32 systems) by means of the Registry entry <em>HKCU&#92;Software&#92;GNU&#92;GnuPG:HomeDir</em>.</p>
  </dd>
  <dt>
    <p><strong>--agent-program </strong><em>file</em></p>
  </dt>
  <dd>
    <p>Specify the agent program to be started if none is running.</p>
  </dd>
  <dt>
    <p><strong>-S</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--raw-socket </strong><em>name</em></p>
  </dt>
  <dd>
    <p>Connect to socket <em>name</em> assuming this is an Assuan style server. Do not run any special initializations or environment checks.  This may be used to directly connect to any Assuan style socket server.</p>
  </dd>
  <dt>
    <p><strong>-E</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--exec</strong></p>
  </dt>
  <dd>
    <p>Take the rest of the command line as a program and it's arguments and execute it as an assuan server. Here is how you would run <strong>gpgsm</strong>:</p>
<pre>
 gpg-connect-agent --exec gpgsm --server
</pre>
<p>Note that you may not use options on the command line in this case.</p>
  </dd>
  <dt>
    <p><strong>--no-ext-connect</strong></p>
  </dt>
  <dd>
    <p>When using <strong>-S</strong> or <strong>--exec</strong>, <strong>gpg-connect-agent</strong> connects to the assuan server in extended mode to allow descriptor passing.  This option makes it use the old mode.</p>
  </dd>
  <dt>
    <p><strong>--run </strong><em>file</em></p>
  </dt>
  <dd>
    <p>Run the commands from <em>file</em> at startup and then continue with the regular input method.  Note, that commands given on the command line are executed after this file.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--subst</strong></p>
  </dt>
  <dd>
    <p>Run the command <strong>/subst</strong> at startup.</p>
  </dd>
  <dt>
    <p><strong>--hex</strong></p>
  </dt>
  <dd>
    <p>Print data lines in a hex format and the ASCII representation of non-control characters.</p>
  </dd>
  <dt>
    <p><strong>--decode</strong></p>
  </dt>
  <dd>
    <p>Decode data lines.  That is to remove percent escapes but make sure that a new line always starts with a D and a space.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONTROL COMMANDS</h2>
        <div class="sectioncontent">
<p>While reading Assuan commands, gpg-agent also allows a few special commands to control its operation.  These control commands all start with a slash (<strong>/</strong>).</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>/echo </strong><em>args</em></p>
  </dt>
  <dd>
    <p>Just print <em>args</em>.</p>
  </dd>
  <dt>
    <p><strong>/let </strong><em>name</em> <em>value</em></p>
  </dt>
  <dd>
    <p>Set the variable <em>name</em> to <em>value</em>.  Variables are only substituted on the input if the <strong>/subst</strong> has been used. Variables are referenced by prefixing the name with a dollar sign and optionally include the name in curly braces.  The rules for a valid name are identically to those of the standard bourne shell.  This is not yet enforced but may be in the future.  When used with curly braces no leading or trailing white space is allowed.</p><p>If a variable is not found, it is searched in the environment and if found copied to the table of variables.</p><p>Variable functions are available: The name of the function must be followed by at least one space and the at least one argument.  The following functions are available:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>get</strong></p>
  </dt>
  <dd>
    <p>Return a value described by the argument.  Available arguments are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>cwd</strong></p>
  </dt>
  <dd>
    <p>The current working directory.</p>
  </dd>
  <dt>
    <p><strong>homedir</strong></p>
  </dt>
  <dd>
    <p>The gnupg homedir.</p>
  </dd>
  <dt>
    <p><strong>sysconfdir</strong></p>
  </dt>
  <dd>
    <p>GnuPG's system configuration directory.</p>
  </dd>
  <dt>
    <p><strong>bindir</strong></p>
  </dt>
  <dd>
    <p>GnuPG's binary directory.</p>
  </dd>
  <dt>
    <p><strong>libdir</strong></p>
  </dt>
  <dd>
    <p>GnuPG's library directory.</p>
  </dd>
  <dt>
    <p><strong>libexecdir</strong></p>
  </dt>
  <dd>
    <p>GnuPG's library directory for executable files.</p>
  </dd>
  <dt>
    <p><strong>datadir</strong></p>
  </dt>
  <dd>
    <p>GnuPG's data directory.</p>
  </dd>
  <dt>
    <p><strong>serverpid</strong></p>
  </dt>
  <dd>
    <p>The PID of the current server. Command <strong>/serverpid</strong> must have been given to return a useful value.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>unescape </strong><em>args</em></p>
  </dt>
  <dd>
    <p>Remove C-style escapes from <em>args</em>.  Note that <strong>&#92;0</strong> and <strong>&#92;x00</strong> terminate the returned string implicitly.  The string to be converted are the entire arguments right behind the delimiting space of the function name.</p>
  </dd>
  <dt>
    <p><strong>unpercent </strong><em>args</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>unpercent+ </strong><em>args</em></p>
  </dt>
  <dd>
    <p>Remove percent style escaping from <em>args</em>.  Note that <strong>%00</strong> terminates the string implicitly.  The string to be converted are the entire arguments right behind the delimiting space of the function name. <strong>unpercent+</strong> also maps plus signs to a spaces.</p>
  </dd>
  <dt>
    <p><strong>percent </strong><em>args</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>percent+ </strong><em>args</em></p>
  </dt>
  <dd>
    <p>Escape the <em>args</em> using percent style escaping.  Tabs, formfeeds, linefeeds, carriage returns and colons are escaped. <strong>percent+</strong> also maps spaces to plus signs.</p>
  </dd>
  <dt>
    <p><strong>errcode </strong><em>arg</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>errsource </strong><em>arg</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>errstring </strong><em>arg</em></p>
  </dt>
  <dd>
    <p>Assume <em>arg</em> is an integer and evaluate it using <strong>strtol</strong>.  Return the gpg-error error code, error source or a formatted string with the error code and error source.</p>
  </dd>
  <dt>
    <p><strong>+</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>*</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>/</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>%</strong></p>
  </dt>
  <dd>
    <p>Evaluate all arguments as long integers using <strong>strtol</strong> and apply this operator.  A division by zero yields an empty string.</p>
  </dd>
  <dt>
    <p><strong>!</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>|</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&</strong></p>
  </dt>
  <dd>
    <p>Evaluate all arguments as long integers using <strong>strtol</strong> and apply the logical oeprators NOT, OR or AND.  The NOT operator works on the last argument only.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>/definq </strong><em>name</em> <em>var</em></p>
  </dt>
  <dd>
    <p>Use content of the variable <em>var</em> for inquiries with <em>name</em>. <em>name</em> may be an asterisk (<strong>*</strong>) to match any inquiry.</p>
  </dd>
  <dt>
    <p><strong>/definqfile </strong><em>name</em> <em>file</em></p>
  </dt>
  <dd>
    <p>Use content of <em>file</em> for inquiries with <em>name</em>. <em>name</em> may be an asterisk (<strong>*</strong>) to match any inquiry.</p>
  </dd>
  <dt>
    <p><strong>/definqprog </strong><em>name</em> <em>prog</em></p>
  </dt>
  <dd>
    <p>Run <em>prog</em> for inquiries matching <em>name</em> and pass the entire line to it as command line arguments.</p>
  </dd>
  <dt>
    <p><strong>/datafile </strong><em>name</em></p>
  </dt>
  <dd>
    <p>Write all data lines from the server to the file <em>name</em>.  The file is opened for writing and created if it does not exists.  An existing file is first truncated to 0.  The data written to the file fully decoded.  Using a single dash for <em>name</em> writes to stdout.  The file is kept open until a new file is set using this command or this command is used without an argument.</p>
  </dd>
  <dt>
    <p><strong>/showdef</strong></p>
  </dt>
  <dd>
    <p>Print all definitions</p>
  </dd>
  <dt>
    <p><strong>/cleardef</strong></p>
  </dt>
  <dd>
    <p>Delete all definitions</p>
  </dd>
  <dt>
    <p><strong>/sendfd </strong><em>file</em> <em>mode</em></p>
  </dt>
  <dd>
    <p>Open <em>file</em> in <em>mode</em> (which needs to be a valid <strong>fopen</strong> mode string) and send the file descriptor to the server.  This is usually followed by a command like <strong>INPUT FD</strong> to set the input source for other commands.</p>
  </dd>
  <dt>
    <p><strong>/recvfd</strong></p>
  </dt>
  <dd>
    <p>Not yet implemented.</p>
  </dd>
  <dt>
    <p><strong>/open </strong><em>var</em> <em>file</em> [<em>mode</em>]</p>
  </dt>
  <dd>
    <p>Open <em>file</em> and assign the file descriptor to <em>var</em>.  Warning: This command is experimental and might change in future versions.</p>
  </dd>
  <dt>
    <p><strong>/close </strong><em>fd</em></p>
  </dt>
  <dd>
    <p>Close the file descriptor <em>fd</em>.  Warning: This command is experimental and might change in future versions.</p>
  </dd>
  <dt>
    <p><strong>/showopen</strong></p>
  </dt>
  <dd>
    <p>Show a list of open files.</p>
  </dd>
  <dt>
    <p><strong>/serverpid</strong></p>
  </dt>
  <dd>
    <p>Send the Assuan command <strong>GETINFO pid</strong> to the server and store the returned PID for internal purposes.</p>
  </dd>
  <dt>
    <p><strong>/sleep</strong></p>
  </dt>
  <dd>
    <p>Sleep for a second.</p>
  </dd>
  <dt>
    <p><strong>/hex</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>/nohex</strong></p>
  </dt>
  <dd>
    <p>Same as the command line option <strong>--hex</strong>.</p>
  </dd>
  <dt>
    <p><strong>/decode</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>/nodecode</strong></p>
  </dt>
  <dd>
    <p>Same as the command line option <strong>--decode</strong>.</p>
  </dd>
  <dt>
    <p><strong>/subst</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>/nosubst</strong></p>
  </dt>
  <dd>
    <p>Enable and disable variable substitution.  It defaults to disabled unless the command line option <strong>--subst</strong> has been used. If /subst as been enabled once, leading whitespace is removed from input lines which makes scripts easier to read.</p>
  </dd>
  <dt>
    <p><strong>/while </strong><em>condition</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>/end</strong></p>
  </dt>
  <dd>
    <p>These commands provide a way for executing loops.  All lines between the <strong>while</strong> and the corresponding <strong>end</strong> are executed as long as the evaluation of <em>condition</em> yields a non-zero value or is the string <strong>true</strong> or <strong>yes</strong>.  The evaluation is done by passing <em>condition</em> to the <strong>strtol</strong> function.  Example:</p>
<pre>
  /subst
  /let i 3
  /while $i
    /echo loop couter is $i
    /let i ${- $i 1}
  /end
</pre>

  </dd>
  <dt>
    <p><strong>/if </strong><em>condition</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>/end</strong></p>
  </dt>
  <dd>
    <p>These commands provide a way for conditional execution.  All lines between the <strong>if</strong> and the corresponding <strong>end</strong> are executed only if the evaluation of <em>condition</em> yields a non-zero value or is the string <strong>true</strong> or <strong>yes</strong>.  The evaluation is done by passing <em>condition</em> to the <strong>strtol</strong> function.</p>
  </dd>
  <dt>
    <p><strong>/run </strong><em>file</em></p>
  </dt>
  <dd>
    <p>Run commands from <em>file</em>.</p>
  </dd>
  <dt>
    <p><strong>/bye</strong></p>
  </dt>
  <dd>
    <p>Terminate the connection and the program</p>
  </dd>
  <dt>
    <p><strong>/help</strong></p>
  </dt>
  <dd>
    <p>Print a list of available control commands.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gpg-connect-agent&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/gpg-agent.1.html"><strong>gpg-agent</strong>(1)</a>, <a href="../man1/scdaemon.1.html"><strong>scdaemon</strong>(1)</a></p><p>The full documentation for this tool is maintained as a Texinfo manual. If GnuPG and the info program are properly installed at your site, the command</p>
<pre>
info gnupg
</pre>
<p>should give you access to the complete manual including a menu structure and an index.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gpg-agent.1.html"><span aria-hidden="true">&larr;</span> gpg-agent.1: Secret key management for gnupg</a></li>
   <li class="next"><a href="gpg-error.1.html">gpg-error.1: Program to convert gnupg error numbers to text <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
