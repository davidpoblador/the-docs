<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mailcross: A cross-validation simulator for use with dbacl.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A cross-validation simulator for use with dbacl.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mailcross (1) manual">
  <meta name="twitter:description" content="A cross-validation simulator for use with dbacl.">
  <meta name="twitter:image" content="https://www.carta.tech/images/dbacl-mailcross-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mailcross.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mailcross (1) manual" />
  <meta property="og:description" content="A cross-validation simulator for use with dbacl." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dbacl-mailcross-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mailcross<small> (1)</small></h1>
        <p class="lead">A cross-validation simulator for use with dbacl.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mailcross.1.html">
      <span itemprop="name">mailcross: A cross-validation simulator for use with dbacl.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dbacl/">
      <span itemprop="name">dbacl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mailcross.1.html">
      <span itemprop="name">mailcross: A cross-validation simulator for use with dbacl.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mailcross</strong> <em>command</em> [ <em>command_arguments</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mailcross</strong> automates the task of cross-validating email filtering and classification programs such as <a href="../man1/dbacl.1.html"><strong>dbacl</strong>(1)</a>. Given a set of categorized documents, mailcross initiates simulation runs to estimate the classification errors and thereby permits fine tuning of the parameters of the classifier.</p><p>Cross-validation is a method which is widely used to compare the quality of classification and learning algorithms, and as such permits rudimentary comparisons between those classifiers which make use of <a href="../man1/dbacl.1.html"><strong>dbacl</strong>(1)</a> and <a href="../man1/bayesol.1.html"><strong>bayesol</strong>(1)</a>, and other competing classifiers.</p><p>The mechanics of cross-validation are as follows: A set of pre-classified email messages is first split into a number of roughly equal-sized subsets. For each subset, the filter (by default, <a href="../man1/dbacl.1.html"><strong>dbacl</strong>(1)</a>) is used to classify each message within this subset, based upon having learned the categories from the remaining subsets. The resulting classification errors are then averaged over all subsets.</p><p>The results obtained by cross validation essentially do not depend upon the ordering of the sample emails. Other methods (see <a href="../man1/mailtoe.1.html"><strong>mailtoe</strong>(1)</a>,<a href="../man1/mailfoot.1.html"><strong>mailfoot</strong>(1)</a>) attempt to capture the behaviour of classification errors over time.</p><p><strong>mailcross</strong> uses the environment variables MAILCROSS_LEARNER and MAILCROSS_FILTER when executing, which permits the cross-validation of arbitrary filters, provided these satisfy the compatibility conditions stated in the ENVIRONMENT section below.</p><p>For convenience, <strong>mailcross</strong> implements a <strong>testsuite</strong> framework with predefined wrappers for several open source classifiers. This permits the direct comparison of <a href="../man1/dbacl.1.html"><strong>dbacl</strong>(1)</a> with competing classifiers on the same set of email samples. See the USAGE section below.</p><p>During preparation, <strong>mailcross</strong> builds a subdirectory named mailcross.d in the current working directory. All needed calculations are performed inside this subdirectory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>mailcross</strong> returns 0 on success, 1 if a problem occurred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>prepare</strong> <em>size</em>
  </dt>
  <dd>
    <p>Prepares a subdirectory named mailcross.d in the current working directory, and populates it with empty subdirectories for exactly <em>size</em> subsets.</p>
  </dd>
  <dt>
    <strong>add</strong> <em>category</em> [FILE]...
  </dt>
  <dd>
    <p>Takes a set of emails from either FILE if specified, or STDIN, and associates them with <em>category</em>. All emails are distributed randomly into the subdirectories of mailcross.d for later use. For each <em>category</em>, this command can be repeated several times, but should be executed at least once.</p>
  </dd>
  <dt>
    <strong>clean</strong>
  </dt>
  <dd>
    <p>Deletes the directory mailcross.d and all its contents.</p>
  </dd>
  <dt>
    <strong>learn</strong>
  </dt>
  <dd>
    <p>For every previously built subset of email messages, pre-learns all the categories based on the contents of all the subsets except this one. The <em>command_arguments</em> are passed to MAILCROSS_LEARNER.</p>
  </dd>
  <dt>
    <strong>run</strong>
  </dt>
  <dd>
    <p>For every previously built subset of email messages, performs the classification based upon the pre-learned categories associated with all but this subset. The <em>command_arguments</em> are passed to MAILCROSS_FILTER.</p>
  </dd>
  <dt>
    <strong>summarize</strong>
  </dt>
  <dd>
    <p>Prints statistics for the latest cross-validation run.</p>
  </dd>
  <dt>
    <strong>review</strong> <em>truecat</em> <em>predcat</em>
  </dt>
  <dd>
    <p>Scans the last run statistics and extracts all the messages which belong to category <em>truecat</em> but have been classified into category <em>predcat</em>. The extracted messages are copied to the directory mailcross.d/review for perusal.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <strong>testsuite list</strong>
  </dt>
  <dd>
    <p>Shows a list of available filters/wrapper scripts which can be selected.</p>
  </dd>
  <dt>
    <strong>testsuite select</strong> [FILTER]...
  </dt>
  <dd>
    <p>Prepares the filter(s) named <em>FILTER</em> to be used for simulation. The filter name is the name of a wrapper script located in the directory <em>/usr/share/dbacl/testsuite</em>. Each filter has a rigid interface documented below, and the act of selecting it copies it to the <em>mailcross.d/filters</em> directory. Only filters located there are used in the simulations.</p>
  </dd>
  <dt>
    <strong>testsuite deselect</strong> [FILTER]...
  </dt>
  <dd>
    <p>Removes the named filter(s) from the directory <em>mailcross.d/filters</em> so that they are not used in the simulation.</p>
  </dd>
  <dt>
    <strong>testsuite run</strong>
  </dt>
  <dd>
    <p>Invokes every selected filter on the datasets added previously, and calculates misclassification rates.</p>
  </dd>
  <dt>
    <strong>testsuite status</strong>
  </dt>
  <dd>
    <p>Describes the scheduled simulations.</p>
  </dd>
  <dt>
    <strong>testsuite summarize</strong>
  </dt>
  <dd>
    <p>Shows the cross validation results for all filters. Only makes sense after the <em>run</em> command.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>The normal usage pattern is the following: first, you should separate your email collection into several categories (manually or otherwise). Each category should be associated with one or more folders, but each folder should not contain more than one category. Next, you should decide how many subsets to use, say 10. Note that too many subsets will slow down the calculations rapidly. Now you can type % mailcross prepare 10</p><p>Next, for every category, you must add every folder associated with this category. Suppose you have three categories named <em>spam</em>, <em>work</em>, and <em>play</em>, which are associated with the mbox files <em>spam.mbox</em>, <em>work.mbox</em>, and <em>play.mbox</em> respectively. You would type</p><p>% mailcross add spam spam.mbox</p><p>% mailcross add work work.mbox</p><p>% mailcross add play play.mbox</p><p>You can now perform as many simulations as desired. Every cross validation consists of a learning, a running and a summarizing stage. These operations are performed on the classifier specified in the MAILCROSS_FILTER and MAILCROSS_LEARNER variables. By setting these variables appropriately, you can compare classification performance as you vary the command line options of your classifier(s).</p><p>% mailcross learn</p><p>% mailcross run</p><p>% mailcross summarize</p><p>The testsuite commands are designed to simplify the above steps and allow comparison of a wide range of email classifiers, including but not limited to <strong>dbacl</strong>. Classifiers are supported through wrapper scripts, which are located in the <em>/usr/share/dbacl/testsuite</em> directory.</p><p>The first stage when using the testsuite is deciding which classifiers to compare. You can view a list of available wrappers by typing:</p><p>% mailcross testsuite list</p><p>Note that the wrapper scripts are NOT the actual email classifiers, which must be installed separately by your system administrator or otherwise. Once this is done, you can select one or more wrappers for the simulation by typing, for example:</p><p>% mailcross testsuite select dbaclA ifile</p><p>If some of the selected classifiers cannot be found on the system, they are not selected. Note also that some wrappers can have hard-coded category names, e.g. if the classifier only supports binary classification. Heed the warning messages.</p><p>It remains only to run the simulation. Beware, this can take a long time (several hours depending on the classifier).</p><p>% mailcross testsuite run</p><p>% mailcross testsuite summarize</p><p>Once you are all done with simulations, you can delete the working files, log files etc. by typing</p><p>% mailcross clean</p><p>The progress of the cross validation is written silently in various log files which are located in the <em>mailcross.d/log</em> directory. Check these in case of problems.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SCRIPT INTERFACE</h2>
        <div class="sectioncontent">
<p><strong>mailcross testsuite</strong> takes care of learning and classifying your prepared email corpora for each selected classifier. Since classifiers have widely varying interfaces, this is only possible by wrapping those interfaces individually into a standard form which can be used by <strong>mailcross testsuite</strong>.</p><p>Each wrapper script is a command line tool which accepts a single command followed by zero or more optional arguments, in the standard form:</p><p>wrapper command [argument]...</p><p>Each wrapper script also makes use of STDIN and STDOUT in a well defined way. If no behaviour is described, then no output or input should be used. The possible commands are described below:</p>
<dl class='dl-vertical'>
  <dt>
    filter
  </dt>
  <dd>
    <p>In this case, a single email is expected on STDIN, and a list of category filenames is expected in $2, $3, etc. The script writes the category name corresponding to the input email on STDOUT. No trailing newline is required or expected.</p>
  </dd>
  <dt>
    learn
  </dt>
  <dd>
    <p>In this case, a standard mbox stream is expected on STDIN, while a suitable category file name is expected in $2. No output is written to STDOUT.</p>
  </dd>
  <dt>
    clean
  </dt>
  <dd>
    <p>In this case, a directory is expected in $2, which is examined for old database information. If any old databases are found, they are purged or reset. No output is written to STDOUT.</p>
  </dd>
  <dt>
    describe
  </dt>
  <dd>
    <p>IN this case, a single line of text is written to STDOUT, describing the filter's functionality. The line should be kept short to prevent line wrapping on a terminal.</p>
  </dd>
  <dt>
    bootstrap
  </dt>
  <dd>
    <p>In this case, a directory is expected in $2. The wrapper script first checks for the existence of its associated classifier, and other prerequisites. If the check is successful, then the wrapper is cloned into the supplied directory. A courtesy notification should be given on STDOUT to express success or failure. It is also permissible to give longer descriptions caveats.</p>
  </dd>
  <dt>
    toe
  </dt>
  <dd>
    <p>Used by <a href="../man1/mailtoe.1.html"><strong>mailtoe</strong>(1)</a>.</p>
  </dd>
  <dt>
    foot
  </dt>
  <dd>
    <p>Used by <a href="../man1/mailfoot.1.html"><strong>mailfoot</strong>(1)</a>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>Right after loading, <strong>mailcross</strong> reads the hidden file .mailcrossrc in the $HOME directory, if it exists, so this would be a good place to define custom values for environment variables.</p>
<dl class='dl-vertical'>
  <dt>
    MAILCROSS_FILTER
  </dt>
  <dd>
    <p>This variable contains a shell command to be executed repeatedly during the running stage. The command should accept an email message on STDIN and output a resulting category name. It should also accept a list of category file names on the command line. If undefined, <strong>mailcross</strong> uses the default value MAILCROSS_FILTER="dbacl -T email -T xml -v" (and also magically adds the -c option before each category).</p>
  </dd>
  <dt>
    MAILCROSS_LEARNER
  </dt>
  <dd>
    <p>This variable contains a shell command to be executed repeatedly during the learning stage. The command should accept a mbox type stream of emails on STDIN for learning, and the file name of the category on the command line. If undefined, <strong>mailcross</strong> uses the default value MAILCROSS_LEARNER="dbacl -H 19 -T email -T xml -l".</p>
  </dd>
  <dt>
    TEMPDIR
  </dt>
  <dd>
    <p>This directory is exported for the benefit of wrapper scripts. Scripts which need to create temporary files should place them a the location given in TEMPDIR.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The subdirectory mailcross.d can grow quite large. It contains a full copy of the training corpora, as well as learning files for <em>size</em> times all the added categories, and various log files.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNING</h2>
        <div class="sectioncontent">
<p>Cross-validation is a widely used, but ad-hoc statistical procedure, completely unrelated to Bayesian theory, and subject to controversy. Use this at your own risk.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCE</h2>
        <div class="sectioncontent">
<p>The source code for the latest version of this program is available at the following locations:</p><p>http://www.lbreyer.com/gpl.html</p><p>http://dbacl.sourceforge.net</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Laird A. Breyer &lt;laird@lbreyer.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mailcross&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/bayesol.1.html"><strong>bayesol</strong>(1)</a> <a href="../man1/dbacl.1.html"><strong>dbacl</strong>(1)</a>, <a href="../man1/mailinspect.1.html"><strong>mailinspect</strong>(1)</a>, <a href="../man1/mailtoe.1.html"><strong>mailtoe</strong>(1)</a>, <a href="../man1/mailfoot.1.html"><strong>mailfoot</strong>(1)</a>, <a href="../man7/regex.7.html"><strong>regex</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mailcheck.1.html"><span aria-hidden="true">&larr;</span> mailcheck.1: Check multiple mailboxes and/or maildirs for new mail</a></li>
   <li class="next"><a href="maildir-filter.1.html">maildir-filter.1: Program to filter mail in maildir folders. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
