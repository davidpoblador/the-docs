<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gdcmscu: Tool to execute a dicom query/retrieve operation</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Tool to execute a dicom query/retrieve operation">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gdcmscu (1) manual">
  <meta name="twitter:description" content="Tool to execute a dicom query/retrieve operation">
  <meta name="twitter:image" content="https://www.carta.tech/images/libgdcm-tools-gdcmscu-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/gdcmscu.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gdcmscu (1) manual" />
  <meta property="og:description" content="Tool to execute a dicom query/retrieve operation" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libgdcm-tools-gdcmscu-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gdcmscu<small> (1)</small></h1>
        <p class="lead">Tool to execute a dicom query/retrieve operation</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gdcmscu.1.html">
      <span itemprop="name">gdcmscu: Tool to execute a dicom query/retrieve operation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libgdcm-tools/">
      <span itemprop="name">libgdcm-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/gdcmscu.1.html">
      <span itemprop="name">gdcmscu: Tool to execute a dicom query/retrieve operation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
gdcmscu [OPTION]...[OPERATION]...HOSTNAME...[PORT]...
</pre>
<p> Execute a DICOM Q/R operation to HOSTNAME, using port PORT (104 when not specified)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>gdcmscu</strong> command line program is the tool to execute DICOM Query/Retrieve operation. It supports:</p><ul>
<li><p>C-ECHO (SCU)</p></li><li><p>C-FIND (SCU)</p></li><li><p>C-STORE (SCU)</p></li><li><p>C-MOVE (SCU/SCP) C-MOVE operation are executed using two different ports (one for the SCU and one for the SCP).</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<h3>OPTIONS</h3>

<pre>
  -H --hostname    %s  Hostname.
  -p --port        %d  Port number.
     --aetitle     %s  Set calling AE Title.
     --call        %s  Set called AE Title.
</pre>

<h3>mode options</h3>

<pre>
     --echo           C-ECHO (default when none).
     --store          C-STORE.
     --find           C-FIND.
     --move           C-MOVE.
</pre>

<h3>C-STORE options</h3>

<pre>
  -i --input       %s   DICOM filename
  -r --recursive        recursively process (sub-)directories
     --store-query %s   Store constructed query in file
</pre>

<h3>C-FIND/C-MOVE options</h3>

<pre>
     --patientroot       C-FIND Patient Root Model.
     --studyroot         C-FIND Study Root Model.

     --patient           C-FIND Query on Patient Info (cannot be used with --studyroot).
     --study             C-FIND Query on Study Info.
     --series            C-FIND Query on Series Info.
     --image             C-FIND Query on Image Info.
     --key   %d,%d[=%s]  0123,4567=VALUE for specifying search criteria (wildcard allowed)
                         With --key, leave blank (ie, --key 10,20="" or --key 10,20) to retrieve values
</pre>

<h3>C-MOVE options</h3>

<pre>
  -o --output    %s      DICOM filename / directory
     --port-scp  %d      Port for incoming associations
     --key   %d,%d[=%s   0123,4567=VALUE for specifying search criteria (wildcard not allowed)
                         Note that C-MOVE supports the same queries as C-FIND, but no wildcards are allowed
</pre>

<h3>general options</h3>

<pre>
  -h   --help
         print this help text and exit

  -v   --version
         print version information and exit

  -V   --verbose
         verbose mode (warning+error).

  -W   --warning
         warning mode, print warning information

  -E   --error
         error mode, print error information

  -D   --debug
         debug mode, print debug information

  -L   --log-file
         specify a filename where to write logs

  --queryhelp
         print query help
</pre>

<h3>environment variable</h3>

<pre>
  GDCM_ROOT_UID Root UID
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C-ECHO usage</h2>
        <div class="sectioncontent">
<p><strong>gdcmscu</strong> is a great tool to test if a DICOM server is up. For example to send a C-ECHO to server dicom.example.com using port 104, use:</p>
<pre>
$ gdcmscu dicom.example.com
</pre>
<p>or if you prefer being explicit:</p>
<pre>
$ gdcmscu --echo dicom.example.com 104
</pre>
<p>Using basic security your DICOM server might require that you set the appropriate called AE-TITLE</p>
<pre>
$ gdcmscu --echo dicom.example.com 11112 --call SERVSCP
</pre>
<p>If you want to specifiy your own AE-TITLE (default is GDCMSCU), simply use:</p>
<pre>
$ gdcmscu --echo dicom.example.com 11112 --call SERVSCP --aetitle MYSCU
</pre>
<p>For example you could test on the DICOM server provided by DICOMObject team:</p>
<pre>
$ gdcmscu www.dicomserver.co.uk 11112
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C-STORE usage</h2>
        <div class="sectioncontent">
<p>C-STORE is the operation that allow sending a DICOM file to a remote DICOM server. For instance to send a file called myfile.dcm</p>
<pre>
$ gdcmscu --store dicom.example.com 104 myfile.dcm
</pre>
<p>or if you prefer being explicit:</p>
<pre>
$ gdcmscu --store dicom.example.com 104 -i myfile.dcm
</pre>
<p>You can even send multiple files using the same association:</p>
<pre>
$ gdcmscu --store dicom.example.com 104 myfile1.dcm myfile2.dcm myfile3.dcm ...
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C-FIND usage</h2>
        <div class="sectioncontent">
<p><strong>gdcmscu</strong> also allow querying a DICOM server. This is the C-FIND operation, for example to find all DICOM Instance where PatientsName match a particular pattern, usage is simply:</p>
<pre>
$ gdcmscu --find --patient dicom.example.com 11112 --patientroot --key 10,10,"A*"
</pre>
<p>We also support a DCMTK compatible convention:</p>
<pre>
$ gdcmscu --find --patient dicom.example.com 11112 --patientroot --key 10,10="A*"
</pre>
<p>When an attribute is set without a value it will be part of the output result:</p>
<pre>
$ gdcmscu --find --patient dicom.example.com 11112 --call MI2B2 --patientroot -k 10,10="A*" -k 10,20
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C-MOVE usage</h2>
        <div class="sectioncontent">
<p>C-MOVE is the operation to retrieve a DICOM instance from a remote DICOM server. Most of the time, it is a subsequent operation after a C-FIND query. To retrieve a DICOM instance where PatientID is ABCD1234, simply execute:</p>
<pre>
$ gdcmscu --move --patient --aetitle ACME1 --call ACME_STORE dicom.example.com 5678 --patientroot -k 10,20="ABCD1234" --port-scp 1234
</pre>
<p>WARNING For this operation to work you need information from the DICOM server you are communicating with. Only the DICOM server you are sending a C-MOVE query will be responsible for sending back incoming associations (the actual C-STORE SCP). Therefore you need to make sure that you mapping of (AE-TITLE,PortNumber) is properly set on the DICOM server side as well as the port for incoming association (--port-scp).</p><p><strong>gdcmscu</strong> does not currently support external C-STORE association (C-STORE request sent to an external SCP application).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">patientroot notes</h2>
        <div class="sectioncontent">
<p>The flag --patientroot is just simply a wrapper around the syntax --key 8,52=PATIENT For instance one would write using DCMTK syntax:</p>
<pre>
$ findscu --patient dicom.example.com 11112 --key 8,52=PATIENT --key 10,10="F*"
</pre>
<p>This would become using GDCM syntax:</p>
<pre>
$ gdcmscu --find --patient dicom.example.com 11112 --patientroot --key 10,10="F*"
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Debugging</h2>
        <div class="sectioncontent">
<p>This is sometime difficult to investigate why a connection to a remote DICOM server cannot be done. Some recommendations follows:</p><p>Always try to do a simple C-ECHO at first. If you cannot get the C-ECHO to work none of the other operations will work</p><p>Before trying to a C-MOVE operation, make sure you can execute the C-FIND equivalent query first.</p><p>When doing a C-MOVE operation you really need to communicate with the PACS admin as the C-MOVE operation is different from the other lower level operation such as HTTP/GET. When doing a C-MOVE, the server will communicate back using another channel (could be different port) using it's internal database to map an AE-TITLE back to the destination IP.</p><p>Indeed the C-MOVE operation by design does not always use your incoming IP address to send back the resulting dataset. Instead it uses a mapping of AE-TITLE to IP address to send back any results. So pay particular attention to the spelling of your AE-TITLE and your incoming port (which may be different from the port to connect to the server).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Port Warning</h2>
        <div class="sectioncontent">
<p>Watch out that port ranging [1-1024] are reserved for admin and not easily accessible unless granted special privileges. Therefore the default 104 DICOM port might not be accessible to all your users.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C-STORE Warnings</h2>
        <div class="sectioncontent">
<p>When constructing a C-STORE operation, gdcmscu will always use the Media Storage SOP Class UID as found in the file to be sent. For encapsulated DICOM file (eg. RLE Lossless) the receiving SCP server might not support this compression and will legitimately refuse the C-STORE operation. In this case users have to manually convert to a non-compressed form this particular file:</p>
<pre>
$ gdcmconv --raw compressed.dcm non_compressed.dcm
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C-MOVE Warnings</h2>
        <div class="sectioncontent">
<p>At the moment <strong>gdcmscu</strong> only supports non-compressed transfer syntax. It will always request DataSet using Implicit VR Little Endian Transfer Syntax during a C-MOVE operation (both incoming and outgoing associations). This make gdcmscu --move equivalent to DCMTK movescu syntax:</p>
<pre>
$ movescu -xi +xi ...
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">C-FIND IMAGE level (Composite Object Instance)</h2>
        <div class="sectioncontent">
<p>One should pay attention that gdcmscu --find and findscu are not completely equivalent. Using gdcmscu --find, all Unique Keys will be added automatically. One can therefore execute something like this:</p>
<pre>
$ gdcmscu --find --patientroot --image --key 8,18=1.2.3.4.5.6 dicom.example.com 11112
</pre>
<p>instead of the more explicit form</p>
<pre>
$ gdcmscu --find --patientroot --image --key 8,18=1.2.3.4.5.6 dicom.example.com 11112 --key 10,20 --key 20,d --key 20,e
</pre>
<p>This would also be equivalent to:</p>
<pre>
$ findscu --patient --key 8,52=IMAGE --key 8,18=1.2.3.4.5.6 dicom.example.com 11112 --key 10,20 --key 20,d --key 20,e
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Storing the Query</h2>
        <div class="sectioncontent">
<p>It is also possible to store the query:</p>
<pre>
gdcmscu --find --patient --patientroot dicom.example.com 11112 --key 10,20="*" --key 10,10 --store-query query.dcm
</pre>
<p>One can then check the DataSet values send for the query:</p>
<pre>
$ gdcmdump query.dcm
# Dicom-File-Format

# Dicom-Meta-Information-Header
# Used TransferSyntax:

# Dicom-Data-Set
# Used TransferSyntax: 1.2.840.10008.1.2
(0008,0005) ?? (CS) [ISO_IR 192]                                  # 10,1-n Specific Character Set
(0008,0052) ?? (CS) [PATIENT ]                                    # 8,1 Query/Retrieve Level
(0010,0010) ?? (PN) (no value)                                    # 0,1 Patient's Name
(0010,0020) ?? (LO) [* ]                                          # 2,1 Patient ID
</pre>
<p>The Specific Character Set was set to 'ISO_IR 192' as the locale encoding of the system was found automatically by gdcmscu to be UTF-8.</p><p>This means that the following command line will properly setup the Query with the appropriate Charset to be executed correctly:</p>
<pre>
$ gdcmscu --find --patient --patientroot dicom.example.com 11112 --key 10,10="*Jérôme*"
</pre>
<p>The query is always executed on the server side (SCP), some implementations does not support string matching with different Character Set.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DICOM Public Servers</h2>
        <div class="sectioncontent">
<p>An up to date list of DICOM Public Servers can be found at:</p><p>http://www.dclunie.com/medical-image-faq/html/part8.html#DICOMPublicServers</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gdcmscu&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/gdcmconv.1.html"><strong>gdcmconv</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright Insight Software Consortium</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gdcmscanner.1.html"><span aria-hidden="true">&larr;</span> gdcmscanner.1: Scan a directory containing dicom files.</a></li>
   <li class="next"><a href="gdcmtar.1.html">gdcmtar.1: Concatenate/extract dicom files. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
