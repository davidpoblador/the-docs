<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>softhsm: Support tool for libsofthsm</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Support tool for libsofthsm">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="softhsm (1) manual">
  <meta name="twitter:description" content="Support tool for libsofthsm">
  <meta name="twitter:image" content="https://www.carta.tech/images/softhsm-softhsm-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/softhsm.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="softhsm (1) manual" />
  <meta property="og:description" content="Support tool for libsofthsm" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/softhsm-softhsm-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">softhsm<small> (1)</small></h1>
        <p class="lead">Support tool for libsofthsm</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/softhsm.1.html">
      <span itemprop="name">softhsm: Support tool for libsofthsm</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/softhsm/">
      <span itemprop="name">softhsm</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/softhsm.1.html">
      <span itemprop="name">softhsm: Support tool for libsofthsm</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>softhsm --show-slots</strong></p><p><strong>softhsm --init-token</strong> <strong>--slot</strong> <em>number</em> <strong>--label</strong> <em>text</em> &#92; [<strong>--so-pin</strong> <em>PIN</em> <strong>--pin</strong> <em>PIN</em>]</p><p><strong>softhsm --import</strong> <em>path</em> [<strong>--file-pin</strong> <em>PIN</em>] <strong>--slot</strong> <em>number</em> &#92; <strong>--pin</strong> <em>PIN</em> <strong>--label</strong> <em>text</em> <strong>--id</strong> <em>hex</em></p><p><strong>softhsm --export</strong> <em>path</em> [<strong>--file-pin</strong> <em>PIN</em>] <strong>--slot</strong> <em>number</em> &#92; <strong>--pin</strong> <em>PIN</em> <strong>--id</strong> <em>hex</em></p><p><strong>softhsm --optimize</strong> <strong>--slot</strong> <em>number</em> <strong>--pin</strong> <em>PIN</em></p><p><strong>softhsm --trusted</strong> <em>bool</em> <strong>--slot</strong> <em>number</em> [<strong>--so-pin</strong> <em>PIN</em>] &#92; <strong>--type</strong> <em>text</em> [<strong>--label</strong> <em>text</em> <strong>|| --id</strong> <em>hex</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>softhsm</strong> is a support tool for libsofthsm. Read the sections below to get more information on the libsofthsm and PKCS#11. Most applications assumes that the token they want to use is already initialized. It is then up to the user to initialize the PKCS#11 token. This is done by using the PKCS#11 interface, but instead of writing your own tool you can use the <strong>softhsm</strong> tool.</p><p>Keys are usually created directly in the token, but the user may want to use an existing key pair. Keys can be imported to a token by using the PKCS#11 interface, but this tool can also be used if the user has the key pair in a PKCS#8 file. If you need to convert keys from BIND .private-key format over to PKCS#8, one can use <strong>softhsm-keyconv</strong>.</p><p>A key may not always be exportable through the PKCS#11 interface, but the export command can pull the key data directly from the token database.</p><p>The libary <strong>libsofthsm</strong>, known as SoftHSM, provides cryptographic functionality by using the PKCS#11 API. It was developed as a part of the OpenDNSSEC project, thus designed to meet the requirements of OpenDNSSEC, but can also work together with other software that want to use the functionality of the PKCS#11 API.</p><p>SoftHSM is a software implementation of a generic cryptographic device with a PKCS#11 interface. These devices are often called tokens. Read in the manual <a href="../man5/softhsm.conf.5.html"><strong>softhsm.conf</strong>(5)</a> on how to create these tokens and how they are added to a slot in SoftHSM.</p><p>The <strong>PKCS#11</strong> API can be used to handle and store cryptographic keys. This interface specifies how to communicate with cryptographic devices such as HSMs (Hardware Security Modules) and smart cards. The purpose of these devices is, among others, to generate cryptographic keys and sign information without revealing private-key material to the outside world. They are often designed to perform well on these specific tasks compared to ordinary processes in a normal computer.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--show-slots</strong></p>
  </dt>
  <dd>
    <p>Display all the available slots and their current status.</p>
  </dd>
  <dt>
    <p><strong>--init-token</strong></p>
  </dt>
  <dd>
    <p>Initialize the token at a given slot. If the token is already initialized then this command will reinitialize it, thus erasing all the objects in the token. The matching Security Officer (SO) PIN must also be provided when doing reinitialization.</p><p>Use with <strong>--slot</strong>, <strong>--label</strong>. <strong>--so-pin</strong>, and <strong>--pin</strong>.</p>
  </dd>
  <dt>
    <p><strong>--import </strong><em>path</em></p>
  </dt>
  <dd>
    <p>Import a key pair from the given <em>path</em>. The file must be in PKCS#8-format.</p><p>Use with <strong>--file-pin</strong>, <strong>--slot</strong>, <strong>--pin</strong>, <strong>--label</strong>, and <strong>--id</strong>.</p>
  </dd>
  <dt>
    <p><strong>--export </strong><em>path</em></p>
  </dt>
  <dd>
    <p>Export a key pair to the given <em>path</em>. The file will be written in PKCS#8-format. Cannot be used in combination with <strong>--module</strong>, since the keys are extracted from the SoftHSM database, thus not using PKCS#11.</p><p>Use with <strong>--file-pin</strong>, <strong>--slot</strong>, <strong>--pin</strong>, and <strong>--id</strong>.</p>
  </dd>
  <dt>
    <p><strong>--optimize</strong></p>
  </dt>
  <dd>
    <p>Clean up leftovers (session objects in the database) from applications that haven't closed down properly. Cannot be used in combination with <strong>--module</strong>.</p><p>Use with <strong>--slot</strong> and <strong>--pin</strong>.</p>
  </dd>
  <dt>
    <p><strong>--trusted </strong><em>bool</em></p>
  </dt>
  <dd>
    <p>Mark the object as trusted. true or false.</p><p>Use with <strong>--slot</strong>, <strong>--so-pin</strong>, <strong>--type</strong>, and ( <strong>--id</strong>, or <strong>--label</strong>).</p>
  </dd>
  <dt>
    <p><strong>--file-pin </strong><em>PIN</em></p>
  </dt>
  <dd>
    <p>The <em>PIN</em> will be used to encrypt or decrypt the PKCS#8 file depending if we are writing or reading. If not given then the PKCS#8 file is assumed to be unencrypted.</p>
  </dd>
  <dt>
    <p><strong>--force</strong></p>
  </dt>
  <dd>
    <p>Use this option to override the warnings and force the given action.</p>
  </dd>
  <dt>
    <p><strong>--help</strong>, <strong>-h</strong></p>
  </dt>
  <dd>
    <p>Show the help information.</p>
  </dd>
  <dt>
    <p><strong>--id </strong><em>hex</em></p>
  </dt>
  <dd>
    <p>Choose an ID of the key pair. The ID is in hexadecimal with a variable length. Use with <strong>--force</strong> when importing a key pair if the ID already exists.</p>
  </dd>
  <dt>
    <p><strong>--label </strong><em>text</em></p>
  </dt>
  <dd>
    <p>Defines the <em>label</em> of the object or the token.</p>
  </dd>
  <dt>
    <p><strong>--module </strong><em>path</em></p>
  </dt>
  <dd>
    <p>Use another PKCS#11 library than SoftHSM.</p>
  </dd>
  <dt>
    <p><strong>--pin </strong><em>PIN</em></p>
  </dt>
  <dd>
    <p>The <em>PIN</em> for the normal user.</p>
  </dd>
  <dt>
    <p><strong>--slot </strong><em>number</em></p>
  </dt>
  <dd>
    <p>The slot where the token is located.</p>
  </dd>
  <dt>
    <p><strong>--so-pin </strong><em>PIN</em></p>
  </dt>
  <dd>
    <p>The <em>PIN</em> for the Security Officer (SO).</p>
  </dd>
  <dt>
    <p><strong>--type </strong><em>text</em></p>
  </dt>
  <dd>
    <p>The type of object. CKO_PUBLIC_KEY or CKO_CERTIFICATE.</p>
  </dd>
  <dt>
    <p><strong>--version</strong>, <strong>-v</strong></p>
  </dt>
  <dd>
    <p>Show the version info.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The token can be initialized using this command:</p>
<pre>
softhsm --init-token --slot 1 --label "A token"
</pre>
<p>A key pair can be imported using the softhsm tool where you specify the path to the key file, slot number, label and ID of the new objects, and the user PIN. The file must be in PKCS#8 format.</p>
<pre>
softhsm --import key1.pem --slot 1 --label "My key" &#92;
--id A1B2 --pin 123456
</pre>
<p>(Add, --file-pin <em>PIN</em>, if the key file is encrypted.)</p><p>All keys can be exported from the token database by using the softhsm tool. The file will be exported in PKCS#8 format.</p>
<pre>
softhsm --export key2.pem --slot 1 --id A1B2 --pin 123456
</pre>
<p>(Add, --file-pin <em>PIN</em>, if you want to output an encrypted file.)</p><p>A token can be backed up by issuing the command:</p>
<pre>
sqlite3 &lt;PATH TO YOUR TOKEN&gt; ".backup copy.db"
</pre>
<p>Move the file "copy.db" to a secure location. To restore the token, just copy the file back to the system and add it to a slot in the configuration (softhsm.conf).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>SOFTHSM_CONF</p>
  </dt>
  <dd>
    <p>When defined, the value will be used as path to the configuration file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/softhsm/softhsm.conf</em></p>
  </dt>
  <dd>
    <p>This configuration file handles the slots and the tokens. See <a href="../man5/softhsm.conf.5.html"><strong>softhsm.conf</strong>(5)</a> for more information.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Rickard Bellgrim.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO softhsm&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/softhsm-keyconv.1.html"><strong>softhsm-keyconv</strong>(1)</a>, <a href="../man5/softhsm.conf.5.html"><strong>softhsm.conf</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sofa.1.html"><span aria-hidden="true">&larr;</span> sofa.1: Sofa gui</a></li>
   <li class="next"><a href="softhsm-keyconv.1.html">softhsm-keyconv.1: Converting between bind and pkcs#8 key file formats <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
