<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>qslog: Collects request statistics from access log data.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Collects request statistics from access log data.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="qslog (1) manual">
  <meta name="twitter:description" content="Collects request statistics from access log data.">
  <meta name="twitter:image" content="https://www.carta.tech/images/libapache2-mod-qos-qslog-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/qslog.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="qslog (1) manual" />
  <meta property="og:description" content="Collects request statistics from access log data." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libapache2-mod-qos-qslog-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">qslog<small> (1)</small></h1>
        <p class="lead">Collects request statistics from access log data.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/qslog.1.html">
      <span itemprop="name">qslog: Collects request statistics from access log data.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libapache2-mod-qos/">
      <span itemprop="name">libapache2-mod-qos</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/qslog.1.html">
      <span itemprop="name">qslog: Collects request statistics from access log data.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>qslog -f &lt;format_string&gt; -o &lt;out_file&gt; [-p[c|u[c]] [-v]] [-x [&lt;num&gt;]] [-u &lt;name&gt;] [-m] [-c &lt;path&gt;]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>qslog is a real time access log analyzer. It collects the data from stdin. The output is written to the specified file every minute and includes the following entries:</p>
<pre>
  - requests per second (r/s)
  - number of requests within measured time (req)
  - bytes sent to the client per second (b/s)
  - bytes received from the client per second (ib/s)
  - repsonse status codes within the last minute (1xx,2xx,3xx,4xx,5xx)
  - average response duration (av)
  - average response duration in milliseconds (avms)
  - distribution of response durations within the last minute
</pre>
<p>(&lt;1s,1s,2s,3s,4s,5s,&gt;5)</p>
<pre>
  - number of established (new) connections within the measured time (esco)
  - average system load (sl)
  - free memory (m) (not available for all platforms)
  - number of client ip addresses seen withn the last 600 seconds (ip)
  - number of different users seen withn the last 600 seconds (usr)
  - number of events identified by the 'E' format character
  - number of mod_qos events within the last minute (qV=create session,
</pre>
<p>qS=session pass, qD=access denied, qK=connection closed, qT=dynamic keep-alive, qL=request/response slow down, qs=serialized request)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>-f &lt;format_string&gt;</p>
  </dt>
  <dd>
    <p>Defines the log data format and the positions of data elements processed by this utility. See to the 'LogFormat' directive of the httpd.conf file to see the format defintions of the servers access log data.</p>
<pre>
     qslog knows the following elements:
     I defines the client ip address (%h)
     R defines the request line (%r)
     S defines HTTP response status code (%s)
     B defines the transferred bytes (%b or %O)
     i defines the received bytes (%I)
     T defines the request duration (%T)
     t defines the request duration in milliseconds (may be used instead of T)
     D defines the request duration in microseconds (may be used instead of T) (%D)
     k defines the number of keepalive requests on the connection (%k)
     U defines the user tracking id (%{mod_qos_user_id}e)
     Q defines the mod_qos_ev event message (%{mod_qos_ev}e)
     C defines the element for the detailed log (-c option), e.g. "%U"
     s arbitrary counter to add up (sum within a minute)
     a arbitrary counter to build an average from (average per request)
     A arbitrary counter to build an average from (average per request)
     E comma separated list of event strings
     c content type (%{content-type}o), available in -pc mode only
     m request method (GET/POST) (%m), available in -pc mode only
     . defines an element to ignore (unknown string)
</pre>

  </dd>
  <dt>
    <p>-o &lt;out_file&gt;</p>
  </dt>
  <dd>
    <p>Specifies the file to store the output to. stdout is used if this option is not defined.</p>
  </dd>
  <dt>
    <p>-p</p>
  </dt>
  <dd>
    <p>Used for post processing when reading the log data from a file (cat/pipe). qslog is started using it's offline mode (extracting the time stamps from the log lines) in order to process existing log files. The option "-pc" may be used alternatively if you want to gather request information per client (identified by IP address (I) or user tracking id (U) showing how many request each client has performed within the captured period of time). "-pc" supports the format characters IURSBTtDkEcm. The option "-pu" collects statistics on a per URL level (supports format characters RSTtD). "-puc" is very similar to "-pu" but cuts the end (handler) of each URL.</p>
  </dd>
  <dt>
    <p>-v</p>
  </dt>
  <dd>
    <p>Verbose mode.</p>
  </dd>
  <dt>
    <p>-x [&lt;num&gt;]</p>
  </dt>
  <dd>
    <p>Rotates the output file once a day (move). You may specify the number of rotated files to keep. Default are 14.</p>
  </dd>
  <dt>
    <p>-u &lt;name&gt;</p>
  </dt>
  <dd>
    <p>Becomes another user, e.g. www-data.</p>
  </dd>
  <dt>
    <p>-m</p>
  </dt>
  <dd>
    <p>Calculates free system memory every minute.</p>
  </dd>
  <dt>
    <p>-c &lt;path&gt;</p>
  </dt>
  <dd>
    <p>Enables the collection of log statitics for different request types. 'path' specifies the necessary rule file. Each rule consists of a rule identifier and a regular expression to identify a request seprarated by a colon, e.g., 01:^(/a)|(/c). The regular expressions are matched against the log data element which has been identified by the 'C' format character.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>Configuration using pipped logging:</p>
<pre>
  CustomLog "|/bin/qslog -f ISBTQ -x -o /var/logs/stat.csv" "%h %&gt;s %b %T %{mod_qos_ev}e"
</pre>
<p>Post processing:</p>
<pre>
  LogFormat "%t %h    cat access_log | /bin/qslog -f ..IRSB.T -o /var/logs/stat.csv -p
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO qslog&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/qsexec.1.html"><strong>qsexec</strong>(1)</a>, <a href="../man1/qsfilter2.1.html"><strong>qsfilter2</strong>(1)</a>, <strong>qsgeo</strong>(1), <a href="../man1/qsgrep.1.html"><strong>qsgrep</strong>(1)</a>, <strong>qshead</strong>(1), <a href="../man1/qslogger.1.html"><strong>qslogger</strong>(1)</a>, <a href="../man1/qspng.1.html"><strong>qspng</strong>(1)</a>, <a href="../man1/qsrotate.1.html"><strong>qsrotate</strong>(1)</a>, <a href="../man1/qssign.1.html"><strong>qssign</strong>(1)</a>, <a href="../man1/qstail.1.html"><strong>qstail</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Pascal Buchbinder, http://opensource.adnovum.ch/mod_qos/</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="qsgrep.1.html"><span aria-hidden="true">&larr;</span> qsgrep.1: Prints matching patterns within a file.</a></li>
   <li class="next"><a href="qslogger.1.html">qslogger.1: Another shell command interface to the system log module (syslog). <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
