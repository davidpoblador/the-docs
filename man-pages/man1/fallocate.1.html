<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fallocate - preallocate or deallocate space to a file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Preallocate or deallocate space to a file">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fallocate<small> (1)</small></h1>
        <p class="lead">Preallocate or deallocate space to a file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/fallocate.1.html">
      <span itemprop="name">fallocate</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/util-linux/">
      <span itemprop="name">util-linux</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>fallocate</strong> [<strong>-c</strong>|<strong>-p</strong>|<strong>-z</strong>] [<strong>-o</strong> <em>offset</em>] <strong>-l</strong> <em>length</em> [<strong>-n</strong>] <em>filename</em></p>
<p class='spacer'>

<p><strong>fallocate -d</strong> [<strong>-o</strong> <em>offset</em>] [<strong>-l</strong> <em>length</em>] <em>filename</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>fallocate</strong> is used to manipulate the allocated disk space for a file, either to deallocate or preallocate it.  For filesystems which support the fallocate system call, preallocation is done quickly by allocating blocks and marking them as uninitialized, requiring no IO to the data blocks.  This is much faster than creating a file by filling it with zeroes.</p>
<p class='spacer'>

<p>The exit code returned by <strong>fallocate</strong> is 0 on success and 1 on failure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<p>The <em>length</em> and <em>offset</em> arguments may be followed by the multiplicative suffixes KiB (=1024), MiB (=1024*1024), and so on for GiB, TiB, PiB, EiB, ZiB and YiB (the "iB" is optional, e.g., "K" has the same meaning as "KiB") or the suffixes KB (=1000), MB (=1000*1000), and so on for GB, TB, PB, EB, ZB and YB.</p>
<p class='spacer'>

  <p>The options <strong>--collapse-range</strong>, <strong>--dig-holes</strong>, <strong>--punch-hole</strong> and <strong>--zero-range</strong> are mutually exclusive.</p>
  <dl class='dl-vertical'>
    <dt><strong>-c</strong>,<strong> --collapse-range</strong></dt>
    <dd>
  <p>Removes a byte range from a file, without leaving a hole.  The byte range to be collapsed starts at <em>offset</em> and continues for <em>length</em> bytes.  At the completion of the operation, the contents of the file starting at the location <em>offset</em>+<em>length</em> will be appended at the location <em>offset</em>, and the file will be <em>length</em> bytes smaller.  The option <strong>--keep-size</strong> may not be specified for the collapse-range operation.</p>
<p class='spacer'>

  <p>Available since Linux 3.15 for ext4 (only for extent-based files) and XFS.</p>
    </dd>
    <dt><strong>-d</strong>,<strong> --dig-holes</strong></dt>
    <dd>
  <p>Detect and dig holes.  This makes the file sparse in-place, without using extra disk space.  The minimum size of the hole depends on filesystem I/O block size (usually 4096 bytes).  Also, when using this option, <strong>--keep-size</strong> is implied.  If no range is specified by <strong>--offset</strong> and <strong>--length</strong>, then the entire file is analyzed for holes.</p>
<p class='spacer'>

  <p>You can think of this option as doing a "<strong>cp --sparse</strong>" and then renaming the destination file to the original, without the need for extra disk space.</p>
<p class='spacer'>

  <p>See <strong>--punch-hole</strong> for a list of supported filesystems.</p>
    </dd>
    <dt><strong>-l</strong>,<strong> --length </strong>length</dt>
    <dd>
  <p>Specifies the length of the range, in bytes.</p>
    </dd>
    <dt><strong>-n</strong>,<strong> --keep-size</strong></dt>
    <dd>
  <p>Do not modify the apparent length of the file.  This may effectively allocate blocks past EOF, which can be removed with a truncate.</p>
    </dd>
    <dt><strong>-o</strong>,<strong> --offset </strong>offset</dt>
    <dd>
  <p>Specifies the beginning offset of the range, in bytes.</p>
    </dd>
    <dt><strong>-p</strong>,<strong> --punch-hole</strong></dt>
    <dd>
  <p>Deallocates space (i.e., creates a hole) in the byte range starting at <em>offset</em> and continuing for <em>length</em> bytes.  Within the specified range, partial filesystem blocks are zeroed, and whole filesystem blocks are removed from the file.  After a successful call, subsequent reads from this range will return zeroes.  This option may not be specified at the same time as  the <strong>--zero-range</strong> option. Also, when using this option, <strong>--keep-size</strong> is implied.</p>
<p class='spacer'>

  <p>Supported for XFS (since Linux 2.6.38), ext4 (since Linux 3.0), Btrfs (since Linux 3.7) and tmpfs (since Linux 3.5).</p>
    </dd>
    <dt><strong>-v</strong>,<strong> --verbose</strong></dt>
    <dd>
  <p>Enable verbose mode.</p>
    </dd>
    <dt><strong>-z</strong>,<strong> --zero-range</strong></dt>
    <dd>
  <p>Zeroes space in the byte range starting at <em>offset</em> and continuing for <em>length</em> bytes.  Within the specified range, blocks are preallocated for the regions that span the holes in the file.  After a successful call, subsequent reads from this range will return zeroes.</p>
<p class='spacer'>

  <p>Zeroing is done within the filesystem preferably by converting the range into unwritten extents.  This approach means that the specified range will not be physically zeroed out on the device (except for partial blocks at the either end of the range), and I/O is (otherwise) required only to update metadata.</p>
<p class='spacer'>

  <p>Option <strong>--keep-size</strong> can be specified to prevent file length modification.</p>
<p class='spacer'>

  <p>Available since Linux 3.14 for ext4 (only for extent-based files) and XFS.</p>
    </dd>
    <dt><strong>-V</strong>,<strong> --version</strong></dt>
    <dd>
  <p>Display version information and exit.</p>
    </dd>
    <dt><strong>-h</strong>,<strong> --help</strong></dt>
    <dd>
  <p>Display help text and exit.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">

<p><a href="mailto:sandeen@redhat.com">sandeen@redhat.com</a> Eric Sandeen</p>
<p class='spacer'>

<p><a href="mailto:kzak@redhat.com">kzak@redhat.com</a> Karel Zak</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man2/fallocate.2.html"><strong>fallocate</strong>(2)</a>, <a href="../man3/posix_fallocate.3.html"><strong>posix_fallocate</strong>(3)</a>, <a href="../man1/truncate.1.html"><strong>truncate</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">

<p>The fallocate command is part of the util-linux package and is available from <a href="ftp://ftp.kernel.org/pub/linux/utils/util-linux/">ftp://ftp.kernel.org/pub/linux/utils/util-linux/</a> Linux Kernel Archive</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="factor.1.html"><span aria-hidden="true">&larr;</span> factor.1: factor numbers</a></li>
   <li class="next"><a href="false.1.html">false.1: do nothing, unsuccessfully <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
