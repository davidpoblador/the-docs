<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mkjobtexmf: Generate a texmf tree for a particular job</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Generate a texmf tree for a particular job">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mkjobtexmf (1) manual">
  <meta name="twitter:description" content="Generate a texmf tree for a particular job">
  <meta name="twitter:image" content="https://www.carta.tech/images/texlive-extra-utils-mkjobtexmf-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/mkjobtexmf.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mkjobtexmf (1) manual" />
  <meta property="og:description" content="Generate a texmf tree for a particular job" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/texlive-extra-utils-mkjobtexmf-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mkjobtexmf<small> (1)</small></h1>
        <p class="lead">Generate a texmf tree for a particular job</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mkjobtexmf.1.html">
      <span itemprop="name">mkjobtexmf: Generate a texmf tree for a particular job</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/texlive-extra-utils/">
      <span itemprop="name">texlive-extra-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/mkjobtexmf.1.html">
      <span itemprop="name">mkjobtexmf: Generate a texmf tree for a particular job</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>2011-11-10 v0.8</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>The progam <strong>mkjobtexmf</strong> runs a program and tries to find the used file names. Two methods are available, option \*(C`-recorder\*(C' of TeX (Web2C) or the program <strong>strace</strong>.</p><p>Then it generates a directory with a texmf tree. It checks the found files and tries sort them in this texmf tree.</p><p>It can be used for archiving purposes or to speed up following TeX runs.</p>
<pre>
    mkjobtexmf [options]
</pre>
<p>This runs TeX that can be configured by options. Both methods for getting the used file names are available.</p><p>    mkjobtexmf [options] -- &lt;cmd&gt; [args]</p><p>The latter form runs program <em>cmd</em> with arguments <em>args</em> instead of TeX. As method only program <strong>strace</strong> is available.</p><p>Options:</p><p>    --jobname &lt;name&gt;       Name of the job (mandatory).                               Usually this is the TeX file                               without extension     --texname &lt;file&gt;       Input file for TeX. Default is the                               job name with extension '.tex'     --texopt &lt;option&gt;      Option for TeX run     --destdir &lt;directory&gt;  Destination directory,                               default is `&lt;jobname&gt;.mjt'     --output               Add also output files     --strace               Use strace instead of TeX's                               option -recorder     --copy                 Copy files instead of creating                               symbol links     --flat                 Junk paths, do not make directories                               inside the destination directory     --(no)texhash          Run texhash, use --notexhash for MiKTeX     --exclude-ext &lt;ext&gt;    Exclude files with extension &lt;ext&gt;.     --cmd-tex &lt;cmd&gt;        Command for the TeX compiler     --cmd-kpsewhich &lt;cmd&gt;  Command for kpsewhich     --cmd-texhash &lt;cmd&gt;    Command for texhash     --cmd-strace &lt;cmd&gt;     Command for strace     --verbose              Verbose output     --help                 Brief help message     --man                  Full documentation     --version              Print version identification</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>&#92;$1</strong></p><p>First <strong>mkjobtexmf</strong> runs a program, usually TeX. The TeX compiler is configured by option \*(C`--cmd-tex\*(C'. Option \*(C`--texname\*(C' can be used, if the file name extension differs from <em>.tex</em>:</p><p>    mkjobtexmf --jobname foo --texname foo.ltx</p><p>Even more complicate cases are possible:</p><p>    mkjobtexmf --jobname foo --texname '&#92;def&#92;abc{...}&#92;input{foo}'</p><p>If another program than TeX should be used (dvips, ...), then this program can be given after \*(C`--\*(C':</p><p>    mkjobtexmf --jobname foo -- dvips foo Two methods are available to get the used file names:</p>
<dl class='dl-vertical'>
  <dt>
    Recorder of TeX
  </dt>
  <dd>
    <p>Some TeX distributions (e.g. Web2C) support the option <strong>-recorder</strong> for its TeX compilers. Then the TeX compiler generates a file with extension <em>.fls</em> that records the used input and output files.</p>
  </dd>
  <dt>
    Program strace
  </dt>
  <dd>
    <p>This program traces system calls and signals. It is used here to log the used files. The result directory <em></em><em>jobname</em><em>.mjt</em> is generated. Inside the result \s-1TEXMF\s0 tree is created. Each found file is compared against a list of paths of \s-1TEXMF\s0 trees. If a match is found, the file is linked/copied into the \s-1TEXMF\s0 tree. The list of paths is generated by program <strong>kpsewhich</strong>.</p>
  </dd>

</dl>
<p>If the file cannot be mapped to a \s-1TEXMF\s0 tree and the file is a relative file name, then it is directly linked/copied into the result directory <em></em><em>jobname</em><em>.mjt</em>. Absolute file names are not supported and neither paths with links to parent directories.</p><p>Symbolic links are created by default. The files are copied if option \*(C`--copy\*(C' is given or symbolic linking is not available.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>-</strong><strong>-jobname</strong>=&lt;<em>jobname</em>&gt;
  </dt>
  <dd>
    <p>It is the name of the job. `&lt;<em>jobname</em>&gt;.tex' serves as default for the TeX file and &lt;<em>jobname</em>&gt; is used for naming various directories and files. See section \*(L"\s-1FILES\s0\*(R".</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-texname</strong>=&lt;<em>name</em>&gt;
  </dt>
  <dd>
    <p>The name of the TeX input file, if it differs from &lt;<em>jobname</em>&gt;.tex.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-texopt</strong>=&lt;<em>opt</em>&gt;
  </dt>
  <dd>
    <p>Additional option for the TeX compiler, examples are \*(C`--ini\*(C' or \*(C`--shell-escape\*(C'. This option can be given more than once.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-destdir</strong>=&lt;<em>directory</em>&gt;
  </dt>
  <dd>
    <p>Specifies the name of the destination directory where the result is collected. As default a directory is generated in the current directory with the job name and extension `.mjt'.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-output</strong>
  </dt>
  <dd>
    <p>Also add output files.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-strace</strong>
  </dt>
  <dd>
    <p>Use method with program <strong>strace</strong>, see \*(L"\s-1DESCRIPTION\s0\*(R".</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-copy</strong>
  </dt>
  <dd>
    <p>Files are copied instead of creating symbolic links.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-flat</strong>
  </dt>
  <dd>
    <p>Files are linked or copied without path elements. The destination directory will contain a flat list of files or links without directory. The files `ls-R' and `aliases' are ignored.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-exclude-ext</strong>=&lt;<em>ext</em>&gt;
  </dt>
  <dd>
    <p>Files with extension &lt;<em>ext</em>&gt; are excluded. The option can be given several times or a comma separated list of extensions can be used. Examples:     --exclude-ext aux --exclude-ext log --exclude-ext toc is the same as     --exclude-ext aux,log,toc</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-(no)texhash</strong>
  </dt>
  <dd>
    <p>As default the file `ls-R' is generated in the `texmf' tree, because this is the file name database that might be used in TeX Live. Because MiKTeX uses a different mechanism, its `texhash' does not generate the `ls-R' files and \*(C`--notexhash\*(C' suppresses the call of `texhash'.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-cmd-tex</strong>=&lt;<em>cmd</em>&gt;
  </dt>
  <dd>
    <p>Command for the TeX compiler. Default is pdflatex.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-cmd-kpsewhich</strong>=&lt;<em>cmd</em>&gt;
  </dt>
  <dd>
    <p>Command for kpsewhich.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-cmd-texhash</strong>=&lt;<em>cmd</em>&gt;
  </dt>
  <dd>
    <p>Command for updating the file name database of the generated texmf tree. Default is texmf.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-cmd-strace</strong>=&lt;<em>cmd</em>&gt;
  </dt>
  <dd>
    <p>Command for strace.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-verbose</strong>
  </dt>
  <dd>
    <p>Verbose messages.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-help</strong>
  </dt>
  <dd>
    <p>Display help screen.</p>
  </dd>
  <dt>
    <strong>-</strong>B(-man&gt;
  </dt>
  <dd>
    <p>Print manual page.</p>
  </dd>
  <dt>
    <strong>-</strong><strong>-version</strong>
  </dt>
  <dd>
    <p>Print version identification and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>TeX file <em>test.tex</em> using TeX's recorder method:</p><p>    mkjobtexmf --jobname test</p><p>TeX file <em>test.tex</em> using LaTeX:</p><p>    mkjobtexmf --jobname test --cmd-tex latex</p><p>Format generation:</p><p>    mkjobtexmf --jobname test --texopt -ini --texname pdflatex.ini</p><p>Example, how the new texmf tree (Linux/bash) can be used:</p><p>    TEXMF=!!test.mjt/texmf pdflatex test</p><p>Example for generating a zip archive (Linux/bash):</p><p>    (cd test.mjt && zip -9r ../test .)</p><p>Example for generating a tar archive:</p><p>    tar cjhvf test.tar.bz2 -C test.mjt .</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UNSOLVED ISSUES, CAVEATS, TODOS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    Experimental software
  </dt>
  <dd>
    <p>Options, defaults, how the program works might change in future versions.</p>
  </dd>
  <dt>
    <em>texmf.cnf</em>
  </dt>
  <dd>
    <p>Currently the method with <strong>strace</strong> records this files. TeX's recorder does not. Useful are <em>texmf.cnf</em> files for variable settings. Because we have just one \s-1TEXMF\s0 tree, the path sections should probably rewritten.</p>
  </dd>
  <dt>
    Settings in environment variables
  </dt>
  <dd>
    <p>They are not stored at all.</p>
  </dd>
  <dt>
    Collisions
  </dt>
  <dd>
    <p>The program uses one destination directory and at most one \s-1TEXMF\s0 tree for the result. However, the source files can come from different directories and \s-1TEXMF\s0 trees. Therefore name collisions are possible. The program follows the strategy not to delete files in the destination directory. That allows to collect files from differnt runs. Thus collisions are resolved in the manner that the first entry that is made in the destination directory wins.</p>
  </dd>
  <dt>
    Configuration file
  </dt>
  <dd>
    <p>It would save the user from retyping the same options again and again.</p>
  </dd>
  <dt>
    Uncomplete recording
  </dt>
  <dd>
    <p>Bugs in TeX's file recording might result in incomplete file recording (e.g. pdfTeX 1.40.3 does not record .pfb and .pk files).</p>
  </dd>
  <dt>
    ...
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <em>&lt;jobname&gt;.mjt/</em>
  </dt>
  <dd>
    <p>Directory where the resulting texmf tree and symbol links are stored. It can be changed by option \*(C`--destdir\*(C'.</p>
  </dd>
  <dt>
    <em>&lt;jobname&gt;.fls</em>
  </dt>
  <dd>
    <p>Name of TeX's recorder file.</p>
  </dd>
  <dt>
    <em>&lt;jobname&gt;.strace</em>
  </dt>
  <dd>
    <p>Log file where the result of <strong>strace</strong> is stored.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Heiko Oberdiek, email: heiko.oberdiek at googlemail.com</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT AND LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright 2007, 2008, 2011 by Heiko Oberdiek.</p><p>This library is free software; you may redistribute it and/or modify it under the same terms as Perl itself (Perl Artistic License/GNU General Public License, version 2).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>2007/04/16 v0.1</strong>
  </dt>
  <dd>
    
<dl class='dl-vertical'>
  <dt>
    * First experimental version.
  </dt>
  <dd>
    
  </dd>

</dl>

  </dd>
  <dt>
    <strong>2007/05/09 v0.2</strong>
  </dt>
  <dd>
    
<dl class='dl-vertical'>
  <dt>
    * Typo in option name fixed.
  </dt>
  <dd>
    
  </dd>

</dl>

  </dd>
  <dt>
    <strong>2007/09/03 v0.3</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>2007/09/04 v0.4</strong>
  </dt>
  <dd>
    
<dl class='dl-vertical'>
  <dt>
    * Bug fix in map_files_texmf.
  </dt>
  <dd>
    
  </dd>

</dl>

  </dd>
  <dt>
    <strong>2007/09/06 v0.5</strong>
  </dt>
  <dd>
    
<dl class='dl-vertical'>
  <dt>
    * Support for `configure' added. (Thanks to Norbert Preining for writing a first version of the configure stuff.)
  </dt>
  <dd>
    
  </dd>

</dl>

  </dd>
  <dt>
    <strong>2008/04/05 v0.6</strong>
  </dt>
  <dd>
    
<dl class='dl-vertical'>
  <dt>
    * Tiny fix in target `uninstall' in file `Makefile.in'. (Thanks to Karl Berry)
  </dt>
  <dd>
    
  </dd>

</dl>

  </dd>
  <dt>
    <strong>2008/06/28 v0.7</strong>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <strong>2011/11/10 v0.8</strong>
  </dt>
  <dd>
    
<dl class='dl-vertical'>
  <dt>
    * Remove colon from drive specification when making directories.
  </dt>
  <dd>
    
  </dd>
  <dt>
    * Some support for MiKTeX (thanks Ulrike Fischer).
  </dt>
  <dd>
    
  </dd>
  <dt>
    * Various fixes in the generation of the documentation.
  </dt>
  <dd>
    
  </dd>

</dl>

  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mkimage.1.html"><span aria-hidden="true">&larr;</span> mkimage.1: Generate image for u-boot</a></li>
   <li class="next"><a href="mklibs.1.html">mklibs.1: Make a minimal set of libraries <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
