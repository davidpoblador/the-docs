<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>zctl: Zephyr control program</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Zephyr control program">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="zctl (1) manual">
  <meta name="twitter:description" content="Zephyr control program">
  <meta name="twitter:image" content="https://www.carta.tech/images/zephyr-clients-zctl-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/zctl.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="zctl (1) manual" />
  <meta property="og:description" content="Zephyr control program" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/zephyr-clients-zctl-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">zctl<small> (1)</small></h1>
        <p class="lead">Zephyr control program</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/zctl.1.html">
      <span itemprop="name">zctl: Zephyr control program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/zephyr-clients/">
      <span itemprop="name">zephyr-clients</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/zctl.1.html">
      <span itemprop="name">zctl: Zephyr control program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>zctl</strong> [ <em>options</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Zctl</em> is a general purpose control program for the <a href="../man1/zephyr.1.html"><strong>Zephyr</strong>(1)</a></em> Notification Service.  It allows the user to subscribe to specific notice types, to save the subscriptions in a file (default $HOME/.zephyr.subs), to change his location information, and to send control messages to the HostManager, <a href="../man8/zhm.8.html"><strong>zhm</strong>(8)</a>,</em> and the WindowGram client, <a href="../man1/zwgc.1.html"><strong>zwgc</strong>(1)</a>.</em></p><p>The commands may be typed on the command line, or may be entered interactively by just typing <em>zctl</em> and then typing commands to the prompt.</p><p><strong>NOTE:</strong> For all commands accepting an optional <em>recipient</em> argument, the <em>recipient</em> defaults to your Kerberos principal.  You may also subscribe to recipient ``<em>*</em>''.  If you specify a recipient, it is silently converted to ``<em>*</em>''.</p><p>The commands are as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>add </strong><em>class instance</em> [ <em>recipient</em> ]</p>
  </dt>
  <dd>
    <p>Subscribe to <em>class, instance, recipient</em>, and add this triplet to the subscriptions file.</p>
  </dd>
  <dt>
    <p><strong>add_unsubscription </strong><em>class instance</em> [ <em>recipient</em> ]</p>
  </dt>
  <dd>
    <p>Unsubscribe to <em>class, instance, recipient</em>, and add this triplet to the subscriptions file as an un-subscription. For an explanation of un-subscriptions, see below.</p>
  </dd>
  <dt>
    <p><strong>cancel</strong></p>
  </dt>
  <dd>
    <p>Cancel all subscriptions.</p>
  </dd>
  <dt>
    <p><strong>defaults</strong></p>
  </dt>
  <dd>
    <p>Retrieve the default subscription list from the Zephyr server.</p>
  </dd>
  <dt>
    <p><strong>delete </strong><em>class instance</em> [ <em>recipient</em> ]</p>
  </dt>
  <dd>
    <p>Unsubscribe to <em>class, instance, recipient</em>, and remove this triplet from the subscriptions file.</p>
  </dd>
  <dt>
    <p><strong>delete_unsubscription </strong><em>class instance</em> [ <em>recipient</em> ]</p>
  </dt>
  <dd>
    <p>Unsubscribe to <em>class, instance, recipient</em>, and remove this triplet from the subscriptions file as an un-subscription.</p>
  </dd>
  <dt>
    <p><strong>file </strong>[ <em>file</em> ]</p>
  </dt>
  <dd>
    <p>Set default subscriptions file to <em>file</em>.  If <em>file</em> isn't specified, show what the current subscriptions file is.</p>
  </dd>
  <dt>
    <p><strong>flush_locs </strong>[ <em>user</em> ]</p>
  </dt>
  <dd>
    <p>Tell the Zephyr servers to flush all location information associated with <em>user</em>, or with the user running the command if none is given.  This should only be used to remove any incorrect data that may have been left after a system crash.  Note that only Operations staff may flush location information associated with another user.</p>
  </dd>
  <dt>
    <p><strong>flush_subs </strong>[ <em>recipient</em> ]</p>
  </dt>
  <dd>
    <p>Tell the Zephyr servers to flush all of <em>recipient</em>'s subscriptions, This differs from the cancel command in that it affects subscriptions for all of <em>recipient</em>'s clients.  Note that only Operations staff may flush the subscriptions of another user.</p>
  </dd>
  <dt>
    <p><strong>hide</strong></p>
  </dt>
  <dd>
    <p>Hide your location as maintained by the Zephyr server.  This does not affect the value of the exposure variable (see below, under <strong>set).</strong></p>
  </dd>
  <dt>
    <p><strong>hm_flush</strong></p>
  </dt>
  <dd>
    <p>Tell the HostManager, <a href="../man8/zhm.8.html"><strong>zhm</strong>(8)</a>,</em> to ask the server to flush all state associated with the current host.</p>
  </dd>
  <dt>
    <p><strong>list </strong>[ <em>file</em> ]</p>
  </dt>
  <dd>
    <p>List contents of current subscriptions file or <em>file.</em> Any macros in the file (see below) are displayed verbatim and not expanded.</p>
  </dd>
  <dt>
    <p><strong>list_requests</strong></p>
  </dt>
  <dd>
    <p>List all available commands.  May be abbreviated by '?'.</p>
  </dd>
  <dt>
    <p><strong>load </strong>[ <em>file</em> ]</p>
  </dt>
  <dd>
    <p>Subscribe to all subscription triplets and unsubscribe to all un-subscription triplets in current subscriptions file or <em>file</em>.</p>
  </dd>
  <dt>
    <p><strong>new_server</strong></p>
  </dt>
  <dd>
    <p>Tell the HostManager, <a href="../man8/zhm.8.html"><strong>zhm</strong>(8)</a>,</em> to find a new Zephyr server.</p>
  </dd>
  <dt>
    <p><strong>quit</strong></p>
  </dt>
  <dd>
    <p>Exit from <em>zctl.</em></p>
  </dd>
  <dt>
    <p><strong>retrieve</strong></p>
  </dt>
  <dd>
    <p>Retrieve all current subscriptions from the Zephyr server.  These include subscriptions that might have been made by other programs, such as <a href="../man1/znol.1.html"><strong>znol</strong>(1)</a>.</em></p>
  </dd>
  <dt>
    <p><strong>save </strong>[ <em>file</em> ]</p>
  </dt>
  <dd>
    <p>Save all current subscriptions (as returned by the Zephyr server) into current subscriptions file or <em>file</em>.  The file will be replaced.</p>
  </dd>
  <dt>
    <p><strong>set </strong><em>var</em> [ <em>value</em> ]</p>
  </dt>
  <dd>
    <p>Set the value of Zephyr variable <em>var</em> to <em>value</em>, or null if no <em>value</em> is specified.  The variable <strong>exposure</strong> has special significance, and can only be set to the values none, opstaff, realm-visible, realm-announced, net-visible, and net-announced.  Setting this variable immediately updates the information in the Zephyr servers (see below for an explanation of the exposure levels).  In addition, setting this variable to none automatically performs the equivalent of a <strong>wg_shutdown</strong> command, and setting it to one of the other values automatically performs the equivalent of a <strong>wg_startup</strong> command.</p><p>The variable <strong>resolved_addresses</strong> determines whether zwgc will, for an IP address indicating the origin of a message, attempt to look up the hostname corresponding to that IP address. The value none indicates that hostnames will never be found, and that the zwgc fromhost variable will thus always contain an IP address (in dotted-decimal form). The value all indicates that there will always be an attempt to look up a hostname. Note that in this case, if you have any subscriptions with recipient ``<em>*</em>'', these subscriptions may be revealed to other Zephyr users who operate their own DNS name servers. Any other value is interpreted as a regular expression; hostname lookup attempts will occur only if the IP address matches this regular expression.</p><p>Any variable settings you make will be stored in <em>$HOME/.zephyr.vars</em></p>
  </dd>
  <dt>
    <p><strong>show </strong><em>var</em> [ <em>var</em> &nbsp;... ]</p>
  </dt>
  <dd>
    <p>Show the value of the specified Zephyr variables.  If a variable is not defined in the user's own variables file, the system variables file (<em>/etc/zephyr/zephyr.vars</em>) is searched for a default value.</p>
  </dd>
  <dt>
    <p><strong>subscribe </strong><em>class instance</em> [ <em>recipient</em> ]</p>
  </dt>
  <dd>
    <p>Subscribe to <em>class, instance, recipient</em>, but don't add this triplet to the subscriptions file.</p>
  </dd>
  <dt>
    <p><strong>unhide</strong></p>
  </dt>
  <dd>
    <p>Make your location as maintained by the Zephyr server visible.  This does not affect the value of the exposure variable.</p>
  </dd>
  <dt>
    <p><strong>unload </strong>[ <em>file</em> ]</p>
  </dt>
  <dd>
    <p>Unsubscribe to all subscription triplets in current subscriptions file or <em>file</em>.  Un-subscriptions in the file are ignored.</p>
  </dd>
  <dt>
    <p><strong>unset </strong><em>var</em> [ <em>var</em> &nbsp;... ]</p>
  </dt>
  <dd>
    <p>Delete the definitions of the specified Zephyr variables.</p>
  </dd>
  <dt>
    <p><strong>unsubscribe </strong><em>class instance</em> [ <em>recipient</em> ]</p>
  </dt>
  <dd>
    <p>Unsubscribe to <em>class, instance, recipient</em>, but don't remove this triplet from the subscriptions file.</p>
  </dd>
  <dt>
    <p><strong>wg_exit</strong></p>
  </dt>
  <dd>
    <p>Tell the WindowGram client, <a href="../man1/zwgc.1.html"><strong>zwgc</strong>(1)</a>,</em> to exit.</p>
  </dd>
  <dt>
    <p><strong>wg_read</strong></p>
  </dt>
  <dd>
    <p>Tell the WindowGram client, <a href="../man1/zwgc.1.html"><strong>zwgc</strong>(1)</a>,</em> to reread its description file.</p>
  </dd>
  <dt>
    <p><strong>wg_shutdown</strong></p>
  </dt>
  <dd>
    <p>Tell the WindowGram client to shutdown; this causes it to ignore all notices until a wg_startup command is issued.</p>
  </dd>
  <dt>
    <p><strong>wg_startup</strong></p>
  </dt>
  <dd>
    <p>Tell the WindowGram client to start accepting notices again; useful after a wg_shutdown command has been issued.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MACROS and SUBSCRIPTION FILES</h2>
        <div class="sectioncontent">
<p>There are three macros, <em>%host%, %canon%, </em>and<em> %me%. %host%</em> is converted to the current hostname, <em>%canon%</em> is converted to the official hostname as returned by <a href="../man3/gethostbyname.3.html"><strong>gethostbyname</strong>(3)</a>,</em> and <em>%me%</em> is converted to your Kerberos principal.  These macros can be used in your <em>$HOME/.zephyr.subs</em> file or as arguments to commands to specify the <em>class</em> or <em>instance</em> fields.  A sample <em>$HOME/.zephyr.subs</em> file might contain the following:</p>
<pre>
	message,urgent,%me%
	syslog,%host%,*
	mail,pop,%me%
</pre>
<p><em>Zctl</em> reads the environment variable <strong>WGFILE</strong>, to find the name of the file where the windowgram port resides.  If <strong>WGFILE</strong> is not set, the file name defaults to /tmp/wg.<em>uid</em>, where <em>uid</em> is the user's UNIX uid.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UN-SUBSCRIPTIONS</h2>
        <div class="sectioncontent">
<p>The zephyr server, <a href="../man8/zephyrd.8.html"><strong>zephyrd</strong>(8)</a>,</em> maintains default subscriptions which are automatically added to all users' subscriptions at the time of their first subscription during a login session.  If you wish to automatically remove some of these default subscriptions, you use <strong>un-subscriptions.</strong> When you <strong>load</strong> a subscription file containing un-subscriptions, the un-subscriptions are automatically sent to the server as if you had used the <strong>unsubscribe</strong> command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPOSURE LEVELS</h2>
        <div class="sectioncontent">
<p>The different exposure levels affect the operation of zephyr and its interaction with the user, as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>none</em></p>
  </dt>
  <dd>
    <p>This completely disables Zephyr for the user. The user is not registered with Zephyr.  No user location information is retained by Zephyr.  No login or logout announcements will be sent.  No subscriptions will be entered for the user, and no notices will be displayed by <a href="../man1/zwgc.1.html"><strong>zwgc</strong>(1)</a>.</em></p>
  </dd>
  <dt>
    <p><em>opstaff</em></p>
  </dt>
  <dd>
    <p>The user is registered with Zephyr.  No login or logout announcements will be sent, and location information will only be visible to Operations staff.  Default subscriptions and any additional personal subscriptions will be entered for the user.</p>
  </dd>
  <dt>
    <p><em>realm-visible</em></p>
  </dt>
  <dd>
    <p>The user is registered with Zephyr.  User location information is retained by Zephyr and made available only to users within the user's Kerberos realm.  No login or logout announcements will be sent.  This is the system default.  Default subscriptions and any additional personal subscriptions will be entered for the user.</p>
  </dd>
  <dt>
    <p><em>realm-announced</em></p>
  </dt>
  <dd>
    <p>The user is registered with Zephyr.  User location information is retained by Zephyr and made available only to users authenticated within the user's Kerberos realm.  Login and logout announcements will be sent, but only to users within the user's Kerberos realm who have explicitly requested such via subscriptions.  Default subscriptions and any additional personal subscriptions will be entered for the user.</p>
  </dd>
  <dt>
    <p><em>net-visible</em></p>
  </dt>
  <dd>
    <p>The user is registered with Zephyr.  User location information is retained by Zephyr and made available to any authenticated user who requests such. Login and logout announcements will be sent only to users within the user's Kerberos realm who have explicitly requested such via subscriptions.  Default subscriptions and any additional personal subscriptions will be entered for the user.</p>
  </dd>
  <dt>
    <p><em>net-announced</em></p>
  </dt>
  <dd>
    <p>The user is registered with Zephyr. User location information is retained by Zephyr and made available to any authenticated user who requests such.  Login and logout announcements will be sent to any user has requested such. Default subscriptions and any additional personal subscriptions will be entered for the user.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>zctl</strong></p>
  </dt>
  <dd>
    <p>Runs <em>zctl</em> in interactive mode.</p>
  </dd>
  <dt>
    <p><strong>zctl load</strong></p>
  </dt>
  <dd>
    <p>Load subscriptions and un-subscriptions from <em>$HOME/.zephyr.subs</em> file.</p>
  </dd>
  <dt>
    <p><strong>zctl sub message personal</strong></p>
  </dt>
  <dd>
    <p>Subscribe to personal messages, but don't add this to the subscriptions file.</p>
  </dd>
  <dt>
    <p><strong>zctl save</strong></p>
  </dt>
  <dd>
    <p>Save all current subscriptions to the default subscriptions file.</p>
  </dd>
  <dt>
    <p><strong>zctl set exposure none</strong></p>
  </dt>
  <dd>
    <p>Set your exposure level to `none', effectively turning off Zephyr.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO zctl&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/zephyr.1.html"><strong>zephyr</strong>(1)</a>, <a href="../man1/zwgc.1.html"><strong>zwgc</strong>(1)</a>, <a href="../man8/zhm.8.html"><strong>zhm</strong>(8)</a>, <a href="../man8/zephyrd.8.html"><strong>zephyrd</strong>(8)</a> <a href="../man3/gethostbyname.3.html"><strong>gethostbyname</strong>(3)</a></p><p>Project Athena Technical Plan Section E.4.1, `Zephyr Notification Service'</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/tmp/wg.*</p><p>$HOME/.zephyr.subs</p><p>$ZEPHYR_VARS or $HOME/.zephyr.vars</p><p>/etc/zephyr/zephyr.vars</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Robert S. French (MIT-Project Athena)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESTRICTIONS</h2>
        <div class="sectioncontent">
<p>Copyright (c) 1987,1988 by the Massachusetts Institute of Technology. All Rights Reserved.</p><p><a href="../man1/zephyr.1.html"><strong>zephyr</strong>(1)</a></em> specifies the terms and conditions for redistribution.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="zutils-zcmp.1.html"><span aria-hidden="true">&larr;</span> zcmp.1: Decompress and compare two files byte by byte</a></li>
   <li class="next"><a href="gzip-zdiff.1.html">zdiff.1: Compare compressed files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
