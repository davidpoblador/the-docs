<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ppmshadow: Add simulated shadows to a portable pixmap image</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Add simulated shadows to a portable pixmap image">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ppmshadow (1) manual">
  <meta name="twitter:description" content="Add simulated shadows to a portable pixmap image">
  <meta name="twitter:image" content="https://www.carta.tech/images/netpbm-ppmshadow-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/ppmshadow.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ppmshadow (1) manual" />
  <meta property="og:description" content="Add simulated shadows to a portable pixmap image" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/netpbm-ppmshadow-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ppmshadow<small> (1)</small></h1>
        <p class="lead">Add simulated shadows to a portable pixmap image</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ppmshadow.1.html">
      <span itemprop="name">ppmshadow: Add simulated shadows to a portable pixmap image</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/netpbm/">
      <span itemprop="name">netpbm</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/ppmshadow.1.html">
      <span itemprop="name">ppmshadow: Add simulated shadows to a portable pixmap image</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ppmshadow</strong> [<strong>-b</strong> <em>blur_size</em>] [<strong>-k</strong>] [<strong>-t</strong>] [<strong>-x</strong> <em>xoffset</em>] [<strong>-y</strong> <em>yoffset</em>] [<strong>-u</strong>] [<em>pnmfile</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ppmshadow</strong> adds a simulated shadow to an image, giving the appearance that the contents of the image float above the page, casting a diffuse shadow on the background.  Shadows can either be black, as cast by opaque objects, or translucent, where the shadow takes on the colour of the object which casts it.  You can specify the extent of the shadow and its displacement from the image with command line options.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-b</strong><em> blur_size</em></p>
  </dt>
  <dd>
    <p>Sets the distance of the light source from the image.  Larger values move the light source closer, casting a more diffuse shadow, while smaller settings move the light further away, yielding a sharper shadow. <em>blur_size</em> defaults to 11 pixels.</p>
  </dd>
  <dt>
    <p><strong>-k</strong></p>
  </dt>
  <dd>
    <p>Keep the intermediate temporary image files.  When debugging, these intermediate files provide many clues as to the source of an error. See <strong>FILES</strong> below for a list of the contents of each file.</p>
  </dd>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>Consider the non-background material in the image translucent -- it casts shadows of its own colour rather than a black shadow, which is default.  This often results in fuzzy, difficult-to-read images but in some circumstances may look better.</p>
  </dd>
  <dt>
    <p><strong>-u</strong></p>
  </dt>
  <dd>
    <p>Print command syntax and a summary of options.</p>
  </dd>
  <dt>
    <p><strong>-x</strong><em> xoffset</em></p>
  </dt>
  <dd>
    <p>Specifies the displacement of the light source to the left of the image.  Larger settings of <strong>xoffset</strong> displace the shadow to the right, as would be cast by a light further to the left.  If not specified, the horizontal offset is half of <em>blur_size</em> (above), to the left.</p>
  </dd>
  <dt>
    <p><strong>-y</strong><em> yoffset</em></p>
  </dt>
  <dd>
    <p>Specifies the displacement of the light source above the top of the image.  Larger settings displace the shadow downward, corresponding to moving the light further above the top of the image. If you don't specify <strong>-y</strong>, the vertical offset defaults to the same as the horizontal offset (above), upward.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>Input is an anymap named by the <em>pnmfile</em> command line argument; if you don't specify <em>pnmfile</em>, the input is the Standard Input file.</p><p>Output is a always a PPM file, written to Standard Output.</p><p><strong>pnmfile</strong> creates a number of temporary files as it executes.  It creates them in the /tmp directory, with names of the form:</p><p><strong>_PPMshadow</strong><em>pid</em><strong>-</strong><em>N</em><strong>.ppm</strong></p><p>where <em>pid</em> is the process number of the <strong>ppmshadow</strong> process and <em>N</em> is a number identifying the file as described below.  In normal operation, <strong>ppmshadow</strong> deletes temporary files as soon as it is done with them and leaves no debris around after it completes.  To preserve the intermediate files for debugging, use the <strong>-k</strong> command line option.</p><p><em>N</em> in the filename means:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>1</strong></p>
  </dt>
  <dd>
    <p>Positive binary mask</p>
  </dd>
  <dt>
    <p><strong>2</strong></p>
  </dt>
  <dd>
    <p>Convolution kernel for blurring shadow</p>
  </dd>
  <dt>
    <p><strong>3</strong></p>
  </dt>
  <dd>
    <p>Blurred shadow image</p>
  </dd>
  <dt>
    <p><strong>4</strong></p>
  </dt>
  <dd>
    <p>Clipped shadow image, offset as requested</p>
  </dd>
  <dt>
    <p><strong>5</strong></p>
  </dt>
  <dd>
    <p>Blank image with background of source image</p>
  </dd>
  <dt>
    <p><strong>6</strong></p>
  </dt>
  <dd>
    <p>Offset shadow</p>
  </dd>
  <dt>
    <p><strong>7</strong></p>
  </dt>
  <dd>
    <p>Inverse mask file</p>
  </dd>
  <dt>
    <p><strong>8</strong></p>
  </dt>
  <dd>
    <p>Original image times inverse mask</p>
  </dd>
  <dt>
    <p><strong>9</strong></p>
  </dt>
  <dd>
    <p>Generated shadow times positive mask</p>
  </dd>
  <dt>
    <p><strong>10</strong></p>
  </dt>
  <dd>
    <p>Shadow times background colour</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The source image must contain sufficient space on the edges in the direction in which the shadow is cast to contain the shadow -- if it doesn't some of the internal steps may fail.  You can usually expand the border of a too-tightly-cropped image with <strong>pnmmargin</strong> before processing it with <strong>ppmshadow</strong>.</p><p>Black pixels and pixels with the same color as the image background don't cast a shadow.  If this causes unintentional "holes" in the shadow, fill the offending areas with a color which differs from black or the background by RGB values of 1, which will be imperceptible to the viewer.  Since the comparison is exact, the modified areas will now cast shadows.</p><p>The background color of the source image (which is preserved in the output) is deemed to be the color of the pixel at the top left of the input image.  If that pixel isn't part of the background, simply add a one-pixel border at the top of the image, generate the shadow image, then delete the border from it.</p><p>If something goes wrong along the way, the error messages from the various Netpbm programs <strong>ppmshadow</strong> calls will, in general, provide little or no clue as to where <strong>ppmshadow</strong> went astray. In this case, Specify the <strong>-k</strong> option and examine the intermediate results in the temporary files (which this option causes to be preserved).  If you manually run the commands that <strong>ppmshadow</strong> runs on these files, you can figure out where the problem is.  In problem cases where you want to manually tweak the image generation process along the way, you can keep the intermediate files with the <strong>-k</strong> option, modify them appropriately with an image editor, then recombine them with the steps used by the code in <strong>ppmshadow</strong>. See the <strong>ppmshadow.doc</strong> document for additional details and examples of the intermediate files.</p><p>Shadows are by default black, as cast by opaque material in the image occluding white light.  Use the <strong>-t</strong> option to simulate translucent material, where the shadow takes on the colour of the object that casts it.  If the contrast between the image and background is insufficient, the <strong>-t</strong> option may yield unattractive results which resemble simple blurring of the original image.</p><p>Because Netpbm used to have a maximum maxval of 255, which meant that the largest convolution kernel <strong>pnmconvol</strong> could use was 11 by 11, <strong>ppmshadow</strong> includes a horrid, CPU-time-burning kludge which, if a blur of greater than 11 is requested, performs an initial convolution with an 11×11 kernel, then calls <strong>pnmsmooth</strong> (which is actually a script that calls pnmconvol with a 3×3 kernel) as many times as the requested blur exceeds 11.  It's ugly, but it gets the job done on those rare occasions where you need a blur greater than 11.</p><p>If you wish to generate an image at high resolution, then scale it to publication size with <strong>pnmscale</strong> in order to eliminate jagged edges by resampling, it's best to generate the shadow in the original high resolution image, prior to scaling it down in size.  If you scale first and then add the shadow, you'll get an unsightly jagged stripe between the edge of material and its shadow, due to resampled pixels intermediate between the image and background obscuring the shadow.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>ppmshadow</strong> returns status 0 if processing was completed without errors, and a nonzero Unix error code if an error prevented generation of output. Some errors may result in the script aborting, usually displaying error messages from various Netpbm components it uses, without returning a nonzero error code.  When this happens, the output file will be empty, so be sure to test this if you need to know if the program succeeded.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ppmshadow&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/pnm.5.html"><strong>pnm</strong>(5)</a>, <a href="../man1/pnmmargin.1.html"><strong>pnmmargin</strong>(1)</a>, <a href="../man1/pnmconvol.1.html"><strong>pnmconvol</strong>(1)</a>, <a href="../man1/pnmscale.1.html"><strong>pnmscale</strong>(1)</a>, <a href="../man1/pnmsmooth.1.html"><strong>pnmsmooth</strong>(1)</a>, <a href="../man5/ppm.5.html"><strong>ppm</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>John Walker &lt;http://www.fourmilab.ch&gt; August 8, 1997</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>This software is in the public domain.  Permission to use, copy, modify, and distribute this software and its documentation for any purpose and without fee is hereby granted, without any conditions or restrictions.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ppmrelief.1.html"><span aria-hidden="true">&larr;</span> ppmrelief.1: Run a laplacian relief filter on a portable pixmap</a></li>
   <li class="next"><a href="ppmshift.1.html">ppmshift.1: Shift lines of a portable pixmap left or right by a random amount <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
