<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tmail: Mail delivery module</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Mail delivery module">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tmail (1) manual">
  <meta name="twitter:description" content="Mail delivery module">
  <meta name="twitter:image" content="https://www.carta.tech/images/uw-mailutils-tmail-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/tmail.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tmail (1) manual" />
  <meta property="og:description" content="Mail delivery module" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/uw-mailutils-tmail-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tmail<small> (1)</small></h1>
        <p class="lead">Mail delivery module</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tmail.1.html">
      <span itemprop="name">tmail: Mail delivery module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/uw-mailutils/">
      <span itemprop="name">uw-mailutils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/tmail.1.html">
      <span itemprop="name">tmail: Mail delivery module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>tmail</strong> <em>[-b format] [-D] [-f from_name] [-I inbox_specifier] user[+folder] ...</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>tmail</em> delivers mail to a user's INBOX or a designated folder. <em>tmail</em> may be configured as a drop-in replacement for <strong>binmail</strong>(1), <strong>mail.local</strong>(1) or any program intended for use for mail delivery by a mail delivery program such as <a href="../man8/sendmail.8.html"><strong>sendmail</strong>(8)</a>.</p><p><em>tmail</em> is intended to be used for direct delivery by the mailer daemon; <a href="../man1/dmail.1.html"><strong>dmail</strong>(1)</a> is the preferred tool for user applications, e.g. a mail delivery filter such as <strong>procmail</strong>(1)<em>.</em> If <em>tmail</em> is used for a user application, then the calling program must be aware of the restrictions noted below.</p><p>When <em>tmail</em> exits, it returns exit status values to enable the mail delivery program to determine whether a message was delivered successfully or had a temporary (requeue for later delivery) or permanent (return to sender) failure.</p><p>If the <em>+folder</em> extension is included in the user argument, <em>tmail</em> will attempt to deliver to the designated folder.  If the folder does not exist or the extension is not included, the message is delivered to the user's INBOX. If delivery is to INBOX and no INBOX currently exists, <em>tmail</em> will create a new INBOX, using the <strong>-I</strong> or <strong>-b</strong> flag if specified. <em>tmail</em> recognizes the format of an existing INBOX or folder, and appends the new message in that format.</p><p>The <strong>-b</strong> flag specifies a format to create INBOX if INBOX does not already exist.  This flag requires privileges, and can not be used with <strong>-I</strong>.  The argument is a format name such as mix, mbx, etc.</p><p>The <strong>-D</strong> flag specifies debugging; this enables additional message telemetry.</p><p>The <strong>-f</strong> or <strong>-r</strong> flag is used by the mail delivery program to specify a Return-Path.  The header</p>
<pre>
   Return-Path: &lt;<em>from_name</em>&gt;
</pre>
<p>is prepended to the message before delivery.</p><p>The <strong>-I</strong> flag is used by the mail delivery program to specify an alternative INBOX name.  This flag requires privileges, and can not be used with <strong>-b</strong>.  This affects the location and format of INBOX.  If specified, it should be in one of three forms:</p><p>The first form of argument to <strong>-I</strong> is the string "INBOX", which means to write to the system default inbox using the system default mailbox format.  These system defaults are defined when the c-client library is built.</p><p>The second form of argument to <strong>-I</strong> is a delivery specification, consisting of "#driver.", a c-client mailbox format driver name, "/", and a file name.  This will write to the specified file in the specified format.  For example, #driver.mbx/INBOX will write to file "INBOX" in the home directory in mbx format; and #driver.unix/mail/incoming will write to file "incoming" in the user's "mail" subdirectory in unix (default UNIX) format.</p><p>The third form of argument to <strong>-I</strong> is any other name.  Normally, this will write to the specified file on the user's home directory in the specified format.  However, certain names are special.  These are:</p>
<pre>
  value       equivalant to
  -----       -------------
  INBOX.MTX   #driver.mtx/INBOX.MTX
  mbox        #driver.unix/mbox
  mail.txt    #driver.tenex/mail.txt
</pre>
<p>If <strong>-I</strong> is not specified, the default action is <strong>-I INBOX</strong>.</p><p>If multiple recipients are specified on the command line, <em>tmail</em> spawns one child process per recipient to perform actual delivery.  This way of calling <em>tmail</em> is not recommended; see below under <em>RESTRICTIONS</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSTALLATION</h2>
        <div class="sectioncontent">
<p>If <em>tmail</em> is to be used for mail delivery from the mail delivery program, it <em>must</em> be installed setuid root.</p><p>If sendmail is the mail delivery program, <em>tmail</em> is invoked from sendmail.cf.  Look for the "Mlocal" line, and substitute the path name for the <em>tmail</em> binary in place of /bin/mail, /usr/lib/mail.local, etc.  You should also add the flag to invoke <em>tmail</em> with CRLF style newlines; this is usually done with E=&#92;r&#92;n in the Mlocal line.</p><p>Here is an example of an Mlocal line in sendmail version 8:</p>
<pre>
Mlocal, P=/usr/local/etc/tmail, F=lsDFMAw5:/|@qPrn+,
  S=10/30, R=20/40, E=&#92;r&#92;n, T=DNS/RFC822/X-Unix,
  A=tmail $u
</pre>
<p>If <em>tmail</em> is to be called with the <strong>-I</strong> flag, it must be invoked with both real and effective UID root.  Many sendmail configurations invoke the local mailer as the sending user when that user is local, which will prevent <strong>-b</strong> or <strong>-I</strong> from working.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SECURITY CONSIDERATIONS</h2>
        <div class="sectioncontent">
<p>If <em>tmail</em> is invoked by an ordinary user, the Received: header line will indicate the name or UID of the user that invoked it.</p><p>Ordinary users are not permitted to use the <strong>-b</strong> or <strong>-I</strong> flag since otherwise a user could create any file on another user's directory.</p><p><em>tmail</em> can deliver mail to home directories.  In addition, <em>tmail</em> can be used to deliver mail to other mail folders in a home directory or an inferior directory of a home directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESTRICTIONS</h2>
        <div class="sectioncontent">
<p>The calling program should invoke <em>tmail</em> with CRLF newlines, otherwise <em>tmail</em> will complain in syslog.</p><p>Absolute pathnames and <em>~user</em> specifications are not permitted in <em>+folder</em> extensions.</p><p>Ordinary users are not permitted to use the <strong>-I</strong> flag.</p><p>IMAP4 namespace names are not yet supported in <em>+folder</em> extensions.</p><p>It is not possible to use <em>tmail</em> to deliver to <em>mh</em>(1) format mailboxes.</p><p>If delivery to multiple users is specified and delivery to any single user fails, the entire delivery will be reported as having failed, even though delivery to other users may have succeeded.  If <em>tmail</em> is used for mail delivery from <a href="../man8/sendmail.8.html"><strong>sendmail</strong>(8)</a>, a separate tmail invocation should be done for each user.  Otherwise a delivery failure for a single user in a message going to multiple users will cause multiple deliveries to all the other users every time <a href="../man8/sendmail.8.html"><strong>sendmail</strong>(8)</a>, retries.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Mark Crispin, MRC@CAC.Washington.EDU</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tmail&hellip;</h2>
        <div class="sectioncontent">
<p><strong>binmail</strong>(1)</p><p><a href="../man8/sendmail.8.html"><strong>sendmail</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tlsgatling.1.html"><span aria-hidden="true">&larr;</span> tlsgatling.1: High performance file server</a></li>
   <li class="next"><a href="tmake.1.html">tmake.1: Create and maintain makefiles for software projects <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
