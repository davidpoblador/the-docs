<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>unstr: Create a random access file for storing strings  unstr - dump strings in pointer order</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create a random access file for storing strings  unstr - dump strings in pointer order">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="unstr (1) manual">
  <meta name="twitter:description" content="Create a random access file for storing strings  unstr - dump strings in pointer order">
  <meta name="twitter:image" content="https://www.carta.tech/images/fortune-mod-unstr-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/unstr.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="unstr (1) manual" />
  <meta property="og:description" content="Create a random access file for storing strings  unstr - dump strings in pointer order" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fortune-mod-unstr-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">unstr<small> (1)</small></h1>
        <p class="lead">Create a random access file for storing strings  unstr - dump strings in pointer order</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/unstr.1.html">
      <span itemprop="name">unstr: Create a random access file for storing strings  unstr - dump strings in pointer order</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fortune-mod/">
      <span itemprop="name">fortune-mod</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/unstr.1.html">
      <span itemprop="name">unstr: Create a random access file for storing strings  unstr - dump strings in pointer order</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>strfile</strong> [<strong>-iorsx</strong>] [<strong>-c</strong> <em>char</em>] <em>sourcefile</em> [<em>outputfile</em>]</p><p><strong>unstr</strong> [<strong>-c</strong> <em>char</em>] <em>datafile</em>[<em>.ext</em>] [<em>outputfile</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>strfile</strong> reads a file containing groups of lines separated by a line containing a single percent `%' sign (or other specified delimiter character) and creates a data file which contains a header structure and a table of file offsets for each group of lines. This allows random access of the strings.</p><p>The output file, if not specified on the command line, is named <em>sourcefile.dat</em>.</p><p>The purpose of <strong>unstr</strong> is to undo the work of <strong>strfile</strong>. It prints out the strings contained in the sourcefile, which is <em>datafile.ext</em> without its extension, or <em>datafile</em> if no extension is specified (in this case, the extension <em>.dat</em> is added to the name of the datafile) in the order that they are listed in the header file <em>datafile</em>. If no <em>outputfile</em> is specified, it prints to standard output; otherwise it prints to the file specified. <strong>unstr</strong> can also universally change the delimiter character in a strings file. It is possible to create sorted versions of input files by using <strong>strfile -o</strong> and then using <strong>unstr</strong> to dump them out in the table order.</p><h3>Options</h3>
<p>The options are as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-c </strong><em>char</em></p>
  </dt>
  <dd>
    <p>Change the delimiting character from the percent sign to <em>char</em>. This option is available for both <strong>strfile</strong> and <strong>unstr</strong>.</p>
  </dd>
  <dt>
    <p><strong>-i</strong></p>
  </dt>
  <dd>
    <p>Ignore case when ordering the strings.</p>
  </dd>
  <dt>
    <p><strong>-o</strong></p>
  </dt>
  <dd>
    <p>Order the strings in alphabetical order.  The offset table will be sorted in the alphabetical order of the groups of lines referenced. Any initial non-alphanumeric characters are ignored. This option causes the STR_ORDERED bit in the header <em>str_flags</em> field to be set. (It also now really does sort! It didn't used to).</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>Randomize access to the strings.  Entries in the offset table will be randomly ordered.  This option causes the STR_RANDOM bit in the header <em>str_flags</em> field to be set. (And really does randomize)</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>Run silently; don't give a summary message when finished.</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>Note that each alphabetic character in the groups of lines is rotated 13 positions in a simple caesar cypher.  This option causes the STR_ROTATED bit in the header <em>str_flags</em> field to be set. Note that it <strong>does not</strong> rotate the strings--that operation must be performed separately.</p>
  </dd>

</dl>

<h3>Header</h3>
<p>The format of the header is:</p><p>#define VERSION 1</p><p>unsigned long str_version;  /* version number */</p><p>unsigned long str_numstr;   /* # of strings in the file */</p><p>unsigned long str_longlen;  /* length of longest string */</p><p>unsigned long str_shortlen; /* shortest string length */</p><p>#define STR_RANDOM    0x1   /* randomized pointers */</p><p>#define STR_ORDERED   0x2   /* ordered pointers */</p><p>#define STR_ROTATED   0x4   /* rot-13'd text */</p><p>unsigned long str_flags;    /* bit field for flags */</p><p>char str_delim;             /* delimiting character */</p><p>All fields are written in network byte order.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Fewer now, one hopes.  However, fortunes (text strings) beginning with a blank line appear to be sorted between random letters.  This includes ASCII art that contains no letters, and first lines that are solely non-alphanumeric, apparently.  I've no idea why this should be.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OTHER USES</h2>
        <div class="sectioncontent">
<p>What can you do with this besides printing sarcastic and obscene messages to the screens of lusers at login or logout?</p><p>There <strong>are</strong> some other possibilities.  Source code for a sample program, <strong>randstr</strong>, is included with this distribution: randstr splits the difference between <strong>unstr</strong> and <strong>fortune</strong>. It reads a single, specified file, and randomly selects a single text string.</p>
<dl class='dl-vertical'>
  <dt>
    1
  </dt>
  <dd>
    <p>Include <em>strfile.h</em> into a news reading/posting program, to generate random signatures. <a href="../man1/tin.1.html"><strong>Tin</strong>(1)</a> does something similar, in a much more complex manner.</p>
  </dd>
  <dt>
    2
  </dt>
  <dd>
    <p>Include it in a game.  While strfile doesn't support 'fields' or 'records', there's no reason that the text strings can't be consistent: first line, a die roll; second line, a score; third and subsequent lines, a text message.</p>
  </dd>
  <dt>
    3
  </dt>
  <dd>
    <p>Use it to store your address book.  Hell, some of the guys I know would be as well off using it to decide who to call on Friday nights (and for some, it wouldn't matter whether there were phone numbers in it or not).</p>
  </dd>
  <dt>
    4
  </dt>
  <dd>
    <p>Use it in 'lottery' situations.  If you're an ISP, write a script to store login names and GECOS from <em>/etc/passwd</em> in strfile format, write another to send 'congratulations, you've won' to the lucky login selected.  The prize might be a month's free service, or if you're AOL, a month free on a real service provider.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO unstr&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/byteorder.3.html"><strong>byteorder</strong>(3)</a>, <a href="../man6/fortune.6.html"><strong>fortune</strong>(6)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>The <strong>strfile</strong> utility first appeared in 4.4BSD. This version was heavily modified, much of it in ways peculiar to Linux.  Work has since been done to make the code more generic, and has so far been tested to work with SunOS 4.x.  More platforms are expected to be supported as work continues.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="unsquashfs.1.html"><span aria-hidden="true">&larr;</span> unsquashfs.1: Tool to uncompress squashfs filesystems</a></li>
   <li class="next"><a href="untex.1.html">untex.1: Strip latex comands from input <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
