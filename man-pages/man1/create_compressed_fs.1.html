<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>create_compressed_fs: Convert and extract a filesystem to/from a cloop volume</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Convert and extract a filesystem to/from a cloop volume">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="create_compressed_fs (1) manual">
  <meta name="twitter:description" content="Convert and extract a filesystem to/from a cloop volume">
  <meta name="twitter:image" content="https://www.carta.tech/images/cloop-utils-create_compressed_fs-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/create_compressed_fs.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="create_compressed_fs (1) manual" />
  <meta property="og:description" content="Convert and extract a filesystem to/from a cloop volume" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cloop-utils-create_compressed_fs-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">create_compressed_fs<small> (1)</small></h1>
        <p class="lead">Convert and extract a filesystem to/from a cloop volume</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/create_compressed_fs.1.html">
      <span itemprop="name">create_compressed_fs: Convert and extract a filesystem to/from a cloop volume</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cloop-utils/">
      <span itemprop="name">cloop-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/create_compressed_fs.1.html">
      <span itemprop="name">create_compressed_fs: Convert and extract a filesystem to/from a cloop volume</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>create_compressed_fs</strong> [ <strong>OPTIONS</strong> ] <strong>image</strong> <strong>outfile</strong></p><p><strong>extract_compressed_fs</strong> <strong>filename</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>create_compressed_fs</strong> compresses a filesystem image to a compressed image suitable for mounting with the cloop driver.</p><p><strong>extract_compressed_fs</strong> uncompresses a filesystem image created by create_compressed_fs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Run the <strong>create_compressed_fs</strong> command with "-h" to get a list of available options and description of data storages modes and advanced usage (eg. with a network cluster). Blocksize must be a multiple of 512 bytes.</p><p>There is an alternative set of options which is supported for compatibility with the original version of create_compressed_fs. When it's called with a pure number as output, it assumes the old syntax and maps the default options to memory mode and the block size to the number. -b for best mode is recognized as well.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>create_compressed_fs image.ext2 image.ext2.cloop</p><p>extract_compressed_fs image.ext2.cloop | cmp image.ext2 -</p><p>mkcmd="genisoimage -joliet-long -D -r data"</p><p>$mkcmd | create_compressed_fs -s $($mkcmd --print-size)i - file.cloop</p><p>create_compressed_fs image.iso -S image.cloop.a0 - | split -b 1024m - image.cloop.</p><p>cat image.cloop.* | cdrskin -</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>For optimal performance, create_compressed_fs should be used with real input and output files.</p><p>Operation with STDIN or STDOUT is complicated. create_compressed_fs cannot operate as a simple pipe filter because it needs to know some things in advance: a) the data length, b) the block lengths calculated during the compression. This meta data needs to be stored in the header AFTER the compression is trough, therefore it is not possible to push all generated data to STDOUT on-the-fly.</p><p>And so compromises need to be made. The simpliest method (used by the ancient create_compressed_fs) is a big temporary memory buffer (option <strong>-m</strong>) to keep compressed data in RAM. However, the overall system performance suffers from such usage and this may drive other applications into OOM conditions.</p><p>The next alternative to this is storing the temprorary data in an extra file aside (the <strong>-f</strong> option). This improves the overall system performance but create_compressed_fs operation is slower because it needs to copy data back when it's finished. Plus, double disk space for the output is required. If disk space is limited, the <strong>-r</strong> option could be used (reusing output file for temporary data), however the speed of the copy-back step may decrease significantly.</p><p>There are strategies to avoid the temporary data storage completely. First, only files should be used. If that is not possible, then the output should be a (seekable) file and the input data length should be known (either specified with the <strong>-s</strong> option or detected from the input file size).</p><p>Second, it is possible to store the header of the cloop volume in a separate file. After the work, header can be merged together with the compressed data with the cat command. The output data can be written to stdout. Since the header is stored too late, this method is not very usefull for immediate data transfer.  However, it allows to do some tricks like piping to the split utility (to store DVD images in smaller files on VFAT) or piping data trough ssh if the local system has no disk space (and copying the header separately).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MOUNTING</h2>
        <div class="sectioncontent">
<p>You can pass an option to the cloop module on loading, or use losetup or losetup functionality of the mount command. Examples:</p><p>insmod cloop.o file=/path/to/compressed/image</p><p>losetup /dev/cloop1 /path/to/compressed/image</p><p>mount -o ro -t whatever /dev/cloop /mnt/compressed</p><p>mount cl /mnt/misc -oloop=/dev/cloop0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO create_compressed_fs&hellip;</h2>
        <div class="sectioncontent">
<p><strong>/usr/share/doc/cloop-utils/*</strong>, <strong>/usr/share/doc/cloop-src/*</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Eduard Bloch &lt;blade@debian.org&gt; for the Debian GNU/Linux system (but may be used by others).  Permission is granted to copy, distribute and/or modify this document under the terms of the GNU GPLv2.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="create_common.1.html"><span aria-hidden="true">&larr;</span> create_common.1: Generic ctn manual page</a></li>
   <li class="next"><a href="create_cvsignore.1.html">create_cvsignore.1: Create preliminary .cvsignore in the current directory <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
