<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmsocks: Shell wrapper for performance monitoring across firewalls</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shell wrapper for performance monitoring across firewalls">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pmsocks (1) manual">
  <meta name="twitter:description" content="Shell wrapper for performance monitoring across firewalls">
  <meta name="twitter:image" content="https://www.carta.tech/images/pcp-pmsocks-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/pmsocks.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pmsocks (1) manual" />
  <meta property="og:description" content="Shell wrapper for performance monitoring across firewalls" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pcp-pmsocks-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmsocks<small> (1)</small></h1>
        <p class="lead">Shell wrapper for performance monitoring across firewalls</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmsocks.1.html">
      <span itemprop="name">pmsocks: Shell wrapper for performance monitoring across firewalls</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pcp/">
      <span itemprop="name">pcp</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/pmsocks.1.html">
      <span itemprop="name">pmsocks: Shell wrapper for performance monitoring across firewalls</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSYS</h2>
        <div class="sectioncontent">
<p><strong>pmsocks</strong> <em>path</em> [<em>args</em> ...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>pmsocks</strong> allows Performance Co-Pilot (PCP) clients running on hosts located on the internal side of a TCP/IP firewall to monitor remote hosts on the other side of the firewall. This assumes the firewall has been configured with a compliant <strong>sockd</strong> daemon and the necessary access controls are satisfied.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p><strong>pmsocks</strong> uses the <strong>tsocks</strong>(5) library, which is not included with PCP. You can get <strong>tsocks</strong> from <em>http://www.progsoc.uts.edu.au/~delius/</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IRIX CONFIGURATION</h2>
        <div class="sectioncontent">
<p>On IRIX, <strong>pmsocks</strong> is simply a shell wrapper that sets the appropriate environment variables and then executes the <em>path</em> program with <em>args</em> arguments (if any). <strong>pmsocks</strong> works by setting the <strong>_RLD_LIST</strong> environment variable (see <strong>rld</strong>(1)) to load a dynamic shared library (see <strong>dso</strong>(5)) containing stubs for ``socksified'' network library functions; This ``socksified'' library is installed at <em>/usr/pcp/lib/libpcp_socks.so</em>.</p><p>There are a number of conditions required for this to be successful and the user is strongly advised to read this whole manual page (in particular the <strong>CAVEAT</strong> section below) before attempting to use <strong>pmsocks</strong>.</p><p>When <strong>pmsocks</strong> is installed, the <em>/etc/pcp_socks.conf</em> configuration file is also installed with minimum default settings. These settings specify that socket connections to the local host should be made directly, without contacting any socks server daemon. This is necessary so that PCP clients will be able to establish a local connection to the <strong>X</strong>(1) server, and use PCP connections, possibly via a <strong>sockd</strong> daemon, to monitor remote hosts. In the present implementation of <strong>pmsocks</strong>, non-direct connections to the <strong>X</strong>(1) server do not work, hence if the display is remote, then the remote host must be on the same side of the firewall and <em>/etc/pcp_socks.conf</em> must be configured to connect directly to that host.</p><p>The format of <em>/etc/pcp_socks.conf</em> is identical to <em>/etc/socks.conf</em> as documented in the <em>CSTC-4.2</em> socks distribution. This distribution may be obtained via information contained in the socks FAQ at ftp://coast.cs.purdue.edu/pub/tools/unix/socks/</p><p>If other socks clients are being used, then it is generally safe to remove <em>/etc/pcp_socks.conf</em> and instead make a symbolic link to <em>/etc/socks.conf</em>. The file formats are identical.</p><p>The default configuration should be customized to suit the local environment so that connections to hosts located on the same side of the firewall as the local host do not use the socks daemon unnecessarily. The default configuration is</p><p>direct LOCALHOSTNAME 255.255.255.255 # direct localhost</p><p>sockd 0.0.0.0 0.0.0.0 # contact sockd everywhere else</p><p>Note that the string <strong>LOCALHOSTNAME</strong> is dynamically substituted at run time with the name of the local host, as obtained by a call to <a href="../man2/gethostname.2.html"><strong>gethostname</strong>(2)</a>. Assuming the real IP address of the local host is <strong>1.2.3.4</strong> and that a normal class-c subnet is used locally, the most common customization would be to specify direct connections for all hosts on the local subnet, by inserting another ``direct'' line as follows:</p><p>direct LOCALHOSTNAME 255.255.255.255 # direct localhost</p><p>direct 1.2.3.0 255.255.255.0 # direct on local subnet</p><p>sockd 0.0.0.0 0.0.0.0 # contact sockd everywhere else</p><p>The order of lines is important - the first line matching the requested destination IP address during a <a href="../man2/connect.2.html"><strong>connect</strong>(2)</a> call (after the requested IP address has been masked by the third parameter of the <em>/etc/pcp_socks.conf</em> line), specifies via the first parameter whether to contact the socks daemon or whether to attempt a direct connection.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IRIX ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p>There are several environment variables used by <strong>pmsocks</strong> as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>SOCKS_SERVER</strong></p>
  </dt>
  <dd>
    <p>Specifies the host name or IP address of the host running the <strong>sockd</strong> daemon. Usually this is the name of the firewall host.</p>
  </dd>
  <dt>
    <p><strong>SOCKS_PORT</strong></p>
  </dt>
  <dd>
    <p>The TCP/IP port to use when contacting <strong>sockd</strong> on the <strong>SOCKS_SERVER</strong> host. The default is <strong>1080</strong>.</p>
  </dd>
  <dt>
    <p><strong>SOCKS_NS</strong></p>
  </dt>
  <dd>
    <p>The host name of the name server to use, usually to resolve the IP address of <strong>SOCKS_SERVER</strong>.</p>
  </dd>
  <dt>
    <p><strong>SOCKS_DEBUG</strong></p>
  </dt>
  <dd>
    <p>If present in the environment, <strong>libpcp_socks</strong> will print debugging information to the <em>stderr</em> stream. There are only two levels of debugging, on or off. This is only really useful for the developers because the debugging information assumes knowledge of the <strong>libpcp_socks</strong> source code.</p>
  </dd>
  <dt>
    <p><strong>SOCKS_BANNER</strong></p>
  </dt>
  <dd>
    <p>If this is set, whenever a client calls <strong>libpcp_socks</strong> it will echo a message to <em>stdout</em> containing version information. This can be useful to check <strong>libpcp_socks</strong> is working in the absence of verbose logging.</p>
  </dd>
  <dt>
    <p><strong>_RLD_LIST</strong></p>
  </dt>
  <dd>
    <p><strong>pmsocks</strong> sets this to exactly <strong>/usr/pcp/lib/libpcp_socks.so:DEFAULT</strong></p><p>It is strongly recommended this NOT be set in the environment of interactive shells.</p>
  </dd>
  <dt>
    <p><strong>PMCD_CONNECT_TIMEOUT</strong></p>
  </dt>
  <dd>
    <p>Specifies the time-out, in seconds, for connections to <a href="../man1/pmcd.1.html"><strong>pmcd</strong>(1)</a>. When using <strong>pmsocks</strong>, this may need to be increased from the default (5 seconds) due to the additional delays introduced as a result of using <strong>sockd</strong>. See <a href="../man3/PMAPI.3.html"><strong>PMAPI</strong>(3)</a> for further details about this variable.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEAT</h2>
        <div class="sectioncontent">
<p>The following notes should be considered carefully:</p>
<dl class='dl-vertical'>
  <dt>
    <p>0)</p>
  </dt>
  <dd>
    <p>Because <strong>sockd</strong> can only handle TCP/IP sockets, <strong>pmsocks</strong> never attempts to use <strong>sockd</strong> for sockets of type <strong>SOCK_DGRAM</strong> or if the <strong>domain</strong> parameter in a call to <a href="../man2/socket.2.html"><strong>socket</strong>(2)</a> is <strong>PF_UNIX</strong> (unix domain sockets should never need to use <strong>sockd</strong> anyway).</p>
  </dd>
  <dt>
    <p>1)</p>
  </dt>
  <dd>
    <p>Some firewall products do not support ``socksified'' applications, and in these cases, <strong>pmsocks</strong> cannot be used. In this case, it will be necessary to configure the firewall to allow connections through the firewall for the PMCD communications port, typically tcp/4321.</p>
  </dd>
  <dt>
    <p>2)</p>
  </dt>
  <dd>
    <p>The PCP protocol is TPC/IP-based and works with the socks protocol, but connections which use UDP/DATAGRAM sockets or remote X11 connections via <strong>sockd</strong> may not work. If the remote display host is on the same side of the firewall as the application, this may be circumvented by configuring the remote display host to use direct connections - see above. Also, using X11 display options which use shared memory may hang the X server when used with <strong>pmsocks</strong>.</p>
  </dd>
  <dt>
    <p>3)</p>
  </dt>
  <dd>
    <p>If the <strong>pmsocks</strong> configuration file is not present, then <strong>pmsocks</strong> will exit with an error message.</p>
  </dd>
  <dt>
    <p>4)</p>
  </dt>
  <dd>
    <p><strong>pmsocks</strong> uses the locally configured name server or resolver (see <a href="../man5/resolver.5.html"><strong>resolver</strong>(5)</a>) to resolve host names to IP addresses. This may or may not be capable of resolving host names on the other side of the firewall.</p>
  </dd>
  <dt>
    <p>5)</p>
  </dt>
  <dd>
    <p>When used over a WAN, often the <strong>sockd</strong> daemon will be a long way from the application. This may result in PCP client connections timing out before connecting to the remote <strong>pmcd</strong>. If this is occurring, set the environment variable <strong>PMCD_CONNECT_TIMEOUT</strong> to a higher value than the default (5 seconds). Refer to <a href="../man3/PMAPI.3.html"><strong>PMAPI</strong>(3)</a> for further details about this variable.</p>
  </dd>
  <dt>
    <p>6)</p>
  </dt>
  <dd>
    <p>When using <strong>pmsocks</strong> to connect to <a href="../man1/pmcd.1.html"><strong>pmcd</strong>(1)</a>, but <em>``Connection Refused''</em> error messages are returned, it is not immediately obvious whether <a href="../man1/pmcd.1.html"><strong>pmcd</strong>(1)</a> is returning the error or <strong>sockd</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT NOTICE</h2>
        <div class="sectioncontent">
<p><strong>tsocks</strong> is covered by the GPL license and is copyright Shaun Clowes (delius@progsoc.org).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/etc/tsocks.conf</strong></p>
  </dt>
  <dd>
    <p>configuration file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pmsocks&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/pmcd.1.html"><strong>pmcd</strong>(1)</a>, <a href="../man1/pminfo.1.html"><strong>pminfo</strong>(1)</a>, <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a>, <a href="../man1/pmval.1.html"><strong>pmval</strong>(1)</a>, <strong>X</strong>(1), <a href="../man3/PMAPI.3.html"><strong>PMAPI</strong>(3)</a>, <a href="../man5/resolver.5.html"><strong>resolver</strong>(5)</a>, and <strong>tsocks</strong>(5).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pmsnap.1.html"><span aria-hidden="true">&larr;</span> pmsnap.1: Generate performance summary snapshot images</a></li>
   <li class="next"><a href="pmstat.1.html">pmstat.1: High-level system performance overview <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
