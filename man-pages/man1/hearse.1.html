<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>hearse: Exchange nethack bones files with other players</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Exchange nethack bones files with other players">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="hearse (1) manual">
  <meta name="twitter:description" content="Exchange nethack bones files with other players">
  <meta name="twitter:image" content="https://www.carta.tech/images/hearse-hearse-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/hearse.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="hearse (1) manual" />
  <meta property="og:description" content="Exchange nethack bones files with other players" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/hearse-hearse-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">hearse<small> (1)</small></h1>
        <p class="lead">Exchange nethack bones files with other players</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/hearse.1.html">
      <span itemprop="name">hearse: Exchange nethack bones files with other players</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/hearse/">
      <span itemprop="name">hearse</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/hearse.1.html">
      <span itemprop="name">hearse: Exchange nethack bones files with other players</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>hearse</strong> [<strong>-b</strong> | <strong>--bones-dir</strong> <em>dir</em>] [<strong>--bones-mode</strong> <em>mode</em>] [<strong>-c</strong> | <strong>--config-file</strong> <em>file</em>] [<strong>--cron</strong>] [<strong>--debug</strong>] [<strong>--delete-uploaded</strong>] [<strong>--help</strong>] [<strong>--lock-file</strong> <em>file</em>] [<strong>-q</strong> | <strong>--quiet</strong>] [<strong>--run-as-me</strong>] [<strong>--run-as-user</strong> <em>user</em>] [<strong>--run-as-group</strong> <em>group</em>] [<strong>--server-url</strong> <em>url</em>] [<strong>--stamp-file</strong> <em>file</em>] [<strong>--user-email</strong> <em>address</em>] [<strong>--user-token</strong> <em>token</em>] [<strong>--user-token-file</strong> <em>file</em>] [<strong>--version</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Nethack sometimes saves the level on which you die (including your stuff, what killed you, and your ghost) in a \*(L"bones file\*(R".  These files get loaded into later Nethack games.  If you're the only Nethack player on your system you'll only get bones files you created yourself.</p><p><strong>hearse</strong> lets you automatically exchange Nethack bones file with other players.  When run it uploads any new bones files it finds on your system, then downloads any bones files the server feels like giving it. See &lt;http://www.argon.org/~roderick/hearse/&gt; for more information.</p><p>An important thing to note is that by default using <strong>hearse</strong> will cause you to end up with more bones than you otherwise would have.  This changes the game's balance and is considered by many players to be a mild form of cheating.  You can address this by turning on the <strong>--delete-uploaded</strong> option, but the down side is you'll never encounter your own bones files.</p><p>In order to use the Hearse server, you've got to supply your email address.  Do this by using the <strong>--user-email</strong> switch the first time you use the program, or by putting \*(C`user-email <strong>address\*(C'</strong> in the config file.  Your email address will only be used to contact you about Hearse, and will never be given to any third party.  If you enter an invalid address, the server won't be able to support you if you download a bad bones file, and will be forced to ban you if any of your uploaded files are bad.</p><p>Hearse was set up as a service to the Nethack community.  Please respect that; abuse of the service can only lead to it being removed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">QUICK START</h2>
        <div class="sectioncontent">
<p>The defaults are set up for a Linux system using a nethack binary which is either set-uid or set-gid games.  If this is what you've got, as root run</p>
<pre>
    # hearse --user-email your@address.com
</pre>
<p>one time by hand, then put</p><p>    0 3 * * * root perl -we &apos;sleep rand 3600&apos;; hearse --quiet</p><p>in <em>/etc/crontab</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p><strong>hearse</strong> comes with default values for its various configuration settings which match the way many Linux systems are set up.  If any of them don't match your system, you can either change them in a configuration file, or you can specify the right values via command line switches.  This last isn't as onerous as it sounds, because most people run it from cron.  You can put the switches in the crontab file and leave it at that.  If you'd rather use a configuration file, you can use the default location (<em>/etc/nethack/hearse.conf</em>), or use the <strong>-c</strong> (aka <strong>--config-file</strong>) switch to specify the file you'd like to use.</p><p>The configuration file can specify all of the options for which it makes sense, using the long version of the option name followed by the value. Blank and commented lines are ignored in the usual fashion.  A string value can be given as \*(C`-\*(C' to mean the empty string.  Booleans can use on/off/true/false/yes/no/1/0.  A sample <em>hearse.conf</em> is included with the distribution.  Eg,</p><p>    bones-dir           /local/games/nethackdir     bones-mode          600     quiet               on     run-as-user         daemon     run-as-group        -     user-token-file     /local/games/nethackdir/hearse.user-token</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PRIVILEGES</h2>
        <div class="sectioncontent">
<p><strong>hearse</strong> needs to run with permissions like those used by Nethack itself, so that it can read and write the bones files.  It should not be made set-uid or set-gid, though; it hasn't been audited for that.</p><p>The default configuration will try to set both the user and group ids to \*(C`games\*(C'.  Nethack itself will generally only be set-id to either one or the other, but using both hurts nothing and allows <strong>hearse</strong> to run as-is on more systems.  This will only work if you run <strong>hearse</strong> as root.</p><p>If you want to disable <strong>hearse</strong>'s id setting and take care of it externally you can use the <strong>--run-as-me</strong> switch to turn it off, or the <strong>--run-as-user</strong> and <strong>--run-as-group</strong> switches for finer grained control.  Specify &apos;&apos; or \*(C`-\*(C' for either of the latter to disable just that thing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RUNNING FROM CRON</h2>
        <div class="sectioncontent">
<p>If you're using the pre-packaged <em>.deb</em> or <em>.rpm</em> version of <strong>hearse</strong>, the program is already set up to run automatically (both daily and when you connect to the Internet).  You don't have to do anything unless you want to change this behavior.  If you're installing <strong>hearse</strong> by hand, read on.</p><p>The normal way to use the program is to run it from cron, either daily or on whatever schedule you like.  (There's no harm in running it often, if it doesn't find any new bones files it doesn't even contact the server.) If letting it manage its own permissions, you'd just run it as root.  Eg, to run it some time in the 3:00 hour, put something like</p><p>    0 3 * * * root perl -we &apos;sleep rand 3600&apos;; hearse --quiet</p><p>in <em>/etc/crontab</em>.  The randomization is to prevent the server from getting hammered at the top of each time zone's 3:00 hour.</p><p>If you'd like to see what the server's doing, you can use <strong>--cron</strong> rather than <strong>--quiet</strong>.  This will cause it to output its status message, but only when it actually transfers a bones file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RUNNING FOR MULTIPLE NETHACK VARIANTS</h2>
        <div class="sectioncontent">
<p>If you use multiple Nethack variants which are supported by the Hearse server, you can run <strong>hearse</strong> for all of them.  The normal way to do this is to run <strong>hearse</strong> once for each variant, specifying the bones directory on the command line</p><p>    # hearse -b /var/games/slashem</p><p>leaving the rest of the configuration settings to be read from the configuration file.  The last upload time is by default stored in the bones directory, so everything just works.</p><p>The Hearse protocol requires that you have only a single concurrent connection for each user account (it decides what kind of bones file to send you based on the kind you most recently uploaded), so <strong>hearse</strong> does locking on the user token file in order to ensure this.  See the <strong>--lock-file</strong> switch for more info.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>-b</strong>, <strong>--bones-dir</strong> <em>dir</em>
  </dt>
  <dd>
    <p>Specify the bones directory.  By default the program uses the first of <em>/var/games/nethack</em>, <em>/usr/games/lib/nethackdir</em>, and the current directory which contains a file called <em>record</em>.</p>
  </dd>
  <dt>
    <strong>--bones-mode</strong> <em>mode</em>
  </dt>
  <dd>
    <p>Specify the mode for the bones files <strong>hearse</strong> creates.  The default is 660.</p>
  </dd>
  <dt>
    <strong>-c</strong>, <strong>--config-file</strong> <em>file</em>
  </dt>
  <dd>
    <p>Specify an alternative configuration file.  The default is <em>/etc/nethack/hearse.conf</em>.</p>
  </dd>
  <dt>
    <strong>--cron</strong>
  </dt>
  <dd>
    <p>Suppress the \*(L"no bones to upload\*(R" message.  This makes it so that there's no output at all when there's nothing to do, but you still see what's going on when bones files are transfered.  This is a nice way to run it from cron if you want to keep an eye on it.</p>
  </dd>
  <dt>
    <strong>--debug</strong>
  </dt>
  <dd>
    <p>Turn debugging on.</p>
  </dd>
  <dt>
    <strong>--delete-uploaded</strong>
  </dt>
  <dd>
    <p>Delete locally generated bones files after uploading them.  Some people might want to do this in order to avoid changing the game's balance. Since the server normally gives you 1 bones file for each one you upload, if you delete your local bones after uploading them you'll end up with the same number of bones you otherwise would have had, but they'll be somebody else's rather than your own.</p>
  </dd>
  <dt>
    <strong>--help</strong>
  </dt>
  <dd>
    <p>Show the usage message and die.</p>
  </dd>
  <dt>
    <strong>--lock-file</strong> <em>file</em>
  </dt>
  <dd>
    <p>The Hearse protocol requires that <strong>hearse</strong> do locking to be sure that only a single connection per user can happen at a time.  It does this by locking the <strong>--user-token-file</strong>.  You should not generally change this, but if you have special requirements (that that file be read only, eg), you can override it with this switch.  Use &apos;&apos; to disable locking (which I do not recommend).</p>
  </dd>
  <dt>
    <strong>-q</strong>, <strong>--quiet</strong>
  </dt>
  <dd>
    <p>Don't output information messages.</p>
  </dd>
  <dt>
    <strong>--run-as-me</strong>
  </dt>
  <dd>
    <p>Turn off both <strong>--run-as-user</strong> and <strong>--run-as-group</strong>.</p>
  </dd>
  <dt>
    <strong>--run-as-user</strong> <em>user</em>
  </dt>
  <dd>
    <p>Use <em>user</em> as the real and effecitve user id, default \*(C`games\*(C'.  You've generally got to be root for this to work.</p>
  </dd>
  <dt>
    <strong>--run-as-group</strong> <em>group</em>
  </dt>
  <dd>
    <p>Use <em>group</em> as the real and effecitve group id, default \*(C`games\*(C'. You've generally got to be root for this to work.</p>
  </dd>
  <dt>
    <strong>--server-url</strong> <em>url</em>
  </dt>
  <dd>
    <p>Specify the \s-1URL\s0 for the server program.  See the source or the <strong>--help</strong> message for the default.</p>
  </dd>
  <dt>
    <strong>--stamp-file</strong> <em>file</em>
  </dt>
  <dd>
    <p><strong>hearse</strong> only tries to upload bones files which were created since the last time it sucessfully talked to the server.  The modification time of the <strong>--stamp-file</strong> (<em>.hearse.timestamp</em> by default) tells it when that was.  This path is taken relative to the <strong>--bones-dir</strong> (unless it's absolute).</p>
  </dd>
  <dt>
    <strong>--user-email</strong> <em>address</em>
  </dt>
  <dd>
    <p>Specify your email address.  You only have to do this the first time you run <strong>hearse</strong>.</p>
  </dd>
  <dt>
    <strong>--user-token</strong> <em>token</em>
  </dt>
  <dd>
    <p>Specify your user token directly.  You won't normally need to do this, as <strong>hearse</strong> requests the token from the server and stores it in the <strong>--user-token-file</strong> for later retrieval.</p>
  </dd>
  <dt>
    <strong>--user-token-file</strong> <em>file</em>
  </dt>
  <dd>
    <p>Specify the file used to store the user token, by default <em>/etc/nethack/hearse.user-token</em>.</p>
  </dd>
  <dt>
    <strong>--version</strong>
  </dt>
  <dd>
    <p>Show the version number and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>The code is licensed under the \s-1GNU\s0 \s-1GPL\s0.  Check &lt;http://www.argon.org/~roderick/hearse/&gt; for updated versions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This Unix client was written by Roderick Schertler &lt;roderick@argon.org&gt;. The Hearse protocol, server, and Windows client were written by Alexis Manning &lt;alexismanning@hotpop.com&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="headache.1.html"><span aria-hidden="true">&larr;</span> headache.1: A program to manage the license of your source file.</a></li>
   <li class="next"><a href="heartbleeder.1.html">heartbleeder.1: Test servers for openssl cve-2014-0160, aka heartbleed <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
