<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>perf_3.16-diff: Read perf.data files and display the differential profile</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Read perf.data files and display the differential profile">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="perf_3.16-diff (1) manual">
  <meta name="twitter:description" content="Read perf.data files and display the differential profile">
  <meta name="twitter:image" content="https://www.carta.tech/images/linux-tools-3.16-perf_3.16-diff-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/perf_3.16-diff.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="perf_3.16-diff (1) manual" />
  <meta property="og:description" content="Read perf.data files and display the differential profile" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/linux-tools-3.16-perf_3.16-diff-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">perf_3.16-diff<small> (1)</small></h1>
        <p class="lead">Read perf.data files and display the differential profile</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/perf_3.16-diff.1.html">
      <span itemprop="name">perf_3.16-diff: Read perf.data files and display the differential profile</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/linux-tools-3.16/">
      <span itemprop="name">linux-tools-3.16</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/perf_3.16-diff.1.html">
      <span itemprop="name">perf_3.16-diff: Read perf.data files and display the differential profile</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<em>perf diff</em> [baseline file] [data file1] [[data file2] ... ]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This command displays the performance difference amongst two or more perf.data files captured via perf record.</p><p>If no parameters are passed it will assume perf.data.old and perf.data.</p><p>The differential profile is displayed only for events matching both specified perf.data files.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>-D, --dump-raw-trace</p><p>Dump raw trace in ASCII.</p><p>-m, --modules</p><p>Load module symbols. WARNING: use only with -k and LIVE kernel</p><p>-d, --dsos=</p><p>Only consider symbols in these dsos. CSV that understands \m[blue]<strong>file://filename</strong>\m[] entries. This option will affect the percentage of the Baseline/Delta column. See --percentage for more info.</p><p>-C, --comms=</p><p>Only consider symbols in these comms. CSV that understands \m[blue]<strong>file://filename</strong>\m[] entries. This option will affect the percentage of the Baseline/Delta column. See --percentage for more info.</p><p>-S, --symbols=</p><p>Only consider these symbols. CSV that understands \m[blue]<strong>file://filename</strong>\m[] entries. This option will affect the percentage of the Baseline/Delta column. See --percentage for more info.</p><p>-s, --sort=</p><p>Sort by key(s): pid, comm, dso, symbol, cpu, parent, srcline. Please see description of --sort in the perf-report man page.</p><p>-t, --field-separator=</p><p>Use a special separator character and don\(cqt pad with spaces, replacing all occurrences of this separator in symbol names (and other output) with a <em>.</em> character, that thus it\(cqs the only non valid separator.</p><p>-v, --verbose</p><p>Be verbose, for instance, show the raw counts in addition to the diff.</p><p>-f, --force</p><p>Don\(cqt complain, do it.</p><p>--symfs=&lt;directory&gt;</p><p>Look for files with symbols relative to this directory.</p><p>-b, --baseline-only</p><p>Show only items with match in baseline.</p><p>-c, --compute</p><p>Differential computation selection - delta,ratio,wdiff (default is delta). See COMPARISON METHODS section for more info.</p><p>-p, --period</p><p>Show period values for both compared hist entries.</p><p>-F, --formula</p><p>Show formula for given computation.</p><p>-o, --order</p><p>Specify compute sorting column number.</p><p>--percentage</p><p>Determine how to display the overhead percentage of filtered entries. Filters can be applied by --comms, --dsos and/or --symbols options.</p>
<pre>
"relative" means it&apos;s relative to filtered entries only so that the
sum of shown entries will be always 100%.  "absolute" means it retains
the original value before and after the filter is applied.
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMPARISON</h2>
        <div class="sectioncontent">
<p>The comparison is governed by the baseline file. The baseline perf.data file is iterated for samples. All other perf.data files specified on the command line are searched for the baseline sample pair. If the pair is found, specified computation is made and result is displayed.</p><p>All samples from non-baseline perf.data files, that do not match any baseline entry, are displayed with empty space within baseline column and possible computation results (delta) in their related column.</p><p>Example files samples: - file A with samples f1, f2, f3, f4, f6 - file B with samples f2, f4, f5 - file C with samples f1, f2, f5</p><p>Example output: x - computation takes place for pair b - baseline sample percentage</p><p>perf diff A B C</p>
<pre>
baseline/A compute/B compute/C  samples
---------------------------------------
b                    x          f1
b          x         x          f2
b                               f3
b          x                    f4
b                               f6
           x         x          f5
</pre>
<p>perf diff B A C</p>
<pre>
baseline/B compute/A compute/C  samples
---------------------------------------
b          x         x          f2
b          x                    f4
b                    x          f5
           x         x          f1
           x                    f3
           x                    f6
</pre>
<p>perf diff C B A</p>
<pre>
baseline/C compute/B compute/A  samples
---------------------------------------
b                    x          f1
b          x         x          f2
b          x                    f5
                     x          f3
           x         x          f4
                     x          f6
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMPARISON METHODS</h2>
        <div class="sectioncontent">
<h3>delta</h3>
<p>If specified the <em>Delta</em> column is displayed with value <em>d</em> computed as:</p>
<pre>
d = A-&gt;period_percent - B-&gt;period_percent
</pre>
<p>with: - A/B being matching hist entry from data/baseline file specified (or perf.data/perf.data.old) respectively.</p><p>period_percent being the % of the hist entry period value within single data file</p><p>with filtering by -C, -d and/or -S, period_percent might be changed relative to how entries are filtered. Use --percentage=absolute to prevent such fluctuation.</p>
<h3>ratio</h3>
<p>If specified the <em>Ratio</em> column is displayed with value <em>r</em> computed as:</p>
<pre>
r = A-&gt;period / B-&gt;period
</pre>
<p>with: - A/B being matching hist entry from data/baseline file specified (or perf.data/perf.data.old) respectively.</p><p>period being the hist entry period value</p>
<h3>wdiff:WEIGHT-B,WEIGHT-A</h3>
<p>If specified the <em>Weighted diff</em> column is displayed with value <em>d</em> computed as:</p>
<pre>
d = B-&gt;period * WEIGHT-A - A-&gt;period * WEIGHT-B
</pre>
<p>A/B being matching hist entry from data/baseline file specified (or perf.data/perf.data.old) respectively.</p><p>period being the hist entry period value</p><p>WEIGHT-A/WEIGHT-B being user suplied weights in the the <em>-c</em> option behind <em>:</em> separator like <em>-c wdiff:1,2</em>.</p><p>WIEGHT-A being the weight of the data file</p><p>WIEGHT-B being the weight of the baseline data file</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO perf_3.16-diff&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/perf_3.16-record.1.html"><strong>perf_3.16-record</strong>(1)</a>, <a href="../man1/perf_3.16-report.1.html"><strong>perf_3.16-report</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="perf_3.16-buildid-list.1.html"><span aria-hidden="true">&larr;</span> perf_3.16-buildid-list.1: List the buildids in a perf.data file</a></li>
   <li class="next"><a href="perf_3.16-evlist.1.html">perf_3.16-evlist.1: List the event names in a perf.data file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
