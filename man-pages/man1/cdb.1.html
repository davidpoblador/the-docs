<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cdb: Constant database manipulation tool</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Constant database manipulation tool">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="cdb (1) manual">
  <meta name="twitter:description" content="Constant database manipulation tool">
  <meta name="twitter:image" content="https://www.carta.tech/images/tinycdb-cdb-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/cdb.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="cdb (1) manual" />
  <meta property="og:description" content="Constant database manipulation tool" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/tinycdb-cdb-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">cdb<small> (1)</small></h1>
        <p class="lead">Constant database manipulation tool</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cdb.1.html">
      <span itemprop="name">cdb: Constant database manipulation tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/tinycdb/">
      <span itemprop="name">tinycdb</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cdb.1.html">
      <span itemprop="name">cdb: Constant database manipulation tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSYS</h2>
        <div class="sectioncontent">
<p><strong>cdb</strong> -q [-m] [-n <em>num</em>] <em>dbname</em> <em>key</em></p><p><strong>cdb</strong> -d [-m] [<em>dbname</em>|-]</p><p><strong>cdb</strong> -l [-m] [<em>dbname</em>|-]</p><p><strong>cdb</strong> -s [<em>dbname</em>|-]</p><p><strong>cdb</strong> -c [-m] [-t <em>tmpname</em>|-] [-p <em>perms</em>] [-weru0] <em>dbname</em> [<em>infile</em>...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>cdb</strong> used to query, dump, list, analyze or create CDB (Constant DataBase) files.  Format of cdb described in <a href="../man5/cdb.5.html"><strong>cdb</strong>(5)</a> manpage. This manual page corresponds to version <strong>0.78</strong> of <strong>tinycdb</strong> package.</p><h3>Query</h3>
<p><strong>cdb -q</strong> finds given <em>key</em> in a given <em>dbname</em> cdb file, and writes associated value to standard output if found (and exits with zero), or exits with non-zero if not found.  <em>dbname</em> must be seekable file, and stdin can not be used as input. By default, <strong>cdb</strong> will print <em>all</em> records found. Options recognized in query mode:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>-n</strong><em>num</em>
  </dt>
  <dd>
    <p>causes <strong>cdb</strong> to find and write a record with a given number <em>num</em> starting with 1 &ndash; when there are many records with a given key.</p>
  </dd>
  <dt>
    <strong>-m</strong>
  </dt>
  <dd>
    <p>newline will be added after every value printed.  By default, multiple values will be written without any delimiter.</p>
  </dd>

</dl>

<h3>Dump/List</h3>
<p><strong>cdb -d</strong> dumps contents, and <strong>cdb -l</strong> lists keys of <em>cdbfile</em> (or standard input if not specified) to standard output, in format controlled by presence of <strong>-m</strong> option. See subsection "Formats" below.  Output from <strong>cdb -d</strong> can be used as an input for <strong>cdb -c</strong>.</p>
<h3>Create</h3>
<p>Cdb database created in two stages: temporary database is created, and after it is complete, it gets atomically renamed to permanent place.  This avoids requirements for locking between readers and writers (or creaters).  <strong>cdb -c</strong> will attempt to create cdb in file <em>tmpname</em> (or <em>dbname</em> with ".tmp" appended if no -t option given) and then rename it to <em>dbname</em>.  It will read supplied <em>infile</em>s (or standard input if none specified). Options recognized in create mode:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>-t </strong><em>tmpname</em>
  </dt>
  <dd>
    <p>use given <em>tmpname</em> as temporary file.  Defaults to <em>dbname</em>.tmp (i.e. with output file with .tmp added). Note <em>tmpname</em> must be in the same filesystem as output file, as <strong>cdb</strong> uses <a href="../man2/rename.2.html"><strong>rename</strong>(2)</a> to finalize the database creation procedure. If <em>tmpname</em> is a single dash (-), no temp file will be created, database will be built in-place.  This mode is useful when the final renaming is done by the caller.</p>
  </dd>
  <dt>
    <strong>-p </strong><em>perms</em>
  </dt>
  <dd>
    <p>permissions for the newly created file (usually an octal number, like 0644). By default the permissions are 0666 (with current process umask applied). If this option is specified, current umask value has no effect.</p>
  </dd>
  <dt>
    <strong>-w</strong>
  </dt>
  <dd>
    <p>warn about duplicate keys.</p>
  </dd>
  <dt>
    <strong>-e</strong>
  </dt>
  <dd>
    <p>abort on duplicate keys (implies -w).</p>
  </dd>
  <dt>
    <strong>-r</strong>
  </dt>
  <dd>
    <p>replace existing key with new one in case of duplicate. This may require database file rewrite to remove old records, and can be slow.</p>
  </dd>
  <dt>
    <strong>-0</strong>
  </dt>
  <dd>
    <p>zero-fill existing records when duplicate records are added.  This is faster than <strong>-r</strong>, but leaves extra zeros in the database file in case of duplicates.</p>
  </dd>
  <dt>
    <strong>-u</strong>
  </dt>
  <dd>
    <p>do not add duplicate records.</p>
  </dd>
  <dt>
    <strong>-m</strong>
  </dt>
  <dd>
    <p>interpret input as a sequence of lines, one record per line, with value separated from a key by space or tab characters, instead of native cdb format (see "Input/Output Format" below).</p>
  </dd>

</dl>
<p>Note that using any option that requires duplicate checking will slow creation process <em>significantly</em>, especially for large databases.</p>
<h3>Statistics</h3>
<p><strong>cdb -s</strong> will analyze <em>dbfile</em> and print summary to standard output.  Statistics include: total number of rows in a file, minimum, average and maximum key and value lengths, hash tables (max 256) and entries used, number of hash collisions (that is, more than one key point to the same hash table entry), minimum, average and maximum hash table size (of non-empty tables), and number of keys that sits at 10 different distances from it's calculated hash table index &ndash; keys in distance 0 requires only one hash table lookup, 1 &ndash; two and so on; more keys at greater distance means slower database search.</p>
<h3>Input/Output Format</h3>
<p>By default, <strong>cdb</strong> expects (for create operation) or writes (for dump/list) native cdb format data.  Cdb native format is a sequence of records in a form:</p>
<pre>
    +<em>klen</em>,<em>vlen</em>:<em>key</em>-&gt;<em>val</em>&#92;n
</pre>
<p>where "+", ",", ":", "-", "&gt;" and "&#92;n" (newline) are literal characters, <em>klen</em> and <em>vlen</em> are length of key and value as decimal numbers, and <em>key</em> and <em>val</em> are key and value themselves.  Series of records terminated by an empty line.  This is the only format where key and value may contain any character including newline, zero (&#92;0) and so on.</p><p>When <strong>-l</strong> option requested (list keys mode), <strong>cdb</strong> will produce slightly modified output in a form:</p>
<pre>
    +<em>klen</em>:<em>key</em>&#92;n
</pre>
<p>(note <em>vlen</em> and <em>val</em> are omitted, together with surrounding delimiters).</p><p>If <strong>-m</strong> option is given, <strong>cdb</strong> will expect or produce one line for every record (newline is a record delimiter), and every line should contain optional whitespace, key, whitespace and value up to end of line. Lines started with hash character (#) and empty lines are ignored. This is the same format as <strong>mkmap</strong>(1) utility expects.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS SUMMARY</h2>
        <div class="sectioncontent">
<p>Here is a short summary of all options accepted by <strong>cdb</strong> utility:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>-0</strong>
  </dt>
  <dd>
    <p>zero-fill duplicate records in create (<strong>-c</strong>) mode.</p>
  </dd>
  <dt>
    <strong>-c</strong>
  </dt>
  <dd>
    <p>create mode.</p>
  </dd>
  <dt>
    <strong>-d</strong>
  </dt>
  <dd>
    <p>dump mode.</p>
  </dd>
  <dt>
    <strong>-e</strong>
  </dt>
  <dd>
    <p>abort (error) on duplicate key in create (<strong>-c</strong>) mode.</p>
  </dd>
  <dt>
    <strong>-h</strong>
  </dt>
  <dd>
    <p>print short help and exit.</p>
  </dd>
  <dt>
    <strong>-l</strong>
  </dt>
  <dd>
    <p>list mode.</p>
  </dd>
  <dt>
    <strong>-m</strong>
  </dt>
  <dd>
    <p>input or output is in "map" format, not in native cdb format.  In query mode, add a newline after every value written.</p>
  </dd>
  <dt>
    <strong>-n</strong><em>num</em>
  </dt>
  <dd>
    <p>find and print <em>num</em>th record in query (<strong>-q</strong>) mode.</p>
  </dd>
  <dt>
    <strong>-q</strong>
  </dt>
  <dd>
    <p>query mode.</p>
  </dd>
  <dt>
    <strong>-r</strong>
  </dt>
  <dd>
    <p>replace duplicate keys in create (<strong>-c</strong>) mode.</p>
  </dd>
  <dt>
    <strong>-s</strong>
  </dt>
  <dd>
    <p>statistics mode.</p>
  </dd>
  <dt>
    <strong>-t</strong> <em>tempfile</em>
  </dt>
  <dd>
    <p>specify temporary file when creating (<strong>-c</strong>) cdb file (use single dash (-) as <em>tempfile</em> to stop using temp file).</p>
  </dd>
  <dt>
    <strong>-u</strong>
  </dt>
  <dd>
    <p>do not insert duplicate keys (unique) in create (<strong>-c</strong>) mode.</p>
  </dd>
  <dt>
    <strong>-w</strong>
  </dt>
  <dd>
    <p>warn about duplicate keys in create (<strong>-c</strong>) mode.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The <strong>tinycdb</strong> package written by Michael Tokarev &lt;mjt@corpit.ru&gt;, based on ideas and shares file format with original cdb library by Dan Bernstein.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO cdb&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/cdb.5.html"><strong>cdb</strong>(5)</a>, <a href="../man3/cdb.3.html"><strong>cdb</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENCE</h2>
        <div class="sectioncontent">
<p>Public domain.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="cdargs.1.html"><span aria-hidden="true">&larr;</span> cdargs.1: Bookmarks and browser for cd shell built-in</a></li>
   <li class="next"><a href="cdbackup.1.html">cdbackup.1: Streaming backup to cd-r(w)/dvr-r(w) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
