<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cback: Local and remote backups to cd-r/cd-rw media</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Local and remote backups to cd-r/cd-rw media">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="cback (1) manual">
  <meta name="twitter:description" content="Local and remote backups to cd-r/cd-rw media">
  <meta name="twitter:image" content="https://www.carta.tech/images/cedar-backup2-cback-1.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man1/cback.1.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="cback (1) manual" />
  <meta property="og:description" content="Local and remote backups to cd-r/cd-rw media" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cedar-backup2-cback-1.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">cback<small> (1)</small></h1>
        <p class="lead">Local and remote backups to cd-r/cd-rw media</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/">
      <span itemprop="name">Executable programs or shell commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cback.1.html">
      <span itemprop="name">cback: Local and remote backups to cd-r/cd-rw media</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cedar-backup2/">
      <span itemprop="name">cedar-backup2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man1/cback.1.html">
      <span itemprop="name">cback: Local and remote backups to cd-r/cd-rw media</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>cback</strong> [<em>switches</em>] action(s)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The cback script provides the command-line interface for Cedar Backup. Cedar Backup is a software package designed to manage system backups for a pool of local and remote machines.  Cedar Backup understands how to back up filesystem data as well as MySQL and PostgreSQL databases and Subversion repositories.  It can also be easily extended to support other kinds of data sources.</p><p>Cedar Backup is focused around weekly backups to a single CD or DVD disc, with the expectation that the disc will be changed or overwritten at the beginning of each week.  If your hardware is new enough, Cedar Backup can write multisession discs, allowing you to add incremental data to a disc on a daily basis.</p><p>There are two kinds of machines in a Cedar Backup pool.  One machine (the <em>master</em>) has a CD-R or CD-RW drive on it and is where the backup is written to disc.  The others (<em>clients</em>) collect data to be written to disc by the master.  Collectively, the master and client machines in a pool are all referred to as <em>peer</em> machines.  There are four actions that take place as part of the backup process: <em>collect</em>, <em>stage</em>, <em>store</em> and <em>purge</em>.  Both the master and the clients execute the collect and purge actions, but only the master executes the stage and store actions.  The configuration file <em>/etc/cback.conf</em> controls the actions taken during collect, stage, store and purge actions.</p><p>Cedar Backup also supports the concept of <em>managed clients</em>.  Managed clients have their entire backup process managed by the master via a remote shell.  The same actions are run as part of the backup process, but the master controls when the actions are executed on the clients rather than the clients controlling it for themselves.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SWITCHES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Display usage/help listing.</p>
  </dd>
  <dt>
    <p><strong>-V</strong>, <strong>--version</strong></p>
  </dt>
  <dd>
    <p>Display version information.</p>
  </dd>
  <dt>
    <p><strong>-b</strong>, <strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>Print verbose output to the screen as well writing to the logfile. When this option is enabled, most information that would normally be written to the logfile will also be written to the screen.</p>
  </dd>
  <dt>
    <p><strong>-q</strong>, <strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>Run quietly (display no output to the screen).</p>
  </dd>
  <dt>
    <p><strong>-c</strong>, <strong>--config</strong></p>
  </dt>
  <dd>
    <p>Specify the path to an alternate configuration file.  The default configuration file is /etc/cback.conf.</p>
  </dd>
  <dt>
    <p><strong>-f</strong>, <strong>--full</strong></p>
  </dt>
  <dd>
    <p>Perform a full backup, regardless of configuration.  For the collect action, this means that any existing information related to incremental backups will be ignored and rewritten; for the store action, this means that a new disc will be started.</p>
  </dd>
  <dt>
    <p><strong>-M</strong>, <strong>--managed</strong></p>
  </dt>
  <dd>
    <p>Include managed clients when executing actions.  If the action being executed is listed as a managed action for a managed client, execute the action on that client after executing the action locally.</p>
  </dd>
  <dt>
    <p><strong>-N</strong>, <strong>--managed-only</strong></p>
  </dt>
  <dd>
    <p>Include only managed clients when executing actions.  If the action being executed is listed as a managed action for a managed client, execute the action on that client, but do not execute the action locally.</p>
  </dd>
  <dt>
    <p><strong>-l</strong>, <strong>--logfile</strong></p>
  </dt>
  <dd>
    <p>Specify the path to an alternate logfile.  The default logfile file is /var/log/cback.log.</p>
  </dd>
  <dt>
    <p><strong>-o</strong>, <strong>--owner</strong></p>
  </dt>
  <dd>
    <p>Specify the ownership of the logfile, in the form user:group.  The default ownership is root:adm, to match the Debian standard for most logfiles.  This value will only be used when creating a new logfile.  If the logfile already exists when the cback script is executed, it will retain its existing ownership and mode.  Only user and group names may be used, not numeric uid and gid values.</p>
  </dd>
  <dt>
    <p><strong>-m</strong>, <strong>--mode</strong></p>
  </dt>
  <dd>
    <p>Specify the permissions for the logfile, using the numeric mode as in <a href="../man1/chmod.1.html"><strong>chmod</strong>(1)</a>. The default mode is 640 (-rw-r-----).  This value will only be used when creating a new logfile.  If the logfile already exists when the cback script is executed, it will retain its existing ownership and mode.</p>
  </dd>
  <dt>
    <p><strong>-O</strong>, <strong>--output</strong></p>
  </dt>
  <dd>
    <p>Record some sub-command output to the logfile. When this option is enabled, all output from system commands will be logged. This might be useful for debugging or just for reference. Cedar Backup uses system commands mostly for dealing with the CD recorder and its media.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--debug</strong></p>
  </dt>
  <dd>
    <p>Write debugging information to the logfile. This option produces a high volume of output, and would generally only be needed when debugging a problem. This option implies the --output option, as well.</p>
  </dd>
  <dt>
    <p><strong>-s</strong>, <strong>--stack</strong></p>
  </dt>
  <dd>
    <p>Dump a Python stack trace instead of swallowing exceptions.  This forces Cedar Backup to dump the entire Python stack trace associated with an error, rather than just progating last message it received back up to the user interface. Under some circumstances, this is useful information to include along with a bug report.</p>
  </dd>
  <dt>
    <p><strong>-D</strong>, <strong>--diagnostics</strong></p>
  </dt>
  <dd>
    <p>Display runtime diagnostic information and then exit.  This diagnostic information is often useful when filing a bug report.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>all</strong></p>
  </dt>
  <dd>
    <p>Take all normal actions (collect, stage, store, purge), in that order.</p>
  </dd>
  <dt>
    <p><strong>collect</strong></p>
  </dt>
  <dd>
    <p>Take the collect action, creating tarfiles for each directory specified in the collect section of the configuration file.</p>
  </dd>
  <dt>
    <p><strong>stage</strong></p>
  </dt>
  <dd>
    <p>Take the stage action, copying tarfiles from each peer in the backup pool to the daily staging directory, based on the stage section of the configuration file.</p>
  </dd>
  <dt>
    <p><strong>store</strong></p>
  </dt>
  <dd>
    <p>Take the store action, writing the daily staging directory to disc based on the store section of the configuration file.</p>
  </dd>
  <dt>
    <p><strong>purge</strong></p>
  </dt>
  <dd>
    <p>Take the purge action, removing old and outdated files as specified in the purge section of the configuration file.</p>
  </dd>
  <dt>
    <p><strong>rebuild</strong></p>
  </dt>
  <dd>
    <p>Rebuild the "this week's" disc based on the current contents of the staging directory.  This option has been made available as a means to recover a disc that has been "trashed" due to a hardware or media error.</p>
  </dd>
  <dt>
    <p><strong>validate</strong></p>
  </dt>
  <dd>
    <p>Ensure that configuration is valid, but take no other action.  Validation checks that the configuration file can be found and can be parsed, and also checks for typical configuration problems, such as directories that are not writable or problems with the target SCSI device.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p>Cedar Backup returns 0 (zero) upon normal completion, and six other error codes related to particular errors.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>1</strong></p>
  </dt>
  <dd>
    <p>The Python interpreter version is &lt; 2.5.</p>
  </dd>
  <dt>
    <p><strong>2</strong></p>
  </dt>
  <dd>
    <p>Error processing command-line arguments.</p>
  </dd>
  <dt>
    <p><strong>3</strong></p>
  </dt>
  <dd>
    <p>Error configuring logging.</p>
  </dd>
  <dt>
    <p><strong>4</strong></p>
  </dt>
  <dd>
    <p>Error parsing indicated configuration file.</p>
  </dd>
  <dt>
    <p><strong>5</strong></p>
  </dt>
  <dd>
    <p>Backup was interrupted with a CTRL-C or similar.</p>
  </dd>
  <dt>
    <p><strong>6</strong></p>
  </dt>
  <dd>
    <p>Error executing specified backup actions.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The script is designed to run as root, since otherwise it's difficult to back up system directories or write the CD or DVD device.  However, pains are taken to switch to a backup user (specified in configuration) when appropriate.</p><p>To use the script, you must specify at least one action to take.  More than one of the "collect", "stage", "store" or "purge" actions may be specified, in any arbitrary order.  The "all", "rebuild" or "validate" actions may not be combined with other actions.  If more than one action is specified, then actions will be taken in a sensible order (generally collect, followed by stage, followed by store, followed by purge).</p><p>If you have configured any Cedar Backup extensions, then the actions associated with those extensions may also be specified on the command line. If you specify any other actions along with an extended action, the actions will be executed in a sensible order per configuration. The "all" action never executes extended actions, however.</p><p>Note that there is no facility for restoring backups.  It is assumed that the user can deal with copying tarfiles off disc and using them to restore missing files as needed.  The user manual provides detailed intructions in Appendix C.</p><p>Finally, you should be aware that backups to CD or DVD can probably be read by any user which has permissions to mount the CD or DVD drive.  If you intend to leave the backup disc in the drive at all times, you may want to consider this when setting up device permissions on your machine.  You might also want to investigate the encrypt extension.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/cback.conf</em> - Default configuration file</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>/var/log/cback.log</em> - Default log file</p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>There probably are bugs in this code.  However, it is in active use for my own backups, and I fix problems as I notice them.  If you find a bug, please report it.  If possible, give me the output from --diagnostics, all of the error messages that the script printed into its log, and also any stack-traces (exceptions) that Python printed.  It would be even better if you could tell me how to reproduce the problem (i.e. by sending me your configuration file).</p><p>Report bugs to &lt;support@cedar-solutions.com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Kenneth J. Pronovici &lt;pronovic@ieee.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2004-2010 Kenneth J. Pronovici.</p><p>This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="cb2ti3.1.html"><span aria-hidden="true">&larr;</span> cb2ti3.1: Convert colorblind raw device profile data to argyll data.</a></li>
   <li class="next"><a href="cback-amazons3-sync.1.html">cback-amazons3-sync.1: Synchronize a local directory with an amazon s3 bucket <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
