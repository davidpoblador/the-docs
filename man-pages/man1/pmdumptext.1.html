<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmdumptext - dump performance metrics to an ASCII table</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Dump performance metrics to an ascii table">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmdumptext<small> (1)</small></h1>
        <p class="lead">Dump performance metrics to an ascii table</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man1/"><span itemprop="title">Executable programs or shell commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man1/pmdumptext.1.html"><span itemprop="title">pmdumptext</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p>\f3pmdumptext\f1 [\f3-CFGHilmMNoruXz\f1] [\f3-A\f1 \f2align\f1] [\f3-a\f1 \f2archive\f1[\f3,\f2archive\f3,\f1...]] [\f3-c\f1 \f2config\f1] [\f3-d\f1 \f2delimiter\f1] [\f3-f\f1 \f2format\f1] [\f3-h\f1 \f2host\f1] [\f3-n\f1 \f2pmnsfile\f1] [\f3-O\f1 \f2offset\f1] [\f3-P\f1 \f2precision\f1] [\f3-R\f1 \f2lines\f1] [\f3-s\f1 \f2sample\f1] [\f3-S\f1 \f2starttime\f1] [\f3-t\f1 \f2interval\f1] [\f3-T\f1 \f2endtime\f1] [\f3-U\f1 \f2string\f1] [\f3-w\f1 \f2width\f1] [\f3-Z\f1 \f2timezone\f1] [\f2metric \f1...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>pmdumptext</strong> outputs the values of performance metrics collected live or from a set of Performance Co-Pilot (PCP) archives. By default, the metric values are displayed in tab separated columns, prefixed by a timestamp.</p>
<p class='spacer'>

<p>Unless directed to another host by the <strong>-h</strong> option, or to one or more sets of archives by the <strong>-a</strong> option, <strong>pmdumptext</strong> will contact <strong>pmcd</strong>(1) on the local host to obtain the required information.</p>
<p class='spacer'>

<p><strong>pmdumptext</strong> may be run in interactive mode with the <strong>-i</strong> option which displays the values in equal width columns.  Without this option, no attempt is made to line up any values allowing the output to be easily parsed by other applications.</p>
<p class='spacer'>

<p>The format of the output can be further controlled by changing the precision of the values with <strong>-P</strong>, the width of the columns with <strong>-w</strong>, and the format of the values with the <strong>-G</strong> and <strong>-F</strong> options for the shortest of scientific or fixed digits, and a fixed width format, respectively.</p>
<p class='spacer'>

<p>The <em>metrics</em> to be dumped can be listed on the command line, in a <em>config</em> file, or piped to <strong>pmdumptext</strong> on <em>stdin</em>. A metric consists of an optional source (host or archive), the metric name, and an optional instance list immediately after the name.  A colon is used to separate a host name from the metric, and a forward slash (``/'') to separate an archive name from the metric.  Instances are enclosed in square brackets and a comma is used between each instance if more than one is stated. For example, some legal metrics are:</p>
<p class='spacer'>

<pre>kernel.all.cpu.idle
myhost:kernel.all.cpu.idle[cpu0,cpu3]
/path/to/myarchive/kernel.all.cpu.idle[cpu1]</pre>

<p class='spacer'>

<p>The format of a metric is further described in <strong>PCPIntro</strong>(1). A normalization value may optionally follow a metric name in a <em>config</em> file or on <em>stdin</em>. The metric value will be scaled by this value.  For example, if the file system ``/dev/root'' has a capacity of 1965437 bytes, then the percentage of the file system that is used could be dumped with this <em>config</em>:</p>
<p class='spacer'>

<pre>filesys.used[/dev/root] 19654.37</pre>

<p class='spacer'>

<p>A normalization value may not be used with <em>metrics</em> specified as command line arguments.</p>
<p class='spacer'>

<p>A metric name is not required to be a leaf node in the Performance Metrics Name Space (PMNS), except when one or more instances are specified. For example, to dump all file system metrics, only <em>filesys</em> is required to dump <em>filesys.capacity</em>, <em>filesys.used</em>, <em>filesys.free</em> etc.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND LINE OPTIONS</h2>
        <div class="sectioncontent">

<p>The command line options <strong>-A</strong>, <strong>-O</strong>, <strong>-S</strong> and <strong>-T</strong> control the alignment, offset, start and end time when visualizing metrics from archives.  These options are common to most Performance Co-Pilot tools and are fully described in <strong>PCPIntro</strong>(1).</p>
<p class='spacer'>

<p>The other available options are:</p>
<p class='spacer'>

  <dl class='dl-horizontal'>
    <dt>f3-af1</dt>
    <dd>
  <p>Specify a set of <em>archive</em> from which metrics can be obtained for a particular host. <em>archive</em> is the name of a directory containing archives, or the basename of an archive, previously created by <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a>. Multiple sets of archives (separated by commas or in different \f3-a\f1 options) from different hosts may be given, but only one set of archives per host is permitted.  Any metrics that are not associated with a specific host or archive will use the first archive as their source.</p>
    </dd>
    <dt>f3-Cf1</dt>
    <dd>
  <p>Exit before dumping any values, but after parsing the metrics.  Metrics, instances, normals and units are listed if <strong>-m</strong>, <strong>-l</strong>, <strong>-N</strong> and/or <strong>-u</strong> are specified.</p>
    </dd>
    <dt>f3-cf1</dt>
    <dd>
  <p>If no <em>metrics</em> are listed on the command line, a <em>config</em> file can be used to specify the <em>metrics</em> to be dumped. Unlike the command line <em>metrics</em>, each metric may be followed by a normalization value.  Empty lines and lines that begin with ``#'' are ignored.</p>
    </dd>
    <dt>f3-df1</dt>
    <dd>
  <p>Specify the <em>delimiter</em> that separates each column of output.  The <em>delimiter</em> may only be a single character.</p>
    </dd>
    <dt>f3-ff1</dt>
    <dd>
  <p>Use the <em>format</em> string for formatting the timestamp with each set of values.  The syntax of this string is the same as that described in <a href="../man3/strftime.3.html"><strong>strftime</strong>(3)</a>. An empty <em>format</em> string (eg. '') will remove the timestamps from the output.</p>
    </dd>
    <dt>f3-Ff1</dt>
    <dd>
  <p>Output the values in a fixed width format of 6 characters.  Positive numbers are represented as \f2dd\f1.\f2dd\f3u\f1 and negative numbers as \f3[\f1-\f3]\f2d\f1.\f2dd\f3u\f1.  The postfix multiplier may have the values <strong>K</strong>(10^3), <strong>M</strong>(10^6), <strong>G</strong>(10^9) and <strong>T</strong>(10^12). For example, 4567 would be displayed as 4.57K, even if the units of the metric are bytes.</p>
    </dd>
    <dt>f3-Gf1</dt>
    <dd>
  <p>Output the values using the shortest of a scientific format or a decimal notation.</p>
    </dd>
    <dt>f3-hf1</dt>
    <dd>
  <p>Fetch performance metrics from <strong>pmcd</strong>(1) on <em>host</em>, rather than the default localhost.</p>
    </dd>
    <dt>f3-Hf1</dt>
    <dd>
  <p>Show all headers before dumping any metric values.  This is equivalent to <strong>-lmNu</strong>.</p>
    </dd>
    <dt>f3-if1</dt>
    <dd>
  <p>Output the data in fixed width columns using fixed width values (see <strong>-F</strong>) so that it is human-readable.  This option may not be used with <strong>-P</strong> as fixed point values are not fixed width.  This option will also affect the output of <strong>-m</strong> and <strong>-u</strong> options as the metric, instance and unit names will be truncated.</p>
    </dd>
    <dt>f3-lf1</dt>
    <dd>
  <p>Show the source of the metrics.  In interactive mode, the host of the metrics is shown.  In non-interactive mode, this option shows the source of the metrics with the metric name even if <strong>-m</strong> is not specified.</p>
    </dd>
    <dt>f3-mf1</dt>
    <dd>
  <p>Output the metric names before the metric values.  The source and units of the metrics may also be dumped with the \f3-l\f1 and \f3-u\f1 options respectively.  If in interactive mode, the metrics names may be truncated, and the instance names, where relevant, are also truncated on the follow line.</p>
    </dd>
    <dt>f3-Mf1</dt>
    <dd>
  <p>Output the column number and complete metric names before dumping any values. If the <strong>-l</strong> flag is also specified, the source of the metrics is also shown.</p>
    </dd>
    <dt>f3-nf1</dt>
    <dd>
  <p>Load an alternative local PMNS from the file <em>pmnsfile.</em></p>
    </dd>
    <dt>f3-of1</dt>
    <dd>
  <p>When a timestamp is being reported (ie. unless an empty format string is given with the <strong>-f</strong> option), the timestamp is prefixed with the offset in seconds from the start of the set of archives or the beginning of the execution of <strong>pmdumptext</strong>.</p>
    </dd>
    <dt>f3-Nf1</dt>
    <dd>
  <p>Output the normalization factors before the metric values.</p>
    </dd>
    <dt>f3-Pf1</dt>
    <dd>
  <p>Set the <em>precision</em> of the values.  This option may not be used with <strong>-F</strong> as the precision is constant.  The default precision is 3.</p>
    </dd>
    <dt>f3-rf1</dt>
    <dd>
  <p>Output the raw metric values, do not convert counters to rates.  This option also causes <strong>pmdumptext</strong> to ignore the normalization values for each metric.</p>
    </dd>
    <dt>f3-Rf1</dt>
    <dd>
  <p>Repeat the header every <em>lines</em> of output.  This option is useful in interactive mode when using a graphical window to avoid the header scrolling beyond the window's buffer, and to realign the header if the window is resized.</p>
    </dd>
    <dt>f3-sf1</dt>
    <dd>
  <p><strong>pmdumptext</strong> will terminate after this many samples.</p>
    </dd>
    <dt>f3-tf1</dt>
    <dd>
  <p>The <em>interval</em> argument follows the syntax described in <strong>PCPIntro</strong>(1), and in the simplest form may be an unsigned integer (the implied units in this case are seconds). The default interval is 1.0 seconds.</p>
    </dd>
    <dt>f3-uf1</dt>
    <dd>
  <p>Output the units of the metrics before the first values, but after the metric names if \f3-m\f1 is also specified.</p>
    </dd>
    <dt>f3-Uf1</dt>
    <dd>
  <p>Change the output when values are unavailable to <em>string</em>. The default string is ``?''.</p>
    </dd>
    <dt>f3-wf1</dt>
    <dd>
  <p>Set the column width of the output.  Strings will be truncated to this width, and maybe postfixed by ``...'' if the <em>width</em> is greater than 5.</p>
    </dd>
    <dt>f3-Xf1</dt>
    <dd>
  <p>Output the column number and complete metric names, one-per-line, both before dumping the first set of values and again each time the header is repeated.</p>
    </dd>
    <dt>f3-zf1</dt>
    <dd>
  <p>Use the local timezone of the host that is the source of the performance metrics, as identified by either the <strong>-h</strong> or the first <strong>-a</strong> options. The default is to use the timezone of the local host.</p>
    </dd>
    <dt>f3-Zf1</dt>
    <dd>
  <p>Use <em>timezone</em> when displaying the date and time. <em>Timezone</em> is in the format of the environment variable <strong>TZ</strong> as described in <a href="../man7/environ.7.html"><strong>environ</strong>(7)</a>.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MULTIPLE SOURCES</h2>
        <div class="sectioncontent">

<p><strong>pmdumptext</strong> supports the dumping of metrics from multiple hosts or set of archives.  The metrics listed on the command line or in the <em>config</em> file may have no specific source or come from different sources.</p>
<p class='spacer'>

<p>However, restrictions apply when archives are specified on the command line (<strong>-a</strong>) and/or in the configuration file.  Firstly, there may be only one set of archives for any one host.  Secondly, the hosts of any metrics with host sources must correspond to the host of a set of archives, either on the command line or previously as the source of another metric.</p>
<p class='spacer'>

<p>The options <strong>-a</strong> and <strong>-h</strong> may not be used together.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UNIT CONVERSION</h2>
        <div class="sectioncontent">

  <p>All metrics that have the semantics of counters are automatically converted to rates over the sample time interval.  In interactive mode, <strong>pmdumptext</strong> will also change the units of some metrics so that they are easier to comprehend:</p>
  <dl class='dl-horizontal'>
    <dt>o</dt>
    <dd>
  <p>All metrics with space units (bytes to terabytes) are scaled to bytes.  Note that 1024 bytes with be represented as 1.02K, not 1.00K.</p>
    </dd>
    <dt>o</dt>
    <dd>
  <p>Metrics that are counters with time units (nanoseconds to hours) represent time utilization over the sample interval.  The unit strings of such metrics is changed to ``Time Utilization'' or abbreviated to ``util'' and the values are normalized to the range zero to one.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<p>o To examine the load on two hosts foo and bar, simultaneously:</p>
<p class='spacer'>

<pre>$ pmdumptext -il 'foo:kernel.all.load[1]' 'bar:kernel.all.load[1]'
             Source        foo     bar
Wed Jul 30 11:37:53      0.309   0.409
Wed Jul 30 11:37:54      0.309   0.409
Wed Jul 30 11:37:55      0.309   0.409</pre>

<p class='spacer'>

<p>o To output the memory utilization on a remote host called bong with a simpler timestamp:</p>
<p class='spacer'>

<pre>$ pmdumptext -imu -h bong -f '%H:%M:%S' mem.util
  Metric        kernel  fs_ctl  _dirty  _clean    free    user
   Units             b       b       b       b       b       b
09:32:28         8.98M   0.97M   0.00    3.90M   7.13M  46.13M
09:32:29         8.99M   0.98M   0.00    5.71M   5.39M  46.03M
09:32:30         8.99M   1.07M   0.00    5.81M   4.55M  46.69M
09:32:31         9.03M   1.16M   0.00    6.45M   3.48M  47.00M
09:32:32         9.09M   1.18M  20.48K   6.23M   3.29M  47.30M</pre>

<p class='spacer'>

<p>o To dump all metrics collected in an archive at a 30 second interval to a file for processing by another tool:</p>
<p class='spacer'>

<pre>$ pminfo -a archive | pmdumptext -t 30s -m -a archive &gt; outfile</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>$PCP_VAR_DIR/pmns/*</strong></dt>
    <dd>
  <p>default PMNS specification files</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PCP ENVIRONMENT</h2>
        <div class="sectioncontent">

<p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <strong>pcp.conf</strong>(5).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>pmchart</strong>(1), <a href="../man1/pmtime.1.html"><strong>pmtime</strong>(1)</a>, <strong>PCPIntro</strong>(1), <strong>pmcd</strong>(1), <a href="../man1/pmlogger.1.html"><strong>pmlogger</strong>(1)</a>, <a href="../man1/pmlogextract.1.html"><strong>pmlogextract</strong>(1)</a>, <a href="../man1/pmrep.1.html"><strong>pmrep</strong>(1)</a>, <strong>pmval</strong>(1), <strong>PMAPI</strong>(3), <a href="../man3/strftime.3.html"><strong>strftime</strong>(3)</a> and <a href="../man7/environ.7.html"><strong>environ</strong>(7)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pmdumplog.1.html"><span aria-hidden="true">&larr;</span> pmdumplog.1: dump internal details of a performance metrics archive log</a></li>
   <li class="next"><a href="pmerr.1.html">pmerr.1: translate Performance Co-Pilot error codes into error messages <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
