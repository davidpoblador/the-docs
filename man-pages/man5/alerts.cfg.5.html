<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>alerts.cfg: Configuration for for xymond_alert module</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration for for xymond_alert module">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="alerts.cfg (5) manual">
  <meta name="twitter:description" content="Configuration for for xymond_alert module">
  <meta name="twitter:image" content="https://www.carta.tech/images/xymon-alerts.cfg-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/alerts.cfg.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="alerts.cfg (5) manual" />
  <meta property="og:description" content="Configuration for for xymond_alert module" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xymon-alerts.cfg-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">alerts.cfg<small> (5)</small></h1>
        <p class="lead">Configuration for for xymond_alert module</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/alerts.cfg.5.html">
      <span itemprop="name">alerts.cfg: Configuration for for xymond_alert module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xymon/">
      <span itemprop="name">xymon</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/alerts.cfg.5.html">
      <span itemprop="name">alerts.cfg: Configuration for for xymond_alert module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>~xymon/server/etc/alerts.cfg</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The alerts.cfg file controls the sending of alerts by Xymon when monitoring detects a failure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE FORMAT</h2>
        <div class="sectioncontent">
<p>The configuration file consists of <strong>rules</strong>, that may have one or more <strong>recipients</strong> associated. A recipient specification may include additional rules that limit the circumstances when this recipient is eligible for receiving an alert.</p><p>Blank lines and lines starting with a hash mark (#) are treated as comments and ignored.  Long lines can be broken up by putting a backslash at the end of the line and continuing the entry on the next line.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RULES</h2>
        <div class="sectioncontent">
<p>A rule consists of one of more filters using these keywords:</p><p><strong>PAGE=targetstring</strong> Rule matching an alert by the name of the page in Xymon. This is the path of the page as defined in the hosts.cfg file. E.g. if you have this setup:</p><ul>
<li>
<pre>
page servers All Servers
subpage web Webservers
10.0.0.1 www1.foo.com
subpage db Database servers
10.0.0.2 db1.foo.com
</pre>
</li>
</ul><p>Then the "All servers" page is found with <strong>PAGE=servers</strong>, the "Webservers" page is <strong>PAGE=servers/web</strong> and the "Database servers" page is <strong>PAGE=servers/db</strong>. Note that you can also use regular expressions to specify the page name, e.g. <strong>PAGE=%.*/db</strong> would find the "Database servers" page regardless of where this page was placed in the hierarchy.</p><p>The PAGE name of top-level page is an empty string. To match this, use <strong>PAGE=%^$</strong> to match the empty string.</p><p><strong>EXPAGE=targetstring</strong> Rule excluding an alert if the pagename matches.</p><p><strong>DISPLAYGROUP=groupstring</strong> Rule matching an alert by the text of the display-group (text following the group, group-only, group-except heading) in the hosts.cfg file. "groupstring" is the text for the group, stripped of any HTML tags. E.g. if you have this setup:</p><ul>
<li>
<pre>
group Web
10.0.0.1 www1.foo.com
10.0.0.2 www2.foo.com
group Production databases
10.0.1.1 db1.foo.com
</pre>
</li>
</ul><p>Then the hosts in the Web-group can be matched with <strong>DISPLAYGROUP=Web</strong>, and the database servers can be matched with <strong>DISPLAYGROUP="Production databases"</strong>. Note that you can also use regular expressions, e.g. <strong>DISPLAYGROUP=%database</strong>. If there is no group-setting for the host, use "DISPLAYGROUP=NONE".</p><p><strong>EXDISPLAYGROUP=groupstring</strong> Rule excluding a group by matching the display-group string.</p><p><strong>HOST=targetstring</strong> Rule matching an alert by the hostname.</p><p><strong>EXHOST=targetstring</strong> Rule excluding an alert by matching the hostname.</p><p><strong>SERVICE=targetstring</strong> Rule matching an alert by the service name.</p><p><strong>EXSERVICE=targetstring</strong> Rule excluding an alert by matching the service name.</p><p><strong>GROUP=groupname</strong> Rule matching an alert by the group name. Groupnames are assigned to a status via the GROUP setting in the analysis.cfg file.</p><p><strong>EXGROUP=groupname</strong> Rule excluding an alert by the group name. Groupnames are assigned to a status via the GROUP setting in the analysis.cfg file.</p><p><strong>CLASS=classname</strong> Rule matching an alert by the class that the host belongs to. By default, the classname is the operating system name; you can set another class either in <a href="../man5/hosts.cfg.5.html"><strong>hosts.cfg</strong>(5)</a></em> using the CLASS tag, or a client running on the server can set the class (via a parameter to the client startup-script).</p><p><strong>EXCLASS=classname</strong> Rule excluding an alert by the class name.</p><p><strong>COLOR=color[,color]</strong> Rule matching an alert by color. Can be "red", "yellow", or "purple". The forms "!red", "!yellow" and "!purple" can also be used to NOT send an alert if the color is the specified one.</p><p><strong>TIME=timespecification</strong> Rule matching an alert by the time-of-day. This is specified as the DOWNTIME timespecification in the hosts.cfg file.</p><p><strong>DURATION&gt;time, DURATION&lt;time</strong> Rule matcing an alert if the event has lasted longer/shorter than the given duration. E.g. DURATION&gt;1h (lasted longer than 1 hour) or DURATION&lt;30 (only sends alerts the first 30 minutes). The duration is specified as a number, optionally followed by 'm' (minutes, default), 'h' (hours) or 'd' (days).</p><p><strong>RECOVERED</strong> Rule matches if the alert has recovered from an alert state.</p><p><strong>NOTICE</strong> Rule matches if the message is a "notify" message. This type of message is sent when a host or test is disabled or enabled.</p><p>The "targetstring" is either a simple pagename, hostname or servicename, OR a '%' followed by a Perl-compatible regular expression. E.g. "HOST=%www(.*)" will match any hostname that begins with "www". The same for the "groupname" setting.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RECIPIENTS</h2>
        <div class="sectioncontent">
<p>The recipients are listed after the initial rule. The following keywords can be used to define recipients:</p><p><strong>MAIL address[,address]</strong> Recipient who receives an e-mail alert. This takes one parameter, the e-mail address. The strings "&host&", "&service&" and "&color&" in an address will be replaced with the hostname, service and color of the alert, respectively.</p><p><strong>SCRIPT /path/to/script recipientID</strong> Recipient that invokes a script. This takes two parameters: The script filename, and the recipient that gets passed to the script. The strings "&host&", "&service&" and "&color&" in the recipientID will be replaced with the hostname, service and color of the alert, respectively.</p><p><strong>IGNORE</strong> This is used to define a recipient that does NOT trigger any alerts, and also terminates the search for more recipients. It is useful if you have a rule that handles most alerts, but there is just that one particular server where you don't want cpu alerts on Monday morning. Note that the IGNORE recipient always has the STOP flag defined, so when the IGNORE recipient is matched, no more recipients will be considered. So the location of this recipient in your set of recipients is important.</p><p><strong>FORMAT=formatstring</strong> Format of the text message with the alert. Default is "TEXT" (suitable for e-mail alerts). "PLAIN" is the same as text, but without the URL link to the status webpage. "SMS" is a short message with no subject for SMS alerts. "SCRIPT" is a brief message template for scripts.</p><p><strong>REPEAT=time</strong> How often an alert gets repeated. As with DURATION, time is a number optionally followed by 'm', 'h' or 'd'.</p><p><strong>UNMATCHED</strong> The alert is sent to this recipient ONLY if no other recipients received an alert for this event.</p><p><strong>STOP</strong> Stop looking for more recipients after this one matches. This is implicit on IGNORE recipients.</p><p><strong>Rules</strong> You can specify rules for a recipient also. This limits the alerts sent to this particular recipient.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MACROS</h2>
        <div class="sectioncontent">
<p>It is possible to use <strong>macros</strong> in the configuration file. To define a macro:</p><p>	$MYMACRO=text extending to end of line</p><p>After the definition of a macro, it can be used throughout the file. Wherever the text $MYMACRO appears, it will be substituted with the text of the macro before any processing of rules and recipients.</p><p>It is possible to nest macros, as long as the macro is defined before it is used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ALERT SCRIPTS</h2>
        <div class="sectioncontent">
<p>Alerts can go out via custom scripts, by using the SCRIPT keyword for a recipient. Such scritps have access to the following environment variables:</p><p><strong>BBALPHAMSG</strong> The full text of the status log triggering the alert</p><p><strong>ACKCODE</strong> The "cookie" that can be used to acknowledge the alert</p><p><strong>RCPT</strong> The recipientID from the SCRIPT entry</p><p><strong>BBHOSTNAME</strong> The name of the host that the alert is about</p><p><strong>MACHIP</strong> The IP-address of the host that has a problem</p><p><strong>BBSVCNAME</strong> The name of the service that the alert is about</p><p><strong>BBSVCNUM</strong> The numeric code for the service. From the SVCCODES definition.</p><p><strong>BBHOSTSVC</strong> HOSTNAME.SERVICE that the alert is about.</p><p><strong>BBHOSTSVCCOMMAS</strong> As BBHOSTSVC, but dots in the hostname replaced with commas</p><p><strong>BBNUMERIC</strong> A 22-digit number made by BBSVCNUM, MACHIP and ACKCODE.</p><p><strong>RECOVERED</strong> Is "0" if the service is alerting, "1" if the service has recovered, "2" if the service was disabled.</p><p><strong>EVENTSTART</strong> Timestamp when the current status (color) began.</p><p><strong>SECS</strong> Number of seconds the service has been down.</p><p><strong>DOWNSECSMSG</strong> When recovered, holds the text "Event duration : N" where N is the DOWNSECS value.</p><p><strong>CFID</strong> Line-number in the alerts.cfg file that caused the script to be invoked. Can be useful when troubleshooting alert configuration rules.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO alerts.cfg&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/xymond_alert.8.html"><strong>xymond_alert</strong>(8)</a>, <strong>xymond</strong>(8), <a href="../man7/xymon.7.html"><strong>xymon</strong>(7)</a>, the "Configuring Xymon Alerts" guide in the Online documentation.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="aide-xen-aide.conf.5.html"><span aria-hidden="true">&larr;</span> aide.conf.5: The configuration file for advanced intrusion detection environment</a></li>
   <li class="next"><a href="aliases.sendmail.5.html">aliases.sendmail.5: Aliases file for sendmail <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
