<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shorewall6-zones: Shorewall6 zone declaration file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shorewall6 zone declaration file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shorewall6-zones (5) manual">
  <meta name="twitter:description" content="Shorewall6 zone declaration file">
  <meta name="twitter:image" content="https://www.carta.tech/images/shorewall6-shorewall6-zones-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/shorewall6-zones.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shorewall6-zones (5) manual" />
  <meta property="og:description" content="Shorewall6 zone declaration file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/shorewall6-shorewall6-zones-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shorewall6-zones<small> (5)</small></h1>
        <p class="lead">Shorewall6 zone declaration file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/shorewall6-zones.5.html">
      <span itemprop="name">shorewall6-zones: Shorewall6 zone declaration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/shorewall6/">
      <span itemprop="name">shorewall6</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/shorewall6-zones.5.html">
      <span itemprop="name">shorewall6-zones: Shorewall6 zone declaration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/etc/shorewall6/zones</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The /etc/shorewall6/zones file declares your network zones. You specify the hosts in each zone through entries in /etc/shorewall6/interfaces or /etc/shorewall6/hosts.</p><p>The columns in the file are as follows (where the column name is followed by a different name in parentheses, the different name is used in the alternate specification syntax).</p><p><strong>ZONE</strong> - <em>zone</em>[<strong>:</strong><em>parent-zone</em>[<strong>,</strong><em>parent-zone</em>]...]</p><p>Name of the <em>zone</em>. The names "all", "none", "SOURCE" and "DEST" are reserved and may not be used as zone names. The maximum length of a zone name is determined by the setting of the LOGFORMAT option in \m[blue]<strong>shorewall6.conf</strong>\m[]\s-2\u[1]\d\s+2(5). With the default LOGFORMAT, zone names can be at most 5 characters long. The maximum length of an iptables log prefix is 29 bytes. As explained in \m[blue]<strong>shorewall6.conf</strong>\m[]\s-2\u[1]\d\s+2 (5), the default LOGPREFIX formatting string is &ldquo;Shorewall:%s:%s:&rdquo; where the first %s is replaced by the chain name and the second is replaced by the disposition.</p><p>The default formatting string has 12 fixed characters ("Shorewall" and three colons).</p><p>The longest of the standard dispositions are ACCEPT and REJECT which have 6 characters each.</p><p>The canonical name for the chain containing the rules for traffic going from zone 1 to zone 2 is "&lt;zone 1&gt;2&lt;zone 2&gt;".</p><p>So if M is the maximum zone name length, such chains can have length 2*M + 1.</p><p>12 + 6 + 2*M + 1 = 29 which reduces to</p><p>2*M = 29 - 12 - 6 - 1 = 10 or</p><p>M = 5</p><p>The order in which Shorewall6 matches addresses from packets to zones is determined by the order of zone declarations. Where a zone is nested in one or more other zones, you may either ensure that the nested zone precedes its parents in this file, or you may follow the (sub)zone name by ":" and a comma-separated list of the parent zones. The parent zones must have been declared in earlier records in this file. See \m[blue]<strong>shorewall6-nesting</strong>\m[]\s-2\u[2]\d\s+2(5) for additional information.</p><p>Example:</p>
<pre>
#ZONE     TYPE     OPTIONS         IN OPTIONS        OUT OPTIONS
a         ipv6
b         ipv6
c:a,b     ipv6
</pre>
<p>Currently, Shorewall6 uses this information to reorder the zone list so that parent zones appear after their subzones in the list. The IMPLICIT_CONTINUE option in \m[blue]<strong>shorewall6.conf</strong>\m[]\s-2\u[1]\d\s+2(5) can also create implicit CONTINUE policies to/from the subzone.</p><p>Where an <strong>ipsec</strong> zone is explicitly included as a child of an <strong>ipv6</strong> zone, the ruleset allows CONTINUE policies (explicit or implicit) to work as expected.</p><p>In the future, Shorewall6 may make additional use of nesting information.</p><p><strong>TYPE</strong></p><p><strong>ipv6</strong></p><p>This is the standard Shorewall6 zone type and is the default if you leave this column empty or if you enter "-" in the column. Communication with some zone hosts may be encrypted. Encrypted hosts are designated using the &apos;ipsec&apos; option in \m[blue]<strong>shorewall6-hosts</strong>\m[]\s-2\u[3]\d\s+2(5).</p><p><strong>ipsec</strong> (or <strong>ipsec6</strong>)</p><p>Communication with all zone hosts is encrypted. Your kernel and ip6tables must include policy match support.</p><p><strong>firewall</strong></p><p>Designates the firewall itself. You must have exactly one &apos;firewall&apos; zone. No options are permitted with a &apos;firewall&apos; zone. The name that you enter in the ZONE column will be stored in the shell variable $FW which you may use in other configuration files to designate the firewall zone.</p><p><strong>bport</strong> (or <strong>bport6</strong>)</p><p>The zone is associated with one or more ports on a single bridge.</p><p><strong>vserver</strong></p><p>Added in Shorewall 4.4.11 Beta 2 - A zone composed of Linux-vserver guests. The zone contents must be defined in \m[blue]<strong>shorewall6-hosts</strong>\m[]\s-2\u[3]\d\s+2 (5).</p><p>Vserver zones are implicitly handled as subzones of the firewall zone.</p><p><strong>loopback</strong></p><p>Added in Shorewall 4.5.17.</p><p>Normally, Shorewall treats the loopback interface (lo) in the following way:</p><p>By default, all traffic through the interface is ACCEPTed.</p><p>If a $FW -&gt; $FW policy is defined or $FW -&gt; $FW rules are defined, they are placed in a chain named ${FW}2${F2} or ${FW}-${FW} (e.g., &apos;fw2fw&apos; or &apos;fw-fw&apos; ) depending on the ZONE2ZONE setting in \m[blue]<strong>shorewall6.conf</strong>\m[]\s-2\u[1]\d\s+2(5).</p><p>$FW -&gt; $FW traffic is only filtered in the OUTPUT chain.</p><p>By defining a <strong>loopback</strong> zone and associating it with the loopback interface in <a href="../man5/shorewall-interfaces.5.html"><strong>shorewall-interfaces</strong>(5)</a>, you can effect a slightly different model. Suppose that the <strong>loopback</strong> zone name is &apos;local&apos;; then:</p><p>Both $FW -&gt; local and local -&gt; $FW chains are created.</p><p>The $FW -&gt; local and local -&gt; $FW policies may be different.</p><p>Both $FW -&gt; local and local -&gt; $FW rules may be specified.</p><p>Rules to/from the <strong>loopback</strong> zone and any zone other than the firewall zone are ignored with a warning.</p><p><strong>loopback</strong> zones may be nested within other <strong>loopback</strong> zones.</p><p>local</p><p>Added in Shorewall 4.5.17. <strong>local</strong> is the same as <strong>ipv6</strong> with the exception that the zone is only accessible from the <strong>firewall</strong> and <strong>vserver</strong> zones.</p><p><strong>OPTIONS, IN OPTIONS and OUT OPTIONS</strong> (options, in_options, out_options) - [<em>option</em>[<strong>,</strong><em>option</em>]...]</p><p>A comma-separated list of options. With the exception of the <strong>mss</strong> and <strong>blacklist</strong> options, these only apply to TYPE <strong>ipsec</strong> zones.</p><p><strong>blacklist</strong></p><p>Added in Shorewall 4.4.13. May not be specified for <strong>firewall</strong> or <strong>vserver</strong> zones.</p><p>When specified in the IN_OPTIONS column, causes all traffic from this zone to be passed against the <strong>src</strong> entries in \m[blue]<strong>shorewall6-blacklist</strong>\m[]\s-2\u[4]\d\s+2(5).</p><p>When specified in the OUT_OPTIONS column, causes all traffic to this zone to be passed against the <strong>dst</strong> entries in s\m[blue]<strong>horewall6-blacklist</strong>\m[]\s-2\u[4]\d\s+2(5).</p><p>Specifying this option in the OPTIONS column is equivalent to entering it in both of the IN_OPTIONS and OUT_OPTIONS column.</p><p><strong>dynamic_shared</strong></p><p>Added in Shorewall 4.5.9. May only be specified in the OPTIONS column and indicates that only a single ipset should be created for this zone if it has multiple dynamic entries in \m[blue]<strong>shorewall6-hosts</strong>\m[]\s-2\u[3]\d\s+2(5). Without this option, a separate ipset is created for each interface.</p><p><strong>reqid=</strong><em>number</em></p><p>where <em>number</em> is specified using <strong>setkey</strong>(8) using the &apos;unique:<em>number</em> option for the SPD level.</p><p><strong>spi=</strong>&lt;number&gt;</p><p>where <em>number</em> is the SPI of the SA used to encrypt/decrypt packets.</p><p><strong>proto=</strong><strong>ah</strong>|<strong>esp</strong>|<strong>ipcomp</strong></p><p>IPSEC Encapsulation Protocol</p><p><strong>mss=</strong><em>number</em></p><p>sets the MSS field in TCP packets. If you supply this option, you should also set FASTACCEPT=No in \m[blue]<strong>shorewall6.conf</strong>\m[]\s-2\u[1]\d\s+2(5) to insure that both the SYN and SYN,ACK packets have their MSS field adjusted.</p><p><strong>mode=</strong><strong>transport</strong>|<strong>tunnel</strong></p><p>IPSEC mode</p><p><strong>tunnel-src=</strong><em>address</em>[/<em>mask</em>]</p><p>only available with mode=tunnel</p><p><strong>tunnel-dst=</strong><em>address</em>[/<em>mask</em>]</p><p>only available with mode=tunnel</p><p><strong>strict</strong></p><p>Means that packets must match all rules.</p><p><strong>next</strong></p><p>Separates rules; can only be used with strict</p><p>The options in the OPTIONS column are applied to both incoming and outgoing traffic. The IN OPTIONS are applied to incoming traffic (in addition to OPTIONS) and the OUT OPTIONS are applied to outgoing traffic.</p><p>If you wish to leave a column empty but need to make an entry in a following column, use "-".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/shorewall6/zones</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO shorewall6-zones&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong>http://www.shorewall.net/Multiple_Zones.html</strong>\m[]\s-2\u[5]\d\s+2.</p><p>\m[blue]<strong>http://www.shorewall.net/configuration_file_basics.htm#Pairs</strong>\m[]\s-2\u[6]\d\s+2</p><p><strong>shorewall6</strong>(8), <a href="../man5/shorewall6-accounting.5.html"><strong>shorewall6-accounting</strong>(5)</a>, <a href="../man5/shorewall6-actions.5.html"><strong>shorewall6-actions</strong>(5)</a>, <a href="../man5/shorewall6-blacklist.5.html"><strong>shorewall6-blacklist</strong>(5)</a>, <a href="../man5/shorewall6-hosts.5.html"><strong>shorewall6-hosts</strong>(5)</a>, <a href="../man5/shorewall6-interfaces.5.html"><strong>shorewall6-interfaces</strong>(5)</a>, <a href="../man5/shorewall6-maclist.5.html"><strong>shorewall6-maclist</strong>(5)</a>, <strong>shorewall6-nesting</strong>(8), <a href="../man5/shorewall6-netmap.5.html"><strong>shorewall6-netmap</strong>(5)</a>,<a href="../man5/shorewall6-params.5.html"><strong>shorewall6-params</strong>(5)</a>, <a href="../man5/shorewall6-policy.5.html"><strong>shorewall6-policy</strong>(5)</a>, <a href="../man5/shorewall6-providers.5.html"><strong>shorewall6-providers</strong>(5)</a>, <a href="../man5/shorewall6-rtrules.5.html"><strong>shorewall6-rtrules</strong>(5)</a>, <a href="../man5/shorewall6-routestopped.5.html"><strong>shorewall6-routestopped</strong>(5)</a>, <a href="../man5/shorewall6-rules.5.html"><strong>shorewall6-rules</strong>(5)</a>, <a href="../man5/shorewall6.conf.5.html"><strong>shorewall6.conf</strong>(5)</a>, <a href="../man5/shorewall6-secmarks.5.html"><strong>shorewall6-secmarks</strong>(5)</a>, <a href="../man5/shorewall6-tcclasses.5.html"><strong>shorewall6-tcclasses</strong>(5)</a>, <a href="../man5/shorewall6-tcdevices.5.html"><strong>shorewall6-tcdevices</strong>(5)</a>, <a href="../man5/shorewall6-mangle.5.html"><strong>shorewall6-mangle</strong>(5)</a>, <a href="../man5/shorewall6-tos.5.html"><strong>shorewall6-tos</strong>(5)</a>, <a href="../man5/shorewall6-tunnels.5.html"><strong>shorewall6-tunnels</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>shorewall6.conf</p><p>http://www.shorewall.net/manpages6/shorewall6.conf.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>shorewall6-nesting</p><p>http://www.shorewall.net/manpages6/shorewall6-nesting.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>shorewall6-hosts</p><p>http://www.shorewall.net/manpages6/shorewall6-hosts.html</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p>shorewall6-blacklist</p><p>http://www.shorewall.net/manpages6/shorewall6-blacklist.html</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p>http://www.shorewall.net/Multiple_Zones.html</p><p>http://www.shorewall.net/Multiple_Zones.html</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p>http://www.shorewall.net/configuration_file_basics.htm#Pairs</p><p>http://www.shorewall.net/configuration_file_basics.htm#Pairs</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="shorewall6-vardir.5.html"><span aria-hidden="true">&larr;</span> shorewall6-vardir.5: Shorewall6 file</a></li>
   <li class="next"><a href="shorewall6.conf.5.html">shorewall6.conf.5: Shorewall6 global configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
