<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rate-files: Format of rate-files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Format of rate-files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="rate-files (5) manual">
  <meta name="twitter:description" content="Format of rate-files">
  <meta name="twitter:image" content="https://www.carta.tech/images/isdnlog-rate-files-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/rate-files.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="rate-files (5) manual" />
  <meta property="og:description" content="Format of rate-files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/isdnlog-rate-files-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">rate-files<small> (5)</small></h1>
        <p class="lead">Format of rate-files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/rate-files.5.html">
      <span itemprop="name">rate-files: Format of rate-files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/isdnlog/">
      <span itemprop="name">isdnlog</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/rate-files.5.html">
      <span itemprop="name">rate-files: Format of rate-files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The rate-files used by <a href="../man8/isdnlog.8.html"><strong>isdnlog</strong>(8)</a> and by <a href="../man1/isdnrate.1.html"><strong>isdnrate</strong>(1)</a> are textfiles defining the telephone fees for different destinations at certain dates/times for all providers of one country.</p><p>The rate-files have the following overall layout:</p><p><em>Header entries</em></p><p><em>Provider entries</em></p><p>Comments starting with a hash-sign '#' and empty lines are ignored. The first letter (tag) followed by a colon separates the entries. Additional white space may be used after the tags to group content more readably.</p><h3>Special entries</h3>
<p><strong>I:includefile</strong></p><p><strong>i:includefile</strong></p><ul>
<li><p><em>includefile</em> get's substituted at the current position. There are two possibilities. In the rate source file (which is prepared by <em>pp_rate</em>) a small <em>'i'</em> puts the contents of the include file in the outputfile. An <em>'I'</em>-Tag means, for the preprocessor, write a new output file (the includefile) and leave the tag in the rate-files. This is for real include files.</p><p>Includes may be nested twice. The filename should not contain any paths (except for 'i' of course), they are taken relative to their parent file.</p></li><li></li>
</ul>
<h3>Header entries</h3>
<p><strong>V:versionsstring</strong></p><ul>
<li><p>e.g. V:1.0-Germany [18-Mar-1999]</p></li>
</ul><p><strong>S:Servicename</strong></p><p><strong>N:Servicenumber[,Servicenumber...]</strong></p><ul>
<li><p>This defines telephone services with special numbers. Special numbers are numbers which a) start with no '0' or b) can not be dialed with every provider. A number with a variable length should have the wildcard '*' at the end, eg. <em>07189*</em> which matches all numbers starting with <em>07189</em>. Numbers with wildcards should be placed after numbers which would match the wildcard, because matching is done straight top down. There may be multiple <strong>N:</strong> tags for one telephone service.</p></li><li><p>e.g.</p><p>S:Internet</p><p>N:07189*,19430</p><p>N:19440</p></li>
</ul><p><strong>U:currencyfmt currency</strong></p><ul>
<li><p>If the first char of <em>currencyfmt</em> is ^, the amount is multiplied by 100 before it is displayed without leading ^.</p></li><li><p>e.g. (one of these, ¢ = cent)</p><p>U:%.3f EUR</p><p>U:^%.3f ¢</p></li>
</ul><p><strong>X:num_wildcard = provider[zZone] [,...]</strong></p><ul>
<li><p>Define exception. If a certain number is always routed to a certain provider and not to the preselected provider, you should use this tag.</p><p>e.g. in Austria, online service numbers 194x or 07189 go always via Telekom, ignoring your preselection:</p><p>X: 194*=1,07189*=1</p><p>or</p><p>X: 194*=1z6	# Provider 1 Zone 6</p></li>
</ul>
<h3>Provider entries</h3>
<p>A new provider starts always with a <strong>P:</strong> tag and consists of a <em>Providerheader</em> followed by <em>Providerzones.</em></p>
<h3>Providerheader</h3>
<p><strong>P:</strong>[<strong>daterange</strong>]<strong> providernumber providername</strong></p><ul>
<li><p><em>daterange</em> is <strong>[</strong>[<strong>fromDate</strong>]<strong></strong>[<strong>-toDate</strong>]<strong>]</strong></p><p>This defines a time range for the validity of rates for this provider. Dates have to be numeric in format <strong>dd.mm.yyyy</strong>. Note: as time is assumed as 00:00, take for <em>toDate</em> the day+1. The daterange has to be enclosed in square brackets. Either <em>fromDate</em> or <em>-toDate</em> or both may be given.</p><p>The <em>providernumber</em> may be a simple number, normally the last digits of the VBN-number, or <strong>providernumber,variant</strong> if a provider has different connection fees.</p><p>e.g.</p><p>P:02 UTA</p><p>or</p><p>P:[01.01.1999] 1,1 Telekom Minimumfee</p></li>
</ul><p><strong>B:vbn</strong></p><p>VBN-Number for provider</p><ul>
<li><p>e.g. B:1002</p><p>This is the number to select this provider and depends on your country.</p></li>
</ul><p><strong>C:COMMENT: comment</strong></p><p><strong>COMMENT</strong> may be an arbitrary string, but the following entries are used already:</p><ul>
<li><table class="table table-striped">
<tr>
<th><strong>C:Name:</strong>@Providername</th>
<th></th></tr>

<tr>
<td><strong>C:Maintainer:</strong>@Who did the hard work</td>
<td></td></tr>

<tr>
<td><strong>C:TarifChanged:</strong>@and when</td>
<td></td></tr>

<tr>
<td><strong>C:Address:</strong>@Provideraddress</td>
<td></td></tr>

<tr>
<td><strong>C:Homepage:</strong>@http:URL for provider</td>
<td></td></tr>

<tr>
<td><strong>C:TarifURL:</strong>@URL for tarif info</td>
<td></td></tr>

<tr>
<td><strong>C:EMail:</strong>@EMail-Address</td>
<td></td></tr>

<tr>
<td><strong>C:Telefon:</strong>@Telefon number</td>
<td></td></tr>

<tr>
<td><strong>C:Telefax:</strong>@Fax number</td>
<td></td></tr>

<tr>
<td><strong>C:Hotline:</strong>@Telefon number</td>
<td></td></tr>

<tr>
<td><strong>C:Zone:</strong>@Textual info about zones</td>
<td></td></tr>

<tr>
<td><strong>C:Special:</strong>@Guess</td>
<td></td></tr>

<tr>
<td><strong>C:GT:</strong>@Additional charge text</td>
<td></td></tr>

<tr>
<td><strong>C:GF:</strong>@Additional charge formula</td>
<td></td></tr>
</table></li>
</ul><p>If there are multiple comments with the same comment name, they get appended separated by a newline char.</p><p><strong>D:zone</strong></p><p>Name of zone file (inserted for <strong>%s</strong> in ZONEFILE = /usr/lib/isdn/zone-<em>CC</em>-%s.dat from isdn.conf)</p><ul>
<li><p>e.g. D:1001 # zone file is zone-at-1001.gdbm</p></li>
</ul><p>Note: if the provider has no different domestic zones, you should not define a D:tag.</p>
<h3>Providerzones</h3>
<p>A Providerzone entry starts with a <strong>Z:</strong> tag followed by one or more <strong>A:</strong> and <strong>T:</strong> tags.</p><p>A zone is a region of areas, for which the same rates apply. Domestic and foreign zones should not be mixed and all foreign zones should follow domestic zones.</p><p><strong>R:prov, sub ; zonelist</strong></p><p>Read zones from provider <em>prov</em> subprovider number <em>sub</em>. A <em>zonelist</em> is defined below. If the referenced provider doesn't have a subprovider number, the <em>sub</em> must be -1. The referenced provider may be defined before or after the R:-tag. The referenced zones must be real Z:-entries, not references themself. The zone numbers and names are taken from the referenced provider. The last <em>to_zone</em> may be missing then all zones from the start zone are used.</p><p>e.g.</p><p>R:1,1 ; 1-4,6, 10-</p><p>There some limitations:</p><p>The reference cannot be more exact than the referenced providerzones. R:42,0;1 will not work as desired if P:42,0 defines Z:1-4.</p><p>It is not possible to reference a providerzone without areas when the default domestic zone (with your countrycode as area) is not included in the same range of referenced zones.  This applies mainly to zones for different distances in the national fixed network, e.g. Z:1-3 in Germany.</p><p><strong>r:prov, sub ; start_zone-</strong></p><p>This tag is related to the R:-tag.  It is interpreted by the rate-preprocessor <em>pp_rate</em>. All providerzones with a zone number greater or equal <em>start_zone</em> are copied from provider <em>prov[,sub]</em> and replace the r:-tag. If an <em>area</em> is already used in a previous providerzone of the current provider, it will not be copied. If all areas of a providerzone are already defined, the entire zone will not be copied. Lines that contain only comments are also not copied, but comments at the end of other lines are.</p><p>This tag is designed for providers with a rate variant that offers different fees for some foreign destinations.</p><p><strong>Z:zonelist zonename</strong></p><p>where <em>zonelist</em> is <strong>zone</strong>[<strong>-to_zone</strong>][<strong>,...</strong>]</p><ul>
<li><p>e.g. Z:1-2,4 Interior</p></li>
</ul><p><strong>A:area</strong>[<strong>,area...</strong>]</p><p><em>area</em> may be a telephone number (including +countrycode for numbers which may be reached from everywhere, a telephone number without +countrycode for numbers only reachable in the own country) or an area name or alias as defined in country.dat. Country names have to be translated to their code by the rate-preprocessor <em>pp_rate</em>.</p><ul>
<li><p>e.g. A:19430,07189 # Online</p></li><li><p>e.g. A:+31,Belgium # Int 1</p></li>
</ul><p>Note: There should always be exactly one zone with your countrycode or countryname respectively:</p><ul>
<li><p>Z:4</p><p>A:+49</p><p>T:...</p></li>
</ul><p>Countrynames like <em>Belgium</em> in the above example are replaced by their ISO-Code (or TLD) with the rate preprocessor <em>pp_rate</em>.</p><p><strong>T:</strong>[<strong>daterange</strong>]<strong>daylist/timelist</strong>[<strong>!</strong>]<strong>=chargelist chargename</strong></p><p>where <em>daterange</em> is <strong>[</strong>[<strong>fromDate</strong>]<strong></strong>[<strong>-toDate</strong>]<strong>]</strong> like the corresonding provider entry. Note that the <em>daterange</em> is enclosed in sqare brackets, either <em>fromDate</em> or <em>-toDate</em> are optional.</p><p><em>daylist</em> is <strong>day</strong>[<strong>-day</strong>][<strong>,...</strong>] and day is a daynumber (1=Mon, 2=Tue, ...) or W (workday, Monday to Friday), E (weekend), H (holiday) or * (everyday). If more than one of these days match a given date, the following order of priority (highest first) applies: H 7 .. 1 E W *.</p><p><em>timelist</em> is <strong>hour</strong>[<strong>-hour</strong>][<strong>,hour</strong>] where hour is a number 0..23 or * for everytime.</p><p>After <em>daylist/timelist</em> follows <strong>=</strong> or <strong>!=</strong> which means, provider doesn't adjust rates on a rate boundary e.g. at 18h00.</p><p>A <em>chargelist</em> consists of</p><p>[<strong>MinCharge|</strong>]<strong>Charge</strong>[<strong>(Divider)</strong>]<strong>/Duration</strong>[<strong>:Delay</strong>][<strong>/Duration...</strong>]</p><p>where <em>MinCharge|</em> is an (optional) minimum charge, <em>Charge</em> the rate per <em>Duration</em> seconds or optional rate per <em>(Divider)</em> seconds, <em>Duration</em> is the length of one charge unit in seconds. After <em>Delay</em> the next duration is taken. If delay is not given it equals to the duration. The last duration may not have a delay and may not be zero.</p><ul>
<li><p>EXAMPLES</p><p>T:1-4/8-18=1.5(60)/60/1 workday</p></li><li><p>Monday until Thursday, daytime the charge is 1.50 per minute, first charge is for one minute after this charging is calculated in seconds interval.</p></li><li><p>T:W/18-8=0.30|1.2(60)/1 night</p></li><li><p>On workdays, night, charge is the bigger of 1.20 per minute or 0.30</p></li><li><p>T:*/*=0.50/0,1(60)/1 always</p></li><li><p>Everyday, everytime there is a connection fee of 0.50, then charge is 1 per minute.</p></li><li><p>T:H/*=0.5/60:600,0.5/30 holidays</p></li><li><p>On holidays, everytime a charge of 0.5 per minute in a minutes interval, after 10 minutes 0.5 per half minute in half a minutes interval.</p></li><li><p>T:*/*=1.3/0,0/1</p></li><li><p>Everyday, everytime the charge is 1.30 independent of duration, which could also be written as T:*/*=1.3|0/1.</p></li><li><p>T: [-01.02.2000] */17-19=0.79(60)/60/1 Happy Hour</p><p>T: [-01.02.2000] */19-17=0.90(60)/60/1 Normal</p></li><li><p>Until the first of Feb 0:00h (i.e. end is 31.1.2000 24:00), everyday between 17 and 19h a charge of 0.79 per minute, the first minute is always charged fully, after this, charging is calculated in seconds interval.</p><p>The second entry defines a charge of 0.90 in the time outside the happy hour.</p></li><li><p>T:[15.11.1999-01.02.2000]*/17-19=0.79(60)/60/1 HH</p></li><li><p>Like above, but a full date range is given.</p></li>
</ul><p>The next two t:-tags are interpreted by <em>pp_rate</em> and replaced by one or more T:-lines. Both methods can be used together.</p><p><strong>t:[daterange]?[H]=chargelist chargename</strong></p><p>This line is replaced by according T:-lines for not yet defined <em>day/hour</em> pairs.</p><p>If a <em>daterange</em> is given, only previous T:-lines without a daterange or with the same daterange will be considered as earlier definitions. If <em>H</em> is noted, definitions will also be added for holidays.</p><ul>
<li><p>EXAMPLE</p><p>T:W/08-18=0.10/60 normal time</p><p>t:?H=0.04/60 save time</p></li><li><p>This lines will lead to the following lines after <em>pp_rate</em>:</p></li><li><p>T:W/08-18=0.10/60 normal time</p><p>T:W/18-08=0.04/60 save time</p><p>T:E,H/*=0.04 save time</p></li>
</ul><p><strong>t:daterange=srcrange [chargename]</strong></p><p>Generates T:-lines for <em>daterange</em> by copying previous T:-lines with <em>srcrange</em> in the same zone. If a <em>chargename</em> is given, it will replace the chargename of the originating line. <em>srcrange</em> can be shortened as long as it remains definite.</p><ul>
<li><p>EXAMPLE</p><p>T:[-24.12.2003]W/*=0.08/60 on workdays</p><p>T:[-24.12.2003]E,H/*=0.06 weekend</p><p>T:[24.12.2003-25.12.2003]*/*=0.04 Christmas Eve</p><p>t:[25.12.2003-31.12.2003]=[-24.12.2003]</p><p>t:[31.12.2003-01.01.2004]=[24.12.] New Year's Eve</p><p>t:[01.01.2004]=[-24.12.]</p></li><li><p>This will be transformed into:</p></li><li><p>T:[-24.12.2003]W/*=0.08/60 on workdays</p><p>T:[-24.12.2003]E,H/*=0.06/60 weekend</p><p>T:[24.12.2003-25.12.2003]*/*=0.04/60 Christmas Eve</p><p>T:[25.12.2003-31.12.2003]W/*=0.08/60 on workdays</p><p>T:[25.12.2003-31.12.2003]E,H/*=0.06/60 weekend</p><p>T:[31.12.2003-01.01.2004]=0.04/60 New Years' Eve</p><p>T:[01.01.2004]W/*=0.08/60 on workdays</p><p>T:[01.01.2004]E,H/*=0.06/60 weekend</p></li>
</ul>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO rate-files&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/isdnlog.8.html"><strong>isdnlog</strong>(8)</a></em>, <a href="../man1/isdnrate.1.html"><strong>isdnrate</strong>(1)</a></em>, <strong>rate.conf</strong>(5)</em>, isdnlog/README, rate-at.dat</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Leopold Toetsch &lt;lt@toetsch.at&gt; (of this man page of course). Tobias Becker &lt;tobiasb@isdn4linux.de&gt; added the tags r: and t:.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="rarc.5.html"><span aria-hidden="true">&larr;</span> rarc.5: Ra client resource file.</a></li>
   <li class="next"><a href="rcS.5.html">rcS.5: Variables that affect the behavior of boot scripts <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
