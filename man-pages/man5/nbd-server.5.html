<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>nbd-server: Configuration file for nbd-server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file for nbd-server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="nbd-server (5) manual">
  <meta name="twitter:description" content="Configuration file for nbd-server">
  <meta name="twitter:image" content="https://www.carta.tech/images/nbd-server-nbd-server-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/nbd-server.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="nbd-server (5) manual" />
  <meta property="og:description" content="Configuration file for nbd-server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nbd-server-nbd-server-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">nbd-server<small> (5)</small></h1>
        <p class="lead">Configuration file for nbd-server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/nbd-server.5.html">
      <span itemprop="name">nbd-server: Configuration file for nbd-server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nbd-server/">
      <span itemprop="name">nbd-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/nbd-server.5.html">
      <span itemprop="name">nbd-server: Configuration file for nbd-server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/etc/nbd-server/config </strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This file allows to configure the nbd-server.</p><p>While <em>/etc/nbd-server/config</em> is the default configuration file, this can be varied with the <strong>-C</strong> option to <a href="../man1/nbd-server.1.html"><strong>nbd-server</strong>(1)</a>.</p><p>The configuration file consists of section header lines, comment lines, and option lines.</p><p>A section header is a unique name that is enclosed in square brackets ("[" and "]"). A section header denotes the beginning of a section; a section continues until the next section or the end of the file, whichever is first. The first section in the configuration file must be called <strong>generic</strong>, and is used for global options that apply to more than one export. This section must always be present, even if it holds no options. Every other section defines one export; the names of these sections are not important, except that you should take care to make sure that each section name is unique. The section name is used as the name for the export in case the client connects with a name rather than a port to specify an export, and must therefore be unique.</p><p>A comment line is a line that starts with optional whitespace, followed by a pound sign ("#"), and continues until the end of the line. Comments may <strong>not</strong> be used on option lines or section header lines.</p><p>An option line is a line that starts with an option name, followed by an equals sign ("="), followed by the option value. An option can be of type string, of type integer, or of type boolean. The value of a boolean option can be denoted with either true or false (so not yes, no, on, off, 1, or 0). All booleans default to false unless specified otherwise. No value may be quoted; always enter it directly. For a string option, leading whitespace is stripped (but trailing whitespace is not).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS FOR SECTION [GENERIC]</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>allowlist</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean</p><p>Whether to allow the client to fetch a list of exports from this server. If enabled, the client can run <strong>nbd-client -l</strong> to get a list of exports on this server.</p>
  </dd>
  <dt>
    <p><strong>group</strong></p>
  </dt>
  <dd>
    <p>Optional; string.</p><p>The name of the group this server must run as. If this parameter is not specified, then nbd-server will not attempt to change its GID (so the GID it runs as will be the primary group of the user who starts nbd-server). If it is specified, then nbd-server will change its GID after opening ports, but before accepting connections or opening files.</p>
  </dd>
  <dt>
    <p><strong>includedir</strong></p>
  </dt>
  <dd>
    <p>Optional; string</p><p>The argument should be a directory containing files with the '.conf' extension; these files will be parsed as if they were part of the configuration file. Note that these extra configuration files cannot contain a [generic] section; any configuration that should go in the generic section must be placed in the main configuration file.</p><p>If this argument is not specified, then no directory will be searched. If it is specified but the directory does not exist, then nbd-server will exit with an appropriate error message; if it is specified but the given directory is empty, nbd-server will continue (unless no exports whatsoever have been configured, in which case it will exit with an appropriate error message)</p>
  </dd>
  <dt>
    <p><strong>listenaddr</strong></p>
  </dt>
  <dd>
    <p>Optional; string</p><p>If this option is set, it should contain the local IP address on which we should listen to <a href="../man8/nbd-client.8.html"><strong>nbd-client</strong>(8)</a> connections. If it is not set, <strong>nbd-server</strong> will listen to all local IPv4 and IPv6 addresses. To limit to IPv6, specify the address as "::". To limit to IPv4, specify as "0.0.0.0". It is not possible to specify more than one IP address here.</p>
  </dd>
  <dt>
    <p><strong>oldstyle</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean</p><p>If this option is set to true, nbd-server will export all exports on a separate port with the old (pre-2.9.17) handshake protocol. In that case, the 'port' option for individual exports is mandatory.</p><p>If the option is set to false, the 'port' option for individual exports is optional (and will be ignored if specified). The server will only export devices on the standard port.</p><p>For upgrades from pre-2.9.17 versions of nbd, it may be appropriate to enable the oldstyle parameter until all clients have been converted to using name-based exports.</p><p>Note that exports specified on the command line will always use the old handshake protocol and will not allow name-based exports.</p><p>Also note that even if this parameter is set to true, all exports will also be made available using the new handshake protocol; it is not possible to switch that off. The reason for this is that the old style protocol will eventually be deprecated, and this option is only available to allow for smooth upgrades.</p>
  </dd>
  <dt>
    <p><strong>port</strong></p>
  </dt>
  <dd>
    <p>Optional; string</p><p>The port on which to listen for new-style nbd-client connections. If not specified, the IANA-assigned port of 10809 is used.</p>
  </dd>
  <dt>
    <p><strong>user</strong></p>
  </dt>
  <dd>
    <p>Optional; string.</p><p>The name of the user this server must run as. If this parameter is not specified, then nbd-server will not attempt to change its UID (so the UID it runs as will be the user who starts nbd-server). If it is specified, then nbd-server will change its UID after opening ports, but before accepting connections or opening files.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS FOR EXPORT SECTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>authfile</strong></p>
  </dt>
  <dd>
    <p>Optional; string; default empty</p><p>The name of the authorization file for this export. This file should contain one line per IP-address, or per network (which must be specified in CIDR-style <strong></strong><em>network</em><strong>/</strong><em>masklen</em><strong></strong>). Empty lines are skipped, as is any content behind a hashmark ('#') on any line.</p><p>If the file does not exist, everyone is allowed to connect. If the file exists but is empty, nobody is allowed to connect. Otherwise, <strong>nbd-server</strong> will only allow clients to connect whose IP-adres is listed in this file.</p><p>Corresponds to the <strong>-l</strong> option on the command line. However, note that for the command line, the default is <em>/etc/nbd-server/allow</em>.</p>
  </dd>
  <dt>
    <p><strong>copyonwrite</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>Whether this is a copy-on-write export. If it is, then any writes to this export will not be written to the master file, but to a separate file which will be removed upon disconnect. The result of using this option is that nbd-server will be somewhat slower, and that any writes will be lost upon disconnect.</p><p>Corresponds to the <strong>-c</strong> option on the command line</p>
  </dd>
  <dt>
    <p><strong>exportname</strong></p>
  </dt>
  <dd>
    <p>Required; string.</p><p>The name of the file (or block device) that will be exported. This must be a fully-qualified path and filename; relative paths are not allowed. If used in conjunction with the <strong>temporary</strong>, this specifies a template for the temporary file concerned, and thus can be used to control the directory it is created in. If the file does not exist, but <strong>filesize</strong> is set, then the file will be created.</p><p>Note that <strong>nbd-server</strong> will only try to find and open the exported file when a client actually connects; as a result, <strong>nbd-server</strong> must be able to open and read this file <strong>after</strong> changing to the user and group that have been specified by use of the <strong>user</strong> and <strong>group</strong> options; also, <strong>nbd-server</strong> will only detect errors in this option upon connection of a client.</p><p>When specified on the command line, this should be the second argument.</p>
  </dd>
  <dt>
    <p><strong>filesize</strong></p>
  </dt>
  <dd>
    <p>Optional; integer; default autodetected.</p><p>Disable autodetection of file or block device size, and forcibly specify a size. Sizes must be specified in bytes. If the <strong>multifile</strong> option is in effect, this option specifies the size of the <strong>entire</strong> export, not of individual files. If the file is not present, a single file is created of this size.</p><p>When specified on the command line, this should be the third argument.</p>
  </dd>
  <dt>
    <p><strong>flush</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>When this option is enabled, <strong>nbd-server</strong> will inform the client that it supports and desires to be sent flush requests when the elevator layer receives them. Receipt of a flush request will cause an fdatasync() (or, if the sync option is set, an fsync()) on the backend storage. This increases reliability in the case of an unclean shutdown at the expense of a degradation of performance. This option will have no effect unless supported by the client.</p>
  </dd>
  <dt>
    <p><strong>fua</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>When this option is enabled, <strong>nbd-server</strong> will inform the client that it supports and desires to be sent fua (force unit access) commands when the elevator layer receives them. Receipt of a force unit access command will cause the specified command to be synced to backend storage using sync_file_range() if supported, or fdatasync() otherwise. This increases reliability in the case of an unclean shutdown at the expense of a degradation of performance. This option will have no effect unless supported by the client.</p>
  </dd>
  <dt>
    <p><strong>listenaddr</strong></p>
  </dt>
  <dd>
    <p>Optional; string</p><p>If the 'oldstyle' global parameter is specified, works similarly to the global listenaddr parameter, but for the individual port of this particular export. If the 'oldstyle' parameter is not set, this parameter is ignored.</p>
  </dd>
  <dt>
    <p><strong>maxconnections</strong></p>
  </dt>
  <dd>
    <p>Optional; integer</p><p>If specified, then it limits the number of opened connections for this export.</p>
  </dd>
  <dt>
    <p><strong>multifile</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>If this option is set to true, then <strong>nbd-server</strong> will search for files of the form <em>exportname</em>.<em>integer</em>, with <em>exportname</em> being the filename that would otherwise have been used (after name transformation for virtualization, if any, has been performed) and <em>integer</em> an integer number, starting with 0 and ending when no more files can be found.</p><p>The size of the individual files will be autodetected, <strong>even</strong> if the <strong>filesize</strong> option has been specified.</p><p>Corresponds to the <strong>-m</strong> option on the command line.</p>
  </dd>
  <dt>
    <p><strong>port</strong></p>
  </dt>
  <dd>
    <p>Required if 'oldstyle' global parameter is set; integer.</p><p>The port on which this export is to be served using the old-style handshake protocol.</p><p>This parameter only makes sense when the 'oldstyle' parameter is set to true in the 'generic' section. If that parameter is not set, but this parameter is found in an export section, then nbd-server will issue a warning upon startup but should otherwise continue to function correctly.</p><p>It is not possible to combine multiple exports on the same port using the old style handshake. Please use the new style handshake for that purpose.</p><p>When specified on the command line, this should be the first argument.</p>
  </dd>
  <dt>
    <p><strong>postrun</strong></p>
  </dt>
  <dd>
    <p>Optional; string</p><p>If specified, then it is assumed to be a command that will be ran when a client has disconnected. This can be useful to clean up whatever <strong>prerun</strong> has set up, to log something, or similar.</p><p>If the literal string '%s' is present in the command, it will be replaced by the file name that has just been closed.</p><p>In contrast to the <strong>prerun</strong> option, the exit state of <strong>postrun</strong> is <strong>ignored</strong>.</p>
  </dd>
  <dt>
    <p><strong>prerun</strong></p>
  </dt>
  <dd>
    <p>Optional; string</p><p>If specified, then this command will be ran after a client has connected to the server (and has been accepted), but before the server starts serving. If the command contains the literal string '%s', then this string will be replaced by the filename of the file which nbd-server wants to export.</p><p>This is useful to create export files on the fly, or to verify that a file can be used for export, to write something to a log file, or similar.</p><p>If the command runs with a non-zero exit status, then nbd-server will assume the export will fail, and refuse to serve it.</p>
  </dd>
  <dt>
    <p><strong>readonly</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>Disallow writes to the device. If this option is specified, <strong>nbd-server</strong> will issue an error to any client that tries to write to the device.</p><p>Use of this option in conjunction with <strong>copyonwrite</strong> is possible, but silly.</p><p>Corresponds to the <strong>-r</strong> option on the command line.</p>
  </dd>
  <dt>
    <p><strong>rotational</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>When this option is enabled, <strong>nbd-server</strong> will inform the client that it would prefer it to send requests in elevator (i.e., optimized) order, perhaps because it has a backing store and no local elevator. By default, the client uses QUEUE_FLAG_NONROT, which effectively restricts the function of the elevator to block merges. By specifying this flag on the server, the client will not use QUEUE_FLAG_NONROT, meaning the client elevator will perform normal elevator ordering of I/O requests. Note that even when the backing store is on rotating media, it is not normally necessary to specify this flag, as the server's elevator algorithm will be used. This flag is only required where the server will not be using an elevator algorithm or where the elevator algorithm is effectively neutered (e.g. with the sync option set). This option will have no effect unless supported by the client.</p>
  </dd>
  <dt>
    <p><strong>sdp</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>When this option is enabled, <strong>nbd-server</strong> will use the Socket Direct Protocol (SDP) to serve the export, rather than just IP. This is faster, but requires special hardware (usually something like InfiniBand) and support in the kernel.</p><p>Additionally, support for this option must be enabled at compile time, using the <strong>--enable-sdp</strong> option to the <strong>configure</strong> script. If this option is found in a configuration file and <strong>nbd-server</strong> does not have support for SDP, then <strong>nbd-server</strong> will exit with an error message.</p>
  </dd>
  <dt>
    <p><strong>sparse_cow</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>When this option is enabled, <strong>nbd-server</strong> will use sparse files to implement the copy-on-write option; such files take up less space then they appear to, which allows <strong>nbd-server</strong> to handle the file as if it was just as large as the block device it's for.</p><p>If this option is disabled, <strong>nbd-server</strong> will map every newly written block to the end of the copy-on-write file, which means that <strong>nbd-server</strong> will have to <a href="../man2/lseek.2.html"><strong>lseek</strong>(2)</a> to the right position after every 4096-byte block.</p><p>Using this option may be faster when much is being written during a connection.</p>
  </dd>
  <dt>
    <p><strong>sync</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>When this option is enabled, <strong>nbd-server</strong> will call an fsync() after every write to the backend storage. Calling fsync() increases reliability in case of an unclean shutdown of nbd-server; but, depending on the file system used on the nbd-server side, may degrade performance. The use of this option isn't always necessary; e.g., on ext3 filesystems, it is recommended that it is <strong>not</strong> enabled, since it seriously reduces performance on ext3 filesystems while not importantly impacting reliability.</p>
  </dd>
  <dt>
    <p><strong>temporary</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean.</p><p>Create a temporary export with a name based on exportname (this can be used to set the directory). A unique filename is created, which is unlinked as soon as it is created, and therefore the export will not persist between invocations of <strong>nbd-server</strong>. Set the size of the file using the <strong>filesize</strong> option. This option is incompatible with the <strong>multifile</strong> option.</p><p>When specified on the command line, this should be the third argument.</p>
  </dd>
  <dt>
    <p><strong>timeout</strong></p>
  </dt>
  <dd>
    <p>Optional; integer; default 0</p><p>How many seconds a connection may be idle for this export. When a connection is idle for a longer time, <strong>nbd-server</strong> will forcibly disconnect the connection. If you specify 0 (the default), then a connection may be idle forever.</p><p>Corresponds to the <strong>-a</strong> option on the command line</p>
  </dd>
  <dt>
    <p><strong>transactionlog</strong></p>
  </dt>
  <dd>
    <p>Optional; string</p><p>If specified, then this pathname is used to generate a transaction log. A transaction log is a binary file consisting of the requests sent to and the replies received by the server, but excluding any data (so, for a write command, it records the offset and length of the write but not the data written). It is therefore relatively safe to distribute to a third party. Note that the transaction log does not include the negotiation sequence. Transaction logs are mainly useful for debugging. The program <strong>nbd-tester-client</strong> distributed with the source to this program can reply a transaction log against a server and perform a data integrity test. Note that the transaction log is written to for every client opened. If it is necessary to maintain separate transaction logs for each client, the <strong>prerun</strong> script should rename the transaction log (which will just have been opened in order to avoid transaction logs overwriting eachother. This action should be race-free.</p>
  </dd>
  <dt>
    <p><strong>trim</strong></p>
  </dt>
  <dd>
    <p>Optional; boolean</p><p>When this option is activated, the server announces it supports the NBD_CMD_TRIM command for the export. This command allows the server to discard the data from the disk, but does not require it to.</p>
  </dd>
  <dt>
    <p><strong>virtstyle</strong></p>
  </dt>
  <dd>
    <p>Optional; string; default "ipliteral"</p><p>Defines the style of virtualization. Virtualization allows one to create one export that will serve a different file depending on the IP address that is connecting. When virtualization is active, the <em>exportname</em> parameter needs to contain the string '%s'; this will then be replaced by the IP address of the client connecting, in accordance with the option selected here. The result of this transformation is then used as the filename to be opened.</p><p>There are four types of virtualization that <strong>nbd-server</strong> supports:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>none</strong></p>
  </dt>
  <dd>
    <p>No virtualization. Will attempt to open the filename as it was written, even if it contains '%s' in the name.</p>
  </dd>
  <dt>
    <p><strong>ipliteral</strong></p>
  </dt>
  <dd>
    <p>The %s is replaced by the IP address of the connecting host is used as-is.  For IPv4, this is done in dotted-quad notation; for IPv6, in hexadecimal form with leading zeros omitted.</p><p>As an example, if a client connects from 192.168.1.100 and <strong>exportname</strong> is specified as <em>/export/%s</em>, then nbd-server will attempt to serve <em>/export/192.168.1.100</em>. For IPv6, with a client connecting from 2001:6f8:32f::39, the filename would be <em>/export/2001:6f8:32f:0:0:0:0:39</em></p>
  </dd>
  <dt>
    <p><strong>iphash</strong></p>
  </dt>
  <dd>
    <p>Same as above, except that <strong>nbd-server</strong> will replace the dots in the IP address by forward slashes ('/'); in the same example, <strong>nbd-server</strong> would open <em>/export/192/168/1/100</em> instead.</p><p>Since there are no dots in most IPv6 addresses, the effect of using this option when IPv6 is in use is indistinguishable from the ipliteral option. It was thought that having to create an eight-deep directory structure would not be as useful.</p>
  </dd>
  <dt>
    <p><strong>cidrhash</strong></p>
  </dt>
  <dd>
    <p>This option requires one to add a space and a number after it. <strong>nbd-server</strong> will use the number as a network mask in CIDR style, and use that as a hash cutoff point. In the above example, if <strong>virtstyle</strong> has been specified as cidrhash 16, then <strong>nbd-server</strong> will try to open <em>/export/192.168.0.0/192.168.1.100</em>; if <strong>virtstyle</strong> were specified as cidrhash 26, then <strong>nbd-server</strong> will try to open <em>/export/192.168.1.64/192.168.1.100</em>.</p><p>For IPv6, in the above example, with cidrhash 42, the filename would be <em>/export/2001:32f:6c0:0:0:0:0:0/2001:32f:6f8:0:0:0:0:39</em>.</p>
  </dd>

</dl>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO nbd-server&hellip;</h2>
        <div class="sectioncontent">
<p>nbd-server (1), nbd-client (8), nbd-trdump (8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The NBD kernel module and the NBD tools were originally written by Pavel Machek (pavel@ucw.cz)</p><p>The Linux kernel module is now maintained by Paul Clements (Paul.Clements@steeleye.com), while the userland tools are maintained by Wouter Verhelst (&lt;wouter@debian.org&gt;)</p><p>On The Hurd there is a regular translator available to perform the client side of the protocol, and the use of <strong>nbd-client</strong> is not required. Please see the relevant documentation for more information.</p><p>This manual page was written by Wouter Verhelst (&lt;wouter@debian.org&gt;) for the Debian GNU/Linux system (but may be used by others).  Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, version 2, as published by the Free Software Foundation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>A simple <strong>nbd-server</strong> configuration file would look like this:</p>
<pre>
      [generic]
      [export]
          exportname = /export/blkdev

</pre>
<p>For increased security, one might want to create an authorization file, and set the UID and GID to run as:</p>
<pre>
      [generic]
          user = nbd
          group = nbd
      [export]
          exportname = /export/blkdev
          authfile = /etc/nbd-server/allow

</pre>
<p>With /etc/nbd-server/allow containing the following:</p>
<pre>
      127.0.0.1
      192.168.0.0/8
      192.168.1.1

</pre>
<p>To be compatible with older nbd-client systems, one might wish to enable the old-style, port-based, negotation:</p>
<pre>
      [generic]
          oldstyle = true
      [export]
          exportname = /export/blkdev
	  port = 12345

</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="nanorc.5.html"><span aria-hidden="true">&larr;</span> nanorc.5: Gnu nano's rcfile</a></li>
   <li class="next"><a href="neard.conf.5.html">neard.conf.5: Neard configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
