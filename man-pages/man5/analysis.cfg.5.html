<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>analysis.cfg: Configuration file for the xymond_client module</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file for the xymond_client module">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="analysis.cfg (5) manual">
  <meta name="twitter:description" content="Configuration file for the xymond_client module">
  <meta name="twitter:image" content="https://www.carta.tech/images/xymon-analysis.cfg-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/analysis.cfg.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="analysis.cfg (5) manual" />
  <meta property="og:description" content="Configuration file for the xymond_client module" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xymon-analysis.cfg-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">analysis.cfg<small> (5)</small></h1>
        <p class="lead">Configuration file for the xymond_client module</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/analysis.cfg.5.html">
      <span itemprop="name">analysis.cfg: Configuration file for the xymond_client module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xymon/">
      <span itemprop="name">xymon</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/analysis.cfg.5.html">
      <span itemprop="name">analysis.cfg: Configuration file for the xymond_client module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>~Xymon/server/etc/analysis.cfg</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The analysis.cfg file controls what color is assigned to the status-messages that are generated from the Xymon client data - typically the cpu, disk, memory, procs- and msgs-columns. Color is decided on the basis of some <strong>settings</strong> defined in this file; settings apply to specific hosts through a set of <strong>rules</strong>.</p><p>Note: This file is only used on the Xymon server - it is not used by the Xymon client, so there is no need to distribute it to your client systems.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE FORMAT</h2>
        <div class="sectioncontent">
<p>Blank lines and lines starting with a hash mark (#) are treated as comments and ignored.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CPU STATUS COLUMN SETTINGS</h2>
        <div class="sectioncontent">
<p><strong>LOAD warnlevel paniclevel</strong></p><p>If the system load exceeds "warnlevel" or "paniclevel", the "cpu" status will go yellow or red, respectively. These are decimal numbers.</p><p>Defaults: warnlevel=5.0, paniclevel=10.0</p><p><strong>UP bootlimit toolonglimit [color]</strong></p><p>The cpu status goes yellow/red if the system has been up for less than "bootlimit" time, or longer than "toolonglimit". The time is in minutes, or you can add h/d/w for hours/days/weeks - eg. "2h" for two hours, or "4w" for 4 weeks.</p><p>Defaults: bootlimit=1h, toolonglimit=-1 (infinite), color=yellow.</p><p><strong>CLOCK max.offset [color]</strong></p><p>The cpu status goes yellow/red if the system clock on the client differs more than "max.offset" seconds from that of the Xymon server. Note that this is not a particularly accurate test, since it is affected by network delays between the client and the server, and the load on both systems. You should therefore not rely on this being accurate to more than +/- 5 seconds, but it will let you catch a client clock that goes completely wrong. The default is NOT to check the system clock.</p><p><strong>NOTE:</strong> Correct operation of this test obviously requires that the system clock of the Xymon server is correct. You should therefore make sure that the Xymon server is synchronized to the real clock, e.g. by using NTP.</p><p>Example: Go yellow if the load average exceeds 5, and red if it exceeds 10. Also, go yellow for 10 minutes after a reboot, and after 4 weeks uptime. Finally, check that the system clock is at most 15 seconds offset from the clock of the Xymon system and go red if that is exceeded.</p><ul>
<li>
<pre>
LOAD 5 10
UP 10m 4w yellow
CLOCK 15 red
</pre>
</li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISK STATUS COLUMN SETTINGS</h2>
        <div class="sectioncontent">
<p><strong>DISK filesystem warnlevel paniclevel</strong></p><p><strong>DISK filesystem IGNORE</strong></p><p><strong>INODE filesystem warnlevel paniclevel</strong></p><p><strong>INODE filesystem IGNORE</strong></p><p>If the utilization of "filesystem" is reported to exceed "warnlevel" or "paniclevel", the "disk" status will go yellow or red, respectively. "warnlevel" and "paniclevel" are either the percentage used, or the space available as reported by the local "df" command on the host. For the latter type of check, the "warnlevel" must be followed by the letter "U", e.g. "1024U".</p><p>The special keyword "IGNORE" causes this filesystem to be ignored completely, i.e. it will not appear in the "disk" status column and it will not be tracked in a graph. This is useful for e.g. removable devices, backup-disks and similar hardware.</p><p>"filesystem" is the mount-point where the filesystem is mounted, e.g. "/usr" or "/home". A filesystem-name that begins with "%" is interpreted as a Perl-compatible regular expression; e.g. "%^/oracle.*/" will match any filesystem whose mountpoint begins with "/oracle".</p><p>"INODE" works identical to "DISK", but uses the count of i-nodes in the filesystem instead of the amount of disk space.</p><p>Defaults DISK: warnlevel=90%, paniclevel=95%</p><p>Defaults INODE: warnlevel=70%, paniclevel=90%</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MEMORY STATUS COLUMN SETTINGS</h2>
        <div class="sectioncontent">
<p><strong>MEMPHYS warnlevel paniclevel</strong></p><p><strong>MEMACT warnlevel paniclevel</strong></p><p><strong>MEMSWAP warnlevel paniclevel</strong></p><p>If the memory utilization exceeds the "warnlevel" or "paniclevel", the "memory" status will change to yellow or red, respectively. Note: The words "PHYS", "ACT" and "SWAP" are also recognized.</p><p>Example: Go yellow if more than 20% swap is used, and red if more than 40% swap is used or the actual memory utilisation exceeds 90%. Don't alert on physical memory usage.</p><ul>
<li>
<pre>
MEMSWAP 20 40
MEMACT 90 90
MEMPHYS 101 101
</pre>
</li>
</ul><p>Defaults:</p><ul>
<li>
<pre>
MEMPHYS warnlevel=100 paniclevel=101 (i.e. it will never go red).
MEMSWAP warnlevel=50 paniclevel=80
MEMACT  warnlevel=90 paniclevel=97
</pre>
</li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROCS STATUS COLUMN SETTINGS</h2>
        <div class="sectioncontent">
<p><strong>PROC processname minimumcount maximumcount color [TRACK=id] [TEXT=text]</strong></p><p>The "ps" listing sent by the client will be scanned for how many processes containing "processname" are running, and this is then matched against the min/max settings defined here. If the running count is outside the thresholds, the color of the "procs" status changes to "color".</p><p>To check for a process that must NOT be running: Set minimum and maximum to 0.</p><p>"processname" can be a simple string, in which case this string must show up in the "ps" listing as a command. The scanner will find a ps-listing of e.g. "/usr/sbin/cron" if you only specify "processname" as "cron". "processname" can also be a Perl-compatiable regular expression, e.g. "%java.*inst[0123]" can be used to find entries in the ps-listing for "java -Xmx512m inst2" and "java -Xmx256 inst3". In that case, "processname" must begin with "%" followed by the regular expression. Note that Xymon defaults to case-insensitive pattern matching; if that is not what you want, put "(?-i)" between the "%" and the regular expression to turn this off. E.g. "%(?-i)HTTPD" will match the word HTTPD only when it is upper-case.</p><p>If "processname" contains whitespace (blanks or TAB), you must enclose the full string in double quotes - including the "%" if you use regular expression matching. E.g.</p>
<pre>
    PROC "%xymond_channel --channel=data.*xymond_rrd" 1 1 yellow
</pre>
<p>or</p>
<pre>
    PROC "java -DCLASSPATH=/opt/java/lib" 2 5
</pre>
<p>You can have multiple "PROC" entries for the same host, all of the checks are merged into the "procs" status and the most severe check defines the color of the status.</p><p>The optional <strong>TRACK=id</strong> setting causes Xymon to track the number of processes found in an RRD file, and put this into a graph which is shown on the "procs" status display. The <strong>id</strong> setting is a simple text string which will be used as the legend for the graph, and also as part of the RRD filename. It is recommended that you use only letters and digits for the ID.</p><p>Note that the process counts which are tracked are only performed once when the client does a poll cycle - i.e. the counts represent snapshots of the system state, not an average value over the client poll cycle. Therefore there may be peaks or dips in the actual process counts which will not show up in the graphs, because they happen while the Xymon client is not doing any polling.</p><p>The optional <strong>TEXT=text</strong> setting is used in the summary of the "procs" status. Normally, the summary will show the "processname" to identify the process and the related count and limits. But this may be a regular expression which is not easily recognizable, so if defined, the <strong>text</strong> setting string will be used instead. This only affects the "procs" status display - it has no effect on how the rule counts or recognizes processes in the "ps" output.</p><p>Example: Check that "cron" is running:</p><p>	PROC cron</p><p>Example: Check that at least 5 "httpd" processes are running, but not more than 20:</p><p>	PROC httpd 5 20</p><p>Defaults:</p><p>	mincount=1, maxcount=-1 (unlimited), color="red".</p><p>	Note that no processes are checked by default.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MSGS STATUS COLUMN SETTINGS</h2>
        <div class="sectioncontent">
<p><strong>LOG logfilename pattern [COLOR=color] [IGNORE=excludepattern] [OPTIONAL]</strong></p><p>The Xymon client extracts interesting lines from one or more logfiles - see the <a href="../man5/client-local.cfg.5.html"><strong>client-local.cfg</strong>(5)</a></em> man-page for information about how to configure which logs a client should look at.</p><p>The <strong>LOG</strong> setting determine how these extracts of log entries are processed, and what warnings or alerts trigger as a result.</p><p>"logfilename" is the name of the logfile. Only logentries from this filename will be matched against this rule.  Note that "logfilename" can be a regular expression (if prefixed with a '%' character).</p><p>"pattern" is a string or regular expression. If the logfile data matches "pattern", it will trigger the "msgs" column to change color. If no "color" parameter is present, the default is to go "red" when the pattern is matched. To match against a regular expression, "pattern" must begin with a '%' sign - e.g "%WARNING|NOTICE" will match any lines containing either of these two words. Note that Xymon defaults to case-insensitive pattern matching; if that is not what you want, put "(?-i)" between the "%" and the regular expression to turn this off. E.g. "%(?-i)WARNING" will match the word WARNING only when it is upper-case.</p><p>"excludepattern" is a string or regular expression that can be used to filter out any unwanted strings that happen to match "pattern".</p><p>The <strong>OPTIONAL</strong> keyword causes the check to be skipped if the logfile does not exist.</p><p>Example: Trigger a red alert when the string "ERROR" appears in the "/var/adm/syslog" file:</p><p>	LOG /var/adm/syslog ERROR</p><p>Example: Trigger a yellow warning on all occurrences of the word "WARNING" or "NOTICE" in the "daemon.log" file, except those from the "lpr" system:</p><p>	LOG /var/log/daemon.log %WARNING|NOTICE COLOR=yellow IGNORE=lpr</p><p>Defaults:</p><p>	color="red", no "excludepattern".</p><p>Note that no logfiles are checked by default. Any log data reported by a client will just show up on the "msgs" column with status OK (green).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES STATUS COLUMN SETTINGS</h2>
        <div class="sectioncontent">
<p><strong>FILE filename [color] [things to check] [OPTIONAL] [TRACK]</strong></p><p><strong>DIR directoryname [color] [size&lt;MAXSIZE] [size&gt;MINSIZE] [TRACK]</strong></p><p>These entries control the status of the "files" column. They allow you to check on various data for files and directories.</p><p><strong>filename</strong> and <strong>directoryname</strong> are names of files or directories, with a full path. You can use a regular expression to match the names of files and directories reported by the client, if you prefix the expression with a '%' character.</p><p><strong>color</strong> is the color that triggers when one or more of the checks fail.</p><p>The <strong>OPTIONAL</strong> keyword causes this check to be skipped if the file does not exist. E.g. you can use this to check if files that should be temporary are not deleted, by checking that they are not older than the max time you would expect them to stick around, and then using OPTIONAL to ignore the state where no files exist.</p><p>The <strong>TRACK</strong> keyword causes the size of the file or directory to be tracked in an RRD file, and presented in a graph on the "files" status display.</p><p>For files, you can check one or more of the following:</p>
<dl class='dl-vertical'>
  <dt>
    noexist
  </dt>
  <dd>
    <p>triggers a warning if the file exists. By default, a warning is triggered for files that have a FILE entry, but which do not exist.</p>
  </dd>
  <dt>
    ifexist
  </dt>
  <dd>
    <p>only checks the file if it exists. If the file is reported as missing by the client, it is ignored.</p>
  </dd>
  <dt>
    type=TYPE
  </dt>
  <dd>
    <p>where TYPE is one of "file", "dir", "char", "block", "fifo", or "socket". Triggers warning if the file is not of the specified type.</p>
  </dd>
  <dt>
    ownerid=OWNER
  </dt>
  <dd>
    <p>triggers a warning if the owner does not match what is listed here. OWNER is specified either with the numeric uid, or the user name.</p>
  </dd>
  <dt>
    groupid=GROUP
  </dt>
  <dd>
    <p>triggers a warning if the group does not match what is listed here. GROUP is specified either with the numeric gid, or the group name.</p>
  </dd>
  <dt>
    mode=MODE
  </dt>
  <dd>
    <p>triggers a warning if the file permissions are not as listed. MODE is written in the standard octal notation, e.g. "644" for the rw-r--r-- permissions.</p>
  </dd>
  <dt>
    size&lt;MAX.SIZE and size&gt;MIN.SIZE
  </dt>
  <dd>
    <p>triggers a warning it the file size is greater than MAX.SIZE or less than MIN.SIZE, respectively. For filesizes, you can use the letters "K", "M", "G" or "T" to indicate that the filesize is in Kilobytes, Megabytes, Gigabytes or Terabytes, respectively. If there is no such modifier, Kilobytes is assumed. E.g. to warn if a file grows larger than 1MB, use <strong>size&lt;1024M</strong>.</p>
  </dd>
  <dt>
    mtime&gt;MIN.MTIME mtime&lt;MAX.MTIME
  </dt>
  <dd>
    <p>checks how long ago the file was last modified (in seconds). E.g. to check if a file was updated within the past 10 minutes (600 seconds): <strong>mtime&lt;600</strong>. Or to check that a file has NOT been updated in the past 24 hours: <strong>mtime&gt;86400</strong>.</p>
  </dd>
  <dt>
    mtime=TIMESTAMP
  </dt>
  <dd>
    <p>checks if a file was last modified at TIMESTAMP.  TIMESTAMP is a unix epoch time (seconds since midnight Jan 1 1970 UTC).</p>
  </dd>
  <dt>
    ctime&gt;MIN.CTIME, ctime&lt;MAX.CTIME, ctime=TIMESTAMP
  </dt>
  <dd>
    <p>acts as the mtime checks, but for the ctime timestamp (when the directory entry of the file was last changed, eg. by chown, chgrp or chmod).</p>
  </dd>
  <dt>
    md5=MD5SUM, sha1=SHA1SUM, rmd160=RMD160SUM
  </dt>
  <dd>
    <p>trigger a warning if the file checksum using the MD5, SHA1 or RMD160 message digest algorithms do not match the one configured here. Note: The "file" entry in the <a href="../man5/client-local.cfg.5.html"><strong>client-local.cfg</strong>(5)</a></em> file must specify which algorithm to use.</p>
  </dd>

</dl>
<p>For directories, you can check one or more of the following:</p>
<dl class='dl-vertical'>
  <dt>
    size&lt;MAX.SIZE and size&gt;MIN.SIZE
  </dt>
  <dd>
    <p>triggers a warning it the directory size is greater than MAX.SIZE or less than MIN.SIZE, respectively. Directory sizes are reported in whatever unit the <strong>du</strong> command on the client uses - often KB or diskblocks - so MAX.SIZE and MIN.SIZE must be given in the same unit.</p>
  </dd>

</dl>
<p>Experience shows that it can be difficult to get these rules right. Especially when defining minimum/maximum values for file sizes, when they were last modified etc. The one thing you must remember when setting up these checks is that the rules describe criteria that must be met - only when they are met will the status be green.</p><p>So "mtime&lt;600" means "the difference between current time and the mtime of the file must be less than 600 seconds - if not, the file status will go red".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PORTS STATUS COLUMN SETTINGS</h2>
        <div class="sectioncontent">
<p><strong>PORT criteria [MIN=mincount] [MAX=maxcount] [COLOR=color] [TRACK=id] [TEXT=displaytext]</strong></p><p>The "netstat" listing sent by the client will be scanned for how many sockets match the <strong>criteria</strong> listed.  The criteria you can use are:</p>
<dl class='dl-vertical'>
  <dt>
    LOCAL=addr
  </dt>
  <dd>
    <p>"addr" is a (partial) local address specification in the format used on the output from netstat.</p>
  </dd>
  <dt>
    EXLOCAL=addr
  </dt>
  <dd>
    <p>Exclude certain local addresses from the rule.</p>
  </dd>
  <dt>
    REMOTE=addr
  </dt>
  <dd>
    <p>"addr" is a (partial) remote address specification in the format used on the output from netstat.</p>
  </dd>
  <dt>
    EXREMOTE=addr
  </dt>
  <dd>
    <p>Exclude certain remote addresses from the rule.</p>
  </dd>
  <dt>
    STATE=state
  </dt>
  <dd>
    <p>Causes only the sockets in the specified state to be included, "state" is usually LISTEN or ESTABLISHED but can be any socket state reported by the clients "netstat" command.</p>
  </dd>
  <dt>
    EXSTATE=state
  </dt>
  <dd>
    <p>Exclude certain states from the rule.</p>
  </dd>

</dl>
<p>"addr" is typically "10.0.0.1:80" for the IP 10.0.0.1, port 80. Or "*:80" for any local address, port 80. Note that the Xymon clients normally report only the numeric data for IP-addresses and port-numbers, so you must specify the port number (e.g. "80") instead of the service name ("www").</p><p>"addr" and "state" can also be a Perl-compatiable regular expression, e.g. "LOCAL=%[.:](80|443)" can be used to find entries in the netstat local port for both http (port 80) and https (port 443). In that case, portname or state must begin with "%" followed by the reg.expression.</p><p>The socket count found is then matched against the min/max settings defined here. If the count is outside the thresholds, the color of the "ports" status changes to "color".  To check for a socket that must NOT exist: Set minimum and maximum to 0.</p><p>The optional <strong>TRACK=id</strong> setting causes Xymon to track the number of sockets found in an RRD file, and put this into a graph which is shown on the "ports" status display. The <strong>id</strong> setting is a simple text string which will be used as the legend for the graph, and also as part of the RRD filename. It is recommended that you use only letters and digits for the ID.</p><p>Note that the sockets counts which are tracked are only performed once when the client does a poll cycle - i.e. the counts represent snapshots of the system state, not an average value over the client poll cycle. Therefore there may be peaks or dips in the actual sockets counts which will not show up in the graphs, because they happen while the Xymon client is not doing any polling.</p><p>The <strong>TEXT=displaytext</strong> option affects how the port appears on the "ports" status page. By default, the port is listed with the local/remote/state rules as identification, but this may be somewhat difficult to understand. You can then use e.g. "TEXT=Secure Shell" to make these ports appear with the name "Secure Shell" instead.</p><p>Defaults: mincount=1, maxcount=-1 (unlimited), color="red". Note: No ports are checked by default.</p><p>Example: Check that the SSH daemon is listening on port 22. Track the number of active SSH connections, and warn if there are more than 5.</p>
<pre>
        PORT LOCAL=%[.:]22$ STATE=LISTEN "TEXT=SSH listener"
</pre>

<pre>
        PORT LOCAL=%[.:]22$ STATE=ESTABLISHED MAX=5 TRACK=ssh TEXT=SSH
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SVCS status (Microsoft Windows clients)</h2>
        <div class="sectioncontent">
<p><strong>SVC servicename status=(started|stopped) [startup=automatic|disabled|manual]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DS - RRD based status override</h2>
        <div class="sectioncontent">
<p><strong>DS column filename:dataset rules COLOR=colorname TEXT=explanation</strong></p><p>"column" is the statuscolumn that will be modified. "filename" is the name of the RRD file holding the data you use for comparison. "dataset" is the name of the dataset in the RRD file - the "rrdtool info" command is useful when determining these. "rules" determine when to apply the override. You can use "&gt;", "&gt;=", "&lt;" or "&lt;=" to compare the current measurement value against one or more thresholds. "explanation" is a text that will be shown to explain the override - you can use some placeholders in the text: "&N" is replaced with the name of the dataset, "&V" is replaced with the current value, "&L" is replaced by the low threshold, "&U" is replaced with the upper threshold.</p><p>NOTE: This rule uses the <strong>raw</strong> data value from a client to examine the rules. So this type of test is only really suitable for datasets that are of the "GAUGE" type. It cannot be used meaningfully for datasets that use "COUNTER" or "DERIVE" - e.g. the datasets that are used to capture network packet traffic - because the data stored in the RRD for COUNTER-based datasets undergo a transformation (calculation) when going into the RRD. Xymon does not have direct access to the calculated data.</p><p>Example: Flag "conn" status a yellow if responsetime exceeds 100 msec.</p><p>	DS conn tcp.conn.rrd:sec &gt;0.1 COLOR=yellow TEXT="Response time &V exceeds &U seconds"</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MQ Series SETTINGS</h2>
        <div class="sectioncontent">
<p><strong>MQ_QUEUE queuename [age-warning=N] [age-critical=N] [depth-warning=N] [depth-critical=N]</strong></p><p><strong>MQ_CHANNEL channelname [warning=PATTERN] [alert=PATTERN]</strong></p><p>This is a set of checks for checking the health of IBM MQ message-queues. It requires the "mq.sh" or similar collector module to run on a node with access to the MQ "Queue Manager" so it can report the status of queues and channels.</p><p>The MQ_QUEUE setting checks the health of a single queue: You can warn (yellow) or alert (red) based on the depth of the queue, and/or the age of the oldest entry in the queue. These values are taken directly from the output generated by the "runmqsc" utility.</p><p>The MQ_CHANNEL setting checks the health of a single MQ channel: You can warn or alert based on the reported status of the channel. The PATTERN is a normal pattern, i.e. either a list of status keywords, or a regular expression pattern.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHANGING THE DEFAULT SETTINGS</h2>
        <div class="sectioncontent">
<p>If you would like to use different defaults for the settings described above, then you can define the new defaults after a DEFAULT line. E.g. this would explicitly define all of the default settings:</p><ul>
<li>
<pre>
DEFAULT
	UP      1h
	LOAD    5.0 10.0
	DISK    * 90 95
	MEMPHYS 100 101
	MEMSWAP 50 80
	MEMACT  90 97
</pre>
</li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RULES TO SELECT HOSTS</h2>
        <div class="sectioncontent">
<p>All of the settings can be applied to a group of hosts, by preceding them with rules. A rule defines of one of more filters using these keywords (note that this is identical to the rule definitions used in the <a href="../man5/alerts.cfg.5.html"><strong>alerts.cfg</strong>(5)</a></em> file).</p><p><strong>PAGE=targetstring</strong> Rule matching an alert by the name of the page in Xymon. "targetstring" is the path of the page as defined in the hosts.cfg file. E.g. if you have this setup:</p><ul>
<li>
<pre>
page servers All Servers
subpage web Webservers
10.0.0.1 www1.foo.com
subpage db Database servers
10.0.0.2 db1.foo.com
</pre>
</li>
</ul><p>Then the "All servers" page is found with <strong>PAGE=servers</strong>, the "Webservers" page is <strong>PAGE=servers/web</strong> and the "Database servers" page is <strong>PAGE=servers/db</strong>. Note that you can also use regular expressions to specify the page name, e.g. <strong>PAGE=%.*/db</strong> would find the "Database servers" page regardless of where this page was placed in the hierarchy.</p><p>The top-level page has a the fixed name <strong>/</strong>, e.g. <strong>PAGE=/</strong> would match all hosts on the Xymon frontpage. If you need it in a regular expression, use <strong>PAGE=%^/</strong> to avoid matching the forward-slash present in subpage-names.</p><p><strong>EXPAGE=targetstring</strong> Rule excluding a host if the pagename matches.</p><p><strong>HOST=targetstring</strong> Rule matching a host by the hostname. "targetstring" is either a comma-separated list of hostnames (from the hosts.cfg file), "*" to indicate "all hosts", or a Perl-compatible regular expression. E.g. "HOST=dns.foo.com,www.foo.com" identifies two specific hosts; "HOST=%www.*.foo.com EXHOST=www-test.foo.com" matches all hosts with a name beginning with "www", except the "www-test" host.</p><p><strong>EXHOST=targetstring</strong> Rule excluding a host by matching the hostname.</p><p><strong>CLASS=classname</strong> Rule match by the client class-name. You specify the class-name for a host when starting the client through the "--class=NAME" option to the runclient.sh script. If no class is specified, the host by default goes into a class named by the operating system.</p><p><strong>EXCLASS=classname</strong> Exclude all hosts belonging to "classname" from this rule.</p><p><strong>DISPLAYGROUP=groupstring</strong> Rule matching an alert by the text of the display-group (text following the group, group-only, group-except heading) in the hosts.cfg file. "groupstring" is the text for the group, stripped of any HTML tags. E.g. if you have this setup:</p><ul>
<li>
<pre>
group Web
10.0.0.1 www1.foo.com
10.0.0.2 www2.foo.com
group Production databases
10.0.1.1 db1.foo.com
</pre>
</li>
</ul><p>Then the hosts in the Web-group can be matched with <strong>DISPLAYGROUP=Web</strong>, and the database servers can be matched with <strong>DISPLAYGROUP="Production databases"</strong>. Note that you can also use regular expressions, e.g. <strong>DISPLAYGROUP=%database</strong>. If there is no group-setting for the host, use "DISPLAYGROUP=NONE".</p><p><strong>EXDISPLAYGROUP=groupstring</strong> Rule excluding a group by matching the display-group string.</p><p><strong>TIME=timespecification</strong> Rule matching by the time-of-day. This is specified as the DOWNTIME time specification in the hosts.cfg file.  E.g. "TIME=W:0800:2200" applied to a rule will make this rule active only on week-days between 8AM and 10PM.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIRECTING ALERTS TO GROUPS</h2>
        <div class="sectioncontent">
<p>For some tests - e.g. "procs" or "msgs" - the right group of people to alert in case of a failure may be different, depending on which of the client rules actually detected a problem. E.g. if you have PROCS rules for a host checking both "httpd" and "sshd" processes, then the Web admins should handle httpd-failures, whereas "sshd" failures are handled by the Unix admins.</p><p>To handle this, all rules can have a "GROUP=groupname" setting. When a rule with this setting triggers a yellow or red status, the groupname is passed on to the Xymon alerts module, so you can use it in the alert rule definitions in <a href="../man5/alerts.cfg.5.html"><strong>alerts.cfg</strong>(5)</a></em> to direct alerts to the correct group of people.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RULES: APPLYING SETTINGS TO SELECTED HOSTS</h2>
        <div class="sectioncontent">
<p>Rules must be placed after the settings, e.g.</p><ul>
<li>
<pre>
LOAD 8.0 12.0  HOST=db.foo.com TIME=*:0800:1600
</pre>
</li>
</ul><p>If you have multiple settings that you want to apply the same rules to, you can write the rules *only* on one line, followed by the settings. E.g.</p><ul>
<li>
<pre>
HOST=%db.*.foo.com TIME=W:0800:1600
	LOAD 8.0 12.0
	DISK /db  98 100
	PROC mysqld 1
</pre>
</li>
</ul><p>will apply the three settings to all of the "db" hosts on week-days between 8AM and 4PM. This can be combined with per-settings rule, in which case the per-settings rule overrides the general rule; e.g.</p><ul>
<li>
<pre>
HOST=%.*.foo.com
	LOAD 7.0 12.0 HOST=bax.foo.com
	LOAD 3.0 8.0
</pre>
</li>
</ul><p>will result in the load-limits being 7.0/12.0 for the "bax.foo.com" host, and 3.0/8.0 for all other foo.com hosts.</p><p>The entire file is evaluated from the top to bottom, and the first match found is used. So you should put the specific settings first, and the generic ones last.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>For the LOG, FILE and DIR checks, it is necessary also to configure the actual file- and directory-names in the <a href="../man5/client-local.cfg.5.html"><strong>client-local.cfg</strong>(5)</a></em> file. If the filenames are not listed there, the clients will not collect any data about these files/directories, and the settings in the analysis.cfg file will be silently ignored.</p><p>The ability to compute file checksums with MD5, SHA1 or RMD160 should not be used for general-purpose file integrity checking, since the overhead of calculating these on a large number of files can be significant. If you need this, look at tools designed for this purpose - e.g. Tripwire or AIDE.</p><p>At the time of writing (april 2006), the SHA-1 and RMD160 algorithms are considered cryptographically safe. The MD5 algorithm has been shown to have some weaknesses, and is not considered strong enough when a high level of security is required.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO analysis.cfg&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/xymond_client.8.html"><strong>xymond_client</strong>(8)</a>, <a href="../man5/client-local.cfg.5.html"><strong>client-local.cfg</strong>(5)</a>, <strong>xymond</strong>(8), <a href="../man7/xymon.7.html"><strong>xymon</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="anacrontab.5.html"><span aria-hidden="true">&larr;</span> anacrontab.5: Configuration file for anacron</a></li>
   <li class="next"><a href="and.conf.5.html">and.conf.5: General configuration parameters for the auto nice daemon. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
