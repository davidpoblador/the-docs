<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>nsca-ng.cfg: Nsca-ng server configuration file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Nsca-ng server configuration file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="nsca-ng.cfg (5) manual">
  <meta name="twitter:description" content="Nsca-ng server configuration file">
  <meta name="twitter:image" content="https://www.carta.tech/images/nsca-ng-server-nsca-ng.cfg-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/nsca-ng.cfg.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="nsca-ng.cfg (5) manual" />
  <meta property="og:description" content="Nsca-ng server configuration file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nsca-ng-server-nsca-ng.cfg-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">nsca-ng.cfg<small> (5)</small></h1>
        <p class="lead">Nsca-ng server configuration file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/nsca-ng.cfg.5.html">
      <span itemprop="name">nsca-ng.cfg: Nsca-ng server configuration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nsca-ng-server/">
      <span itemprop="name">nsca-ng-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/nsca-ng.cfg.5.html">
      <span itemprop="name">nsca-ng.cfg: Nsca-ng server configuration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/etc/nsca-ng.cfg</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> process reads configuration data from the file specified with <strong>-c</strong> on the command line or from <em>/etc/nsca-ng.cfg</em>.</p><h3>File Format</h3>
<p>Zero or more global settings and one or more authorizations must be defined in the configuration file (see the <strong>Global Settings</strong> subsection and the <strong>Authorizations</strong> subsection, respectively). They may appear in arbitrary order. An authorization is specified using the <strong>authorize</strong> keyword followed by a (possibly quoted) client identity string and a brace-enclosed block of corresponding authorization settings. However, an authorization setting may also be specified as a global setting outside of these <strong>authorize</strong> sections. In this case, it serves as a global fallback for authorization sections that don't define the setting in question.</p><p>Global settings and authorization settings are defined by specifying a variable name followed by an equals sign (&ldquo;=&rdquo;) and a value (or possibly a list of values). Values can be strings, integers, or floating-point numbers. Strings have to be enclosed in single or double quotes if they contain whitespace characters, hash mark characters, or literal quotation marks. Otherwise, quoting is optional. To specify a literal single or double quote in a string, either escape it by preceding it with a backslash (&ldquo;&#92;&rdquo;) or quote the string using the other quote character. A literal backslash must be preceded with a second backslash if the string is enclosed in double quotes.</p><p>A variable can be set to the value of an environment variable by specifying <strong>${</strong><em>FOO</em><strong>},</strong> where <em>FOO</em> is the name of the environment variable. The same can be done by specifying <strong>${</strong><em>FOO</em><strong>:-</strong><em>bar</em><strong>},</strong> except that in this case, the value <em>bar</em> will be assigned when the environment variable <em>FOO</em> is not set.</p><p>Any whitespace surrounding tokens is ignored. Empty lines and comments are also ignored. Comments are introduced with a hash mark character (&ldquo;#&rdquo;) and span to the end of the line. If the last character of a line is a backslash (&ldquo;&#92;&rdquo;), the subsequent line is treated as a continuation of the current line (and the backslash is otherwise ignored).</p><p>The special directive <strong>include(&quot;</strong><em>file</em><strong>&quot;)</strong> tells <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> to treat the contents of the specified <em>file</em> as if those contents had appeared at the point where this directive appears. If a directory is specified instead of a <em>file</em>, all files with a <em>.cfg</em> or <em>.conf</em> extension in this directory and all subdirectories will be included. Symbolic links are followed.</p><p>In the following subsections, the type of each value is denoted after an equals sign in angle brackets.</p>
<h3>Global Settings</h3>
<p>The <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> server recognizes the following global variables.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>chroot</strong>&nbsp;=&nbsp;&lt;<em>string</em>&gt;</p>
  </dt>
  <dd>
    <p>On startup, perform a <a href="../man2/chroot.2.html"><strong>chroot</strong>(2)</a> operation to the specified directory. By default, <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> does not call <a href="../man2/chroot.2.html"><strong>chroot</strong>(2)</a>. If this directive is used, the <strong>command_file</strong>, <strong>pid_file</strong>, and <strong>temp_directory</strong> must be specified relative to this directory.</p>
  </dd>
  <dt>
    <p><strong>command_file</strong>&nbsp;=&nbsp;&lt;<em>string</em>&gt;</p>
  </dt>
  <dd>
    <p>Submit monitoring commands to the specified path name. This should be the named pipe <small>(FIFO)</small> that Nagios (or a compatible monitoring solution) checks for external commands to process. The default is <em>/var/nagios/rw/nagios.cmd</em>. The specified value will be overridden if <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> is called with the <strong>-C</strong> option.</p>
  </dd>
  <dt>
    <p><strong>listen</strong>&nbsp;=&nbsp;&lt;<em>string</em>&gt;</p>
  </dt>
  <dd>
    <p>Bind to the specified <small>IP</small> address or host name. The default setting is &ldquo;*&rdquo;, which tells <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> to listen on all available interfaces. A colon (&ldquo;:&rdquo;) followed by a service name or port number may be appended to override the default port (5668) used by the <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> server. The specified value will be ignored if <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> is called with the <strong>-b</strong> option, of if it is socket activated by <a href="../man1/systemd.1.html"><strong>systemd</strong>(1)</a>.</p>
  </dd>
  <dt>
    <p><strong>log_level</strong>&nbsp;=&nbsp;&lt;<em>integer</em>&gt;</p>
  </dt>
  <dd>
    <p>Use the specified log level, which must be an integer value between 0 and 5 inclusive. A value of 0 tells <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> to generate only fatal error messages, 1 adds non-fatal error messages, 2 adds warnings, 3 additionally spits out every submitted command (plus startup and shutdown notices), 4 also logs each message sent or received at the protocol level, and 5 generates additional debug output. The default log level is 3. The specified value will be overridden if <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> is called with the <strong>-l</strong> option.</p>
  </dd>
  <dt>
    <p><strong>max_command_size</strong>&nbsp;=&nbsp;&lt;<em>integer</em>&gt;</p>
  </dt>
  <dd>
    <p>Refuse monitoring commands (including check result submissions) which are longer than the specified number of bytes. Setting this variable to 0 tells <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> to accept commands of arbitrary length. The default value is 16384.</p>
  </dd>
  <dt>
    <p><strong>max_queue_size</strong>&nbsp;=&nbsp;&lt;<em>integer</em>&gt;</p>
  </dt>
  <dd>
    <p>Don't queue more than the specified number of megabytes worth of monitoring commands while Nagios isn't running (or not reading the command file). When the amount of available data exceeds this threshold, the queued data is thrown away. If this variable is set to 0, <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> queues an unlimited amount of data (until it exits due to running out of memory). The default value is 1024 (i.e., 1 gigabyte).</p>
  </dd>
  <dt>
    <p><strong>pid_file</strong>&nbsp;=&nbsp;&lt;<em>string</em>&gt;</p>
  </dt>
  <dd>
    <p>During startup, try to create and lock the specified file and write the process <small>ID</small> of the <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> daemon into it. Bail out if another process holds a lock on that file. By default, no such <small>PID</small> file is written. The specified value will be overridden if <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> is called with the <strong>-p</strong> option.</p>
  </dd>
  <dt>
    <p><strong>temp_directory</strong>&nbsp;=&nbsp;&lt;<em>string</em>&gt;</p>
  </dt>
  <dd>
    <p>Write temporary files to the specified directory. Temporary files are only written if clients submit very large commands (which cannot be written to the named pipe atomically). It is recommended to specify a directory which resides on a memory file system. By default, <em>/tmp</em> is used.</p>
  </dd>
  <dt>
    <p><strong>timeout</strong>&nbsp;=&nbsp;&lt;<em>floating-point</em>&gt;</p>
  </dt>
  <dd>
    <p>Close the connection if a client didn't show any activity for the specified number of seconds. If this value is set to 0.0, <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> won't enforce connection timeouts. The default setting is 60.0 seconds.</p>
  </dd>
  <dt>
    <p><strong>tls_ciphers</strong>&nbsp;=&nbsp;&lt;<em>string</em>&gt;</p>
  </dt>
  <dd>
    <p>Limit the acceptable <small>TLS-PSK</small> cipher suites to the specified list of ciphers. The format of the string is described in the <strong>ciphers</strong>(1) manual. By default, the ciphers in the list <small>PSK-AES256-CBC-SHA:PSK-AES128-CBC-SHA:PSK-3DES-EDE-CBC-SHA:PSK-RC4-SHA</small> will be accepted.</p>
  </dd>
  <dt>
    <p><strong>user</strong>&nbsp;=&nbsp;&lt;<em>string</em>&gt;</p>
  </dt>
  <dd>
    <p>Switch to the specified user, and to the groups the user belongs to. This is done early on startup: after the configuration file has been read, but before the listening socket and (possibly) the <small>PID</small> file are created. By default, <a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a> runs with the privileges of the invoking user.</p>
  </dd>

</dl>

<h3>Authorizations</h3>
<p>As mentioned above, an authorization section is introduced with the <strong>authorize</strong> keyword and a client identity field followed by a brace-delimited block of one or more authorization settings. A client provides its identity during the connection handshake. The server uses the provided identity string for looking up the <strong>authorize</strong> section applicable to the client. The corresponding section, if any, defines the authentication and authorization settings for the client in question. If no section explicitly defined for this client identity is found, but a section for the special client identity &quot;*&quot; (including the quotes) is defined, this section is used as a fallback. Note that no other wildcard characters are available, and that the &ldquo;*&rdquo; character has no special meaning in the client identity field except when specified exactly as described.</p><p>Within the brace-delimited block of an authorization section, values may be assigned to the variables listed below. The pattern strings assigned to the <strong>commands</strong>, <strong>hosts</strong>, and <strong>services</strong> variables are <small>POSIX</small> &ldquo;extended&rdquo; regular expressions, but with an implicit &ldquo;^&rdquo; at the beginning and &ldquo;$&rdquo; at the end of the patterns. Multiple patterns can be specified as a brace-enclosed, comma-separated list; check results and commands will then be accepted if they match any of the specified patterns. Commands and check results will be rejected unless these settings authorize the client to submit them.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>commands</strong>&nbsp;=&nbsp;&lt;<em>(list of) string(s)</em>&gt;</p>
  </dt>
  <dd>
    <p>Match the specified regular expression(s) against submitted monitoring commands and accept commands that match any of these expressions. The patterns are matched against the full command string supplied by the client, <em>except</em> for the leading bracketed timestamp and any whitespace following that timestamp.</p>
  </dd>
  <dt>
    <p><strong>hosts</strong>&nbsp;=&nbsp;&lt;<em>(list of) string(s)</em>&gt;</p>
  </dt>
  <dd>
    <p>Match the specified regular expression(s) against the &ldquo;host name&rdquo; field of client-supplied <small>PROCESS_HOST_CHECK_RESULT</small> commands and accept such commands if they match any of these expressions.</p>
  </dd>
  <dt>
    <p><strong>password</strong>&nbsp;=&nbsp;&lt;<em>string</em>&gt;</p>
  </dt>
  <dd>
    <p>Reject connections from clients that don't use the specified password. This setting is mandatory.</p>
  </dd>
  <dt>
    <p><strong>services</strong>&nbsp;=&nbsp;&lt;<em>(list of) string(s)</em>&gt;</p>
  </dt>
  <dd>
    <p>Match the specified regular expression(s) against the &ldquo;service description&rdquo; field of client-supplied <small>PROCESS_SERVICE_CHECK_RESULT</small> commands and accept such commands if they match any of these expressions. If a specified string includes one or more at signs (&ldquo;@&rdquo;), only the part preceding the last of these at signs is matched against the &ldquo;service description&rdquo; field. The part following this at sign is used as a separate pattern which is matched against the &ldquo;host name&rdquo; field of the same command. A service check result is then accepted only if both matches succeed for a given command.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The <strong>/etc/nsca-ng.cfg</strong> file might look similar to the following example.</p>
<pre>
user = "nagios"
chroot = "/var/nagios" # Other paths are relative to this one!
command_file = "/rw/nagios.cmd"
pid_file = "/run/nsca-ng.pid"
temp_directory = "/dev/shm"
listen = "monitoring.example.com:5668"
tls_ciphers = "PSK-AES256-CBC-SHA"
log_level = 3
max_command_size = 65536
max_queue_size = 128
timeout = 15.0

#
# Authenticated "root" clients may submit arbitrary check
# results and any other monitoring commands (see:
# &lt;http://nagios.org/developerinfo/externalcommands/&gt;).
#
authorize "root" {
    password = "g3m25sMCUAO4NecZGld1H4xcJ9uDWvhH"
    commands = ".*"
}

#
# Authenticated "checker" clients may submit arbitrary check
# results, but no other commands.
#
authorize "checker" {
    password = "ilzNanlE9XjMLdjrMkXnk09XBCTFQrj5"
    hosts = ".*"
    services = ".*"
}

#
# Authenticated "web-checker" clients may submit check results
# for arbitrary services on hosts whose names begin with "www".
#
authorize "web-checker" {
    password = "m2uaIWwiq3AIqN55m3QdjwptkU1Q4Oov"
    services = ".+@www.*"
}

#
# Authenticated "nsca-checker" clients may talk to the NSCA-ng
# server, but may not submit anything to Nagios.
#
authorize "nsca-checker" {
    password = "ceOKwxpz14lKXroC4yUjJZbov6VAyKuT"
}

#
# Other authenticated clients may submit check results for the
# "disk", "swap", and "load" services on arbitrary hosts.
#
authorize "*" {
    password = "awHW5vxr3DcA9EvcUC9T3a90QfEexsWd"
    services = {
        "disk",
        "swap",
        "load"
    }
}
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>Please set the permissions appropriately to make sure that only authorized users can access the <strong>/etc/nsca-ng.cfg</strong> file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO nsca-ng.cfg&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/nsca-ng.8.html"><strong>nsca-ng</strong>(8)</a>, <a href="../man8/send_nsca.8.html"><strong>send_nsca</strong>(8)</a>, <a href="../man5/send_nsca.cfg.5.html"><strong>send_nsca.cfg</strong>(5)</a>, <a href="../man7/regex.7.html"><strong>regex</strong>(7)</a></p><p><em>http://www.nagios.org/developerinfo/externalcommands/</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Holger Weiss &lt;holger@weiss.in-berlin.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="nrports.5.html"><span aria-hidden="true">&larr;</span> nrports.5: Net/rom port configuration file.</a></li>
   <li class="next"><a href="glibc-source-nscd.conf.5.html">nscd.conf.5: Configuration file for name service caching daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
