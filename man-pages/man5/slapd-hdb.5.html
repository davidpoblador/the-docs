<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapd-hdb: Berkeley db backends to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Berkeley db backends to slapd">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="slapd-hdb (5) manual">
  <meta name="twitter:description" content="Berkeley db backends to slapd">
  <meta name="twitter:image" content="https://www.carta.tech/images/slapd-slapd-hdb-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/slapd-hdb.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="slapd-hdb (5) manual" />
  <meta property="og:description" content="Berkeley db backends to slapd" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/slapd-slapd-hdb-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapd-hdb<small> (5)</small></h1>
        <p class="lead">Berkeley db backends to slapd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapd-hdb.5.html">
      <span itemprop="name">slapd-hdb: Berkeley db backends to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/slapd/">
      <span itemprop="name">slapd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapd-hdb.5.html">
      <span itemprop="name">slapd-hdb: Berkeley db backends to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/etc/ldap/slapd.conf</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>bdb</strong> backend to <a href="../man8/slapd.8.html"><strong>slapd</strong>(8)</a> uses the Oracle Berkeley DB (BDB) package to store data. It makes extensive use of indexing and caching to speed data access.</p><p>Note that BDB is deprecated and support will be dropped in future OpenLDAP releases. Installations should use the <strong>mdb</strong> backend instead.</p><p><strong>hdb</strong> is a variant of the <strong>bdb</strong> backend that uses a hierarchical database layout which supports subtree renames. It is both more space-efficient and more execution-efficient than the <strong>bdb</strong> backend.  It is otherwise identical to the <strong>bdb</strong> behavior, and all the same configuration options apply.</p><p>It is noted that these options are intended to complement Berkeley DB configuration options set in the environment's <strong>DB_CONFIG</strong> file.  See Berkeley DB documentation for details on <strong>DB_CONFIG</strong> configuration options. Where there is overlap, settings in <strong>DB_CONFIG</strong> take precedence.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>These <strong>slapd.conf</strong> options apply to the <strong>bdb</strong> and <strong>hdb</strong> backend database. That is, they must follow a "database bdb" or "database hdb" line and come before any subsequent "backend" or "database" lines. Other database options are described in the <a href="../man5/slapd.conf.5.html"><strong>slapd.conf</strong>(5)</a> manual page.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>cachesize</strong><em></em><strong>&lt;integer&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the size in entries of the in-memory entry cache maintained by the <strong>bdb</strong> or <strong>hdb</strong> backend database instance. The default is 1000 entries.</p>
  </dd>
  <dt>
    <p><strong>cachefree</strong><em></em><strong>&lt;integer&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the number of entries to free from the entry cache when the cache reaches the <strong>cachesize</strong> limit. The default is 1 entry.</p>
  </dd>
  <dt>
    <p><strong>checkpoint</strong><em></em><strong>&lt;kbyte&gt;</strong><em>&lt;min&gt;</em></p>
  </dt>
  <dd>
    <p>Specify the frequency for checkpointing the database transaction log. A checkpoint operation flushes the database buffers to disk and writes a checkpoint record in the log. The checkpoint will occur if either <em>&lt;kbyte&gt;</em> data has been written or <em>&lt;min&gt;</em> minutes have passed since the last checkpoint. Both arguments default to zero, in which case they are ignored. When the <em>&lt;min&gt;</em> argument is non-zero, an internal task will run every <em>&lt;min&gt;</em> minutes to perform the checkpoint. See the Berkeley DB reference guide for more details.</p>
  </dd>
  <dt>
    <p><strong>checksum</strong></p>
  </dt>
  <dd>
    <p>Enable checksum validation of DB pages whenever they are read from disk. This setting can only be configured before any database files are created.</p>
  </dd>
  <dt>
    <p><strong>cryptfile</strong><em></em><strong>&lt;file&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the pathname of a file containing an encryption key to use for encrypting the database. Encryption is performed using Berkeley DB's implementation of AES. Note that encryption can only be configured before any database files are created, and changing the key can only be done after destroying the current database and recreating it. Encryption is not enabled by default, and some distributions of Berkeley DB do not support encryption.</p>
  </dd>
  <dt>
    <p><strong>cryptkey</strong><em></em><strong>&lt;key&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify an encryption key to use for encrypting the database. This option may be used when a separate <em>cryptfile</em> is not desired. Only one of <strong>cryptkey</strong> or <strong>cryptfile</strong> may be configured.</p>
  </dd>
  <dt>
    <p><strong>dbconfig</strong><em></em><strong>&lt;Berkeley-DB-setting&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify a configuration directive to be placed in the <strong>DB_CONFIG</strong> file of the database directory. The <strong>dbconfig</strong> directive is just a convenience to allow all necessary configuration to be set in the <strong>slapd.conf</strong> file. The options set using this directive will only be written to the <strong>DB_CONFIG</strong> file if no such file existed at server startup time, otherwise they are completely ignored. This allows one to set initial values without overwriting/destroying a <strong>DB_CONFIG</strong> file that was already customized through other means. This directive may be specified multiple times, as needed. For example:</p>
<pre>
	dbconfig set_cachesize 0 1048576 0
	dbconfig set_lg_bsize 2097152
</pre>

  </dd>
  <dt>
    <p><strong>dbnosync</strong></p>
  </dt>
  <dd>
    <p>Specify that on-disk database contents should not be immediately synchronized with in memory changes. Enabling this option may improve performance at the expense of data security. See the Berkeley DB reference guide for more details.</p>
  </dd>
  <dt>
    <p><strong>dbpagesize </strong> <em>&lt;dbfile&gt; &lt;size&gt;</em></p>
  </dt>
  <dd>
    <p>Specify the page size to use for a particular database file, in units of 1024 bytes. The default for the <strong>id2entry</strong> file is 16, the default for all other files depends on the size of the underlying filesystem's block size (typically 4 or 8). The maximum that BerkeleyDB supports is 64. This setting usually should not need to be changed, but if BerkeleyDB's "db_stat -d" shows a large amount of overflow pages in use in a file, setting a larger size may increase performance at the expense of data integrity. This setting only takes effect when a database is being newly created. See the Berkeley DB reference guide for more details.</p>
  </dd>
  <dt>
    <p><strong>directory</strong><em></em><strong>&lt;directory&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the directory where the BDB files containing this database and associated indexes live. A separate directory must be specified for each database. The default is <strong>/var/lib/ldap</strong>.</p>
  </dd>
  <dt>
    <p><strong>dirtyread</strong></p>
  </dt>
  <dd>
    <p>Allow reads of modified but not yet committed data. Usually transactions are isolated to prevent other operations from accessing uncommitted data. This option may improve performance, but may also return inconsistent results if the data comes from a transaction that is later aborted. In this case, the modified data is discarded and a subsequent search will return a different result.</p>
  </dd>
  <dt>
    <p><strong>dncachesize</strong><em></em><strong>&lt;integer&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the maximum number of DNs in the in-memory DN cache. Ideally this cache should be large enough to contain the DNs of every entry in the database. If set to a smaller value than the <strong>cachesize</strong> it will be silently increased to equal the <strong>cachesize</strong>. The default value is 0 which means unlimited, i.e. the DN cache will grow without bound.</p><p>It should be noted that the <strong>DN cache</strong> is allowed to temporarily grow beyond the configured size. It does this if many entries are locked when it tries to do a purge, because that means they're legitimately in use. Also, the <strong>DN cache</strong> never purges entries that have cached children, so depending on the shape of the DIT, it could have lots of cached DNs over the defined limit.</p>
  </dd>
  <dt>
    <p><strong>idlcachesize</strong><em></em><strong>&lt;integer&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the size of the in-memory index cache, in index slots. The default is zero. A larger value will speed up frequent searches of indexed entries. An <strong>hdb</strong> database needs a large <strong>idlcachesize</strong> for good search performance, typically three times the <strong>cachesize</strong> (entry cache size) or larger.</p>
  </dd>
  <dt>
    <p><strong>index </strong>{<em>&lt;attrlist&gt;</em>|<strong>default</strong>} [<strong>pres</strong>,<strong>eq</strong>,<strong>approx</strong>,<strong>sub</strong>,<em>&lt;special&gt;</em>]</p>
  </dt>
  <dd>
    <p>Specify the indexes to maintain for the given attribute (or list of attributes). Some attributes only support a subset of indexes. If only an <em>&lt;attr&gt;</em> is given, the indices specified for <strong>default</strong> are maintained. Note that setting a default does not imply that all attributes will be indexed. Also, for best performance, an <strong>eq</strong> index should always be configured for the <strong>objectClass</strong> attribute.</p><p>A number of special index parameters may be specified. The index type <strong>sub</strong> can be decomposed into <strong>subinitial</strong>, <strong>subany</strong>,<strong>and</strong> <strong>subfinal</strong> indices. The special type <strong>nolang</strong> may be specified to disallow use of this index by language subtypes. The special type <strong>nosubtypes</strong> may be specified to disallow use of this index by named subtypes. Note: changing <strong>index</strong> settings in <a href="../man5/slapd.conf.5.html"><strong>slapd.conf</strong>(5)</a> requires rebuilding indices, see <a href="../man8/slapindex.8.html"><strong>slapindex</strong>(8)</a>; changing <strong>index</strong> settings dynamically by LDAPModifying "cn=config" automatically causes rebuilding of the indices online in a background task.</p>
  </dd>
  <dt>
    <p><strong>linearindex</strong></p>
  </dt>
  <dd>
    <p>Tell <strong>slapindex</strong> to index one attribute at a time. By default, all indexed attributes in an entry are processed at the same time. With this option, each indexed attribute is processed individually, using multiple passes through the entire database. This option improves <strong>slapindex</strong> performance when the database size exceeds the <strong>dbcache</strong> size. When the <strong>dbcache</strong> is large enough, this option is not needed and will decrease performance. Also by default, <strong>slapadd</strong> performs full indexing and so a separate <strong>slapindex</strong> run is not needed. With this option, <strong>slapadd</strong> does no indexing and <strong>slapindex</strong> must be used.</p>
  </dd>
  <dt>
    <p><strong>lockdetect</strong><strong>{</strong>oldest<strong>|</strong>youngest<strong>|</strong>fewest<strong>|</strong>random<strong>|</strong>default<strong>}</strong></p>
  </dt>
  <dd>
    <p>Specify which transaction to abort when a deadlock is detected. The default is <strong>random</strong>.</p>
  </dd>
  <dt>
    <p><strong>mode</strong><em></em><strong>&lt;integer&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the file protection mode that newly created database index files should have. The default is 0600.</p>
  </dd>
  <dt>
    <p><strong>searchstack</strong><em></em><strong>&lt;depth&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the depth of the stack used for search filter evaluation. Search filters are evaluated on a stack to accommodate nested AND / OR clauses. An individual stack is assigned to each server thread. The depth of the stack determines how complex a filter can be evaluated without requiring any additional memory allocation. Filters that are nested deeper than the search stack depth will cause a separate stack to be allocated for that particular search operation. These allocations can have a major negative impact on server performance, but specifying too much stack will also consume a great deal of memory. Each search stack uses 512K bytes per level. The default stack depth is 16, thus 8MB per thread is used.</p>
  </dd>
  <dt>
    <p><strong>shm_key</strong><em></em><strong>&lt;integer&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify a key for a shared memory BDB environment. By default the BDB environment uses memory mapped files. If a non-zero value is specified, it will be used as the key to identify a shared memory region that will house the environment.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESS CONTROL</h2>
        <div class="sectioncontent">
<p>The <strong>bdb</strong> and <strong>hdb</strong> backends honor access control semantics as indicated in <a href="../man5/slapd.access.5.html"><strong>slapd.access</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/etc/ldap/slapd.conf</strong></p>
  </dt>
  <dd>
    <p>default <strong>slapd</strong> configuration file</p>
  </dd>
  <dt>
    <p><strong>DB_CONFIG</strong></p>
  </dt>
  <dd>
    <p>Berkeley DB configuration file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO slapd-hdb&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/slapd.conf.5.html"><strong>slapd.conf</strong>(5)</a>, <a href="../man5/slapd-config.5.html"><strong>slapd-config</strong>(5)</a>, <a href="../man5/slapd-mdb.5.html"><strong>slapd-mdb</strong>(5)</a>, <a href="../man8/slapd.8.html"><strong>slapd</strong>(8)</a>, <a href="../man8/slapadd.8.html"><strong>slapadd</strong>(8)</a>, <a href="../man8/slapcat.8.html"><strong>slapcat</strong>(8)</a>, <a href="../man8/slapindex.8.html"><strong>slapindex</strong>(8)</a>, Berkeley DB documentation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p><strong>OpenLDAP Software</strong> is developed and maintained by The OpenLDAP Project &lt;http://www.openldap.org/&gt;. <strong>OpenLDAP Software</strong> is derived from University of Michigan LDAP 3.3 Release. Originally begun by Kurt Zeilenga. Caching mechanisms originally designed by Jong-Hyuk Choi. Completion and subsequent work, as well as back-hdb, by Howard Chu.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slapd-dnssrv.5.html"><span aria-hidden="true">&larr;</span> slapd-dnssrv.5: Dns srv referral backend to slapd</a></li>
   <li class="next"><a href="slapd-ldap.5.html">slapd-ldap.5: Ldap backend to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
