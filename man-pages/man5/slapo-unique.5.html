<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapo-unique: Attribute uniqueness overlay to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Attribute uniqueness overlay to slapd">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="slapo-unique (5) manual">
  <meta name="twitter:description" content="Attribute uniqueness overlay to slapd">
  <meta name="twitter:image" content="https://www.carta.tech/images/slapd-slapo-unique-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/slapo-unique.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="slapo-unique (5) manual" />
  <meta property="og:description" content="Attribute uniqueness overlay to slapd" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/slapd-slapo-unique-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapo-unique<small> (5)</small></h1>
        <p class="lead">Attribute uniqueness overlay to slapd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapo-unique.5.html">
      <span itemprop="name">slapo-unique: Attribute uniqueness overlay to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/slapd/">
      <span itemprop="name">slapd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapo-unique.5.html">
      <span itemprop="name">slapo-unique: Attribute uniqueness overlay to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>/etc/ldap/slapd.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Attribute Uniqueness overlay can be used with a backend database such as <a href="../man5/slapd-bdb.5.html"><strong>slapd-bdb</strong>(5)</a> to enforce the uniqueness of some or all attributes within a scope. This subtree defaults to all objects within the subtree of the database for which the Uniqueness overlay is configured.</p><p>Uniqueness is enforced by searching the subtree to ensure that the values of all attributes presented with an <strong>add</strong>, <strong>modify</strong> or <strong>modrdn</strong> operation are unique within the scope. For example, if uniqueness were enforced for the <strong>uid</strong> attribute, the subtree would be searched for any other records which also have a <strong>uid</strong> attribute containing the same value. If any are found, the request is rejected.</p><p>The search is performed using the rootdn of the database, to avoid issues with ACLs preventing the overlay from seeing all of the relevant data. As such, the database must have a rootdn configured.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>These <strong>slapd.conf</strong> options apply to the Attribute Uniqueness overlay. They should appear after the <strong>overlay</strong> directive.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>unique_uri &lt;[strict ][ignore ]URI[URI...]...&gt;</strong></p>
  </dt>
  <dd>
    <p>Configure the base, attributes, scope, and filter for uniqueness checking.  Multiple URIs may be specified within a domain, allowing complex selections of objects.  Multiple <strong>unique_uri</strong> statements or <strong>olcUniqueURI</strong> attributes will create independent domains, each with their own independent lists of URIs and ignore/strict settings.</p><p>Keywords <strong>strict</strong> and <strong>ignore</strong> have to be enclosed in quotes (") together with the URI.</p><p>The LDAP URI syntax is a subset of <strong>RFC-4516,</strong> and takes the form:</p><p>ldap:///[base dn]?[attributes...]?scope[?filter]</p><p>The <strong>base dn</strong> defaults to that of the back-end database. Specified base dns must be within the subtree of the back-end database.</p><p>If no <strong>attributes</strong> are specified, the URI applies to all non-operational attributes.</p><p>The <strong>scope</strong> component is effectively mandatory, because LDAP URIs default to <strong>base</strong> scope, which is not valid for uniqueness, because groups of one object are always unique.  Scopes of <strong>sub</strong> (for subtree) and <strong>one</strong> for one-level are valid.</p><p>The <strong>filter</strong> component causes the domain to apply uniqueness constraints only to matching objects.  e.g. <strong>ldap:///?cn?sub?(sn=e*)</strong> would require unique <strong>cn</strong> attributes for all objects in the subtree of the back-end database whose <strong>sn</strong> starts with an e.</p><p>It is possible to assert uniqueness upon all non-operational attributes except those listed by prepending the keyword <strong>ignore</strong> If not configured, all non-operational (e.g., system) attributes must be unique. Note that the <strong>attributes</strong> list of an <strong>ignore</strong> URI should generally contain the <strong>objectClass</strong>, <strong>dc</strong>, <strong>ou</strong> and <strong>o</strong> attributes, as these will generally not be unique, nor are they operational attributes.</p><p>It is possible to set strict checking for the uniqueness domain by prepending the keyword <strong>strict.</strong> By default, uniqueness is not enforced for null values. Enabling <strong>strict</strong> mode extends the concept of uniqueness to include null values, such that only one attribute within a subtree will be allowed to have a null value.  Strictness applies to all URIs within a uniqueness domain, but some domains may be strict while others are not.</p>
  </dd>

</dl>
<p>It is not possible to set both URIs and legacy slapo-unique configuration parameters simultaneously. In general, the legacy configuration options control pieces of a single unfiltered subtree domain.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>unique_base &lt;basedn&gt;</strong></p>
  </dt>
  <dd>
    <p>This legacy configuration parameter should be converted to the <strong>base dn</strong> component of the above <strong>unique_uri</strong> style of parameter.</p>
  </dd>
  <dt>
    <p><strong>unique_ignore &lt;attribute...&gt;</strong></p>
  </dt>
  <dd>
    <p>This legacy configuration parameter should be converted to a <strong>unique_uri</strong> parameter with <strong>ignore</strong> keyword as described above.</p>
  </dd>
  <dt>
    <p><strong>unique_attributes &lt;attribute...&gt;</strong></p>
  </dt>
  <dd>
    <p>This legacy configuration parameter should be converted to a <strong>unique_uri</strong> parameter, as described above.</p>
  </dd>
  <dt>
    <p><strong>unique_strict &lt;attribute...&gt;</strong></p>
  </dt>
  <dd>
    <p>This legacy configuration parameter should be converted to a <strong>strict</strong> keyword prepended to a <strong>unique_uri</strong> parameter, as described above.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p><strong>unique_uri</strong> cannot be used with the old-style of configuration, and vice versa. <strong>unique_uri</strong> can implement everything the older system can do, however.</p><p>Typical attributes for the <strong>ignore ldap:///...</strong> URIs are intentionally not hardcoded into the overlay to allow for maximum flexibility in meeting site-specific requirements.</p><p>Replication and operations with <strong>manageDsaIt</strong> control are allowed to bypass this enforcement. It is therefore important that all servers accepting writes have this overlay configured in order to maintain uniqueness in a replicated DIT.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>/etc/ldap/slapd.conf</p>
  </dt>
  <dd>
    <p>default slapd configuration file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO slapo-unique&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/slapd.conf.5.html"><strong>slapd.conf</strong>(5)</a>, <a href="../man5/slapd-config.5.html"><strong>slapd-config</strong>(5)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slapo-translucent.5.html"><span aria-hidden="true">&larr;</span> slapo-translucent.5: Translucent proxy overlay to slapd</a></li>
   <li class="next"><a href="slapo-valsort.5.html">slapo-valsort.5: Value sorting overlay to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
