<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>zone.conf: Fiaif zone configuration files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Fiaif zone configuration files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="zone.conf (5) manual">
  <meta name="twitter:description" content="Fiaif zone configuration files">
  <meta name="twitter:image" content="https://www.carta.tech/images/fiaif-zone.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/zone.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="zone.conf (5) manual" />
  <meta property="og:description" content="Fiaif zone configuration files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fiaif-zone.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">zone.conf<small> (5)</small></h1>
        <p class="lead">Fiaif zone configuration files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/zone.conf.5.html">
      <span itemprop="name">zone.conf: Fiaif zone configuration files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fiaif/">
      <span itemprop="name">fiaif</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/zone.conf.5.html">
      <span itemprop="name">zone.conf: Fiaif zone configuration files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>fiaif.conf</strong> is the file that determines how zones should be set up in the firewall. A zone describes how traffic from other zones are allowed into a zone, and what packets are allowed from the zone itself. Zones are based upon the interface and the network the interface is connected to. It is possible to have multiple zones per interface, if and only if the interface is not declared public. See the PUBLIC variable for more information.</p><p>The general syntax of a configuration file is the same as for a <a href="../man1/bash.1.html"><strong>bash</strong>(1)</a> script, in which only variables should be present.</p><p>The variables can be on three forms:</p><p><strong>VARIABLE</strong></p><p>This is a simple variable. It can only be assigned a single value.</p><p><strong>VARIABLE_FOO</strong></p><p>The denotes a variable sequence. The <strong>FOO</strong> can be replaced by any keyword, allowing multiple values to be specified.</p><p><strong>VARIABLE[N]</strong></p><p>A variable array. Any number of values can be specified by increasing N for each value.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VARIABLES</h2>
        <div class="sectioncontent">
<h3>NAME</h3>
<p>Syntax: <em>&lt;name&gt;</em></p><p>Specify the name of the zone. This must be the same as specified in /etc/fiaif/fiaif.conf.</p>
<h3>DEV</h3>
<p>Syntax: <em>&lt;interface-name&gt;</em></p><p>Specifies the interface name in which this zone is connected.</p>
<h3>DYNAMIC</h3>
<p>Syntax: <em>0|1</em></p><p>Specifies whether the IP of the interface is dynamic (e.g., obtained via DHCP or unknown when FIAIF is started) or not. Disabling this provides better security, but this is not always an option given from ISPs.</p>
<h3>GLOBAL</h3>
<p>Syntax: <em>0|1</em></p><p>Is set to one, any packets originating from IANA reserved networks are discarded (except those specified in the NET and NET_EXTRA variables). This should be set on your internet connection. If this is set to true, the interface cannot have multible zone definitions.</p>
<h3>IP</h3>
<p>Syntax: <em>&lt;IP</em>address&gt;</p><p>The IP of the interface. This is only necessary to specify if <strong>DYNAMIC=0.</strong></p>
<h3>MASK</h3>
<p>Syntax: <em>&lt;network</em>mask&gt;</p><p>The network mask of the network connected to this interface. This is only necessary to specify if <strong>DYNAMIC=0.</strong> This information can be found be using the ifconfig command.</p>
<h3>NET</h3>
<p>Syntax: <em>&lt;ip</em>address/network<em>mask&gt;</em></p><p>The network mask for the interface. This is only necessary to specify if <strong>DYNAMIC=0.</strong> This information can be found be using the ifconfig command.</p>
<h3>BCAST</h3>
<p>Syntax: <em>&lt;broadcast</em>address&gt;</p><p>The broadcast address of the interface. This is only necessary to specify if <strong>DYNAMIC=0.</strong> This information can be found be using the ifconfig command.</p>
<h3>IP_EXTRA</h3>
<p>Syntax: <em>[IP]*</em></p><p>Contains a list of additional IP addresses that the interface can receive. Extra IP's for an interface is usually created by using interface aliases (e.g. eth0:0).</p>
<h3>NET_EXTRA</h3>
<p>Syntax: <em>[IP/MASK]*</em></p><p>A list specifying any extra networks besides the NET variables that are connected to this zone (interface). The extra nets would normally be connected though other routers.</p>
<h3>DHCP_SERVER</h3>
<p>Syntax: <em>&lt;0|1&gt;</em></p><p>Set to '1' if the server should accept DHCP queries. Only one zone per interface should have this enabled, since DHCP packets do not hold any valid destination address.</p>
<h3>INPUT[N]</h3>
<p>Syntax: <em>&lt;ACCEPT|REJECT|DROP|LOG|ACCEPT_LOG|REJECT_NOLOG|DROP_NOLOG&gt;</em> <em>&lt;protocol&gt;</em> <em>[port&lt;:port&gt;[&lt;,port&gt;[:port]]*]</em> <em>ip/[mask]=&gt;ip/[mask]</em></p><p>The INPUT variable describes how packets are handled through the input chain. Packets on the INPUT chain are packets coming from the zone to the firewall itself. The first argument is how a matched packet is treated. Protocol and ports and ip/mask are used to match packets (destination port, and source=&gt;destination ip address). If none are specified, the rule matches all packets. The port argument must only be specified if the protocol is <strong>udp, tcp</strong> or <strong>icmp</strong> When using these rules, a rule of thumb is only to accept specific packets, and to drop any not matched. The following line 1 accepts HTTP-requests over the TCP protocol:</p><p>INPUT[0]="ACCEPT tcp 80 0.0.0.0/0=&gt;0.0.0.0/0"</p><p>INPUT[1]="ACCEPT udp 1024:65535 0.0.0.0/0=&gt;0.0.0.0/0"</p><p>INPUT[2]="DROP ALL 0.0.0.0=&gt;0.0.0.0"</p>
<h3>OUTPUT[N]</h3>
<p>Syntax: <em>&lt;ACCEPT|REJECT|DROP|LOG|ACCEPT_LOG|REJECT_NOLOG|DROP_NOLOG&gt;</em> <em>&lt;protocol&gt;</em> <em>[port&lt;:port&gt;[&lt;,port&gt;[:port]]*]</em> <em>ip/[mask]=&gt;ip/[mask]</em></p><p>Like the INPUT[N] rule. Packets on the OUTPUT chain are packets originating from the firewall itself going out into the zone itself. ports are destination ports, and ip/mask is the source and destination ip/mask (if '=&gt;' is not given, the ip is assumed to be the destination ip). The port argument must only be specified if the protocol is <strong>udp, tcp</strong> or <strong>icmp</strong> The following example drops all telnet packets over the tcp protocol, drops any udp packets, and allows any other send from the firewall itself.</p><p>OUTPUT[0]="DROP tcp 21 0.0.0.0/0=&gt;0.0.0.0/0"</p><p>OUTPUT[1]="DROP udp ALL 0.0.0.0/0=&gt;0.0.0.0/0"</p><p>OUTPUT[2]="ACCEPT ALL 0.0.0.0/0=&gt;0.0.0.0/0"</p>
<h3>FORWARD[N]</h3>
<p>Syntax: <em>&lt;zone|ALL&gt;</em> <em>&lt;ACCEPT|REJECT|DROP|LOG|ACCEPT_LOG|REJECT_NOLOG|DROP_NOLOG&gt;</em> <em>&lt;protocol</em>[port&lt;:port&gt;[&lt;,port&gt;[:port]]*]&gt; <em>&lt;ip/[mask]=&gt;ip/[mask]&gt;</em></p><p>Use to specify how packets arriving from other zones are to be treated. If protocol or ports and ip/mask is not specified, then ALL is assumed. The port specifies the destination port, and ip specifies the source and destination ip. The port argument must only be specified if the protocol is <strong>udp, tcp</strong> or <strong>icmp</strong> An example: A demilitarized zone may only accept HTTP requests from the internet (zone EXT). This would be specified by:</p><p>FORWARD[0]="EXT ACCEPT tcp 80 0.0.0.0/0=&gt;0.0.0.0/0"</p><p>FORWARD[1]="ALL DROP ALL 0.0.0.0/0=&gt;0.0.0.0/0"</p>
<h3>MARK[N]</h3>
<p>Syntax: <em>&lt;zone|ALL&gt;</em> <em>&lt;mark</em>number&gt; <em>&lt;protocol</em>[port&lt;:port&gt;[&lt;,port&gt;[:port]]*]&gt; <em>&lt;ip/[mask]=&gt;ip/[mask]&gt;</em></p><p>Use the MARK rules to set a MARK on packets passing through the firewall. This can then be used to determine how a packet is routed. The port argument must only be specified if the protocol is <strong>udp, tcp</strong> or <strong>icmp</strong> If the source zone is ALL then all packets going into the zone are marked. If the source zone equals the zone-name of which the rule is in then only packets originating from the firewall are marked.</p><p>Otherwise, only packets routed through the firewall are marked. Example: Mark all tcp packets going into the zone with '1' and all udp packets with mark '2'.</p><p>MARK[0]="ALL 1 tcp ALL 0.0.0.0/0=&gt;0.0.0.0/0"</p><p>MARK[1]="ALL 2 udp ALL 0.0.0.0/0=&gt;0.0.0.0/0"</p>
<h3>REPLY_FOO</h3>
<p>Syntax: <em>&lt;zone&gt;</em> <em>&lt;type&gt;</em> <em>&lt;protocol</em>[port[:port][&lt;,port&gt;[:port]]*]&gt; <em>&lt;ip[/mask]=&gt;ip[/mask]&gt;</em></p><p>Make special replies to packets. The type can be one of the following:</p><p>icmp-net-unreachable, icmp-host-unreachable, icmp-port-unreachable, icmp-proto-unreachable, icmp-net-prohibited, icmp-host-prohibited or tcp-reset (Only valid for the TCP protocol).</p><p>The <strong>zone</strong> argument specifies the source of the packet.</p><p>This can be used, for example, to disallow authentication requests, but instead of dropping the packets, close the connection by sending a tcp-reset.</p><p>REPLY_AUTH="EXT tcp-reset tcp auth 0.0.0.0/0=&gt;0.0.0.0/0"</p>
<h3>MAC_DROP</h3>
<p>Syntax: <em>[MAC_ADDRESS]*</em>|<em>[file]</em></p><p>Disallow any communication with specified MAC-addresses in this zone. Inserted on PREROUTING chain. If the value is a file, then each line in the file is treated as an MAC address. Anything after a '#' is regarded as a comment and is ignored.</p>
<h3>IP_DROP</h3>
<p>Syntax: <em>[IP/MASK]*</em>|<em>[file]</em></p><p>Disallow any communication with specified IP addresses in this zone. If the value is a file, then each line in the file is treated as an ip address. Anything after a '#' is regarded as a comment and is ignored.</p>
<h3>ECN_REMOVE</h3>
<p>Syntax: <em>[IP/MASK]*</em>|<em>[file]</em></p><p>Remove the ECN bit from all packets destined to the specified servers (located in the zone). If the value is a file, then each line in the file is treated as an ip address. Anything after a '#' is regarded as a comment and is ignored.</p>
<h3>REDIRECT_FOO</h3>
<p>Syntax: <em>&lt;protocol</em>[port[:port]]&gt; <em>&lt;ip[/mask]=&gt;ip[/mask]&gt;</em> <em>&lt;[ipaddr[,ipaddr]*]&gt;</em> <em>[port]</em></p><p>Alter the destination of packets.  The rule applies only for packets originating from this zone. Packets can be redirected to the firewall itself (127.0.0.1), to other zones or back into the zone itself (requires DYNAMIC==0 and GLOBAL==0). If packets are redirected to other zones, then remember to add a FORWARD rule in the configuration file for the destination zone, allowing the packets to pass through. Please note, that redirecting packets back into the zone may cause serious network degradation.</p><p>Example:</p><p>REDIRECT_PROXY="tcp 80 0.0.0.0/0=&gt;0.0.0.0/0 127.0.0.1 3128"</p><p>All packets coming from the zone itself to port 80 are redirected to the firewall itself port 3128, and this line can be used to setup a transparent proxy.</p>
<h3>WATCH_IP</h3>
<p>Syntax: <em>[IP]*</em>|<em>[file]</em></p><p>Log every packet coming from or going to the specific IP addresses. If the value is a file, then each line in the file is treated as an IP address. Anything after a '#' is regarded as a comment and is ignored.</p>
<h3>SNAT[N]</h3>
<p>Syntax: <em>&lt;ZONE|ip&gt;</em> <em>&lt;protocol</em>[port[:port][&lt;,port&gt;[:port]]*]&gt; <em>&lt;ip[/mask]=&gt;ip[/mask]&gt;</em></p><p>Change the source address of a packet coming from this zone. If a ZONE is specified, then all packets are masqueraded to all ip addresses for the specified zone, specified by the <strong>IP</strong> or <strong>IP_EXTRA</strong> directive, in a round robin fashion. The last options specifies the protocol, port and original source and destination of the packets to be SNAT'ed.</p><p>To use MASQUADING, where EXT is the zone for the internet use:</p><p>SNAT[0]="EXT ALL 0.0.0.0/0=&gt;0.0.0.0/0"</p>
<h3>LIMIT_FOO</h3>
<p>Syntax: <em>&lt;zone&gt;</em> <em>&lt;ACCEPT|REJECT|DROP|LOG|ACCEPT_LOG|REJECT_NOLOG|DROP_NOLOG&gt;</em> <em>&lt;limit&gt;</em> <em>&lt;burt&gt;</em> <em>&lt;protocol</em>[port&lt;:port&gt;[&lt;,port&gt;[:port]]*]&gt; <em>&lt;ip[/mask]=&gt;ip[/mask]&gt;</em></p><p>Limit number of packets. A <em>LIMIT</em> rule specifies how many packets are acceptable within the specified period of time. If more packets arrive, <em>policy</em> specifies how to handle these.</p><p><em>zone:</em> Is the zone from which the packet originates. This can be this zone itself.</p><p><em>limit:</em> Maximum average matching rate: specified as a number, with an optional \'/second\', \'/minute\', \'/hour\', or \'/day\' suffix.</p><p><em>burst:</em> Maximum initial number of packets to match: this number gets incremented by one every time the limit specified above is not reached, up to this number.</p><p><em>protocol:</em> The protocol: TCP|UDP|ICMP|ALL. This parameter is optional. The port argument must only be specified if the protocol is <strong>udp, tcp</strong> or <strong>icmp</strong></p><p><em>ports:</em> If protocol is tcp|udp: A list of ports or a port range.  icmp: A list of icmp types separated by commas. This parameter is optional pending on the specified protocol.</p><p><em>ip[/mask]=&gt;ip[/mask]</em> Specifies source address and optional destination address. This can only be specified if protocol is also specified.</p><p>For example to limit number of echo requests (ping) from zone EXT, use:</p><p>LIMIT_PING="EXT DROP 1/second 3 ICMP echo-request 0.0.0.0/0=&gt;0.0.0.0/0"</p>
<h3>IPSET_FOO</h3>
<p>Syntax: <em>&lt;ip&lt;/mask&gt;&gt;[</em>ip&lt;/mask&gt;]*<em>|</em> <em>&lt;file&gt;</em></p><p>Specify a set of ip's to be used in zone rules. Ip's specified can be either numbers, hostnames, networks or names of other ip sets (recursively). The name of the set will be the name occuring after IPSET_. Ip sets is bound to a zone, and cannot be used across zones. Currently, ip-sets can only be used in INPUT, OUTPUT, FORWARD, SNAT, REDIRECT and MARK rules. If the ipset points to a file, then the file is read (relative to <strong>CONF_PATH</strong> ). The name of IP sets must not conflict with aliases defined in the file pointed to by the <strong>ALIASES</strong> directive in fiaif global configuration file.</p><p>An example of the use of IP sets:</p><p>IPSET_NAMESERVERS="1.2.3.4 1.2.3.5"</p><p>INPUT[N]="ACCEPT tcp domain NAMESERVERS=&gt;0.0.0.0/0"</p><p>Which is equivalent to:</p><p>INPUT[N]="ACCEPT tcp domain 1.2.3.4=&gt;0.0.0.0/0"</p><p>INPUT[N+1]="ACCEPT tcp domain 1.2.3.5=&gt;0.0.0.0/0"</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Anders Fugmann &lt;anders(at)fugmann.net&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO zone.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/fiaif.8.html"><strong>fiaif</strong>(8)</a>, <strong>fiaif.conf</strong>(8), <a href="../man8/iptables.8.html"><strong>iptables</strong>(8)</a>, <a href="../man8/ifconfig.8.html"><strong>ifconfig</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="zbackup.5.html"><span aria-hidden="true">&larr;</span> zbackup.5: Versatile deduplicating backup tool</a></li>
   <li class="next"><a href="zorp-config.5.html">zorp-config.5: Zorp compilation environment <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
