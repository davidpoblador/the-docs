<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mmdf: Multi-channel memorandum distribution facility mailbox format</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Multi-channel memorandum distribution facility mailbox format">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mmdf (5) manual">
  <meta name="twitter:description" content="Multi-channel memorandum distribution facility mailbox format">
  <meta name="twitter:image" content="https://www.carta.tech/images/mutt-mmdf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/mmdf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mmdf (5) manual" />
  <meta property="og:description" content="Multi-channel memorandum distribution facility mailbox format" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mutt-mmdf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mmdf<small> (5)</small></h1>
        <p class="lead">Multi-channel memorandum distribution facility mailbox format</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/mmdf.5.html">
      <span itemprop="name">mmdf: Multi-channel memorandum distribution facility mailbox format</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mutt/">
      <span itemprop="name">mutt</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/mmdf.5.html">
      <span itemprop="name">mmdf: Multi-channel memorandum distribution facility mailbox format</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This document describes the <strong>MMDF</strong> mailbox format used by some MTAs and MUAs (i.e. <strong>scomail</strong>(1)) to store mail messages locally.</p><p>An <strong>MMDF</strong> mailbox is a text file containing an arbitrary number of e-mail messages. Each message consists of a postmark, followed by an e-mail message formatted according to <strong>RFC822</strong> / <strong>RFC2822</strong>, followed by a postmark. The file format is line-oriented. Lines are separated by line feed characters (ASCII 10). A postmark line consists of the four characters "^A^A^A^A" (Control-A; ASCII 1).</p>
<dl class='dl-vertical'>
  <dt>
    <p>Example of a <strong>MMDF</strong> mailbox holding two mails:</p>
  </dt>
  <dd>
    
<pre>
^A^A^A^A

From: example@example.com

To: example@example.org

Subject: test



&gt;From what I learned about the MMDF-format:


^A^A^A^A

^A^A^A^A

From: example@example.com

To: example@example.org

Subject: test 2



bar

^A^A^A^A
</pre>

  </dd>

</dl>
<p>In contrast to most other single file mailbox formats like MBOXO and MBOXRD (see <a href="../man5/mbox.5.html"><strong>mbox</strong>(5)</a>) there is no need to quote/dequote "From "-lines in <strong>MMDF</strong> mailboxes as such lines have no special meaning in this format.</p><p>If the modification-time (usually determined via <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a>) of a nonempty mailbox file is greater than the access-time the file has new mail. Many MUAs place a Status: header in each message to indicate which messages have already been read.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOCKING</h2>
        <div class="sectioncontent">
<p>Since <strong>MMDF</strong> files are frequently accessed by multiple programs in parallel, <strong>MMDF</strong> files should generally not be accessed without locking.</p><p>Three different locking mechanisms (and combinations thereof) are in general use:</p>
<dl class='dl-vertical'>
  <dt>
    *
  </dt>
  <dd>
    <p><a href="../man2/fcntl.2.html"><strong>fcntl</strong>(2)</a> locking is mostly used on recent, POSIX-compliant systems. Use of this locking method is, in particular, advisable if <strong>MMDF</strong> files are accessed through the Network File System (NFS), since it seems the only way to reliably invalidate NFS clients' caches.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><a href="../man2/flock.2.html"><strong>flock</strong>(2)</a> locking is mostly used on BSD-based systems.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p>Dotlocking is used on all kinds of systems. In order to lock an <strong>MMDF</strong> file named <em>folder</em>, an application first creates a temporary file with a unique name in the directory in which the <em>folder</em> resides. The application then tries to use the <a href="../man2/link.2.html"><strong>link</strong>(2)</a> system call to create a hard link named <em>folder.lock</em> to the temporary file. The success of the <a href="../man2/link.2.html"><strong>link</strong>(2)</a> system call should be additionally verified using <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a> calls. If the link has succeeded, the mail folder is considered dotlocked. The temporary file can then safely be unlinked.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>In order to release the lock, an application just unlinks the <em>folder.lock</em> file.</p>
  </dd>

</dl>
<p>If multiple methods are combined, implementors should make sure to use the non-blocking variants of the <a href="../man2/fcntl.2.html"><strong>fcntl</strong>(2)</a> and <a href="../man2/flock.2.html"><strong>flock</strong>(2)</a> system calls in order to avoid deadlocks.</p><p>If multiple methods are combined, an <strong>MMDF</strong> file must not be considered to have been successfully locked before all individual locks were obtained. When one of the individual locking methods fails, an application should release all locks it acquired successfully, and restart the entire locking procedure from the beginning, after a suitable delay.</p><p>The locking mechanism used on a particular system is a matter of local policy, and should be consistently used by all applications installed on the system which access <strong>MMDF</strong> files. Failure to do so may result in loss of e-mail data, and in corrupted <strong>MMDF</strong> files.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">
<p><strong>MMDF</strong> is not part of any currently supported standard.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p><strong>MMDF</strong> was developed at the University of Delaware by Dave Crocker.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mmdf&hellip;</h2>
        <div class="sectioncontent">
<p><strong>scomail</strong>(1), <a href="../man2/fcntl.2.html"><strong>fcntl</strong>(2)</a>, <a href="../man2/flock.2.html"><strong>flock</strong>(2)</a>, <a href="../man2/link.2.html"><strong>link</strong>(2)</a>, <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a>, <a href="../man5/mbox.5.html"><strong>mbox</strong>(5)</a>, <strong>RFC822</strong>, <strong>RFC2822</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Urs Janssen &lt;urs@tin.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mlocate.db.5.html"><span aria-hidden="true">&larr;</span> mlocate.db.5: A mlocate database</a></li>
   <li class="next"><a href="mmv.5.html">mmv.5: Memory mapped values for performance co-pilot <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
