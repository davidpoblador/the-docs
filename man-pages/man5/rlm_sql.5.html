<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rlm_sql: Freeradius module</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Freeradius module">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="rlm_sql (5) manual">
  <meta name="twitter:description" content="Freeradius module">
  <meta name="twitter:image" content="https://www.carta.tech/images/freeradius-common-rlm_sql-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/rlm_sql.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="rlm_sql (5) manual" />
  <meta property="og:description" content="Freeradius module" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/freeradius-common-rlm_sql-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">rlm_sql<small> (5)</small></h1>
        <p class="lead">Freeradius module</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/rlm_sql.5.html">
      <span itemprop="name">rlm_sql: Freeradius module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/freeradius-common/">
      <span itemprop="name">freeradius-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/rlm_sql.5.html">
      <span itemprop="name">rlm_sql: Freeradius module</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <em>rlm_sql</em> module provides an SQL interface to retrieve authorization information and store accounting information.  It can be used in conjunction with, or in lieu of the files and detail modules. The SQL module has drivers to support the following SQL databases:</p>
<pre>
     db2

     iodbc

     mysql

     oracle

     postgresql

     sybase

     unixodbc

</pre>
<p>Due to the size of the configuration variables, the sql module is usually configured in a separate file, which is included in the main radiusd.conf via an include directive.</p><p>The main configuration items to be aware of are:</p>
<dl class='dl-vertical'>
  <dt>
    driver
  </dt>
  <dd>
    <p>This variable specifies the driver to be loaded.</p>
  </dd>
  <dt>
    server
  </dt>
  <dd>
    
  </dd>
  <dt>
    login
  </dt>
  <dd>
    
  </dd>
  <dt>
    password
  </dt>
  <dd>
    <p>These specify the servername, username, and password the module will use to connect to the database.</p>
  </dd>
  <dt>
    radius_db
  </dt>
  <dd>
    <p>The name of the database where the radius tables are stored.</p>
  </dd>
  <dt>
    acct_table1
  </dt>
  <dd>
    
  </dd>
  <dt>
    acct_table2
  </dt>
  <dd>
    <p>These specify the tables names for accounting records.  acct_table1 specifies the table where Start records are stored.  acct_table2 specifies the table where Stop records are stored.  In most cases, this should be the same table.</p>
  </dd>
  <dt>
    postauth_table
  </dt>
  <dd>
    <p>The name of the table to store post-authentication data.</p>
  </dd>
  <dt>
    authcheck_table
  </dt>
  <dd>
    
  </dd>
  <dt>
    authreply_table
  </dt>
  <dd>
    <p>The tables where individual Check-Items and Reply-Items are stored.</p>
  </dd>
  <dt>
    groupcheck_table
  </dt>
  <dd>
    
  </dd>
  <dt>
    groupreply_table
  </dt>
  <dd>
    <p>The tables where group Check-Items and Reply-Items are stored.</p>
  </dd>
  <dt>
    usergroup_table
  </dt>
  <dd>
    <p>The table where username to group relationships are stored.</p>
  </dd>
  <dt>
    deletestatlesessions
  </dt>
  <dd>
    <p>This option is set to 'yes' or 'no'.  If you are doing Simultaneous-Use checking, and this is set to yes, stale sessions ( defined as sessions for which a Stop record was not received ) will be cleared.</p>
  </dd>
  <dt>
    sqltrace
  </dt>
  <dd>
    
  </dd>
  <dt>
    sqltracefile
  </dt>
  <dd>
    <p>These two options are useful for debugging sql problems.  If sqltrace is set to yes, then all sql queries being executed are written to the file listed in sqltracefile.  This is disabled in normal operation.</p>
  </dd>
  <dt>
    num_sql_socks
  </dt>
  <dd>
    <p>The number of sql connections to make to the database.</p>
  </dd>
  <dt>
    connect_failure_retry_delay
  </dt>
  <dd>
    <p>The number of seconds to wait before attempting to reconnect to a failed database connection.</p>
  </dd>
  <dt>
    sql_user_name
  </dt>
  <dd>
    <p>This is the definition of the SQL-User-Name attribute.  This is set once, so that you can use %{SQL-User-Name} in the SQL queries, rather than the nested username substitution.  This ensures that Username is parsed consistently for all SQL queries executed.</p>
  </dd>
  <dt>
    default_user_profile
  </dt>
  <dd>
    <p>This is the default profile name that will be applied to all users if set.  This is not set by default.</p>
  </dd>
  <dt>
    query_on_not_found
  </dt>
  <dd>
    <p>This option is set to 'yes' or 'no'.  If set to yes, then the default user profile is returned if no specific match was found for the user.</p>
  </dd>
  <dt>
    authorize_check_query
  </dt>
  <dd>
    
  </dd>
  <dt>
    authorize_reply_query
  </dt>
  <dd>
    <p>These queries are run during the authorization stage to extract the user authorization information from the ${authcheck_table} and ${authreply_table}.</p>
  </dd>
  <dt>
    authorize_group_check_query
  </dt>
  <dd>
    
  </dd>
  <dt>
    authorize_group_reply_query
  </dt>
  <dd>
    <p>These queries are run during the authorization stage to extract the group authorization information from the ${groupcheck_table} and ${groupreply_table}.</p>
  </dd>
  <dt>
    accounting_onoff_query
  </dt>
  <dd>
    <p>The query to be run when receiving an Accounting On or Accounting Off packet.</p>
  </dd>
  <dt>
    accounting_update_query
  </dt>
  <dd>
    
  </dd>
  <dt>
    accounting_update_query_alt
  </dt>
  <dd>
    <p>The query to be run when receiving an Accounting Update packet.  If the primary query fails, the alt query is run.</p>
  </dd>
  <dt>
    accounting_start_query
  </dt>
  <dd>
    
  </dd>
  <dt>
    accounting_start_query_alt
  </dt>
  <dd>
    <p>The query to be run when receiving an Accounting Start packet.  If the primary query fails, the alt query is run.</p>
  </dd>
  <dt>
    accounting_stop_query
  </dt>
  <dd>
    
  </dd>
  <dt>
    accounting_stop_query_alt
  </dt>
  <dd>
    <p>The query to be run when receiving an Accounting Stop packet.  If the primary query fails, the alt query is run.</p>
  </dd>
  <dt>
    simul_count_query
  </dt>
  <dd>
    <p>The query to be run to return the number simultaneous sessions for the purposes of limiting Simultaneous Use.</p>
  </dd>
  <dt>
    simul_verify_query
  </dt>
  <dd>
    <p>The query to return the detail information needed to confirm that all suspected connected sessions are valid, and are not stale sessions.</p>
  </dd>
  <dt>
    group_membership_query
  </dt>
  <dd>
    <p>The query to run to check user group membership.</p>
  </dd>
  <dt>
    postauth_query
  </dt>
  <dd>
    <p>The query to run during the post-authentication stage.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>Due to the size of the configuration for this module, it is not included in this manual page.  Please review the supplied configuration files for example queries and configuration details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SECTIONS</h2>
        <div class="sectioncontent">
<p><strong>authorization,</strong> <strong>accounting,</strong> <strong>checksimul,</strong> <strong>post-authentication</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/etc/raddb/radiusd.conf,</em> <em>/etc/raddb/sql.conf,</em> <em>/etc/raddb/sql/&lt;DB&gt;/dialup.conf,</em> <em>/etc/raddb/sql/&lt;DB&gt;/schema.sql,</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO rlm_sql&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/radiusd.8.html"><strong>radiusd</strong>(8)</a>, <a href="../man5/radiusd.conf.5.html"><strong>radiusd.conf</strong>(5)</a>,</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Chris Parker, cparker@segv.org</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="rlm_realm.5.html"><span aria-hidden="true">&larr;</span> rlm_realm.5: Freeradius module</a></li>
   <li class="next"><a href="rlm_sql_log.5.html">rlm_sql_log.5: Freeradius module <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
