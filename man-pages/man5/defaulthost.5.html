<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>defaulthost: Reformat and inject a message into the queue.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Reformat and inject a message into the queue.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="defaulthost (5) manual">
  <meta name="twitter:description" content="Reformat and inject a message into the queue.">
  <meta name="twitter:image" content="https://www.carta.tech/images/nullmailer-defaulthost-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/defaulthost.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="defaulthost (5) manual" />
  <meta property="og:description" content="Reformat and inject a message into the queue." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nullmailer-defaulthost-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">defaulthost<small> (5)</small></h1>
        <p class="lead">Reformat and inject a message into the queue.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/defaulthost.5.html">
      <span itemprop="name">defaulthost: Reformat and inject a message into the queue.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nullmailer/">
      <span itemprop="name">nullmailer</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/defaulthost.5.html">
      <span itemprop="name">defaulthost: Reformat and inject a message into the queue.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>nullmailer-inject</strong> [-a] [-b] [-e] [-f sender] [-h] <em>[recipient [recipient ...]]</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program reads a email message from standard input, reformats its header to comply with RFC822, and sends the resulting message to the queue.</p><h3>HEADER FIELDS</h3>
<p>The following lines are parsed for recipient addresses: <em>To</em>, <em>Cc</em>, <em>Bcc</em>, <em>Apparently-To</em>, <em>Resent-To</em>, <em>Resent-Cc</em>, and <em>Resent-Bcc</em>.</p><p>The following sender address lines are parsed and rewritten: <em>Sender</em>, <em>From</em>, <em>Reply-To</em>, <em>Return-Path</em>, <em>Return-Receipt-To</em>, <em>Errors-To</em>, <em>Resent-Sender</em>, <em>Resent-From</em>, and <em>Resent-Reply-To</em>. If the <em>Return-Path</em> header field is present and contains a single address, its contents will be used to set the envelope sender address.</p><p>If the message contains any of the following fields, it is treated as a resent message: <em>Resent-Sender</em>, <em>Resent-From</em>, <em>Resent-Reply-To</em>, <em>Resent-To</em>, <em>Resent-Cc</em>, <em>Resent-Bcc</em>, <em>Resent-Date</em>, <em>Resent-Message-ID</em>. If the message is resent, only the recipient fields prefixed with <em>Resent-</em> are examined for addresses.</p><p>Any occurrences of <em>Bcc</em>, <em>Resent-Bcc</em>, <em>Return-Path</em>, or <em>Content-Length</em> are discarded after they are parsed (if necessary).</p><p>If the header lacks a <em>Message-Id</em> field, a unique string is generated and added to the message. If the header lacks a <em>Date</em> field, the current local date and time in RFC822 format is appended to the message. If the message has no <em>To</em> or <em>Cc</em> fields, the following line is appended to the message:</p>
<pre>
	Cc: recipient list not shown: ;
</pre>

<h3>ADDRESS LISTS</h3>
<p>Address lists are expected to follow the syntax set out in RFC822. The following is a simplified explanation of the syntax.</p><p>An address list is list of addresses separated by commas. An individual address may have one of the following three forms: <em>user@fqdn</em>, <em>comment</em>&lt;user@fqdn&gt;<em>,</em> or <em>phrase:</em>address-list;<em>.</em> Any of the first two forms may be used within the address list of the third form. Any word containing special characters must be placed in double quotes and the special characters must be preceded with a backslash. Comments may be placed between addresses in parenthesis. All comments are ignored.</p><p>Addresses lists are reformatted as they are parsed for ease of later re-parsing when the message reaches the destination(s). If an address is missing a fqdn, <strong>nullmailer-inject</strong> adds one.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>-a</em></p>
  </dt>
  <dd>
    <p>Use only the command line arguments as recipient addresses. Ignore the header recipient lines.</p>
  </dd>
  <dt>
    <p><em>-b</em></p>
  </dt>
  <dd>
    <p>Use both the command line arguments and data from the message header as recipient addresses.</p>
  </dd>
  <dt>
    <p><em>-e</em></p>
  </dt>
  <dd>
    <p>Use either the command line arguments (if there are any) or data from the message header (if there are no arguments) as the recipient addresses.</p>
  </dd>
  <dt>
    <p><em>-f sender</em></p>
  </dt>
  <dd>
    <p>Set the envelope sender address to <em>sender .</em></p>
  </dd>
  <dt>
    <p><em>-h</em></p>
  </dt>
  <dd>
    <p>Use only data from the message header as the recipient addresses.</p>
  </dd>
  <dt>
    <p><em>-n</em></p>
  </dt>
  <dd>
    <p>Do not queue the message, but print the reformatted contents to standard output.</p>
  </dd>
  <dt>
    <p><em>-v</em></p>
  </dt>
  <dd>
    <p>Print out the envelope (sender and recipient addresses) preceding the message when printing the message to standard output.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>Exits 0 if it was successful, otherwise it prints a diagnostic message to standard output and exits 1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>The environment variable <strong>NULLMAILER_FLAGS</strong> is parsed and the behavior of <strong>nullmailer-inject</strong> is modified if any of the following letters are present:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>c</strong></p>
  </dt>
  <dd>
    <p>Use "address (comment)" style in the generated <strong>From</strong> field instead of the default "comment &lt;address&gt;" style.</p>
  </dd>
  <dt>
    <p><strong>f</strong></p>
  </dt>
  <dd>
    <p>Ignore and remove any <strong>From</strong> header lines and always insert a generated one.</p>
  </dd>
  <dt>
    <p><strong>i</strong></p>
  </dt>
  <dd>
    <p>Ignore and remove any <strong>Message-Id</strong> header lines.</p>
  </dd>
  <dt>
    <p><strong>s</strong></p>
  </dt>
  <dd>
    <p>Ignore and remove any <strong>Return-Path</strong> header lines.</p>
  </dd>
  <dt>
    <p><strong>t</strong></p>
  </dt>
  <dd>
    <p>Insert a <strong>To</strong> line containing a list of the recipients if the header does not contain either a <strong>To</strong> or a <strong>Cc</strong> field. If the message is determined to be a resent message (see above), a <strong>Resent-To</strong> field is added if the header does not contain either a <strong>Resent-To</strong> or a <strong>Resent-Cc</strong> field.</p>
  </dd>

</dl>
<p>The user name is set by <strong>NULLMAILER_USER</strong>, <strong>MAILUSER</strong>, <strong>USER</strong>, or <strong>LOGNAME</strong>, whichever comes first.  If none of the above are set the name is taken from the password file, or set to <em>unknown</em> if that fails.</p><p>The host name is set by the canonicalized value of <strong>NULLMAILER_HOST</strong>, <strong>MAILHOST</strong>, or <strong>HOSTNAME</strong>, whichever comes first, or the <em>defaulthost</em> config file if none of the above are set (see below).</p><p>The full name of the user is set by <strong>NULLMAILER_NAME</strong>, <strong>MAILNAME</strong>, or <strong>NAME</strong>, whichever comes first.</p><p>The user and host name of the envelope sender default to the user and host name set above, but may be overridden by <strong>NULLMAILER_SUSER</strong> and <strong>NULLMAILER_SHOST</strong>.</p><p>If <strong>NULLMAILER_QUEUE</strong> is set, the program named is used in place of <strong>nullmailer-queue</strong> to queue the formatted message.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONTROL FILES</h2>
        <div class="sectioncontent">
<p>When reading the following files, a single line is read and stripped of all leading and trailing whitespace characters.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>defaultdomain</strong></p>
  </dt>
  <dd>
    <p>The content of this file is appended to any host name that does not contain a period (except <em>localhost</em>), including <strong>defaulthost</strong> and <strong>idhost</strong>. Defaults to the value of the <em>/etc/mailname</em> system file, if it exists, otherwise the literal name <em>defauldomain</em>.</p>
  </dd>
  <dt>
    <p><strong>defaulthost</strong></p>
  </dt>
  <dd>
    <p>The content of this file is appended to any address that is missing a host name. Defaults to the value of the <em>/etc/mailname</em> system file, if it exists, otherwise the literal name <em>defaulthost</em>.</p>
  </dd>
  <dt>
    <p><strong>idhost</strong></p>
  </dt>
  <dd>
    <p>The content of this file is used when building the message-id string for the message. Defaults to the canonicalized value of <strong>defaulthost</strong>.</p>
  </dd>
  <dt>
    <p><strong>/etc/mailname</strong></p>
  </dt>
  <dd>
    <p>The fully-qualifiled host name of the computer running nullmailer. Defaults to the literal name <em>me</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO defaulthost&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/nullmailer-queue.8.html"><strong>nullmailer-queue</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>This document glosses over very many details of how address parsing and rewriting actually works (among other things).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="defaultdomain.5.html"><span aria-hidden="true">&larr;</span> defaultdomain.5: Reformat and inject a message into the queue.</a></li>
   <li class="next"><a href="deluser.conf.5.html">deluser.conf.5: Configuration file for deluser(8) and delgroup(8). <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
