<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>hosts.cfg: Main xymon configuration file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Main xymon configuration file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="hosts.cfg (5) manual">
  <meta name="twitter:description" content="Main xymon configuration file">
  <meta name="twitter:image" content="https://www.carta.tech/images/xymon-hosts.cfg-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/hosts.cfg.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="hosts.cfg (5) manual" />
  <meta property="og:description" content="Main xymon configuration file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xymon-hosts.cfg-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">hosts.cfg<small> (5)</small></h1>
        <p class="lead">Main xymon configuration file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/hosts.cfg.5.html">
      <span itemprop="name">hosts.cfg: Main xymon configuration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xymon/">
      <span itemprop="name">xymon</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/hosts.cfg.5.html">
      <span itemprop="name">hosts.cfg: Main xymon configuration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    hosts.cfg
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <a href="../man5/hosts.cfg.5.html"><strong>hosts.cfg</strong>(5)</a></em> file is the most important configuration file for all of the Xymon programs.  This file contains the full list of all the systems monitored by Xymon, including the set of tests and other configuration items stored for each host.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE FORMAT</h2>
        <div class="sectioncontent">
<p>Each line of the file defines a host. Blank lines and lines starting with a hash mark (#) are treated as comments and ignored. Long lines can be broken up by putting a backslash at the end of the line and continuing the entry on the next line.</p><p>The format of an entry in the hosts.cfg file is as follows:</p>
<pre>
   IP-address hostname # tag1 tag2 ...
</pre>
<p>The IP-address and hostname are mandatory; all of the tags are optional. Listing a host with only IP-address and hostname will cause a network test to be executed for the host - the connectivity test is enabled by default, but no other tests.</p><p>The optional tags are then used to define which tests are relevant for the host, and also to set e.g. the time-interval used for availability reporting by <a href="../man1/xymongen.1.html"><strong>xymongen</strong>(1)</a></em></p><p>An example of setting up the hosts.cfg file is in the Xymon on-line documentation (from the Help menu, choose "Configuring Monitoring"). The following describes the possible settings in a hosts.cfg file supported by Xymon.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TAGS RECOGNIZED BY ALL TOOLS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    include filename
  </dt>
  <dd>
    <p>This tag is used to include another file into the hosts.cfg file at run-time, allowing for a large hosts.cfg file to be split up into more manageable pieces.</p><p>The "filename" argument should point to a file that uses the same syntax as hosts.cfg. The filename can be an absolute filename (if it begins with a '/'), or a relative filename - relative file names are prefixed with the directory where the main hosts.cfg file is located (usually $XYMONHOME/etc/).</p><p>You can nest include tags, i.e. a file that is included from the main hosts.cfg file can itself include other files.</p>
  </dd>
  <dt>
    dispinclude filename
  </dt>
  <dd>
    <p>Acts like the "include" tag, but only for the xymongen tool. Can be used e.g. to put a group of hosts on multiple sub-pages, without having to repeat the host definitions.</p>
  </dd>
  <dt>
    netinclude filename
  </dt>
  <dd>
    <p>Acts like the "include" tag, but only for the xymonnet tool.</p>
  </dd>
  <dt>
    directory directoryname
  </dt>
  <dd>
    <p>This tag is used to include all files in the named directory. Files are included in alphabetical order. If there are sub- directories, these are recursively included also. The following files are ignored: Files that begin with a dot, files that end with a tilde, RCS files that end with ",v", RPM package manager files ending in ".rpmsave" or ".rpmnew", DPKG package manager files ending in ".dpkg-new" or ".dpkg-orig", and all special files (devices, sockets, pipes etc).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERAL PER-HOST OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    noclear
  </dt>
  <dd>
    <p>Controls whether stale status messages go purple or clear when a host is down. Normally, when a host is down the client statuses ("cpu", "disk", "memory" etc) will stop updating - this would usually make them go "purple" which can trigger alerts. To avoid that, Xymon checks if the "conn" test has failed, and if that is true then the other tests will go "clear" instead of purple so you only get alerts for the "conn" test. If you do want the stale statuses to go purple, you can use the "noclear" tag to override this behaviour.</p><p>Note that "noclear" also affects the behaviour of network tests; see below.</p>
  </dd>
  <dt>
    prefer
  </dt>
  <dd>
    <p>When a single host is defined multiple time in the hosts.cfg file, xymongen tries to guess which definition is the best to use for the information used on the "info" column, or for the NOPROPRED and other xymongen-specific settings. Host definitions that have a "noconn" tag or an IP of 0.0.0.0 get lower priority.</p><p>By using the "prefer" tag you tell xymongen that this host definition should be used.</p><p>Note: This only applies to hosts that are defined multiple times in the hosts.cfg file, although it will not hurt to add it on other hosts as well.</p>
  </dd>
  <dt>
    multihomed
  </dt>
  <dd>
    <p>Tell Xymon that data from the host can arrive from multiple IP-addresses. By default, Xymon will warn if it sees data for one host coming from different IP-addresses, because this usually indicates a mis-configuration of the hostname on at least one of the servers involved. Some hosts with multiple IP-addresses may use different IP's for sending data to Xymon, however. This tag disables the check of source IP when receiving data.</p>
  </dd>
  <dt>
    delayred=STATUSCOLUMN:DELAY[,STATUSCOLUMN:DELAY...]
  </dt>
  <dd>
    <p>Usually, status changes happen immediately. This tag is used to defer an update to red for the STATUSCOLUMN status for DELAY minutes. E.g. with <strong>delayred=disk:10,cpu:30</strong>, a red disk-status will not appear on the Xymon webpages until it has been red for at least 10 minutes. Note: Since most tests only execute once every 5 minutes, it will usually not make sense to set N to anything but a multiple of 5. The exception is network tests, since <a href="../man1/xymonnet-again.sh.1.html"><strong>xymonnet-again.sh</strong>(1)</a></em> will re-run failed network tests once a minute for up to 30 minutes.</p>
  </dd>
  <dt>
    delayyellow=STATUSCOLUMN:DELAY[,STATUSCOLUMN:DELAY...]
  </dt>
  <dd>
    <p>Same as <strong>delayred</strong>, but defers the change to a yellow status.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">XYMONGEN DISPLAY OPTIONS</h2>
        <div class="sectioncontent">
<p>These tags are processed by the <a href="../man1/xymongen.1.html"><strong>xymongen</strong>(1)</a></em> tool when generating the Xymon webpages or reports.</p>
<dl class='dl-vertical'>
  <dt>
    page NAME [Page-title]
  </dt>
  <dd>
    <p>This defines a page at the level below the entry page. All hosts following the "page" directive appear on this page, until a new "page", "subpage" or "subparent" line is found.</p>
  </dd>
  <dt>
    subpage NAME [Page-title]
  </dt>
  <dd>
    <p>This defines a sub-page in the second level below the entry page. You must have a previous "page" line to hook this sub-page to.</p>
  </dd>
  <dt>
    subparent parentpage newpage [Page-title]
  </dt>
  <dd>
    <p>This is used to define sub-pages in whatever levels you may wish. Just like the standard "subpage" tag, "subparent" defines a new Xymon web page; however with "subparent" you explicitly list which page it should go as a sub-page to. You can pick any page as the parent - pages, sub-pages or even other subparent pages. So this allows you to define any tree structure of pages that you like.</p><p>E.g. with this in hosts.cfg:</p>
<pre>
   page USA United States
   subpage NY New York
   subparent NY manhattan Manhattan data centers
   subparent manhattan wallstreet Wall Street center
</pre>
<p>you get this hierarchy of pages:</p>
<pre>
   USA (United States)
     NY (New York)
       manhattan (Manhattan data centers)
          wallstreet (Wall Street center)
</pre>
<p>Note: The parent page must be defined before you define the subparent. If not, the page will not be generated, and you get a message in the log file.</p><p>Note: xymongen is case-sensitive, when trying to match the name of the parent page.</p><p>The inspiration for this came from Craig Cook's mkbb.pl script, and I am grateful to Craig for suggesting that I implement it in xymongen. The idea to explicitly list the parent page in the "subparent" tag was what made it easy to implement.</p>
  </dd>
  <dt>
    vpage
  </dt>
  <dd>
    <p>These are page-definitions similar to the "page", "subpage" and "subparent" definitions. However, on these pages the rows are the tests, and the columns are the hosts (normal pages have it the other way around). This is useful if you have a very large number of tests for a few hosts, and prefer to have them listed on a page that can be scrolled vertically.</p><p>Note that the "group" directives have no effect on these types of pages.</p>
  </dd>
  <dt>
    group [group-title]
  </dt>
  <dd>
    
  </dd>
  <dt>
    group-compress [group-title]
  </dt>
  <dd>
    <p>Defines a group of hosts, that appear together on the web page, with a single header-line listing all of the columns. Hosts following the "group" line appear inside the group, until a new "group" or page-line is found. The two group-directives are handled identically by Xymon and xymongen, but both forms are allowed for backwards compatibility.</p>
  </dd>
  <dt>
    group-sorted [group-title]
  </dt>
  <dd>
    <p>Same as the "group" line, but will sort the hosts inside the group so they appear in strict lexicographic order.</p>
  </dd>
  <dt>
    group-only COLUMN1|COLUMN2|COLUMN3 [group-title]
  </dt>
  <dd>
    <p>Same as the "group" and "group-compress" lines, but includes only the columns explicitly listed in the group. Any columns not listed will be ignored for these hosts.</p>
  </dd>
  <dt>
    group-except COLUMN1|COLUMN2|COLUMN3 [group-title]
  </dt>
  <dd>
    <p>Same as the "group-only" lines, but includes all columns EXCEPT those explicitly listed in the group. Any columns listed will be ignored for these hosts - all other columns are shown.</p>
  </dd>
  <dt>
    title Page, group or host title text
  </dt>
  <dd>
    <p>The "title" tag is used to put custom headings into the pages generated by xymongen, in front of page/subpage links, groups or hosts.</p><p>The title tag operates on the next item in the hosts.cfg file following the title tag.</p><p>If a title tag precedes a host entry, the title is shown just before the host is listed on the status page. The column headings present for the host will be repeated just after the heading.</p><p>If a title tag precedes a group entry, the title is show just before the group on the status page.</p><p>If a title tag precedes a page/subpage/subparent entry, the title text replaces the normal "Pages hosted locally" heading normally inserted by Xymon. This appears on the page that links to the sub-pages, not on the sub-page itself. To get a custom heading on the sub-page, you may want to use the "--pagetext-heading" when running <a href="../man1/xymongen.1.html"><strong>xymongen</strong>(1)</a></em></p>
  </dd>
  <dt>
    NAME:hostname
  </dt>
  <dd>
    <p>Overrides the default hostname used on the overview web pages. If "hostname" contains spaces, it must be enclosed in double quotes, e.g. NAME:"R&D Oracle Server"</p>
  </dd>
  <dt>
    CLIENT:hostname
  </dt>
  <dd>
    <p>Defines an alias for a host, which will be used when identifying status messages. This is typically used to accommodate a local client that sends in status reports with a different hostname, e.g. if you use hostnames with domains in your Xymon configuration, but the client is a silly Window box that does not include the hostname. Or vice-versa. Whatever the reason, this can be used to match status reports with the hosts you define in your hosts.cfg file. It causes incoming status reports with the specified hostname to be filed using the hostname defined in hosts.cfg.</p>
  </dd>
  <dt>
    NOCOLUMNS:column[,column]
  </dt>
  <dd>
    <p>Used to drop certain of the status columns generated by the Xymon client. <strong>column</strong> is one of <strong>cpu</strong>, <strong>disk</strong>, <strong>files</strong>, <strong>memory</strong>, <strong>msgs</strong>, <strong>ports</strong>, <strong>procs</strong>. This setting stops these columns from being updated for the host. Note: If the columns already exist, you must use the <a href="../man1/xymon.1.html"><strong>xymon</strong>(1)</a></em> utility to <strong>drop</strong> them, or they will go purple.</p>
  </dd>
  <dt>
    COMMENT:Host comment
  </dt>
  <dd>
    <p>Adds a small text after the hostname on the web page. This can be used to describe the host, without completely changing its display-name as the NAME: tag does. If the comment includes whitespace, it must be in double-quotes, e.g. COMMENT:"Sun web server"</p>
  </dd>
  <dt>
    DESCR:Hosttype:Description
  </dt>
  <dd>
    <p>Define some informational text about the host. The "Hosttype" is a text describing the type of this device - "router", "switch", "hub", "server" etc. The "Description" is an informational text that will be shown on the "Info" column page; this can e.g. be used to store information about the physical location of the device, contact persons etc. If the text contain whitespace, you must enclose it in double-quotes, e.g.  DESCR:"switch:4th floor Marketing switch"</p>
  </dd>
  <dt>
    CLASS:Classname
  </dt>
  <dd>
    <p>Force the host to belong to a specific class. Class-names are used when configuring log-file monitoring (they can be used as references in <a href="../man5/client-local.cfg.5.html"><strong>client-local.cfg</strong>(5)</a>,</em> <a href="../man5/analysis.cfg.5.html"><strong>analysis.cfg</strong>(5)</a></em> and <a href="../man5/alerts.cfg.5.html"><strong>alerts.cfg</strong>(5)</a></em> to group log file checks or alerts). Normally, class-names are controlled on the client by starting the Xymon client with the "--class=Classname" option. If you specify it in the hosts.cfg file on the Xymon server, it overrides any class name that the client reports. If not set, then the host belongs to a class named by the operating system the Xymon client is running on.</p>
  </dd>
  <dt>
    dialup
  </dt>
  <dd>
    <p>The keyword "dialup" for a host means that it is OK for it to be off-line - this should not trigger an alert. All network tests will go "clear" upon failure, and any missing reports from e.g. cpu- and disk-status will not go purple when they are not updated.</p>
  </dd>
  <dt>
    nonongreen
  </dt>
  <dd>
    <p>Ignore this host on the "All non-green" page. Even if it has an active alert, it will not be included in the "All non-green" page. This also removes the host from the event-log display.</p>
  </dd>
  <dt>
    nodisp
  </dt>
  <dd>
    <p>Ignore this host completely when generating the Xymon webpages. Can be useful for monitoring a host without having it show up on the webpages, e.g. because it is not yet in production use. Or for hiding a host that is shown only on a second pageset.</p>
  </dd>
  <dt>
    TRENDS:[*,][![graph,...]]
  </dt>
  <dd>
    <p>Defines the RRD graphs to include in the "trends" column generated by xymongen.  This option syntax is complex.</p><p>If this option is not present, xymongen provides graphs matching the standard set of RRD files: la, disk, memory, users, vmstat, iostat, netstat, tcp, bind, apache, sendmail</p><p>* If this option is specified, the list of graphs to include start out as being empty (no graphs).</p><p>* To include all default graphs, use an asterisk.  E.g. "TRENDS:*"</p><p>* To exclude a certain graph, specify it prefixed with '!'. E.g. to see all graphs except users: "TRENDS:*,!users"</p><p>* The netstat, vmstat and tcp graphs have many "subgraphs". Which of these are shown can be specified like this: "TRENDS:*,netstat:netstat2|netstat3,tcp:http|smtp|conn" This will show all graphs, but instead of the normal netstat graph, there will be two: The netstat2 and netstat3 graphs. Instead of the combined tcp graphs showing all services, there will be three: One for each of the http, conn and smtp services.</p>
  </dd>
  <dt>
    COMPACT:COLUMN=COLUMN1,COLUMN2,COLUMN3[;ditto]
  </dt>
  <dd>
    <p>Collapses a series of statuses into a single column on the overview web page.</p>
  </dd>
  <dt>
    INTERFACES:REGEXP
  </dt>
  <dd>
    <p>On systems with multiple network interfaces, the operating system may report a number of network interface where the statistics are of no interest. By default Xymon tracks and graphs the traffic on all network interfaces. This option defines a regular expression, and only those interfaces whose name matches the expression are tracked.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">XYMON TAGS FOR THE CRITICAL SYSTEMS OVERVIEW PAGE</h2>
        <div class="sectioncontent">
<p><strong>NOTE:</strong> The "NK" set of tags is deprecated. They will be supported for Xymon 4.x, but will be dropped in version 5. It is recommended that you move your critical systems view to the <a href="../man1/criticalview.cgi.1.html"><strong>criticalview.cgi</strong>(1)</a></em> viewer, which has a separate configuration tool, <a href="../man1/criticaleditor.cgi.1.html"><strong>criticaleditor.cgi</strong>(1)</a></em> with more facilities than the NK tags in hosts.cfg.</p><p>xymongen will create three sets of pages: The main page xymon.html, the all-non-green-statuses page (nongreen.html), and a specially reduced version of nongreen.html with only selected tests (critical.html). This page includes selected tests that currently have a red or yellow status.</p>
<dl class='dl-vertical'>
  <dt>
    NK:testname[,testname]
  </dt>
  <dd>
    <p>NOTE: This has been deprecated, you should use <a href="../man1/criticalview.cgi.1.html"><strong>criticalview.cgi</strong>(1)</a></em> instead of the NK tag.</p><p>Define the tests that you want included on the critical page. E.g. if you have a host where you only want to see the http tests on critical.html, you specify it as</p>
<pre>
  12.34.56.78  www.acme.com  # http://www.acme.com/ NK:http
</pre>
<p>If you want multiple tests for a host to show up on the critical.html page, specify all the tests separated by commas. The test names correspond to the column names (e.g. https tests are covered by an "NK:http" tag).</p>
  </dd>
  <dt>
    NKTIME=day:starttime:endtime[,day:starttime:endtime]
  </dt>
  <dd>
    <p>This tag limits the time when an active alert is presented on the NK web page.</p><p>By default, tests with a red or yellow status that are listed in the "NK:testname" tag will appear on the NK page. However, you may not want the test to be shown outside of normal working hours - if, for example, the host is not being serviced during week-ends.</p><p>You can then use the NKTIME tag to define the time periods where the alert will show up on the NK page.</p><p>The time specification consists of</p><p><strong>day-of-week:</strong> <strong>W</strong> means Mon-Fri ("weekdays"), <strong>*</strong> means all days, <strong>0</strong> .. <strong>6</strong> = Sunday .. Saturday. Listing multiple days is possible, e.g. "60" is valid meaning "Saturday and Sunday".</p><p><strong>starttime:</strong> Time to start showing errors, must be in 24-hour clock format as HHMM hours/minutes. E.g. for 8 am enter "0800", for 9.30 pm enter "2130"</p><p><strong>endtime:</strong> Time to stop showing errors.</p><p>If necessary, multiple periods can be specified. E.g. to monitor a site 24x7, except between noon and 1 pm, use NKTIME=*:0000:1159,*:1300:2359</p><p>The interval between start time and end time may cross midnight, e.g. <strong>*:2330:0200</strong> would be valid and have the same effect as <strong>*:2330:2400,*:0000:0200</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">XYMON TAGS FOR THE WML (WAP) CARDS</h2>
        <div class="sectioncontent">
<p>If xymongen is run with the "--wml" option, it will generate a set of WAP-format output "cards" that can be viewed with a WAP-capable device, e.g. a PDA or cell-phone.</p>
<dl class='dl-vertical'>
  <dt>
    WML:[+|-]testname[,[+|-]testname]
  </dt>
  <dd>
    <p>This tag determines which tests for this hosts are included in the WML (WAP) page. Syntax is identical to the NK: tag.</p><p>The default set of WML tests are taken from the --wml command line option.  If no "WML:" tag is specified, the "NK:" tag is used if present.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">XYMON STATUS PROPAGATION OPTIONS</h2>
        <div class="sectioncontent">
<p>These tags affect how a status propagates upwards from a single test to the page and higher. This can also be done with the command-line options --nopropyellow and --nopropred, but the tags apply to individual hosts, whereas the command line options are global.</p>
<dl class='dl-vertical'>
  <dt>
    NOPROPRED:[+|-]testname[,[+|-]testname]
  </dt>
  <dd>
    <p>This tag is used to inhibit a yellow or red status from propagating upwards - i.e. from a test status color to the (sub)page status color, and further on to xymon.html or nongreen.html</p><p>If a host-specific tag begins with a '-' or a '+', the host-specific tags are removed/added to the default setting from the command-line option. If the host-specific tag does not begin with a '+' or a '-', the default setting is ignored for this host and the NOPROPRED applies to the tests given with this tag.</p><p>E.g.: xymongen runs with "--nopropred=ftp,smtp". "NOPROPRED:+dns,-smtp" gives a NOPROPRED setting of "ftp,dns" (dns is added to the default, smtp is removed). "NOPROPRED:dns" gives a setting of "dns" only (the default is ignored).</p><p>Note: If you set use the "--nopropred=*" command line option to disable propagation of all alerts, you cannot use the "+" and "-" methods to add or remove from the wildcard setting. In that case, do not use the "+" or "-" setting, but simply list the required tests that you want to keep from propagating.</p>
  </dd>
  <dt>
    NOPROPYELLOW:[+|-]testname[,[+|-]testname]
  </dt>
  <dd>
    <p>Similar to NOPROPRED: tag, but applies to propagating a yellow status upwards.</p>
  </dd>
  <dt>
    NOPROPPURPLE:[+|-]testname[,[+|-]testname]
  </dt>
  <dd>
    <p>Similar to NOPROPRED: tag, but applies to propagating a purple status upwards.</p>
  </dd>
  <dt>
    NOPROPACK:[+|-]testname[,[+|-]testname]
  </dt>
  <dd>
    <p>Similar to NOPROPRED: tag, but applies to propagating an acknowledged status upwards.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">XYMON AVAILABILITY REPORT OPTIONS</h2>
        <div class="sectioncontent">
<p>These options affect the way the Xymon availability reports are processed (see <a href="../man1/report.cgi.1.html"><strong>report.cgi</strong>(1)</a></em> for details about availability reports).</p>
<dl class='dl-vertical'>
  <dt>
    REPORTTIME=day:starttime:endtime[,day:starttime:endtime]
  </dt>
  <dd>
    <p>This tag defines the time interval where you measure uptime of a service for reporting purposes.</p><p>When xymongen generates a report, it computes the availability of each service - i.e. the percentage of time that the service is reported as available (meaning: not red).</p><p>By default, this calculation is done on a 24x7 basis, so no matter when an outage occurs, it counts as downtime.</p><p>The REPORTTIME tag allows you to specify a period of time other than 24x7 for the service availability calculation. If you have systems where you only guarantee availability from e.g. 7 AM to 8 PM on weekdays, you can use</p>
<pre>
  REPORTTIME=W:0700:2000
</pre>
<p>and the availability calculation will only be performed for the service with measurements from this time interval.</p><p>The syntax for REPORTTIME is the same as the one used by the NKTIME parameter.</p><p>When REPORTTIME is specified, the availability calculation happens like this:</p><p>* Only measurements done during the given time period is used for the calculation.</p><p>* "blue" time reduces the length of the report interval, so if you are generating a report for a 10-hour period and there are 20 minutes of "blue" time, then the availability calculation will consider the reporting period to be 580 minutes (10 hours minus 20 minutes). This allows you to have scheduled downtime during the REPORTTIME interval without hurting your availability; this is (I believe) the whole idea of the downtime being "planned".</p><p>* "red" and "clear" status counts as downtime; "yellow" and "green" count as uptime. "purple" time is ignored.</p><p>The availability calculation correctly handles status changes that cross into/out of a REPORTTIME interval.</p><p>If no REPORTTIME is given, the standard 24x7 calculation is used.</p>
  </dd>
  <dt>
    WARNPCT:percentage
  </dt>
  <dd>
    <p>Xymon's reporting facility uses a computed availability threshold to color services green (100% available), yellow (above threshold, but less than 100%), or red (below threshold) in the reports.</p><p>This option allows you to set the threshold value on a host-by-host basis, instead of using a global setting for all hosts. The threshold is defined as the percentage of the time that the host must be available, e.g. "WARNPCT:98.5" if you want the threshold to be at 98.5%</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NETWORK TEST SETTINGS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    testip
  </dt>
  <dd>
    <p>By default, Xymon will perform a name lookup of the hostname to get the IP address it will use for network tests. This tag causes Xymon to use the IP listed in the hosts.cfg file.</p>
  </dd>
  <dt>
    NET:location
  </dt>
  <dd>
    <p>This tag defines the host as being tested from a specific location. If xymonnet sees that the environment variable XYMONNETWORK is set, it will only test the hosts that have a matching "NET:location" tag in the hosts.cfg file. So this tag is useful if you have more than one system running network tests, but you still want to keep a consolidated hosts.cfg file for all your systems.</p><p>Note: The "--test-untagged" option modifies this behaviour, see <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a></em></p>
  </dd>
  <dt>
    noclear
  </dt>
  <dd>
    <p>Some network tests depend on others. E.g. if the host does not respond to ping, then there's a good chance that the entire host is down and all network tests will fail. Or if the http server is down, then any web content checks are also likely to fail. To avoid floods of alerts, the default behaviour is for xymonnet to change the status of these tests that fail because of another problem to "clear" instead of "red". The "noclear" tag disables this behaviour and causes all failing tests to be reported with their true color.</p><p>This behaviour can also be implemented on a per-test basis by putting the "~" flag on any network test.</p><p>Note that "noclear" also affects whether stale status messages from e.g. a client on the host go purple or clear when the host is down; see the "noclear" description in the "GENERAL PER-HOST OPTIONS" section above.</p>
  </dd>
  <dt>
    nosslcert
  </dt>
  <dd>
    <p>Disables the standard check of any SSL certificates for this host. By default, if an SSL-enabled service is tested, a second test result is generated with information about the SSL certificate - this tag disables the SSL certificate checks for the host.</p>
  </dd>
  <dt>
    ssldays=WARNDAYS:ALARMDAYS
  </dt>
  <dd>
    <p>Define the number of days before an SSL certificate expires, in which the sslcert status shows a warning (yellow) or alarm (red) status. These default to the values from the "--sslwarn" and "--sslalarm" options for the <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a></em> tool; the values specified in the "ssldays" tag overrides the default.</p>
  </dd>
  <dt>
    sslbits=MINIMUMKEYBITS
  </dt>
  <dd>
    <p>Enable checking of the encryption strength of the SSL protocol offered by the server. If the server offers encryption using a key with fewer than MINIMUMKEYBITS bits, the "sslcert" test will go red. E.g. to check that your server only uses strong encryption (128 bits or better), use "sslbits=128".</p>
  </dd>
  <dt>
    sni
  </dt>
  <dd>
    
  </dd>
  <dt>
    nosni
  </dt>
  <dd>
    <p>Enables or disables use of SNI (Server Name Indication) for SSL tests.</p><p>Some SSL implementations cannot handle SSL handshakes with SNI data, so Xymon by default does not use SNI. This default can be changed with the "--sni" option for <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a></em> but can also be managed per host with these tags.</p><p>SNI support was added in Xymon 4.3.13, where the default was to use SNI. This was changed in 4.3.14 so SNI support is disabled by default, and the "sni" and "nosni" tags were introduced together with the "--sni" option for xymonnet.</p>
  </dd>
  <dt>
    DOWNTIME=day:starttime:endtime[,day:starttime:endtime]
  </dt>
  <dd>
    
  </dd>
  <dt>
    DOWNTIME=columns:day:starttime:endtime:cause[,columns:day:starttime:endtime:cause]
  </dt>
  <dd>
    <p>This tag can be used to ignore failed checks during specific times of the day - e.g. if you run services that are only monitored e.g. Mon-Fri 8am-5pm, or you always reboot a server every Monday between 5 and 6 pm.</p><p>What happens is that if a test fails during the specified time, it is reported with status BLUE instead of yellow or red. Thus you can still see when the service was unavailable, but alarms will not be triggered and the downtime is not counted in the availability calculations generated by the Xymon reports.</p><p>The "columns" and "cause" settings are optional, but both or neither must be specified. "columns" may be a comma-separated list of status columns to which DOWNTIME will apply.  The "cause" string will be displayed on the status web page to explain why the system is down.</p><p>The syntax for DOWNTIME is the same as the one used by the NKTIME parameter.</p>
  </dd>
  <dt>
    SLA=day:starttime:endtime[,day:starttime:endtime]
  </dt>
  <dd>
    <p>This tag is now deprecated. Use the DOWNTIME tag instead.</p><p>This tag works the opposite of the DOWNTIME tag - you use it to specify the periods of the day that the service should be green. Failures OUTSIDE the SLA interval are reported as blue.</p>
  </dd>
  <dt>
    depends=(testA:host1/test1,host2/test2),(testB:host3/test3),[...]
  </dt>
  <dd>
    <p>This tag allows you to define dependencies between tests. If "testA" for the current host depends on "test1" for host "host1" and test "test2" for "host2", this can be defined with</p>
<pre>
   depends=(testA:host1/test1,host2/test2)
</pre>
<p>When deciding the color to report for testA, if either host1/test1 failed or host2/test2 failed, if testA has failed also then the color of testA will be "clear" instead of red or yellow.</p><p>Since all tests are actually run before the dependencies are evaluated, you can use any host/test in the dependency - regardless of the actual sequence that the hosts are listed, or the tests run. It is also valid to use tests from the same host that the dependency is for. E.g.</p>
<pre>
   1.2.3.4  foo # http://foo/ webmin depends=(webmin:foo/http)
</pre>
<p>is valid; if both the http and the webmin tests fail, then webmin will be reported as clear.</p><p>Note: The "depends" tag is evaluated by xymonnet while running the network tests. It can therefore only refer to other network tests that are handled by the same server - there is currently no way to use the e.g. the status of locally run tests (disk, cpu, msgs) or network tests from other servers in a dependency definition. Such dependencies are silently ignored.</p>
  </dd>
  <dt>
    badTEST[-weekdays-starttime-endtime]:x:y:z
  </dt>
  <dd>
    <p>NOTE: This has been deprecated, use the <strong>delayred</strong> and <strong>delayyellow</strong> settings instead.</p><p>Normally when a network test fails, the status changes to red immediately.  With a "badTEST:x:y:z" tag this behaviour changes:</p><p>* While "z" or more successive tests fail, the column goes RED.</p><p>* While "y" or more successive tests fail, but fewer than "z", the column goes YELLOW.</p><p>* While "x" or more successive tests fail, but fewer than "y", the column goes CLEAR.</p><p>* While fewer than "x" successive tests fail, the column stays GREEN.</p><p>The optional time specification can be used to limit this "badTEST" setting to a particular time of day, e.g. to require a longer period of downtime before raising an alarm during out-of-office hours. The time-specification uses:</p><p>* Weekdays: The weekdays this badTEST tag applies, from 0 (Sunday) through 6 (Saturday). Putting "W" here counts as "12345", i.e. all working days. Putting "*" here counts as all days of the week, equivalent to "0123456".</p><p>* start time and end time are specified using 24-hour clocks, e.g. "badTEST-W-0900-2000" is valid for working days between 9 AM (09:00) and 8 PM (20:00).</p><p>When using multiple badTEST tags, the LAST one specified with a matching time-spec is used.</p><p>Note: The "TEST" is replaced by the name of the test, e.g.</p><p> 12.34.56.78  www.foo.com  # http://www.foo.com/ badhttp:1:2:4</p><p>defines a http test that goes "clear" after the first failure, "yellow" after two successive failures, and "red" after four successive failures.</p><p>For LDAP tests using URL's, use the option "badldapurl". For the other network tests, use "badftp", "badssh" etc.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONNECTIVITY (PING) TEST</h2>
        <div class="sectioncontent">
<p>These tags affect the behaviour of the xymonnet connectivity test.</p>
<dl class='dl-vertical'>
  <dt>
    noping
  </dt>
  <dd>
    <p>Disables the ping-test, but will keep the "conn" column on the web display with a notice that it has been disabled.</p>
  </dd>
  <dt>
    noconn
  </dt>
  <dd>
    <p>Disables the ping-test, and does not put a "conn" column on the web display.</p>
  </dd>
  <dt>
    conn
  </dt>
  <dd>
    <p>The "conn" test (which does a ping of the host) is enabled for all hosts by default, and normally you just want to disable it using "noconn" or "noping". However, on the rare occasion where you may want to check that a host is NOT up, you can specify it as an explicit test, and use the normal test modifiers, e.g. "!conn" will be green when the host is NOT up, and red if it does appear on the network.</p><p>The actual name of the tag - "conn" by default - depends on the "--ping=TESTNAME" option for xymonnet, as that decides the testname for the connectivity test.</p>
  </dd>
  <dt>
    conn={best,|worst,}IP1[,IP2...]
  </dt>
  <dd>
    <p>This adds additional IP-addresses that are pinged during the normal "conn" test. So the normal "conn" test must be enabled (the default) before this tag has any effect. The IP-addresses listed here are pinged in addition to the main IP-address.</p><p>When multiple IP's are pinged, you can choose if ALL IP's must respond (the "worst" method), or AT LEAST one IP must respond (the "best" setting). All of the IP's are reported in a single "conn" status, whose color is determined from the result of pinging the IP's and the best/worst setting. The default method is "best" - so it will report green if just one of the IP's respond to ping.</p>
  </dd>
  <dt>
    badconn[-weekdays-starttime-endtime]:x:y:z
  </dt>
  <dd>
    <p>This is taken directly from the "fping.sh" connectivity- testing script, and is used by xymonnet when it runs with ping testing enabled (the default). See the description of the "badTEST" tag.</p>
  </dd>
  <dt>
    route:router1,router2,....
  </dt>
  <dd>
    <p>This tag is taken from the "fping.sh" script, and is used by xymonnet when run with the "--ping" option to enable ping testing.</p><p>The router1,router2,... is a comma-separated list of hosts elsewhere in the hosts.cfg file. You cannot have any spaces in the list - separate hosts with commas.</p><p>This tag changes the color reported for a ping check that fails, when one or more of the hosts in the "route" list is also down. A "red" status becomes "yellow" - other colors are unchanged. The status message will include information about the hosts in the router-list that are down, to aid tracking down which router is the root cause of the problem.</p><p>Note: Internally, the ping test will still be handled as "failed", and therefore any other tests run for this host will report a status of "clear".</p>
  </dd>
  <dt>
    route_LOCATION:router1,router2,...
  </dt>
  <dd>
    <p>If the XYMONNETWORK environment variable is defined, a tag of "route_XYMONNETWORK:" is recognized by xymonnet with the same effect as the normal "route:" tag (see above). This allows you to have different route: tags for each server running xymonnet. The actual text for the tag then must match the value you have for the XYMONNETWORK setting. E.g. with XYMONNETWORK=dmz, the tag becomes "route_dmz:"</p>
  </dd>
  <dt>
    trace
  </dt>
  <dd>
    <p>If the connectivity test fails, run a "traceroute" and include the output from this in the status message from the failed connectivity test. Note: For this to work, you may have to define the TRACEROUTE environment variable, see <a href="../man5/xymonserver.cfg.5.html"><strong>xymonserver.cfg</strong>(5)</a></em></p>
  </dd>
  <dt>
    notrace
  </dt>
  <dd>
    <p>Similar to the "trace" option, this disables the running of a traceroute for the host after a failed connectivity test. It is only used if running traceroute is made the default via the --trace option.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIMPLE NETWORK TESTS</h2>
        <div class="sectioncontent">
<p>These tests perform a simple network test of a service by connecting to the port and possibly checking that a banner is shown by the server.</p><p>How these tests operate are configured in the <a href="../man5/protocols.cfg.5.html"><strong>protocols.cfg</strong>(5)</a></em> configuration file, which controls which port to use for the service, whether to send any data to the service, whether to check for a response from the service etc.</p><p>You can modify the behaviour of these tests on a per-test basis by adding one or more modifiers to the test: <strong>:NUMBER</strong> changes the port number from the default to the one you specify for this test. E.g. to test ssh running on port 8022, specify the test as <strong>ssh:8022</strong>.</p><p><strong>:s</strong> makes the test silent, i.e. it does not send any data to the service. E.g. to do a silent test of an smtp server, enter <strong>smtp:s</strong>.</p><p>You can combine these two: <strong>ftp:8021:s</strong> is valid.</p><p>If you must test a service from a multi-homed host (i.e. using a specific source IP-address instead of the one your operating system provides), you can use the modifier "@IPADDRESS" at the end of the test specification, <strong>after</strong> any other modifiers or port number. "IPADDRESS" must be a valid dotted IP-address (not hostname) which is assigned to the host running the network tests.</p><p>The name of the test also determines the column name that the test result will appear with in the Xymon webpages.</p><p>By prefixing a test with "!" it becomes a reverse test: Xymon will expect the service NOT to be available, and send a green status if it does NOT respond. If a connection to the service succeeds, the status will go red.</p><p>By prefixing a test with "?" errors will be reported with a "clear" status instead of red. This is known as a test for a "dialup" service, and allows you to run tests of hosts that are not always online, without getting alarms while they are off-line.</p>
<dl class='dl-vertical'>
  <dt>
    ftp ssh telnet smtp pop3 imap nntp rsync clamd oratns qmtp qmqp
  </dt>
  <dd>
    <p>These tags are for testing services offering the FTP, Secure Shell (ssh), SMTP, POP3, IMAP, NNTP, rsync, CLAM anti-virus daemon (clamd), Oracle TNS listener (oratns), qmail QMTP and QMQP protocols.</p>
  </dd>
  <dt>
    ftps telnets smtps pop3s imaps nntps
  </dt>
  <dd>
    <p>These tags are for testing of the SSL-tunneled versions of the standard ftp, telnet, smtp, pop3, imap and nntp protocols. If Xymon was configured with support for SSL, you can test these services like any other network service - xymonnet will setup an SSL-encrypted session while testing the service. The server certificate is validated and information about it sent in the "sslcert" column. Note that smtps does not have a standard port number assignment, so you will need to enter this into the protocols.cfg file or your /etc/services file.</p>
  </dd>
  <dt>
    bbd
  </dt>
  <dd>
    <p>Test that a Big Brother compatible daemon is running. This check works both for the Xymon <strong>xymond</strong>(8)</em> daemon, and the original Big Brother bbd daemon.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DNS SERVER TESTS</h2>
        <div class="sectioncontent">
<p>These tags are used to setup monitoring of DNS servers.</p>
<dl class='dl-vertical'>
  <dt>
    dns
  </dt>
  <dd>
    <p>Simple DNS test. It will attempt to lookup the A record for the hostname of the DNS server.</p>
  </dd>
  <dt>
    dig
  </dt>
  <dd>
    <p>This is an alias for the "dns" test. In xymonnet, the "dns" and "dig" tests are handled identically, so all of the facilities for testing described for the "dns" test are also available for the "dig" test.</p>
  </dd>
  <dt>
    dns=hostname
  </dt>
  <dd>
    
  </dd>
  <dt>
    dns=TYPE:lookup[,TYPE:lookup...]
  </dt>
  <dd>
    <p>The default DNS tests will attempt a DNS lookup of the DNS' servers own hostname. You can specify the hostname to lookup on a DNS server by listing it on each test.</p><p>The second form of the test allows you to perform multiple queries of the DNS server, requesting different types of DNS records. The TYPE defines the type of DNS data: A (IP-address), MX (Mail eXchanger), PTR (reverse), CNAME (alias), SOA (Start-Of-Authority), NS (Name Server) are among the more common ones used. The "lookup" is the query. E.g. to lookup the MX records for the "foo.com" domain, you would use "dns=mx:foo.com". Or to lookup the nameservers for the "bar.org" domain, "dns=ns:bar.org". You can list multiple lookups, separated by commas. For the test to end up with a green status, all lookups must succeed.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OTHER NETWORK TESTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    ntp
  </dt>
  <dd>
    <p>Check for a running NTP (Network Time Protocol) server on this host. This test uses the "ntpdate" utility to check for a NTP server - you should either have ntpdate in your PATH, or set the location of the ntpdate program in $XYMONHOME/etc/xymonserver.cfg</p>
  </dd>
  <dt>
    rpc[=rpcservice1,rpcservice2,...]
  </dt>
  <dd>
    <p>Check for one or more available RPC services. This check is indirect in that it only queries the RPC Portmapper on the host, not the actual service.</p><p>If only "rpc" is given, the test only verifies that the port mapper is available on the remote host. If you want to check that one or more RPC services are registered with the port mapper, list the names of the desired RPC services after the equals-sign. E.g. for a working NFS server the "mount", "nlockmgr" and "nfs" services must be available; this can be checked with "rpc=mount,nlockmgr,nfs".</p><p>This test uses the rpcinfo tool for the actual test; if this tool is not available in the PATH of xymonnet, you must define the RPCINFO environment variable to point at this tool. See <a href="../man5/xymonserver.cfg.5.html"><strong>xymonserver.cfg</strong>(5)</a></em></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HTTP TESTS</h2>
        <div class="sectioncontent">
<p>Simple testing of a http URL is done simply by putting the URL into the hosts.cfg file. Note that this only applies to URL's that begin with "http:" or "https:".</p><p>The following items describe more advanced forms of http URL's.</p>
<dl class='dl-vertical'>
  <dt>
    Basic Authentication with username/password
  </dt>
  <dd>
    <p>If the URL requires authentication in the form of a username and password, it is most likely using the HTTP "Basic" authentication. xymonnet support this, and you can provide the username and password either by embedding them in the URL e.g.</p>
<pre>
    http://USERNAME:PASSWORD@www.sample.com/
</pre>
<p>or by putting the username and password into the ~/.netrc file (see <strong>ftp</strong>(1)</em> for details).</p>
  </dd>
  <dt>
    Authentication with SSL client certificates
  </dt>
  <dd>
    <p>An SSL client certificate can be used for authentication. To use this, the client certificate must be stored in a PEM-formatted file together with the client certificate key, in the $XYMONHOME/certs/ directory. The URL is then given as</p>
<pre>
    http://CERT:FILENAME@www.sample.com/
</pre>
<p>The "CERT:" part is literal - i.e. you write C-E-R-T-colon and then the filename of the PEM-formatted certificate.</p><p>A PEM-formatted certificate file can be generated based on certificates stored in Microsoft Internet Explorer and OpenSSL. Do as follows:</p><p>From the MSIE Tools-Options menu, pick the Content tab, click on Certificates, choose the Personal tab, select the certificate and click Export. Make sure you export the private key also. In the Export File Format, choose PKCS 12 (.PFX), check the "Include all certificates" checkbox and uncheck the "Enable strong protection". Provide a temporary password for the exported file, and select a filename for the PFX-file.</p><p>Now run "openssl pkcs12 -in file.pfx -out file.pem". When prompted for the "Import Password", provide the temporary password you gave when exporting the certificate. Then provide a "PEM pass phrase" (twice) when prompted for one.</p><p>The file.pem file is the one you should use in the FILENAME field in the URL - this file must be kept in $XYMONHOME/certs/. The PEM pass phrase must be put into a file named the same as the certificate, but with extension ".pass". E.g. if you have the PEM certificate in $XYMONHOME/certs/client.pem, you must put the pass phrase into the $XYMONHOME/certs/client.pass file. Make sure to protect this file with Unix permissions, so that only the user running Xymon can read it.</p>
  </dd>
  <dt>
    Forcing an HTTP or SSL version
  </dt>
  <dd>
    <p>Some SSL sites will only allow you to connect, if you use specific "dialects" of HTTP or SSL. Normally this is auto-negotiated, but experience shows that this fails on some systems.</p><p>xymonnet can be told to use specific dialects, by adding one or more "dialect names" to the URL scheme, i.e. the "http" or "https" in the URL:</p><p>* "2",  e.g. https2://www.sample.com/ : use only SSLv2</p><p>* "3",  e.g. https3://www.sample.com/ : use only SSLv3</p><p>* "t",  e.g. httpst://www.sample.com/ : use only TLSv1</p><p>* "m",  e.g. httpsm://www.sample.com/ : use only 128-bit ciphers</p><p>* "h",  e.g. httpsh://www.sample.com/ : use only &gt;128-bit ciphers</p><p>* "10", e.g. http10://www.sample.com/ : use HTTP 1.0</p><p>* "11", e.g. http11://www.sample.com/ : use HTTP 1.1</p><p>These can be combined where it makes sense, e.g to force SSLv2 and HTTP 1.0 you would use "https210".</p>
  </dd>
  <dt>
    Testing sites by IP-address
  </dt>
  <dd>
    <p>xymonnet ignores the "testip" tag normally used to force a test to use the IP-address from the hosts.cfg file instead of the hostname, when it performs http and https tests.</p><p>The reason for this is that it interacts badly with virtual hosts, especially if these are IP-based as is common with https-websites.</p><p>Instead the IP-address to connect to can be overridden by specifying it as:</p><p>	http://www.sample.com=1.2.3.4/index.html</p><p>The "=1.2.3.4" will case xymonnet to run the test against the IP-address "1.2.3.4", but still trying to access a virtual website with the name "www.sample.com".</p><p>The "=ip.address.of.host" must be the last part of the hostname, so if you need to combine this with e.g. an explicit port number, it should be done as</p><p>	http://www.sample.com:3128=1.2.3.4/index.html</p>
  </dd>
  <dt>
    HTTP Testing via proxy
  </dt>
  <dd>
    <p><strong>NOTE:</strong> This is not enabled by default. You must add the "--bb-proxy-syntax" option when running <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a></em> if you want to use this.</p><p>xymonnet supports the Big Brother syntax for specifying an HTTP proxy to use when performing http tests. This syntax just joins the proxy- and the target-URL into one, e.g.</p>
<pre>
    http://webproxy.sample.com:3128/http://www.foo.com/
</pre>
<p>would be the syntax for testing the www.foo.com website via the proxy running on "webproxy.sample.com" port 3128.</p><p>If the proxy port number is not specified, the default HTTP port number (80) is used.</p><p>If your proxy requires authentication, you can specify the username and password inside the proxy-part of the URL, e.g.</p>
<pre>
    http://fred:Wilma1@webproxy.sample.com:3128/http://www.foo.com/
</pre>
<p>will authenticate to the proxy using a username of "fred" and a password of "Wilma1", before requesting the proxy to fetch the www.foo.com homepage.</p><p>Note that it is not possible to test https-sites via a proxy, nor is it possible to use https for connecting to the proxy itself.</p>
  </dd>
  <dt>
    cont[=COLUMN];URL;[expected_data_regexp|#digesttype:digest]
  </dt>
  <dd>
    <p>This tag is used to specify a http/https check, where it is also checked that specific content is present in the server response.</p><p>If the URL itself includes a semi-colon, this must be escaped as '%3B' to avoid confusion over which semicolon is part of the URL, and which semicolon acts as a delimiter.</p><p>The data that must be returned can be specified either as a regular expression (except that &lt;space&gt; is not allowed) or as a message digest (typically using an MD5 sum or SHA-1 hash).</p><p>The regex is pre-processed for backslash " sequences. So you can really put any character in this string by escaping it first:</p>
<pre>
   &#92;n     Newline (LF, ASCII 10 decimal)
</pre>

<pre>
   &#92;r     Carriage return (CR, ASCII 13 decimal)
</pre>

<pre>
   &#92;t     TAB (ASCII 8 decimal)
</pre>

<pre>
   &#92;nbsp;   Backslash (ASCII 92 decimal)
</pre>

<pre>
   &#92;XX    The character with ASCII hex-value XX
</pre>
<p>If you must have whitespace in the regex, use the [[:space:]] syntax, e.g. if you want to test for the string "All is OK", use "All[[:space:]]is[[:space:]]OK". Note that this may depend on your particular implementation of the regex functions found in your C library. Thanks to Charles Goyard for this tip.</p><p>Note: If you are migrating from the "cont2.sh" script, you must change the '_' used as wildcards by cont2.sh into '.' which is the regular-expression wildcard character.</p><p>Message digests can use whatever digest algorithms your libcrypto implementation (usually OpenSSL) supports. Common message digests are "md5" and "sha1". The digest is calculated on the data portion of the response from the server, i.e. HTTP headers are not included in the digest (as they change from one request to the next).</p><p>The expected digest value can be computed with the <a href="../man1/xymondigest.1.html"><strong>xymondigest</strong>(1)</a></em> utility.</p><p>"cont" tags in hosts.cfg result in two status reports: One status with the "http" check, and another with the "content" check.</p><p>As with normal URL's, the extended syntax described above can be used e.g. when testing SSL sites that require the use of SSLv2 or strong ciphers.</p><p>The column name for the result of the content check is by default called "content" - you can change the default with the "--content=NAME" option to xymonnet. See <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a></em> for a description of this option.</p><p>If more than one content check is present for a host, the first content check is reported in the column "content", the second is reported in the column "content1", the third in "content2" etc.</p><p>You can also specify the column name directly in the test specification, by writing it as "cont=COLUMN;http://...". Column-names cannot include whitespace or semi-colon.</p><p>The content-check status by default includes the full URL that was requested, and the HTML data returned by the server. You can hide the HTML data on a per-host (not per-test) basis by adding the <strong>HIDEHTTP</strong> tag to the host entry.</p>
  </dd>
  <dt>
    content=URL
  </dt>
  <dd>
    <p>This syntax is deprecated. You should use the "cont" tag instead, see above.</p>
  </dd>
  <dt>
    post[=COLUMN];URL;form-data;[expected_data_regexp|#digesttype:digest]
  </dt>
  <dd>
    <p>This tag can be used to test web pages, that use an input form. Data can be posted to the form by specifying them in the form-data field, and the result can be checked as if it was a normal content check (see above for a description of the cont-tag and the restrictions on how the URL must be writen).</p><p>The form-data field must be entered in "application/x-www-form-urlencoded" format, which is the most commonly used format for web forms.</p><p>E.g. if you have a web form defined like this:</p>
<pre>
   &lt;form action="/cgi-bin/form.cgi" method="post"&gt;
</pre>

<pre>
     &lt;p&gt;Given name&lt;input type="text" name="givenname"&gt;&lt;/p&gt;
</pre>

<pre>
     &lt;p&gt;Surname&lt;input type="text" name="surname"&gt;&lt;/p&gt;
</pre>

<pre>
     &lt;input type="submit" value="Send"&gt;
</pre>

<pre>
   &lt;/form&gt;
</pre>
<p>and you want to post the value "John" to the first field and "Doe Jr." to the second field, then the form data field would be</p>
<pre>
    givenname=John&surname=Doe+Jr.
</pre>
<p>Note that any spaces in the input value is replaced with '+'.</p><p>If your form-data requires a different content-type, you can specify it by beginning the form-data with <strong>(content-type=TYPE)</strong>, e.g. "(content-type=text/xml)" followed by the POST data. Note that as with normal forms, the POST data should be specified using escape-sequences for reserved characters: "space" should be entered as "&#92;x20", double quote as "&#92;x22", newline as "&#92;n", carriage-return as "&#92;r", TAB as "&#92;t", backslash as "&#92; Any byte value can be entered using "&#92;xNN" with NN being the hexadecimal value, e.g. "&#92;x20" is the space character.</p><p>The [expected_data_regexp|#digesttype:digest] is the expected data returned from the server in response to the POST. See the "cont;" tag above for details. If you are only interested in knowing if it is possible to submit the form (but don't care about the data), this can be an empty string - but the ';' at the end is required.</p>
  </dd>
  <dt>
    nocont[=COLUMN];URL;forbidden_data_regexp
  </dt>
  <dd>
    <p>This tag works just like "cont" tag, but reverses the test. It is green when the "forbidden_data_regexp" is NOT found in the response, and red when it IS found. So it can be used to watch for data that should NOT be present in the response, e.g. a server error message.</p>
  </dd>
  <dt>
    nopost[=COLUMN];URL;form-data;expected_data_regexp
  </dt>
  <dd>
    <p>This tag works just like "post" tag, but reverses the test. It is green when the "forbidden_data_regexp" is NOT found in the response, and red when it IS found. So it can be used to watch for data that should NOT be present in the response, e.g. a server error message.</p>
  </dd>
  <dt>
    type[=COLUMN];URL;expected_content_type
  </dt>
  <dd>
    <p>This is a variant of the content check - instead of checking the content data, it checks the type of the data as given by the HTTP Content-Type: header. This can used to check if a URL returns e.g. a PDF file, regardless of what is inside the PDF file.</p>
  </dd>
  <dt>
    soap[=COLUMN];URL;SOAPMESSAGE;[expected_data_regexp|#digesttype:digest]
  </dt>
  <dd>
    <p>Send SOAP message over HTTP. This is identical to the "cont" test, except that the request sent to the server uses a Content-type of "application/soap+xml", and it also sends a "SOAPAction" header with the URL. SOAPMESSAGE is the SOAP message sent to the server. Since SOAP messages are usually XML documents, you can store this in a separate file by specifying "file:FILENAME" as the SOAPMESSAGE parameter. E.g. a test specification of</p>
<pre>
    soap=echo;http://soap.foo.bar/baz?wsdl;file:/home/foo/msg.xml;.
</pre>
<p>will read the SOAP message from the file /home/foo/msg.xml and post it to the URL http://soap.foo.bar/bas?wsdl</p><p>Note that SOAP XML documents usually must begin with the XML version line, <strong>&lt;?xml version="1.0"&gt;</strong></p>
  </dd>
  <dt>
    nosoap[=COLUMN];URL;SOAPMESSAGE;[forbidden_data_regexp|#digesttype:digest]
  </dt>
  <dd>
    <p>This tag works just like "soap" tag, but reverses the test. It is green when the "forbidden_data_regexp" is NOT found in the response, and red when it IS found. So it can be used to watch for data that should NOT be present in the response, e.g. a server error message.</p>
  </dd>
  <dt>
    httpstatus[=COLUMN];URL;okstatusexpr;notokstatusexpr
  </dt>
  <dd>
    <p>This is used to explicitly test for certain HTTP statuscodes returned when the URL is requested. The <strong>okstatusexpr</strong> and <strong>nokokstatusexpr</strong> expressions are Perl-compatible regular expressions, e.g. "2..|302" will match all OK codes and the redirect (302) status code. If the URL cannot be retrieved, the status is "999".</p>
  </dd>
  <dt>
    HIDEHTTP
  </dt>
  <dd>
    <p>The status display for HTTP checks usually includes the URL, and for content checks also the actual data from the web page. If you would like to hide these from view, then the HIDEHTTP tag will keep this information from showing up on the status webpages.</p>
  </dd>
  <dt>
    headermatch
  </dt>
  <dd>
    <p>Content checks by default only search the HTML body returned by the webserver. This option causes it to also search the HTTP headers for the string that must / must not be present.</p>
  </dd>
  <dt>
    browser=BROWSERNAME
  </dt>
  <dd>
    <p>By default, Xymon sends an HTTP "User-Agent" header identifying it a "Xymon". Some websites require that you use a specific browser, typically Internet Explorer. To cater for testing of such sites, this tag can be used to modify the data sent in the User-Agent header.</p><p>E.g. to perform an HTTP test with Xymon masquerading as an Internet Explorer 6.0 browser, use <strong>browser="Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"</strong>. If you do not know what the User-Agent header should be, open up the browser that works with this particular site, and open the URL "javascript:document.writeln(navigator.userAgent)" (just copy this into the "Open URL" dialog. The text that shows up is what the browser sends as the User-Agent header.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LDAP (DIRECTORY SERVER) TESTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    ldap
  </dt>
  <dd>
    
  </dd>
  <dt>
    ldaps
  </dt>
  <dd>
    <p>Simple check for an LDAP service. This check merely looks for any service running on the ldap/ldaps service port, but does not perform any actual LDAP transaction.</p>
  </dd>
  <dt>
    ldap://hostport/dn[?attrs[?scope[?filter[?exts]]]]
  </dt>
  <dd>
    <p>Check for an LDAP service by performing an LDAP request. This tag is in the form of an LDAP URI (cf. RFC 2255). This type of LDAP test requires that <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a></em> was built with support for LDAP, e.g. via the OpenLDAP library. The components of the LDAP URI are:</p>
<pre>
  <em>hostport</em> is a host name with an optional ":portnumber"
  <em>dn</em> is the search base
  <em>attrs</em> is a comma separated list of attributes to request
  <em>scope</em> is one of these three strings:
    base one sub (default=base)
  <em>filter</em> is filter
  <em>exts</em> are recognized set of LDAP and/or API extensions.
</pre>

  </dd>
  <dt>
    ldaps://hostport/dn[?attrs[?scope[?filter[?exts]]]]
  </dt>
  <dd>
    <p>LDAP service check using LDAPv3 and STARTTLS for talking to an LDAP server that requires TLS encryption. See <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a></em> for a discussion of the different ways of running LDAP servers with SSL/TLS, and which of these are supported by xymonnet.</p>
  </dd>
  <dt>
    ldaplogin=username:password
  </dt>
  <dd>
    <p>Define a username and password to use when binding to the LDAP server for ldap URI tests. If not specified, xymonnet will attempt an anonymous bind.</p>
  </dd>
  <dt>
    ldapyellowfail
  </dt>
  <dd>
    <p>Used with an LDAP URL test. If the LDAP query fails during the search of the directory, the ldap status is normally reported as "red" (alarm). This tag reduces a search failure to a "yellow" (warning) status.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PERFORMANCE MONITORING TESTS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    apache[=URL]
  </dt>
  <dd>
    <p>If you are running an Apache web server, adding this tag makes <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a></em> collect performance statistics from the Apache web server by querying the URL <strong>http://IP.ADDRESS.OF.HOST/server-status?auto</strong>. The response is sent as a data-report and processed by the Xymon xymond_rrd module into an RRD file and an "apache" graph. If your web server requires e.g. authentication, or runs on a different URL for the server-status, you can provide the full URL needed to fetch the server-status page, e.g. <strong>apache=http://LOGIN:PASSWORD@10.0.0.1/server-status?auto</strong> for a password protected server-status page, or <strong>apache=http://10.0.0.1:8080/apache/server-status?auto</strong> for a server listening on port 8080 and with a different path to the server-status page.</p><p>Note that you need to enable the server-status URL in your Apache configuration. The following configuration is needed:</p>
<pre>
    &lt;Location /server-status&gt;
</pre>

<pre>
        SetHandler server-status
</pre>

<pre>
        Order deny,allow
</pre>

<pre>
        Deny from all
</pre>

<pre>
        allow from 127.0.0.1
</pre>

<pre>
    &lt;/Location&gt;
</pre>

<pre>
    ExtendedStatus On
</pre>
<p>Change "127.0.0.1" to the IP-address of the server that runs your network tests.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEFAULT HOST</h2>
        <div class="sectioncontent">
<p>If you have certain tags that you want to apply to all hosts, you can define a host name ".default." and put the tags on that host. Note that per-host definitions will override the default ones.</p><p><strong>NOTE:</strong> The ".default." host entry will only accept the following tags - others are silently ignored: NOCOLUMNS, COMMENT, DESCR, CLASS, dialup, testip, nonongreen, nodisp, noinfo, notrends, TRENDS, NOPROPRED, NOPROPYELLOW, NOPROPPURPLE, NOPROPACK, REPORTTIME, WARNPCT, NET, noclear, nosslcert, ssldays, DOWNTIME, depends, noping, noconn, trace, notrace, HIDEHTTP, browser, pulldata. Specifically, note that network tests, "badTEST" settings, and alternate pageset relations cannot be listed on the ".default." host.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SENDING SUMMARIES TO REMOTE XYMON SERVERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    summary ROW.COLUMN IP URL
  </dt>
  <dd>
    <p>If you have multiple Xymon servers, the "summary" directive lets you form a hierarchy of servers by sending the overall status of this server to a remote Xymon server, which then displays this in a special summary section. E.g. if your offices are spread over three locations, you can have a Xymon server at each office. These branch-office Xymon have a "summary" definition in their hosts.cfg file that makes them report the overall status of their branch Xymon to the central Xymon server you maintain at the corporate headquarters.</p><p>Multiple "summary" definitions are allowed.</p><p>The ROW.COLUMN setting defines how this summary is presented on the server that receives the summary. The ROW text will be used as the heading for a summary line, and the COLUMN defines the name of the column where this summary is shown - like the hostname and testname used in the normal displays. The IP is the IP-address of the <strong>remote</strong> (upstream) Xymon server, where this summary is sent). The URL is the URL of your <strong>local</strong> Xymon server.</p><p>The URL need not be that of your Xymon server's main page - it could be the URL of a sub-page on the local Xymon server. Xymon will report the summary using the color of the page found at the URL you specify. E.g. on your corporate Xymon server you want a summary from the Las Vegas office - but you would like to know both what the overall status is, and what is the status of the servers on the critical Sales department back-office servers in Las Vegas. So you configure the Las Vegas Xymon server to send <strong>two</strong> summaries:</p>
<pre>
    summary Vegas.All 10.0.1.1 http://vegas.foo.com/xymon/
</pre>

<pre>
    summary Vegas.Sales 10.0.1.1 http://vegas.foo.com/xymon/sales/
</pre>
<p>This gives you one summary line for Baltimore, with two columns: An "All" column showing the overall status, and a "Sales" column showing the status of the "sales" page on the Baltimore Xymon server.</p><p>Note: Pages defined using alternate pageset definitions cannot be used, the URL must point to a web page from the default set of Xymon webpages.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OTHER TAGS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    pulldata[=[IP][:port]]
  </dt>
  <dd>
    <p>This option is recognized by the <a href="../man8/xymonfetch.8.html"><strong>xymonfetch</strong>(8)</a></em> utility, and causes it to poll the host for client data. The optional IP-address and port-number can be used if the client-side <a href="../man8/msgcache.8.html"><strong>msgcache</strong>(8)</a></em> daemon is listening on a non-standard IP-address or port-number.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><strong>~xymon/server/etc/hosts.cfg</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO hosts.cfg&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/xymongen.1.html"><strong>xymongen</strong>(1)</a>, <a href="../man1/xymonnet.1.html"><strong>xymonnet</strong>(1)</a>, <a href="../man1/xymondigest.1.html"><strong>xymondigest</strong>(1)</a>, <a href="../man5/xymonserver.cfg.5.html"><strong>xymonserver.cfg</strong>(5)</a>, <a href="../man7/xymon.7.html"><strong>xymon</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="hosts.allow.5.html"><span aria-hidden="true">&larr;</span> hosts.allow.5: Format of host access control files</a></li>
   <li class="next"><a href="hosts.conf.5.html">hosts.conf.5: Access control for network ups tools cgi programs <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
