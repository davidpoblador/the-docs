<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapo-constraint: Attribute constraint overlay to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Attribute constraint overlay to slapd">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="slapo-constraint (5) manual">
  <meta name="twitter:description" content="Attribute constraint overlay to slapd">
  <meta name="twitter:image" content="https://www.carta.tech/images/slapd-slapo-constraint-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/slapo-constraint.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="slapo-constraint (5) manual" />
  <meta property="og:description" content="Attribute constraint overlay to slapd" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/slapd-slapo-constraint-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapo-constraint<small> (5)</small></h1>
        <p class="lead">Attribute constraint overlay to slapd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapo-constraint.5.html">
      <span itemprop="name">slapo-constraint: Attribute constraint overlay to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/slapd/">
      <span itemprop="name">slapd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapo-constraint.5.html">
      <span itemprop="name">slapo-constraint: Attribute constraint overlay to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>/etc/ldap/slapd.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The constraint overlay is used to ensure that attribute values match some constraints beyond basic LDAP syntax.  Attributes can have multiple constraints placed upon them, and all must be satisfied when modifying an attribute value under constraint.</p><p>This overlay is intended to be used to force syntactic regularity upon certain string represented data which have well known canonical forms, like telephone numbers, post codes, FQDNs, etc.</p><p>It constrains only LDAP <em>add</em>, <em>modify</em> and <em>rename</em> commands and only seeks to control the <em>add</em> and <em>replace</em> values of <em>modify</em> and <em>rename</em> requests.</p><p>No constraints are applied for operations performed with the <em>relax</em> control set.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>This <strong>slapd.conf</strong> option applies to the constraint overlay. It should appear after the <strong>overlay</strong> directive.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>constraint_attribute &lt;attribute_name&gt;[,...] &lt;type&gt; &lt;value&gt; [&lt;extra&gt; [...]]</strong></p>
  </dt>
  <dd>
    <p>Specifies the constraint which should apply to the comma-separated attribute list named as the first parameter. Five types of constraint are currently supported - <strong>regex</strong>, <strong>size</strong>, <strong>count</strong>, <strong>uri</strong>, and <strong>set</strong>.</p><p>The parameter following the <strong>regex</strong> type is a Unix style regular expression (See <a href="../man7/regex.7.html"><strong>regex</strong>(7)</a> ). The parameter following the <strong>uri</strong> type is an LDAP URI. The URI will be evaluated using an internal search. It must not include a hostname, and it must include a list of attributes to evaluate.</p><p>The parameter following the <strong>set</strong> type is a string that is interpreted according to the syntax in use for ACL sets.  This allows to construct constraints based on the contents of the entry.</p><p>The <strong>size</strong> type can be used to enforce a limit on an attribute length, and the <strong>count</strong> type limits the number of values of an attribute.</p><p>Extra parameters can occur in any order after those described above.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;extra&gt; : restrict=&lt;uri&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>This extra parameter allows to restrict the application of the corresponding constraint only to entries that match the <em>base</em>, <em>scope</em> and <em>filter</em> portions of the LDAP URI. The <em>base</em>, if present, must be within the naming context of the database. The <em>scope</em> is only used when the <em>base</em> is present; it defaults to <strong>base</strong>. The other parameters of the URI are not allowed.</p>
  </dd>

</dl>
<p>Any attempt to add or modify an attribute named as part of the constraint overlay specification which does not fit the constraint listed will fail with a LDAP_CONSTRAINT_VIOLATION error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
overlay constraint
constraint_attribute jpegPhoto size 131072
constraint_attribute userPassword count 3
constraint_attribute mail regex ^[[:alnum:]]+@mydomain.com$
constraint_attribute title uri
  ldap:///dc=catalog,dc=example,dc=com?title?sub?(objectClass=titleCatalog)
constraint_attribute cn,sn,givenName set
  "(this/givenName + [ ] + this/sn) & this/cn"
  restrict="ldap:///ou=People,dc=example,dc=com??sub?(objectClass=inetOrgPerson)"
</pre>
<p>A specification like the above would reject any <strong>mail</strong> attribute which did not look like <strong>&lt;alpha-numeric string&gt;@mydomain.com</strong>. It would also reject any <strong>title</strong> attribute whose values were not listed in the <strong>title</strong> attribute of any <strong>titleCatalog</strong> entries in the given scope. (Note that the "dc=catalog,dc=example,dc=com" subtree ought to reside in a separate database, otherwise the initial set of titleCatalog entries could not be populated while the constraint is in effect.) Finally, it requires the values of the attribute <strong>cn</strong> to be constructed by pairing values of the attributes <strong>sn</strong> and <strong>givenName</strong>, separated by a space, but only for entries derived from the objectClass <strong>inetOrgPerson</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>/etc/ldap/slapd.conf</p>
  </dt>
  <dd>
    <p>default slapd configuration file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO slapo-constraint&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/slapd.conf.5.html"><strong>slapd.conf</strong>(5)</a>, <a href="../man5/slapd-config.5.html"><strong>slapd-config</strong>(5)</a>,</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p>This module was written in 2005 by Neil Dunbar of Hewlett-Packard and subsequently extended by Howard Chu and Emmanuel Dreyfus. <strong>OpenLDAP Software</strong> is developed and maintained by The OpenLDAP Project &lt;http://www.openldap.org/&gt;. <strong>OpenLDAP Software</strong> is derived from University of Michigan LDAP 3.3 Release.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slapo-collect.5.html"><span aria-hidden="true">&larr;</span> slapo-collect.5: Collective attributes overlay to slapd</a></li>
   <li class="next"><a href="slapo-dds.5.html">slapo-dds.5: Dynamic directory services overlay to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
