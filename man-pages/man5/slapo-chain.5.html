<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapo-chain - chain overlay to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Chain overlay to slapd">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapo-chain<small> (5)</small></h1>
        <p class="lead">Chain overlay to slapd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapo-chain.5.html">
      <span itemprop="name">slapo-chain</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/openldap/">
      <span itemprop="name">openldap</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p>ETCDIR/slapd.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The <strong>chain</strong> overlay to <strong>slapd</strong>(8) allows automatic referral chasing. Any time a referral is returned (except for bind operations), it is chased by using an instance of the ldap backend. If operations are performed with an identity (i.e. after a bind), that identity can be asserted while chasing the referrals by means of the <em>identity assertion</em> feature of back-ldap (see <a href="../man5/slapd-ldap.5.html"><strong>slapd-ldap</strong>(5)</a> for details), which is essentially based on the <strong>proxied authorization</strong> control [RFC 4370]. Referral chasing can be controlled by the client by issuing the <strong>chaining</strong> control (see <em>draft-sermersheim-ldap-chaining</em> for details.)</p>
<p class='spacer'>

<p class='spacer'>

<p>The config directives that are specific to the <strong>chain</strong> overlay are prefixed by <strong>chain-</strong>, to avoid potential conflicts with directives specific to the underlying database or to other stacked overlays.</p>
<p class='spacer'>

<p class='spacer'>

<p>There are very few chain overlay specific directives; however, directives related to the instances of the <em>ldap</em> backend that may be implicitly instantiated by the overlay may assume a special meaning when used in conjunction with this overlay.  They are described in <a href="../man5/slapd-ldap.5.html"><strong>slapd-ldap</strong>(5)</a>, and they also need to be prefixed by <strong>chain-</strong>.</p>
<p class='spacer'>

<p>Note: this overlay is built into the <em>ldap</em> backend; it is not a separate module.</p>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>overlay chain</strong></dt>
    <dd>
  <p>This directive adds the chain overlay to the current backend. The chain overlay may be used with any backend, but it is mainly intended for use with local storage backends that may return referrals. It is useless in conjunction with the <em>slapd-ldap</em> and <em>slapd-meta</em> backends because they already exploit the libldap specific referral chase feature. [Note: this may change in the future, as the <strong>ldap</strong>(5) and <strong>meta</strong>(5) backends might no longer chase referrals on their own.]</p>
    </dd>
    <dt><strong>chain-cache-uri {FALSE|true}</strong></dt>
    <dd>
  <p>This directive instructs the <em>chain</em> overlay to cache connections to URIs parsed out of referrals that are not predefined, to be reused for later chaining. These URIs inherit the properties configured for the underlying <a href="../man5/slapd-ldap.5.html"><strong>slapd-ldap</strong>(5)</a> before any occurrence of the <strong>chain-uri</strong> directive; basically, they are chained anonymously.</p>
    </dd>
    <dt><strong>chain-chaining [resolve=&lt;r&gt;] [continuation=&lt;c&gt;] [critical]</strong></dt>
    <dd>
  <p>This directive enables the <em>chaining</em> control (see <em>draft-sermersheim-ldap-chaining</em> for details) with the desired resolve and continuation behaviors and criticality. The <strong>resolve</strong> parameter refers to the behavior while discovering a resource, namely when accessing the object indicated by the request DN; the <strong>continuation</strong> parameter refers to the behavior while handling intermediate responses, which is mostly significant for the search operation, but may affect extended operations that return intermediate responses. The values <strong>r</strong> and <strong>c</strong> can be any of <strong>chainingPreferred</strong>, <strong>chainingRequired</strong>, <strong>referralsPreferred</strong>, <strong>referralsRequired</strong>. If the <strong>critical</strong> flag affects the control criticality if provided. [This control is experimental and its support may change in the future.]</p>
    </dd>
    <dt><strong>chain-max-depth &lt;n&gt;</strong></dt>
    <dd>
  <p>In case a referral is returned during referral chasing, further chasing occurs at most <strong>&lt;n&gt;</strong> levels deep.  Set to <strong>1</strong> (the default) to disable further referral chasing.</p>
    </dd>
    <dt><strong>chain-return-error {FALSE|true}</strong></dt>
    <dd>
  <p>In case referral chasing fails, the real error is returned instead of the original referral.  In case multiple referral URIs are present, only the first error is returned.  This behavior may not be always appropriate nor desirable, since failures in referral chasing might be better resolved by the client (e.g. when caused by distributed authentication issues).</p>
    </dd>
    <dt><strong>chain-uri &lt;ldapuri&gt;</strong></dt>
    <dd>
  <p>This directive instantiates a new underlying <em>ldap</em> database and instructs it about which URI to contact to chase referrals. As opposed to what stated in <a href="../man5/slapd-ldap.5.html"><strong>slapd-ldap</strong>(5)</a>, only one URI can appear after this directive; all subsequent <a href="../man5/slapd-ldap.5.html"><strong>slapd-ldap</strong>(5)</a> directives prefixed by <strong>chain-</strong> refer to this specific instance of a remote server.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>Directives for configuring the underlying ldap database may also be required, as shown in this example:</p>
<p class='spacer'>

<pre>overlay                 chain
chain-rebind-as-user    FALSE

chain-uri               "ldap://ldap1.example.com"
chain-rebind-as-user    TRUE
chain-idassert-bind     bindmethod="simple"
                        binddn="cn=Auth,dc=example,dc=com"
                        credentials="secret"
                        mode="self"

chain-uri               "ldap://ldap2.example.com"
chain-idassert-bind     bindmethod="simple"
                        binddn="cn=Auth,dc=example,dc=com"
                        credentials="secret"
                        mode="none"
</pre>

<p class='spacer'>

<p>Any valid directives for the ldap database may be used; see <a href="../man5/slapd-ldap.5.html"><strong>slapd-ldap</strong>(5)</a> for details. Multiple occurrences of the <strong>chain-uri</strong> directive may appear, to define multiple "trusted" URIs where operations with <em>identity assertion</em> are chained. All URIs not listed in the configuration are chained anonymously. All <a href="../man5/slapd-ldap.5.html"><strong>slapd-ldap</strong>(5)</a> directives appearing before the first occurrence of <strong>chain-uri</strong> are inherited by all URIs, unless specifically overridden inside each URI configuration.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt>ETCDIR/slapd.conf</dt>
    <dd>
  <p>default slapd configuration file</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>slapd.conf</strong>(5), <strong>slapd-config</strong>(5), <a href="../man5/slapd-ldap.5.html"><strong>slapd-ldap</strong>(5)</a>, <strong>slapd</strong>(8).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Originally implemented by Howard Chu; extended by Pierangelo Masarati.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slapo-auditlog.5.html"><span aria-hidden="true">&larr;</span> slapo-auditlog.5: Audit Logging overlay to slapd</a></li>
   <li class="next"><a href="slapo-cloak.5.html">slapo-cloak.5: Attribute cloak overlay to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
