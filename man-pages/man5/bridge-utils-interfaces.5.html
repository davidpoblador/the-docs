<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bridge-utils-interfaces: Bridge-utils extensions for the interfaces(5) file format</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Bridge-utils extensions for the interfaces(5) file format">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bridge-utils-interfaces (5) manual">
  <meta name="twitter:description" content="Bridge-utils extensions for the interfaces(5) file format">
  <meta name="twitter:image" content="https://www.carta.tech/images/bridge-utils-bridge-utils-interfaces-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/bridge-utils-interfaces.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bridge-utils-interfaces (5) manual" />
  <meta property="og:description" content="Bridge-utils extensions for the interfaces(5) file format" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/bridge-utils-bridge-utils-interfaces-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bridge-utils-interfaces<small> (5)</small></h1>
        <p class="lead">Bridge-utils extensions for the interfaces(5) file format</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/bridge-utils-interfaces.5.html">
      <span itemprop="name">bridge-utils-interfaces: Bridge-utils extensions for the interfaces(5) file format</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/bridge-utils/">
      <span itemprop="name">bridge-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/bridge-utils-interfaces.5.html">
      <span itemprop="name">bridge-utils-interfaces: Bridge-utils extensions for the interfaces(5) file format</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>/etc/network/interfaces contains network interface configuration information for the <a href="../man8/ifup.8.html"><strong>ifup</strong>(8)</a> and <a href="../man8/ifdown.8.html"><strong>ifdown</strong>(8)</a> commands. This manpage describes the bridge extensions to the standard <a href="../man5/interfaces.5.html"><strong>interfaces</strong>(5)</a> file format.</p><p>The main extension is the bridge_ports option, with it you describe that the interface is a bridge and what ports does it have. These ports are the interfaces that are part of the bridge, and they shouldn't have any stanzas defining them on the interfaces file. Other extensions allow you to tune the bridge options or change a bridge behaviour.</p><p>We'll see this with an example:</p><ul>
<li>
<pre>
auto br0
iface br0 inet static
    address 192.168.1.2
    network 192.168.1.0
    netmask 255.255.255.0
    broadcast 192.168.1.255
    gateway 192.168.1.1
    bridge_ports all
</pre>
</li>
</ul><p>Well, after setting this, an ifup br0, or the next reboot, should let you have a bridge up and running, after waiting for the ports to get to the forwarding status, of course. This bridge will be using all your ethX interfaces, as we have stated on the bridge_ports line.</p><p>The Debian bridge setup scripts will wait for it to get ready to work. They do this by trying to guess the maximum time that the bridge will need to get to the forwarding status, and by default, they will wait for the bridge to get there, or for the estimated maximum time to go by. This is done so that the services that are loaded after the bridge setup have a working network interface and don't fail because the bridge is still not working. See bridge_maxwait if you want to change this behaviour.</p><p>An example of how to setup a so called anonymous bridge (a bridge without an assigned IP) would look like this: iface br1 inet manual 	bridge_ports eth1 eth2 	bridge_maxwait 0 Here we select the interfaces eth1 and eth2 to be added to the bridge interface br1, which will be an anonymous bridge, we also tell the scripts not to wait, as we won't be having any service running on that interface (it doesn't even have an IP).</p><p>An example of a little more complex bridge setup could be: auto br0 iface br0 inet static</p>
<pre>
    address 192.168.1.2
    network 192.168.1.0
    netmask 255.255.255.0
    broadcast 192.168.1.255
    bridge_ports all weird0
    bridge_bridgeprio 32767
    bridge_portprio eth0 129
    bridge_fd 5
</pre>
<p>In this example we select all the eth* devices plus a weird device to be added to the bridge, also we change the bridge default priority to a higher one so that this bridge becomes the root (if there are no bridges with higher priority on the net, that is) and also we lower priority of port eth0 so that it is not used if there are other ports with higher priority to reach the same destination, at the end we lower the default forward delay.</p><p>If there is a need to set up any of the interfaces participating on the bridge and not the bridge itself, then we must add the commands to set up those settings in a "pre-up" or "up" statement. This means that if we have a wireless card that we want to add to a bridge and we want to set it to master, and select the essid, instead of using the typical wireless_* commands we could add to the bridge definition something like this: pre-up iwconfig wlan0 mode master essid myESSID Be aware, however, that using wireless cards as part of a bridge is not a good idea if the card belonging to the bridge is in managed mode. Trying to bridge packets coming out of our LAN through a wireless card that is set in managed mode (the card is a client of an AP) is bound to give problems, as the AP will probably refuse packets with source MAC addresses which are not associated (this will be the case of other machines going through the wireless card of the bridge into the AP).</p><p>Multiple stanzas of a bridge definition are currently not supported, so if you want to add a ipv6 and a ipv4 to a bridge do it all in one definition by using the "up" option. If however you still want to use multiple stanzas or would like to read more on this bug you can see it at http://bugs.debian.org/319832</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">IFACE OPTIONS</h2>
        <div class="sectioncontent">
<p>A little explanation on the new options that can be used on /etc/network/interfaces to setup the bridge, so you don't have to go and look at the scripts...</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>bridge_ports</strong><em> interface specification</em></p>
  </dt>
  <dd>
    <p>this option must exist for the scripts to setup the bridge, with it you specify the ports you want to add to your bridge, either using "none" if you want a bridge without any interfaces or you want to add them later using brctl, or a list of the interfaces you want to add separated by spaces, for example:</p><p>bridge_ports eth0 eth4 You should not put any lines to configure the interfaces that will be used by the bridge, as this will be setup automatically by the scripts when bringing the bridge up.</p><p>If you need to specify the interfaces more flexibly, you can use the following syntax (most useful on a Xen dom0): bridge_ports regex (eth|vif).* This means to evaluate (as in <a href="../man1/egrep.1.html"><strong>egrep</strong>(1)</a>) the expressions that follow after "regex" until either the end or a "noregex" statement is reached.  The regular expressions are evaluated against all local interfaces and those that match are added.</p><p>Specifying "all" is short for "regex eth.* em.* p[0-9].* noregex" and will get all the ethX and biosdevname-format (emX and pX) interfaces added to the bridge.</p><p>Carrying this to the extremes, the following is valid syntax: bridge_ports all regex if.0 noregex ext0 regex vif.* This will add all ethX interfaces, the ifX0 interfaces, the ext0 interface and all vifX interfaces.</p>
  </dd>

</dl>
<h3></h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>bridge_ageing</strong><em> time</em></p>
  </dt>
  <dd>
    <p>set ageing time, default is 300, can have a fractional part.</p>
  </dd>
  <dt>
    <p><strong>bridge_bridgeprio</strong><em> priority</em></p>
  </dt>
  <dd>
    <p>set bridge priority, <em>priority</em> is between 0 and 65535, default is 32768, affects bridge id, lowest priority bridge will be the root.</p>
  </dd>
  <dt>
    <p><strong>bridge_fd</strong><em> time</em></p>
  </dt>
  <dd>
    <p>set bridge forward delay to <em>time</em> seconds, default is 15, can have a fractional part.</p>
  </dd>
  <dt>
    <p><strong>bridge_gcint</strong><em> time</em></p>
  </dt>
  <dd>
    <p>set garbage collection interval to <em>time</em> seconds, default is 4, can have a fractional part.</p>
  </dd>
  <dt>
    <p><strong>bridge_hello</strong><em> time</em></p>
  </dt>
  <dd>
    <p>set hello time to <em>time</em> seconds, default is 2, can have a fractional part.</p>
  </dd>
  <dt>
    <p><strong>bridge_hw</strong><em> MAC address</em></p>
  </dt>
  <dd>
    <p>set the Ethernet MAC address of the bridge to the specified one. There were some concerns of how this was done in the past, see: <em>http://bugs.debian.org/271406</em> but we are doing it on a new way now that shouldn't be as bad, see: <em>http://bugs.debian.org/725786</em> however you should know what you are doing before using this option.</p>
  </dd>
  <dt>
    <p><strong>bridge_maxage</strong><em> time</em></p>
  </dt>
  <dd>
    <p>set max message age to <em>time</em> seconds, default is 20, can have a fractional part.</p>
  </dd>
  <dt>
    <p><strong>bridge_maxwait</strong><em> time</em></p>
  </dt>
  <dd>
    <p>forces to <em>time</em> seconds the maximum time that the Debian bridge setup scripts will wait for the bridge ports to get to the forwarding status, doesn't allow factional part. If it is equal to 0 then no waiting is done.</p>
  </dd>
  <dt>
    <p><strong>bridge_pathcost</strong><em> port cost</em></p>
  </dt>
  <dd>
    <p>set path cost for a port, default is 100, <em>port</em> is the name of the interface to which this setting applies.</p>
  </dd>
  <dt>
    <p><strong>bridge_portprio</strong><em> port priority</em></p>
  </dt>
  <dd>
    <p>set port priority, default is 128, affects port id, <em>port</em> is the name of the interface to which this setting applies.</p>
  </dd>
  <dt>
    <p><strong>bridge_stp</strong><em> state</em></p>
  </dt>
  <dd>
    <p>turn spanning tree protocol on/off, <em>state</em> values are on or yes to turn stp on and any other thing to set it off, default has changed to off for security reasons in latest kernels, so you should specify if you want stp on or off with this option, and not rely on your kernel's default behaviour.</p>
  </dd>
  <dt>
    <p><strong>bridge_waitport</strong><em> time [ports]</em></p>
  </dt>
  <dd>
    <p>wait for a max of <em>time</em> seconds for the specified <em>ports</em> to become available, if no ports are specified then those specified on bridge_ports will be used here. Specifying no ports here should not be used if we are using regex or "all" on bridge_ports, as it wouldn't work.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/network/interfaces</em></p>
  </dt>
  <dd>
    <p>definitions of network interfaces See <a href="../man5/interfaces.5.html"><strong>interfaces</strong>(5)</a> for more information.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN BUGS/LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The default values shown here are current values as of this writing, but as they are not related to this package but to the bridge code itself, can change anytime.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manpage was written by Santiago Garcia Mantinan &lt;manty@debian.org&gt; based on <a href="../man5/interfaces.5.html"><strong>interfaces</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO bridge-utils-interfaces&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/brctl.8.html"><strong>brctl</strong>(8)</a>, <a href="../man5/interfaces.5.html"><strong>interfaces</strong>(5)</a>, <a href="../man8/ifup.8.html"><strong>ifup</strong>(8)</a>, <a href="../man8/iwconfig.8.html"><strong>iwconfig</strong>(8)</a>, <a href="../man8/run-parts.8.html"><strong>run-parts</strong>(8)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bpython-config.5.html"><span aria-hidden="true">&larr;</span> bpython-config.5: User configuration file for bpython</a></li>
   <li class="next"><a href="british-english.5.html">british-english.5: A list of english words <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
