<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>client-local.cfg: Local configuration settings for xymon clients</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Local configuration settings for xymon clients">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="client-local.cfg (5) manual">
  <meta name="twitter:description" content="Local configuration settings for xymon clients">
  <meta name="twitter:image" content="https://www.carta.tech/images/xymon-client-local.cfg-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/client-local.cfg.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="client-local.cfg (5) manual" />
  <meta property="og:description" content="Local configuration settings for xymon clients" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xymon-client-local.cfg-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">client-local.cfg<small> (5)</small></h1>
        <p class="lead">Local configuration settings for xymon clients</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/client-local.cfg.5.html">
      <span itemprop="name">client-local.cfg: Local configuration settings for xymon clients</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xymon/">
      <span itemprop="name">xymon</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/client-local.cfg.5.html">
      <span itemprop="name">client-local.cfg: Local configuration settings for xymon clients</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>~xymon/server/etc/client-local.cfg</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The client-local.cfg file contains settings that are used by each Xymon client when it runs on a monitored host. It provides a convenient way of configuring clients from a central location without having to setup special configuration maintenance tools on all clients.</p><p>The client-local.cfg file is currently used to configure what logfiles the client should fetch data from, to be used as the basis for the "msgs" status column; and to configure which files and directories are being monitored in the "files" status column.</p><p>Note that there is a dependency between the client-local.cfg file and the <a href="../man5/analysis.cfg.5.html"><strong>analysis.cfg</strong>(5)</a></em> file. When monitoring e.g. a logfile, you must first enter it into the client-local.cfg file, to trigger the Xymon client into reporting any data about the logfile. Next, you must configure analysis.cfg so the Xymon server knows what to look for in the file data sent by the client. So: client-local.cfg defines what raw data is collected by the client, and analysis.cfg defines how to analyze them.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROPAGATION TO CLIENTS</h2>
        <div class="sectioncontent">
<p>The client-local.cfg file resides on the Xymon server.</p><p>When clients connect to the Xymon server to send in their client data, they will receive part of this file back from the Xymon server. The configuration received by the client is then used the next time the client runs.</p><p>This method of propagating the configuration means that there is a delay of up to two poll cycles (i.e. 5-10 minutes) from a configuration change is entered into the client-local.cfg file, and until you see the result in the status messages reported by the client.</p><p>By default, xymond will look for a matching entry by matching the client hostname, classname or operating system name against the section expressions. Hostname matches are used first, then classname matches, then OS matches. The first match found is the one that is returned to the client.</p><p>If xymond is started with the "--merge-clientlocal" option, then xymond will instead merge all of the matching sections into one, and return all of this data to the client. So you can have host-specific entries, and then supplement them with class- or os-generic entries. Note that the merging does not remove entries, so if you have e.g. a "log" entry defined in both a hostname- and an osname-matching section, then both entries will be sent back to the client.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE FORMAT</h2>
        <div class="sectioncontent">
<p>The file is divided into sections, delimited by "[name]" lines. A section name can be either an operating system identifier - linux, solaris, hp-ux, aix, freebsd, openbsd, netbsd, darwin - or a hostname. When deciding which section to send to a client, Xymon will first look for a section named after the hostname of the client; if such a section does not exist, it will look for a section named by the operating system of the client. So you can configure special configurations for individual hosts, and have a default configuration for all other hosts of a certain type.</p><p>It will often be practical to use regular expressions for hostnames. To do this you must use</p>
<pre>
    [host=&lt;expression&gt;]
</pre>
<p>where &lt;expression&gt; is a Perl-compatible regular expression. The same kind of matching can be done on operating system or host class, using</p>
<pre>
    [os=&lt;expresssion&gt;]
</pre>

<pre>
    [class=&lt;expression&gt;]
</pre>
<p>Apart from the section delimiter, the file format is free-form, or rather it is defined by the tools that make use of the configuration.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOGFILE CONFIGURATION ENTRIES</h2>
        <div class="sectioncontent">
<p>A logfile configuration entry looks like this:</p>
<pre>
    log:/var/log/messages:10240
</pre>

<pre>
    ignore MARK
</pre>

<pre>
    trigger Oops
</pre>
<p>The <strong>log:FILENAME:SIZE</strong> line defines the filename of the log, and the maximum amount of data (in bytes) to send to the Xymon server. FILENAME is usually an explicit full-path filename on the client. If it is enclosed in backticks, it is a command which the Xymon client runs and each line of output from this command is then used as a filename. This allows scripting which files to monitor, e.g. if you have logfiles that are named with some sort of timestamp.</p><p>The <strong>ignore PATTERN</strong> line (optional) defines lines in the logfile which are ignored entirely, i.e. they are stripped from the logfile data before sending it to the Xymon server. It is used to remove completely unwanted "noise" entries from the logdata processed by Xymon. "PATTERN" is a regular expression.</p><p>The <strong>trigger PATTERN</strong> line (optional) is used only when there is more data in the log than the maximum size set in the "log:FILENAME:SIZE" line. The "trigger" pattern is then used to find particularly interesting lines in the logfile - these will always be sent to the Xymon server. After picking out the "trigger" lines, any remaining space up to the maximum size is filled in with the most recent entries from the logfile. "PATTERN" is a regular expression.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COUNTING LOGENTRIES</h2>
        <div class="sectioncontent">
<p>A special type of log-handling is possible, where the number of lines matching a regular expressions are merely counted. This is <strong>linecount:FILENAME</strong>, followed by a number of lines of the form <strong>ID:PATTERN</strong>. E.g.</p>
<pre>
    linecount:/var/log/messages
</pre>

<pre>
    diskerrors:I/O error.*device.*hd
</pre>

<pre>
    badlogins:Failed login
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE CONFIGURATION ENTRIES</h2>
        <div class="sectioncontent">
<p>A file monitoring entry is used to watch the meta-data of a file: Owner, group, size, permissions, checksum etc. It looks like this:</p>
<pre>
    file:/var/log/messages[:HASH]
</pre>
<p>The <strong>file:FILENAME</strong> line defines the filename of the file to monitor. As with the "log:" entries, a filename enclosed in backticks means a command which will generate the filenames dynamically. The optional [:HASH] setting defines what type of hash to compute for the file: <strong>md5</strong>, <strong>sha1</strong> or <strong>rmd160</strong>. By default, no hash is calculated.</p><p><strong>NOTE:</strong> If you want to check multiple files using a wildcard, you <strong>must</strong> use a command to generate the filenames. Putting wildcards directly into the <strong>file:</strong> entry will not work.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIRECTORY CONFIGURATION ENTRIES</h2>
        <div class="sectioncontent">
<p>A directory monitoring entry is used to watch the size of a directory and any sub-directories. It looks like this:</p>
<pre>
    dir:DIRECTORYNAME
</pre>
<p>The <strong>dir:DIRECTORYNAME</strong> line defines the filename of the file to monitor. As with the "log:" entries, a filename enclosed in backticks means a command which will generate the filenames dynamically. The Xymon client will run the <em>du(1)</em> command with the directoryname as parameter, and send the output back to the Xymon server.</p><p><strong>NOTE:</strong> If you want to check multiple directories using a wildcard, you <strong>must</strong> use a command to generate the directory names. Putting wildcards directly into the <strong>dir:</strong> entry will not work. E.g. use something like</p><p>	dir:`find /var/log -maxdepth 1 -type d`</p><p>The "du" command used can be configured through the <strong>DU</strong> environment variable. On some systems, by default <strong>du</strong> reports data in disk blocks instead of KB (e.g. Solaris). So you may want to configure the Xymon client to use a <strong>du</strong> command which reports data in KB, e.g. by setting</p>
<pre>
    DU="du -k"
</pre>
<p>in the xymonclient.cfg file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The ability of the Xymon client to calculate file hashes and monitor those can be used for file integrity validation on a small scale. However, there is a significant processing overhead in calculating these every time the Xymon client runs, so this should not be considered a replacement for host-based intrusion detection systems such as Tripwire or AIDE.</p><p>Use of the directory monitoring on directory structures with a large number of files and/or sub-directories can be quite ressource-intensive.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO client-local.cfg&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/analysis.cfg.5.html"><strong>analysis.cfg</strong>(5)</a>, <a href="../man8/xymond_client.8.html"><strong>xymond_client</strong>(8)</a>, <strong>xymond</strong>(8), <a href="../man7/xymon.7.html"><strong>xymon</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="cliapp.5.html"><span aria-hidden="true">&larr;</span> cliapp.5: Config file and option conventions for python command line framework</a></li>
   <li class="next"><a href="client.conf.5.html">client.conf.5: Client configuration file for cups <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
