<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>krb5.conf: Kerberos configuration file  the krb5.conf file contains kerberos configuration information, including the locations of kdcs and admin servers for the kerberos realms of interest, defaults for the current realm and for kerberos applications, and mappings of hostnames onto kerberos realms. normally, you should install your krb5.conf file in the directory /etc.  you can override the default location by setting the environment variable krb5_config.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Kerberos configuration file  the krb5.conf file contains kerberos configuration information, including the locations of kdcs and admin servers for the kerberos realms of interest, defaults for the current realm and for kerberos applications, and mappings of hostnames onto kerberos realms. normally, you should install your krb5.conf file in the directory /etc.  you can override the default location by setting the environment variable krb5_config.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="krb5.conf (5) manual">
  <meta name="twitter:description" content="Kerberos configuration file  the krb5.conf file contains kerberos configuration information, including the locations of kdcs and admin servers for the kerberos realms of interest, defaults for the current realm and for kerberos applications, and mappings of hostnames onto kerberos realms. normally, you should install your krb5.conf file in the directory /etc.  you can override the default location by setting the environment variable krb5_config.">
  <meta name="twitter:image" content="https://www.carta.tech/images/krb5-doc-krb5.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/krb5.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="krb5.conf (5) manual" />
  <meta property="og:description" content="Kerberos configuration file  the krb5.conf file contains kerberos configuration information, including the locations of kdcs and admin servers for the kerberos realms of interest, defaults for the current realm and for kerberos applications, and mappings of hostnames onto kerberos realms. normally, you should install your krb5.conf file in the directory /etc.  you can override the default location by setting the environment variable krb5_config." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/krb5-doc-krb5.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">krb5.conf<small> (5)</small></h1>
        <p class="lead">Kerberos configuration file  the krb5.conf file contains kerberos configuration information, including the locations of kdcs and admin servers for the kerberos realms of interest, defaults for the current realm and for kerberos applications, and mappings of hostnames onto kerberos realms. normally, you should install your krb5.conf file in the directory /etc.  you can override the default location by setting the environment variable krb5_config.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/krb5.conf.5.html">
      <span itemprop="name">krb5.conf: Kerberos configuration file  the krb5.conf file contains kerberos configuration information, including the locations of kdcs and admin servers for the kerberos realms of interest, defaults for the current realm and for kerberos applications, and mappings of hostnames onto kerberos realms. normally, you should install your krb5.conf file in the directory /etc.  you can override the default location by setting the environment variable krb5_config.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/krb5-doc/">
      <span itemprop="name">krb5-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/krb5.conf.5.html">
      <span itemprop="name">krb5.conf: Kerberos configuration file  the krb5.conf file contains kerberos configuration information, including the locations of kdcs and admin servers for the kerberos realms of interest, defaults for the current realm and for kerberos applications, and mappings of hostnames onto kerberos realms. normally, you should install your krb5.conf file in the directory /etc.  you can override the default location by setting the environment variable krb5_config.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">STRUCTURE</h2>
        <div class="sectioncontent">
<p>The krb5.conf file is set up in the style of a Windows INI file. Sections are headed by the section name, in square brackets.  Each section may contain zero or more relations, of the form:</p>
<pre>
foo = bar
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong>or</strong></p>
  </dt>
  <dd>
    
<pre>
fubar = {
    foo = bar
    baz = quux
}
</pre>
<p>Placing a &apos;*&apos; at the end of a line indicates that this is the <em>final</em> value for the tag.  This means that neither the remainder of this configuration file nor any other configuration file will be checked for any other values for this tag.</p>
  </dd>
  <dt>
    <p><strong>For example, if you have the following lines:</strong></p>
  </dt>
  <dd>
    
<pre>
foo = bar*
foo = baz
</pre>
<p>then the second value of <strong>foo</strong> (<strong>baz</strong>) would never be read.</p><p>The krb5.conf file can include other files using either of the following directives at the beginning of a line:</p>
<pre>
include FILENAME
includedir DIRNAME
</pre>
<p><em>FILENAME</em> or <em>DIRNAME</em> should be an absolute path. The named file or directory must exist and be readable.  Including a directory includes all files within the directory whose names consist solely of alphanumeric characters, dashes, or underscores.  Included profile files are syntactically independent of their parents, so each included file must begin with a section header.</p><p>The krb5.conf file can specify that configuration should be obtained from a loadable module, rather than the file itself, using the following directive at the beginning of a line before any section headers:</p>
<pre>
module MODULEPATH:RESIDUAL
</pre>
<p><em>MODULEPATH</em> may be relative to the library path of the krb5 installation, or it may be an absolute path.  <em>RESIDUAL</em> is provided to the module at initialization time.  If krb5.conf uses a module directive, <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em> should also use one if it exists.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SECTIONS</h2>
        <div class="sectioncontent">
<p>The krb5.conf file may contain the following sections:</p><table class="table table-striped">
<tr>
<th><em>[libdefaults]</em></th></tr>

<tr>
<td>Settings used by the Kerberos V5 library</td></tr>

<tr>
<td><em>[realms]</em></td></tr>

<tr>
<td>Realm-specific contact information and settings</td></tr>

<tr>
<td><em>[domain_realm]</em></td></tr>

<tr>
<td>Maps server hostnames to Kerberos realms</td></tr>

<tr>
<td><em>[capaths]</em></td></tr>

<tr>
<td>Authentication paths for non-hierarchical cross-realm</td></tr>

<tr>
<td><em>[appdefaults]</em></td></tr>

<tr>
<td>Settings used by some Kerberos V5 applications</td></tr>

<tr>
<td><em>[plugins]</em></td></tr>

<tr>
<td>Controls plugin module registration</td></tr>
</table><p>Additionally, krb5.conf may include any of the relations described in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em>, but it is not a recommended practice.</p><h3>[libdefaults]</h3>
<p>The libdefaults section may contain any of the following relations:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>allow_weak_crypto</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is set to false, then weak encryption types (as noted in <em>Encryption_types</em> in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em>) will be filtered out of the lists <strong>default_tgs_enctypes</strong>, <strong>default_tkt_enctypes</strong>, and <strong>permitted_enctypes</strong>.  The default value for this tag is false, which may cause authentication failures in existing Kerberos infrastructures that do not support strong crypto.  Users in affected environments should set this tag to true until their infrastructure adopts stronger ciphers.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ap_req_checksum_type</strong><strong></strong></p>
  </dt>
  <dd>
    <p>An integer which specifies the type of AP-REQ checksum to use in authenticators.  This variable should be unset so the appropriate checksum for the encryption key in use will be used.  This can be set if backward compatibility requires a specific checksum type. See the <strong>kdc_req_checksum_type</strong> configuration option for the possible values and their meanings.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>canonicalize</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is set to true, initial ticket requests to the KDC will request canonicalization of the client principal name, and answers with different client principals than the requested principal will be accepted.  The default value is false.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ccache_type</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This parameter determines the format of credential cache types created by <a href="../man1/kinit.1.html"><strong>kinit</strong>(1)</a></em> or other programs.  The default value is 4, which represents the most current format.  Smaller values can be used for compatibility with very old implementations of Kerberos which interact with credential caches on the same host.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>clockskew</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Sets the maximum allowable amount of clockskew in seconds that the library will tolerate before assuming that a Kerberos message is invalid.  The default value is 300 seconds, or five minutes.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>default_ccache_name</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This relation specifies the name of the default credential cache. The default is <strong>FILE:/tmp/krb5cc_%{uid}</strong>.  This relation is subject to parameter expansion (see below).  New in release 1.11.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>default_client_keytab_name</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This relation specifies the name of the default keytab for obtaining client credentials.  The default is <strong>FILE:/etc/krb5/user/%{euid}/client.keytab</strong>.  This relation is subject to parameter expansion (see below). New in release 1.11.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>default_keytab_name</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This relation specifies the default keytab name to be used by application servers such as sshd.  The default is <strong>FILE:/etc/krb5.keytab</strong>.  This relation is subject to parameter expansion (see below).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>default_realm</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Identifies the default Kerberos realm for the client.  Set its value to your Kerberos realm.  If this value is not set, then a realm must be specified with every Kerberos principal when invoking programs such as <a href="../man1/kinit.1.html"><strong>kinit</strong>(1)</a></em>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>default_tgs_enctypes</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Identifies the supported list of session key encryption types that the client should request when making a TGS-REQ, in order of preference from highest to lowest.  The list may be delimited with commas or whitespace.  See <em>Encryption_types</em> in <a href="../man5/kdc.conf.5.html"><strong>kdc.conf</strong>(5)</a></em> for a list of the accepted values for this tag. The default value is <strong>aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 des3-cbc-sha1 arcfour-hmac-md5 camellia256-cts-cmac camellia128-cts-cmac des-cbc-crc des-cbc-md5 des-cbc-md4</strong>, but single-DES encryption types will be implicitly removed from this list if the value of <strong>allow_weak_crypto</strong> is false.</p><p>Do not set this unless required for specific backward compatibility purposes; stale values of this setting can prevent clients from taking advantage of new stronger enctypes when the libraries are upgraded.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>default_tkt_enctypes</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Identifies the supported list of session key encryption types that the client should request when making an AS-REQ, in order of preference from highest to lowest.  The format is the same as for default_tgs_enctypes.  The default value for this tag is <strong>aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 des3-cbc-sha1 arcfour-hmac-md5 camellia256-cts-cmac camellia128-cts-cmac des-cbc-crc des-cbc-md5 des-cbc-md4</strong>, but single-DES encryption types will be implicitly removed from this list if the value of <strong>allow_weak_crypto</strong> is false.</p><p>Do not set this unless required for specific backward compatibility purposes; stale values of this setting can prevent clients from taking advantage of new stronger enctypes when the libraries are upgraded.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>dns_canonicalize_hostname</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicate whether name lookups will be used to canonicalize hostnames for use in service principal names.  Setting this flag to false can improve security by reducing reliance on DNS, but means that short hostnames will not be canonicalized to fully-qualified hostnames.  The default value is true.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>dns_lookup_kdc</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicate whether DNS SRV records should be used to locate the KDCs and other servers for a realm, if they are not listed in the krb5.conf information for the realm.  (Note that the admin_server entry must be in the krb5.conf realm information in order to contact kadmind, because the DNS implementation for kadmin is incomplete.)</p><p>Enabling this option does open up a type of denial-of-service attack, if someone spoofs the DNS records and redirects you to another server.  However, it&apos;s no worse than a denial of service, because that fake KDC will be unable to decode anything you send it (besides the initial ticket request, which has no encrypted data), and anything the fake KDC sends will not be trusted without verification using some secret that it won&apos;t know.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>extra_addresses</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This allows a computer to use multiple local addresses, in order to allow Kerberos to work in a network that uses NATs while still using address-restricted tickets.  The addresses should be in a comma-separated list.  This option has no effect if <strong>noaddresses</strong> is true.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>forwardable</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is true, initial tickets will be forwardable by default, if allowed by the KDC.  The default value is false.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ignore_acceptor_hostname</strong><strong></strong></p>
  </dt>
  <dd>
    <p>When accepting GSSAPI or krb5 security contexts for host-based service principals, ignore any hostname passed by the calling application, and allow clients to authenticate to any service principal in the keytab matching the service name and realm name (if given).  This option can improve the administrative flexibility of server applications on multihomed hosts, but could compromise the security of virtual hosting environments.  The default value is false.  New in release 1.10.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>k5login_authoritative</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is true, principals must be listed in a local user&apos;s k5login file to be granted login access, if a <em>.<a href="../man5/k5login.5.html"><strong>k5login</strong>(5)</a></em> file exists.  If this flag is false, a principal may still be granted login access through other mechanisms even if a k5login file exists but does not list the principal.  The default value is true.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>k5login_directory</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If set, the library will look for a local user&apos;s k5login file within the named directory, with a filename corresponding to the local username.  If not set, the library will look for k5login files in the user&apos;s home directory, with the filename .k5login. For security reasons, .k5login files must be owned by the local user or by root.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>kdc_default_options</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Default KDC options (Xored for multiple values) when requesting initial tickets.  By default it is set to 0x00000010 (KDC_OPT_RENEWABLE_OK).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>kdc_timesync</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Accepted values for this relation are 1 or 0.  If it is nonzero, client machines will compute the difference between their time and the time returned by the KDC in the timestamps in the tickets and use this value to correct for an inaccurate system clock when requesting service tickets or authenticating to services.  This corrective factor is only used by the Kerberos library; it is not used to change the system clock.  The default value is 1.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>kdc_req_checksum_type</strong><strong></strong></p>
  </dt>
  <dd>
    <p>An integer which specifies the type of checksum to use for the KDC requests, for compatibility with very old KDC implementations. This value is only used for DES keys; other keys use the preferred checksum type for those keys.</p><p>The possible values and their meanings are as follows.</p><table class="table table-striped">
<tr>
<th>1</th></tr>

<tr>
<td>CRC32</td></tr>

<tr>
<td>2</td></tr>

<tr>
<td>RSA MD4</td></tr>

<tr>
<td>3</td></tr>

<tr>
<td>RSA MD4 DES</td></tr>

<tr>
<td>4</td></tr>

<tr>
<td>DES CBC</td></tr>

<tr>
<td>7</td></tr>

<tr>
<td>RSA MD5</td></tr>

<tr>
<td>8</td></tr>

<tr>
<td>RSA MD5 DES</td></tr>

<tr>
<td>9</td></tr>

<tr>
<td>NIST SHA</td></tr>

<tr>
<td>12</td></tr>

<tr>
<td>HMAC SHA1 DES3</td></tr>

<tr>
<td>-138</td></tr>

<tr>
<td>Microsoft MD5 HMAC checksum type</td></tr>
</table>
  </dd>
  <dt>
    <p><strong></strong><strong>noaddresses</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is true, requests for initial tickets will not be made with address restrictions set, allowing the tickets to be used across NATs.  The default value is true.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>permitted_enctypes</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Identifies all encryption types that are permitted for use in session key encryption.  The default value for this tag is <strong>aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 des3-cbc-sha1 arcfour-hmac-md5 camellia256-cts-cmac camellia128-cts-cmac des-cbc-crc des-cbc-md5 des-cbc-md4</strong>, but single-DES encryption types will be implicitly removed from this list if the value of <strong>allow_weak_crypto</strong> is false.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>plugin_base_dir</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If set, determines the base directory where krb5 plugins are located.  The default value is the <strong>krb5/plugins</strong> subdirectory of the krb5 library directory.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>preferred_preauth_types</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This allows you to set the preferred preauthentication types which the client will attempt before others which may be advertised by a KDC.  The default value for this setting is "17, 16, 15, 14", which forces libkrb5 to attempt to use PKINIT if it is supported.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>proxiable</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is true, initial tickets will be proxiable by default, if allowed by the KDC.  The default value is false.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>rdns</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is true, reverse name lookup will be used in addition to forward name lookup to canonicalizing hostnames for use in service principal names.  If <strong>dns_canonicalize_hostname</strong> is set to false, this flag has no effect.  The default value is true.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>realm_try_domains</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicate whether a host&apos;s domain components should be used to determine the Kerberos realm of the host.  The value of this variable is an integer: -1 means not to search, 0 means to try the host&apos;s domain itself, 1 means to also try the domain&apos;s immediate parent, and so forth.  The library&apos;s usual mechanism for locating Kerberos realms is used to determine whether a domain is a valid realm, which may involve consulting DNS if <strong>dns_lookup_kdc</strong> is set.  The default is not to search domain components.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>renew_lifetime</strong><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>duration</em> string.)  Sets the default renewable lifetime for initial ticket requests.  The default value is 0.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>safe_checksum_type</strong><strong></strong></p>
  </dt>
  <dd>
    <p>An integer which specifies the type of checksum to use for the KRB-SAFE requests.  By default it is set to 8 (RSA MD5 DES).  For compatibility with applications linked against DCE version 1.1 or earlier Kerberos libraries, use a value of 3 to use the RSA MD4 DES instead.  This field is ignored when its value is incompatible with the session key type.  See the <strong>kdc_req_checksum_type</strong> configuration option for the possible values and their meanings.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ticket_lifetime</strong><strong></strong></p>
  </dt>
  <dd>
    <p>(<em>duration</em> string.)  Sets the default lifetime for initial ticket requests.  The default value is 1 day.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>udp_preference_limit</strong><strong></strong></p>
  </dt>
  <dd>
    <p>When sending a message to the KDC, the library will try using TCP before UDP if the size of the message is above <strong>udp_preference_limit</strong>.  If the message is smaller than <strong>udp_preference_limit</strong>, then UDP will be tried before TCP. Regardless of the size, both protocols will be tried if the first attempt fails.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>verify_ap_req_nofail</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is true, then an attempt to verify initial credentials will fail if the client machine does not have a keytab.  The default value is false.</p>
  </dd>

</dl>

<h3>[realms]</h3>
<p>Each tag in the [realms] section of the file is the name of a Kerberos realm.  The value of the tag is a subsection with relations that define the properties of that particular realm.  For each realm, the following tags may be specified in the realm&apos;s subsection:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>admin_server</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Identifies the host where the administration server is running. Typically, this is the master Kerberos server.  This tag must be given a value in order to communicate with the <a href="../man8/kadmind.8.html"><strong>kadmind</strong>(8)</a></em> server for the realm.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>auth_to_local</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This tag allows you to set a general rule for mapping principal names to local user names.  It will be used if there is not an explicit mapping for the principal name that is being translated. The possible values are:</p>
  </dd>
  <dt>
    <p><strong></strong><strong>RULE:</strong><strong></strong><em>exp</em><strong></strong></p>
  </dt>
  <dd>
    <p>The local name will be formulated from <em>exp</em>.</p><p>The format for <em>exp</em> is <strong>[</strong><em>n</em><strong>:</strong><em>string</em><strong>](</strong><em>regexp</em><strong>)s/</strong><em>pattern</em><strong>/</strong><em>replacement</em><strong>/g</strong>. The integer <em>n</em> indicates how many components the target principal should have.  If this matches, then a string will be formed from <em>string</em>, substituting the realm of the principal for <strong>$0</strong> and the <em>n</em>&apos;th component of the principal for <strong>$n</strong> (e.g., if the principal was <strong>johndoe/admin</strong> then <strong>[2:$2$1foo]</strong> would result in the string <strong>adminjohndoefoo</strong>).  If this string matches <em>regexp</em>, then the <strong>s//[g]</strong> substitution command will be run over the string.  The optional <strong>g</strong> will cause the substitution to be global over the <em>string</em>, instead of replacing only the first match in the <em>string</em>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DEFAULT</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The principal name will be used as the local user name.  If the principal has more than one component or is not in the default realm, this rule is not applicable and the conversion will fail.</p>
  </dd>
  <dt>
    <p><strong>For example:</strong></p>
  </dt>
  <dd>
    
<pre>
[realms]
    ATHENA.MIT.EDU = {
        auth_to_local = RULE:[2:$1](johndoe)s/^.*$/guest/
        auth_to_local = RULE:[2:$1;$2](^.*;admin$)s/;admin$//
        auth_to_local = RULE:[2:$2](^.*;root)s/^.*$/root/
        auto_to_local = DEFAULT
    }
</pre>
<p>would result in any principal without <strong>root</strong> or <strong>admin</strong> as the second component to be translated with the default rule.  A principal with a second component of <strong>admin</strong> will become its first component.  <strong>root</strong> will be used as the local name for any principal with a second component of <strong>root</strong>.  The exception to these two rules are any principals <strong>johndoe/*</strong>, which will always get the local name <strong>guest</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>auth_to_local_names</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This subsection allows you to set explicit mappings from principal names to local user names.  The tag is the mapping name, and the value is the corresponding local user name.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>default_domain</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This tag specifies the domain used to expand hostnames when translating Kerberos 4 service principals to Kerberos 5 principals (for example, when converting <strong>rcmd.hostname</strong> to <strong>host/hostname.domain</strong>).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>kdc</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The name or address of a host running a KDC for that realm.  An optional port number, separated from the hostname by a colon, may be included.  If the name or address contains colons (for example, if it is an IPv6 address), enclose it in square brackets to distinguish the colon from a port separator.  For your computer to be able to communicate with the KDC for each realm, this tag must be given a value in each realm subsection in the configuration file, or there must be DNS SRV records specifying the KDCs.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>kpasswd_server</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Points to the server where all the password changes are performed. If there is no such entry, the port 464 on the <strong>admin_server</strong> host will be tried.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>master_kdc</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Identifies the master KDC(s).  Currently, this tag is used in only one case: If an attempt to get credentials fails because of an invalid password, the client software will attempt to contact the master KDC, in case the user&apos;s password has just been changed, and the updated database has not been propagated to the slave servers yet.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>v4_instance_convert</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This subsection allows the administrator to configure exceptions to the <strong>default_domain</strong> mapping rule.  It contains V4 instances (the tag name) which should be translated to some specific hostname (the tag value) as the second component in a Kerberos V5 principal name.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>v4_realm</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This relation is used by the krb524 library routines when converting a V5 principal name to a V4 principal name.  It is used when the V4 realm name and the V5 realm name are not the same, but still share the same principal names and passwords. The tag value is the Kerberos V4 realm name.</p>
  </dd>

</dl>

<h3>[domain_realm]</h3>
<p>The [domain_realm] section provides a translation from a domain name or hostname to a Kerberos realm name.  The tag name can be a host name or domain name, where domain names are indicated by a prefix of a period (<strong>.</strong>).  The value of the relation is the Kerberos realm name for that particular host or domain.  A host name relation implicitly provides the corresponding domain name relation, unless an explicit domain name relation is provided.  The Kerberos realm may be identified either in the <em>realms</em> section or using DNS SRV records. Host names and domain names should be in lower case.  For example:</p>
<pre>
[domain_realm]
    crash.mit.edu = TEST.ATHENA.MIT.EDU
    .dev.mit.edu = TEST.ATHENA.MIT.EDU
    mit.edu = ATHENA.MIT.EDU
</pre>
<p>maps the host with the name <strong>crash.mit.edu</strong> into the <strong>TEST.ATHENA.MIT.EDU</strong> realm.  The second entry maps all hosts under the domain <strong>dev.mit.edu</strong> into the <strong>TEST.ATHENA.MIT.EDU</strong> realm, but not the host with the name <strong>dev.mit.edu</strong>.  That host is matched by the third entry, which maps the host <strong>mit.edu</strong> and all hosts under the domain <strong>mit.edu</strong> that do not match a preceding rule into the realm <strong>ATHENA.MIT.EDU</strong>.</p><p>If no translation entry applies to a hostname used for a service principal for a service ticket request, the library will try to get a referral to the appropriate realm from the client realm&apos;s KDC.  If that does not succeed, the host&apos;s realm is considered to be the hostname&apos;s domain portion converted to uppercase, unless the <strong>realm_try_domains</strong> setting in [libdefaults] causes a different parent domain to be used.</p>
<h3>[capaths]</h3>
<p>In order to perform direct (non-hierarchical) cross-realm authentication, configuration is needed to determine the authentication paths between realms.</p><p>A client will use this section to find the authentication path between its realm and the realm of the server.  The server will use this section to verify the authentication path used by the client, by checking the transited field of the received ticket.</p><p>There is a tag for each participating client realm, and each tag has subtags for each of the server realms.  The value of the subtags is an intermediate realm which may participate in the cross-realm authentication.  The subtags may be repeated if there is more then one intermediate realm.  A value of "." means that the two realms share keys directly, and no intermediate realms should be allowed to participate.</p><p>Only those entries which will be needed on the client or the server need to be present.  A client needs a tag for its local realm with subtags for all the realms of servers it will need to authenticate to. A server needs a tag for each realm of the clients it will serve, with a subtag of the server realm.</p><p>For example, <strong>ANL.GOV</strong>, <strong>PNL.GOV</strong>, and <strong>NERSC.GOV</strong> all wish to use the <strong>ES.NET</strong> realm as an intermediate realm.  ANL has a sub realm of <strong>TEST.ANL.GOV</strong> which will authenticate with <strong>NERSC.GOV</strong> but not <strong>PNL.GOV</strong>.  The [capaths] section for <strong>ANL.GOV</strong> systems would look like this:</p>
<pre>
[capaths]
    ANL.GOV = {
        TEST.ANL.GOV = .
        PNL.GOV = ES.NET
        NERSC.GOV = ES.NET
        ES.NET = .
    }
    TEST.ANL.GOV = {
        ANL.GOV = .
    }
    PNL.GOV = {
        ANL.GOV = ES.NET
    }
    NERSC.GOV = {
        ANL.GOV = ES.NET
    }
    ES.NET = {
        ANL.GOV = .
    }
</pre>
<p>The [capaths] section of the configuration file used on <strong>NERSC.GOV</strong> systems would look like this:</p>
<pre>
[capaths]
    NERSC.GOV = {
        ANL.GOV = ES.NET
        TEST.ANL.GOV = ES.NET
        TEST.ANL.GOV = ANL.GOV
        PNL.GOV = ES.NET
        ES.NET = .
    }
    ANL.GOV = {
        NERSC.GOV = ES.NET
    }
    PNL.GOV = {
        NERSC.GOV = ES.NET
    }
    ES.NET = {
        NERSC.GOV = .
    }
    TEST.ANL.GOV = {
        NERSC.GOV = ANL.GOV
        NERSC.GOV = ES.NET
    }
</pre>
<p>When a subtag is used more than once within a tag, clients will use the order of values to determine the path.  The order of values is not important to servers.</p>
<h3>[appdefaults]</h3>
<p>Each tag in the [appdefaults] section names a Kerberos V5 application or an option that is used by some Kerberos V5 application[s].  The value of the tag defines the default behaviors for that application.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>For example:</strong></p>
  </dt>
  <dd>
    
<pre>
[appdefaults]
    telnet = {
        ATHENA.MIT.EDU = {
            option1 = false
        }
    }
    telnet = {
        option1 = true
        option2 = true
    }
    ATHENA.MIT.EDU = {
        option2 = false
    }
    option2 = true
</pre>
<p>The above four ways of specifying the value of an option are shown in order of decreasing precedence. In this example, if telnet is running in the realm EXAMPLE.COM, it should, by default, have option1 and option2 set to true.  However, a telnet program in the realm <strong>ATHENA.MIT.EDU</strong> should have <strong>option1</strong> set to false and <strong>option2</strong> set to true.  Any other programs in ATHENA.MIT.EDU should have <strong>option2</strong> set to false by default.  Any programs running in other realms should have <strong>option2</strong> set to true.</p><p>The list of specifiable options for each application may be found in that application&apos;s man pages.  The application defaults specified here are overridden by those specified in the <em>realms</em> section.</p>
  </dd>

</dl>

<h3>[plugins]</h3>
<ul>
<li><p><em>pwqual</em> interface</p></li><li><p><em>kadm5_hook</em> interface</p></li><li><p><em>clpreauth</em> and <em>kdcpreauth</em> interfaces</p><p>Tags in the [plugins] section can be used to register dynamic plugin modules and to turn modules on and off.  Not every krb5 pluggable interface uses the [plugins] section; the ones that do are documented here.</p><p>New in release 1.9.</p><p>Each pluggable interface corresponds to a subsection of [plugins]. All subsections support the same tags:</p></li>
</ul>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>disable</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This tag may have multiple values. If there are values for this tag, then the named modules will be disabled for the pluggable interface.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>enable_only</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This tag may have multiple values. If there are values for this tag, then only the named modules will be enabled for the pluggable interface.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>module</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This tag may have multiple values.  Each value is a string of the form <strong>modulename:pathname</strong>, which causes the shared object located at <em>pathname</em> to be registered as a dynamic module named <em>modulename</em> for the pluggable interface.  If <em>pathname</em> is not an absolute path, it will be treated as relative to the <strong>plugin_base_dir</strong> value from <em>[libdefaults]</em>.</p><p>For pluggable interfaces where module order matters, modules registered with a <strong>module</strong> tag normally come first, in the order they are registered, followed by built-in modules in the order they are documented below.  If <strong>enable_only</strong> tags are used, then the order of those tags overrides the normal module order.</p><p>The following subsections are currently supported within the [plugins] section:</p>
  </dd>

</dl>

<h3>ccselect interface</h3>
<p>The ccselect subsection controls modules for credential cache selection within a cache collection.  In addition to any registered dynamic modules, the following built-in modules exist (and may be disabled with the disable tag):</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>k5identity</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Uses a .k5identity file in the user&apos;s home directory to select a client principal</p>
  </dd>
  <dt>
    <p><strong></strong><strong>realm</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Uses the service realm to guess an appropriate cache from the collection</p>
  </dd>

</dl>

<h3>pwqual interface</h3>
<p>The pwqual subsection controls modules for the password quality interface, which is used to reject weak passwords when passwords are changed.  The following built-in modules exist for this interface:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>dict</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Checks against the realm dictionary file</p>
  </dd>
  <dt>
    <p><strong></strong><strong>empty</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Rejects empty passwords</p>
  </dd>
  <dt>
    <p><strong></strong><strong>hesiod</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Checks against user information stored in Hesiod (only if Kerberos was built with Hesiod support)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>princ</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Checks against components of the principal name</p>
  </dd>

</dl>

<h3>kadm5_hook interface</h3>
<p>The kadm5_hook interface provides plugins with information on principal creation, modification, password changes and deletion.  This interface can be used to write a plugin to synchronize MIT Kerberos with another database such as Active Directory.  No plugins are built in for this interface.</p>
<h3>clpreauth and kdcpreauth interfaces</h3>
<p>The clpreauth and kdcpreauth interfaces allow plugin modules to provide client and KDC preauthentication mechanisms.  The following built-in modules exist for these interfaces:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>pkinit</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module implements the PKINIT preauthentication mechanism.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>encrypted_challenge</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module implements the encrypted challenge FAST factor.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>encrypted_timestamp</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module implements the encrypted timestamp mechanism.</p>
  </dd>

</dl>

<h3>hostrealm interface</h3>
<p>The hostrealm section (introduced in release 1.12) controls modules for the host-to-realm interface, which affects the local mapping of hostnames to realm names and the choice of default realm.  The following built-in modules exist for this interface:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>profile</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module consults the [domain_realm] section of the profile for authoritative host-to-realm mappings, and the <strong>default_realm</strong> variable for the default realm.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>dns</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module looks for DNS records for fallback host-to-realm mappings and the default realm.  It only operates if the <strong>dns_lookup_realm</strong> variable is set to true.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>domain</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module applies heuristics for fallback host-to-realm mappings.  It implements the <strong>realm_try_domains</strong> variable, and uses the uppercased parent domain of the hostname if that does not produce a result.</p>
  </dd>

</dl>

<h3>localauth interface</h3>
<p>The localauth section (introduced in release 1.12) controls modules for the local authorization interface, which affects the relationship between Kerberos principals and local system accounts.  The following built-in modules exist for this interface:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>default</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module implements the <strong>DEFAULT</strong> type for <strong>auth_to_local</strong> values.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>rule</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module implements the <strong>RULE</strong> type for <strong>auth_to_local</strong> values.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>names</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module looks for an <strong>auth_to_local_names</strong> mapping for the principal name.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>auth_to_local</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module processes <strong>auth_to_local</strong> values in the default realm&apos;s section, and applies the default method if no <strong>auth_to_local</strong> values exist.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>k5login</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module authorizes a principal to a local account according to the account&apos;s <em>.<a href="../man5/k5login.5.html"><strong>k5login</strong>(5)</a></em> file.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>an2ln</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This module authorizes a principal to a local account if the principal name maps to the local account name.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PKINIT OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    Note
  </dt>
  <dd>
    <p>The following are PKINIT-specific options.  These values may be specified in [libdefaults] as global defaults, or within a realm-specific subsection of [libdefaults], or may be specified as realm-specific values in the [realms] section. A realm-specific value overrides, not adds to, a generic [libdefaults] specification.  The search order is:</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>realm-specific subsection of [libdefaults]:</p>
<pre>
[libdefaults]
    EXAMPLE.COM = {
        pkinit_anchors = FILE:/usr/local/example.com.crt
    }
</pre>

  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>realm-specific value in the [realms] section,</p>
<pre>
[realms]
    OTHERREALM.ORG = {
        pkinit_anchors = FILE:/usr/local/otherrealm.org.crt
    }
</pre>

  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p>generic value in the [libdefaults] section.</p>
<pre>
[libdefaults]
    pkinit_anchors = DIR:/usr/local/generic_trusted_cas/
</pre>

  </dd>

</dl>
<h3>Specifying PKINIT identity information</h3>
<p>The syntax for specifying Public Key identity, trust, and revocation information for PKINIT is as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>FILE:</strong><strong></strong><em>filename</em><strong>[</strong><strong>,</strong><strong></strong><em>keyfilename</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>This option has context-specific behavior.</p><p>In <strong>pkinit_identity</strong> or <strong>pkinit_identities</strong>, <em>filename</em> specifies the name of a PEM-format file containing the user&apos;s certificate.  If <em>keyfilename</em> is not specified, the user&apos;s private key is expected to be in <em>filename</em> as well.  Otherwise, <em>keyfilename</em> is the name of the file containing the private key.</p><p>In <strong>pkinit_anchors</strong> or <strong>pkinit_pool</strong>, <em>filename</em> is assumed to be the name of an OpenSSL-style ca-bundle file.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DIR:</strong><strong></strong><em>dirname</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option has context-specific behavior.</p><p>In <strong>pkinit_identity</strong> or <strong>pkinit_identities</strong>, <em>dirname</em> specifies a directory with files named <strong>*.crt</strong> and <strong>*.key</strong> where the first part of the file name is the same for matching pairs of certificate and private key files.  When a file with a name ending with <strong>.crt</strong> is found, a matching file ending with <strong>.key</strong> is assumed to contain the private key.  If no such file is found, then the certificate in the <strong>.crt</strong> is not used.</p><p>In <strong>pkinit_anchors</strong> or <strong>pkinit_pool</strong>, <em>dirname</em> is assumed to be an OpenSSL-style hashed CA directory where each CA cert is stored in a file named <strong>hash-of-ca-cert.#</strong>.  This infrastructure is encouraged, but all files in the directory will be examined and if they contain certificates (in PEM format), they will be used.</p><p>In <strong>pkinit_revoke</strong>, <em>dirname</em> is assumed to be an OpenSSL-style hashed CA directory where each revocation list is stored in a file named <strong>hash-of-ca-cert.r#</strong>.  This infrastructure is encouraged, but all files in the directory will be examined and if they contain a revocation list (in PEM format), they will be used.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>PKCS12:</strong><strong></strong><em>filename</em><strong></strong></p>
  </dt>
  <dd>
    <p><em>filename</em> is the name of a PKCS #12 format file, containing the user&apos;s certificate and private key.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>PKCS11:</strong><strong>[</strong><strong>module_name=</strong><strong>]</strong><em>modname</em><strong>[</strong><strong>:slotid=</strong><strong></strong><em>slot-id</em><strong>][</strong><strong>:token=</strong><strong></strong><em>token-label</em><strong>][</strong><strong>:certid=</strong><strong></strong><em>cert-id</em><strong>][</strong><strong>:certlabel=</strong><strong></strong><em>cert-label</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>All keyword/values are optional.  <em>modname</em> specifies the location of a library implementing PKCS #11.  If a value is encountered with no keyword, it is assumed to be the <em>modname</em>.  If no module-name is specified, the default is <strong>opensc-pkcs11.so</strong>. <strong>slotid=</strong> and/or <strong>token=</strong> may be specified to force the use of a particular smard card reader or token if there is more than one available.  <strong>certid=</strong> and/or <strong>certlabel=</strong> may be specified to force the selection of a particular certificate on the device. See the <strong>pkinit_cert_match</strong> configuration option for more ways to select a particular certificate to use for PKINIT.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ENV:</strong><strong></strong><em>envvar</em><strong></strong></p>
  </dt>
  <dd>
    <p><em>envvar</em> specifies the name of an environment variable which has been set to a value conforming to one of the previous values.  For example, <strong>ENV:X509_PROXY</strong>, where environment variable <strong>X509_PROXY</strong> has been set to <strong>FILE:/tmp/my_proxy.pem</strong>.</p>
  </dd>

</dl>

<h3>PKINIT krb5.conf options</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>pkinit_anchors</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the location of trusted anchor (root) certificates which the client trusts to sign KDC certificates.  This option may be specified multiple times.  These values from the config file are not used if the user specifies X509_anchors on the command line.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_cert_match</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies matching rules that the client certificate must match before it is used to attempt PKINIT authentication.  If a user has multiple certificates available (on a smart card, or via other media), there must be exactly one certificate chosen before attempting PKINIT authentication.  This option may be specified multiple times.  All the available certificates are checked against each rule in order until there is a match of exactly one certificate.</p><p>The Subject and Issuer comparison strings are the <em>RFC 2253</em> string representations from the certificate Subject DN and Issuer DN values.</p><p>The syntax of the matching rules is: [<em>relation-operator</em>]<em>component-rule</em> ...</p><p>where:</p>
  </dd>
  <dt>
    <p><strong></strong><em>relation-operator</em><strong></strong></p>
  </dt>
  <dd>
    <p>can be either <strong>&&</strong>, meaning all component rules must match, or <strong>||</strong>, meaning only one component rule must match.  The default is <strong>&&</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong><em>component-rule</em><strong></strong></p>
  </dt>
  <dd>
    <p>can be one of the following.  Note that there is no punctuation or whitespace between component rules.</p>
<pre>
<strong>&lt;SUBJECT&gt;</strong><em>regular-expression</em>
<strong>&lt;ISSUER&gt;</strong><em>regular-expression</em>
<strong>&lt;SAN&gt;</strong><em>regular-expression</em>
<strong>&lt;EKU&gt;</strong><em>extended-key-usage-list</em>
<strong>&lt;KU&gt;</strong><em>key-usage-list</em>
</pre>
<p><em>extended-key-usage-list</em> is a comma-separated list of required Extended Key Usage values.  All values in the list must be present in the certificate.  Extended Key Usage values can be:</p><ul>
<li><p>pkinit</p></li><li><p>msScLogin</p></li><li><p>clientAuth</p></li><li><p>emailProtection</p><p><em>key-usage-list</em> is a comma-separated list of required Key Usage values.  All values in the list must be present in the certificate.  Key Usage values can be:</p></li><li><p>digitalSignature</p></li><li><p>keyEncipherment</p><p>Examples:</p>
<pre>
pkinit_cert_match = ||&lt;SUBJECT&gt;.*DoE.*&lt;SAN&gt;.*@EXAMPLE.COM
pkinit_cert_match = &&&lt;EKU&gt;msScLogin,clientAuth&lt;ISSUER&gt;.*DoE.*
pkinit_cert_match = &lt;EKU&gt;msScLogin,clientAuth&lt;KU&gt;digitalSignature
</pre>
</li>
</ul>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_eku_checking</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This option specifies what Extended Key Usage value the KDC certificate presented to the client must contain.  (Note that if the KDC certificate has the pkinit SubjectAlternativeName encoded as the Kerberos TGS name, EKU checking is not necessary since the issuing CA has certified this as a KDC certificate.)  The values recognized in the krb5.conf file are:</p>
  </dd>
  <dt>
    <p><strong></strong><strong>kpKDC</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This is the default value and specifies that the KDC must have the id-pkinit-KPKdc EKU as defined in <em>RFC 4556</em>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>kpServerAuth</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If <strong>kpServerAuth</strong> is specified, a KDC certificate with the id-kp-serverAuth EKU as used by Microsoft will be accepted.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>none</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If <strong>none</strong> is specified, then the KDC certificate will not be checked to verify it has an acceptable EKU.  The use of this option is not recommended.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_dh_min_bits</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the size of the Diffie-Hellman key the client will attempt to use.  The acceptable values are 1024, 2048, and 4096. The default is 2048.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_identities</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the location(s) to be used to find the user&apos;s X.509 identity information.  This option may be specified multiple times.  Each value is attempted in order until identity information is found and authentication is attempted.  Note that these values are not used if the user specifies <strong>X509_user_identity</strong> on the command line.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_kdc_hostname</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The presense of this option indicates that the client is willing to accept a KDC certificate with a dNSName SAN (Subject Alternative Name) rather than requiring the id-pkinit-san as defined in <em>RFC 4556</em>.  This option may be specified multiple times.  Its value should contain the acceptable hostname for the KDC (as contained in its certificate).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_longhorn</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is set to true, we are talking to the Longhorn KDC.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_pool</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the location of intermediate certificates which may be used by the client to complete the trust chain between a KDC certificate and a trusted anchor.  This option may be specified multiple times.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_require_crl_checking</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The default certificate verification process will always check the available revocation information to see if a certificate has been revoked.  If a match is found for the certificate in a CRL, verification fails.  If the certificate being verified is not listed in a CRL, or there is no CRL present for its issuing CA, and <strong>pkinit_require_crl_checking</strong> is false, then verification succeeds.</p><p>However, if <strong>pkinit_require_crl_checking</strong> is true and there is no CRL information available for the issuing CA, then verification fails.</p><p><strong>pkinit_require_crl_checking</strong> should be set to true if the policy is such that up-to-date CRLs must be present for every CA.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_revoke</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Specifies the location of Certificate Revocation List (CRL) information to be used by the client when verifying the validity of the KDC certificate presented.  This option may be specified multiple times.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_win2k</strong><strong></strong></p>
  </dt>
  <dd>
    <p>This flag specifies whether the target realm is assumed to support only the old, pre-RFC version of the protocol.  The default is false.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>pkinit_win2k_require_binding</strong><strong></strong></p>
  </dt>
  <dd>
    <p>If this flag is set to true, it expects that the target KDC is patched to return a reply with a checksum rather than a nonce. The default is false.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETER EXPANSION</h2>
        <div class="sectioncontent">
<p>Starting with release 1.11, several variables, such as <strong>default_keytab_name</strong>, allow parameters to be expanded. Valid parameters are:</p><table class="table table-striped">
<tr>
<th>%{TEMP}</th></tr>

<tr>
<td>Temporary directory</td></tr>

<tr>
<td>%{uid}</td></tr>

<tr>
<td>Unix real UID or Windows SID</td></tr>

<tr>
<td>%{euid}</td></tr>

<tr>
<td>Unix effective user ID or Windows SID</td></tr>

<tr>
<td>%{USERID}</td></tr>

<tr>
<td>Same as %{uid}</td></tr>

<tr>
<td>%{null}</td></tr>

<tr>
<td>Empty string</td></tr>

<tr>
<td>%{LIBDIR}</td></tr>

<tr>
<td>Installation library directory</td></tr>

<tr>
<td>%{BINDIR}</td></tr>

<tr>
<td>Installation binary directory</td></tr>

<tr>
<td>%{SBINDIR}</td></tr>

<tr>
<td>Installation admin binary directory</td></tr>

<tr>
<td>%{username}</td></tr>

<tr>
<td>(Unix) Username of effective user ID</td></tr>

<tr>
<td>%{APPDATA}</td></tr>

<tr>
<td>(Windows) Roaming application data for current user</td></tr>

<tr>
<td>%{COMMON_APPDATA}</td></tr>

<tr>
<td>(Windows) Application data for all users</td></tr>

<tr>
<td>%{LOCAL_APPDATA}</td></tr>

<tr>
<td>(Windows) Local application data for current user</td></tr>

<tr>
<td>%{SYSTEM}</td></tr>

<tr>
<td>(Windows) Windows system folder</td></tr>

<tr>
<td>%{WINDOWS}</td></tr>

<tr>
<td>(Windows) Windows folder</td></tr>

<tr>
<td>%{USERCONFIG}</td></tr>

<tr>
<td>(Windows) Per-user MIT krb5 config file directory</td></tr>

<tr>
<td>%{COMMONCONFIG}</td></tr>

<tr>
<td>(Windows) Common MIT krb5 config file directory</td></tr>
</table>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SAMPLE KRB5.CONF FILE</h2>
        <div class="sectioncontent">
<p>Here is an example of a generic krb5.conf file:</p>
<pre>
[libdefaults]
    default_realm = ATHENA.MIT.EDU
    default_tkt_enctypes = des3-hmac-sha1 des-cbc-crc
    default_tgs_enctypes = des3-hmac-sha1 des-cbc-crc
    dns_lookup_kdc = true
    dns_lookup_realm = false

[realms]
    ATHENA.MIT.EDU = {
        kdc = kerberos.mit.edu
        kdc = kerberos-1.mit.edu
        kdc = kerberos-2.mit.edu:750
        admin_server = kerberos.mit.edu
        master_kdc = kerberos.mit.edu
        default_domain = mit.edu
    }
    EXAMPLE.COM = {
        kdc = kerberos.example.com
        kdc = kerberos-1.example.com
        admin_server = kerberos.example.com
    }

[domain_realm]
    .mit.edu = ATHENA.MIT.EDU
    mit.edu = ATHENA.MIT.EDU

[capaths]
    ATHENA.MIT.EDU = {
           EXAMPLE.COM = .
    }
    EXAMPLE.COM = {
           ATHENA.MIT.EDU = .
    }
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><strong>/etc/krb5.conf</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO krb5.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/syslog.3.html"><strong>syslog</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>MIT</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>1985-2013, MIT</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="krb.equiv.5.html"><span aria-hidden="true">&larr;</span> krb.equiv.5: Kerberos equivalences</a></li>
   <li class="next"><a href="l2tp-secrets.5.html">l2tp-secrets.5: L2tpd secrets file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
