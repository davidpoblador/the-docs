<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>kernel-img.conf: Site wide configuration file for kernel image packages</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Site wide configuration file for kernel image packages">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="kernel-img.conf (5) manual">
  <meta name="twitter:description" content="Site wide configuration file for kernel image packages">
  <meta name="twitter:image" content="https://www.carta.tech/images/kernel-common-kernel-img.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/kernel-img.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="kernel-img.conf (5) manual" />
  <meta property="og:description" content="Site wide configuration file for kernel image packages" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/kernel-common-kernel-img.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">kernel-img.conf<small> (5)</small></h1>
        <p class="lead">Site wide configuration file for kernel image packages</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/kernel-img.conf.5.html">
      <span itemprop="name">kernel-img.conf: Site wide configuration file for kernel image packages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/kernel-common/">
      <span itemprop="name">kernel-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/kernel-img.conf.5.html">
      <span itemprop="name">kernel-img.conf: Site wide configuration file for kernel image packages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><em>/etc/kernel-img.conf</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The file <em>/etc/kernel-img.conf</em> is a simple file looked at by the kernel image post installation process to allow local options for handling some aspects of the installation, overriding the defaults built into the image itself.</p><p>The format of the file is a simple <em>VAR</em><strong>=</strong><em>VALUE</em> pair. Boolean values may be specified as <em>Yes</em>, <em>True</em>, <em>1</em>, and <em>No</em>, <em>False</em>, <em>0</em>, and are case insensitive. This file is automatically created by the installation script in certain circumstances.</p><p>At the moment, the user modifiable variables supported are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>postinst_hook</strong></p>
  </dt>
  <dd>
    <p><strong>DEPRECATED</strong>: Set this variable to a script to be executed during installation. The path can be a relative path if the script lives in a safe path -- that is, if it lives in /bin, /sbin, /usr/bin, or /usr/sbin, or must be an absolute path instead. Before calling this script, the env variable <strong>STEM</strong> shall be set to the value of the <em>--stem</em> argument (or the default value, linux), and <strong>KERNEL_PACKAGE_VERSION</strong> shall be set to the version of the kernel-package that created the package.  This script shall be called with two arguments, the first being the <em>version</em> of the kernel image, and the second argument being the <em>location</em> of the kernel image itself. Errors in the script shall cause the postinst to fail. Since debconf is in use before the script is called, this script should issue no diagnostic messages to stdout -- while the postinst does call <strong>db_stop</strong>, debconf does not restore stdout, so messages to stdout disappear. An example script for grub users is present in /usr/share/doc/kernel-package/ directory. This script is run <em>after</em> the scripts in /etc/kernel/postinst.d directory.</p>
  </dd>
  <dt>
    <p><strong>postrm_hook</strong></p>
  </dt>
  <dd>
    <p><strong>DEPRECATED</strong>: Set this variable to a script to be executed in the postrm (that is, after the image has been removed) after all the remove actions have been performed. The path can be a relative path if the script lives in a safe path -- that is, if it lives in /bin, /sbin, /usr/bin, or /usr/sbin, or must be an absolute path instead. The environment variable <strong>KERNEL_PACKAGE_VERSION</strong> shall be set to the version of the kernel-package that created the package. This script shall be called with two arguments, the first being the <em>version</em> of the kernel image, and the second argument being the <em>location</em> of the kernel image itself. Errors in the script shall produce a warning message, but shall be otherwise ignored. Since debconf is in use before the script is called, this script should issue no diagnostic messages to stdout --  while the postinst does call <strong>db_stop</strong>, debconf does not restore stdout, so messages to stdout disappear. This script is run <em>after</em> the scripts in /etc/kernel/postrm.d directory.</p>
  </dd>
  <dt>
    <p><strong>preinst_hook</strong></p>
  </dt>
  <dd>
    <p><strong>DEPRECATED</strong>: Set this variable to a script to be executed before the package is unpacked, and can be used to put in additional checks. The path can be a relative path if the script lives in a safe path -- that is, if it lives in /bin, /sbin, /usr/bin, or /usr/sbin, or must be an absolute path instead. The environment variable <strong>KERNEL_PACKAGE_VERSION</strong> shall be set to the version of the kernel-package that created the package. This script shall be called with two arguments, the first being the <em>version</em> of the kernel image, and the second argument being the <em>location</em> of the kernel image itself. This script is run <em>after</em> the scripts in /etc/kernel/preinst.d directory.</p>
  </dd>
  <dt>
    <p><strong>prerm_hook</strong></p>
  </dt>
  <dd>
    <p><strong>DEPRECATED</strong>: Set this variable to a script to be executed before the package files are removed (so any added files may be removed) . The path can be a relative path if the script lives in a safe path -- that is, if it lives in /bin, /sbin, /usr/bin, or /usr/sbin, or must be an absolute path instead. The environment variable <strong>KERNEL_PACKAGE_VERSION</strong> shall be set to the version of the kernel-package that created the package. This script shall be called with two arguments, the first being the <em>version</em> of the kernel image, and the second argument being the <em>location</em> of the kernel image itself. Errors in the script shall cause the prerm to fail. Since debconf is in use before the script is called, this script should issue no diagnostic messages to stdout -- while the postinst does call <strong>db_stop</strong>, debconf does not restore stdout, so messages to stdout disappear. This script is run <em>after</em> the scripts in /etc/kernel/prerm.d directory.</p>
  </dd>
  <dt>
    <p><strong>src_postinst_hook</strong></p>
  </dt>
  <dd>
    <p><strong>DEPRECATED</strong>: Unlike the other hook variables, this is meant for a script run during the post inst of a docs, headers or a source package. Using this hook for the headers package is now being deprecated, at some point the headers post install script shall only run the header_postinst_hook. The path can be a relative path if the script lives in a safe path -- that is, if it lives in /bin, /sbin, /usr/bin, or /usr/sbin, or must be an absolute path instead. The environment variable <strong>KERNEL_PACKAGE_VERSION</strong> shall be set to the version of the kernel-package that created the package.  This script shall be called with two arguments, the first being the <em>name</em> of the package being installed (could be kernel source or headers), and the second argument being the <em>version</em> of the package being installed. Errors in the script shall cause the postinst to fail. This script is run <em>after</em> the scripts in /etc/kernel/src_postinst.d directory.</p>
  </dd>
  <dt>
    <p><strong>header_postinst_hook</strong></p>
  </dt>
  <dd>
    <p><strong>DEPRECATED</strong>: Unlike the other hook variables, this is meant for a script run during the post inst of a headers package only. The path can be a relative path if the script lives in a safe path -- that is, if it lives in /bin, /sbin, /usr/bin, or /usr/sbin, or must be an absolute path instead. The environment variable <strong>KERNEL_PACKAGE_VERSION</strong> shall be set to the version of the kernel-package that created the package. This script shall be called with two arguments, the first being the <em>name</em> of the package being installed, and the second argument being the <em>version</em> of the package being installed. Errors in the script shall cause the postinst to fail. This script is run <em>after</em> the scripts in /etc/kernel/header_postinst.d directory.</p>
  </dd>
  <dt>
    <p><strong>clobber_modules</strong></p>
  </dt>
  <dd>
    <p>If set, the preinst shall silently try to move /lib/modules/version out of the way if it is the same version as the image being installed. Use at your own risk. This variable is unset by default.</p>
  </dd>
  <dt>
    <p><strong>warn_reboot</strong></p>
  </dt>
  <dd>
    <p>This variable can be used to turn off the warning given when installing a kernel image which is the same version as the currently running version. If the modules list is changed, the modules dependencies may have been changed, and the modules for the new kernel may not run correctly on the running kernel if the kernel ABI has changed in the meanwhile. It is a good idea to reboot, and this is a note to remind you. If you know what you are doing, you can set this variable to no. This variable is set by default.</p>
  </dd>
  <dt>
    <p><strong>relink_build_link</strong></p>
  </dt>
  <dd>
    <p>This option manipulates the build link created by recent kernels. If the link is a dangling link, and if a the corresponding kernel headers appear to have been installed on the system, a new symlink shall be created to point to them. The default is to relink the build link (YES).</p>
  </dd>
  <dt>
    <p><strong>force_build_link</strong></p>
  </dt>
  <dd>
    <p>This option manipulates the build link created by recent kernels. If the link is a dangling link, a new symlink shall be created to point to kernel headers data in /usr/src, whether they have been installed or not. The default is unset, we don't create potentially dangling symlinks by default.</p>
  </dd>
  <dt>
    <p><strong>relink_src_link</strong></p>
  </dt>
  <dd>
    <p>This option manipulates the source link created by recent kernels. If the link is a dangling link it is deleted at install time. The default is to relink (delete) the source link (YES).</p>
  </dd>
  <dt>
    <p><strong>silent_modules</strong></p>
  </dt>
  <dd>
    <p>This option has been put in for the people who are vastly irritated on being warned about preexisting modules directory <em>/lib/modules/$version</em>. That directory may belong to an old or defunct kernel image package, in which case problems may arise with leftover modules in that directory tree, or the directory may legitimately exist due to a independent modules package being installed for this kernel version that has already been unpacked.  In this latter case the existence of the directory is benign.  If you set this variable, you shall no longer be given a chance to abort if a preexisting modules directory <em>/lib/modules/$version</em> is detected.  This is unset by default.</p>
  </dd>
  <dt>
    <p><strong>ignore_depmod_err</strong></p>
  </dt>
  <dd>
    <p>If set, does not prompt to continue after a depmod problem in the postinstall script. This facilitates automated installs, though it may mask a problem with the kernel image. A diagnostic is still issued. This is unset be default.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>The file described here is <em>/etc/kernel-img.conf</em>. Also, there are example scripts suitable for dropping into <em>/etc/kernel/*.d</em> installed in <em>/usr/share/doc/kernel-common/examples.</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO kernel-img.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/make.1.html"><strong>make</strong>(1)</a>, <a href="../man1/make-kpkg.1.html"><strong>make-kpkg</strong>(1)</a>, <a href="../man5/kernel-pkg.conf.5.html"><strong>kernel-pkg.conf</strong>(5)</a>, <strong>The GNU Make manual</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>There are no bugs.  Any resemblance thereof is delirium. Really.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Manoj Srivastava &lt;srivasta@debian.org&gt;, for the Debian GNU/Linux system.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="keepalived.conf.5.html"><span aria-hidden="true">&larr;</span> keepalived.conf.5: Configuration file for keepalived</a></li>
   <li class="next"><a href="kernel-package.5.html">kernel-package.5: System for creating kernel related packages <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
