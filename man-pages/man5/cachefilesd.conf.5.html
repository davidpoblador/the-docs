<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cachefilesd.conf: Local file caching configuration file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Local file caching configuration file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="cachefilesd.conf (5) manual">
  <meta name="twitter:description" content="Local file caching configuration file">
  <meta name="twitter:image" content="https://www.carta.tech/images/cachefilesd-cachefilesd.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/cachefilesd.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="cachefilesd.conf (5) manual" />
  <meta property="og:description" content="Local file caching configuration file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cachefilesd-cachefilesd.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">cachefilesd.conf<small> (5)</small></h1>
        <p class="lead">Local file caching configuration file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/cachefilesd.conf.5.html">
      <span itemprop="name">cachefilesd.conf: Local file caching configuration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cachefilesd/">
      <span itemprop="name">cachefilesd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/cachefilesd.conf.5.html">
      <span itemprop="name">cachefilesd.conf: Local file caching configuration file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>The configuration file for cachefilesd which can manage a persistent cache for a variety of network filesystems using a set of files on an already mounted filesystem as the data store.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This configuration file can contain a number of commands.  Each one should be on a separate line.  Blank lines and lines beginning with a '#' character are considered to be comments and are discarded.</p><p>The only mandatory command is:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>dir &lt;path&gt;</strong></p>
  </dt>
  <dd>
    <p>This command specifies the directory containing the root of the cache.  It may only specified once per configuration file.</p>
  </dd>

</dl>
<p>All the other commands are optional:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>secctx &lt;label&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify an LSM security context as which the kernel will perform operations to access the cache.  The default is to use cachefilesd's security context.  Files will be created in the cache with the label of directory specified to the 'dir' command.</p>
  </dd>
  <dt>
    <p><strong>brun &lt;N&gt;%</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>bcull &lt;N&gt;%</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>bstop &lt;N&gt;%</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>frun &lt;N&gt;%</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>fcull &lt;N&gt;%</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>fstop &lt;N&gt;%</strong></p>
  </dt>
  <dd>
    <p>These commands configure the culling limits.  The defaults are 7% (run), 5% (cull) and 1% (stop) respectively.  See the section on cache culling for more information.</p><ul>
<li><p>The commands beginning with a 'b' are file space (block) limits, those beginning with an 'f' are file count limits.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>tag &lt;name&gt;</strong></p>
  </dt>
  <dd>
    <p>This command specifies a tag to FS-Cache to use in distinguishing multiple caches.  This is only required if more than one cache is going to be used.  The default is "CacheFiles".</p>
  </dd>
  <dt>
    <p><strong>culltable &lt;log2size&gt;</strong></p>
  </dt>
  <dd>
    <p>This command specifies the size of the tables holding the lists of cullable objects in the cache.  The bigger the number, the faster and more smoothly that culling can proceed when there are many objects in the cache, but the more memory will be consumed by cachefilesd.</p><ul>
<li><p>The quantity is specified as log2 of the size actually required, for example 12 indicates a table of 4096 entries and 13 indicates 8192 entries.  The permissible values are between 12 and 20, the latter indicating 1048576 entries.  The default is 12.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>nocull</strong></p>
  </dt>
  <dd>
    <p>Disable culling.  Culling and building up the cull table take up a certain amount of a systems resources, which may be undesirable.  Supplying this option disables all culling activity.  The cache will keep building up to the limits set and won't be shrunk, except by the removal of out-dated cache files.</p>
  </dd>
  <dt>
    <p><strong>debug &lt;mask&gt;</strong></p>
  </dt>
  <dd>
    <p>This command specifies a numeric bitmask to control debugging in the kernel module.  The default is zero (all off).  The following values can be OR'd into the mask to collect various information:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>1</strong></p>
  </dt>
  <dd>
    <p>Turn on trace of function entry (_enter() macros)</p>
  </dd>
  <dt>
    <p><strong>2</strong></p>
  </dt>
  <dd>
    <p>Turn on trace of function exit (_leave() macros)</p>
  </dd>
  <dt>
    <p><strong>4</strong></p>
  </dt>
  <dd>
    <p>Turn on trace of internal debug points (_debug())</p>
  </dd>

</dl>
<ul>
<li><p>This mask can also be set through /sys/module/cachefiles/parameters/debug.</p></li>
</ul>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>As an example, consider the following:</p><p>dir /var/cache/fscache</p><p>secctx cachefiles_kernel_t</p><p>tag mycache</p><p>brun 10%</p><p>bcull 7%</p><p>bstop 3%</p><p>secctx system_u:system_r:cachefiles_kernel_t:s0</p><p>This places the cache storage objects in a directory called "/var/cache/fscache", names the cache "mycache", permits the cache to run freely as long as there's at least 10% free space on /var/cache/fscache/, starts culling the cache when the free space drops below 7% and stops writing new stuff into the cache if the amount of free space drops below 3%.  If the cache is suspended, it won't reactivate until the amount of free space rises again to 10% or better.</p><p>Furthermore, this will tell the kernel module the security context it should use when accessing the cache (SELinux is assumed to be the LSM in this example).  In this case, SELinux would use cachefiles_kernel_t as the key into the policy.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CACHE CULLING</h2>
        <div class="sectioncontent">
<p>The cache may need culling occasionally to make space.  This involves discarding objects from the cache that have been used less recently than anything else.  Culling is based on the access time of data objects.  Empty directories are culled if not in use.</p><p>Cache culling is done on the basis of the percentage of blocks and the percentage of files available in the underlying filesystem.  There are six "limits":</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>brun</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>frun</strong></p>
  </dt>
  <dd>
    <p>If the amount of free space and the number of available files in the cache rises above both these limits, then culling is turned off.</p>
  </dd>
  <dt>
    <p><strong>bcull</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>fcull</strong></p>
  </dt>
  <dd>
    <p>If the amount of available space or the number of available files in the cache falls below either of these limits, then culling is started.</p>
  </dd>
  <dt>
    <p><strong>bstop</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>fstop</strong></p>
  </dt>
  <dd>
    <p>If the amount of available space or the number of available files in the cache falls below either of these limits, then no further allocation of disk space or files is permitted until culling has raised things above these limits again.</p>
  </dd>

</dl>
<p>These must be configured thusly:</p><ul>
<li><p>0 &lt;= bstop &lt; bcull &lt; brun &lt; 100</p><p>0 &lt;= fstop &lt; fcull &lt; frun &lt; 100</p></li>
</ul><p>Note that these are percentages of available space and available files, and do <em>not</em> appear as 100 minus the percentage displayed by the <strong>df</strong> program.</p><p>The userspace daemon scans the cache to build up a table of cullable objects. These are then culled in least recently used order.  A new scan of the cache is started as soon as space is made in the table.  Objects will be skipped if their atimes have changed or if the kernel module says it is still using them.</p><p>Culling can be disabled with the <strong>nocull</strong> option.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO cachefilesd.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/cachefilesd.8.html"><strong>cachefilesd</strong>(8)</a>, <strong>df</strong>(1), /usr/share/doc/cachefilesd-*/README</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>David Howells &lt;dhowells@redhat.com&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bzw.5.html"><span aria-hidden="true">&larr;</span> bzw.5: Bzflag world file format</a></li>
   <li class="next"><a href="callerid.conf.5.html">callerid.conf.5: Config file for isdnlog numbers and scripts <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
