<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>systemd.netdev: Virtual network device configuration</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Virtual network device configuration">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="systemd.netdev (5) manual">
  <meta name="twitter:description" content="Virtual network device configuration">
  <meta name="twitter:image" content="https://www.carta.tech/images/systemd-systemd.netdev-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/systemd.netdev.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="systemd.netdev (5) manual" />
  <meta property="og:description" content="Virtual network device configuration" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/systemd-systemd.netdev-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">systemd.netdev<small> (5)</small></h1>
        <p class="lead">Virtual network device configuration</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/systemd.netdev.5.html">
      <span itemprop="name">systemd.netdev: Virtual network device configuration</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/systemd/">
      <span itemprop="name">systemd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/systemd.netdev.5.html">
      <span itemprop="name">systemd.netdev: Virtual network device configuration</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><em>netdev</em>.netdev</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Network setup is performed by <a href="../man8/systemd-networkd.8.html"><strong>systemd-networkd</strong>(8)</a>.</p><p>Virtual Network Device files must have the extension .netdev; other extensions are ignored. Virtual network devices are created as soon as networkd is started. If a netdev with the specified name already exists, networkd will use that as-is rather than create its own. Note that the settings of the pre-existing netdev will not be changed by networkd.</p><p>The .netdev files are read from the files located in the system network directory /lib/systemd/network, the volatile runtime network directory /run/systemd/network and the local administration network directory /etc/systemd/network. All configuration files are collectively sorted and processed in lexical order, regardless of the directories in which they live. However, files with identical filenames replace each other. Files in /etc have the highest priority, files in /run take precedence over files with the same name in /lib. This can be used to override a system-supplied configuration file with a local file if needed; a symlink in /etc with the same name as a configuration file in /lib, pointing to /dev/null, disables the configuration file entirely.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[MATCH] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>A virtual network device is only created if the "[Match]" section matches the current environment, or if the section is empty. The following keys are accepted:</p><p><em>Host=</em></p><p>Matches against the hostname or machine ID of the host. See "ConditionHost=" in <strong>systemd.unit</strong>(5) for details.</p><p><em>Virtualization=</em></p><p>Checks whether the system is executed in a virtualized environment and optionally test whether it is a specific implementation. See "ConditionVirtualization=" in <strong>systemd.unit</strong>(5) for details.</p><p><em>KernelCommandLine=</em></p><p>Checks whether a specific kernel command line option is set (or if prefixed with the exclamation mark unset). See "ConditionKernelCommandLine=" in <strong>systemd.unit</strong>(5) for details.</p><p><em>Architecture=</em></p><p>Checks whether the system is running on a specific architecture. See "ConditionArchitecture=" in <strong>systemd.unit</strong>(5) for details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[NETDEV] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>The "[NetDev]" section accepts the following keys:</p><p><em>Description=</em></p><p>A free-form description of the netdev.</p><p><em>Name=</em></p><p>The interface name used when creating the netdev. This option is compulsory.</p><p><em>Kind=</em></p><p>The netdev kind. Currently, "bridge", "bond", "vlan", "macvlan", "vxlan", "ipip", "gre", "sit", "vti", "veth", "tun", "tap" and "dummy" are supported. This option is compulsory.</p><p><em>MTUBytes=</em></p><p>The maximum transmission unit in bytes to set for the device. The usual suffixes K, M, G, are supported and are understood to the base of 1024.</p><p><em>MACAddress=</em></p><p>The MAC address to use for the device. If none is given, one is generated based on the interface name and the <a href="../man5/machine-id.5.html"><strong>machine-id</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[VLAN] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>The "[VLAN]" section only applies for netdevs of kind "vlan", and accepts the following key:</p><p><em>Id=</em></p><p>The VLAN ID to use. An integer in the range 0&ndash;4094. This option is compulsory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[MACVLAN] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>The "[MACVLAN]" section only applies for netdevs of kind "macvlan", and accepts the following key:</p><p><em>Mode=</em></p><p>The MACVLAN mode to use. The supported options are "private", "vepa", "bridge" and "passthru".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[VXLAN] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>The "[VXLAN]" section only applies for netdevs of kind "vxlan", and accepts the following key:</p><p><em>Id=</em></p><p>The VXLAN ID to use.</p><p><em>Group=</em></p><p>An assigned multicast group IP address.</p><p><em>TOS=</em></p><p>The Type Of Service byte value for a vxlan interface.</p><p><em>TTL=</em></p><p>A fixed Time To Live N on Virtual eXtensible Local Area Network packets. N is a number in the range 1-255. 0 is a special value meaning that packets inherit the TTL value.</p><p><em>MacLearning=</em></p><p>A boolean. When true, enables dynamic MAC learning to discover remote MAC addresses.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[TUNNEL] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>The "[Tunnel]" section only applies for netdevs of kind "ipip", "sit", "gre" and "vti" and accepts the following keys:</p><p><em>Local=</em></p><p>A static local address for tunneled packets. It must be an address on another interface of this host.</p><p><em>Remote=</em></p><p>The remote endpoint of the tunnel.</p><p><em>TOS=</em></p><p>The Type Of Service byte value for a tunnel interface. For details about the TOS see the \m[blue]<strong>Type of Service in the Internet Protocol Suite</strong>\m[]\s-2\u[1]\d\s+2 document.</p><p><em>TTL=</em></p><p>A fixed Time To Live N on tunneled packets. N is a number in the range 1-255. 0 is a special value meaning that packets inherit the TTL value. The default value for IPv4 tunnels is: inherit. The default value for IPv6 tunnels is: 64.</p><p><em>DiscoverPathMTU=</em></p><p>A boolean. When true, enables Path MTU Discovery on the tunnel.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[PEER] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>The "[Peer]" section only applies for netdevs of kind "veth" and accepts the following key:</p><p><em>Name=</em></p><p>The interface name used when creating the netdev. This option is compulsory.</p><p><em>MACAddress=</em></p><p>The peer MACAddress, if not set it is generated in the same way as the MAC address of the main interface.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[TUN] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>The "[Tun]" section only applies for netdevs of kind "tun", and accepts the following keys:</p><p><em>OneQueue=</em></p><p>Takes a boolean argument. Configures whether all packets are queued at the device (enabled), or a fixed number of packets are queued at the device and the rest at the "qdisc". Defaults to "no".</p><p><em>MultiQueue=</em></p><p>Takes a boolean argument. Configures whether to use multiple file descriptors (queues) to parallelize packets sending and receiving. Defaults to "no".</p><p><em>PacketInfo=</em></p><p>Takes a boolean argument. Configures whether packets should be prepened with four extra bytes (two flag bytes and two protocol bytes). If disabled it indicates that the packets will be pure IP packets. Defaults to "no".</p><p><em>User=</em></p><p>User to grant access to the /dev/net/tun device.</p><p><em>Group=</em></p><p>Group to grant access to the /dev/net/tun device.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">[TAP] SECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>The "[Tap]" section only applies for netdevs of kind "tap", and accepts the same keys as the "[Tun]" section.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p><strong>Example&nbsp;1.&nbsp;/etc/systemd/network/bridge.netdev</strong></p>
<pre>
[NetDev]
Name=bridge0
Kind=bridge
</pre>
<p><strong>Example&nbsp;2.&nbsp;/etc/systemd/network/vlan1.netdev</strong></p>
<pre>
[Match]
Virtualization=no

[NetDev]
Name=vlan1
Kind=vlan

[VLAN]
Id=1
</pre>
<p><strong>Example&nbsp;3.&nbsp;/etc/systemd/network/ipip.netdev</strong></p>
<pre>
[NetDev]
Name=ipip-tun
Kind=ipip
MTUBytes=1480

[Tunnel]
Local=192.168.223.238
Remote=192.169.224.239
TTL=64
</pre>
<p><strong>Example&nbsp;4.&nbsp;/etc/systemd/network/tap.netdev</strong></p>
<pre>
[NetDev]
Name=tap-test
Kind=tap

[Tap]
MultiQueue=true
PacketInfo=true
</pre>
<p><strong>Example&nbsp;5.&nbsp;/etc/systemd/network/sit.netdev</strong></p>
<pre>
[NetDev]
Name=sit-tun
Kind=sit
MTUBytes=1480

[Tunnel]
Local=10.65.223.238
Remote=10.65.223.239
</pre>
<p><strong>Example&nbsp;6.&nbsp;/etc/systemd/network/gre.netdev</strong></p>
<pre>
[NetDev]
Name=gre-tun
Kind=gre
MTUBytes=1480

[Tunnel]
Local=10.65.223.238
Remote=10.65.223.239
</pre>
<p><strong>Example&nbsp;7.&nbsp;/etc/systemd/network/vti.netdev</strong></p>
<pre>
[NetDev]
Name=vti-tun
Kind=vti
MTUBytes=1480

[Tunnel]
Local=10.65.223.238
Remote=10.65.223.239
</pre>
<p><strong>Example&nbsp;8.&nbsp;/etc/systemd/network/veth.netdev</strong></p>
<pre>
[NetDev]
Name=veth-test
Kind=veth

[Peer]
Name=veth-peer
</pre>
<p><strong>Example&nbsp;9.&nbsp;/etc/systemd/network/dummy.netdev</strong></p>
<pre>
[NetDev]
Name=dummy-test
Kind=dummy
MACAddress=12:34:56:78:9a:bc
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO systemd.netdev&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/systemd.1.html"><strong>systemd</strong>(1)</a>, <a href="../man8/systemd-networkd.8.html"><strong>systemd-networkd</strong>(8)</a>, <a href="../man5/systemd.network.5.html"><strong>systemd.network</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>Type of Service in the Internet Protocol Suite</p><p>http://tools.ietf.org/html/rfc1349</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="systemd.mount.5.html"><span aria-hidden="true">&larr;</span> systemd.mount.5: Mount unit configuration</a></li>
   <li class="next"><a href="systemd.network.5.html">systemd.network.5: Network configuration <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
