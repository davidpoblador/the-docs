<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>groups.conf: Configuration file for clustershell external node groups</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file for clustershell external node groups">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="groups.conf (5) manual">
  <meta name="twitter:description" content="Configuration file for clustershell external node groups">
  <meta name="twitter:image" content="https://www.carta.tech/images/clustershell-groups.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/groups.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="groups.conf (5) manual" />
  <meta property="og:description" content="Configuration file for clustershell external node groups" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/clustershell-groups.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">groups.conf<small> (5)</small></h1>
        <p class="lead">Configuration file for clustershell external node groups</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/groups.conf.5.html">
      <span itemprop="name">groups.conf: Configuration file for clustershell external node groups</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/clustershell/">
      <span itemprop="name">clustershell</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/groups.conf.5.html">
      <span itemprop="name">groups.conf: Configuration file for clustershell external node groups</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The ClusterShell library obtains node groups configuration options from the system-wide configuration file <em>/etc/clustershell/groups.conf</em>. Additional configuration files are also read from the directories set by the groupsdir option, if present.  See the groupsdir option below for further details.</p><p>Configuration files have a format in the style of RFC 822 potentially composed of several sections which may be present in any order. There are two types of sections: Main and Group source:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Main</strong></p>
  </dt>
  <dd>
    <p>Global configuration options. There should be only one Main section.</p>
  </dd>
  <dt>
    <p><strong></strong><em>Group_source</em><strong></strong></p>
  </dt>
  <dd>
    <p>The <em>Group_source</em> section(s) define the configuration for each node group source (or namespace). This configuration consists in external commands definition (map, all, list and reverse).</p>
  </dd>

</dl>
<p>Only <em>Group_source</em> section(s) are allowed in additional configuration files.</p><h3>[Main] OPTIONS</h3>
<p>Configuration parameters of the Main section are described below.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>default</strong></p>
  </dt>
  <dd>
    <p>Specify the default group source (group namespace) used by the NodeSet parser when the user does not explicitly specify the group source (eg. "@io").</p>
  </dd>
  <dt>
    <p><strong>groupsdir</strong></p>
  </dt>
  <dd>
    <p>Optional list of directories where the ClusterShell library should look for .conf files which define group sources to use. Each file in these directories with the .conf suffix should contain one or more <em>Group_source</em> sections as documented in [<em>Group_source</em>] options below. These will be merged with the group sources defined in <em>/etc/clustershell/groups.conf</em> to form the complete set of group sources that ClusterShell will use. Duplicate <em>Group_source</em> sections are not allowed.  Note: .conf files that are not readable by the current user are ignored.</p>
  </dd>

</dl>

<h3>[\fIGroup_source\fP] OPTIONS</h3>
<p>Configuration parameters of each group source section are described below.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>map</strong></p>
  </dt>
  <dd>
    <p>Specify the external shell command used to resolve a group name into a nodeset, list of nodes or list of nodeset (separated by space characters or by carriage returns). The variable <em>$GROUP</em> is replaced before executing the command.</p>
  </dd>
  <dt>
    <p><strong>all</strong></p>
  </dt>
  <dd>
    <p>Optional external shell command that should return a nodeset, list of nodes or list of nodeset of all nodes for this group source. If not specified, the library will try to resolve all nodes by using the list external command in the same group source followed by map for each group.</p>
  </dd>
  <dt>
    <p><strong>list</strong></p>
  </dt>
  <dd>
    <p>Optional external shell command that should return the list of all groups for this group source (separated by space characters or by carriage returns).</p>
  </dd>
  <dt>
    <p><strong>reverse</strong></p>
  </dt>
  <dd>
    <p>Optional external shell command used to find the group(s) of a single node. The variable $NODE is previously replaced. If this upcall is not specified, the reverse operation is computed in memory by the library from the <em>list</em> and <em>map</em> external calls. Also, if the number of nodes to reverse is greater than the number of available groups, the <em>reverse</em> external command is avoided automatically.</p><p>When the library executes a group source external shell command, the current working directory is previously set to the corresponding groupsdir. This allows the use of relative paths for third party files in the command.</p><p>Each external command might return a non-zero return code when the operation is not doable. But if the call return zero, for instance, for a non-existing group, the user will not receive any error when trying to resolve such unknown group.  The desired behaviour is up to the system administrator.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESOURCE USAGE</h2>
        <div class="sectioncontent">
<p>All external command results are cached in memory to avoid multiple calls.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Simple configuration file for local groups and slurm partitions binding.</p><h3>\fIgroups.conf\fP</h3>

<pre>
[Main]
default: local
#groupsdir: /etc/clustershell/groups.conf.d/

[local]
map: sed -n &apos;s/^$GROUP:(.*)/1/p&apos; /etc/clustershell/groups
list: sed -n &apos;s/^&#92;([0-9A-Za-z_-]*&#92;):.*/&#92;1/p&apos; /etc/clustershell/groups

[slurm]
map: sinfo -h -o "%N" -p $GROUP
all: sinfo -h -o "%N"
list: sinfo -h -o "%P"
reverse: sinfo -h -N -o "%P" -n $NODE
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><em>/etc/clustershell/groups.conf</em><strong></strong></p>
  </dt>
  <dd>
    <p>System-wide external node groups configuration file.</p>
  </dd>
  <dt>
    <p><strong></strong><em>/etc/clustershell/groups.conf.d/</em><strong></strong></p>
  </dt>
  <dd>
    <p>Recommended directory for additional configuration files.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO groups.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/clush.1.html"><strong>clush</strong>(1)</a>, <a href="../man1/clubak.1.html"><strong>clubak</strong>(1)</a>, <a href="../man1/nodeset.1.html"><strong>nodeset</strong>(1)</a></p><p><em>http://clustershell.sourceforge.net/</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Stephane Thiell, CEA DAM  &lt;stephane.thiell@cea.fr&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>CeCILL-C V1</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="group.conf.5.html"><span aria-hidden="true">&larr;</span> group.conf.5: Configuration file for the pam_group module</a></li>
   <li class="next"><a href="gshadow.5.html">gshadow.5: Shadowed group file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
