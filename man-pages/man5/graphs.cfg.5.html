<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>graphs.cfg: Configuration of the showgraph cgi</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration of the showgraph cgi">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="graphs.cfg (5) manual">
  <meta name="twitter:description" content="Configuration of the showgraph cgi">
  <meta name="twitter:image" content="https://www.carta.tech/images/xymon-graphs.cfg-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/graphs.cfg.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="graphs.cfg (5) manual" />
  <meta property="og:description" content="Configuration of the showgraph cgi" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xymon-graphs.cfg-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">graphs.cfg<small> (5)</small></h1>
        <p class="lead">Configuration of the showgraph cgi</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/graphs.cfg.5.html">
      <span itemprop="name">graphs.cfg: Configuration of the showgraph cgi</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xymon/">
      <span itemprop="name">xymon</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/graphs.cfg.5.html">
      <span itemprop="name">graphs.cfg: Configuration of the showgraph cgi</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>$XYMONHOME/etc/graphs.cfg</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><a href="../man1/showgraph.cgi.1.html"><strong>showgraph.cgi</strong>(1)</a></em> uses the configuration file $XYMONHOME/etc/graphs.cfg to build graphs from the RRD files collected by Xymon.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE FORMAT</h2>
        <div class="sectioncontent">
<p>Each definition of a graph type begins with a "[SERVICE]" indicator, this is the name passed as the "service" parameter to <a href="../man1/showgraph.cgi.1.html"><strong>showgraph.cgi</strong>(1)</a>.</em> If the service name passed to showgraph.cgi is not found, it will attempt to match the service name to a graph via the TEST2RRD environment variable. So calling showgraph.cgi with "service=cpu" or "service=la" will end up producing the same graph.</p><p>A graph definition needs to have a TITLE and a YAXIS setting. These are texts shown as the title of the graph, and the YAXIS heading respectively. (The X-axis is always time-based).</p><p>If a fixed set of RRD files are used for the graph, you just write those in the RRDtool definitions. Note that Xymon keeps all RRD files for a host in a separate directory per host, so you need not worry about the hostname being part of the RRD filename.</p><p>For graphs that use multiple RRD files as input, you specify a filename pattern in the FNPATTERN statement, and optionally a pattern of files to exclude from the graph with EXFNPATTERN (see "[tcp]" for an example). When FNPATTERN is used, you can use "@RRDFN@" in the RRDtool definitions to pick up each filename. "@RRDIDX@" is an index (starting at 0) for each file in the set. "@RRDPARAM@" contains the first word extracted from the pattern of files (see e.g. "[memory]" how this is used). "@COLOR@" picks a new color for each graph automatically.</p><p>The remainder of the lines in each definition are passed directly to the RRDtool rrd_graph() routine.</p><p>The following is an example of how the "la" (cpu) graph is defined. This is a simple definition that uses a single RRD-file, la.rrd:</p><p>[la]</p>
<pre>
        TITLE CPU Load
</pre>

<pre>
        YAXIS Load
</pre>

<pre>
        DEF:avg=la.rrd:la:AVERAGE
</pre>

<pre>
        CDEF:la=avg,100,/
</pre>

<pre>
        AREA:la#00CC00:CPU Load Average
</pre>

<pre>
        GPRINT:la:LAST:  %5.1lf (cur)
</pre>

<pre>
        GPRINT:la:MAX:  %5.1lf (max)
</pre>

<pre>
        GPRINT:la:MIN:  %5.1lf (min)
</pre>

<pre>
        GPRINT:la:AVERAGE:  %5.1lf (avg)\n
</pre>
<p>Here is an example of a graph that uses multiple RRD-files, determined automatically at run-time via the FNPATTERN setting. Note how it uses the @RRDIDX@ to define a unique RRD parameter per input-file, and the @COLOR@ and @RRDPARAM@ items to pick unique colors and a matching text for the graph legend:</p><p>[disk]</p>
<pre>
        FNPATTERN disk(.*).rrd
</pre>

<pre>
        TITLE Disk Utilization
</pre>

<pre>
        YAXIS % Full
</pre>

<pre>
        DEF:p@RRDIDX@=@RRDFN@:pct:AVERAGE
</pre>

<pre>
        LINE2:p@RRDIDX@#@COLOR@:@RRDPARAM@
</pre>

<pre>
        -u 100
</pre>

<pre>
        -l 0
</pre>

<pre>
        GPRINT:p@RRDIDX@:LAST:  %5.1lf (cur)
</pre>

<pre>
        GPRINT:p@RRDIDX@:MAX:  %5.1lf (max)
</pre>

<pre>
        GPRINT:p@RRDIDX@:MIN:  %5.1lf (min)
</pre>

<pre>
        GPRINT:p@RRDIDX@:AVERAGE:  %5.1lf (avg)\n
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADVANCED GRAPH TITLES</h2>
        <div class="sectioncontent">
<p>Normally the title of a graph is a static text defined in the graphs.cfg file. However, there may be situations where you want to use different titles for the same type of graph, e.g. if you are incorporating RRD files from MRTG into Xymon. In that case you can setup the TITLE definition so that it runs a custom script to determine the graph title. Like this:</p><p>	TITLE exec:/usr/local/bin/graphitle</p><p>The <strong>/usr/local/bin/graphtitle</strong> command is then called with the hostname, the graphtype, the period string, and all of the RRD files used as parameters. The script must generate one line of output, which is then used as the title of the graph.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p><strong>TEST2RRD</strong> Maps service names to graph definitions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Most of the RRD graph definitions shipped with Xymon have been ported from the definitions in the <strong>larrd-grapher.cgi</strong> CGI from LARRD 0.43c.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO graphs.cfg&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/xymonserver.cfg.5.html"><strong>xymonserver.cfg</strong>(5)</a>, <strong>rrdtool</strong>(1), <strong>rrdgraph</strong>(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gosa.conf.5.html"><span aria-hidden="true">&larr;</span> gosa.conf.5: Gosa configuration file</a></li>
   <li class="next"><a href="gres.conf.5.html">gres.conf.5: Slurm configuration file for generic resource management. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
