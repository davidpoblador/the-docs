<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sane-canon_pp: Sane backend for canon canoscan parallel port flatbed scanners</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Sane backend for canon canoscan parallel port flatbed scanners">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sane-canon_pp (5) manual">
  <meta name="twitter:description" content="Sane backend for canon canoscan parallel port flatbed scanners">
  <meta name="twitter:image" content="https://www.carta.tech/images/libsane-common-sane-canon_pp-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/sane-canon_pp.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sane-canon_pp (5) manual" />
  <meta property="og:description" content="Sane backend for canon canoscan parallel port flatbed scanners" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libsane-common-sane-canon_pp-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sane-canon_pp<small> (5)</small></h1>
        <p class="lead">Sane backend for canon canoscan parallel port flatbed scanners</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/sane-canon_pp.5.html">
      <span itemprop="name">sane-canon_pp: Sane backend for canon canoscan parallel port flatbed scanners</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libsane-common/">
      <span itemprop="name">libsane-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/sane-canon_pp.5.html">
      <span itemprop="name">sane-canon_pp: Sane backend for canon canoscan parallel port flatbed scanners</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>sane-canon_pp</strong> library implements a SANE (Scanner Access Now Easy) backend that provides access to the following Canon flatbed scanners:</p><p>CanoScan FB320P</p><p>CanoScan FB620P</p><p>CanoScan FB330P</p><p>CanoScan FB630P</p><p>CanoScan N340P</p><p>CanoScan N640P</p><p>CanoScan N640P ex</p><p>No USB scanners are supported and there are no plans to support them in the future.  Other projects are working on support for USB scanners. See the <strong>PROJECTS</strong> file for more detail.  The FB310P and FB610P are re-badged Avision scanners which use a different command set, so are unlikely to be supported by this backend in the future.</p><p>IMPORTANT: this is alpha code. While we have made every effort to make it as reliable as possible, it will not always work as expected.  Feedback is still appreciated.  Please send any bug reports to the maintainers as listed on the web page (listed in <strong>SEE ALSO</strong> below).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEVICE NAMES</h2>
        <div class="sectioncontent">
<p>This backend expects device names of the form presented by libieee1284.  These names are highly dependent on operating system and version.</p><p>On Linux 2.4 kernels this will be of the form <em>parport0</em> or older (2.2 and before) kernels may produce names like <em>0x378</em> (the base address of your port) or simply <em>0</em> depending on your module configuration.  Check the contents of <em>/proc/parport</em> if it exists.  If you don't want to specify a default port (or don't know its name), the backend should be able to detect which port your scanner is on.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>The contents of the <em>canon_pp.conf</em> file is a list of options for the driver to use.  Empty lines and lines starting with a hash mark (#) are ignored.</p><p>The supported options are currently <strong>ieee1284</strong>, <strong>calibrate</strong>, <strong>init_mode</strong>, and <strong>force_nibble</strong></p><p>Option <strong>ieee1284</strong> <em>port-name</em> defines which port to use.  The format of port-name is OS dependent, based on the names presented by libieee1284.  Please only have one of these lines, or all but one will be ignored.</p><p>Option <strong>calibrate</strong> <em>cal-file</em> <em>[port-name]</em> defines which calibration file to use on a per-port basis.  If you only have one parport, the port-name argument may be omitted - but be careful as this will cause problems on multi-scanner systems.  You may have as many of these lines as you like, as long as each has a unique port name.  The tilde (`~') character is acceptable and will be expanded to the value of the HOME environment.</p><p>Option <strong>init_mode</strong> <em>&lt;AUTO|FB620P|FB630P&gt;</em> <em>[portname]</em> defines which initialisation (wake-up) mode to use on a per-port basis. If you only have one parport, the portname argument may be omitted - but be careful as this may cause problems on multi-scanner systems. You may have as many of these lines as you like, as long as each has a unique port name.  The valid initialisation modes are FB620P (which strobes 10101010 and 01010101 on the data pins), FB630P (which strobes 11001100 and 00110011 on the data pins) and AUTO, which will try FB630P mode first then FB620P mode second.  The FB620P mode is also used by the FB320P.  The FB630P mode is used by the FB330P, N340P, and N640P.</p><p>Option <strong>force_nibble</strong> forces the driver to use nibble mode even if ECP mode is reported to work by libieee1284.  This works-around the rare issue of ECP mode being reported to work by the library, then not working.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TIPS</h2>
        <div class="sectioncontent">
<p>Hit the "Calibrate" button before scanning.  It vastly improves the quality of scans.</p><p>To enable automatic detection of your scanner, uncomment the "canon_pp" line from <em>/etc/sane.d/dll.conf</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/sane.d/canon_pp.conf</em></p>
  </dt>
  <dd>
    <p>The backend configuration file (see also description of <strong>SANE_CONFIG_DIR</strong> below).</p>
  </dd>
  <dt>
    <p><em>/usr/lib/arch_triplet/sane/libsane-canon_pp.a</em></p>
  </dt>
  <dd>
    <p>The static library implementing this backend.</p>
  </dd>
  <dt>
    <p><em>/usr/lib/arch_triplet/sane/libsane-canon_pp.so</em></p>
  </dt>
  <dd>
    <p>The shared library implementing this backend (present on systems that support dynamic loading).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>SANE_CONFIG_DIR</strong></p>
  </dt>
  <dd>
    <p>This environment variable specifies the list of directories that may contain the configuration file.  Under UNIX, the directories are separated by a colon (`:'), under OS/2, they are separated by a semi-colon (`;').  If this variable is not set, the configuration file is searched in two default directories: first, the current working directory (".") and then in /etc/sane.d.  If the value of the environment variable ends with the directory separator character, then the default directories are searched after the explicitly specified directories.  For example, setting <strong>SANE_CONFIG_DIR</strong> to "/tmp/config:" would result in directories "tmp/config", ".", and "/etc/sane.d" being searched (in this order).</p>
  </dd>
  <dt>
    <p><strong>SANE_DEBUG_CANON_PP</strong></p>
  </dt>
  <dd>
    <p>If the library was compiled with debug support enabled, this environment variable controls the debug level for this backend.  Higher debug levels increase the verbosity of the output.</p><p>Example: export SANE_DEBUG_CANON_PP=4</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><strong>Features available in the Windows interface</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Brightness and Contrast</strong></p>
  </dt>
  <dd>
    <p>These are not implemented, and probably never will be.  These appear to be implemented entirely in software.  Use GIMP or a similar program if you need these features.</p>
  </dd>
  <dt>
    <p><strong>Descreen Mode</strong></p>
  </dt>
  <dd>
    <p>This appears on our first analysis to be just oversampling with an anti-aliasing filter.  Again, it seems to be implemented entirely in software, so GIMP is your best bet for now.</p>
  </dd>
  <dt>
    <p><strong>Gamma Tables</strong></p>
  </dt>
  <dd>
    <p>This is under investigation, but for now only a simple gamma profile (ie: the one returned during calibration) will be loaded.</p>
  </dd>

</dl>
<p><strong>Communication Problems</strong></p><p>ECP mode in libieee1284 doesn't always work properly, even with new hardware. We believe that this is a ppdev problem.  If you change the configuration file to include <strong>force_nibble</strong> , the problem will go away, but you will only be able to scan in nibble mode.</p><p>Sometimes the scanner can be left in a state where our code cannot revive it. If the backend reports no scanner present, try unplugging the power and plugging it back in.  Also try unplugging printers from the pass-through port.</p><p>The scanner will not respond correctly to our commands when you first plug in the power.  You may find if you try a scan very soon after plugging in the power that the backend will incorrectly report that you have no scanner present. To avoid this, give it about 10 seconds to reset itself before attempting any scans.</p><p><strong>Repeated Lines</strong></p><p>Sometimes at high resolutions (ie. 600dpi) you will notice lines which appear twice.  These lines correspond to points where the scanner head has stopped during the scan (it stops every time the internal 64kb buffer is full). Basically it's a mechanical problem inside the scanner, that the tolerance of movement for a start/stop event is greater than 1/600 inches.  I've never tried the windows driver so I'm not sure how (or if) it works around this problem, but as we don't know how to rewind the scanner head to do these bits again, there's currently no nice way to deal with the problem.</p><p><strong>Grey-scale Scans</strong></p><p>Be aware that the scanner uses the green LEDs to read grey-scale scans, meaning green coloured things will appear lighter than normal, and red and blue coloured items will appear darker than normal.  For high-accuracy grey-scale scans of colour items, it's best just to scan in colour and convert to grey-scale in graphics software such as the GIMP.</p><p><strong>FB620P/FB320P Caveats</strong></p><p>These models can not be reset in the same way as the others.  The windows driver doesn't know how to reset them either - when left with an inconsistent scanner, it will start scanning half way down the page!</p><p>Aborting is known to work correctly on the FB*30P models, and is known to be broken on the FB*20P models.  The FB620P which I tested on simply returns garbage after a scan has been aborted using the method we know. Aborting is able to leave the scanner in a state where it can be shut down, but not where another scan can be made.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sane-canon_pp&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/sane.7.html"><strong>sane</strong>(7)</a>, <strong>sane-dll</strong>(5)</p><p>http://canon-fb330p.sourceforge.net/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This backend is primarily the work of Simon Krix (Reverse Engineering), and Matthew Duggan (SANE interface).</p><p>Many thanks to Kevin Easton for his comments and help, and Kent A. Signorini for his help with the N340P.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sane-canon_dr.5.html"><span aria-hidden="true">&larr;</span> sane-canon_dr.5: Sane backend for canon dr-series scanners</a></li>
   <li class="next"><a href="sane-cardscan.5.html">sane-cardscan.5: Sane backend for corex cardscan usb scanners <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
