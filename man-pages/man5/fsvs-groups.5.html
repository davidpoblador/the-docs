<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fsvs-groups: Patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list. patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list.  so the auto-props are assigned when the entry gets put on the internal list; that happens for the add, prop-set or prop-del, and of course commit commands.   to override the auto-props of some new entry just use the property commands.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list. patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list.  so the auto-props are assigned when the entry gets put on the internal list; that happens for the add, prop-set or prop-del, and of course commit commands.   to override the auto-props of some new entry just use the property commands.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fsvs-groups (5) manual">
  <meta name="twitter:description" content="Patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list. patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list.  so the auto-props are assigned when the entry gets put on the internal list; that happens for the add, prop-set or prop-del, and of course commit commands.   to override the auto-props of some new entry just use the property commands.">
  <meta name="twitter:image" content="https://www.carta.tech/images/fsvs-fsvs-groups-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/fsvs-groups.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fsvs-groups (5) manual" />
  <meta property="og:description" content="Patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list. patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list.  so the auto-props are assigned when the entry gets put on the internal list; that happens for the add, prop-set or prop-del, and of course commit commands.   to override the auto-props of some new entry just use the property commands." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fsvs-fsvs-groups-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fsvs-groups<small> (5)</small></h1>
        <p class="lead">Patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list. patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list.  so the auto-props are assigned when the entry gets put on the internal list; that happens for the add, prop-set or prop-del, and of course commit commands.   to override the auto-props of some new entry just use the property commands.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/fsvs-groups.5.html">
      <span itemprop="name">fsvs-groups: Patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list. patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list.  so the auto-props are assigned when the entry gets put on the internal list; that happens for the add, prop-set or prop-del, and of course commit commands.   to override the auto-props of some new entry just use the property commands.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fsvs/">
      <span itemprop="name">fsvs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/fsvs-groups.5.html">
      <span itemprop="name">fsvs-groups: Patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list. patterns are used to define groups for new entries; a group can be used to ignore the given entries, or to automatically set properties when the entry is taken on the entry list.  so the auto-props are assigned when the entry gets put on the internal list; that happens for the add, prop-set or prop-del, and of course commit commands.   to override the auto-props of some new entry just use the property commands.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Overview</h2>
        <div class="sectioncontent">
<p>When FSVS walks through your working copy it tries to find <strong>new</strong> (ie. not yet versioned) entries. Every <strong>new</strong> entry gets tested against the defined grouping patterns (in the given order!); if a pattern matches, the corresponding group is assigned to the entry, and no further matching is done.</p><p>See also <strong>entry statii</strong>.</p><h3>Predefined group 1: 'ignore'</h3>
<p>If an entry gets a group named 'ignore' assigned, it will not be considered for versioning.</p><p>This is the only <strong>really</strong> special group name.</p>
<h3>Predefined group 2: 'take'</h3>
<p>This group mostly specifies that no further matching is to be done, so that later <strong>ignore</strong> patterns are not tested.</p><p>Basically the 'take' group is an ordinary group like all others; it is just predefined, and available with a <strong>short-hand notation</strong>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Why should I ignore files?</h2>
        <div class="sectioncontent">
<p>Ignore patterns are used to ignore certain directory entries, where versioning makes no sense. If you're versioning the complete installation of a machine, you wouldn't care to store the contents of /proc (see man 5 proc), or possibly because of security reasons you don't want /etc/shadow , /etc/sshd/ssh_host_*key , and/or other password- or key-containing files.</p><p>Ignore patterns allow you to define which directory entries (files, subdirectories, devices, symlinks etc.) should be taken, respectively ignored.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Why should I assign groups?</h2>
        <div class="sectioncontent">
<p>The grouping patterns can be compared with the auto-props feature of subversion; it allows automatically defining properties for new entries, or ignoring them, depending on various criteria.</p><p>For example you might want to use encryption for the files in your users' .ssh directory, to secure them against unauthorized access in the repository, and completely ignore the private key files:</p><p>Grouping patterns:</p>
<pre>
    group:ignore,/home/*/.ssh/id*
    group:encrypt,/home/*/.ssh/**

</pre>
<p> And the $FSVS_CONF/groups/encrypt file would have a definition for the fsvs:commit-pipe (see the <strong>special properties</strong>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Syntax of group files</h2>
        <div class="sectioncontent">
<p>A group definition file looks like this:</p><ul>
<li><p>Whitespace on the beginning and the end of the line is ignored.</p></li><li><p>Empty lines, and lines with the first non-whitespace character being '#' (comments) are ignored.</p></li><li><p>It can have <strong>either</strong> the keywords ignore<strong> or take</strong>; if neither is specified, the group ignore<strong> has ignore</strong> as default (surprise, surprise!), and all others use take<strong>.</strong></p></li><li><p>An arbitrary (small) number of lines with the syntax</p><p> auto-prop <em>property-name</em> <em>property-value</em><em> can be given; </em><em>property-name</em><em> may not include whitespace, as there's no parsing of any quote characters yet.</em></p></li>
</ul><p>An example:</p>
<pre>
   # This is a comment
     # This is another

   auto-props    fsvs:commit-pipe    gpg -er admin@my.net

   # End of definition

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Specification of groups and patterns</h2>
        <div class="sectioncontent">
<p>While an ignore pattern just needs the pattern itself (in one of the formats below), there are some modifiers that can be additionally specified:</p>
<pre>
   [group:{name},][dir-only,][insens|nocase,][take,][mode:A:C,]pattern

</pre>
<p> These are listed in the section <strong>Modifiers</strong> below.</p><p>These kinds of ignore patterns are available:</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Shell-like patterns</h2>
        <div class="sectioncontent">
<p>These must start with ./, just like a base-directory-relative path. ? , * as well as character classes [a-z] have their usual meaning, and ** is a wildcard for directory levels.</p><p>You can use a backslash &#92; outside of character classes to match some common special characters literally, eg. &#92;* within a pattern will match a literal asterisk character within a file or directory name. Within character classes all characters except ] are treated literally. If a literal ] should be included in a character class, it can be placed as the first character or also be escaped using a backslash.</p><p>Example for / as the base-directory</p>
<pre>
     ./[oa]pt
     ./sys
     ./proc/*
     ./home/**~

</pre>
<p>This would ignore files and directories called apt or opt in the root directory (and files below, in the case of a directory), the directory /sys and everything below, the contents of /proc (but take the directory itself, so that upon restore it gets created as a mountpoint), and all entries matching *~ in and below /home .</p><p><strong>Note:</strong></p><p>The patterns are anchored at the beginning and the end. So a pattern ./sys will match <strong>only</strong> a file or directory named sys<strong>. If you want to exclude a directories' files, but not the directory itself, use something like ./dir/*</strong> or ./dir/**<strong></strong></p><p>If you're deep within your working copy and you'd like to ignore some files with a WC-relative ignore pattern, you might like to use the <strong>rel-ignore</strong> command.</p><h3>Absolute shell patterns</h3>
<p>There is another way to specify shell patterns - using absolute paths.</p><p> The syntax is similar to normal shell patterns; but instead of the ./ prefix the full path, starting with /, is used.</p>
<pre>
         /etc/**.dpkg-old
         /etc/**.dpkg-bak
         /**.bak
         /**~
</pre>
<p>The advantage of using full paths is that a later dump and load in another working copy (eg. when moving from versioning /etc to /) does simply work; the patterns don't have to be modified.</p><p>Internally this simply tries to remove the working copy base directory at the start of the patterns (on loading); then they are processed as usual.</p><p>If a pattern does <strong>not</strong> match the wc base, and neither has the wild-wildcard prefix /**<strong>, a </strong><strong>warning</strong><strong> is issued.</strong></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PCRE-patterns</h2>
        <div class="sectioncontent">
<p>PCRE stands for Perl Compatible Regular Expressions; you can read about them with man pcre (if the manpages are installed), and/or perldoc perlre (if perldoc is installed).</p><p> If both fail for you, just google it.</p><p>These patterns have the form PCRE:{pattern}, with PCRE in uppercase.</p><p>An example:</p>
<pre>
     PCRE:./home/.*~

</pre>
<p> This one achieves exactly the same as ./home/**~ .</p><p>Another example:</p>
<pre>
     PCRE:./home/[a-s]

</pre>
<p>This would match /home/anthony , /home/guest , /home/somebody and so on, but would not match /home/theodore .</p><p>One more:</p>
<pre>
     PCRE:./.*(.(tmp|bak|sik|old|dpkg-\w+)|~)$

</pre>
<p>Note that the pathnames start with ./ , just like above, and that the patterns are anchored at the beginning. To additionally anchor at the end you could use a $ at the end.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Ignoring all files on a device</h2>
        <div class="sectioncontent">
<p>Another form to discern what is needed and what not is possible with DEVICE:[&lt;|&lt;=|&gt;|&gt;=]major[:minor].</p><p>This takes advantage of the major and minor device numbers of inodes (see man 1 stat and man 2 stat).</p><p>The rule is as follows:</p><ul>
<li><p>Directories have their parent matched against the given string</p></li><li><p>All other entries have their own device matched.</p></li>
</ul><p>This is because mount-points (ie. directories where other filesystems get attached) show the device of the mounted device, but should be versioned (as they are needed after restore); all entries (and all binding mounts) below should not.</p><p>The possible options &lt;= or &gt;= define a less-or-equal-than respective bigger-or-equal-than relationship, to ignore a set of device classes.</p><p>Examples:</p>
<pre>
     tDEVICE:3
     ./*

</pre>
<p> This patterns would define that all filesystems on IDE-devices (with major number 3) are <em>taken</em> , and all other files are ignored.</p>
<pre>
    DEVICE:0
</pre>
<p> This would ignore all filesystems with major number 0 - in linux these are the <em>virtual</em> filesystems ( proc<em> , sysfs</em> , devpts<em> , etc.; see /proc/filesystems</em> , the lines with nodev<em> ).</em></p><p>Mind NFS and smb-mounts, check if you're using <em>md</em> , <em>lvm</em> and/or <em>device-mapper</em> !</p><p>Note: The values are parsed with strtoul() , so you can use decimal, hexadecimal (by prepending '0x', like '0x102') and octal ('0', like '0777') notation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Ignoring a single file, by inode</h2>
        <div class="sectioncontent">
<p>At last, another form to ignore entries is to specify them via the device they are on and their inode:</p>
<pre>
     INODE:major:minor:inode

</pre>
<p> This can be used if a file can be hardlinked to many places, but only one copy should be stored. Then one path can be marked as to <em>take</em> , and other instances can get ignored.</p><p><strong>Note:</strong></p><p>That's probably a bad example. There should be a better mechanism for handling hardlinks, but that needs some help from subversion.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Modifiers</h2>
        <div class="sectioncontent">
<p>All of these patterns can have one or more of these modifiers <strong>before</strong> them, with (currently) optional ','<strong> as separators; not all combinations make sense.</strong></p><p>For patterns with the m (mode match) or d (dironly) modifiers the filename pattern gets optional; so you don't have to give an all-match wildcard pattern (./**) for these cases.</p><h3>'take': Take pattern</h3>
<p>This modifier is just a short-hand for assigning the group <strong>take</strong>.</p>
<h3>'ignore': Ignore pattern</h3>
<p>This modifier is just a short-hand for assigning the group <strong>ignore</strong>.</p>
<h3>'insens' or 'nocase': Case insensitive</h3>
<p>With this modifier you can force the match to be case-insensitive; this can be useful if other machines use eg. samba to access files, and you cannot be sure about them leaving '.BAK' or '.bak' behind.</p>
<h3>'dironly': Match only directories</h3>
<p>This is useful if you have a directory tree in which only certain files should be taken; see below.</p>
<h3>'mode': Match entries' mode</h3>
<p>This expects a specification of two octal values in the form m:<em>and_value</em>:<em>compare_value</em><em>, like m:04:00</em>; the bits set in and_value<em> get isolated from the entries' mode, and compared against compare_value</em>.</p><p>As an example: the file has mode 0750; a specification of</p><ul>
<li><p>m:0700:0700 matches,</p></li><li><p>m:0700:0500 doesn't; and</p></li><li><p>m:0007:0000 matches, but</p></li><li><p>m:0007:0007 doesn't.</p></li>
</ul><p>A real-world example: m:0007:0000 would match all entries that have <strong>no</strong> right bits set for <em>'others'</em>, and could be used to exclude private files (like /etc/shadow<em>). (Alternatively, the </em><em>others-read</em><em> bit could be used: m:0004:0000</em><em>.</em></p><p>FSVS will reject invalid specifications, ie. when bits in compare_value are set that are cleared in and_value: these patterns can never match.</p><p> An example would be m:0700:0007.</p>
<h3>Examples</h3>

<pre>
     take,dironly,./var/vmail/**
     take,./var/vmail/**/.*.sieve
     ./var/vmail/**
</pre>
<p> This would take all '.*.sieve' files (or directories) below /var/vmail, in all depths, and all directories there; but no other files.</p><p>If your files are at a certain depth, and you don't want all other directories taken, too, you can specify that exactly:</p>
<pre>
     take,dironly,./var/vmail/*
     take,dironly,./var/vmail/*/*
     take,./var/vmail/*/*/.*.sieve
     ./var/vmail/**

</pre>

<pre>
     mode:04:0
     take,./etc/
     ./**
</pre>
<p> This would take all files from /etc, but ignoring the files that are not world-readable (other-read bit cleared); this way only 'public' files would get taken.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Author</h2>
        <div class="sectioncontent">
<p>Generated automatically by Doxygen for fsvs from the source code.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fstab.5.html"><span aria-hidden="true">&larr;</span> fstab.5: Static information about the filesystems</a></li>
   <li class="next"><a href="fsvs-howto-backup.5.html">fsvs-howto-backup.5: This document is a step-by-step explanation how to do backups using fsvs. this document is a step-by-step explanation how to do backups using fsvs. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
