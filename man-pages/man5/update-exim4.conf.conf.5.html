<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>update-exim4.conf.conf: Generate exim4 configuration files.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Generate exim4 configuration files.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="update-exim4.conf.conf (5) manual">
  <meta name="twitter:description" content="Generate exim4 configuration files.">
  <meta name="twitter:image" content="https://www.carta.tech/images/exim4-config-update-exim4.conf.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/update-exim4.conf.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="update-exim4.conf.conf (5) manual" />
  <meta property="og:description" content="Generate exim4 configuration files." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/exim4-config-update-exim4.conf.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">update-exim4.conf.conf<small> (5)</small></h1>
        <p class="lead">Generate exim4 configuration files.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/update-exim4.conf.conf.5.html">
      <span itemprop="name">update-exim4.conf.conf: Generate exim4 configuration files.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/exim4-config/">
      <span itemprop="name">exim4-config</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/update-exim4.conf.conf.5.html">
      <span itemprop="name">update-exim4.conf.conf: Generate exim4 configuration files.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>update-exim4.conf [-v|--verbose] [-h|--help] [--keepcomments] [--removecomments] [-o|--output file]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>-v|--verbose</em></p>
  </dt>
  <dd>
    <p>Enable verbose mode</p>
  </dd>
  <dt>
    <p><em>-h|--help</em></p>
  </dt>
  <dd>
    <p>Show short help message and exit</p>
  </dd>
  <dt>
    <p><em>--keepcomments</em></p>
  </dt>
  <dd>
    <p>Do not remove comment lines from the output file.</p>
  </dd>
  <dt>
    <p><em>--removecomments</em></p>
  </dt>
  <dd>
    <p>Remove comment lines from the output file. [Default]</p>
  </dd>
  <dt>
    <p><em>-o|--output file</em></p>
  </dt>
  <dd>
    <p>Write output to file instead of /var/lib/exim4/config.autogenerated.</p>
  </dd>
  <dt>
    <p><em>-d|--confdir directory</em></p>
  </dt>
  <dd>
    <p>Read input from directory instead of /etc/exim4.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The script <strong>update-exim4.conf</strong> generates the main configuration files <em>/var/lib/exim4/config.autogenerated</em> for <strong>Exim v4</strong> by merging the data in the template file <em>/etc/exim4/exim4.conf.template</em> or the ones in the <em>/etc/exim4/conf.d</em> directory tree respectively and <em>/etc/exim4/update-exim4.conf.conf</em> to the output file <em>/var/lib/exim4/config.autogenerated.</em></p><p>If dc_use_split_config in /etc/exim4/update-exim4.conf.conf specifies a split configuration, <strong>update-exim4.conf</strong> processes the /etc/exim4/conf.d subdirectories in the order main, acl, router, transport, retry, rewrite and auth. Within each directory it takes files in lexical sort order by file name. It concatenates all these files and makes the debconf replacement described below.</p><p>If you are not using split configuration <strong>update-exim4.conf</strong> concatenates /etc/exim4/exim4.conf.localmacros (if this file exists) and /etc/exim4/exim4.conf.template (in this order) and makes the debconf replacement described below.</p><p>In either case, before outputting the result to /var/lib/exim4/config.autogenerated, <strong>update-exim4.conf</strong> generates a number of exim configuration macros from the contents of dc_something from /etc/exim4/update-exim4.conf.conf and inserts them into the configuration right after the definition of the exim configuration macro UPEX4CmacrosUPEX4C (which is only used as placeholder for this case). The macro definitions are bracketed with .ifdef clauses to allow the local admin to override the values with earlier definitions. <strong>update-exim4.conf</strong> makes no other changes to the configuration. This makes it very simple to make small changes to the configuration and still have the benefits of debconf.</p><p>On the other hand if you don't want to manage exim4.conf with debconf install your own handcrafted version as /etc/exim4/exim4.conf. Exim will use this file if it exists and ignore the autogenerated one. Additionally you might want to set <em>dc_eximconfig_configtype=none</em> in /etc/exim4/update-exim4.conf.conf to stop debconf from asking you questions about exim4.</p><p><strong>update-exim4.conf</strong> exits silently and does nothing if /etc/exim4/exim4.conf exists and -o was not used to direct the output to a different file than /var/lib/exim4/config.autogenerated.</p><p><strong>update-exim4.conf</strong> will only use files in the conf.d directory that have a filename which consists only of letters, numbers, underscores and hyphens ([:alnum:]_-), similar to <a href="../man8/run-parts.8.html"><strong>run-parts</strong>(8)</a>.</strong> Additionally, <strong>update-exim4.conf</strong> will use /etc/exim4/conf.d/foo/bar.rul instead of /etc/exim4/conf.d/foo/bar if the .rul file exists. This is meant to be helpful for easy interaction with packages extending Exim.</p><p>If the new configuration will be written to /var/lib/exim4/config.autogenerated, <strong>update-exim4.conf</strong> will check the validity of the freshly generated configuration. If the new file is detected as invalid, update-exim4.conf leaves the old /var/lib/exim4/config.autogenerated untouched and exits with an error.</p><p>However, there are still possible invalidities that can only be detected at run time. This most notably applies to errors in expressions that are expanded at run time.</p><p>If the new configuration will be written to some other file, no validity checking occurs and that file will always be overwritten.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>You want to be able to check exim's queue as normal user: Generate a new file, e.g. /etc/exim4/conf.d/main/40_local_mailq, containing only the line <em>queue_list_requires_admin = false</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><strong>update-exim4.conf</strong> changes the file permissions of the output file to the value of the environment variable CFILEMODE. If CFILEMODE is neither set in /etc/exim4/update-exim4.conf.conf nor in the environment it defaults to 0644. Change this to 0640 if you are keeping sensitive information (LDAP credentials et. al.) in there.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION VARIABLES</h2>
        <div class="sectioncontent">
<p>All lists given in configuration variables are semicolon-separated. In the past, they used to be colon separated. This was changed to semicolon separation to make specification of IPv6 addresses easier. Backwards compatibility is preserved, so that old configurations using colons as separators do still work. Colons are deprecated and might stop working in a later release. If you need to specifiy a single IPv6 address in a field that is defined as a list of host names or IP addresses, please prefix "&lt;;" to explicitly specify the list separator as a semicolon. Otherwise, the code cannot tell an IP address from a colon-separated list of strange host names.</p><p>Using lookups like "dsearch;something" in update-exim4.conf.conf has never been supported and does no longer work! If you need this, please convert to directly setting the appropriate macros.</p><p><strong>update-exim4.conf</strong> evaluates these patterns in <strong>/etc/exim4/update-exim4.conf.conf:</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><em>CFILEMODE</em></p>
  </dt>
  <dd>
    <p>The octal file mode of the generated file.</p>
  </dd>
  <dt>
    <p><em>dc_eximconfig_configtype</em></p>
  </dt>
  <dd>
    <p>The main configuration type. Sets macro DC_eximconfig_configtype. The macro usually contains a shorthand for one of the choices for the &ldquo;General type of mail configuration&rdquo; debconf question (See README.Debian).</p><p><strong>dc_eximconfig_configtype &lt;-&gt; debconf configtype mapping:</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p>&ldquo;internet&rdquo;</p>
  </dt>
  <dd>
    <p>internet site; mail is sent and received directly using SMTP</p>
  </dd>
  <dt>
    <p>&ldquo;smarthost&rdquo;</p>
  </dt>
  <dd>
    <p>mail sent by smarthost; received via SMTP or fetchmail</p>
  </dd>
  <dt>
    <p>&ldquo;satellite&rdquo;</p>
  </dt>
  <dd>
    <p>mail sent by smarthost; no local mail</p>
  </dd>
  <dt>
    <p>&ldquo;local&rdquo;</p>
  </dt>
  <dd>
    <p>local delivery only; not on a network</p>
  </dd>
  <dt>
    <p>&ldquo;none&rdquo;</p>
  </dt>
  <dd>
    <p>no configuration at this time</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><em>dc_hide_mailname</em></p>
  </dt>
  <dd>
    <p>Boolean option that controls whether the local mailname in the headers of outgoing mail should be hidden. (Only effective for &ldquo;smarthost&rdquo; and &ldquo;satellite&rdquo;. Sets macro HIDE_MAILNAME.</p>
  </dd>
  <dt>
    <p><em>dc_mailname_in_oh</em></p>
  </dt>
  <dd>
    <p>Internal use only Boolean option that is set by the maintainer scripts after adding the contents of /etc/mailname to the dc_other_hostnames list. This is a transition helper since it wouldn't otherwise be possible to see whether that domain name has been removed from dc_other_hostnames on purpose. This is not used by update-exim4.conf, and no macro is set.</p>
  </dd>
  <dt>
    <p><em>ue4c_keepcomments</em></p>
  </dt>
  <dd>
    <p>Boolean option that controls whether <strong>update-exim4.conf</strong> strips the comments from the target configuration file (default) or leaves them in. This can be overridden by the command line options --keepcomments and --removecomments. The value is not written to an exim macro.</p>
  </dd>
  <dt>
    <p><em>dc_localdelivery</em></p>
  </dt>
  <dd>
    <p>name of the default transport for local mail delivery. Defaults to mail_spool if unset, use maildir_home for delivery to ~/Maildir/. Sets macro LOCAL_DELIVERY.</p>
  </dd>
  <dt>
    <p><em>dc_local_interfaces</em></p>
  </dt>
  <dd>
    <p>List of IP addresses the Exim daemon should listen on. If this is left empty, Exim listens on all interfaces. Sets macro MAIN_LOCAL_INTERFACES only if there is a non-empty value.</p>
  </dd>
  <dt>
    <p><em>dc_minimaldns</em></p>
  </dt>
  <dd>
    <p>Boolean option to activate some option to minimize DNS lookups, if set to &ldquo;true&rdquo; a macro DC_minimaldns is defined. If true, the macro DC_minimaldns is set to 1, and the macro MAIN_HARDCODE_PRIMARY_HOSTNAME is set to the appropriately post-processes output of hostname --fqdn.</p>
  </dd>
  <dt>
    <p><em>dc_other_hostnames</em></p>
  </dt>
  <dd>
    <p>is used to build the local_domains list, together with &ldquo;localhost&rdquo;. This is the list of domains for which this machine should consider itself the final destination. The local_domains list ends up in the macro MAIN_LOCAL_DOMAINS.</p>
  </dd>
  <dt>
    <p><em>dc_readhost</em></p>
  </dt>
  <dd>
    <p>For &ldquo;smarthost&rdquo; and &ldquo;satellite&rdquo; it is possible to hide the local mailname in the headers of outgoing mail and replace it with this value instead, using rewriting. For &ldquo;satellite&rdquo; only, this value is also the host to send local mail to. Sets macro DCreadhost.</p>
  </dd>
  <dt>
    <p><em>dc_relay_domains</em></p>
  </dt>
  <dd>
    <p>is a list of domains for which we accept mail from anywhere on the Internet but which are not delivered locally, e.g. because this machine serves as secondary MX for these domains. Sets MAIN_RELAY_TO_DOMAINS.</p>
  </dd>
  <dt>
    <p><em>dc_relay_nets</em></p>
  </dt>
  <dd>
    <p>A list of machines for which we serve as smarthost. Please note that 127.0.0.1 and ::1 are always permitted to relay since /usr/lib/sendmail is available anyway and relay control doesn't make sense here. Sets macro MAIN_RELAY_NETS.</p>
  </dd>
  <dt>
    <p><em>dc_smarthost</em></p>
  </dt>
  <dd>
    <p>List of hosts to which all outgoing mail is passed to and that takes care of delivering it. Each of the hosts is tried, in the order specified (See exim specification, chapter 20.5). All deliveries go out to TCP port 25 unless a different port is specified after the host name, separated from the host name by two colons. Colons in IPv6 addresses need to be doubled. If a port number follows, IP addresses may be enclosed in brackets, which might be the only possibility to specify delivery to an IPv6 address and a different port. Examples:</p><p><strong>host.domain.example</strong> deliver to host looked up on DNS, tcp/25</p><p><strong>host.domain.example::587</strong> deliver to host looked up on DNS, tcp/587</p><p><strong>192.168.2.4</strong> deliver to IPv4 host, tcp/25</p><p><strong>192.168.2.4::587</strong> deliver to IPv4 host, tcp/587</p><p><strong>[192.168.2.4]::587</strong> deliver to IPv4 host, tcp/587</p><p><strong>2001::0db8::f::4::::2</strong> deliver to IPv6 host, tcp/25</p><p><strong>[2001::0db8::f::4::::2]::587</strong> deliver to IPv6 host, tcp/587</p><p>This is used as value of the DCsmarthost macro.</p>
  </dd>
  <dt>
    <p><em>dc_use_split_config</em></p>
  </dt>
  <dd>
    <p>Boolean option that controls whether <strong>update-exim4.conf</strong> uses /etc/exim4/exim4.conf.template (&ldquo;false&rdquo;) or the multiple files below /etc/exim4/conf.d (&ldquo;true&rdquo;) as input. This does not set any macros.</p>
  </dd>
  <dt>
    <p><em>The macro MAIN_PACKAGE_VERSION is set to Debian's Version number of</em></p>
  </dt>
  <dd>
    <p>the package being installed for convenient inclusion in the configuration.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RECOMMENDED USAGE</h2>
        <div class="sectioncontent">
<p>If you are running exim as daemon (as it is in the default setup of the Debian packages) you should not invoke <strong>update-exim4.conf</strong> directly when exim is running. For SMTP receiving or queue running, exim forks, and the new processes would use the new configuration file, while the original main exim daemon would still use the old configuration file. You should use <em>invoke-rc.d exim4 restart</em> instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>This manual page needs a major re-work. If somebody knows better groff than us and has more experience in writing manual pages, any patches would be greatly appreciated.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/var/lib/exim4/config.autogenerated</strong></p>
  </dt>
  <dd>
    <p>Exim's main configuration file</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>/etc/exim4/exim4.conf</strong></p>
  </dt>
  <dd>
    <p>Optional manually managed Exim main configuration file. Takes precedence over debconf managed one if it exists.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>/etc/exim4/update-exim4.conf.conf</strong></p>
  </dt>
  <dd>
    <p>Configuration file being written by exim4-config maintainer scripts, which may be hand-edited, and is read as input by update-exim4.conf.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO update-exim4.conf.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/exim.8.html"><strong>exim</strong>(8)</a>, <a href="../man5/exim4-config_files.5.html"><strong>exim4-config_files</strong>(5)</a>,</strong> /usr/share/doc/exim4-base/ and for general notes and details about interaction with debconf /usr/share/doc/exim4-base/README.Debian.gz</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Andreas Metzler &lt;ametzler at downhill.at.eu.org&gt;</p><p>Marc Haber &lt;mh+debian-packages@zugschlus.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="up2date.5.html"><span aria-hidden="true">&larr;</span> up2date.5: Configuration file for red hat network client programs.</a></li>
   <li class="next"><a href="update-initramfs.conf.5.html">update-initramfs.conf.5: Configuration file for update-initramfs <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
