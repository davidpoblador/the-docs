<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mbox: Format for mail message storage.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Format for mail message storage.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mbox (5) manual">
  <meta name="twitter:description" content="Format for mail message storage.">
  <meta name="twitter:image" content="https://www.carta.tech/images/mutt-mbox-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/mbox.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mbox (5) manual" />
  <meta property="og:description" content="Format for mail message storage." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mutt-mbox-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mbox<small> (5)</small></h1>
        <p class="lead">Format for mail message storage.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/mbox.5.html">
      <span itemprop="name">mbox: Format for mail message storage.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mutt/">
      <span itemprop="name">mutt</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/mbox.5.html">
      <span itemprop="name">mbox: Format for mail message storage.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This document describes the format traditionally used by Unix hosts to store mail messages locally. <strong>mbox</strong> files typically reside in the system's mail spool, under various names in users' Mail directories, and under the name <strong>mbox</strong> in users' home directories.</p><p>An <strong>mbox</strong> is a text file containing an arbitrary number of e-mail messages. Each message consists of a postmark, followed by an e-mail message formatted according to <strong>RFC822</strong>, <strong>RFC2822</strong>. The file format is line-oriented. Lines are separated by line feed characters (ASCII 10).</p><p>A postmark line consists of the four characters "From", followed by a space character, followed by the message's envelope sender address, followed by whitespace, and followed by a time stamp. This line is often called From_ line.</p><p>The sender address is expected to be <strong>addr-spec</strong> as defined in <strong>RFC2822</strong> 3.4.1. The date is expected to be <strong>date-time</strong> as output by <a href="../man3/asctime.3.html"><strong>asctime</strong>(3)</a></strong>. For compatibility reasons with legacy software, two-digit years greater than or equal to 70 should be interpreted as the years 1970+, while two-digit years less than 70 should be interpreted as the years 2000-2069. Software reading files in this format should also be prepared to accept non-numeric timezone information such as "CET DST" for Central European Time, daylight saving time.</p><p>Example:</p><ul>
<li><p>&gt;From example@example.com Fri Jun 23 02:56:55 2000</p></li>
</ul><p>In order to avoid misinterpretation of lines in message bodies which begin with the four characters "From", followed by a space character, the mail delivery agent must quote any occurrence of "From " at the start of a body line.</p><p>There are two different quoting schemes, the first (<strong>MBOXO</strong>) only quotes plain "From " lines in the body by prepending a '&gt;' to the line; the second (<strong>MBOXRD</strong>) also quotes already quoted "From " lines by prepending a '&gt;' (i.e. "&gt;From ", "&gt;&gt;From ", ...). The later has the advantage that lines like</p><ul>
<li><p>&gt;From the command line you can use the '-p' option</p></li>
</ul><p>aren't dequoted wrongly as a <strong>MBOXRD</strong>-MDA would turn the line into</p><ul>
<li><p>&gt;&gt;From the command line you can use the '-p' option</p></li>
</ul><p>before storing it. Besides <strong>MBOXO</strong> and <strong>MBOXRD</strong> there is also <strong>MBOXCL</strong> which is <strong>MBOXO</strong> with a "Content-Length:"-field with the number of bytes in the message body; some MUAs (like <strong>mutt</strong>(1)) do automatically transform <strong>MBOXO</strong> mailboxes into <strong>MBOXCL</strong> ones when ever they write them back as <strong>MBOXCL</strong> can be read by any <strong>MBOXO</strong>-MUA without any problems.</p><p>If the modification-time (usually determined via <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a>) of a nonempty <strong>mbox</strong> file is greater than the access-time the file has new mail. Many MUAs place a Status: header in each message to indicate which messages have already been read.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOCKING</h2>
        <div class="sectioncontent">
<p>Since <strong>mbox</strong> files are frequently accessed by multiple programs in parallel, <strong>mbox</strong> files should generally not be accessed without locking.</p><p>Three different locking mechanisms (and combinations thereof) are in general use:</p>
<dl class='dl-vertical'>
  <dt>
    *
  </dt>
  <dd>
    <p><a href="../man2/fcntl.2.html"><strong>fcntl</strong>(2)</a> locking is mostly used on recent, POSIX-compliant systems. Use of this locking method is, in particular, advisable if <strong>mbox</strong> files are accessed through the Network File System (NFS), since it seems the only way to reliably invalidate NFS clients' caches.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><a href="../man2/flock.2.html"><strong>flock</strong>(2)</a> locking is mostly used on BSD-based systems.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p>Dotlocking is used on all kinds of systems. In order to lock an <strong>mbox</strong> file named <em>folder</em>, an application first creates a temporary file with a unique name in the directory in which the <em>folder</em> resides. The application then tries to use the <a href="../man2/link.2.html"><strong>link</strong>(2)</a> system call to create a hard link named <em>folder.lock</em> to the temporary file. The success of the <a href="../man2/link.2.html"><strong>link</strong>(2)</a> system call should be additionally verified using <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a> calls. If the link has succeeded, the mail folder is considered dotlocked. The temporary file can then safely be unlinked.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>In order to release the lock, an application just unlinks the <em>folder.lock</em> file.</p>
  </dd>

</dl>
<p>If multiple methods are combined, implementors should make sure to use the non-blocking variants of the <a href="../man2/fcntl.2.html"><strong>fcntl</strong>(2)</a> and <a href="../man2/flock.2.html"><strong>flock</strong>(2)</a> system calls in order to avoid deadlocks.</p><p>If multiple methods are combined, an <strong>mbox</strong> file must not be considered to have been successfully locked before all individual locks were obtained. When one of the individual locking methods fails, an application should release all locks it acquired successfully, and restart the entire locking procedure from the beginning, after a suitable delay.</p><p>The locking mechanism used on a particular system is a matter of local policy, and should be consistently used by all applications installed on the system which access <strong>mbox</strong> files. Failure to do so may result in loss of e-mail data, and in corrupted <strong>mbox</strong> files.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/var/spool/mail/$LOGNAME</em></p><p><strong>$LOGNAME</strong>'s incoming mail folder.</p><p><em>$HOME/mbox</em></p><p>user's archived mail messages, in his <strong>$HOME</strong> directory.</p><p><em>$HOME/Mail/</em></p><p>A directory in user's <strong>$HOME</strong> directory which is commonly used to hold <strong>mbox</strong> format folders.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mbox&hellip;</h2>
        <div class="sectioncontent">
<p><strong>mutt</strong>(1), <a href="../man2/fcntl.2.html"><strong>fcntl</strong>(2)</a>, <a href="../man2/flock.2.html"><strong>flock</strong>(2)</a>, <a href="../man2/link.2.html"><strong>link</strong>(2)</a>, <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a>, <a href="../man3/asctime.3.html"><strong>asctime</strong>(3)</a>, <a href="../man5/maildir.5.html"><strong>maildir</strong>(5)</a>, <a href="../man5/mmdf.5.html"><strong>mmdf</strong>(5)</a>, <strong>RFC822</strong>, <strong>RFC976</strong>, <strong>RFC2822</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Thomas Roessler &lt;roessler@does-not-exist.org&gt;, Urs Janssen &lt;urs@tin.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>The <strong>mbox</strong> format occurred in Version 6 AT&T Unix.</p><p>A variant of this format was documented in <strong>RFC976</strong>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="matrix.conf.5.html"><span aria-hidden="true">&larr;</span> matrix.conf.5: Matrix.pl configuration file</a></li>
   <li class="next"><a href="mdadm.conf.5.html">mdadm.conf.5: Configuration for management of software raid with mdadm <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
