<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shorewall6-nesting: Shorewall6 nested zones</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shorewall6 nested zones">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shorewall6-nesting (5) manual">
  <meta name="twitter:description" content="Shorewall6 nested zones">
  <meta name="twitter:image" content="https://www.carta.tech/images/shorewall6-shorewall6-nesting-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/shorewall6-nesting.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shorewall6-nesting (5) manual" />
  <meta property="og:description" content="Shorewall6 nested zones" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/shorewall6-shorewall6-nesting-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shorewall6-nesting<small> (5)</small></h1>
        <p class="lead">Shorewall6 nested zones</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/shorewall6-nesting.5.html">
      <span itemprop="name">shorewall6-nesting: Shorewall6 nested zones</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/shorewall6/">
      <span itemprop="name">shorewall6</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/shorewall6-nesting.5.html">
      <span itemprop="name">shorewall6-nesting: Shorewall6 nested zones</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><em>child-zone</em>[:<em>parent-zone</em>[,<em>parent-zone</em>]...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>In \m[blue]<strong>shorewall6-zones</strong>\m[]\s-2\u[1]\d\s+2(5), a zone may be declared to be a sub-zone of one or more other zones using the above syntax. The <em>child-zone</em> may be neither the firewall zone nor a vserver zone. The firewall zone may not appear as a parent zone, although all vserver zones are handled as sub-zones of the firewall zone.</p><p>Where zones are nested, the CONTINUE policy in \m[blue]<strong>shorewall6-policy</strong>\m[]\s-2\u[2]\d\s+2(5) allows hosts that are within multiple zones to be managed under the rules of all of these zones.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>/etc/shorewall6/zones:</p>
<pre>
        #ZONE    TYPE        OPTION
        fw       firewall
        net      ipv6
        sam:net  ipv6
        loc      ipv6
</pre>
<p>/etc/shorewall6/interfaces:</p>
<pre>
        #ZONE     INTERFACE     BROADCAST     OPTIONS
        -         eth0          detect        blacklist
        loc       eth1          detect
</pre>
<p>/etc/shorewall6/hosts:</p>
<pre>
        #ZONE     HOST(S)                     OPTIONS
        net       eth0:[::&#92;]
        sam       eth0:[2001:19f0:feee::dead:beef:cafe]
</pre>
<p>/etc/shorewall6/policy:</p>
<pre>
        #SOURCE      DEST        POLICY       LOG LEVEL
        loc          net         ACCEPT
        sam          all         CONTINUE
        net          all         DROP         info
        all          all         REJECT       info
</pre>
<p>The second entry above says that when Sam is the client, connection requests should first be processed under rules where the source zone is sam and if there is no match then the connection request should be treated under rules where the source zone is net. It is important that this policy be listed BEFORE the next policy (net to all). You can have this policy generated for you automatically by using the IMPLICIT_CONTINUE option in \m[blue]<strong>shorewall6.conf</strong>\m[]\s-2\u[3]\d\s+2(5).</p><p>Partial /etc/shorewall6/rules:</p>
<pre>
        #ACTION   SOURCE    DEST                  PROTO    DEST PORT(S)
        ...
        ACCEPT    sam       loc:2001:19f0:feee::3 tcp      ssh
        ACCEPT    net       loc:2001:19f0:feee::5 tcp      www
        ...
</pre>
<p>Given these two rules, Sam can connect with ssh to 2001:19f0:feee::3. Like all hosts in the net zone, Sam can connect to TCP port 80 on 2001:19f0:feee::5. The order of the rules is not significant.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/shorewall6/zones</p><p>/etc/shorewall6/interfaces</p><p>/etc/shorewall6/hosts</p><p>/etc/shorewall6/policy</p><p>/etc/shorewall6/rules</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO shorewall6-nesting&hellip;</h2>
        <div class="sectioncontent">
<p><strong>shorewall6</strong>(8), <a href="../man5/shorewall6-accounting.5.html"><strong>shorewall6-accounting</strong>(5)</a>, <a href="../man5/shorewall6-actions.5.html"><strong>shorewall6-actions</strong>(5)</a>, <a href="../man5/shorewall6-blacklist.5.html"><strong>shorewall6-blacklist</strong>(5)</a>, <a href="../man5/shorewall6-hosts.5.html"><strong>shorewall6-hosts</strong>(5)</a>, <a href="../man5/shorewall6-interfaces.5.html"><strong>shorewall6-interfaces</strong>(5)</a>, <a href="../man5/shorewall6-maclist.5.html"><strong>shorewall6-maclist</strong>(5)</a>, <a href="../man5/shorewall6-netmap.5.html"><strong>shorewall6-netmap</strong>(5)</a>,<a href="../man5/shorewall6-params.5.html"><strong>shorewall6-params</strong>(5)</a>, <a href="../man5/shorewall6-policy.5.html"><strong>shorewall6-policy</strong>(5)</a>, <a href="../man5/shorewall6-providers.5.html"><strong>shorewall6-providers</strong>(5)</a>, <a href="../man5/shorewall6-rtrules.5.html"><strong>shorewall6-rtrules</strong>(5)</a>, <a href="../man5/shorewall6-routestopped.5.html"><strong>shorewall6-routestopped</strong>(5)</a>, <a href="../man5/shorewall6-rules.5.html"><strong>shorewall6-rules</strong>(5)</a>, <a href="../man5/shorewall6.conf.5.html"><strong>shorewall6.conf</strong>(5)</a>, <a href="../man5/shorewall6-secmarks.5.html"><strong>shorewall6-secmarks</strong>(5)</a>, <a href="../man5/shorewall6-tcclasses.5.html"><strong>shorewall6-tcclasses</strong>(5)</a>, <a href="../man5/shorewall6-tcdevices.5.html"><strong>shorewall6-tcdevices</strong>(5)</a>, <a href="../man5/shorewall6-mangle.5.html"><strong>shorewall6-mangle</strong>(5)</a>, <a href="../man5/shorewall6-tos.5.html"><strong>shorewall6-tos</strong>(5)</a>, <a href="../man5/shorewall6-tunnels.5.html"><strong>shorewall6-tunnels</strong>(5)</a>, <a href="../man5/shorewall6-zones.5.html"><strong>shorewall6-zones</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>shorewall6-zones</p><p>http://www.shorewall.net/manpages6/shorewall6-zones.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>shorewall6-policy</p><p>http://www.shorewall.net/manpages6/shorewall6-policy.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>shorewall6.conf</p><p>http://www.shorewall.net/manpages6/shorewall6.conf.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="shorewall6-nat.5.html"><span aria-hidden="true">&larr;</span> shorewall6-nat.5: Shorewall6 one-to-one nat file</a></li>
   <li class="next"><a href="shorewall6-netmap.5.html">shorewall6-netmap.5: Shorewall6 netmap definition file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
