<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>kernel-package: System for creating kernel related packages</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="System for creating kernel related packages">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="kernel-package (5) manual">
  <meta name="twitter:description" content="System for creating kernel related packages">
  <meta name="twitter:image" content="https://www.carta.tech/images/kernel-package-kernel-package-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/kernel-package.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="kernel-package (5) manual" />
  <meta property="og:description" content="System for creating kernel related packages" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/kernel-package-kernel-package-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">kernel-package<small> (5)</small></h1>
        <p class="lead">System for creating kernel related packages</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/kernel-package.5.html">
      <span itemprop="name">kernel-package: System for creating kernel related packages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/kernel-package/">
      <span itemprop="name">kernel-package</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/kernel-package.5.html">
      <span itemprop="name">kernel-package: System for creating kernel related packages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>kernel-package</strong> package grew out of desire to automate the routine steps required to compile and install a custom kernel. If you are looking for instructions on how to use <strong>kernel-package</strong>, please have a look at the manual <a href="../man1/make-kpkg.1.html"><strong>make-kpkg</strong>(1)</a>. Configuring instructions are to be found in <a href="../man5/kernel-pkg.conf.5.html"><strong>kernel-pkg.conf</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Advantages of using kernel-package</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>i) Convenience.</strong></p>
  </dt>
  <dd>
    <p>I used to compile kernels manually, and it involved a series of steps to be taken in order; kernel-package was written to take all the required steps (it has grown beyond that now, but essentially, that is what it does). This is especially important to novices: <strong>make-kpkg</strong> takes all the steps required to compile a kernel, and installation of kernels is a snap.</p>
  </dd>
  <dt>
    <p><strong>ii) Multiple images support</strong></p>
  </dt>
  <dd>
    <p>It allows you to keep multiple version of kernel images on your machine with no fuss.</p>
  </dd>
  <dt>
    <p><strong>iii) Multiple Flavors of the same kernel version</strong></p>
  </dt>
  <dd>
    <p>It has a facility for you to keep multiple flavors of the same kernel version on your machine (you could have a stable 2.0.36 version, and a 2.0.36 version patched with the latest drivers, and not worry about contaminating the modules in <em>/lib/modules</em>).</p>
  </dd>
  <dt>
    <p><strong>iv) Built in defaults</strong></p>
  </dt>
  <dd>
    <p>It knows that some architectures do not have vmlinuz (using vmlinux instead), and other use zImage rather than bzImage, and calls the appropriate target, and takes care of moving the correct file into place.</p>
  </dd>
  <dt>
    <p><strong>v) Module hooks</strong></p>
  </dt>
  <dd>
    <p>Several other kernel module packages are hooked into <strong>kernel-package,</strong> so one can seamlessly compile, say, <strong>pcmcia</strong> modules at the same time as one compiles a kernel, and be assured that the modules so compiled are compatible.</p>
  </dd>
  <dt>
    <p><strong>vi) dpkg support</strong></p>
  </dt>
  <dd>
    <p>It enables you to use the package management system to keep track of the kernels created. Using make-kpkg creates a .deb file, and dpkg can track it for you. This facilitates the task of other packages that depend on the kernel packages.</p>
  </dd>
  <dt>
    <p><strong>vii) Configuration tracking</strong></p>
  </dt>
  <dd>
    <p>It keeps track of the configuration file for each kernel image in <em>/boot</em>, which is part of the image package, and hence is the kernel image and the configuration file are always together.</p>
  </dd>
  <dt>
    <p><strong>viii) Multiple config files</strong></p>
  </dt>
  <dd>
    <p>It allows you to specify a directory with config files, with separate config files for each sub-architecture (even allows for different config files for i386, i486, etc). It is really neat for people who need to compile kernels for a variety of sub architectures.</p>
  </dd>
  <dt>
    <p><strong>ix) Auxiliary kernel .deb packages</strong></p>
  </dt>
  <dd>
    <p>It allows one to create a package with the headers, or the sources, also as a deb file, and enables the package management system to keep track of those (and there are packages that depend on the package management system being aware of these packages).</p>
  </dd>
  <dt>
    <p><strong>x) Maintainer script services</strong></p>
  </dt>
  <dd>
    <p>Since the kernel image package is a full fledged Debian package, it comes with maintainer scripts, which allow the user to add hook scripts to run when the package status changes.</p>
  </dd>
  <dt>
    <p><strong>xi) Sub architecture support</strong></p>
  </dt>
  <dd>
    <p>There is support for the multitudinous sub architectures that have blossomed under the umbrella of the m68k and power-PC architectures.</p>
  </dd>
  <dt>
    <p><strong>xii) Portable kernel images</strong></p>
  </dt>
  <dd>
    <p>Allows one to compile a kernel for another computer, for example using a fast machine to compile the kernel for installation on a slower machine. This is really nice since the modules are all included in the .deb; and one does not have to deal with modules manually.</p>
  </dd>
  <dt>
    <p><strong>xiii) runtime hooks</strong></p>
  </dt>
  <dd>
    <p>The preinst, postinst, prerm and the postrm scripts allow the local admin on the installation machine to add a script into runtime hooks; this can allow, amongst other things, grub users to add and remove kernel image stanzas from the grub menu (example scripts to do this are in the package). There are directories under <em>/etc/kernel</em> where related packages may drop off scripts that will be run by the maintainer scripts of the packages created by kernel package. Before running these scripts, the environment variable <strong>KERNEL_PACKAGE_VERSION</strong> shall be set to the version of the kernel-package that created the package.</p>
  </dd>
  <dt>
    <p><strong>xiv) Append descriptive bits to the kernel version</strong></p>
  </dt>
  <dd>
    <p>One can append to the kernel version on the command line, or by setting an environment variable. So if your kernel is called kernel-image-2.4.1John.Home; it is unlikely to be overridden by the official 2.4.1 kernel, since they are not the same version.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Disadvantages of using make-kpkg</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>i) Automation.</strong></p>
  </dt>
  <dd>
    <p>This is a cookie cutter approach to compiling kernels, and there are people who like being close to the bare metal.</p>
  </dd>
  <dt>
    <p><strong>ii) Non traditional</strong></p>
  </dt>
  <dd>
    <p>This is not how it is done in the non-Debian world. This flouts tradition. (It has been pointed out, though, that this is fast becoming Debian tradition).</p>
  </dd>
  <dt>
    <p><strong>iii) Needs superuser</strong></p>
  </dt>
  <dd>
    <p>It forces you to use <strong>fakeroot</strong> or <strong>sudo</strong> or <strong>super</strong> or be root to create a kernel image .deb file (this is not as bad as it used to be before <strong>fakeroot</strong>).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/kernel-pkg.conf</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>/etc/kernel-img.conf</em></p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO kernel-package&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/make.1.html"><strong>make</strong>(1)</a>, <a href="../man1/make-kpkg.1.html"><strong>make-kpkg</strong>(1)</a>, <strong>The GNU Make manual</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>There are no bugs.  Any resemblance thereof is delirium. Really.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Manoj Srivastava &lt;srivasta@debian.org&gt;, for the Debian GNU/Linux system.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="kernel-img.conf.5.html"><span aria-hidden="true">&larr;</span> kernel-img.conf.5: Site wide configuration file for kernel image packages</a></li>
   <li class="next"><a href="kernel-pkg.conf.5.html">kernel-pkg.conf.5: Configuration file for make-kpkg <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
