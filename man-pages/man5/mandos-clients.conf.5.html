<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mandos-clients.conf: Configuration file for the mandos server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file for the mandos server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mandos-clients.conf (5) manual">
  <meta name="twitter:description" content="Configuration file for the mandos server">
  <meta name="twitter:image" content="https://www.carta.tech/images/mandos-mandos-clients.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/mandos-clients.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mandos-clients.conf (5) manual" />
  <meta property="og:description" content="Configuration file for the mandos server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mandos-mandos-clients.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mandos-clients.conf<small> (5)</small></h1>
        <p class="lead">Configuration file for the mandos server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/mandos-clients.conf.5.html">
      <span itemprop="name">mandos-clients.conf: Configuration file for the mandos server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mandos/">
      <span itemprop="name">mandos</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/mandos-clients.conf.5.html">
      <span itemprop="name">mandos-clients.conf: Configuration file for the mandos server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
/etc/mandos/clients.conf
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The file /etc/mandos/clients.conf is a configuration file for <strong>mandos</strong>(8), read by it at startup. The file needs to list all clients that should be able to use the service. The settings in this file can be overridden by runtime changes to the server, which it saves across restarts. (See the section called &ldquo;PERSISTENT STATE&rdquo; in <strong>mandos</strong>(8).) However, any <em>changes</em> to this file (including adding and removing clients) will, at startup, override changes done during runtime.</p><p>The format starts with a [<em>section header</em>] which is either [DEFAULT] or [<em>client name</em>]. The <em>client name</em> can be anything, and is not tied to a host name. Following the section header is any number of &ldquo;<em></em><em>option</em>=<em>value</em>&rdquo; entries, with continuations in the style of RFC 822. &ldquo;<em></em><em>option</em>: <em>value</em>&rdquo; is also accepted. Note that leading whitespace is removed from values. Values can contain format strings which refer to other values in the same section, or values in the &ldquo;DEFAULT&rdquo; section (see the section called &ldquo;EXPANSION&rdquo;). Lines beginning with &ldquo;#&rdquo; or &ldquo;;&rdquo; are ignored and may be used to provide comments.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><em>Note:</em> all option values are subject to start time expansion, see the section called &ldquo;EXPANSION&rdquo;.</p><p>Unknown options are ignored. The used options are as follows:</p><p><strong>approval_delay</strong><strong> = </strong><strong></strong><em>TIME</em></p><p>This option is <em>optional</em>.</p><p>How long to wait for external approval before resorting to use the <strong>approved_by_default</strong> value. The default is &ldquo;PT0S&rdquo;, i.e. not to wait.</p><p>The format of <em>TIME</em> is the same as for <em>timeout</em> below.</p><p><strong>approval_duration</strong><strong> = </strong><strong></strong><em>TIME</em></p><p>This option is <em>optional</em>.</p><p>How long an external approval lasts. The default is 1 second.</p><p>The format of <em>TIME</em> is the same as for <em>timeout</em> below.</p><p><strong>approved_by_default</strong><strong> = </strong><strong>{ </strong><strong>1</strong><strong> | </strong><strong>yes</strong><strong> | </strong><strong>true</strong><strong> | </strong><strong>on</strong><strong> | </strong><strong>0</strong><strong> | </strong><strong>no</strong><strong> | </strong><strong>false</strong><strong> | </strong><strong>off</strong><strong> }</strong></p><p>Whether to approve a client by default after the <strong>approval_delay</strong>. The default is &ldquo;True&rdquo;.</p><p><strong>checker</strong><strong> = </strong><strong></strong><em>COMMAND</em></p><p>This option is <em>optional</em>.</p><p>This option overrides the default shell command that the server will use to check if the client is still up. Any output of the command will be ignored, only the exit code is checked: If the exit code of the command is zero, the client is considered up. The command will be run using &ldquo;<strong>/bin/sh</strong><strong> </strong><strong></strong><strong>-c</strong>&rdquo;, so <em>PATH</em> will be searched. The default value for the checker command is &ldquo;<strong>fping</strong> <strong>-q</strong> <strong>--</strong> %%(host)s&rdquo;. Note that <strong>mandos-keygen</strong>, when generating output to be inserted into this file, normally looks for an SSH server on the Mandos client, and, if it find one, outputs a <strong>checker</strong> option to check for the client\(cqs key fingerprint &ndash; this is more secure against spoofing.</p><p>In addition to normal start time expansion, this option will also be subject to runtime expansion; see the section called &ldquo;EXPANSION&rdquo;.</p><p><strong>extended_timeout</strong><strong> = </strong><strong></strong><em>TIME</em></p><p>This option is <em>optional</em>.</p><p>Extended timeout is an added timeout that is given once after a password has been sent successfully to a client. The timeout is by default longer than the normal timeout, and is used for handling the extra long downtime while a machine is booting up. Time to take into consideration when changing this value is file system checks and quota checks. The default value is 15 minutes.</p><p>The format of <em>TIME</em> is the same as for <em>timeout</em> below.</p><p><strong>fingerprint</strong><strong> = </strong><strong></strong><em>HEXSTRING</em></p><p>This option is <em>required</em>.</p><p>This option sets the OpenPGP fingerprint that identifies the public key that clients authenticate themselves with through TLS. The string needs to be in hexidecimal form, but spaces or upper/lower case are not significant.</p><p><strong>host = </strong><strong></strong><em>STRING</em></p><p>This option is <em>optional</em>, but highly <em>recommended</em> unless the <strong>checker</strong> option is modified to a non-standard value without &ldquo;%%(host)s&rdquo; in it.</p><p>Host name for this client. This is not used by the server directly, but can be, and is by default, used by the checker. See the <strong>checker</strong> option.</p><p><strong>interval</strong><strong> = </strong><strong></strong><em>TIME</em></p><p>This option is <em>optional</em>.</p><p>How often to run the checker to confirm that a client is still up. <em>Note:</em> a new checker will not be started if an old one is still running. The server will wait for a checker to complete until the below &ldquo;<em>timeout</em>&rdquo; occurs, at which time the client will be disabled, and any running checker killed. The default interval is 2 minutes.</p><p>The format of <em>TIME</em> is the same as for <em>timeout</em> below.</p><p><strong>secfile</strong><strong> = </strong><strong></strong><em>FILENAME</em></p><p>This option is only used if <strong>secret</strong> is not specified, in which case this option is <em>required</em>.</p><p>Similar to the <strong>secret</strong>, except the secret data is in an external file. The contents of the file should <em>not</em> be base64-encoded, but will be sent to clients verbatim.</p><p>File names of the form ~user/foo/bar and $<strong>ENVVAR</strong>/foo/bar are supported.</p><p><strong>secret</strong><strong> = </strong><strong></strong><em>BASE64_ENCODED_DATA</em></p><p>If this option is not specified, the <strong>secfile</strong> option is <em>required</em> to be present.</p><p>If present, this option must be set to a string of base64-encoded binary data. It will be decoded and sent to the client matching the above <strong>fingerprint</strong>. This should, of course, be OpenPGP encrypted data, decryptable only by the client. The program <a href="../man8/mandos-keygen.8.html"><strong>mandos-keygen</strong>(8)</a> can, using its <strong>--password</strong> option, be used to generate this, if desired.</p><p>Note: this value of this option will probably be very long. A useful feature to avoid having unreadably-long lines is that a line beginning with white space adds to the value of the previous line, RFC 822-style.</p><p><strong>timeout</strong><strong> = </strong><strong></strong><em>TIME</em></p><p>This option is <em>optional</em>.</p><p>The timeout is how long the server will wait, after a successful checker run, until a client is disabled and not allowed to get the data this server holds. By default Mandos will use 5 minutes. See also the <strong>extended_timeout</strong> option.</p><p>The <em>TIME</em> is specified as an RFC 3339 duration; for example &ldquo;P1Y2M3DT4H5M6S&rdquo; meaning one year, two months, three days, four hours, five minutes, and six seconds. Some values can be omitted, see RFC 3339 Appendix A for details.</p><p><strong>enabled</strong><strong> = </strong><strong>{ </strong><strong>1</strong><strong> | </strong><strong>yes</strong><strong> | </strong><strong>true</strong><strong> | </strong><strong>on</strong><strong> | </strong><strong>0</strong><strong> | </strong><strong>no</strong><strong> | </strong><strong>false</strong><strong> | </strong><strong>off</strong><strong> }</strong></p><p>Whether this client should be enabled by default. The default is &ldquo;true&rdquo;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXPANSION</h2>
        <div class="sectioncontent">
<p>There are two forms of expansion: Start time expansion and runtime expansion.</p><h3>START TIME EXPANSION</h3>
<p>Any string in an option value of the form &ldquo;%(<em>foo</em>)s&rdquo; will be replaced by the value of the option <em>foo</em> either in the same section, or, if it does not exist there, the [DEFAULT] section. This is done at start time, when the configuration file is read.</p><p>Note that this means that, in order to include an actual percent character (&ldquo;%&rdquo;) in an option value, two percent characters in a row (&ldquo;%%&rdquo;) must be entered.</p>
<h3>RUNTIME EXPANSION</h3>
<p>This is currently only done for the <em>checker</em> option.</p><p>Any string in an option value of the form &ldquo;%%(<em>foo</em>)s&rdquo; will be replaced by the value of the attribute <em>foo</em> of the internal &ldquo;Client&rdquo; object in the Mandos server. The currently allowed values for <em>foo</em> are: &ldquo;approval_delay&rdquo;, &ldquo;approval_duration&rdquo;, &ldquo;created&rdquo;, &ldquo;enabled&rdquo;, &ldquo;expires&rdquo;, &ldquo;fingerprint&rdquo;, &ldquo;host&rdquo;, &ldquo;interval&rdquo;, &ldquo;last_approval_request&rdquo;, &ldquo;last_checked_ok&rdquo;, &ldquo;last_enabled&rdquo;, &ldquo;name&rdquo;, &ldquo;timeout&rdquo;, and, if using D-Bus, &ldquo;dbus_object_path&rdquo;. See the source code for details. <strong>Currently, </strong><strong></strong><em>none</em><strong> of these attributes except </strong><strong>&ldquo;host&rdquo;</strong><strong> are guaranteed to be valid in future versions.</strong> Therefore, please let the authors know of any attributes that are useful so they may be preserved to any new versions of this software.</p><p>Note that this means that, in order to include an actual percent character (&ldquo;%&rdquo;) in a <em>checker</em> option, <em>four</em> percent characters in a row (&ldquo;%%%%&rdquo;) must be entered. Also, a bad format here will lead to an immediate but <em>silent</em> run-time fatal exit; debug mode is needed to expose an error of this kind.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>The file described here is /etc/mandos/clients.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The format for specifying times for <em>timeout</em> and <em>interval</em> is not very good.</p><p>The difference between %%(<em>foo</em>)s and %(<em>foo</em>)s is obscure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
[DEFAULT]
timeout = PT5M
interval = PT2M
checker = fping -q -- %%(host)s

# Client "foo"
[foo]
fingerprint =  7788 2722 5BA7 DE53 9C5A  7CFA 59CF F7CD BD9A 5920
secret =
        hQIOA6QdEjBs2L/HEAf/TCyrDe5Xnm9esa+Pb/vWF9CUqfn4srzVgSu234
        REJMVv7lBSrPE2132Lmd2gqF1HeLKDJRSVxJpt6xoWOChGHg+TMyXDxK+N
        Xl89vGvdU1XfhKkVm9MDLOgT5ECDPysDGHFPDhqHOSu3Kaw2DWMV/iH9vz
        3Z20erVNbdcvyBnuojcoWO/6yfB5EQO0BXp7kcyy00USA3CjD5FGZdoQGI
        Tb8A/ar0tVA5crSQmaSotm6KmNLhrFnZ5BxX+TiE+eTUTqSloWRY6VAvqW
        QHC7OASxK5E6RXPBuFH5IohUA2Qbk5AHt99pYvsIPX88j2rWauOokoiKZo
        t/9leJ8VxO5l3wf/U64IH8bkPIoWmWZfd/nqh4uwGNbCgKMyT+AnvH7kMJ
        3i7DivfWl2mKLV0PyPHUNva0VQxX6yYjcOhj1R6fCr/at8/NSLe2OhLchz
        dC+Ls9h+kvJXgF8Sisv+Wk/1RadPLFmraRlqvJwt6Ww21LpiXqXHV2mIgq
        WnR98YgSvUi3TJHrUQiNc9YyBzuRo0AjgG2C9qiE3FM+Y28+iQ/sR3+bFs
        zYuZKVTObqiIslwXu7imO0cvvFRgJF/6u3HNFQ4LUTGhiM3FQmC6NNlF3/
        vJM2hwRDMcJqDd54Twx90Wh+tYz0z7QMsK4ANXWHHWHR0JchnLWmenzbtW
        5MHdW9AYsNJZAQSOpirE4Xi31CSlWAi9KV+cUCmWF5zOFy1x23P6PjdaRm
        4T2zw4dxS5NswXWU0sVEXxjs6PYxuIiCTL7vdpx8QjBkrPWDrAbcMyBr2O
        QlnHIvPzEArRQLo=
host = foo.example.org
interval = PT1M

# Client "bar"
[bar]
fingerprint = 3e393aeaefb84c7e89e2f547b3a107558fca3a27
secfile = /etc/mandos/bar-secret
timeout = PT15M
approved_by_default = False
approval_delay = PT30S

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mandos-clients.conf&hellip;</h2>
        <div class="sectioncontent">
<p><strong>intro</strong>(8mandos), <a href="../man8/mandos-keygen.8.html"><strong>mandos-keygen</strong>(8)</a>, <a href="../man5/mandos.conf.5.html"><strong>mandos.conf</strong>(5)</a>, <strong>mandos</strong>(8), <a href="../man8/fping.8.html"><strong>fping</strong>(8)</a></p><p>RFC 3339: Date and Time on the Internet: Timestamps</p><p>The time intervals are in the "duration" format, as specified in ABNF in Appendix A of RFC 3339.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2008-2012 Teddy Hogeborn, Bj\(:orn P\(oahlsson</p><p>This manual page is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p>This manual page is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program. If not, see \m[blue]<strong>http://www.gnu.org/licenses/</strong>\m[].</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="makedumpfile.conf.5.html"><span aria-hidden="true">&larr;</span> makedumpfile.conf.5: The filter configuration file for makedumpfile(8).</a></li>
   <li class="next"><a href="mandos.conf.5.html">mandos.conf.5: Configuration file for the mandos server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
