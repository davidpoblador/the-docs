<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dput: Configuration file format for dput-ng</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file format for dput-ng">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dput (5) manual">
  <meta name="twitter:description" content="Configuration file format for dput-ng">
  <meta name="twitter:image" content="https://www.carta.tech/images/dput-ng-dput-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/dput.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dput (5) manual" />
  <meta property="og:description" content="Configuration file format for dput-ng" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dput-ng-dput-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dput<small> (5)</small></h1>
        <p class="lead">Configuration file format for dput-ng</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/dput.5.html">
      <span itemprop="name">dput: Configuration file format for dput-ng</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dput-ng/">
      <span itemprop="name">dput-ng</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/dput.5.html">
      <span itemprop="name">dput: Configuration file format for dput-ng</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>dput</strong> supports two configuration file formats. The old-style configuration format was originally introduced by dput and is described in <a href="../man5/dput.cf.5.html"><strong>dput.cf</strong>(5)</a></strong>. This manpage describes new-style configuration files only. All details are covered in in &lt;/usr/share/doc/dput-ng/html/reference/configs.html&gt; which is available in the dput-ng-doc package.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES AND FORMAT</h2>
        <div class="sectioncontent">
<p>Upload targets are configured using JSON as described in <strong>RFC 4627</strong>. In a nutshell, <strong>dput</strong> configuration allows insignificant whitespace before or after any type statement. Each upload profile is stored in its own file and is represented as a pair of curly brackets surrounding name/value pairs described below. Both, name and values are strings. A single colon separates the name from the value. A string begins and ends with quotation marks and may be escaped. Booleans are either <em>true</em> or <em>false</em> (mind these are not surrounded by quotation marks).</p><p>Some keys names are accepting lists as possible value. A list is represented as square brackets surrounding zero or more values, separated by commas.</p><p><strong>dput</strong> reads, in order, these directories:</p><p><em>/usr/share/dput-ng/</em></p><p><em>/etc/dput.d/</em></p><p><em>~/.dput.d/</em></p><p>The directory supplied via command line argument</p><p>Moreover, old-style configuration files are parsed and read. See <strong>READING TRADITIONAL CONFIGURATION FILES</strong> below. In general, packages are installing pre-defined defaults for popular upload targets to <em>/usr/share/dput-ng/profiles/</em>. System administrators who wish to override or create a new system-wide and shared target for many users may choose <em>/etc/dput.d/profiles</em>. Finally, local targets may be written to <em>~/.dput.d/profiles</em> for personal upload targets.</p><p>Within each configuration directory, there may be another tier of configuration directories. There, these actual configuration directories may exist:</p><p><strong>metas/</strong> define super-classes of upload profiles. They can define any name and value known to profiles (see below) which are shared across profiles.</p><p><strong>profiles/</strong> define upload profiles. Files therein are looked-up by their name as <em>HOST</em> argument by <strong>dput</strong>. This is, where upload hosts are defined.</p><p>Moreover, these directories can exist and are documented here for the sake of completeness. However, users typically do not need to touch these unless you are developing or customizing existing plug-ins to <strong>dput</strong> or <strong>dcut</strong></p><p><strong>hooks/</strong> define entry hooks to checker functions which are registered for use with <strong>dput</strong>. See <strong>HOOKS</strong> below.</p><p><strong>commands/</strong> define entry hooks to command functions which are registered for use with <strong>dcut</strong>.</p><p><strong>interfaces/</strong> define entry hooks to user interface functions which are registered for use with <strong>dput</strong> and <strong>dcut</strong>. They are responsible to retrieve data from the user.</p><p>By default <strong>all</strong> configuration file locations are parsed, and overlaid in a additive manner. This way both, entire profiles and actual settings within a profile is inherited from any parent location defining a key within the current scope. Details are explained in the <strong>INHERITANCE OF KEYS</strong> section.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROFILES</h2>
        <div class="sectioncontent">
<p>Profiles are indexed as <em>&lt;profile name&gt;.json</em> within the <em>profiles/</em> configuration directory. Every profile may define these keys. Optionally a profile called <em>DEFAULT.json</em> can be defined as a superset of all existing profiles. Any other profile will inherit values from this profile. For a finer grained control see <strong>meta</strong> keyword and <strong>META-CLASSES</strong> below.</p><p>Following is an example configuration for a local upload profile, named "<em>localhost.json</em>".</p>
<pre>
{
    "+hooks": [
        "lintian"
    ],
    "-hooks": [
        "gpg"
    ],
    "incoming": "~/incoming",
    "meta": "debian",
    "method": "local",
    "run_lintian": true
}
</pre>
<p>Supported keys are:</p><p><strong>allow_dcut</strong> (boolean)</p><p>This defines if you are allowed to upload a dcut changes file to the queue to remove or move files. See <a href="../man1/dcut.1.html"><strong>dcut</strong>(1)</a></strong>.</p><p><strong>allow_unsigned_uploads</strong> (boolean)</p><p>This defines if you are allowed to upload files without a GnuPG signature to this host or not.</p><p><strong>allowed_distributions</strong> (string)</p><p>A regular expression (of Python re module syntax) that the distribution field must match or dput will refuse the upload.</p><p><strong>default_host_main</strong> (string)</p><p>This defines the default host for packages that are allowed to be uploaded to the main archive. This variable is used when guessing the host to upload to.</p><p><strong>default_keyid</strong> (string)</p><p>This defines the default GPG key ID to be used to sign dcut commands. This option can be overridden by -k parameter.</p><p><strong>full_upload_log</strong> (boolean)</p><p>This defines the verbosity of upload logs. When set to <strong>true</strong>, logs will include more details. This setting might be overridden on the command line and defaults to <strong>false</strong>.</p><p><strong>fqdn</strong> (string)</p><p>This is the fully qualified domain name that <strong>dput</strong> will connect to as a target site.</p><p><strong>distributions</strong> (string)</p><p>This defines a comma-separated list of distributions that this host accepts, used to guess the host to use when none is given on the command line.</p><p><strong>hash</strong> (string)</p><p>The hash algorithm that should be used in calculating the checksum of the files before uploading them. Currently, dput accepts the following values for hash:</p><p><em>sha1</em>: Perform validation of the SHA-1 hash (default when omitted)</p><p><em>sha256</em>: Perform validation of the SHA-256 hash</p><p><em>md5</em>: Perform validation of the MD5 hash</p><p><strong>hooks</strong> (list of string)</p><p>Defines a list of checkers which are running before or after the upload. See <strong>HOOKS</strong> below.</p><p><strong>interface</strong> (string)</p><p>Not supported yet. This is a known limitation.</p><p><strong>incoming</strong> (string)</p><p>The directory that <strong>dput</strong> should upload files to. Most upload sites do not allow to write files in the log-in directory. Specify a path here, to which <strong>dput</strong> should change the directory to, before starting to write files.</p><p><strong>method</strong> (string)</p><p>Use the specified method to upload your package. Currently these alternatives are supported:</p><p><em>ftp</em>:: Use FTP to upload files</p><p><em>http</em> or <em>https</em>:: Use HTTP or HTTPS to upload files</p><p><em>local</em>:: Upload to a locally mounted location of the file system. Internally this calls <a href="../man1/install.1.html"><strong>install</strong>(1)</a></strong>.</p><p><em>scp</em>:: Use scp to upload files. <strong>This method is deprecated</strong>, use <em>sftp</em> instead when possible.</p><p><em>sftp</em>:: Use the sftp protocol (a secured file transfer via SSH).</p><p><strong>dput-ng</strong> does not support <em>rsync</em>.</p><p><strong>login</strong> (string)</p><p>Your login on the machine named before. A single asterisk (<em>*</em>) will cause the <em>scp</em>, <em>sftp</em> and uploaders to not supply a login name when calling trying to authenticate.</p><p><strong>meta</strong> (list of string)</p><p>Specify a list of super classes from which the profile should inherit settings explicitly. This is different to the <em>DEFAULT.json</em> profile in such that this defines settings conditionally, and not for all profiles.</p><p><strong>passive_ftp</strong> (boolean)</p><p>This option defines whether <strong>dput</strong> should use passive or active FTP for uploading a package to one of the upload queues. This name is only meaningful when <em>method</em> is set to <em>ftp</em>.</p><p><strong>post_upload_command</strong> (string)</p><p>This option defines a command to be run by dput after a successful upload. The command is invoked via the shell and does not get passed any argument. See <strong>PROCESSORS</strong> for more sophisticated approaches which are integrated in the upload process.</p><p><strong>pre_upload_command</strong> (string)</p><p>This option defines a command to be run by dput before an upload. The command is invoked via the shell and does not get passed any argument. See <strong>HOOKS</strong> for more sophisticated approaches which are integrated in the upload process and can gracefully interrupt the upload process.</p><p><strong>run_lintian</strong> (boolean)</p><p>This option defines if lintian should be run before the package will be uploaded or not. <strong>This setting is deprecated</strong> but works as a fallback to the corresponding <strong>HOOK</strong>. The Lintian hook allows much more fine grained control over the Lintian invocation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">READING TRADITIONAL CONFIGURATION FILES</h2>
        <div class="sectioncontent">
<p>As outlined initially, <strong>dput</strong> reads and parses traditional INI style configuration files. It\(cqs format is documented in <a href="../man5/dput.cf.5.html"><strong>dput.cf</strong>(5)</a></strong>. These files are deprecated, but for the time being read and parsed. We encourage the removal of these global and local configuration files entirely.</p><p>Having that said, when in place old-style configuration files will overrule new style files, to preserve a possibly modified legacy behavior. That means, in order configuration values are inherited and keys are successively overwritten in this order:</p><p><em>/etc/dput.d/profiles</em></p><p><em>/etc/dput.cf</em></p><p><em>~/.dput.d/profiles</em></p><p><em>~/.dput.cf</em></p><p>This means, old-style configuration files always take relative precedence when installed. Use them with caution.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INHERITANCE OF KEYS</h2>
        <div class="sectioncontent">
<p>By default, keys will override any previously defined value. However, as a special case, there are three operators (<strong>=</strong>, <strong>+</strong> and <strong>-</strong>) that may be prefixed to names to merge with existing inherited values. This is beneficial when a profile wishes to add or remove values from an existing key which accepts lists of values. This is mostly useful to <strong>hooks</strong> which may want to extend an existing profile key that is inheriting values via it\(cqs meta-class or parent.</p><p>The <strong>=</strong> operator is the default operator when no operator was explicitly provided. It overwrites any previous key.</p><p>The <strong>+</strong> operator is additive. When set, it merges the supplied value(s) with any previous value</p><p>The <strong>-</strong> operator is subtractive. When set, it removes the supplied value(s) from any previous value.</p><h3>The DEFAULT Profile</h3>
<p>There is a special profile called <em>DEFAULT</em> ("<em>DEFAULT.json</em>" in any configuration location). This profile is the root profile. All profiles are automatically inheriting values from this profile. Values set there are global defaults. The profile itself is subject to the same inheritance rules as any other profile itself as well.</p><p>All keys and values can be set in the <em>DEFAULT</em> profile.</p>
<h3>META PROFILES</h3>
<p>Configuration files may declare an optional <strong>meta</strong> key, who\(cqs value is the name of a meta-configuration to be placed under this configuration. You can check for meta-configuration in <em>/usr/share/dput-ng/metas</em>, <em>/etc/dput.d/metas</em> or <em>~/.dput.d/metas</em>. This helps declare common settings (such as general Debian archive configuration values (GPG requirements, enforcing that binary files exist, etc) without having to maintain may of the same values in many places).</p><p>They are different to the <em>DEFAULT</em> profile in such, that no profile automatically inherits values from a meta profile, but only upon explicit request.</p><p>Meta profiles can in turn inherit itself values from other meta profiles.</p>
<h3>OVERRIDING SINGLE VALUES</h3>
<p>Here\(cqs an example stanza from a local dput config to remove an annoying hook from being run:</p><p><em>~/.dput.d/profiles/DEFAULT.json</em>:</p>
<pre>
{
    "hooks": [
        "gpg",
        "lintian"
    ]
}
</pre>
<p>At this point, every profile will invoke the hooks <em>gpg</em>, <em>lintian</em></p><p><em>~/.dput.d/metas/my-defaults.json</em>:</p>
<pre>
{
    "hooks": [
        "checksum",
    ]
}
</pre>
<p>This defines a meta profile named <em>my-defaults</em>, which will also invoke the <em>checksum</em> hook. At this point this meta profile, inherits values from <em>DEFAULT</em> and therefore invokes the hooks <em>gpg</em>, <em>lintian</em> and <em>checksum</em>.</p><p><em>~/.dput.d/profiles/ftp-master.json</em>:</p>
<pre>
{
    "-hooks": [
        "lintian"
    ]
    "meta": [
            "my-defaults"
    ]
}
</pre>
<p>At this point, the profile <em>ftp-master</em> will inherit values from <em>DEFAULT</em> and <em>my-defaults</em>. However, the <em>-</em> operator prefix removes <em>lintian</em> from the checker list. Hence, <em>ftp-master</em> will run the checkers <em>gpg</em> and <em>checksum</em>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOOKS</h2>
        <div class="sectioncontent">
<p>Hooks are pre- or post-uupload checks, They are pluggable components running before or after the upload of a package. Whether they run before or after the upload is determined by the JSON definition of a hook. That is an implementation detail the user typically does not need to worry about.</p><h3>Pre-Upload Hooks</h3>
<p>Pre-upload hooks are pluggable components which are designed to run before the upload actually happens. This typically involves consistency checks, sanity checks and similar tasks. The list of available pre-upload hooks can be obtained using <a href="../man1/dirt.1.html"><strong>dirt</strong>(1)</a></strong>. The hooks invoked by default are determined on a per-profile basis by retrieving the setting of the <strong>hooks</strong> key. Hooks also run in simulation and check-only mode.</p><p>It is easy to write your own hook extensions. Consult the manual for instructions.</p>
<h3>Post-Upload Hooks</h3>
<p>Processors are pluggable components which are designed to run after the upload actually happens. They cannot interrupt the upload, because they are invoked after a successful upload only. They do <em>not</em> run when <strong>dput</strong> was invoked with check-only or simulation mode. Such post-upload hooks may invoke post- processing tasks such as closing or filing bugs. The list of available processors can be obtained using <a href="../man1/dirt.1.html"><strong>dirt</strong>(1)</a></strong>. The hooks invoked by default are determined on a per-profile basis by retrieving the setting of the <strong>hooks</strong> key and follow the same rules as pre-upload hooks.</p><p>It is easy to write your own hook extensions. Consult the manual for instructions.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<pre>
/usr/share/dput-ng/
/etc/dput.d/
~/.dput.d/
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>dput-ng was originally written by Arno Töll &lt;arno(a)debian.org&gt; and Paul Richard I by the Grace of God of the United Kingdom of Debian and Ubuntu and of his other realms and territories King Head of the Fluxbox Window Manager Defender of the Faith Tagliamonte &lt;paultag(a)debian.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESOURCES</h2>
        <div class="sectioncontent">
<p><strong>RFC 4627</strong>, <strong>/usr/share/doc/dput-ng/html/reference/</strong>, <a href="../man1/dput.1.html"><strong>dput</strong>(1)</a></strong>, <a href="../man1/dcut.1.html"><strong>dcut</strong>(1)</a></strong>, <a href="../man1/dcut.1.html"><strong>dcut</strong>(1)</a></strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dpkg.cfg.5.html"><span aria-hidden="true">&larr;</span> dpkg.cfg.5: Dpkg configuration file</a></li>
   <li class="next"><a href="dput-dput.cf.5.html">dput.cf.5: Debian package upload tool configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
