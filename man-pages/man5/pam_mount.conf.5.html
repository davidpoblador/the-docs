<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pam_mount.conf: None</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="None">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pam_mount.conf (5) manual">
  <meta name="twitter:description" content="None">
  <meta name="twitter:image" content="https://www.carta.tech/images/libpam-mount-pam_mount.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/pam_mount.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pam_mount.conf (5) manual" />
  <meta property="og:description" content="None" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libpam-mount-pam_mount.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pam_mount.conf<small> (5)</small></h1>
        <p class="lead">None</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/pam_mount.conf.5.html">
      <span itemprop="name">pam_mount.conf: None</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libpam-mount/">
      <span itemprop="name">libpam-mount</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/pam_mount.conf.5.html">
      <span itemprop="name">pam_mount.conf: None</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Name</h2>
        <div class="sectioncontent">
<p>pam_mount.conf - Description of the pam_mount configuration file</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Overview</h2>
        <div class="sectioncontent">
<p>The pam_mount configuration file defines soft defaults for commands pam_mount will be executing, the messages it will show, and which volumes to mount on login. Since pam_mount 0.18, the configuration file is written in XML so as to simplify the pam_mount code base while giving formatting freedom to the end-user. Special characters like <strong>&lt;</strong>, <strong>&gt;</strong> and <strong>&</strong> that are used by XML itself must be encoded as <strong>&lt;</strong>, <strong>&gt;</strong> and <strong>&amp;</strong>, respectively; additionally, <strong>"</strong> must be encoded as <strong>&quot;</strong> within a "" area, but these three/four symbols are unlikely to be seen often anyway.</p><p>Do not use comments inside elements taking verbatim text, like &lt;fusermount&gt;&lt;/fusermount&gt; - this is not handled by the pam_mount XML tree parser.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Volume definitions</h2>
        <div class="sectioncontent">
<p>Volumes are defined with the <strong>&lt;volume&gt;</strong> element, which primarily takes the parameters as attributes, such as</p><p>&lt;volume user="joe" fstype="nfs" server="fsbox" path="/home/%(USER)" mountpoint="/bigdisk/%(USER)" /&gt;</p><p>and define to mount what for whom and how. There are a lot of tunables, which are described in this section.</p><h3>Simple user control</h3>
<p>The following attributes control whether the volume is going to get mounted once the user logs in. By default, volumes apply to all users, and specifying attributes limits it to the given conditions, i.e. they are logically ANDed. There is a more powerful and verbose mechanism for specifying complex conditions, described further below in the section "Extended user control".</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>user="</strong><em>username</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Limit the volume to the specified user, identified by name</p>
  </dd>
  <dt>
    <p><strong>uid="</strong><em>number</em><strong>"</strong> or <strong>uid="</strong><em>number</em><strong>-</strong><em>number</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Limit the volume to the specified user(s), identified by UID or UID range.</p>
  </dd>
  <dt>
    <p><strong>pgrp="</strong><em>groupname</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Limit the volume to users which have the group identified by name as their primary group.</p>
  </dd>
  <dt>
    <p><strong>gid="</strong><em>number</em><strong>"</strong> or <strong>gid="</strong><em>number</em><strong>-</strong><em>number</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Limit the volume to users which have the group(s) given by GID or GID range as a primary group.</p>
  </dd>
  <dt>
    <p><strong>sgrp="</strong><em>groupname</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Limit the volume to users which are a member of the group identified by name (either as primary or secondary group).</p>
  </dd>

</dl>

<h3>Volume configuration</h3>
<p>The following attributes select volume source, destination, options and so on.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>fstype="</strong><em>type</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>The filesystem type, which can be anything your kernel, userspace and pam_mount understand. If the fstype specifies a pam_mount-special type, pam_mount will handle it. Otherwise, the fstype is passed to <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> which then in turn looks for a userspace helper /sbin/mount.<em>fstype</em> and runs that if it exists, and in any other case, <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> would call <a href="../man2/mount.2.html"><strong>mount</strong>(2)</a> to cause the kernel to directly mount it. <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> knows of an <strong>auto</strong> fstype, which might be helpful in some cases. Not specifying the fstype attribute implies <strong>fstype="auto"</strong>. Note that mounting with <strong>auto</strong> may fail if the filesystem kernel module is not loaded yet, since <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> will check /proc/partitions.</p><ul>
<li><p>The fstypes <strong>cifs</strong>, <strong>smbfs</strong>, <strong>ncpfs</strong>, <strong>fuse</strong>, <strong>nfs</strong> and <strong>nfs</strong> are overridden by pam_mount and we run the respective helper programs directly instead of invoking <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a> with the basic default set of arguments which are often insufficient for networked filesystems. See this manpage's section "Examples" below for more details.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>noroot="1"</strong></p>
  </dt>
  <dd>
    <p>Call the mount program without root privileges. It defaults to yes for the <strong>fuse</strong> fstype, because FUSE volumes must be mounted as the user that logs in to get access to the files by default.</p>
  </dd>
  <dt>
    <p><strong>server="</strong><em>name</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Defines the server to which to connect in case of <strong>cifs</strong>, <strong>smbfs</strong> and <strong>ncpfs</strong> and <strong>nfs</strong> fstypes. For all other fs types, this attribute is ignored. You can also specify the server in the <strong>path</strong> attribute instead, but need to adhere to the specific syntax that is a particular fstype requires. (E.g. CIFS uses "//server/path", whereas NFS uses "server:path", etc.)</p>
  </dd>
  <dt>
    <p><strong>path="</strong><em>path</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>This mandatory attribute specifies the location of the volume, relative to the server (if specified).</p>
  </dd>
  <dt>
    <p><strong>mountpoint="</strong><em>directory</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>This specifies the destination directory onto which the volume is mounted. "<strong>~</strong>" expands to the user's home directory as present in the passwd database, according to sh semantics. "<strong>~name</strong>" is <em>not</em> supported. If this attribute is omitted, the location is read from /etc/fstab, which also requires <strong>path</strong> to be a device or a source directory of an fstab entry.</p>
  </dd>
  <dt>
    <p><strong>options="</strong><em>...</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Specifies the mount options. If omitted and /etc/fstab is used (see <strong>mountpoint</strong>), the options will also be sources from fstab.</p>
  </dd>
  <dt>
    <p><strong>ssh="0"</strong> or <strong>ssh="1"</strong></p>
  </dt>
  <dd>
    <p>The <strong>ssh</strong> option enables an input hack wrapper (zerossh, see <a href="../man1/pmt-fd0ssh.1.html"><strong>pmt-fd0ssh</strong>(1)</a>) for this volume to hand the password to ssh over an ssh-specific mechanism. Enable this option for any mount involving the SSH binary, e.g. ccgfs or sshfs. Do <em>not</em> enable it for anything else or the login will most likely hang.</p>
  </dd>
  <dt>
    <p><strong>cipher="</strong><em>cipher</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Cryptsetup cipher name for the volume. To be used with the <strong>crypt</strong> fstype.</p>
  </dd>
  <dt>
    <p><strong>fskeycipher="</strong><em>ciphertype</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>OpenSSL cipher name for the fskey. Use with the <strong>crypt</strong> fstype (dm-crypt and LUKS). The special cipher keyword "<strong>none</strong>" may be used to directly pass the file's contents to cryptsetup without decryption by OpenSSL.</p>
  </dd>
  <dt>
    <p><strong>fskeyhash="</strong><em>hash</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>OpenSSL hash name for the fskey.</p>
  </dd>
  <dt>
    <p><strong>fskeypath="</strong><em>path</em><strong>"</strong></p>
  </dt>
  <dd>
    <p>Path to the filesystem key.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Variables</h2>
        <div class="sectioncontent">
<p>Within attributes and commands (see later section), specific placeholders or variables, identified by <strong>%(</strong><em>name</em><strong>)</strong> may be used. These are substituted at command invocation time.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>%(USER)</strong></p>
  </dt>
  <dd>
    <p>Expands to the username of the user logging in.</p>
  </dd>
  <dt>
    <p><strong>%(DOMAIN_NAME)</strong>, <strong>%(DOMAIN_USER)</strong></p>
  </dt>
  <dd>
    <p>Winbind has special UNIX usernames in the form of "<em>domain</em><strong>&#92;</strong><em>username</em>", and %(DOMAIN_NAME) and %(DOMAIN_USER) provide the split parts of it. This is useful when a sharename on an MSAD server is the same as the username, e.g. &lt;volume fstype="cifs" server="fsbox" path="%(DOMAIN_USER)" /&gt;.</p>
  </dd>
  <dt>
    <p><strong>%(USERUID)</strong>, <strong>%(USERGID)</strong></p>
  </dt>
  <dd>
    <p>The numeric UID and GID of the primary group of the user logging in. This is obtained via getpw*(), not getuid(). It is useful in conjunction with the uid= or gid= mount options, e.g. &lt;volume options="uid=%(USERUID)" /&gt;. Note that you <strong>do not</strong> need to specify uid=%(USERUID) for smbfs or cifs mounts because this is already done automatically by pam_mount.</p>
  </dd>
  <dt>
    <p><strong>%(GROUP)</strong></p>
  </dt>
  <dd>
    <p>The name of the group for %(USERGID).</p>
  </dd>

</dl>
<p>All other variables you might find in the source code are internal to pam_mount, and are likely not to be expanded when you would expect it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">pam_mount parameters</h2>
        <div class="sectioncontent">
<p>Besides volumes, there are other elements allowed in pam_mount.conf.xml that control pam_mount's own behavior.</p><h3>General tunables</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;debug enable="1" /&gt;</strong></p>
  </dt>
  <dd>
    <p>Enables verbose output during login to stderr and syslog. Some programs do not cope with output sent on stderr, see doc/bugs.txt for a list. <strong>0</strong> disables debugging, <strong>1</strong> enables pam_mount tracing, and <strong>2</strong> additionally enables tracing in mount.crypt. The default is <strong>0</strong>. As the config file is parsed linearly, the &lt;debug&gt; directive takes effect once it is seen - it it thus advised to put it near the start of the file, before any &lt;volume&gt; definitions.</p>
  </dd>
  <dt>
    <p><strong>&lt;logout wait="</strong><em>microseconds</em><strong>" hup="</strong><em>yes/no</em><strong>" term="</strong><em>yes/no</em><strong>" kill="</strong><em>yes/no</em><strong>" /&gt;</strong></p>
  </dt>
  <dd>
    <p>Programs exist that do not terminate when the session is closed. (This applies to the "final" close, i.e. when the last user session ends.) Examples are processes still running in the background; or a broken X session manager that did not clean up its children, or other X programs that did not react to the X server termination notification. pam_mount can be configured to kill these processes and optionally wait before sending signals.</p>
  </dd>
  <dt>
    <p><strong>&lt;luserconf name="</strong><em>.pam_mount.conf.xml</em><strong>" /&gt;</strong></p>
  </dt>
  <dd>
    <p>Individual users may define additional volumes in a file by the specified <em>name</em> relative to their home directory. The presence of <strong>&lt;luserconf&gt;</strong> in the master config file enables this feature. If turned on, users may mount and unmount any volumes they specify and that they have ownership of (in case of local mounts). The mount process is executed <strong>as superuser</strong>. This may have security implications, so this feature is disabled by default. Luserconfigs are parsed after any volumes from the global configuration file have been mounted, so that first mounting home directories with a global config and then mounting further volumes from luserconfigs is possible.</p>
  </dd>
  <dt>
    <p><strong>&lt;mntoptions allow="</strong><em>options,...</em><strong>" /&gt;</strong></p>
  </dt>
  <dd>
    <p>The &lt;mntoptions&gt; elements determine which options may be specified in &lt;volumes&gt; in per-user configuration files (see &lt;luserconf&gt;). It does not apply to the master file. Specifying &lt;mntoptions&gt; is forbidden and ignored in per-user configs. The default allowed list consists of "<em>nosuid,nodev</em>", and this default is cleared when the first allow="..." attribute is seen by the config parser. All further allow="..." are additive, though.</p>
  </dd>
  <dt>
    <p><strong>&lt;mntoptions deny="</strong><em>options,...</em><strong>" /&gt;</strong></p>
  </dt>
  <dd>
    <p>Any options listed in deny may not appear in the option list of per-user mounts. The default deny list is empty.</p>
  </dd>
  <dt>
    <p><strong>&lt;mntoptions require="</strong><em>options,...</em><strong>" /&gt;</strong></p>
  </dt>
  <dd>
    <p>All options listed in require must appear in the option list of per-user mounts. The default require list consists of "<em>nosuid,nodev</em>", and like allow="", is cleared when first encountered by the parser, and is otherwise additive.</p>
  </dd>
  <dt>
    <p><strong>&lt;path&gt;</strong><em>directories...</em><strong>&lt;/path&gt;</strong></p>
  </dt>
  <dd>
    <p>The default for the PATH environmental variable is not consistent across distributions, and so, pam_mount provides its own set of sane defaults which you may change at will.</p>
  </dd>

</dl>

<h3>Volume-related</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;mkmountpoint enable="1" remove="true" /&gt;</strong></p>
  </dt>
  <dd>
    <p>Controls automatic creation and removal of mountpoints. If a mountpoint does not exist when the volume is about to be mounted, pam_mount can be instructed to create one using the <strong>enable</strong> attribute. Normally, directories created this way are retained after logout, but <strong>remove</strong> may be set to <strong>true</strong> to remove the mountpoint again, <em>but only</em> if it was automatically created by pam_mount in the same session before.</p>
  </dd>

</dl>

<h3>Auxiliary programs</h3>
<p>Some mount programs need special default parameters to properly function. It is good practice to specify uid= for CIFS for example, because it is mounted as root and would otherwise show files belonging to root instead of the user logging in.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;fd0ssh&gt;</strong><em>program...</em><strong>&lt;/fd0ssh&gt;</strong></p>
  </dt>
  <dd>
    <p>fd0ssh is a hack around OpenSSH that essentially makes it read passwords from stdin even though OpenSSH normally does not do that.</p>
  </dd>
  <dt>
    <p><strong>&lt;fsck&gt;</strong><em>fsck -p %(FSCKTARGET)</em><strong>&lt;/fsck&gt;</strong></p>
  </dt>
  <dd>
    <p>Local volumes will be checked before mounting if this program is set.</p>
  </dd>
  <dt>
    <p><strong>&lt;ofl&gt;</strong><em>ofl -k%(SIGNAL) %(MNTPT)</em><strong>&lt;/ofl&gt;</strong></p>
  </dt>
  <dd>
    <p>The Open File Lister is used to identify processes using files within the given subdirectory, and optionally send a signal to those processes.</p>
  </dd>
  <dt>
    <p><strong>&lt;pmvarrun&gt;</strong><em>pmvarrun ...</em><strong>&lt;/pmvarrun&gt;</strong></p>
  </dt>
  <dd>
    <p><a href="../man8/pmvarrun.8.html"><strong>pmvarrun</strong>(8)</a> is a separate program to manage the reference count tracking user sessions.</p>
  </dd>

</dl>

<h3>Mount programs</h3>
<p>Commands to mount/unmount volumes. They can take parameters, as shown. You can specify either absolute paths, or relative ones, in which case $PATH will be searched. Since login programs have differing default PATHs, pam_mount has its own path definition (see above).</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;lclmount&gt;</strong><em>mount -t %(FSTYPE) ...</em><strong>&lt;/lclmount&gt;</strong></p>
  </dt>
  <dd>
    <p>The regular mount program.</p>
  </dd>
  <dt>
    <p><strong>&lt;umount&gt;</strong><em>umount %(MNTPT)</em><strong>&lt;/umount&gt;</strong></p>
  </dt>
  <dd>
    <p>Unless there is a dedicated umount program for a given filesystem type, the regular umount program will be used.</p><ul>
<li><p>Linux supports lazy unmounting using `/sbin/umount -l`. This may be dangerous for encrypted volumes because the underlying device is not unmapped. Loopback devices are also affected by this (not being unmapped when files are still open). Also, unmount on SMB volumes needs to be called on %(MNTPT) and not %(VOLUME).</p></li>
</ul>
  </dd>

</dl>
<p>Commands for various mount programs. Not all have a dedicated umount helper because some do not need one.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;cifsmount&gt;</strong><em>mount.cifs ...</em><strong>&lt;/cifsmount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&lt;cryptmount&gt;</strong><em>mount.crypt ...</em><strong>&lt;/cryptmount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&lt;cryptumount&gt;</strong><em>umount.crypt %(MNTPT)</em><strong>&lt;/cryptumount&gt;</strong></p>
  </dt>
  <dd>
    <p>Mount helpers for dm-crypt and LUKS volumes.</p>
  </dd>
  <dt>
    <p><strong>&lt;fusemount&gt;</strong><em>mount.fuse ...</em><strong>&lt;/fusemount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&lt;fuseumount&gt;</strong><em>fuserumount ...</em><strong>&lt;/fuseumount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&lt;ncpmount&gt;</strong><em>ncpmount ...</em><strong>&lt;/ncpmount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&lt;ncpumount&gt;</strong><em>ncpumount ...</em><strong>&lt;/ncpumount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&lt;nfsmount&gt;</strong><em>mount %(SERVER):%(VOLUME) ...</em><strong>&lt;/nfsmount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&lt;smbmount&gt;</strong><em>smbmount ...</em><strong>&lt;/smbmount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>&lt;smbumount&gt;</strong><em>smbumount ...</em><strong>&lt;/smbumount&gt;</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

<h3>Messages</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;msg-authpw&gt;</strong><em>pam_mount password:</em><strong>&lt;/msg-authpw&gt;</strong></p>
  </dt>
  <dd>
    <p>When pam_mount cannot obtain a password through PAM, or is configured to not do so in the first place, and is configured to ask for a password interactively as a replacement, this prompt will be shown.</p>
  </dd>
  <dt>
    <p><strong>&lt;msg-sessionpw&gt;</strong><em>reenter...:</em><strong>&lt;/msg-sessionpw&gt;</strong></p>
  </dt>
  <dd>
    <p>In case the 'session' PAM block does not have the password (e.g. on su from root to user), it will ask again. This prompt can also be customized.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Extended user control</h2>
        <div class="sectioncontent">
<p>Sometimes, the simple user control attributes for the &lt;volume&gt; element are not sufficient where one may want to build more complex expressions as to whom a volume applies. Instead of attributes, extended user control is set up using additional elements within &lt;volume&gt;, for example</p><p>&lt;volume path="/dev/shm" mountpoint="~"&gt; &lt;and&gt; &lt;sgrp&gt;students&lt;/sgrp&gt; &lt;not&gt; &lt;sgrp&gt;profs&lt;/sgrp&gt; &lt;/not&gt; &lt;/and&gt; &lt;/volume&gt;</p><p>Which translates to (students && !profs).</p><h3>Logical operators</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;and&gt;</strong><em>&lt;elements&gt;*</em><strong>&lt;/and&gt;</strong></p>
  </dt>
  <dd>
    <p>All elements within this one are logically ANDed. Any number of elements may appear.</p>
  </dd>
  <dt>
    <p><strong>&lt;or&gt;</strong><em>&lt;elements&gt;*</em><strong>&lt;/or&gt;</strong></p>
  </dt>
  <dd>
    <p>All elements within this one are logically ORed. Any number of elements may appear.</p>
  </dd>
  <dt>
    <p><strong>&lt;xor&gt;</strong><em>&lt;elements&gt;{2}</em><strong>&lt;/xor&gt;</strong></p>
  </dt>
  <dd>
    <p>The two elements within the &lt;xor&gt; are logically XORed.</p>
  </dd>
  <dt>
    <p><strong>&lt;not&gt;</strong><em>&lt;element&gt;</em><strong>&lt;/not&gt;</strong></p>
  </dt>
  <dd>
    <p>The single element within the &lt;not&gt; is logically negated.</p>
  </dd>

</dl>

<h3>User selection</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;user&gt;</strong><em>username</em><strong>&lt;/user&gt;</strong></p>
  </dt>
  <dd>
    <p>Match against the given username.</p>
  </dd>
  <dt>
    <p><strong>&lt;uid&gt;</strong><em>number</em><strong>&lt;/uid&gt;</strong> or <strong>&lt;uid&gt;</strong><em>number</em><strong>-</strong><em>number</em><strong>&lt;/uid&gt;</strong></p>
  </dt>
  <dd>
    <p>Match the UID of the user logging in against a UID or UID range.</p>
  </dd>
  <dt>
    <p><strong>&lt;gid&gt;</strong><em>number</em><strong>&lt;/gid&gt;</strong> or <strong>&lt;gid&gt;</strong><em>number</em><strong>-</strong><em>number</em><strong>&lt;/gid&gt;</strong></p>
  </dt>
  <dd>
    <p>Match the primary group of the user logging in against a GID or GID range.</p>
  </dd>
  <dt>
    <p><strong>&lt;pgrp&gt;</strong><em>groupname</em><strong>&lt;/pgrp&gt;</strong></p>
  </dt>
  <dd>
    <p>Check if the user logging in has <em>groupname</em> as the primary group.</p>
  </dd>
  <dt>
    <p><strong>&lt;sgrp&gt;</strong><em>groupname</em><strong>&lt;/sgrp&gt;</strong></p>
  </dt>
  <dd>
    <p>Check if the user logging in is a member of the group given by <em>name</em> (i.e. it is either a primary or secondary group).</p>
  </dd>

</dl>

<h3>Attributes</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>icase="yes"</strong> or <strong>icase="no"</strong></p>
  </dt>
  <dd>
    <p>The <strong>icase</strong> attribute may be used on <strong>&lt;user&gt;</strong>, <strong>&lt;pgrp&gt;</strong> and <strong>&lt;sgrp&gt;</strong> to enable case-insensitive matching (or not). It defaults to "no".</p>
  </dd>
  <dt>
    <p><strong>regex="yes"</strong> (or no)</p>
  </dt>
  <dd>
    <p>The <strong>regex</strong> attribute may be used on <strong>&lt;user&gt;</strong>, <strong>&lt;pgrp&gt;</strong> and <strong>&lt;sgrp&gt;</strong> to enable interpreting the text content of the tag as a Perl-compatible regular expression pattern. This attribute may be combined with "icase" (see above). Example: &lt;user regex="yes"&gt;joe&lt;/user&gt; matches any user who has the letter sequence "joe" anywhere in their username. Therefor, use the regex feature cautiously and consider adding ^ and $ anchors to limit security surprises. Example: &lt;user regex="yes"&gt;^.*joe.*$&lt;/user&gt; if you really wanted to match the sequence at any position.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Examples</h2>
        <div class="sectioncontent">
<p>Remember that <strong>~</strong> can be used in the mountpoint attribute to denote the home directory as retrievable through <a href="../man3/getpwent.3.html"><strong>getpwent</strong>(3)</a>.</p><h3>sshfs and ccgfs</h3>
<p>Not specifying any path after the colon (:) uses the path whereever ssh will put you in, usually the home directory.</p><p>&lt;volume fstype="fuse" path="sshfs#%(USER)@fileserver:" mountpoint="~" /&gt;</p><p>&lt;volume fstype="fuse" path="ccgfs-ssh-pull#%(USER)@host:directory" mountpoint="~" /&gt;</p>
<h3>encfs 1.4.x and up</h3>
<p>&lt;volume fstype="fuse" path="encfs#/crypto/%(USER)" mountpoint="~" options="nonempty" /&gt;</p><p>(encfs 1.3 is no longer supported.)</p>
<h3>NFS mounts</h3>
<p>&lt;volume fstype="nfs" server="fileserver" path="/home/%(USER)" mountpoint="~" /&gt;</p>
<h3>CIFS/SMB mounts</h3>
<p>&lt;volume user="user" fstype="smbfs" server="krueger" path="public" mountpoint="/home/user/krueger" /&gt;</p>
<h3>NCP mounts</h3>
<p>&lt;volume user="user" fstype="ncpfs" server="krueger" path="public" mountpoint="/home/user/krueger" options="username=user.context" /&gt;</p>
<h3>Bind mounts</h3>
<p>This may come useful in conjunction with pam_chroot:</p><p>&lt;volume path="/bin" mountpoint="~/bin" options="bind" /&gt;</p>
<h3>tmpfs mounts</h3>
<p>Volatile tmpfs mount with restricted size (thanks to Mike Hommey for this example):</p><p>&lt;volume user="test" fstype="tmpfs" mountpoint="/home/test" options="size=10M,uid=%(USER),mode=0700" /&gt;</p>
<h3>dm-crypt volumes</h3>
<p>Crypt mounts require a kernel with CONFIG_BLK_DEV_DM and CONFIG_DM_CRYPT enabled, as well as all the ciphers that are going to be used, e.g. CONFIG_CRYPTO_AES, CONFIG_CRYPTO_BLOWFISH, CONFIG_CRYPTO_TWOFISH.</p><p>&lt;volume path="/home/%(USER).img" mountpoint="~" cipher="aes-cbc-essiv:sha256" fskeycipher="aes-256-cbc" fskeyhash="sha1" fskeypath="/home/%(USER).key" /&gt;</p>
<h3>LUKS volumes</h3>
<p>&lt;volume path="/home/%(USER).img" mountpoint="~" cipher="aes-cbc-essiv:sha256" /&gt;</p>
<h3>cryptoloop volumes</h3>
<p>cryptoloop is not explicitly supported by pam_mount. Citing the Linux kernel config help text: "WARNING: This device [cryptoloop] is not safe for journal[l]ed filesystems[...]. Please use the Device Mapper [dm-crypt] module instead."</p>
<h3>OpenBSD encrypted home</h3>
<p>OpenBSD encrypted home directory example:</p><p>&lt;volume path="/home/user.img" mountpoint="/home/user" options="svnd0" /&gt;</p>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pam_ldap.conf.5.html"><span aria-hidden="true">&larr;</span> pam_ldap.conf.5: Ldap pluggable authentication module</a></li>
   <li class="next"><a href="pam_winbind.conf.5.html">pam_winbind.conf.5: Configuration file of pam module for winbind <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
