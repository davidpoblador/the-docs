<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tzfile: Timezone information</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Timezone information">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tzfile (5) manual">
  <meta name="twitter:description" content="Timezone information">
  <meta name="twitter:image" content="https://www.carta.tech/images/manpages-tzfile-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/tzfile.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tzfile (5) manual" />
  <meta property="og:description" content="Timezone information" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/manpages-tzfile-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tzfile<small> (5)</small></h1>
        <p class="lead">Timezone information</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/tzfile.5.html">
      <span itemprop="name">tzfile: Timezone information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/manpages/">
      <span itemprop="name">manpages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/tzfile.5.html">
      <span itemprop="name">tzfile: Timezone information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This page describes the structure of the timezone files used by <a href="../man3/tzset.3.html"><strong>tzset</strong>(3)</a>. These files are typically found under one of the directories <em>/usr/lib/zoneinfo</em> or <em>/usr/share/zoneinfo</em>.</p><p>Timezone information files begin with the magic characters "TZif" to identify them as timezone information files, followed by a character identifying the version of the file's format (as of 2005, either an ASCII NUL (&apos;&#92;0&apos;) or a &apos;2&apos;) followed by fifteen bytes containing zeros reserved for future use, followed by six four-byte values of type <em>long</em>, written in a "standard" byte order (the high-order byte of the value is written first). These values are, in order:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>tzh_ttisgmtcnt</em></p>
  </dt>
  <dd>
    <p>The number of UTC/local indicators stored in the file.</p>
  </dd>
  <dt>
    <p><em>tzh_ttisstdcnt</em></p>
  </dt>
  <dd>
    <p>The number of standard/wall indicators stored in the file.</p>
  </dd>
  <dt>
    <p><em>tzh_leapcnt</em></p>
  </dt>
  <dd>
    <p>The number of leap seconds for which data is stored in the file.</p>
  </dd>
  <dt>
    <p><em>tzh_timecnt</em></p>
  </dt>
  <dd>
    <p>The number of "transition times" for which data is stored in the file.</p>
  </dd>
  <dt>
    <p><em>tzh_typecnt</em></p>
  </dt>
  <dd>
    <p>The number of "local time types" for which data is stored in the file (must not be zero).</p>
  </dd>
  <dt>
    <p><em>tzh_charcnt</em></p>
  </dt>
  <dd>
    <p>The number of characters of "timezone abbreviation strings" stored in the file.</p>
  </dd>

</dl>
<p>The above header is followed by <em>tzh_timecnt</em> four-byte values of type <em>long</em>, sorted in ascending order. These values are written in "standard" byte order. Each is used as a transition time (as returned by <a href="../man2/time.2.html"><strong>time</strong>(2)</a>) at which the rules for computing local time change. Next come <em>tzh_timecnt</em> one-byte values of type <em>unsigned char</em>; each one tells which of the different types of "local time" types described in the file is associated with the same-indexed transition time. These values serve as indices into an array of <em>ttinfo</em> structures (with <em>tzh_typecnt</em> entries) that appear next in the file; these structures are defined as follows:</p>
<pre>
struct ttinfo {
    long         tt_gmtoff;
    int          tt_isdst;
    unsigned int tt_abbrind;
};
</pre>
<p>Each structure is written as a four-byte value for <em>tt_gmtoff</em> of type <em>long</em>, in a standard byte order, followed by a one-byte value for <em>tt_isdst</em> and a one-byte value for <em>tt_abbrind</em>. In each structure, <em>tt_gmtoff</em> gives the number of seconds to be added to UTC, <em>tt_isdst</em> tells whether <em>tm_isdst</em> should be set by <a href="../man3/localtime.3.html"><strong>localtime</strong>(3)</a>, and <em>tt_abbrind</em> serves as an index into the array of timezone abbreviation characters that follow the <em>ttinfo</em> structure(s) in the file.</p><p>Then there are <em>tzh_leapcnt</em> pairs of four-byte values, written in standard byte order; the first value of each pair gives the time (as returned by <a href="../man2/time.2.html"><strong>time</strong>(2)</a>) at which a leap second occurs; the second gives the <em>total</em> number of leap seconds to be applied after the given time. The pairs of values are sorted in ascending order by time.</p><p>Then there are <em>tzh_ttisstdcnt</em> standard/wall indicators, each stored as a one-byte value; they tell whether the transition times associated with local time types were specified as standard time or wall clock time, and are used when a timezone file is used in handling POSIX-style timezone environment variables.</p><p>Finally, there are <em>tzh_ttisgmtcnt</em> UTC/local indicators, each stored as a one-byte value; they tell whether the transition times associated with local time types were specified as UTC or local time, and are used when a timezone file is used in handling POSIX-style timezone environment variables.</p><p><a href="../man3/localtime.3.html"><strong>localtime</strong>(3)</a> uses the first standard-time <em>ttinfo</em> structure in the file (or simply the first <em>ttinfo</em> structure in the absence of a standard-time structure) if either <em>tzh_timecnt</em> is zero or the time argument is less than the first transition time recorded in the file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>This manual page documents <em>&lt;tzfile.h&gt;</em> in the glibc source archive, see <em>timezone/tzfile.h</em>.</p><p>It seems that timezone uses <strong>tzfile</strong> internally, but glibc refuses to expose it to userspace.  This is most likely because the standardised functions are more useful and portable, and actually documented by glibc.  It may only be in glibc just to support the non-glibc-maintained timezone data (which is maintained by some other entity).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tzfile&hellip;</h2>
        <div class="sectioncontent">
<p><strong>time</strong>(3), <strong>gettimeofday</strong>(3), <a href="../man3/tzset.3.html"><strong>tzset</strong>(3)</a>, <a href="../man3/ctime.3.html"><strong>ctime</strong>(3)</a></p><p>For version-2-format timezone files, the above header and data is followed by a second header and data, identical in format except that eight bytes are used for each transition time or leap-second time. After the second header and data comes a newline-enclosed, POSIX-TZ-environment-variable-style string for use in handling instants after the last transition time stored in the file (with nothing between the newlines if there is no POSIX representation for such instants).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tzfile&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/ctime.3.html"><strong>ctime</strong>(3)</a>, <a href="../man3/tzset.3.html"><strong>tzset</strong>(3)</a>, <a href="../man8/tzselect.8.html"><strong>tzselect</strong>(8)</a>,</p><p><em>timezone/tzfile.h</em> in the glibc source tree</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COLOPHON</h2>
        <div class="sectioncontent">
<p>This page is part of release 3.74 of the Linux <em>man-pages</em> project. A description of the project, information about reporting bugs, and the latest version of this page, can be found at http://www.kernel.org/doc/man-pages/.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="typerules.5.html"><span aria-hidden="true">&larr;</span> typerules.5: \*(fx file type identification and conversion rules</a></li>
   <li class="next"><a href="ubuntu-dev-tools.5.html">ubuntu-dev-tools.5: Configuration for the ubuntu-dev-tools package. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
