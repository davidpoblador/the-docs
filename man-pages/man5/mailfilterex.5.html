<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mailfilterex: Mailfilter configuration file examples</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Mailfilter configuration file examples">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mailfilterex (5) manual">
  <meta name="twitter:description" content="Mailfilter configuration file examples">
  <meta name="twitter:image" content="https://www.carta.tech/images/mailfilter-mailfilterex-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/mailfilterex.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mailfilterex (5) manual" />
  <meta property="og:description" content="Mailfilter configuration file examples" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mailfilter-mailfilterex-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mailfilterex<small> (5)</small></h1>
        <p class="lead">Mailfilter configuration file examples</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/mailfilterex.5.html">
      <span itemprop="name">mailfilterex: Mailfilter configuration file examples</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mailfilter/">
      <span itemprop="name">mailfilter</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/mailfilterex.5.html">
      <span itemprop="name">mailfilterex: Mailfilter configuration file examples</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>$HOME/.mailfilterrc examples</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>For a description of the rcfile format and its keywords see the <a href="../man5/mailfilterrc.5.html"><strong>mailfilterrc</strong>(5)</a> man page or get a basic set of options from either the INSTALL file or the doc/ directory of the Mailfilter distribution.</p><p>This man page contains several configuration examples and real-life use cases for the Mailfilter program.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>If not stated otherwise, the following examples assume you are using extended Regular Expressions, compared to Mailfilter's default, basic type. General information on Regular Expressions can be found in the <a href="../man7/regex.7.html"><strong>regex</strong>(7)</a> man page or in any good book on UNIX/POSIX. You could also use slightly modified examples from <strong>procmail</strong>(1) if it is available on your system.</p><h3>Filtering Domains</h3>
<p>To create a very restrictive set of filter rules at least two keywords should be used: ALLOW and DENY. DENY could match all messages coming from an annoying public mail service, while ALLOW matches messages from a good friend who also uses this annoying public mailer.</p><p>DENY = "^From:.*public-mail&#92;.com"</p><p>ALLOW = "^From:.*friend@public-mail&#92;.com"</p><p>These two lines are enough to block all but your friend's e-mail from the public-mail.com domain.</p>
<h3>Case Sensivity</h3>
<p>In general case-sensivity is controlled by the REG_CASE keyword. Having Mailfilter treat expressions case-insensitive is almost always more efficient.</p><p>REG_CASE = "no"</p><p>DENY = "^Subject:.*win money"</p><p>In this example Mailfilter would delete all messages with subject lines like `WIN MONEY', `Win Money' or any other mix of capital and non-capital characters. REG_CASE makes filters ignore the case.</p><p>A more complex set up can be achieved by additionally using the DENY_CASE keyword.</p><p>DENY_CASE = "^Subject:.*BUSINESS"</p><p>In this example only e-mails that have `BUSINESS' in their subject match the filter, even though in general Mailfilter ignores the case. So in this example all messages with `business' or `Business' in their subjects would not be affected by this filter.</p><p>Such an option is very useful if you are not interested in commercial bulk mail that offers amazing business opportunities, but in all your business partners who contact you by e-mail.</p>
<h3>Defining Friends</h3>
<p>The keyword ALLOW can be used to override any spam filters. Similar to the earlier example ALLOW defines a `friend'.</p><p>ALLOW = "^Subject:.*mailfilter"</p><p>Adding this rule to the rcfile would mean all messages that contain anything about Mailfilter in their subject lines can pass the spam filters. But even friends tend to send large e-mails sometimes to share their joy about the latest joke that just made the round in their office. In such cases a limit can be defined that affects particularly `friends'.</p><p>MAXSIZE_ALLOW = 500000</p><p>Setting MAXSIZE_ALLOW to 500000 means no message can be larger than 500 kBytes. (Scanned `office-jokes' are usually around that size.)</p>
<h3>Negative Message Filters</h3>
<p>In order to create a very restrictive spam protection it can be more useful sometimes to define which e-mails should not be deleted instantly and consequently get rid of messages that can not be matched to this criterion - rather than vice versa. This can be achieved by using negation. The typical use case is looking at the message tags `To:' or `Cc:' of an e-mail.</p><p>DENY &lt;&gt; "^(To|Cc):.*my-email@address&#92;.com"</p><p>Having added such a filter to your personal rule set keeps away a lot of spam that is not directly addressed to your e-mail account. Since this is a very aggressive way of filtering, you are well advised to keep your `friends list' up to date. Also note that the above example, using the logical OR operator, works only with extended Regular Expressions.</p>
<h3>Scores</h3>
<p>Instead of setting up spam filters, it is also possible to define scores which can be accumulated until a certain threshold is reached.  This is very useful to delete advertisements on mailing lists, for instance.  Highscore marks the threshold:</p><p>HIGHSCORE = 100</p><p>SCORE +100 = "^Subject:.*viagra"</p><p>SCORE +100 = "^Content-Type:.*html"</p><p>SCORE -100 = "^(To|From):.*my_mailing_list"</p><p>This simple example is useful to delete mails with a score greater than 100, i.e. if someone sends an HTML mail to my_mailing_list, the message will reach score 0.  However, should an HTML mail regarding Viagra reach the list, then the message will classify as spam, because it reached an overall score of 100.</p><p>The MAXSIZE_SCORE keyword can be used to add to the accumulated score for an e-mail.  The following will cause all emails not directly addressed to the recipient and greater than 60000 bytes in size to be deleted (a useful way of rejecting many common MS targeted worms and trojans which can clog up your inbox).</p><p>HIGHSCORE = 100</p><p>MAXSIZE_SCORE +50 = 60000</p><p>SCORE +50 &lt;&gt; "^(To|Cc):.*my-email@address&#92;.com"</p><p>This is a less aggressive way of dealing with e-mail sizes than the using the MAXSIZE_DENY keyword.  Note that this example (by using the expression (To|Cc):.*my-email@address&#92;.com) works only with extended Regular Expressions.</p>
<h3>General Message Size Limits</h3>
<p>It is always a good idea to define a very general size limit for e-mails. Mailfilter uses the keyword MAXSIZE_DENY for that purpose.</p><p>MAXSIZE_DENY = 200000</p><p>Setting it to 200 kBytes can save you a couple of hours, depending on how much mail you get everyday. Messages bigger than that get deleted on the server, unless they match any of the ALLOW rules. To achieve maximum efficiency it makes sense to use both MAXSIZE_DENY and MAXSIZE_ALLOW. No one should block up your mail box, no `friends', no others.</p><p>A rule of thumb is to be twice as tolerant towards friends than you are towards anonymous people.</p>
<h3>Dealing with Duplicates</h3>
<p>Most people want to download a message only once, even though it might have been sent to two or three of their accounts at the same time. The simple line</p><p>DEL_DUPLICATES = "yes"</p><p>will take care of duplicates and makes sure that only one copy of a message has to be delivered.</p>
<h3>Normalisation of Message Subjects</h3>
<p>Every now and then some clever sales person comes up with the brilliant idea to wrap spam in funny little characters. If you get a message with a subject line similar to this one `,L.E-G,A.L; ,C.A-B`L`E, .B-O`X`', then ordinary filters would fail to detect the junk.</p><p>NORMAL = "yes"</p><p>Adding this directive to the rcfile tells Mailfilter to `normalise' subject strings, i.e. leave in only the alpha-numeric characters and delete the rest. `,L.E-G,A.L; ,C.A-B`L`E, .B-O`X`' would then become `LEGAL CABLE BOX' which can easily be matched to a spam filter.</p><p>Note that Mailfilter first tries to match the original subject string, before it checks on the normalised one.</p>
<h3>Control Mechanism</h3>
<p>Since Mailfilter deletes e-mails remotely, before they have to be downloaded into the local machine, it is also important to know what is going on while the program is being executed. The least you should do is define a proper level of verbosity and a log file.</p><p>LOGFILE = "$HOME/logs/mailfilter-`date +"%h%y"'"</p><p>VERBOSE = 3</p><p>Level three is the default verbosity level. Using it, Mailfilter reports information on deleted messages, run-time errors and dates to the screen and the log file.</p><p>You can use `command' to embedd shell skripts into your path names.  In the above example it is used to store log files separately for each month and year.</p>
<h3>Extended Regular Expressions</h3>
<p>For advanced applications, the basic Regular Expressions are typically not sufficient. If you know the syntax and usage of the extended expressions, it is almost always a good idea to set REG_TYPE accordingly.</p><p>REG_TYPE = "extended"</p><p>Extended expressions are more flexible, but also more sensitive towards syntax errors and the like.  Examples in this man page all use extended type.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>If you are new to Regular Expressions and new to Mailfilter, you might want to experiment a bit, before you accidently delete messages for real. For such cases Mailfilter provides two keywords. TEST can be used to only simulate the deletion of messages and SHOW_HEADERS stores all the e-mail headers that get examined by the program.</p><p>TEST = "yes"</p><p>SHOW_HEADERS = "$HOME/logs/mailfilter-headers.txt"</p><p>Use this setup if you are not yet comfortable with the concept of spam filtering. It may help to understand Regular Expressions better and how to use them.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mailfilterex&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/mailfilter.1.html"><strong>mailfilter</strong>(1)</a>, <a href="../man5/mailfilterrc.5.html"><strong>mailfilterrc</strong>(5)</a>, <strong>procmailrc</strong>(5), <strong>procmailex</strong>(5), <a href="../man7/regex.7.html"><strong>regex</strong>(7)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2000-2014 Andreas Bauer &lt;baueran@gmail.com&gt;</p><p>This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mailfilter.5.html"><span aria-hidden="true">&larr;</span> mailfilter.5: Maildrops filtering language</a></li>
   <li class="next"><a href="mailfilterrc.5.html">mailfilterrc.5: Mailfilter configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
