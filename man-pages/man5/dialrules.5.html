<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dialrules: \*(fx dial string processing rules</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="\*(fx dial string processing rules">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dialrules (5) manual">
  <meta name="twitter:description" content="\*(fx dial string processing rules">
  <meta name="twitter:image" content="https://www.carta.tech/images/hylafax-server-dialrules-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/dialrules.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dialrules (5) manual" />
  <meta property="og:description" content="\*(fx dial string processing rules" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/hylafax-server-dialrules-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dialrules<small> (5)</small></h1>
        <p class="lead">\*(fx dial string processing rules</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/dialrules.5.html">
      <span itemprop="name">dialrules: \*(fx dial string processing rules</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/hylafax-server/">
      <span itemprop="name">hylafax-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/dialrules.5.html">
      <span itemprop="name">dialrules: \*(fx dial string processing rules</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>A dial string specifies how to dial the telephone in order to reach a destination facsimile machine, or similar device. This string is supplied by a user with each outgoing facsimile job. User-supplied dial strings need to be processed in two ways by the \*(Fx server processes: to craft a canonical phone number for use in locating the receiver's capabilities, and to process into a form suitable for sending to a modem. In addition client applications may need to process a dial string to formulate an external form that does not include private information such as a credit card access code. Phone number canonicalization and dial string preparation are done according to <em>dial string processing rules</em> that are located in a file specified in the server configuration file; see the <strong>DialStringRules</strong> parameter in <a href="../man5/hylafax-config.5.html"><strong>hylafax-config</strong>(5)</a>. The generation of an externalized form for a dial string is done by rules that optionally appear in <em>/etc/hylafax/dialrules</em> on client machines.</p><p>A dial string rules file is an <small>ASCII</small> file containing one or more <em>rule sets</em>. A rule set defines a set of <em>transformation rules</em> that are sequentially applied to a dial string. Each rule set is associated with an identifier, with certain well-known identifiers being used by the facsimile server or client application. Each transformation rule is a regular expression and a replacement string; the regular expression is repeatedly applied to a dial string and any matching substring is replaced by the replacement string.</p><p>The syntax of a dial string rules file is as follows. Comments are introduced with the ``!'' character and continue to the end of the current line. Identifiers are formed from a leading alphabetic and any number of subsequent alpha-numeric characters. A rule set is of the form:</p>
<pre>
<em>Identifier</em> <strong>:= [</strong>
    <em>rule1</em>
    <em>rule2</em>
    ...
<strong>]</strong>
</pre>
<p>where <em>rule1</em>, <em>rule2</em>, and so on are transformation rules. Line breaks are significant. The initial rule set definition line and the trailing ``]'' must be on separate lines; and each transformation rule must also be on a single line. Transformation rules are of the form:</p>
<pre>
<em>regular-expression</em> <strong>=</strong> <em>replacement</em>
</pre>
<p>where <em>regular-expression</em> is a <small>POSIX</small> 1003.2 extended regular expression and <em>replacement</em> is a string that is substituted in place of any portion of the dial string that is matched by the <em>regular-expression</em>. White space is significant in parsing transformation rules. If a regular expression or replacement string has embedded white space in it, then the white space needs to be escaped with a ``&#92;'' character or the entire string should be enclosed in quote (``"'') marks. Replacement strings may reference the entire string matched by the regular expression with the ``&'' character. Substrings matched with the ``(...)'' constructs may be referenced by using ``&#92;<em>n</em>'' where <em>n</em> is a single numeric digit between 1 and 9 that refers to the <em>n</em>-th matched substring; c.f. <a href="../man7/re_format.7.html"><strong>re_format</strong>(7)</a>, <a href="../man1/sed.1.html"><strong>sed</strong>(1)</a>, etc.</p><p>To simplify and parameterize the construction of rule sets, dial string rules files may also include simple text-oriented variable definitions. A line of the form:</p>
<pre>
<em>foo</em><strong>=</strong><em>string</em>
</pre>
<p>defines a variable named <em>foo</em> that has the value <em>string</em>. String values with embedded whitespace must use the ``&#92;'' character or be enclosed in quote marks. Variables are interpolated into transformation rules by referencing them as:</p>
<pre>
<strong>${</strong><em>var</em><strong>}</strong>
</pre>
<p>Note that variable interpolation is done only once, at the time a transformation rule is defined. This means that forward references are not supported and that circular definitions will not cause loops. The facsimile server automatically defines four variables to have the values defined in its configuration file: <strong>AreaCode</strong>, <strong>CountryCode</strong>, <strong>LongDistancePrefix</strong>, and <strong>InternationalPrefix</strong> These variables are initialized before parsing a dial string rules file; thus if they are defined in the rules file then they will override any definition by the server.</p><p>There are three well known rule set names: <em>CanonicalNumber</em> to convert a dial string to a canonical format, <em>DialString</em> to prepare a dial string before using it to dial the telephone, and <em>DisplayNumber</em> to convert a dial string to an external ``displayable'' form that does not include the private information that might appear in the raw dial string.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>This is the default set of rules for transforming a dial string into a canonical phone number:</p>
<pre>
Area=${AreaCode}	! local area code
Country=${CountryCode}	! local country code
IDPrefix=${InternationalPrefix}	! prefix for placing an international call
LDPrefix=${LongDistancePrefix}	! prefix for placing a long distance call
!
! Convert a phone number to a canonical format:
!
!    +&lt;country&gt;&lt;areacode&gt;&lt;rest&gt;
!
! by (possibly) stripping off leading dialing prefixes for
! long distance and/or international dialing.
!
CanonicalNumber := [
%.*	=		! strip calling card stuff
[abcABC]	= 2	! these convert alpha to numbers
[defDEF]	= 3
[ghiGHI]	= 4
[jklJKL]	= 5
[mnoMNO]	= 6
[prsPRS]	= 7
[tuvTUV]	= 8
[wxyWXY]	= 9
[^+0-9]+	=		! strip white space etc.
^${IDPrefix}	= +		! replace int. dialing code
^${LDPrefix}	= +${Country}	! replace l.d. dialing code
^[^+]	= +${Country}${Area}&	! otherwise, insert canon form
]
</pre>
<p>The first rule simply strips anything following a ``%''; this will remove any calling card-related information. The next eight rules convert upper and lower case alphabetics to the equivalent key numbers (this is convenient for users that use mnemonic phone numbers). The tenth rule removes everything but numbers and plus signs. The eleventh rule translates any explicit international dialing prefix into the ``+'' symbol used to identify country codes. The twelfth rule replaces a leading long distance dialing prefix with the local country code string. The last rule matches local phone numbers and inserts the local country code and area code.</p><p>As an example, assume that</p>
<pre>
AreaCode=415
CountryCode=1
InternationalPrefix=011
LongDistancePrefix=1
</pre>
<p>then if the above set of rules is applied to ``01123965-Tube%2345'', the transformations would be:</p>
<pre>
01123965-Tube%2345	01123965-Tube	! strip calling card stuff
01123965-Tube	01123965-8823	! convert alphabetics
01123965-8823	011239658823		! strip white space etc.
011239658823	+239658823	! replace int. dialing code
+239658823	+239658823	! replace l.d. dialing code
+239658823	+239658823	! otherwise, insert canon form
</pre>
<p>for a final result of ``+239658823''.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dialrules&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/sendfax.1.html"><strong>sendfax</strong>(1)</a>, <a href="../man8/dialtest.8.html"><strong>dialtest</strong>(8)</a>, <a href="../man8/faxq.8.html"><strong>faxq</strong>(8)</a>, <a href="../man8/faxsend.8.html"><strong>faxsend</strong>(8)</a>, <a href="../man8/faxgetty.8.html"><strong>faxgetty</strong>(8)</a>, <a href="../man5/hylafax-config.5.html"><strong>hylafax-config</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dhcpy6d.conf.5.html"><span aria-hidden="true">&larr;</span> dhcpy6d.conf.5: Configuration file for dhcpv6 server dhcpy6d</a></li>
   <li class="next"><a href="diameter_dict.5.html">diameter_dict.5: Dictionary interface of the diameter application. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
