<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gvpe.osdep: Os dependent information</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Os dependent information">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gvpe.osdep (5) manual">
  <meta name="twitter:description" content="Os dependent information">
  <meta name="twitter:image" content="https://www.carta.tech/images/gvpe-gvpe.osdep-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/gvpe.osdep.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gvpe.osdep (5) manual" />
  <meta property="og:description" content="Os dependent information" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gvpe-gvpe.osdep-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gvpe.osdep<small> (5)</small></h1>
        <p class="lead">Os dependent information</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/gvpe.osdep.5.html">
      <span itemprop="name">gvpe.osdep: Os dependent information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gvpe/">
      <span itemprop="name">gvpe</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/gvpe.osdep.5.html">
      <span itemprop="name">gvpe.osdep: Os dependent information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This file tries to capture OS-dependent configuration or build issues, quirks and platform limitations, as known.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TUN vs. TAP interface</h2>
        <div class="sectioncontent">
<p>Most operating systems nowadays support something called a <em>tunnel</em>-device, which makes it possible to divert IPv4 (and often other protocols, too) into a user space daemon like \*(C`gvpe\*(C'. This is being referred to as a TUN-device.</p><p>This is fine for point-to-point tunnels, but for a virtual ethernet, an additional ethernet header is needed. This functionality (called a \s-1TAP\s0 device here) is only provided by a subset of the configurations.</p><p>On platforms only supporting a TUN-device, gvpe will invoke it's magical ethernet emulation package, which currently only handles \s-1ARP\s0 requests for the IPv4 protocol (but more could be added, bu the tincd network drivers might need to be modified for this to work). This means that on those platforms, only IPv4 will be supported.</p><p>Also, since there is no way (currently) to tell gvpe which \s-1IP\s0 subnets are found on a specific host, you will either need to hardwire the \s-1MAC\s0 address for TUN-style hosts on all networks (and avoid \s-1ARP\s0 altogether, which is possible), or you need to send a packet from these hosts into the vpn network to tell gvpe the local interface address.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Interface Initialisation</h2>
        <div class="sectioncontent">
<p>Unless otherwise notes, the network interface will be initialized with the expected \s-1MAC\s0 address and correct \s-1MTU\s0 value. With most interface drivers, this is done by running \*(C`/sbin/ifconfig\*(C', so make sure that this command exists.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Interface Types</h2>
        <div class="sectioncontent">
<p><strong>&#92;$1</strong></p><p>TAP-device; already part of the kernel (only 2.4+ supported, but see tincd/linux). This is the configuration tested best, as gvpe is being developed on this platform.</p><p>\*(C`ifname\*(C' should be set to the name of the network device.</p><p>To hardwire \s-1ARP\s0 addresses, use iproute2 (\*(C`arp\*(C' can do it, too):</p>
<pre>
  MAC=fe:fd:80:00:00:$(printf "%02x" $NODEID)
  ip neighbour add 10.11.12.13 lladdr $MAC nud permanent dev $IFNAME
</pre>
<p>TAP-device; already part of the kernel (2.2 only). See \*(C`native/linux\*(C' for more info.</p><p>\*(C`ifname\*(C' should be set to the path of a tap device, e.g. \*(C`/dev/tap0\*(C'. The interface will be named accordingly. TAP-device; The \s-1TAP\s0 device to be used must either be the \s-1CIPE\s0 driver (\*(C`http://cipe-win32.sourceforge.net/\*(C'), or (highly recommended) the newer TAP-Win32 driver bundled with openvpn (http://openvpn.sf.net/). Just download and run the openvpn installer. The only option you need to select is the \s-1TAP\s0 driver.</p><p>\*(C`ifname\*(C' should be set to the name of the device, found in the registry at (no kidding :):</p><p>      HKEY_LOCAL_MACHINE&#92;SYSTEM&#92;CurrentControlSet&#92;Control&#92;Network&#92;{4D36E972-E325-11CE-BFC1-08002BE10318}&#92;&lt;adapterid&gt;&#92;Connection&#92;Name</p><p>The \s-1MAC\s0 address is dynamically being patched into packets and ARP-requests, so only IPv4 works with \s-1ARP\s0 on this platform. TAP-device, maybe; migth work for many bsd variants.</p><p>This driver is a newer version of the \*(C`tincd/*bsd\*(C' drivers. It <em>might</em> provide a \s-1TAP\s0 device, or might not work at all. You might try this interface type first, and, if it doesn't work, try one of the OS-specific drivers. TAP-device; part of the kernel (since 4.x, maybe earlier).</p><p>\*(C`ifname\*(C' should be set to the path of a tap device, e.g. \*(C`/dev/tap0\*(C'. The interface will be named accordingly.</p><p>These commands might be helpful examples:</p><p>  ifconfig $IFNAME 10.0.0.$NODEID   route add -net 10.0.0.0 -netmask 255.255.255.0 -interface $IFNAME 10.0.0.$NODEID TUN-device; The interface is a point-to-point device. To initialize it, you currently need to configure it as a point-to-point device, giving it an address on your vpn (the exact address doesn't matter), like this:</p><p>  ifconfig $IFNAME mtu $MTU up   ifconfig $IFNAME 10.11.12.13 10.55.66.77   route add -net 10.0.0.0 10.55.66.77 255.0.0.0   ping -c1 10.55.66.77 # ping once to tell gvpe your gw ip</p><p>The ping is required to tell the \s-1ARP\s0 emulator inside \s-1GVPE\s0 the local \s-1IP\s0 address.</p><p>\*(C`ifname\*(C' should be set to the path of a tun device, e.g. \*(C`/dev/tun0\*(C'. The interface will be named accordingly. TUN-device; already part of the kernel. See \*(C`tincd/netbsd\*(C' for more information. TAP-device;</p><p>The necessary kernel extension can be found here:</p><p>  http://www-user.rhrk.uni-kl.de/~nissler/tuntap/</p><p>There are two drivers, the one to use is the \*(L"tap\*(R" driver. It driver must be loaded before use, read the docs on how to install it as a startup item.</p><p>\*(C`ifname\*(C' should be set to the path of a tap device, e.g. \*(C`/dev/tap0\*(C'. The interface will be named accordingly.</p><p>These commands might be helpful examples:</p><p>  ifconfig $IFNAME 10.0.0.$NODEID   route add -net 10.0.0.0 -interface $IFNAME 255.255.255.0 TUN-device; See \*(C`tincd/netbsd\*(C' for more information. \*(C`native/darwin\*(C' is preferable.</p><p>The necessary kernel extension can be found here:</p><p>  http://chrisp.de/en/projects/tunnel.html</p><p>\*(C`ifname\*(C' should be set to the path of a tun device, e.g. \*(C`/dev/tun0\*(C'. The interface will be named accordingly.</p><p>The driver must be loaded before use:</p><p>  kmodload tunnel TUN-device; already part of the kernel(?), or available here:</p><p>  http://vtun.sourceforge.net/tun/</p><p>Some precompiled tun drivers might be available here:</p><p>  http://www.monkey.org/~dugsong/fragroute/</p><p>The interface \s-1MAC\s0 and \s-1MTU\s0 are <em>\s-1NOT\s0</em> set up for you. Please try it out and send me an \*(C`ifconfig\*(C' command invocation that does that.</p><p>See \*(C`tincd/netbsd\*(C' for more information.</p><p>Completely untested so far. TAP-device; see \*(C`native/cygwin\*(C' for more information.</p><p>The setup is likely to be similar to \*(C`native/cygwin\*(C'.</p><p>Completely untested so far. TAP-device; purpose unknown and untested, probably binds itself on an existing ethernet device (given by \*(C`ifname\*(C'). It must be down prior to running the command, and \s-1GVPE\s0 will try to set it's \s-1MAC\s0 address and \s-1MTU\s0 to the \*(L"correct\*(R" values.</p><p>Completely untested so far. TAP-device; purpose unknown and untested, probably creates a \s-1UNIX\s0 datagram socket (path given by \*(C`ifname\*(C') and reads and writes raw packets, so might be useful in other than \s-1UML\s0 contexts.</p><p>No network interface is created, and the \s-1MAC\s0 and \s-1MTU\s0 must be set as appropriate on the other side of the socket.  \s-1GVPE\s0 will exit if the \s-1MAC\s0 address doesn't match what it expects.</p><p>Completely untested so far. Known to be broken, use \*(C`native/cygwin\*(C' instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gvpe.osdep&hellip;</h2>
        <div class="sectioncontent">
<p><em>gvpe</em>\|(5).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Marc Lehmann &lt;gvpe@schmorp.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gvpe.5.html"><span aria-hidden="true">&larr;</span> gvpe.5: Overview of the gnu virtual private ethernet suite.</a></li>
   <li class="next"><a href="halt.5.html">halt.5: Variables that affect the behavior of the shutdown scripts <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
