<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ext: Format of .ext files produced by magic's hierarchical extractor</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Format of .ext files produced by magic's hierarchical extractor">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ext (5) manual">
  <meta name="twitter:description" content="Format of .ext files produced by magic's hierarchical extractor">
  <meta name="twitter:image" content="https://www.carta.tech/images/magic-ext-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/ext.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ext (5) manual" />
  <meta property="og:description" content="Format of .ext files produced by magic's hierarchical extractor" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/magic-ext-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ext<small> (5)</small></h1>
        <p class="lead">Format of .ext files produced by magic's hierarchical extractor</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/ext.5.html">
      <span itemprop="name">ext: Format of .ext files produced by magic's hierarchical extractor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/magic/">
      <span itemprop="name">magic</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/ext.5.html">
      <span itemprop="name">ext: Format of .ext files produced by magic's hierarchical extractor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Magic's extractor produces a <strong>.ext</strong> file for each cell in a hierarchical design. The <strong>.ext</strong> file for cell <em>name</em> is <em>name</em><strong>.ext</strong>. This file contains three kinds of information: environmental information (scaling, timestamps, etc), the extracted circuit corresponding to the mask geometry of cell <em>name</em>, and the connections between this mask geometry and the subcells of <em>name</em>.</p><p>A <strong>.ext</strong> file consists of a series of lines, each of which begins with a keyword.  The keyword beginning a line determines how the remainder of the line is interpreted.  The following set of keywords define the environmental information:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>tech&nbsp;</strong><em>techname</em></p>
  </dt>
  <dd>
    <p>Identifies the technology of cell <em>name</em> as <em>techname</em>, e.g, <strong>nmos</strong>, <strong>cmos</strong>.</p>
  </dd>
  <dt>
    <p><strong>timestamp&nbsp;</strong><em>time</em></p>
  </dt>
  <dd>
    <p>Identifies the time when cell <em>name</em> was last modified. The value <em>time</em> is the time stored by Unix, i.e, seconds since 00:00 GMT January 1, 1970. Note that this is <em>not</em> the time <em>name</em> was extracted, but rather the timestamp value stored in the <strong>.mag</strong> file. The incremental extractor compares the timestamp in each <strong>.ext</strong> file with the timestamp in each <strong>.mag</strong> file in a design; if they differ, that cell is re-extracted.</p>
  </dd>
  <dt>
    <p><strong>version&nbsp;</strong><em>version</em></p>
  </dt>
  <dd>
    <p>Identifies the version of <strong>.ext</strong> format used to write <em>name</em><strong>.ext</strong>. The current version is <strong>5.1</strong>.</p>
  </dd>
  <dt>
    <p><strong>style&nbsp;</strong><em>style</em></p>
  </dt>
  <dd>
    <p>Identifies the style that the cell has been extracted with.</p>
  </dd>
  <dt>
    <p><strong>scale&nbsp;</strong><em>rscale&nbsp;cscale&nbsp;lscale</em></p>
  </dt>
  <dd>
    <p>Sets the scale to be used in interpreting resistance, capacitance, and linear dimension values in the remainder of the <strong>.ext</strong> file. Each resistance value must be multiplied by <em>rscale</em> to give the real resistance in milliohms.  Each capacitance value must be multiplied by <em>cscale</em> to give the real capacitance in attofarads. Each linear dimension (e.g, width, height, transform coordinates) must be multiplied by <em>lscale</em> to give the real linear dimension in centimicrons. Also, each area dimension (e.g, transistor channel area) must be multiplied by <em>scale*scale</em> to give the real area in square centimicrons. At most one <strong>scale</strong> line may appear in a <strong>.ext</strong> file. If none appears, all of <em>rscale</em>, <em>cscale</em>, and <em>lscale</em> default to 1.</p>
  </dd>
  <dt>
    <p><strong>resistclasses&nbsp;</strong><em>r1 r2 ...</em></p>
  </dt>
  <dd>
    <p>Sets the resistance per square for the various resistance classes appearing in the technology file. The values <em>r1</em>, <em>r2</em>, etc. are in milliohms; they are not scaled by the value of <em>rscale</em> specified in the <strong>scale</strong> line above. Each node in a <strong>.ext</strong> file has a perimeter and area for each resistance class; the values <em>r1</em>, <em>r2</em>, etc. are used to convert these perimeters and areas into actual node resistances.  See ``Magic Tutorial #8: Circuit Extraction'' for a description of how resistances are computed from perimeters and areas by the program <strong>ext2sim</strong>.</p>
  </dd>

</dl>
<p>The following keywords define the circuit formed by the mask information in cell <em>name</em>.  This circuit is extracted independently of any subcells; its connections to subcells are handled by the keywords in the section after this one.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>node </strong><em>name R C x y type a1 p1 a2 p2 ... aN pN</em></p>
  </dt>
  <dd>
    <p>Defines an electrical node in <em>name</em>.  This node is referred to by the name <em>name</em> in subsequent <strong>equiv</strong> lines, connections to the terminals of transistors in <strong>fet</strong> lines, and hierarchical connections or adjustments using <strong>merge</strong> or <strong>adjust</strong>. The node has a total capacitance to ground of <em>C</em> attofarads, and a lumped resistance of <em>R</em> milliohms. For purposes of going back from the node name to the geometry defining the node, <em>(x,\|y)</em> is the coordinate of a point inside the node, and <em>type</em> is the layer on which this point appears. The values <em>a1</em>, <em>p1</em>, ... <em>aN</em>, <em>pN</em> are the area and perimeter for the material in each of the resistance classes described by the <strong>resistclasses</strong> line at the beginning of the <strong>.ext</strong> file; these values are used to compute adjusted hierarchical resistances more accurately. <strong>NOTE:</strong> since many analysis tools compute transistor gate capacitance themselves from the transistor's area and perimeter, the capacitance between a node and substrate (GND!) normally does not include the capacitance from transistor gates connected to that node. If the <strong>.sim</strong> file was produced by <em>ext2sim</em>\|(1), check the technology file that was used to produce the original <strong>.ext</strong> files to see whether transistor gate capacitance is included or excluded; see ``Magic Maintainer's Manual #2: The Technology File'' for details.</p>
  </dd>
  <dt>
    <p><strong>attr </strong><em>name xl yl xh yh type text</em></p>
  </dt>
  <dd>
    <p>One of these lines appears for each label ending in the character ``<strong>@</strong>'' that was attached to geometry in the node <em>name</em>. The location of each attribute label (<em>xl yl xh yh</em>) and the type of material to which it was attached (<em>type</em>) are given along with the text of the label minus the trailing ``<strong>@</strong>'' character (<em>text</em>).</p>
  </dd>
  <dt>
    <p><strong>equiv&nbsp;</strong><em>node1&nbsp;node2</em></p>
  </dt>
  <dd>
    <p>Defines two node names in cell <em>name</em> as being equivalent: <em>node1</em> and <em>node2</em>.  In a collection of node names related by <strong>equiv</strong> lines, exactly one must be defined by a <strong>node</strong> line described above.</p>
  </dd>
  <dt>
    <p><strong>fet&nbsp;</strong><em>type&nbsp;xl&nbsp;yl&nbsp;xh&nbsp;yh&nbsp;area&nbsp;perim&nbsp;sub&nbsp;GATE&nbsp;T1&nbsp;T2&nbsp;...</em></p>
  </dt>
  <dd>
    <p>Defines a transistor in <em>name</em>.  The kind of transistor is <em>type</em>, a string that comes from the technology file and is intended to have meaning to simulation programs. The coordinates of a square entirely contained in the gate region of the transistor are <em>(xl,&nbsp;yl)</em> for its lower-left and <em>(xh,&nbsp;yh)</em> for its upper-right.  All four coordinates are in the <em>name</em>'s coordinate space, and are subject to scaling as described in <strong>scale</strong> above. The gate region of the transistor has area <em>area</em> square centimicrons and perimeter <em>perim</em> centimicrons.  The substrate of the transistor is connected to node <em>sub</em>.</p><p>The remainder of a <strong>fet</strong> line consists of a series of triples: <em>GATE</em>, <em>T1</em>, .... Each describes one of the terminals of the transistor; the first describes the gate, and the remainder describe the transistor's non-gate terminals (e.g, source and drain). Each triple consists of the name of a node connecting to that terminal, a terminal length, and an attribute list. The terminal length is in centimicrons; it is the length of that segment of the channel perimeter connecting to adjacent material, such as polysilicon for the gate or diffusion for a source or drain.</p><p>The attribute list is either the single token ``0'', meaning no attributes, or a comma-separated list of strings. The strings in the attribute list come from labels attached to the transistor. Any label ending in the character ``<strong>^</strong>'' is considered a gate attribute and appears on the gate's attribute list, minus the trailing ``<strong>^</strong>''. Gate attributes may lie either along the border of a channel or in its interior. Any label ending in the character ``<strong>$</strong>'' is considered a non-gate attribute. It appears on the list of the terminal along which it lies, also minus the trailing ``<strong>$</strong>''. Non-gate attributes may only lie on the border of the channel.</p>
  </dd>

</dl>
<p>The keywords in this section describe information that is not processed hierarchically: path lengths and accurate resistances that are computed by flattening an entire node and then producing a value for the flattened node.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>killnode&nbsp;</strong><em>node</em></p>
  </dt>
  <dd>
    <p>During resistance extraction, it is sometimes necessary to break a node up into several smaller nodes.  The appearance of a <strong>killnode</strong> line during the processing of a <strong>.ext</strong> file means that all information currently accumulated about <em>node</em>, along with all fets that have a terminal connected to <em>node</em>, should be thrown out; it will be replaced by information later in the <strong>.ext</strong> file.  The order of processing <strong>.ext</strong> files is important in order for this to work properly: children are processed before their parents, so a <strong>killnode</strong> in a parent overrides one in a child.</p>
  </dd>
  <dt>
    <p><strong>resist&nbsp;</strong><em>node1&nbsp;node2&nbsp;R</em></p>
  </dt>
  <dd>
    <p>Defines a resistor of <em>R</em> milliohms between the two nodes <em>node1</em> and <em>node2</em>.  Both names are hierarchical.</p>
  </dd>
  <dt>
    <p><strong>distance&nbsp;</strong><em>name1&nbsp;name2&nbsp;dmin&nbsp;dmax</em></p>
  </dt>
  <dd>
    <p>Gives the distance between two electrical terminals <em>name1</em> (a driver) and <em>name2</em> (a receiver).  Note that these are terminals and not nodes: the names (which are hierarchical label names) are used to specify two different locations on the same electrical node. The two distances, <em>dmin</em> and <em>dmax</em>, are the lengths (in lambda) of the shortest and longest acyclic paths between the driver and receiver.</p>
  </dd>

</dl>
<p>The keywords in this last section describe the subcells used by <em>name</em>, and how connections are made to and between them.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>use&nbsp;</strong><em>def&nbsp;use-id&nbsp;TRANSFORM</em></p>
  </dt>
  <dd>
    <p>Specifies that cell <em>def</em> with instance identifier <em>use-id</em> is a subcell of cell <em>name</em>. If cell <em>def</em> is arrayed, then <em>use-id</em> will be followed by two bracketed subscript ranges of the form: <strong>[</strong><em>lo</em><strong>,</strong><em>hi</em><strong>,</strong><em>sep</em><strong>]</strong>. The first range is for x, and the second for y. The subscripts for a given dimension are <em>lo</em> through <em>hi</em> inclusive, and the separation between adjacent array elements is <em>sep</em> centimicrons.</p><p><em>TRANSFORM</em> is a set of six integers that describe how coordinates in <em>def</em> are to be transformed to coordinates in the parent <em>name</em>.  It is used by <em>ext2sim</em>\|(1) in transforming transistor locations to coordinates in the root of a design. The six integers of <em>TRANSFORM</em> (<em>ta,&nbsp;tb,&nbsp;tc,&nbsp;td,&nbsp;te,&nbsp;tf</em>) are interpreted as components in the following transformation matrix, by which all coordinates in <em>def</em> are post-multiplied to get coordinates in <em>name</em>:</p>
<pre>
<em>ta</em>	<em>td</em>	0
<em>tb</em>	<em>te</em>	0
<em>tc</em>	<em>tf</em>	1
</pre>

  </dd>
  <dt>
    <p><strong>merge&nbsp;</strong><em>path1&nbsp;path2&nbsp;C&nbsp;a1&nbsp;p1&nbsp;a2&nbsp;p2 &nbsp;...&nbsp;aN&nbsp;pN</em></p>
  </dt>
  <dd>
    <p>Used to specify a connection between two subcells, or between a subcell and mask information of <em>name</em>. Both <em>path1</em> and <em>path2</em> are hierarchical node names. To refer to a node in cell <em>name</em> itself, its pathname is just its node name. To refer to a node in a subcell of <em>name</em>, its pathname consists of the <em>use-id</em> of the subcell (as it appeared in a <strong>use</strong> line above), followed by a slash&nbsp;(<em>/</em>), followed by the node name in the subcell. For example, if <em>name</em> contains subcell <em>sub</em> with use identifier <em>sub-id</em>, and <em>sub</em> contains node <em>n</em>, the full pathname of node <em>n</em> relative to <em>name</em> will be <em>sub-id/n</em>.</p>
  </dd>

</dl>
<p>Connections between adjacent elements of an array are represented using a special syntax that takes advantage of the regularity of arrays. A use-id in a path may optionally be followed by a range of the form <strong>[</strong><em>lo</em><strong>:</strong><em>hi</em><strong>]</strong> (before the following slash).  Such a use-id is interpreted as the elements <em>lo</em> through <em>hi</em> inclusive of a one-dimensional array.  An element of a two-dimensional array may be subscripted with two such ranges: first the y range, then the x range.</p><p>Whenever one <em>path</em> in a <strong>merge</strong> line contains such a subscript range, the other must contain one of comparable size.  For example,</p><p><strong>merge</strong>&nbsp;&nbsp;sub-id[1:4,2:8]/a&nbsp;&nbsp;sub-id[2:5,1:7]/b</p><p>is acceptable because the range 1:4 is the same size as 2:5, and the range 2:8 is the same size as 1:7.</p><p>When a connection occurs between nodes in different cells, it may be that some resistance and capacitance has been recorded redundantly. For example, polysilicon in one cell may overlap polysilicon in another, so the capacitance to substrate will have been recorded twice. The values <em>C</em>, <em>a1</em>, <em>p1</em>, etc. in a <strong>merge</strong> line provide a way of compensating for such overlap. Each of <em>a1</em>, <em>p1</em>, etc. (usually negative) are added to the area and perimeter for material of each resistance class to give an adjusted area and perimeter for the aggregate node. The value <em>C</em> attofarads (also usually negative) is added to the sum of the capacitances (to substrate) of nodes <em>path1</em> and <em>path2</em> to give the capacitance of the aggregate node.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>cap&nbsp;</strong><em>node1&nbsp;node2&nbsp;C</em></p>
  </dt>
  <dd>
    <p>Defines a capacitor between the nodes <em>node1</em> and <em>node2</em>, with capacitance <em>C</em>. This construct is used to specify both internodal capacitance within a single cell and between cells.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Walter Scott</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ext&hellip;</h2>
        <div class="sectioncontent">
<p>ext2sim\|(1), magic\|(1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="express.conf.5.html"><span aria-hidden="true">&larr;</span> express.conf.5: Configuration file for openshift</a></li>
   <li class="next"><a href="ext2.5.html">ext2.5: The second extended file system  ext2 - the third extended file system  ext4 - the fourth extended file system <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
