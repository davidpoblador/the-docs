<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mbox: File containing mail messages</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="File containing mail messages">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mbox (5qmail) manual">
  <meta name="twitter:description" content="File containing mail messages">
  <meta name="twitter:image" content="https://www.carta.tech/images/qmail-mbox-5qmail.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5qmail/mbox.5qmail.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mbox (5qmail) manual" />
  <meta property="og:description" content="File containing mail messages" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/qmail-mbox-5qmail.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mbox<small> (5qmail)</small></h1>
        <p class="lead">File containing mail messages</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5qmail/">
      <span itemprop="name">MISSING SECTION</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5qmail/mbox.5qmail.html">
      <span itemprop="name">mbox: File containing mail messages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/qmail/">
      <span itemprop="name">qmail</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5qmail/mbox.5qmail.html">
      <span itemprop="name">mbox: File containing mail messages</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">INTRODUCTION</h2>
        <div class="sectioncontent">
<p>The most common format for storage of mail messages is <em>mbox</em> format. An <em>mbox</em> is a single file containing zero or more mail messages.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MESSAGE FORMAT</h2>
        <div class="sectioncontent">
<p>A message encoded in <em>mbox</em> format begins with a <strong>From_</strong> line, continues with a series of <strong></strong>non-<strong>From_</strong> lines, and ends with a blank line. A <strong>From_</strong> line means any line that begins with the characters F, r, o, m, space:</p>
<pre>
     From god@heaven.af.mil Sat Jan  3 01:05:34 1996

     Return-Path: &lt;god@heaven.af.mil&gt;

     Delivered-To: djb@silverton.berkeley.edu

     Date: 3 Jan 1996 01:05:34 -0000

     From: God &lt;god@heaven.af.mil&gt;

     To: djb@silverton.berkeley.edu (D. J. Bernstein)



     How's that mail system project coming along?


</pre>
<p>The final line is a completely blank line (no spaces or tabs). Notice that blank lines may also appear elsewhere in the message.</p><p>The <strong>From_</strong> line always looks like <strong>From</strong> <em>envsender</em> <em>date</em> <em>moreinfo</em>. <em>envsender</em> is one word, without spaces or tabs; it is usually the envelope sender of the message. <em>date</em> is the delivery date of the message. It always contains exactly 24 characters in <strong>asctime</strong> format. <em>moreinfo</em> is optional; it may contain arbitrary information.</p><p>Between the <strong>From_</strong> line and the blank line is a message in RFC 822 format, as described in <a href="../man5/qmail-header.5.html"><strong>qmail-header</strong>(5)</a></strong>, subject to <strong>&gt;From quoting</strong> as described below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOW A MESSAGE IS DELIVERED</h2>
        <div class="sectioncontent">
<p>Here is how a program appends a message to an <em>mbox</em> file.</p><p>It first creates a <strong>From_</strong> line given the message's envelope sender and the current date. If the envelope sender is empty (i.e., if this is a bounce message), the program uses <strong>MAILER-DAEMON</strong> instead. If the envelope sender contains spaces, tabs, or newlines, the program replaces them with hyphens.</p><p>The program then copies the message, applying <strong>&gt;From quoting</strong> to each line. <strong>&gt;From quoting</strong> ensures that the resulting lines are not <strong>From_</strong> lines: the program prepends a <strong>&gt;</strong> to any <strong>From_</strong> line, <strong>&gt;From_</strong> line, <strong>&gt;&gt;From_</strong> line, <strong>&gt;&gt;&gt;From_</strong> line, etc.</p><p>Finally the program appends a blank line to the message. If the last line of the message was a partial line, it writes two newlines; otherwise it writes one.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOW A MESSAGE IS READ</h2>
        <div class="sectioncontent">
<p>A reader scans through an <em>mbox</em> file looking for <strong>From_</strong> lines. Any <strong>From_</strong> line marks the beginning of a message. The reader should not attempt to take advantage of the fact that every <strong>From_</strong> line (past the beginning of the file) is preceded by a blank line.</p><p>Once the reader finds a message, it extracts a (possibly corrupted) envelope sender and delivery date out of the <strong>From_</strong> line. It then reads until the next <strong>From_</strong> line or end of file, whichever comes first. It strips off the final blank line and deletes the quoting of <strong>&gt;From_</strong> lines and <strong>&gt;&gt;From_</strong> lines and so on. The result is an RFC 822 message.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMON MBOX VARIANTS</h2>
        <div class="sectioncontent">
<p>There are many variants of <em>mbox</em> format. The variant described above is <em>mboxrd</em> format, popularized by Rahul Dhesi in June 1995.</p><p>The original <em>mboxo</em> format quotes only <strong>From_</strong> lines, not <strong>&gt;From_</strong> lines. As a result it is impossible to tell whether</p>
<pre>
     From: djb@silverton.berkeley.edu (D. J. Bernstein)

     To: god@heaven.af.mil



     &gt;From now through August I'll be doing beta testing.

     Thanks for your interest.
</pre>
<p>was quoted in the original message. An <em>mboxrd</em> reader will always strip off the quoting.</p><p><em>mboxcl</em> format is like <em>mboxo</em> format, but includes a Content-Length field with the number of bytes in the message. <em>mboxcl2</em> format is like <em>mboxcl</em> but has no <strong>&gt;From</strong> quoting. These formats are used by SVR4 mailers. <em>mboxcl2</em> cannot be read safely by <em>mboxrd</em> readers.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UNSPECIFIED DETAILS</h2>
        <div class="sectioncontent">
<p>There are many locking mechanisms for <em>mbox</em> files. <strong>qmail-local</strong> always uses <strong>flock</strong> on systems that have it, otherwise <strong>lockf</strong>.</p><p>The delivery date in a <strong>From_</strong> line does not specify a time zone. <strong>qmail-local</strong> always creates the delivery date in GMT so that <em>mbox</em> files can be safely transported from one time zone to another.</p><p>If the mtime on a nonempty <em>mbox</em> file is greater than the atime, the file has new mail. If the mtime is smaller than the atime, the new mail has been read. If the atime equals the mtime, there is no way to tell whether the file has new mail, since <strong>qmail-local</strong> takes much less than a second to run. One solution is for a mail reader to artificially set the atime to the mtime plus 1. Then the file has new mail if and only if the atime is less than or equal to the mtime.</p><p>Some mail readers place <strong>Status</strong> fields in each message to indicate which messages have been read.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mbox&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/maildir.5.html"><strong>maildir</strong>(5)</a>, <a href="../man5/qmail-header.5.html"><strong>qmail-header</strong>(5)</a>, <a href="../man8/qmail-local.8.html"><strong>qmail-local</strong>(8)</a></p>
        </div>
      </section>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
