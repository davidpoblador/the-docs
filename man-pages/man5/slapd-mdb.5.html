<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapd-mdb: Memory-mapped db backend to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Memory-mapped db backend to slapd">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="slapd-mdb (5) manual">
  <meta name="twitter:description" content="Memory-mapped db backend to slapd">
  <meta name="twitter:image" content="https://www.carta.tech/images/slapd-slapd-mdb-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/slapd-mdb.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="slapd-mdb (5) manual" />
  <meta property="og:description" content="Memory-mapped db backend to slapd" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/slapd-slapd-mdb-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapd-mdb<small> (5)</small></h1>
        <p class="lead">Memory-mapped db backend to slapd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapd-mdb.5.html">
      <span itemprop="name">slapd-mdb: Memory-mapped db backend to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/slapd/">
      <span itemprop="name">slapd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapd-mdb.5.html">
      <span itemprop="name">slapd-mdb: Memory-mapped db backend to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/etc/ldap/slapd.conf</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>mdb</strong> backend to <a href="../man8/slapd.8.html"><strong>slapd</strong>(8)</a> uses OpenLDAP's Lightning Memory-Mapped DB (LMDB) library to store data. It relies completely on the underlying operating system for memory management and does no caching of its own. It is the recommended primary database backend.</p><p>The <strong>mdb</strong> backend is similar to the <strong>hdb</strong> backend in that it uses a hierarchical database layout which supports subtree renames. It is both more space-efficient and more execution-efficient than the <strong>bdb</strong> backend, while being overall much simpler to manage.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>These <strong>slapd.conf</strong> options apply to the <strong>mdb</strong> backend database. That is, they must follow a "database mdb" line and come before any subsequent "backend" or "database" lines. Other database options are described in the <a href="../man5/slapd.conf.5.html"><strong>slapd.conf</strong>(5)</a> manual page.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>checkpoint</strong><em></em><strong>&lt;kbyte&gt;</strong><em>&lt;min&gt;</em></p>
  </dt>
  <dd>
    <p>Specify the frequency for flushing the database disk buffers. This setting is only needed if the <strong>dbnosync</strong> option is used. The checkpoint will occur if either <em>&lt;kbyte&gt;</em> data has been written or <em>&lt;min&gt;</em> minutes have passed since the last checkpoint. Both arguments default to zero, in which case they are ignored. When the <em>&lt;min&gt;</em> argument is non-zero, an internal task will run every <em>&lt;min&gt;</em> minutes to perform the checkpoint. Note: currently the <em>&lt;kbyte&gt;</em> setting is unimplemented.</p>
  </dd>
  <dt>
    <p><strong>dbnosync</strong></p>
  </dt>
  <dd>
    <p>Specify that on-disk database contents should not be immediately synchronized with in memory changes. Enabling this option may improve performance at the expense of data security. In particular, if the operating system crashes before changes are flushed, some number of transactions may be lost. By default, a full data flush/sync is performed when each transaction is committed.</p>
  </dd>
  <dt>
    <p><strong>directory</strong><em></em><strong>&lt;directory&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the directory where the LMDB files containing this database and associated indexes live. A separate directory must be specified for each database. The default is <strong>/var/lib/ldap</strong>.</p>
  </dd>
  <dt>
    <p><strong>envflags </strong>{<strong>nosync</strong>,<strong>nometasync</strong>,<strong>writemap</strong>,<strong>mapasync</strong>,<strong>nordahead</strong>}</p>
  </dt>
  <dd>
    <p>Specify flags for finer-grained control of the LMDB library's operation.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>nosync</strong></p>
  </dt>
  <dd>
    <p>This is exactly the same as the <em>dbnosync</em> directive.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>nometasync</strong></p>
  </dt>
  <dd>
    <p>Flush the data on a commit, but skip the sync of the meta page. This mode is slightly faster than doing a full sync, but can potentially lose the last committed transaction if the operating system crashes. If both <em>nometasync</em> and <em>nosync</em> are set, the <em>nosync</em> flag takes precedence.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>writemap</strong></p>
  </dt>
  <dd>
    <p>Use a writable memory map instead of just read-only. This speeds up write operations but makes the database vulnerable to corruption in case any bugs in slapd cause stray writes into the mmap region.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>mapasync</strong></p>
  </dt>
  <dd>
    <p>When using a writable memory map and performing flushes on each commit, use an asynchronous flush instead of a synchronous flush (the default). This option has no effect if <em>writemap</em> has not been set. It also has no effect if <em>nosync</em> is set.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>nordahead</strong></p>
  </dt>
  <dd>
    <p>Turn off file readahead. Usually the OS performs readahead on every read request. This usually boosts read performance but can be harmful to random access read performance if the system's memory is full and the DB is larger than RAM. This option is not implemented on Windows.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>index </strong>{<em>&lt;attrlist&gt;</em>|<strong>default</strong>} [<strong>pres</strong>,<strong>eq</strong>,<strong>approx</strong>,<strong>sub</strong>,<em>&lt;special&gt;</em>]</p>
  </dt>
  <dd>
    <p>Specify the indexes to maintain for the given attribute (or list of attributes). Some attributes only support a subset of indexes. If only an <em>&lt;attr&gt;</em> is given, the indices specified for <strong>default</strong> are maintained. Note that setting a default does not imply that all attributes will be indexed. Also, for best performance, an <strong>eq</strong> index should always be configured for the <strong>objectClass</strong> attribute.</p><p>A number of special index parameters may be specified. The index type <strong>sub</strong> can be decomposed into <strong>subinitial</strong>, <strong>subany</strong>,<strong>and</strong> <strong>subfinal</strong> indices. The special type <strong>nolang</strong> may be specified to disallow use of this index by language subtypes. The special type <strong>nosubtypes</strong> may be specified to disallow use of this index by named subtypes. Note: changing <strong>index</strong> settings in <a href="../man5/slapd.conf.5.html"><strong>slapd.conf</strong>(5)</a> requires rebuilding indices, see <a href="../man8/slapindex.8.html"><strong>slapindex</strong>(8)</a>; changing <strong>index</strong> settings dynamically by LDAPModifying "cn=config" automatically causes rebuilding of the indices online in a background task.</p>
  </dd>
  <dt>
    <p><strong>maxreaders</strong><em></em><strong>&lt;integer&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the maximum number of threads that may have concurrent read access to the database. Tools such as slapcat count as a single thread, in addition to threads in any active slapd processes. The default is 126.</p>
  </dd>
  <dt>
    <p><strong>maxsize</strong><em></em><strong>&lt;bytes&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the maximum size of the database in bytes. A memory map of this size is allocated at startup time and the database will not be allowed to grow beyond this size. The default is 10485760 bytes. This setting may be changed upward if the configured limit needs to be increased.</p><p>Note: It is important to set this to as large a value as possible, (relative to anticipated growth of the actual data over time) since growing the size later may not be practical when the system is under heavy load.</p>
  </dd>
  <dt>
    <p><strong>mode</strong><em></em><strong>&lt;integer&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the file protection mode that newly created database files should have. The default is 0600.</p>
  </dd>
  <dt>
    <p><strong>searchstack</strong><em></em><strong>&lt;depth&gt;</strong></p>
  </dt>
  <dd>
    <p>Specify the depth of the stack used for search filter evaluation. Search filters are evaluated on a stack to accommodate nested AND / OR clauses. An individual stack is assigned to each server thread. The depth of the stack determines how complex a filter can be evaluated without requiring any additional memory allocation. Filters that are nested deeper than the search stack depth will cause a separate stack to be allocated for that particular search operation. These allocations can have a major negative impact on server performance, but specifying too much stack will also consume a great deal of memory. Each search stack uses 512K bytes per level. The default stack depth is 16, thus 8MB per thread is used.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESS CONTROL</h2>
        <div class="sectioncontent">
<p>The <strong>mdb</strong> backend honors access control semantics as indicated in <a href="../man5/slapd.access.5.html"><strong>slapd.access</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/etc/ldap/slapd.conf</strong></p>
  </dt>
  <dd>
    <p>default <strong>slapd</strong> configuration file</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO slapd-mdb&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/slapd.conf.5.html"><strong>slapd.conf</strong>(5)</a>, <a href="../man5/slapd-config.5.html"><strong>slapd-config</strong>(5)</a>, <a href="../man8/slapd.8.html"><strong>slapd</strong>(8)</a>, <a href="../man8/slapadd.8.html"><strong>slapadd</strong>(8)</a>, <a href="../man8/slapcat.8.html"><strong>slapcat</strong>(8)</a>, <a href="../man8/slapindex.8.html"><strong>slapindex</strong>(8)</a>, OpenLDAP LMDB documentation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p><strong>OpenLDAP Software</strong> is developed and maintained by The OpenLDAP Project &lt;http://www.openldap.org/&gt;. <strong>OpenLDAP Software</strong> is derived from University of Michigan LDAP 3.3 Release. Written by Howard Chu.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="slapd-ldif.5.html"><span aria-hidden="true">&larr;</span> slapd-ldif.5: Ldif backend to slapd</a></li>
   <li class="next"><a href="slapd-meta.5.html">slapd-meta.5: Metadirectory backend to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
