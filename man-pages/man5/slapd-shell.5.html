<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>slapd-shell: Shell backend to slapd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shell backend to slapd">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">slapd-shell<small> (5)</small></h1>
        <p class="lead">Shell backend to slapd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapd-shell.5.html">
      <span itemprop="name">slapd-shell: Shell backend to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/openldap/">
      <span itemprop="name">openldap</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/slapd-shell.5.html">
      <span itemprop="name">slapd-shell: Shell backend to slapd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p>ETCDIR/slapd.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p>The Shell backend to <strong>slapd</strong>(8) executes external programs to implement operations, and is designed to make it easy to tie an existing database to the <strong>slapd</strong> front-end.</p>
<p class='spacer'>

<p>This backend is primarily intended to be used in prototypes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNING</h2>
        <div class="sectioncontent">

<p>The <strong>abandon</strong> shell command has been removed since OpenLDAP 2.1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">

<p>These <strong>slapd.conf</strong> options apply to the SHELL backend database. That is, they must follow a "database shell" line and come before any subsequent "backend" or "database" lines. Other database options are described in the <strong>slapd.conf</strong>(5) manual page.</p>
<p class='spacer'>

  <p>These options specify the pathname and arguments of the program to execute in response to the given LDAP operation. Each option is followed by the input lines that the program receives:</p>
  <dl class='dl-vertical'>
    <dt><strong>add &lt;pathname&gt; &lt;argument&gt;...</strong></dt>
    <dd>
<pre>ADD
msgid: &lt;message id&gt;
&lt;repeat { "suffix:" &lt;database suffix DN&gt; }&gt;
&lt;entry in LDIF format&gt;</pre>

    </dd>
    <dt><strong>bind &lt;pathname&gt; &lt;argument&gt;...</strong></dt>
    <dd>
<pre>BIND
msgid: &lt;message id&gt;
&lt;repeat { "suffix:" &lt;database suffix DN&gt; }&gt;
dn: &lt;DN&gt;
method: &lt;method number&gt;
credlen: &lt;length of &lt;credentials&gt;&gt;
cred: &lt;credentials&gt;</pre>

    </dd>
    <dt><strong>compare &lt;pathname&gt; &lt;argument&gt;...</strong></dt>
    <dd>
<pre>COMPARE
msgid: &lt;message id&gt;
&lt;repeat { "suffix:" &lt;database suffix DN&gt; }&gt;
dn: &lt;DN&gt;
&lt;attribute&gt;: &lt;value&gt;</pre>

    </dd>
    <dt><strong>delete &lt;pathname&gt; &lt;argument&gt;...</strong></dt>
    <dd>
<pre>DELETE
msgid: &lt;message id&gt;
&lt;repeat { "suffix:" &lt;database suffix DN&gt; }&gt;
dn: &lt;DN&gt;</pre>

    </dd>
    <dt><strong>modify &lt;pathname&gt; &lt;argument&gt;...</strong></dt>
    <dd>
<pre>MODIFY
msgid: &lt;message id&gt;
&lt;repeat { "suffix:" &lt;database suffix DN&gt; }&gt;
dn: &lt;DN&gt;
&lt;repeat {
    &lt;"add"/"delete"/"replace"&gt;: &lt;attribute&gt;
    &lt;repeat { &lt;attribute&gt;: &lt;value&gt; }&gt;
    -
}&gt;</pre>

    </dd>
    <dt><strong>modrdn &lt;pathname&gt; &lt;argument&gt;...</strong></dt>
    <dd>
<pre>MODRDN
msgid: &lt;message id&gt;
&lt;repeat { "suffix:" &lt;database suffix DN&gt; }&gt;
dn: &lt;DN&gt;
newrdn: &lt;new RDN&gt;
deleteoldrdn: &lt;0 or 1&gt;
&lt;if new superior is specified: "newSuperior: &lt;DN&gt;"&gt;</pre>

    </dd>
    <dt><strong>search &lt;pathname&gt; &lt;argument&gt;...</strong></dt>
    <dd>
<pre>SEARCH
msgid: &lt;message id&gt;
&lt;repeat { "suffix:" &lt;database suffix DN&gt; }&gt;
base: &lt;base DN&gt;
scope: &lt;0-2, see ldap.h&gt;
deref: &lt;0-3, see ldap.h&gt;
sizelimit: &lt;size limit&gt;
timelimit: &lt;time limit&gt;
filter: &lt;filter&gt;
attrsonly: &lt;0 or 1&gt;
attrs: &lt;"all" or space-separated attribute list&gt;</pre>

    </dd>
    <dt><strong>unbind &lt;pathname&gt; &lt;argument&gt;...</strong></dt>
    <dd>
<pre>UNBIND
msgid: &lt;message id&gt;
&lt;repeat { "suffix:" &lt;database suffix DN&gt; }&gt;
dn: &lt;bound DN&gt;</pre>

    </dd>
  </dl>
<p class='spacer'>

<p>Note that you need only supply configuration lines for those commands you want the backend to handle. Operations for which a command is not supplied will be refused with an "unwilling to perform" error.</p>
<p class='spacer'>

<p>The <strong>search</strong> command should output the entries in LDIF format, each entry followed by a blank line, and after these the RESULT below.</p>
<p class='spacer'>

    <p>All commands except <strong>unbind</strong> should then output:</p>
<pre>RESULT
code: &lt;integer&gt;
matched: &lt;matched DN&gt;
info: &lt;text&gt;</pre>

<p>where only the RESULT line is mandatory. Lines starting with `#' or `DEBUG:' are ignored.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACCESS CONTROL</h2>
        <div class="sectioncontent">

<p>The <strong>shell</strong> backend does not honor all ACL semantics as described in <strong>slapd.access</strong>(5). In general, access to objects is checked by using a dummy object that contains only the DN, so access rules that rely on the contents of the object are not honored. In detail:</p>
<p class='spacer'>

<p>The <strong>add</strong> operation does not require <strong>write (=w)</strong> access to the <strong>children</strong> pseudo-attribute of the parent entry.</p>
<p class='spacer'>

<p>The <strong>bind</strong> operation requires <strong>auth (=x)</strong> access to the <strong>entry</strong> pseudo-attribute of the entry whose identity is being assessed; <strong>auth (=x)</strong> access to the credentials is not checked, but rather delegated to the underlying shell script.</p>
<p class='spacer'>

<p>The <strong>compare</strong> operation requires <strong>read (=r)</strong> access (FIXME: wouldn't <strong>compare (=c)</strong> be a more appropriate choice?) to the <strong>entry</strong> pseudo-attribute of the object whose value is being asserted; <strong>compare (=c)</strong> access to the attribute whose value is being asserted is not checked.</p>
<p class='spacer'>

<p>The <strong>delete</strong> operation does not require <strong>write (=w)</strong> access to the <strong>children</strong> pseudo-attribute of the parent entry.</p>
<p class='spacer'>

<p>The <strong>modify</strong> operation requires <strong>write (=w)</strong> access to the <strong>entry</strong> pseudo-attribute; <strong>write (=w)</strong> access to the specific attributes that are modified is not checked.</p>
<p class='spacer'>

<p>The <strong>modrdn</strong> operation does not require <strong>write (=w)</strong> access to the <strong>children</strong> pseudo-attribute of the parent entry, nor to that of the new parent, if different; <strong>write (=w)</strong> access to the distinguished values of the naming attributes is not checked.</p>
<p class='spacer'>

<p>The <strong>search</strong> operation does not require <strong>search (=s)</strong> access to the <strong>entry</strong> pseudo_attribute of the searchBase; <strong>search (=s)</strong> access to the attributes and values used in the filter is not checked.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<p>There is an example search script in the slapd/back-shell/ directory in the OpenLDAP source tree.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">

<p>The shell backend does not support threaded environments. When using the shell backend, <strong>slapd</strong>(8) should be built <em>--without-threads</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt>ETCDIR/slapd.conf</dt>
    <dd>
  <p>default slapd configuration file</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO slapd-shell&hellip;</h2>
        <div class="sectioncontent">

<p><strong>slapd.conf</strong>(5), <strong>slapd</strong>(8), <strong>sh</strong>(1).</p>
        </div>
      </section>

<nav>
  <ul class="pager">
   <li class="previous"><a href="slapd-relay.5.html"><span aria-hidden="true">&larr;</span> slapd-relay.5: Relay backend to slapd</a></li>
   <li class="next"><a href="slapd-sock.5.html">slapd-sock.5: Socket backend/overlay to slapd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
