<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>makedumpfile.conf: The filter configuration file for makedumpfile(8).</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The filter configuration file for makedumpfile(8).">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="makedumpfile.conf (5) manual">
  <meta name="twitter:description" content="The filter configuration file for makedumpfile(8).">
  <meta name="twitter:image" content="https://www.carta.tech/images/makedumpfile-makedumpfile.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/makedumpfile.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="makedumpfile.conf (5) manual" />
  <meta property="og:description" content="The filter configuration file for makedumpfile(8)." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/makedumpfile-makedumpfile.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">makedumpfile.conf<small> (5)</small></h1>
        <p class="lead">The filter configuration file for makedumpfile(8).</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/makedumpfile.conf.5.html">
      <span itemprop="name">makedumpfile.conf: The filter configuration file for makedumpfile(8).</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/makedumpfile/">
      <span itemprop="name">makedumpfile</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/makedumpfile.conf.5.html">
      <span itemprop="name">makedumpfile.conf: The filter configuration file for makedumpfile(8).</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The makedumpfile.conf is a configuration file for makedumpfile tool. makedumpfile.conf file contains the erase commands to filter out desired kernel data from the vmcore while creating <em>DUMPFILE</em> using makedumpfile tool. makedumpfile reads the filter config and builds the list of memory addresses and its sizes after processing filter commands. The memory locations that require to be filtered out are then poisoned with character <em>X</em> (58 in Hex).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE FORMAT</h2>
        <div class="sectioncontent">
<p>The file consists of module sections that contains filter commands. A section begins with the name of the section in square brackets and continues until the next section begins.</p><p>"["&lt;<em>ModuleName</em>&gt;"]"</p><p>&lt;<em>FilterCommands</em>&gt;</p><p>where</p><p>"[" is the character <strong>[</strong></p><p>"]" is the character <strong>]</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p>&lt;<em>ModuleName</em>&gt;</p>
  </dt>
  <dd>
    <p>is either 'vmlinux' or name of a Linux kernel module.</p>
  </dd>
  <dt>
    <p>&lt;<em>FilterCommands</em>&gt;</p>
  </dt>
  <dd>
    <p>is a list of one or more filter commands as described in the section <strong>FILTER COMMANDS</strong> of this manual page.</p>
  </dd>

</dl>
<p>The section name indicates a kernel module name (including <strong>vmlinux</strong>) where the symbols specified in subsequent erase commands belong to. The unnamed section defaults to <strong>[vmlinux]</strong> section. However, a user can also explicitly define <strong>[vmlinux]</strong> section. The sections help makedumpfile tool to select appropriate kernel or module debuginfo file before processing the subsequent erase commands. Before selecting appropriate debuginfo file, the module name is validated against the loaded modules from the vmcore. If no match is found, then the section is ignored and makedumpfile skips to the next module section. If match is found, then makedumpfile will try to load the corresponding module debuginfo file. If module debuginfo is not available then, makedumpfile will skip the section with a warning message.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILTER COMMANDS</h2>
        <div class="sectioncontent">
<h3>filter command</h3>
<p>A filter command is either an erase command or a loop construct. Each erase command and loop construct must start with a new line. Each filter command describes data in the dump to be erased. Syntax:</p><p>&lt;<em>EraseCommands</em>&gt;|&lt;<em>LoopConstruct</em>&gt;</p><p>where</p>
<dl class='dl-vertical'>
  <dt>
    <p>&lt;<em>EraseCommands</em>&gt;</p>
  </dt>
  <dd>
    <p>Described in the subsection <strong>erase command</strong> of this manual page.</p>
  </dd>
  <dt>
    <p>&lt;<em>LoopConstruct</em>&gt;</p>
  </dt>
  <dd>
    <p>Described in the subsection <strong>Loop construct</strong> of this manual page.</p>
  </dd>

</dl>

<h3>erase command</h3>
<p>Erase specified size of a kernel data referred by specified kernel/module symbol or its member component. The erase command syntax is:</p><p><strong>erase</strong> &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]] [<strong>size</strong> &lt;<em>SizeValue</em>&gt;[K|M]]</p><p><strong>erase</strong> &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]] [<strong>size</strong> &lt;<em>SizeSymbol</em>&gt;]</p><p><strong>erase</strong> &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]] [<strong>nullify</strong>]</p><p>where</p>
<dl class='dl-vertical'>
  <dt>
    <p>&lt;<em>Symbol</em>&gt;</p>
  </dt>
  <dd>
    <p>A kernel or module symbol (variable) name that is part of global symbols <strong>/proc/kallsyms</strong>.</p>
  </dd>
  <dt>
    <p>&lt;<em>SizeValue</em>&gt;</p>
  </dt>
  <dd>
    <p>A positive integer value as a size of the data in bytes to be erased. The suffixes 'K' and 'M' can be used to specify kilobytes and Megabytes respectively where, K means 1024 bytes and M means 1024 ^ 2 = 1048576 bytes. The suffixes are not case sensitive.</p>
  </dd>
  <dt>
    <p>&lt;<em>SizeSymbol</em>&gt;</p>
  </dt>
  <dd>
    <p>A simple expression of the form &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]] that denotes a symbol which contains a positive integer value as a size of the data in bytes to be erased.</p>
  </dd>
  <dt>
    <p>&lt;<em>Symbol</em>&gt;[.<em>member</em>[...]]</p>
  </dt>
  <dd>
    <p>A simple expression that results into either a global kernel symbol name or its member components. The expression always uses '.' operator to specify the <em>member</em> component of kernel symbol or its member irrespective of whether it is of pointer type or not.</p>
  </dd>
  <dt>
    <p><em>member</em>[...]</p>
  </dt>
  <dd>
    <p>Member or component of member in &lt;<em>Symbol</em>&gt;.</p>
  </dd>

</dl>
<p>The <strong>erase</strong> command takes two arguments 1. kernel symbol name or its member components and 2. size of the data referred by argument (1) OR <strong>nullify</strong> keyword. The second argument <strong>size</strong> OR <strong>nullify</strong> is optional. The unit for size value is in <strong>bytes</strong>. If <strong>size</strong> option is not specified then the size of the first argument is determined according to its data type using dwarf info from debuginfo file. In case of '<strong>char *</strong>' data type, the length of string pointed by '<strong>char *</strong>' pointer is determined with an upper limit of 1024. The <strong>size</strong> can be specified in two forms 1. a integer value as explained above (&lt;<em>SizeValue</em>&gt;) and 2. a simple expression in the form of &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]]] that results into base type (integer) variable.</p><p>If the specified &lt;<em>Symbol</em>&gt; is of type '<strong>void *</strong>', then user needs to provide either <strong>size</strong> or <strong>nullify</strong> option, otherwise the erase command will not have any effect.</p><p>The <strong>nullify</strong> option only works if specified &lt;<em>Symbol</em>&gt; is a pointer. Instead of erasing data pointed by the specified pointer <strong>nullify</strong> erases the pointer value and set it to '0' (NULL). Please note that by nullifying the pointer values may affect the debug ability of created <em>DUMPFILE</em>. Use the <strong>nullify</strong> option only when the size of data to be erased is not known.  <strong>e.g.</strong> data pointed by '<strong>void *</strong>'.</p><p>Let us look at the makedumpfile.conf file from the example below which was configured to erase desired kernel data from the kernel module with name <strong>mymodule</strong>. At line 1 and 3, the user has not specified size option while erasing 'array_var' and 'mystruct1.name' symbols. Instead the user depends on makedumpfile to automatically determine the sizes to be erased <strong>i.e</strong> 100 bytes for 'array_var' and 11 bytes for 'mystruct1.name'.  At line 2, while erasing the 'mystruct1.buffer' member the user has specified the size value 25 against the actual size of 50. In this case the user specified <strong>size</strong> takes the precedence and makedumpfile erases only 25 bytes from \'mystruct1.buffer'. At line 4, the size of the data pointed by <strong>void *</strong> pointer 'mystruct1.addr' is unknown. Hence the <strong>nullify</strong> option has been specified to reset the pointer value to NULL. At line 5, the \'mystruct2.addr_size' is specified as <strong>size</strong> argument to determine the size of the data pointed by <strong>void *</strong> pointer 'mystruct2.addr'.</p><p><strong>Example:</strong></p><p>Assuming the following piece of code is from kernel module 'mymodule':</p><p>struct s1 {</p><p>	char *name;</p><p>	void *addr1;</p><p>	void *addr2;</p><p>	char buffer[50];</p><p>};</p><p>struct s2 {</p><p>	void *addr;</p><p>	long addr_size;</p><p>};</p><p>/* Global symbols */</p><p>char array_var[100];</p><p>struct s1 mystruct1;</p><p>struct s2 *mystruct2;</p><p>int foo()</p><p>{</p><p>	...</p><p>	s1.name = "Hello World";</p><p>	...</p><p>}</p><p><strong>makedumpfile.conf:</strong></p><p>[mymodule]</p><p>erase array_var</p><p>erase mystruct1.buffer size 25</p><p>erase mystruct1.name</p><p>erase mystruct1.addr1 nullify</p><p># Assuming addr2 points to 1024 bytes</p><p>erase mystruct1.addr2 size 1K</p><p>erase mystruct2.addr size mystruct2.addr_size</p><p><strong>EOF</strong></p>
<h3>Loop construct</h3>
<p>A Loop construct allows the user to traverse the linked list or array elements and erase the data contents referred by each element.</p><p><strong>for</strong> &lt;<em>id</em>&gt; <strong>in</strong> {&lt;<em>ArrayVar</em>&gt; |</p><p>		   &lt;<em>StructVar</em>&gt; <strong>via</strong> &lt;<em>NextMember</em>&gt; |</p><p>		   &lt;<em>ListHeadVar</em>&gt; <strong>within</strong> &lt;<em>StructName</em>&gt;<strong>:</strong>&lt;<em>ListHeadMember</em>&gt;}</p><p>	<strong>erase</strong> &lt;<em>id</em>&gt;[.<em>MemberExpression</em>] [<strong>size</strong> &lt;<em>SizeExpression</em>&gt;|<strong>nullify</strong>]</p><p>	[<strong>erase</strong> &lt;<em>id</em>&gt;...]</p><p>	[...]</p><p><strong>endfor</strong></p><p>where</p>
<dl class='dl-vertical'>
  <dt>
    <p>&lt;<em>id</em>&gt;</p>
  </dt>
  <dd>
    <p>Arbitrary name used to temporarily point to elements of the list. This is also called iteration variable.</p>
  </dd>
  <dt>
    <p>&lt;<em>ArrayVar</em>&gt;</p>
  </dt>
  <dd>
    <p>A simple expression in the form of &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]] that results into an array variable.</p>
  </dd>
  <dt>
    <p>&lt;<em>StructVar</em>&gt;</p>
  </dt>
  <dd>
    <p>A simple expression in the form of &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]] that results into a variable that points to a structure.</p>
  </dd>
  <dt>
    <p>&lt;<em>NextMember</em>&gt;</p>
  </dt>
  <dd>
    <p>Member within &lt;<em>StructVar</em>&gt; that points to an object of same type that of &lt;<em>StructVar</em>&gt;.</p>
  </dd>
  <dt>
    <p>&lt;<em>ListHeadVar</em>&gt;</p>
  </dt>
  <dd>
    <p>A simple expression in the form of &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]] that results into a variable of type struct list_head.</p>
  </dd>
  <dt>
    <p>&lt;<em>StructName</em>&gt;</p>
  </dt>
  <dd>
    <p>Name of the structure type that can be traversed using HEAD variable &lt;<em>ListHeadVar</em>&gt; and contains a member named &lt;<em>ListHeadMember</em>&gt;.</p>
  </dd>
  <dt>
    <p>&lt;<em>ListHeadMember</em>&gt;</p>
  </dt>
  <dd>
    <p>Name of a member in &lt;<em>StructName</em>&gt;, of type struct list_head.</p>
  </dd>
  <dt>
    <p>&lt;<em>MemberExpression</em>&gt;</p>
  </dt>
  <dd>
    <p>A simple expression in the form of [.<em>member</em>[...]] to specify a member or component of an element in &lt;<em>ArrayVar</em>&gt;, &lt;<em>StructVar</em>&gt; or &lt;<em>StructName</em>&gt;.</p>
  </dd>
  <dt>
    <p>&lt;<em>SizeExpression</em>&gt;</p>
  </dt>
  <dd>
    <p>Size value in the form of &lt;<em>SizeValue</em>&gt;, &lt;<em>id</em>&gt;[.<em>MemberExpression</em>] or &lt;<em>Symbol</em>&gt;[.<em>member</em>[...]].</p>
  </dd>

</dl>
<p>The <strong>for</strong> loop construct allows to iterate on list of elements in an array or linked lists. Each element in the list is assigned to iteration variable &lt;<em>id</em>&gt;. The type of the iteration variable is determined by that of the list elements. The entry specified after '<strong>in</strong>' terminal is called LIST entry. The LIST entry can be an array variable, structure variable/pointer or a struct list_head type variable. The set of <strong>erase</strong> commands specified between <strong>for</strong> and <strong>endfor</strong>, will be executed for each element in the LIST entry.</p><p>If the LIST entry specified is an array variable, then the loop will be executed for each array element. The size of the array will be determined by using dwarf information.</p><p>If the LIST entry specified is a structure variable/pointer, then a traversal member (&lt;<em>NextMember</em>&gt;) must be specified using '<strong>via</strong>' terminal. The <strong>for</strong> loop will continue until the value of traversal member is NULL or matches with address of the first node &lt;<em>StructVar</em>&gt; if it is a circular linked list.</p><p>If the LIST entry is specified using a struct list_head type variable, then <strong>within</strong> terminal must be used to specify the structure name &lt;<em>StructName</em>&gt; that is surrounding to it along with the struct list_head type member after '<strong>:</strong>' which is part of the linked list. In the erase statement &lt;<em>id</em>&gt; then denotes the structure that the list_head is contained in (ELEMENT_OF).</p><p>The below example illustrates how to use loop construct for traversing Array, linked list via next member and list_head.</p><p><strong>Example:</strong></p><p>Assuming following piece of code is from kernel module 'mymodule':</p><p>struct s1 {</p><p>	struct *next;</p><p>	struct list_head list;</p><p>	char private[100];</p><p>	void *key;</p><p>	long key_size;</p><p>};</p><p>/* Global symbols */</p><p>struct s1 mystruct1;</p><p>static LIST_HEAD(s1_list_head);</p><p>struct s1 myarray[100];</p><p>void foo()</p><p>{</p><p>	struct s1 *s1_ptr;</p><p>	...</p><p>	...</p><p>	s1_ptr = malloc(...);</p><p>	...</p><p>	...</p><p>	list_add(&s1_ptr-&gt;list, &s1_list_head);</p><p>	...</p><p>}</p><p><strong>makedumpfile.conf:</strong></p><p>[mymodule]</p><p># erase private fields from list starting with mystruct1 connected via</p><p># 'next' member:</p><p>for mys1 in mystruct1 via next</p><p>	erase mys1.private</p><p>	erase mys1.key size mys1.key_size</p><p>endfor</p><p># erase private fields from list starting with list_head variable</p><p># s1_list_head.</p><p>for mys1 in s1_list_head.next within s1:list</p><p>	erase mys1.private</p><p>	erase mys1.key size mys1.key_size</p><p>endfor</p><p># erase private fields from all elements of the array myarray:</p><p>for mys1 in myarray</p><p>	erase mys1.private</p><p>	erase mys1.key size mys1.key_size</p><p>endfor</p><p><strong>EOF</strong></p><p>In the above example, the first <strong>for</strong> construct traverses the linked list through a specified structure variable <strong>mystruct1</strong> of type <strong>struct s1</strong>. The linked list can be traversed using '<strong>next</strong>' member of <strong>mystruct1</strong>. Hence a <strong>via</strong> terminal has been used to specify the traversal member name '<strong>next</strong>'.</p><p>The second <strong>for</strong> construct traverses the linked list through a specified struct list_head variable <strong>s1_list_head.next</strong>. The global symbol <strong>s1_list_head</strong> is a start address of the linked list and its <strong>next</strong> member points to the address of struct list_head type member '<strong>list</strong>' from <strong>struct s1</strong>. Hence a <strong>within</strong> terminal is used to specify the structure name '<strong>s1</strong>' that can be traversed using <strong>s1_list_head.next</strong> variable along with the name of struct list_head type member '<strong>list</strong>' which is part of the linked list that starts from <strong>s1_list_head</strong> global symbol.</p><p>The third <strong>for</strong> construct traverses the array elements specified through a array variable <strong>myarray</strong>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO makedumpfile.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/makedumpfile.8.html"><strong>makedumpfile</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mailto.conf.5.html"><span aria-hidden="true">&larr;</span> mailto.conf.5: Configuration file for cups email notifier</a></li>
   <li class="next"><a href="mandos-clients.conf.5.html">mandos-clients.conf.5: Configuration file for the mandos server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
