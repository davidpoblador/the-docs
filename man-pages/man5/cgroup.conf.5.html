<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cgroup.conf: Slurm configuration file for the cgroup support</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Slurm configuration file for the cgroup support">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="cgroup.conf (5) manual">
  <meta name="twitter:description" content="Slurm configuration file for the cgroup support">
  <meta name="twitter:image" content="https://www.carta.tech/images/slurm-client-cgroup.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/cgroup.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="cgroup.conf (5) manual" />
  <meta property="og:description" content="Slurm configuration file for the cgroup support" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/slurm-client-cgroup.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">cgroup.conf<small> (5)</small></h1>
        <p class="lead">Slurm configuration file for the cgroup support</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/cgroup.conf.5.html">
      <span itemprop="name">cgroup.conf: Slurm configuration file for the cgroup support</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/slurm-client/">
      <span itemprop="name">slurm-client</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/cgroup.conf.5.html">
      <span itemprop="name">cgroup.conf: Slurm configuration file for the cgroup support</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>cgroup.conf</strong> is an ASCII file which defines parameters used by Slurm's Linux cgroup related plugins. The file location can be modified at system build time using the DEFAULT_SLURM_CONF parameter or at execution time by setting the SLURM_CONF environment variable. The file will always be located in the same directory as the <strong>slurm.conf</strong> file.</p><p>Parameter names are case insensitive. Any text following a "#" in the configuration file is treated as a comment through the end of that line. Changes to the configuration file take effect upon restart of SLURM daemons, daemon receipt of the SIGHUP signal, or execution of the command "scontrol reconfigure" unless otherwise noted.</p><p>For general Slurm Cgroups information, see the Cgroups Guide at &lt;http://slurm.schedmd.com/cgroups.html&gt;.</p><p>The following cgroup.conf parameters are defined to control the general behavior of Slurm cgroup plugins.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>CgroupMountpoint</strong>=<em>PATH</em></p>
  </dt>
  <dd>
    <p>Specify the <em>PATH</em> under which cgroups should be mounted. This should be a writable directory which will contain cgroups mounted one per subsystem. The default <em>PATH</em> is /cgroup.</p>
  </dd>
  <dt>
    <p><strong>CgroupAutomount</strong>=&lt;yes|no&gt;</p>
  </dt>
  <dd>
    <p>Slurm cgroup plugins require valid and functional cgroup subsystem to be mounted under /cgroup/&lt;subsystem_name&gt;. When launched, plugins check their subsystem availability. If not available, the plugin launch fails unless CgroupAutomount is set to yes. In that case, the plugin will first try to mount the required subsystems.</p>
  </dd>
  <dt>
    <p><strong>CgroupReleaseAgentDir</strong>=&lt;path_to_release_agent_directory&gt;</p>
  </dt>
  <dd>
    <p>Used to tune the cgroup system behavior. This parameter identifies the location of the directory containing Slurm cgroup release_agent files.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TASK/CGROUP PLUGIN</h2>
        <div class="sectioncontent">
<p>The following cgroup.conf parameters are defined to control the behavior of this particular plugin:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ConstrainCores</strong>=&lt;yes|no&gt;</p>
  </dt>
  <dd>
    <p>If configured to "yes" then constrain allowed cores to the subset of allocated resources. It uses the cpuset subsystem. The default value is "no".</p>
  </dd>
  <dt>
    <p><strong>TaskAffinity</strong>=&lt;yes|no&gt;</p>
  </dt>
  <dd>
    <p>If configured to "yes" then set a default task affinity to bind each step task to a subset of the allocated cores using <strong>sched_setaffinity</strong>. The default value is "no". Note: This feature requires the Portable Hardware Locality (hwloc) library to be installed.</p>
  </dd>
  <dt>
    <p><strong>AllowedRAMSpace</strong>=&lt;number&gt;</p>
  </dt>
  <dd>
    <p>Constrain the job cgroup RAM to this percentage of the allocated memory. The percentage supplied may be expressed as floating point number, e.g. 98.5. If the <strong>AllowedRAMSpace</strong> limit is exceeded, the job steps will be killed and a warning message will be written to standard error.  Also see <strong>ConstrainRAMSpace</strong>. The default value is 100.</p>
  </dd>
  <dt>
    <p><strong>AllowedSwapSpace</strong>=&lt;number&gt;</p>
  </dt>
  <dd>
    <p>Constrain the job cgroup swap space to this percentage of the allocated memory.  The default value is 0, which means that RAM+Swap will be limited to <strong>AllowedRAMSpace</strong>. The supplied percentage may be expressed as a floating point number, e.g. 50.5.  If the limit is exceeded, the job steps will be killed and a warning message will be written to standard error. Also see <strong>ConstrainSwapSpace</strong>.</p>
  </dd>
  <dt>
    <p><strong>ConstrainRAMSpace</strong>=&lt;yes|no&gt;</p>
  </dt>
  <dd>
    <p>If configured to "yes" then constrain the job's RAM usage. The default value is "no", in which case the job's RAM limit will be set to its swap space limit. Also see <strong>AllowedSwapSpace</strong>, <strong>AllowedRAMSpace</strong> and <strong>ConstrainSwapSpace</strong>.</p>
  </dd>
  <dt>
    <p><strong>ConstrainSwapSpace</strong>=&lt;yes|no&gt;</p>
  </dt>
  <dd>
    <p>If configured to "yes" then constrain the job's swap space usage. The default value is "no". Note that when set to "yes" and ConstrainRAMSpace is set to "no", AllowedRAMSpace is automatically set to 100% in order to limit the RAM+Swap amount to 100% of job's requirement plus the percent of allowed swap space. This amount is thus set to both RAM and RAM+Swap limits. This means that in that particular case, ConstrainRAMSpace is automatically enabled with the same limit than the one used to constrain swap space. Also see <strong>AllowedSwapSpace</strong>.</p>
  </dd>
  <dt>
    <p><strong>MaxRAMPercent</strong>=<em>PERCENT</em></p>
  </dt>
  <dd>
    <p>Set an upper bound in percent of total RAM on the RAM constraint for a job. This will be the memory constraint applied to jobs that are not explicitly allocated memory by Slurm (i.e. Slurm's select plugin is not configured to manage memory allocations). The <em>PERCENT</em> may be an arbitrary floating point number. The default value is 100.</p>
  </dd>
  <dt>
    <p><strong>MaxSwapPercent</strong>=<em>PERCENT</em></p>
  </dt>
  <dd>
    <p>Set an upper bound (in percent of total RAM) on the amount of RAM+Swap that may be used for a job. This will be the swap limit applied to jobs on systems where memory is not being explicitly allocated to job. The <em>PERCENT</em> may be an arbitrary floating point number between 0 and 100. The default value is 100.</p>
  </dd>
  <dt>
    <p><strong>MinRAMSpace</strong>=&lt;number&gt;</p>
  </dt>
  <dd>
    <p>Set a lower bound (in MB) on the memory limits defined by <strong>AllowedRAMSpace</strong> and <strong>AllowedSwapSpace</strong>. This prevents accidentally creating a memory cgroup with such a low limit that slurmstepd is immediately killed due to lack of RAM. The default limit is 30M.</p>
  </dd>
  <dt>
    <p><strong>ConstrainDevices</strong>=&lt;yes|no&gt;</p>
  </dt>
  <dd>
    <p>If configured to "yes" then constrain the job's allowed devices based on GRES allocated resources. It uses the devices subsystem for that. The default value is "no".</p>
  </dd>
  <dt>
    <p><strong>AllowedDevicesFile</strong>=&lt;path_to_allowed_devices_file&gt;</p>
  </dt>
  <dd>
    <p>If the ConstrainDevices field is set to "yes" then this file has to be used to declare the devices that need to be allowed by default for all the jobs. The current implementation of cgroup devices subsystem works as a whitelist of entries, which means that in order to isolate the access of a job upon particular devices we need to allow the access on all the devices, supported by default and then deny on those that the job does not have the permission to use. The default value is "/etc/slurm/cgroup_allowed_devices_file.conf". The syntax of the file accepts one device per line and it permits lines like /dev/sda* or /dev/cpu/*/*. See also an example of this file in etc/allowed_devices_file.conf.example.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISTRIBUTION-SPECIFIC NOTES</h2>
        <div class="sectioncontent">
<p>Debian and derivatives (e.g. Ubuntu) usually exclude the memory and memsw (swap) cgroups by default. To include them, add the following parameters to the kernel command line: <strong>cgroup_enable=memory swapaccount=1</strong></p><p>This can usually be placed in /etc/default/grub inside the <strong>GRUB_CMDLINE_LINUX</strong> variable. A command such as update-grub must be run after updating the file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>###</p><p># Slurm cgroup support configuration file</p><p>###</p><p>CgroupAutomount=yes</p><p>CgroupReleaseAgentDir="/etc/slurm/cgroup"</p><p>ConstrainCores=yes</p><p>#</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2010-2012 Lawrence Livermore National Security. Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER).</p><p>Copyright (C) 2010-2013 SchedMD LLC.</p><p>This file is part of SLURM, a resource management program. For details, see &lt;http://slurm.schedmd.com/&gt;.</p><p>SLURM is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>SLURM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO cgroup.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/slurm.conf.5.html"><strong>slurm.conf</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="cgred.conf.5.html"><span aria-hidden="true">&larr;</span> cgred.conf.5: Libcgroup configuration file</a></li>
   <li class="next"><a href="cgrules.conf.5.html">cgrules.conf.5: Libcgroup configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
