<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>kernel-pkg.conf: Configuration file for make-kpkg</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file for make-kpkg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="kernel-pkg.conf (5) manual">
  <meta name="twitter:description" content="Configuration file for make-kpkg">
  <meta name="twitter:image" content="https://www.carta.tech/images/kernel-package-kernel-pkg.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/kernel-pkg.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="kernel-pkg.conf (5) manual" />
  <meta property="og:description" content="Configuration file for make-kpkg" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/kernel-package-kernel-pkg.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">kernel-pkg.conf<small> (5)</small></h1>
        <p class="lead">Configuration file for make-kpkg</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/kernel-pkg.conf.5.html">
      <span itemprop="name">kernel-pkg.conf: Configuration file for make-kpkg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/kernel-package/">
      <span itemprop="name">kernel-package</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/kernel-pkg.conf.5.html">
      <span itemprop="name">kernel-pkg.conf: Configuration file for make-kpkg</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><em>/etc/kernel-pkg.conf</em> or <em>~/.kernel-pkg.conf</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The file <em>/etc/kernel-pkg.conf</em> or <em>~/.kernel-pkg.conf</em> is actually a <strong>Makefile</strong> snippet included during the kernel packages build process, and hence you may put any legal Makefile directive in that file (just make very sure you know what you are doing).  If the per user configuration file <em>~/.kernel-pkg.conf</em> exists, it is loaded in favor of the system wide configuration file <em>/etc/kernel-pkg.conf</em>.</p><p>All the variables have reasonable default values, and maybe overridden on a per run or a per individual basis by using environment variables.  Some of the variables can further be overridden by options to <strong>make-kpkg</strong>.</p><p>At the moment, the user modifiable variables supported are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>maintainer</strong></p>
  </dt>
  <dd>
    <p>Local kernel (image, header, doc, etc.) package maintainer. Set up at package installation by the <em>postinst</em>. Can be overridden by the environment variable <strong>KPKG_MAINTAINER</strong>. Please note that any apostrophes "'" shall have to be quoted like so: maintainer = John O'&#92;''Brien. Yes, this is ugly, but this works.</p>
  </dd>
  <dt>
    <p><strong>email</strong></p>
  </dt>
  <dd>
    <p>The email address of that person.  Set up at package installation by the <em>postinst</em>. Can be overridden by the environment variable <strong>KPKG_EMAIL</strong>.</p>
  </dd>
  <dt>
    <p><strong>pgp</strong></p>
  </dt>
  <dd>
    <p>A key-ID to use when signing packages. Usually passed along to <em>dpkg-buildpackage</em> using the <em>-k</em> option, and also third party modules in the <strong>KMAINT</strong> environment variable, if separate modules (like pcmcia, etc.) are being built in <em>$MODULE_PATH</em>. Can be overridden by the environment variable <strong>PGP_SIGNATURE</strong>, and is overridden (again) by the <em>--pgpsign</em> option of <strong>make-kpkg</strong>. Defaults to <em>maintainer</em>. (Optional)</p>
  </dd>
  <dt>
    <p><strong>debian</strong></p>
  </dt>
  <dd>
    <p>The version of the kernel packages, includes both the upstream version and the Debian revision. Can be overridden by the environment variable <strong>DEBIAN_REVISION</strong>, and is overridden (again) by the <em>--revision</em> option of <strong>make-kpkg</strong>. Defaults to <em>&lt;VERSION&gt;-10.0.0.Custom</em> (Optional)</p>
  </dd>
  <dt>
    <p><strong>debian_revision_mandatory</strong></p>
  </dt>
  <dd>
    <p>Normally unset. If this, or the environment variable <strong>DEBIAN_REVISION_MANDATORY</strong> are set, then not providing a Debian revision results in an error (and <strong>make-kpkg</strong> shall not provide a default value of 10.0.0.Custom)</p>
  </dd>
  <dt>
    <p><strong>kimage</strong></p>
  </dt>
  <dd>
    <p>The kernel image type (i.e. zImage or bzImage). Can be overridden from the environment variable <strong>IMAGE_TYPE</strong>, and is overridden (again) by the options <em>--zimage</em> or <em>--bzimage</em> of <strong>make-kpkg</strong>. Defaults to <em>bzImage</em>. (Optional)</p>
  </dd>
  <dt>
    <p><strong>config_target</strong></p>
  </dt>
  <dd>
    <p>What type of configure step to do. Defaults to oldconfig, which is good for non-interactive (or minimally interactive) runs. (ENV variable <strong>CONFIG_TARGET</strong> overrides this setting.)  If the value of config_target is not recognized, then it is reset to oldconfig.</p>
  </dd>
  <dt>
    <p><strong>use_saved_config</strong></p>
  </dt>
  <dd>
    <p>This is an experts only variable. If set to NO (ENV variable <strong>USE_SAVED_CONFIG</strong> overrides this), the file .config.save in the top level directory is ignored.</p>
  </dd>
  <dt>
    <p><strong>root_cmd</strong></p>
  </dt>
  <dd>
    <p>This is a variable meant to be passed on to <strong>dpkg-buildpackage</strong> in the <em>buildpackage</em> target. This should be set to a means of gaining superuser access (for example, <em>`sudo'</em> or <em>`fakeroot'</em>) as needed by <strong>dpkg-buildpackages</strong>' -r option. The environment variable <strong>ROOT_CMD</strong> overrides this. Use the environment variable <strong>UNSIGN_SOURCE</strong> to pass an option to dpkg-buildpackage to not sign the source; similarly, use the environment variable <strong>UNSIGN_CHANGELOG</strong> to pass an option to dpkg-buildpackage to not sign the changelog. Again, this variable is only useful for the <em>buildpackage</em> target. Set the  environment variable <strong>ROOT_CMD</strong> if you just wish to build the kernel image, for instance.</p>
  </dd>
  <dt>
    <p><strong>delete_build_link</strong></p>
  </dt>
  <dd>
    <p>If set to YES, the symbolic link <em>/lib/modules/$VERSION/build</em> shall be removed from the resulting .deb package.  The environment variable <strong>DELETE_BUILD_LINK</strong> overrides this. The default is unset. Note that this is case sensitive, yes shall not work.</p>
  </dd>
  <dt>
    <p><strong>do_clean</strong></p>
  </dt>
  <dd>
    <p>Set to YES, this causes a make clean to be run in the kernel source tree after building the kernel image package. The environment variable <strong>CLEAN_SOURCE</strong> overrides this.  The default is unset. Note that this is case sensitive, yes shall not work.</p>
  </dd>
  <dt>
    <p><strong>install_vmlinux</strong></p>
  </dt>
  <dd>
    <p>Set to YES to install the uncompressed kernel ELF image along with the bootable compressed kernel image (vmlinuz).  The default is unset. Note that this is case sensitive, yes shall not work.</p>
  </dd>
  <dt>
    <p><strong>image_clean_hook</strong></p>
  </dt>
  <dd>
    <p>Set to point to an executable, this shall cause that executable to run from the top level of the (temporary) kernel image tree before the kernel image is packaged. This has no effect on anything other than the image that is being packaged -- if the script operates on the current directory and its children, the original source tree should remain intact.  This is to facilitate messaging of the kernel image that is packaged.</p>
  </dd>
  <dt>
    <p><strong>source_clean_hook</strong></p>
  </dt>
  <dd>
    <p>Set to point to an executable, this shall cause that executable to run from the top level of the (temporary) kernel source tree before the sources are packaged, <em>./debian/tmp-source/usr/src/kernel-source-X.X.XX</em>. This has no effect on anything other than the sources that are being packaged -- if the script operates on the current directory and its children, the original source tree should remain intact. This is to facilitate messaging of the kernel sources that are packaged (for example, to remove version control directories, or to prune away unwanted architectures).</p>
  </dd>
  <dt>
    <p><strong>header_clean_hook</strong></p>
  </dt>
  <dd>
    <p>Set to point to an executable, this shall cause that executable to run from the top level of the kernel headers before the headers are packaged. This has no effect on anything other than the sources that are being packaged -- if the script operates on the current directory and its children, the original source tree should remain intact. This is to facilitate messaging of the kernel headers that are packaged (for example, to remove version control directories, or to prune away unwanted architectures).</p>
  </dd>
  <dt>
    <p><strong>doc_clean_hook</strong></p>
  </dt>
  <dd>
    <p>Set to point to an executable, this shall cause that executable to run from the top of the documentation tree before kernel documentation is packaged.  This has no effect on anything other than the documentation that is being packaged -- if the script operates on the current directory and its children, the original source tree should remain intact. This is to facilitate messaging of the kernel documentation that is packaged (for example, to remove version control directories, or to prune away unwanted architectures).</p>
  </dd>
  <dt>
    <p><strong>extra_docs</strong></p>
  </dt>
  <dd>
    <p>This variable should be set to the path of any extra documentation that should be installed in <em>/usr/share/doc/kernel-image-X.X.XX/</em> directory. There is no checking for name conflicts, and the files are not compressed. Hence, if you want the files to be compressed, please precompress it and provide the path of the compressed file.  The environment variable <strong>EXTRA_DOCS</strong> overrides this, and would most likely be how extra documentation is specified.</p>
  </dd>
  <dt>
    <p><strong>kpkg_follow_symlinks_in_src</strong></p>
  </dt>
  <dd>
    <p>This option is especially useful for people who use symlink farms to compile kernels. With this option, kernel-source and kernel-header packages shall not be just full of dangling symlinks, instead, the symbolic links shall be followed. Please note that any symbolic links in the kernel sources would be flattened as well.  The environment variable <strong>KPKG_FOLLOW_SYMLINKS_IN_SRC</strong> overrides this.  The default is unset.</p>
  </dd>
  <dt>
    <p><strong>make_libc_headers</strong></p>
  </dt>
  <dd>
    <p>This is meant to be used by the <em>libc6</em> maintainer, when he compiles <em>libc6</em>, to also package up the corresponding headers. <strong>DO NOT SET THIS</strong> unless you know what you are doing, since a mismatch between the headers you package and <em>libc6</em> may well create a subtle instability in all code compiled on your machine. You have been warned. The environment variable <strong>MAKE_LIBC_HEADERS</strong> overrides this.  The default is unset.</p>
  </dd>
  <dt>
    <p><strong>CONCURRENCY_LEVEL</strong></p>
  </dt>
  <dd>
    <p>If defined, this variable sets the concurrency level of make used to compile the kernel and the modules set using <em>-j</em> flags to the sub make in the <strong>build</strong> target of <strong>make-kpkg.</strong> Should be a (small) integer, if used.</p>
  </dd>
  <dt>
    <p><strong>ARCH_IN_NAME</strong></p>
  </dt>
  <dd>
    <p>If defined, this variable causes <strong>make-kpkg</strong> to use an extended name for the kernel image package by embedding the subarchitecture  in the image name, so one could write a script to create multiple subarchitectures one after the  other. <strong>Please note</strong> that  only  the package <em>name</em> is  affected,  not module locations etc.</p>
  </dd>
  <dt>
    <p><strong>CONFDIR</strong></p>
  </dt>
  <dd>
    <p>Set this variable, either in the environment or in the config file, to point to the location where the kernel config files are located. These are architecture specific <em>.config</em> files (look at <em>/usr/share/kernel-package/Config</em> for examples). This is useful for people who need to compile for several architectures. Defaults to <em>/usr/share/kernel-package/Config</em></p>
  </dd>
  <dt>
    <p><strong>IMAGEDIR</strong></p>
  </dt>
  <dd>
    <p>If you want the image to be stored elsewhere than <em>/boot</em> set this variable to the dir where you want the image. This may be of help to <strong>loadlin</strong> users. Defaults to <em>/boot</em>.</p>
  </dd>
  <dt>
    <p><strong>MODULE_LOC</strong></p>
  </dt>
  <dd>
    <p>Set this variable, either in the environment or in the config file, to point to the location where the add-on modules are located. Defaults to <em>/usr/src/modules</em></p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>
<p>The value of a variable can be set so:</p>
<dl class='dl-vertical'>
  <dt>
    a)
  </dt>
  <dd>
    <p>Defaults exist in the rules file. These are the values used if no customization is done.</p>
  </dd>
  <dt>
    b)
  </dt>
  <dd>
    <p>Variables can be set in the config file <em>/etc/kernel-pkg.conf</em>. These values override the defaults.</p>
  </dd>
  <dt>
    c)
  </dt>
  <dd>
    <p>Variables can also be set by setting a corresponding environment variable.  These values override the config file and the defaults.</p>
  </dd>
  <dt>
    d)
  </dt>
  <dd>
    <p>Using <strong>make-kpkg</strong> options, or, if using the rules file directly, on command line</p><p><strong># xxx/rules DEBIAN_REVISION=2.0a kernel_image</strong></p><p>This overrides all the above methods.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>The file described here is <em>/etc/kernel-pkg.conf</em> or <em>~/.kernel-pkg.conf</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO kernel-pkg.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/make.1.html"><strong>make</strong>(1)</a>, <a href="../man1/make-kpkg.1.html"><strong>make-kpkg</strong>(1)</a>, <a href="../man5/kernel-img.conf.5.html"><strong>kernel-img.conf</strong>(5)</a>, <strong>The GNU Make manual</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>There are no bugs.  Any resemblance thereof is delirium. Really.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Manoj Srivastava &lt;srivasta@debian.org&gt;, for the Debian GNU/Linux system.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="kernel-package.5.html"><span aria-hidden="true">&larr;</span> kernel-package.5: System for creating kernel related packages</a></li>
   <li class="next"><a href="keyboard.5.html">keyboard.5: Keyboard configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
