<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>radrelay.conf: Configuration file for the freeradius server "radrelay" personality</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file for the freeradius server "radrelay" personality">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="radrelay.conf (5) manual">
  <meta name="twitter:description" content="Configuration file for the freeradius server "radrelay" personality">
  <meta name="twitter:image" content="https://www.carta.tech/images/freeradius-common-radrelay.conf-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/radrelay.conf.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="radrelay.conf (5) manual" />
  <meta property="og:description" content="Configuration file for the freeradius server "radrelay" personality" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/freeradius-common-radrelay.conf-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">radrelay.conf<small> (5)</small></h1>
        <p class="lead">Configuration file for the freeradius server "radrelay" personality</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/radrelay.conf.5.html">
      <span itemprop="name">radrelay.conf: Configuration file for the freeradius server "radrelay" personality</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/freeradius-common/">
      <span itemprop="name">freeradius-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/radrelay.conf.5.html">
      <span itemprop="name">radrelay.conf: Configuration file for the freeradius server "radrelay" personality</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>radrelay.conf</strong> file resides in the radius database directory, by default <strong>/etc/raddb</strong>.  It defines the global configuration for the FreeRADIUS server, when the server is operating as "radrelay".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE FORMAT</h2>
        <div class="sectioncontent">
<p>For a detailed description of the file format, see "man radiusd.conf". The configuration entries are much the same for radrelay.conf, with a few differences as noted here.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPLICATION FOR BACKUPS</h2>
        <div class="sectioncontent">
<p>Many sites run multiple radius servers; at least one primary and one backup server. When the primary goes down, most NASes detect that and switch to the backup server.</p><p>That will cause your accounting packets to go the the backup server - and some NASes don't even switch back to the primary server when it comes back up.</p><p>The result is that accounting records are missed, and/or the administrator must jump through hoops in order to combine the different detail files from multiple servers. It also means that the session database ("radutmp", used for radwho and simultaneous use detection) gets out of sync.</p><p>radrelay solves this issue by "relaying" packets from one server to another, so they both have the same set of accounting data.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUFFERING FOR HIGH-LOAD SERVERS</h2>
        <div class="sectioncontent">
<p>If the RADIUS server suddenly receives a many accounting packets, there may be insufficient CPU power to process them all in a timely manner.  This problem is especially noticable when the accounting packets are going to a back-end database.</p><p>Similarly, you may have one database that tracks "live" sessions, and another that tracks historical accounting data.  In that case, accessing the first database is fast, as it is small.  Accessing the second database many be slower, as it may contain multiple gigabytes of data.  In addition, writing to the first database in a timely manner is important, while data may be written to the second database with a few minutes delay, without any harm being done.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELAYING OF ACCOUNTING PACKETS</h2>
        <div class="sectioncontent">
<p>The <strong>radrelay.conf</strong> file controls the "radrelay" personality of the server, which can perform both of the functions above at the same time.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>First, you should configure the main radius server to log to an extra, single detail file.  This may be done by adding an extra instance of the detail module to <strong>radiusd.conf</strong>:</p><p>For example:</p>
<pre>
	detail radrelay-detail {

		detailfile = ${radacctdir}/radrelay/detail

		detailperm = 0600

		dirperm = 0755

		locking = yes

	}

	...

	accounting {

		...

		radrelay-detail

		...

	}

</pre>
<p>This configuration will cause accounting packets to be logged to the <em>${radacctdir}/radrelay/detail</em> file.  This file should not be rotated by standard log rotation scripts, as the <strong>radrelay</strong> program will read and rotate it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RADRELAY.CONF EXAMPLE</h2>
        <div class="sectioncontent">
<p>See the <strong>radrelay.conf</strong> file for detailed instructions on configuration entries, what they mean, and how to use them.</p><p>To have the "radrelay" portion of the server read the above detail file, configure <strong>radrelay.conf</strong> with the following section:</p><p>	listen {</p><p>		type = detail</p><p>		detail = ${radacctdir}/radrelay/detail</p><p>		max_outstanding = 100</p><p>		identity = radrelay</p><p>	}</p><p>The server will read the accounting packets from the detail file, and process them just as if it had received them from the NAS.  Therefore, you should configure the "accounting" section of <strong>radrelay.conf</strong> to write the accounting records to an "sql" module, or to proxy them to another RADIUS server.</p><p>Then, start the server via the following command:</p><p>$ radiusd -n radrelay</p><p>The server should start up, read the detail file, and process accounting packets from it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The <strong>radiusd.conf</strong> file is not read at all when the server is running as radrelay.  Please edit <strong>radrelay.conf</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREDITS</h2>
        <div class="sectioncontent">
<p>The original "radrelay" program was written by Miquel van Smoorenburg for the Cistron radius project, and ported to FreeRADIUS by Simon Ekstrand.  The "radsqlrelay" was written by Kostas Kalavras.  It was never released as part of an offical FreeRADIUS release, but served as a basis for the design of this implementation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/raddb/radrelay.conf</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO radrelay.conf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/radiusd.8.html"><strong>radiusd</strong>(8)</a>, <a href="../man5/radiusd.conf.5.html"><strong>radiusd.conf</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Alan DeKok &lt;aland@ox.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="radiusd.conf.5.html"><span aria-hidden="true">&larr;</span> radiusd.conf.5: Configuration file for the freeradius server</a></li>
   <li class="next"><a href="radsecproxy.conf.5.html">radsecproxy.conf.5: Radsec proxy configuration file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
