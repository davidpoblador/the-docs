<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>shorewall-providers: Shorewall providers file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shorewall providers file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="shorewall-providers (5) manual">
  <meta name="twitter:description" content="Shorewall providers file">
  <meta name="twitter:image" content="https://www.carta.tech/images/shorewall-shorewall-providers-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/shorewall-providers.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="shorewall-providers (5) manual" />
  <meta property="og:description" content="Shorewall providers file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/shorewall-shorewall-providers-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">shorewall-providers<small> (5)</small></h1>
        <p class="lead">Shorewall providers file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/shorewall-providers.5.html">
      <span itemprop="name">shorewall-providers: Shorewall providers file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/shorewall/">
      <span itemprop="name">shorewall</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/shorewall-providers.5.html">
      <span itemprop="name">shorewall-providers: Shorewall providers file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/etc/shorewall/providers</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This file is used to define additional routing tables. You will want to define an additional table if:</p><p>You have connections to more than one ISP or multiple connections to the same ISP</p><p>You run Squid as a transparent proxy on a host other than the firewall.</p><p>You have other requirements for policy routing.</p><p>Each entry in the file defines a single routing table.</p><p>If you wish to omit a column entry but want to include an entry in the next column, use "-" for the omitted entry.</p><p>The columns in the file are as follows.</p><p><strong>NAME</strong> - <em>name</em></p><p>The provider <em>name</em>. Must be a valid shell variable name. The names &apos;local&apos;, &apos;main&apos;, &apos;default&apos; and &apos;unspec&apos; are reserved and may not be used as provider names.</p><p><strong>NUMBER</strong> - <em>number</em></p><p>The provider number -- a number between 1 and 15. Each provider must be assigned a unique value.</p><p><strong>MARK</strong> (Optional) - <em>value</em></p><p>A FWMARK <em>value</em> used in your \m[blue]<a href="../man5/shorewall-mangle.5.html"><strong>shorewall-mangle</strong>(5)</a></strong>\m[]\s-2\u[1]\d\s+2 file to direct packets to this provider.</p><p>If HIGH_ROUTE_MARKS=Yes in \m[blue]<strong>shorewall.conf</strong>(5)</strong>\m[]\s-2\u[2]\d\s+2, then the value must be a multiple of 256 between 256 and 65280 or their hexadecimal equivalents (0x0100 and 0xff00 with the low-order byte of the value being zero). Otherwise, the value must be between 1 and 255. Each provider must be assigned a unique mark value. This column may be omitted if you don&apos;t use packet marking to direct connections to a particular provider.</p><p><strong>DUPLICATE</strong> - <em>routing-table-name</em></p><p>The name of an existing table to duplicate to create this routing table. May be <strong>main</strong> or the name of a previously listed provider. You may select only certain entries from the table to copy by using the COPY column below. This column should contain a dash ("-&apos;) when USE_DEFAULT_RT=Yes in \m[blue]<strong>shorewall.conf</strong>(5)</strong>\m[]\s-2\u[2]\d\s+2.</p><p><strong>INTERFACE</strong> - <em>interface</em>[:<em>address</em>]</p><p>The name of the network interface to the provider. Must be listed in \m[blue]<a href="../man5/shorewall-interfaces.5.html"><strong>shorewall-interfaces</strong>(5)</a></strong>\m[]\s-2\u[3]\d\s+2. In general, that interface should not have the <strong>proxyarp</strong> option specified unless <strong>loose</strong> is given in the OPTIONS column of this entry.</p><p>Where more than one provider is serviced through a single interface, the <em>interface</em> must be followed by a colon and the IP <em>address</em> of the interface that is supplied by the associated provider.</p><p><strong>GATEWAY</strong> - {<strong>-</strong>|<em>address</em>[,<em>mac</em>]|<strong>detect</strong>}</p><p>The IP address of the provider&apos;s gateway router. Beginning with Shorewall 4.6.2, you may also specify the MAC address of the gateway when there are multiple providers serviced through the same interface. When the MAC is not specified, Shorewall will detect the MAC during firewall start or restart.</p><p>You can enter "detect" here and Shorewall will attempt to detect the gateway automatically.</p><p>For PPP devices, you may omit this column.</p><p><strong>OPTIONS</strong> (Optional) - [<strong>-</strong>|<em>option</em>[<strong>,</strong><em>option</em>]...]</p><p>A comma-separated list selected from the following. The order of the options is not significant but the list may contain no embedded white-space.</p><p>autosrc</p><p>Added in Shorewall 4.5.17. Causes a host route to the provider&apos;s gateway router to be added to the provider&apos;s routing table. This is the default behavior unless overridden by a following <strong>noautosrc</strong> option.</p><p><strong>track</strong></p><p>If specified, inbound connections on this interface are to be tracked so that responses may be routed back out this same interface.</p><p>You want to specify <strong>track</strong> if internet hosts will be connecting to local servers through this provider.</p><p>Beginning with Shorewall 4.4.3, <strong>track</strong> defaults to the setting of the TRACK_PROVIDERS option in \m[blue]<strong>shorewall.conf</strong>\m[]\s-2\u[2]\d\s+2 (5). If you set TRACK_PROVIDERS=Yes and want to override that setting for an individual provider, then specify <strong>notrack</strong> (see below).</p><p><strong>balance[=</strong><strong></strong><em>weight</em><strong>]</strong></p><p>The providers that have <strong>balance</strong> specified will get outbound traffic load-balanced among them. By default, all interfaces with <strong>balance</strong> specified will have the same weight (1). You can change the weight of an interface by specifying <strong>balance=</strong><em>weight</em> where <em>weight</em> is the weight of the route out of this interface.</p><p><strong>loose</strong></p><p>Shorewall normally adds a routing rule for each IP address on an interface which forces traffic whose source is that IP address to be sent using the routing table for that interface. Setting <strong>loose</strong> prevents creation of such rules on this interface.</p><p>noautosrc</p><p>Added in Shorewall 4.5.17. Prevents the addition of a host route to the provider&apos;s gateway router from being added to the provider&apos;s routing table. This option must be used with caution as it can cause start and restart failures.</p><p><strong>notrack</strong></p><p>Added in Shorewall 4.4.3. When specified, turns off <strong>track</strong>.</p><p><strong>optional (deprecated for use with providers that do not share an interface)</strong></p><p>If the interface named in the INTERFACE column is not up and configured with an IPv4 address then ignore this provider. If not specified, the value of the <strong>optional</strong> option for the INTERFACE in \m[blue]<a href="../man5/shorewall-interfaces.5.html"><strong>shorewall-interfaces</strong>(5)</a></strong>\m[]\s-2\u[3]\d\s+2 is assumed. Use of that option is preferred to this one, unless an <em>address</em> is provider in the INTERFACE column.</p><p><strong>src=</strong><em>source-address</em></p><p>Specifies the source address to use when routing to this provider and none is known (the local client has bound to the 0 address). May not be specified when an <em>address</em> is given in the INTERFACE column. If this option is not used, Shorewall substitutes the primary IP address on the interface named in the INTERFACE column.</p><p><strong>mtu=</strong><em>number</em></p><p>Specifies the MTU when forwarding through this provider. If not given, the MTU of the interface named in the INTERFACE column is assumed.</p><p><strong>fallback[=</strong><strong></strong><em>weight</em><strong>]</strong></p><p>Indicates that a default route through the provider should be added to the default routing table (table 253). If a <em>weight</em> is given, a balanced route is added with the weight of this provider equal to the specified <em>weight</em>. If the option is given without a <em>weight</em>, an separate default route is added through the provider&apos;s gateway; the route has a metric equal to the provider&apos;s NUMBER.</p><p>Prior to Shorewall 4.4.24, the option is ignored with a warning message if USE_DEFAULT_RT=Yes in shorewall.conf.</p><p><strong>tproxy</strong></p><p>Added in Shorewall 4.5.4. Used for supporting the TPROXY action in <a href="../man5/shorewall-mangle.5.html"><strong>shorewall-mangle</strong>(5)</a>. See \m[blue]<strong>http://www.shorewall.net/Shorewall_Squid_Usage.html</strong>\m[]\s-2\u[4]\d\s+2. When specified, the MARK, DUPLICATE and GATEWAY columns should be empty, INTERFACE should be set to &apos;lo&apos; and <strong>tproxy</strong> should be the only OPTION. Only one <strong>tproxy</strong> provider is allowed.</p><p><strong>hostroute</strong></p><p>Added in Shorewall 4.5.21. This is the default behavior that results in a host route to the defined <strong>GATEWAY</strong> being inserted into the main routing table and into the provider&apos;s routing table. <strong>hostroute</strong> is required for older distributions but <strong>nohostroute</strong> (below) is appropriate for recent distributions. <strong>hostroute</strong> may interfere with Zebra&apos;s ability to add routes on some distributions such as Debian 7.</p><p><strong>nohostroute</strong></p><p>Added in Shorewall 4.5.21. nohostroute inhibits addition of a host route to the defined <strong>GATEWAY</strong> being inserted into the main routing table and into the provider&apos;s routing table. <strong>nohostroute</strong> is not appropriate for older distributions but is appropriate for recent distributions. <strong>nohostroute</strong> allows Zebra&apos;s to correctly add routes on some distributions such as Debian 7.</p><p><strong>COPY</strong> - [{<strong>none</strong>|<em>interface</em><strong>[,</strong><em>interface</em>]...}]</p><p>A comma-separated list of other interfaces on your firewall. Wildcards specified using an asterisk ("*") are permitted (e.g., tun* ). Usually used only when DUPLICATE is <strong>main</strong>. Only copy routes through INTERFACE and through interfaces listed here. If you only wish to copy routes through INTERFACE, enter <strong>none</strong> in this column.</p><p>Beginning with Shorewall 4.5.17, blackhole, unreachable and prohibit routes are no longer copied by default but may be copied by including <strong>blackhole</strong>,<strong>unreachable</strong> and <strong>prohibit</strong> respectively in the COPY list.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Example 1:</p><p>You run squid in your DMZ on IP address 192.168.2.99. Your DMZ interface is eth2</p>
<pre>
        #NAME   NUMBER  MARK DUPLICATE  INTERFACE GATEWAY       OPTIONS
        Squid   1       1    -          eth2      192.168.2.99  -
</pre>
<p>Example 2:</p><p>eth0 connects to ISP 1. The IP address of eth0 is 206.124.146.176 and the ISP&apos;s gateway router has IP address 206.124.146.254.</p><p>eth1 connects to ISP 2. The IP address of eth1 is 130.252.99.27 and the ISP&apos;s gateway router has IP address 130.252.99.254.</p><p>eth2 connects to a local network.</p>
<pre>
        #NAME NUMBER MARK DUPLICATE INTERFACE GATEWAY          OPTIONS            COPY
        ISP1  1       1    main      eth0      206.124.146.254 track,balance      eth2
        ISP2  2       2    main      eth1      130.252.99.254  track,balance      eth2
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/shorewall/providers</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO shorewall-providers&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong>http://www.shorewall.net/MultiISP.html</strong>\m[]\s-2\u[5]\d\s+2</p><p>\m[blue]<strong>http://www.shorewall.net/configuration_file_basics.htm#Pairs</strong>\m[]\s-2\u[6]\d\s+2</p><p><strong>shorewall</strong>(8), <a href="../man5/shorewall-accounting.5.html"><strong>shorewall-accounting</strong>(5)</a>, <a href="../man5/shorewall-actions.5.html"><strong>shorewall-actions</strong>(5)</a>, <a href="../man5/shorewall-blacklist.5.html"><strong>shorewall-blacklist</strong>(5)</a>, <a href="../man5/shorewall-hosts.5.html"><strong>shorewall-hosts</strong>(5)</a>, <strong>shorewall_interfaces</strong>(5), <a href="../man5/shorewall-ipsets.5.html"><strong>shorewall-ipsets</strong>(5)</a>, <a href="../man5/shorewall-maclist.5.html"><strong>shorewall-maclist</strong>(5)</a>, <a href="../man5/shorewall-masq.5.html"><strong>shorewall-masq</strong>(5)</a>, <a href="../man5/shorewall-nat.5.html"><strong>shorewall-nat</strong>(5)</a>, <a href="../man5/shorewall-netmap.5.html"><strong>shorewall-netmap</strong>(5)</a>, <a href="../man5/shorewall-params.5.html"><strong>shorewall-params</strong>(5)</a>, <a href="../man5/shorewall-policy.5.html"><strong>shorewall-policy</strong>(5)</a>, <a href="../man5/shorewall-proxyarp.5.html"><strong>shorewall-proxyarp</strong>(5)</a>, <a href="../man5/shorewall-rtrules.5.html"><strong>shorewall-rtrules</strong>(5)</a>, <a href="../man5/shorewall-routestopped.5.html"><strong>shorewall-routestopped</strong>(5)</a>, <a href="../man5/shorewall-rules.5.html"><strong>shorewall-rules</strong>(5)</a>, <strong>shorewall.conf</strong>(5), <a href="../man5/shorewall-secmarks.5.html"><strong>shorewall-secmarks</strong>(5)</a>, <a href="../man5/shorewall-tcclasses.5.html"><strong>shorewall-tcclasses</strong>(5)</a>, <a href="../man5/shorewall-tcdevices.5.html"><strong>shorewall-tcdevices</strong>(5)</a>, <a href="../man5/shorewall-mangle.5.html"><strong>shorewall-mangle</strong>(5)</a>, <a href="../man5/shorewall-tos.5.html"><strong>shorewall-tos</strong>(5)</a>, <a href="../man5/shorewall-tunnels.5.html"><strong>shorewall-tunnels</strong>(5)</a>, <a href="../man5/shorewall-zones.5.html"><strong>shorewall-zones</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man5/shorewall-mangle.5.html"><strong>shorewall-mangle</strong>(5)</a></p><p>http://www.shorewall.net/manpages/shorewall-mangle.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><strong>shorewall.conf</strong>(5)</p><p>http://www.shorewall.net/manpages/shorewall.conf.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p><a href="../man5/shorewall-interfaces.5.html"><strong>shorewall-interfaces</strong>(5)</a></p><p>http://www.shorewall.net/manpages/shorewall-interfaces.html</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p>http://www.shorewall.net/Shorewall_Squid_Usage.html</p><p>http://www.shorewall.net/Shorewall_Squid_Usage.html</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p>http://www.shorewall.net/MultiISP.html</p><p>http://www.shorewall.net/MultiISP.html</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p>http://www.shorewall.net/configuration_file_basics.htm#Pairs</p><p>http://www.shorewall.net/configuration_file_basics.htm#Pairs</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="shorewall-policy.5.html"><span aria-hidden="true">&larr;</span> shorewall-policy.5: Shorewall policy file</a></li>
   <li class="next"><a href="shorewall-proxyarp.5.html">shorewall-proxyarp.5: Shorewall proxy arp file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
