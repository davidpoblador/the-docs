<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dacs.nat: Notice acknowledgement token specification</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Notice acknowledgement token specification">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dacs.nat (5) manual">
  <meta name="twitter:description" content="Notice acknowledgement token specification">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-dacs.nat-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/dacs.nat.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dacs.nat (5) manual" />
  <meta property="og:description" content="Notice acknowledgement token specification" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-dacs.nat-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dacs.nat<small> (5)</small></h1>
        <p class="lead">Notice acknowledgement token specification</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/dacs.nat.5.html">
      <span itemprop="name">dacs.nat: Notice acknowledgement token specification</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/dacs.nat.5.html">
      <span itemprop="name">dacs.nat: Notice acknowledgement token specification</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>These files are part of the <strong>DACS</strong> suite.</p><p>The \m[blue]<a href="../man8/dacs_notices.8.html"><strong>dacs_notices</strong>(8)</a></strong>\m[]\s-2\u[1]\d\s+2 web service implements selected parts of this specification.</p><h3>Introduction</h3>
<p>This document specifies the syntax and semantics of the Notice Acknowledgement Token (NAT), which is used by parts of <strong>DACS</strong> and may be of use to other systems. Interoperating systems that adopt this specification will be able to understand NATs produced by any of the systems and will therefore be capable of avoiding unnecessary user prompting.</p><p>A system is not required to honour or even recognize another system&apos;s NAT, but doing so may benefit users.</p><p><strong>Purpose</strong></p><p>Some web service providers have a requirement that users must acknowledge some form of notice before access can be granted to an associated resource, in addition to usual access control constraints. A user attempting to access such a resource is shown a web page containing a notice (or notices) and asked to acknowledge reading it or accept its conditions, typically by performing an action indicating acceptance, and submitting an HTML form. These notices are commonly legal notices, such as copyright notices, licensing notices, restricted access notices, and terms-of-use notices. This idea can also be applied to alerting users (a warning about upcoming system maintenance, for example).</p><p>For the convenience of users, once an acknowledgement has been obtained by the system the user should not be re-prompted when the same resource is subsequently accessed. The user might be re-prompted, however, should there be configuration changes (e.g., a notice is revised) or if the acknowledgement is deemed to have expired. To achieve this, state information must be maintained such that the access control mechanism is able to determine which, if any, acknowledgements for a particular resource have already been obtained.</p><p>State information used to record an acknowledgement event is called a <em>Notice Acknowledgement Token</em> (NAT) in this document.</p><p><strong>Design Elements</strong></p><p>Different web service providers will have different types of web services and require solutions that differ in their details. A well-designed solution architecture will therefore need to support a spectrum of requirements. Some applications will involve saving state on the client, some will require state to be saved on the server only, and others will need a combination of both approaches.</p><p>Saving state purely on the server assumes that the server has a means of identifying a client and associating persistent state with him. Upon receiving a service request, the server knows who the client is and can retrieve the client&apos;s state, including notice acknowledgement history.</p><p>Saving state purely on the client has the advantage of requiring no maintenance of state at the server, thereby reducing its complexity. For brower-based applications, HTTP cookies will be the usual mechanism for maintaining state at the client; after being returned by the server, notice acknowledgement tokens will thereafter be automatically transmitted by the browser together with future requests. Because browsers have implementation-dependent limits on the number of cookies (total, and per-server or domain name), as well as the maximum cookie size, the principle failing of this approach is that a browser may unilaterally delete HTTP cookies, thereby "forgetting" notice acknowledgements. HTTP cookies also have the disadvantage of being tied to a specified domain name, which may limit how notice acknowledgement tokens can be shared among servers.</p><p>A combined approach shares the advantages and disadvantages of the individual approaches, but reduces memory requirement at the client. Rather than storing all of the information at the client, the client is given a much smaller data structure that is essentially just a pointer to information maintained at the server.</p><p>Our concern here is specifying the syntax and semantics of client-side state information in support of building notice acknowledgement architectures.</p><p>The following features are examples of the kinds of functionality that a web service provider might want:</p><p>One or more notices may need to be associated with a single resource.</p><p>The same notice(s) may apply to multiple resources but those resources may have different access control requirements.</p><p>A different notice (or notices) may apply to resources having identical access control requirements.</p><p>If a new notice is added for a resource, a user having previously accessed the resource and acknowledged its notice should be presented with (only) the new notice upon his next access.</p><p>If a notice is modified for a resource, a user having previously acknowledged the notice should be presented with the modified notice upon his next access.</p><p>It may be necessary to periodically require users to re-acknowledge a notice (acknowledgements may expire).</p><p>Whether any notices exist for a particular resource, and exactly which notices must be shown, can be very simple or highly application- and data-dependent. A solution will therefore sometimes involve the web service provider having to write some custom code to supply this information.</p><p>Obtaining the appropriate notice to be presented to a user may be as simple as retrieving the contents of a file. But notices may need to be generated on the fly by a program and therefore ought to be named by, and obtained through, URLs.</p><p>Safeguards may be required to ensure that it is difficult to bypass the notice acknowledgement mechanism.</p><p>Safeguards may be required to ensure that information within a notice acknowledgement token remains private.</p><p>State information must be extensible to accommodate future and unforeseen needs.</p><p><strong>Terminology</strong></p><p>We use the terms "web server", "server", and "application" interchangeably to refer to an entity that receives and processes web service requests.</p><p>We use the terms "client", "user", "user agent", and "browser" to refer to an entity that generates web service requests and transmits them to a server.</p><p>A resource that can be associated with an acknowledgement is identified by a URI (\m[blue]<strong>RFC 2396</strong>\m[]\s-2\u[2]\d\s+2, \m[blue]<strong>RFC 3986</strong>\m[]\s-2\u[3]\d\s+2).</p><p><strong>Notational Conventions</strong></p><p>The Augmented BNF of \m[blue]<strong>RFC 2616</strong>\m[]\s-2\u[4]\d\s+2 (Section 2.1) is used to specify syntax.</p><p><strong>Summary</strong></p><p>The remainder of this document specifies the NAT, a system-independent data structure for representing and sharing notice acknowledgement state information. The NAT provides a simple, extensible representation of an acknowledgement event. For environments where security and tamper-resistance are required, appropriate elements are defined; environments where this is not required need not use or implement these capabilities. The NAT can be transmitted with a request as the payload of an HTTP cookie or the value of an HTTP extension header. Cooperating web services that follow this specification will be capable of understanding each other&apos;s NATs.</p>
<h3>The Notice Acknowlegement Token</h3>
<p>The format of a NAT is described in this section. NATs are constructed by a server either strictly for its own use or with the intent of sharing state information amongst a set of cooperating servers.</p><p>Servers that fulfill part or all of a user&apos;s service request by making one or more service requests to other servers ("cascaded operation") are required to forward NATs provided to them by the user or another server. When used in this environment, and any environment where servers are loosely associated, an implementation must select NAT attribute types carefully to maximize interoperability.</p><p>A server is free to ask a client to delete a NAT (e.g., by setting an expired cookie with the same name) or replace a NAT with a newer instance.</p><p><strong>NAT Syntax</strong></p><p>A notice acknowledgement token has the following general format:</p>
<pre>
nat = nat-name "=" nat-value
</pre>
<p>Following \m[blue]<strong>RFC 2109</strong>\m[]\s-2\u[5]\d\s+2 (Section 4.3.4), an (unordered) set of NATs is represented as</p>
<pre>
nats = nat *((";" | ",") nat)
</pre>
<p>That is, two or more NATs can be combined for transmission by separating them with a ";" or "," character.</p><p>A NAT with an invalid nat-name or nat-value is ignored.</p>
<pre>
nat-value = <strong>mime_encode</strong>(unsecure-nat) | <strong>mime_encode</strong>(secure-nat)

nat-name  = token

unsecure-nat = av-pairs
secure-nat   = hmac hmac-nat
hmac         = "HMAC=&lt;"&gt;" hmac-value &lt;"&gt;
hmac-nat     = ";" clear-nat ";" enc-method(av-pairs)
clear-nat    = *1("Version=&lt;"&gt;" version &lt;"&gt; ";") "Secure=&lt;"&gt;" enc-method &lt;"&gt;
</pre>
<p><strong>Security</strong></p><p>The secure-nat syntax, which is optional, has been carefully designed to be secure, incur reasonable encoding overhead, and simplify implementation. The secure-nat syntax is used to protect integrity and provide privacy. Integrity is guarded through a cryptographically-secure keyed message authentication code; in addition, attributes may optionally be kept private by encipherment.</p><p>In the absence of precautions to maintain privacy, inspection of NATs can reveal a portion of a user&apos;s access history. In situations where NATs are not transmitted over secure end-to-end connections, such as those that can be provided by SSL, the secure-nat syntax should be considered. Definitions of encryption and message digest algorithms, and sharing and management of encryption keys are outside the scope of this document.</p><p>The <strong>mime_encode</strong> function represents the application of base-64 encoding to the given syntactical element (see \m[blue]<strong>Section 2.6</strong>\m[]\s-2\u[6]\d\s+2). This encoding prevents elements of the cookie value from conflicting with the syntax of the Cookie header or an HTTP message-header and allow binary data to be sent reliably over networks and heterogeneous platforms.</p>
<pre>
av-pairs      = av-pair *(";" av-pair)
av-pair       = attr-name "=" attr-value
attr-name     = token
attr-value    = quoted-string
quoted-string = &lt;"&gt; text-subset &lt;"&gt;
text-subset   = &lt;<em>any </em><em>TEXT</em><em> except </em><em>separators</em>&gt;

TEXT          = *&lt;<em>any </em><em>CHAR</em><em> except </em><em>CTL</em><em>s but including </em><em>SP</em>&gt;

escaped-char  = "%" HEXDIGIT HEXDIGIT
HEXDIGIT      = "A" | "B" | "C" | "D" | "E" | "F"
                    | "a" | "b" | "c" | "d" | "e" | "f" | DIGIT
DIGIT         = "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"
HEXSTRING     = 1*(HEXDIGIT)

token          = 1*&lt;<em>any </em><em>CHAR</em><em> except </em><em>CTL</em><em>s or </em><em>separators</em>&gt;
separators     = "(" | ")" | "&lt;" | "&gt;" | "@"
                  | "," | ";" | ":" | "&#92;" | &lt;"&gt;
                  | "/" | "[" | "]" | "?" | "="
                  | "{" | "}" | SP | HT
CTL            = &lt;<em>any US-ASCII control character</em>
                    (octets 0 - 31) and DEL (127)&gt;
CHAR           = &lt;<em>any US-ASCII character (octets 0 - 127)</em>&gt;
</pre>
<p>Attributes (attr-name) are case-insensitive. One or more spaces are permitted before and/or after a ";" and before and/or after a "=".</p><p>An attr-value can contain arbitrary OCTETs through the escaped-char syntax. A literal "%" character must itself be escaped as the three characters "%25" and a literal ";" character must be escaped as "%3b".</p><p>This syntax allows a NAT to appear as the value of the Cookie request header or of an HTTP extension header. It is beyond the scope of this document how NATs are passed from system to system, however.</p><p><strong>NAT Names</strong></p><p>It is recommended that NAT names (nat-name) begin with the four-character long prefix "NAT-" so that they can be readily recognized. For example, HTTP Cookie headers bearing two NATs might use any of the following cookie name syntaxes:</p>
<pre>
Cookie: NAT-METALOGIC=... ; NAT-DSS=...
Cookie: NAT-METALOGIC.COM=... ; NAT-DSS.CA=...
Cookie: NAT-METALOGIC.COM-17=...
Cookie: NAT-METALOGIC.COM-WMS-17=...
</pre>
<p>The goal in selecting a syntax is to provide a way for applications to quickly locate NATs that they generated or are interested in. Since a server may issue multiple NATs as HTTP cookies, each such cookie must have a distinct nat-name. This may be achieved by appending a sequence number, time of day, or hash value, for example.</p><p><strong>NAT Reserved Attributes</strong></p><p>All of the attribute names (attr-name) defined in this section are reserved. All of the attributes are optional, except HMAC and Secure, which are required only when forming a secure-nat.</p><p>An implementation may use syntactically valid, unreserved attribute names for its own purposes. Unrecognized and invalid attribute names should be ignored by servers. Attribute names are case insensitive. The relative ordering of attributes is immaterial, except as stated otherwise.</p><p>A syntactically invalid nat will be ignored. If duplicate attribute names appear in a nat, a server should treat the nat as invalid and ignore it.</p><p>A resource-uri, which is used below, is defined as follows:</p>
<pre>
resource-uri = URI | relative-uri | uri "/*" | relative-uri "/*"
</pre>

<pre>
Attribute Name: CreatorURI (<em>optional</em>)
Attribute Value: a URI
</pre>
<p>This URI identifies the server, application, or jurisdiction that created this NAT. If it is an absolute URI, it also establishes a base URI for relative URIs within this NAT. Examples:</p>
<pre>
CreatorURI="https://example.com:8443"
CreatorURI="http://example.com/cgi-bin/dacs"
CreatorURI="MYFED::MYJURISDICTION"
</pre>

<pre>
Attribute Name: BaseURI (<em>optional</em>)
Attribute Value: a URI
</pre>
<p>This absolute URI establishes a base URI for relative URIs within this NAT. If CreatorURI is present, this URI overrides it as the base URI. Examples:</p>
<pre>
BaseURI="https://example.com:8443"
BaseURI="http://example.com/cgi-bin/dacs"
</pre>

<pre>
Attribute Name: ResourceURIs (<em>optional</em>)
Attribute Value: resource-uri *(SP resource-uri)
</pre>
<p>This attribute identifies one or more resources that have been acknowledged (that is, for which one or more acknowledgements have been received). If resource-uri is an absolute URI, it identifies the resource. If resource-uri is a relative-uri and neither the BaseURI nor the CreatorURI attribute are present, the implied default base URI is effectively "any server". For example, if no BaseURI and CreatorURI attributes are present, a relative-uri of "/index.html" refers to a resource of that name anywhere. This behaviour can be useful in environments where web content and resource naming are coordinated across servers.</p><p>If a resource-uri ends in the two characters "/*", it refers to all URI that are subordinate or equivalent to the absolute or relative URI. Either or both of the characters "/*" may be URL-encoded ("/" by "%2f" and "*" by "%2a") to prevent this interpretation. Refer to \m[blue]<strong>Section 2.4</strong>\m[]\s-2\u[7]\d\s+2.</p><p>It is possible for a particular resource to be known by more than one URI. There is no requirement for two distinct URI to be recognized as referring to the same resource, therefore each may need its own acknowledgement. It is left to each server to decide whether a request URI matches a resource-uri. For example, domain names may not need to match exactly, such as when a web site is mirrored, or some general mapping might be applied to determine whether a request URI matches a resource-uri.</p>
<pre>
Example:
  ResourceURIs="https://example.com/index.html"

  <em>-- This identifies a single web page.</em>

Example:
  ResourceURIs="/foo.html /bar.html /baz.html"

  <em>-- If BaseURI="https://example.com", ResourceURIs identifies</em>
  <em>https://example.com/foo.html</em><em>, </em><em>https://example.com/bar.html</em><em>, and</em>
  <em>https://example.com/baz.html</em><em>.</em>

Example:
  ResourceURIs="/images/*"

  <em>-- Assuming that BaseURI="https://example.com", this specifies</em>
  all <em>URI</em><em> that are subordinate or equivalent to the absolute </em><em>URI</em><em></em>
  <em>https://example.com/images</em><em>, such as</em>
  <em>https://example.com/images/dog.gif</em><em>,</em>
  <em>https://example.com/images/lines/dotted.gif</em><em>, and</em>
  <em>https://example.com/images</em><em>.</em>

Example:
  ResourceURIs="https://example.com/*"

  <em>-- This identifies all </em><em>URI</em><em> under </em><em>https://example.com</em><em>.</em>

Example:
  ResourceURIs="https://example.com/foo/%2a"

  <em>-- This specifies exactly one </em><em>URI</em><em>, namely </em><em>https://example.com/foo/*</em><em>.</em>

Example:
  ResourceURIs="https://example.com/foo*"

  <em>-- This specifies exactly one </em><em>URI</em><em>, namely </em><em>https://example.com/foo*</em><em>.</em>
</pre>

<pre>
Attribute Name: Version (<em>optional</em>)
Attribute Value: "1"
</pre>
<p>This attribute specifies the version of the specification used for this nat-value. If present, this attribute must appear first. If absent, the attribute defaults to:</p>
<pre>
Version="1"
</pre>
<p>The only attr-value permitted by this version is "<strong>1</strong>".</p>
<pre>
Attribute Name: Secure (<em>required for </em><em>secure-nat</em>)
Attribute Value: "no" | enc-method
</pre>
<p>If the value is "no", the av-pairs have not been encrypted and no HMAC attribute is present. A value other than "no" describes the method used to encrypt the following text and the digest algorithm used to compute the value of the HMAC attribute. Its syntax, borrowed from that used by \m[blue]<strong>OpenSSL</strong>\m[]\s-2\u[8]\d\s+2, is:</p>
<pre>
cipher-name *1(cipher-mode) *1(digest-name)
</pre>
<p>Examples of enc-method: aes128-cbc-sha1, aes128-cfb, aes192-cbc, aes256-ofb, des-md5, des3, desx-sha256</p>
<pre>
Attribute Name: HMAC (<em>required for </em><em>secure-nat</em>)
Attribute Value: hmac-value
</pre>
<p>This is the Keyed-Hash Message Authentication Code (HMAC), represented as a HEXSTRING, computed using the digest algorithm specified or implied by the Secure attribute&apos;s value and computed over hmac-nat. SHA-1, SHA-224, SHA-256, SHA-384, and SHA-512 are recommended for this purpose. The HMAC is used to authenticate the NAT and protect integrity by detecting tampering.</p>
<pre>
Attribute Name: State (<em>optional</em>)
Attribute Value: a URI | local-state-identifier
</pre>
<p>This attribute identifies server-side state information for this NAT. Rather than building a large NAT, the creator of the NAT may construct a NAT that simply points to state information. There are two types of state information: public and private.</p>
<pre>
Public state:
</pre>
<p>If the attr-value is a URI, it identifies a resource that contains additional information (<em>TBD, but presumably it is an XML document</em>). Other cooperating servers may be able to use this URI to obtain attributes described here but not included in the NAT at the discretion of the creating server. (<em>TBD: this service might be used to decrypt and/or validate a </em><em>NAT</em><em> associated with it</em>)</p>
<pre>
Private state:
</pre>
<p>If the attr-value is not a URI (e.g., it is not prefixed by a recognized scheme), it identifies information local to the creating server (not available to other servers). This might be a unique database key, for example.</p>
<pre>
Attribute Name: NoticeURIs (<em>optional</em>)
Attribute Value: notice-uri *(SP notice-uri)
where notice-uri = a URI | relative-uri
</pre>
<p>This is a space-separated list of URIs, each of which represents the text of a notice that is associated with ResourceURIs and that has been acknowledged by the user. Each relative-uri is relative to the CreatorURI, which must be provided. To test if a notice-uri matches the URI of a notice associated with a service request, the two URI are compared for equality.</p>
<pre>
Attribute Name: NoticeDigestMethod (<em>optional</em>)
Attribute Value: digest-name
</pre>
<p>This attribute value is the digest algorithm (see the Secure attribute) used to compute the NoticeDigest attribute value elements. If not provided, the digest-name given by the Secure attribute&apos;s value must be available and will be used; a weaker but more efficiently computed digest might be sufficient for this purpose, however, such as a 32-bit CRC or MD5.</p>
<pre>
Attribute Name: NoticeDigest (<em>optional</em>)
Attribute Value: a space-separated list of HEXSTRINGs
</pre>
<p>This is a space-separated list of HEXSTRINGs, each corresponding to an element of NoticeURIs, that is the message digest of that NoticeURIs computed using NoticeDigestMethod (or failing that, the algorithm given by the Secure attribute&apos;s value). There must be exactly as many elements in this list as are in NoticeURIs, otherwise the NAT is invalid. The purpose of this attribute is to help detect if any NoticeURIs has changed and therefore might need to be acknowledged by the user again.</p>
<pre>
Attribute Name: Expires (<em>optional</em>)
Attribute Value: a date string
</pre>
<p>This is a date field, as specified in the Netscape HTTP Cookie Spec:</p>
<pre>
Wdy, DD-Mon-YYYY HH:MM:SS GMT
</pre>
<p>While clients are advised of the lifetime of an HTTP cookie at the time it is issued, nothing compels a client to destroy the cookie at that time. An explicit expiry date can be enforced by a server, however, and can be used with mechanisms other than HTTP cookies. The NAT is invalid if this field is incorrectly formatted.</p><p><strong>URI Matching</strong></p><p>For an otherwise valid NAT to potentially be applicable to the URI of a service request, one of the NAT&apos;s resource-uri must either be the same as the service request URI or, if a resource-uri ends in "/*", match as an ancestor of the URI. The latter case is called a "wildcard match".</p><p>The URIhttps://example.com/cgi-bin, for example, is considered to be an ancestor or parent of the URI "https://example.com/cgi-bin/program". The former URI&apos;s path component has two elements, the latter has three elements. The one-element URI path "/" is considered to be the ancestor of all other paths.</p><p>The "*" operator, which matches zero or more elements, has special meaning only when it appears as a path element at the end of a resource-uri. For instance, the URI path "/cgi-bin/*" is considered to be the ancestor of all paths having the prefix "/cgi-bin/" and matches service requests for "/cgi-bin/printenv", "/cgi-bin/", and "/cgi-bin".</p><p>Before matching a service request URI against NATs, the URI is converted into a canonical form. Any trailing "/" characters are stripped off. As a special case, the URI path "/" is unchanged.</p><p>The server examines the resource-uri of NATs to find one having the most specific URI path that applies to the service request URI; that is, it conducts a search to find the resource-uri that has the greatest number of components in common with the service request. If no exact match is found, the search will consider increasingly general resource-uri. The resource-uri that matches the URI most closely (i.e., has the greatest number of matching components) determines the applicable NAT, if any.</p><p>If two or more resource-uri "tie" (e.g., because of duplicates), one will be chosen arbitrarily.</p><p><strong>Cryptographic Elements</strong></p><p>This section and its subsections have not been completed.</p><p><strong>Encryption Algorithms</strong>.</p><p><strong>Message Digest Algorithms</strong>.</p><p><strong>HMAC - Keyed Message Authentication Code</strong>.</p><p><strong>Encryption</strong>.</p><p><strong>Encoding for Transport</strong></p><p>To ensure that a NAT can be safely transmitted between systems, it is encoded using Base64 Content-Transfer-Encoding, as specified by \m[blue]<strong>RFC 2045</strong>\m[]\s-2\u[9]\d\s+2 (Section 6.8). While not providing additional security, this encoding offers some protection against casual inspection of NAT contents.</p>
<h3>Implementation Notes</h3>
<p><strong>NAT HTTP Header Syntax</strong></p><p>A NAT need not be transmitted as the payload of an HTTP cookie, although that will likely be the most common method. Instead, NATs can be transmitted using an HTTP entity-header extension header. The field name "NoticeAcknowledgements" is recommended:</p>
<pre>
NoticeAcknowledgements: NAT-METALOGIC=..., NAT-DSS=...
</pre>
<p>Like all entity-headers, this name is case-insensitive.</p><p>This header may not be repeated unless "," is used as the separator instead of ";". See \m[blue]<strong>RFC 2616</strong>\m[]\s-2\u[4]\d\s+2 (Section 4.2).</p><p><strong>Multiple NATs</strong></p><p>When there are multiple NATs, no relative ordering is imposed. In the event that more than one NAT in a list corresponds to the same resource, the resulting behaviour is undefined and may depend on the order in which the NATs are processed.</p><p><strong>Resource Name Mapping</strong></p><p>It is up to a server whether the acknowledgement of a particular notice for one resource can automatically be applied to another resource. For example, suppose that a user acknowledges notice N1 upon requesting resource R1. Subsequently, the user requests resource R2 from the server and it happens that notice N1 also applies to R2, although this fact is not recorded in a NAT. It is implementation and context dependent in cases like this whether the server requires the user to acknowledge N1 again specifically for R2 or automatically accepts the earlier acknowledgement. Similarly, if a user&apos;s NATs collectively indicate that all notices associated with a request have been acknowledged but no single NAT asserts this for the request, the outcome is server-dependent.</p><p><strong>NAT Creation and Merging</strong></p><p>Although a NAT may exist that indicates that an acknowledgement has already been obtained, a server may issue a new, more specific NAT or a NAT with a different Expires field. For example, in the example scenario described in the \m[blue]<strong>previous section</strong>\m[]\s-2\u[10]\d\s+2, a server might replace the existing NAT for R1 with one that lists both R1 and R2.</p><p>A server may return multiple NATs, adding new ones and deleting or replacing existing ones.</p><p><strong>Case Sensitivity</strong></p><p>The path components of two URI are compared case sensitively. The scheme and authority components are compared case insensitively.</p><p><strong>Server Autonomy</strong></p><p>Having received a NAT as a result of accessing a given resource, a client should not assume that a later request for the same resource will not involve notice acknowledgements. A server may arbitrarily decide that acknowledgements are needed, a notice may have been modified, a new notice may have been added, or the NAT may have expired.</p><p><strong>Minimal Implementation</strong></p><p>A minimal server implementation would issue and recognize NATs that consist simply of a base-64 encoded ResourceURIs attribute:</p>
<pre>
"NAT-DSS=" <strong>mime_encode</strong>("ResourceURIs=" ResourceURIs)
</pre>
<p><strong>Middleware Support</strong></p><p>In support of thick clients and middleware architectures, an implementation might include two useful web services:</p><p>NAT creation request</p><p>An authorized client would request that a NAT be created by the server and returned. The request&apos;s arguments would describe the content of the NAT and possibly select a format for the returned NAT (HTTP cookie, HTTP header, XML document, and so on)</p><p>NAT decoding request</p><p>An authorized client, sending a NAT as an argument to this web service, would receive an indication of whether the NAT was valid and of its contents (e.g., as an XML document).</p><p>These hypothetical services are not described further here.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dacs.nat&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<a href="../man8/dacs_notices.8.html"><strong>dacs_notices</strong>(8)</a></strong>\m[]\s-2\u[1]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Distributed Systems Software (\m[blue]<strong>www.dss.ca</strong>\m[]\s-2\u[11]\d\s+2) and \m[blue]<strong>Metalogic Software Corp.</strong>\m[]\s-2\u[12]\d\s+2</p><p><strong>Note</strong></p><p>Dss and Metalogic, the authors of this specification, hereby permit anyone to implement this specification without fee or royalties.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright2003-2012 Distributed Systems Software. See the \m[blue]<strong>LICENSE</strong>\m[]\s-2\u[13]\d\s+2 file that accompanies the distribution for licensing information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man8/dacs_notices.8.html"><strong>dacs_notices</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_notices.8.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>RFC 2396</p><p>http://www.rfc-editor.org/rfc/rfc2396.txt</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>RFC 3986</p><p>http://www.rfc-editor.org/rfc/rfc3986.txt</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p>RFC 2616</p><p>http://www.rfc-editor.org/rfc/rfc2616.txt</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p>RFC 2109</p><p>http://www.rfc-editor.org/rfc/rfc2109.txt</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p>Section 2.6</p><p>http://dacs.dss.ca/man/#Encoding</p>
  </dd>
  <dt>
     7.
  </dt>
  <dd>
    <p>Section 2.4</p><p>http://dacs.dss.ca/man/#URI-matching</p>
  </dd>
  <dt>
     8.
  </dt>
  <dd>
    <p>OpenSSL</p><p>http://www.openssl.org</p>
  </dd>
  <dt>
     9.
  </dt>
  <dd>
    <p>RFC 2045</p><p>http://www.rfc-editor.org/rfc/rfc2045.txt</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p>previous section</p><p>http://dacs.dss.ca/man/#resource-name-mapping</p>
  </dd>
  <dt>
    11.
  </dt>
  <dd>
    <p>www.dss.ca</p><p>http://www.dss.ca</p>
  </dd>
  <dt>
    12.
  </dt>
  <dd>
    <p>Metalogic Software Corp.</p><p>http://fedroot.com/admin/about-metalogic.shtml</p>
  </dd>
  <dt>
    13.
  </dt>
  <dd>
    <p>LICENSE</p><p>http://dacs.dss.ca/man/../misc/LICENSE</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dacs.groups.5.html"><span aria-hidden="true">&larr;</span> dacs.groups.5: Dacs groups</a></li>
   <li class="next"><a href="dacs.vfs.5.html">dacs.vfs.5: The dacs virtual filestore <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
