<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ldapscripts: Scripts to manage posix accounts in your ldap directory.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Scripts to manage posix accounts in your ldap directory.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ldapscripts (5) manual">
  <meta name="twitter:description" content="Scripts to manage posix accounts in your ldap directory.">
  <meta name="twitter:image" content="https://www.carta.tech/images/ldapscripts-ldapscripts-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/ldapscripts.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ldapscripts (5) manual" />
  <meta property="og:description" content="Scripts to manage posix accounts in your ldap directory." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ldapscripts-ldapscripts-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ldapscripts<small> (5)</small></h1>
        <p class="lead">Scripts to manage posix accounts in your ldap directory.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/ldapscripts.5.html">
      <span itemprop="name">ldapscripts: Scripts to manage posix accounts in your ldap directory.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ldapscripts/">
      <span itemprop="name">ldapscripts</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/ldapscripts.5.html">
      <span itemprop="name">ldapscripts: Scripts to manage posix accounts in your ldap directory.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The ldapscripts are a set of shell (sh) scripts designed to manage POSIX accounts in an OpenLDAP directory. They can be used as standalone tools or within Samba 3.x's smb.conf file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REQUIREMENTS</h2>
        <div class="sectioncontent">
<p>The main requirements are the OpenLDAP client tools (ldapadd, ldapsearch, ldapdelete, ...). Other commands are called in the scripts but should come with your OS (sed, grep, cut, ...).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>The main configuration of the ldapscripts is usually the file /etc/ldapscripts/ldapscripts.conf (or /usr/local/etc/ldapscripts/ldapscripts.conf, depending on your system). Modify it to fit your needs before using the scripts. Each script also uses a "runtime" file, usually /usr/lib/ldapscripts/runtime (or /usr/local/lib/ldapscripts/runtime). You don't need to modify this file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TEMPLATES</h2>
        <div class="sectioncontent">
<p>Each script that adds information to the directory uses a template. Templates are directly embedded at the end of the scripts but it is also possible to use external template files (see GTEMPLATE, UTEMPLATE and MTEMPLATE variables in the configuration file). Each template consists of a preformatted LDIF file using special keywords that will be replaced on-the-fly. Sample files are provided for your convenience : ldapaddgroup.template.sample, ldapadduser.template.sample and ldapaddmachine.template.sample. It is strongly advised to use those files instead of modifying the embedded (default) templates in the scripts.</p><p>Sample templates include every keyword you can use. One special additional keyword is the &lt;ask&gt; keyword that will trigger user input to get the attribute value interactively.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING AS STANDALONE TOOLS</h2>
        <div class="sectioncontent">
<p>Each script can be used as a standard command-line tool. Check their man pages to get help.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING WITH SAMBA 3.x</h2>
        <div class="sectioncontent">
<p>Each Samba 3.x smb.conf "xxx script" option has a matching script. Modify you smb.conf file this way to call them :</p>
<pre>
# [...]
add machine script = /usr/local/sbin/ldapaddmachine '%u' sambamachines
add user script = /usr/local/sbin/ldapadduser '%u' sambausers
add group script = /usr/local/sbin/ldapaddgroup '%g'
add user to group script = /usr/local/sbin/ldapaddusertogroup '%u' '%g'
delete user script = /usr/local/sbin/ldapdeleteuser '%u'
delete group script = /usr/local/sbin/ldapdeletegroup '%g'
delete user from group script = /usr/local/sbin/ldapdeleteuserfromgroup '%u' '%g'
set primary group script = /usr/local/sbin/ldapsetprimarygroup '%u' '%g'
rename user script = /usr/local/sbin/ldaprenameuser '%uold' '%unew'
# [...]

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ldapscripts&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/ldapdeletemachine.1.html"><strong>ldapdeletemachine</strong>(1)</a>, <a href="../man1/ldapmodifymachine.1.html"><strong>ldapmodifymachine</strong>(1)</a>, <a href="../man1/ldaprenamemachine.1.html"><strong>ldaprenamemachine</strong>(1)</a>, <a href="../man1/ldapadduser.1.html"><strong>ldapadduser</strong>(1)</a>, <a href="../man1/ldapdeleteuserfromgroup.1.html"><strong>ldapdeleteuserfromgroup</strong>(1)</a>, <a href="../man1/ldapfinger.1.html"><strong>ldapfinger</strong>(1)</a>, <a href="../man1/ldapid.1.html"><strong>ldapid</strong>(1)</a>, <a href="../man1/ldapmodifyuser.1.html"><strong>ldapmodifyuser</strong>(1)</a>, <a href="../man1/lsldap.1.html"><strong>lsldap</strong>(1)</a>, <a href="../man1/ldapaddusertogroup.1.html"><strong>ldapaddusertogroup</strong>(1)</a>, <a href="../man1/ldaprenameuser.1.html"><strong>ldaprenameuser</strong>(1)</a>, <a href="../man1/ldapinit.1.html"><strong>ldapinit</strong>(1)</a>, <a href="../man1/ldapsetpasswd.1.html"><strong>ldapsetpasswd</strong>(1)</a>, <a href="../man1/ldapaddgroup.1.html"><strong>ldapaddgroup</strong>(1)</a>, <a href="../man1/ldapdeletegroup.1.html"><strong>ldapdeletegroup</strong>(1)</a>, <a href="../man1/ldapsetprimarygroup.1.html"><strong>ldapsetprimarygroup</strong>(1)</a>, <a href="../man1/ldapmodifygroup.1.html"><strong>ldapmodifygroup</strong>(1)</a>, <a href="../man1/ldaprenamegroup.1.html"><strong>ldaprenamegroup</strong>(1)</a>, <a href="../man1/ldapaddmachine.1.html"><strong>ldapaddmachine</strong>(1)</a>, <a href="../man1/ldapdeleteuser.1.html"><strong>ldapdeleteuser</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>The ldapscripts are provided under the GNU General Public License v2 (see COPYING for more details). The latest version of the ldapscripts is available on : <strong>http://contribs.martymac.org</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Sometimes, that kind of message may appear in the log file : <strong>Additional information: value does not conform to assertion syntax .</strong> Setting slapd's debug level to 32 shows additional details : <strong>get_ava: illegal value for attributeType uidNumber .</strong> This is *not* a bug : the ldapscripts tend to use the power of LDAP filters to easily find users (or groups) using either a uidNumber (numerical value) or a uid (string value). The following filter (used by <a href="../man1/ldapfinger.1.html"><strong>ldapfinger</strong>(1)</a>) will generate the above message if $_USER is a login : "(|(&(objectClass=posixAccount)(|(uid=$_USER)(uidNumber=$_USER))) (&(objectClass=posixGroup)(|(cn=$_USER)(gidNumber=$_USER))))" because filter part "(uidNumber=$_USER)" requires an integer but gets a string. You can mostly ignore those warnings.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ldap.conf.5.html"><span aria-hidden="true">&larr;</span> ldap.conf.5: Ldap configuration file/environment variables</a></li>
   <li class="next"><a href="ldif.5.html">ldif.5: Ldap data interchange format <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
