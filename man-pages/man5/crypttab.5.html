<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>crypttab: Static information about encrypted filesystems</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Static information about encrypted filesystems">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="crypttab (5) manual">
  <meta name="twitter:description" content="Static information about encrypted filesystems">
  <meta name="twitter:image" content="https://www.carta.tech/images/cryptsetup-crypttab-5.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man5/crypttab.5.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="crypttab (5) manual" />
  <meta property="og:description" content="Static information about encrypted filesystems" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cryptsetup-crypttab-5.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">crypttab<small> (5)</small></h1>
        <p class="lead">Static information about encrypted filesystems</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/">
      <span itemprop="name">File formats and conventions</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/crypttab.5.html">
      <span itemprop="name">crypttab: Static information about encrypted filesystems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cryptsetup/">
      <span itemprop="name">cryptsetup</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man5/crypttab.5.html">
      <span itemprop="name">crypttab: Static information about encrypted filesystems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The file /etc/crypttab contains descriptive information about encrypted filesystems. crypttab is only read by programs (e.g. <strong>cryptdisks_start</strong> and <strong>cryptdisks_stop</strong>), and not written; it is the duty of the system administrator to properly create and maintain this file. Each filesystem is described on a separate line; fields on each line are separated by tabs or spaces. Lines starting with &ldquo;#&rdquo; are comments, empty lines are ignored. The order of records in crypttab is important because the init scripts sequentially iterate through crypttab doing their thing.</p><p>The first field, <em>target</em>, describes the mapped device name. It must be a plain filename without any directory components. A mapped device which encrypts/decrypts data to/from the <em>source device</em> will be created at /dev/mapper/target by <strong>cryptsetup</strong>.</p><p>The second field, <em>source device</em>, describes either the block special device or file that contains the encrypted data. Instead of giving the <em>source device</em> explicitly, the UUID is supported as well, using <em>UUID=&lt;luks_uuid&gt;</em>.</p><p>The third field, <em>key file</em>, describes the file to use as a key for decrypting the data of the <em>source device</em>. Note that the <em>entire</em> key file will be used as the passphrase; the passphrase must <em>not</em> be followed by a newline character.</p><p>It can also be a device name (e.g. /dev/urandom), note however that LUKS requires a persistent key and therefore does <em>not</em> support random data keys.</p><p>If the <em>key file</em> is the string &ldquo;none&rdquo;, a passphrase will be read interactively from the console. In this case, the options precheck, check, checkargs and tries may be useful.</p><p>The fourth field, <em>options</em>, describes the cryptsetup options associated with the encryption process. At minimum, the field should contain either the string <em>luks</em> respectively <em>tcrypt</em> or the <em>cipher</em>, <em>hash</em> and <em>size</em> options.</p><p>Options are in the format: <em>key</em>=<em>value</em> [,<em>key</em>=<em>value</em> ...]. The supported options are described below.</p><p>Note that all four fields are mandatory and that a missing field will lead to unspecified behaviour.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><em>cipher</em>=&lt;cipher&gt;</p><p>Encryption algorithm (ignored for LUKS and TCRYPT devices). See <strong>cryptsetup -c</strong>.</p><p><em>size</em>=&lt;size&gt;</p><p>Encryption key size (ignored for LUKS and TCRYPT devices). See <strong>cryptsetup -s</strong>.</p><p><em>hash</em>=&lt;hash&gt;</p><p>Hash algorithm (ignored for LUKS and TCRYPT devices). See <strong>cryptsetup -h</strong>.</p><p><em>offset</em>=&lt;offset&gt;</p><p>Start offset (ignored for LUKS and TCRYPT devices). Uses <strong>cryptsetup -o</strong>.</p><p><em>skip</em>=&lt;skip&gt;</p><p>Skip sectors at the beginning (ignored for LUKS and TCRYPT devices). Uses <strong>cryptsetup -p</strong>.</p><p><em>verify</em></p><p>Verify password. Uses <strong>cryptsetup -y</strong>.</p><p><em>readonly</em></p><p>The backing device is read-only (eg: a dvd).</p><p><em>discard</em></p><p>Allow using of discards (TRIM) requests for device.</p><p><strong>WARNING</strong>: Assess the specific security risks carefully before enabling this option. For example, allowing discards on encrypted devices may lead to the leak of information about the ciphertext device (filesystem type, used space etc.) if the discarded blocks can be located easily on the device later.</p><p>Kernel version 3.1 or more recent is required. For older versions is the option ignored.</p><p><em>luks</em></p><p>Use device with LUKS extensions.</p><p><em>tcrypt</em></p><p>Use device with TCRYPT extensions.</p><p><em>swap</em></p><p>Run <strong>mkswap</strong> on the created device.</p><p><em>tmp</em>=&lt;tmpfs&gt;</p><p>Run <strong>mkfs</strong> with filesystem type &lt;tmpfs&gt; on the created device. Default is ext4.</p><p><em>precheck</em>=&lt;precheck&gt;</p><p>Check the content of the source device by a suitable program; if the check fails, the device is not created. If a program is provided as an argument, it is run, giving the source device as argument. Cryptdisks/cryptroot searches for the given progam in /lib/cryptsetup/checks/ first, but full path to program is supported as well.</p><p>Prechecks aren&apos;t invoked for LUKS devices, as these are checked with isLuks anyway. Default for plain dm-crypt devices is set in /etc/default/cryptdisks, or un_blkid otherwise. Set to /bin/true in order to disable precheck for plain dm-crypt device.</p><p><em>check</em>=&lt;check&gt;</p><p>Check the content of the target device by a suitable program; if the check fails, the device is removed. If a program is provided as an argument, it is run, giving the decrypted volume (target device) as first argument, and the value of the checkargs option as second argument. Cryptdisks/cryptroot searches for the given program in /lib/cryptsetup/checks/ first, but full path to program is supported as well.</p><p>Default is set in /etc/default/cryptdisks (blkid).</p><p><em>checkargs</em>=&lt;arguments&gt;</p><p>Give &lt;arguments&gt; as the second argument to the check script. See the CHECKSCRIPTS section for more information.</p><p><em>tries</em>=&lt;num&gt;</p><p>The input of the passphrase is tried &lt;num&gt; times in case of failure. If you want to disable retries, pass &ldquo;tries=1&rdquo;. Default is 3. Setting &ldquo;tries=0&rdquo; will ask for the passphrase until a correct one has been submitted (infinitive retries).</p><p><em>initramfs</em></p><p>The initramfs hook processes the root device, any resume devices and any devices with the initramfs option set. These devices are processed within the initramfs stage of boot. As an example, that allows the use of remote unlocking using dropbear.</p><p><em>noearly</em></p><p>The cryptsetup init scripts are invoked twice during the boot process - once before lvm, raid, etc. are started and once again after that. Sometimes you need to start your encrypted disks in a special order. With this option the device is ignored during the first invocation of the cryptsetup init scripts.</p><p><em>noauto</em></p><p>Entirely ignore the device at the boot process. It&apos;s still possible to map the device manually using cryptdisks_start.</p><p><em>loud</em></p><p>Be loud. Print warnings if a device does not exist. This option overwrites the option <em>quiet</em>.</p><p><em>quiet</em></p><p>Be quiet. Don&apos;t print warnings if a device does not exist. This option overwrites the option <em>loud</em>.</p><p><em>keyscript</em>=&lt;path&gt;</p><p>The executable at the indicated path is executed with the <em>key file</em> from the third field of the crypttab as its only argument and the output is used as the key. This also works with encrypted root filesystems via initramfs if the executable is self-contained (i.e. an executable which does not rely on any external program which is not present in the initramfs environment).</p><p>LIMITATIONS: All binaries and files on which the keyscript depends must be available at the time of execution. Special care needs to be taken for encrypted filesystems like /usr or /var. As an example, unlocking encrypted /usr must not depend on binaries from /usr/(s)bin.</p><p>All fields of the appropriate crypttab entry are available to the keyscript as exported environment variables:</p><p>CRYPTTAB_NAME</p><p>The target name</p><p>CRYPTTAB_SOURCE</p><p>The source device</p><p>CRYPTTAB_KEY</p><p>The key file</p><p>CRYPTTAB_TRIED</p><p>Number of previous tries since start of cryptdisks (counts until maximum number of tries is reached).</p><p>CRYPTTAB_OPTIONS</p><p>A list of exported crypttab options</p><p>CRYPTTAB_OPTION_&lt;option&gt;</p><p>The value of the appropriate crypttab option, with value set to &apos;yes&apos; in case the option is merely a flag.</p><p><em>keyslot</em>=&lt;slot&gt;</p><p>Key slot (ignored for non-LUKS devices). See <strong>cryptsetup -S</strong>.</p><p><em>header</em>=&lt;path&gt;</p><p>Detached header file (ignored for plain dm-crypt devices). See <strong>cryptsetup --header</strong>.</p><p><em>tcrypthidden</em></p><p>Use hidden TCRYPT header (ignored for non-TCRYPT devices).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHECKSCRIPTS</h2>
        <div class="sectioncontent">
<p><em>blkid</em></p><p>Checks for any known filesystem. Supports a filesystem type as argument via &lt;checkargs&gt;:</p><p>no checkargs - succeeds if any valid filesystem is found on the device.</p><p>"none" - succeeds if no valid filesystem is found on the device.</p><p>"ext4" [or another filesystem type like xfs, swap, crypto_LUKS, ...] - succeeds if ext4 filesystem is found on the device.</p><p><em>un_blkid</em></p><p>Checks for no known filesystem. Supports a filesystem type as argument via &lt;checkargs&gt;:</p><p>no checkargs - succeeds if no valid filesystem is found on the device.</p><p>"ext4" [or another filesystem type like xfs, swap, crypto_LUKS, ...] - succeeds if no ext4 filesystem is found on the device.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
# Encrypted swap device
cswap /dev/sda6 /dev/urandom cipher=aes-xts-plain64,size=256,hash=sha1,swap

# Encrypted LUKS disk with interactive password, identified by UUID
cdisk0 UUID=12345678-9abc-def012345-6789abcdef01 none luks

# Encrypted TCRYPT disk with interactive password
tdisk0 /dev/sr0 none tcrypt

# Encrypted ext4 disk with interactive password
# - retry 5 times if the check fails
cdisk1 /dev/sda2 none cipher=aes-xts-plain64,size=256,hash=sha1,checkargs=ext4,tries=5

# Encrypted disk with interactive password
# - use a nondefault check script
# - no retries
cdisk2 /dev/sdc1 none cipher=aes-xts-plain64,size=256,hash=sha1,check=customscript,tries=1

# Encrypted disk with interactive password
# - Twofish as the cipher, RIPEMD-160 as the hash
cdisk3 /dev/sda3 none cipher=twofish,size=256,hash=ripemd160

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p><em>CRYPTDISKS_ENABLE</em></p><p>Set to <em>yes</em> to run cryptdisks initscripts at startup. Set to <em>no</em> to disable cryptdisks initscripts. Default is <em>yes</em>.</p><p><em>CRYPTDISKS_MOUNT</em></p><p>Specifies the mountpoints that are mounted before cryptdisks is invoked. Takes mountpoints configured in /etc/fstab as arguments. Separate mountpoints by space. This is useful for keys on removable devices, such as cdrom, usbstick, flashcard, etc. Default is unset.</p><p><em>CRYPTDISKS_CHECK</em></p><p>Specifies the default checkscript to be run against the target device, after cryptdisks has been invoked. The target device is passed as the first and only argument to the checkscript. Takes effect if the <em>check</em> option is given in crypttab with no value. See documentation for <em>check</em> option above for more information.</p><p><em>CRYPTDISKS_PRECHECK</em></p><p>Specifies the default checkscript to be run against the source dm-crypt device, before cryptdisks has been invoked. The source device is given as the first and only argument to the checkscript. Takes effect if the <em>precheck</em> option is given in crypttab with no value. See documentation for <em>precheck</em> option above for more information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN UPGRADE ISSUES</h2>
        <div class="sectioncontent">
<p>The upstream defaults for encryption cipher, hash and keysize have changed several times in the past, and they&apos;re expected to change again in future, for example if security issues arise. On LUKS devices, the used settings are stored in the LUKS header, and thus don&apos;t need to be configured in /etc/crypttab. For plain dm-crypt devices, no information about used cipher, hash and keysize are available at all. Therefore we strongly suggest to configure the cipher, hash and keysize in /etc/crypttab for plain dm-crypt devices, even if they match the current default.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO crypttab&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/cryptsetup.8.html"><strong>cryptsetup</strong>(8)</a>, <a href="../man8/cryptdisks_start.8.html"><strong>cryptdisks_start</strong>(8)</a>, <a href="../man8/cryptdisks_stop.8.html"><strong>cryptdisks_stop</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was originally written by Bastian Kleineidam &lt;calvin@debian.org&gt; for the Debian distribution of cryptsetup. It has been further improved by Michael Gebetsroither &lt;michael.geb@gmx.at&gt;, Jonas Meurer &lt;jonas@freesources.org&gt; and David Härdeman &lt;david@hardeman.nu&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="systemd-cron-crontab.5.html"><span aria-hidden="true">&larr;</span> crontab.5: Tables for driving cron</a></li>
   <li class="next"><a href="ctid.conf.5.html">ctid.conf.5: Configuration file for an openvz container. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
