<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xs_pgm: Reliable multicast transport via pgm protocol</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Reliable multicast transport via pgm protocol">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xs_pgm (7) manual">
  <meta name="twitter:description" content="Reliable multicast transport via pgm protocol">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxs-dev-xs_pgm-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/xs_pgm.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xs_pgm (7) manual" />
  <meta property="og:description" content="Reliable multicast transport via pgm protocol" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxs-dev-xs_pgm-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xs_pgm<small> (7)</small></h1>
        <p class="lead">Reliable multicast transport via pgm protocol</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/xs_pgm.7.html">
      <span itemprop="name">xs_pgm: Reliable multicast transport via pgm protocol</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxs-dev/">
      <span itemprop="name">libxs-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/xs_pgm.7.html">
      <span itemprop="name">xs_pgm: Reliable multicast transport via pgm protocol</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>PGM (Pragmatic General Multicast) is a protocol for reliable multicast transport of data over IP networks.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Crossroads implement two variants of PGM, the standard protocol where PGM datagrams are layered directly on top of IP datagrams as defined by RFC 3208 (the <em>pgm</em> transport) and "Encapsulated PGM" where PGM datagrams are encapsulated inside UDP datagrams (the <em>epgm</em> transport).</p><p>The <em>pgm</em> and <em>epgm</em> transports can only be used with the <em>XS_PUB</em> and <em>XS_SUB</em> socket types.</p><p>Further, PGM sockets are rate limited by default. For details, refer to the <em>XS_RATE</em>, and <em>XS_RECOVERY_IVL</em> options documented in <a href="../man3/xs_setsockopt.3.html"><strong>xs_setsockopt</strong>(3)</a>.</p><p><strong>Caution</strong></p><p>The <em>pgm</em> transport implementation requires access to raw IP sockets. Additional privileges may be required on some operating systems for this operation. Applications not requiring direct interoperability with other PGM implementations are encouraged to use the <em>epgm</em> transport instead which does not require any special privileges.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADDRESSING</h2>
        <div class="sectioncontent">
<p>A Crossroads address string consists of two parts as follows: <em>transport</em>://<em>endpoint</em>. The <em>transport</em> part specifies the underlying transport protocol to use. For the standard PGM protocol, <em>transport</em> shall be set to pgm. For the "Encapsulated PGM" protocol <em>transport</em> shall be set to epgm. The meaning of the <em>endpoint</em> part for both the <em>pgm</em> and <em>epgm</em> transport is defined below.</p><h3>Connecting a socket</h3>
<p>When connecting a socket to a peer address using <em>xs_connect()</em> with the <em>pgm</em> or <em>epgm</em> transport, the <em>endpoint</em> shall be interpreted as an <em>interface</em> followed by a semicolon, followed by a <em>multicast address</em>, followed by a colon and a port number.</p><p>An <em>interface</em> may be specified by either of the following:</p><p>The interface name as defined by the operating system.</p><p>The primary IPv4 address assigned to the interface, in it\(cqs numeric representation.</p><p><strong>Note</strong></p><p>Interface names are not standardised in any way and should be assumed to be arbitrary and platform dependent. On Win32 platforms no short interface names exist, thus only the primary IPv4 address may be used to specify an <em>interface</em>.</p><p>A <em>multicast address</em> is specified by an IPv4 multicast address in it\(cqs numeric representation.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WIRE FORMAT</h2>
        <div class="sectioncontent">
<p>Consecutive PGM datagrams are interpreted by the library as a single continuous stream of data where messages are not necessarily aligned with PGM datagram boundaries and a single message may span several PGM datagrams. This stream of data consists of Crossroads messages encapsulated in <em>frames</em> as described in <a href="../man7/xs_tcp.7.html"><strong>xs_tcp</strong>(7)</a>.</p><h3>PGM datagram payload</h3>
<p>The following ABNF grammar represents the payload of a single PGM datagram as used by Crossroads:</p>
<pre>
datagram               = (offset data)
offset                 = 2OCTET
data                   = *OCTET
</pre>
<p>In order for late joining consumers to be able to identify message boundaries, each PGM datagram payload starts with a 16-bit unsigned integer in network byte order specifying either the offset of the first message <em>frame</em> in the datagram or containing the value 0xFFFF if the datagram contains solely an intermediate part of a larger message.</p><p>Note that offset specifies where the first message begins rather than the first message part. Thus, if there are trailing message parts at the beginning of the packet the offset ignores them and points to first initial message part in the packet.</p><p>The following diagram illustrates the layout of a single PGM datagram payload:</p>
<pre>
+------------------+----------------------+
| offset (16 bits) |         data         |
+------------------+----------------------+
</pre>
<p>The following diagram further illustrates how three example Crossroads frames are laid out in consecutive PGM datagram payloads:</p>
<pre>
First datagram payload
+--------------+-------------+---------------------+
| Frame offset |   Frame 1   |   Frame 2, part 1   |
|    0x0000    | (Message 1) | (Message 2, part 1) |
+--------------+-------------+---------------------+

Second datagram payload
+--------------+---------------------+
| Frame offset |   Frame 2, part 2   |
| 0xFFFF       | (Message 2, part 2) |
+--------------+---------------------+

Third datagram payload
+--------------+----------------------------+-------------+
| Frame offset |   Frame 2, final 8 bytes   |   Frame 3   |
| 0x0008       | (Message 2, final 8 bytes) | (Message 3) |
+--------------+----------------------------+-------------+
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p><strong>Connecting a socket</strong>.</p>
<pre>
/* Connecting to the multicast address 239.192.1.1, port 5555, */
/* using the first Ethernet network interface on Linux */
/* and the Encapsulated PGM protocol */
rc = xs_connect(socket, "epgm://eth0;239.192.1.1:5555");
assert (rc != -1);
/* Connecting to the multicast address 239.192.1.1, port 5555, */
/* using the network interface with the address 192.168.1.1 */
/* and the standard PGM protocol */
rc = xs_connect(socket, "pgm://192.168.1.1;239.192.1.1:5555");
assert (rc != -1);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xs_pgm&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/xs_connect.3.html"><strong>xs_connect</strong>(3)</a> <a href="../man3/xs_setsockopt.3.html"><strong>xs_setsockopt</strong>(3)</a> <a href="../man7/xs_tcp.7.html"><strong>xs_tcp</strong>(7)</a> <a href="../man7/xs_ipc.7.html"><strong>xs_ipc</strong>(7)</a> <a href="../man7/xs_inproc.7.html"><strong>xs_inproc</strong>(7)</a> <strong>xs</strong>(7)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>The Crossroads documentation was written by Martin Sustrik &lt;\m[blue]<strong>sustrik@250bpm.com</strong>\m[]\s-2\u[1]\d\s+2&gt; and Martin Lucina &lt;\m[blue]<strong>martin@lucina.net</strong>\m[]\s-2\u[2]\d\s+2&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>sustrik@250bpm.com</p><p>mailto:sustrik@250bpm.com</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>martin@lucina.net</p><p>mailto:martin@lucina.net</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xs_ipc.7.html"><span aria-hidden="true">&larr;</span> xs_ipc.7: Local inter-process transport</a></li>
   <li class="next"><a href="xs_tcp.7.html">xs_tcp.7: Crossroads unicast transport using tcp <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
