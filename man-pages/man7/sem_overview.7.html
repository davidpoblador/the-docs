<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sem_overview: Overview of posix semaphores</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Overview of posix semaphores">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sem_overview<small> (7)</small></h1>
        <p class="lead">Overview of posix semaphores</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/sem_overview.7.html">
      <span itemprop="name">sem_overview: Overview of posix semaphores</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/man-pages/">
      <span itemprop="name">man-pages</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/sem_overview.7.html">
      <span itemprop="name">sem_overview: Overview of posix semaphores</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>POSIX semaphores allow processes and threads to synchronize their actions.</p><p>A semaphore is an integer whose value is never allowed to fall below zero. Two operations can be performed on semaphores: increment the semaphore value by one (<a href="../man3/sem_post.3.html"><strong>sem_post</strong>(3)</a>); and decrement the semaphore value by one (<a href="../man3/sem_wait.3.html"><strong>sem_wait</strong>(3)</a>). If the value of a semaphore is currently zero, then a <a href="../man3/sem_wait.3.html"><strong>sem_wait</strong>(3)</a> operation will block until the value becomes greater than zero.</p><p>POSIX semaphores come in two forms: named semaphores and unnamed semaphores.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Named semaphores</strong></p>
  </dt>
  <dd>
    <p>A named semaphore is identified by a name of the form <em>/somename</em>; that is, a null-terminated string of up to <strong>NAME_MAX</strong><em>-4</em> (i.e., 251) characters consisting of an initial slash, followed by one or more characters, none of which are slashes. Two processes can operate on the same named semaphore by passing the same name to <a href="../man3/sem_open.3.html"><strong>sem_open</strong>(3)</a>.</p><p>The <a href="../man3/sem_open.3.html"><strong>sem_open</strong>(3)</a> function creates a new named semaphore or opens an existing named semaphore. After the semaphore has been opened, it can be operated on using <a href="../man3/sem_post.3.html"><strong>sem_post</strong>(3)</a> and <a href="../man3/sem_wait.3.html"><strong>sem_wait</strong>(3)</a>. When a process has finished using the semaphore, it can use <a href="../man3/sem_close.3.html"><strong>sem_close</strong>(3)</a> to close the semaphore. When all processes have finished using the semaphore, it can be removed from the system using <a href="../man3/sem_unlink.3.html"><strong>sem_unlink</strong>(3)</a>.</p>
  </dd>
  <dt>
    <p><strong>Unnamed semaphores (memory-based semaphores)</strong></p>
  </dt>
  <dd>
    <p>An unnamed semaphore does not have a name. Instead the semaphore is placed in a region of memory that is shared between multiple threads (a <em>thread-shared semaphore</em>) or processes (a <em>process-shared semaphore</em>). A thread-shared semaphore is placed in an area of memory shared between the threads of a process, for example, a global variable. A process-shared semaphore must be placed in a shared memory region (e.g., a System V shared memory segment created using <a href="../man2/shmget.2.html"><strong>shmget</strong>(2)</a>, or a POSIX shared memory object built created using <a href="../man3/shm_open.3.html"><strong>shm_open</strong>(3)</a>).</p><p>Before being used, an unnamed semaphore must be initialized using <a href="../man3/sem_init.3.html"><strong>sem_init</strong>(3)</a>. It can then be operated on using <a href="../man3/sem_post.3.html"><strong>sem_post</strong>(3)</a> and <a href="../man3/sem_wait.3.html"><strong>sem_wait</strong>(3)</a>. When the semaphore is no longer required, and before the memory in which it is located is deallocated, the semaphore should be destroyed using <a href="../man3/sem_destroy.3.html"><strong>sem_destroy</strong>(3)</a>.</p>
  </dd>

</dl>
<p>The remainder of this section describes some specific details of the Linux implementation of POSIX semaphores.</p><h3>Versions</h3>
<p>Prior to kernel 2.6, Linux supported only unnamed, thread-shared semaphores. On a system with Linux 2.6 and a glibc that provides the NPTL threading implementation, a complete implementation of POSIX semaphores is provided.</p>
<h3>Persistence</h3>
<p>POSIX named semaphores have kernel persistence: if not removed by <a href="../man3/sem_unlink.3.html"><strong>sem_unlink</strong>(3)</a>, a semaphore will exist until the system is shut down.</p>
<h3>Linking</h3>
<p>Programs using the POSIX semaphores API must be compiled with <em>cc -pthread</em> to link against the real-time library, <em>librt</em>.</p>
<h3>Accessing named semaphores via the filesystem</h3>
<p>On Linux, named semaphores are created in a virtual filesystem, normally mounted under <em>/dev/shm</em>, with names of the form <em></em><strong>sem.</strong><em>somename</em>. (This is the reason that semaphore names are limited to <strong>NAME_MAX</strong><em>-4</em> rather than <strong>NAME_MAX</strong> characters.)</p><p>Since Linux 2.6.19, ACLs can be placed on files under this directory, to control object permissions on a per-user and per-group basis.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>System V semaphores (<a href="../man2/semget.2.html"><strong>semget</strong>(2)</a>, <a href="../man2/semop.2.html"><strong>semop</strong>(2)</a>, etc.) are an older semaphore API. POSIX semaphores provide a simpler, and better designed interface than System V semaphores; on the other hand POSIX semaphores are less widely available (especially on older systems) than System V semaphores.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>An example of the use of various POSIX semaphore functions is shown in <a href="../man3/sem_wait.3.html"><strong>sem_wait</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sem_overview&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/sem_close.3.html"><strong>sem_close</strong>(3)</a>, <a href="../man3/sem_destroy.3.html"><strong>sem_destroy</strong>(3)</a>, <a href="../man3/sem_getvalue.3.html"><strong>sem_getvalue</strong>(3)</a>, <a href="../man3/sem_init.3.html"><strong>sem_init</strong>(3)</a>, <a href="../man3/sem_open.3.html"><strong>sem_open</strong>(3)</a>, <a href="../man3/sem_post.3.html"><strong>sem_post</strong>(3)</a>, <a href="../man3/sem_unlink.3.html"><strong>sem_unlink</strong>(3)</a>, <a href="../man3/sem_wait.3.html"><strong>sem_wait</strong>(3)</a>, <a href="../man7/pthreads.7.html"><strong>pthreads</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sctp.7.html"><span aria-hidden="true">&larr;</span> sctp.7: Sctp protocol.</a></li>
   <li class="next"><a href="session-keyring.7.html">session-keyring.7: Session shared process keyring <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
