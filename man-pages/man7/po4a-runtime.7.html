<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>po4a-runtime: Po4a and runtime gettext translation without autotools</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Po4a and runtime gettext translation without autotools">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="po4a-runtime (7) manual">
  <meta name="twitter:description" content="Po4a and runtime gettext translation without autotools">
  <meta name="twitter:image" content="https://www.carta.tech/images/po4a-po4a-runtime-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/po4a-runtime.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="po4a-runtime (7) manual" />
  <meta property="og:description" content="Po4a and runtime gettext translation without autotools" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/po4a-po4a-runtime-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">po4a-runtime<small> (7)</small></h1>
        <p class="lead">Po4a and runtime gettext translation without autotools</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/po4a-runtime.7.html">
      <span itemprop="name">po4a-runtime: Po4a and runtime gettext translation without autotools</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/po4a/">
      <span itemprop="name">po4a</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/po4a-runtime.7.html">
      <span itemprop="name">po4a-runtime: Po4a and runtime gettext translation without autotools</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Introduction</h2>
        <div class="sectioncontent">
<p>With <em>po4a-build</em>, <em>po4a</em> also includes support for adding translation of runtime script output messages using gettext but without requiring the package to adopt Autotools and the typical <em>./configure</em> process.</p><p>Using example <em>Makefile</em> snippets, packages can harness <em>intltool</em> with minimal effort.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Layout</h2>
        <div class="sectioncontent">
<p>Documentation translation should \s-1NOT\s0 use the same <em>po/</em> directory as the runtime translation. Whilst runtime translation can use directories other than <em>po/</em>, it is usually easiest to go with the convention.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Multiple languages</h2>
        <div class="sectioncontent">
<p>Just a word on packages that use scripts in multiple programming languages. A common mix is Perl and shell. Note bene: gettext \s-1WILL\s0 get confused and omit strings from one or other language unless file extensions are used for whichever is the least problematic language.</p><p>When using multiple languages, experiment with various settings in <em>po/Makevars</em> until you get all the strings you need in the \s-1POT\s0 file.</p><p>In particular, specifying two languages in <em>po/Makevars</em> can be problematic. Instead of:</p>
<pre>
 # Don&apos;t do this:
 XGETTEXT_OPTIONS = -L Perl -L Shell --from-code=iso-8859-1
</pre>
<p>Consider renaming (or providing symlink(s) for) all files for one of the languages involved and omitting the explicit -L options. The file extension only needs to exist during the time that <em>po/POTFILES.in</em> is being processed.</p><p>The --keywords option can also be useful - see the xgettext documentation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Populating po/</h2>
        <div class="sectioncontent">
<p>So, create your top level <em>po/</em> directory and then use the example files in <em>/usr/share/doc/po4a/examples/</em> to populate it.</p>
<dl class='dl-vertical'>
  <dt>
    \s-1LINGUAS\s0
  </dt>
  <dd>
    <p>Must exist, even if empty. Consists of a list of translations - each line not starting with a '#' must match an existing \s-1PO\s0 file. e.g. if <em>\s-1LINGUAS\s0</em> contains a single line, 'fr', an <em>fr.po</em> file must exist alongside the <em>\s-1LINGUAS\s0</em> file.  $ cat po/LINGUAS  cs  de  fr  $ By convention, the <em>\s-1LINGUAS\s0</em> file is sorted alphabetically but that is a manual process.</p>
  </dd>
  <dt>
    \s-1POTFILES\s0.in
  </dt>
  <dd>
    <p>The list of files containing the messages that need to be translated at runtime - i.e. your scripts. If you've used the top level <em>po/</em> directory, the paths should be relative to the top level directory, not the <em>po/</em> directory itself.  $ ls -l  myscript.pl  another.pl  foo/support.pl  po/  po/POTFILES.in  $ cat po/POTFILES.in  myscript.pl  another.pl  foo/support.pl  $ Note that it is explicitly supported that the scripts themselves can contain strings for both runtime and documentation translation, e.g. using gettext functions for runtime and embedded \s-1POD\s0 content for documentation. So it is not a problem to have the same file listed in <em>po/POTFILES.in</em> and <em>doc/po4a-build.conf</em></p>
  </dd>
  <dt>
    Makevars-perl.example
  </dt>
  <dd>
    <p>If your scripts are in Perl, copy this example file as <em>po/Makevars</em> and edit it to suit.</p>
  </dd>
  <dt>
    Makevars-shell.example
  </dt>
  <dd>
    <p>If your scripts are in shell, copy this example file as <em>po/Makevars</em> and edit it to suit.</p>
  </dd>
  <dt>
    po4a-build.make
  </dt>
  <dd>
    <p>Copy this example file as <em>po/Makefile</em> - it shouldn't need editing but you may want to keep it updated against <em>/usr/share/doc/po4a/examples/po4a-build.make</em> as it may need to be updated within po4a releases as the underlying intltool support changes. (The file itself was generated from another project using Autotools and intltool.)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Building</h2>
        <div class="sectioncontent">
<p>These snippets need to be added to your top level Makefile or whatever other method you use to prepare your sources for distribution.</p><p> clean:         $(MAKE) -C po/ clean</p><p> install:         $(MAKE) -C po/ install DESTDIR=$(DESTDIR)</p><p> dist:         $(MAKE) -C po/ pot</p><p>(In an Autotools project, this would happen automatically by simply adding <em>po</em> to the \*(C`SUBDIRS\*(C' value in <em>Makefile.am</em>.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Maintenance</h2>
        <div class="sectioncontent">
<p>Runtime translation isn't quite as easy as <em>po4a-build</em> in that adding a new translation does require editing <em>po/LINGUAS</em>, but apart from that, updating translations is merely a case of replacing the relevant \s-1PO\s0 file with the new version.</p><p>Depending on how you prepare your source tarball, you may also need to list new \s-1PO\s0 files in the <em>\s-1MANIFEST\s0</em> file or add to the script(s) that prepare the tarball. (That also applies to <em>po4a-build</em>.)</p><p>Any <em>*.mo</em> or <em>*.gmo</em> files in <em>po/</em> can be deleted / cleaned up.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Copyright</h2>
        <div class="sectioncontent">
<p>Whilst the example files are part of the po4a project, you are free to use, modify and distribute them in your own projects without needing to refer back to po4a or list the po4a team in your own copyright notices, in the same manner as other build tools like Automake itself. If you want to mention po4a, that is fine too.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p> Neil Williams &lt;linux@codehelp.co.uk&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="po4a.7.html"><span aria-hidden="true">&larr;</span> po4a.7: Framework to translate documentation and other materials</a></li>
   <li class="next"><a href="podget.7.html">podget.7: Simple tool to automate downloading of podcasts. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
