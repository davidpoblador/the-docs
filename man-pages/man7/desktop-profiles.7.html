<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>desktop-profiles: Introduction and overview</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Introduction and overview">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="desktop-profiles (7) manual">
  <meta name="twitter:description" content="Introduction and overview">
  <meta name="twitter:image" content="https://www.carta.tech/images/desktop-profiles-desktop-profiles-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/desktop-profiles.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="desktop-profiles (7) manual" />
  <meta property="og:description" content="Introduction and overview" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/desktop-profiles-desktop-profiles-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">desktop-profiles<small> (7)</small></h1>
        <p class="lead">Introduction and overview</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/desktop-profiles.7.html">
      <span itemprop="name">desktop-profiles: Introduction and overview</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/desktop-profiles/">
      <span itemprop="name">desktop-profiles</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/desktop-profiles.7.html">
      <span itemprop="name">desktop-profiles: Introduction and overview</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Desktop-profiles offers a standard way of managing the conditional activation of installed profiles (sets of configuration and/or data files) for the various Desktop Environments in Debian.</p><p>It currently supports Freedesktop, KDE, Gconf (i.e Gnome), Xfce (&gt;= 4.2), ROX, GNUSTEP and UDE.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOW IT WORKS</h2>
        <div class="sectioncontent">
<p>Each available profile has some metadata associated with it. On X startup an Xsession.d script is run that looks through the metadata for all profiles and activates profiles based on what it finds.</p><p>Specifically each profile is associated with a set of requirements, and a precedence value. On X startup the Xsession.d script will filter out those profiles whose requirements are not met, and then activate the remaining profiles in order of precedence.</p><p>Exactly how a profile is activated depends on the profile kind (you don't need to know this in order to use this package):</p>
<dl class='dl-vertical'>
  <dt>
    *
  </dt>
  <dd>
    <p>For KDE, Freedesktop, Xfce (&gt;= 4.2), ROX, GNUSTEP and UDE activating profiles is done by setting environment variables: KDEDIRS for KDE, XDG_CONFIG_DIRS and XDG_DATA_DIRS for both Freedesktop and Xfce, CHOICESPATH for ROX, GNUSTEP_PATHLIST for GNUSTEP (usually initialized from the various GNUSTEP_*_ROOT variables) and UDEdir for UDE. With the exception of UDEdir, which takes a single directory, each of these variables takes a precedence ordered list of root-directories (of activated profiles).</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p>For GConf profiles two user-specific path files are generated. One containing the activated mandatory "configuration sources", one containing the default "configuration sources" that are activated.</p>
  </dd>
  <dt>
    NOTE:
  </dt>
  <dd>
    <p>Environment variables will only be set if their value is different from the default value, and user-specific path files are only generated if the systemwide gconf path file will include them. This to avoid unnecessary clutter.</p>
  </dd>
  <dt>
    NOTE:
  </dt>
  <dd>
    <p>The above means that for Freedesktop, KDE, GNOME, Xfce (&gt;= 4.2), GNUSTEP and ROX any number of profiles can be activated at the same time. Whereas UDE can only activate 1 profiles at the time.</p>
  </dd>
  <dt>
    NOTE:
  </dt>
  <dd>
    <p>By default the Xsession.d script will assume the metadata files are authoritive, meaning it will ignore any values already assigned to the relevant environment variables.</p>
  </dd>
  <dt>
    NOTE:
  </dt>
  <dd>
    <p>The default system-wide path contains a number of configuration sources not managed by desktop-profiles. In order to facilitate the management of all your configuration sources through desktop-profiles this package provides a script (/usr/sbin/path2listing) that looks at your current gconf configuration and adapts it so your configuration sources are all controlled by desktop-profiles (see the man page for path2listing or the /usr/share/doc/destkop-profiles/README for more information on this).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERACTION WITH OTHER AGENTS ACTIVATING PROFILES</h2>
        <div class="sectioncontent">
<p>Since profiles are activated through environment variables one issue is how desktop-profiles deals with the situation where those environment variables have already been set up by other agents (such an agent could be another script, or the user). Desktop-profiles has a personality setting that determines how it handles such a situation:</p><ul>
<li><p>autocrat: assume desktop-profiles is the only agent allowed to touch the environment variables, and consequently ignore the contents of already set environment variables.</p></li><li><p>rude: profiles added by desktop-profiles take precedence over profiles added by other agents.</p></li><li><p>polite: profiles added by other agents take precedence over profiles added by desktop-profiles.</p></li><li><p>sheep: just meekly follow along with what the other agents have set, don't change anything (this essentially deactivates desktop-profiles).</p></li>
</ul><p>The default personality setting of desktop-profiles is polite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WHERE TO FIND THE PROFILE METADATA</h2>
        <div class="sectioncontent">
<p>The metadata is specified in .listing files that are placed in the /etc/desktop-profiles directory. The format of those files is specified in the 'FORMAT OF .listing FILES'-section below.</p>
<dl class='dl-vertical'>
  <dt>
    NOTE:
  </dt>
  <dd>
    <p>In order to ensure that packages containing .listing files don't run in to each other, packages should install such files as &lt;packagename&gt;.listing, or &lt;packagename&gt;_&lt;something&gt;.listing (there's a debhelper script provided to help with that :)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FORMAT OF .listing FILES</h2>
        <div class="sectioncontent">
<p>Each non-empty line in a .listing file is either a comment line, or line containing profile metadata.</p><p>Comment lines start with \'#\' and are purely for human consumption, like empty lines they are ingored completely by the Xsession.d script.</p><p>Lines containing profile metadata are made up of 6 fields separated by a semi-colon (\';\'). Where the meaning of the fields is as follows:</p>
<dl class='dl-vertical'>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>1st field</strong> : Name of the profile, arbitrary, must be unique within each file, and may (but probably should not) be empty.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>2nd field</strong> : The kind of profile, must be set, must be one of: KDE, XDG_CONFIG, XDG_DATA, GCONF, ROX, GNUSTEP, or UDE.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>3th field:</strong></p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Location of the root of the profile directory tree, may contain more then 1 directory (in which case directories should be separated with spaces). Environment variables may be used when specifying root directories (e.g. $HOME/.extra_config).</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Except for Gconf profiles, which use the this field to contain exactly one directive to be included in the generated path file (directives are either \'xml:(readonly|readwrite):&lt;profile-root&gt;\', or \'include &lt;some-path-file&gt;' ).</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>4th field</strong> : A Numeric precedence value for the profile, may be empty (which is treated as lowest possible precedence).</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>When 2 (or more) active profiles define a setup for the same thing, the value specified by the profile with the highest precedence value is used (UDE will onlyuse values from the highest ranked profile).</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>5th field</strong> : Space separated list of conditions that need to be met to activate the profiles (if more then 1 condition is specified all conditions need to be met to activate the profile).</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>There are 3 different kinds of requirements:</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>1) &lt;group&gt;      = user needs to be a member of &lt;group&gt;</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>2) !&lt;group&gt;     = user mustn't be a member of &lt;group&gt;</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    
<pre>
   (Note: '!' deactivates the profile completely)
</pre>

  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>3) $(&lt;command&gt;) = &lt;command&gt; needs to exit succesfully ($?=0)</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    
<pre>
   (Where &lt;command&gt; is an arbitrary shell command)
</pre>

  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>6th field</strong> : A description of what the profile is/does, may be empty.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Note that this basically boils down to a CSV-file using \';\' as separator and allowing shell-style comments.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREATING PROFILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>KDE</strong> (through KDEDIRS):</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Each profile directory is layed out according to the KDE file system hierarchy (see http://techbase.kde.org/KDE_System_Administration#File_System)</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Config files in the different profiles are merged (in case of conflicting keys, the value of the highest precedence profile is used). For other files the highest precedence profile that contains the file supplies it.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Starting with kde 3.3. the kiosk framework can be used to lock settings down in the profiles, for all unlocked settings user-specified values are always used when available. (see http://techbase.kde.org/KDE_System_Administration for more info on the kiosk-framework, and the format of the kde config files).</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>Freedesktop</strong> (using XDG_CONFIG_DIRS and XDG_DATA_DIRS)</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>The 'Desktop base directory specification' defines the basic framework for using profiles (see http://freedesktop.org/wiki/Specifications/basedir-spec).</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>The actual contents of the profiles is filled in by things conforming to other freedesktop standards (e.g. the 'menu specification'). A list of freedesktop standards (that are being worked on) can be found at http://freedesktop.org/wiki/Specifications. Most of these standards are still under development and not (yet) widely supported. Eventually you can probably suspect support of at least KDE, GNOME, ROX, and Xfce.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Xfce (&gt;=4.2) specific settings can also be found in Freedesktop profile dirs (see the next section for details).</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>Xfce</strong> (using XDG_CONFIG_DIRS and XDG_DATA_DIRS)</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Starting from Xfce version 4.2. Xfce will completely adopt the freedesktop 'Desktop Base Directory Specification'. Placing any Xfce-only settings in an 'xfce4' subdirectory of the freedesktop profile directories (with the exception of xfce4-session, which will use an 'xfce4-session' subdirectory). A more complete description can be found at http://foo-projects.org/~benny/xfce/file-locations.html.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>If two profiles contain the same config file, the one from the profile with the highest precedence is used.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Xfce versions prior to 4.2. don't support multiple config sets.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>ROX</strong> (through CHOICESPATH):</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Each profile directory has one subdirectory for each app for which it provides settings. When a configuration value is needed the profile directories are searched in order, first profile that contains the file supplies it.</p>
  </dd>
  <dt>
    NOTE:
  </dt>
  <dd>
    <p>Programs _may_ merge the files the different profiles. If the merging encounters conflicting values the one from the highest order profile is used.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>See http://rox.sourceforge.net/choices.html for a more detailed description.</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>GNUSTEP</strong> (through GNUSTEP_PATHLIST)</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Profiles in GNUSTEP parlance are called domains, and by default GNUSTEP will look in 4 domains (the location of which is indicated by the GNUSTEP_USER_ROOT, GNUSTEP_LOCAL_ROOT, GNUSTEP_NETWORK_ROOT, and GNUSTEP_SYSTEM_ROOT variables). Though it is possible to specify extra domains to use through the GNUSTEP_PATHLIST variable, it isn't often done as configuration files are currently only searched for in the user domain.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>For more information on GNUSTEP domains see http://www.gnustep.org/resources/documentation/User/GNUstep/filesystem.html</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>UDE</strong> (through UDEdir):</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>UDE searches for configuration files in the following directories (first find is used):</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>1. $HOME/.ude/config</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>2. $UDEdir/config  (or in absence of $UDEdir in the install dir which is /usr/share/ude on debian)</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>3. If the configuration file is still not found, UWM takes the filename as it is (usually dereferencing any environment variables first)</p>
  </dd>
  <dt>
    *
  </dt>
  <dd>
    <p><strong>GNOME</strong> (using GConf 'Configuration Sources'):</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Two gconf path files are generated for each user on login: one with all the sources from activated profiles that have a higher precedence then the gconf-user profile (which is in default.listing), and one containing the sources from activated profiles with a lower precedence then the gconf-user profiles. Generated path files are put in /var/cache/desktop-profiles.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>Each configuration source is structured like a simple hierarchical file system as follows:</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>- Directories correspond to applications that use the GConf repository, except for the ' schemas' directory which contains files describing all of the preference keys.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>- Subdirectories correspond to categories of preferences.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>- Files list the preference keys in the directory, and contain information about the keys.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>- Configuration Sources are searched in order for each value, first source that has the value (or is writeable in case of storing values) is used.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>-&gt; See the GNOME administration manual for a detailed explanation</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/desktop-profiles/desktop-profiles.listing - Details the default settings for the various environments. By default the system-wide settings provided by the packager are given no precedence, which means they will be loaded after all profiles with a precedence specified (which should be true for all profiles you create).</p><p>/etc/X11/Xsession.d/20desktop-profiles_activateDesktopProfiles - Xsesssion.d script that activates the profiles</p><p>/etc/default/desktop-profiles - File containing default settings for the scripts in this package.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Bart Cornelis &lt;cobaco@skolelinux.no&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO desktop-profiles&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/list-desktop-profiles.1.html"><strong>list-desktop-profiles</strong>(1)</a>, <a href="../man1/update-profile-cache.1.html"><strong>update-profile-cache</strong>(1)</a>, <a href="../man1/profile-manager.1.html"><strong>profile-manager</strong>(1)</a>, <a href="../man1/dh_installlisting.1.html"><strong>dh_installlisting</strong>(1)</a>, <a href="../man1/path2listing.1.html"><strong>path2listing</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="derivations.7.html"><span aria-hidden="true">&larr;</span> derivations.7: Book: derivations of applied mathematics</a></li>
   <li class="next"><a href="directvnc-kbmapping.7.html">directvnc-kbmapping.7: Details of keyboard mapping file syntax for directvnc(1) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
