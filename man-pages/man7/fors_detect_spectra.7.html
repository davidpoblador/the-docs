<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fors_detect_spectra: Detect mos/mxu spectra on ccd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Detect mos/mxu spectra on ccd">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fors_detect_spectra (7) manual">
  <meta name="twitter:description" content="Detect mos/mxu spectra on ccd">
  <meta name="twitter:image" content="https://www.carta.tech/images/cpl-plugin-fors-doc-fors_detect_spectra-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/fors_detect_spectra.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fors_detect_spectra (7) manual" />
  <meta property="og:description" content="Detect mos/mxu spectra on ccd" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cpl-plugin-fors-doc-fors_detect_spectra-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fors_detect_spectra<small> (7)</small></h1>
        <p class="lead">Detect mos/mxu spectra on ccd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/fors_detect_spectra.7.html">
      <span itemprop="name">fors_detect_spectra: Detect mos/mxu spectra on ccd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cpl-plugin-fors-doc/">
      <span itemprop="name">cpl-plugin-fors-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/fors_detect_spectra.7.html">
      <span itemprop="name">fors_detect_spectra: Detect mos/mxu spectra on ccd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>esorex <strong>fors_detect_spectra</strong> [OPTIONS] FILE.sof</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This recipe is used to detect and locate MOS/MXU slit spectra on the CCD, applying a pattern-matching algorithm. The input spectral exposure must contain spectra with the dispersion direction approximately horizontal, with blue on the left and red on the right. Use recipe fors_wave_calib_lss for LSS data, or for MOS/MXU data where all slits have the same offset.</p><p>The rows of the input spectral exposure are processed separately, one by one. First, the background continuum is removed. Second, a list of positions of reference lines candidates is created. Only peaks above a given threshold (specified by the parameter --peakdetection) are selected.</p><p>Third, the pattern-matching task selects from the found peaks the ones corresponding to the reference lines, listed in the input line catalog, associating them to the appropriate wavelengths. The ensuing polynomial fit is used to locate the central wavelength of the applied grism along each image row. The contributions from all rows form an image of the location of all spectra, that can be used as a starting point for the proper modeling of the optical and spectral distortions. For more details on this reduction strategy please refer to the FORS Pipeline User\'s Manual.</p><p>Note that specifying an input GRISM_TABLE will set some of the recipe configuration parameters to default values valid for a particular grism.</p><p>Again, see the pipeline manual for more details.</p><p>In the table below the MXU acronym can be alternatively read as MOS.</p><p>Input files:</p>
<pre>
  DO category:               Type:       Explanation:         Required:
  LAMP_UNBIAS_MXU            Calib       Bias subtracted arc     Y
  MASTER_LINECAT             Calib       Line catalog            Y
  GRISM_TABLE                Calib       Grism table             .
</pre>
<p>Output files:</p>
<pre>
  DO category:               Data type:  Explanation:
  SLIT_MAP_MXU               FITS image  Map of central wavelength on CCD
  SLIT_LOCATION_DETECT_MXU   FITS table  Slits positions on CCD
  SPECTRA_DETECTION_MXU      FITS image  Check of preliminary detection
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--dispersion</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>Expected spectral dispersion (Angstrom/pixel) (float; default: 0.0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.dispersion</strong> [default = <em>0.0</em>].</p>
  </dd>
  <dt>
    <p><strong>--peakdetection</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>Initial peak detection threshold (ADU) (float; default: 0.0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.peakdetection</strong> [default = <em>0.0</em>].</p>
  </dd>
  <dt>
    <p><strong>--wdegree</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>Degree of wavelength calibration polynomial (long; default: 0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.wdegree</strong> [default = <em>0</em>].</p>
  </dd>
  <dt>
    <p><strong>--wradius</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>Search radius if iterating pattern-matching with first-guess method (long; default: 4). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.wradius</strong> [default = <em>4</em>].</p>
  </dd>
  <dt>
    <p><strong>--wreject</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>Rejection threshold in dispersion relation fit (pixel) (float; default: 0.7). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.wreject</strong> [default = <em>0.7</em>].</p>
  </dd>
  <dt>
    <p><strong>--wcolumn</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Name of line catalog table column with wavelengths (str; default: \'WLEN\'). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.wcolumn</strong> [default = <em>WLEN</em>].</p>
  </dd>
  <dt>
    <p><strong>--startwavelength</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>Start wavelength in spectral extraction (float; default: 0.0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.startwavelength</strong> [default = <em>0.0</em>].</p>
  </dd>
  <dt>
    <p><strong>--endwavelength</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>End wavelength in spectral extraction (float; default: 0.0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.endwavelength</strong> [default = <em>0.0</em>].</p>
  </dd>
  <dt>
    <p><strong>--slit_ident</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Attempt slit identification for MOS or MXU (bool; default: True). The full name of this option for the EsoRex configuration file is <strong>fors.fors_detect_spectra.slit_ident</strong> [default = <em>True</em>].</p>
  </dd>

</dl>
<p>Note that it is possible to create a configuration file containing these options, along with suitable default values. Please refer to the details provided by the 'esorex --help' command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fors_detect_spectra&hellip;</h2>
        <div class="sectioncontent">
<p>The full documentation for the fors pipeline can be downloaded as a PDF file using the following URL:</p><ul>
<li><p><strong>ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf</strong></p></li>
</ul><p>An overview over the existing ESO pipelines can be found on the web page <strong>http://www.eso.org/sci/software/pipelines/</strong>.</p><p>Basic documentation about the EsoRex program can be found at the esorex (1) man page.</p><p>It is possible to call the pipelines from python using the python-cpl package. See <strong>http://packages.python.org/python-cpl/index.html</strong> for further information.</p><p>The other recipes of the fors pipeline are <a href="../man7/fors_wave_calib_lss.7.html"><strong>fors_wave_calib_lss</strong>(7)</a>, <a href="../man7/fors_img_sky_flat.7.html"><strong>fors_img_sky_flat</strong>(7)</a>, <a href="../man7/fors_resample.7.html"><strong>fors_resample</strong>(7)</a>, <a href="../man7/fors_config.7.html"><strong>fors_config</strong>(7)</a>, <a href="../man7/fors_extract_objects.7.html"><strong>fors_extract_objects</strong>(7)</a>, <a href="../man7/fors_calib.7.html"><strong>fors_calib</strong>(7)</a>, <a href="../man7/fors_wave_calib.7.html"><strong>fors_wave_calib</strong>(7)</a>, <a href="../man7/fors_detect_objects.7.html"><strong>fors_detect_objects</strong>(7)</a>, <a href="../man7/fors_pmos_science.7.html"><strong>fors_pmos_science</strong>(7)</a>, <a href="../man7/fors_extract_slits.7.html"><strong>fors_extract_slits</strong>(7)</a>, <a href="../man7/test_hough.7.html"><strong>test_hough</strong>(7)</a>, <a href="../man7/fors_img_screen_flat.7.html"><strong>fors_img_screen_flat</strong>(7)</a>, <a href="../man7/fors_extract.7.html"><strong>fors_extract</strong>(7)</a>, <a href="../man7/fors_remove_bias.7.html"><strong>fors_remove_bias</strong>(7)</a>, <a href="../man7/fors_subtract_sky.7.html"><strong>fors_subtract_sky</strong>(7)</a>, <a href="../man7/fors_normalise_flat.7.html"><strong>fors_normalise_flat</strong>(7)</a>, <a href="../man7/montecarlo.7.html"><strong>montecarlo</strong>(7)</a>, <a href="../man7/fors_photometry.7.html"><strong>fors_photometry</strong>(7)</a>, <a href="../man7/fors_zeropoint.7.html"><strong>fors_zeropoint</strong>(7)</a>, <a href="../man7/fors_dark.7.html"><strong>fors_dark</strong>(7)</a>, <a href="../man7/fors_subtract_sky_lss.7.html"><strong>fors_subtract_sky_lss</strong>(7)</a>, <a href="../man7/fors_trace_flat.7.html"><strong>fors_trace_flat</strong>(7)</a>, <a href="../man7/fors_flatfield.7.html"><strong>fors_flatfield</strong>(7)</a>, <a href="../man7/fors_img_science.7.html"><strong>fors_img_science</strong>(7)</a>, <a href="../man7/fors_sumflux.7.html"><strong>fors_sumflux</strong>(7)</a>, <a href="../man7/fors_pmos_extract.7.html"><strong>fors_pmos_extract</strong>(7)</a>, <a href="../man7/fors_align_sky_lss.7.html"><strong>fors_align_sky_lss</strong>(7)</a>, <a href="../man7/fors_bias.7.html"><strong>fors_bias</strong>(7)</a>, <a href="../man7/fors_align_sky.7.html"><strong>fors_align_sky</strong>(7)</a>, <a href="../man7/fors_pmos_calib.7.html"><strong>fors_pmos_calib</strong>(7)</a>, <a href="../man7/fors_spec_mflat.7.html"><strong>fors_spec_mflat</strong>(7)</a>, <a href="../man7/fors_science.7.html"><strong>fors_science</strong>(7)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>fors_detect_spectra 5.0.0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Carlo Izzo &lt;usd-help@eso.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUG REPORTS</h2>
        <div class="sectioncontent">
<p>Please report any problems to usd-help@eso.org. Alternatively, you may send a report to the ESO User Support Department &lt;usd-help@eso.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This file is currently part of the FORS Instrument Pipeline Copyright (C) 2002-2010 European Southern Observatory</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fors_detect_objects.7.html"><span aria-hidden="true">&larr;</span> fors_detect_objects.7: Detect objects in slit spectra</a></li>
   <li class="next"><a href="fors_extract.7.html">fors_extract.7: Extraction of scientific spectra <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
