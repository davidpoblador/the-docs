<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>kmo_fits_stack: Creates kmos conform fits-files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Creates kmos conform fits-files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="kmo_fits_stack (7) manual">
  <meta name="twitter:description" content="Creates kmos conform fits-files">
  <meta name="twitter:image" content="https://www.carta.tech/images/cpl-plugin-kmos-doc-kmo_fits_stack-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/kmo_fits_stack.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="kmo_fits_stack (7) manual" />
  <meta property="og:description" content="Creates kmos conform fits-files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cpl-plugin-kmos-doc-kmo_fits_stack-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">kmo_fits_stack<small> (7)</small></h1>
        <p class="lead">Creates kmos conform fits-files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/kmo_fits_stack.7.html">
      <span itemprop="name">kmo_fits_stack: Creates kmos conform fits-files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cpl-plugin-kmos-doc/">
      <span itemprop="name">cpl-plugin-kmos-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/kmo_fits_stack.7.html">
      <span itemprop="name">kmo_fits_stack: Creates kmos conform fits-files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>esorex <strong>kmo_fits_stack</strong> [OPTIONS] FILE.sof</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<pre>
     #############################################
     ### INTENDED FOR PIPELINE DEVELOPERS ONLY ###
     #############################################
</pre>
<p>FITS files to be processed by the KMOS pipeline have to meet certain condi- tions. This recipe is intended to provide to the user a simple way to test the pipeline with own data, which wasn\'t produced by KMOS itself.</p><p>The input set of frame is checked for integrity (do all the frames have the same size, do they correspond to the desired output type, is there the correct number of files). Then an empty main header is written with desired keywords.</p><p>A keyword consists of the name, data type and value.</p><p>Additional keywords can be added either to the empty primary header or to all sub headers.</p><h3>BASIC PARAMETERS</h3>
<p>--type Depending on the type of the FITS file to create different combinations of frames have to be provided:</p>
<pre>
   * RAW
     exactly 3 files tagged as STACK_DATA
   * F2D
     exactly 3 files tagged as STACK_DATA or
     exactly 6 files tagged alternating as STACK_DATA and STACK_NOISE
     (beginning with DATA)
   * B2D
     exactly 3 files tagged as STACK_BADPIX
   * F1I, F2I, F3I
     as many DATA frames as wanted (at least one) or
     as many DATA and NOISE frames as wanted (at least one of each, the number
     of STACK_DATA frames has to match the one of STACK_NOISE frames)
   * F1S
     exactly 1 file tagged as STACK_DATA
   * F1L
     exactly 1 file tagged as STACK_DATA (either plain text or binary fits
     table)
   * F2L
     exactly 1 file tagged as STACK_DATA (either plain text or binary fits)
     table)
</pre>
<p>--mainkey --subkey Additional keywords can be added either to the empty primary header or to all sub headers. Provided keywords must have following form:</p>
<pre>
   "keyword;type;value;keyword;type;value" (no spaces inbetween!)
</pre>
<p>Allowed values for type are: string, int, float, double, bool</p><p>--valid With the â€“valid parameter one can specifiy which values should be handled as invalid by the pipeline. The keyword ESO OCS ARMi NOTUSED will be set accor- dingly. When it is set to "none" nothing will be added.</p>
<pre>
  Input files:
</pre>

<pre>
   DO                    KMOS
   category              Type   Explanation                    Required #Frames
   --------              -----  -----------                    -------- -------
   STACK_DATA            &lt;none&gt; &gt;= 1 plain FITS files             Y       1-n
   STACK_NOISE                  &gt;= 1 plain FITS files             N       0,1-n
   or
   STACK_BADPIXEL               3 plain FITS files                Y        3
</pre>

<pre>
  Output files:
</pre>

<pre>
   DO                     KMOS
   category               Type    Explanation
   --------               -----   -----------
   FITS_STACK             RAW or  Stacked KMOS FITS file
                          F1D or
                          F2D or
                          B2D or
                          F1I or
                          F2I or
                          F3I or
                          F1S or
                          F1L or
                          F2L
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--type</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>The KMOS data format type (either "RAW", "F1D", "F2D", "F1I", "F2I", "F3I", "F1S", "F1L", "F2L") (str; default: \'\'). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.type</strong> [default = <em></em>].</p>
  </dd>
  <dt>
    <p><strong>--format</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>The format of the columns for "F1L" and "F2L" frames: e.g. "%f;%f;%s" (str; default: \'\'). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.format</strong> [default = <em></em>].</p>
  </dd>
  <dt>
    <p><strong>--title</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>The titles of the columns for "F1L" and "F2L" frames: e.g. "wavelength;strength" (str; default: \'\'). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.title</strong> [default = <em></em>].</p>
  </dd>
  <dt>
    <p><strong>--filename</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Optional: The output filename (.fits will be added as postfix) (str; default: \'FITS_STACK\'). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.filename</strong> [default = <em>FITS_STACK</em>].</p>
  </dd>
  <dt>
    <p><strong>--mainkey</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Optional: Additional keywords for primary header (str; default: \'\'). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.mainkey</strong> [default = <em></em>].</p>
  </dd>
  <dt>
    <p><strong>--subkey</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Optional: Additional keywords for sub headers(This is ignored when category=TRUE) (str; default: \'\'). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.subkey</strong> [default = <em></em>].</p>
  </dd>
  <dt>
    <p><strong>--valid</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Optional: Specify which IFUs are active. Either empty string or string with 24 elements (ones or zeros) e.g: [1;0;1;0;0;...;1] (str; default: \'\'). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.valid</strong> [default = <em></em>].</p>
  </dd>
  <dt>
    <p><strong>--category</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Optional: IF a PRO.CATG should be added. (bool; default: False). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.category</strong> [default = <em>False</em>].</p>
  </dd>
  <dt>
    <p><strong>--input</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Optional: input file (str; default: \'\'). The full name of this option for the EsoRex configuration file is <strong>kmos.kmo_fits_stack.input</strong> [default = <em></em>].</p>
  </dd>

</dl>
<p>Note that it is possible to create a configuration file containing these options, along with suitable default values. Please refer to the details provided by the 'esorex --help' command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO kmo_fits_stack&hellip;</h2>
        <div class="sectioncontent">
<p>The full documentation for the kmos pipeline can be downloaded as a PDF file using the following URL:</p><ul>
<li><p><strong>ftp://ftp.eso.org/pub/dfs/pipelines/kmos/kmos-pipeline-manual-2.9.pdf</strong></p></li>
</ul><p>An overview over the existing ESO pipelines can be found on the web page <strong>http://www.eso.org/sci/software/pipelines/</strong>.</p><p>Basic documentation about the EsoRex program can be found at the esorex (1) man page.</p><p>It is possible to call the pipelines from python using the python-cpl package. See <strong>http://packages.python.org/python-cpl/index.html</strong> for further information.</p><p>The other recipes of the kmos pipeline are <a href="../man7/kmo_copy.7.html"><strong>kmo_copy</strong>(7)</a>, <a href="../man7/kmo_fits_check.7.html"><strong>kmo_fits_check</strong>(7)</a>, <a href="../man7/kmo_sci_red.7.html"><strong>kmo_sci_red</strong>(7)</a>, <a href="../man7/kmo_noise_map.7.html"><strong>kmo_noise_map</strong>(7)</a>, <a href="../man7/kmo_rotate.7.html"><strong>kmo_rotate</strong>(7)</a>, <a href="../man7/kmo_extract_spec.7.html"><strong>kmo_extract_spec</strong>(7)</a>, <a href="../man7/kmo_multi_reconstruct.7.html"><strong>kmo_multi_reconstruct</strong>(7)</a>, <a href="../man7/kmo_sky_tweak.7.html"><strong>kmo_sky_tweak</strong>(7)</a>, <a href="../man7/kmo_shift.7.html"><strong>kmo_shift</strong>(7)</a>, <a href="../man7/kmos_gen_reflines.7.html"><strong>kmos_gen_reflines</strong>(7)</a>, <a href="../man7/kmo_stats.7.html"><strong>kmo_stats</strong>(7)</a>, <a href="../man7/kmo_arithmetic.7.html"><strong>kmo_arithmetic</strong>(7)</a>, <a href="../man7/kmos_dark.7.html"><strong>kmos_dark</strong>(7)</a>, <a href="../man7/kmo_fits_strip.7.html"><strong>kmo_fits_strip</strong>(7)</a>, <a href="../man7/kmo_combine.7.html"><strong>kmo_combine</strong>(7)</a>, <a href="../man7/kmo_std_star.7.html"><strong>kmo_std_star</strong>(7)</a>, <a href="../man7/kmo_illumination_flat.7.html"><strong>kmo_illumination_flat</strong>(7)</a>, <a href="../man7/kmo_make_image.7.html"><strong>kmo_make_image</strong>(7)</a>, <a href="../man7/kmos_flat.7.html"><strong>kmos_flat</strong>(7)</a>, <a href="../man7/kmo_fit_profile.7.html"><strong>kmo_fit_profile</strong>(7)</a>, <a href="../man7/kmo_sky_mask.7.html"><strong>kmo_sky_mask</strong>(7)</a>, <a href="../man7/kmos_illumination.7.html"><strong>kmos_illumination</strong>(7)</a>, <a href="../man7/kmos_wave_cal.7.html"><strong>kmos_wave_cal</strong>(7)</a>, <a href="../man7/kmo_reconstruct.7.html"><strong>kmo_reconstruct</strong>(7)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>kmo_fits_stack 1.3.5</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Alex Agudo Berbel &lt;usd-help@eso.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUG REPORTS</h2>
        <div class="sectioncontent">
<p>Please report any problems to usd-help@eso.org. Alternatively, you may send a report to the ESO User Support Department &lt;usd-help@eso.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This file is part of the CRIRES Instrument Pipeline Copyright (C) 2002,2003 European Southern Observatory</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="kmo_fits_check.7.html"><span aria-hidden="true">&larr;</span> kmo_fits_check.7: Check contents of a kmos fits-file</a></li>
   <li class="next"><a href="kmo_fits_strip.7.html">kmo_fits_strip.7: Strip noise, rotator and/or empty extensions from a processed kmos fits frame <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
