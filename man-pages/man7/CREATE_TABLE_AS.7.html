<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CREATE_TABLE_AS: Define a new table from the results of a query</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Define a new table from the results of a query">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="CREATE_TABLE_AS (7) manual">
  <meta name="twitter:description" content="Define a new table from the results of a query">
  <meta name="twitter:image" content="https://www.carta.tech/images/postgresql-client-9.4-CREATE_TABLE_AS-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/CREATE_TABLE_AS.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="CREATE_TABLE_AS (7) manual" />
  <meta property="og:description" content="Define a new table from the results of a query" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/postgresql-client-9.4-CREATE_TABLE_AS-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">CREATE_TABLE_AS<small> (7)</small></h1>
        <p class="lead">Define a new table from the results of a query</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/CREATE_TABLE_AS.7.html">
      <span itemprop="name">CREATE_TABLE_AS: Define a new table from the results of a query</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/postgresql-client-9.4/">
      <span itemprop="name">postgresql-client-9.4</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/CREATE_TABLE_AS.7.html">
      <span itemprop="name">CREATE_TABLE_AS: Define a new table from the results of a query</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE <em>table_name</em>
    [ (<em>column_name</em> [, ...] ) ]
    [ WITH ( <em>storage_parameter</em> [= <em>value</em>] [, ... ] ) | WITH OIDS | WITHOUT OIDS ]
    [ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
    [ TABLESPACE <em>tablespace_name</em> ]
    AS <em>query</em>
    [ WITH [ NO ] DATA ]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>CREATE TABLE AS</strong> creates a table and fills it with data computed by a <strong>SELECT</strong> command. The table columns have the names and data types associated with the output columns of the <strong>SELECT</strong> (except that you can override the column names by giving an explicit list of new column names).</p><p><strong>CREATE TABLE AS</strong> bears some resemblance to creating a view, but it is really quite different: it creates a new table and evaluates the query just once to fill the new table initially. The new table will not track subsequent changes to the source tables of the query. In contrast, a view re-evaluates its defining <strong>SELECT</strong> statement whenever it is queried.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">
<p>GLOBAL or LOCAL</p><p>Ignored for compatibility. Use of these keywords is deprecated; refer to CREATE TABLE (<a href="../man7/CREATE_TABLE.7.html"><strong>CREATE_TABLE</strong>(7)</a>) for details.</p><p>TEMPORARY or TEMP</p><p>If specified, the table is created as a temporary table. Refer to CREATE TABLE (<a href="../man7/CREATE_TABLE.7.html"><strong>CREATE_TABLE</strong>(7)</a>) for details.</p><p>UNLOGGED</p><p>If specified, the table is created as an unlogged table. Refer to CREATE TABLE (<a href="../man7/CREATE_TABLE.7.html"><strong>CREATE_TABLE</strong>(7)</a>) for details.</p><p><em>table_name</em></p><p>The name (optionally schema-qualified) of the table to be created.</p><p><em>column_name</em></p><p>The name of a column in the new table. If column names are not provided, they are taken from the output column names of the query.</p><p>WITH ( <em>storage_parameter</em> [= <em>value</em>] [, ... ] )</p><p>This clause specifies optional storage parameters for the new table; see Storage Parameters for more information. The WITH clause can also include OIDS=TRUE (or just OIDS) to specify that rows of the new table should have OIDs (object identifiers) assigned to them, or OIDS=FALSE to specify that the rows should not have OIDs. See CREATE TABLE (<a href="../man7/CREATE_TABLE.7.html"><strong>CREATE_TABLE</strong>(7)</a>) for more information.</p><p>WITH OIDS</p><p>WITHOUT OIDS</p><p>These are obsolescent syntaxes equivalent to WITH (OIDS) and WITH (OIDS=FALSE), respectively. If you wish to give both an OIDS setting and storage parameters, you must use the WITH ( ... ) syntax; see above.</p><p>ON COMMIT</p><p>The behavior of temporary tables at the end of a transaction block can be controlled using ON COMMIT. The three options are:</p><p>PRESERVE ROWS</p><p>No special action is taken at the ends of transactions. This is the default behavior.</p><p>DELETE ROWS</p><p>All rows in the temporary table will be deleted at the end of each transaction block. Essentially, an automatic <a href="../man7/TRUNCATE.7.html"><strong>TRUNCATE</strong>(7)</a> is done at each commit.</p><p>DROP</p><p>The temporary table will be dropped at the end of the current transaction block.</p><p>TABLESPACE <em>tablespace_name</em></p><p>The <em>tablespace_name</em> is the name of the tablespace in which the new table is to be created. If not specified, default_tablespace is consulted, or temp_tablespaces if the table is temporary.</p><p><em>query</em></p><p>A <a href="../man7/SELECT.7.html"><strong>SELECT</strong>(7)</a>, TABLE, or <a href="../man7/VALUES.7.html"><strong>VALUES</strong>(7)</a> command, or an <a href="../man7/EXECUTE.7.html"><strong>EXECUTE</strong>(7)</a> command that runs a prepared <strong>SELECT</strong>, <strong>TABLE</strong>, or <strong>VALUES</strong> query.</p><p>WITH [ NO ] DATA</p><p>This clause specifies whether or not the data produced by the query should be copied into the new table. If not, only the table structure is copied. The default is to copy the data.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>This command is functionally similar to SELECT INTO (<a href="../man7/SELECT_INTO.7.html"><strong>SELECT_INTO</strong>(7)</a>), but it is preferred since it is less likely to be confused with other uses of the <strong>SELECT INTO</strong> syntax. Furthermore, <strong>CREATE TABLE AS</strong> offers a superset of the functionality offered by <strong>SELECT INTO</strong>.</p><p>The <strong>CREATE TABLE AS</strong> command allows the user to explicitly specify whether OIDs should be included. If the presence of OIDs is not explicitly specified, the default_with_oids configuration variable is used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Create a new table films_recent consisting of only recent entries from the table films:</p>
<pre>
CREATE TABLE films_recent AS
  SELECT * FROM films WHERE date_prod &gt;= &apos;2002-01-01&apos;;
</pre>
<p>To copy a table completely, the short form using the TABLE command can also be used:</p>
<pre>
CREATE TABLE films2 AS
  TABLE films;
</pre>
<p>Create a new temporary table films_recent, consisting of only recent entries from the table films, using a prepared statement. The new table has OIDs and will be dropped at commit:</p>
<pre>
PREPARE recentfilms(date) AS
  SELECT * FROM films WHERE date_prod &gt; $1;
CREATE TEMP TABLE films_recent WITH (OIDS) ON COMMIT DROP AS
  EXECUTE recentfilms(&apos;2002-01-01&apos;);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMPATIBILITY</h2>
        <div class="sectioncontent">
<p><strong>CREATE TABLE AS</strong> conforms to the SQL standard. The following are nonstandard extensions:</p><p>The standard requires parentheses around the subquery clause; in PostgreSQL, these parentheses are optional.</p><p>In the standard, the WITH [ NO ] DATA clause is required; in PostgreSQL it is optional.</p><p>PostgreSQL handles temporary tables in a way rather different from the standard; see CREATE TABLE (<a href="../man7/CREATE_TABLE.7.html"><strong>CREATE_TABLE</strong>(7)</a>) for details.</p><p>The WITH clause is a PostgreSQL extension; neither storage parameters nor OIDs are in the standard.</p><p>The PostgreSQL concept of tablespaces is not part of the standard. Hence, the clause TABLESPACE is an extension.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO CREATE_TABLE_AS&hellip;</h2>
        <div class="sectioncontent">
<p>CREATE MATERIALIZED VIEW (<a href="../man7/CREATE_MATERIALIZED_VIEW.7.html"><strong>CREATE_MATERIALIZED_VIEW</strong>(7)</a>), CREATE TABLE (<a href="../man7/CREATE_TABLE.7.html"><strong>CREATE_TABLE</strong>(7)</a>), <a href="../man7/EXECUTE.7.html"><strong>EXECUTE</strong>(7)</a>, <a href="../man7/SELECT.7.html"><strong>SELECT</strong>(7)</a>, SELECT INTO (<a href="../man7/SELECT_INTO.7.html"><strong>SELECT_INTO</strong>(7)</a>), <a href="../man7/VALUES.7.html"><strong>VALUES</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="CREATE_TABLESPACE.7.html"><span aria-hidden="true">&larr;</span> CREATE_TABLESPACE.7: Define a new tablespace</a></li>
   <li class="next"><a href="CREATE_TEXT_SEARCH_CONFIGURATION.7.html">CREATE_TEXT_SEARCH_CONFIGURATION.7: Define a new text search configuration <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
