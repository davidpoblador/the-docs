<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dconf: A configuration systen</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A configuration systen">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dconf (7) manual">
  <meta name="twitter:description" content="A configuration systen">
  <meta name="twitter:image" content="https://www.carta.tech/images/dconf-cli-dconf-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/dconf.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dconf (7) manual" />
  <meta property="og:description" content="A configuration systen" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dconf-cli-dconf-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dconf<small> (7)</small></h1>
        <p class="lead">A configuration systen</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/dconf.7.html">
      <span itemprop="name">dconf: A configuration systen</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dconf-cli/">
      <span itemprop="name">dconf-cli</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/dconf.7.html">
      <span itemprop="name">dconf: A configuration systen</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>dconf is a simple key/value storage system that is heavily optimised for reading. This makes it an ideal system for storing user preferences (which are read 1000s of times for each time the user changes one). It was created with this usecase in mind.</p><p>All preferences are stored in a single large binary file. Layering of preferences is possible using multiple files (ie: for site defaults). Lock-down is also supported. The binary file for the defaults can optionally be compiled from a set of plain text keyfiles.</p><p>dconf has a partial client/server architecture. It uses D-Bus. The server is only involved in writes (and is not activated in the user session until the user modifies a preference). The service is stateless and can exit freely at any time (and is therefore robust against crashes). The list of paths that each process is watching is stored within the D-Bus daemon itself (as D-Bus signal match rules).</p><p>Reads are performed by direct access (via mmap) to the on-disk database which is essentially a hashtable. For this reason, dconf reads typically involve zero system calls and are comparable to a hashtable lookup in terms of speed. Practically speaking, in simple non-layered setups, dconf is less than 10 times slower than GHashTable.</p><p>Writes are assumed only to happen in response to explicit user interaction (like clicking on a checkbox in a preferences dialog) and are therefore not optimised at all. On some file systems, dconf-service will call fsync() for every write, which can introduce a latency of up to 100ms. This latency is hidden by the client libraries through a clever "fast" mechanism that records the outstanding changes locally (so they can be read back immediately) until the service signals that a write has completed.</p><p>The binary database format that dconf uses by default is not suitable for use on NFS, where mmap does not work well. To handle this common use case, dconf can be configured to place its binary database in <strong>XDG_RUNTIME_DIR</strong> (which is guaranteed to be local, but non-persistent) and synchronize it with a plain text keyfile in the users home directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROFILES</h2>
        <div class="sectioncontent">
<p>A profile is a list of configuration databases that dconf consults to find the value for a key. The user&apos;s personal database always takes the highest priority, followed by the system databases in the order prescribed by the profile.</p><p>On startup, dconf consults the <strong>DCONF_PROFILE</strong> environment variable. If set, dconf will attempt to open the named profile, aborting if that fails. If the environment variable is not set, it will attempt to open the profile named "user" and if that fails, it will fall back to an internal hard-wired configuration. dconf stores its profiles in text files. <strong>DCONF_PROFILE</strong> can specify a relative path to a file in /etc/dconf/profile/, or an absolute path (such as in a user&apos;s home directory). The profile name can only use alphanumeric characters or &apos;_&apos;.</p><p>A profile file might look like the following:</p>
<pre>
user-db:user
system-db:local
system-db:site

</pre>
<p>Each line in a profile specifies one dconf database. The first line indicates the database used to write changes, and the remaining lines indicate read-only databases. (The first line should specify a user-db or service-db, so that users can actually make configuration changes.)</p><p>A "user-db" line specifies a user database. These databases are found in <strong>$XDG_CONFIG_HOME</strong>/dconf/. The name of the file to open in that directory is exactly as it is written in the profile. This file is expected to be in the binary dconf database format. Note that <strong>XDG_CONFIG_HOME</strong> cannot be set/modified per terminal or session, because then the writer and reader would be working on different DBs (the writer is started by DBus and cannot see that variable).</p><p>A "service-db" line instructs dconf to place the binary database file for the user database in <strong>XDG_RUNTIME_DIR</strong>. Since this location is not persistent, the rest of the line instructs dconf how to store the database persistently. A typical line is service-db:keyfile/user, which tells dconf to synchronize the binary database with a plain text keyfile in <strong>$XDG_CONFIG_HOME</strong>/dconf/user.txt. The synchronization is bi-directional.</p><p>A "system-db" line specifies a system database. These databases are found in /etc/dconf/db/. Again, the name of the file to open in that directory is exactly as it is written in the profile and the file is expected to be in the dconf database format.</p><p>If the <strong>DCONF_PROFILE</strong> environment variable is unset and the "user" profile can not be opened, then the effect is as if the profile was specified by this file:</p>
<pre>
user-db:user

</pre>
<p>That is, the user&apos;s personal database is consulted and there are no system settings.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KEY FILES</h2>
        <div class="sectioncontent">
<p>To facilitate system configuration with a text editor, dconf can populate databases from plain text keyfiles. For any given system database, keyfiles can be placed into the /etc/dconf/db/<em>database</em>.d/ directory. The keyfiles contain groups of settings as follows:</p>
<pre>
# Some useful default settings for our site

[system/proxy/http]
host=&apos;172.16.0.1&apos;
enabled=true

[org/gnome/desktop/background]
picture-uri=&apos;file:///usr/local/rupert-corp/company-wallpaper.jpeg&apos;

</pre>
<p>After changing keyfiles, the database needs to be updated with the <a href="../man1/dconf.1.html"><strong>dconf</strong>(1)</a> tool.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOCKS</h2>
        <div class="sectioncontent">
<p>System databases can contain &apos;locks&apos; for keys. If a lock for a particular key or subpath is installed into a database then no database listed above that one in the profile will be able to modify any of the affected settings. This can be used to enforce mandatory settings.</p><p>To add locks to a database, place text files in the /etc/dconf/db/<em>database</em>.d/locks directory, where <em>database</em> is the name of a system database, as specified in the profile. The files contain list of keys to lock, on per line. Lines starting with a # are ignored. Here is an example:</p>
<pre>
# prevent changes to the company wallpaper
/org/gnome/desktop/background/picture-uri

</pre>
<p>After changing locks, the database needs to be updated with the <a href="../man1/dconf.1.html"><strong>dconf</strong>(1)</a> tool.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PORTABILITY</h2>
        <div class="sectioncontent">
<p>dconf mostly targets Free Software operating systems. It will theoretically run on Mac OS but there isn&apos;t much point to that (since Mac OS applications want to store preferences in plist files). It is not possible to use dconf on Windows because of the inability to rename over a file that&apos;s still in use (which is what the dconf-service does on every write).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">API STABILITY</h2>
        <div class="sectioncontent">
<p>The dconf API is not particularly friendly, and is not guaranteed to be stable. Because of this and the lack of portability, you almost certainly want to use some sort of wrapper API around it. The wrapper API used by GTK+ and GNOME applications is \m[blue]<strong>GSettings</strong>\m[]\s-2\u[1]\d\s+2, which is included as part of GLib. GSettings has backends for Windows (using the registry) and Mac OS (using property lists) as well as its dconf backend and is the proper API to use for graphical applications.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dconf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/dconf-service.1.html"><strong>dconf-service</strong>(1)</a>, <a href="../man1/dconf-editor.1.html"><strong>dconf-editor</strong>(1)</a>, <a href="../man1/dconf.1.html"><strong>dconf</strong>(1)</a>, \m[blue]<strong>GSettings</strong>\m[]\s-2\u[1]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>GSettings</p><p>http://developer.gnome.org/gio/stable/GSettings.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dbus-event.7.html"><span aria-hidden="true">&larr;</span> dbus-event.7: Event signalling that a dbus signal has been emitted</a></li>
   <li class="next"><a href="dconf-event.7.html">dconf-event.7: Event signalling that a dconf key has been changed <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
