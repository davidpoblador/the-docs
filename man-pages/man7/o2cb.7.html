<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>o2cb: Default cluster stack for the ocfs2 file system.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Default cluster stack for the ocfs2 file system.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="o2cb (7) manual">
  <meta name="twitter:description" content="Default cluster stack for the ocfs2 file system.">
  <meta name="twitter:image" content="https://www.carta.tech/images/ocfs2-tools-o2cb-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/o2cb.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="o2cb (7) manual" />
  <meta property="og:description" content="Default cluster stack for the ocfs2 file system." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ocfs2-tools-o2cb-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">o2cb<small> (7)</small></h1>
        <p class="lead">Default cluster stack for the ocfs2 file system.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/o2cb.7.html">
      <span itemprop="name">o2cb: Default cluster stack for the ocfs2 file system.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ocfs2-tools/">
      <span itemprop="name">ocfs2-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/o2cb.7.html">
      <span itemprop="name">o2cb: Default cluster stack for the ocfs2 file system.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>o2cb</strong> is the default cluster stack for the <em>OCFS2</em> file system. It includes a node manager (o2nm) to keep track of the nodes in the cluster, a heartbeat agent (o2hb) to detect live nodes, a network agent (o2net) for intra-cluster node communication and a distributed lock manager (o2dlm) to keep track of lock resources. All these components are in-kernel. It also includes an in-memory file system, dlmfs, to allow userspace to access the in-kernel dlm.</p><p>This cluster stack has two configuration files, namely, <em>/etc/ocfs2/cluster.conf</em> and <em>/etc/sysconfig/o2cb</em>. Whereas the former keeps track of the cluster layout, the latter keeps track of the cluster timeouts. Both files are only read when the cluster is brought online. Values in use by the online cluster can be perused in the /sys/kernel/config/cluster directory structure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>The cluster layout is specified in <strong>/etc/ocfs2/cluster.conf</strong>. While it is easier to populate and propagate this configuration file using <a href="../man8/ocfs2console.8.html"><strong>ocfs2console</strong>(8)</a></strong>, one can also do it by manually as long as care is taken to format the file correctly.</p><p>While the console utility is intuitive to use, there are few points to keep in mind.</p>
<dl class='dl-vertical'>
  <dt>
    <p>	1. The node name needs to match the hostname. It does not need to include the domain name. For example, appserver.oracle.com can be appserver.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>	2. The IP address need not be the one associated with that hostname. As in, any valid IP address on that node can be used. O2CB will not attempt to match the node name (hostname) with the specified IP address.</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>For best performance, use of a private interconnect (lower latency) is recommended.</p><p>The cluster.conf file is in a stanza format with two types of stanzas, namely, cluster and node. A typical cluster.conf will have one cluster stanza and multiple node stanzas.</p><p>The <em>cluster stanza</em> has two parameters:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>node_count</strong></p>
  </dt>
  <dd>
    <p>Total number of nodes in the cluster</p>
  </dd>
  <dt>
    <p><strong>name</strong></p>
  </dt>
  <dd>
    <p>Name of the cluster</p>
  </dd>

</dl>
<p>The <em>node stanza</em> has five parameters:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ip_port</strong></p>
  </dt>
  <dd>
    <p>IP port</p>
  </dd>
  <dt>
    <p><strong>ip_address</strong></p>
  </dt>
  <dd>
    <p>IP address</p>
  </dd>
  <dt>
    <p><strong>number</strong></p>
  </dt>
  <dd>
    <p>Unique node number from 0-254</p>
  </dd>
  <dt>
    <p><strong>name</strong></p>
  </dt>
  <dd>
    <p>Hostname</p>
  </dd>
  <dt>
    <p><strong>cluster</strong></p>
  </dt>
  <dd>
    <p>Name of the cluster</p>
  </dd>

</dl>
<p>Users populating cluster.conf manually should follow the format strictly. As in, stanza header should start at the first column and end with a colon, stanza parameters should start after a tab, a blank line should demarcate each stanza and care taken to avoid stray whitespaces.</p><p>The O2CB cluster timeouts are specified in <strong>/etc/sysconfig/o2cb</strong> and can be configured using the <em>o2cb</em> init script.</p><p>These timeouts are used by the O2CB clusterstack to determine whether a node is dead or alive. While the use of default values is recommended, users can experiment with other values if the defaults are causing spurious fencing.</p><p>The <em>cluster timeouts</em> are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Heartbeat Dead Threshold</strong></p>
  </dt>
  <dd>
    <p>The Disk Heartbeat timeout is the number of two second iterations before a node is considered dead. The exact formula used to convert the timeout in seconds to the number of iterations is as follows:</p><p>O2CB_HEARTBEAT_THRESHOLD = (((timeout in seconds) / 2) + 1)</p><p>For e.g., to specify a 60 sec timeout, set it to 31. For 120 secs, set it to 61. The default for this timeout is 60 secs (O2CB_HEARTBEAT_THRESHOLD = 31).</p>
  </dd>
  <dt>
    <p><strong>Network Idle Timeout</strong></p>
  </dt>
  <dd>
    <p>The Network Idle timeout specifies the time in milliseconds before a network connection is considered dead. It defaults to 30000 ms.</p>
  </dd>
  <dt>
    <p><strong>Network Keepalive Delay</strong></p>
  </dt>
  <dd>
    <p>The Network Keepalive specifies the maximum delay in milliseconds before a keepalive packet is sent to another node to check whether it is alive or not. If the node is alive, it will respond. Its defaults to 2000 ms.</p>
  </dd>
  <dt>
    <p><strong>Network Reconnect Delay</strong></p>
  </dt>
  <dd>
    <p>The Network Reconnect specifies the minimum delay in milliseconds between connection attempts. It defaults to 2000 ms.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>A sample /etc/ocfs2/cluster.conf.</p><p>cluster:</p>
<pre>
    node_count = 3
    name = webcluster
</pre>
<p>node:</p>
<pre>
    ip_port = 7777
    ip_address = 192.168.0.107
    number = 7
    name = node7
    cluster = webcluster
</pre>
<p>node:</p>
<pre>
    ip_port = 7777
    ip_address = 192.168.0.106
    number = 6
    name = node6
    cluster = webcluster
</pre>
<p>node:</p>
<pre>
    ip_port = 7777
    ip_address = 192.168.0.110
    number = 10
    name = node10
    cluster = webcluster
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO o2cb&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/mkfs.ocfs2.8.html"><strong>mkfs.ocfs2</strong>(8)</a></strong> <a href="../man8/fsck.ocfs2.8.html"><strong>fsck.ocfs2</strong>(8)</a></strong> <a href="../man8/tunefs.ocfs2.8.html"><strong>tunefs.ocfs2</strong>(8)</a></strong> <a href="../man8/debugfs.ocfs2.8.html"><strong>debugfs.ocfs2</strong>(8)</a></strong> <a href="../man8/ocfs2console.8.html"><strong>ocfs2console</strong>(8)</a></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Oracle Corporation</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2004, 2010 Oracle. All rights reserved.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="numm.getting-started.7.html"><span aria-hidden="true">&larr;</span> numm.getting-started.7: Numm installation and usage</a></li>
   <li class="next"><a href="observer.7.html">observer.7: The observer application <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
