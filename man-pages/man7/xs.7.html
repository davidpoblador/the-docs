<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xs: Crossroads i/o, a lightweight messaging layer</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Crossroads i/o, a lightweight messaging layer">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xs (7) manual">
  <meta name="twitter:description" content="Crossroads i/o, a lightweight messaging layer">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxs-dev-xs-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/xs.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xs (7) manual" />
  <meta property="og:description" content="Crossroads i/o, a lightweight messaging layer" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxs-dev-xs-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xs<small> (7)</small></h1>
        <p class="lead">Crossroads i/o, a lightweight messaging layer</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/xs.7.html">
      <span itemprop="name">xs: Crossroads i/o, a lightweight messaging layer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxs-dev/">
      <span itemprop="name">libxs-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/xs.7.html">
      <span itemprop="name">xs: Crossroads i/o, a lightweight messaging layer</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;xs/xs.h&gt;</strong></p><p><strong>cc</strong> [<em>flags</em>] <em>files</em> <strong>-lxs</strong> [<em>libraries</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Crossroads I/O is a library for building scalable and high performance distributed applications. It fits between classic BSD sockets, JMS/AMQP-style message queues, and enterprise message-oriented middleware.</p><p>Crossroads I/O extends the standard socket interfaces with features traditionally provided by specialised <em>messaging middleware</em> products. Crossroads sockets provide an abstraction of asynchronous <em>message queues</em>, multiple <em>messaging patterns</em>, message filtering (<em>subscriptions</em>), seamless access to multiple <em>transport protocols</em> and more.</p><p>Crossroads I/O provides a native C API for applications. Support for many more languages is provided by the community through language bindings which can be found at the Crossroads website.</p><p>This documentation presents an overview of Crossroads concepts, describes how Crossroads abstract standard sockets and provides a reference manual for the functions provided by the Crossroads library.</p><h3>Context</h3>
<p>Before using any Crossroads library functions the caller must initialise a <em>context</em> using <em>xs_init()</em>. The following functions are provided to handle initialisation and termination of a <em>context</em>:</p><p>Initialise Crossroads context</p><p><a href="../man3/xs_init.3.html"><strong>xs_init</strong>(3)</a></p><p>Terminate Crossroads context</p><p><a href="../man3/xs_term.3.html"><strong>xs_term</strong>(3)</a></p><p>Set Crossroads context options</p><p><a href="../man3/xs_setctxopt.3.html"><strong>xs_setctxopt</strong>(3)</a></p><p><strong>Thread safety</strong></p><p>A <em>context</em> is thread safe and may be shared among as many application threads as necessary, without any additional locking required on the part of the caller.</p><p>The individual <em>sockets</em> within a <em>context</em> are <em>not</em> thread safe &ndash; applications may <em>not</em> use a single <em>socket</em> concurrently from multiple threads.</p><p>A <em>socket</em> <em>may</em> be <em>migrated</em> from one thread to another, by issuing a full memory barrier between individual calls on the <em>socket</em>. For example, this means applications can create a socket in one thread with <em>xs_socket()</em> and then pass it to a <em>newly created</em> thread as part of thread initialization via a structure passed as an argument to <em>pthread_create()</em>.</p><p><strong>Multiple contexts</strong></p><p>Multiple <em>contexts</em> may coexist within a single application. Thus, an application can use Crossroads directly and at the same time make use of any number of additional libraries or components which themselves make use of Crossroads.</p>
<h3>Messages</h3>
<p>A Crossroads message is a discrete unit of data passed between applications or components of the same application. Crossroads messages have no internal structure and from the point of view of Crossroads themselves they are considered to be opaque binary data.</p><p>Applications using the Crossroads library send and receive messages directly from/to buffers provided by the application, using the Crossroads functions <em>xs_send()</em> and <em>xs_recv()</em>.</p><p>Alternatively, applications desiring zero-copy messaging and/or reference counted allocation of messages can use the message handling functions described in this section, and send and receive messages using <em>xs_sendmsg()</em> and <em>xs_recvmsg()</em> respectively. These two approaches are interchangeable.</p><p>The following functions are provided to work with messages using zero-copy and/or reference-counted allocation of messages:</p><p>Initialise a message</p><p><a href="../man3/xs_msg_init.3.html"><strong>xs_msg_init</strong>(3)</a> <a href="../man3/xs_msg_init_size.3.html"><strong>xs_msg_init_size</strong>(3)</a> <a href="../man3/xs_msg_init_data.3.html"><strong>xs_msg_init_data</strong>(3)</a></p><p>Release a message</p><p><a href="../man3/xs_msg_close.3.html"><strong>xs_msg_close</strong>(3)</a></p><p>Access message content</p><p><a href="../man3/xs_msg_data.3.html"><strong>xs_msg_data</strong>(3)</a> <a href="../man3/xs_msg_size.3.html"><strong>xs_msg_size</strong>(3)</a></p><p>Message manipulation</p><p><a href="../man3/xs_msg_copy.3.html"><strong>xs_msg_copy</strong>(3)</a> <a href="../man3/xs_msg_move.3.html"><strong>xs_msg_move</strong>(3)</a></p><p>Retrieve message option</p><p><a href="../man3/xs_getmsgopt.3.html"><strong>xs_getmsgopt</strong>(3)</a></p>
<h3>Sockets</h3>
<p>Crossroads sockets present an abstraction of a asynchronous <em>message queue</em>, with the exact queueing semantics depending on the socket type in use. See <a href="../man3/xs_socket.3.html"><strong>xs_socket</strong>(3)</a> for the socket types provided.</p><p>The following functions are provided to work with sockets:</p><p>Creating a socket</p><p><a href="../man3/xs_socket.3.html"><strong>xs_socket</strong>(3)</a></p><p>Closing a socket</p><p><a href="../man3/xs_close.3.html"><strong>xs_close</strong>(3)</a></p><p>Manipulating socket options</p><p><a href="../man3/xs_getsockopt.3.html"><strong>xs_getsockopt</strong>(3)</a> <a href="../man3/xs_setsockopt.3.html"><strong>xs_setsockopt</strong>(3)</a></p><p>Creating and modifiying topologies</p><p><a href="../man3/xs_bind.3.html"><strong>xs_bind</strong>(3)</a> <a href="../man3/xs_connect.3.html"><strong>xs_connect</strong>(3)</a> <a href="../man3/xs_shutdown.3.html"><strong>xs_shutdown</strong>(3)</a></p><p>Sending and receiving messages</p><p><a href="../man3/xs_send.3.html"><strong>xs_send</strong>(3)</a> <a href="../man3/xs_recv.3.html"><strong>xs_recv</strong>(3)</a></p><p>Sending and receiving messages (zero-copy)</p><p><a href="../man3/xs_sendmsg.3.html"><strong>xs_sendmsg</strong>(3)</a> <a href="../man3/xs_recvmsg.3.html"><strong>xs_recvmsg</strong>(3)</a></p><p><strong>Input/output multiplexing</strong>. Crossroads provides a mechanism for applications to multiplex input/output events over a set containing both Crossroads sockets and standard sockets. This mechanism mirrors the standard <em>poll()</em> system call, and is described in detail in <a href="../man3/xs_poll.3.html"><strong>xs_poll</strong>(3)</a>.</p>
<h3>Transports</h3>
<p>A Crossroads socket can use multiple different underlying transport mechanisms. Each transport mechanism is suited to a particular purpose and has its own advantages and drawbacks.</p><p>The following transport mechanisms are provided:</p><p>Unicast transport using TCP</p><p><a href="../man7/xs_tcp.7.html"><strong>xs_tcp</strong>(7)</a></p><p>Reliable multicast transport using PGM</p><p><a href="../man7/xs_pgm.7.html"><strong>xs_pgm</strong>(7)</a></p><p>Local inter-process communication transport</p><p><a href="../man7/xs_ipc.7.html"><strong>xs_ipc</strong>(7)</a></p><p>Local in-process (inter-thread) communication transport</p><p><a href="../man7/xs_inproc.7.html"><strong>xs_inproc</strong>(7)</a></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERROR HANDLING</h2>
        <div class="sectioncontent">
<p>The Crossroads library functions handle errors using the standard conventions found on POSIX systems. Generally, this means that upon failure a Crossroads library function shall return either a NULL value (if returning a pointer) or a negative value (if returning an integer), and the actual error code shall be stored in the <em>errno</em> variable.</p><p>On non-POSIX systems some users may experience issues with retrieving the correct value of the <em>errno</em> variable. The <em>xs_errno()</em> function is provided to assist in these cases; for details refer to <a href="../man3/xs_errno.3.html"><strong>xs_errno</strong>(3)</a>.</p><p>The <em>xs_strerror()</em> function is provided to translate Crossroads-specific error codes into error message strings; for details refer to <a href="../man3/xs_strerror.3.html"><strong>xs_strerror</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MISCELLANEOUS</h2>
        <div class="sectioncontent">
<p>The following miscellaneous functions are provided:</p><p>Report Crossroads library version</p><p><a href="../man3/xs_version.3.html"><strong>xs_version</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LANGUAGE BINDINGS</h2>
        <div class="sectioncontent">
<p>The Crossroads library provides interfaces suitable for calling from programs in any language; this documentation documents those interfaces as they would be used by C programmers. The intent is that programmers using Crossroads from other languages shall refer to this documentation alongside any documentation provided by the vendor of their language binding.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ZEROMQ COMPATIBILITY</h2>
        <div class="sectioncontent">
<p>The Crossroads library provides an optional drop-in <em>libzmq</em> compatibility library for ZeroMQ applications. See <a href="../man7/xs_zmq.7.html"><strong>xs_zmq</strong>(7)</a> for documentation on this option.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>The Crossroads documentation was written by Martin Sustrik &lt;\m[blue]<strong>sustrik@250bpm.com</strong>\m[]\s-2\u[1]\d\s+2&gt; and Martin Lucina &lt;\m[blue]<strong>martin@lucina.net</strong>\m[]\s-2\u[2]\d\s+2&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Free use of the Crossroads library software is granted under the terms of the GNU Lesser General Public License (LGPL). For details see the files COPYING and COPYING.LESSER included with the libxs distribution.</p><p>As a special exception, the copyright holders of libxs grant you the right to link the library statically with your software. Refer to the end of the COPYING.LESSER file included with the libxs distribution for details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>sustrik@250bpm.com</p><p>mailto:sustrik@250bpm.com</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>martin@lucina.net</p><p>mailto:martin@lucina.net</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xpaxt.7.html"><span aria-hidden="true">&larr;</span> xpaxt.7: The \s-1xpa\s0 interface to xt (x windows)</a></li>
   <li class="next"><a href="xs_inproc.7.html">xs_inproc.7: Local in-process (inter-thread) transport <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
