<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>library-combo: Gnustep make support for cross-compilation.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Gnustep make support for cross-compilation.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="library-combo (7) manual">
  <meta name="twitter:description" content="Gnustep make support for cross-compilation.">
  <meta name="twitter:image" content="https://www.carta.tech/images/gnustep-common-library-combo-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/library-combo.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="library-combo (7) manual" />
  <meta property="og:description" content="Gnustep make support for cross-compilation." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gnustep-common-library-combo-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">library-combo<small> (7)</small></h1>
        <p class="lead">Gnustep make support for cross-compilation.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/library-combo.7.html">
      <span itemprop="name">library-combo: Gnustep make support for cross-compilation.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gnustep-common/">
      <span itemprop="name">gnustep-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/library-combo.7.html">
      <span itemprop="name">library-combo: Gnustep make support for cross-compilation.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This manual page is about cross-compilation and fat binaries. Fat binaries are packages that you can supply which contain more the one binary of your program (e.g. your application). So you can support multiple platforms with a single package.</p><p>To support this your system has to be built in a non-flattened way. Meaning that during the installation of <em>gnustep-make</em> you should have selected <strong>--disable-flattened</strong> and the types of library combinations you want to support, through the <strong>--with-library-combo</strong> option. With library combinations we mean the Objective-C runtime, the Foundation library and the Application library. For more details about this see the LIBRARY-COMBO section.</p><p>If you installed your <strong>GNUstep</strong> system in a non-flattened way all system dependend binaries are installed in subdirectories with <em>cpu/os/library-combo</em> information. That means for instance that the <em>gnustep-base</em> library will be installed in <em>Library/Libraries/ix86/linux/gnu-gnu-gnu/</em> when you are on an Intel x86 system, running linux with the <small>GNU</small> runtime for Objective-C and you installed <strong>GNUstep</strong>.</p><p>For each and every library-combo that you want to support you should create the environment through <em>gnustep-make</em>, because it installs a different <em>config.make</em> to support its own <strong>CC</strong>, <strong>OPTFLAGS</strong>, etc. flags.</p><h3>LIBRARY-COMBO</h3>
<p>An important issue is to let to a package the ability to deal with various libraries and configurations available now:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Objective-C runtimes</strong></p>
  </dt>
  <dd>
    <p>In the Objective-C world there are three major runtimes: the NeXT runtime, the Apple runtime and the <small>GNU</small> runtime (both with and without garbage collection enabled). They are different in several respects and a program or library that works at the runtime level should be aware of them.</p>
  </dd>
  <dt>
    <p><strong>Foundation libraries</strong></p>
  </dt>
  <dd>
    <p>There are several Foundation libraries an application or tool can be written on top of: NeXT Foundation library which runs on NeXTStep/OPENSTEP systems, gnustep-base, libFoundation and Apple Cocoa system.</p>
  </dd>
  <dt>
    <p><strong>Graphical interfaces</strong></p>
  </dt>
  <dd>
    <p>Until now three libraries provide or try to provide OpenStep compliant systems: the AppKit from NeXT, gnustep-gui and Cocoa from Apple.</p>
  </dd>

</dl>
<p>If a program wants to work with all the possible combinations it will have to provide different binaries for each combination because it's not possible to have a tool compiled for NeXT Foundation that runs with gnustep-base or vice-versa. To summarize, a program can be compiled for these combinations:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Objective-C runtime</strong></p>
  </dt>
  <dd>
    <p>nx (for NeXT), gnu (for <small>GNU</small> without garbage collection), gnugc (for <small>GNU</small> with garbage collection), apple (for Apple)</p>
  </dd>
  <dt>
    <p><strong>Foundation library</strong></p>
  </dt>
  <dd>
    <p>nx (for NeXT), gnu (for gnustep-base), fd (for libFoundation), apple (for Apple Cocoa)</p>
  </dd>
  <dt>
    <p><strong>GUI library</strong></p>
  </dt>
  <dd>
    <p>nx (for NeXT), gnu (for gnustep-gui), apple (for Apple Cocoa)</p>
  </dd>

</dl>
<p>We'll denote the fact that an application was compiled for a certain combination of the above values by using the abbreviations of the different subsystems and placing dashes between them. For example an application compiled for NeXT Foundation using NeXT AppKit will have the compile attribute nx-nx-nx. An application compiled for Apple Cocoa with the <small>GNU</small> compiler for Objective-C gnu-apple-apple and another one compiled for <em>gnustep-base</em> using <em>gnustep-gui</em> under Unix will be denoted by gnu-gnu-gnu. Here is a list of some of the possible combinations:</p>
<pre>
   Runtime	Foundation	GUI
</pre>

<pre>
     nx		    nx		nx
</pre>

<pre>
     nx		    fd		gnu
</pre>

<pre>
     gnu		    gnu		gnu
</pre>

<pre>
     gnu		    fd		gnu
</pre>

<pre>
    gnugc		    gnu		gnu
</pre>

<pre>
    gnugc		    fd		gnu
</pre>

<pre>
    apple		   apple		apple
</pre>

<pre>
    apple		    gnu		gnu
</pre>
<p>Note that one can choose his/her own packages to build; it is not required to have all the packages installed on the system. Not having all of them installed limits only the ability to build and distribute binaries for those missing combinations.</p>
<h3>DIRECTORY STRUCTURE</h3>
<p>For cross-compilation in a non-flattened directory structure is recommended, so that you can store on the same directory structure binaries for different machines.  The standard <strong>GNUstep</strong> filesystem layout is normally used when a non-flattened directory structure is being used; this is obtained with the <strong>--with-layout=</strong><em>gnustep</em> option when configuring <em>gnustep-make</em>. The entire <strong>GNUstep</strong> installation is then created inside <em>/usr/GNUstep</em> (or another directory if you use the <strong>--prefix=...</strong> option when configuring <em>gnustep-make</em>). Directories that contain binaries (such as the <em>Libraries</em> directory) inside <em>/usr/GNUstep</em> are then set up to support fat binaries as follows:</p><p>Libraries/</p>
<pre>
  ix86/
</pre>

<pre>
    linux-gnu/
</pre>

<pre>
      gnu-gnu-gnu/
</pre>
<p>		libgnustep-base.so</p><p>		libgnustep-gui.so</p>
<pre>
      gnu-fd-gnu/
</pre>
<p>		libFoundation.so</p><p>		libgnustep-gui.so</p><p>To allow the right libraries to be found, you need to source <em>GNUstep.sh</em> before using <strong>GNUstep</strong>, and you need to start up your application by using <strong>openapp</strong>, which will locate the right binary for your library combo.</p>
<h3>BUILDING FOR A LIBRARY-COMBO</h3>
<p>The makefile package will allow the user to choose between different library combinations. To specify a combination you want to compile for just type:</p>
<pre>
  $ make library_combo=library-combo
</pre>
<p>For instance if you want to choose to compile using the GNUstep's Foundation implementation and use the GNUstep GUI library on a GNU/Linux machine you can do like this:</p>
<pre>
  $ make library_combo=gnu-gnu-gnu
</pre>
<p>If your project requires running configure before compiling there are two issues you have to keep in mind. 'configure' is used to determine the existence of particular header files and/or of some specific functionality in the system header files. This thing is usually done by creating a config.h file which contains a couple of defines like HAVE_... which say if the checked functionality is present or not.</p><p>Another usage of configure is to determine some specific libraries to link against to and/or some specific tools. A typical <strong>GNUstep</strong> program is not required to check for additional libraries because this step is done by the time the makefile package is installed. If the project still needs to check for additional libraries and/or tools, the recommended way is to output a <em>config.mak</em> file which is included by the main <em>GNUmakefile</em>, instead of using <em>Makefile.in</em> files which are modified by <em>configure</em>. The reason for not doing this is to avoid having the makefiles contain target dependencies like above, this way keeping only one makefile instead of several for each target machine.</p><p>The makefile package is written for <small>GNU</small> make because it provides some very powerful features that save time both in writing the package but also at runtime, when you compile a project.</p>
<h3>BUILDING FOR AN ARCHITECTURE</h3>
<p>In order to build a project for multiple architectures you'll need the development environment for the target machine installed on your machine. This includes a cross-compiler together with all the additional tools like the assembler and linker, the target header files and all the libraries you need.</p><p>The <strong>GNUstep</strong> makefile package should be able to compile and link an application for another machine just by typing</p>
<pre>
  $ make target=target-triplet
</pre>
<p>where target-triplet is the canonical system name as reported by <em>config.guess</em>.</p>
<h3>USING A LIBRARY-COMBO</h3>
<p>When you use library-combos, you must always source <em>GNUstep.sh</em>. That allows you to switch library paths on the fly. If you want to switch to a different library-combo in your shell, and if you are using <strong>bash</strong>, it's common to first source <em>GNUstep-reset.sh</em> to reset all shell variables, then to source <strong>GNUstep.sh</strong> again. Let's assume we use gnu-gnu-gnu as our current <strong>LIBRARY_COMBO</strong> and we want to switch to gnugc-gnu-gnu, then we would use:</p>
<pre>
  . /usr/GNUstep/System/Library/Makefiles/GNUstep-reset.sh
</pre>

<pre>
  export LIBRARY_COMBO=gnugc-gnu-gnu
</pre>

<pre>
  . /usr/GNUstep/System/Library/Makefiles/GNUstep.sh
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO library-combo&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/debugapp.1.html"><strong>debugapp</strong>(1)</a>, <a href="../man7/GNUstep.7.html"><strong>GNUstep</strong>(7)</a>, <a href="../man1/gnustep-config.1.html"><strong>gnustep-config</strong>(1)</a>, <a href="../man1/openapp.1.html"><strong>openapp</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>Work on gnustep-make started in 1997 by Scott Christley &lt;scottc@net-community.com&gt;.</p><p>Version 2.0.0 of gnustep-make introduced many changes with previous releases, which was mainly the work of Nicola Pero &lt;nicola.pero@meta-innovation.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>This man-page was written by Dennis Leeuw &lt;dleeuw@made-it.com&gt; based on the DESIGN document from the gnustep-make source tree.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREDITS</h2>
        <div class="sectioncontent">
<p>The DESIGN document was written by Ovidiu Predescu.</p><p>This work could only be as is due to the notes and corrects from Nicola Pero &lt;nicola.pero@meta-innovation.com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2007 Free Software Foundation, Inc.</p><p>Copying and distribution of this file, with or without modification, are permitted in any medium without royalty provided the copyright notice and this notice are preserved.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="libquvi-scripts.7.html"><span aria-hidden="true">&larr;</span> libquvi-scripts.7: Overview of query media library scripts</a></li>
   <li class="next"><a href="libroar.7.html">libroar.7: Roaraudio sound library <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
