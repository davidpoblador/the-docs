<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>uves_cal_mflat: Creates the master flat field frame</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Creates the master flat field frame">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="uves_cal_mflat (7) manual">
  <meta name="twitter:description" content="Creates the master flat field frame">
  <meta name="twitter:image" content="https://www.carta.tech/images/cpl-plugin-uves-doc-uves_cal_mflat-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/uves_cal_mflat.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="uves_cal_mflat (7) manual" />
  <meta property="og:description" content="Creates the master flat field frame" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cpl-plugin-uves-doc-uves_cal_mflat-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">uves_cal_mflat<small> (7)</small></h1>
        <p class="lead">Creates the master flat field frame</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/uves_cal_mflat.7.html">
      <span itemprop="name">uves_cal_mflat: Creates the master flat field frame</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cpl-plugin-uves-doc/">
      <span itemprop="name">cpl-plugin-uves-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/uves_cal_mflat.7.html">
      <span itemprop="name">uves_cal_mflat: Creates the master flat field frame</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>esorex <strong>uves_cal_mflat</strong> [OPTIONS] FILE.sof</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This recipe creates a master flat frame by 1) subtracting the master bias frame from each flat field frame, 2) dividing each flat field frame by the  exposure time for that frame, 3) taking the median of all bias subtracted,  normalized raw  flat frames, 4) optionally subtracting the master dark frame, and 5) subtracting  the background to get the bias subtracted, optionally dark subtracted, normalized, background subtracted master flat-field frame. Symbolically,  masterflat = median( (flat_i - masterbias)/exptime_i ) - masterdark/exptime</p>
<pre>
            - background.
</pre>
<p>The input flat field frames must have same tag which must match (I|D|S|T|SCREEN|)FLAT_(BLUE|RED), for example TFLAT_BLUE or FLAT_RED. Also, a master bias (MASTER_BIAS_xxxx) and ordertable (ORDER_TABLE_xxxx) must be provided for each chip (xxxx = BLUE, REDL, REDU). A master dark frame (MASTER_(P)DARK_xxxx) may optionally be provided. On blue input the recipe computes one master flat field frame; on red input the recipe produces a master flat field frame for each chip (MASTER_FLAT_xxxx, MASTER_IFLAT_xxxx, MASTER_DFLAT_xxxx, MASTER_TFLAT_xxxx or MASTER_SCREEN_FLAT_xxxx).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--debug</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Whether or not to save intermediate results to local directory (bool; default: False). The full name of this option for the EsoRex configuration file is <strong>uves.debug</strong> [default = <em>False</em>].</p>
  </dd>
  <dt>
    <p><strong>--plotter</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Any plots produced by the recipe are redirected to the command specified by this parameter. The plotting command must contain the substring \'gnuplot\' and must be able to parse gnuplot syntax on its standard input. Valid examples of such a command may include \'gnuplot -persist\' and \'cat &gt; mygnuplot$$.gp\'. A finer control of the plotting options can be obtained by writing an executable script, e.g. my_gnuplot.pl, that executes gnuplot after setting the desired gnuplot options (e.g. set terminal pslatex color). To turn off plotting, set this parameter to \'no\' (str; default: \'no\'). The full name of this option for the EsoRex configuration file is <strong>uves.plotter</strong> [default = <em>no</em>].</p>
  </dd>
  <dt>
    <p><strong>--process_chip</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>For RED arm data process the redl, redu, or both chip(s) (str; default: \'both\'). The full name of this option for the EsoRex configuration file is <strong>uves.process_chip</strong> [default = <em>both</em>].</p>
  </dd>
  <dt>
    <p><strong>--norm_method</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Method used to build master frame  (str; default: \'explevel\'). The full name of this option for the EsoRex configuration file is <strong>uves_cal_mflat.norm_method</strong> [default = <em>explevel</em>].</p>
  </dd>
  <dt>
    <p><strong>--backsub.mmethod</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Background measuring method. If equal to \'median\' the background is sampled using the median of a subwindow. If \'minimum\', the subwindow minimum value is used. If \'no\', no background subtraction is done. (str; default: \'median\'). The full name of this option for the EsoRex configuration file is <strong>uves_cal_mflat.backsub.mmethod</strong> [default = <em>median</em>].</p>
  </dd>
  <dt>
    <p><strong>--backsub.npoints</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>This is the number of columns in interorder space used to sample the background. (long; default: 82). The full name of this option for the EsoRex configuration file is <strong>uves_cal_mflat.backsub.npoints</strong> [default = <em>82</em>].</p>
  </dd>
  <dt>
    <p><strong>--backsub.radiusy</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>The height (in pixels) of the background sampling window is (2*radiusy + 1). This parameter is not corrected for binning. (long; default: 2). The full name of this option for the EsoRex configuration file is <strong>uves_cal_mflat.backsub.radiusy</strong> [default = <em>2</em>].</p>
  </dd>
  <dt>
    <p><strong>--backsub.sdegree</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>Degree of interpolating splines. Currently only degree = 1 is supported (long; default: 1). The full name of this option for the EsoRex configuration file is <strong>uves_cal_mflat.backsub.sdegree</strong> [default = <em>1</em>].</p>
  </dd>
  <dt>
    <p><strong>--backsub.smoothx</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>If spline interpolation is used to measure the background, the x-radius of the post-smoothing window is (smoothx * image_width). Here, \'image_width\' is the image width after binning. If negative, the default values are used: (25.0/4096) for blue flat-field frames, (50.0/4096) for red flat-field frames, (300.0/4096) for blue science frames and (300.0/4096) for red science frames. (float; default: -1.0). The full name of this option for the EsoRex configuration file is <strong>uves_cal_mflat.backsub.smoothx</strong> [default = <em>-1.0</em>].</p>
  </dd>
  <dt>
    <p><strong>--backsub.smoothy</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>If spline interpolation is used to measure the background, the y-radius of the post-smoothing window is (smoothy * image_height). Here, \'image_height\' is the image height after binning. If negative, the default values are used: (100.0/2048) for blue flat-field frames, (300.0/2048) for red flat-field frames, (200.0/2048) for blue science frames and (500.0/2048) for red science frames. (float; default: -1.0). The full name of this option for the EsoRex configuration file is <strong>uves_cal_mflat.backsub.smoothy</strong> [default = <em>-1.0</em>].</p>
  </dd>

</dl>
<p>Note that it is possible to create a configuration file containing these options, along with suitable default values. Please refer to the details provided by the 'esorex --help' command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO uves_cal_mflat&hellip;</h2>
        <div class="sectioncontent">
<p>The full documentation for the uves pipeline can be downloaded as a PDF file using the following URL:</p><ul>
<li><p><strong>ftp://ftp.eso.org/pub/dfs/pipelines/uves/uves-pipeline-manual-5.4.3.pdf</strong></p></li>
</ul><p>An overview over the existing ESO pipelines can be found on the web page <strong>http://www.eso.org/sci/software/pipelines/</strong>.</p><p>Basic documentation about the EsoRex program can be found at the esorex (1) man page.</p><p>It is possible to call the pipelines from python using the python-cpl package. See <strong>http://packages.python.org/python-cpl/index.html</strong> for further information.</p><p>The other recipes of the uves pipeline are <a href="../man7/uves_cal_response.7.html"><strong>uves_cal_response</strong>(7)</a>, <a href="../man7/uves_cal_mflat_combine.7.html"><strong>uves_cal_mflat_combine</strong>(7)</a>, <a href="../man7/flames_utl_unpack.7.html"><strong>flames_utl_unpack</strong>(7)</a>, <a href="../man7/flames_cal_wavecal.7.html"><strong>flames_cal_wavecal</strong>(7)</a>, <a href="../man7/uves_cal_mkmaster.7.html"><strong>uves_cal_mkmaster</strong>(7)</a>, <a href="../man7/flames_obs_redchain.7.html"><strong>flames_obs_redchain</strong>(7)</a>, <a href="../man7/uves_cal_wavecal.7.html"><strong>uves_cal_wavecal</strong>(7)</a>, <a href="../man7/uves_cal_tflat.7.html"><strong>uves_cal_tflat</strong>(7)</a>, <a href="../man7/flames_cal_prep_sff_ofpos.7.html"><strong>flames_cal_prep_sff_ofpos</strong>(7)</a>, <a href="../man7/uves_utl_remove_crh_single.7.html"><strong>uves_utl_remove_crh_single</strong>(7)</a>, <a href="../man7/uves_obs_scired.7.html"><strong>uves_obs_scired</strong>(7)</a>, <a href="../man7/uves_cal_mbias.7.html"><strong>uves_cal_mbias</strong>(7)</a>, <a href="../man7/uves_utl_ima_arith.7.html"><strong>uves_utl_ima_arith</strong>(7)</a>, <a href="../man7/flames_obs_scired.7.html"><strong>flames_obs_scired</strong>(7)</a>, <a href="../man7/uves_cal_orderpos.7.html"><strong>uves_cal_orderpos</strong>(7)</a>, <a href="../man7/flames_cal_mkmaster.7.html"><strong>flames_cal_mkmaster</strong>(7)</a>, <a href="../man7/flames_cal_predict.7.html"><strong>flames_cal_predict</strong>(7)</a>, <a href="../man7/uves_cal_mdark.7.html"><strong>uves_cal_mdark</strong>(7)</a>, <a href="../man7/uves_cal_cd_align.7.html"><strong>uves_cal_cd_align</strong>(7)</a>, <a href="../man7/uves_obs_redchain.7.html"><strong>uves_obs_redchain</strong>(7)</a>, <a href="../man7/flames_cal_orderpos.7.html"><strong>flames_cal_orderpos</strong>(7)</a>, <a href="../man7/uves_cal_predict.7.html"><strong>uves_cal_predict</strong>(7)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>uves_cal_mflat 5.4.3</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Jonas M. Larsen &lt;cpl@eso.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUG REPORTS</h2>
        <div class="sectioncontent">
<p>Please report any problems to cpl@eso.org. Alternatively, you may send a report to the ESO User Support Department &lt;usd-help@eso.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This file is part of the FLAMES/UVES Pipeline Copyright (C) 2004, 2005, 2006, 2007 European Southern Observatory</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02111-1307  USA</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="uves_cal_mdark.7.html"><span aria-hidden="true">&larr;</span> uves_cal_mdark.7: Creates the master dark frame</a></li>
   <li class="next"><a href="uves_cal_mflat_combine.7.html">uves_cal_mflat_combine.7: Combines the master flat field and the master dflat frames <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
