<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fetchfile: O-saft / fetchfile</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="O-saft / fetchfile">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fetchfile (7) manual">
  <meta name="twitter:description" content="O-saft / fetchfile">
  <meta name="twitter:image" content="https://www.carta.tech/images/sendfile-fetchfile-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/fetchfile.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fetchfile (7) manual" />
  <meta property="og:description" content="O-saft / fetchfile" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/sendfile-fetchfile-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fetchfile<small> (7)</small></h1>
        <p class="lead">O-saft / fetchfile</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/fetchfile.7.html">
      <span itemprop="name">fetchfile: O-saft / fetchfile</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/sendfile/">
      <span itemprop="name">sendfile</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/fetchfile.7.html">
      <span itemprop="name">fetchfile: O-saft / fetchfile</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<h3>Introduction</h3>
<p>With the server protocol extension O-SAFT (Offer Simple Asynchronous File Transfer) and the matching client fetchfile there is an easy method of retrieving files from a SAFT server. This is a direct analogy to the SMTP and POP or APOP protocol suite in the world of e-mail transfer.</p><p>Overview:</p><p> - How does O-SAFT/fetchfile work? <strong></strong>  - What to do on the client side? <strong></strong>  - What to do on the server side? <strong></strong>  - How about security issues? <strong></strong></p>
<h3>How does O-SAFT/fetchfile work?</h3>
<p>O-SAFT is an extension to the existing SAFT protocol and allows athenticated clients to retrieve files from a (remote) server. The implemention is the server sendfiled and the client fetchfile.</p><p>O-SAFT uses a dedicated pgp key pair to authenticate the fetchfile session. The private key will be kept on the client side, the public key must tbe present at the server side. For security reasons this will NOT be your regular e-mail pgp key pair, but a separate pair of pgp keys, uniquely assigned for fetchfile transfers. You will have to create a pair of pgp keys for this purpose befor using the fetchfile client for the first time (see below).</p><p>Fetchfile can provide a directory listing of available files from the server, retrieve files or delete files. After retrieving a file, it will be placed in the regular spool directory, not in the current directory! You will have to use the receive command to transfer the files from the spool directory to your current directory afterwards.</p><p>If there already exists a regular sendfile spool directory /var/spool/sendfile on the client side it will be used, otherwise a $HOME/.sfspool will be created. Fetchfile will be running without using root permissions on the client side.</p>
<h3>What to do on the client side?</h3>
<p>You must have pgp-2.6.x installed and the binaries must be available through your $PATH environment variable.</p><p>First, and ONLY ONCE before using fetchfile the very first time, you have to create a fetchfile pgp key pair (only pgp-2.6.x is supported!):</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>fetchfile -I</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>Please only hit 'ENTER' when being asked for a pass phrase! This will create a special non-passphrase protected key pair for O-SAFT.</p><p>After this initialization you will have a file /var/spool/sendfile/$USER/config/public.pgp resp. $HOME/.sfspool/public.pgp</p><p>Please send this file to root@SAFT-server, who has to save this public key file into the appropiate user configuration directory.</p><p>Example:</p><p><strong>sendfile -c 'my O-SAFT puplic key'</strong> <strong>/var/spool/sendfile/$USER/config/public.pgp root@bofh.belwue.de</strong></p><p>(This prelimary action will enable you to use the SAFT server and will prevent othes from abusing your name or SAFT-account on the server.)</p><p>After preparing the pgp keys an both sides, you can invoke fetchfile on a regular basis:</p>
<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>fetchfile -l</strong></p>
  </dt>
  <dd>
    <p>list files on the server</p>
  </dd>
  <dt>
    <p><strong>fetchfile -a</strong></p>
  </dt>
  <dd>
    <p>retrieve all files from server</p>
  </dd>
  <dt>
    <p><strong>fetchfile -daf *aol.com</strong></p>
  </dt>
  <dd>
    <p>delete all files from the AOL domain</p>
  </dd>

</dl>
<p>There is a detailed description of all capabilities in the <a href="../man1/fetchfile.1.html"><strong>fetchfile</strong>(1)</a> man page.</p><p>For configuring the server SAFT account by the client user there are two options:</p>
<pre>
	fetchfile -Cw=config
	fetchfile -Cw=restrictions
</pre>
<p>Using this the two local configuration files will be transfered from the local current directory to the SAFT server. The details of the configuration can be found in the <strong>sendfile</strong>(1) man page.</p><p>With using</p>
<pre>
	fetchfile -Cr=config
	fetchfile -Cr=restrictions
</pre>
<p>the files will be retrieved back and will be displayed to STDOUT.</p>
<h3>What to do on the server side?</h3>
<p>pgp-2.6.x must be installed. The system adminsitrator needs to run <strong>sfdconf -e config</strong> add set the following option:</p>
<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>fetchfile = on</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>The system administrator must create a user account (if it does not yet exist). This account does not need an interactive login shell and does not need a valid password; the login shell could be /bin/false. The only purpose is to enable the sendfiled to check out the user and to create a local spool directory (this method is well known for creating POP mail accounts).</p><p>The client user will create the initial pgp key pair and the public key (public.pgp) will be sent to the system administrator of the server. This key has to be placed into the config directory for the particular user. Assuming the user name is bozo, the system administrator will have to type the following (under root permissions):</p>
<pre>
	receive -f bozo@* -b bozo public.pgp
	su bozo
	cd /var/spool/sendfile/bozo/config
	receive public.pgp
</pre>
<p>(the first receive resends the file public.pgp from the sender bozo@* to the  local user bozo)</p>
<h3>How about security issues?</h3>
<p>O-SAFT uses a tcp challenge/response authentication with a pgp signature. This opens the possibility that the session can be attacked through tcp hijacking. We are well aware of this, but tcp hijacking is not easy and only possible if the attacker has direct access to the transport media (e.g. listening on the same ethernet cable/segment) and has access to a set of pretty nice cracker tools. With regular operating system supplied software it is not possible to attack a session.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fetchfile&hellip;</h2>
        <div class="sectioncontent">
<p><strong>sendfile</strong>(1), <a href="../man1/fetchfile.1.html"><strong>fetchfile</strong>(1)</a>, <strong>sendfiled</strong>(8).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Ulli Horlacher  -  framstag@rus.uni-stuttgart.de</p><p>translated by andreas@citecs.de</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="feature_test_macros.7.html"><span aria-hidden="true">&larr;</span> feature_test_macros.7: Feature test macros</a></li>
   <li class="next"><a href="fifo.7.html">fifo.7: First-in first-out special file, named pipe <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
