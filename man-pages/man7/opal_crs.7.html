<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>opal_crs: Open pal mca checkpoint/restart service (crs): overview of open pal's crs framework, and selected modules.  open mpi 1.6.5.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Open pal mca checkpoint/restart service (crs): overview of open pal's crs framework, and selected modules.  open mpi 1.6.5.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="opal_crs (7) manual">
  <meta name="twitter:description" content="Open pal mca checkpoint/restart service (crs): overview of open pal's crs framework, and selected modules.  open mpi 1.6.5.">
  <meta name="twitter:image" content="https://www.carta.tech/images/openmpi-checkpoint-opal_crs-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/opal_crs.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="opal_crs (7) manual" />
  <meta property="og:description" content="Open pal mca checkpoint/restart service (crs): overview of open pal's crs framework, and selected modules.  open mpi 1.6.5." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/openmpi-checkpoint-opal_crs-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">opal_crs<small> (7)</small></h1>
        <p class="lead">Open pal mca checkpoint/restart service (crs): overview of open pal's crs framework, and selected modules.  open mpi 1.6.5.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/opal_crs.7.html">
      <span itemprop="name">opal_crs: Open pal mca checkpoint/restart service (crs): overview of open pal's crs framework, and selected modules.  open mpi 1.6.5.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/openmpi-checkpoint/">
      <span itemprop="name">openmpi-checkpoint</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/opal_crs.7.html">
      <span itemprop="name">opal_crs: Open pal mca checkpoint/restart service (crs): overview of open pal's crs framework, and selected modules.  open mpi 1.6.5.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Open PAL can involuntarily checkpoint and restart sequential programs. Doing so requires that Open PAL was compiled with thread support and that the back-end checkpointing systems are available at run-time.</p><h3>Phases of Checkpoint / Restart</h3>
<p>Open PAL defines three phases for checkpoint / restart support in a procress:</p>
<dl class='dl-vertical'>
  <dt>
    <p>Checkpoint</p>
  </dt>
  <dd>
    <p>When the checkpoint request arrives, the procress is notified of the request before the checkpoint is taken.</p>
  </dd>
  <dt>
    <p>Continue</p>
  </dt>
  <dd>
    <p>After a checkpoint has successfully completed, the same process as the checkpoint is notified of its successful continuation of execution.</p>
  </dd>
  <dt>
    <p>Restart</p>
  </dt>
  <dd>
    <p>After a checkpoint has successfully completed, a new / restarted process is notified of its successful restart.</p>
  </dd>

</dl>
<p>The Continue and Restart phases are identical except for the process in which they are invoked. The Continue phase is invoked in the same process as the Checkpoint phase was invoked. The Restart phase is only invoked in newly restarted processes.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERAL PROCESS REQUIREMENTS</h2>
        <div class="sectioncontent">
<p>In order for a process to use the Open PAL CRS components it must adhear to a few programmatic requirements.</p><p>First, the program must call <em>OPAL_INIT</em> early in its execution. This should only be called once, and it is not possible to checkpoint the process without it first having called this function.</p><p>The program must call <em>OPAL_FINALIZE</em> before termination. This does a significant amount of cleanup. If it is not called, then it is very likely that remnants are left in the filesystem.</p><p>To checkpoint and restart a process you must use the Open PAL tools to do so. Using the backend checkpointer's checkpoint and restart tools will lead to undefined behavior. To checkpoint a process use <em>opal_checkpoint</em> (<strong>opal_checkpoint</strong>(1)). To restart a process use <em>opal_restart</em> (<strong>opal_restart</strong>(1)).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABLE COMPONENTS</h2>
        <div class="sectioncontent">
<p>Open PAL ships with two CRS components: <em>self</em> and <em>blcr</em>.</p><p>The following MCA parameters apply to all components:</p>
<dl class='dl-vertical'>
  <dt>
    <p>crs_base_verbose</p>
  </dt>
  <dd>
    <p>Set the verbosity level for all components. Default is 0, or silent except on error.</p>
  </dd>
  <dt>
    <p>crs_base_snapshot_dir</p>
  </dt>
  <dd>
    <p>The directory to store the checkpoint snapshots. Default is <strong>/tmp</strong>.</p>
  </dd>

</dl>
<h3>self CRS Component</h3>
<p>The <em>self</em> component invokes user-defined functions to save and restore checkpoints. It is simply a mechanism for user-defined functions to be invoked at Open PAL's Checkpoint, Continue, and Restart phases. Hence, the only data that is saved during the checkpoint is what is written in the user's checkpoint function. No libary state is saved at all.</p><p>As such, the model for the <em>self</em> component is slightly differnt than for other components. Specifically, the Restart function is not invoked in the same process image of the process that was checkpointed. The Restart phase is invoked during <strong>OPAL_INIT</strong> of the new instance of the applicaiton (i.e., it starts over from main()).</p><p>The <em>self</em> component has the following MCA parameters:</p>
<dl class='dl-vertical'>
  <dt>
    <p>crs_self_prefix</p>
  </dt>
  <dd>
    <p>Speficy a string prefix for the name of the checkpoint, continue, and restart functions that Open PAL will invoke during the respective stages. That is, by specifying "-mca crs_self_prefix foo" means that Open PAL expects to find three functions at run-time:</p>
<pre>
   int foo_checkpoint()
</pre>

<pre>
   int foo_continue()
</pre>

<pre>
   int foo_restart()
</pre>
<p>By default, the prefix is set to "opal_crs_self_user".</p>
  </dd>
  <dt>
    <p>crs_self_priority</p>
  </dt>
  <dd>
    <p>Set the <em>self</em> components default priority</p>
  </dd>
  <dt>
    <p>crs_self_verbose</p>
  </dt>
  <dd>
    <p>Set the verbosity level. Default is 0, or silent except on error.</p>
  </dd>
  <dt>
    <p>crs_self_do_restart</p>
  </dt>
  <dd>
    <p>This is mostly internally used. A general user should never need to set this value. This is set to non-0 when a the new process should invoke the restart callback in <em>OPAL_INIT</em>. Default is 0, or normal execution.</p>
  </dd>

</dl>

<h3>blcr CRS Component</h3>
<p>The Berkeley Lab Checkpoint/Restart (BLCR) single-process checkpoint is a software system developed at Lawrence Berkeley National Laboratory. See the project website for more details:</p>
<pre>
   <em> http://ftg.lbl.gov/CheckpointRestart/CheckpointRestart.shtml </em>
</pre>
<p>The <em>blcr</em> component has the following MCA parameters:</p>
<dl class='dl-vertical'>
  <dt>
    <p>crs_blcr_priority</p>
  </dt>
  <dd>
    <p>Set the <em>blcr</em> components default priority.</p>
  </dd>
  <dt>
    <p>crs_blcr_verbose</p>
  </dt>
  <dd>
    <p>Set the verbosity level. Default is 0, or silent except on error.</p>
  </dd>

</dl>

<h3>none CRS Component</h3>
<p>The <em>none</em> component simply selects no CRS component. All of the CRS function calls return immediately with OPAL_SUCCESS.</p><p>This component is the last component to be selected by default. This means that if another component is available, and the <em>none</em> component was not explicity requested then OPAL will attempt to activate all of the available components before falling back to this component.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO opal_crs&hellip;</h2>
        <div class="sectioncontent">

<pre>
  <strong>opal_checkpoint</strong>(1), <strong>opal_restart</strong>(1)
</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ompi_crcp.7.html"><span aria-hidden="true">&larr;</span> ompi_crcp.7: Open mpi mca checkpoint/restart coordination protocol (crcp) framework: overview of open mpi's crcp framework, and selected modules.  open mpi 1.6.5</a></li>
   <li class="next"><a href="opencryptoki.7.html">opencryptoki.7: A pkcs#11 implementation. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
