<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>libmodbus: A fast and portable modbus library</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A fast and portable modbus library">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="libmodbus (7) manual">
  <meta name="twitter:description" content="A fast and portable modbus library">
  <meta name="twitter:image" content="https://www.carta.tech/images/libmodbus-dev-libmodbus-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/libmodbus.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="libmodbus (7) manual" />
  <meta property="og:description" content="A fast and portable modbus library" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libmodbus-dev-libmodbus-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">libmodbus<small> (7)</small></h1>
        <p class="lead">A fast and portable modbus library</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/libmodbus.7.html">
      <span itemprop="name">libmodbus: A fast and portable modbus library</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libmodbus-dev/">
      <span itemprop="name">libmodbus-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/libmodbus.7.html">
      <span itemprop="name">libmodbus: A fast and portable modbus library</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;modbus.h&gt;</strong></p><p><strong>cc</strong> `pkg-config --cflags --libs libmodbus` <em>files</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>libmodbus is a library to send/receive data with a device which respects the Modbus protocol. This library contains various backends to communicate over different networks (eg. serial in RTU mode or Ethernet in TCP/IPv6). The \m[blue]<strong>http://www.modbus.org</strong>\m[] site provides documentation about the protocol at \m[blue]<strong>http://www.modbus.org/specs.php</strong>\m[].</p><p>libmodbus provides an abstraction of the lower communication layers and offers the same API on all supported platforms.</p><p>This documentation presents an overview of libmodbus concepts, describes how libmodbus abstracts Modbus communication with different hardware and platforms and provides a reference manual for the functions provided by the libmodbus library.</p><h3>Contexts</h3>
<p>The Modbus protocol contains many variants (eg. serial RTU or Ehternet TCP), to ease the implementation of a variant, the library was designed to use a backend for each variant. The backends are also a convenient way to fulfill other requirements (eg. real-time operations). Each backend offers a specific function to create a new <em>modbus_t</em> context. The <em>modbus_t</em> context is an opaque structure containing all necessary information to establish a connection with others Modbus devices according to the selected variant.</p><p>You can choose the best context for your needs among:</p><p><strong>RTU Context</strong></p><p>The RTU backend (Remote Terminal Unit) is used in serial communication and makes use of a compact, binary representation of the data for protocol communication. The RTU format follows the commands/data with a cyclic redundancy check checksum as an error check mechanism to ensure the reliability of data. Modbus RTU is the most common implementation available for Modbus. A Modbus RTU message must be transmitted continuously without inter-character hesitations (extract from Wikipedia, Modbus, \m[blue]<strong>http://en.wikipedia.org/wiki/Modbus</strong>\m[] (as of Mar. 13, 2011, 20:51 GMT).</p><p>The Modbus RTU framing calls a slave, a device/service which handle Modbus requests, and a master, a client which send requests. The communication is always initiated by the master.</p><p>Many Modbus devices can be connected together on the same physical link so you need to define which slave is concerned by the message with <a href="../man3/modbus_set_slave.3.html"><strong>modbus_set_slave</strong>(3)</a>. If you\(cqre running a slave, the slave number is used to filter messages.</p><p>Create a Modbus RTU context</p><p><a href="../man3/modbus_new_rtu.3.html"><strong>modbus_new_rtu</strong>(3)</a></p><p>Set the serial mode</p><p><a href="../man3/modbus_rtu_get_serial_mode.3.html"><strong>modbus_rtu_get_serial_mode</strong>(3)</a></p><p><a href="../man3/modbus_rtu_set_serial_mode.3.html"><strong>modbus_rtu_set_serial_mode</strong>(3)</a></p><p><strong>TCP (IPv4) Context</strong></p><p>The TCP backend implements a Modbus variant used for communications over TCP/IPv4 networks. It does not require a checksum calculation as lower layer takes care of the same.</p><p>Create a Modbus TCP context</p><p><a href="../man3/modbus_new_tcp.3.html"><strong>modbus_new_tcp</strong>(3)</a></p><p><strong>TCP PI (IPv4 and IPv6) Context</strong></p><p>The TCP PI (Protocol Indepedent) backend implements a Modbus variant used for communications over TCP IPv4 and IPv6 networks. It does not require a checksum calculation as lower layer takes care of the same.</p><p>Contrary to the TCP IPv4 only backend, the TCP PI backend offers hostname resolution but it consumes about 1Kb of additional memory.</p><p>Create a Modbus TCP context</p><p><a href="../man3/modbus_new_tcp_pi.3.html"><strong>modbus_new_tcp_pi</strong>(3)</a></p><p><strong>Common</strong></p><p>Before using any libmodbus functions, the caller must allocate and initialize a <em>modbus_t</em> context with functions explained above, then the following functions are provided to modify and free a <em>context</em>:</p><p>Free libmodbus context</p><p><a href="../man3/modbus_free.3.html"><strong>modbus_free</strong>(3)</a></p><p>Context setters and getters</p><p><a href="../man3/modbus_get_byte_timeout.3.html"><strong>modbus_get_byte_timeout</strong>(3)</a></p><p><a href="../man3/modbus_set_byte_timeout.3.html"><strong>modbus_set_byte_timeout</strong>(3)</a></p><p><a href="../man3/modbus_set_debug.3.html"><strong>modbus_set_debug</strong>(3)</a></p><p><a href="../man3/modbus_set_error_recovery.3.html"><strong>modbus_set_error_recovery</strong>(3)</a></p><p><a href="../man3/modbus_get_header_length.3.html"><strong>modbus_get_header_length</strong>(3)</a></p><p><a href="../man3/modbus_get_response_timeout.3.html"><strong>modbus_get_response_timeout</strong>(3)</a></p><p><a href="../man3/modbus_set_response_timeout.3.html"><strong>modbus_set_response_timeout</strong>(3)</a></p><p><a href="../man3/modbus_set_slave.3.html"><strong>modbus_set_slave</strong>(3)</a></p><p><a href="../man3/modbus_set_socket.3.html"><strong>modbus_set_socket</strong>(3)</a></p><p><a href="../man3/modbus_get_socket.3.html"><strong>modbus_get_socket</strong>(3)</a></p><p>A libmodbus <em>context</em> is thread safe and may be shared among as many application threads as necessary, without any additional locking required on the part of the caller.</p><p>Macros for data manipulation</p><p>MODBUS_GET_HIGH_BYTE(data), extracts the high byte from a byte</p><p>MODBUS_GET_LOW_BYTE(data), extracts the low byte from a byte</p><p>MODBUS_GET_INT32_FROM_INT16(tab_int16, index), builds an int32 from the two first int16 starting at tab_int16[index]</p><p>MODBUS_GET_INT16_FROM_INT8(tab_int8, index), builds an int16 from the two first int8 starting at tab_int8[index]</p><p>MODBUS_SET_INT16_TO_INT8(tab_int8, index, value), set an int16 value into the two first bytes starting at tab_int8[index]</p><p>Functions for data manipulation</p><p><a href="../man3/modbus_set_bits_from_byte.3.html"><strong>modbus_set_bits_from_byte</strong>(3)</a></p><p><a href="../man3/modbus_set_bits_from_bytes.3.html"><strong>modbus_set_bits_from_bytes</strong>(3)</a></p><p><a href="../man3/modbus_get_byte_from_bits.3.html"><strong>modbus_get_byte_from_bits</strong>(3)</a></p><p><a href="../man3/modbus_get_float.3.html"><strong>modbus_get_float</strong>(3)</a></p><p><a href="../man3/modbus_set_float.3.html"><strong>modbus_set_float</strong>(3)</a></p>
<h3>Connection</h3>
<p>The following functions are provided to establish and close a connection with Modbus devices:</p><p>Establish a connection</p><p><a href="../man3/modbus_connect.3.html"><strong>modbus_connect</strong>(3)</a></p><p>Close a connection</p><p><a href="../man3/modbus_close.3.html"><strong>modbus_close</strong>(3)</a></p><p>Flush a connection</p><p><a href="../man3/modbus_flush.3.html"><strong>modbus_flush</strong>(3)</a></p>
<h3>Client</h3>
<p>The Modbus protocol defines different data types and functions to read and write them from/to remote devices. The following functions are used by the clients to send Modbus requests:</p><p>Read data</p><p><a href="../man3/modbus_read_bits.3.html"><strong>modbus_read_bits</strong>(3)</a></p><p><a href="../man3/modbus_read_input_bits.3.html"><strong>modbus_read_input_bits</strong>(3)</a></p><p><a href="../man3/modbus_read_registers.3.html"><strong>modbus_read_registers</strong>(3)</a></p><p><a href="../man3/modbus_read_input_registers.3.html"><strong>modbus_read_input_registers</strong>(3)</a></p><p><a href="../man3/modbus_report_slave_id.3.html"><strong>modbus_report_slave_id</strong>(3)</a></p><p>Write data</p><p><a href="../man3/modbus_write_bit.3.html"><strong>modbus_write_bit</strong>(3)</a></p><p><a href="../man3/modbus_write_register.3.html"><strong>modbus_write_register</strong>(3)</a></p><p><a href="../man3/modbus_write_bits.3.html"><strong>modbus_write_bits</strong>(3)</a></p><p><a href="../man3/modbus_write_registers.3.html"><strong>modbus_write_registers</strong>(3)</a></p><p>Write and read data</p><p><a href="../man3/modbus_write_and_read_registers.3.html"><strong>modbus_write_and_read_registers</strong>(3)</a></p><p>Raw requests</p><p><a href="../man3/modbus_send_raw_request.3.html"><strong>modbus_send_raw_request</strong>(3)</a></p><p><a href="../man3/modbus_receive_confirmation.3.html"><strong>modbus_receive_confirmation</strong>(3)</a></p><p>Reply an exception</p><p><a href="../man3/modbus_reply_exception.3.html"><strong>modbus_reply_exception</strong>(3)</a></p>
<h3>Server</h3>
<p>The server is waiting for request from clients and must answer when it is concerned by the request. The libmodbus offers the following functions to handle requests:</p><p>Data mapping</p><p><a href="../man3/modbus_mapping_new.3.html"><strong>modbus_mapping_new</strong>(3)</a></p><p><a href="../man3/modbus_mapping_free.3.html"><strong>modbus_mapping_free</strong>(3)</a></p><p>Receive</p><p><a href="../man3/modbus_receive.3.html"><strong>modbus_receive</strong>(3)</a></p><p>Reply</p><p><a href="../man3/modbus_reply.3.html"><strong>modbus_reply</strong>(3)</a></p><p><a href="../man3/modbus_reply_exception.3.html"><strong>modbus_reply_exception</strong>(3)</a></p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERROR HANDLING</h2>
        <div class="sectioncontent">
<p>The libmodbus functions handle errors using the standard conventions found on POSIX systems. Generally, this means that upon failure a libmodbus function shall return either a NULL value (if returning a pointer) or a negative value (if returning an integer), and the actual error code shall be stored in the <em>errno</em> variable.</p><p>The <em>modbus_strerror()</em> function is provided to translate libmodbus-specific error codes into error message strings; for details refer to <a href="../man3/modbus_strerror.3.html"><strong>modbus_strerror</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MISCELLANEOUS</h2>
        <div class="sectioncontent">
<p>The <em>LIBMODBUS_VERSION_STRING</em> constant indicates the libmodbus version the program has been compiled against. The variables <em>libmodbus_version_major</em>, <em>libmodbus_version_minor</em>, <em>libmodbus_version_micro</em> give the version the program is linked against.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>The libmodbus documentation was written by St\('ephane Raimbault &lt;\m[blue]<strong>stephane.raimbault@gmail.com</strong>\m[]\s-2\u[1]\d\s+2&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESOURCES</h2>
        <div class="sectioncontent">
<p>Main web site: \m[blue]<strong>http://www.libmodbus.org/</strong>\m[]</p><p>Report bugs on the issue tracker at \m[blue]<strong>http://github.com/stephane/libmodbus/issues</strong>\m[].</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Free use of this software is granted under the terms of the GNU Lesser General Public License (LGPL v2.1+). For details see the files COPYING and COPYING.LESSER included with the libmodbus distribution.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>stephane.raimbault@gmail.com</p><p>mailto:stephane.raimbault@gmail.com</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="libdisasm.7.html"><span aria-hidden="true">&larr;</span> libdisasm.7: Library for disassembling intel x86 instructions</a></li>
   <li class="next"><a href="libmpi.7.html">libmpi.7: Lam/mpi implementation <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
