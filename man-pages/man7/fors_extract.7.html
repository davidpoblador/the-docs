<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fors_extract: Extraction of scientific spectra</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Extraction of scientific spectra">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fors_extract (7) manual">
  <meta name="twitter:description" content="Extraction of scientific spectra">
  <meta name="twitter:image" content="https://www.carta.tech/images/cpl-plugin-fors-doc-fors_extract-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/fors_extract.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fors_extract (7) manual" />
  <meta property="og:description" content="Extraction of scientific spectra" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/cpl-plugin-fors-doc-fors_extract-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fors_extract<small> (7)</small></h1>
        <p class="lead">Extraction of scientific spectra</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/fors_extract.7.html">
      <span itemprop="name">fors_extract: Extraction of scientific spectra</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/cpl-plugin-fors-doc/">
      <span itemprop="name">cpl-plugin-fors-doc</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/fors_extract.7.html">
      <span itemprop="name">fors_extract: Extraction of scientific spectra</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>esorex <strong>fors_extract</strong> [OPTIONS] FILE.sof</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This recipe is used to reduce scientific spectra using the global distortion table created by the recipe fors_calib. The spectra are bias subtracted, flat fielded (if a normalised flat field is specified) and remapped eliminating the optical distortions. The wavelength calibration can be optionally upgraded using a number of sky lines: if no sky lines catalog of wavelengths is specified, an internal one is used instead.</p><p>If the alignment to the sky lines is performed, the applied dispersion coefficient table is upgraded and saved to disk, and a new CCD wavelengths map is created.</p><p>This recipe accepts both FORS1 and FORS2 frames. A grism table (typically depending on the instrument mode, and in particular on the grism used) may also be specified: this table contains a default recipe parameter setting to control the way spectra are extracted for a specific instrument mode, as it is used for automatic run of the pipeline on Paranal and in Garching. If this table is specified, it will modify the default recipe parameter setting, with the exception of those parameters which have been explicitly modifyed on the command line. If a grism table is not specified, the input recipe parameters values will always be read from the command line, or from an esorex configuration file if present, or from their generic default values (that are rarely meaningful).</p><p>In the table below the MXU acronym can be read alternatively as MOS and LSS, depending on the instrument mode of the input data. Either a scientific or a standard star exposure can be specified in input (not both).</p><p>Input files:</p>
<pre>
  DO category:               Type:       Explanation:         Required:
  SCIENCE_MXU                Raw         Scientific exposure     Y
  or STANDARD_MXU            Raw         Standard star exposure  Y
  MASTER_BIAS                Calib       Master bias             Y
  GRISM_TABLE                Calib       Grism table             .
</pre>

<pre>
  MASTER_SKYLINECAT          Calib       Sky lines catalog       .
</pre>

<pre>
  MASTER_NORM_FLAT_MXU       Calib       Normalised flat field   .
</pre>

<pre>
  MASTER_DISTORTION_TABLE    Calib       Global distortion model .
</pre>

<pre>
  or, in case of LSS-like MOS/MXU data,
</pre>

<pre>
  MASTER_NORM_FLAT_LONG_MXU  Calib       Normalised flat field   .
</pre>
<p>Output files:</p>
<pre>
  DO category:               Data type:  Explanation:
  REDUCED_SCI_MXU            FITS image  Extracted scientific spectra
  REDUCED_SKY_SCI_MXU        FITS image  Extracted sky spectra
  REDUCED_ERROR_SCI_MXU      FITS image  Errors on extracted spectra
  UNMAPPED_SCI_MXU           FITS image  Sky subtracted scientific spectra
  MAPPED_SCI_MXU             FITS image  Rectified scientific spectra
  MAPPED_ALL_SCI_MXU         FITS image  Rectified science spectra with sky
  MAPPED_SKY_SCI_MXU         FITS image  Rectified sky spectra
  UNMAPPED_SKY_SCI_MXU           FITS image  Sky on CCD
  GLOBAL_SKY_SPECTRUM_MXU    FITS table  Global sky spectrum
  OBJECT_TABLE_SCI_MXU       FITS table  Positions of detected objects
</pre>

<pre>
  Only if the sky-alignment of the wavelength solution is requested:
  SKY_SHIFTS_LONG_SCI_MXU    FITS table  Sky lines offsets (LSS-like data)
  or SKY_SHIFTS_SLIT_SCI_MXU FITS table  Sky lines offsets (MOS-like data)
  DISP_COEFF_SCI_MXU         FITS table  Upgraded dispersion coefficients
  WAVELENGTH_MAP_SCI_MXU     FITS image  Upgraded wavelength map
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--dispersion</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>Resampling step (Angstrom/pixel) (float; default: 0.0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.dispersion</strong> [default = <em>0.0</em>].</p>
  </dd>
  <dt>
    <p><strong>--skyalign</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>Polynomial order for sky lines alignment, or -1 to avoid alignment (long; default: 0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.skyalign</strong> [default = <em>0</em>].</p>
  </dd>
  <dt>
    <p><strong>--wcolumn</strong> <em>&lt;str&gt;</em></p>
  </dt>
  <dd>
    <p>Name of sky line catalog table column with wavelengths (str; default: \'WLEN\'). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.wcolumn</strong> [default = <em>WLEN</em>].</p>
  </dd>
  <dt>
    <p><strong>--startwavelength</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>Start wavelength in spectral extraction (float; default: 0.0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.startwavelength</strong> [default = <em>0.0</em>].</p>
  </dd>
  <dt>
    <p><strong>--endwavelength</strong> <em>&lt;float&gt;</em></p>
  </dt>
  <dd>
    <p>End wavelength in spectral extraction (float; default: 0.0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.endwavelength</strong> [default = <em>0.0</em>].</p>
  </dd>
  <dt>
    <p><strong>--flux</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Apply flux conservation (bool; default: True). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.flux</strong> [default = <em>True</em>].</p>
  </dd>
  <dt>
    <p><strong>--flatfield</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Apply flat field (bool; default: False). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.flatfield</strong> [default = <em>False</em>].</p>
  </dd>
  <dt>
    <p><strong>--skyglobal</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Subtract global sky spectrum from CCD (bool; default: False). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.skyglobal</strong> [default = <em>False</em>].</p>
  </dd>
  <dt>
    <p><strong>--skymedian</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Sky subtraction from extracted slit spectra (bool; default: False). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.skymedian</strong> [default = <em>False</em>].</p>
  </dd>
  <dt>
    <p><strong>--skylocal</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Sky subtraction from CCD slit spectra (bool; default: True). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.skylocal</strong> [default = <em>True</em>].</p>
  </dd>
  <dt>
    <p><strong>--cosmics</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Eliminate cosmic rays hits (only if global sky subtraction is also requested) (bool; default: False). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.cosmics</strong> [default = <em>False</em>].</p>
  </dd>
  <dt>
    <p><strong>--slit_margin</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>Number of pixels to exclude at each slit in object detection and extraction (long; default: 3). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.slit_margin</strong> [default = <em>3</em>].</p>
  </dd>
  <dt>
    <p><strong>--ext_radius</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>Maximum extraction radius for detected objects (pixel) (long; default: 6). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.ext_radius</strong> [default = <em>6</em>].</p>
  </dd>
  <dt>
    <p><strong>--cont_radius</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>Minimum distance at which two objects of equal luminosity do not contaminate each other (pixel) (long; default: 0). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.cont_radius</strong> [default = <em>0</em>].</p>
  </dd>
  <dt>
    <p><strong>--ext_mode</strong> <em>&lt;long&gt;</em></p>
  </dt>
  <dd>
    <p>Object extraction method: 0 = aperture, 1 = Horne optimal extraction (long; default: 1). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.ext_mode</strong> [default = <em>1</em>].</p>
  </dd>
  <dt>
    <p><strong>--time_normalise</strong> <em>&lt;bool&gt;</em></p>
  </dt>
  <dd>
    <p>Normalise output spectra by the exposure time (bool; default: True). The full name of this option for the EsoRex configuration file is <strong>fors.fors_extract.time_normalise</strong> [default = <em>True</em>].</p>
  </dd>

</dl>
<p>Note that it is possible to create a configuration file containing these options, along with suitable default values. Please refer to the details provided by the 'esorex --help' command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fors_extract&hellip;</h2>
        <div class="sectioncontent">
<p>The full documentation for the fors pipeline can be downloaded as a PDF file using the following URL:</p><ul>
<li><p><strong>ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf</strong></p></li>
</ul><p>An overview over the existing ESO pipelines can be found on the web page <strong>http://www.eso.org/sci/software/pipelines/</strong>.</p><p>Basic documentation about the EsoRex program can be found at the esorex (1) man page.</p><p>It is possible to call the pipelines from python using the python-cpl package. See <strong>http://packages.python.org/python-cpl/index.html</strong> for further information.</p><p>The other recipes of the fors pipeline are <a href="../man7/fors_wave_calib_lss.7.html"><strong>fors_wave_calib_lss</strong>(7)</a>, <a href="../man7/fors_img_sky_flat.7.html"><strong>fors_img_sky_flat</strong>(7)</a>, <a href="../man7/fors_resample.7.html"><strong>fors_resample</strong>(7)</a>, <a href="../man7/fors_config.7.html"><strong>fors_config</strong>(7)</a>, <a href="../man7/fors_extract_objects.7.html"><strong>fors_extract_objects</strong>(7)</a>, <a href="../man7/fors_calib.7.html"><strong>fors_calib</strong>(7)</a>, <a href="../man7/fors_wave_calib.7.html"><strong>fors_wave_calib</strong>(7)</a>, <a href="../man7/fors_detect_objects.7.html"><strong>fors_detect_objects</strong>(7)</a>, <a href="../man7/fors_pmos_science.7.html"><strong>fors_pmos_science</strong>(7)</a>, <a href="../man7/fors_extract_slits.7.html"><strong>fors_extract_slits</strong>(7)</a>, <a href="../man7/test_hough.7.html"><strong>test_hough</strong>(7)</a>, <a href="../man7/fors_img_screen_flat.7.html"><strong>fors_img_screen_flat</strong>(7)</a>, <a href="../man7/fors_remove_bias.7.html"><strong>fors_remove_bias</strong>(7)</a>, <a href="../man7/fors_subtract_sky.7.html"><strong>fors_subtract_sky</strong>(7)</a>, <a href="../man7/fors_normalise_flat.7.html"><strong>fors_normalise_flat</strong>(7)</a>, <a href="../man7/montecarlo.7.html"><strong>montecarlo</strong>(7)</a>, <a href="../man7/fors_photometry.7.html"><strong>fors_photometry</strong>(7)</a>, <a href="../man7/fors_zeropoint.7.html"><strong>fors_zeropoint</strong>(7)</a>, <a href="../man7/fors_dark.7.html"><strong>fors_dark</strong>(7)</a>, <a href="../man7/fors_subtract_sky_lss.7.html"><strong>fors_subtract_sky_lss</strong>(7)</a>, <a href="../man7/fors_trace_flat.7.html"><strong>fors_trace_flat</strong>(7)</a>, <a href="../man7/fors_flatfield.7.html"><strong>fors_flatfield</strong>(7)</a>, <a href="../man7/fors_img_science.7.html"><strong>fors_img_science</strong>(7)</a>, <a href="../man7/fors_detect_spectra.7.html"><strong>fors_detect_spectra</strong>(7)</a>, <a href="../man7/fors_sumflux.7.html"><strong>fors_sumflux</strong>(7)</a>, <a href="../man7/fors_pmos_extract.7.html"><strong>fors_pmos_extract</strong>(7)</a>, <a href="../man7/fors_align_sky_lss.7.html"><strong>fors_align_sky_lss</strong>(7)</a>, <a href="../man7/fors_bias.7.html"><strong>fors_bias</strong>(7)</a>, <a href="../man7/fors_align_sky.7.html"><strong>fors_align_sky</strong>(7)</a>, <a href="../man7/fors_pmos_calib.7.html"><strong>fors_pmos_calib</strong>(7)</a>, <a href="../man7/fors_spec_mflat.7.html"><strong>fors_spec_mflat</strong>(7)</a>, <a href="../man7/fors_science.7.html"><strong>fors_science</strong>(7)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>fors_extract 5.0.0</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Carlo Izzo &lt;usd-help@eso.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUG REPORTS</h2>
        <div class="sectioncontent">
<p>Please report any problems to usd-help@eso.org. Alternatively, you may send a report to the ESO User Support Department &lt;usd-help@eso.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This file is currently part of the FORS Instrument Pipeline Copyright (C) 2002-2010 European Southern Observatory</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fors_detect_spectra.7.html"><span aria-hidden="true">&larr;</span> fors_detect_spectra.7: Detect mos/mxu spectra on ccd</a></li>
   <li class="next"><a href="fors_extract_objects.7.html">fors_extract_objects.7: Extract objects in slit spectra <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
