<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rdma_cm: Rdma communication manager.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Rdma communication manager.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="rdma_cm (7) manual">
  <meta name="twitter:description" content="Rdma communication manager.">
  <meta name="twitter:image" content="https://www.carta.tech/images/librdmacm-dev-rdma_cm-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/rdma_cm.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="rdma_cm (7) manual" />
  <meta property="og:description" content="Rdma communication manager." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/librdmacm-dev-rdma_cm-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">rdma_cm<small> (7)</small></h1>
        <p class="lead">Rdma communication manager.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/rdma_cm.7.html">
      <span itemprop="name">rdma_cm: Rdma communication manager.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/librdmacm-dev/">
      <span itemprop="name">librdmacm-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/rdma_cm.7.html">
      <span itemprop="name">rdma_cm: Rdma communication manager.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>#include &lt;rdma/rdma_cma.h&gt;</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Used to establish communication over RDMA transports.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The RDMA CM is a communication manager used to setup reliable, connected and unreliable datagram data transfers.  It provides an RDMA transport neutral interface for establishing connections.  The API concepts are based on sockets, but adapted for queue pair (QP) based semantics: communication must be over a specific RDMA device, and data transfers are message based.</p><p>The RDMA CM can control both the QP and communication management (connection setup / teardown) portions of an RDMA API, or only the communication management piece.  It works in conjunction with the verbs API defined by the libibverbs library.  The libibverbs library provides the underlying interfaces needed to send and receive data.</p><p>The RDMA CM can operate asynchronously or synchronously.  The mode of operation is controlled by the user through the use of the rdma_cm event channel parameter in specific calls.  If an event channel is provided, an rdma_cm identifier will report its event data (results of connecting, for example), on that channel. If a channel is not provided, then all rdma_cm operations for the selected rdma_cm identifier will block until they complete.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RDMA VERBS</h2>
        <div class="sectioncontent">
<p>The rdma_cm supports the full range of verbs available through the libibverbs library and interfaces.  However, it also provides wrapper functions for some of the more commonly used verbs funcationality.  The full set of abstracted verb calls are:</p><p>rdma_reg_msgs  - register an array of buffers for sending and receiving</p><p>rdma_reg_read  - registers a buffer for RDMA read operations</p><p>rdma_reg_write - registers a buffer for RDMA write operations</p><p>rdma_dereg_mr  - deregisters a memory region</p><p>rdma_post_recv  - post a buffer to receive a message</p><p>rdma_post_send  - post a buffer to send a message</p><p>rdma_post_read  - post an RDMA to read data into a buffer</p><p>rdma_post_write - post an RDMA to send data from a buffer</p><p>rdma_post_recvv  - post a vector of buffers to receive a message</p><p>rdma_post_sendv  - post a vector of buffers to send a message</p><p>rdma_post_readv  - post a vector of buffers to receive an RDMA read</p><p>rdma_post_writev - post a vector of buffers to send an RDMA write</p><p>rdma_post_ud_send - post a buffer to send a message on a UD QP</p><p>rdma_get_send_comp - get completion status for a send or RDMA operation</p><p>rdma_get_recv_comp - get information about a completed receive</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CLIENT OPERATION</h2>
        <div class="sectioncontent">
<p>This section provides a general overview of the basic operation for the active, or client, side of communication.  This flow assume asynchronous operation with low level call details shown.  For synchronous operation, calls to rdma_create_event_channel, rdma_get_cm_event, rdma_ack_cm_event, and rdma_destroy_event_channel would be eliminated.  Abstracted calls, such as rdma_create_ep encapsulate serveral of these calls under a single API. Users may also refer to the example applications for code samples.  A general connection flow would be:</p>
<dl class='dl-vertical'>
  <dt>
    rdma_getaddrinfo
  </dt>
  <dd>
    <p>retrieve address information of the destination</p>
  </dd>
  <dt>
    rdma_create_event_channel
  </dt>
  <dd>
    <p>create channel to receive events</p>
  </dd>
  <dt>
    rdma_create_id
  </dt>
  <dd>
    <p>allocate an rdma_cm_id, this is conceptually similar to a socket</p>
  </dd>
  <dt>
    rdma_resolve_addr
  </dt>
  <dd>
    <p>obtain a local RDMA device to reach the remote address</p>
  </dd>
  <dt>
    rdma_get_cm_event
  </dt>
  <dd>
    <p>wait for RDMA_CM_EVENT_ADDR_RESOLVED event</p>
  </dd>
  <dt>
    rdma_ack_cm_event
  </dt>
  <dd>
    <p>ack event</p>
  </dd>
  <dt>
    rdma_create_qp
  </dt>
  <dd>
    <p>allocate a QP for the communication</p>
  </dd>
  <dt>
    rdma_resolve_route
  </dt>
  <dd>
    <p>determine the route to the remote address</p>
  </dd>
  <dt>
    rdma_get_cm_event
  </dt>
  <dd>
    <p>wait for RDMA_CM_EVENT_ROUTE_RESOLVED event</p>
  </dd>
  <dt>
    rdma_ack_cm_event
  </dt>
  <dd>
    <p>ack event</p>
  </dd>
  <dt>
    rdma_connect
  </dt>
  <dd>
    <p>connect to the remote server</p>
  </dd>
  <dt>
    rdma_get_cm_event
  </dt>
  <dd>
    <p>wait for RDMA_CM_EVENT_ESTABLISHED event</p>
  </dd>
  <dt>
    rdma_ack_cm_event
  </dt>
  <dd>
    <p>ack event</p>
  </dd>

</dl>
<p>Perform data transfers over connection</p>
<dl class='dl-vertical'>
  <dt>
    rdma_disconnect
  </dt>
  <dd>
    <p>tear-down connection</p>
  </dd>
  <dt>
    rdma_get_cm_event
  </dt>
  <dd>
    <p>wait for RDMA_CM_EVENT_DISCONNECTED event</p>
  </dd>
  <dt>
    rdma_ack_cm_event
  </dt>
  <dd>
    <p>ack event</p>
  </dd>
  <dt>
    rdma_destroy_qp
  </dt>
  <dd>
    <p>destroy the QP</p>
  </dd>
  <dt>
    rdma_destroy_id
  </dt>
  <dd>
    <p>release the rdma_cm_id</p>
  </dd>
  <dt>
    rdma_destroy_event_channel
  </dt>
  <dd>
    <p>release the event channel</p>
  </dd>

</dl>
<p>An almost identical process is used to setup unreliable datagram (UD) communication between nodes.  No actual connection is formed between QPs however, so disconnection is not needed.</p><p>Although this example shows the client initiating the disconnect, either side of a connection may initiate the disconnect.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SERVER OPERATION</h2>
        <div class="sectioncontent">
<p>This section provides a general overview of the basic operation for the passive, or server, side of communication.  A general connection flow would be:</p>
<dl class='dl-vertical'>
  <dt>
    rdma_create_event_channel
  </dt>
  <dd>
    <p>create channel to receive events</p>
  </dd>
  <dt>
    rdma_create_id
  </dt>
  <dd>
    <p>allocate an rdma_cm_id, this is conceptually similar to a socket</p>
  </dd>
  <dt>
    rdma_bind_addr
  </dt>
  <dd>
    <p>set the local port number to listen on</p>
  </dd>
  <dt>
    rdma_listen
  </dt>
  <dd>
    <p>begin listening for connection requests</p>
  </dd>
  <dt>
    rdma_get_cm_event
  </dt>
  <dd>
    <p>wait for RDMA_CM_EVENT_CONNECT_REQUEST event with a new rdma_cm_id</p>
  </dd>
  <dt>
    rdma_create_qp
  </dt>
  <dd>
    <p>allocate a QP for the communication on the new rdma_cm_id</p>
  </dd>
  <dt>
    rdma_accept
  </dt>
  <dd>
    <p>accept the connection request</p>
  </dd>
  <dt>
    rdma_ack_cm_event
  </dt>
  <dd>
    <p>ack event</p>
  </dd>
  <dt>
    rdma_get_cm_event
  </dt>
  <dd>
    <p>wait for RDMA_CM_EVENT_ESTABLISHED event</p>
  </dd>
  <dt>
    rdma_ack_cm_event
  </dt>
  <dd>
    <p>ack event</p>
  </dd>

</dl>
<p>Perform data transfers over connection</p>
<dl class='dl-vertical'>
  <dt>
    rdma_get_cm_event
  </dt>
  <dd>
    <p>wait for RDMA_CM_EVENT_DISCONNECTED event</p>
  </dd>
  <dt>
    rdma_ack_cm_event
  </dt>
  <dd>
    <p>ack event</p>
  </dd>
  <dt>
    rdma_disconnect
  </dt>
  <dd>
    <p>tear-down connection</p>
  </dd>
  <dt>
    rdma_destroy_qp
  </dt>
  <dd>
    <p>destroy the QP</p>
  </dd>
  <dt>
    rdma_destroy_id
  </dt>
  <dd>
    <p>release the connected rdma_cm_id</p>
  </dd>
  <dt>
    rdma_destroy_id
  </dt>
  <dd>
    <p>release the listening rdma_cm_id</p>
  </dd>
  <dt>
    rdma_destroy_event_channel
  </dt>
  <dd>
    <p>release the event channel</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN CODES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    =  0
  </dt>
  <dd>
    <p>success</p>
  </dd>
  <dt>
    = -1
  </dt>
  <dd>
    <p>error - see errno for more details</p>
  </dd>

</dl>
<p>Most librdmacm functions return 0 to indicate success, and a -1 return value to indicate failure.  If a function operates asynchronously, a return value of 0 means that the operation was successfully started.  The operation could still complete in error; users should check the status of the related event.  If the return value is -1, then errno will contain additional information regarding the reason for the failure.</p><p>Prior versions of the library would return -errno and not set errno for some cases related to ENOMEM, ENODEV, ENODATA, EINVAL, and EADDRNOTAVAIL codes. Applications that want to check these codes and have compatability with prior library versions must manually set errno to the negative of the return code if it is &lt; -1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO rdma_cm&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/rdma_accept.3.html"><strong>rdma_accept</strong>(3)</a>, <a href="../man3/rdma_ack_cm_event.3.html"><strong>rdma_ack_cm_event</strong>(3)</a>, <a href="../man3/rdma_bind_addr.3.html"><strong>rdma_bind_addr</strong>(3)</a>, <a href="../man3/rdma_connect.3.html"><strong>rdma_connect</strong>(3)</a>, <a href="../man3/rdma_create_ep.3.html"><strong>rdma_create_ep</strong>(3)</a>, <a href="../man3/rdma_create_event_channel.3.html"><strong>rdma_create_event_channel</strong>(3)</a>, <a href="../man3/rdma_create_id.3.html"><strong>rdma_create_id</strong>(3)</a>, <a href="../man3/rdma_create_qp.3.html"><strong>rdma_create_qp</strong>(3)</a>, <a href="../man3/rdma_dereg_mr.3.html"><strong>rdma_dereg_mr</strong>(3)</a>, <a href="../man3/rdma_destroy_ep.3.html"><strong>rdma_destroy_ep</strong>(3)</a>, <a href="../man3/rdma_destroy_event_channel.3.html"><strong>rdma_destroy_event_channel</strong>(3)</a>, <a href="../man3/rdma_destroy_id.3.html"><strong>rdma_destroy_id</strong>(3)</a>, <a href="../man3/rdma_destroy_qp.3.html"><strong>rdma_destroy_qp</strong>(3)</a>, <a href="../man3/rdma_disconnect.3.html"><strong>rdma_disconnect</strong>(3)</a>, <a href="../man3/rdma_event_str.3.html"><strong>rdma_event_str</strong>(3)</a>, <a href="../man3/rdma_free_devices.3.html"><strong>rdma_free_devices</strong>(3)</a>, <a href="../man3/rdma_getaddrinfo.3.html"><strong>rdma_getaddrinfo</strong>(3)</a>, <a href="../man3/rdma_get_cm_event.3.html"><strong>rdma_get_cm_event</strong>(3)</a>, <a href="../man3/rdma_get_devices.3.html"><strong>rdma_get_devices</strong>(3)</a>, <a href="../man3/rdma_get_dst_port.3.html"><strong>rdma_get_dst_port</strong>(3)</a>, <a href="../man3/rdma_get_local_addr.3.html"><strong>rdma_get_local_addr</strong>(3)</a>, <a href="../man3/rdma_get_peer_addr.3.html"><strong>rdma_get_peer_addr</strong>(3)</a>, <a href="../man3/rdma_get_recv_comp.3.html"><strong>rdma_get_recv_comp</strong>(3)</a>, <a href="../man3/rdma_get_request.3.html"><strong>rdma_get_request</strong>(3)</a>, <a href="../man3/rdma_get_send_comp.3.html"><strong>rdma_get_send_comp</strong>(3)</a>, <a href="../man3/rdma_get_src_port.3.html"><strong>rdma_get_src_port</strong>(3)</a>, <a href="../man3/rdma_join_multicast.3.html"><strong>rdma_join_multicast</strong>(3)</a>, <a href="../man3/rdma_leave_multicast.3.html"><strong>rdma_leave_multicast</strong>(3)</a>, <a href="../man3/rdma_listen.3.html"><strong>rdma_listen</strong>(3)</a>, <a href="../man3/rdma_migrate_id.3.html"><strong>rdma_migrate_id</strong>(3)</a>, <a href="../man3/rdma_notify.3.html"><strong>rdma_notify</strong>(3)</a>, <a href="../man3/rdma_post_read.3.html"><strong>rdma_post_read</strong>(3)</a> <a href="../man3/rdma_post_readv.3.html"><strong>rdma_post_readv</strong>(3)</a>, <a href="../man3/rdma_post_recv.3.html"><strong>rdma_post_recv</strong>(3)</a>, <a href="../man3/rdma_post_recvv.3.html"><strong>rdma_post_recvv</strong>(3)</a>, <a href="../man3/rdma_post_send.3.html"><strong>rdma_post_send</strong>(3)</a>, <a href="../man3/rdma_post_sendv.3.html"><strong>rdma_post_sendv</strong>(3)</a>, <a href="../man3/rdma_post_ud_send.3.html"><strong>rdma_post_ud_send</strong>(3)</a>, <a href="../man3/rdma_post_write.3.html"><strong>rdma_post_write</strong>(3)</a>, <a href="../man3/rdma_post_writev.3.html"><strong>rdma_post_writev</strong>(3)</a>, <a href="../man3/rdma_reg_msgs.3.html"><strong>rdma_reg_msgs</strong>(3)</a>, <a href="../man3/rdma_reg_read.3.html"><strong>rdma_reg_read</strong>(3)</a>, <a href="../man3/rdma_reg_write.3.html"><strong>rdma_reg_write</strong>(3)</a>, <a href="../man3/rdma_reject.3.html"><strong>rdma_reject</strong>(3)</a>, <a href="../man3/rdma_resolve_addr.3.html"><strong>rdma_resolve_addr</strong>(3)</a>, <a href="../man3/rdma_resolve_route.3.html"><strong>rdma_resolve_route</strong>(3)</a>, <a href="../man3/rdma_set_option.3.html"><strong>rdma_set_option</strong>(3)</a> <a href="../man1/mckey.1.html"><strong>mckey</strong>(1)</a>, <a href="../man1/rdma_client.1.html"><strong>rdma_client</strong>(1)</a>, <a href="../man1/rdma_server.1.html"><strong>rdma_server</strong>(1)</a>, <a href="../man1/rping.1.html"><strong>rping</strong>(1)</a>, <a href="../man1/ucmatose.1.html"><strong>ucmatose</strong>(1)</a>, <a href="../man1/udaddy.1.html"><strong>udaddy</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="raw.7.html"><span aria-hidden="true">&larr;</span> raw.7: Linux ipv4 raw sockets</a></li>
   <li class="next"><a href="rdup-backups.7.html">rdup-backups.7: Introduction into making backups with rdup <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
