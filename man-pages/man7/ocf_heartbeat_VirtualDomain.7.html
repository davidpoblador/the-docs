<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ocf_heartbeat_VirtualDomain: Manages virtual domains through the libvirt virtualization framework</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manages virtual domains through the libvirt virtualization framework">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ocf_heartbeat_VirtualDomain (7) manual">
  <meta name="twitter:description" content="Manages virtual domains through the libvirt virtualization framework">
  <meta name="twitter:image" content="https://www.carta.tech/images/resource-agents-ocf_heartbeat_VirtualDomain-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/ocf_heartbeat_VirtualDomain.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ocf_heartbeat_VirtualDomain (7) manual" />
  <meta property="og:description" content="Manages virtual domains through the libvirt virtualization framework" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/resource-agents-ocf_heartbeat_VirtualDomain-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ocf_heartbeat_VirtualDomain<small> (7)</small></h1>
        <p class="lead">Manages virtual domains through the libvirt virtualization framework</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/ocf_heartbeat_VirtualDomain.7.html">
      <span itemprop="name">ocf_heartbeat_VirtualDomain: Manages virtual domains through the libvirt virtualization framework</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/resource-agents/">
      <span itemprop="name">resource-agents</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/ocf_heartbeat_VirtualDomain.7.html">
      <span itemprop="name">ocf_heartbeat_VirtualDomain: Manages virtual domains through the libvirt virtualization framework</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>VirtualDomain</strong> [start | stop | status | monitor | migrate_to | migrate_from | meta-data | validate-all]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Resource agent for a virtual domain (a.k.a. domU, virtual machine, virtual environment etc., depending on context) managed by libvirtd.</p><p>This resource agent may be configured for <em>native migration</em> if available in the cluster manager. For Pacemaker, the <em>allow-migrate="true"</em> meta attribute enables native migration.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTED PARAMETERS</h2>
        <div class="sectioncontent">
<p><strong>config</strong></p><p>Absolute path to the libvirt configuration file, for this virtual domain.</p><p>(unique, required, string, no default)</p><p><strong>hypervisor</strong></p><p>Hypervisor URI to connect to. See the libvirt documentation for details on supported URI formats. The default is system dependent.</p><p>(optional, string, no default)</p><p><strong>force_stop</strong></p><p>Always forcefully shut down ("destroy") the domain on stop. The default behavior is to resort to a forceful shutdown only after a graceful shutdown attempt has failed. You should only set this to true if your virtual domain (or your virtualization backend) does not support graceful shutdown.</p><p>(optional, boolean, default 0)</p><p><strong>migration_transport</strong></p><p>Transport used to connect to the remote hypervisor while migrating. Please refer to the libvirt documentation for details on transports available. If this parameter is omitted, the resource will use libvirt&apos;s default transport to connect to the remote hypervisor.</p><p>(optional, string, no default)</p><p><strong>migration_network_suffix</strong></p><p>Use a dedicated migration network. The migration URI is composed by adding this parameters value to the end of the node name. If the node name happens to be an FQDN (as opposed to an unqualified host name), insert the suffix immediately prior to the first period (.) in the FQDN. At the moment Qemu/KVM and Xen migration via a dedicated network is supported.</p><p>Note: Be sure this composed host name is locally resolveable and the associated IP is reachable through the favored network.</p><p>(optional, string, no default)</p><p><strong>monitor_scripts</strong></p><p>To additionally monitor services within the virtual domain, add this parameter with a list of scripts to monitor.</p><p>Note: when monitor scripts are used, the start and migrate_from operations will complete only when all monitor scripts have completed successfully. Be sure to set the timeout of these operations to accommodate this delay.</p><p>(optional, string, no default)</p><p><strong>autoset_utilization_cpu</strong></p><p>If set true, the agent will detect the number of domainU&apos;s vCPUs from virsh, and put it into the cpu utilization of the resource when the monitor is executed.</p><p>(optional, boolean, default true)</p><p><strong>autoset_utilization_hv_memory</strong></p><p>If set true, the agent will detect the number of *Max memory* from virsh, and put it into the hv_memory utilization of the resource when the monitor is executed.</p><p>(optional, boolean, default true)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTED ACTIONS</h2>
        <div class="sectioncontent">
<p>This resource agent supports the following actions (operations):</p><p><strong>start</strong></p><p>Starts the resource. Suggested minimum timeout: 90.</p><p><strong>stop</strong></p><p>Stops the resource. Suggested minimum timeout: 90.</p><p><strong>status</strong></p><p>Performs a status check. Suggested minimum timeout: 30. Suggested interval: 10.</p><p><strong>monitor</strong></p><p>Performs a detailed status check. Suggested minimum timeout: 30. Suggested interval: 10.</p><p><strong>migrate_from</strong></p><p>Executes steps necessary for migrating the resource <em>away from</em> the node. Suggested minimum timeout: 60.</p><p><strong>migrate_to</strong></p><p>Executes steps necessary for migrating the resource <em>to</em> the node. Suggested minimum timeout: 120.</p><p><strong>meta-data</strong></p><p>Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5.</p><p><strong>validate-all</strong></p><p>Performs a validation of the resource configuration. Suggested minimum timeout: 5.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The following is an example configuration for a VirtualDomain resource using the <strong>crm</strong>(8) shell:</p>
<pre>
primitive p_VirtualDomain ocf:heartbeat:VirtualDomain &#92;
  params &#92;
    config=<em>string</em> &#92;
  meta allow-migrate="true" &#92;
  op monitor depth="0" timeout="30" interval="10"
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ocf_heartbeat_VirtualDomain&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong>http://www.linux-ha.org/wiki/VirtualDomain_(resource_agent)</strong>\m[]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Linux-HA contributors (see the resource agent source for information about individual authors)</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ocf_heartbeat_VIPArip.7.html"><span aria-hidden="true">&larr;</span> ocf_heartbeat_VIPArip.7: Manages a virtual ip address through rip2</a></li>
   <li class="next"><a href="ocf_heartbeat_WAS.7.html">ocf_heartbeat_WAS.7: Manages a websphere application server instance <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
