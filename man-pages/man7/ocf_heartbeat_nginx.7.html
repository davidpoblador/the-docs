<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ocf_heartbeat_nginx: Manages an nginx web/proxy server instance</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manages an nginx web/proxy server instance">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ocf_heartbeat_nginx (7) manual">
  <meta name="twitter:description" content="Manages an nginx web/proxy server instance">
  <meta name="twitter:image" content="https://www.carta.tech/images/resource-agents-ocf_heartbeat_nginx-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/ocf_heartbeat_nginx.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ocf_heartbeat_nginx (7) manual" />
  <meta property="og:description" content="Manages an nginx web/proxy server instance" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/resource-agents-ocf_heartbeat_nginx-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ocf_heartbeat_nginx<small> (7)</small></h1>
        <p class="lead">Manages an nginx web/proxy server instance</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/ocf_heartbeat_nginx.7.html">
      <span itemprop="name">ocf_heartbeat_nginx: Manages an nginx web/proxy server instance</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/resource-agents/">
      <span itemprop="name">resource-agents</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/ocf_heartbeat_nginx.7.html">
      <span itemprop="name">ocf_heartbeat_nginx: Manages an nginx web/proxy server instance</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>nginx</strong> [start | stop | status | monitor | meta-data | validate-all]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This is the resource agent for the Nginx web/proxy server. This resource agent does not monitor POP or IMAP servers, as we don&apos;t know how to determine meaningful status for them.</p><p>The start operation ends with a loop in which monitor is repeatedly called to make sure that the server started and that it is operational. Hence, if the monitor operation does not succeed within the start operation timeout, the nginx resource will end with an error status.</p><p>The default monitor operation will verify that nginx is running.</p><p>The level 10 monitor operation by default will try and fetch the /nginx_status page - which is commented out in sample nginx configurations. Make sure that the /nginx_status page works and that the access is restricted to localhost (address 127.0.0.1) plus whatever places _outside the cluster_ you want to monitor the server from. See the status10url and status10regex attributes for more details.</p><p>The level 20 monitor operation will perform a more complex set of tests from a configuration file.</p><p>The level 30 monitor operation will run an external command to perform an arbitrary monitoring operation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTED PARAMETERS</h2>
        <div class="sectioncontent">
<p><strong>configfile</strong></p><p>The full pathname of the Nginx configuration file. This file is parsed to provide defaults for various other resource agent parameters.</p><p>(unique, optional, string, no default)</p><p><strong>httpd</strong></p><p>The full pathname of the httpd binary (optional).</p><p>(optional, string, default "/usr/sbin/httpd")</p><p><strong>port</strong></p><p>A port number that we can probe for status information using the statusurl. This will default to the port number found in the configuration file, or 80, if none can be found in the configuration file.</p><p>(optional, integer, no default)</p><p><strong>status10url</strong></p><p>The URL to monitor (the nginx server status page by default) when given a level 10 monitor operation. If left unspecified, it will be inferred from the nginx configuration file, or defaulted to /nginx_status.</p><p>If you set this, make sure that it succeeds *only* from the localhost (127.0.0.1) and no other cluster nodes. Otherwise, the cluster software may complain about it being active on multiple nodes.</p><p>(optional, string, no default)</p><p><strong>status10regex</strong></p><p>Regular expression to match in the output of status10url. Case insensitive.</p><p>(optional, string, default "Reading: [0-9]+ Writing: [0-9]+ Waiting: [0-9]+")</p><p><strong>testclient</strong></p><p>Client to use to query to Nginx for level 10 and level 20 tests. If not specified, the RA will try to find one on the system. Currently, wget and curl are supported, with curl being preferred. For example, you can set this parameter to "wget" if you prefer that to curl.</p><p>(optional, string, no default)</p><p><strong>testurl</strong></p><p>URL to test. If it does not start with "http", then it&apos;s considered to be relative to the document root address.</p><p>(optional, string, no default)</p><p><strong>test20regex</strong></p><p>Regular expression to match in the output of testurl. Case insensitive.</p><p>(optional, string, no default)</p><p><strong>testconffile</strong></p><p>A file which contains a more complex test configuration. Could be useful if you have to check more than one web application or in case sensitive info should be passed as arguments (passwords). Furthermore, using a config file is the only way to specify certain parameters.</p><p>Please see README.webapps for examples and file description.</p><p>(optional, string, no default)</p><p><strong>test20name</strong></p><p>Name of the test within the test configuration file.</p><p>(optional, string, no default)</p><p><strong>external_monitor30_cmd</strong></p><p>Command string to run which implements level 30 monitoring.</p><p>(optional, string, no default)</p><p><strong>options</strong></p><p>Extra options to apply when starting nginx.</p><p>(optional, string, no default)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTED ACTIONS</h2>
        <div class="sectioncontent">
<p>This resource agent supports the following actions (operations):</p><p><strong>start</strong></p><p>Starts the resource. Suggested minimum timeout: 40s.</p><p><strong>stop</strong></p><p>Stops the resource. Suggested minimum timeout: 60s.</p><p><strong>reload</strong></p><p>Suggested minimum timeout: 40s.</p><p><strong>status</strong></p><p>Performs a status check. Suggested minimum timeout: 30s.</p><p><strong>monitor</strong></p><p>Performs a detailed status check. Suggested minimum timeout: 30s. Suggested interval: 10s.</p><p><strong>monitor</strong></p><p>Performs a detailed status check. Suggested minimum timeout: 30s. Suggested interval: 30s.</p><p><strong>monitor</strong></p><p>Performs a detailed status check. Suggested minimum timeout: 45s.</p><p><strong>monitor</strong></p><p>Performs a detailed status check. Suggested minimum timeout: 60s.</p><p><strong>meta-data</strong></p><p>Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5.</p><p><strong>validate-all</strong></p><p>Performs a validation of the resource configuration. Suggested minimum timeout: 5.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>The following is an example configuration for a nginx resource using the <strong>crm</strong>(8) shell:</p>
<pre>
primitive p_nginx ocf:heartbeat:nginx &#92;
  op monitor timeout="30s" depth="0" interval="10s" &#92;
  op monitor timeout="30s" depth="10" interval="30s" &#92;
  op monitor timeout="45s" depth="20" &#92;
  op monitor timeout="60s" depth="30"
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ocf_heartbeat_nginx&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong>http://www.linux-ha.org/wiki/nginx_(resource_agent)</strong>\m[]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Linux-HA contributors (see the resource agent source for information about individual authors)</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ocf_heartbeat_nfsserver.7.html"><span aria-hidden="true">&larr;</span> ocf_heartbeat_nfsserver.7: Manages an nfs server</a></li>
   <li class="next"><a href="ocf_heartbeat_oracle.7.html">ocf_heartbeat_oracle.7: Manages an oracle database instance <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
