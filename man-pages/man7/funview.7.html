<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>funview: Database view support for tables</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Database view support for tables">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="funview (7) manual">
  <meta name="twitter:description" content="Database view support for tables">
  <meta name="twitter:image" content="https://www.carta.tech/images/libfuntools-dev-funview-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/funview.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="funview (7) manual" />
  <meta property="og:description" content="Database view support for tables" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libfuntools-dev-funview-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">funview<small> (7)</small></h1>
        <p class="lead">Database view support for tables</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/funview.7.html">
      <span itemprop="name">funview: Database view support for tables</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libfuntools-dev/">
      <span itemprop="name">libfuntools-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/funview.7.html">
      <span itemprop="name">funview: Database view support for tables</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>This document contains a summary of the options for utilizing database-inspired Views of tables.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Database Views</strong></p><p>In database parlance, a <strong>View</strong> defines a \*(L"virtual table\*(R", i.e., a description of row and/or column selection filters (but with no permanent storage space allocated). When used in place of a table, a View selects the specified rows and/or columns from one or more real tables. Views enable you to see complicated data tables in a more convenient format. They also can be used as a security mechanism, by restricting user access to specific columns and/or rows.  [See:</p><p>http://www.cs.unibo.it/~ciaccia/COURSES/RESOURCES/SQLTutorial/sqlch5.htm</p><p>for a good discussion of \s-1SQL\s0 Views.]</p><p>Funtools supports an expanded notion of Views for all tabular data (\s-1FITS\s0 tables, raw binary tables, and \s-1ASCII\s0 column files). Funtools Views allow you to pre-set values for the filter specification, the columns to activate, and display format (though the latter is for fundisp only).  Setting the filter and column activation values provides functionality equivalent to that of a classical database View, while the ability to set the format is similar to classical report writing capabilities.</p><p><strong>Funtools View Attributes</strong></p><p>A Funtools View is a text file containing one or more of the following columns:</p>
<pre>
  column         description
  ------         -----------------------------
  view           name of view
  file           data file name or template
  filter         filter specification
  columns        columns to activate
  format         fundisp format specification
</pre>
<p>All of the attribute columns are optional, including the <strong>view</strong> name itself. This means that a View can be named or unnamed. Unnamed Views can refer to a specific file or a template of files (obviously if neither the view or the file column is specified, the input View specification will never be used). You can specify any combination of filter, column, and format parameters. (It also is possible to apply file-specific View to other files; see the discussion on <strong>View Lists</strong> below). Each column has a size limit of 1024 characters.</p><p>For example, consider the following View file:</p><p>  view    file                    format  columns       filter   ----    ----------------------  ------  ------------  -------   x3      ${HOME}/data/snr.ev     I=%4d   x y pi pha    cir 512 512 .1   x2      ${HOME}/data/snr.ev             x y pi pha    cir 512 512 .1   x1      ${HOME}/data/snr.ev                           cir 512 512 .1   x1a     ${HOME}/data/snr.ev             x y pi pha   x0      ${HOME}/data/snr.ev   xf                              I=%4d   xc                                      x y pi pha   xr                                                    cir 512 512 .1           *.ev                            x y pi pha           *.fit                           x y dx dy     cir 400 400  3           *.fits                  I=%3d   x y dx dy     cir 400 400  3</p><p>This database example is in rdb format, i.e. using tab delimiters and permitting null values. Any valid \s-1ASCII\s0 table format is acceptable, but if you use a format that does not permit null values, it will be necessary to quote the null strings.</p><p>The first five entries (x3, x2, x1, x1a, x0) are named entries defining default values specifically for the snr.ev data file. Typically, you would use these Views by specifying View name, and the corresponding file, filter, column, and format values would be used. Note that the x0 View is essentially an alias for the pathname of this file.</p><p>The next three entries define defaults that can be applied to any file.  You typically would use these View names in conjunction with a specific file name (see <strong>View Lists</strong> below) so that the associated parameter(s) were applied to that file.</p><p>The last three entry in the database define unnamed Views that pertains to all files ending with the specified templates. In these cases, any View that specifies a file name matching the file template would be processed with the associated parameter attributes.</p><p><strong>Invoking a Funtools View (in Place of an Input File)</strong></p><p>To use a Funtools View, you simply pre-pend the \*(L"v:\*(R" prefix to a View name or a file name where an input file name usually is specified. For example:</p><p>  fundisp v:x3</p><p>specifies that the View named x3 (with its file name and associated parameters) is processed as the input file to fundisp. Using the example database, above, this is equivalent to:</p><p>  fundisp  -f "I=%4d" ${HOME}/data/snr.ev'[cir 512 512 .1]'  "x y pi pha"</p><p>That is, the format is used with fundisp's \-f (format) switch, while the filename and extension are composed of the x3 View's filename and region filter.</p><p>Similarly, executing a command such as:</p><p>  fundisp v:foo.fit</p><p>will match the unnamed View associated with the template \*(L"*.fit\*(R". This is equivalent to executing:</p><p>  fundisp foo.fit'[cir 400 400 3]' "x y dx dy"</p><p>Of course, if you omit the \*(L"v:\*(R" prefix, then no View processing takes place:</p><p>  fundisp foo.fit    # process foo.fit without any View parameters   fundisp x3         # error (assuming there is no file named x3)</p><p><strong>Basic View Matching Rules</strong></p><p>When a \*(L"v:\*(R" prefix is recognized, Funtools searches for a View database file in the following order:</p><p>  location             description   ------------         ------------------------------------   FUN_VIEWFILE         environment variable (any file name)   ./.funtools.vu       hidden file, default name   $HOME/.funtools.vu   hidden file, default name</p><p>The first View database file located is used to construct a new filename, as well as an activation column specification and a format specification. The following rules are used:</p><p>1. An attempt is made to match the input name (i.e., the part of the input View after the \*(L"v:\*(R" prefix) against the <strong>view</strong> column value (if present) of each row in the database. If a match is found, the values of all non-blank columns are saved for later use.  Also note that the first match terminates the search: i.e., the order of the database rows matters.</p><p>2. If no <strong>view</strong> match is made, an attempt is made to match the input name against the <strong>file</strong> column value (if present). Matching is performed on the full pathname of both the input name and the database file name, and on the non-directory (root) part of these files. This means that the root specification:</p><p>  fundisp v:snr.ev</p><p>will match a row in the database that has a full pathname in the file, allowing you to use a <strong>file</strong>\-matched View without having to specify the full pathname. In this example, the \*(L"v:snr.ev\*(R" View specification will match the first row (v:x3) in the database:</p><p>  x3   ${HOME}/data/snr.ev     I=%4d   x y pi pha    cir 512 512 .1</p><p>even though the row contains a fully qualified pathname as the file value. Once again, values of all non-blank columns are saved, and the first match terminates the search.</p><p>3. If neither a <strong>view</strong> or a <strong>view</strong> match has been found, then a simple template match is attempted against the <strong>view</strong> values. Template matching supports a simplified version of file globbing (not a regular expression), with support for a single \*(L"*\*(R" (all characters), \*(L"?\*(R" (single character), or \*(L"[...]\*(R" (range) specification.</p><p>4. If no template match was found on the <strong>view</strong> column, then a simple template match is attempted against the <strong>file</strong> columns.</p><p>5. If no match is found, then the filename (minus the \*(L"v:\*(R" prefix) is returned.</p><p>More on View Matching Rules -  Single vs. Multiple Matches</p><p>The matching rules described above stop after the first match, regardless of whether that match provides values for all three parameters (filter, columns, and format). In cases where a <strong>view</strong> or <strong>file</strong> match does not provide all three values, it is possible that a template match might do so. With regard to the example View database above, the x1 View provides only a filter, while omitting both the format and columns values. But note that the final rows in the database could provide the values via a template match on the filename. This sort of multiple matching is especially valuable in order to provide \*(L"global\*(R" values to several Views.</p><p>Obviously, multiple matching might not be wanted in every case. Therefore, we support both multiple matching and single matching according to the value of the \s-1FUN_VIEWMATCH\s0 environment variable.  If the \s-1FUN_VIEWMATCH\s0 environment variable exists and if its value begins with \*(L"s\*(R", then a single match is used and missing parameters are not filled in with subsequent template matches on the file name. That is, matching rules above are followed exactly as explained above.  If the value of this environment variable begins with \*(L"m\*(R" (or does not exist), then multiple matches are used to try to fill in missing parameters. In this case, template matching always takes place and missing values are taken from these template matches.</p><p>Thus, in the example above, the View specification:</p><p>  fundisp v:x1</p><p>will take the file name and filter value from the x1 View:</p><p>  x1      ${HOME}/data/snr.ev                           cir 512 512 .1</p><p>The column value then will be taken from the \*(L"*.ev\*(R" file template match against the x1 file name:</p><p>          *.ev                            x y pi pha</p><p>Note once again that order is important: missing values are taken in the order in which the template matches are processed.</p><p>View Lists -  Applying a View to Any File</p><p>It is possible to apply a named View, or even several Views, to any data file by appending a <strong>viewlist</strong> immediately after the standard \*(L"v:\*(R" prefix. A viewlist takes the form:</p><p>  :v1,v2,...vn:</p><p>where v1, v2, etc. are named Views. The two \*(L":\*(R" colon characters surrounding the list are required. Thus, the syntax for applying a viewlist to a file is:</p><p>  v::view1,view2,...viewn:filename</p><p>Note that the name after the last \*(L":\*(R" is assumed to be a file; it is not permissible (or sensible) to use a View name.</p><p>For example, the View specification:</p><p>  fundisp v::x2:foo</p><p>applies the x2 View to the file foo (even if there is a View named foo) and (in using our example database) is equivalent to:</p><p>  ./fundisp foo'[cir 512 512 .1] "x y pi pha"</p><p>The same command can be effected using a list of Views:</p><p>  fundisp v::x1,x1a:foo</p><p>What happens if a viewlist is used and the file also matches a template? Consider, for example, this View specification:</p><p>  fundisp v::x2:foo.fit</p><p>Here, the x2 View will supply filter and column values, while the template *.fit can also supply (different) filter and column values. In this case, the explicitly specified Views of the viewlist trump the matched view values.</p><p>On the other hand, if a file template match can supply a View value that is not supplied by the viewlist, then that value will be taken from the file template match. For example:</p><p>  fundisp v::x2:foo.fits</p><p>does not explicitly supply a format value, but the file match on *.fits can and does. You can avoid supplying missing values using file template matching by replacing the first \*(L":\*(R" with a \*(L"-\*(R" in a viewlist specification:</p><p>  fundisp v:-x2:foo.fits</p><p>The use of \*(L":+\*(R" to explicitly allow file template matching is also supported, but is the same as the default case. Note that the nuances of viewlist support are subject to change as our experience and understanding grow.</p><p><strong>Overriding Values Associated with a View</strong></p><p>To override values associated with a View, simply supply the override values in the correct place on the command line. Thus, given the example database described above, the command:</p><p>  fundisp v:x3</p><p>specifies that the View named x3, along with its file name and associated parameters, be processed as the input file to fundisp in this way:</p><p>  fundisp  -f "I=%4d" ${HOME}/data/snr.ev'[cir 512 512 .1]'  "x y pi pha"</p><p>To override one or more of these values, simply specify a new value for the format, filter, or columns.  For example, if your input View file contains a filter, then the View will use that filter as an override of the View filter:</p><p>  fundisp v:x3'[cir 400 400 3]'</p><p>will use the columns and format of the x3 View but not the x3 filter. Further examples are:</p><p>  fundisp v:x3 "x y dx dy"    # activate a different set of columns   fundisp -f "I=%3d" v:x3     # use a different format statement</p><p>Note that extension names, extension index values, and other non-filter specifications <strong>do not</strong> override the View filter. Thus:</p><p>  fundisp v:foo.fit[3]</p><p>will still use the filter associated with the .fit template (see above), since the \*(L"3\*(R" is an extension index, not a filter.</p><p><strong>Environment Variables</strong></p><p>The following environment variables are used by Funtools Views:</p><ul>
<li><p><strong>\s-1FUN_VIEWNAME\s0</strong> The <strong>\s-1FUN_VIEWNAME\s0</strong> environment variable specifies the name and location of the View database file. If not present, the files ./.funtools.vu and $HOME/.funtools.vu are searched for, in that order.</p></li><li><p><strong>\s-1FUN_VIEWMATCH\s0</strong> The <strong>\s-1FUN_VIEWMATCH\s0</strong> environment variable specifies whether a single match or multiple match algorithm is used to locate parameter values. If the value of this environment variable begins with \*(L"s\*(R", then a single match is used and missing parameters are not filled in with subsequent template matches on the file name. If the value begins with \*(L"m\*(R", then multiple matches are used to try to fill in missing parameters. The default is to use multiple matches.</p></li>
</ul><p><strong>Restrictions and Problems</strong></p><p>Support for overriding a filter (while not overriding extension names, extension indexes, etc.) requires that we can sense the presence of a filter in a bracket specification. It is unclear yet whether our algorithm is perfect.</p><p>Go to Funtools Help Index</p><p>Last updated: August 3, 2007</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="funtools.7.html"><span aria-hidden="true">&larr;</span> funtools.7: Fits users need tools</a></li>
   <li class="next"><a href="futex.7.html">futex.7: Fast user-space locking <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
