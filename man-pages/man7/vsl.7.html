<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>vsl: Shared memory logging</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shared memory logging">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="vsl (7) manual">
  <meta name="twitter:description" content="Shared memory logging">
  <meta name="twitter:image" content="https://www.carta.tech/images/varnish-vsl-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/vsl.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="vsl (7) manual" />
  <meta property="og:description" content="Shared memory logging" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/varnish-vsl-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">vsl<small> (7)</small></h1>
        <p class="lead">Shared memory logging</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/vsl.7.html">
      <span itemprop="name">vsl: Shared memory logging</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/varnish/">
      <span itemprop="name">varnish</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/vsl.7.html">
      <span itemprop="name">vsl: Shared memory logging</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">OVERVIEW</h2>
        <div class="sectioncontent">
<p>This document describes the format and content of all the Varnish shared memory logging tags. These tags are used by the <a href="../man1/varnishlog.1.html"><strong>varnishlog</strong>(1)</a>, <a href="../man1/varnishtop.1.html"><strong>varnishtop</strong>(1)</a>, etc. logging tools supplied with Varnish.</p><h3>VSL tags</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>Backend - Backend selected</strong></p>
  </dt>
  <dd>
    <p>Logged when a connection is selected for handling a backend request.</p><p>The format is:</p>
<pre>
%d %s %s
|  |  |
|  |  +- Backend display name
|  +---- VCL name
+------- Connection file descriptor
</pre>

  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>BackendClose - Backend connection closed</strong></p>
  </dt>
  <dd>
    <p>Logged when a backend connection is closed.</p><p>The format is:</p>
<pre>
%d %s [ %s ]
|  |    |
|  |    +- Optional reason
|  +------ Backend display name
+--------- Connection file descriptor
</pre>

  </dd>
  <dt>
    <p><strong>BackendOpen - Backend connection opened</strong></p>
  </dt>
  <dd>
    <p>Logged when a new backend connection is opened.</p><p>The format is:</p>
<pre>
%d %s %s %s
|  |  |  |
|  |  |  +- Remote port
|  |  +---- Remote address
|  +------- Backend display name
+---------- Connection file descriptor
</pre>

  </dd>
  <dt>
    <p><strong>BackendReuse - Backend connection put up for reuse</strong></p>
  </dt>
  <dd>
    <p>Logged when a backend connection is put up for reuse by a later connection.</p><p>The format is:</p>
<pre>
%d %s
|  |
|  +- Backend display name
+---- Connection file descriptor
</pre>

  </dd>
  <dt>
    <p><strong>Backend_health - Backend health check</strong></p>
  </dt>
  <dd>
    <p>The result of a backend health probe.</p><p>The format is:</p>
<pre>
%s %s %s %u %u %u %f %f %s
|  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  +- Probe HTTP response
|  |  |  |  |  |  |  +---- Average response time
|  |  |  |  |  |  +------- Response time
|  |  |  |  |  +---------- Probe window size
|  |  |  |  +------------- Probe threshold level
|  |  |  +---------------- Number of good probes in window
|  |  +------------------- Probe window bits
|  +---------------------- Status message
+------------------------- Backend name
</pre>

  </dd>
  <dt>
    <p><strong>Begin - Marks the start of a VXID</strong></p>
  </dt>
  <dd>
    <p>The first record of a VXID transaction.</p><p>The format is:</p>
<pre>
%s %d %s
|  |  |
|  |  +- Reason
|  +---- Parent vxid
+------- Type ("sess", "req" or "bereq")
</pre>

  </dd>
  <dt>
    <p><strong>BereqAcct - Backend request accounting</strong></p>
  </dt>
  <dd>
    <p>Contains byte counters from backend request processing.</p><p>The format is:</p>
<pre>
%d %d %d %d %d %d
|  |  |  |  |  |
|  |  |  |  |  +- Total bytes received
|  |  |  |  +---- Body bytes received
|  |  |  +------- Header bytes received
|  |  +---------- Total bytes transmitted
|  +------------- Body bytes transmitted
+---------------- Header bytes transmitted
</pre>

  </dd>
  <dt>
    <p><strong>BereqHeader - Backend request header</strong></p>
  </dt>
  <dd>
    <p>HTTP header contents.</p><p>The format is:</p>
<pre>
%s: %s
|   |
|   +- Header value
+----- Header name
</pre>

  </dd>
  <dt>
    <p><strong>BereqMethod - Backend request method</strong></p>
  </dt>
  <dd>
    <p>The HTTP request method used.</p>
  </dd>
  <dt>
    <p><strong>BereqProtocol - Backend request protocol</strong></p>
  </dt>
  <dd>
    <p>The HTTP protocol version information.</p>
  </dd>
  <dt>
    <p><strong>BereqURL - Backend request URL</strong></p>
  </dt>
  <dd>
    <p>The HTTP request URL.</p>
  </dd>
  <dt>
    <p><strong>BerespHeader - Backend response header</strong></p>
  </dt>
  <dd>
    <p>HTTP header contents.</p><p>The format is:</p>
<pre>
%s: %s
|   |
|   +- Header value
+----- Header name
</pre>

  </dd>
  <dt>
    <p><strong>BerespProtocol - Backend response protocol</strong></p>
  </dt>
  <dd>
    <p>The HTTP protocol version information.</p>
  </dd>
  <dt>
    <p><strong>BerespReason - Backend response response</strong></p>
  </dt>
  <dd>
    <p>The HTTP response string received.</p>
  </dd>
  <dt>
    <p><strong>BerespStatus - Backend response status</strong></p>
  </dt>
  <dd>
    <p>The HTTP status code received.</p>
  </dd>
  <dt>
    <p><strong>BogoHeader - Bogus HTTP received</strong></p>
  </dt>
  <dd>
    <p>Contains the first 20 characters of received HTTP headers we could not make sense of.  Applies to both req.http and beresp.http.</p>
  </dd>
  <dt>
    <p><strong>CLI - CLI communication</strong></p>
  </dt>
  <dd>
    <p>CLI communication between varnishd master and child process.</p>
  </dd>
  <dt>
    <p><strong>Debug - Debug messages</strong></p>
  </dt>
  <dd>
    <p>Debug messages can normally be ignored, but are sometimes helpful during trouble-shooting.  Most debug messages must be explicitly enabled with parameters.</p>
  </dd>
  <dt>
    <p><strong>ESI_BodyBytes - ESI body fragment byte counter</strong></p>
  </dt>
  <dd>
    <p>Contains the body byte count for this ESI body fragment. This number does not include any transfer encoding overhead.</p><p>The format is:</p>
<pre>
%d
|
+- Body bytes
</pre>

  </dd>
  <dt>
    <p><strong>ESI_xmlerror - ESI parser error or warning message</strong></p>
  </dt>
  <dd>
    <p>An error or warning was generated during parsing of an ESI object. The log record describes the problem encountered.</p>
  </dd>
  <dt>
    <p><strong>End - Marks the end of a VXID</strong></p>
  </dt>
  <dd>
    <p>The last record of a VXID transaction.</p>
  </dd>
  <dt>
    <p><strong>Error - Error messages</strong></p>
  </dt>
  <dd>
    <p>Error messages are stuff you probably want to know.</p>
  </dd>
  <dt>
    <p><strong>ExpBan - Object evicted due to ban</strong></p>
  </dt>
  <dd>
    <p>Logs the VXID when an object is banned.</p>
  </dd>
  <dt>
    <p><strong>ExpKill - Object expiry event</strong></p>
  </dt>
  <dd>
    <p>Logs events related to object expiry. The events are:</p>
  </dd>
  <dt>
    <p><strong>EXP_Rearm</strong></p>
  </dt>
  <dd>
    <p>Logged when the expiry time of an object changes.</p>
  </dd>
  <dt>
    <p><strong>EXP_Inbox</strong></p>
  </dt>
  <dd>
    <p>Logged when the expiry thread picks an object from the inbox for processing.</p>
  </dd>
  <dt>
    <p><strong>EXP_Kill</strong></p>
  </dt>
  <dd>
    <p>Logged when the expiry thread kills an object from the inbox.</p>
  </dd>
  <dt>
    <p><strong>EXP_When</strong></p>
  </dt>
  <dd>
    <p>Logged when the expiry thread moves an object on the binheap.</p>
  </dd>
  <dt>
    <p><strong>EXP_Expired</strong></p>
  </dt>
  <dd>
    <p>Logged when the expiry thread expires an object.</p>
  </dd>
  <dt>
    <p><strong>LRU_Cand</strong></p>
  </dt>
  <dd>
    <p>Logged when an object is evaluated for LRU force expiry.</p>
  </dd>
  <dt>
    <p><strong>LRU</strong></p>
  </dt>
  <dd>
    <p>Logged when an object is force expired due to LRU.</p>
  </dd>
  <dt>
    <p><strong>LRU_Fail</strong></p>
  </dt>
  <dd>
    <p>Logged when no suitable candidate object is found for LRU force expiry.</p><p>The format is:</p>
<pre>
EXP_Rearm p=%p E=%f e=%f f=0x%x
EXP_Inbox p=%p e=%f f=0x%x
EXP_Kill p=%p e=%f f=0x%x
EXP_When p=%p e=%f f=0x%x
EXP_Expired x=%u t=%f
LRU_Cand p=%p f=0x%x r=%d
LRU x=%u
LRU_Fail

Legend:
p=%p         Objcore pointer
t=%f         Remaining TTL (s)
e=%f         Expiry time (unix epoch)
E=%f         Old expiry time (unix epoch)
f=0x%x       Objcore flags
r=%d         Objcore refcount
x=%u         Object VXID
</pre>

  </dd>
  <dt>
    <p><strong>FetchError - Error while fetching object</strong></p>
  </dt>
  <dd>
    <p>Logs the error message of a failed fetch operation.</p>
  </dd>
  <dt>
    <p><strong>Fetch_Body - Body fetched from backend</strong></p>
  </dt>
  <dd>
    <p>Ready to fetch body from backend.</p><p>The format is:</p>
<pre>
%d (%s) %s
|   |    |
|   |    +---- &apos;stream&apos; or &apos;-&apos;
|   +--------- Text description of body fetch mode
+------------- Body fetch mode
</pre>

  </dd>
  <dt>
    <p><strong>Gzip - G(un)zip performed on object</strong></p>
  </dt>
  <dd>
    <p>A Gzip record is emitted for each instance of gzip or gunzip work performed. Worst case, an ESI transaction stored in gzip&apos;ed objects but delivered gunziped, will run into many of these.</p><p>The format is:</p>
<pre>
%c %c %c %d %d %d %d %d
|  |  |  |  |  |  |  |
|  |  |  |  |  |  |  +- Bit length of compressed data
|  |  |  |  |  |  +---- Bit location of &apos;last&apos; bit
|  |  |  |  |  +------- Bit location of first deflate block
|  |  |  |  +---------- Bytes output
|  |  |  +------------- Bytes input
|  |  +---------------- &apos;E&apos;: ESI, &apos;-&apos;: Plain object
|  +------------------- &apos;F&apos;: Fetch, &apos;D&apos;: Deliver
+---------------------- &apos;G&apos;: Gzip, &apos;U&apos;: Gunzip, &apos;u&apos;: Gunzip-test
</pre>
<p>Examples:</p>
<pre>
U F E 182 159 80 80 1392
G F E 159 173 80 1304 1314
</pre>

  </dd>
  <dt>
    <p><strong>Hash - Value added to hash</strong></p>
  </dt>
  <dd>
    <p>This value was added to the object lookup hash.</p><p>NB: This log record is masked by default.</p>
  </dd>
  <dt>
    <p><strong>Hit - Hit object in cache</strong></p>
  </dt>
  <dd>
    <p>Object looked up in cache. Shows the VXID of the object.</p>
  </dd>
  <dt>
    <p><strong>HitPass - Hit for pass object in cache.</strong></p>
  </dt>
  <dd>
    <p>Hit-for-pass object looked up in cache. Shows the VXID of the hit-for-pass object.</p>
  </dd>
  <dt>
    <p><strong>HttpGarbage - Unparseable HTTP request</strong></p>
  </dt>
  <dd>
    <p>Logs the content of unparseable HTTP requests.</p>
  </dd>
  <dt>
    <p><strong>Length - Size of object body</strong></p>
  </dt>
  <dd>
    <p>Logs the size of a fetch object body.</p>
  </dd>
  <dt>
    <p><strong>Link - Links to a child VXID</strong></p>
  </dt>
  <dd>
    <p>Links this VXID to any child VXID it initiates.</p><p>The format is:</p>
<pre>
%s %d %s
|  |  |
|  |  +- Reason
|  +---- Child vxid
+------- Child type ("req" or "bereq")
</pre>

  </dd>
  <dt>
    <p><strong>LostHeader - Failed attempt to set HTTP header</strong></p>
  </dt>
  <dd>
    <p>Logs the header name of a failed HTTP header operation due to resource exhaustion or configured limits.</p>
  </dd>
  <dt>
    <p><strong>ObjHeader - Object header</strong></p>
  </dt>
  <dd>
    <p>HTTP header contents.</p><p>The format is:</p>
<pre>
%s: %s
|   |
|   +- Header value
+----- Header name
</pre>

  </dd>
  <dt>
    <p><strong>ObjProtocol - Object protocol</strong></p>
  </dt>
  <dd>
    <p>The HTTP protocol version information.</p>
  </dd>
  <dt>
    <p><strong>ObjReason - Object response</strong></p>
  </dt>
  <dd>
    <p>The HTTP response string received.</p>
  </dd>
  <dt>
    <p><strong>ObjStatus - Object status</strong></p>
  </dt>
  <dd>
    <p>The HTTP status code received.</p>
  </dd>
  <dt>
    <p><strong>PipeAcct - Pipe byte counts</strong></p>
  </dt>
  <dd>
    <p>Contains byte counters for pipe sessions.</p><p>The format is:</p>
<pre>
%d %d %d %d
|  |  |  |
|  |  |  +------- Piped bytes to client
|  |  +---------- Piped bytes from client
|  +------------- Backend request headers
+---------------- Client request headers
</pre>

  </dd>
  <dt>
    <p><strong>ReqAcct - Request handling byte counts</strong></p>
  </dt>
  <dd>
    <p>Contains byte counts for the request handling. This record is not logged for ESI sub-requests, but the sub-requests&apos; response body count is added to the main request.</p><p>The format is:</p>
<pre>
%d %d %d %d %d %d
|  |  |  |  |  |
|  |  |  |  |  +- Total bytes transmitted
|  |  |  |  +---- Body bytes transmitted
|  |  |  +------- Header bytes transmitted
|  |  +---------- Total bytes received
|  +------------- Body bytes received
+---------------- Header bytes received
</pre>

  </dd>
  <dt>
    <p><strong>ReqHeader - Client request header</strong></p>
  </dt>
  <dd>
    <p>HTTP header contents.</p><p>The format is:</p>
<pre>
%s: %s
|   |
|   +- Header value
+----- Header name
</pre>

  </dd>
  <dt>
    <p><strong>ReqMethod - Client request method</strong></p>
  </dt>
  <dd>
    <p>The HTTP request method used.</p>
  </dd>
  <dt>
    <p><strong>ReqProtocol - Client request protocol</strong></p>
  </dt>
  <dd>
    <p>The HTTP protocol version information.</p>
  </dd>
  <dt>
    <p><strong>ReqStart - Client request start</strong></p>
  </dt>
  <dd>
    <p>Start of request processing. Logs the client IP address and port number.</p><p>The format is:</p>
<pre>
%s %s
|  |
|  +- Port number
+---- IP address
</pre>

  </dd>
  <dt>
    <p><strong>ReqURL - Client request URL</strong></p>
  </dt>
  <dd>
    <p>The HTTP request URL.</p>
  </dd>
  <dt>
    <p><strong>RespHeader - Client response header</strong></p>
  </dt>
  <dd>
    <p>HTTP header contents.</p><p>The format is:</p>
<pre>
%s: %s
|   |
|   +- Header value
+----- Header name
</pre>

  </dd>
  <dt>
    <p><strong>RespProtocol - Client response protocol</strong></p>
  </dt>
  <dd>
    <p>The HTTP protocol version information.</p>
  </dd>
  <dt>
    <p><strong>RespReason - Client response response</strong></p>
  </dt>
  <dd>
    <p>The HTTP response string received.</p>
  </dd>
  <dt>
    <p><strong>RespStatus - Client response status</strong></p>
  </dt>
  <dd>
    <p>The HTTP status code received.</p>
  </dd>
  <dt>
    <p><strong>SessClose - Client connection closed</strong></p>
  </dt>
  <dd>
    <p>SessionClose is the last record for any client connection.</p><p>The format is:</p>
<pre>
%s %f
|  |
|  +- How long the session was open
+---- Why the connection closed
</pre>

  </dd>
  <dt>
    <p><strong>SessOpen - Client connection opened</strong></p>
  </dt>
  <dd>
    <p>The first record for a client connection, with the socket-endpoints of the connection.</p><p>The format is:</p>
<pre>
%s %d %s %s %s %d
|  |  |  |  |  |
|  |  |  |  |  +- File descriptor number
|  |  |  |  +---- Local TCP port (&apos;-&apos; if !$log_local_addr)
|  |  |  +------- Local IPv4/6 address (&apos;-&apos; if !$log_local_addr)
|  |  +---------- Listen socket
|  +------------- Client TCP socket
+---------------- Client IPv4/6 address
</pre>

  </dd>
  <dt>
    <p><strong>Storage - Where object is stored</strong></p>
  </dt>
  <dd>
    <p>Type and name of the storage backend the object is stored in.</p><p>The format is:</p>
<pre>
%s %s
|  |
|  +- Name of storage backend
+---- Type ("malloc", "file", "persistent" etc.)
</pre>

  </dd>
  <dt>
    <p><strong>TTL - TTL set on object</strong></p>
  </dt>
  <dd>
    <p>A TTL record is emitted whenever the ttl, grace or keep values for an object is set.</p><p>The format is:</p>
<pre>
%s %d %d %d %d %d [ %d %u %u ]
|  |  |  |  |  |    |  |  |
|  |  |  |  |  |    |  |  +- Max-Age from Cache-Control header
|  |  |  |  |  |    |  +---- Expires header
|  |  |  |  |  |    +------- Date header
|  |  |  |  |  +------------ Age (incl Age: header value)
|  |  |  |  +--------------- Reference time for TTL
|  |  |  +------------------ Keep
|  |  +--------------------- Grace
|  +------------------------ TTL
+--------------------------- "RFC" or "VCL"
</pre>
<p>The last four fields are only present in "RFC" headers.</p><p>Examples:</p>
<pre>
RFC 19 -1 -1 1312966109 4 0 0 23
VCL 10 -1 -1 1312966109 4
VCL 7 -1 -1 1312966111 6
VCL 7 120 -1 1312966111 6
VCL 7 120 3600 1312966111 6
VCL 12 120 3600 1312966113 8
</pre>

  </dd>
  <dt>
    <p><strong>Timestamp - Timing information</strong></p>
  </dt>
  <dd>
    <p>Contains timing information for the Varnish worker threads.</p><p>Time stamps are issued by Varnish on certain events, and show the absolute time of the event, the time spent since the start of the work unit, and the time spent since the last timestamp was logged. See <a href="../man7/vsl.7.html"><strong>vsl</strong>(7)</a> for information about the individual timestamps.</p><p>The format is:</p>
<pre>
%s: %f %f %f
|   |  |  |
|   |  |  +- Time since last timestamp
|   |  +---- Time since start of work unit
|   +------- Absolute time of event
+----------- Event label
</pre>

  </dd>
  <dt>
    <p><strong>VCL_Error - VCL execution error message</strong></p>
  </dt>
  <dd>
    <p>Logs error messages generated during VCL execution.</p>
  </dd>
  <dt>
    <p><strong>VCL_Log - Log statement from VCL</strong></p>
  </dt>
  <dd>
    <p>User generated log messages insert from VCL through std.log()</p>
  </dd>
  <dt>
    <p><strong>VCL_acl - VSL ACL check results</strong></p>
  </dt>
  <dd>
    <p>Logs VCL ACL evaluation results.</p>
  </dd>
  <dt>
    <p><strong>VCL_call - VCL method called</strong></p>
  </dt>
  <dd>
    <p>Logs the VCL method name when a VCL method is called.</p>
  </dd>
  <dt>
    <p><strong>VCL_return - VCL method return value</strong></p>
  </dt>
  <dd>
    <p>Logs the VCL method terminating statement.</p>
  </dd>
  <dt>
    <p><strong>VCL_trace - VCL trace data</strong></p>
  </dt>
  <dd>
    <p>Logs VCL execution trace data.</p><p>The format is:</p>
<pre>
%u %u.%u
|  |  |
|  |  +- VCL program line position
|  +---- VCL program line number
+------- VCL trace point index
</pre>
<p>NB: This log record is masked by default.</p>
  </dd>
  <dt>
    <p><strong>VSL - VSL API warnings and error message</strong></p>
  </dt>
  <dd>
    <p>Warnings and error messages genererated by the VSL API while reading the shared memory log.</p>
  </dd>
  <dt>
    <p><strong>WorkThread - Logs thread start/stop events</strong></p>
  </dt>
  <dd>
    <p>Logs worker thread creation and termination events.</p><p>The format is:</p>
<pre>
%p %s
|  |
|  +- [start|end]
+---- Worker struct pointer
</pre>
<p>NB: This log record is masked by default.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TIMESTAMPS</h2>
        <div class="sectioncontent">
<p>Timestamps are inserted in the log on completing certain events during the worker thread&apos;s task handling. The timestamps has a label showing which event was completed. The reported fields show the absolute time of the event, the time spent since the start of the task and the time spent since the last timestamp was logged.</p><p>The timestamps logged automatically by Varnish are inserted after completing events that are expected to have delays (e.g. network IO or spending time on a waitinglist). Timestamps can also be inserted from VCL using the std.timestamp() method. If one is doing time consuming tasks in the VCL configuration, it&apos;s a good idea to log a timestamp after completing that task. This keeps the timing information in subsequent timestamps from including the time spent on the VCL event.</p><h3>Request handling timestamps</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>Start</strong></p>
  </dt>
  <dd>
    <p>The start of request processing (first byte received or restart).</p>
  </dd>
  <dt>
    <p><strong>Req</strong></p>
  </dt>
  <dd>
    <p>Complete client request received.</p>
  </dd>
  <dt>
    <p><strong>ReqBody</strong></p>
  </dt>
  <dd>
    <p>Client request body processed (discarded, cached or passed to the backend).</p>
  </dd>
  <dt>
    <p><strong>Waitinglist</strong></p>
  </dt>
  <dd>
    <p>Came off waitinglist.</p>
  </dd>
  <dt>
    <p><strong>Fetch</strong></p>
  </dt>
  <dd>
    <p>Fetch processing finished (completely fetched or ready for streaming).</p>
  </dd>
  <dt>
    <p><strong>Process</strong></p>
  </dt>
  <dd>
    <p>Processing finished, ready to deliver the client response.</p>
  </dd>
  <dt>
    <p><strong>Resp</strong></p>
  </dt>
  <dd>
    <p>Delivery of response to the client finished.</p>
  </dd>
  <dt>
    <p><strong>Restart</strong></p>
  </dt>
  <dd>
    <p>Client request is being restarted.</p>
  </dd>

</dl>

<h3>Pipe handling timestamps</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>Pipe</strong></p>
  </dt>
  <dd>
    <p>Opened a pipe to the backend and forwarded the request.</p>
  </dd>
  <dt>
    <p><strong>PipeSess</strong></p>
  </dt>
  <dd>
    <p>The pipe session has finished.</p>
  </dd>

</dl>

<h3>Backend fetch timestamps</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>Start</strong></p>
  </dt>
  <dd>
    <p>Start of the backend fetch processing.</p>
  </dd>
  <dt>
    <p><strong>Bereq</strong></p>
  </dt>
  <dd>
    <p>Backend request sent.</p>
  </dd>
  <dt>
    <p><strong>Beresp</strong></p>
  </dt>
  <dd>
    <p>Backend response headers received.</p>
  </dd>
  <dt>
    <p><strong>BerespBody</strong></p>
  </dt>
  <dd>
    <p>Backend response body received.</p>
  </dd>
  <dt>
    <p><strong>Retry</strong></p>
  </dt>
  <dd>
    <p>Backend request is being retried.</p>
  </dd>
  <dt>
    <p><strong>Error</strong></p>
  </dt>
  <dd>
    <p>Backend request failed to vcl_backend_error.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>This document was initially written by Poul-Henning Kamp, and later updated by Martin Blix Grydeland.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO vsl&hellip;</h2>
        <div class="sectioncontent">
<ul>
<li><p><a href="../man1/varnishlog.1.html"><strong>varnishlog</strong>(1)</a></p></li><li><p><a href="../man1/varnishhist.1.html"><strong>varnishhist</strong>(1)</a></p></li><li><p><a href="../man1/varnishncsa.1.html"><strong>varnishncsa</strong>(1)</a></p></li><li><p><a href="../man1/varnishtop.1.html"><strong>varnishtop</strong>(1)</a></p></li>
</ul>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="voxbo-fileformats.7.html"><span aria-hidden="true">&larr;</span> voxbo-fileformats.7: General information about file format support in voxbo</a></li>
   <li class="next"><a href="waffle.7.html">waffle.7: A library for selecting an opengl api and window system at runtime <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
