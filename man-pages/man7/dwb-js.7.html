<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dwb-js: Dwbs javascript api documentation</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Dwbs javascript api documentation">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dwb-js (7) manual">
  <meta name="twitter:description" content="Dwbs javascript api documentation">
  <meta name="twitter:image" content="https://www.carta.tech/images/dwb-dwb-js-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/dwb-js.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dwb-js (7) manual" />
  <meta property="og:description" content="Dwbs javascript api documentation" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dwb-dwb-js-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dwb-js<small> (7)</small></h1>
        <p class="lead">Dwbs javascript api documentation</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/dwb-js.7.html">
      <span itemprop="name">dwb-js: Dwbs javascript api documentation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dwb/">
      <span itemprop="name">dwb</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/dwb-js.7.html">
      <span itemprop="name">dwb-js: Dwbs javascript api documentation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>dwb provides a javascript api that can be used to write userscripts or extensions for dwb.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GETTING STARTED</h2>
        <div class="sectioncontent">
<p>Scripts that use the javascript api must be located in <strong>$XDG_CONFIG_HOME/dwb/userscripts</strong> like any other script. Scripts that use the javascript api must either start with</p>
<pre>
#!javascript
</pre>
<p>or with</p>
<pre>
//!javascript
</pre>
<p>All native javascript methods can be used in scripts, however there are limitations:</p><p>The execution context of userscripts is completely separated from the web execution context. Due to security concerns it is not possible to communicate with the web execution context, it is only possible to inject scripts into the web context.</p><p>In contrast to the global window object in the web execution context, the global object is a readonly object, i.e. it is not possible to set properties on the global object, see also <strong>Global data</strong> for details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GLOBAL</h2>
        <div class="sectioncontent">
<h3>Properties</h3>
<p><em>global (Object, read)</em></p><p>Refers to the global object</p><p><em>session (SoupSession, read)</em></p><p>The webkit session</p>
<h3>Methods</h3>
<p><strong>void __assert__(Expression expression)</strong></p><p>Prints an assertion message and returns, if called in the global context of a script it stops the execution of the script. Note that __assert__ is not actually a function but a macro, a ; is mandatory at the end of an __assert__ statement.</p><p><em>expression</em></p><p>An expression that evaluates to true or false.</p><p><strong>void __profile__(String profile, ...)</strong></p><p>Use this script only for the specified profiles. If the current profile doesn\(cqt match the specified profiles the script will stop immediately. This macro must be defined at the beginning of the script. Note that __profile__ is a macro, a ; is mandatory at the end of a __profile__ statement.</p><p><em>profile</em></p><p>A list of profiles that use this script.</p><p><strong>Boolean bind(String shortcut, Function callback, [String name])</strong></p><p>Bind a javascript function to a shortcut. This is the preferred method of binding keys to shortcuts since the shortcut is evaluated using the native method, but also the keyPress-signal can be used to bind shortcuts.</p><p><em>shortcut</em></p><p>A shortcut, will be parsed the same way as if set in dwb:keys</p><p><em>callback</em></p><p>Callback function that will be called when the shortcut is pressed</p><p><em>name</em></p><p>A name that identifies the function on command line, optional</p><p><strong>returns</strong></p><p>true if the function was bound successfully</p><p><strong>Boolean execute(String command)</strong></p><p>Executes a dwb command</p><p><em>command</em></p><p>a dwb command to execute, will be parsed the same way as if executed from commandline</p><p><strong>returns</strong></p><p>true if execution was successful</p><p><strong>Boolean exit()</strong></p><p>Exit dwb, must be called if the script is running from commandline.</p><p><strong>Boolean hint(String shortcut, Function callback, [String command], [String selector])</strong></p><p>Adds a custom hintmode, similar to bind but executes the function before the hint will be followed, use unbind to remove the hintmode</p><p><em>shortcut</em></p><p>A shortcut to start the hint mode.</p><p><em>callback</em></p><p>The callback function, that will be called before the hint is followed, see followHint. To handle the hint and prevent dwb from following the hint the callback must return true. The callback won\(cqt be called if escape was pressed.</p><p><em>command</em></p><p>The command to start the hint mode, optional.</p><p><em>selector</em></p><p>A css selector passed to querySelectorAll, optional.</p><p><strong>Object include(String path, [Boolean global])</strong></p><p>Includes a file. Note that there is only one context, all scripts are executed in this context. Included files are not visible in other scripts unless true is passed as second parameter.</p><p><em>path</em></p><p>Path to a file to include</p><p><em>global</em></p><p>Whether to include the script into the global scope, optional</p><p><strong>returns</strong></p><p>The return value of the included file</p><p><strong>Note</strong></p><p>Scripts included with include are either visible in the global scope or invisible, even in the including script. To use an included script it can return an object with its public objects:</p>
<pre>
// included script

var private = 37;
return {
  getPrivate : function () {
    return private;
  }
};

// Scripts that includes the above
var i = include("/path/to/script");
var p = i.getPrivate();               // 37
</pre>
<p>or define a module that can be shared:</p>
<pre>
// included script

var private = 37;
provide("foo", {
    getPrivate : function() {
        return private;
    }
});

// Scripts that includes the above
var i = include("/path/to/script");
require(["foo"], function(foo) {
    var bar = foo.getPrivate();               // 37
})
</pre>
<p><strong>void provide(String name, Object module)</strong></p><p>Defines a module that can be used in other scripts, see MODULES for details.</p><p><em>name</em></p><p>Name of the module</p><p><em>module</em></p><p>The module</p><p><strong>void replace(String name, Object module)</strong></p><p>Same as provide but replaces the module if it was already defined.</p><p><em>name</em></p><p>Name of the module</p><p><em>module</em></p><p>The module, if omitted the module will be deleted, all references to that module will reference an empty object afterwards, optional.</p><p><strong>void require(Array names, Function callback)</strong></p><p>Load modules defined with provide.</p><p><em>names</em></p><p>An array of module names or null to get all modules, a module name can also contain a path, the path must be separated with a <strong>!</strong> from the module name, see also MODULES for details.</p><p><em>callback</em></p><p>A callback function that is called after initialization of all scripts and modules. The parameters of the callback function correspond to the names array. If <strong>names</strong> is null the function is called with one parameter that contains all modules, see also MODULES for examples.</p><p><strong>Number unbind(Function func|String name)</strong></p><p>Unbind a shortcut that was previously bound with bind</p><p><em>func</em> or <em>name</em></p><p>Either the function or the optional name passed to bind.</p><p><strong>returns</strong></p><p>true if the function was unbound</p><p><strong>Object xinclude(String path)</strong></p><p>Include scripts from an archive.</p><p>Same as include but this function can only be called from scripts inside an archive, so this is mostly useful in extensions. However it is possible to include scripts from an archive calling the internal function <strong>_xinclude</strong> which takes two parameters, the path of the archive and the path of the included file in the archive. All scripts inside an archive share an object <strong>exports</strong> which can be used to share data between scripts in an archive, all exports objects have a readonly property id which is unique to all archives, it can be used together with require/provide to define unique module names.</p><p><em>path</em></p><p>Path of the file in the archive</p><p><strong>returns</strong></p><p>The object returned from the included file</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GLOBAL OBJECTS</h2>
        <div class="sectioncontent">
<h3>data</h3>
<p>The data object can be used to determine internally used data securely. All properties are readonly Strings.</p><p><em>data.bookmarks</em></p><p>Bookmark file</p><p><em>data.cacheDir</em></p><p>Cache directory</p><p><em>data.configDir</em></p><p>Config directory</p><p><em>data.cookies</em></p><p>Cookie file</p><p><em>data.cookiesWhitelist</em></p><p>Whitelist for persistent cookies</p><p><em>data.customKeys</em></p><p>Custom keyboard shortcuts</p><p><em>data.history</em></p><p>History file</p><p><em>data.keys</em></p><p>Shortcuts configuration file</p><p><em>data.pluginsWhitelist</em></p><p>Whitelist for the plugin blocker</p><p><em>data.profile</em></p><p>Profile which will be <strong>default</strong> unless another profile is specified on command line</p><p><em>data.quickmarks</em></p><p>Quickmark file</p><p><em>data.scriptWhitelist</em></p><p>Whitelist for scripts</p><p><em>data.session</em></p><p>File with stored sessions for this profile</p><p><em>data.sessionCookiesWhitelist</em></p><p>Whitelist for session cookies</p><p><em>data.settings</em></p><p>Settings configuration file</p><p><em>data.searchEngines</em></p><p>Searchengines</p><p><strong>Array data.parse(String name)</strong></p><p>Parses data into an array</p><p><em>prompt</em></p><p>Name of the data to parse, can be one of bookmarks, cookiesWhitelist, sessionCookiesWhitelist, scriptWhitelist, pluginsWhitelist, quickmarks or searchEngines.</p><p><strong>returns</strong></p><p>Array of parsed objects; quickmarks will return an array of objects with properties mark and url and searchEngines will return an array of objects with properties keyword, url and host. All other values will return an array of strings.</p>
<h3>io</h3>
<p>The io object implements methods for input and output.</p><p><strong>void io.confirm(String prompt)</strong></p><p>Shows a confirmation prompt.</p><p><em>prompt</em></p><p>The prompt message</p><p><strong>returns</strong></p><p>True if <strong>y</strong> was pressed, false if <strong>n</strong> or Escape was pressed</p><p><strong>void io.debug([Object detail])</strong></p><p>Prints a debug message and the call stack to stderr.</p><p><em>detail</em></p><p>Message details, optional</p><p><em>detail.message</em></p><p>The message to show, optional</p><p><em>detail.error</em></p><p>An Error object, optional</p><p><em>detail.arguments</em></p><p>Arguments, optional</p><p><strong>Array io.dirNames(String path)</strong></p><p>Get directory entries.</p><p><em>path</em></p><p>A path to a directory</p><p><strong>returns</strong></p><p>An array with the directory names</p><p><strong>void io.err(String text, [String ...])</strong></p><p>Print text to stderr</p><p><em>text</em></p><p>The text to print</p><p>...</p><p>Additional arguments, will be printed comma sperated</p><p><strong>void io.error(String text)</strong></p><p>Shows an error message in the browser window.</p><p><em>text</em></p><p>The message to show</p><p><strong>void io.notify(String text)</strong></p><p>Shows a message in the browser window.</p><p><em>text</em></p><p>The message to show</p><p><strong>void io.out(String text, [String ...])</strong></p><p>Print text to stdout</p><p><em>text</em></p><p>The text to print</p><p>...</p><p>Additional arguments, will be printed comma sperated</p><p><strong>String io.prompt(String text, [Boolean visible])</strong></p><p>Gets user input synchronously.</p><p><em>text</em></p><p>The message for the prompt</p><p><em>visible</em></p><p>Whether the chars should be visible, pass false for a password prompt, default true, optional</p><p><strong>returns</strong></p><p>The text that was entered or null</p><p><strong>String io.read(String path)</strong></p><p>Read from a file.</p><p><em>path</em></p><p>Path to a file that should be read</p><p><strong>returns</strong></p><p>A string with the file content</p><p><strong>Boolean io.write(String path, String mode, String text)</strong></p><p>Write to a file</p><p><em>path</em></p><p>Path to a file to write to</p><p><em>mode</em></p><p>Either "a" to append to the file, or "w" to strip the file or create a new file.</p><p><em>text</em></p><p>The text that should be written to the file</p><p><strong>returns</strong></p><p>true if writing was successful</p>
<h3>system</h3>
<p>The system object implements system methods.</p><p><strong>Boolean system.fileTest(String path, FileTest flags)</strong></p><p>Checks for FileTest flags on a file.</p><p><em>path</em></p><p>Path to a file to check</p><p><em>flags</em></p><p>The flags to test</p><p><strong>returns</strong></p><p>true if any of the test on the flags is true</p><p><strong>String system.getEnv(String name)</strong></p><p>Get a system environment variable</p><p><em>name</em></p><p>Name of the variable</p><p><strong>returns</strong></p><p>The variable or null if the variable wasn\(cqt found</p><p><strong>Number system.getPid()</strong></p><p>Get the current process id of the instance.</p><p><strong>returns</strong></p><p>The process id.</p><p><strong>Boolean system.mkdir(String path, Number mode)</strong></p><p>Creates a directory and all parent directories.</p><p><em>path</em></p><p>Path to create</p><p><em>mode</em></p><p>The permissions the directory will get</p><p><strong>returns</strong></p><p>true if creation was successful or directory already existed</p><p><strong>Deferred system.spawn(String command, [Object options])</strong></p><p>Executes a shell command using the default search path</p><p><em>command</em></p><p>The command to execute</p><p><em>options</em></p><p>Options</p><p><em>options.onStdout</em></p><p>A callback function that is called when a line from stdout was read. The function takes one parameter, the line that has been read. To get the complete stdout use either onFinished or the Deferred returned from system.spawn.</p><p><em>options.cacheStdout</em></p><p>Whether stdout should be cached. If onStdout is defined stdout will be cached automatically. If it isn\(cqt defined and stdout is required in onFinished or in the Deferred\(cqs resolve function cacheStdout must be set to true, default: false.</p><p><em>options.onStderr</em></p><p>A callback function that is called when a line from stderr was read. The function takes one parameter, the line that has been read. To get the complete stderr use either onFinished or the Deferred returned from system.spawn.</p><p><em>options.cacheStderr</em></p><p>Whether stderr should be cached. If onStderr is defined stderr will be cached automatically. If it isn\(cqt defined and stderr is required in onFinished or in the Deferred\(cqs reject function cacheStderr must be set to true, default: false.</p><p><em>options.onFinished</em></p><p>A callback that will be called when the child process has terminated. The callback takes one argument, an object that contains stdout, stderr and status, i.e. the return code of the child process.</p><p><em>options.stdin</em></p><p>String that will be piped to stdin of the child's process.</p><p><em>options.environment</em></p><p>Hash of environment variables that will be set in the child's environment</p><p><strong>returns</strong></p><p>A deferred, it will be resolved if the child exits normally, it will be rejected if the child process exits abnormally. The argument passed to resolve and reject is an Object containing stdout if caching of stdout is enabled (see cacheStdout), stderr if caching of stderr is enabled (see cacheStderr) and status, i.e. the return code of the child process.</p><p><strong>Object system.spawnSync(String command, [Object environment])</strong></p><p>Executes a shell command synchronously using the default search path</p><p><em>command</em></p><p>The command to execute</p><p><em>environment</em></p><p>Object that can be used to add environment variables to the children environment, optional.</p><p><strong>returns</strong></p><p>An object that contains stdout, stderr and status.</p>
<h3>tabs</h3>
<p>The tabs object is an array like object that can be used to get webviews. It has the following properties.</p><p><em>tabs.current (webview, read)</em></p><p>The currently focused webview</p><p><em>tabs.length (Number, read)</em></p><p>Total number of tabs</p><p><em>tabs.number (Number, read)</em></p><p>Number of the currently focused tab</p><p>Additionally tabs implements all ECMAScript 5 array methods like forEach, map, filter, ...</p>
<h3>net</h3>
<p>Network related functions</p><p><strong>Array[Cookie] net.allCookies()</strong></p><p>Gets all cookies from the cookie jar.</p><p><strong>returns</strong></p><p>An array of cookies.</p><p><strong>void net.clearCookies()</strong></p><p>Removes all cookies from the cookie jar</p><p><strong>String net.domainFromHost(String hostname)</strong></p><p>Gets the base domain name from a hostname where the base domain name is the effective second level domain name, e.g. for www.example.com it will be example.com, for www.example.co.uk it will be example.co.uk.</p><p><em>hostname</em></p><p>a hostname</p><p><strong>returns</strong></p><p>the base domain</p><p><strong>Boolean net.domainMatch(String domain, String pattern)</strong></p><p>Checks if two domain match, also checking for .tld which matches all top level domains.</p><p><em>domain</em></p><p>A domain name</p><p><em>pattern</em></p><p>The domain pattern to check</p><p><strong>returns</strong></p><p>True if the host matches</p><p><strong>Boolean net.hostMatch(String host, String pattern)</strong></p><p>Checks if two hosts match, also checking for .tld which matches all top level domains.</p><p><em>domain</em></p><p>A host name</p><p><em>pattern</em></p><p>The host pattern to check</p><p><strong>returns</strong></p><p>True if the host matches</p><p><strong>SoupURI net.parseUri(String uri)</strong></p><p>Parses an uri to a SoupURI object, see also <em>SOUPURI</em>.</p><p><em>domain</em></p><p>The uri to parse</p><p><strong>returns</strong></p><p>A parsed uri or <strong>null</strong> if the uri isn\(cqt valid according to RFC 3986.</p><p><strong>Array[Cookie] net.persistentCookies()</strong></p><p>Gets all persistent cookies from the cookie jar.</p><p><strong>returns</strong></p><p>An array of cookies.</p><p><strong>void net.sendRequest(String uri, Function callback, [String method], [Object data])</strong></p><p>Sends a http-request.</p><p><em>uri</em></p><p>The uri the request will be sent to.</p><p><em>callback</em></p><p>A callback that will be called when the request is finished, the callback has 2 parameters, the first will be an object that contains body and headers, the second the associated SoupMessage.</p><p><em>method</em></p><p>The http request method, default GET, optional.</p><p><em>data</em></p><p>Data to sent if method is POST</p><p><em>data.contentType</em></p><p>The content type</p><p><em>data.data</em></p><p>The data to sent</p><p><strong>returns</strong></p><p>True if the request was sent.</p><p><strong>Object net.sendRequestSync(String uri, [String method])</strong></p><p>Sends a http-request synchronously.</p><p><em>uri</em></p><p>The uri the request will be sent to.</p><p><em>method</em></p><p>The http request method, default GET, optional.</p><p><strong>returns</strong></p><p>Object that contains the response body, the response headers and the http status code of the request.</p><p><strong>Array[Cookie] net.sessionCookies()</strong></p><p>Gets all session cookies from the cookie jar.</p><p><strong>returns</strong></p><p>An array of cookies.</p>
<h3>timer</h3>
<p>Functions for timed execution</p><p><strong>Number timer.start(Number interval, Function func)</strong></p><p>Executes a function repeatedly until the function returns false or timerStop is called on the id returned from this function</p><p><em>interval</em></p><p>Interval in milliseconds</p><p><em>func</em></p><p>Function to execute</p><p><strong>returns</strong></p><p>An id that can be passed to timerStop</p><p><strong>Boolean timer.stop(Number id)</strong></p><p>Stops a timer started by timerStart</p><p><em>id</em></p><p>The id returned from timerStart</p><p><strong>returns</strong></p><p>true if the timer was stopped</p>
<h3>util</h3>
<p>The util object implements helper methods.</p><p><strong>String util.base64Decode(String text)</strong></p><p>Decodes a base64-encoded string to a string.</p><p><em>text</em></p><p>The string to decode</p><p><strong>returns</strong></p><p>The decoded string</p><p><strong>String util.base64Encode(String text)</strong></p><p>Encodes a string to base64.</p><p><em>text</em></p><p>The string to encode</p><p><strong>returns</strong></p><p>A base64-representation of the string</p><p><strong>String util.camelize(String text)</strong></p><p>Converts a non-camelcase string to a camelcase string.</p><p><em>text</em></p><p>A non-camelcase string</p><p><strong>returns</strong></p><p>The a camelcase string</p><p><strong>String util.checksum(String data, ChecksumType type)</strong></p><p>Computes a checksum for given data.</p><p><em>shortcut</em></p><p>The to compute the checksum for.</p><p><em>type</em></p><p>The type of the checksum, optional, defaults to ChecksumType.sha256</p><p><strong>returns</strong></p><p>The checksum</p><p><strong>Object util.clone(Object object)</strong></p><p>Clones an object, circular references are not supported.</p><p><em>object</em></p><p>The object to clone</p><p><strong>returns</strong></p><p>A copy of the object</p><p><strong>String util.getBody(Function func)</strong></p><p>Gets the body of a function, useful for scripts that will be injected into sites.</p><p><em>func</em></p><p>A function</p><p><strong>returns</strong></p><p>The body of the function as a string</p><p><strong>String util.dispatchEvent(Number event, Modifier modifier, Number keyval)</strong></p><p>Dispatches a keyboard or mouse event.</p><p><em>object</em></p><p>Event details, see buttonPress, buttonRelease, keyPress or keyRelease for details.</p><p><em>object.type</em></p><p>Type of the event, can be either buttonpress (4), doubleclick (5), tripleclick (6), buttonrelease (7), keypress (8) or keyrelease (9).</p><p><strong>returns</strong></p><p>True if the event was dispatched</p><p><strong>Number util.getMode()</strong></p><p>Gets the the current mode.</p><p><strong>returns</strong></p><p>The mode, see Modes for possible modes.</p><p><strong>String util.getSelection()</strong></p><p>Get selected text from the focused webview.</p><p><strong>returns</strong></p><p>The selection or null if no text was selected.</p><p><strong>String util.hereDoc(Function doc)</strong></p><p>Creates a multiline string.</p><p><em>doc</em></p><p>A function, the body of the function must contain the here document. The content must be wrapped in /<strong>HEREDOC ...HEREDOC</strong>/</p><p><strong>String util.markupEscape(String text)</strong></p><p>Escapes text for usage with pango markup.</p><p><em>text</em></p><p>A text to escape</p><p><strong>returns</strong></p><p>The escaped text or <em>null</em>;</p><p><strong>String util.mixin(Object self, Object ...)</strong></p><p>Mixes properties of objects into an object. Properties are mixed in from left to right, so properties will not be overwritten in the leftmost object if they are already defined.</p><p><em>self</em></p><p>An object</p><p><em>Object...</em></p><p>Variable number of objects to mix in.</p><p><strong>returns</strong></p><p>self or a new object if self is null or undefined</p><p><strong>void util.tabComplete(String label, Array items, Function callback, [Boolean readonly])</strong></p><p>Initiates tab completion.</p><p><em>label</em></p><p>The command line label</p><p><em>items</em></p><p>An array of objects, each object can have 2 properties, left which will be the left completion label and right which will be the right completion label.</p><p><em>callback</em></p><p>Callback function, the first argument will be the returned string from the url bar.</p><p><em>readonly</em></p><p>Whether the items are readonly, default false, optional.</p><p><strong>void util.pathComplete(Function callback, [String label], [String initialPath], [Boolean dirOnly])</strong></p><p>Initializes filename completion.</p><p><em>callback</em></p><p>Callback function called when a path was chosen or escape was pressed</p><p><em>label</em></p><p>The command line label</p><p><em>initialPath</em></p><p>The initial path, defaults to the current working directory</p><p><em>dirOnly</em></p><p>Whether to complete only directories, default false.</p><p><strong>void util.uncamelize(String text)</strong></p><p>Converts camel-case string for usage with GObject properties to a non-camel-case String</p><p><em>text</em></p><p>The text to uncamlize</p><p><strong>returns</strong></p><p>The uncamelized string</p><p>dwb also adds additional methods to builtin objects</p><p><strong>void Object.forEach(Function func(String key, Object value, Object this))</strong></p><p>Executes a function for each enumarable property of this similar to Array.forEach.</p><p><em>func</em></p><p>The function to execute</p><p><em>key</em></p><p>The property name</p><p><em>value</em></p><p>The property value</p><p><em>this</em></p><p>The object forEach is called on</p><p><strong>Number Array.fastIndexOf(Object object)</strong></p><p>This method is basically the same as Array.indexOf but without type checking.</p><p><em>object</em></p><p>The object to search for</p><p><strong>returns</strong></p><p>The index in the array or -1 if the Object wasn\(cqt found.</p><p><strong>Number Array.fastLastIndexOf(Object object)</strong></p><p>This method is basically the same as Array.lastIndexOf but without type checking.</p><p><em>object</em></p><p>The object to search for</p><p><strong>returns</strong></p><p>The index in the array or -1 if the Object wasn\(cqt found.</p><p><strong>void Function.debug([Object scope])</strong></p><p>A wrapper method for debugging callbacks, especially useful if it is combined with script.</p><p><em>scope</em></p><p><strong>script</strong> or <strong>this</strong>, optional</p><p><strong>returns</strong></p><p>A new function that calls script.debug on errors.</p>
<h3>clipboard</h3>
<p><strong>void clipboard.get(Selection selection, [Function callback])</strong></p><p>Gets the X11 clipboard.</p><p><em>selection</em></p><p>The Selection to get</p><p><em>callback</em></p><p>If a callback function is used the clipboard will be fetched asynchronously, the first parameter will be the content of the clipboard, else it will be fetched synchronously</p><p><strong>returns</strong></p><p>If no callback was provided it returns the text content of the clipboard.</p><p><strong>void clipboard.set(Selection selection, String text)</strong></p><p>Sets the X11 clipboard.</p><p><em>selection</em></p><p>The Selection to set</p><p><em>text</em></p><p>Text that will be stored in the clipboard.</p>
<h3>gui</h3>
<p>Most gtk-widgets can be accessed from scripts, an overview of the layout can be found under https://portix.bitbucket.org/dwb/resources/layout.html.</p><p><em>gui.window (GtkWindow, read)</em></p><p>The main window.</p><p><em>gui.mainBox (GtkBox, read)</em></p><p>The the main container, child of <strong>gui.window</strong>.</p><p><em>gui.tabBox (GtkBox, read)</em></p><p>The box used for tab labels, child of <strong>gui.mainBox</strong>.</p><p><em>gui.contentBox (GtkBox, read)</em></p><p>The box used for the main content, it contains all webviews, child of <strong>gui.mainBox</strong>.</p><p><em>gui.statusWidget (GtkEventBox, read)</em></p><p>The outmost statusbar widget, used for setting the statusbars colors, child of <strong>gui.mainBox</strong>.</p><p><em>gui.statusAlignment (GtkAlignment, read)</em></p><p>Used for the statusbar alignment, child of <strong>gui.statusWidget</strong>.</p><p><em>gui.statusBox (GtkBox, read)</em></p><p>The box that contains the statusbar widgets, grandchild of <strong>gui.statusAlignment</strong>.</p><p><em>gui.messageLabel (GtkLabel, read)</em></p><p>Label used for notifications, first child of <strong>gui.statusBox</strong>.</p><p><em>gui.entry (GtkEntry, read)</em></p><p>The entry, second child of <strong>gui.statusBox</strong>.</p><p><em>gui.uriLabel (GtkLabel, read)</em></p><p>Label used for displaying uris, third child of <strong>gui.statusBox</strong>.</p><p><em>gui.statusLabel (GtkLabel, read)</em></p><p>Label used for status information, fourth child of <strong>gui.statusBox</strong>.</p>
<h3>Cookie</h3>
<p>Represents a cookie. dwb only uses one cookie jar for persistent and session cookies. Session cookies can be distinguished from persistent cookies by checking if <strong>expires</strong> is null. To get a list of cookies currently used by the dwb instance <strong>net.allCookies</strong>, <strong>net.sessionCookies</strong> and <strong>net.persistentCookies</strong> can be used. To implement cookie handling use the <strong>addCookie</strong> event.</p><p>A cookie has the following properties</p><p><em>domain (String, read, write)</em></p><p>The cookie domain.</p><p><em>expires (Date, read)</em></p><p>The cookie expiration date.</p><p><em>httpOnly (Boolean, read, write)</em></p><p>If the cookie shouldn\(cqt be exposed to scripts.</p><p><em>name (String, read, write)</em></p><p>The cookie name.</p><p><em>path (String, read, write)</em></p><p>The cookie path.</p><p><em>secure (Boolean, read, write)</em></p><p>If the cookie should only be transferred over ssl.</p><p><em>value (String, read, write)</em></p><p>The cookie value.</p><p>A cookie implements following methods:</p><p><strong>void Cookie.delete()</strong></p><p>Deletes a cookie from the jar</p><p><strong>void Cookie.delete()</strong></p><p>Saves a cookie to the jar</p><p><strong>void Cookie.setMaxAge(Number seconds)</strong></p><p>Sets the maximum age of a cookie</p><p><em>seconds</em></p><p>The number of seconds until the cookie expires, if set to -1 it is a session cookie.</p>
<h3>Deferred</h3>
<p>Deferred objects can be used to manage asynchronous operations. It can trigger a callback function when an asynchrounous operation has finished, and allows chaining of callbacks. Deferred basically has 2 callback chains, a <em>done</em>-chain and a <em>fail</em>-chain. If a asynchronous operation is successful the deferred should be resolved and the done callback chain of the deferred is called. If a asynchronous operation fails the deferred should be rejected and the fail callback chain of the deferred is called.</p><p>Deferreds implement the following properties and methods:</p><p><em>Deferred.isFulFilled (Boolean, read)</em></p><p>Whether this deferred is resolved or rejected.</p><p><strong>void Deferred.always(Function callback)</strong></p><p>Registers a function for then done and fail chain.</p><p><em>callback</em></p><p>A callback function that will be called when the Deferred is resolved or rejected. If the function returns a deferred the original deferred will be replaced with the new deferred.</p><p><strong>returns</strong></p><p>A new deferred that can be used to chain callbacks.</p><p><strong>void Deferred.done(Function callback)</strong></p><p>Registers a function for the done-chain.</p><p><em>callback</em></p><p>A callback function that will be called when the Deferred is resolved. If the function returns a deferred the original deferred will be replaced with the new deferred.</p><p><strong>returns</strong></p><p>A new deferred that can be used to chain callbacks.</p><p><strong>Deferred Deferred.fail(Function callback)</strong></p><p>Registers a function for the fail-chain.</p><p><em>callback</em></p><p>A callback function that will be called when the deferred is rejected. If the function returns a deferred the original deferred will be replaced with the new deferred.</p><p><strong>returns</strong></p><p>A new deferred that can be used to chain callbacks.</p><p><strong>Deferred Deferred.reject(arguments)</strong></p><p>Rejects a deferred, the fail-chain is called when a deferred is rejected.</p><p><em>arguments</em></p><p>Arguments passed to the <em>fail</em> callbacks.</p><p><strong>void Deferred.resolve(arguments)</strong></p><p>Resolves a deferred, the done-chain is called when a deferred is resolved.</p><p><em>arguments</em></p><p>Arguments passed to the <em>done</em> callbacks.</p><p><strong>Deferred Deferred.then(Function ondone, Function onfail)</strong></p><p>Registers a function for the done and fail chain.</p><p><em>ondone</em></p><p>A callback function that will be called when the deferred is resolved. If the function returns a deferred the original deferred will be replaced with the new deferred.</p><p><em>onfail</em></p><p>A callback function that will be called when the deferred is rejected. If the function returns a deferred the original deferred will be replaced with the new deferred.</p><p><strong>returns</strong></p><p>A new deferred that can be used to chain callbacks.</p><p>Deferred also implements a static method:</p><p><strong>Value Deferred.when(Value value, Function ondone, Function onfail)</strong></p><p>Static method that can be used for synchronous and asynchronous operations. If if <strong>value</strong> is a Deferred <strong>ondone</strong> is called when the Deferred is resolved and <strong>onfail</strong> is called if the Deferred is rejected, otherwise ondone is called and value is the first parameter of the callback.</p><p><em>value</em></p><p>A Deferred or a value.</p><p><em>ondone</em></p><p>Callback function.</p><p><em>onfail</em></p><p>Callback function.</p><p><strong>returns</strong></p><p>The value.</p><p>Simple usage of a deferred:</p>
<pre>
function loadUri(uri) {
    var d = new Deferred();
    tabs.current.loadUri(uri, function(wv) {
        if (wv.loadStatus == LoadStatus.finished)
        {
            d.resolve("Finished");
            return true;
        }
        else if (wv.loadStatus == LoadStatus.failed)
        {
            d.reject("Failed");
            return true;
        }
    });
    return d;
}

loadUri("http://www.example.com").then(
    function(response) {
        io.out(response); // Finished
    },
    function(response) {
        io.out(response); // Failed
    }
);
</pre>
<p>Chaining of a deferred:</p>
<pre>
function foo()
{
    var d = new Deferred();
    timer.start(2000, function() {
        d.reject("rejected");
    });
    return d;
}

function onResponse(response)
{
    io.out(response);
}

// Will print "rejected" twice to stdout after 2 seconds
foo().fail(onResponse).fail(onResponse);
</pre>
<p>Note that if the deferred is rejected only the fail chain is called, when it is resolved only the done chain is called.</p>
<pre>
function foo()
{
    var d = new Deferred();
    timer.start(2000, function() {
        d.reject("rejected");
        // Already rejected, will not execute the done chain
        d.resolve("rejected");
    });
    return d;
}

function onResponse(response)
{
    io.out(response);
}

// Only the fail will be executed

foo().fail(onResponse).done(onResponse);
foo().done(onResponse).fail(onResponse);
</pre>
<p>Changing the deferred in a callback chain:</p>
<pre>
function foo(message)
{
    var d = new Deferred();
    timer.start(2000, function() {
        d.resolve(message);
    });
    return d;
}
function callback1(response)
{
    io.out(response); // Prints "foo" after 2 seconds

    // Return a new Deferred, will replace the old one.
    return foo("bar");
}
function callback2(response)
{
    io.out(response); // Prints "bar" after 4 seconds
}

foo("foo").done(callback1).done(callback2);
</pre>
<p>Using Deferred.when</p>
<pre>
function asyncOperation() {
    var d = new Deferred();
    ....
    return d;
}
function syncOperation()
{
    var result = {};
    ....
    return result;
}
Deferred.when(asyncOperation(), function() {...});
Deferred.when(syncOperation(), function() {...});
</pre>

<h3>Glob</h3>
<p>Globs can be used for pattern matching, they are much simpler than regular expressions, there are only two special characters, the wildcard character <em>*</em> which matches any number of unknown characters and the joker character <em>?</em> which matches exactly one unknown character. The literal characters "*" and "?" must be escaped with "&#92;&#92;";</p><p><strong>new Glob(String pattern)</strong></p><p>Constructs a new Glob.</p><p><em>pattern</em></p><p>The pattern to match against.</p><p><strong>Boolean Glob.match(String string)</strong></p><p>Matches against a string</p><p><em>string</em></p><p>The string to match against.</p><p><strong>returns</strong></p><p>True if the string matches the Glob.</p><p><strong>String Glob.toString()</strong></p><p>Converts a Glob to string.</p><p><strong>returns</strong></p><p>A string represantation of the Glob.</p>
<h3>settings</h3>
<p>Readonly object that can be used to query dwb\(cqs current settings, all settings can also be used in camelcase, to modify settings <strong>execute</strong> can be used.</p>
<pre>
if (settings.enablePrivateBrowsing == true)
    execute("set enable-private-browsing false");
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WEBKIT OBJECTS</h2>
        <div class="sectioncontent">
<p>All webkit objects correspond to gobject objects, i.e. they have the same properties, but the javascript properties are all camelcase. For example, a WebKitWebView has the property <strong>zoom-level</strong>, the corresponding javascript property is <strong>zoomLevel</strong>:</p>
<pre>
var webview = tabs.current
webview.zoomLevel = webview.zoomLevel * 2;
</pre>
<p>To check if an object is derived from GObject the instanceof operator can be used:</p>
<pre>
if (myObject instanceof GObject)
{
  ...
}
</pre>
<h3>General methods</h3>
<p>The following methods are implemented by all Objects derived from GObject</p><p><strong>void object.blockSignal(Number signalid)</strong></p><p>Blocks emission of a gobect signal.</p><p><em>signalid</em></p><p>The signalid returned from <strong>object.connect</strong></p><p><strong>Number object.connect(String name, Function callback, [Boolean after])</strong></p><p>Connect to a gobject-signal, note that all signals are connected using the <em>signal::</em>- or with <em>notify::</em>-prefix. If connecting to a signal the <em>signal::</em>-prefix must be omitted. The callback function will have the same parameters as the GObject signal callback, however some parameters may be undefined if they cannot be converted to javascript objects. All signal handlers are executed after dwb\(cqs default handler.</p><p><em>name</em></p><p>The signal name to connect to.</p><p><em>callback</em></p><p>Callback function that will be called when the signal is emitted.</p><p><em>after</em></p><p>Whether to install the handler after the default handler, default false.</p><p><strong>returns</strong></p><p>The signal id of the signal.</p><p><strong>Number object.connectBlocked(String name, Function callback, [Boolean after])</strong></p><p>Connect to a gobject-signal but block the emission of the own callback during execution of the callback, useful if the object is connected to a notify event and the the property is changed in the callback function.</p><p><em>name</em></p><p>The signal name to connect to.</p><p><em>callback</em></p><p>Callback function that will be called when the signal is emitted.</p><p><em>after</em></p><p>Whether to install the handler after the default handler, default false.</p><p><strong>returns</strong></p><p>The signal id of the signal.</p><p><strong>Boolean object.disconnect(Number id)</strong></p><p>Disconnect from a gobject-signal.</p><p><em>id</em></p><p>The signal id obtained from connect</p><p><strong>returns</strong></p><p>true if the signal was disconnected</p><p><strong>Number object.notify(String name, Function callback, [Boolean after])</strong></p><p>Wrapper function for property-change notification, the same as <em>object.connect("notify::" + name, callback, after);</em>.</p><p><em>name</em></p><p>The property name to connect to, the name can also be in camelcase.</p><p><em>callback</em></p><p>Callback function that will be called when the property changes.</p><p><em>after</em></p><p>Whether to install the handler after the default handler, default after.</p><p><strong>returns</strong></p><p>The signal id of the signal.</p><p><strong>Number object.notifyBlocked(String name, Function callback, [Boolean after])</strong></p><p>Wrapper function for property-change notification, the same as <em>object.connectBlocked("notify::" + name, callback, after);</em>.</p><p><em>name</em></p><p>The property name to connect to, the name can also be in camelcase.</p><p><em>callback</em></p><p>Callback function that will be called when the property changes.</p><p><em>after</em></p><p>Whether to install the handler after the default handler, default after.</p><p><strong>returns</strong></p><p>The signal id of the signal.</p><p><strong>void object.unblockSignal(Number signalid)</strong></p><p>Unblocks a signal previously blocked with <strong>object.blockSignal</strong>.</p><p><em>signalid</em></p><p>The signalid returned from <strong>object.connect</strong></p>
<h3>webview</h3>
<p>The webview object represents the widget that actually displays the site content.</p><p><em>wv.allFrames (Array of frames, read)</em></p><p>All frames of a webview including the mainframe</p><p><em>wv.focusedFrame (Frame, read)</em></p><p>The focused frame of the webview</p><p><em>wv.historyList (Historylist, read)</em></p><p>The focused frame of the webview</p><p><em>wv.mainFrame (Frame, read)</em></p><p>The main frame of the webview</p><p><em>wv.number (Number, read)</em></p><p>The number of the webview, starting at 0</p><p><em>wv.scrolledWindow (GtkScrollwindow, read)</em></p><p>The parent widget of every webview, it is used for scrolling the webview.</p><p><em>wv.tabWidget (GtkEventBox, read)</em></p><p>The main widget for tab labels, used for coloring tabs, child of <strong>gui.tabBox</strong>.</p><p><em>wv.tabBox (GtkBox, read)</em></p><p>Horizontal box, child of <strong>wv.tabWidget</strong>.</p><p><em>wv.tabIcon (GtkImage, read)</em></p><p>Favicon widget, child of <strong>wv.tabBox</strong>.</p><p><em>wv.tabLabel (GtkLabel, read)</em></p><p>Text label of a tab, child of <strong>wv.tabBox</strong>.</p><p>Some signal callbacks can also be defined directly on webview instances, they can be set multiple times. Event properties that start with on are emitted for every emission of that signal, event properties that start with once are only emitted once and will be disconnected afterwards. Not that it isn\(cqt possible to disconnect from signals that are set directly on a webview instance.</p><p><em>wv.onButtonPress</em></p><p>Connects the webview to the buttonPress event.</p><p><em>wv.onceButtonPress</em></p><p>Connects the webview to the buttonPress event once.</p><p><em>wv.onButtonRelease</em></p><p>Connects the webview to the buttonRelease event.</p><p><em>wv.onceButtonRelease</em></p><p>Connects the webview to the buttonRelease event once.</p><p><em>wv.onCloseTab</em></p><p>Connects the webview to the closeTab event.</p><p><em>wv.onceCloseTab</em></p><p>Connects the webview to the closeTab event.</p><p><em>wv.onContextMenu</em></p><p>Connects the webview to the contextMenu event.</p><p><em>wv.onceContextMenu</em></p><p>Connects the webview to the contextMenu event once.</p><p><em>wv.onDocumentLoaded</em></p><p>Connects the webview to the documentLoaded event.</p><p><em>wv.onceDocumentLoaded</em></p><p>Connects the webview to the documentLoaded event once.</p><p><em>wv.onDownload</em></p><p>Connects the webview to the download event.</p><p><em>wv.onceDownload</em></p><p>Connects the webview to the download event once.</p><p><em>wv.onError</em></p><p>Connects the webview to the error event.</p><p><em>wv.onceError</em></p><p>Connects the webview to the error event once.</p><p><em>wv.onFollowHint</em></p><p>Connects the webview to the followHint event.</p><p><em>wv.onceFollowHint</em></p><p>Connects the webview to the followHint event once.</p><p><em>wv.onFrameCreated</em></p><p>Connects the webview to the frameCreated event.</p><p><em>wv.onceFrameCreated</em></p><p>Connects the webview to the frameCreated event once.</p><p><em>wv.onFrameStatus</em></p><p>Connects the webview to the frameStatus event.</p><p><em>wv.onceFrameStatus</em></p><p>Connects the webview to the frameStatus event once.</p><p><em>wv.onKeyPress</em></p><p>Connects the webview to the keyPress event.</p><p><em>wv.onceKeyPress</em></p><p>Connects the webview to the keyPress event once.</p><p><em>wv.onKeyRelease</em></p><p>Connects the webview to the keyRelease event.</p><p><em>wv.onceKeyRelease</em></p><p>Connects the webview to the keyRelease event once.</p><p><em>wv.onLoadCommitted</em></p><p>Connects the webview to the loadCommitted event.</p><p><em>wv.onceLoadCommitted</em></p><p>Connects the webview to the loadCommitted event once.</p><p><em>wv.onLoadFinished</em></p><p>Connects the webview to the loadFinished event.</p><p><em>wv.onceLoadFinished</em></p><p>Connects the webview to the loadFinished event once.</p><p><em>wv.onLoadStatus</em></p><p>Connects the webview to the loadStatus event.</p><p><em>wv.onceLoadStatus</em></p><p>Connects the webview to the loadStatus event once.</p><p><em>wv.onMimeType</em></p><p>Connects the webview to the mimeType event.</p><p><em>wv.onceMimeType</em></p><p>Connects the webview to the mimeType event once.</p><p><em>wv.onMouseMove</em></p><p>Connects the webview to the mouseMove event.</p><p><em>wv.onceMouseMove</em></p><p>Connects the webview to the mouseMove event once.</p><p><em>wv.onNavigation</em></p><p>Connects the webview to the navigation event.</p><p><em>wv.onceNavigation</em></p><p>Connects the webview to the navigation event once.</p><p><em>wv.onResource</em></p><p>Connects the webview to the resource event.</p><p><em>wv.onceResource</em></p><p>Connects the webview to the resource event once.</p><p><em>wv.onScroll</em></p><p>Connects the webview to the scroll event.</p><p><em>wv.onceScroll</em></p><p>Connects the webview to the scroll event once.</p><p><em>wv.onTabButtonPress</em></p><p>Connects the webview to the tabButtonPress event.</p><p><em>wv.onceTabButtonPress</em></p><p>Connects the webview to the tabButtonPress event once.</p><p><em>wv.onTabFocus</em></p><p>Connects the webview to the tabFocus event.</p><p><em>wv.onceTabFocus</em></p><p>Connects the webview to the tabFocus event once.</p><p><strong>String wv.inject([String code|Function code], [Object arg], [Boolean global])</strong></p><p>Injects a script into a webview</p><p><em>code</em></p><p>The script to inject, either a string or a function. If it is a function the body will be wrapped inside a new function.</p><p><em>arg</em></p><p>If the script isn\(cqt injected into the global scope the script is wrapped inside a function. <em>arg</em> then is accesible via <em>arguments</em> in the injected script, optional</p><p><em>line</em></p><p>Starting line number, useful for debugging. If linenumber is greater than 0 error messages will be printed to stderr, optional.</p><p><em>global</em></p><p>true to inject it into the global scope, false to encapsulate it in a function, optional</p><p><strong>returns</strong></p><p>The return value of the script. If the script is injected globally inject always returns null. The return value is always converted to a string. To return objects call JSON.parse on the return value.</p><p><strong>Note</strong></p><p>If a script is injected from a loadStatus-callback the script must be injected after LoadStatus.committed has been emitted. On LoadStatus.committed the document hasn\(cqt been created, if the script modifies the DOM it should be injected when LoadStatus.finished or documentLoaded is emitted. If only LoadStatus.committed or loadFinished.committed are used it is better to use the corresponding signals instead to reduce overhead.</p><p><strong>void wv.history(Number steps)</strong></p><p>Loads a history item steps away from the current history item</p><p><em>steps</em></p><p>Number of steps, pass a negative value to go back in history</p><p><strong>Deferred wv.loadString(String content, [String mimetype], [String encoding], [String baseUri], [Boolean extSource])</strong></p><p>Loads a string in a webview</p><p><em>content</em></p><p>The string to load</p><p><em>mimeType</em></p><p>The MIME-type, if omitted or null text/html is assumed, optional</p><p><em>encoding</em></p><p>The character encoding, if omitted or null UTF-8 is assumed, optional</p><p><em>baseUri</em></p><p>The base uri, if present it must either use the uri-scheme dwb-chrome: or file:, otherwise the request will be ignored, optional</p><p><em>extSource</em></p><p>Whether external sources, e.g. scripts, are allowed, defaults to false. If external resources are forbidden the function dwb can be called in the webcontext to execute functions in the scripting context</p><p><strong>returns</strong></p><p>A deferred that will be resolved if the webview has finished loading the string and rejected if an error occured.</p><p><strong>Boolean wv.loadUri(String uri, [Function callback])</strong></p><p>Loads an uri in a webview.</p><p><em>uri</em></p><p>The uri to load</p><p><em>callback</em></p><p>A callback function that will be called when the load status changes, return true to stop the emission, optional</p><p><strong>returns</strong></p><p>true if the uri is loaded</p><p><strong>void wv.reload(void)</strong></p><p>Reloads a webview</p><p><strong>void wv.stopLoading()</strong></p><p>Stops any ongoing loading.</p><p><strong>Number wv.toPng(String filename, [Number width, Number height], [Boolean keepAspect])</strong></p><p>Renders a webview to a png file.</p><p><em>filename</em></p><p>The filename for the png.</p><p><em>width</em></p><p>The width of the png, if width is &lt; 0 and height is &gt; 0 the image will have the same aspect ratio as the original webview, optional.</p><p><em>height</em></p><p>The height of the png, if height is &lt; 0 and width is &gt; 0 the image will have the same aspect ratio as the original webview, optional, mandatory if width is set.</p><p><em>keepAspect</em></p><p>Whether to keep the aspect ratio, if set to true the new image will have the same aspect ratio as the original webview, width and height are taken as maximum sizes and must both be &gt; 0, optional.</p><p><strong>returns</strong></p><p>A cairo_status_t (0 on success) or -1 if an error occured.</p>
<h3>frame</h3>
<p>A frame represents a frame or iframe. Due to same origin policy it is not possible to inject scripts from a webview into iframes with a different domain. For this purpose the frame object can be used.</p><p><em>frame.domain (String, read)</em></p><p>The domain name of the frame which is the effective second level domain</p><p><em>frame.host (String, read)</em></p><p>The host name of the frame</p><p><strong>Boolean frame.inject(String script, [Boolean global])</strong></p><p>Injects a script into a frame, see also webview.inject for details.</p><p><strong>Deferred frame.loadString(String content, [String mimetype], [String encoding], [String baseUri], [Boolean extSource])</strong></p><p>Loads a string in a frame</p><p><em>content</em></p><p>The string to load</p><p><em>mimeType</em></p><p>The MIME-type, if omitted or null text/html is assumed, optional</p><p><em>encoding</em></p><p>The character encoding, if omitted or null UTF-8 is assumed, optional</p><p><em>baseUri</em></p><p>The base uri, if present it must either use the uri-scheme dwb-chrome: or file:, otherwise the request will be ignored, optional</p><p><em>extSource</em></p><p>Whether external sources, e.g. scripts, are allowed, defaults to false. If external resources are forbidden the function dwb can be called in the webcontext to execute functions in the scripting context</p><p><strong>returns</strong></p><p>A deferred that will be resolved if the webview has finished loading the string and rejected if an error occured.</p>
<h3>download</h3>
<p>Corresponds to a WebKitDownload.</p><p><strong>new Download(String uri)</strong></p><p>Constructs a new download</p><p><em>uri</em></p><p>The uri of the download</p><p><strong>Boolean download.start([Function callback])</strong></p><p>Starts a download</p><p><em>callback</em></p><p>A callback function that will be executed whenever the DownloadStatus changes, return true to stop the emission, optional.</p><p><strong>void download.cancel()</strong></p><p>Cancels a download</p>
<h3>historylist</h3>
<p>Corresponds to a WebkitWebBackForwardList.</p><p><em>historylist.backLength</em></p><p>Number of items that precede the current item</p><p><em>historylist.forwardLength</em></p><p>Number of items that succeed the current item</p><p><strong>WebKitWebHistoryItem historylist.getItem([Number position])</strong></p><p>Gets a WebKitWebHistoryItem.</p><p><em>position</em></p><p>The position of the item where 0 corresponds to the current item.</p><p><strong>returns</strong></p><p>A WebKitWebHistoryItem.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GTK WIDGETS</h2>
        <div class="sectioncontent">
<p>It is possible to create new widgets but only widgets that are currently used by dwb can be created, the widgets used by dwb can be found under http://portix.bitbucket.org/dwb/resources/layout.html.</p><h3>Constructor</h3>
<p><strong>new GtkWindow(String type)</strong></p><p>Constructs a new widget</p><p><em>type</em></p><p>The type of the widget, e.g. "GtkLabel"</p>
<h3>Methods</h3>
<p>All created widgets implement the following methods:</p><p><strong>void GtkWidget.add(GtkWidget widget)</strong></p><p>Adds a widget as a child. Note that this function can only be called on widgets derived from GtkContainer.</p><p><em>widget</em></p><p>The widget to add.</p><p><strong>void GtkWidget.destroy()</strong></p><p>Destroys a widget. Note that only newly created widgets can be destroyed.</p><p><strong>Array GtkWidget.getChildren()</strong></p><p>Gets all children of a GtkWidget. Note that this function can only be called on widgets derived from GtkContainer.</p><p><strong>returns</strong></p><p>An array of GtkWidgets or an empty array if the Widget has no children.</p><p><strong>void GtkWidget.remove(GtkWidget widget)</strong></p><p>Removes a widget from it\(cqs parent. Note that this function can only be called on widgets derived from GtkContainer.</p><p><em>widget</em></p><p>The widget to remove.</p><p>Widgets that implement the GtkBox interface implement the following methods:</p><p><strong>void GtkWidget.packEnd(GtkWidget child, boolean expand, boolean fill, int padding)</strong></p><p>Adds a widget to a GtkBox.</p><p><em>child</em></p><p>The child widget</p><p><em>expand</em></p><p>Whether to expand the widget</p><p><em>fill</em></p><p>Whether to fill the remaining space</p><p><em>padding</em></p><p>Padding in the box</p><p><strong>void GtkWidget.packStart(GtkWidget child, boolean expand, boolean fill, int padding)</strong></p><p>Adds a widget to a GtkBox.</p><p><em>child</em></p><p>The child widget</p><p><em>expand</em></p><p>Whether to expand the widget</p><p><em>fill</em></p><p>Whether to fill the remaining space</p><p><em>padding</em></p><p>Padding in the box</p><p><strong>void GtkWidget.reorderChild(GtkWidget child, int postion)</strong></p><p>Moves a widget to a new position.</p><p><em>child</em></p><p>The child widget</p><p><em>position</em></p><p>The new position</p><p>Widgets derived from GtkContainer implement the following methods:</p><p><strong>void GtkWidget.add(GtkWidget child)</strong></p><p>Adds a widget to a GtkContainer.</p><p><em>child</em></p><p>The child widget</p><p><strong>Example</strong></p>
<pre>
var label = new GtkWidget("GtkLabel");
gui.statusBox.packStart(label, false, false, 0);
label.label = "foobar";
label.visible = true;
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOUPURI</h2>
        <div class="sectioncontent">
<p>Represenst a SoupURI object.</p><h3>Properties</h3>
<p><em>fragment (String, read)</em></p><p>The fragment part of the uri.</p><p><em>host (String, read)</em></p><p>The host of the uri.</p><p><em>password (String, read)</em></p><p>The password of the uri.</p><p><em>path (String, read)</em></p><p>The path of the uri.</p><p><em>port (String, read)</em></p><p>The port of the uri.</p><p><em>query (String, read)</em></p><p>The query part of the uri.</p><p><em>scheme (String, read)</em></p><p>The scheme of the uri.</p><p><em>user (String, read)</em></p><p>The user part of the uri.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOUPHEADERS</h2>
        <div class="sectioncontent">
<p>Represents a header, to modify a request header the "resource" Signal can be used. The requestheaders can be accessed via WebKitNetWorkRequests.</p><h3>Methods</h3>
<p><strong>void SoupHeaders.append(String name, Strina value)</strong></p><p>Appends a value to a header.</p><p><em>name</em></p><p>Name of the header</p><p><em>value</em></p><p>Value of the header</p><p><strong>void SoupHeaders.clear()</strong></p><p>Removes all headers.</p><p><strong>String SoupHeaders.getList(String name)</strong></p><p>Gets a comma separated header list.</p><p><em>name</em></p><p>Name of the header list</p><p><strong>returns</strong></p><p>The header list or <strong>null</strong>.</p><p><strong>String SoupHeaders.getOne(String name)</strong></p><p>Gets a header.</p><p><em>name</em></p><p>Name of the header</p><p><strong>returns</strong></p><p>The header or <strong>null</strong>.</p><p><strong>void SoupHeaders.remove(String name)</strong></p><p>Removes a header.</p><p><em>name</em></p><p>Name of the header</p><p><strong>void SoupHeaders.replace(String name, String value)</strong></p><p>Replaces a header.</p><p><em>name</em></p><p>Name of the header</p><p><em>value</em></p><p>New value of the header</p><p><strong>Example</strong></p>
<pre>
Signal.connect("resource", function(wv, frame, request) {
    request.message.requestHeaders.remove("referer");
});
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">
<p>Execute code on certain events. dwb emits some signals, e.g. before a new site is loaded, the signals object can be used to handle these signals. All events are emitted on the signals object itself, for example "signals.keyPress = function() { ... };" would connect to the keyPress signal but it is strongly discouraged to use this pattern since it will only allow to connect one callback to a certain signal. To handle signals Signal-objects can be used, it manages signals, allows one to connect to more than one signal and also allows one to easily disconnect/reconnect to signals.</p><p>There is just one convenient pattern that allows setting callbacks directly on signals: if the signal name starts with "on" dwb will internally create a new Signal and connect to it with the given callback function, i.e. using signals.onResource = function () {...} allows one to connect more than one callback to the "resource"-event, however it doesn\(cqt give you as much control as creating a Signal. When connected with this pattern it is not possible to disconnect from the signal with signals.onResource = null;, instead Signal.disconnect must be used.</p><h3>Emitted signals</h3>
<p>Custom signals can be created by simply calling</p>
<pre>
var signal = new Signal("nameOfNewSignal", callbackFunction);
</pre>
<p>Signals emitted by dwb are the following:</p><p><strong>addCookie</strong></p>
<pre>
new Signal("addCookie", function(cookie));
</pre>
<p>Emitted when cookie has changed or a new cookie will be added to the cookie jar. If the callback returns true the cookie won\(cqt be added to the jar. To change the cookie the callback must return true and the cookie must be saved manually.</p><p><em>cookie</em></p><p>The cookie that has been added or changed.</p><p><strong>buttonPress</strong></p>
<pre>
new Signal("buttonPress", function(webview, hittestresult, event));
</pre>
<p>Emitted when a button is pressed on the webview, return true to prevent the default action</p><p><em>webview</em></p><p>The webview which received the signal</p><p><em>hittestresult</em></p><p>Hittestresult under the cursor</p><p><em>event.button</em></p><p>The button that is pressed, usually a value between 1 and 5</p><p><em>event.state</em></p><p>A bitmap of modifiers pressed, see Modifier</p><p><em>event.time</em></p><p>The time in milliseconds when the button was pressed</p><p><em>event.type</em></p><p>A ClickType</p><p><em>event.x</em></p><p>x-position relative to the window</p><p><em>event.xRoot</em></p><p>x-position relative to the screen</p><p><em>event.y</em></p><p>y-position relative to the window</p><p><em>event.yRoot</em></p><p>y-position relative to the screen</p><p><strong>buttonRelease</strong></p>
<pre>
new Signal("buttonRelease", function(webview, hittestresult, event));
</pre>
<p>Emitted when a button is released, return true to prevent the default action</p><p><em>webview</em></p><p>The webview which received the signal</p><p><em>hittestresult</em></p><p>Hittestresult under the cursor</p><p><em>event</em></p><p>Same as buttonPress but without <em>event.type</em></p><p><strong>changeMode</strong></p>
<pre>
new Signal("changeMode", function(webview, mode));
</pre>
<p>Emitted when the mode changes, return true to prevent the change.</p><p><em>webview</em></p><p>The focused webview</p><p><em>mode</em></p><p>A mode, see also Modes for possible modes</p><p><strong>close</strong></p>
<pre>
new Signal("close", function());
</pre>
<p>Emitted when dwb is closed</p><p><strong>closeTab</strong></p>
<pre>
new Signal("closeTab", function(webview));
</pre>
<p>Emitted when a tab is closed</p><p><em>webview</em></p><p>The webview that corresponds to the tab</p><p><strong>createTab</strong></p>
<pre>
new Signal("createTab", function(webview));
</pre>
<p>Emitted when a tab is created</p><p><em>webview</em></p><p>The webview that corresponds to the created tab</p><p><strong>documentLoaded</strong></p>
<pre>
new Signal("documentLoaded",  function(webview, frame));
</pre>
<p>Emitted when a the DOM document of a frame has been loaded.</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><em>frame</em></p><p>The frame that contains the document</p><p><strong>download</strong></p>
<pre>
new Signal("download", function(webview, download, json));
</pre>
<p>Emitted before a download starts, before a file or action has been chosen, return true if the signal was handled.</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><em>download</em></p><p>The Download</p><p><em>json.referer</em></p><p>The referer</p><p><em>json.mimeType</em></p><p>The mimetype of the file</p><p><strong>downloadStart</strong></p>
<pre>
new Signal("downloadStart", function(download, json));
</pre>
<p>Emitted before a download starts after a path or application has been chosen, return true if the signal was handled. Note that destinationUri has not been set on the download.</p><p><em>download</em></p><p>The Download</p><p><em>json.referer</em></p><p>The referer</p><p><em>json.mimeType</em></p><p>The mimetype of the file</p><p><em>json.destinationUri</em></p><p>The chosen destination path or null if an application was chosen.</p><p><em>json.application</em></p><p>The chosen application or null if a path was chosen.</p><p><strong>downloadStatus</strong></p>
<pre>
new Signal("downloadStatus", function(download));
</pre>
<p>Emitted when the DownloadStatus changes.</p><p><em>download</em></p><p>The Download</p><p><strong>executeCommand</strong></p>
<pre>
new Signal("executeCommand", function(commandinfo));
</pre>
<p>Emitted when a command is executed, return true to prevent execution.</p><p><em>commandinfo.command</em></p><p>The command that is executed</p><p><em>commandinfo.argument</em></p><p>An argument, if the command isn\(cqt executed from commandline this will always be null.</p><p><em>commandinfo.nummod</em></p><p>The numerical modifier.</p><p><strong>followHint</strong></p>
<pre>
new Signal("followHint", function(wv, resource));
</pre>
<p>Emitted before a hint is followed, return true to prevent following the hint</p><p><em>wv</em></p><p>The webview that currently has focus</p><p><em>resource</em></p><p>The resource of the hint, can be either a url or <strong>@input</strong>, <strong>@textarea</strong>, <strong>@radio</strong>, <strong>@checkbox</strong>, <strong>@submit</strong>, <strong>@reset</strong>, <strong>@button</strong>, <strong>@role</strong>, <strong>@unknown</strong> or <strong>@abort</strong> if Escape was pressed.</p><p><strong>frameCreated</strong></p>
<pre>
new Signal("frameCreated", function(webview, frame));
</pre>
<p>Emitted when a frame is created</p><p><em>webview</em></p><p>The webview the frame belongs to</p><p><em>frame</em></p><p>The frame</p><p><strong>frameStatus</strong></p>
<pre>
new Signal("frameStatus", function(webview, frame));
</pre>
<p>Emitted when the LoadStatus of a frame changes</p><p><em>webview</em></p><p>The webview the frame belongs to</p><p><em>frame</em></p><p>The frame</p><p><strong>keyPress</strong></p>
<pre>
new Signal("keyPress", function(webview, json));
</pre>
<p>Emitted when a key is pressed, return true to prevent the default action</p><p><em>webview</em></p><p>The focused webview</p><p><em>json.isModifier</em></p><p>Whether or not the key is a modifier</p><p><em>json.keyCode</em></p><p>Hardware keycode</p><p><em>json.keyVal</em></p><p>Keycode as listed in gdkkeysyms.h</p><p><em>json.name</em></p><p>A string represantation of the key</p><p><em>json.state</em></p><p>A bitmap of modifiers pressed, see Modifier</p><p><strong>keyRelease</strong></p>
<pre>
new Signal("keyRelease", function(webview, json));
</pre>
<p>Emitted when a key is released, return true to prevent the default action</p><p><em>webview</em></p><p>The focused webview</p><p><em>json</em></p><p>Same as keyPress</p><p><strong>loadCommitted</strong></p>
<pre>
new Signal("loadCommitted", function(webview));
</pre>
<p>Emitted when the load has just committed, no data has been loaded when this signal is emitted. This is the preferred signal for injected scripts that do not manipulate the DOM.</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><strong>loadFinished</strong></p>
<pre>
new Signal("loadFinished", function(webview));
</pre>
<p>Emitted when the site has completely loaded.</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><strong>loadStatus</strong></p>
<pre>
new Signal("loadStatus", function(webview));
</pre>
<p>Emitted when the load status changes</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><strong>mimeType</strong></p>
<pre>
new Signal("mimeType", function(webview, frame, request, json));
</pre>
<p>Decide whether or not to show a given mimetype. Return true to stop the request.</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><em>frame</em></p><p>The frames requires the decision</p><p><em>request</em></p><p>The network request</p><p><em>json.mimeType</em></p><p>The mimetype</p><p><strong>mouseMove</strong></p>
<pre>
new Signal("mouseMove", function(webview, event));
</pre>
<p>Emitted when the pointer is moved.</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><em>event</em></p><p>Same as buttonRelease</p><p><strong>navigation</strong></p>
<pre>
new Signal("navigation", function(webview, frame, request, action));
</pre>
<p>Emitted before a new site is loaded, return true to stop the request.</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><em>frame</em></p><p>The frame that requires the navigation</p><p><em>request</em></p><p>The network request</p><p><em>action</em></p><p>The navigation action</p><p><strong>ready</strong></p>
<pre>
new Signal("ready", function());
</pre>
<p>Emitted once when dwb has been fully initialized.</p><p><strong>resource</strong></p>
<pre>
new Signal("resource", function(webview, frame, request, response));
</pre>
<p>Emitted before a new resource is going to be loaded</p><p><em>webview</em></p><p>The webview that emitted the signal</p><p><em>frame</em></p><p>The frame that dispatched the request</p><p><em>request</em></p><p>The network request</p><p><em>response</em></p><p>The network response</p><p><strong>statusBarChange</strong></p>
<pre>
new Signal("statusBarChange", function(webview, data));
</pre>
<p>Emitted before the status bar is updated, if the callback returns true dwb will not update the statusbar so it is possible to set the statusbar from the script.</p><p><em>webview</em></p><p>The focused webview</p><p><em>data.canGoBack</em></p><p>Whether it is possible to navigate back in the webview</p><p><em>data.canGoForward</em></p><p>Whether it is possible to navigate forward in the webview</p><p><em>data.isBookmarked</em></p><p>Whether the site is bookmarked</p><p><em>data.isQuickmarked</em></p><p>Whether the site is quickmarked</p><p><em>data.pluginsBlocked</em></p><p>Whether plugins are blocked</p><p><em>data.scriptsBlocked</em></p><p>Whether scripts are blocked</p><p><em>data.ssl</em></p><p>SSL-State of the page, can either be <em>trusted</em>, <em>untrusted</em> or <em>none</em></p><p><em>data.type</em></p><p>The type of the update, can be <strong>status</strong> and <strong>uri</strong>, status means that statusLabel und uriLabel need to be updated, uri means that only the uriLabel needs to be updated.</p><p><strong>tabButtonPress</strong></p>
<pre>
new Signal("tabButtonPress", function(webview, tabwidget, event));
</pre>
<p>Emitted when a button is pressed on a tabwidget, return true to prevent the default action</p><p><em>webview</em></p><p>The webview which received the signal</p><p><em>tabwidget</em></p><p>The tabwidget</p><p><em>event</em></p><p>Same as buttonPress</p><p><strong>tabFocus</strong></p>
<pre>
new Signal("tabFocus", function(webview, json));
</pre>
<p>Emitted when another tab gets focus, return true to stop the event</p><p><em>webview</em></p><p>The new tab</p><p><em>json.last</em></p><p>The number of the previously focused tab</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNAL</h2>
        <div class="sectioncontent">
<p>Object that can be used to connect to certain browser events.</p><h3>Constructor</h3>
<p><strong>new Signal(String name, [Function callback])</strong></p><p>Constructs a new signal</p><p><em>name</em></p><p>Name of the event</p><p><em>callback</em></p><p>Callback function that is invoked when the signal is emitted.</p>
<h3>Properties</h3>
<p><em>callback (Function, read|write)</em></p><p>The callback that will be called when the signal is emitted, the context of the signal will be the signal itself (i.e. this refers to the connected Signal).</p><p><em>connected (Boolean, read)</em></p><p>Whether the signal is connected</p><p><em>id (Number, read)</em></p><p>Unique id of the signal</p><p><em>name (String, read)</em></p><p>Name of the event</p><p><em>predicate</em>(Function, read|write)_</p><p>A predicate function, the signal is only emitted if the predicate function returns true. The predicate function is called with the same arguments as the callback function</p>
<h3>Methods</h3>
<p><strong>connect([Function callback])</strong></p><p>Connects the signal to the event</p><p><em>callback</em></p><p>Callback function that is invoked when the signal is emitted, optional but mandatory if no callback was given during signal construction.</p><p><strong>returns</strong></p><p>self</p><p><strong>disconnect([Function callback])</strong></p><p>Disconnects the signal from the event</p><p><strong>returns</strong></p><p>self</p><p><strong>toggle()</strong></p><p>Toggles a signal, if it is connected it will be disconnected an vice versa.</p><p><strong>returns</strong></p><p>true if the signal was connected, false otherwise</p>
<h3>Static methods</h3>
<p><strong>Signal.connect(String name, Function callback)</strong></p><p>Connects to an event</p><p><em>signals</em></p><p>The event name</p><p><em>callback</em></p><p>Callback function to connect to.</p><p><strong>Signal.connectAll(Array signals, [Function callback])</strong></p><p>Connects to more than one signal at once</p><p><em>signals</em></p><p>Array of signals.</p><p><em>callback</em></p><p>Callback function to connect to, optional.</p><p><strong>Signal.connectWebView(String name, Function callback)</strong></p><p>Connects all webviews to a GObject signal.</p><p><em>name</em></p><p>The event name</p><p><em>callback</em></p><p>A callback function the will be called when the signal is emitted, the arguments of the callback correspond to the GObject callback with the first argument omitted, instead this refers to the object.</p><p><strong>Signal.disconnect(Signal|Function object)</strong></p><p>Either a Signal or the callback of a signal If a callback is passed to this function and the same callback is connected multiple times only the first matching callback will be disconnected, to disconnect all matching callbacks call use Signal.disconnectAll</p><p><em>object</em></p><p>The event name</p><p><strong>returns</strong></p><p>the disconnected signal</p><p><strong>Signal.disconnectAll(Function callback)</strong></p><p>Disconnect from all signals with matching callback function</p><p><em>callback</em></p><p>A callback function</p><p><strong>returns</strong></p><p>An array of signal that were disconnected</p><p><strong>Signal.emit(String name, ...)</strong></p><p>Emits a signal, can be used to implement custom signals.</p><p><em>name</em></p><p>The name of the event</p><p><em>...</em></p><p>Variable number of arguments passed to the callback function of Signal.connect.</p><p><strong>returns</strong></p><p>The overall return value of all callback function, if one callback function returns true the overall return value will be true</p><p><strong>Signal.once(String name, Function callback)</strong></p><p>Connects to an event once</p><p><em>signals</em></p><p>The event name</p><p><em>callback</em></p><p>Callback function to connect to.</p><p><strong>returns</strong></p><p>The Signal that was connected. Calling connect() on the returned signal will connect the Signal only once again.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENUM OBJECTS</h2>
        <div class="sectioncontent">
<p>Enum objects are objects that have only readonly properties, mapping gtk/webkit enums to javascript objects.</p><h3>ButtonContext</h3>

<pre>
const ButtonContext = {
  document   : 1 &lt;&lt; 1,
  link       : 1 &lt;&lt; 2,
  image      : 1 &lt;&lt; 3,
  media      : 1 &lt;&lt; 4,
  selection  : 1 &lt;&lt; 5,
  editable   : 1 &lt;&lt; 6
};
</pre>

<h3>ChecksumType</h3>

<pre>
const ChecksumType = {
  md5     : 0,
  sha1    : 1,
  sha256  : 2
};
</pre>

<h3>ClickType</h3>

<pre>
const ClickType = {
  click       : 4,
  doubleClick : 5,
  tripleClick : 6
};
</pre>

<h3>DownloadStatus</h3>

<pre>
const DownloadStatus = {
  error       : -1,
  created     : 0,
  started     : 1,
  cancelled   : 2,
  finished    : 3
};
</pre>

<h3>FileTest</h3>

<pre>
const FileTest = {
  regular    : 1 &lt;&lt; 0,
  symlink    : 1 &lt;&lt; 1,
  dir        : 1 &lt;&lt; 2,
  executable : 1 &lt;&lt; 3,
  exists     : 1 &lt;&lt; 4
};
</pre>

<h3>LoadStatus</h3>

<pre>
const LoadStatus = {
  provisional       : 0,
  committed         : 1,
  finished          : 2,
  firstVisualLayout : 3,
  failed            : 4
};
</pre>

<h3>Modifier</h3>

<pre>
const Modifier = {
  Shift     : 1 &lt;&lt; 0,
  Lock      : 1 &lt;&lt; 1,
  Control   : 1 &lt;&lt; 2,
  Mod1      : 1 &lt;&lt; 3,
  Mod2      : 1 &lt;&lt; 4,
  Mod3      : 1 &lt;&lt; 5,
  Mod4      : 1 &lt;&lt; 6,
  Mod5      : 1 &lt;&lt; 7,
  Button1   : 1 &lt;&lt; 8,
  Button2   : 1 &lt;&lt; 9,
  Button3   : 1 &lt;&lt; 10,
  Button4   : 1 &lt;&lt; 11,
  Button5   : 1 &lt;&lt; 12,
  Super     : 1 &lt;&lt; 26,
  Hyper     : 1 &lt;&lt; 27,
  Meta      : 1 &lt;&lt; 28,
  Release   : 1 &lt;&lt; 30,
  Modifier  : 0x5c001fff
};
</pre>

<h3>NavigationReason</h3>

<pre>
const NavigationReason = {
  linkClicked     : 0,
  formSubmitted   : 1,
  backForward     : 2,
  reload          : 3,
  formResubmitted : 4,
  other           : 5
};
</pre>

<h3>Modes</h3>

<pre>
const Modes = {
  NormalMode  : 1&lt;&lt;0,
  InsertMode  : 1&lt;&lt;1,
  CommandMode : 1&lt;&lt;2
  HintMode : 1&lt;&lt;2
};
</pre>

<h3>Selection</h3>

<pre>
const Selection = {
  primary   : 1,
  clipboard : 2
};
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GLOBAL DATA</h2>
        <div class="sectioncontent">
<p>Since all scripts share the same execution context, they are encapsulated in a function. To avoid conflicts with other scripts it is not allowed to set properties on the global object, i.e.</p>
<pre>
#!javascript

// not allowed, the global object is readonly
number = 0;
io.out(number);     // undefined

var number2 = 0;
io.out(number2);    // 0

// not allowed
foo = function()
{
  io.out("foo");
}
foo();  // fails
</pre>
<p>For sharing data between scripts either signals or modules can be created.</p><h3>script and this</h3>
<p>In every script the variable <strong>script</strong> refers to <strong>this</strong>, the encapsulating function, it has the following properties and methods:</p><p><em>script.path (Object, read)</em></p><p>The path of the script.</p><p><em>script._arguments (Object, read)</em></p><p><strong>arguments</strong> object of the encapsulating function</p><p><strong>void script.deletePrivate(Object object, String key)</strong></p><p>Deletes a private property of an object previously set with <strong>script.setPrivate</strong> and returns the private value.</p><p><em>object</em></p><p>The object on which the value was set.</p><p><em>key</em></p><p>The property name</p><p><strong>returns</strong></p><p>The private value</p><p><strong>void script.debug(Object params)</strong></p><p>Same as io.debug but also prints additional information, e.g. if the object is an Error, this method will also print the corresponding source of the error.</p><p><strong>String script.generateId()</strong></p><p>Generates a unique id.</p><p><strong>returns</strong></p><p>A unique id.</p><p><strong>void script.getPrivate(Object object, String key)</strong></p><p>Gets a private property of an object previously set with <strong>script.setPrivate</strong></p><p><em>object</em></p><p>The object on which the value was set.</p><p><em>key</em></p><p>The property name</p><p><strong>returns</strong></p><p>The private value</p><p><strong>void script.setPrivate(Object object, String key, String value)</strong></p><p>Convenience function to set a private property on an object that doesn\(cqt conflict with properties set in other scripts, it uses a random unique id to set the property, so the property can most likely be only retrieved with <strong>script.getPrivate</strong>. This is mostly useful for objects derived from GObject since GObjects are shared between all scripts.</p><p><em>object</em></p><p>The object on which the value should be set.</p><p><em>key</em></p><p>The property name</p><p><em>value</em></p><p>The value to set.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MODULES</h2>
        <div class="sectioncontent">
<p>With modules it is possible to share objects between scripts. Modules are defined with provide and loaded with require.</p><p><strong>Defining modules</strong>.</p>
<pre>
#!javascript

provide("myModule", {
  foo : 37,
  doBar : function() {
    io.out("bar");
  }
});
provide("myOtherModule", {
  act : function (arg) {
    io.out(arg);
  }
});
</pre>
<p><strong>Getting some modules</strong>.</p>
<pre>
#!javascript

require(["myModule", "myOtherModule"], function(myModule, myOtherModule) {
  if (myModule.foo == 37)
    myModule.doBar();

  myOtherModule.act("foo");
});
</pre>
<p><strong>Getting all modules</strong>.</p>
<pre>
#!javascript

require(null, function(modules) {
  if (modules.myModule.foo == 37)
    modules.myModule.doBar();

  modules.myOtherModule.act("foo");
});
</pre>
<p>It is also possible to specify a path in the name array. The name then follows the format <strong>name!path</strong>:</p>
<pre>
#!javascript

require(["foo!/path/to/foo"], function(foo) {
  io.out(foo.bar); // 37
});
</pre>
<p><strong>/path/to/foo</strong>.</p>
<pre>
provide("foo", { bar : 37 });
</pre>
<p>The resolution chain is as follows, first all modules defined with <strong>provide</strong> and module names requested by <strong>require</strong> are stored. If all scripts have been loaded the requirements are resolved. If a requirement contains a path and the module isn\(cqt defined yet the module will be loaded, if it is already defined the path is ignored and the stored module will be resolved:</p>
<pre>
#!javascript

require(["foo!/path/to/foo"], function(foo) {
  io.out(foo.bar); // 42
});
provide("foo", { bar : 42 });
</pre>

<pre>
#!javascript

require(["foo"], function(foo) {
  io.out(foo); // undefined
});
require(["foo!/path/to/foo"]);

require(["foo"], function(foo) {
  io.out(foo); // { bar : 37 }
});
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTENSIONS</h2>
        <div class="sectioncontent">
<p><strong>dwb</strong> provides the possibility to load extensions. It is recommended to implement javascript-userscripts as an extension to have consistent configuration locations for scripts. One advantage of extension also is that they can be loaded/unloaded on the fly.</p><h3>Prepackaged extensions</h3>
<p><strong>formfiller</strong></p><p>An extension that gets form data and fills forms with previously saved data.</p><p><strong>Configuration options</strong></p><p><em>formData</em></p><p>A path to a file where formdata will be saved, the default path is <strong>$XDG_CONFIG_HOME/dwb/forms</strong></p><p><em>scGetForm</em></p><p>Shortcut that gets and saves form data, the default value is <strong>efg</strong></p><p><em>scFillForm</em></p><p>Shortcut that fills a form, the default value is <strong>eff</strong></p><p><em>useGPG</em></p><p>Whether to use gpg2 to encrypt the formData file with a password.</p><p><em>GPGOptEncrypt</em></p><p>Additional options that will be passed to gpg2 for encryption, the default gpg2 options are: --passphrase &lt;password&gt; --batch --no-tty --yes -c --output &lt;formData&gt; default value: <strong>""</strong></p><p><em>GPGOptDecrypt</em></p><p>Additional options that will be passed to gpg2 for decryption, the default gpg2 options are --passphrase &lt;password&gt; --batch --no-tty --yes -d &lt;formData&gt; default value: <strong>""</strong></p><p><em>keepPassword</em></p><p>Whether to save the gpg password in memory, if set to false the user will be prompted for the password every time a form is filled or new data is saved, default value: <strong>true</strong></p><p><em>keepFormdata</em></p><p>If useGPG is enabled and this value is set to true the complete formdata will be kept in memory, if set to false gpg2 will be called every time a form is filled, default value: <strong>false</strong></p><p><strong>perdomainsettings</strong></p><p>An extension that can be used for setting some settings on a domain basis. Valid settings are the properties of WebKitWebSettings but in camelcase, see the webkitgtk documentation for details.</p><p><strong>Configuration options</strong></p><p><em>domains</em></p><p>Settings applied based on the effective second level domain</p><p><em>hosts</em></p><p>Settings applied based on host name, this option is an object of the format</p><p><em>uris</em></p><p>Settings applied based on the uri, this option is an object of the format</p><p><em>defaults</em></p><p>Default settings, for each setting in domains, hosts and uris a default-value should be specified</p><p><strong>Example configuration</strong></p><p>Example using extensions.load:</p>
<pre>
extensions.load("perdomainsettings", {
  domains : {
     "example.com" : {
          "enablePlugins"  : true
     },
     "example.uk.com" :  {
          "enablePlugins"  : true,
          "enableScripts"  : false
     }
  },
  hosts : {
     "www.example1.com" :  {
          "autoLoadImages" : true
     }
  },
  uris : {
     "http://www.example2.com/login.php" :  {
          "autoLoadImages" : false
     }
  },
  defaults : {
     "enablePlugins"   : false,
     "autoLoadImages"  : false,
     "enableScripts"   :  true
  }
});
</pre>
<p><strong>requestpolicy</strong></p><p>Extension that blocks requests from thirdparty domains with whitelisting support, either permanently or just for the session. It is also possible to block requests from certain domains on all sites, they have highest precedence and will also be blocked on sites where thirdparty requests are allowed in general.</p><p><strong>Configuration options</strong></p><p><em>shortcut</em></p><p>Shortcut to block / allow requests, default <strong>"erp"</strong></p><p><em>unblockCurrent</em></p><p>Shortcut to unblock always blocked requests, shows only domains from the current site, default <strong>"erC"</strong></p><p><em>unblockAll</em></p><p>Shortcut to unblock always blocked requests, shows all blocked domains, default <strong>"erA"</strong></p><p><em>whiteList</em></p><p>A path to the whitelisting file, default is <strong>$XDG_CONFIG_HOME/dwb/&lt;profile&gt;/requestpolicy.json</strong></p><p><em>autoreload</em></p><p>Whether to automatically reload the website after the persistentList has changed, default <strong>false</strong></p><p><em>notify</em></p><p>Whether to notify about blocked request, default <strong>false</strong></p><p><strong>unique_tabs</strong></p><p>Extension that allows one to remove duplicate tabs or avoids duplicate tabs automatically.</p><p><strong>Configuration options</strong></p><p><em>shortcutRemoveDuplicates</em></p><p>Shortcut that removes duplicate tabs, default <strong>null</strong></p><p><em>commandRemoveDuplicates</em></p><p>Command that remove s duplicate tabs, default <strong>ut_remove_duplicates</strong></p><p><em>autoFocus</em></p><p>Autofocus a tab if an url is already opened, if the url would be loaded in a new tab the new tab is closed. Setting this to true makes commandRemoveDuplicates and shortcutRemoveDuplicates obsolete because there will be no duplicate tabs. Default value: <strong>true</strong></p><p><em>shortcutToggleAutoFocus</em></p><p>Shortcut that enables/disables autofocus, default <strong>null</strong></p><p><em>commandToggleAutoFocus</em></p><p>Command that enables/disables autofocus, default <strong>ut_toggle_autofocus</strong></p><p><strong>userscripts</strong></p><p>Extension that loads userscripts and injects them into websites, this extension is mostly greasemonkey compatible. Scripts can be loaded by either passing an array of paths to extensions.load or by putting scripts into $XDG_CONFIG_HOME/dwb/scripts/.</p><p><strong>Configuration options</strong></p><p>The only configuration option is an array of paths to scripts</p><p><strong>Example configuration</strong></p><p>Example using extensions.load:</p>
<pre>
extensions.load("userscripts", [ "/path/to/script1", "/path/to/script2" ]);
</pre>

<h3>Using extensions</h3>
<p>Extensions can be loaded by an userscript</p>
<pre>
#!javascript

extensions.load("extension_1");
extensions.load("extension_2", {
  configProp_1 : 22,
  configProp_2 : "val2"
});
</pre>
<p>To load/unload extensions on the fly <strong>extensions.bind</strong> can be used:</p>
<pre>
#!javascript

var myConfig = {
  prop_1 : 37,
  prop_2 : true,
  prop_3 : "foo"
};


extensions.bind("myExtension", "Control m", {
  command : "toggleMyExtension",
  config : myConfig,
  load : false
});

extensions.bind("mySecondExtension", "Control M");
</pre>
<p>The default searchpaths for extensions are $XDG_DATA_HOME/dwb/extensions/ and /usr/share/dwb/extensions/.</p>
<h3>Methods</h3>
<p><strong>void extensions.bind(String name, String shortcut, [Object options])</strong></p><p>Bind an extension to a shortcut, the shortcut enables/disables the extension.</p><p><em>name</em></p><p>Name of the extension</p><p><em>shortcut</em></p><p>Name of the extension</p><p><em>options</em></p><p>An optional object with options where possible options are</p><p>options.load</p><p>Whether to load the extension on startup, default true</p><p>options.config</p><p>Config passed to extensions.load</p><p>options.command</p><p>Command that can be used on command line</p><p><strong>void extensions.disableAll()</strong></p><p>Disables all extensions.</p><p><strong>void extensions.error(String name, String message)</strong></p><p>Print a consistent error message to stderr</p><p><em>name</em></p><p>Name of the extension</p><p><em>message</em></p><p>The message</p><p><strong>Boolean extensions.load(String name, [Object config])</strong></p><p>Loads an extension</p><p><em>name</em></p><p>Name of the extension</p><p><em>config</em></p><p>The config for the script, if omitted the config is read from $XDG_CONFIG_HOME/dwb/extensionrc, optional</p><p><strong>returns</strong></p><p>True if the extension was loaded</p><p><strong>Boolean extensions.toggle(String name, [Object config])</strong></p><p>Toggles an extension</p><p><em>name</em></p><p>Name of the extension</p><p><em>config</em></p><p>The config for the extension. optional</p><p><strong>returns</strong></p><p>True if the extension was loaded, false if it was unloaded.</p><p><strong>Boolean extensions.unload(String name)</strong></p><p>Unloads an extension</p><p><em>name</em></p><p>Name of the extension</p><p><strong>returns</strong></p><p>True if the extension was unloaded</p><p><strong>void extensions.error(String name, String message|Error e, [String message])</strong></p><p>Print an error message and call stack to stderr.</p><p><em>name</em></p><p>Name of the extension</p><p><em>message|e</em></p><p>The error message or an Error</p><p><em>message</em></p><p>If the second parameter is an Error, an optional message can be specified.</p><p><strong>void extensions.message(String name, String message)</strong></p><p>Print a consistent message to stdout</p><p><em>name</em></p><p>Name of the extension</p><p><em>message</em></p><p>The message</p><p><strong>void extensions.warning(String name, String message)</strong></p><p>Print a consistent warning to stderr</p><p><em>name</em></p><p>Name of the extension</p><p><em>message</em></p><p>The warning message</p>
<h3>Writing extensions</h3>
<p>The default searchpath for extensions is <strong>$XDG_DATA_HOME/dwb/extensions</strong> and <strong>SHARE_DIR/dwb/extensions</strong> where SHARE_DIR being the share directory of the installation, most likely /usr/share.</p><p>The configuration for extensions is in <strong>$XDG_CONFIG_HOME/dwb/extensionrc</strong> and should return a javascript object.</p><p>Every extension must implement one function named init that takes one argument, the config for the extension. The function should return true if the extension was successfully loaded, false otherwise. Every extension also may implement a function end that will be called when an extension is unloaded. If an extension registers to signals and binds shortcuts the extension should unregister all signals and unbind all shortcuts in this function. init and end should be returned from the extension.</p><p>Additionally the returned object can also have a <em>defaultConfig</em>-property and an <em>exports</em>-property. <em>defaultConfig</em> will be mixed into the config before calling the init function and <em>exports</em> can be used to define a public api that can be loaded as a module with <strong>require</strong>.</p><p><strong>Example</strong></p><p>A extension called <strong>foobar</strong> in <strong>$HOME/.local/share/dwb/extensions/foobar</strong>:</p>
<pre>
function foo(val) {
  ....
}
function bar(val) {
  ....
}
function loadStatusCallback(w) {
  ...
}
var myExtension = {
  defaultConfig : { foo : 37 },
  exports : {
    foo : foo,
    bar : bar
  },
  init : function (config) {
    if (config.foo &gt; 36) {
      bar(config.foo);
      foo(config.bar);
      bind("XX", bar, "dobar");
      Signal.connect("loadStatus", loadStatusCallback);
      return true;
    }

    return false;
  },

  end : function () {
    unbind("dobar");
    Signal.disconnect(loadStatusCallback);
    return true;
  }
};
return myExtension;
</pre>
<p><strong>Example extensionrc</strong></p>
<pre>
return {
  foobar : { bar : "X", foo : 37 }, // config for extension foobar
  barfoo : {  }                     // config for extension barfoo

};
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dwb-js&hellip;</h2>
        <div class="sectioncontent">
<p><strong>dwb</strong>(1) <a href="../man1/dwbem.1.html"><strong>dwbem</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dsp.7.html"><span aria-hidden="true">&larr;</span> dsp.7: Open sound system audio devices</a></li>
   <li class="next"><a href="dwww.7.html">dwww.7: Access documentation via www <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
