<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lamssi_cr: Overview of lam's mpi checkpoint / restart ssi modules</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Overview of lam's mpi checkpoint / restart ssi modules">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lamssi_cr (7) manual">
  <meta name="twitter:description" content="Overview of lam's mpi checkpoint / restart ssi modules">
  <meta name="twitter:image" content="https://www.carta.tech/images/lam-runtime-lamssi_cr-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/lamssi_cr.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lamssi_cr (7) manual" />
  <meta property="og:description" content="Overview of lam's mpi checkpoint / restart ssi modules" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lam-runtime-lamssi_cr-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lamssi_cr<small> (7)</small></h1>
        <p class="lead">Overview of lam's mpi checkpoint / restart ssi modules</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/lamssi_cr.7.html">
      <span itemprop="name">lamssi_cr: Overview of lam's mpi checkpoint / restart ssi modules</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lam-runtime/">
      <span itemprop="name">lam-runtime</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/lamssi_cr.7.html">
      <span itemprop="name">lamssi_cr: Overview of lam's mpi checkpoint / restart ssi modules</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The "kind" for checkpoint / restart SSI modules is "cr". Specifically, the string "cr" (without the quotes) is the prefix that should be used with the <em>mpirun</em> command line with the <em>-ssi</em> switch.  For example:</p>
<dl class='dl-vertical'>
  <dt>
    <p>mpirun -ssi cr blcr C my_mpi_program</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>LAM/MPI can involuntarily checkpoint and restart parallel MPI jobs. Doing so requires that LAM/MPI was compiled with thread support and that back-end checkpointing systems are available at run-time.  MPI jobs will have to run with at least MPI_THREAD_SERIALIZED support.  If a job elects to run with checkpoint/restart support and an available cr module is found, the job's thread level will automatically be promoted to MPI_THREAD_SERIALIZED.  See the User's Guide for more details.</p><h3>Checkpoint Phases</h3>
<p>LAM defines three phases for checkpoint / restart support in each MPI process:</p>
<dl class='dl-vertical'>
  <dt>
    <p>Checkpoint.</p>
  </dt>
  <dd>
    <p>When the checkpoint request arrives, before the actual checkpoint occurs.</p>
  </dd>
  <dt>
    <p>Continue.</p>
  </dt>
  <dd>
    <p>After a checkpoint has successfully completed, in the same process as the checkpoint was invoked in.</p>
  </dd>
  <dt>
    <p>Restart</p>
  </dt>
  <dd>
    <p>After a checkpoint has successfully completed, in a new / restarted process.</p>
  </dd>

</dl>
<p>The Continue and Restart phases are identical except for the process in which they are invoked -- the Continue phase is invoked in the same process as the Checkpoint phase was invoked.  The Restart phase is only invoked in newly restarted processes.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABLE MODULES</h2>
        <div class="sectioncontent">
<p>LAM currently has two cr modules: <em>blcr</em> and <em>self</em>. In order for an MPI job to be able to be checkpointed and restarted, all of its MPI SSI modules must support checkpoint/restart. Currently, this means using the <em>crtcp</em> RPI module or the <em>gm</em> RPI module when compiled with <em>gm_get()</em> support (see the User's Guide for more details).</p><h3>blcr CR Module</h3>
<p>The Berkeley Lab Checkpoint/Restart (BLCR) single-node checkpointer is a software system from Lawrence Berkeley Labs.  See the project web page for more details: <em>http://www.nersc.gov/research/ftg/checkpoint/</em>.</p><p>The <em>blcr</em> module has one SSI parameter:</p>
<dl class='dl-vertical'>
  <dt>
    <p>cr_blcr_priority</p>
  </dt>
  <dd>
    <p><em>blcr</em>'s default priority is 50.</p>
  </dd>

</dl>

<h3>self CR Module</h3>
<p>The <em>self</em> module, when used with checkpoint/restart SSI modules, will invoke the user-defined functions to save and restore checkpoints. It is simply a mechanism for user-defined functions to be invoked at LAM's Checkpoint, Continue, and Restart phases. Hence, the only data that is saved during the checkpoint is what is written in the user's checkpoint function. No MPI library state is saved at all.</p><p>As such, the model for the <em>self</em> module is slightly different than, for example, the <em>blcr</em> module. Specifically, the Restart function is not invoked in the same process image of the process that was checkpointed. The Restart phase is invoked during <strong>MPI_INIT</strong> of a new instance of the application (i.e., it starts over from main()).</p><p>Multiple SSI parameters are available:</p>
<dl class='dl-vertical'>
  <dt>
    <p>cr_self_user_prefix</p>
  </dt>
  <dd>
    <p>Specify a string prefix for the name of the checkpoint, continue, and restart functions that should be invoked by LAM.  That is, specifying "-ssi cr_self_user_prefix foo" means that LAM expects to find three functions at run-time: int foo_checkpoint(), int foo_continue(), and int foo_restart(). This is a convenience parameter that can be used instead of the three parameters listed below.</p>
  </dd>
  <dt>
    <p>cr_self_user_checkpoint</p>
  </dt>
  <dd>
    <p>Name of the user function to invoke during the Checkpoint phase.</p>
  </dd>
  <dt>
    <p>cr_self_user_continue</p>
  </dt>
  <dd>
    <p>Name of the user function to invoke during the Continue phase.</p>
  </dd>
  <dt>
    <p>cr_self_user_restart</p>
  </dt>
  <dd>
    <p>Name of the user function to invoke during the Restart phase.</p>
  </dd>

</dl>
<p>If none of these parameters are specified and the <em>self</em> module is selected, it will use the default prefix <em>lam_cr_self</em></p><p>Finally, the usual priority SSI parameter is also available:</p>
<dl class='dl-vertical'>
  <dt>
    <p>cr_self_priority</p>
  </dt>
  <dd>
    <p><em>self</em>'s default priority is 25.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lamssi_cr&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/lamssi.7.html"><strong>lamssi</strong>(7)</a>, <strong>mpirun</strong>(1), LAM User's Guide</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lamssi_coll.7.html"><span aria-hidden="true">&larr;</span> lamssi_coll.7: Overview of lam's mpi collective ssi modules</a></li>
   <li class="next"><a href="lamssi_rpi.7.html">lamssi_rpi.7: Overview of lam's rpi ssi modules <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
