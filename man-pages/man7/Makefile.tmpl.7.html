<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Makefile.tmpl: Shapefile.tmpl, makefile.tmpl, release.tmpl, release.c.tmpl  templates in the shapetools rms</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Shapefile.tmpl, makefile.tmpl, release.tmpl, release.c.tmpl  templates in the shapetools rms">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="Makefile.tmpl (7) manual">
  <meta name="twitter:description" content="Shapefile.tmpl, makefile.tmpl, release.tmpl, release.c.tmpl  templates in the shapetools rms">
  <meta name="twitter:image" content="https://www.carta.tech/images/shapetools-Makefile.tmpl-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/Makefile.tmpl.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Makefile.tmpl (7) manual" />
  <meta property="og:description" content="Shapefile.tmpl, makefile.tmpl, release.tmpl, release.c.tmpl  templates in the shapetools rms" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/shapetools-Makefile.tmpl-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">Makefile.tmpl<small> (7)</small></h1>
        <p class="lead">Shapefile.tmpl, makefile.tmpl, release.tmpl, release.c.tmpl  templates in the shapetools rms</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/Makefile.tmpl.7.html">
      <span itemprop="name">Makefile.tmpl: Shapefile.tmpl, makefile.tmpl, release.tmpl, release.c.tmpl  templates in the shapetools rms</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/shapetools/">
      <span itemprop="name">shapetools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/Makefile.tmpl.7.html">
      <span itemprop="name">Makefile.tmpl: Shapefile.tmpl, makefile.tmpl, release.tmpl, release.c.tmpl  templates in the shapetools rms</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>When working with the shapeTools Release Management System, all system model files (Shape- and Makefiles) must be derived from templates, namely <em>Shapefile.tmpl</em> and <em>Makefile.tmpl</em>. The templates define a certain number of standard macros names used througout the shapeTools RMS. Deriving system model files from the templates is mainly filling in the appropriate macro values. The following section gives an overview of all macro names defined in the templates and a short explanation on the semantics of each macro.</p><p><em>Release.tmpl</em> and <em>release.c.tmpl</em> are templates for release identification files. They do not need to be adapted in any way.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MACROS</h2>
        <div class="sectioncontent">
<p>The following is a list of macros that occur in the Shape- and Makefile templates. Most of them are defined in the Makefile. As Makefiles are included in the Shapefiles, these are used by both, calls of make and calls of shape. Some shape specific macros (defined in the Shapefile template) are described at the end of this section.</p><p>As the shapeTools RMS performs recursive calls of shape (resp. make), some of the standard macro settings get inherited to a recursively called sub-build-process. The macros are marked in the list accordingly. The inheritance mechanism allows installation dependent macros (eg. BASE) to be set for the whole project by only modifying the value in the top level Shape-/Makefile.</p><p><strong>Locations and General Macros</strong></p>
<dl class='dl-vertical'>
  <dt>
    BASE (inherited)
  </dt>
  <dd>
    <p>The base directory of the project's central source repository.</p>
  </dd>
  <dt>
    NODEPATH
  </dt>
  <dd>
    <p>The relative path name of a system node within the project's source repository. In the top node, this macro has an empty value. For subsystems, it is to be set to the path relative to $(BASE) (eg. "/subsystem/library").</p>
  </dd>
  <dt>
    NODENAME
  </dt>
  <dd>
    <p>A short name for the developed system node. This name will also to be used for generating release identification strings having the form <em>&lt;system_name&gt;-&lt;release_number&gt;</em>.</p>
  </dd>
  <dt>
    HOSTSYSTEM (inherited)
  </dt>
  <dd>
    <p>The underlying operating system. The value of the HOSTSYSTEM macro is built after the schema s-&lt;opSys&gt;. This macro has different meanings in make and in shape.</p><p><em>Make</em> treats it as an an extension to a known base path for accessing the appropriate versions of operating system dependent files. The base path points to a directory containing subdirectories for each supported operating system type. All subdirectories carry the same list of filenames with in each case different (operating system specific) contents.</p><p>For <em>shape</em>, the HOSTSYSTEM macro is treated as variant definition. With the corresponding variant definition defined in the variant definitions include file (see <a href="../man7/shape_stdvar.7.html"><strong>shape_stdvar</strong>(7)</a>), a whole bunch of macros is set (resp. modified).</p>
  </dd>
  <dt>
    HOSTTYPE (inherited)
  </dt>
  <dd>
    <p>The machine architecture. This macro should be used for installing different binaries (for different machine architectures) compiled from the same program source in a heterogeneous network. On systems containing the <em>arch</em> command, HOSTTYPE may be dynamically set by HOSTTYPE=`arch`. This macro is currently not supported in the default installation setup.</p>
  </dd>
  <dt>
    SWITCHES (inherited)
  </dt>
  <dd>
    <p>Preprocessor switches for conditional compilation. This macro may be used for system wide switching on/off certain program behavior. The SWITCHES are passed as arguments to the language preprocessor.</p>
  </dd>
  <dt>
    INSTALLBASE (inherited)
  </dt>
  <dd>
    <p>Locations and modes for installation of executables, header files, libraries, and manuals. The INSTALLBASE macro eases the definition and redefinition of the following installation path macros, as the values of these may cite INSTALLBASE. Each of the installation path macros may also be set to a value independent of INSTALLBASE.</p>
<pre>
INSTALLBINPATH (inherited) - installation directory for executables
INSTALLBINMODE (inherited) - file protection mode to be set for installed executables
INSTALLINCPATH (inherited) - installation directory for include files
INSTALLINCMODE (inherited) - file protection mode to be set for installed include files
INSTALLLIBPATH (inherited) - installation directory for libraries
INSTALLLIBMODE (inherited) - file protection mode to be set for installed libraries
INSTALLMANPATH (inherited) - installation directory for manuals
INSTALLMANMODE (inherited) - file protection mode to be set for installed manuals
</pre>
<p>Installimn manuals using the INSTALLMANPATH macro expects appropriate manX (man1, ...) subdirectories there.</p>
  </dd>
  <dt>
    LIBPATH (inherited)
  </dt>
  <dd>
    <p>The directory, where local libraries, developed within the project, shall be installed for project wide use.</p>
  </dd>
  <dt>
    INCLUDEPATH (inherited)
  </dt>
  <dd>
    <p>Similar to LIBPATH. The location of project internal header files.</p>
  </dd>

</dl>
<p><strong>The System Components</strong></p>
<dl class='dl-vertical'>
  <dt>
    TARGET
  </dt>
  <dd>
    <p>The name of the main target to be built. This can be a program, a library, or anything else to be produced. If the construction of the main target does not require any real transformation (if eg. only subsystems are to be built), it is advisable to have a file $(SUBSYSTEMNAME).date as main target. The system building action should just touch this file, so that it's modification date shows, when the last system building action happened. If the managed system consists of multiple programs, this macro should be multiplied (eg. TARGET_1 TARGET_2 ... TARGET_N). In that case, all places in the Makefile, where $(TARGET) occurs have to be modified accordingly !</p>
  </dd>
  <dt>
    VERSIONFILE
  </dt>
  <dd>
    <p>The name of a file, used as release number generator. With each new release, a new version of this file is generated automatically. When developing a program, this file ideally contains exactly one function returning a version identification string. When using the ShapeTools version control system's attribute citation mechanism, the contents of such a file needs only to be written once and never be changed afterwards. There are different prototypes for such a file in $(LIBPATH)/shape. For system parts not incorporating an executable program, any other source file could be chosen as release number generator. In any case should $(VERSIONFILE) never be saved explicitly by the user.</p>
  </dd>
  <dt>
    VERSIONOBJECT
  </dt>
  <dd>
    <p>The object file (.o file) derived from VERSIONFILE. This macros is only to be set, when VERSIONFILE contains program text.</p>
  </dd>
  <dt>
    SUBSYSTEMS
  </dt>
  <dd>
    <p>All subdirectories, where additional parts of the system wait for being built. For each subtarget, a recursive shape (resp. make) call is performed with the current macro settings getting inherited. The SUBSYSTEMS will be build before TARGET. This macro may also be empty.</p>
  </dd>
  <dt>
    ALIASES
  </dt>
  <dd>
    <p>This is a list of aliases for TARGET. This macro is to be set, when TARGET should be accessible by multiple names (eg. a program to be activated under different names).</p>
  </dd>
  <dt>
    SOURCES
  </dt>
  <dd>
    <p>A list of all programming language source files belonging to the system. In the case of C development, these are the <em>.c</em> files</p>
  </dd>
  <dt>
    HEADERS
  </dt>
  <dd>
    <p>The header files belonging to the system. The <em>.h</em> files in case on C development.</p>
  </dd>
  <dt>
    AUXSOURCES
  </dt>
  <dd>
    <p>Auxiliary source files. These are source files that shall also be processed when building the system, but that are not genuine part of the system. These are for example sources of auxiliary test programs, needed to perform test in the development area.</p>
  </dd>
  <dt>
    AUXHEADERS
  </dt>
  <dd>
    <p>Auxiliary header files, similar to auxiliary sources.</p>
  </dd>
  <dt>
    VARIANTSOURCES
  </dt>
  <dd>
    
  </dd>
  <dt>
    VARIANTHEADERS
  </dt>
  <dd>
    <p>Equally named source and header files, located in subdirectories, each named after a certain variant. For system building, only one of the directories is used, according to the specified HOSTSYSTEM. In the shape_RMS environment, the subdirectory names should be chosen from the value set of the HOSTSYSTEM macro (for more details, see the description of the HOSTSYSTEM macro above).</p>
  </dd>
  <dt>
    MANUALS
  </dt>
  <dd>
    <p>The manual files for the system, distinguished by categories.</p>
  </dd>
  <dt>
    COMPONENTS
  </dt>
  <dd>
    <p>All source components belonging to the system. These are the source files (SOURCES), the include files (HEADERS), the manuals (MANUALS), the Shapefile, the Makefile and a (generated) file named <strong>Dependencies</strong>.</p>
  </dd>
  <dt>
    OBJECTS
  </dt>
  <dd>
    <p>All files, automatically produced during a build process except TARGET. These are usually the .o files.</p>
  </dd>

</dl>
<p><strong>Tools, Flags and Libraries</strong></p>
<dl class='dl-vertical'>
  <dt>
    MAKE (inherited)
  </dt>
  <dd>
    <p>The make program. This macro is used for recursive calls of make. During execution of shape, this macro is explicitly (in the Shapefile) set to the value of the SHAPE macro. This causes recursive builds also to be performed by shape.</p>
  </dd>
  <dt>
    SHELL (inherited)
  </dt>
  <dd>
    <p>The shell to be used by make, resp. shape for interpreting the build actions in the Makefile or Shapefile.</p>
  </dd>
  <dt>
    CC (inherited)
  </dt>
  <dd>
    <p>The C compiler to be used.</p>
  </dd>
  <dt>
    CFLAGS (inherited)
  </dt>
  <dd>
    <p>The C compilation flags (see SWITCHES for additional compilation flags).</p>
  </dd>
  <dt>
    LDFLAGS (inherited)
  </dt>
  <dd>
    <p>The linker flags.</p>
  </dd>
  <dt>
    RANLIB (inherited)
  </dt>
  <dd>
    <p>The program for adding a table of contents to archives.</p>
  </dd>
  <dt>
    SYSLIBS (inherited)
  </dt>
  <dd>
    <p>Additional system libraries to be linked to TARGET</p>
  </dd>
  <dt>
    LOCALLIBS
  </dt>
  <dd>
    <p>Local libraries to be linked to TARGET</p>
  </dd>
  <dt>
    LINTLIBS
  </dt>
  <dd>
    <p>Libraries to be invoked when executing "lint".</p>
  </dd>

</dl>
<p><strong>Shape Specific Macros</strong></p>
<dl class='dl-vertical'>
  <dt>
    VERSIONS
  </dt>
  <dd>
    <p>The default version binding (version selection) rule to be applied for each component. Selection rules are globally defined in the $(SHAPELIBPATH)/stdrules file (see <a href="../man7/shape_stdrul.7.html"><strong>shape_stdrul</strong>(7)</a>). It is strongly recommended, to define a project wide version selection policy only in the stdrules file and to renounce version selection rules in local Shapefiles.</p>
  </dd>
  <dt>
    BINDDEFAULT (inherited)
  </dt>
  <dd>
    <p>Internal name for VERSIONS. Should not be redefined.</p>
  </dd>
  <dt>
    BINDINSTALL (inherited)
  </dt>
  <dd>
    <p>THe default version binding rule to be applied when installang a system or system part for project wide or global use.</p>
  </dd>
  <dt>
    COMPILER (inherited)
  </dt>
  <dd>
    <p>The compile environment. This macro represents a shape <em>variant</em> selection. With each variant, a whole bunch of macro settings may be associated, so that the COMPILER variant not only sets the actual compiler (CC), but also some compilation flags. See stdvar for the default variant raster. The same as version selection rules, the variant raster should be defined project wide. Local variant definitions can very easyly lead to confusion and improper configurations.</p>
  </dd>
  <dt>
    QUALITY (inherited)
  </dt>
  <dd>
    <p>The desired quality of the produced object code. This is also a variant definition (see stdvar for other options).</p>
  </dd>
  <dt>
    RELEASEBASE (inherited)
  </dt>
  <dd>
    
  </dd>
  <dt>
    PARTIALRELEASEBASE (inherited)
  </dt>
  <dd>
    <p>The base of the directory tree, where prereleases and releases of the system are to be constructed. When building a (pre)release, the appropriate versions of all components of the system are copied from the development area to the release area. The release area should only be used for performing final tests and for bundling up a shippable package.</p>
  </dd>
  <dt>
    RELEASESRCPATH
  </dt>
  <dd>
    <p>The relative path within the release or partial release area where the suorce files ar to be copied to. Ususally, this is identical to $(NODEPATH).</p>
  </dd>
  <dt>
    RELEASEMANPATH
  </dt>
  <dd>
    <p>The relative path within the release or partial release area where all manuals are gathered.</p>
  </dd>
  <dt>
    SHAPELIBPATH (inherited)
  </dt>
  <dd>
    <p>The directory, where all common parts of the shape_RMS environment reside. Here are all the templates and shape include files located.</p>
  </dd>
  <dt>
    .BPOOL:
  </dt>
  <dd>
    <p>This is rather a pseudu-target, than a Macro. Shape interprets this as directive that causes only the listed files ($(OBJECTS)) to be put into the derived object cache. Defining the pseudo target .NOBPOOL: (without dependents) deactivates the derived object cache. This is necessary, when the development environment requires access to the same derived object cache from machines with different architectures. The reason is, that "dbm" databases (and derived object caches use dbm databases) are not portable between different machine architectures.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>Shapefile.tmpl	- Template for node specific Shapefiles</p><p>Makefile.tmpl	- Template for node specific Makefiles</p><p>release.c.template</p><p>Release.template</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO Makefile.tmpl&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/shape_RMS.1.html"><strong>shape_RMS</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="MPI.7.html"><span aria-hidden="true">&larr;</span> MPI.7: Lam/mpi implementation</a></li>
   <li class="next"><a href="NOTIFY.7.html">NOTIFY.7: Generate a notification <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
