<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gammu-smsd-tables: Description of tables for database backends of gammu-smsd(1)  the backends themselves are described in their sections, this document describes general database structure and required tables.  more sms daemons can share single database. if you do not specify phoneid in their configuration, all are treated equally and you have no guarantee which one sends outgoing message. if you configure phoneid and use it when inserting message to the outbox table (gammu-smsd-inject does this), each sms daemon will have separate outbox queue.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Description of tables for database backends of gammu-smsd(1)  the backends themselves are described in their sections, this document describes general database structure and required tables.  more sms daemons can share single database. if you do not specify phoneid in their configuration, all are treated equally and you have no guarantee which one sends outgoing message. if you configure phoneid and use it when inserting message to the outbox table (gammu-smsd-inject does this), each sms daemon will have separate outbox queue.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gammu-smsd-tables (7) manual">
  <meta name="twitter:description" content="Description of tables for database backends of gammu-smsd(1)  the backends themselves are described in their sections, this document describes general database structure and required tables.  more sms daemons can share single database. if you do not specify phoneid in their configuration, all are treated equally and you have no guarantee which one sends outgoing message. if you configure phoneid and use it when inserting message to the outbox table (gammu-smsd-inject does this), each sms daemon will have separate outbox queue.">
  <meta name="twitter:image" content="https://www.carta.tech/images/gammu-smsd-gammu-smsd-tables-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/gammu-smsd-tables.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gammu-smsd-tables (7) manual" />
  <meta property="og:description" content="Description of tables for database backends of gammu-smsd(1)  the backends themselves are described in their sections, this document describes general database structure and required tables.  more sms daemons can share single database. if you do not specify phoneid in their configuration, all are treated equally and you have no guarantee which one sends outgoing message. if you configure phoneid and use it when inserting message to the outbox table (gammu-smsd-inject does this), each sms daemon will have separate outbox queue." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gammu-smsd-gammu-smsd-tables-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gammu-smsd-tables<small> (7)</small></h1>
        <p class="lead">Description of tables for database backends of gammu-smsd(1)  the backends themselves are described in their sections, this document describes general database structure and required tables.  more sms daemons can share single database. if you do not specify phoneid in their configuration, all are treated equally and you have no guarantee which one sends outgoing message. if you configure phoneid and use it when inserting message to the outbox table (gammu-smsd-inject does this), each sms daemon will have separate outbox queue.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/gammu-smsd-tables.7.html">
      <span itemprop="name">gammu-smsd-tables: Description of tables for database backends of gammu-smsd(1)  the backends themselves are described in their sections, this document describes general database structure and required tables.  more sms daemons can share single database. if you do not specify phoneid in their configuration, all are treated equally and you have no guarantee which one sends outgoing message. if you configure phoneid and use it when inserting message to the outbox table (gammu-smsd-inject does this), each sms daemon will have separate outbox queue.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gammu-smsd/">
      <span itemprop="name">gammu-smsd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/gammu-smsd-tables.7.html">
      <span itemprop="name">gammu-smsd-tables: Description of tables for database backends of gammu-smsd(1)  the backends themselves are described in their sections, this document describes general database structure and required tables.  more sms daemons can share single database. if you do not specify phoneid in their configuration, all are treated equally and you have no guarantee which one sends outgoing message. if you configure phoneid and use it when inserting message to the outbox table (gammu-smsd-inject does this), each sms daemon will have separate outbox queue.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">RECEIVING OF MESSAGES</h2>
        <div class="sectioncontent">
<p>Received messages are stored in <em>inbox</em> table.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TRANSMITTING OF MESSAGES</h2>
        <div class="sectioncontent">
<p>Transmitted messages are read from table <em>outbox</em> and possible subsequent parts of the same message from <em>outbox_multipart</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION OF TABLES</h2>
        <div class="sectioncontent">
<h3>daemons</h3>
<p>Information about running daemons.</p>
<h3>gammu</h3>
<p>Table holding single field <strong>Version</strong> - version of a database schema. See <em>History of database structure</em> for details what has changed.</p>
<h3>inbox</h3>
<p>Table where received messages will be stored.</p><p>Fields description:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>UpdatedInDB</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when somebody (daemon, user, etc.) updated it</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ReceivingDateTime</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when SMS was received</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Text</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>encoded SMS text (for all SMS)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SenderNumber</strong><strong> (varchar(20))</strong></p>
  </dt>
  <dd>
    <p>decoded SMS sender number</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Coding</strong><strong> (enum(&apos;Default_No_Compression&apos;, &apos;Unicode_No_Compression&apos;, &apos;8bit&apos;, &apos;Default_Compression&apos;, &apos;Unicode_Compression&apos;))</strong></p>
  </dt>
  <dd>
    <p>SMS text coding</p>
  </dd>
  <dt>
    <p><strong></strong><strong>UDH</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>encoded User Data Header text</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SMSCNumber</strong><strong> (varchar(20))</strong></p>
  </dt>
  <dd>
    <p>decoded SMSC number</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Class</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>SMS class or -1 (0 is flash SMS, 1 is normal one)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>TextDecoded</strong><strong> (varchar(160))</strong></p>
  </dt>
  <dd>
    <p>decoded SMS text (for Default Alphabet/Unicode SMS)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ID</strong><strong> (integer unsigned)</strong></p>
  </dt>
  <dd>
    <p>SMS identificator (for using with external applications)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>RecipientID</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>which Gammu daemon has added it</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Processed</strong><strong> (enum(&apos;false&apos;, &apos;true&apos;))</strong></p>
  </dt>
  <dd>
    <p>you can use for marking, whether SMS was processed or not</p>
  </dd>

</dl>

<h3>outbox</h3>
<p>Messages enqueued for sending should be placed in this table. If message is multipart, subsequent parts are stored in table <em>outbox_multipart</em>.</p><p>Fields description:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>UpdatedInDB</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when somebody (daemon, user, etc.) updated it</p>
  </dd>
  <dt>
    <p><strong></strong><strong>InsertIntoDB</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when message was inserted into database</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SendingDateTime</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>set it to some value, when want to force sending after some planned time</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SendBefore</strong><strong> (time)</strong></p>
  </dt>
  <dd>
    <p>Send message before specified time, can be used to limit messages from being sent in night. Default value is 23:59:59</p><p>New in version 1.29.90.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SendAfter</strong><strong> (time)</strong></p>
  </dt>
  <dd>
    <p>Send message after specified time, can be used to limit messages from being sent in night. Default value is 00:00:00</p><p>New in version 1.29.90.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Text</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>SMS text encoded using hex values in proper coding. If you want to use TextDecoded field, keep this NULL (or empty).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DestinationNumber</strong><strong> (varchar(20))</strong></p>
  </dt>
  <dd>
    <p>recipient number</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Coding</strong><strong> (enum(&apos;Default_No_Compression&apos;, &apos;Unicode_No_Compression&apos;, &apos;8bit&apos;, &apos;Default_Compression&apos;, &apos;Unicode_Compression&apos;))</strong></p>
  </dt>
  <dd>
    <p>SMS text coding</p>
  </dd>
  <dt>
    <p><strong></strong><strong>UDH</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>User Data Header encoded using hex values which will be used for constructing the message. Without this, message will be sent as plain text.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Class</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>SMS class or -1 (0 is normal SMS, 1 is flash one)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>TextDecoded</strong><strong> (varchar(160))</strong></p>
  </dt>
  <dd>
    <p>SMS text in "human readable" form</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ID</strong><strong> (integer unsigned)</strong></p>
  </dt>
  <dd>
    <p>SMS/SMS sequence ID</p><p>Please note that this number has to be unique also for sentitems table, so reusing message IDs might not be a good idea.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>MultiPart</strong><strong> (enum(&apos;false&apos;,&apos;true&apos;))</strong></p>
  </dt>
  <dd>
    <p>info, whether there are more SMS from this sequence in outbox_multipart</p>
  </dd>
  <dt>
    <p><strong></strong><strong>RelativeValidity</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>SMS relative validity like encoded using GSM specs</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SenderID</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>which SMSD instance should send this one sequence, see <strong>PhoneID</strong></p>
  </dd>
  <dt>
    <p><strong></strong><strong>SendingTimeOut</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>used by SMSD instance for own targets</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DeliveryReport</strong><strong> (enum(&apos;default&apos;,&apos;yes&apos;,&apos;no&apos;))</strong></p>
  </dt>
  <dd>
    <p>when default is used, Delivery Report is used or not according to SMSD instance settings; yes forces Delivery Report.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>CreatorID</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>sender identification, it has to match PhoneID in SMSD configuration to make SMSD process this message</p>
  </dd>

</dl>

<h3>outbox_multipart</h3>
<p>Data for outgoing multipart messages.</p><p>Fields description:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>ID</strong><strong> (integer unsigned)</strong></p>
  </dt>
  <dd>
    <p>the same meaning as values in outbox table</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Text</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>the same meaning as values in outbox table</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Coding</strong><strong> (enum(&apos;Default_No_Compression&apos;, &apos;Unicode_No_Compression&apos;, &apos;8bit&apos;, &apos;Default_Compression&apos;, &apos;Unicode_Compression&apos;))</strong></p>
  </dt>
  <dd>
    <p>the same meaning as values in outbox table</p>
  </dd>
  <dt>
    <p><strong></strong><strong>UDH</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>the same meaning as values in outbox table</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Class</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>the same meaning as values in outbox table</p>
  </dd>
  <dt>
    <p><strong></strong><strong>TextDecoded</strong><strong> (varchar(160))</strong></p>
  </dt>
  <dd>
    <p>the same meaning as values in outbox table</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ID</strong><strong> (integer unsigned)</strong></p>
  </dt>
  <dd>
    <p>the same meaning as values in outbox table</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SequencePosition</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>info, what is SMS number in SMS sequence (start at 2, first part is in <em>outbox</em> table).</p>
  </dd>

</dl>

<h3>phones</h3>
<p>Information about connected phones. This table is periodically refreshed and you can get information such as battery or signal level from here.</p><p>Fields description:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>ID</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>PhoneID value</p>
  </dd>
  <dt>
    <p><strong></strong><strong>UpdatedInDB</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when this record has been updated</p>
  </dd>
  <dt>
    <p><strong></strong><strong>InsertIntoDB</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when this record has been created (when phone has been connected)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>TimeOut</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when this record expires</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Send</strong><strong> (boolean)</strong></p>
  </dt>
  <dd>
    <p>indicates whether SMSD is sending messages, depends on configuration directive <strong>Send</strong></p>
  </dd>
  <dt>
    <p><strong></strong><strong>Receive</strong><strong> (boolean)</strong></p>
  </dt>
  <dd>
    <p>indicates whether SMSD is receiving messages, depends on configuration directive <strong>Receive</strong></p>
  </dd>
  <dt>
    <p><strong></strong><strong>IMEI</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>IMEI of phone</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Client</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>client name, usually string Gammu with version</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Battery</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>battery level in percent (or -1 if unknown)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Signal</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>signal level in percent (or -1 if unknown)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Sent</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>Number of sent SMS messages (SMSD does not reset this counter, so it might overflow).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Received</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>Number of received SMS messages (SMSD does not reset this counter, so it might overflow).</p>
  </dd>

</dl>

<h3>sentitems</h3>
<p>Log of sent messages (and unsent ones with error code). Also if delivery reports are enabled, message state is updated after receiving delivery report.</p><p>Fields description:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>UpdatedInDB</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when somebody (daemon, user, etc.) updated it</p>
  </dd>
  <dt>
    <p><strong></strong><strong>InsertIntoDB</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when message was inserted into database</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SendingDateTime</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>when message has been sent</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DeliveryDateTime</strong><strong> (timestamp)</strong></p>
  </dt>
  <dd>
    <p>Time of receiving delivery report (if it has been enabled).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Status</strong><strong> (enum(&apos;SendingOK&apos;, &apos;SendingOKNoReport&apos;, &apos;SendingError&apos;, &apos;DeliveryOK&apos;, &apos;DeliveryFailed&apos;, &apos;DeliveryPending&apos;, &apos;DeliveryUnknown&apos;, &apos;Error&apos;))</strong></p>
  </dt>
  <dd>
    <p>Status of message sending. SendingError mens that phone failed to send the message, Error indicates some other error while processing message.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SendingOK</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Message has been sent, waiting for delivery report.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SendingOKNoReport</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Message has been sent without asking for delivery report.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SendingError</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Sending has failed.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DeliveryOK</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Delivery report arrived and reported success.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DeliveryFailed</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Delivery report arrived and reports failure.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DeliveryPending</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Delivery report announced pending deliver.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DeliveryUnknown</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Delivery report reported unknown status.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Error</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Some other error happened during sending (usually bug in SMSD).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>StatusError</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>Status of delivery from delivery report message, codes are defined in GSM specification 03.40 section 9.2.3.15 (TP-Status).</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Text</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>SMS text encoded using hex values</p>
  </dd>
  <dt>
    <p><strong></strong><strong>DestinationNumber</strong><strong> (varchar(20))</strong></p>
  </dt>
  <dd>
    <p>decoded destination number for SMS</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Coding</strong><strong> (enum(&apos;Default_No_Compression&apos;, &apos;Unicode_No_Compression&apos;, &apos;8bit&apos;, &apos;Default_Compression&apos;, &apos;Unicode_Compression&apos;))</strong></p>
  </dt>
  <dd>
    <p>SMS text coding</p>
  </dd>
  <dt>
    <p><strong></strong><strong>UDH</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>User Data Header encoded using hex values</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SMSCNumber</strong><strong> (varchar(20))</strong></p>
  </dt>
  <dd>
    <p>decoded number of SMSC, which sent SMS</p>
  </dd>
  <dt>
    <p><strong></strong><strong>Class</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>SMS class or -1 (0 is normal SMS, 1 is flash one)</p>
  </dd>
  <dt>
    <p><strong></strong><strong>TextDecoded</strong><strong> (varchar(160))</strong></p>
  </dt>
  <dd>
    <p>SMS text in "human readable" form</p>
  </dd>
  <dt>
    <p><strong></strong><strong>ID</strong><strong> (integer unsigned)</strong></p>
  </dt>
  <dd>
    <p>SMS ID</p>
  </dd>
  <dt>
    <p><strong></strong><strong>SenderID</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>which SMSD instance sent this one sequence, see <strong>PhoneID</strong></p>
  </dd>
  <dt>
    <p><strong></strong><strong>SequencePosition</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>SMS number in SMS sequence</p>
  </dd>
  <dt>
    <p><strong></strong><strong>TPMR</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>Message Reference like in GSM specs</p>
  </dd>
  <dt>
    <p><strong></strong><strong>RelativeValidity</strong><strong> (integer)</strong></p>
  </dt>
  <dd>
    <p>SMS relative validity like encoded using GSM specs</p>
  </dd>
  <dt>
    <p><strong></strong><strong>CreatorID</strong><strong> (text)</strong></p>
  </dt>
  <dd>
    <p>copied from CreatorID from outbox table, matches PhoneID</p>
  </dd>

</dl>

<h3>pbk</h3>
<p>Not used by SMSD currently, included only for application usage.</p>
<h3>pbk_groups</h3>
<p>Not used by SMSD currently, included only for application usage.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY OF DATABASE STRUCTURE</h2>
        <div class="sectioncontent">
<p><strong>NOTE:</strong> Testing versions (see <em>versioning</em>) do not have to keep same table structure as final releases. Bellow mentioned versions are for informational purposes only, you should always use stable versions in production environment.</p><p>History of schema versions:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>13</strong></p>
  </dt>
  <dd>
    <p>Added <strong>SendBefore</strong> and <strong>SendAfter</strong> fields.</p><p>Changed in version 1.29.90.</p><p>Also PostgreSQL fields are now case sensitive (same as other backends).</p><p>Changed in version 1.29.93.</p>
  </dd>
  <dt>
    <p><strong>12</strong></p>
  </dt>
  <dd>
    <p>the changes only affect MySQL structure changing default values for timestamps from <strong>0000-00-00 00:00:00</strong> to <strong>CURRENT_TIMESTAMP()</strong> by using triggers, to update to this version, just execute triggers definition at the end of SQL file.</p><p>Changed in version 1.28.94.</p>
  </dd>
  <dt>
    <p><strong>11</strong></p>
  </dt>
  <dd>
    <p>all fields for storing message text are no longer limited to 160 chars, but are arbitrary length text fields.</p><p>Changed in version 1.25.92.</p>
  </dd>
  <dt>
    <p><strong>10</strong></p>
  </dt>
  <dd>
    <p><strong>DeliveryDateTime</strong> is now NULL when message is not delivered, added several indexes</p><p>Changed in version 1.22.95.</p>
  </dd>
  <dt>
    <p><strong>9</strong></p>
  </dt>
  <dd>
    <p>added sent/received counters to phones table</p><p>Changed in version 1.22.93.</p>
  </dd>
  <dt>
    <p><strong>8</strong></p>
  </dt>
  <dd>
    <p>Signal and battery state are now stored in database.</p><p>Changed in version 1.20.94.</p>
  </dd>
  <dt>
    <p><strong>7</strong></p>
  </dt>
  <dd>
    <p>Added <strong>CreatorID</strong> to several tables.</p><p>Changed in version 1.07.00.</p>
  </dd>
  <dt>
    <p><strong>6</strong></p>
  </dt>
  <dd>
    <p>Many fields in outbox can now be NULL.</p><p>Changed in version 1.06.00.</p>
  </dd>
  <dt>
    <p><strong>5</strong></p>
  </dt>
  <dd>
    <p>Introduced daemons table and various other changes.</p><p>Changed in version 1.03.00.</p>
  </dd>
  <dt>
    <p><strong>3</strong></p>
  </dt>
  <dd>
    <p>Introduced phones table and various other changes.</p><p>Changed in version 0.98.0.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<h3>Creating tables</h3>
<p>SQL scripts to create all needed tables for most databases are included in Gammu documentation (docs/sql). As well as some PHP scripts interacting with the database.</p><p>For example to create SQLite tables, issue following command:</p>
<pre>
sqlite3 smsd.db &lt; docs/sql/sqlite.sql
</pre>

<h3>Injecting a message using SQL</h3>
<p>To send a message, you can either use <em>gammu-smsd-inject</em>, which does all the magic for you, or you can insert the message manually. The simplest example is short text message:</p>
<pre>
INSERT INTO outbox (
    DestinationNumber,
    TextDecoded,
    CreatorID,
    Coding
) VALUES (
    &apos;800123465&apos;,
    &apos;This is a SQL test message&apos;,
    &apos;Program&apos;,
    &apos;Default_No_Compression&apos;
);
</pre>
<p>Please note usage of <strong>TextDecoded</strong> field, for <strong>Text</strong> field, you would have to hex encode the unicode text:</p>
<pre>
INSERT INTO outbox (
    DestinationNumber,
    Text,
    CreatorID,
    Coding
) VALUES (
    &apos;800123465&apos;,
    &apos;005400680069007300200069007300200061002000530051004c002000740065007300740020006d006500730073006100670065&apos;,
    &apos;Program&apos;,
    &apos;Default_No_Compression&apos;
);
</pre>

<h3>Injecting long message using SQL</h3>
<p>Inserting multipart messages is a bit more tricky, you need to construct also UDH header and store it hexadecimally written into UDH field. Unless you have a good reason to do this manually, use <em>gammu-smsd-inject</em>.</p><p>For long text message, the UDH starts with <strong>050003</strong> followed by byte as a message reference (you can put anything there, but it should be different for each message, <strong>D3</strong> in following example), byte for number of messages (<strong>02</strong> in example, it should be unique for each message you send to same phone number) and byte for number of current message (<strong>01</strong> for first message, <strong>02</strong> for second, etc.).</p><p>For example long text message of two parts could look like following:</p>
<pre>
INSERT INTO outbox (
    CreatorID,
    MultiPart,
    DestinationNumber,
    UDH,
    TextDecoded,
    Coding
) VALUES (
    &apos;Gammu 1.23.91&apos;,
    &apos;true&apos;,
    &apos;123465&apos;,
    &apos;050003D30201&apos;,
    &apos;Mqukqirip ya konej eqniu rejropocejor hugiygydewl tfej nrupxujob xuemymiyliralj. Te tvyjuh qaxumur ibewfoiws zuucoz tdygu gelum L ejqigqesykl kya jdytbez&apos;,
    &apos;Default_No_Compression&apos;
)

INSERT INTO outbox_multipart (
    SequencePosition,
    UDH,
    Class,
    TextDecoded,
    ID,
    Coding
) VALUES (
    2,
    &apos;050003D30202&apos;,
    &apos;u xewz qisubevumxyzk ufuylehyzc. Nse xobq dfolizygqysj t bvowsyhyhyemim ovutpapeaempye giuuwbib.&apos;,
    &lt;ID_OF_INSERTED_RECORD_IN_OUBOX_TABLE&gt;,
    &apos;Default_No_Compression&apos;
)
</pre>
<p><strong>NOTE:</strong> Adding UDH means that you have less space for text, in above example you can use only 153 characters in single message.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Michal Čihař &lt;michal@cihar.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>2009-2012, Michal Čihař &lt;michal@cihar.com&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gammu-smsd-sql.7.html"><span aria-hidden="true">&larr;</span> gammu-smsd-sql.7: Gammu-smsd(1) backend using sql abstraction layer to use any supported database as a message storage</a></li>
   <li class="next"><a href="ganeti.7.html">ganeti.7: None <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
