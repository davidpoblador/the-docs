<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xs_tcp: Crossroads unicast transport using tcp</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Crossroads unicast transport using tcp">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xs_tcp (7) manual">
  <meta name="twitter:description" content="Crossroads unicast transport using tcp">
  <meta name="twitter:image" content="https://www.carta.tech/images/libxs-dev-xs_tcp-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/xs_tcp.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xs_tcp (7) manual" />
  <meta property="og:description" content="Crossroads unicast transport using tcp" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libxs-dev-xs_tcp-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xs_tcp<small> (7)</small></h1>
        <p class="lead">Crossroads unicast transport using tcp</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/xs_tcp.7.html">
      <span itemprop="name">xs_tcp: Crossroads unicast transport using tcp</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libxs-dev/">
      <span itemprop="name">libxs-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/xs_tcp.7.html">
      <span itemprop="name">xs_tcp: Crossroads unicast transport using tcp</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>TCP is an ubiquitous, reliable, unicast transport. When connecting distributed applications over a network with Crossroads, using the TCP transport will likely be your first choice.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADDRESSING</h2>
        <div class="sectioncontent">
<p>A Crossroads address string consists of two parts as follows: <em>transport</em>://[<em>source address</em>;]<em>endpoint</em>. The <em>transport</em> part specifies the underlying transport protocol to use, and for the TCP transport shall be set to tcp. <em>source address</em> is optional. The meaning of the <em>endpoint</em> part for the TCP transport is defined below.</p><h3>Assigning a local address to a socket</h3>
<p>When assigning a local address to a socket using <em>xs_bind()</em> with the <em>tcp</em> transport, the <em>endpoint</em> shall be interpreted as an <em>interface</em> followed by a colon and the TCP port number to use.</p><p>An <em>interface</em> may be specified by either of the following:</p><p>The wild-card *, meaning all available interfaces.</p><p>The primary IPv4 or IPv6 address assigned to the interface, in its numeric representation.</p><p>The interface name as defined by the operating system.</p><p><strong>Note</strong></p><p>Interface names are not standardised in any way and should be assumed to be arbitrary and platform dependent. On Win32 platforms no short interface names exist, thus only the primary IP address may be used to specify an <em>interface</em>.</p>
<h3>Connecting a socket</h3>
<p>When connecting a socket to a peer address using <em>xs_connect()</em> with the <em>tcp</em> transport, the <em>endpoint</em> shall be interpreted as a <em>peer address</em> followed by a colon and the TCP port number to use.</p><p>A <em>peer address</em> may be specified by either of the following:</p><p>The DNS name of the peer.</p><p>The IPv4 or IPv6 address of the peer, in it\(cqs numeric representation.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WIRE FORMAT</h2>
        <div class="sectioncontent">
<p>Crossroads messages are transmitted over TCP in frames consisting of an encoded <em>payload length</em>, followed by a <em>flags</em> field and the message body. The <em>payload length</em> is defined as the combined length in octets of the message body and the <em>flags</em> field.</p><p>For frames with a <em>payload length</em> not exceeding 254 octets, the <em>payload length</em> shall be encoded as a single octet. The minimum valid <em>payload length</em> of a frame is 1 octet, thus a <em>payload length</em> of 0 octets is invalid and such frames SHOULD be ignored.</p><p>For frames with a <em>payload length</em> exceeding 254 octets, the <em>payload length</em> shall be encoded as a single octet with the value 255 followed by the <em>payload length</em> represented as a 64-bit unsigned integer in network byte order.</p><p>The <em>flags</em> field consists of a single octet containing various control flags:</p><p>Bit 0 (MORE): <em>More message parts to follow</em>. A value of 0 indicates that there are no more message parts to follow; or that the message being sent is not a multi-part message. A value of 1 indicates that the message being sent is a multi-part message and more message parts are to follow.</p><p>Bits 1-7: <em>Reserved</em>. Bits 1-7 are reserved for future expansion and MUST be set to zero.</p><p>The following ABNF grammar represents a single <em>frame</em>:</p>
<pre>
    frame           = (length flags data)
    length          = OCTET / (escape 8OCTET)
    flags           = OCTET
    escape          = %xFF
    data            = *OCTET
</pre>
<p>The following diagram illustrates the layout of a frame with a <em>payload length</em> not exceeding 254 octets:</p>
<pre>
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Payload length|     Flags     |       Message body        ... |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Message body ...
+-+-+-+-+-+-+- ...
</pre>
<p>The following diagram illustrates the layout of a frame with a <em>payload length</em> exceeding 254 octets:</p>
<pre>
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     0xff      |               Payload length              ... |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Payload length                      ... |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Payload length|     Flags     |        Message body       ... |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Message body ...
+-+-+-+-+-+-+-+ ...
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p><strong>Assigning a local address to a socket</strong>.</p>
<pre>
/* TCP port 5555 on all available interfaces */
rc = xs_bind(socket, "tcp://*:5555");
assert (rc != -1);
/* TCP port 5555 on the local loop-back interface on all platforms */
rc = xs_bind(socket, "tcp://127.0.0.1:5555");
assert (rc != -1);
/* TCP port 5555 on the first Ethernet network interface on Linux */
rc = xs_bind(socket, "tcp://eth0:5555");
assert (rc != -1);
</pre>
<p><strong>Connecting a socket</strong>.</p>
<pre>
/* Connecting using an IP address */
rc = xs_connect(socket, "tcp://192.168.1.1:5555");
assert (rc != -1);
/* Connecting using a DNS name */
rc = xs_connect(socket, "tcp://server1:5555");
assert (rc != -1);
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xs_tcp&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/xs_bind.3.html"><strong>xs_bind</strong>(3)</a> <a href="../man3/xs_connect.3.html"><strong>xs_connect</strong>(3)</a> <a href="../man7/xs_pgm.7.html"><strong>xs_pgm</strong>(7)</a> <a href="../man7/xs_ipc.7.html"><strong>xs_ipc</strong>(7)</a> <a href="../man7/xs_inproc.7.html"><strong>xs_inproc</strong>(7)</a> <strong>xs</strong>(7)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>The Crossroads documentation was written by Martin Sustrik &lt;\m[blue]<strong>sustrik@250bpm.com</strong>\m[]\s-2\u[1]\d\s+2&gt; and Martin Lucina &lt;\m[blue]<strong>martin@lucina.net</strong>\m[]\s-2\u[2]\d\s+2&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>sustrik@250bpm.com</p><p>mailto:sustrik@250bpm.com</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>martin@lucina.net</p><p>mailto:martin@lucina.net</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xs_pgm.7.html"><span aria-hidden="true">&larr;</span> xs_pgm.7: Reliable multicast transport via pgm protocol</a></li>
   <li class="next"><a href="xs_zmq.7.html">xs_zmq.7: Crossroads i/o zeromq compatibility library <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
