<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>stopping: Event signalling that a job is stopping</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Event signalling that a job is stopping">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="stopping (7) manual">
  <meta name="twitter:description" content="Event signalling that a job is stopping">
  <meta name="twitter:image" content="https://www.carta.tech/images/upstart-stopping-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/stopping.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="stopping (7) manual" />
  <meta property="og:description" content="Event signalling that a job is stopping" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/upstart-stopping-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">stopping<small> (7)</small></h1>
        <p class="lead">Event signalling that a job is stopping</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/stopping.7.html">
      <span itemprop="name">stopping: Event signalling that a job is stopping</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/upstart/">
      <span itemprop="name">upstart</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/stopping.7.html">
      <span itemprop="name">stopping: Event signalling that a job is stopping</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>stopping</strong> <strong>JOB</strong>=<em>JOB</em> <strong>INSTANCE</strong>=<em>INSTANCE</em> <strong>RESULT</strong>=<em>RESULT</em> <em></em>[<strong>PROCESS</strong>=<em>PROCESS</em><strong></strong>] <em></em>[<strong>EXIT_STATUS</strong>=<em>STATUS</em><strong></strong>] <em></em>[<strong>EXIT_SIGNAL</strong>=<em>SIGNAL</em><strong></strong>] [<em>ENV</em>]...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>stopping</strong> event is generated by the Upstart <a href="../man8/init.8.html"><strong>init</strong>(8)</a> daemon when an instance of a job begins stopping.  The <strong>JOB</strong> environment variable contains the job name, and the <strong>INSTANCE</strong> environment variable contains the instance name which will be empty for single-instance jobs.</p><p>If the job is stopping normally, the <strong>RESULT</strong> environment variable will be <em>ok</em>, otherwise if the job is stopping because it has failed it will be <em>failed</em>.</p><p>When the job has failed, the process that failed will be given in the <strong>PROCESS</strong> environment variable.  This may be <em>pre-start</em>, <em>post-start</em>, <em>main</em>, <em>pre-stop</em> or <em>post-stop</em>; it may also be the special value <em>respawn</em> to indicate that the job is stopping because it hit the respawn limit.</p><p>Finally in the case of a failed job, one of either <strong>EXIT_STATUS</strong> or <strong>EXIT_SIGNAL</strong> may be given to indicate the cause of the stop.  Either <strong>EXIT_STATUS</strong> will contain the exit status code of the process, or <strong>EXIT_SIGNAL</strong> will contain the name of the signal that the process received.  The <strong>normal exit</strong> job configuration stanza can be used to prevent particular exit status values or signals resulting in a failed job, see <a href="../man5/init.5.html"><strong>init</strong>(5)</a> for more information.</p><p>If neither <strong>EXIT_STATUS</strong> or <strong>EXIT_SIGNAL</strong> is given for a failed process, it is because the process failed to spawn (for example, file not found).  See the system logs for the error.</p><p><a href="../man8/init.8.html"><strong>init</strong>(8)</a> will wait for all services started by this event to be running, all tasks started by this event to have finished and all jobs stopped by this event to be stopped before allowing the job to continue stopping.</p><p>This allows jobs to depend on other jobs, safely stopping themselves before their dependency goes away.  This event is typically combined with the <a href="../man7/started.7.html"><strong>started</strong>(7)</a> event by services.</p><p>Job configuration files may use the <strong>export</strong> stanza to export environment variables from their own environment into the <strong>stopping</strong> event.  See <a href="../man5/init.5.html"><strong>init</strong>(5)</a> for more details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>A service that wishes to depend on another service might use:</p>
<pre>
start on started apache
stop on stopping apache
</pre>
<p>A task that must be run before another task or service is stopped might use:</p>
<pre>
start on stopping postgresql RESULT=ok
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO stopping&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/starting.7.html"><strong>starting</strong>(7)</a> <a href="../man7/started.7.html"><strong>started</strong>(7)</a> <a href="../man7/stopped.7.html"><strong>stopped</strong>(7)</a> <a href="../man5/init.5.html"><strong>init</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="stopped.7.html"><span aria-hidden="true">&larr;</span> stopped.7: Event signalling that a job has stopped</a></li>
   <li class="next"><a href="suffixes.7.html">suffixes.7: List of file suffixes <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
