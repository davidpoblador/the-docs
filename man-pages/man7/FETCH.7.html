<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FETCH: Retrieve rows from a query using a cursor</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Retrieve rows from a query using a cursor">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="FETCH (7) manual">
  <meta name="twitter:description" content="Retrieve rows from a query using a cursor">
  <meta name="twitter:image" content="https://www.carta.tech/images/postgresql-client-9.4-FETCH-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/FETCH.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="FETCH (7) manual" />
  <meta property="og:description" content="Retrieve rows from a query using a cursor" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/postgresql-client-9.4-FETCH-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">FETCH<small> (7)</small></h1>
        <p class="lead">Retrieve rows from a query using a cursor</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/FETCH.7.html">
      <span itemprop="name">FETCH: Retrieve rows from a query using a cursor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/postgresql-client-9.4/">
      <span itemprop="name">postgresql-client-9.4</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/FETCH.7.html">
      <span itemprop="name">FETCH: Retrieve rows from a query using a cursor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
FETCH [ <em>direction</em> [ FROM | IN ] ] <em>cursor_name</em>

where <em>direction</em> can be empty or one of:

    NEXT
    PRIOR
    FIRST
    LAST
    ABSOLUTE <em>count</em>
    RELATIVE <em>count</em>
    <em>count</em>
    ALL
    FORWARD
    FORWARD <em>count</em>
    FORWARD ALL
    BACKWARD
    BACKWARD <em>count</em>
    BACKWARD ALL
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>FETCH</strong> retrieves rows using a previously-created cursor.</p><p>A cursor has an associated position, which is used by <strong>FETCH</strong>. The cursor position can be before the first row of the query result, on any particular row of the result, or after the last row of the result. When created, a cursor is positioned before the first row. After fetching some rows, the cursor is positioned on the row most recently retrieved. If <strong>FETCH</strong> runs off the end of the available rows then the cursor is left positioned after the last row, or before the first row if fetching backward. <strong>FETCH ALL</strong> or <strong>FETCH BACKWARD ALL</strong> will always leave the cursor positioned after the last row or before the first row.</p><p>The forms NEXT, PRIOR, FIRST, LAST, ABSOLUTE, RELATIVE fetch a single row after moving the cursor appropriately. If there is no such row, an empty result is returned, and the cursor is left positioned before the first row or after the last row as appropriate.</p><p>The forms using FORWARD and BACKWARD retrieve the indicated number of rows moving in the forward or backward direction, leaving the cursor positioned on the last-returned row (or after/before all rows, if the <em>count</em> exceeds the number of rows available).</p><p>RELATIVE 0, FORWARD 0, and BACKWARD 0 all request fetching the current row without moving the cursor, that is, re-fetching the most recently fetched row. This will succeed unless the cursor is positioned before the first row or after the last row; in which case, no row is returned.</p><p><strong>Note</strong></p><p>This page describes usage of cursors at the SQL command level. If you are trying to use cursors inside a PL/pgSQL function, the rules are different &ndash; see Section 40.7, &ldquo;Cursors&rdquo;, in the documentation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">
<p><em>direction</em></p><p><em>direction</em> defines the fetch direction and number of rows to fetch. It can be one of the following:</p><p>NEXT</p><p>Fetch the next row. This is the default if <em>direction</em> is omitted.</p><p>PRIOR</p><p>Fetch the prior row.</p><p>FIRST</p><p>Fetch the first row of the query (same as ABSOLUTE 1).</p><p>LAST</p><p>Fetch the last row of the query (same as ABSOLUTE -1).</p><p>ABSOLUTE <em>count</em></p><p>Fetch the <em>count</em>&apos;th row of the query, or the abs(<em>count</em>)&apos;th row from the end if <em>count</em> is negative. Position before first row or after last row if <em>count</em> is out of range; in particular, ABSOLUTE 0 positions before the first row.</p><p>RELATIVE <em>count</em></p><p>Fetch the <em>count</em>&apos;th succeeding row, or the abs(<em>count</em>)&apos;th prior row if <em>count</em> is negative. RELATIVE 0 re-fetches the current row, if any.</p><p><em>count</em></p><p>Fetch the next <em>count</em> rows (same as FORWARD <em>count</em>).</p><p>ALL</p><p>Fetch all remaining rows (same as FORWARD ALL).</p><p>FORWARD</p><p>Fetch the next row (same as NEXT).</p><p>FORWARD <em>count</em></p><p>Fetch the next <em>count</em> rows. FORWARD 0 re-fetches the current row.</p><p>FORWARD ALL</p><p>Fetch all remaining rows.</p><p>BACKWARD</p><p>Fetch the prior row (same as PRIOR).</p><p>BACKWARD <em>count</em></p><p>Fetch the prior <em>count</em> rows (scanning backwards). BACKWARD 0 re-fetches the current row.</p><p>BACKWARD ALL</p><p>Fetch all prior rows (scanning backwards).</p><p><em>count</em></p><p><em>count</em> is a possibly-signed integer constant, determining the location or number of rows to fetch. For FORWARD and BACKWARD cases, specifying a negative <em>count</em> is equivalent to changing the sense of FORWARD and BACKWARD.</p><p><em>cursor_name</em></p><p>An open cursor&apos;s name.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OUTPUTS</h2>
        <div class="sectioncontent">
<p>On successful completion, a <strong>FETCH</strong> command returns a command tag of the form</p>
<pre>
FETCH <em>count</em>
</pre>
<p>The <em>count</em> is the number of rows fetched (possibly zero). Note that in psql, the command tag will not actually be displayed, since psql displays the fetched rows instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The cursor should be declared with the SCROLL option if one intends to use any variants of <strong>FETCH</strong> other than <strong>FETCH NEXT</strong> or <strong>FETCH FORWARD</strong> with a positive count. For simple queries PostgreSQL will allow backwards fetch from cursors not declared with SCROLL, but this behavior is best not relied on. If the cursor is declared with NO SCROLL, no backward fetches are allowed.</p><p>ABSOLUTE fetches are not any faster than navigating to the desired row with a relative move: the underlying implementation must traverse all the intermediate rows anyway. Negative absolute fetches are even worse: the query must be read to the end to find the last row, and then traversed backward from there. However, rewinding to the start of the query (as with FETCH ABSOLUTE 0) is fast.</p><p><a href="../man7/DECLARE.7.html"><strong>DECLARE</strong>(7)</a> is used to define a cursor. Use <a href="../man7/MOVE.7.html"><strong>MOVE</strong>(7)</a> to change cursor position without retrieving data.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following example traverses a table using a cursor:</p>
<pre>
BEGIN WORK;

-- Set up a cursor:
DECLARE liahona SCROLL CURSOR FOR SELECT * FROM films;

-- Fetch the first 5 rows in the cursor liahona:
FETCH FORWARD 5 FROM liahona;

 code  |          title          | did | date_prod  |   kind   |  len
-------+-------------------------+-----+------------+----------+-------
 BL101 | The Third Man           | 101 | 1949-12-23 | Drama    | 01:44
 BL102 | The African Queen       | 101 | 1951-08-11 | Romantic | 01:43
 JL201 | Une Femme est une Femme | 102 | 1961-03-12 | Romantic | 01:25
 P_301 | Vertigo                 | 103 | 1958-11-14 | Action   | 02:08
 P_302 | Becket                  | 103 | 1964-02-03 | Drama    | 02:28

-- Fetch the previous row:
FETCH PRIOR FROM liahona;

 code  |  title  | did | date_prod  |  kind  |  len
-------+---------+-----+------------+--------+-------
 P_301 | Vertigo | 103 | 1958-11-14 | Action | 02:08

-- Close the cursor and end the transaction:
CLOSE liahona;
COMMIT WORK;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMPATIBILITY</h2>
        <div class="sectioncontent">
<p>The SQL standard defines <strong>FETCH</strong> for use in embedded SQL only. The variant of <strong>FETCH</strong> described here returns the data as if it were a <strong>SELECT</strong> result rather than placing it in host variables. Other than this point, <strong>FETCH</strong> is fully upward-compatible with the SQL standard.</p><p>The <strong>FETCH</strong> forms involving FORWARD and BACKWARD, as well as the forms FETCH <em>count</em> and FETCH ALL, in which FORWARD is implicit, are PostgreSQL extensions.</p><p>The SQL standard allows only FROM preceding the cursor name; the option to use IN, or to leave them out altogether, is an extension.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO FETCH&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/CLOSE.7.html"><strong>CLOSE</strong>(7)</a>, <a href="../man7/DECLARE.7.html"><strong>DECLARE</strong>(7)</a>, <a href="../man7/MOVE.7.html"><strong>MOVE</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="EXPLAIN.7.html"><span aria-hidden="true">&larr;</span> EXPLAIN.7: Show the execution plan of a statement</a></li>
   <li class="next"><a href="GNUstep.7.html">GNUstep.7: A free implementation of the openstep standard <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
