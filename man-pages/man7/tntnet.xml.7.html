<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tntnet.xml: Configuration file for tntnet(8)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Configuration file for tntnet(8)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tntnet.xml (7) manual">
  <meta name="twitter:description" content="Configuration file for tntnet(8)">
  <meta name="twitter:image" content="https://www.carta.tech/images/tntnet-tntnet.xml-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/tntnet.xml.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tntnet.xml (7) manual" />
  <meta property="og:description" content="Configuration file for tntnet(8)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/tntnet-tntnet.xml-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tntnet.xml<small> (7)</small></h1>
        <p class="lead">Configuration file for tntnet(8)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/tntnet.xml.7.html">
      <span itemprop="name">tntnet.xml: Configuration file for tntnet(8)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/tntnet/">
      <span itemprop="name">tntnet</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/tntnet.xml.7.html">
      <span itemprop="name">tntnet.xml: Configuration file for tntnet(8)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Tntnet is configured using a xml file. The name of the file is <em>tntnet.xml</em>. The root node of <em>tntnet.xml</em> should be <strong>tntnet</strong> while it is not checked. Most of the settings are just single values. They are described here in alphabetical order.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SETTINGS</h2>
        <div class="sectioncontent">
<p>This section describes the variables, used by Tntnet (8).</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>&lt;accessLog&gt;</strong><em>filename</em><strong>&lt;/accessLog&gt;</strong></p>
  </dt>
  <dd>
    <p>Writes a log entry for each request in a common format. This format is compatible with most log file analyze systems for http servers.</p><ul>
<li><p>The log file has the fields: <strong>peer-ip</strong> - <strong>username</strong> [<strong>time</strong>] "<strong>http-method</strong> <strong>query-string</strong> HTTP/<strong>major-version</strong>.<strong>minor-version</strong>" <strong>http-return-code</strong> <strong>content-size</strong> "<strong>referer</strong>" "<strong>user-agent</strong>"</p></li><li><p>The <strong>username</strong>, <strong>referer</strong> and <strong>user-agent</strong> may be '-' when the value is not available. Also the <strong>content-size</strong> can be empty in some cases.</p></li><li><p><em>Example</em></p></li>
</ul>
  </dd>

</dl>

<pre>
&lt;accessLog&gt;/var/log/tntnet/access.log&lt;/accessLog
</pre>
<p><strong>&lt;bufferSize&gt;</strong><em>bytes</em><strong>&lt;/bufferSize&gt;</strong></p><ul>
<li><p>Specifies the number of bytes sent in a single system-call. This does not limit anything in application-level. It does not affect e.g. savepoints or exception-handling. Component-output is collected completely and then passed in chunks of <strong>bufferSize</strong> bytes to the operating system.</p></li><li><p>The default value is 16384.</p></li>
</ul><p><strong>&lt;compPath&gt;</strong> [ <strong>&lt;entry&gt;</strong><em>path1</em><strong>&lt;/entry&gt;</strong> ] <strong>&lt;/compPath&gt;</strong></p><ul>
<li><p><strong>compPath</strong> specifies, where tntnet should search for webapplications. Tntnet searches first in the current directory and then in each directory, you specify here, until a library is found. You can repeat the directive as many times as desired to add more entries. If it is not found, the next <strong>mappings</strong> entry is tried.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;compPath&gt;
  &lt;entry&gt;/usr/local/lib/tntnet&lt;/entry&gt;
  &lt;entry&gt;/usr/local/share/tntnet&lt;/entry&gt;
&lt;/compPath&gt;
</pre>
<p><strong>&lt;chroot&gt;</strong><em>directory</em><strong>&lt;/chroot&gt;</strong></p><ul>
<li><p>Does a <a href="../man2/chroot.2.html"><strong>chroot</strong>(2)</a>-system call on startup, which locks the process into the directory at system-level.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;chroot&gt;/var/tntnet&lt;/chroot&gt;
</pre>
<p><strong>&lt;daemon&gt;</strong><em>0|1</em><strong>&lt;/daemon&gt;</strong></p><ul>
<li><p>If this flag is set to 1, Tntnet forks at startup and terminates the parent-process on successful initialization.</p></li>
</ul><p><strong>&lt;dir&gt;</strong><em>directory</em><strong>&lt;/dir&gt;</strong></p><ul>
<li><p>Changes the current working directory of the process on startup.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;dir&gt;/var/tntnet&lt;/dir&gt;
</pre>
<p><strong>&lt;enableCompression&gt;</strong><em>yes|no</em><strong>&lt;/enableCompression&gt;</strong></p><ul>
<li><p>Specifies, if Tntnet should use gzip-compression at http-level. By default Tntnet use compression. A http-client like a web browser can send a header "Accept-Encoding", to tell Tntnet, that it would accept compressed data. Tntnet then can decide, if it use compression. When the body is complete, Tntnet tries to compress the body. If the data can be compressed by more than 10%, Tntnet sends this compressed data. With this flag, this feature can be turned off.</p></li><li><p>Compression slows down processing but reduces the network-load. Normally the size of html-pages can be compressed by about 70%, while Tntnet slows down by up to 30%.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;enableCompression&gt;no&lt;/enableCompression&gt;
</pre>
<p><strong>&lt;errorLog&gt;</strong><em>filename</em><strong>&lt;/errorLog&gt;</strong></p><ul>
<li><p>Redirects stderr to the specified file when tntnet runs as a daemon. If ErrorLog is not set stderr is redirected to /dev/null.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;errorLog&gt;/var/log/tntnet/error.log&lt;/errorLog&gt;
</pre>
<p><strong>&lt;group&gt;</strong><em>unix-group-id</em><strong>&lt;/group&gt;</strong></p><ul>
<li><p>Changes the group under which tntnet runs.</p></li><li><p>The user is changes using the system call <a href="../man2/setgid.2.html"><strong>setgid</strong>(2)</a>, which is only allowed, when tntnet starts as root user.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;group&gt;tntnet-group&lt;/group&gt;
</pre>
<p><strong>&lt;keepAliveTimeout&gt;</strong><em>milliseconds</em><strong>&lt;/keepAliveTimeout&gt;</strong></p><ul>
<li><p>Sets the timeout for keep-alive requests.</p></li><li><p>Tntnet tries to do keep-alive-requests wherever possible. This has the effect, that tntnet can receive multiple requests within a single tcp-connection. The connection times out after KeepAliveTimeout milliseconds. The timeout defaults to 15000ms.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;keepAliveTimeout&gt;300000&lt;/keepAliveTimeout&gt;
</pre>
<p><strong>&lt;keepAliveMax&gt;</strong><em>number</em><strong>&lt;/keepAliveMax&gt;</strong></p><ul>
<li><p>Sets the maximum number of request per tcp-connection. This defaults to 100.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;keepAliveTimeout&gt;10&lt;/keepAliveTimeout&gt;
</pre>
<p><strong>&lt;listeners&gt;</strong><em>listener definition</em><strong>&lt;/listeners&gt;</strong></p><ul>
<li><p>Specifies, on which local interfaces tntnet waits for connections. There can be more than one Listen-directives, in which case tntnet waits on every address.</p></li><li><p>See separate section <em>Listeners</em></p></li>
</ul><p><strong>&lt;logging&gt;</strong><em>listener definition</em><strong>&lt;/logging&gt;</strong></p><ul>
<li><p>Configures logging. See separate section <em>logging</em></p></li>
</ul><p><strong>&lt;listenRetry&gt;</strong><em>number</em><strong>&lt;/listenRetry&gt;</strong></p><ul>
<li><p>On startup Tntnet calls listen on the specified port. When the systemcall returns with an error, Tntnet tries again and fails after the specified number of attempts.</p></li><li><p>The default number is 5.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;listenRetry&gt;10&lt;/listenRetry&gt;
</pre>
<p><strong>&lt;listenBacklog&gt;</strong><em>number</em><strong>&lt;/listenBacklog&gt;</strong></p><ul>
<li><p>The system-call <strong>listen</strong>(3p) needs a parameter backlog, which specifies, how many pending connections the operating-system should queue before it starts to ignore new request. The value is configurable here.</p></li><li><p>The default value is 16.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;ListenBacklog&gt;64&lt;/ListenBacklog&gt;
</pre>
<p><strong>&lt;mappings&gt;</strong><em>urlmappings</em><strong>&lt;/mappings&gt;</strong></p><ul>
<li><p>This is the most important setting for tntnet. It specifies, which components schould be called on which urls.</p></li><li><p>For details see the section <em>Url mapping</em>.</p></li>
</ul><p><strong>&lt;maxUrlMapCache&gt;</strong><em>number</em><strong>&lt;/maxUrlMapCache&gt;</strong></p><ul>
<li><p>Mapping urls to components is done using regular expressions. Executing these expressions is quite expensive while the number of different urls is quite limited in typical web applications. Hence tntnet caches the results.</p></li><li><p>The caching algorithm is very simple. Tntnet just collects the results in a map. When the maximum size of the list is reached, it is cleared. This makes management of the cache very cheap.</p></li><li><p>This setting sets the maximum number of entries in the map.</p></li><li><p>If you see frequently a warning message, that the cache is cleared, you may consider increasing the size.</p></li><li><p>The default value is 8192.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;maxUrlMapCache&gt;32768&lt;/maxUrlMapCache&gt;
</pre>
<p><strong>&lt;maxRequestSize&gt;</strong><em>number</em><strong>&lt;/maxRequestSize&gt;</strong></p><ul>
<li><p>This directive limits the size of the request. After <em>number</em> Bytes the connection is just closed. This prevents denial-of-service-attacks through long requests. Every request is read into memory, so it must fit into it. Bear in mind, that if you use file-upload-fields a request might be larger than just a few bytes.</p></li><li><p>The value defaults to 0, which means, that there is no limit at all.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;maxRequestSize&gt;65536&lt;/maxRequestSize&gt;
</pre>
<p><strong>&lt;maxRequestTime&gt;</strong><em>seconds</em><strong>&lt;/maxRequestTime&gt;</strong></p><ul>
<li><p>In daemon mode tntnet has a watchdog, which restarts tntnet when the maximum request time is exceeded. This happens, when a request is in a endless loop or otherwise hangs. Restarting tntnet looses all active sessions and the currently running requests. Therefore the timeout should be well long enough for the longes request.</p></li><li><p>The default value is 600 seconds, which is normally much longer than a http request should run. If the Timeout is set to 0, the watchdog is deactivated.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;maxRequestTime&gt;1200&lt;/maxRequestTime&gt;
</pre>
<p><strong>&lt;minThreads&gt;</strong><em>number</em><strong>&lt;/minThreads&gt;</strong></p><ul>
<li><p>Tntnet uses a dynamic pool of worker-threads, which wait for incoming requests. MinThreads specifies, how many worker threads there have to be. This defaults to 5.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;minThreads&gt;10&lt;/minThreads&gt;
</pre>
<p><strong>&lt;minCompressSize&gt;</strong><em>number</em><strong>&lt;/minCompressSize&gt;</strong></p><ul>
<li><p>Http-compression for replies smaller than this are not compressed at all.</p></li><li><p>The default value for this is 1024.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;minCompressSize&gt;256&lt;/minCompressSize&gt;
</pre>
<p><strong>&lt;mimeDb&gt;</strong><em>filename</em><strong>&lt;/mimeDb&gt;</strong></p><ul>
<li><p>Specify filename for mime db. The default is /etc/mime.types.</p></li><li><p>The format of the file is just like this /etc/mime.types. A mime type is followed after white space by a list of file extensions delimited by white space.</p></li>
</ul><p><strong>&lt;maxThreads&gt;</strong><em>number</em><strong>&lt;/maxThreads&gt;</strong></p><ul>
<li><p>Tntnet uses a dynamic pool of worker-threads, which wait for incoming requests. <strong>maxThreads</strong> limits the number of threads.</p></li><li><p>The default is 100.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;maxThreads&gt;200&lt;/maxThreads&gt;
</pre>
<p><strong>&lt;pidfile&gt;</strong><em>filename</em><strong>&lt;/pidfile&gt;</strong></p><ul>
<li><p>When run in daemon-mode, tntnet writes the process-id of the monitor-process to filename. When the monitor-process is deactivated, the pid of the worker-process is written. This ensures, that sending a sigkill to the the stored process-id stops tntnet.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;pidfile&gt;/var/run/tntnet.pid&lt;/pidfile&gt;
</pre>
<p><strong>&lt;queueSize&gt;</strong><em>number</em><strong>&lt;/queueSize&gt;</strong></p><ul>
<li><p>Tntnet has a request-queue, where new requests wait for service. This sets a maximum size of this queue, after wich new requests are not accepted.</p></li><li><p>The default value is 1000.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;queueSize&gt;50&lt;/queueSize&gt;
</pre>
<p><strong>&lt;sessionTimeout&gt;</strong><em>seconds</em><strong>&lt;/sessionTimeout&gt;</strong></p><ul>
<li><p>This sets the number of seconds without requests after which a sesssion is timed out.</p></li><li><p>The default value is 300 seconds.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;sessionTimeout&gt;600&lt;/sessionTimeout&gt;
</pre>
<p><strong>&lt;socketReadTimeout&gt;</strong><em>milliseconds</em><strong>&lt;/socketReadTimeout&gt;</strong></p><ul>
<li><p>A worker-thread waits for some milliseconds on incoming data. If there is no data, the job is put into a queue and another thread waits with <a href="../man2/poll.2.html"><strong>poll</strong>(2)</a> on incoming data on multiple sockets. The workerthreads are freed and they can respond to other requests quickly. The default value is 10 milliseconds, which is good for normal operation. A value of 0 results in non-blocking read. If timeout is reached, this does not mean, that the socket is closed. A small timeout reduces contextswitches on slow connections.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;socketReadTimeout&gt;0&lt;/socketReadTimeout&gt;
</pre>
<p><strong>&lt;socketWriteTimeout&gt;</strong><em>milliseconds</em><strong>&lt;/socketWriteTimeout&gt;</strong></p><ul>
<li><p>This defines the time, how long the workerthreads wait on write.  If the timeout is exceeded, the socket is closed and the browser might not get all data.  The default value is 10000 milliseconds.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;socketWriteTimeout&gt;20000&lt;/socketWriteTimeout&gt;
</pre>
<p><strong>&lt;threadStartDelay&gt;</strong><em>ms</em><strong>&lt;/threadStartDelay&gt;</strong></p><ul>
<li><p>When additional worker threads are needed tntnet waits the number of milliseconds before it starts additional threads to prevent high load when starting many threads at once.</p></li><li><p>The default value is 10ms.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;threadStartDelay&gt;1000&lt;/threadStartDelay&gt;
</pre>
<p><strong>&lt;user&gt;</strong><em>username</em><strong>&lt;/user&gt;</strong></p><ul>
<li><p>Changes the user under which tntnet answers requests.</p></li><li><p>The user is changes using the system call <a href="../man2/setuid.2.html"><strong>setuid</strong>(2)</a>, which is only allowed, when tntnet starts as root user.</p></li><li><p><em>Example</em></p></li>
</ul>
<pre>
&lt;user&gt;www-data&lt;/user&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">URL MAPPING</h2>
        <div class="sectioncontent">
<p>Tntnet is a web server, which receives http requests from a http client and answers them. A http request has a url and other attributes, which are used to decide, how the answer should look like. This is done my mapping urls to components.</p><p>A component is something, which generates a http reply. They are normally generated with the ecpp compiler <a href="../man1/ecppc.1.html"><strong>ecppc</strong>(1)</a>. The ecppc compiler generated C++ classes with component names. The classes are compiled and linked into a shared library. Both the component name and the shared library name is needed to identify a component.</p><p>The component identifier is a string built from the component name, the @ character and the shared library name. A example is <strong>myclass@myapplication</strong>. This tells tntnet: load shared library <strong>myapplication</strong> and call the component with the name <strong>myclass</strong> in that library, which creates the reply to the request.</p><p>To tell tntnet, which component to call, url mappings must be configured.</p><p>Configuration is done in the xml section <strong>&lt;mappings&gt;</strong>. Multiple mappings can be configured there. A mapping has a condition and a target. Tntnet looks in the list of mappings for the first mapping, where the condition is met and uses that to call the component. The component may return either a reply - then the request is done or a special value <strong>DECLINED</strong>, which tells tntnet to continue in the list and look for the next mapping, where the condition is met.</p><p>The component, which returns <strong>DECLINED</strong> may already have generated part of the request. This is preserved for the next mapping. A common use case is to write a special component, which just checks the user name and password. If the user name and password is valid, <strong>DECLINED</strong> is returned and tntnet calls the next mapping where the condition is met.</p><p>Also when the condition is met, but the component could not be loaded, tntnet continues with the next mapping.</p><p>When the end of the list is reached and no mapping returned a http reply code, tntnet replies with http not found (404) error.</p><p>So how these mapping are specified then?</p><p>The mapping contains 3 kind of nodes:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>conditions</strong></p>
  </dt>
  <dd>
    <p>Multiple conditions can be specified. All conditions must be met when the mapping is to be used.</p><ul>
<li><p>The most important is <strong>&lt;url&gt;</strong>, which contains a extended regular expression (see <a href="../man7/regex.7.html"><strong>regex</strong>(7)</a> for details). This expression is checked against the url of the request. If the url tag is omitted, the mapping is used for every url.</p></li><li><p>The condition <strong>&lt;vhost&gt;</strong> specifies the virtual host, for which this mapping is valid. When this is specified, the mapping is only valid for requests, where the virtual host matches the setting. The value is also a extended regular expression. Note, that a dot matches any character in regular expressions, which may be irritating here. If you want to specify a mapping for the all hosts of the domain <strong>tntnet.org</strong>, you have to set <strong>&lt;vhost&gt;tntnet&#92;.org$&lt;/vhost&gt;</strong>. Also the dollar sign at the end is important, since it matches the end of the string. Otherwise the mapping would be also valid for a virtual host like <strong>tntnet.org.foo.com</strong>, which may not be what you meant.</p></li><li><p>The condition <strong>method</strong> specifies the http method for which the mapping should be considered. Again a extended regular expression is used.</p></li><li><p>The condition <strong>ssl</strong> is a boolean value. The value should be 0 or 1. The setting checks, whether this mapping should be used depending on ssl.  If the value is 1, the condition is met, when the request is sent via ssl. If the value is 0, the condition is met, when the request is sent without ssl.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>target</strong></p>
  </dt>
  <dd>
    <p>The mapping node contains a node <strong>&lt;target&gt;</strong>, which contains the component name, which is to be called when the conditions are met.</p><ul>
<li><p>The target may contain back references to the regular expression in the <strong>&lt;url&gt;</strong> condition. Parts of the regular expression may be in brackets. In the target $1 is replaced with the first bracketed expression, $2 with the second and so on.</p></li><li><p>This node is mandatory.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>parameters</strong></p>
  </dt>
  <dd>
    <p>When the condition is met, additional parameters may be passed to the called component. There are 2 nodes for this.</p><ul>
<li><p>The node <strong>&lt;pathinfo&gt;</strong> can be requested in the component using <strong>request.getPathInfo()</strong>. If the node is not set, the url is set as path info.</p></li><li><p>The node <strong>&lt;args&gt;</strong> contains additional parameters, which can be passed to the component. The node can have any number of nodes with values. The tags are used as a parameter name and the content as the value. The method <strong>request.getArg(</strong><em>name</em><strong>)</strong> returns the value of the specified <em>name</em>. When the node is not set, the method returns a empty string. Optionally a diffrent default value can be passed to the method as an additional parameter like <strong>request.getArg(</strong><em>name</em><strong>,</strong><em>defaultValue</em><strong>)</strong>.</p></li><li><p>For compatibility reasons with older tntnet <strong>request.getArg</strong> accepts a numeric argument. Previously the arguments did not have names but were accessed by index. To emulate this, <strong>request.getArg</strong> with a numeric argument translates the number into the name "<strong>arg</strong><em>number</em>". So accessing <strong>request.getArg(</strong><em>2</em><strong>)</strong> returns the value of the argument with the name <strong>arg2</strong>. Accessing a numeric argument equal or greater than the number of arguments (the first is number 0) used to be not allowed. Now a empty string is returned.</p></li>
</ul>
  </dd>

</dl>
<p><em>Example</em></p>
<pre>
&lt;mappings&gt;
  &lt;!-- map / to index@myapp --&gt;
  &lt;mapping&gt;
    &lt;target&gt;index@myapp&lt;/target&gt;
    &lt;url&gt;^/$&lt;/url&gt;
    &lt;pathinfo&gt;index.html&lt;/pathinfo&gt;
  &lt;/mapping&gt;
  &lt;!-- map /comp.* or /comp to comp@myapp --&gt;
  &lt;mapping&gt;
    &lt;target&gt;action@myapp&lt;/target&gt;
    &lt;url&gt;&lt;/url&gt;               &lt;!-- any url --&gt;
    &lt;method&gt;POST&lt;/method&gt;     &lt;!-- but only on method POST --&gt;
    &lt;vhost&gt;localhost&lt;/vhost&gt;  &lt;!-- and host header must be localhost --&gt;
    &lt;ssl&gt;1&lt;/ssl&gt;              &lt;!-- and ssl is enabled --&gt;
  &lt;/mapping&gt;
  &lt;mapping&gt;
    &lt;target&gt;$1@myapp&lt;/target&gt;
    &lt;url&gt;^/([^.]+)(&#92;.(.+))?&lt;/url&gt;
    &lt;args&gt;
      &lt;extension&gt;$2&lt;/extension&gt;
    &lt;/args&gt;
  &lt;/mapping&gt;
&lt;/mappings&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LISTENERS</h2>
        <div class="sectioncontent">
<p>The section <strong>&lt;listeners&gt;</strong> specifies the ip addresses and ports, where tntnet waits for incoming requests. Multiple listeners may be defined, when tntnet should listen on multiple ip addresses or ports.</p><p>Each listener is defined in a node <strong>&lt;listener&gt;</strong>. A listener must have a subnode <strong>&lt;ip&gt;</strong> and <strong>&lt;port&gt;</strong>. The node <strong>&lt;ip&gt;</strong> may contain a ip address or hostname or may be left empty. If the node is empty, any interface is used. The <strong>&lt;port&gt;</strong> must contain the numeric port number.</p><p>The ip address may be a IPv4 or IPv6 address.</p><p>Optionally a tag <strong>&lt;certificate&gt;</strong> may be added. This enables ssl on the interface and specifies the ssl host certificate for the interface. Note that tntnet can be built without ssl support. In that case the certificate is just ignored and unencrypted http is used here.</p><p><em>Example</em></p>
<pre>
&lt;listeners&gt;
  &lt;listener&gt;
    &lt;ip&gt;&lt;/ip&gt;
    &lt;port&gt;80&lt;/port&gt;
  &lt;/listener&gt;
  &lt;listener&gt;
    &lt;ip&gt;&lt;/ip&gt;
    &lt;port&gt;443&lt;/port&gt;
    &lt;!-- a certificate enables ssl --&gt;
    &lt;certificate&gt;tntnet.pem&lt;/certificate&gt;
  &lt;/listener&gt;
&lt;/listeners&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Tommi Mäkitalo</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tntnet.xml&hellip;</h2>
        <div class="sectioncontent">
<p>tntnet (1)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tntnet.properties.7.html"><span aria-hidden="true">&larr;</span> tntnet.properties.7: Configuration-file for tntnet (8)</a></li>
   <li class="next"><a href="udev.7.html">udev.7: Dynamic device management <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
