<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sysconftool: Format of configuration files installed by sysconftool</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Format of configuration files installed by sysconftool">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sysconftool (7) manual">
  <meta name="twitter:description" content="Format of configuration files installed by sysconftool">
  <meta name="twitter:image" content="https://www.carta.tech/images/sysconftool-sysconftool-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/sysconftool.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sysconftool (7) manual" />
  <meta property="og:description" content="Format of configuration files installed by sysconftool" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/sysconftool-sysconftool-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sysconftool<small> (7)</small></h1>
        <p class="lead">Format of configuration files installed by sysconftool</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/sysconftool.7.html">
      <span itemprop="name">sysconftool: Format of configuration files installed by sysconftool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/sysconftool/">
      <span itemprop="name">sysconftool</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/sysconftool.7.html">
      <span itemprop="name">sysconftool: Format of configuration files installed by sysconftool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
   #
   ##VERSION: $Id$

   ##NAME: configname1:configname1version
   #
   # Description

   SETTING1=VALUE1

   ##NAME: configname2:configname2version
   #
   # Description

   SETTING2=VALUE2

   ...
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This manual page describes the format of configuration files installed by \m[blue]<strong></strong><a href="../man1/sysconftool.1.html"><strong>sysconftool</strong>(1)</a>\m[]\s-2\u[1]\d\s+2. This format is flexible enough to accommodate any kind of application configuration file format. <strong>sysconftool</strong> makes four assumptions about the configuration file:</p><p>It is a plain text file.</p><p>Lines that begin with a single &apos;#&apos; character are comments that contain a description of the following configuration setting.</p><p>Lines that do not begin with the &apos;#&apos; character contain the configuration setting described by the previous comment lines.</p><p>Configuration settings are self contained, and completely independent, changing one configuration setting never requires that another, different, configuration setting must be changed too (perhaps any logical conflicts are automatically resolved by the application in a safe, fallback, manner)</p><p>The additional information used by <strong>sysconftool</strong> is encoded as specially-formatted comment lines that begin with two &apos;#&apos; characters.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILENAMES</h2>
        <div class="sectioncontent">
<p>An application installs a default configuration file as "filename.dist", when the actual name of the configuration file is really "filename". If there is no existing filename, <strong>sysconftool</strong> simply copies filename.dist to filename, and calls it a day. Otherwise, <strong>sysconftool</strong> copies the existing filename to filename.bak and creates a new filename based on the contents of both files.</p><p><strong>sysconftool</strong> is designed to solve a common problem with application configuration. New versions of applications often include additional functionality that requires new configuration settings. Without the new configuration settings the application will not work, so new configuration files should be installed during the upgrade. However, when that happens, any changes to the existing configuration settings are lost. <strong>sysconftool</strong> is designed to solve this dillemma, and merge old configuration settings with new ones. <strong>sysconftool</strong> is designed in a fail-safe way. Whenever there&apos;s a doubt as to what&apos;s The Right Thing To Do, <strong>sysconftool</strong> will use the configuration settings from the new file, that are supposedly known to be good, and leave it up to a physical being to sort out any conflicts and make any manual decisions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILE VERSIONING</h2>
        <div class="sectioncontent">
<p>The following line should appear at the beginning of filename.dist:</p>
<pre>
   ##VERSION: <em>version</em>
</pre>
<p>This doesn&apos;t have to be the very first line in filename.dist, but it should appear somewhere within the first twenty lines, right before the first configuration setting. "version" should be some kind of an identifier for this particular version of the configuration files. All that <strong>sysconftool</strong> cares about is that any change to the default configuration, in filename.dist, results in a different <em>version</em>. An excellent way to do this is to simply use the $Id$ RCS/CVS version identification strings, and have this little detail taken care of automatically.</p><p>New revisions of an application should not necessarily have a new configuration file <em>version</em>. If the default application configuration settings have not changed from the previous release, <em>version</em> can remain the same. <em>version</em> is copied from filename.dist to filename.</p><p>If there&apos;s an existing filename, and it includes the same <em>version</em> identifier, <strong>sysconftool</strong> silently skips over this configuration file, and doesn&apos;t do anything, assuming that this configuration file has already been installed. Therefore, running <strong>sysconftool</strong> more than once (accidentally) will not break anything.</p><p>If there&apos;s an existing filename, but it&apos;s <em>version</em> is different, <strong>sysconftool</strong> backs it up to filename.bak, then creates a new filename. If there&apos;s an existing filename, but it doesn&apos;t contain a recognizable "##VERSION: <em>version</em>" line, <strong>sysconftool</strong> assumes that the previous version of the application did not use the <strong>sysconftool</strong> tool. That&apos;s not a problem. filename is copied to filename.bak, and filename.dist gets installed as the new filename, allowing <strong>sysconftool</strong> to work with the next version of this configuration file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION SETTING VERSIONING</h2>
        <div class="sectioncontent">
<p>Each configuration setting uses the following format in the configuration file:</p>
<pre>
   ##NAME: <em>name</em>:<em>revision</em>
   #
   # <em>description</em>

   <em>setting</em>
</pre>
<p><strong>sysconftool</strong> looks for a line that begins with "##NAME". This line gives the name and the revision of the following setting. <em>name</em> must be unique within its configuration file (the same <em>name</em> can be used by different configuration files, <strong>sysconftool</strong> works with one file at a time). <em>revision</em> is used by <strong>sysconftool</strong> to decide when the configuration setting can be safely carried over from an older configuration file, and when it is better to reinstall the default setting from the new configuration file.</p><p>One or more comment lines - lines that begin with the &apos;#&apos; character - may follow "##NAME". The first line that does not begin with &apos;#&apos; is considered to be the first line that contains the value of the configuration setting, which lasts. The value can be spread over multiple lines. The configuration setting is considered to last until either the end of the file, or until the first following line that begins with another "##NAME".</p><p>Aside from that, <strong>sysconftool</strong> does not care how the configuration setting is represented. It can be "NAME=VALUE", it can be "NAME: VALUE", or "NAME&lt;tab&gt;VALUE", it can even be a base64-encoded binary object, and it can always have leading or trailing blank lines. <strong>sysconftool</strong> merely looks at which lines begin with the &apos;#&apos; comment character. After the &apos;##NAME:&apos; line, <strong>sysconftool</strong> looks ahead until the first line that does not begin with &apos;#&apos;, and that&apos;s the first line of the configuration setting. Then, <strong>sysconftool</strong> looks ahead until the next line that starts with a "##NAME:", which marks the end of this configuration setting.</p><p>For this reason it is important that all commented description lines that follow &apos;##NAME:&apos; must begin with the &apos;#&apos; character. If a blank line follows the line with &apos;##NAME:&apos; it is assumed to be the start of the corresponding configuration setting. For example, this is correct:</p>
<pre>
   ##NAME: flag1:0
   #
   #
   # This is the first configuration flag
   #

   flag1=1
</pre>
<p>This is not correct:</p>
<pre>
   ##NAME: flag1:0

   #
   # This is the first configuration flag
   #

   flag1=1
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILE CREATION</h2>
        <div class="sectioncontent">
<p>A new configuration file, "filename", is created from its previous version, "filename.bak" and the new default configuration file, "filename.dist", using the following, simple, two-step process.</p><p><strong>sysconftool</strong> begins with filename.dist in hand. This makes sure that <strong>sysconftool</strong> begins with a good, known, default configuration file.</p><p><strong>sysconftool</strong> then takes each configuration setting in filename.dist, then searches filename.bak. If it finds a configuration setting that has an identical "<em>name</em>" and "<em>version</em>", then the corresponding configuration setting value is taken from filename.bak, replacing the default in filename.dist. After all configuration settings in filename.dist are looked up (and potentially replaced), what&apos;s left becomes the new filename.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE END RESULT</h2>
        <div class="sectioncontent">
<p>The above process is a logical description. The actual technical implementation is slightly different (for example, filename is not backed up to filename.bak until the new configuration file has been already created), but is logically equivalent to this process. This process carries a number of consequences that must be considered.</p><p>If a new application revision needs a new configuration setting, it will get a new <em>name</em> and <em>version</em>. Since filename.dist is used as a starting point for the new configuration file, the new configuration file will include the new configuration setting. When a configuration setting is removed, it will disappear from the new configuration file for the same exact reason.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION SETTING VERSION</h2>
        <div class="sectioncontent">
<p><strong>sysconftool</strong> looks at both <em>name</em> and <em>version</em>. A configuration setting with the same <em>name</em> but different <em>version</em>s are seen by <strong>sysconftool</strong> as completely different settings. The existence of <em>version</em> allows a finer-grained control of configuration upgrades, as described below.</p><p><strong>sysconftool</strong> copies setting values with the same <em>name</em> and <em>version</em> from the old configuration file to the new configuration file. However, the associated descriptive comments are not copied, and are taken from the new filename.dist. Therefore, if a new version of the configuration file contains an updated or an embellished description of a particular setting, it will be included in the new configuration file, but the existing configuration value will be preserved! Generally, if a configuration setting does not change its meaning or function, its <em>name</em> and <em>version</em> should remain the same. Its comments can be edited to fix a typo, or revised in a more substantive fashion. <em>Name</em> and <em>version</em> should only be changed if there&apos;s a functional change in the configuration setting.</p><p>What to do with <em>name</em> and <em>version</em> after a functional change depends on the nature and the magnitude of the change. The nature and the magnitude of the change must be considered not only with respect to the most recent revision of the application, but to all the previous revisions as well. When in doubt, go based upon the largest change in magnitude, in order to guarantee a functional default setting, from filename.dist, and leave it up to a living being to manually figure it out.</p><p>If only the default value of a setting should be changed for new application installation, but the existing installations can continue to use the existing value of the setting, both the <em>name</em> and <em>version</em> should be left alone. Existing configuration settings will be preserved, and new installations will get the new default. The descriptive comment of this setting can be updated too (see above).</p><p>This should be done only as long as <em>ALL</em> previous values of this configuration setting will ALWAYS be valid in the new application revision. If some possible values of this configuration setting will no longer be valid, <em>version</em> should be changed. <strong>sysconftool</strong> does not care how <em>name</em> and <em>version</em> are formatted. Both are opaque labels. The only requirements is for the label to be different. The difference between changing <em>version</em> and changing both <em>name</em> and <em>version</em> is this:</p><p>If there&apos;s an old configuration setting with the same <em>name</em> but different <em>version</em>, <strong>sysconftool</strong> will still use the new, safe, default value from filename.dist, however <strong>sysconftool</strong> will also append an additional comment, on its own accord, reminding the reader that this configuration value has been reset, and the reader should consider whether to manually restore the configuration value from the old configuration.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MISCELLANEA</h2>
        <div class="sectioncontent">
<p>When <strong>sysconftool</strong> decides to keep an existing setting, with the same <em>name</em> and <em>value</em>, it will also insert a short comment to that effect, reminding the reader to check the default in filename.dist.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sysconftool&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong></strong><a href="../man1/sysconftool.1.html"><strong>sysconftool</strong>(1)</a>\m[]\s-2\u[1]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p><strong>Double Precision, Inc.</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man1/sysconftool.1.html"><strong>sysconftool</strong>(1)</a></p><p>[set $man.base.url.for.relative.links]/sysconftool.1.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="symlink.7.html"><span aria-hidden="true">&larr;</span> symlink.7: Symbolic link handling</a></li>
   <li class="next"><a href="systemd.cron.7.html">systemd.cron.7: Systemd cron units <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
