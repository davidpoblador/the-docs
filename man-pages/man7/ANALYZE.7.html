<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ANALYZE: Collect statistics about a database</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Collect statistics about a database">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ANALYZE (7) manual">
  <meta name="twitter:description" content="Collect statistics about a database">
  <meta name="twitter:image" content="https://www.carta.tech/images/postgresql-client-9.4-ANALYZE-7.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man7/ANALYZE.7.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ANALYZE (7) manual" />
  <meta property="og:description" content="Collect statistics about a database" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/postgresql-client-9.4-ANALYZE-7.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ANALYZE<small> (7)</small></h1>
        <p class="lead">Collect statistics about a database</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/">
      <span itemprop="name">Miscellaneous</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/ANALYZE.7.html">
      <span itemprop="name">ANALYZE: Collect statistics about a database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/postgresql-client-9.4/">
      <span itemprop="name">postgresql-client-9.4</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man7/ANALYZE.7.html">
      <span itemprop="name">ANALYZE: Collect statistics about a database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
ANALYZE [ VERBOSE ] [ <em>table_name</em> [ ( <em>column_name</em> [, ...] ) ] ]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ANALYZE</strong> collects statistics about the contents of tables in the database, and stores the results in the pg_statistic system catalog. Subsequently, the query planner uses these statistics to help determine the most efficient execution plans for queries.</p><p>With no parameter, <strong>ANALYZE</strong> examines every table in the current database. With a parameter, <strong>ANALYZE</strong> examines only that table. It is further possible to give a list of column names, in which case only the statistics for those columns are collected.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">
<p>VERBOSE</p><p>Enables display of progress messages.</p><p><em>table_name</em></p><p>The name (possibly schema-qualified) of a specific table to analyze. If omitted, all regular tables (but not foreign tables) in the current database are analyzed.</p><p><em>column_name</em></p><p>The name of a specific column to analyze. Defaults to all columns.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OUTPUTS</h2>
        <div class="sectioncontent">
<p>When VERBOSE is specified, <strong>ANALYZE</strong> emits progress messages to indicate which table is currently being processed. Various statistics about the tables are printed as well.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Foreign tables are analyzed only when explicitly selected. Not all foreign data wrappers support <strong>ANALYZE</strong>. If the table&apos;s wrapper does not support <strong>ANALYZE</strong>, the command prints a warning and does nothing.</p><p>In the default PostgreSQL configuration, the autovacuum daemon (see Section 23.1.6, &ldquo;The Autovacuum Daemon&rdquo;, in the documentation) takes care of automatic analyzing of tables when they are first loaded with data, and as they change throughout regular operation. When autovacuum is disabled, it is a good idea to run <strong>ANALYZE</strong> periodically, or just after making major changes in the contents of a table. Accurate statistics will help the planner to choose the most appropriate query plan, and thereby improve the speed of query processing. A common strategy for read-mostly databases is to run <a href="../man7/VACUUM.7.html"><strong>VACUUM</strong>(7)</a> and <strong>ANALYZE</strong> once a day during a low-usage time of day. (This will not be sufficient if there is heavy update activity.)</p><p><strong>ANALYZE</strong> requires only a read lock on the target table, so it can run in parallel with other activity on the table.</p><p>The statistics collected by <strong>ANALYZE</strong> usually include a list of some of the most common values in each column and a histogram showing the approximate data distribution in each column. One or both of these can be omitted if <strong>ANALYZE</strong> deems them uninteresting (for example, in a unique-key column, there are no common values) or if the column data type does not support the appropriate operators. There is more information about the statistics in Chapter 23, Routine Database Maintenance Tasks, in the documentation.</p><p>For large tables, <strong>ANALYZE</strong> takes a random sample of the table contents, rather than examining every row. This allows even very large tables to be analyzed in a small amount of time. Note, however, that the statistics are only approximate, and will change slightly each time <strong>ANALYZE</strong> is run, even if the actual table contents did not change. This might result in small changes in the planner&apos;s estimated costs shown by <a href="../man7/EXPLAIN.7.html"><strong>EXPLAIN</strong>(7)</a>. In rare situations, this non-determinism will cause the planner&apos;s choices of query plans to change after <strong>ANALYZE</strong> is run. To avoid this, raise the amount of statistics collected by <strong>ANALYZE</strong>, as described below.</p><p>The extent of analysis can be controlled by adjusting the default_statistics_target configuration variable, or on a column-by-column basis by setting the per-column statistics target with <strong>ALTER TABLE ... ALTER COLUMN ... SET STATISTICS</strong> (see ALTER TABLE (<a href="../man7/ALTER_TABLE.7.html"><strong>ALTER_TABLE</strong>(7)</a>)). The target value sets the maximum number of entries in the most-common-value list and the maximum number of bins in the histogram. The default target value is 100, but this can be adjusted up or down to trade off accuracy of planner estimates against the time taken for <strong>ANALYZE</strong> and the amount of space occupied in pg_statistic. In particular, setting the statistics target to zero disables collection of statistics for that column. It might be useful to do that for columns that are never used as part of the WHERE, GROUP BY, or ORDER BY clauses of queries, since the planner will have no use for statistics on such columns.</p><p>The largest statistics target among the columns being analyzed determines the number of table rows sampled to prepare the statistics. Increasing the target causes a proportional increase in the time and space needed to do <strong>ANALYZE</strong>.</p><p>One of the values estimated by <strong>ANALYZE</strong> is the number of distinct values that appear in each column. Because only a subset of the rows are examined, this estimate can sometimes be quite inaccurate, even with the largest possible statistics target. If this inaccuracy leads to bad query plans, a more accurate value can be determined manually and then installed with <strong>ALTER TABLE ... ALTER COLUMN ... SET (n_distinct = ...)</strong> (see ALTER TABLE (<a href="../man7/ALTER_TABLE.7.html"><strong>ALTER_TABLE</strong>(7)</a>)).</p><p>If the table being analyzed has one or more children, <strong>ANALYZE</strong> will gather statistics twice: once on the rows of the parent table only, and a second time on the rows of the parent table with all of its children. This second set of statistics is needed when planning queries that traverse the entire inheritance tree. The autovacuum daemon, however, will only consider inserts or updates on the parent table itself when deciding whether to trigger an automatic analyze for that table. If that table is rarely inserted into or updated, the inheritance statistics will not be up to date unless you run <strong>ANALYZE</strong> manually.</p><p>If the table being analyzed is completely empty, <strong>ANALYZE</strong> will not record new statistics for that table. Any existing statistics will be retained.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMPATIBILITY</h2>
        <div class="sectioncontent">
<p>There is no <strong>ANALYZE</strong> statement in the SQL standard.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ANALYZE&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/VACUUM.7.html"><strong>VACUUM</strong>(7)</a>, <a href="../man1/vacuumdb.1.html"><strong>vacuumdb</strong>(1)</a>, Section 18.4.4, &ldquo;Cost-based Vacuum Delay&rdquo;, in the documentation, Section 23.1.6, &ldquo;The Autovacuum Daemon&rdquo;, in the documentation</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ALTER_VIEW.7.html"><span aria-hidden="true">&larr;</span> ALTER_VIEW.7: Change the definition of a view</a></li>
   <li class="next"><a href="BEGIN.7.html">BEGIN.7: Start a transaction block <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
