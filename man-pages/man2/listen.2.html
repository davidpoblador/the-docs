<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>listen - listen for connections on a socket</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Listen for connections on a socket">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">listen<small> (2)</small></h1>
        <p class="lead">Listen for connections on a socket</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="/"><span itemprop="title">Carta.tech</span></a>
	</li>
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">man-pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man2/"><span itemprop="title">System calls</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man2/listen.2.html"><span itemprop="title">listen</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>#include &lt;sys/types.h&gt;</strong>          /* See NOTES */

<strong>#include &lt;sys/socket.h&gt;</strong>

<strong>int listen(int </strong><em>sockfd</em><strong>, int </strong><em>backlog</em><strong>);</strong></pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>listen</strong>() marks the socket referred to by <em>sockfd</em> as a passive socket, that is, as a socket that will be used to accept incoming connection requests using <a href="../man2/accept.2.html"><strong>accept</strong>(2)</a>.</p>
<p class='spacer'>

<p>The <em>sockfd</em> argument is a file descriptor that refers to a socket of type <strong>SOCK_STREAM</strong> or <strong>SOCK_SEQPACKET</strong>.</p>
<p class='spacer'>

<p>The <em>backlog</em> argument defines the maximum length to which the queue of pending connections for <em>sockfd</em> may grow. If a connection request arrives when the queue is full, the client may receive an error with an indication of <strong>ECONNREFUSED</strong> or, if the underlying protocol supports retransmission, the request may be ignored so that a later reattempt at connection succeeds.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">

<p>On success, zero is returned. On error, -1 is returned, and <em>errno</em> is set appropriately.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>EADDRINUSE</strong></dt>
    <dd>
  <p>Another socket is already listening on the same port.</p>
    </dd>
    <dt><strong>EADDRINUSE</strong></dt>
    <dd>
  <p>(Internet domain sockets) The socket referred to by <em>sockfd</em> had not previously been bound to an address and, upon attempting to bind it to an ephemeral port, it was determined that all port numbers in the ephemeral port range are currently in use. See the discussion of <em>/proc/sys/net/ipv4/ip_local_port_range</em> in <strong>ip</strong>(7).</p>
    </dd>
    <dt><strong>EBADF</strong></dt>
    <dd>
  <p>The argument <em>sockfd</em> is not a valid file descriptor.</p>
    </dd>
    <dt><strong>ENOTSOCK</strong></dt>
    <dd>
  <p>The file descriptor <em>sockfd</em> does not refer to a socket.</p>
    </dd>
    <dt><strong>EOPNOTSUPP</strong></dt>
    <dd>
  <p>The socket is not of a type that supports the <strong>listen</strong>() operation.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">

<p>POSIX.1-2001, POSIX.1-2008, 4.4BSD (<strong>listen</strong>() first appeared in 4.2BSD).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

    <p>To accept connections, the following steps are performed:</p>
    <dl class='dl-horizontal'>
      <dt>1.</dt>
      <dd>
    <p>A socket is created with <a href="../man2/socket.2.html"><strong>socket</strong>(2)</a>.</p>
      </dd>
      <dt>2.</dt>
      <dd>
    <p>The socket is bound to a local address using <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a>, so that other sockets may be <a href="../man2/connect.2.html"><strong>connect</strong>(2)</a>ed to it.</p>
      </dd>
      <dt>3.</dt>
      <dd>
    <p>A willingness to accept incoming connections and a queue limit for incoming connections are specified with <strong>listen</strong>().</p>
      </dd>
      <dt>4.</dt>
      <dd>
    <p>Connections are accepted with <a href="../man2/accept.2.html"><strong>accept</strong>(2)</a>.</p>
      </dd>
    </dl>
<p class='spacer'>

<p>POSIX.1 does not require the inclusion of <em>&lt;sys/types.h&gt;</em>, and this header file is not required on Linux. However, some historical (BSD) implementations required this header file, and portable applications are probably wise to include it.</p>
<p class='spacer'>

<p>The behavior of the <em>backlog</em> argument on TCP sockets changed with Linux 2.2. Now it specifies the queue length for <em>completely</em> established sockets waiting to be accepted, instead of the number of incomplete connection requests. The maximum length of the queue for incomplete sockets can be set using <em>/proc/sys/net/ipv4/tcp_max_syn_backlog</em>. When syncookies are enabled there is no logical maximum length and this setting is ignored. See <a href="../man7/tcp.7.html"><strong>tcp</strong>(7)</a> for more information.</p>
<p class='spacer'>

<p>If the <em>backlog</em> argument is greater than the value in <em>/proc/sys/net/core/somaxconn</em>, then it is silently truncated to that value; the default value in this file is 128. In kernels before 2.4.25, this limit was a hard coded value, <strong>SOMAXCONN</strong>, with the value 128.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<p>See <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man2/accept.2.html"><strong>accept</strong>(2)</a>, <a href="../man2/bind.2.html"><strong>bind</strong>(2)</a>, <a href="../man2/connect.2.html"><strong>connect</strong>(2)</a>, <a href="../man2/socket.2.html"><strong>socket</strong>(2)</a>, <a href="../man7/socket.7.html"><strong>socket</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="linkat.2.html"><span aria-hidden="true">&larr;</span> linkat.2: make a new name for a file</a></li>
   <li class="next"><a href="listxattr.2.html">listxattr.2: list extended attribute names <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
