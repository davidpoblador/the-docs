<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fadvise64_64: Predeclare an access pattern for file data</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Predeclare an access pattern for file data">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fadvise64_64 (2) manual">
  <meta name="twitter:description" content="Predeclare an access pattern for file data">
  <meta name="twitter:image" content="https://www.carta.tech/images/manpages-dev-fadvise64_64-2.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man2/fadvise64_64.2.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fadvise64_64 (2) manual" />
  <meta property="og:description" content="Predeclare an access pattern for file data" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/manpages-dev-fadvise64_64-2.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fadvise64_64<small> (2)</small></h1>
        <p class="lead">Predeclare an access pattern for file data</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man2/">
      <span itemprop="name">System calls</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man2/fadvise64_64.2.html">
      <span itemprop="name">fadvise64_64: Predeclare an access pattern for file data</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/manpages-dev/">
      <span itemprop="name">manpages-dev</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man2/fadvise64_64.2.html">
      <span itemprop="name">fadvise64_64: Predeclare an access pattern for file data</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>#include &lt;fcntl.h&gt;</strong>

<strong>int posix_fadvise(int </strong><em>fd</em><strong>, off_t </strong><em>offset</em><strong>, off_t </strong><em>len</em><strong>, int </strong><em>advice</em><strong>);</strong>
</pre>
<p>Feature Test Macro Requirements for glibc (see <a href="../man7/feature_test_macros.7.html"><strong>feature_test_macros</strong>(7)</a>):</p><p><strong>posix_fadvise</strong>():</p><p>_XOPEN_SOURCE&nbsp;&gt;=&nbsp;600 || _POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200112L</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Programs can use <strong>posix_fadvise</strong>() to announce an intention to access file data in a specific pattern in the future, thus allowing the kernel to perform appropriate optimizations.</p><p>The <em>advice</em> applies to a (not necessarily existent) region starting at <em>offset</em> and extending for <em>len</em> bytes (or until the end of the file if <em>len</em> is 0) within the file referred to by <em>fd</em>. The <em>advice</em> is not binding; it merely constitutes an expectation on behalf of the application.</p><p>Permissible values for <em>advice</em> include:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>POSIX_FADV_NORMAL</strong></p>
  </dt>
  <dd>
    <p>Indicates that the application has no advice to give about its access pattern for the specified data. If no advice is given for an open file, this is the default assumption.</p>
  </dd>
  <dt>
    <p><strong>POSIX_FADV_SEQUENTIAL</strong></p>
  </dt>
  <dd>
    <p>The application expects to access the specified data sequentially (with lower offsets read before higher ones).</p>
  </dd>
  <dt>
    <p><strong>POSIX_FADV_RANDOM</strong></p>
  </dt>
  <dd>
    <p>The specified data will be accessed in random order.</p>
  </dd>
  <dt>
    <p><strong>POSIX_FADV_NOREUSE</strong></p>
  </dt>
  <dd>
    <p>The specified data will be accessed only once.</p>
  </dd>
  <dt>
    <p><strong>POSIX_FADV_WILLNEED</strong></p>
  </dt>
  <dd>
    <p>The specified data will be accessed in the near future.</p>
  </dd>
  <dt>
    <p><strong>POSIX_FADV_DONTNEED</strong></p>
  </dt>
  <dd>
    <p>The specified data will not be accessed in the near future.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">
<p>On success, zero is returned. On error, an error number is returned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>EBADF</strong></p>
  </dt>
  <dd>
    <p>The <em>fd</em> argument was not a valid file descriptor.</p>
  </dd>
  <dt>
    <p><strong>EINVAL</strong></p>
  </dt>
  <dd>
    <p>An invalid value was specified for <em>advice</em>.</p>
  </dd>
  <dt>
    <p><strong>ESPIPE</strong></p>
  </dt>
  <dd>
    <p>The specified file descriptor refers to a pipe or FIFO. (Linux actually returns <strong>EINVAL</strong> in this case.)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSIONS</h2>
        <div class="sectioncontent">
<p>Kernel support first appeared in Linux 2.5.60; the underlying system call is called <strong>fadvise64</strong>(). Library support has been provided since glibc version 2.2, via the wrapper function <strong>posix_fadvise</strong>().</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">
<p>POSIX.1-2001. Note that the type of the <em>len</em> argument was changed from <em>size_t</em> to <em>off_t</em> in POSIX.1-2003 TC1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Under Linux, <strong>POSIX_FADV_NORMAL</strong> sets the readahead window to the default size for the backing device; <strong>POSIX_FADV_SEQUENTIAL</strong> doubles this size, and <strong>POSIX_FADV_RANDOM</strong> disables file readahead entirely. These changes affect the entire file, not just the specified region (but other open file handles to the same file are unaffected).</p><p><strong>POSIX_FADV_WILLNEED</strong> initiates a nonblocking read of the specified region into the page cache. The amount of data read may be decreased by the kernel depending on virtual memory load. (A few megabytes will usually be fully satisfied, and more is rarely useful.)</p><p>In kernels before 2.6.18, <strong>POSIX_FADV_NOREUSE</strong> had the same semantics as <strong>POSIX_FADV_WILLNEED</strong>. This was probably a bug; since kernel 2.6.18, this flag is a no-op.</p><p><strong>POSIX_FADV_DONTNEED</strong> attempts to free cached pages associated with the specified region. This is useful, for example, while streaming large files. A program may periodically request the kernel to free cached data that has already been used, so that more useful cached pages are not discarded instead.</p><p>Pages that have not yet been written out will be unaffected, so if the application wishes to guarantee that pages will be released, it should call <a href="../man2/fsync.2.html"><strong>fsync</strong>(2)</a> or <a href="../man2/fdatasync.2.html"><strong>fdatasync</strong>(2)</a> first.</p><h3>Architecture-specific variants</h3>
<p>Some architectures require 64-bit arguments to be aligned in a suitable pair of registers (see <a href="../man2/syscall.2.html"><strong>syscall</strong>(2)</a> for further detail). On such architectures, the call signature of <strong>posix_fadvise</strong>() shown in the SYNOPSIS would force a register to be wasted as padding between the <em>fd</em> and <em>offset</em> arguments. Therefore, these architectures define a version of the system call that orders the arguments suitably, but otherwise is otherwise exactly the same as <strong>posix_fadvise</strong>().</p><p>For example, since Linux 2.6.14, ARM has the following system call:</p>
<pre>
<strong>long arm_fadvise64_64(int </strong><em>fd</em><strong>, int </strong><em>advice</em><strong>,</strong>
<strong>                      loff_t </strong><em>offset</em><strong>, loff_t </strong><em>len</em><strong>);</strong>
</pre>
<p>These architecture-specific details are generally hidden from applications by the glibc <strong>posix_fadvise</strong>() wrapper function, which invokes the appropriate architecture-specific system call.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>In kernels before 2.6.6, if <em>len</em> was specified as 0, then this was interpreted literally as "zero bytes", rather than as meaning "all bytes through to the end of the file".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fadvise64_64&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man2/readahead.2.html"><strong>readahead</strong>(2)</a>, <a href="../man2/sync_file_range.2.html"><strong>sync_file_range</strong>(2)</a>, <a href="../man3/posix_fallocate.3.html"><strong>posix_fallocate</strong>(3)</a>, <strong>posix_madvise</strong>(3)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COLOPHON</h2>
        <div class="sectioncontent">
<p>This page is part of release 3.74 of the Linux <em>man-pages</em> project. A description of the project, information about reporting bugs, and the latest version of this page, can be found at http://www.kernel.org/doc/man-pages/.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fadvise64.2.html"><span aria-hidden="true">&larr;</span> fadvise64.2: Predeclare an access pattern for file data</a></li>
   <li class="next"><a href="fallocate.2.html">fallocate.2: Manipulate file space <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
