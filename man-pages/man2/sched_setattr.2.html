<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sched_setattr, sched_getattr - set and get scheduling policy and attributes</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="${metadescription}">
  
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sched_setattr<small> (2)</small></h1>
        <p class="lead">set and get scheduling policy and attributes</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man2/"><span itemprop="title">System calls</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man2/sched_setattr.2.html"><span itemprop="title">sched_setattr</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre><strong>#include &lt;sched.h&gt;</strong>

<strong>int sched_setattr(pid_t </strong><em>pid</em><strong>, struct sched_attr *</strong><em>attr</em><strong>,</strong>
<strong>                  unsigned int </strong><em>flags</em><strong>);</strong>

<strong>int sched_getattr(pid_t </strong><em>pid</em><strong>, struct sched_attr *</strong><em>attr</em><strong>,</strong>
<strong>                  unsigned int </strong><em>size</em><strong>, unsigned int </strong><em>flags</em><strong>);</strong></pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

  <h3>sched_setattr()</h3>
<p>The <strong>sched_setattr</strong>() system call sets the scheduling policy and associated attributes for the thread whose ID is specified in <em>pid</em>. If <em>pid</em> equals zero, the scheduling policy and attributes of the calling thread will be set.</p>
<p class='spacer'>

  <p>Currently, Linux supports the following "normal" (i.e., non-real-time) scheduling policies as values that may be specified in <em>policy</em>:</p>
  <dl class='dl-vertical'>
    <dt><strong>SCHED_OTHER</strong></dt>
    <dd>
  <p>the standard round-robin time-sharing policy;</p>
    </dd>
    <dt><strong>SCHED_BATCH</strong></dt>
    <dd>
  <p>for "batch" style execution of processes; and</p>
    </dd>
    <dt><strong>SCHED_IDLE</strong></dt>
    <dd>
  <p>for running <em>very</em> low priority background jobs.</p>
    </dd>
  </dl>
<p class='spacer'>

  <p>Various "real-time" policies are also supported, for special time-critical applications that need precise control over the way in which runnable threads are selected for execution. For the rules governing when a process may use these policies, see <a href="../man7/sched.7.html"><strong>sched</strong>(7)</a>. The real-time policies that may be specified in <em>policy</em> are:</p>
  <dl class='dl-vertical'>
    <dt><strong>SCHED_FIFO</strong></dt>
    <dd>
  <p>a first-in, first-out policy; and</p>
    </dd>
    <dt><strong>SCHED_RR</strong></dt>
    <dd>
  <p>a round-robin policy.</p>
    </dd>
  </dl>
<p class='spacer'>

  <p>Linux also provides the following policy:</p>
  <dl class='dl-vertical'>
    <dt><strong>SCHED_DEADLINE</strong></dt>
    <dd>
  <p>a deadline scheduling policy; see <a href="../man7/sched.7.html"><strong>sched</strong>(7)</a> for details.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>The <em>attr</em> argument is a pointer to a structure that defines the new scheduling policy and attributes for the specified thread. This structure has the following form:</p>
<p class='spacer'>

<pre>struct sched_attr {
    u32 size;              /* Size of this structure */
    u32 sched_policy;      /* Policy (SCHED_*) */
    u64 sched_flags;       /* Flags */
    s32 sched_nice;        /* Nice value (SCHED_OTHER,
                              SCHED_BATCH) */
    u32 sched_priority;    /* Static priority (SCHED_FIFO,
                              SCHED_RR) */
    /* Remaining fields are for SCHED_DEADLINE */
    u64 sched_runtime;
    u64 sched_deadline;
    u64 sched_period;
};</pre>

<p class='spacer'>

  <p>The fields of this structure are as follows:</p>
  <dl class='dl-vertical'>
    <dt><strong>size</strong></dt>
    <dd>
  <p>This field should be set to the size of the structure in bytes, as in <em>sizeof(struct sched_attr)</em>. If the provided structure is smaller than the kernel structure, any additional fields are assumed to be '0'. If the provided structure is larger than the kernel structure, the kernel verifies that all additional fields are 0; if they are not, <strong>sched_setattr</strong>() fails with the error <strong>E2BIG</strong> and updates <em>size</em> to contain the size of the kernel structure.</p>
<p class='spacer'>

  <p>The above behavior when the size of the user-space <em>sched_attr</em> structure does not match the size of the kernel structure allows for future extensibility of the interface. Malformed applications that pass oversize structures won't break in the future if the size of the kernel <em>sched_attr</em> structure is increased. In the future, it could also allow applications that know about a larger user-space <em>sched_attr</em> structure to determine whether they are running on an older kernel that does not support the larger structure.</p>
    </dd>
    <dt><em>sched_policy</em></dt>
    <dd>
  <p>This field specifies the scheduling policy, as one of the <strong>SCHED_*</strong> values listed above.</p>
    </dd>
    <dt><em>sched_flags</em></dt>
    <dd>
  <p>This field contains flags controlling scheduling behavior. Only one such flag is currently defined: <strong>SCHED_FLAG_RESET_ON_FORK</strong>. As a result of including this flag, children created by <a href="../man2/fork.2.html"><strong>fork</strong>(2)</a> do not inherit privileged scheduling policies. See <a href="../man7/sched.7.html"><strong>sched</strong>(7)</a> for details.</p>
    </dd>
    <dt><em>sched_nice</em></dt>
    <dd>
  <p>This field specifies the nice value to be set when specifying <em>sched_policy</em> as <strong>SCHED_OTHER</strong> or <strong>SCHED_BATCH</strong>. The nice value is a number in the range -20 (high priority) to +19 (low priority); see <a href="../man2/setpriority.2.html"><strong>setpriority</strong>(2)</a>.</p>
    </dd>
    <dt><em>sched_priority</em></dt>
    <dd>
  <p>This field specifies the static priority to be set when specifying <em>sched_policy</em> as <strong>SCHED_FIFO</strong> or <strong>SCHED_RR</strong>. The allowed range of priorities for these policies can be determined using <a href="../man2/sched_get_priority_min.2.html"><strong>sched_get_priority_min</strong>(2)</a> and <a href="../man2/sched_get_priority_max.2.html"><strong>sched_get_priority_max</strong>(2)</a>. For other policies, this field must be specified as 0.</p>
    </dd>
    <dt><em>sched_runtime</em></dt>
    <dd>
  <p>This field specifies the "Runtime" parameter for deadline scheduling. The value is expressed in nanoseconds. This field, and the next two fields, are used only for <strong>SCHED_DEADLINE</strong> scheduling; for further details, see <a href="../man7/sched.7.html"><strong>sched</strong>(7)</a>.</p>
    </dd>
    <dt><em>sched_deadline</em></dt>
    <dd>
  <p>This field specifies the "Deadline" parameter for deadline scheduling. The value is expressed in nanoseconds.</p>
    </dd>
    <dt><em>sched_period</em></dt>
    <dd>
  <p>This field specifies the "Period" parameter for deadline scheduling. The value is expressed in nanoseconds.</p>
    </dd>
  </dl>
<p class='spacer'>

<p>The <em>flags</em> argument is provided to allow for future extensions to the interface; in the current implementation it must be specified as 0.</p>
  <h3>sched_getattr()</h3>
<p>The <strong>sched_getattr</strong>() system call fetches the scheduling policy and the associated attributes for the thread whose ID is specified in <em>pid</em>. If <em>pid</em> equals zero, the scheduling policy and attributes of the calling thread will be retrieved.</p>
<p class='spacer'>

<p>The <em>size</em> argument should be set to the size of the <em>sched_attr</em> structure as known to user space. The value must be at least as large as the size of the initially published <em>sched_attr</em> structure, or the call fails with the error <strong>EINVAL</strong>.</p>
<p class='spacer'>

<p>The retrieved scheduling attributes are placed in the fields of the <em>sched_attr</em> structure pointed to by <em>attr</em>. The kernel sets <em>attr.size</em> to the size of its <em>sched_attr</em> structure.</p>
<p class='spacer'>

<p>If the caller-provided <em>attr</em> buffer is larger than the kernel's <em>sched_attr</em> structure, the additional bytes in the user-space structure are not touched. If the caller-provided structure is smaller than the kernel <em>sched_attr</em> structure and the kernel needs to return values outside the provided space, <strong>sched_getattr</strong>() fails with the error <strong>E2BIG</strong>. As with <strong>sched_setattr</strong>(), these semantics allow for future extensibility of the interface.</p>
<p class='spacer'>

<p>The <em>flags</em> argument is provided to allow for future extensions to the interface; in the current implementation it must be specified as 0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUE</h2>
        <div class="sectioncontent">

<p>On success, <strong>sched_setattr</strong>() and <strong>sched_getattr</strong>() return 0. On error, -1 is returned, and <em>errno</em> is set to indicate the cause of the error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ERRORS</h2>
        <div class="sectioncontent">

  <p><strong>sched_getattr</strong>() and <strong>sched_setattr</strong>() can both fail for the following reasons:</p>
  <dl class='dl-vertical'>
    <dt><strong>EINVAL</strong></dt>
    <dd>
  <p><em>attr</em> is NULL; or <em>pid</em> is negative; or <em>flags</em> is not zero.</p>
    </dd>
    <dt><strong>ESRCH</strong></dt>
    <dd>
  <p>The thread whose ID is <em>pid</em> could not be found.</p>
    </dd>
  </dl>
<p class='spacer'>

  <p>In addition, <strong>sched_getattr</strong>() can fail for the following reasons:</p>
  <dl class='dl-vertical'>
    <dt><strong>E2BIG</strong></dt>
    <dd>
  <p>The buffer specified by <em>size</em> and <em>attr</em> is too small.</p>
    </dd>
    <dt><strong>EINVAL</strong></dt>
    <dd>
  <p><em>size</em> is invalid; that is, it is smaller than the initial version of the <em>sched_attr</em> structure (48 bytes) or larger than the system page size.</p>
    </dd>
  </dl>
<p class='spacer'>

  <p>In addition, <strong>sched_setattr</strong>() can fail for the following reasons:</p>
  <dl class='dl-vertical'>
    <dt><strong>E2BIG</strong></dt>
    <dd>
  <p>The buffer specified by <em>size</em> and <em>attr</em> is larger than the kernel structure, and one or more of the excess bytes is nonzero.</p>
    </dd>
    <dt><strong>EBUSY</strong></dt>
    <dd>
  <p><strong>SCHED_DEADLINE</strong> admission control failure, see <a href="../man7/sched.7.html"><strong>sched</strong>(7)</a>.</p>
    </dd>
    <dt><strong>EINVAL</strong></dt>
    <dd>
  <p><em>attr.sched_policy</em> is not one of the recognized policies; <em>attr.sched_flags</em> contains a flag other than <strong>SCHED_FLAG_RESET_ON_FORK</strong>; or <em>attr.sched_priority</em> is invalid; or <em>attr.sched_policy</em> is <strong>SCHED_DEADLINE</strong> and the deadline scheduling parameters in <em>attr</em> are invalid.</p>
    </dd>
    <dt><strong>EPERM</strong></dt>
    <dd>
  <p>The caller does not have appropriate privileges.</p>
    </dd>
    <dt><strong>EPERM</strong></dt>
    <dd>
  <p>The CPU affinity mask of the thread specified by <em>pid</em> does not include all CPUs in the system (see <a href="../man2/sched_setaffinity.2.html"><strong>sched_setaffinity</strong>(2)</a>).</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSIONS</h2>
        <div class="sectioncontent">

<p>These system calls first appeared in Linux 3.14.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">

<p>These system calls are nonstandard Linux extensions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<p><strong>sched_setattr</strong>() provides a superset of the functionality of <a href="../man2/sched_setscheduler.2.html"><strong>sched_setscheduler</strong>(2)</a>, <a href="../man2/sched_setparam.2.html"><strong>sched_setparam</strong>(2)</a>, <a href="../man2/nice.2.html"><strong>nice</strong>(2)</a>, and (other than the ability to set the priority of all processes belonging to a specified user or all processes in a specified group) <a href="../man2/setpriority.2.html"><strong>setpriority</strong>(2)</a>. Analogously, <strong>sched_getattr</strong>() provides a superset of the functionality of <a href="../man2/sched_getscheduler.2.html"><strong>sched_getscheduler</strong>(2)</a>, <a href="../man2/sched_getparam.2.html"><strong>sched_getparam</strong>(2)</a>, and (partially) <a href="../man2/getpriority.2.html"><strong>getpriority</strong>(2)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">

<p>In Linux versions up to 3.15, <strong>sched_settattr</strong>() failed with the error <strong>EFAULT</strong> instead of <strong>E2BIG</strong> for the case described in ERRORS.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><strong>chrt</strong>(1), <a href="../man2/nice.2.html"><strong>nice</strong>(2)</a>, <a href="../man2/sched_get_priority_max.2.html"><strong>sched_get_priority_max</strong>(2)</a>, <a href="../man2/sched_get_priority_min.2.html"><strong>sched_get_priority_min</strong>(2)</a>, <a href="../man2/sched_getaffinity.2.html"><strong>sched_getaffinity</strong>(2)</a>, <a href="../man2/sched_getscheduler.2.html"><strong>sched_getscheduler</strong>(2)</a>, <a href="../man2/sched_getparam.2.html"><strong>sched_getparam</strong>(2)</a>, <a href="../man2/sched_rr_get_interval.2.html"><strong>sched_rr_get_interval</strong>(2)</a>, <a href="../man2/sched_setaffinity.2.html"><strong>sched_setaffinity</strong>(2)</a>, <a href="../man2/sched_setscheduler.2.html"><strong>sched_setscheduler</strong>(2)</a>, <a href="../man2/sched_setparam.2.html"><strong>sched_setparam</strong>(2)</a>, <a href="../man2/sched_yield.2.html"><strong>sched_yield</strong>(2)</a>, <a href="../man2/setpriority.2.html"><strong>setpriority</strong>(2)</a>, <a href="../man3/pthread_getschedparam.3.html"><strong>pthread_getschedparam</strong>(3)</a>, <a href="../man3/pthread_setschedparam.3.html"><strong>pthread_setschedparam</strong>(3)</a>, <a href="../man3/pthread_setschedprio.3.html"><strong>pthread_setschedprio</strong>(3)</a>, <a href="../man7/capabilities.7.html"><strong>capabilities</strong>(7)</a>, <a href="../man7/cpuset.7.html"><strong>cpuset</strong>(7)</a>, <a href="../man7/sched.7.html"><strong>sched</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
  <li class="previous"><a href="sched_setaffinity.2.html"><span aria-hidden="true">&larr;</span> sched_setaffinity.2: set and get a thread's CPU affinity mask</a></li><li class="next"><a href="sched_setparam.2.html">sched_setparam.2: set and get scheduling parameters <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
