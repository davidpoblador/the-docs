<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>watch-mimedefang: Keep an eye on mimedefang-multiplexor</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Keep an eye on mimedefang-multiplexor">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="watch-mimedefang (8) manual">
  <meta name="twitter:description" content="Keep an eye on mimedefang-multiplexor">
  <meta name="twitter:image" content="https://www.carta.tech/images/mimedefang-watch-mimedefang-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/watch-mimedefang.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="watch-mimedefang (8) manual" />
  <meta property="og:description" content="Keep an eye on mimedefang-multiplexor" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mimedefang-watch-mimedefang-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">watch-mimedefang<small> (8)</small></h1>
        <p class="lead">Keep an eye on mimedefang-multiplexor</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/watch-mimedefang.8.html">
      <span itemprop="name">watch-mimedefang: Keep an eye on mimedefang-multiplexor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mimedefang/">
      <span itemprop="name">mimedefang</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/watch-mimedefang.8.html">
      <span itemprop="name">watch-mimedefang: Keep an eye on mimedefang-multiplexor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>watch-mimedefang </strong>[<em>options</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>watch-mimedefang</strong> is a Tk script which graphically displays the status of <a href="../man8/mimedefang-multiplexor.8.html"><strong>mimedefang-multiplexor</strong>(8)</a>.  Note that Tcl/Tk 8.0 or higher is required to run <strong>watch-mimedefang</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISPLAY</h2>
        <div class="sectioncontent">
<p><strong>watch-mimedefang</strong>'s display is divided into three main areas, from top to bottom:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>The graph display shows six graphs representing various statistics about the multiplexor.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>The control area shows the maximum number of slaves, number of busy slaves, and number of idle slaves.  The "Control Command" text entry lets you monitor remote MIMEDefang servers; see "REMOTE MONITORING" for details.</p><p>The "10s", "1m", "5m" and "10m" checkboxes allow you to enable or disable the graphing of statistics averaged over the last 10 seconds, 1 minute, 5 minutes and 10 minutes.</p><p>The "Reread Filters" button forces the multiplexor to reread filter rules. The "Quit" button terminates <strong>watch-mimedefang</strong>.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>The scale at the bottom lets you change the update interval (default 500ms). Be aware that frequent updating may make <strong>watch-mimedefang</strong> consume a significant fraction of CPU time.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE GRAPH AREA</h2>
        <div class="sectioncontent">
<p>The graph area contains six graphs:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>o Busy Slaves</strong></p>
  </dt>
  <dd>
    <p>This graph shows the number of busy slaves each time the statistics are sampled.</p>
  </dd>
  <dt>
    <p><strong>o Slaves/scan</strong></p>
  </dt>
  <dd>
    <p>This graph shows the average number of busy slaves each time a message was scanned.  The red plot shows the average over the last ten seconds, the blue plot shows the average over the last minute, and the green and yellow plots show the average over the last five and ten minutes, respectively.</p>
  </dd>
  <dt>
    <p><strong>o Latency (ms)</strong></p>
  </dt>
  <dd>
    <p>This graph shows the average time taken by each SCAN command over the last ten seconds, one minute, five minutes and ten minutes.</p>
  </dd>
  <dt>
    <p><strong>o Messages/s</strong></p>
  </dt>
  <dd>
    <p>This graph shows the average number of messages per second that were scanned.</p>
  </dd>
  <dt>
    <p><strong>o Activations/s</strong></p>
  </dt>
  <dd>
    <p>This graph shows the average number of new slaves activated per second.</p>
  </dd>
  <dt>
    <p><strong>o Reaps/s</strong></p>
  </dt>
  <dd>
    <p>This graph shows the average number of slaves that have terminated per second.</p><p>If the Activations and Reaps increase significantly, it could indicate heavy load, or an error causing filters to terminate abnormally.</p><p>If only Activations increase, then it probably indicates a sudden increase in e-mail volume.</p><p>If only Reaps increase, then it probably indicates a quiet time just after a period of heavy mail volume.</p>
  </dd>

</dl>
<p>You can enable or disable the ten second, one minute, five minute or ten minute plots by clicking on the "10s", "1m", "5m" or "10m" checkbox.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REMOTE MONITORING</h2>
        <div class="sectioncontent">
<p>Running <strong>watch-mimedefang</strong> on your actual mail server poses two problems: You need Tcl/Tk and the X client libraries installed, and the CPU consumption of <strong>watch-mimedefang</strong> can be considerable.</p><p>A better method is to run <strong>watch-mimedefang</strong> on a desktop machine, but have it monitor the mail server with a remote session.</p><p>The best way to establish a remote session is via SSH.  For example, if you are running MIMEDefang on "mail.mydomain.net", you can type the following into the <strong>Control Command</strong> entry box and press enter:</p>
<pre>
	ssh root@mail.mydomain.net md-mx-ctrl
</pre>
<p>You <em>must</em> have a public/private key for the target machine and you must be running ssh-agent or equivalent; you cannot use an ssh command that requires entry of a password or passphrase.</p><p>Assuming your SSH setup is correct, <strong>watch-mimedefang</strong> will open an SSH connection to mail.mydomain.net and exchange low-bandwith information over that session for monitoring purposes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND-LINE OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>watch-mimedefang</strong> accepts the following command-line options:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-command </strong><em>cmd</em></p>
  </dt>
  <dd>
    <p>Use <em>cmd</em> as the control command.  You may need to quote <em>cmd</em></p>
  </dd>
  <dt>
    <p><strong>-interval </strong><em>msec</em></p>
  </dt>
  <dd>
    <p>Set the update interval to <em>msec</em> milliseconds.</p>
  </dd>
  <dt>
    <p><strong>-10s </strong><em>flag</em></p>
  </dt>
  <dd>
    <p>Enable the "10s" graph plot if <em>flag</em> is 1, or disable it if <em>flag</em> is 0.</p>
  </dd>
  <dt>
    <p><strong>-1m </strong><em>flag</em></p>
  </dt>
  <dd>
    <p>Enable the "1m" graph plot if <em>flag</em> is 1, or disable it if <em>flag</em> is 0.</p>
  </dd>
  <dt>
    <p><strong>-5m </strong><em>flag</em></p>
  </dt>
  <dd>
    <p>Enable the "5m" graph plot if <em>flag</em> is 1, or disable it if <em>flag</em> is 0.</p>
  </dd>
  <dt>
    <p><strong>-10m </strong><em>flag</em></p>
  </dt>
  <dd>
    <p>Enable the "10m" graph plot if <em>flag</em> is 1, or disable it if <em>flag</em> is 0.</p>
  </dd>
  <dt>
    <p><strong>-title </strong><em>string</em></p>
  </dt>
  <dd>
    <p>Add <em>string</em> to the title of the main window.</p>
  </dd>
  <dt>
    <p><strong>-help</strong></p>
  </dt>
  <dd>
    <p>Print usage information.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>As an example, to monitor MIMEDefang on the machine "mail.mydomain.net" updating once a second, with the 5m and 10m plots turned off, use:</p>
<pre>
    watch-mimedefang -command 'ssh root@mail.mydomain.net md-mx-ctrl' &#92;
                     -interval 1000 -5m 0 -10m 0 -title "mail"
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>watch-mimedefang</strong> was written by David F. Skoll &lt;dfs@roaringpenguin.com&gt;. The <strong>mimedefang</strong> home page is <em>http://www.mimedefang.org/</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PERMISSIONS</h2>
        <div class="sectioncontent">
<p><strong>watch-mimedefang</strong> uses <strong>md-mx-ctrl</strong>; therefore, it probably needs to be run as <em>root</em> or the same user as <strong>mimedefang-multiplexor</strong>, or (if you are monitoring a remote machine), the SSH connection must be done as root or the MIMEDefang user.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO watch-mimedefang&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/mimedefang.pl.8.html"><strong>mimedefang.pl</strong>(8)</a>, <a href="../man5/mimedefang-filter.5.html"><strong>mimedefang-filter</strong>(5)</a>, <a href="../man8/mimedefang.8.html"><strong>mimedefang</strong>(8)</a>, <a href="../man7/mimedefang-protocol.7.html"><strong>mimedefang-protocol</strong>(7)</a>, <a href="../man8/md-mx-ctrl.8.html"><strong>md-mx-ctrl</strong>(8)</a>, <a href="../man8/watch-multiple-mimedefangs.8.html"><strong>watch-multiple-mimedefangs</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="warnquota.8.html"><span aria-hidden="true">&larr;</span> warnquota.8: Send mail to users over quota</a></li>
   <li class="next"><a href="watch-multiple-mimedefangs.8.html">watch-multiple-mimedefangs.8: Keep an eye on a cluster of mimedefang machines <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
