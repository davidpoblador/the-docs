<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>nnmaster: Nn database manager</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Nn database manager">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="nnmaster (8) manual">
  <meta name="twitter:description" content="Nn database manager">
  <meta name="twitter:image" content="https://www.carta.tech/images/nn-nnmaster-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/nnmaster.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="nnmaster (8) manual" />
  <meta property="og:description" content="Nn database manager" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nn-nnmaster-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">nnmaster<small> (8)</small></h1>
        <p class="lead">Nn database manager</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/nnmaster.8.html">
      <span itemprop="name">nnmaster: Nn database manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nn/">
      <span itemprop="name">nn</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/nnmaster.8.html">
      <span itemprop="name">nnmaster: Nn database manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>nnmaster</strong> -<strong>I</strong> [<em>lmit</em>]</p><p><strong>nnmaster</strong> -<strong>w</strong></p><p><strong>nnmaster</strong> -<strong>v</strong></p><p><strong>nnmaster</strong> -<strong>l</strong> [ "<em>lock message</em>" ]</p><p><strong>nnmaster</strong> [ <em>options</em> ] [ <em>groups</em> ]</p><p><strong>nnmaster</strong> -<strong>F</strong> [ <em>options</em> ] [ <em>groups</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>nnmaster</em> is the daemon which is responsible for building and maintaining the database used by the <em>nn</em>(1) news reader.</p><p>Normally, <em>nnmaster</em> is started when the system enters multi-user mode, and runs until system shutdown.  To facilitate this, you should place the following call in /etc/rc (or similar) to invoke the <em>nnmaster</em> daemon:</p><p>	$master/nnmaster -l -r -C</p><p>where $master is the MASTER_DIRECTORY defined during configuration of <em>nn</em>.</p><p>When <em>nnmaster</em> is started as specified above, it will first unlock the database in case it was locked (-<strong>l</strong>), perform a thorough consistency check on the database (-<strong>C</strong>).</p><p>Then, every 10 minutes (-<strong>r</strong>), it will look at the time-stamp of the news active file to see whether new articles have arrived on the system (or whether articles have been expired). (See -<strong>U</strong>)</p><p>If the active file has been modified, <em>nnmaster</em> will collect the header information from the new articles and enter them into the database (or remove the headers of the expired articles from the database).</p><p>If it detects that some articles have been expired, it will automatically remove the header information of the expired articles from the database.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARTICLE COLLECTION OPTIONS</h2>
        <div class="sectioncontent">
<p>Normally, <em>nnmaster</em> will collect all available news groups defined in the news active file.  The set of collected groups can be controlled via the argument line.  Groups can be either included or excluded:</p><p>A group name, e.g. comp, will cause the group and all its subgroups to be collected.  Individual groups, e.g. news.software.nn, can also be specified</p><p>A group name preceded by an exclamation mark, e.g. !talk.politics, will cause the group and all its subgroups to be ignored.</p><p>An empty argument, i.e. "", will cause all groups that are not ignored to be collected.  For example, to collect everything but rec and misc, use the following command:</p><p>	<em>nnmaster</em> -r !rec !misc ""</p><p>If the empty argument had been omitted, nothing would be collected, since the presence of any <em>groups</em> arguments causes <em>nnmaster</em> to ignore all groups which are not explicitly mentioned.</p><p>Example 1: The following commands can be executed by cron to collect different sets of groups at different intervals or under different conditions:</p><p>	<em>nnmaster</em> -B -O14 rec misc sci -LBO -u</p><p>	<em>nnmaster</em> !rec !misc !sci "" -u</p><p>Example 2: The group arguments are used in the given sequence, e.g. to leave out comp.sys, but still collect comp.sys.ibm.pc, use the command:</p><p>	<em>nnmaster</em> -r comp.sys.ibm.pc !comp.sys ""</p><p>The use of the -<strong>u</strong> option in the first example is essential, since each of the commands will update the active file time stamp which will prevent the other command from detecting new articles that have arrived.</p><p>Using this method to keep specific groups out of the database must be used with great caution; just a single invocation of <em>nnmaster</em> without any arguments will collect all the otherwise ignored groups!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COLLECTION OF ARTICLES</h2>
        <div class="sectioncontent">
<p>The following options control how <em>nnmaster</em> performs the collection of new articles.</p>
<dl class='dl-vertical'>
  <dt>
    <p>-<strong>r</strong> [ <em>min</em> ]</p>
  </dt>
  <dd>
    <p>Daemon mode.  The <em>nnmaster</em> will put itself in the background (unless -<strong>f</strong> is also specified), and will checks for arrival of new articles and expired articles every <em>min</em> minutes (and update the database accordingly).  If <em>min</em> is omitted, the default is to check every 10 minutes.</p><p>Without the -r option, the <em>nnmaster</em> will just perform a single collection of new articles (if any) and then exit.  This can be used to have the <em>nnmaster</em> started by <a href="../man8/cron.8.html"><strong>cron</strong>(8)</a> at regular intervals instead of having it as a daemon which sleeps between checking for new articles.  Since the <em>nnmaster</em> is a bit expensive to start up (it has to read a few files), it is up to you to decide which mode is best on your system.  (I have also heard that it works to call <em>nnmaster</em> without -r from <a href="../man1/inews.1.html"><strong>inews</strong>(1)</a>. I cannot recommend this unless you receive batched news; invoking <em>nnmaster</em> for every received article sounds too expensive to me.)</p>
  </dd>
  <dt>
    <p>-<strong>h</strong> [ <em>sec</em> ]</p>
  </dt>
  <dd>
    <p>Hold collection of new articles until next scan if new articles have arrived withing the last <em>sec</em> [60] seconds.  This is useful to prevent <em>nnmaster</em> from competing for disk i/o with an <em>rnews</em> process which is unbatching incoming news, or a running <em>expire</em> process.  It will have the side effect of limiting the number of C: entries in the log, since collection of incoming batches will typically be done in larger thunks.</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>Run <em>nnmaster</em> in foreground in daemon mode (see -<strong>r</strong>). Useful if <em>nnmaster</em> is invoked from inittab.  (Notice that if you use a <em>respawn</em> entry in inittab, you will not be able to stop <em>nnmaster</em> using the -<strong>k</strong> option, since init will immediately start another master.)</p>
  </dd>
  <dt>
    <p><strong>-C</strong></p>
  </dt>
  <dd>
    <p>Perform a consistency check on the database on start-up, and rebuild corrupted database files.  This operation can be quite time-consuming since it reads through all the database files.</p>
  </dd>
  <dt>
    <p><strong>-b</strong></p>
  </dt>
  <dd>
    <p>Normally, articles without a proper news header (no Newsgroups: line) are ignored.  Specifying the -<strong>b</strong> option causes these `bad' articles to be included in the database (normally with no sender or subject).</p>
  </dd>
  <dt>
    <p><strong>-B</strong></p>
  </dt>
  <dd>
    <p>Remove `bad' articles.  Sometimes, articles without a header ends up in the news spool directory.  These articles have no article id, and therefore, they will never be expired by <a href="../man8/expire.8.html"><strong>expire</strong>(8)</a>.  This option will allow the <em>nnmaster</em> to silently remove these articles (a `B' entry will occur in the log file).</p>
  </dd>
  <dt>
    <p>-<strong>O</strong> <em>days</em></p>
  </dt>
  <dd>
    <p>Ignore articles which are older than the given number of <em>days</em>. This may help keep old 'stray' articles out of the database.  If the -<strong>B</strong> options is also specified, the old articles will be removed from the news spool directories.  Old ignored or removed articles will be reported with an `O' entry in the log file.  This option can be disable for individual groups by the <strong>O</strong> flag in the GROUPS file (see below).</p>
  </dd>
  <dt>
    <p>-<strong>R</strong> <em>N</em></p>
  </dt>
  <dd>
    <p>Specifies how the <em>auto-recollect</em> operation is performed on the groups having this option set in the GROUPS file (see below).  Four methods are available (default is method 1):</p><p><strong>1</strong>:  Run expire on the group when new articles arrive.</p><p><strong>2</strong>:  Run expire on the group on every scan.</p><p><strong>3</strong>:  Recollect all articles when new articles arrive.</p><p><strong>4</strong>:  Recollect all articles on every scan.</p>
  </dd>
  <dt>
    <p>-<strong>M</strong> <em>mode</em></p>
  </dt>
  <dd>
    <p>Normally, <em>nnmaster</em> will send a message via mail to the news administrator (OWNER) when an error or potential problems (primarily nntp related) occur.  This can be restricted to only fatal errors (<em>nnmaster</em> terminated) if <em>mode</em> is 1, and disabled completely if <em>mode</em> is 0.</p>
  </dd>
  <dt>
    <p>-<strong>Q</strong></p>
  </dt>
  <dd>
    <p>Normally, <em>nnmaster</em> will print a message on the system console or in the syslog if a fatal error happens.  This option will prevent this, so only a type 'E' entry is written to the Log file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATABASE EXPIRATION</h2>
        <div class="sectioncontent">
<p>Since articles does not stay forever in the news system, the database must be cleaned up regularly to remove the information stored for expired articles.  Expiration of the database is normally <strong>scheduled</strong> using the <em>nnadmin</em>(1M) command executed by cron at a suitable time when expire on the news articles has completed.  The following command will send a message to the <em>nnmaster</em> and cause it to initiate expire on all news groups:</p><p>	nnadmin =EYW</p><p>Selective expiration of individual groups can be done from <em>nnadmin</em> (interactive mode).  It can also be done by invoking <em>nnmaster</em> with the -<strong>F</strong> option.  For example, the following command will run expire on all groups except the `rec' groups:</p><p>	nnmaster -F -k !rec ""</p><p>The -<strong>k</strong> option is required to terminate the currently running master since two daemons cannot be running at the same time.  Thus to run expire (on all groups) in this way from cron, the following commands must be used: 	nnmaster -Fk "" ; nnmaster -r ...</p><p>It is also possible to have <em>nnmaster</em> detect expiration automatically (see -<strong>e</strong>).  This requires that the <em>min</em> field in the active file is updated by the news expire (this is not the default case when Cnews is used). However, this is not always a safe indication since the first article may not have been expired, while a lot of other articles have been deleted.</p><p>There are several strategies available in the <em>nnmaster</em> to do this clean-up, each having their strengths and weaknesses.</p><p><strong>Method 1</strong> (default):  Rebuilds the database from the existing database information by comparing the current database contents with the contents of the news group directories, eliminating entries whose file no longer exists.  This method is guaranteed to eliminate all expired articles from the database, and it is reasonably fast because it only has to read the directories, not each article file.</p>
<pre>
  If news is accessed remotely via nntp, the list of existing articles
</pre>
<p>cannot efficiently be fetched by reading a local directory.  Instead an XHDR request is sent to the nntp server to get a list of articles.</p><p><strong>Method 2</strong>:  Eliminates only the expired articles before the first article in the group.  This is very fast since only the active file and the database itself is accessed, but it will obviously leave some expired articles in the database.  This method requires that the <em>min</em> field in the active file is updated by <em>expire</em>.</p><p><strong>Method 3</strong>:  Discard the current database information and recollects all articles.  This is obviously very time consuming, and it is therefore not recommended, especially not with nntp.</p><p>The options related to database expiration are:</p>
<dl class='dl-vertical'>
  <dt>
    <p>-<strong>E</strong> <em>N</em></p>
  </dt>
  <dd>
    <p>Select expire method <em>N</em>.  (If <em>N</em> is omitted, the default method is used).</p>
  </dd>
  <dt>
    <p>-<strong>e</strong> [<em>N</em>]</p>
  </dt>
  <dd>
    <p>Automatically run expire in the database on groups where the <em>min</em> number in the active file has increased by <em>N</em> (1 if omitted) articles. This is disabled by default (since the <em>min</em> field is often unreliable).</p>
  </dd>
  <dt>
    <p>-<strong>F</strong></p>
  </dt>
  <dd>
    <p>Run expire once and exit.  If a list of <em>groups</em> is specified on the command line, the matched groups (see the rules above) will be marked for expiration.  If no groups are specified, only the groups already scheduled for expire will be expired.  Consequently, to expire all groups, a blank argument "" (matching all groups) must be specified.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATABASE LOCKING</h2>
        <div class="sectioncontent">
<p>The database can be locked centrally, which will normally disallow all access to the database, and even block <em>nnmaster</em> from being (accidentally) started.  When a lock is set on the database, all currently running clients will terminate the next time they try to access the database.  Setting a lock on the database can thus also be used to force running clients to terminate.</p><p>The following options set and clear locks on the database:</p>
<dl class='dl-vertical'>
  <dt>
    <p>-<strong>l</strong> <em>message</em></p>
  </dt>
  <dd>
    <p>Locks the database with the given <em>message</em>.  The message will be displayed every time a program tries to access the database.</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>Unlock the database if it was locked.</p>
  </dd>
  <dt>
    <p><strong>-i</strong></p>
  </dt>
  <dd>
    <p>Ignore a possible lock and continue.  This can be used to have <em>nnmaster</em> operate on a database which is blocked from normal user access.</p>
  </dd>

</dl>
<p>Since only one <em>nnmaster</em> can operate on the database at any one time, a running <em>nnmaster</em> daemon must be stopped before a lock can be set on the database.  If neither <strong>-f</strong> nor <strong>-r</strong> is specified with the <strong>-l</strong> option (in both forms), <em>nnmaster</em> will terminate after setting or clearing the lock.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATABASE INITIALIZATION</h2>
        <div class="sectioncontent">
<p>The following options are used to initialize and update the central database files:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-I</strong> [<em>limit</em>]</p>
  </dt>
  <dd>
    <p>Initialize database.  This option will erase an existing database, and create an empty database containing entries for the currently known groups.  <em>nnmaster</em> will offer you to use an existing GROUPS file when initializing the database.</p><p>The optional <em>limit</em> can be used to put a limit on the number of articles that will be collected in each group during the first collection of articles following the database initialization.  This is useful on systems where the 'min' field in the active file is unreliable or not maintained (Cnews doesn't) to limit the work done to do the initial collection of news after the initialization of the database.  If news is accessed remotely from an NNTP server, this is even more important!  If <em>limit</em> is omitted, or is zero, <em>nnmaster</em> will trust the min field and collect all articles in the range min..last.</p>
  </dd>
  <dt>
    <p><strong>-G</strong></p>
  </dt>
  <dd>
    <p>Reread the GROUPS file.  This option is used to instruct <em>nnmaster</em> to parse the GROUPS file after it has been edited. See the section on the GROUPS file below.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MISCELLANEOUS OPTIONS</h2>
        <div class="sectioncontent">
<p>The following options controls various details of the <em>nnmaster</em>'s behaviour:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-D</strong> [ <em>N</em> ]</p>
  </dt>
  <dd>
    <p>Run <em>nnmaster</em> in "debug mode".  If <em>N</em> is omitted, or equals 1 or 3, this will produce a compact but still very informative trace of the collection or expire process directly on the terminal.  This is most useful when doing the first collection of articles after initializing the database with -I.  If <em>N</em> is 2 or 3, a trace of the NNTP traffic is written to a file nnmaster.log in the TMP directory. This option disables -<strong>r</strong>.</p>
  </dd>
  <dt>
    <p>-<strong>H</strong></p>
  </dt>
  <dd>
    <p>Identifies the host which <em>nnmaster</em> is running on as the nntp-server for its clients, i.e. that it can access the news spool directory locally without using NNTP.  Normally, <em>nnmaster</em> will detect this by itself by comparing the host name to the contents of the nntp_server file, so this option should really be superfluous.</p>
  </dd>
  <dt>
    <p>-<strong>y</strong> <em>retries</em></p>
  </dt>
  <dd>
    <p>In some networked environment, opening an article (shared from another machine via NFS) may fail for no obvious reason.  Using this option, it is possible to cause <em>nnmaster</em> to perform <em>retries</em> attempts to open an article before marking the article as non-existing in the database.</p>
  </dd>
  <dt>
    <p>-<strong>L</strong> <em>types</em></p>
  </dt>
  <dd>
    <p>Exclude the specified entry types from the log file.  This is normally used to exclude the 'C'ollecting and e'X'pire entries (-<strong>L</strong>CXO).</p>
  </dd>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>Trace the collection process.  This will place a lot of information into the log file (T: entries).</p>
  </dd>
  <dt>
    <p><strong>-u</strong></p>
  </dt>
  <dd>
    <p>Normally, <em>nnmaster</em> will just compare the time-stamp on the active file with a time-stamp saved in the database to see if new articles have arrived.  The -u option forces the <em>nnmaster</em> to <em>read</em> the active file on start-up to see if new articles have arrived.</p>
  </dd>
  <dt>
    <p><strong>-U</strong></p>
  </dt>
  <dd>
    <p>Some SVR4 systems (and maybe SunOS) have a useful "feature".  Writing files with mmap() may not update the last-changed timestamp on the file. Since INN uses mmap() for writing the active file, this becomes a problem for <em>nnmaster</em>. The -U option causes <em>nnmaster</em> to unconditionally read the active file each time the repeat delay (-r) time expires.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Print the release and version identification for <em>nnmaster</em>, and exit.</p>
  </dd>
  <dt>
    <p><strong>-w</strong></p>
  </dt>
  <dd>
    <p>Wakeup the real <em>nnmaster</em>.  Send a signal to the <em>nnmaster</em> daemon to have it check for new articles immediately.</p>
  </dd>
  <dt>
    <p><strong>-k</strong></p>
  </dt>
  <dd>
    <p>Kill the already running <em>nnmaster</em> daemon before proceeding with the operation specified by the other options (or terminate if no other operation is requested).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE GROUPS FILE</h2>
        <div class="sectioncontent">
<p>The primary purpose of the GROUPS file is to store the names of the news groups represented in the database.  Each line in the file corresponds to an entry in the (binary) MASTER file, and the sequence of the lines in the GROUPS file must never be changed unless the database is reinitialized afterwards.</p><p>However, the contents of the lines in the GROUPS file can be edited to control how the <em>nnmaster</em> should handle each individual group.</p><p>The format of each line is:</p><p>	news.group.name [ timestamp ] [ flags ]</p><p>The news group name is the name of the group, and must not be changed in any way.  If the group is no longer in the news active file, and consequently the group does no longer exist, group name can be replaced by a `@' character which will instruct <em>nnmaster</em> to ignore this entry without having to rebuild the entire database.</p><p>The optional time stamp indicates when the line was added to the GROUPS file and is used by <em>nn</em> to detect new groups.  When the GROUPS file is built initially from the active file, the time stamps are omitted which simply means that they are "old".</p><p>One or more of the following flags can be added to the GROUPS line to control <em>nnmaster</em>'s handling of the group:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>D</strong></p>
  </dt>
  <dd>
    <p>Causes <em>nnmaster</em> to treat all articles in the group as digests, even when they don't initially look like digests.  Articles which are found not to be digests after all, are still not digested.</p>
  </dd>
  <dt>
    <p><strong>N</strong></p>
  </dt>
  <dd>
    <p>Instructs <em>nnmaster</em> to never digest any articles in the group.</p>
  </dd>
  <dt>
    <p><strong>O</strong></p>
  </dt>
  <dd>
    <p>Disables the -<strong>O</strong> option for this group, i.e. all existing articles will be included in the database (and they will not be removed if the -<strong>B</strong> option is specified).  This flag should be set on groups which you never expire, or have a very long expire time!</p>
  </dd>
  <dt>
    <p><strong>R</strong></p>
  </dt>
  <dd>
    <p>Causes <em>nnmaster</em> to <em>recollect all</em> available articles in the group whenever a new article is received.  This is said to be useful is some high-traffic clarinet groups with many cancelled articles.</p>
  </dd>
  <dt>
    <p><strong>&gt;</strong><em>file</em></p>
  </dt>
  <dd>
    <p>Instructs <em>nnmaster</em> to <em>append</em> all new articles to the specified file.  This makes it possible to keep specific groups out of the way of expire.  The archive file can be access directly from the <em>nn</em> client using the <em>goto-group</em> command.  The file name must be a full path name to a file in an existing, writeable directory.</p>
  </dd>
  <dt>
    <p><strong>@</strong></p>
  </dt>
  <dd>
    <p>Instructs <em>nnmaster</em> to completely ignore this group - this is equivalent to setting the group name to `@' as described above.</p>
  </dd>
  <dt>
    <p><strong>!</strong> or <strong>X</strong></p>
  </dt>
  <dd>
    <p>Causes <em>nnmaster</em> to ignore the group and not collect the group's articles in the database.</p>
  </dd>

</dl>
<p>Comments (starting with `#' and continuing to the end of line) and empty lines are allow in the GROUPS file, but it is strongly recommended to keep the changes to the GROUPS file as small as possible, because of the implicit correspondence with the binary MASTER file.</p><p>It is not recommended to edit the GROUPS file while <em>nnmaster</em> is running because it may add new groups to the file.  After editing the GROUPS file, the command</p><p>	<em>nnmaster</em> -G</p><p>must be run before restarting the <em>nnmaster</em> to parse and verify the new GROUPS file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NNTP SUPPORT</h2>
        <div class="sectioncontent">
<p>The <em>nnmaster</em> can access the news articles from a local news spool directory as well as from an NNTP server.  When compiled with NNTP enabled, <em>nnmaster</em> will compare the name of the NNTP server and the name of the local host; if they are identical, <em>nnmaster</em> will bypass NNTP and access the articles directly.</p><p>When it has to access the news articles via NNTP, it cannot time-stamp the active file, so instead it transfers the entire active file from the NNTP server and compares it with a local copy of the last active file fetched from the NNTP server.  This is not very expensive in terms of cpu-cycles, disk-load, or net-bandwidth, but to stay on friendly terms with the NNTP server administrator, you should probably not use shorter update intervals than the standard 10 minutes.</p><p>Setting a much higher update interval than the standard 10 minutes is not really recommended either, since an update normally implies fetching a burst of news articles from the NNTP server, so setting the interval too long may imply that the load on the NNTP server will be more un-even.</p><p>In expire method 1, the use of XHDR just to get a list of existing articles in a group is definitely a waste of resources on the nntp server (but still lower than using method 3).  Before using the XHDR request, <em>nnmaster</em> will send a non-standard "LISTGROUP" request; if the nntp server supports this request, it should return an OK_HEAD status followed by an (unordered) list of article numbers (one per line) terminated by a `.' line.  The nntp servers supporting this request will be much less loaded during expire.</p><p>The -<strong>O</strong> option does not work with NNTP.  The -<strong>B</strong> option will only work with NNTP if the <em>nnmaster</em> is running on the NNTP server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>The $db, $master, and $news names used below are synonyms for the DB_DIRECTORY, MASTER_DIRECTORY, and NEWS_LIB_DIRECTORY defined during configuration.</p><p>$db/MASTER	Database master index</p><p>$db/GROUPS	News group names and flags in MASTER file order</p><p>$db/DATA/<em>nnn</em>.[dx]	Database files for group number <em>nnn</em></p><p>.../.nn[dx]	Database files if located in the group directories</p><p>$master/GATE	Message channel from <em>nnadmin</em> to <em>nnmaster</em></p><p>$master/MPID	The process id of the <em>nnmaster</em> daemon.</p><p>$Log		The log file (the location is configuration dependent)</p><p>$news/active	Existing articles and groups</p><p>/usr/lib/nntp_server	Contains the name of the NNTP server.</p><p>The MASTER file contains a record for each news group, occurring in the same sequence as the group names in the GROUPS file.  The sequence also defines the group numbers used to identify the files in the database's DATA directory.</p><p>The GATE file will be created by <em>nnadmin</em> when needed, and removed by <em>nnmaster</em> when it has read it.  Therefore, to send a message to the <em>nnmaster</em> requires that you are allowed to write in the $master directory.</p><p>The contents of the Log file are described in the <em>nnadmin</em> manual.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO nnmaster&hellip;</h2>
        <div class="sectioncontent">
<p>nn(1), <a href="../man1/nncheck.1.html"><strong>nncheck</strong>(1)</a>, <a href="../man1/nngrep.1.html"><strong>nngrep</strong>(1)</a>, <a href="../man1/nntidy.1.html"><strong>nntidy</strong>(1)</a></p><p>nnadmin(1M), <a href="../man8/nnspew.8.html"><strong>nnspew</strong>(8)</a>, nnusage(1M)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Kim F. Storm, Texas Instruments A/S, Denmark</p><p>E-mail: storm@texas.dk</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="nmbd.8.html"><span aria-hidden="true">&larr;</span> nmbd.8: Netbios name server to provide netbios over ip naming services to clients</a></li>
   <li class="next"><a href="nnspew.8.html">nnspew.8: Subject database manager (nn) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
