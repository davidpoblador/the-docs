<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>smpquery: Smpquery -</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Smpquery -">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="smpquery (8) manual">
  <meta name="twitter:description" content="Smpquery -">
  <meta name="twitter:image" content="https://www.carta.tech/images/infiniband-diags-smpquery-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/smpquery.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="smpquery (8) manual" />
  <meta property="og:description" content="Smpquery -" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/infiniband-diags-smpquery-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">smpquery<small> (8)</small></h1>
        <p class="lead">Smpquery -</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/smpquery.8.html">
      <span itemprop="name">smpquery: Smpquery -</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/infiniband-diags/">
      <span itemprop="name">infiniband-diags</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/smpquery.8.html">
      <span itemprop="name">smpquery: Smpquery -</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">QUERY INFINIBAND SUBNET MANAGEMENT ATTRIBUTES</h2>
        <div class="sectioncontent">
<h3>SYNOPSIS</h3>
<p>smpquery [options] &lt;op&gt; &lt;dest dr_path|lid|guid&gt; [op params]</p>
<h3>DESCRIPTION</h3>
<p>smpquery allows a basic subset of standard SMP queries including the following: node info, node description, switch info, port info. Fields are displayed in human readable format.</p>
<h3>OPTIONS</h3>
<p>Current supported operations and their parameters:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>::</strong></p>
  </dt>
  <dd>
    <p>nodeinfo &lt;addr&gt; nodedesc &lt;addr&gt; portinfo &lt;addr&gt; [&lt;portnum&gt;]     # default port is zero switchinfo &lt;addr&gt; pkeys &lt;addr&gt; [&lt;portnum&gt;] sl2vl &lt;addr&gt; [&lt;portnum&gt;] vlarb &lt;addr&gt; [&lt;portnum&gt;] guids &lt;addr&gt; mlnxextportinfo &lt;addr&gt; [&lt;portnum&gt;]  # default port is zero</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-c, --combined</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Use Combined route address argument <strong>&lt;lid&gt; &lt;DR_Path&gt;</strong></p>
  </dd>
  <dt>
    <p><strong></strong><strong>-x, --extended</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Set SMSupportsExtendedSpeeds bit 31 in AttributeModifier (only impacts PortInfo queries).</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-K, --show_keys</strong><strong></strong></p>
  </dt>
  <dd>
    <p>show security keys (mkey, smkey, etc.) associated with the request.</p>
  </dd>

</dl>

<h3>Addressing Flags</h3>
<p><strong>-D, --Direct</strong>     The address specified is a directed route</p>
<pre>
Examples:
   [options] -D [options] "0"          # self port
   [options] -D [options] "0,1,2,1,4"  # out via port 1, then 2, ...

   (Note the second number in the path specified must match the port being
   used.  This can be specified using the port selection flag &apos;-P&apos; or the
   port found through the automatic selection process.)
</pre>
<p><strong>-G, --Guid</strong>     The address specified is a Port GUID</p><p><strong>-L, --Lid</strong>   The address specified is a LID</p><p><strong>-s, --sm_port &lt;smlid&gt;</strong>     use &apos;smlid&apos; as the target lid for SA queries.</p>
<h3>Port Selection flags</h3>
<p><strong>-C, --Ca &lt;ca_name&gt;</strong>    use the specified ca_name.</p><p><strong>-P, --Port &lt;ca_port&gt;</strong>    use the specified ca_port.</p>
<h3>Local port Selection</h3>
<p>Multiple port/Multiple CA support: when no IB device or port is specified (see the "local umad parameters" below), the libibumad library selects the port to use by the following criteria:</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p>the first port that is ACTIVE.</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p>if not found, the first port that is UP (physical link up).</p><p>If a port and/or CA name is specified, the libibumad library attempts to fulfill the user request, and will fail if it is not possible.</p><p>For example:</p>
<pre>
ibaddr                 # use the first port (criteria #1 above)
ibaddr -C mthca1       # pick the best port from "mthca1" only.
ibaddr -P 2            # use the second (active/up) port from the first available IB device.
ibaddr -C mthca0 -P 2  # use the specified port only.
</pre>

  </dd>

</dl>

<h3>Debugging flags</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>raise the IB debugging level. May be used several times (-ddd or -d -d -d).</p>
  </dd>
  <dt>
    <p><strong>-e</strong></p>
  </dt>
  <dd>
    <p>show send and receive errors (timeouts and others)</p><p><strong>-h, --help</strong>      show the usage message</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-v, --verbose</strong><strong></strong></p>
  </dt>
  <dd>
    <p>increase the application verbosity level. May be used several times (-vv or -v -v -v)</p><p><strong>-V, --version</strong>     show the version info.</p>
  </dd>

</dl>

<h3>Configuration flags</h3>
<p><strong>-t, --timeout &lt;timeout_ms&gt;</strong> override the default timeout for the solicited mads.</p><p><strong>--node-name-map &lt;node-name-map&gt;</strong> Specify a node name map. This file maps GUIDs to more user friendly names.  See FILES section.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-y, --m_key &lt;key&gt;</strong><strong></strong></p>
  </dt>
  <dd>
    <p>use the specified M_key for requests. If non-numeric value (like &apos;x&apos;) is specified then a value will be prompted for.</p><p><strong>--config, -z  &lt;config_file&gt;</strong> Specify alternate config file. Default: /etc/infiniband-diags/ibdiag.conf</p>
  </dd>

</dl>

<h3>FILES</h3>

<h3>CONFIG FILE</h3>
<p>/etc/infiniband-diags/ibdiag.conf</p><p>A global config file is provided to set some of the common options for all tools.  See supplied config file for details.</p>
<h3>NODE NAME MAP FILE FORMAT</h3>
<p>The node name map is used to specify user friendly names for nodes in the output.  GUIDs are used to perform the lookup.</p><p>This functionality is provided by the opensm-libs package.  See <a href="../man8/opensm.8.html"><strong>opensm</strong>(8)</a></strong> for the file location for your installation.</p><p><strong>Generically:</strong></p>
<pre>
# comment
&lt;guid&gt; "&lt;name&gt;"
</pre>
<p><strong>Example:</strong></p>
<pre>
# IB1
# Line cards
0x0008f104003f125c "IB1 (Rack 11 slot 1   ) ISR9288/ISR9096 Voltaire sLB-24D"
0x0008f104003f125d "IB1 (Rack 11 slot 1   ) ISR9288/ISR9096 Voltaire sLB-24D"
0x0008f104003f10d2 "IB1 (Rack 11 slot 2   ) ISR9288/ISR9096 Voltaire sLB-24D"
0x0008f104003f10d3 "IB1 (Rack 11 slot 2   ) ISR9288/ISR9096 Voltaire sLB-24D"
0x0008f104003f10bf "IB1 (Rack 11 slot 12  ) ISR9288/ISR9096 Voltaire sLB-24D"

# Spines
0x0008f10400400e2d "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
0x0008f10400400e2e "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
0x0008f10400400e2f "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
0x0008f10400400e31 "IB1 (Rack 11 spine 2   ) ISR9288 Voltaire sFB-12D"
0x0008f10400400e32 "IB1 (Rack 11 spine 2   ) ISR9288 Voltaire sFB-12D"

# GUID   Node Name
0x0008f10400411a08 "SW1  (Rack  3) ISR9024 Voltaire 9024D"
0x0008f10400411a28 "SW2  (Rack  3) ISR9024 Voltaire 9024D"
0x0008f10400411a34 "SW3  (Rack  3) ISR9024 Voltaire 9024D"
0x0008f104004119d0 "SW4  (Rack  3) ISR9024 Voltaire 9024D"
</pre>

<h3>EXAMPLES</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>::</strong></p>
  </dt>
  <dd>
    <p>smpquery portinfo 3 1                     # portinfo by lid, with port modifier smpquery -G switchinfo 0x2C9000100D051 1  # switchinfo by guid smpquery -D nodeinfo 0                    # nodeinfo by direct route smpquery -c nodeinfo 6 0,12               # nodeinfo by combined route</p>
  </dd>

</dl>

<h3>SEE ALSO</h3>
<p>smpdump (8)</p>
<h3>AUTHOR</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>Hal Rosenstock</strong></p>
  </dt>
  <dd>
    <p>&lt; <em>hal@mellanox.com</em> &gt;</p>
  </dd>

</dl>


        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="smpdump.8.html"><span aria-hidden="true">&larr;</span> smpdump.8: Smpdump -</a></li>
   <li class="next"><a href="smrsh.8.html">smrsh.8: Restricted shell for sendmail <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
