<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>drbdlinks: Manages links into a shared drbd partition</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manages links into a shared drbd partition">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="drbdlinks (8) manual">
  <meta name="twitter:description" content="Manages links into a shared drbd partition">
  <meta name="twitter:image" content="https://www.carta.tech/images/drbdlinks-drbdlinks-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/drbdlinks.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="drbdlinks (8) manual" />
  <meta property="og:description" content="Manages links into a shared drbd partition" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/drbdlinks-drbdlinks-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">drbdlinks<small> (8)</small></h1>
        <p class="lead">Manages links into a shared drbd partition</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/drbdlinks.8.html">
      <span itemprop="name">drbdlinks: Manages links into a shared drbd partition</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/drbdlinks/">
      <span itemprop="name">drbdlinks</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/drbdlinks.8.html">
      <span itemprop="name">drbdlinks: Manages links into a shared drbd partition</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>drbdlinks</strong> [<em>OPTION</em>]... [start|stop|auto|status|monitor|checklinks]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>drbdlinks</strong> is a program that will manage creation and removal of symbolic links. It is primarily used with clusters of machines using either shared storage or the "DRBD" replicated block device.</p><p>While the name of the program is "drbdlinks", it can be used in any shared-storage sort of environment where the shared storage is only mounted on the active node.  In cases like NFS where the shared storage is always mounted on all nodes, drbdlinks is not necessary.</p><p>The advantage over creating static symbolic links is that package updates often require that directories point at real files, so updates can often fail if you do not have the shared storage mounted.</p><p><strong>drbdlinks</strong> also supports multiple instances of links, in the case of active/active clusters.  For example, if you have MySQL running in one resource group, and Apache running in another, you can use the "-c" switch to specify a configuration file for each resource group.</p><p>A simple configuration file, "/etc/drbdlinks.conf", specifies the links. This can be used to manage links for /etc/httpd, /var/lib/pgsql, and other system directories that need to appear as if they are local to the system when running applications after a drbd shared partition has been mounted.</p><p>When run with "start" as the mode, drbdlinks will rename the existing files/directories, and then make symbolic links into the DRBD partition.  "stop" does the reverse.</p><p>Mode "checklinks" will report any links that do not exist in the destination area.  During initial setup and configuration, this can help check that you have the destination file-system set up with the required components.</p><p>If run with "initialize_shared_storage", destination links specified in the configuration file will be populated from the source storage.  This is useful for initial setup to populate the shared storage.  Preceding paths will be populated if they share the same name from source to destination.</p><p>The "monitor" and "status" modes will check the file-system against the configuration file and will report "running" (monitor mode) or "OK" (status mode) if all links appear to be up.  Otherwise they report "down" or "stopped" (respectively).</p><p>By default, the rename appends .drbdlinks to the name, but this can be overridden in the configuration file.</p><p>The "list" mode just show the list of links, with each line showing the link, destination, and a 0/1 flag for bindMount status.  This may be useful for user scripts without having to parse the configuration.</p><p>An init script is included which runs "stop" before heartbeat starts, and after heartbeat stops.  This is done to try to ensure that when the shared partition isn't mounted, the links are in their normal state.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>drbdlinks</strong> has several options, using either short or long variants.</p>
<dl class='dl-vertical'>
  <dt>
    <strong>-h, --help</strong>
  </dt>
  <dd>
    <p>Print a short help message describing the available options and exit.</p>
  </dd>
  <dt>
    <strong>-c, --config-file=CONFIGFILE</strong>
  </dt>
  <dd>
    <p>Specify an alternate config file.  The default config file is /etc/drbdlinks.conf.  Alternate config files should have a "drbdlinks-" prefix, e.g. "drbdlinks-httpd.conf".</p>
  </dd>
  <dt>
    <strong>-s, --suffix=SUFFIX</strong>
  </dt>
  <dd>
    <p>Name to append to the local file-system name when the link is in place.  The default is "drbdlinks", which would result in a renamed file like "/etc/httpd.drbdlinks".</p>
  </dd>
  <dt>
    <strong>-v, --verbose</strong>
  </dt>
  <dd>
    <p>Increase verbosity level by 1 for every occurrence of this option.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Here are a few examples of how drbdlinks can be used.</p><p>The most straight-forward, and default, method for starting drbdlinks:</p><p>drbdlinks start</p><p>To use a suffix different from the default when linking to a file or directory, the -s option can be used, specifying the desired string:</p><p>drbdlinks -s orig start</p><p>would rename the file-system name to "name.orig".</p><p>Increase the verbosity to assist in debugging:</p><p>drbdlinks -v -v start</p><p>Use an alternate configuration file, possibly from with a DRBD mounted file-system:</p><p>drbdlinks -c /shared1/drbdlinks-httpd.conf start</p><p>This would use the specified configuration file, found on our DRBD device mounted on /shared1.  This would allow us to easily keep drbdlinks configurations tied to a specific set of data on a DRBD disk in an active/active sort of HA configuration.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO drbdlinks&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/drbd.8.html"><strong>DRBD</strong>(8)</a>, <a href="../man8/drbdadm.8.html"><strong>drbdadm</strong>(8)</a>, <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a>, <a href="../man8/heartbeat.8.html"><strong>heartbeat</strong>(8)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>drbdlinks was written by Sean Reifschneider &lt;jafo@tummy.com&gt;.</p><p>This manual page was written by Cyril Bouthors &lt;cyril@bouthors.org&gt;, for the Debian project (but may be used by others).  Sean Reifschneider modified it for status and monitor arguments, and included it in the base drbdlinks release.  Mike Loseke &lt;mike@tummy.com&gt; added the sections on options and examples.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="drbddisk-8.4.8.html"><span aria-hidden="true">&larr;</span> drbddisk-8.4.8: Script to mark devices as primary and mount file systems</a></li>
   <li class="next"><a href="drbdmeta.8.html">drbdmeta.8: Drbds meta data management tool . <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
