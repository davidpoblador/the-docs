<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pfqueue: A queue realtime scanner for mta</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A queue realtime scanner for mta">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pfqueue (8) manual">
  <meta name="twitter:description" content="A queue realtime scanner for mta">
  <meta name="twitter:image" content="https://www.carta.tech/images/pfqueue-pfqueue-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pfqueue.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pfqueue (8) manual" />
  <meta property="og:description" content="A queue realtime scanner for mta" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pfqueue-pfqueue-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pfqueue<small> (8)</small></h1>
        <p class="lead">A queue realtime scanner for mta</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pfqueue.8.html">
      <span itemprop="name">pfqueue: A queue realtime scanner for mta</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pfqueue/">
      <span itemprop="name">pfqueue</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pfqueue.8.html">
      <span itemprop="name">pfqueue: A queue realtime scanner for mta</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pfqueue</strong> [<em>-ehvn</em>]<em>[</em>-b<em>postfix1|postfix2|exim</em>]<em>[</em>-q<em>queue#</em>]<em>[</em>-m<em>maxmsg</em>] [<em>-s</em>seconds<em>]</em>[<em>-l</em>seconds<em>]</em>[<em>-B</em>backends_path<em>]</em> [<em>-p</em>executables_path<em>]</em>[<em>-c</em>config_path<em>]</em>[<em>-d</em>seconds<em>]</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>pfqueue</strong> is a simple console tool for managing MTA (Mail Transfer Agent) message queues. It handles queues through 'backends', libraries that interact with the MTA, and displays informations through a console, ncurses based 'frontend'.</p><p>Currently, pfqueue has backends for Postfix (both 1.x and 2.x) and Exim (both version 3 and 4).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p>pfqueue returns 0 if everything goes fine, or:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-1 if pfqueue library cannot be initialized</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-2 if frontend cannot be initialized</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-3 if you are not root</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-4 if pfqueue library cannot be started</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>pfqueue</strong> accepts the following options, which are common to any backend:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-B backends_path</strong></p>
  </dt>
  <dd>
    <p>Tell pfqueue where backends are located. They should be automatically found, since your installation should have placed them in a standard lib dir. If not so, use this option to force it.</p>
  </dd>
  <dt>
    <p><strong>-b backend</strong></p>
  </dt>
  <dd>
    <p>Load a given backend. It can be <strong>autodetect</strong>, <strong>postfix1</strong>, <strong>postfix2</strong> or <strong>exim</strong>. Backends are libraries named pfq_backendname.so, located in the installation library path (except for autodetect, which is only a virtual backend that will try to guess what kind of MTA is installed on the machine, and to load the proper backend).</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Show version.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Show usage.</p>
  </dd>
  <dt>
    <p><strong>-c config</strong></p>
  </dt>
  <dd>
    <p>Use a custom MTA configuration; note that the meaning of 'configuration' may vary: for example, postfix needs a directory, exim needs a file.</p>
  </dd>
  <dt>
    <p><strong>-m max</strong></p>
  </dt>
  <dd>
    <p>Set the maximum number of messages shown in a queue. The default is <strong>200</strong>.</p>
  </dd>
  <dt>
    <p><strong>-s seconds</strong></p>
  </dt>
  <dd>
    <p>Set the display autorefresh rate in seconds. Default is <strong>1</strong>.</p>
  </dd>
  <dt>
    <p><strong>-e</strong></p>
  </dt>
  <dd>
    <p>Start reading from/to fields from message envelope instead of headers, if the backend (and MTA) supports it.</p>
  </dd>
  <dt>
    <p><strong>-p directory</strong></p>
  </dt>
  <dd>
    <p>Set MTA executables path.</p>
  </dd>
  <dt>
    <p><strong>-q queue_num</strong></p>
  </dt>
  <dd>
    <p>Start by scanning the queue number queue_num: 1 for deferred, 2 for active, 3 for incoming, 4 for hold, whatever the MTA calls them. Some backends may not support all of these queues.</p>
  </dd>
  <dt>
    <p><strong>-l limit</strong></p>
  </dt>
  <dd>
    <p>Make pfqueue limit the time for scanning the queue tree and for retreiving messages informations to this number of seconds; time is not that accurate, since blocking I/O operations may cause lags, but it shouldn't go too far. Obviously, limiting process run time may lead to uncomplete results. Use this option just in case pfqueue takes too long in performing operations, or you have a very slow machine, or you have very busy queues.</p>
  </dd>
  <dt>
    <p><strong>-d seconds</strong></p>
  </dt>
  <dd>
    <p>Seconds to wait between queue scans. Default is <strong>1</strong>.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>Toggle colors off; note that use of colors can be toggled also when pfqueue is running, with '+' key.</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>Remote host to connect to. This implies a spfqueue instance running on the remote host.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>During program run, what you see is a window divided into two sections: the upper one is the list of messages found in the current queue, and the lower one is a small selection of details for the current message.</p><p>A number of operation can then be done on a single message, or on a bunch of selected messages.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>UP/DOWN arrow keys</strong></p>
  </dt>
  <dd>
    <p>Move the cursor up/down.</p>
  </dd>
  <dt>
    <p><strong>HOME/END or g/G</strong></p>
  </dt>
  <dd>
    <p>Move to the top/bottom of the list.</p>
  </dd>
  <dt>
    <p><strong>1, 2, 3, 4, 5</strong></p>
  </dt>
  <dd>
    <p>Select queue to show. Every MTA handles queues in its own way, so these are general keys that cannot be generically described. For Postfix, they will select respectively 'deferred', 'active', 'incoming', 'hold' and 'corrupt' queues. For Exim, they will have no effect since the backend (and Exim, really) does not archive messages in different queues depending on their status.</p>
  </dd>
  <dt>
    <p><strong>d</strong></p>
  </dt>
  <dd>
    <p>Delete message.</p>
  </dd>
  <dt>
    <p><strong>h</strong></p>
  </dt>
  <dd>
    <p>Hold message.</p>
  </dd>
  <dt>
    <p><strong>l</strong></p>
  </dt>
  <dd>
    <p>Release message.</p>
  </dd>
  <dt>
    <p><strong>r</strong></p>
  </dt>
  <dd>
    <p>Requeue message.</p>
  </dd>
  <dt>
    <p><strong>m</strong></p>
  </dt>
  <dd>
    <p>Mark current message: this will "mark" the message as the start of a block, and the following 't' key (see below) will tag all messages between that and the tagged one.</p>
  </dd>
  <dt>
    <p><strong>t</strong></p>
  </dt>
  <dd>
    <p>Tag/untag message; tagged messages will be shown in <strong>bold</strong>. To operate on all the tagged messages at once, use ';' key (see below). If a mark (see above) is present, all messages between the tagged and the marked will be tagged.</p>
  </dd>
  <dt>
    <p><strong>a</strong></p>
  </dt>
  <dd>
    <p>Tag all messages.</p>
  </dd>
  <dt>
    <p><strong>u</strong></p>
  </dt>
  <dd>
    <p>Untag all messages.</p>
  </dd>
  <dt>
    <p><strong>;</strong></p>
  </dt>
  <dd>
    <p>Make delete/hold/release/requeue actions work on all of the tagged messages at once.</p>
  </dd>
  <dt>
    <p><strong>:</strong></p>
  </dt>
  <dd>
    <p>Toggle auto-work-on-tagged: when activated, and if there are tagged messages, actions will work on tagged indipendently of work-on-tagged status (';' key).</p>
  </dd>
  <dt>
    <p><strong>e</strong></p>
  </dt>
  <dd>
    <p>Toggle reading from/to fields from envelope or headers, if the backend supports it.</p>
  </dd>
  <dt>
    <p><strong>s</strong></p>
  </dt>
  <dd>
    <p>Show current message details.</p>
  </dd>
  <dt>
    <p><strong>/</strong></p>
  </dt>
  <dd>
    <p>Find first message matching a POSIX regexp; the regexp you use can be prefixed by one of f:, t:, e:, s: which will limit the search in, respectively, the From, To, From-or-To, Subject fields. The default is to search everywhere.</p>
  </dd>
  <dt>
    <p><strong>n</strong></p>
  </dt>
  <dd>
    <p>Find next message matching last used regexp.</p>
  </dd>
  <dt>
    <p><strong>p</strong></p>
  </dt>
  <dd>
    <p>Find previous message matching last used regexp.</p>
  </dd>
  <dt>
    <p><strong>T</strong></p>
  </dt>
  <dd>
    <p>Search and tag messages: all messages matching the regexp will be tagged; the same prefixes described in '/' search can be used.</p>
  </dd>
  <dt>
    <p><strong>c</strong></p>
  </dt>
  <dd>
    <p>Enable/disable confirmation request for action on messages.</p>
  </dd>
  <dt>
    <p><strong>-</strong></p>
  </dt>
  <dd>
    <p>Toggle queue scanning on/off. Use it when you have a fast changing situation and you want to freeze it for further examination. Note that then scanning is disabled, the messages you see in the list may have gone away (delivered?) in the meantime.</p>
  </dd>
  <dt>
    <p><strong>+</strong></p>
  </dt>
  <dd>
    <p>Toggle colors on/off.</p>
  </dd>
  <dt>
    <p><strong>&gt;</strong></p>
  </dt>
  <dd>
    <p>Increase body window height.</p>
  </dd>
  <dt>
    <p><strong>&lt;</strong></p>
  </dt>
  <dd>
    <p>Decrease body window height.</p>
  </dd>
  <dt>
    <p><strong>,</strong></p>
  </dt>
  <dd>
    <p>Scroll body window up.</p>
  </dd>
  <dt>
    <p><strong>b</strong></p>
  </dt>
  <dd>
    <p>Show/hide body window.</p>
  </dd>
  <dt>
    <p><strong>.</strong></p>
  </dt>
  <dd>
    <p>Scroll body window down.</p>
  </dd>
  <dt>
    <p><strong>B</strong></p>
  </dt>
  <dd>
    <p>Toggle body automatic show on/off.</p>
  </dd>
  <dt>
    <p><strong>s</strong></p>
  </dt>
  <dd>
    <p>Show body in a new window.</p>
  </dd>
  <dt>
    <p><strong>S</strong></p>
  </dt>
  <dd>
    <p>Sort queue by from/to/subject. Keep in mind that it may slow down interface, since the full queue must be read in order to be sorted.</p>
  </dd>
  <dt>
    <p><strong>ENTER</strong></p>
  </dt>
  <dd>
    <p>Show body of current message (if automatic show is off): if body window is not enabled, it behaves like 's' key.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Stefano Rivoir &lt;s.rivoir@gts.it&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>pfqueue was originally thought as a dedicated Postfix tool, and actually it has been so up to version 0.3.8; since version 0.4.0 it has been extended to use pluggable libraries in order to support virtually any kind of MTA.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pethtool.8.html"><span aria-hidden="true">&larr;</span> pethtool.8: Display or change ethernet card settings</a></li>
   <li class="next"><a href="pgpverify.8.html">pgpverify.8: Cryptographically verify usenet control messages <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
