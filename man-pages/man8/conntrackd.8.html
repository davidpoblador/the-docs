<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>conntrackd: Netfilter connection tracking user-space daemon</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Netfilter connection tracking user-space daemon">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="conntrackd (8) manual">
  <meta name="twitter:description" content="Netfilter connection tracking user-space daemon">
  <meta name="twitter:image" content="https://www.carta.tech/images/conntrackd-conntrackd-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/conntrackd.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="conntrackd (8) manual" />
  <meta property="og:description" content="Netfilter connection tracking user-space daemon" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/conntrackd-conntrackd-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">conntrackd<small> (8)</small></h1>
        <p class="lead">Netfilter connection tracking user-space daemon</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/conntrackd.8.html">
      <span itemprop="name">conntrackd: Netfilter connection tracking user-space daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/conntrackd/">
      <span itemprop="name">conntrackd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/conntrackd.8.html">
      <span itemprop="name">conntrackd: Netfilter connection tracking user-space daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>conntrackd [options]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>conntrackd</strong> is the user-space daemon for the netfilter connection tracking system. This daemon synchronizes connection tracking states between several replica firewalls. Thus, <strong>conntrackd</strong> can be used to deploy highly available stateful firewalls. The daemon supports Primary-Backup and Multiprimary setups. The daemon can also be used as statistics collector.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The options recognized by <strong>conntrackd</strong> can be divided into several different groups.</p><h3>MODES</h3>
<p>These options specify the particular operation mode in which conntrackd runs. Only one of them can be specified at any given time.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-d </strong></p>
  </dt>
  <dd>
    <p>Run conntrackd in daemon mode.</p>
  </dd>

</dl>

<h3>CLIENT COMMANDS</h3>
<p><strong>conntrackd</strong> can be used in client mode to request several information and operations to a running daemon</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-i </strong><em>[ct|expect]"</em></p>
  </dt>
  <dd>
    <p>Dump the internal cache, i.e. show local states</p>
  </dd>
  <dt>
    <p><strong>-e </strong><em>[ct|expect]"</em></p>
  </dt>
  <dd>
    <p>Dump the external cache, i.e. show foreign states</p>
  </dd>
  <dt>
    <p><strong>-x </strong></p>
  </dt>
  <dd>
    <p>Display output in XML format. This option is only valid in combination with "-i" and "-e" parameters.</p>
  </dd>
  <dt>
    <p><strong>-f </strong><em>[|internal|external]</em></p>
  </dt>
  <dd>
    <p>Flush the internal and/or external cache</p>
  </dd>
  <dt>
    <p><strong>-F [ct|expect]</strong></p>
  </dt>
  <dd>
    <p>Flush the kernel conntrack table (if you use a Linux kernel &gt;= 2.6.29, this option will not flush your internal and external cache).</p>
  </dd>
  <dt>
    <p><strong>-c </strong></p>
  </dt>
  <dd>
    <p>Commit external cache to conntrack table.</p>
  </dd>
  <dt>
    <p><strong>-B </strong></p>
  </dt>
  <dd>
    <p>Force a bulk send to other replica firewalls. With this command, you will ask conntrackd to send the state-entries that it owns to others.</p>
  </dd>
  <dt>
    <p><strong>-n </strong></p>
  </dt>
  <dd>
    <p>Request resync with other node (only FT-FW and NOTRACK modes).</p>
  </dd>
  <dt>
    <p><strong>-k </strong></p>
  </dt>
  <dd>
    <p>Kill the daemon</p>
  </dd>
  <dt>
    <p><strong>-s </strong><em>[|network|cache|runtime|link|rsqueue|process|queue|ct|expect]</em></p>
  </dt>
  <dd>
    <p>Dump statistics. If no parameter is passed, it displays the general statistics. If "network" is passed as parameter it displays the networking statistics. If "cache" is passed as parameter, it shows the extended cache statistics. If "runtime" is passed as parameter, it shows the run-time statistics. If "process" is passed as parameter, it shows existing child processes (if any). If "queue" is passed as parameter, it shows queue statistics. If "ct" is passed, it displays the general statistics. If "expect" is passed as parameter, it shows expectation statistics.</p>
  </dd>
  <dt>
    <p><strong>-R </strong><em>[ct|expect]</em></p>
  </dt>
  <dd>
    <p>Force a resync against the kernel connection tracking table</p>
  </dd>
  <dt>
    <p><strong>-t </strong></p>
  </dt>
  <dd>
    <p>Reset the in-kernel timers (See PurgeTimeout clause)</p>
  </dd>
  <dt>
    <p><strong>-v </strong></p>
  </dt>
  <dd>
    <p>Display version information.</p>
  </dd>
  <dt>
    <p><strong>-h </strong></p>
  </dt>
  <dd>
    <p>Display help information.</p>
  </dd>
  <dt>
    <p><strong>-C config file</strong></p>
  </dt>
  <dd>
    <p>Configuration file path.</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>The exit code is 0 for correct function. Errors cause an exit code of 1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following example are illustrative, for a real use in a firewall fail-over, check the primary-backup.sh script that comes with the sources.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>conntrackd -d</strong></p>
  </dt>
  <dd>
    <p>Runs conntrackd in daemon and synchronization mode</p>
  </dd>
  <dt>
    <p><strong>conntrackd -i</strong></p>
  </dt>
  <dd>
    <p>Dumps the states held in the internal cache, i.e. those handled by this firewall</p>
  </dd>
  <dt>
    <p><strong>conntrackd -e</strong></p>
  </dt>
  <dd>
    <p>Dumps the states held in the external cache, i.e. those handled by other replica firewalls</p>
  </dd>
  <dt>
    <p><strong>conntrackd -c</strong></p>
  </dt>
  <dd>
    <p>Commits the external cache into the kernel connection tracking system. This is used to inject the state so that the connections can be recovered during the failover.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPENDENCIES</h2>
        <div class="sectioncontent">
<p>This daemon requires a Linux kernel version &gt;= 2.6.18. TCP window tracking support requires &gt;= 2.6.22, otherwise you have to disable it. Helpers are fully supported since &gt;= 2.6.25, however, if you use any previous version, depending on the protocol helper and your setup (e.g. if you setup performs NAT sequence adjustments or not), your help connection may be successfully recovered.</p>
<dl class='dl-vertical'>
  <dt>
    <p>There are several unsupported stateful iptables matches such as recent, connbytes and the quota matches which gather internal information to operate. Since that information does not belong to the domain of the connection tracking system, connections affected by those matches may not be fully recovered during the takeover.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p>The daemon requires a Linux kernel version &gt;= 2.6.26 to support kernel-space event filtering. Otherwise, all the event filtering is done in userspace with the corresponding extra overhead. If you are not using the Filter clause in the configuration file, ignore this notice.</p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INCOMPATIBILITIES</h2>
        <div class="sectioncontent">
<p>During the 0.9.9 development, some important changes in the replication message format were introduced. Therefore, conntrackd &gt;= 0.9.9 will not work appropriately with conntrackd &lt;= 0.9.8. This should not be a problem if you use the same conntrackd version in all the firewall replica nodes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO conntrackd&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/conntrack.8.html"><strong>conntrack</strong>(8)</a>,<a href="../man8/iptables.8.html"><strong>iptables</strong>(8)</a></p><p>See <strong>http://conntrack-tools.netfilter.org</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Please, report them to netfilter-devel@vger.kernel.org or file a bug in Netfilter's bugzilla (https://bugzilla.netfilter.org).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Pablo Neira Ayuso wrote and maintains the conntrackd tool</p>
<dl class='dl-vertical'>
  <dt>
    <p>Please send bug reports to &lt;netfilter-devel@lists.netfilter.org&gt;. Subscription is required.</p>
  </dt>
  <dd>
    
  </dd>

</dl>
<p>Man page written by Pablo Neira Ayuso &lt;pablo@netfilter.org&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="conntrack.8.html"><span aria-hidden="true">&larr;</span> conntrack.8: Command line interface for netfilter connection tracking</a></li>
   <li class="next"><a href="consolehelper.8.html">consolehelper.8: A wrapper that helps console users run system programs <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
