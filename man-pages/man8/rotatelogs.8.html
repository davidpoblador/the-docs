<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rotatelogs: Piped logging program to rotate apache logs</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Piped logging program to rotate apache logs">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="rotatelogs (8) manual">
  <meta name="twitter:description" content="Piped logging program to rotate apache logs">
  <meta name="twitter:image" content="https://www.carta.tech/images/apache2-utils-rotatelogs-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/rotatelogs.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="rotatelogs (8) manual" />
  <meta property="og:description" content="Piped logging program to rotate apache logs" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/apache2-utils-rotatelogs-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">rotatelogs<small> (8)</small></h1>
        <p class="lead">Piped logging program to rotate apache logs</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/rotatelogs.8.html">
      <span itemprop="name">rotatelogs: Piped logging program to rotate apache logs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/apache2-utils/">
      <span itemprop="name">apache2-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/rotatelogs.8.html">
      <span itemprop="name">rotatelogs: Piped logging program to rotate apache logs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>rotatelogs</strong> [ -<strong>l</strong> ] [ -<strong>L</strong> <em>linkname</em> ] [ -<strong>p</strong> <em>program</em> ] [ -<strong>f</strong> ] [ -<strong>v</strong> ] [ -<strong>e</strong> ] [ -<strong>c</strong> ] [ -<strong>n</strong> <em>number-of-files</em> ] <em>logfile</em> <em>rotationtime</em>|<em>filesize</em>(B|K|M|G) [ <em>offset</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUMMARY</h2>
        <div class="sectioncontent">
<p>rotatelogs is a simple program for use in conjunction with Apache's piped logfile feature. It supports rotation based on a time interval or maximum size of the log.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>-l</p>
  </dt>
  <dd>
    <p>Causes the use of local time rather than GMT as the base for the interval or for <a href="../man3/strftime.3.html"><strong>strftime</strong>(3)</a> formatting with size-based rotation.</p>
  </dd>
  <dt>
    <p>-L <em>linkname</em></p>
  </dt>
  <dd>
    <p>Causes a hard link to be made from the current logfile to the specified link name. This can be used to watch the log continuously across rotations using a command like tail -F linkname.</p>
  </dd>
  <dt>
    <p>-p <em>program</em></p>
  </dt>
  <dd>
    <p>If given, rotatelogs will execute the specified program every time a new log file is opened. The filename of the newly opened file is passed as the first argument to the program. If executing after a rotation, the old log file is passed as the second argument. rotatelogs does not wait for the specified program to terminate before continuing to operate, and will not log any error code returned on termination. The spawned program uses the same stdin, stdout, and stderr as rotatelogs itself, and also inherits the environment.</p>
  </dd>
  <dt>
    <p>-f</p>
  </dt>
  <dd>
    <p>Causes the logfile to be opened immediately, as soon as rotatelogs starts, instead of waiting for the first logfile entry to be read (for non-busy sites, there may be a substantial delay between when the server is started and when the first request is handled, meaning that the associated logfile does not "exist" until then, which causes problems from some automated logging tools)</p>
  </dd>
  <dt>
    <p>-t</p>
  </dt>
  <dd>
    <p>Causes the logfile to be truncated instead of rotated. This is useful when a log is processed in real time by a command like tail, and there is no need for archived data. No suffix will be added to the filename, however format strings containing '%' characters will be respected.</p>
  </dd>
  <dt>
    <p>-v</p>
  </dt>
  <dd>
    <p>Produce verbose output on STDERR. The output contains the result of the configuration parsing, and all file open and close actions.</p>
  </dd>
  <dt>
    <p>-e</p>
  </dt>
  <dd>
    <p>Echo logs through to stdout. Useful when logs need to be further processed in real time by a further tool in the chain.</p>
  </dd>
  <dt>
    <p>-c</p>
  </dt>
  <dd>
    <p>Create log file for each interval, even if empty.</p>
  </dd>
  <dt>
    <p>-n <em>number-of-files</em></p>
  </dt>
  <dd>
    <p>Use a circular list of filenames without timestamps. With -n 3, the series of log files opened would be "logfile", "logfile.1", "logfile.2", then overwriting "logfile". Available in 2.4.5 and later.</p>
  </dd>
  <dt>
    <p><em>logfile</em></p>
  </dt>
  <dd>
    
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><em>rotationtime</em></p>
  </dt>
  <dd>
    <p>The time between log file rotations in seconds. The rotation occurs at the beginning of this interval. For example, if the rotation time is 3600, the log file will be rotated at the beginning of every hour; if the rotation time is 86400, the log file will be rotated every night at midnight. (If no data is logged during an interval, no file will be created.)</p>
  </dd>
  <dt>
    <p><em>filesize</em>(B|K|M|G)</p>
  </dt>
  <dd>
    <p>The maximum file size in followed by exactly one of the letters B (Bytes), K (KBytes), M (MBytes) or G (GBytes). .PP When time and size are specified, the size must be given after the time. Rotation will occur whenever either time or size limits are reached.</p>
  </dd>
  <dt>
    <p><em>offset</em></p>
  </dt>
  <dd>
    <p>The number of minutes offset from UTC. If omitted, zero is assumed and UTC is used. For example, to use local time in the zone UTC -5 hours, specify a value of -300 for this argument. In most cases, -l should be used instead of specifying an offset.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<pre>
     CustomLog "|bin/rotatelogs /var/log/logfile 86400" common

</pre>
<p>This creates the files /var/log/logfile.nnnn where nnnn is the system time at which the log nominally starts (this time will always be a multiple of the rotation time, so you can synchronize cron scripts with it). At the end of each rotation time (here after 24 hours) a new log is started.</p>
<pre>
     CustomLog "|bin/rotatelogs -l /var/log/logfile.%Y.%m.%d 86400" common

</pre>
<p>This creates the files /var/log/logfile.yyyy.mm.dd where yyyy is the year, mm is the month, and dd is the day of the month. Logging will switch to a new file every day at midnight, local time.</p>
<pre>
     CustomLog "|bin/rotatelogs /var/log/logfile 5M" common

</pre>
<p>This configuration will rotate the logfile whenever it reaches a size of 5 megabytes.</p>
<pre>
     ErrorLog "|bin/rotatelogs /var/log/errorlog.%Y-%m-%d-%H_%M_%S 5M"

</pre>
<p>This configuration will rotate the error logfile whenever it reaches a size of 5 megabytes, and the suffix to the logfile name will be created of the form errorlog.YYYY-mm-dd-HH_MM_SS.</p>
<pre>
     CustomLog "|bin/rotatelogs -t /var/log/logfile 86400" common

</pre>
<p>This creates the file /var/log/logfile, truncating the file at startup and then truncating the file once per day. It is expected in this scenario that a separate process (such as tail) would process the file in real time.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PORTABILITY</h2>
        <div class="sectioncontent">
<p>The following logfile format string substitutions should be supported by all <a href="../man3/strftime.3.html"><strong>strftime</strong>(3)</a> implementations, see the <a href="../man3/strftime.3.html"><strong>strftime</strong>(3)</a> man page for library-specific extensions.</p>
<dl class='dl-vertical'>
  <dt>
    &#92;$1
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="rngd.8.html"><span aria-hidden="true">&larr;</span> rngd.8: Check and feed random data from an entropy source (e.g. hardware rng device) to an entropy sink (e.g. kernel entropy pool)</a></li>
   <li class="next"><a href="rotctld.8.html">rotctld.8: Hamlib tcp rotator control daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
