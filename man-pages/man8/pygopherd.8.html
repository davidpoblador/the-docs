<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pygopherd: Multiprotocol information server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Multiprotocol information server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pygopherd (8) manual">
  <meta name="twitter:description" content="Multiprotocol information server">
  <meta name="twitter:image" content="https://www.carta.tech/images/pygopherd-pygopherd-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pygopherd.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pygopherd (8) manual" />
  <meta property="og:description" content="Multiprotocol information server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pygopherd-pygopherd-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pygopherd<small> (8)</small></h1>
        <p class="lead">Multiprotocol information server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pygopherd.8.html">
      <span itemprop="name">pygopherd: Multiprotocol information server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pygopherd/">
      <span itemprop="name">pygopherd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pygopherd.8.html">
      <span itemprop="name">pygopherd: Multiprotocol information server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pygopherd</strong> [ <strong></strong><em>configfile</em><strong></strong> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Welcome to <strong>PyGopherd</strong>.  In a nutshell, <strong>PyGopherd</strong> is a modern dynamic multi-protocol hierarchical information server with a pluggable modularized extension system, full flexible caching, virtual files and folders, and autodetection of file types -- all with support for standardized yet extensible per-document metadata. Whew! Read on for information on this what all these buzzwords mean.</p><h3>FEATURES</h3>
<p>Here are some of <strong>PyGopherd</strong>'s features:</p>
<dl class='dl-vertical'>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Provides built-in support for multiple protocols: HTTP (Web), Gopher+, Gopher (RFC1436), Enhanced Gopher0, and WAP (mobile phones).  Protocols can be enabled or disabled as desired.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Provides protocol autodetection.  That is, <strong>PyGopherd</strong> can listen for all the above protocols <strong>on a single port</strong> and will automatically respond using the protocol it detects the client is using.  Practical effects of this are that you can, for instance, give out a single URL and have it viewable normally on desktop Web browsers and in WAP mode on mobile phones -- and appropriately in various Gopher browsers.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Metadata and site links can be entered in a variety of formats, including full UMN dotfile metadata formats as well as Bucktooth gophermap files.  Moreover, gophermap files are not limited to Gopher protocols, and can be used for all protocols.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Support for inter-protocol linking (linking from Gopher sites to web sites)</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Virtual folder system lets you serve up anything as if it were regular files and directories. PyGopherd comes with the following virtual folder systems built in:</p>
<dl class='dl-vertical'>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Can present any Unix MBOX, MMDF box, MH directory, Maildir directory, or Babyl mailbox as a virtual folder, the contents of which are the messages in the mailbox.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Can use a configurable separator to split a file into multiple parts, the first line of each becoming the name for the virtual folder.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Can peek inside a ZIP file and serve it up as first-class site citizens -- metadata can even be stored in the ZIP files.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Can serve up the contents of a dictd server as a filesystem.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Modular, extensible design: you can use PyGopherd's own PYG extension format, or UMN- or Bucktooth-style executables.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Runs on any platform supported by Python 2.2 or 2.3. This includes virtually every past and current flavor of Unix (Linux, *BSD, Solaris, SunOS), Windows, MacOS 9.x and X, and more.  Some features may not be available on non-Unix platforms.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Runs on any platform supported by Java 1.1 via the Jython Python implementation.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Tunable server types via configuration directive -- forking or threading.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Secure design with support for chrooted execution.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Feature-complete, full implementations of: Gopher0 (RFC1435), Gopher+, HTTP, and WAP.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Support for automatically finding the titles of HTML documents for presentation in a directory.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Versatile configuration file format is both extensible and nicely complementary of the module system.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Protocol-independant, handler-dependant caching.  This increases performance by letting handlers cache dynamically-generated information -- currently used by the directory handlers.  This can improve performance of directories by several orders of magnitude.  Because this is a handler cache only, all protococls share the single cache.  Since the processing time for the protocols is negligable, this works out very well.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Autosensing of MIME types and gopher0 item types.  Both are completely configurable.  MIME type detection is done using a standard mime.types file, and gopher0 types are calculated by using a configurable regexp-based MIME-to-gophertype map.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Heavy support of regular expressions in configuration.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>ProtocolMultiplexer and HandlerMultiplexer let you choose only those protocols and handlers that you wish your server to support and the order in which they are tried when a request comes in.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Full logging via syslog.</p>
  </dd>

</dl>

<h3>ABOUT GOPHER</h3>
<p><strong>PyGopherd</strong> started life as a server for the Gopher Internet protocol. With Gopher, you can mount a filesystem (viewing files and folders as if they were local), browse Gopherspace with a web browser, download files, and be interactive with searching.</p><p>But this is only part of the story. The world of Gopher is more expansive than this. There are two major gopher protocols: Gopher0 (also known as RFC1436) and Gopher+. Gopher0 is a small, simple, lightweight protocol that is very functional yet also extremely easy to implement. Gopher0 clients can be easily places in small embedded devices or in massive environments like a modern web browser.</p><p>Gopher+ is based on Gopher0 but extends it by providing document metadata such as file size and MIME type. Gopher+ allows all sorts of neat features, such as configurable metadata (serving up a bunch of photos? Add a Subject field to your metadata to let a customized photo browser display who is pictured) and multiple views of a file (let the user select to view your photos as PNG or JPEG).</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">QUICK START</h2>
        <div class="sectioncontent">
<p>If you have already installed <strong>PyGopherd</strong> system-wide, or your administrator has done that for you, your task for setting up <strong>PyGopherd</strong> for the first time is quite simple.  You just need to set up your configuration file, make your folder directory, and run it!</p><p>You can quickly set up your configuration file.  The distribution includes two files of interest: <em>conf/pygopherd.conf</em> and <em>conf/mime.types</em>.  Debian users will find the configuration file pre-installed in <em>/etc/pygopherd/pygopherd.conf</em> and the <em>mime.types</em> file provided by the system already.</p><p>Open up <em>pygopherd.conf</em> in your editor and adjust to suit.  The file is heavily commented and you can refer to it for detailed information.  Some settings to take a look at include: <em>detach</em>, <em>pidfile</em>, <em>port</em>, <em>usechroot</em>, <em>setuid</em>, <em>setgid</em>, and <em>root</em>. These may or may not work at their defaults for you.  The remaining ones should be fine for a basic setup.</p><p>Invoke <strong>PyGopherd</strong> with <strong>pygopherd</strong> path/to/configfile (or <strong>/etc/init.d/pygopherd start</strong> on Debian). Place some files in the location specified by the <em>root</em> directive in the config file and you're ready to run!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSTALLATION</h2>
        <div class="sectioncontent">
<p>If  you  are  reading this document via the "man" command, it is likely that you have no installation tasks to perform; your system administra- tor  has already installed <strong>PyGopherd</strong>.  If you need to install it yourself, you have three options: a system-wide installation with Debian, system-wide installation  with  other systems, and a single-user installation.  You can    download    the    latest    version    of    PyGopherd from  &lt;URL:http://quux.org/devel/gopher/pygopherd/&gt;</p><h3>DEBIAN SYSTEM-WIDE INSTALLATION</h3>
<p>If you are tracking Debian unstable, you may install <strong>PyGopherd</strong> by simply running this command as root:</p><p><strong>apt-get install pygopherd</strong></p><p>If you are not tracking Debian unstable, download the .deb package from the <strong>PyGopherd</strong> website and then run <strong>dpkg -i</strong> to install the downloaded package.  Then, skip to the configuration section below. You will use <strong>/etc/init.d/pygopherd start</strong> to start the program.</p>
<h3>OTHER SYSTEM-WIDE INSTALLATION</h3>
<p>Download the tar.gz version of the package from the website.  Make sure you have Python 2.2 or above installed; if now, download and install it from  &lt;URL:http://www.python.org/&gt;.  Then run these commands:</p>
<pre>
	  <strong>tar -zxvf pygopherd-x.y.z.tar.gz</strong>
	  <strong>cd pygopherd-x.y.z</strong>
	  <strong>python2.2 setup.py</strong>

</pre>
<p>Some systems will use <strong>python</strong> or <strong>python2.3</strong> in place of <strong>python2.2</strong>.</p><p>Next, proceed to configuration.  Make sure that the <em>/etc/pygopherd/pygopherd.conf</em> file names valid users (<em>setuid</em> and <em>setgid</em> options) and a valid document root (<em>root</em> option).</p><p>You will type <em>pygopherd</em> to invoke the program.</p>
<h3>SINGLE-ACCOUNT INSTALLATION</h3>
<p>Download the tar.gz version of the package from the website.  Make sure you have Python 2.2 or above installed; if now, download and install it from  &lt;URL:http://www.python.org/&gt;.  Then run these commands:</p>
<pre>
	  <strong>tar -zxvf pygopherd-z.y.z.tar.gz</strong>
	  <strong>cd pygopherd-x.y.z</strong>

</pre>
<p>Modify <em>conf/pygopherd.conf</em> as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Set <em>usechroot = no</em></p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Comment out (add a # sign to the start of the line) the <em>pidfile</em>, <em>setuid</em>, and <em>setgid</em> lines.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Set <em>root</em> to osomething appropriate.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Set <em>port</em> to a number greater than 1024.</p>
  </dd>

</dl>
<p>When you want to run <strong>PyGopherd</strong>, you will issue the <strong>cd</strong> command as above and then type <strong>PYTHONPATH=. bin/pygopherd</strong>.  There is no installation step necessary.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p><strong>PyGopherd</strong> is regulated by a configuratoin file normally stored in <em>/etc/pygopherd/pygopherd.conf</em>. You can specify an alternate configuration file on the command line.  The <strong>PyGopherd</strong> distribution ships with a sample <em>pygopherd.conf</em> file that thoroughly documents the configuration file options and settings.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>All <strong>PyGopherd</strong> configuratoin is done via the configuration file.  Therefore, the program has only one command-line option:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><em>configfile</em><strong></strong></p>
  </dt>
  <dd>
    <p>This option argument specifies the location of the configuration file that <strong>PyGopherd</strong> is to use.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HANDLERS</h2>
        <div class="sectioncontent">
<p><strong>PyGopherd</strong> defines several handlers which are responsible for finding data on your server and presenting it to the user.  The handlers are used to generate things like links to other documents and directory listings.  They are also responsible for serving up regular files and even virtual folders.</p><p>Handlers are specified with the <em>handlers</em> option in <em>pygopherd.conf</em>.  This option is a list of handlers to use.  For each request that arrives, <strong>PyGopherd</strong> will ask each handler in turn whether or not it can handle the request, and will handle the request according to the first handler that is capable of doing so. If no handlers can handle the request, a file not found error is generated.  See the example configuration file for an example.</p><p>The remaining parts of this section describe the different handlers that ship with <strong>PyGopherd</strong>.  Please note that some versions of this manual may show the handlers in all caps; however, their names are not all caps and are case-sensitive.</p><h3>DIR.DIRHANDLER</h3>
<p>This handler is a basic one that generates menus based on the contents of a directory.  It is used for directories that contain neither a <em>gophermap</em> file nor UMN-style links files, or situations where you have no need for either of those.</p><p>This handler simply reads the contents of your on-disk directory, determines the appropriate types of each file, and sends the result to the client.  The descriptions of each item are usually set to the filename, but the <em>html.HTMLFileTitleHandler</em> may override that.</p>
<h3>GOPHERMAP.BUCKGOPHERMAPHANDLER</h3>
<p>This handler is used to generate directory listings based on <em>gophermap</em> files.  It will not read the directory on-disk, instead serving content from the <em>gophermap</em> file only. Gophermaps are useful if you want to present a directory in which the files do not frequently change and there is general information to present.  Overall, if you only wish to present information particular to certain files, you should consider using the abstract feature of UMN.UMNDirHandler.</p><p>The <em>gophermap</em> files contain two types of lines, which are described here using the same convention normally used for command line arguments.  In this section, the symbol &#92;t will be used to indicate a tab character, Control-I.</p><p> <strong></strong><em>full line of informational</em> text<strong></strong></p><p> <strong></strong><em>gophertypeDESCRIPTION</em><strong></strong> [ <strong>&#92;t</strong><em>selector</em><strong> [ &#92;t</strong><em>host</em><strong> [ &#92;t</strong><em>port</em><strong> ] ]</strong> ]</p><p>Note: spaces shown above are for clarity only and should not actually be present in your file.</p><p>The informational text must not contain any tab characters, but may contain spaces.  Informational text will be rendered with gopher type <em>i</em>, which will cause it to be displayed on a client's screen at its particular position in the file.</p><p>The second type of line represents a link to a file or directory.  It begins with a single-character Gopher type (see Gopher Item Types below) followed immediately by a description and a tab character.  There is no space or other separator between the gopher type and the description.  The description may contain spaces but not tabs.</p><p>The remaining arguments are optional, but only to the extent that arguments may be omitted only if all arguments after them are also omitted.  These arguments are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><em>selector</em><strong></strong></p>
  </dt>
  <dd>
    <p>The <em>selector</em> is the name of the file on the server.  If it begins with a slash, it is an absolute path; otherwise, it is interpreted relative to the directory that the gophermap file is in.  If no selector is specified, the description is also used as the selector.</p>
  </dd>
  <dt>
    <p><strong></strong><em>host</em><strong></strong></p>
  </dt>
  <dd>
    <p>The <em>host</em> specifies the host on which this resource is located.  If not specified, defaults to the current server.</p>
  </dd>
  <dt>
    <p><strong></strong><em>port</em><strong></strong></p>
  </dt>
  <dd>
    <p>The <em>port</em> specifies the port on which the resource is located.  If not specified, defaults to the port the current server is listening on.</p>
  </dd>

</dl>
<p>An example of a gophermap to help illustrate the concept is included with the <strong>PyGopherd</strong> distribution in the file <em>examples/gophermap</em>.</p>
<h3>FILE.COMPRESSEDFILEHANDLER</h3>
<p>In order to save space, you might want to store documents on-disk in a compressed format.  But then clients would ordinarily have to decompress the files themselves.  It would be nice to have the server automatically decompress the files on the fly, sending that result to the client.  That's where <em>file.CompressedFileHandler</em> comes in.</p><p>This handler will take compressed files, pipe them through your chosen decompression program, and send the result directly to clients -- completely transparently.</p><p>To use this handler, set the <em>decompressors</em> option in the configuration file.  This option defines a mapping from MIME encodings (as defined with the <em>encoding</em> option) to decompression programs.  Files that are not encoded, or which have an encoding that does not occur in the <em>decompressors</em> map, will not be decompressed by this handler.</p><p>Please see the sample configuration file for more examples and details about the configuration of this handler.</p>
<h3>FILE.FILEHANDLER</h3>
<p>The <em>file.FileHandler</em> is just that -- its duty is to serve up regular files to clients.</p>
<h3>HTML.HTMLFILETITLEHANDLER</h3>
<p>This handler is used when generating directories and will set the description of HTML files to the HTML title defined in them rather than let it be the default filename.  Other than that, it has no effect.  UMN gopherd implements a similar policy.</p>
<h3>MBOX HANDLERS</h3>
<p>There are four mailbox handlers:</p>
<dl class='dl-vertical'>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>mbox.MaildirFolderHandler</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>mbox.MaildirMessageHandler</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>mbox.MBoxMessageHandler</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>mbox.MBoxFolderHandler</p>
  </dd>

</dl>
<p>These four handlers provide a unique "virtual folder" service.  They allow you to present mailboxes as if they were folders, the items of the folders being the messages in the mailbox, organized by subject.  This is useful for presenting mail archives or just making e-mail accessible in a nice and easy fashion.</p><p>To use these handlers, all you have to do is enable them in your <em>handlers</em> section.  They will automatically detect requests for mailboxes and handle them appropriately.</p><p>The different handlers are for traditional Unix mbox mailboxes (all messages in a single file) and new qmail-stype Maildir mailboxes.  You can enable only the two handlers for the specific mailbox type that you use, if desired.</p>
<h3>PYG.PYGHANDLER</h3>
<p>PYG (short for PYGopherd) is a mechanism that provides a tremendous amount of flexibility.  Rather than just letting you execute a script like other Gopher or HTTP servers, PYGs are actually loaded up into PyGopherd and become fully-capable first-class virtual handlers.  Yet they need not be known ahead of time, and are loaded dynamically.</p><p>With a PYG handler, you can generate gopher directories, handle searches, generate files, and more on the fly. You can create entire virtual directory trees (for instance, to interface with NNTP servers or with DICT servers), and access them all using the standard Gopher protocol.  All of this without having to modify even one line of <strong>PyGopherd</strong> code.</p><p>If enabled, the <em>pyg.PYGHandler</em> will look for files with the extension .pyg that are marked executable.  If found, they will be loaded and run as PYGs.</p><p>Please note: this module provides the capability to execute arbitrary code.  Please consider the security ramifications of that before enabling it.</p><p>See the <em>virtual.Virtual</em> handler for more information about passing data to your scripts at runtime.</p><p>At present, documentation on writing PYGs is not provides, but you may find examples in the <em>pygfarm</em> directory included with the <strong>PyGopherd</strong> distribution.</p>
<h3>SCRIPTEXEC.EXECHANDLER</h3>
<p>This handler implements "old-style" script execution; that is, executing arbitrary programs and piping the result to the client.  It is, for the most part, compatible with both scripts written for UMN gopherd and the Bucktooth gopher server.  If enabled, it will execute any file that is marked executable in the filesystem.  It will normally list scripts as returning plain text, but you may create a custom link to the script that defines it as returning whatever kind of file you desire.  Unlike PYGs, this type must be known in advance.</p><p>The <em>scriptexec.ExecHandler</em> will set environment variables for your scripts to use.  They are as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>SERVER_NAME</strong></p>
  </dt>
  <dd>
    <p>The name of this server as defined in the configuration file or detected from the operating system.</p>
  </dd>
  <dt>
    <p><strong>SERVER_PORT</strong></p>
  </dt>
  <dd>
    <p>The port this server is listening on.</p>
  </dd>
  <dt>
    <p><strong>REMOTE_ADDR</strong></p>
  </dt>
  <dd>
    <p>The IP address of the client.</p>
  </dd>
  <dt>
    <p><strong>REMOTE_PORT</strong></p>
  </dt>
  <dd>
    <p>The port number of the client.</p>
  </dd>
  <dt>
    <p><strong>REMOTE_HOST</strong></p>
  </dt>
  <dd>
    <p>The same value as <em>REMOTE_ADDR</em></p>
  </dd>
  <dt>
    <p><strong>SELECTOR</strong></p>
  </dt>
  <dd>
    <p>The file that was requested; that is, the relative path to this script.  If the selector included additional parameters after a |, they will be included in this string as well.</p>
  </dd>
  <dt>
    <p><strong>REQUEST</strong></p>
  </dt>
  <dd>
    <p>The "base" part of the selector; that is, the part leading up to the |.</p>
  </dd>
  <dt>
    <p><strong>SEARCHREQUEST</strong></p>
  </dt>
  <dd>
    <p>Included only if the client specified search data, this is used if the client is searching for something.</p>
  </dd>

</dl>
<p>See the <em>virtual.Virtual</em> handler for more information about passing data to your scripts at runtime.</p><p>Please note: this module provides the capability to execute arbitrary code.  Please consider the security ramifications of that before enabling it.</p>
<h3>UMN.UMNDIRHANDLER</h3>
<p>This is one of the most powerful workhorse handlers in <strong>PyGopherd</strong>.  It is designed to emulate most of the ways in which the UMN gopherd distribution generates directories, even going so far as to be bug-compatible in some cases.  Generating directories with this handler is often the best general-purpose way to make nice directories in gopherspace.</p><p>The remainder of the description of the <em>UMN.UMNDirHandler</em>, except for the Abstracts and Info section, is lifted directly from the original UMN gopherd documentation, with light editing, because this handler implements it so exactly that there was no point in rewriting all that documentation :-)</p>
<h3>LINKS</h3>
<p>You can override the default view of a directory as generated by <em>dir.DirHandler</em> by creating what are known as <strong>Links</strong> in the data tree.</p><p>The ability to make links to other hosts is how gopher distributes itself among multiple hosts.  There are two different ways to make a link.  The first and simplest is to create a link file that contains the data needed by the server.  By default all files in the gopher data directory starting with a period are taken to be link files.  A link file can contain multiple links.  To define a link you need to put five lines in a link file that define the needed characteristics for the document.  Here is an example of a link.</p>
<pre>
Name=Cheese Ball Recipes
Numb=1
Type=1
Port=150
Path=1/Moo/Cheesy
Host=zippy.micro.umn.edu

</pre>
<p>The Name= line is what the user will see when cruising through the database.  In this case the name is "Cheese Ball Recipes".  The "Type=" defines what kind of document this object is.  For a list of all defined types, see Gopher Item Types below.  For Gopher+ and HTTP, a MIME type is also used, which is determined automatically based on the type you specify.</p><p>The "Path=" line contains the selector string that the client will use to retrieve the actual document.  The Numb= specifies that this entry should be presented first in the directory list (instead of being alphabetized). The "Numb=" line is optional.  If it is present it cannot be the last line of the link.  The "Port=" and "Host=" lines specify a fully qualified domain name (FQDN) and a port respectively.  You may substitute a plus '+' for these two parameters if you wish.  The server will insert the current hostname and the current port when it sees a plus in either of these two fields.</p><p>An easy way to retrieve links is to use the Curses Gopher Client.  By pressing '=' You can get information suitable for inclusion in a link file.</p>
<h3>OVERRIDING DEFAULTS</h3>
<p>The server looks for a directory called <em>.cap</em> when parsing a directory.  The server then checks to see if the <em>.cap</em> directory contains a file with the same name as the file it's parsing.  If this file exists then the server will open it for reading.  The server parses this file just like a link file.  However, instead of making a new object, the parameters inside the <em>.cap/</em> file are used to override any of the server supplied default values.</p><p>For instance, say you wanted to change the Title of a text file for gopher, but don't want to change the filename. You also don't want it alphabetized, instead you want it second in the directory listing.  You could make a set-aside file in the <em>.cap</em> directory with the same filename that contained the following lines:</p>
<pre>
Name=New Long Cool Name
Numb=2

</pre>
<p>An alternative to <em>.cap</em> files are extended link files.  They work just the same as the files described in Links above, but have a somewhat abbreviated format.  As an example, if the name of the file was <em>file-to-change</em>, then you could create a file called <em>.names</em> with the following contents:</p>
<pre>
Path=./file-to-change
Name=New Long Cool Name
Numb=2

</pre>

<h3>ADDING COOL LINKS</h3>
<p>One cool thing you can do with .Links is to add neato services to your gopher server.  Adding a link like this:</p>
<pre>
Name=Cool ftp directory
Type=h
Path=/URL:ftp://hostname/path/
Host=+
Port=+

Name=Cool web site
Type=h
Path=/URL:http://hostname/
Host=+
Port=+

</pre>
<p>Will allow you to link in any FTP or Web site to your gopher.  (See url.URLHandler for more details.)</p><p>You can easily add a finger site to your gopher server thusly:</p>
<pre>
Name=Finger information
Type=0
Path=lindner
Host=mudhoney.micro.umn.edu
Port=79

</pre>

<h3>HIDING AN ENTRY</h3>
<p>This kind of trick may be necessary in some cases, and thus for object "fred", the overriding .names file entry would be:</p>
<pre>
 Type=X
 Path=./fred

</pre>
<p>by overriding default type to be "X".  This kind of hideouts may be usefull, when for some reason there are symlinks (or whatever) in the directory at which <strong>PyGopherd</strong> looks at, and those entries are not desired to be shown at all.</p>
<h3>ABSTRACTS AND INFO</h3>
<p>Many modern gopher server maintainers like to intersperse gopher directory listings with other information -- often, additional information about the contents of files in the directory.  The gophermap system provides one way to do that, and abstracts used with UMN gopher directories provides another.</p><p>Subject to the <em>abstract_headers</em> and <em>abstract_entries</em> configuration file options, this feature allows you to define that extra information.  You can do that by simply creating a file named <em>filename.abstract</em> right alongside the regular file in your directory.  The file will be interpreted as the abstract.  For a directory, create a file named <em>.abstract</em> in the directory.  Simple as that!</p>
<h3>URL.HTMLURLHANDLER</h3>
<p><strong>PyGopherd</strong> provides ways for you to link to pages outside Gopherspace -- that is, web pages, FTP sites, and the like. This is accomplished according to the Links to URL &lt;URL:http://lists.complete.org/gopher@complete.org/2002/02/msg00033.html.gz&gt; specification (see Conforming To below for details).  In order to link to a URL (EXCEPT gopher URLs) from a menu, you create a link of type h (regardless of the actual type of the resource that you are linking to) in your <em>gophermap</em> or <em>.Links</em> file that looks like this:</p>
<pre>
/URL:http://www.complete.org/

</pre>
<p>Modern Gopher clients that follow the Links to URL specification will automatically follow that link when you select it.  The rest need some help, and that's where this handler comes in.</p><p>For Gopher clients that do not follow the Links to URL specification, the <em>url.HTMLURLHandler</em> will automatically generate an HTML document for them on the fly.  This document includes a refresh code that will send them to the proper page.  You should not disable this handler.</p>
<h3>URL.URLTYPEREWRITER</h3>
<p>Some people wish to serve HTML documents from their Gopher server.  One problem with that is that links in Gopherspace include an extra type character at the beginning, whereas links in HTTP do not.  This handler will remove the extra type character from HTTP requests that come in, allowing a single relative-to-root link to work for both.</p>
<h3>VIRTUAL.VIRTUAL</h3>
<p>This handler is not intended to ever be used directly, but is used by many other handlers such as the mbox support, PYG handlers, and others.  It is used to generate virtual entries in the directory hierarchy -- that is, entries that look normal to a client, but do not actually correspond to a file on disk.</p><p>One special feature of the <em>virtual.Virtual</em> handler is that you can send information to it at runtime in a manner similar to a CGI script on the web.  You do this by adding a question mark after the regular selector, followed by any arbitrary data that you wish to have sent to the virtual request handler.</p>
<h3>ZIP.ZIPHANDLER</h3>
<p>Using zip.ZIPHandler, you can save space on your server by converting part or all of your site into a ZIP file. <strong>PyGopherd</strong> can use the contents of that ZIP file as the contents of your site -- completely transparently.</p><p>The ZIP file handler must be enabled in the configuration file for this to work.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GOPHER ITEM TYPES</h2>
        <div class="sectioncontent">
<p>When you construct links to files via <em>.Links</em> or <em>gophermap</em> files, or modify the <em>mapping</em> in the configuration file, you will need to know these.  Items bearing the "not implemented" text are not served up by <strong>PyGopherd</strong> as it ships, generally due to requirements of customized per-site software, but may be served up via PYG extension modules or other gopher servers.</p><p>This list was prepared based on RFC1436, the UMN <strong>gopherd</strong>(1) manpage, and best current practices.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>0</strong></p>
  </dt>
  <dd>
    <p>Plain text file</p>
  </dd>
  <dt>
    <p><strong>1</strong></p>
  </dt>
  <dd>
    <p>Directory</p>
  </dd>
  <dt>
    <p><strong>2</strong></p>
  </dt>
  <dd>
    <p>CSO phone book server (not implemented by <strong>PyGopherd</strong>)</p>
  </dd>
  <dt>
    <p><strong>3</strong></p>
  </dt>
  <dd>
    <p>Error condition; text that follows is plain text</p>
  </dd>
  <dt>
    <p><strong>4</strong></p>
  </dt>
  <dd>
    <p>Macintosh file, BinHex format</p>
  </dd>
  <dt>
    <p><strong>5</strong></p>
  </dt>
  <dd>
    <p>DOS binary archive (not implemented by <strong>PyGopherd</strong>; use type 9 instead)</p>
  </dd>
  <dt>
    <p><strong>6</strong></p>
  </dt>
  <dd>
    <p>uuencoded file; not directly generated by <strong>PyGopherd</strong> automatically, but can be linked to manually.  Most gopher clients will handle this better as type 1.</p>
  </dd>
  <dt>
    <p><strong>7</strong></p>
  </dt>
  <dd>
    <p>Search</p>
  </dd>
  <dt>
    <p><strong>8</strong></p>
  </dt>
  <dd>
    <p>Telnet link</p>
  </dd>
  <dt>
    <p><strong>9</strong></p>
  </dt>
  <dd>
    <p>Binary file</p>
  </dd>
  <dt>
    <p><strong>+</strong></p>
  </dt>
  <dd>
    <p>Redundant server (not implemented by <strong>PyGopherd</strong>)</p>
  </dd>
  <dt>
    <p><strong>c</strong></p>
  </dt>
  <dd>
    <p>Calendar (not implemented by <strong>PyGopherd</strong>)</p>
  </dd>
  <dt>
    <p><strong>e</strong></p>
  </dt>
  <dd>
    <p>Event (not implemented by <strong>PyGopherd</strong>)</p>
  </dd>
  <dt>
    <p><strong>g</strong></p>
  </dt>
  <dd>
    <p>GIF-format graphic</p>
  </dd>
  <dt>
    <p><strong>h</strong></p>
  </dt>
  <dd>
    <p>HTML file</p>
  </dd>
  <dt>
    <p><strong>I</strong></p>
  </dt>
  <dd>
    <p>Any kind of graphic file other than GIF</p>
  </dd>
  <dt>
    <p><strong>i</strong></p>
  </dt>
  <dd>
    <p>Informational text included in a directory that is displayed but does not link to any actual file.</p>
  </dd>
  <dt>
    <p><strong>M</strong></p>
  </dt>
  <dd>
    <p>MIME multipart/mixed file</p>
  </dd>
  <dt>
    <p><strong>s</strong></p>
  </dt>
  <dd>
    <p>Any kind of sound file</p>
  </dd>
  <dt>
    <p><strong>T</strong></p>
  </dt>
  <dd>
    <p>tn3270 link</p>
  </dd>
  <dt>
    <p><strong>X</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-</strong></p>
  </dt>
  <dd>
    <p>UMN-specific -- signifies that this entry should not be displayed in a directory entry, but may be accessed via a direct link.  This value is never transmitted in any Gopher protocol.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>The Internet Gopher Protocol as specified in RFC1436</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>The Gopher+ upward-compatible enhancements to the Internet Gopher Protocol from the University of Minnesota as laid out at  &lt;URL:gopher://gopher.quux.org/0/Archives/mirrors/boombox.micro.umn.edu/pub/gopher/gopher_protocol/Gopher+/Gopher+.txt&gt;.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>The gophermap file format as originally implemented in the Bucktooth gopher server and described at  &lt;URL:gopher://gopher.floodgap.com/0/buck/dbrowse%3Ffaquse%201&gt;.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>The Links to URL specification as laid out by John Goerzen at  &lt;URL:gopher://gopher.quux.org/0/Archives/Mailing%20Lists/gopher/gopher.2002-02%3f/MBOX-MESSAGE/34&gt;.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>The UMN format for specifying object attributes and links with .cap, .Links, .abstract, and similar files as specified elsewhere in this document and implemented by UMN gopherd.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>The PYG format for extensible Python gopher objects as created for <strong>PyGopherd</strong>.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Hypertext Transfer Protocol HTTP/1.0 as specified in RFC1945</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Hypertext Markup Language (HTML) 3.2 and 4.0 Transitional as specified in RFC1866 and RFC2854.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Maildir as specified in  &lt;URL:http://www.qmail.org/qmail-manual-html/man5/maildir.html&gt; and  &lt;URL:http://cr.yp.to/proto/maildir.html&gt;.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>The mbox mail storage format as specified in  &lt;URL:http://www.qmail.org/qmail-manual-html/man5/mbox.html&gt;.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Registered MIME media types as specified in RFC2048.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Script execution conforming to both UMN standards as laid out in UMN <strong>gopherd</strong>(1) and Bucktooth standards as specified at  &lt;URL:gopher://gopher.floodgap.com:70/0/buck/dbrowse%3ffaquse%202&gt;, so far as each can be implemented consistent with secure design principles.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>Standard Python 2.2.1 or above as implemented on POSIX-compliant systems.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>WAP/WML as defined by the WAP Forum.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Reports of bugs should be sent via e-mail to the <strong>PyGopherd</strong> bug-tracking system (BTS) at &lt;pygopherd@bugs.complete.org&gt; or submitted online using the Web interface at  &lt;URL:http://bugs.complete.org/&gt;.</p><p>The Web site also lists all current bugs, where you can check their status or contribute to fixing them.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p><strong>PyGopherd</strong> is Copyright (C) 2002, 2003 John Goerzen.</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; version 2 of the License.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, write to:</p>
<pre>
Free Software Foundation, Inc.
59 Temple Place
Suite 330
Boston, MA  02111-1307
USA

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>PyGopherd</strong>, its libraries, documentation, and all included files (except where noted) was written by John Goerzen &lt;jgoerzen@complete.org&gt; and copyright is held as stated in the Copyright section.</p><p>Portions of this manual (specifically relating to certian UMN gopherd features and characteristics that PyGopherd emulates) are modified versions of the original <strong>gopherd</strong>(1) manpage accompanying the UMN gopher distribution.  That document is distributed under the same terms as this, and bears the following copyright notices:</p>
<pre>
Copyright (C) 1991-2000  University of Minnesota
Copyright (C) 2000-2002  John Goerzen and other developers

</pre>
<p><strong>PyGopherd</strong> may be downloaded, and information found, from its homepage via either Gopher or HTTP:</p><p> &lt;URL:gopher://quux.org/1/devel/gopher/pygopherd&gt;</p><p> &lt;URL:http://quux.org/devel/gopher/pygopherd&gt;</p><p><strong>PyGopherd</strong> may also be downloaded using Subversion.  Additionally, the distributed tar.gz may be updated with a simple "svn update" command; it is ready to go.  For information on getting <strong>PyGopherd</strong> with Subversion, please visit  &lt;URL:http://svn.complete.org/&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pygopherd&hellip;</h2>
        <div class="sectioncontent">
<p>python (1).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pyftpd.8.html"><span aria-hidden="true">&larr;</span> pyftpd.8: Ftp server in python</a></li>
   <li class="next"><a href="pynslcd.8.html">pynslcd.8: Local ldap name service daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
