<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pdbedit: Manage the sam database (database of samba users)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manage the sam database (database of samba users)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pdbedit (8) manual">
  <meta name="twitter:description" content="Manage the sam database (database of samba users)">
  <meta name="twitter:image" content="https://www.carta.tech/images/samba-pdbedit-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pdbedit.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pdbedit (8) manual" />
  <meta property="og:description" content="Manage the sam database (database of samba users)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/samba-pdbedit-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pdbedit<small> (8)</small></h1>
        <p class="lead">Manage the sam database (database of samba users)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pdbedit.8.html">
      <span itemprop="name">pdbedit: Manage the sam database (database of samba users)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/samba/">
      <span itemprop="name">samba</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pdbedit.8.html">
      <span itemprop="name">pdbedit: Manage the sam database (database of samba users)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>pdbedit [-a] [-b&nbsp;passdb-backend] [-c&nbsp;account-control] [-C&nbsp;value] [-d&nbsp;debuglevel] [-D&nbsp;drive] [-e&nbsp;passdb-backend] [-f&nbsp;fullname] [--force-initialized-passwords] [-g] [-h&nbsp;homedir] [-i&nbsp;passdb-backend] [-I&nbsp;domain] [-K] [-L] [-m] [-M&nbsp;SID|RID] [-N&nbsp;description] [-P&nbsp;account-policy] [-p&nbsp;profile] [--policies-reset] [-r] [-s&nbsp;configfile] [-S&nbsp;script] [-t] [--time-format] [-u&nbsp;username] [-U&nbsp;SID|RID] [-v] [-V] [-w] [-x] [-y] [-z] [-Z]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This tool is part of the <a href="../man7/samba.7.html"><strong>samba</strong>(7)</a> suite.</p><p>The pdbedit program is used to manage the users accounts stored in the sam database and can only be run by root.</p><p>The pdbedit tool uses the passdb modular interface and is independent from the kind of users database used (currently there are smbpasswd, ldap, nis+ and tdb based and more can be added without changing the tool).</p><p>There are five main ways to use pdbedit: adding a user account, removing a user account, modifying a user account, listing user accounts, importing users accounts.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>-L|--list</p><p>This option lists all the user accounts present in the users database. This option prints a list of user/uid pairs separated by the &apos;:&apos; character.</p><p>Example: pdbedit -L</p>
<pre>
sorce:500:Simo Sorce
samba:45:Test User
</pre>
<p>-v|--verbose</p><p>This option enables the verbose listing format. It causes pdbedit to list the users in the database, printing out the account fields in a descriptive format.</p><p>Example: pdbedit -L -v</p>
<pre>
---------------
username:       sorce
user ID/Group:  500/500
user RID/GRID:  2000/2001
Full Name:      Simo Sorce
Home Directory: &#92;&#92;BERSERKER&#92;sorce
HomeDir Drive:  H:
Logon Script:   &#92;&#92;BERSERKER&#92;netlogon&#92;sorce.bat
Profile Path:   &#92;&#92;BERSERKER&#92;profile
---------------
username:       samba
user ID/Group:  45/45
user RID/GRID:  1090/1091
Full Name:      Test User
Home Directory: &#92;&#92;BERSERKER&#92;samba
HomeDir Drive:
Logon Script:
Profile Path:   &#92;&#92;BERSERKER&#92;profile
</pre>
<p>-w|--smbpasswd-style</p><p>This option sets the "smbpasswd" listing format. It will make pdbedit list the users in the database, printing out the account fields in a format compatible with the smbpasswd file format. (see the <a href="../man5/smbpasswd.5.html"><strong>smbpasswd</strong>(5)</a> for details)</p><p>Example: pdbedit -L -w</p>
<pre>
sorce:500:508818B733CE64BEAAD3B435B51404EE:
          D2A2418EFC466A8A0F6B1DBB5C3DB80C:
          [UX         ]:LCT-00000000:
samba:45:0F2B255F7B67A7A9AAD3B435B51404EE:
          BC281CE3F53B6A5146629CD4751D3490:
          [UX         ]:LCT-3BFA1E8D:
</pre>
<p>-u|--user username</p><p>This option specifies the username to be used for the operation requested (listing, adding, removing). It is <em>required</em> in add, remove and modify operations and <em>optional</em> in list operations.</p><p>-f|--fullname fullname</p><p>This option can be used while adding or modifying a user account. It will specify the user&apos;s full name.</p><p>Example: -f "Simo Sorce"</p><p>-h|--homedir homedir</p><p>This option can be used while adding or modifying a user account. It will specify the user&apos;s home directory network path.</p><p>Example: -h "&#92;&#92;&#92;&#92;BERSERKER&#92;&#92;sorce"</p><p>-D|--drive drive</p><p>This option can be used while adding or modifying a user account. It will specify the windows drive letter to be used to map the home directory.</p><p>Example: -D "H:"</p><p>-S|--script script</p><p>This option can be used while adding or modifying a user account. It will specify the user&apos;s logon script path.</p><p>Example: -S "&#92;&#92;&#92;&#92;BERSERKER&#92;&#92;netlogon&#92;&#92;sorce.bat"</p><p>-p|--profile profile</p><p>This option can be used while adding or modifying a user account. It will specify the user&apos;s profile directory.</p><p>Example: -p "&#92;&#92;&#92;&#92;BERSERKER&#92;&#92;netlogon"</p><p>-M|&apos;--machine SID&apos; SID|rid</p><p>This option can be used while adding or modifying a machine account. It will specify the machines&apos; new primary group SID (Security Identifier) or rid.</p><p>Example: -M S-1-5-21-2447931902-1787058256-3961074038-1201</p><p>-U|&apos;--user SID&apos; SID|rid</p><p>This option can be used while adding or modifying a user account. It will specify the users&apos; new SID (Security Identifier) or rid.</p><p>Example: -U S-1-5-21-2447931902-1787058256-3961074038-5004</p><p>Example: &apos;--user SID&apos; S-1-5-21-2447931902-1787058256-3961074038-5004</p><p>Example: -U 5004</p><p>Example: &apos;--user SID&apos; 5004</p><p>-c|--account-control account-control</p><p>This option can be used while adding or modifying a user account. It will specify the users&apos; account control property. Possible flags are listed below.</p><p>N: No password required</p><p>D: Account disabled</p><p>H: Home directory required</p><p>T: Temporary duplicate of other account</p><p>U: Regular user account</p><p>M: MNS logon user account</p><p>W: Workstation Trust Account</p><p>S: Server Trust Account</p><p>L: Automatic Locking</p><p>X: Password does not expire</p><p>I: Domain Trust Account</p><p>Example: -c "[X ]"</p><p>-K|--kickoff-time</p><p>This option is used to modify the kickoff time for a certain user. Use "never" as argument to set the kickoff time to unlimited.</p><p>Example: pdbedit -K never user</p><p>-a|--create</p><p>This option is used to add a user into the database. This command needs a user name specified with the -u switch. When adding a new user, pdbedit will also ask for the password to be used.</p><p>Example: pdbedit -a -u sorce</p>
<pre>
new password:
retype new password
</pre>
<p><strong>Note</strong></p><p>pdbedit does not call the unix password synchronization script if \m[blue]<strong>unix password sync</strong>\m[] has been set. It only updates the data in the Samba user database.</p><p>If you wish to add a user and synchronise the password that immediately, use smbpasswd&apos;s <strong>-a</strong> option.</p><p>-t|--password-from-stdin</p><p>This option causes pdbedit to read the password from standard input, rather than from /dev/tty (like the <a href="../man1/passwd.1.html"><strong>passwd</strong>(1)</a> program does). The password has to be submitted twice and terminated by a newline each.</p><p>-r|--modify</p><p>This option is used to modify an existing user in the database. This command needs a user name specified with the -u switch. Other options can be specified to modify the properties of the specified user. This flag is kept for backwards compatibility, but it is no longer necessary to specify it.</p><p>-m|--machine</p><p>This option may only be used in conjunction with the <em>-a</em> option. It will make pdbedit to add a machine trust account instead of a user account (-u username will provide the machine name).</p><p>Example: pdbedit -a -m -u w2k-wks</p><p>-x|--delete</p><p>This option causes pdbedit to delete an account from the database. It needs a username specified with the -u switch.</p><p>Example: pdbedit -x -u bob</p><p>-i|--import passdb-backend</p><p>Use a different passdb backend to retrieve users than the one specified in smb.conf. Can be used to import data into your local user database.</p><p>This option will ease migration from one passdb backend to another.</p><p>Example: pdbedit -i smbpasswd:/etc/smbpasswd.old</p><p>-e|--export passdb-backend</p><p>Exports all currently available users to the specified password database backend.</p><p>This option will ease migration from one passdb backend to another and will ease backing up.</p><p>Example: pdbedit -e smbpasswd:/root/samba-users.backup</p><p>-g|--group</p><p>If you specify <em>-g</em>, then <em>-i in-backend -e out-backend</em> applies to the group mapping instead of the user database.</p><p>This option will ease migration from one passdb backend to another and will ease backing up.</p><p>-b|--backend passdb-backend</p><p>Use a different default passdb backend.</p><p>Example: pdbedit -b xml:/root/pdb-backup.xml -l</p><p>-P|--account-policy account-policy</p><p>Display an account policy</p><p>Valid policies are: minimum password age, reset count minutes, disconnect time, user must logon to change password, password history, lockout duration, min password length, maximum password age and bad lockout attempt.</p><p>Example: pdbedit -P "bad lockout attempt"</p>
<pre>
account policy value for bad lockout attempt is 0
</pre>
<p>-C|--value account-policy-value</p><p>Sets an account policy to a specified value. This option may only be used in conjunction with the <em>-P</em> option.</p><p>Example: pdbedit -P "bad lockout attempt" -C 3</p>
<pre>
account policy value for bad lockout attempt was 0
account policy value for bad lockout attempt is now 3
</pre>
<p>-y|--policies</p><p>If you specify <em>-y</em>, then <em>-i in-backend -e out-backend</em> applies to the account policies instead of the user database.</p><p>This option will allow to migrate account policies from their default tdb-store into a passdb backend, e.g. an LDAP directory server.</p><p>Example: pdbedit -y -i tdbsam: -e ldapsam:ldap://my.ldap.host</p><p>--force-initialized-passwords</p><p>This option forces all users to change their password upon next login.</p><p>-N|--account-desc description</p><p>This option can be used while adding or modifying a user account. It will specify the user&apos;s description field.</p><p>Example: -N "test description"</p><p>-Z|--logon-hours-reset</p><p>This option can be used while adding or modifying a user account. It will reset the user&apos;s allowed logon hours. A user may login at any time afterwards.</p><p>Example: -Z</p><p>-z|--bad-password-count-reset</p><p>This option can be used while adding or modifying a user account. It will reset the stored bad login counter from a specified user.</p><p>Example: -z</p><p>--policies-reset</p><p>This option can be used to reset the general password policies stored for a domain to their default values.</p><p>Example: --policies-reset</p><p>-I|--domain</p><p>This option can be used while adding or modifying a user account. It will specify the user&apos;s domain field.</p><p>Example: -I "MYDOMAIN"</p><p>--time-format</p><p>This option is currently not being used.</p><p>-?|--help</p><p>Print a summary of command line options.</p><p>--usage</p><p>Display brief usage message.</p><p>-d|--debuglevel=level</p><p><em>level</em> is an integer from 0 to 10. The default value if this parameter is not specified is 0.</p><p>The higher this value, the more detail will be logged to the log files about the activities of the server. At level 0, only critical errors and serious warnings will be logged. Level 1 is a reasonable level for day-to-day running - it generates a small amount of information about operations carried out.</p><p>Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic.</p><p>Note that specifying this parameter here will override the \m[blue]<strong>log level</strong>\m[] parameter in the smb.conf file.</p><p>-V|--version</p><p>Prints the program version number.</p><p>-s|--configfile=&lt;configuration file&gt;</p><p>The file specified contains the configuration details required by the server. The information in this file includes server-specific information such as what printcap file to use, as well as descriptions of all the services that the server is to provide. See smb.conf for more information. The default configuration file name is determined at compile time.</p><p>-l|--log-basename=logdirectory</p><p>Base directory name for log/debug files. The extension <strong>".progname"</strong> will be appended (e.g. log.smbclient, log.smbd, etc...). The log file is never removed by the client.</p><p>--option=&lt;name&gt;=&lt;value&gt;</p><p>Set the <a href="../man5/smb.conf.5.html"><strong>smb.conf</strong>(5)</a> option "&lt;name&gt;" to value "&lt;value&gt;" from the command line. This overrides compiled-in defaults and options read from the configuration file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>This command may be used only by root.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This man page is correct for version 3 of the Samba suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pdbedit&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/smbpasswd.5.html"><strong>smbpasswd</strong>(5)</a>, <a href="../man7/samba.7.html"><strong>samba</strong>(7)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.</p><p>The pdbedit manpage was written by Simo Sorce and Jelmer Vernooij.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pcscd.8.html"><span aria-hidden="true">&larr;</span> pcscd.8: Pc/sc smart card daemon</a></li>
   <li class="next"><a href="pdf2fax.8.html">pdf2fax.8: Image portable document format file for facsimile transmission by \*(fx <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
