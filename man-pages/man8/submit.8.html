<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>submit: Submit a new message to the courier mail server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Submit a new message to the courier mail server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="submit (8) manual">
  <meta name="twitter:description" content="Submit a new message to the courier mail server">
  <meta name="twitter:image" content="https://www.carta.tech/images/courier-mta-submit-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/submit.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="submit (8) manual" />
  <meta property="og:description" content="Submit a new message to the courier mail server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/courier-mta-submit-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">submit<small> (8)</small></h1>
        <p class="lead">Submit a new message to the courier mail server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/submit.8.html">
      <span itemprop="name">submit: Submit a new message to the courier mail server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/courier-mta/">
      <span itemprop="name">courier-mta</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/submit.8.html">
      <span itemprop="name">submit: Submit a new message to the courier mail server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/usr/bin/submit</strong> [-expn=<em>address</em>] [-vrfy=<em>address</em>] [-vhost=<em>address</em>] [-bcc] [-delay=<em>n</em>] {module} {"<em>type</em>;&nbsp;<em>hostid</em>"}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>submit</strong> program submits messages to the Courier mail server for processing. The <strong>submit</strong> program is not intended to be invoked by the end user. It is used by the Courier mail server input modules only. The <strong>submit</strong> program&apos;s global read and execute permissions are turned off, so that it can only be executed by a process that&apos;s a member of the daemon group. <strong>submit</strong> is installed in the /usr/lib/courier/courier directory.</p><p><strong>submit</strong> always takes two command line arguments after any options:</p><p>module</p><p>This argument identifies the module that&apos;s running the <strong>submit</strong> command. It must be one of the module names that the Courier mail server knows about, such as local, or esmtp. This argument determines address rewriting rules.</p><p>"<em>type</em>; <em>hostid</em>"</p><p>This single argument identifies the source of the message, and must be suitable for the Remote-MTA: header in delivery status notifications, as specified by RFC 1894. For messages that are received via ESMTP, this argument is typically "dns; helohost (hostname [ip.address])".</p><p>The <strong>submit</strong> program takes the following options:</p><p>-expn=<em>address</em></p><p>Do not accept a message, instead "expand" the given address. If the specified address matches a locally-defined alias, <strong>submit</strong> prints the addresses this address expands to. If the specified address does not match a locally-defined alias, the address is displayed by itself.</p><p>-vrfy=<em>address</em></p><p>Do not accept a message, instead verify the given address. <strong>submit</strong> prints a suitable message and sets the exit code to indicate whether the specified address is valid, or not. If the address matches a local alias, <strong>submit</strong> will indicate a valid address, and exit. If the address does not match a local alias, <strong>submit</strong> checks if this address is deliverable by any output protocol module. If so, <strong>submit</strong> will indicate a valid address, and exit. Otherwise, <strong>submit</strong> prints a "User unknown" error message, and exits.</p><p>-bcc</p><p>If no recipients are given, obtain the list of recipients from Bcc: headers only. Normally, if no recipients are specified, <strong>submit</strong> reads the list of recipients from the To:, Cc: and Bcc: headers (Bcc: headers are always removed). The -bcc option ignores To: and Cc: headers for this purpose. This option is ignored if an explicit recipient list is specified (see below).</p><p>-delay=<em>n</em></p><p>Wait <em>n</em> seconds before delivering the message. If not specified, delivery begins after waiting the amount of time specified by the /etc/courier/submitdelay configuration time (default: 0 seconds -- immediate delivery).</p><p>-vhost=<em>address</em></p><p>Append &ldquo;.<em>address</em>&rdquo; to names of all configuration files Courier reads while processing this message.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESPONSES FROM SUBMIT</h2>
        <div class="sectioncontent">
<p>All replies from <strong>submit</strong> follow the format of SMTP responses, as defined in RFC822.</p><p>To summarize: the responses are one or more lines long. Every line in the response instead of the last one consists of a three-digit numerical code, a dash, then arbitrary text. The last line (or the only line of the response) starts with a three-digit numerical code, a single space, and arbitrary text. The first digit of the numerical code indicates whether the response indicates success, or failure. If the first digit is 5, the response indicates a permanent failure. If the first digit is 4, the response indicates a temporary failure (the message or the address should be resubmitted later). If the first digit is not 4 or 5, the response indicates success, or acceptance.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MESSAGE SUBMISSION</h2>
        <div class="sectioncontent">
<p>Unless either <strong>-expn</strong> or <strong>-vrfy</strong> option is specified, <strong>submit</strong> reads the message envelope and contents from standard input, as follows. All input and output to <strong>submit</strong> consists of newline-terminated (NOT carriage return/newline terminated) lines of text.</p><p><strong>submit</strong> reads the first line of text, which specifies the envelope sender address. The line is formatted as follows:</p>
<pre>
address&lt;tab&gt;format&lt;tab&gt;envid
</pre>
<p>&lt;tab&gt; is the ASCII tab character. The address may be an empty string, optionally followed by tab, then "format", another tab, then "envid".</p><p><em>format</em> is one or more chatacters that specify delivery status notification processing, and other message options. The &apos;F&apos; character specifies that delivery status notifications should include the entire message, &apos;H&apos; specifies just the headers of the message should be included. Absence of either &apos;F&apos; or &apos;H&apos; specifies no preference. "S{keyword}" specifies the optional SECURITY extension keyword for this message. The &apos;V&apos; character in <em>format</em> sets the VERP extension flag for this message.</p><p><em>envid</em> is the original message envelope ID, that will be shown on any delivery status notifications. NOTE: <em>envid</em> must be specified using xtext encoding (see the relevant RFCs).</p><p>After reading the first line of text, <strong>submit</strong> prints a response (see "RESPONSES FROM SUBMIT", above). If the response is a failure, <strong>submit</strong> terminates immediately. Otherwise, <strong>submit</strong> then reads one or more envelope recipients.</p><p>Each envelope recipient is read as a single non-empty line of text, formatted as follows:</p>
<pre>
address&lt;tab&gt;dsn&lt;tab&gt;orecipient
</pre>
<p><em>address</em> is a non-empty recipient E-mail address, optionally followed by the tab character, then zero or more characters specifying <em>dsn</em>, then a tab character, then the <em>orecipient</em> value.</p><p><em>dsn</em> is zero or more of the following characters: S - send a delivery status notification upon a successful delivery to this address, F - send a DSN upon a failed delivery, D - send a DSN upon a mail delay, N - never send a DSN. <em>orecipient</em> is the "Original Recipient", as specified in RFC1894, using xtext encoding.</p><p><strong>submit</strong> will print a response to each recipient (see "RESPONSES FROM SUBMIT", above). If at least one recipient address has been succesfully specified, a blank line is read to specify end of recipient list, which is followed by the entire message, headers and body.</p><p>A single blank line terminates the list of recipients. That is followed by the message itself, until end of file.</p><p>The blank line can be present before even a the first recipient is specified. If so, <strong>submit</strong> obtains the list of recipient from the message&apos;s headers.</p><p><strong>submit</strong> reads the message headers and body until end-of-file. Then, <strong>submit</strong> prints a response (see above), indicating whether or not the message was accepted for delivery, and terminates.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADDRESS REWRITING</h2>
        <div class="sectioncontent">
<p>Each recipient address (whether specified explicitly, or obtained from the message headers), will be rewritten according to the rewriting rules specified by the input module. Each address in the headers of the message will also be rewritten.</p><p>After rewriting each recipient address, <strong>submit</strong> will search the aliases.dat file for this address, to see if it represents a locally defined alias. Submit searches /usr/lib/courier/courier/modules/<em>module</em>/aliases.dat and /etc/courier/aliases.dat (actual locations may be changed by the system administrator). If the address is found, the recipient address will be replaced by the addresses defined in the aliases.dat file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p><strong>submit</strong> also reads the following environment variables to further specify how the message is to be processed:</p><p>BLOCK</p><p>If this variable is set to a non-empty value, submit will reject every recipient (in effect, rejecting the message). The contents of the environment variable will be used as the error message.</p><p>DSNENVID</p><p>If envid is not specified, or is blank, and this environment variable is defined, the contents of this variable is used as the original envelope id field for DSNs. Note that DSNENVID is copied verbatim into the Original-Envelope-Id field (if the message is relayed to another MTA, the Courier mail server automatically xtext-encodes it).</p><p>DSNNOTIFY</p><p>If the dsn field for a recipient is empty, the contents of this environment variable is used in its place. Also, if the recipient list is read from the headers, the contents of this environment variable are used to set the dsn setting.</p><p>DSNRET</p><p>If the format field for this message is empty, the contents of this environment variable is used in its place.</p><p>NOADDDATE</p><p>Normally the Courier mail server adds a Date: header to the message, if it does not have one. If this environment variable is set, the Courier mail server will not add a Date: header.</p><p>NOADDMSGID</p><p>Normally the Courier mail server adds a Message-Id: header to the message, if it does not have it. If this environment variable is set, the Courier mail server will not add a Message-Id: header.</p><p>NOADDRREWRITE</p><p>Normally the Courier mail server rewrites addresses in the From:, To:, and Cc: header fields. If this environment variable is set to 1, the Courier mail server will not rewrite them. If it is set to a higher value, the Courier mail server will only rewrite it if no DKIM-Signature: header field was found.</p><p>MIME</p><p>Normally the Courier mail server adds any missing RFC2045 headers to the message. The <strong>MIME</strong> environment variable can be set to the following values: none - do not do any RFC2045 processing whatsoever; 7bit - if the message contains any 8-bit text, convert it to quoted-printable encoding; 8bit -if the message contains any quoted-printable encoded text that can be representing as 8bit-encoded text, then convert it to 8bit encoding.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO submit&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong></strong><a href="../man8/courierpop3d.8.html"><strong>courierpop3d</strong>(8)</a>\m[]\s-2\u[1]\d\s+2, \m[blue]<strong></strong><strong>couriertcpd</strong>(8)\m[]\s-2\u[2]\d\s+2, \m[blue]<strong></strong><strong>authlib</strong>(7)\m[]\s-2\u[3]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Sam Varshavchik</strong></p><p>Author</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man8/courierpop3d.8.html"><strong>courierpop3d</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/courierpop3d.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><strong>couriertcpd</strong>(8)</p><p>[set $man.base.url.for.relative.links]/couriertcpd.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p><strong>authlib</strong>(7)</p><p>[set $man.base.url.for.relative.links]/authlib.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="stunnel3.8.html"><span aria-hidden="true">&larr;</span> stunnel3.8: Universal ssl tunnel</a></li>
   <li class="next"><a href="suexec-custom.8.html">suexec-custom.8: Switch user for exec <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
