<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>drbdadm-9.0: Utility for drbd administration.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Utility for drbd administration.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="drbdadm-9.0 (8) manual">
  <meta name="twitter:description" content="Utility for drbd administration.">
  <meta name="twitter:image" content="https://www.carta.tech/images/drbd-utils-drbdadm-9.0-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/drbdadm-9.0.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="drbdadm-9.0 (8) manual" />
  <meta property="og:description" content="Utility for drbd administration." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/drbd-utils-drbdadm-9.0-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">drbdadm-9.0<small> (8)</small></h1>
        <p class="lead">Utility for drbd administration.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/drbdadm-9.0.8.html">
      <span itemprop="name">drbdadm-9.0: Utility for drbd administration.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/drbd-utils/">
      <span itemprop="name">drbd-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/drbdadm-9.0.8.html">
      <span itemprop="name">drbdadm-9.0: Utility for drbd administration.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>drbdadm</strong> [options...] [--&nbsp;[<em>backend-options</em>...]] {<em>command</em>} {<em>context</em>...}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>drbdadm</strong> utility is used for managing DRBD based on its configuration files, see <a href="../man5/drbd.conf.5.html"><strong>drbd.conf</strong>(5)</a>. It translates high-level commands into one or more lower-level commands for the <strong>drbdsetup</strong> and <strong>drbdmeta</strong> utilities, which control the kernel module and manipulate the on-disk metadata.</p><p>Depending on the command, the <strong>drbdadm</strong> utility operates on one or more resources, devices, connections, or peer devices. The following command contexts are defined:</p><p><em>resource</em></p><p>A resource specified by name, or the keyword <strong>all</strong> for all defined resources.</p><p><em>device</em></p><p>A device, specified by minor number (<strong>minor-</strong><em>minor</em>) or by resource and volume number (<em>resource</em>/<em>volume</em>). If only a <em>resource</em> is specified, the command iterates over all devices of that resource.</p><p><em>connection</em></p><p>A connection, specified by resource and connection name (<em>resource</em>:<em>connection-name</em>). If only a <em>resource</em> is specified, the command iterates over all connections of that resource.</p><p><em>peer_device</em></p><p>A peer device, specified by resource, connection name, and volume number (<em>resource</em>:<em>connection-name</em>/<em>volume</em>). If only a <em>resource</em>, <em>device</em>, or <em>connection</em> is specified, the command iterates over all peer devices of that resource, device, or connection.</p><p>All options following a double-dash are passed through to the lower-level utilities as specified. In addition, <strong>drbdadm</strong> understands most of the options of <strong>drbdsetup</strong>, and will pass them through even without the double-dash.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-d</strong>, <strong>--dry-run</strong></p><p>Show which commands <strong>drbdadm</strong> would execute instead of actually executing them (for example, <strong>drbdadm -d up </strong><strong></strong><em>resource</em>). This can be a useful way to learn how <strong>drbdsetup</strong> and <strong>drbdmeta</strong> are used.</p><p><strong>-c</strong>, <strong>--config-file</strong> <em>file</em></p><p>Use an alternative configuration file. By default, <strong>drbdadm</strong> will use the the first of the following files that exists: <strong>/etc/drbd-90.conf</strong>, <strong>/etc/drbd-84.conf</strong>, <strong>/etc/drbd-83.conf</strong>, <strong>/etc/drbd-82.conf</strong>, <strong>/etc/drbd-08.conf</strong>, <strong>/etc/drbd.conf</strong>.</p><p><strong>-t</strong>, <strong>--config-to-test</strong> <em>file</em></p><p>Check an additional configuration file. This option is only allowed with the dump and the sh-nop commands.</p><p><strong>-s</strong>, <strong>--drbdsetup</strong> <em>file</em></p><p>Specifies the full path to the <strong>drbdsetup</strong> program. If this option is omitted, drbdadm will look for it beneath itself first, and then in the PATH.</p><p><strong>-m</strong>, <strong>--drbdmeta</strong> <em>file</em></p><p>Specifies the full path to the <strong>drbdmeta</strong> program. If this option is omitted, drbdadm will look for it beneath itself first, and then in the PATH.</p><p><strong>-S</strong>, <strong>--stacked</strong></p><p>Perform the command on a stacked resource.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>adjust {<em>resource</em>}</p><p>Adjust the configuration of the kernel module so that it matches the configuration files. The result should be the same as when stopping and restarting all resources (<strong>drbdadm down all</strong> followed by <strong>drbdadm up all</strong>), but without the interruptions.</p><p>Note that the adjust command can misinterpret the configuration change in some cases. To be safe, check what the command would do (with the <strong>--dry-run</strong> option) before running the actual command.</p><p>adjust-with-progress {<em>resource</em>}</p><p>The same as <strong>adjust</strong>, but with some more information about the command&apos;s progress.</p><p>apply-al {<em>device</em>}</p><p>Apply the activity log of the specified device. See <a href="../man8/drbdmeta.8.html"><strong>drbdmeta</strong>(8)</a> for details.</p><p>attach {<em>device</em>}</p><p>Attach a lower-level device to an existing replicated device. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>check-resize {<em>device</em>}</p><p>Call drbdmeta to eventually move internal meta data. If the backing device was resized, while DRBD was not running, meta data has to be moved to the end of the device, so that the next <strong>attach</strong> command can succeed.</p><p>connect {<em>connection</em>}</p><p>Connect a resource to a peer host. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>create-md {<em>device</em>}</p><p>Initialize the metadata of a device. This is necessary before a device can be attached; see <a href="../man8/drbdmeta.8.html"><strong>drbdmeta</strong>(8)</a> for details.</p><p>cstate {<em>connection</em>}</p><p>Show the current state of a connection. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>detach {<em>device</em>}</p><p>Detach the lower-level device of a replicated device. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>disconnect {<em>connection</em>}</p><p>Remove a connection to a peer host. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>disk-options {<em>device</em>}</p><p>Cange the disk options of an attached lower-level device. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>down {<em>resource</em>}</p><p>Take a resource down by removing all volumes, connections, and the resource itself. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>dstate {<em>device</em>}</p><p>Show the current disk state of a lower-level device. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>dump {<em>resource</em>}</p><p>Parse the configuration file and dump it to stdout. This will fail if the configuration file is syntactically incorrect.</p><p>dump-md {<em>device</em>}</p><p>Dump the metadata of a device in text form, including the bitmap and activity log. See <a href="../man8/drbdmeta.8.html"><strong>drbdmeta</strong>(8)</a> for details.</p><p>get-gi {<em>peer_device</em>}</p><p>Show the data generation identifiers for a device on a particular connection. Uses <strong>drbdsetup</strong> for attached devices and <strong>drbdmeta</strong> for unattached devices. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>hidden-commands</p><p>Shows all commands which are not explicitly documented.</p><p>invalidate {<em>peer_device</em>}</p><p>Replace the local data of a device with that of a peer. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>invalidate-remote {<em>peer_device</em>}</p><p>Replace a peer device&apos;s data of a resource with the local data. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>net-options {<em>connection</em>}</p><p>Change the network options of an existing connection. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>new-current-uuid {<em>device</em>}</p><p>Generate a new currend UUID. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>outdate {<em>device</em>}</p><p>Mark the data on a lower-level device as outdated. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>pause-sync {<em>peer_device</em>}</p><p>Stop resynchronizing between a local and a peer device by setting the local pause flag. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>primary {<em>resource</em>}</p><p>Change the role of a node in a resource to primary. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>resize {<em>device</em>}</p><p>Resize the lower-level devices of a replicated device on all nodes. This combines the <strong>check-resize</strong> and <strong>resize</strong> lower-level commands; see <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>resource-options {<em>resource</em>}</p><p>Change the resource options of an existing resource. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>resume-sync {<em>peer_device</em>}</p><p>Allow resynchronization to resume by clearing the local sync pause flag. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>role {<em>resource</em>}</p><p>Show the current role of a resource.</p><p>secondary {<em>resource</em>}</p><p>Change the role of a node in a resource to secondary. This command fails if the replicated device is in use.</p><p>show-gi {<em>peer_device</em>}</p><p>Show the data generation identifiers for a device on a particular connection. In addition, explain the output. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>state {<em>resource</em>}</p><p>This is an alias for <strong>drbdsetup role</strong>. Deprecated.</p><p>up {<em>resource</em>}</p><p>Bring up a resource by applying the activity log of all volumes, creating the resource, creating the replicated devices, attaching the lower-level devices, and connecting to all peers. See the <strong>apply-al</strong> drbdmeta command and the <strong>new-resource</strong>, <strong>new-device</strong>, <strong>new-minor</strong>, <strong>attach</strong>, and <strong>connect</strong> drbdsetup commands.</p><p>verify {<em>peer_device</em>}</p><p>Start online verification, change which part of the device will be verified, or stop online verification. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>wait-connect {[<em>device</em>] | [<em>connection</em>] | [<em>resource</em>]}</p><p>Wait until a device on a peer, all devices over a connection, or all devices on all peers are visible. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>wait-sync {[<em>device</em>] | [<em>connection</em>] | [<em>resource</em>]}</p><p>Wait until a device is connected and has finished eventual resync operation. Also available on connection and resource level. See <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a> for details.</p><p>wipe-md {<em>device</em>}</p><p>Wipe out the DRBD metadata of a device. See <a href="../man8/drbdmeta.8.html"><strong>drbdmeta</strong>(8)</a> for details.</p><p>forget-peer {<em>connection</em>}</p><p>Completely remove any reference to a unconnected peer from meta-data. See <a href="../man8/drbdmeta.8.html"><strong>drbdmeta</strong>(8)</a> for details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This document was revised for version 9.0.0 of the DRBD distribution.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Philipp Reisner &lt;philipp.reisner@linbit.com&gt; and Lars Ellenberg &lt;lars.ellenberg@linbit.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs to &lt;drbd-user@lists.linbit.com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2001-2012 LINBIT Information Technologies, Philipp Reisner, Lars Ellenberg. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO drbdadm-9.0&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/drbd.conf.5.html"><strong>drbd.conf</strong>(5)</a>, <a href="../man8/drbd.8.html"><strong>drbd</strong>(8)</a>, <a href="../man8/drbddisk.8.html"><strong>drbddisk</strong>(8)</a>, <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a>, <a href="../man8/drbdmeta.8.html"><strong>drbdmeta</strong>(8)</a> and the \m[blue]<strong>DRBD project web site</strong>\m[]\s-2\u[1]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>DRBD project web site</p><p>http://www.drbd.org/</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="drbdadm-8.4.8.html"><span aria-hidden="true">&larr;</span> drbdadm-8.4.8: Administration tool for drbd .</a></li>
   <li class="next"><a href="drbddisk.8.html">drbddisk.8: Script to mark devices as primary and mount file systems <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
