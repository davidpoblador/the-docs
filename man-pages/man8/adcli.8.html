<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>adcli: Tool for performing actions on an active directory domain</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Tool for performing actions on an active directory domain">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="adcli (8) manual">
  <meta name="twitter:description" content="Tool for performing actions on an active directory domain">
  <meta name="twitter:image" content="https://www.carta.tech/images/adcli-adcli-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/adcli.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="adcli (8) manual" />
  <meta property="og:description" content="Tool for performing actions on an active directory domain" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/adcli-adcli-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">adcli<small> (8)</small></h1>
        <p class="lead">Tool for performing actions on an active directory domain</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/adcli.8.html">
      <span itemprop="name">adcli: Tool for performing actions on an active directory domain</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/adcli/">
      <span itemprop="name">adcli</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/adcli.8.html">
      <span itemprop="name">adcli: Tool for performing actions on an active directory domain</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>adcli info</strong> domain.example.com <strong>adcli join</strong> domain.example.com <strong>adcli create-user</strong> [--domain=domain.example.com] user <strong>adcli delete-user</strong> [--domain=domain.example.com] user <strong>adcli create-group</strong> [--domain=domain.example.com] user <strong>adcli delete-group</strong> [--domain=domain.example.com] user <strong>adcli add-member</strong> [--domain=domain.example.com] group user... <strong>adcli remove-member</strong> [--domain=domain.example.com] group user... <strong>adcli preset-computer</strong> [--domain=domain.example.com] computer... <strong>adcli reset-computer</strong> [--domain=domain.example.com] computer <strong>adcli delete-computer</strong> [--domain=domain.example.com] computer</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERAL OVERVIEW</h2>
        <div class="sectioncontent">
<p><strong>adcli</strong> is a command line tool that can perform actions in an Active Directory domain. Among other things it can be used to join a computer to a domain.</p><p>See the various sub commands below. The following global options can be used:</p><p><strong>-D, --domain=</strong><strong></strong><em>domain</em></p><p>The domain to connect to. If a domain is not specified then the domain part of the local computer&apos;s host name is used.</p><p><strong>-R, --domain-realm=</strong><strong></strong><em>REALM</em></p><p>Kerberos realm for the domain. If not specified then the upper cased domain name is used.</p><p><strong>-S, --domain-controller=</strong><strong></strong><em>server</em></p><p>Connect to a specific domain controller. If not specified then an appropriate domain controller is automatically discovered.</p><p><strong>-C, --login-ccache=</strong><strong></strong><em>/path/to/file</em></p><p>Use the specified kerberos credential cache to authenticate with the domain.</p><p><strong>-U, --login-user=</strong><strong></strong><em>User</em></p><p>Use the specified user account to authenticate with the domain. If not specified then the name &apos;Administrator&apos; will be used.</p><p><strong>--no-password</strong></p><p>Don&apos;t show prompts for or read a password from input.</p><p><strong>-W, --prompt-password</strong></p><p>Prompt for a password if necessary. This is the default.</p><p><strong>--stdin-password</strong></p><p>Read a password from stdin input instead of prompting for a password.</p><p><strong>-v, --verbose</strong></p><p>Run in verbose mode with debug output.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">QUERYING DOMAIN INFORMATION</h2>
        <div class="sectioncontent">
<p><strong>adcli info</strong> displays discovered information about an Active Directory domain or an Active Directory domain controller.</p>
<pre>
$ adcli info domain.example.com
...
</pre>

<pre>
$ adcli info --domain-controller=dc.domain.example.com
...
</pre>
<p><strong>adcli info</strong> will output as much information as it can about the domain. The information is designed to be both machine and human readable. The command will exit with a non-zero exit code if the domain does note exist or cannot be reached.</p><p>To show domain info for a specific domain controller use the <strong>--domain-controller</strong> option to specify which domain controller to query.</p><p>Use the <strong>--verbose</strong> option to show details of how the domain is discovered and queried. Many of the global options, in particular authentication options, are not usable with the <strong>adcli info</strong> command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">JOINING THE LOCAL MACHINE TO A DOMAIN</h2>
        <div class="sectioncontent">
<p><strong>adcli join</strong> creates a computer account in the domain for the local machine, and sets up a keytab for the machine. It does not configure an authentication service (such as <strong>sssd</strong>).</p>
<pre>
$ adcli join domain.example.com
Password for Administrator:
</pre>
<p>In addition to the global options, you can specify the following options to control how this operation is done.</p><p><strong>-N, --computer-name=</strong><strong></strong><em>computer</em></p><p>The short non-dotted name of the computer account that will be created in the domain. If not specified then the first portion of the <strong>--host-fqdn</strong> is used.</p><p><strong>-O, --domain-ou=</strong><strong></strong><em>OU=xxx</em></p><p>The full distinguished name of the OU in which to create the computer account. If not specified then the computer account will be created in a default location.</p><p><strong>-H, --host-fqdn=</strong><strong></strong><em>host</em></p><p>Override the local machine&apos;s fully qualified domain name. If not specified the local machine&apos;s hostname will be retrieved via <strong>gethostname()</strong>.</p><p><strong>-K, --host-keytab=</strong><strong></strong><em>/path/to/keytab</em></p><p>Specify the path to the host keytab where host credentials will be written after a successful join operation. If not specified the default location will be used, usually /etc/krb5.keytab.</p><p><strong>--login-type=</strong><strong></strong><em>{computer|user}</em></p><p>Specify the type of authentication that will be performed before creating the machine account in the domain. If set to &apos;computer&apos; then the computer must already have a preset account in the domain. If not specified and none of the other <strong>--login-xxx</strong> arguments have been specified, then will try both &apos;computer&apos; and &apos;user&apos; authentication.</p><p><strong>--os-name=</strong><strong></strong><em>name</em></p><p>Set the operating system name on the computer account. The default depends on where adcli was built, but is usually something like &apos;linux-gnu&apos;.</p><p><strong>--os-service-pack=</strong><strong></strong><em>pack</em></p><p>Set the operating system service pack on the computer account. Not set by default.</p><p><strong>--os-version=</strong><strong></strong><em>version</em></p><p>Set the operating system version on the computer account. Not set by default.</p><p><strong>--service-name=</strong><strong></strong><em>service</em></p><p>Additional service name for a kerberos principal to be created on the computer account. This option may be specified multiple times.</p><p><strong>--user-principal=</strong><strong></strong><em>host/name@REALM</em></p><p>Set the userPrincipalName field of the computer account to this kerberos principal. If you omit the value for this option, then a principal will be set in the form of host/host.example.com@REALM</p><p><strong>--one-time-password</strong></p><p>Specify a one time password for a preset computer account. This is equivalent to using <strong>--login-type=computer</strong> and providing a password as input.</p><p><strong>--show-details</strong></p><p>After a successful join print out information about join operation. This is output in a format that should be both human and machine readable.</p><p><strong>--show-password</strong></p><p>After a successful join print out the computer machine account password. This is output in a format that should be both human and machine readable.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREATING A USER</h2>
        <div class="sectioncontent">
<p><strong>adcli create-user</strong> creates a new user account in the domain.</p>
<pre>
$ adcli create-user Fry --domain=domain.example.com &#92;
	--display-name="Philip J. Fry" --mail=fry@domain.example.com
</pre>
<p>In addition to the global options, you can specify the following options to control how the user is created.</p><p><strong>--display-name=</strong><strong></strong><em>"Name"</em></p><p>Set the displayName attribute of the new created user account.</p><p><strong>-O, --domain-ou=</strong><strong></strong><em>OU=xxx</em></p><p>The full distinguished name of the OU in which to create the user account. If not specified then the computer account will be created in a default location.</p><p><strong>--mail=</strong><strong></strong><em>email@domain.com</em></p><p>Set the mail attribute of the new created user account. This attribute may be specified multiple times.</p><p><strong>--unix-home=</strong><strong></strong><em>/home/user</em></p><p>Set the unixHomeDirectory attribute of the new created user account, which should be an absolute path to the user&apos;s home directory.</p><p><strong>--unix-gid=</strong><strong></strong><em>111</em></p><p>Set the gidNumber attribute of the new created user account, which should be the user&apos;s numeric primary group id.</p><p><strong>--unix-shell=</strong><strong></strong><em>/bin/shell</em></p><p>Set the pos attribute of the new created user account, which should be the user&apos;s numeric primary user id.</p><p><strong>--unix-uid=</strong><strong></strong><em>111</em></p><p>Set the loginShell attribute of the new created user account, which should be a path to a valid shell.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DELETING A USER</h2>
        <div class="sectioncontent">
<p><strong>adcli delete-user</strong> deletes a user account from the domain.</p>
<pre>
$ adcli delete-user Fry --domain=domain.example.com
</pre>
<p>The various global options can be used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CREATING A GROUP</h2>
        <div class="sectioncontent">
<p><strong>adcli create-group</strong> creates a new group in the domain.</p>
<pre>
$ adcli create-group Pilots --domain=domain.example.com &#92;
	--description="Group for all pilots"
</pre>
<p>In addition to the global options, you can specify the following options to control how the group is created.</p><p><strong>--description=</strong><strong></strong><em>"text"</em></p><p>Set the description attribute of the new created group.</p><p><strong>-O, --domain-ou=</strong><strong></strong><em>OU=xxx</em></p><p>The full distinguished name of the OU in which to create the group. If not specified then the computer account will be created in a default location.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DELETING A GROUP</h2>
        <div class="sectioncontent">
<p><strong>adcli delete-group</strong> deletes a group from the domain.</p>
<pre>
$ adcli delete-group Pilots --domain=domain.example.com
</pre>
<p>The various global options can be used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADDING A MEMBER TO A GROUP</h2>
        <div class="sectioncontent">
<p><strong>adcli add-member</strong> adds one or more users to a group in the domain. The group is specified first, and then the various users to be added.</p>
<pre>
$ adcli add-member --domain=domain.example.com Pilots Leela Scruffy
</pre>
<p>The various global options can be used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REMOVING A MEMBER FROM A GROUP</h2>
        <div class="sectioncontent">
<p><strong>adcli remove-member</strong> removes a user from a group in the domain. The group is specified first, and then the various users to be removed.</p>
<pre>
$ adcli remove-member --domain=domain.example.com Pilots Scruffy
</pre>
<p>The various global options can be used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PRESET COMPUTER ACCOUNTS</h2>
        <div class="sectioncontent">
<p><strong>adcli preset-computer</strong> pre-creates one or more computer accounts in the domain for machines to later use when joining the domain. By doing this machines can join using a one time password or automatically without a password.</p>
<pre>
$ adcli preset-computer --domain=domain.example.com &#92;
	host1.example.com host2
Password for Administrator:
</pre>
<p>If the computer names specified contain dots, then they are treated as fully qualified host names, otherwise they are treated as short computer names. The computer accounts must not already exist.</p><p>In addition to the global options, you can specify the following options to control how this operation is done.</p><p><strong>-O, --domain-ou=</strong><strong></strong><em>OU=xxx</em></p><p>The full distinguished name of the OU in which to create the computer accounts. If not specified then the computer account will be created in a default location.</p><p><strong>--one-time-password</strong></p><p>Specify a one time password to use when presetting the computer accounts. If not specified then a default password will be used, which allows for later automatic joins.</p><p><strong>--os-name=</strong><strong></strong><em>name</em></p><p>Set the operating system name on the computer account. The default depends on where adcli was built, but is usually something like &apos;linux-gnu&apos;.</p><p><strong>--os-service-pack=</strong><strong></strong><em>pack</em></p><p>Set the operating system service pack on the computer account. Not set by default.</p><p><strong>--os-version=</strong><strong></strong><em>version</em></p><p>Set the operating system version on the computer account. Not set by default.</p><p><strong>--service-name=</strong><strong></strong><em>service</em></p><p>Additional service name for a kerberos principal to be created on the computer account. This option may be specified multiple times.</p><p><strong>--user-principal</strong></p><p>Set the userPrincipalName field of the computer account to this kerberos principal in the form of host/host.example.com@REALM</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESET COMPUTER ACCOUNT</h2>
        <div class="sectioncontent">
<p><strong>adcli reset-computer</strong> resets a computer account in the domain. If a the appropriate machien is currently joined to the domain, then it&apos;s membership will be broken. The account must already exist.</p>
<pre>
$ adcli reset-computer --domain=domain.example.com host2
</pre>
<p>If the computer names specified contain dots, then they are treated as fully qualified host names, otherwise they are treated as short computer names.</p><p>In addition to the global options, you can specify the following options to control how this operation is done.</p><p><strong>--login-type=</strong><strong></strong><em>{computer|user}</em></p><p>Specify the type of authentication that will be performed before creating the machine account in the domain. If set to &apos;computer&apos; then the computer must already have a preset account in the domain. If not specified and none of the other <strong>--login-xxx</strong> arguments have been specified, then will try both &apos;computer&apos; and &apos;user&apos; authentication.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DELETE COMPUTER ACCOUNT</h2>
        <div class="sectioncontent">
<p><strong>adcli delete-computer</strong> deletes a computer account in the domain. The account must already exist.</p>
<pre>
$ adcli delete-computer --domain=domain.example.com host2
Password for Administrator:
</pre>
<p>If the computer name contains a dot, then it is treated as fully qualified host name, otherwise it is treated as short computer name.</p><p>If no computer name is specified, then the host name of the computer adcli is running on is used, as returned by gethostname().</p><p>The various global options can be used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Please send bug reports to either the distribution bug tracker or the upstream bug tracker at \m[blue]<strong>https://bugs.freedesktop.org/enter_bug.cgi?product=realmd&component=adcli</strong>\m[]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO adcli&hellip;</h2>
        <div class="sectioncontent">
<p><strong>realmd</strong>(8), <a href="../man8/net.8.html"><strong>net</strong>(8)</a>, <a href="../man8/sssd.8.html"><strong>sssd</strong>(8)</a></p><p>Further details available in the realmd online documentation at \m[blue]<strong>http://www.freedesktop.org/software/realmd/</strong>\m[]</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="actsync.8.html"><span aria-hidden="true">&larr;</span> actsync.8: Synchronize newsgroups</a></li>
   <li class="next"><a href="add-shell.8.html">add-shell.8: Add shells to the list of valid login shells <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
