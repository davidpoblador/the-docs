<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bbackupquery: Box backup store query and file retrieval</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Box backup store query and file retrieval">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bbackupquery (8) manual">
  <meta name="twitter:description" content="Box backup store query and file retrieval">
  <meta name="twitter:image" content="https://www.carta.tech/images/boxbackup-client-bbackupquery-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/bbackupquery.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bbackupquery (8) manual" />
  <meta property="og:description" content="Box backup store query and file retrieval" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/boxbackup-client-bbackupquery-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bbackupquery<small> (8)</small></h1>
        <p class="lead">Box backup store query and file retrieval</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/bbackupquery.8.html">
      <span itemprop="name">bbackupquery: Box backup store query and file retrieval</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/boxbackup-client/">
      <span itemprop="name">boxbackup-client</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/bbackupquery.8.html">
      <span itemprop="name">bbackupquery: Box backup store query and file retrieval</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>bbackupquery</strong> [-q] [-c&nbsp;configfile] [command&nbsp;...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>bbackupquery</strong> is the main way of interacting with the backup store from a Box Backup client machine. It supports both interactive and batch modes of operation.</p><p>It can be used to reviewing the status of a client machine\'s backup store, getting status from the store server. The main use is to retrieve files and directories when needed.</p><p><strong>bbackupquery</strong> supports interactive and batch modes of operation. Interactive mode allows for interaction with the server much like an interactive FTP client.</p><p>Batch mode is invoked by putting commands into the invocation of <strong>bbackupquery</strong>. Example:</p>
<pre>
bbackupquery "list home-dirs" quit
</pre>
<p>Note that commands that contain spaces are enclosed in double quotes. If the <strong>quit</strong> command is omitted, after the preceding commands are completed, <strong>bbackupquery</strong> will enter interactive mode.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-q</strong></p><p>Quiet. Suppresses status output while running.</p><p><strong>-c</strong> <strong>configfile</strong></p><p>Use configfile instead of the default bbackupd.conf file. Can be a relative or full path.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>The commands that can be used in bbackupquery are listed below.</p><p><strong>help</strong></p><p>Displays the basic help message, which gives information about the commands available in <strong>bbackupquery</strong>. Use the form <strong>help command</strong> to get help on a specific command.</p><p><strong>quit</strong></p><p>End the session with the store server, and quit bbackupquery.</p><p><strong>cd</strong> [options] <em>directory-name</em></p><p>Change directory. Options:</p><p><strong>-d</strong></p><p>consider deleted directories for traversal</p><p><strong>-o</strong></p><p>consider old versions of directories for traversal. This option should never be useful in a correctly formed store.</p><p><strong>lcd</strong> <em>local-directory-name</em></p><p>Change directory on the client machine. To list the contents of the local directory, type <strong>sh ls</strong> (on Unix-like machines).</p><p><strong>list</strong> [options] [directory-name]</p><p>The list (or its synonym <strong>ls</strong>) command lists the content of the current, or specified, directory. The options are as follows:</p><p><strong>-r</strong></p><p>recursively list all files</p><p><strong>-d</strong></p><p>list deleted files and directories</p><p><strong>-o</strong></p><p>list old versions of files and directories</p><p><strong>-I</strong></p><p>don\'t display object IDs</p><p><strong>-F</strong></p><p>don\'t display flags</p><p><strong>-t</strong></p><p>show file modification time (and attr mod time, if the object has attributes).</p><p><strong>-s</strong></p><p>show file size in blocks used on server. Note that this is only a very approximate indication of local file size.</p><p><strong>ls</strong> [options] [directory-name]</p><p>Synonym for <strong>list</strong>.</p><p><strong>pwd</strong></p><p>Print current directory, always relative to the backup store root.</p><p><strong>sh</strong> <em>shell-command</em></p><p>Everything after the sh is passed to a shell and run. All output from the command is displayed in the client.</p><p>Example: to list the contents of the current directory on the client machine type <strong>sh ls</strong>.</p><p><strong>compare -a</strong></p><p><strong>compare -l</strong> <em>location-name</em></p><p><strong>compare</strong> <em>store-dir-name</em> <em>local-dir-name</em></p><p>Compare the current data in the store with the data on the disc. Please note that all the data will be downloaded from the store, so this can be a very lengthy process depending on the size of the store, and the size of the part you are comparing.</p><p>Options:</p><p><strong>-a</strong></p><p>compare all locations.</p><p><strong>-l</strong></p><p>compare one backup location as specified in the configuration file. This compares one of the top level store directories.</p><p><strong>-c</strong></p><p>set return code. The return code is set to the following values, if quit is the next command. So, if another command is run after the compare, the return code will not refer to the compare. This option is very useful for automating compares. Return code values:</p><p>\h'-04'&bull;\h'+03'<strong>1</strong> -- no differences were found</p><p>\h'-04'&bull;\h'+03'<strong>2</strong> -- differences were found</p><p>\h'-04'&bull;\h'+03'<strong>3</strong> -- an error occured</p><p><strong>get</strong> <em>object-filename</em> [local-filename]</p><p><strong>get -i</strong> <em>object-id</em> <em>local-filename</em></p><p>Gets a file from the store. Object is specified as the filename within the current directory. Local filename is optional. Ignores old and deleted files when searching the directory for the file to retrieve.</p><p>To get an old or deleted file, use the <strong>-i</strong> option and select the object as a hex object ID (first column in listing). The local filename must be specified.</p><p><strong>getobject</strong> <em>object-id</em> <em>local-filename</em></p><p>Gets the object specified by the object id (in hex) and stores the raw contents in the local file specified. Note: This is only useful for debugging as it does not decode files from the stored format, which is encrypted and compressed.</p><p><strong>restore</strong> [-d] <em>directory-name</em> <em>local-directory-name</em></p><p><strong>restore -r</strong></p><p>Restores a directory to the local disc. The local directory specified must not exist (unless a previous restore is being restarted). The root cannot be restored -- restore locations individually.</p><p>Options:</p><p><strong>-d</strong></p><p>restore a deleted directory</p><p><strong>-r</strong></p><p>resume an interrupted restore</p><p>If a restore operation is interrupted for any reason, it can be restarted using the <strong>-r</strong> switch. Restore progress information is saved in a file at regular intervals during the restore operation to allow restarts.</p><p><strong>usage</strong> [-m]</p><p>Show space used on the server for this account. Display fields:</p><p>\h'-04'&bull;\h'+03'Used: Total amount of space used on the server</p><p>\h'-04'&bull;\h'+03'Old files: Space used by old files</p><p>\h'-04'&bull;\h'+03'Deleted files: Space used by deleted files</p><p>\h'-04'&bull;\h'+03'Directories: Space used by the directory structure</p><ul>
<li><p>When Used exceeds the soft limit, the server will start to remove old and deleted files until the usage drops below the soft limit. After a while, you should expect to see the usage stay at just below the soft limit. You only need more space if the space used by old and deleted files is near zero.</p><p>The <strong>-m</strong> option displays output in machine-readable form.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>If you find a bug in Box Backup and you want to let us know about it, join the <em>mailing list</em>[1] and send us a description of the problem there.</p><p>To report a bug, give us at least the following information:</p><p>\h'-04'&bull;\h'+03'The version of Box Backup you are running</p><p>\h'-04'&bull;\h'+03'The platform you are running on (hardware and OS), for both client and server.</p><p>\h'-04'&bull;\h'+03'If possible attach your config files (bbstored.conf, bbackupd.conf) to the bug report.</p><p>\h'-04'&bull;\h'+03'Also attach any log file output that helps shed light on the problem you are seeing.</p><p>\h'-04'&bull;\h'+03'And last but certainly not least, a description of what you are seeing, in as much detail as possible.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Ben Summers</p><p>Per Thomsen</p><p>James O\'Gorman</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>mailing list</p><p>http://lists.warhead.org.uk/mailman/listinfo/boxbackup</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bbackupd-config.8.html"><span aria-hidden="true">&larr;</span> bbackupd-config.8: Box backup client daemon configuration file generator</a></li>
   <li class="next"><a href="bbstoreaccounts.8.html">bbstoreaccounts.8: Box backup store accounts manager <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
