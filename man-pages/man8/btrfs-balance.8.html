<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>btrfs-balance: Balance btrfs filesystem</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Balance btrfs filesystem">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="btrfs-balance (8) manual">
  <meta name="twitter:description" content="Balance btrfs filesystem">
  <meta name="twitter:image" content="https://www.carta.tech/images/btrfs-tools-btrfs-balance-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/btrfs-balance.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="btrfs-balance (8) manual" />
  <meta property="og:description" content="Balance btrfs filesystem" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/btrfs-tools-btrfs-balance-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">btrfs-balance<small> (8)</small></h1>
        <p class="lead">Balance btrfs filesystem</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/btrfs-balance.8.html">
      <span itemprop="name">btrfs-balance: Balance btrfs filesystem</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/btrfs-tools/">
      <span itemprop="name">btrfs-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/btrfs-balance.8.html">
      <span itemprop="name">btrfs-balance: Balance btrfs filesystem</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>btrfs [filesystem] balance</strong> <em>&lt;subcommand&gt;</em>|<em>&lt;args&gt;</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>btrfs balance</strong> is used to balance chunks in a btrfs filesystem across multiple or even single device.</p><p>See <a href="../man8/btrfs-device.8.html"><strong>btrfs-device</strong>(8)</a> for more details about the effect on device management.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUBCOMMAND</h2>
        <div class="sectioncontent">
<p><em>&lt;path&gt;</em></p><p>Balance chunks across the devices <strong>online</strong>.</p><p><strong>btrfs balance </strong><strong></strong><em>&lt;path&gt;</em> is deprecated, please use <strong>btrfs balance start</strong> command instead.</p><p><strong>start</strong> [options] <em>&lt;path&gt;</em></p><p>Balance chunks across the devices <strong>online</strong>.</p><p>Balance and/or convert (change allocation profile of) chunks that passed all filters in a comma-separated list of filters for a particular chunk type. If filter list is not given balance all chunks of that type. In case none of the -d, -m or -s options is given balance all chunks in a filesystem.</p><p><strong>Options</strong></p><p>-d[<em>&lt;filters&gt;</em>]</p><p>act on data chunks. See <strong>FILTERS</strong> section for details about <em>&lt;filters&gt;</em>.</p><p>-m[<em>&lt;filters&gt;</em>]</p><p>act on metadata chunks. See <strong>FILTERS</strong> section for details about <em>&lt;filters&gt;</em>.</p><p>-s[<em>&lt;filters&gt;</em>]</p><p>act on system chunks (only under -f). See <strong>FILTERS</strong> section for details about <em>&lt;filters&gt;</em>.</p><p>-v</p><p>be verbose</p><p>-f</p><p>force reducing of metadata integrity</p><p><strong>pause</strong> <em>&lt;path&gt;</em></p><p>Pause running balance.</p><p><strong>cancel</strong> <em>&lt;path&gt;</em></p><p>Cancel running or paused balance.</p><p><strong>resume</strong> <em>&lt;path&gt;</em></p><p>Resume interrupted balance.</p><p><strong>status</strong> [-v] <em>&lt;path&gt;</em></p><p>Show status of running or paused balance.</p><p>If <em>-v</em> option is given, output will be verbose.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILTERS</h2>
        <div class="sectioncontent">
<p>From kernel 3.3 onwards, btrfs balance can limit its action to a subset of the full filesystem, and can be used to change the replication configuration (e.g. moving data from single to RAID-1). This functionality is accessed through the <em>-d</em>, <em>-m</em> or <em>-s</em> options to btrfs balance start, which filter on data, metadata and system blocks respectively.</p><p>A filter has the following stucture:</p><p><em>type</em>[=<em>params</em>][,<em>type</em>=...]</p><p>The available types are:</p><p><strong>profiles</strong></p><p>Balances only block groups with the given replication profiles. Parameters are a list of profile names separated by |.</p><p><strong>usage</strong></p><p>Balances only block groups with usage under the given percentage. The value of 0 is allowed and will clean up completely unused block groups, this should not require any new space allocated. You may want to use usage=0 in case balance is returnin ENOSPC and your filesystem is not too full.</p><p><strong>devid</strong></p><p>Balances only block groups which have at least one chunk on the given device (by btrfs device ID &ndash; use btrfs fi show to list device IDs)</p><p><strong>drange</strong></p><p>Balances only block groups which overlap with the given byte range on any device. (Use in conjunction with "devid" to filter on a specific device). The parameter is a range specified as <em>&lt;start..end&gt;</em>.</p><p><strong>vrange</strong></p><p>Balances only block groups which overlap with the given byte range in the filesystem\(cqs internal virtual address space. This is the address space that most reports from btrfs in the kernel log use. The parameter is a range specified as <em>&lt;start..end&gt;</em>.</p><p><strong>convert</strong></p><p>Convert each selected block group to the given profile name identified by parameters.</p><p><strong>limit</strong></p><p>Process only given number of chunks, after all filters apply. This can be used to specifically target a chunk in connection with other filters (drange, vrange) or just simply limit the amount of work done by a single balance run.</p><p><strong>soft</strong></p><p>Takes no parameters. Only has meaning when converting between profiles. When doing convert from one profile to another and soft mode is on, restriper won\(cqt touch chunks that already have the target profile. This is useful if e.g. half of the FS was converted earlier.</p><p>The soft mode switch is (like every other filter) per-type. This means that we can convert for example meta chunks the "hard" way while converting data chunks selectively with soft switch.</p><p>Profile names, used in profiles and convert are one of: <em>raid0</em>, <em>raid1</em>, <em>raid10</em>, <em>raid5</em>, <em>raid6</em>, <em>dup</em>, <em>single</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>btrfs balance</strong> returns a zero exit status if it succeeds. Non zero is returned in case of failure.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p><strong>btrfs</strong> is part of btrfs-progs. Please refer to the btrfs wiki \m[blue]<strong>http://btrfs.wiki.kernel.org</strong>\m[] for further details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO btrfs-balance&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/mkfs.btrfs.8.html"><strong>mkfs.btrfs</strong>(8)</a>, <a href="../man8/btrfs-device.8.html"><strong>btrfs-device</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="btrfs.8.html"><span aria-hidden="true">&larr;</span> btrfs.8: Control a btrfs filesystem</a></li>
   <li class="next"><a href="btrfs-check.8.html">btrfs-check.8: Check or repair a btrfs filesystem offline <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
