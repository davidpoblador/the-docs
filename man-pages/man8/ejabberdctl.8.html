<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ejabberdctl: Ejabberdctl  a control interface of ejabberd jabber/xmpp server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ejabberdctl  a control interface of ejabberd jabber/xmpp server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ejabberdctl (8) manual">
  <meta name="twitter:description" content="Ejabberdctl  a control interface of ejabberd jabber/xmpp server">
  <meta name="twitter:image" content="https://www.carta.tech/images/ejabberd-ejabberdctl-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ejabberdctl.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ejabberdctl (8) manual" />
  <meta property="og:description" content="Ejabberdctl  a control interface of ejabberd jabber/xmpp server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ejabberd-ejabberdctl-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ejabberdctl<small> (8)</small></h1>
        <p class="lead">Ejabberdctl  a control interface of ejabberd jabber/xmpp server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ejabberdctl.8.html">
      <span itemprop="name">ejabberdctl: Ejabberdctl  a control interface of ejabberd jabber/xmpp server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ejabberd/">
      <span itemprop="name">ejabberd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ejabberdctl.8.html">
      <span itemprop="name">ejabberdctl: Ejabberdctl  a control interface of ejabberd jabber/xmpp server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ejabberdctl</strong> <em>[--node nodename] [--auth user host password] [command [options]]</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ejabberdctl</strong>  is a front end to the ejabberd Jabber/XMPP server. It is designed to help the administrator control the functioning of the running <strong>ejabberd</strong> daemon.</p><p>This command must be run either by a superuser or by the user <strong>ejabberd</strong>, otherwise it will fail to start or to connect to the ejabberd instance.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--node</strong><em> nodename</em></p>
  </dt>
  <dd>
    <p>Specifies remote Erlang node to connect to. Default value is <em>ejabberd</em>. If the node name does not contain a symbol <em>@</em> then the actual node name becomes <em>node@host</em> where <em>host</em> is short hostname (usually it coincides with <em>\(gahostname -s\(ga</em>). If the node name contains a symbol <em>@</em> and its hostname part is a FQDN then <strong>ejabberd</strong> will use so-called long names (see <a href="../man1/erl.1.html"><strong>erl</strong>(1)</a> manual page and look for options <em>-name</em> and <em>-sname</em> for details).</p><p>Examples of <em>--node</em> option:</p><p><strong>ejabberd</strong> Connect to locally run ejabberd server at node <em>ejabberd@\(gahostname -s\(ga</em>.</p><p><strong>ejabberd@otherhost</strong> Connect to remotely run ejabberd server at node <em>ejabberd@otherhost</em>.</p><p><strong>ejabberd@localhost</strong> Connect to locally run ejabberd server at node <em>ejabberd@localhost</em>.</p><p>ejabberdctl honors <strong>ERLANG_NODE</strong> environment variable from /etc/default/ejabberd, see below.</p>
  </dd>
  <dt>
    <p><strong>--auth</strong><em> user host password</em></p>
  </dt>
  <dd>
    <p>If restriction of access to <strong>ejabberdctl</strong> commands is configured (see the "Restrict Execution with AccessCommands" section in the Installation and Operation Guide), this option must be used to authenticate the entity requesting execution of the command. <em>user</em> and <em>host</em> are the respective parts of the entity JID and <em>password</em> is either a plain text password to authenticate that JID or the MD5 hash of that password.</p>
  </dd>
  <dt>
    <p><strong>--concurrent</strong></p>
  </dt>
  <dd>
    <p>Due to the way <strong>ejabberdctl</strong> is implemented, it is normally not possible to run two instances of it in parallel&ndash;the second one will fail. This is OK in a common case when <strong>ejabberdctl</strong> is only run manually from time to time by a server administrator; if, conversely, there is a chance for several instances of <strong>ejabberdctl</strong> to be active at the same time (say, automated registration of new users on an actively used site), you can pass the <em>--concurrent</em> option to <strong>ejabberdctl</strong> which will ensure no clash will ever occur.</p><ul>
<li><p>Usage of the <em>--concurrent</em> option creates additional pressure on the server resources, and that is why the behaviour it implements is not the default. This issue is described in more detail in /usr/share/doc/ejabberd/README.Debian</p></li><li><p>Note that the semantics of this option can be changed in a future release.</p></li>
</ul>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>Some commands to <strong>ejabberdctl</strong> are single words, like <strong>status</strong>, and some are multi-word, like <strong>reopen-log</strong>; to join the adjacent words of the multi-word commands you can use either the underline ("_") symbol or the minus sign ("-") or a mixture of them, so all the following forms are valid: <strong>status_list_host</strong>, <strong>status-list-host</strong>, <strong>status_list-host</strong>.</p><p>When run without any <em>command</em> specified, <strong>ejabberdctl</strong> prints the list of available commands and their short descriptions.</p><p>The following commands can be used:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>help</strong><em> [--tags [tag] | PATTERN]</em></p>
  </dt>
  <dd>
    <p>The <strong>help</strong> command without any options does the same thing as running <strong>ejabberdctl</strong> without any command specified &ndash; it prints the list of available commands along with their short descriptions.</p><ul>
<li><p>The <em>--tags</em> option specified alone makes the <strong>help</strong> command print the list of supported "help tags" which group <strong>ejabberdctl</strong> commands on the basis of their purpose (such as debugging commands, backup commands etc).</p></li><li><p>The <em>--tags</em> option specified with a tag <em>tag</em> makes the <strong>help</strong> command print the list of commands associated wih the help tag <em>tag</em> along with their short descriptions.</p></li><li><p>If the <strong>help</strong> command is followed by a word other than "--tags", this word is interpreted as a pattern specifying a set of commands to print the help on. In this pattern, a "*" character matches any number of characters, including zero, and a "?" character matches any single character. Note that when running <strong>ejabberdctl</strong> with this form of the <strong>help</strong> command from the shell, you have to protect the characters in the pattern from being interpreted by the shell.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>debug</strong></p>
  </dt>
  <dd>
    <p>Attache an interactive Erlang shell to a running ejabberd server. To detach it press Ctrl+G, then input a character "q" and hit &lt;Return&gt;.</p>
  </dd>
  <dt>
    <p><strong>status</strong></p>
  </dt>
  <dd>
    <p>Request status of the Erlang virtual machine where ejabberd server is running.</p>
  </dd>
  <dt>
    <p><strong>stop</strong></p>
  </dt>
  <dd>
    <p>Stop the ejabberd server and its Erlang virtual machine.</p>
  </dd>
  <dt>
    <p><strong>stop-kindly</strong><em> delay announcement</em></p>
  </dt>
  <dd>
    <p>Broadcast an announcement <em>announcement</em> to all connected users, wait <em>delay</em> seconds and then stop the ejabberd server and its Erlang virtual machine.</p><ul>
<li><p>This command is interactive: it dumps the progress of the shutdown sequence to stdout (including waiting for the grace period to pass).</p></li><li><p>The <em>announcement</em> string is unconditionally interpreted as a sequence of UTF-8 characters no matter what locale settings the server and ejabberdctl processes see.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>restart</strong></p>
  </dt>
  <dd>
    <p>Restarts the ejabberd server inside Erlang virtual machine. Note that if you want to change VM options (enable/disable kernel poll or SMP, increase number of ports or database tables) you have to stop ejabberd completely and then start it again.</p>
  </dd>
  <dt>
    <p><strong>reopen-log</strong></p>
  </dt>
  <dd>
    <p>Force the ejabberd server to reopen its log files (<em>/var/log/ejabberd/ejabberd.log</em> and <em>/var/log/erlang.log</em> by default). If module mod_http_fileserver is loaded then force the ejabberd server to reopen its weblog file.</p>
  </dd>
  <dt>
    <p><strong>register</strong><em> user server password</em></p>
  </dt>
  <dd>
    <p>Register user <em>user</em> with password <em>password</em> at ejabberd virtual host <em>server</em>.</p>
  </dd>
  <dt>
    <p><strong>unregister</strong><em> user server</em></p>
  </dt>
  <dd>
    <p>Unregister user <em>user</em> at ejabberd virtual host <em>server</em>.</p>
  </dd>
  <dt>
    <p><strong>backup</strong><em> filepath</em></p>
  </dt>
  <dd>
    <p>Backup user database of the ejabberd server to file <em>filepath</em>.</p><ul>
<li><p>The directory in which <em>filepath</em> is located must be writable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>restore</strong><em> filepath</em></p>
  </dt>
  <dd>
    <p>Restore user database of the ejabberd server from backup file <em>filepath</em>.</p><ul>
<li><p>The file <em>filepath</em> must be readable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>install-fallback</strong><em> filepath</em></p>
  </dt>
  <dd>
    <p>Install a backup to <em>filepath</em> as fallback. The fallback will be used to restore the database at the next start-up.</p><ul>
<li><p>The directory in which <em>filepath</em> is located must be writable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>dump</strong><em> filepath</em></p>
  </dt>
  <dd>
    <p>Dump user database of the ejabberd server to text file <em>filepath</em>.</p><ul>
<li><p>The directory in which <em>filepath</em> is located must be writable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>load</strong><em> filepath</em></p>
  </dt>
  <dd>
    <p>Restore user database of the ejabberd server from text file <em>filepath</em>.</p><ul>
<li><p>The file <em>filepath</em> must be readable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>dump-table</strong><em> file table</em></p>
  </dt>
  <dd>
    <p>Dump the specified database <em>table</em> to the specified text <em>file</em>.</p><ul>
<li><p>The directory in which <em>file</em> is located must be writable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>import-file</strong><em> filepath</em></p>
  </dt>
  <dd>
    <p>Import user data from jabberd 1.4 spool file <em>filepath</em>. For example, if <em>filepath</em> is <em>.../example.org/user.xml</em> then imported username will be <em>user</em> and it will be imported to virtual server <em>example.org</em>.</p><ul>
<li><p>The file <em>filepath</em> must be readable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>import-dir</strong><em> directorypath</em></p>
  </dt>
  <dd>
    <p>Import user data from jabberd 1.4 spool directory <em>directorypath</em>. Directory name should be the name of virtual server to import users.</p><ul>
<li><p>The directory <em>directorypath</em> and the files in it must be readable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>mnesia-change-nodename</strong><em> oldnodename newnodename oldbackup newbackup</em></p>
  </dt>
  <dd>
    <p>Reads the backup file <em>oldbackup</em> (which should have been created using the <strong>ejabberdctl backup</strong> command) and writes its contents to the file <em>newbackup</em> while replacing in it all occurences of the Erlang node name <em>oldnodename</em> with the <em>newnodename</em>.</p><ul>
<li><p>This should be used to "migrate" the ejabberd database to the new hostname of the machine on which ejabberd runs in case this hostname is about to change. This is because ejabberd is actually served by an Erlang node which is bound to the name of the physical host to provide for clustering.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>rename-default-nodeplugin</strong></p>
  </dt>
  <dd>
    <p>Since release 2.0.0 and up to release 2.1.0, the implementation of publish-subscribe (pubsub) in ejabberd used a plugin named "node_default" as the default node plugin. Starting from release 2.1.0 this functionality is provided by the new plugin named "hometree". In the case of upgrading from an older version of ejabberd, its pubsub database might retain references to the old name of this plugin, "node_default", and this command can be used to upgrade the pubsub database, changing all these references to the new name - "hometree".</p><ul>
<li><p>Note that ejabberd automatically runs this command if you update from an ejabberd release 2.0.5 or older.</p></li><li><p>Running this command on already updated database does nothing.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>delete-expired-messages</strong></p>
  </dt>
  <dd>
    <p>Delete expired offline messages from ejabberd database.</p>
  </dd>
  <dt>
    <p><strong>delete-old-messages</strong><em> n</em></p>
  </dt>
  <dd>
    <p>Delete offline messages older than <em>n</em> days from ejabberd database.</p>
  </dd>
  <dt>
    <p><strong>mnesia</strong><em> info</em></p>
  </dt>
  <dd>
    <p>Show some information about the Mnesia system (see <strong>mnesia</strong>(3), function <em>info</em>).</p>
  </dd>
  <dt>
    <p><strong>mnesia</strong></p>
  </dt>
  <dd>
    <p>Show all information about the Mnesia system, such as transaction statistics, database nodes, and configuration parameters (see <strong>mnesia</strong>(3), function system_info).</p>
  </dd>
  <dt>
    <p><strong>mnesia</strong><em> key</em></p>
  </dt>
  <dd>
    <p>Show information about the Mnesia system according to <em>key</em> specified (see <strong>mnesia</strong>(3), function system_info for valid <em>key</em> values).</p>
  </dd>
  <dt>
    <p><strong>incoming-s2s-number</strong></p>
  </dt>
  <dd>
    <p>Print number of incoming server-to-server connections to the node.</p>
  </dd>
  <dt>
    <p><strong>outgoing-s2s-number</strong></p>
  </dt>
  <dd>
    <p>Print number of outgoing server-to-server connections from the node.</p>
  </dd>
  <dt>
    <p><strong>user-resources</strong><em> user server</em></p>
  </dt>
  <dd>
    <p>List all connected resources of user <em>user@server</em>.</p>
  </dd>
  <dt>
    <p><strong>connected-users-number</strong></p>
  </dt>
  <dd>
    <p>Report number of established users' sessions.</p>
  </dd>
  <dt>
    <p><strong>connected-users</strong></p>
  </dt>
  <dd>
    <p>Print full JIDs of all established sessions, one on a line.</p>
  </dd>
  <dt>
    <p><strong>connected-users-info</strong></p>
  </dt>
  <dd>
    <p>Print detailed information of all established sessions, one session on a line, with each session described as a list of whitespace-separated values: full JID, connection string (such as "c2s", "c2s_tls" etc), client IP address, client port number, resource priority, name of an Erlang node serving the session, session duration (in seconds).</p>
  </dd>
  <dt>
    <p><strong>connected-users-vhost</strong><em> server</em></p>
  </dt>
  <dd>
    <p>Print full JIDs of all users registered at the virtual host <em>server</em> which are currently connected to the ejabberd server, one on a line.</p>
  </dd>
  <dt>
    <p><strong>registered-users</strong><em> server</em></p>
  </dt>
  <dd>
    <p>List all the users registered on the ejabberd server at the virtual host <em>server</em>.</p>
  </dd>
  <dt>
    <p><strong>get-loglevel</strong></p>
  </dt>
  <dd>
    <p>Print the log level (an integer number) ejabberd is operating on.</p>
  </dd>

</dl>
<h3>EXPORTING DATA TO PIEFXIS (XEP-0227) FORMAT</h3>
<p>The commands described in this section require availability of the <strong>exmpp</strong> library which is not shipped with ejabberd. Your can download its source code from <em>http://exmpp.org</em>.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>export-piefxis</strong><em> dir</em></p>
  </dt>
  <dd>
    <p>Export data of all users registered on all virtual hosts of the server to a set of PIEFXIS files which will be stored in the directory <em>dir</em>.</p><ul>
<li><p>The directory <em>dir</em> must be writable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>export-piefxis-host</strong><em> dir host</em></p>
  </dt>
  <dd>
    <p>Export data of all the users registered on the specified virtual host <em>host</em> to a set of PIEFXIS files which will be stored in the directory <em>dir</em>.</p><ul>
<li><p>The directory <em>dir</em> and the files in it must be readable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>import-piefxis</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Import users' data from a PIEFXIS file <em>file</em>.</p><ul>
<li><p>The file <em>file</em> must be readable by the user "ejabberd".</p></li>
</ul>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTRA OPTIONS</h2>
        <div class="sectioncontent">
<p>An optional module <strong>mod_admin_extra</strong> adds a number of other commands.</p><p>While it is enabled by default, you might want to check it is actually enabled in the configuration file (especially if you're upgrading from pre-2.1 series of ejabberd).</p><p>To enable these additional commands add mod_admin_extra to the <strong>{modules}</strong> section of ejabberd config file and make it looking as the following:</p>
<pre>
{modules,
 [
  ...
  {mod_admin_extra, []},
  ...
 ]}.
</pre>
<p>Most of additional commands possess extended descriptions which can be printed using <strong>ejabberdctl help</strong> <em>command</em></p><p>The new commands are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>add-rosteritem</strong><em> localuser localserver user server nick group subscription</em></p>
  </dt>
  <dd>
    <p>Add to the roster of the user <em>localuser</em> registered on the virtual host <em>localserver</em> a new entry for the user <em>user</em> on the server <em>server</em>, assign the nickname <em>nick</em> to it, place this entry to the group <em>group</em> and set its subscription type to <em>subscription</em> which is one of "none", "from", "to" or "both".</p>
  </dd>
  <dt>
    <p><strong>delete-rosteritem</strong><em> localuser localserver user server</em></p>
  </dt>
  <dd>
    <p>Delete from the roster of the user <em>localuser</em> on the server <em>localserver</em> an entry for the JID <em>user</em>@<em>server</em>.</p>
  </dd>
  <dt>
    <p><strong>ban-account</strong><em> user host reason</em></p>
  </dt>
  <dd>
    <p>Ban the user <em>user</em> registered on the virtual host <em>host</em>. This is done by kicking their active sessions with the reason <em>reason</em> and replacing their password with a randomly generated one.</p>
  </dd>
  <dt>
    <p><strong>kick-session</strong><em> user host resource reason</em></p>
  </dt>
  <dd>
    <p>Kick the session opened by the user <em>user</em> registered on the virtual host <em>host</em> and having the resource <em>resource</em> bound to it providing the reason <em>reason</em>.</p>
  </dd>
  <dt>
    <p><strong>change-password</strong><em> user host newpass</em></p>
  </dt>
  <dd>
    <p>Change password of the user <em>user</em> registered on the virtual host <em>host</em> to <em>newpass</em>.</p>
  </dd>
  <dt>
    <p><strong>check-account</strong><em> user host</em></p>
  </dt>
  <dd>
    <p>Exit with code 0 if the user <em>user</em> is registered on the virtual host <em>host</em>, exit with code 1 otherwise.</p>
  </dd>
  <dt>
    <p><strong>check-password</strong><em> user host password</em></p>
  </dt>
  <dd>
    <p>Exit with code 0 the user <em>user</em> registered on the virtual host <em>host</em> has password <em>password</em>, exit with code 1 otherwise.</p>
  </dd>
  <dt>
    <p><strong>check-password-hash</strong><em> user host passwordhash hashmethod</em></p>
  </dt>
  <dd>
    <p>Exit with code 0 if the user <em>user</em> registered on the virtual host <em>host</em> has a password, the hash of which, calculated using the <em>hashmethod</em> is equal to the hash <em>passwordhash</em>; exit with code 1 otherwise.</p><ul>
<li><p>Allowed hashing methods are "md5" and "sha" (for SHA-1).</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>compile</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Compile and reload the Erlang source code file <em>file</em>.</p><ul>
<li><p>The file <em>file</em> must be readable by the user "ejabberd".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>load-config</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Load ejabberd configuration from the file <em>file</em>.</p><ul>
<li><p>The file <em>file</em> must be readable by the user "ejabberd".</p></li><li><p>Note that loading config to a database does not mean reloading the server &ndash; for example it's impossible to add/remove virtual hosts without server restart. In fact, only ACLs, access rules and a few global options are applied upon reloading.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>delete-old-users</strong><em> days</em></p>
  </dt>
  <dd>
    <p>Delete accounts and all related data of users who did not log on the server for <em>days</em> days.</p>
  </dd>
  <dt>
    <p><strong>delete-old-users-vhost</strong><em> host days</em></p>
  </dt>
  <dd>
    <p>Delete accounts and all related data of users registered on the virtual host <em>host</em> who did not log on the server for <em>days</em> days.</p>
  </dd>
  <dt>
    <p><strong>export2odbc</strong><em> host path</em></p>
  </dt>
  <dd>
    <p>Export Mnesia database tables keeping the data for the virtual host <em>host</em> to a set of text files created under the specified directory <em>path</em>, which must exist and must be writable by the user "ejabberd".</p>
  </dd>
  <dt>
    <p><strong>get-cookie</strong></p>
  </dt>
  <dd>
    <p>Print the cookie used by the Erlang node which runs ejabberd instance <strong>ejabberdctl</strong> controls.</p>
  </dd>
  <dt>
    <p><strong>get-roster</strong><em> user host</em></p>
  </dt>
  <dd>
    <p>Print the roster of the user <em>user</em> registered on the virtual host <em>host</em>.</p><ul>
<li><p>The information printed is a series of lines each representing one roster entry; each line consist of four fields separated by tab characters representing, in this order: the JID of an entry, its nickname, subscription type and group.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>push-roster</strong><em> file user host</em></p>
  </dt>
  <dd>
    <p>Push items from the file <em>file</em> to the roster of the user <em>user</em> registered on the virtual host <em>host</em>.</p><ul>
<li><p>The format of file containing roster items is the same as used for output by the <strong>get-roster</strong> command.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>push-roster-all</strong><em> file</em></p>
  </dt>
  <dd>
    <ul>
<li><p>The format of file containing roster items is the same as used for output by the <strong>get-roster</strong> command.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>push-alltoall</strong><em> host group</em></p>
  </dt>
  <dd>
    <p>All entries for all the users registered on the virtual host <em>host</em> to the rosters of all the users registered on this virtual host. The created entries are assigned to the roster group <em>group</em>.</p>
  </dd>
  <dt>
    <p><strong>process-rosteritems</strong><em> action subs asks users contacts</em></p>
  </dt>
  <dd>
    <p><strong>FIXME</strong> no information available. Do not use.</p>
  </dd>
  <dt>
    <p><strong>get-vcard</strong><em> user host name</em></p>
  </dt>
  <dd>
    <p>Print the contents of the field <em>name</em> of a vCard belonging to the user <em>user</em> registered on the virtual host <em>host</em>. If this field is not set of the user did not create their vCard, and empty string is printed (that is, containing only the line break).</p><ul>
<li><p>For example <em>name</em> can be "FN" or "NICKNAME" For retrieving email address use "EMAIL USERID". Names and descriptions of other supported fields can be obtained from the XEP-0054 document (http://www.xmpp.org/extensions/xep-0054.html).</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>get-vcard2</strong><em> user host name subname</em></p>
  </dt>
  <dd>
    <p>Print the contents of the subfield <em>subname</em> of the field <em>name</em> of a vCard belonging to the user <em>user</em> registered on the virtual host <em>host</em>. If this field is not set of the user did not create their vCard, and empty string is printed (that is, containing only the line break).</p>
  </dd>
  <dt>
    <p><strong>set-vcard</strong><em> user host name content</em></p>
  </dt>
  <dd>
    <p>Set the field <em>name</em> to the string <em>content</em> in the vCard of the user <em>user</em> registered on the virtual host <em>host</em>.</p>
  </dd>
  <dt>
    <p><strong>set-vcard2</strong><em> user host name subname content</em></p>
  </dt>
  <dd>
    <p>Set the subfield <em>subname</em> of the field <em>name</em> to the string <em>content</em> in the vCard of the user <em>user</em> registered on the virtual host <em>host</em>.</p>
  </dd>
  <dt>
    <p><strong>set-nickname</strong><em> user host nickname</em></p>
  </dt>
  <dd>
    <p>Set the "nickname" field in the vCard of the user <em>user</em> registered on the virtual host <em>host</em> to <em>nickname</em>.</p>
  </dd>
  <dt>
    <p><strong>num-active-users</strong><em> host days</em></p>
  </dt>
  <dd>
    <p>Print number of users registered on the virtual host <em>host</em> who logged on the server at least once during the last <em>days</em> days.</p>
  </dd>
  <dt>
    <p><strong>num-resources</strong><em> user host</em></p>
  </dt>
  <dd>
    <p>Print the number of resources (that is, active sessions) the user <em>user</em> registered on the virtual host <em>host</em> currently has. If the specified user has no active sessions, print the string "0".</p>
  </dd>
  <dt>
    <p><strong>resource-num</strong><em> user host num</em></p>
  </dt>
  <dd>
    <p>Print the resource of a session number <em>num</em> the user <em>user</em> registered on the virtual host <em>host</em> has currently open. <em>num</em> must be a positive integer, greater than or equal to 1.</p><ul>
<li><p>If the session number specified is less than 1 or greater than the number of sessions opened by the user, an error message is printed.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>remove-node</strong><em> node</em></p>
  </dt>
  <dd>
    <p>Remove the Erlang node <em>node</em> from the Mnesia database cluster.</p>
  </dd>
  <dt>
    <p><strong>send-message-chat</strong><em> from to body</em></p>
  </dt>
  <dd>
    <p>Send a message of type "chat" from the JID <em>from</em> to the (local or remote) JID <em>to</em> containing the body <em>body</em>. Both bare and full JIDs are supported.</p>
  </dd>
  <dt>
    <p><strong>send-message-headline</strong><em> from to subject body</em></p>
  </dt>
  <dd>
    <p>Send a message of type "headline" from the JID <em>from</em> to the (local or remote) JID <em>to</em> containing the body <em>body</em> and subject <em>subject</em>. Both bare and full JIDs are supported.</p>
  </dd>
  <dt>
    <p><strong>send-stanza-c2s</strong><em> user server resource stanza</em></p>
  </dt>
  <dd>
    <p>Send XML string <em>stanza</em> to the stream to which the session <em>user@server/resource</em> is bound. The stanza must be well-formed (according to RFC 3920) and the session must be active.</p><ul>
<li><p>For example:</p>
<pre>
ejabberdctl send-stanza-c2s john_doe example.com Bahamas &#92;
  '&lt;message id="1" type="chat"&gt;&lt;body&gt;How goes?&lt;/body&gt;&lt;/message&gt;'
</pre>
</li>
</ul>
  </dd>
  <dt>
    <p><strong>srg-create</strong><em> group host name description display</em></p>
  </dt>
  <dd>
    <p>Create a new shared roster group <em>group</em> on the virtual host <em>host</em> with displayed name <em>name</em>, description <em>description</em> and displayed groups <em>display</em>.</p>
  </dd>
  <dt>
    <p><strong>srg-delete</strong><em> group host</em></p>
  </dt>
  <dd>
    <p>Delete the shared roster group <em>group</em> from the virtual host <em>host</em>.</p>
  </dd>
  <dt>
    <p><strong>srg-user-add</strong><em> user server group host</em></p>
  </dt>
  <dd>
    <p>Add an entry for the JID <em>user</em>@<em>server</em> to the group <em>group</em> on the virtual host <em>host</em>.</p>
  </dd>
  <dt>
    <p><strong>srg-user-del</strong><em> user server group host</em></p>
  </dt>
  <dd>
    <p>Delete an entry for the JID <em>user</em>@<em>server</em> from the group <em>group</em> on the virtual host <em>host</em>.</p>
  </dd>
  <dt>
    <p><strong>srg-list</strong><em> host</em></p>
  </dt>
  <dd>
    <p>List the shared roster groups on the virtual host <em>host</em>.</p>
  </dd>
  <dt>
    <p><strong>srg-get-info</strong><em> group host</em></p>
  </dt>
  <dd>
    <p>Print info on the shared roster group <em>group</em> on the virtual host <em>host</em>.</p>
  </dd>
  <dt>
    <p><strong>srg-get-members</strong><em> group host</em></p>
  </dt>
  <dd>
    <p>Print members of the shared roster group <em>group</em> on the virtual host <em>host</em>.</p>
  </dd>
  <dt>
    <p><strong>private-get</strong><em> user server element namespace</em></p>
  </dt>
  <dd>
    <p>Prints an XML stanza which would be sent by the server it it received an IQ-request of type "get" with the</p>
<pre>
&lt;<em>element</em> xmlns="<em>namespace</em>"/&gt;
</pre>
<p>payload from <em>user@server</em>.</p><ul>
<li><p>For example:</p>
<pre>
ejabberdctl private-get john_doe example.com &#92;
  storage storage:bookmarks
</pre>
<p>would return user's bookmarks, managed according to XEP-0048.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>private-set</strong><em> user server element</em></p>
  </dt>
  <dd>
    <p>Allows one to simulate <em>user@server</em> sending an IQ-request of type "set" containing <em>element</em> as its payload; the payload is processed by the code managing users' private storage (XEP-0049 "Private XML Storage").</p><ul>
<li><p>The string <em>element</em> must be a well-formed XML obeying the rules defined for IQ-request payloads in RFC 3920.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>privacy-set</strong><em> user server element</em></p>
  </dt>
  <dd>
    <p>Allows one to simulate <em>user@server</em> sending an IQ-request of type "set" containing <em>element</em> as its payload; this payload is processed by the code managing privacy lists (XEP-0016 "Privacy lists").</p><ul>
<li><p>The string <em>element</em> must be a well-formed XML obeying the rules defined for IQ-request payloads in RFC 3920.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>stats</strong><em> topic</em></p>
  </dt>
  <dd>
    <p>Print statistics on the topic <em>topic</em>. The valid topics and their meaning are:</p><ul>
<li><p><strong>registeredusers</strong> Print the number of users registered on the server.</p></li><li><p><strong>onlineusers</strong> Print the number of users currently logged into the server.</p></li><li><p><strong>onlineusersnode</strong> Print the number of users logged into the server which are served by the current ejabberd Erlang node.</p></li><li><p><strong>uptimeseconds</strong> Print the uptime of the current ejabberd Erlang node, in seconds.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>stats-host</strong><em> host topic</em></p>
  </dt>
  <dd>
    <p>Print statistics on the topic <em>topic</em> for the virtual host <em>host</em>. The valid topics and their meaning are:</p><ul>
<li><p><strong>registeredusers</strong> Print the number of users registered on the host <em>host</em>.</p></li><li><p><strong>onlineusers</strong> Print the number of users currently logged into the server, which are registered on the host <em>host</em>.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>status-list</strong><em> status</em></p>
  </dt>
  <dd>
    <p>Print the users currently logged into the server and having the presence status <em>status</em>. The entries are printed one per line; each entry consists of the four fields separated by tab characters, in this order: the node part of the user's JID, the host part of the user's JID, the user's session resource, the priority of the user's session and the user's status description.</p><ul>
<li><p>The <em>status</em> parameter can take the following values: "available", "away", "xa", "dnd" and "chat".</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>status-list-host</strong><em> host status</em></p>
  </dt>
  <dd>
    <p>Print the users currently logged into the server which are registered on the virtual host <em>host</em> and have the presence status <em>status</em>.</p><ul>
<li><p>The available values for the <em>status</em> parameter and the format of the output data are the same as of the <strong>status-list</strong> subcommand.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>status-num</strong><em> status</em></p>
  </dt>
  <dd>
    <p>Print the number of users currently logged into the server and having the presence status <em>status</em>.</p><ul>
<li><p>The available values for the <em>status</em> parameter are the same as of the <strong>status-list</strong> subcommand.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>status-num-host</strong><em> host status</em></p>
  </dt>
  <dd>
    <p>Print the number of users currently logged into the server which are registered on the virtual host <em>host</em> and have the presence status <em>status</em>.</p><ul>
<li><p>The available values for the <em>status</em> parameter are the same as of the <strong>status-list</strong> subcommand.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>user-sessions-info</strong><em> user server</em></p>
  </dt>
  <dd>
    <p>Print detailed information on all sessions currently established by <em>user@server</em>. For each session, one line of output is generated, containing the following fields separated by tab characters: connection string (such as "c2s", "c2s_tls" etc), remote IP address, remote port number, priority of the resource bound to this session, name of an Erlang node serving the session, session uptime (in seconds), resource string.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><strong>ejabberdctl</strong> starts distributed Erlang node <em>ejabberddebug</em> (if run with <strong>debug</strong> option) or <em>ejabberdctl</em> (if run with any other options). If the ejabberd server's node name to connect to includes FDQN as a hostname Erlang option <em>-name</em> is used. Otherwise <strong>ejabberdctl</strong> uses short names (<em>-sname</em> option).</p><p>Note that <strong>ejabberdctl</strong> does not append hostname to its own node name leaving this to Erlang emulator. It usually follows <em>\(gahostname -f\(ga</em> to find a hostname if long names are used or <em>\(gahostname -s\(ga</em> in case of short names, but may fail in case of unusual networking settings. A known case of failure is using long names when <em>\(gahostname -f\(ga</em> doesn't return FDQN. If ejabberdctl cannot create Erlang node then it cannot control ejabberd server.</p><p><strong>ejabberdctl</strong> does not do anything by itself except for connecting to the running ejabberd instance and telling it about the action requested by the user. Hence all the <strong>ejabberdctl</strong>'s operations involving writing or reading files or directories are actually performed by the server process which runs with the uid and gid of the user and group "ejabberd", respectively. This must be taken into account when requesting such operations to be done.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS FILE</h2>
        <div class="sectioncontent">
<p>The file <strong>/etc/default/ejabberd</strong> contains specific options. Two of them are used by <strong>ejabberdctl</strong>.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>ERLANG_NODE</strong></p>
  </dt>
  <dd>
    <p>Use specified string as Erlang node of <strong>ejabberd</strong> server to connect. It overrides default <strong>ejabberd</strong> node name. The string may take one of the following forms: <strong>nodename</strong>, <strong>nodename@hostname</strong> or <strong>nodename@hostname.domainname</strong>.</p>
  </dd>
  <dt>
    <p><strong>FIREWALL_WINDOW</strong></p>
  </dt>
  <dd>
    <p>Use the specified range of ports to communicate with the other Erlang nodes (namely, with the target Erlang node running ejabberd). This can be useful when the system running the target node has restricted firewall setup allowing only a certain range of ports to be used by the Erlang nodes for communication; in this case, you should specify that range of ports in the <strong>FIREWALL_WINDOW</strong> setting.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/etc/default/ejabberd</em> default variables</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ejabberdctl&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/erl.1.html"><strong>erl</strong>(1)</a>, <strong>ejabberd</strong>(8), <strong>mnesia</strong>(3).</p><p>The program documentation is available at <em>http://www.process-one.net/en/projects/ejabberd/</em>. A copy of the documentation can be found at /usr/share/doc/ejabberd/guide.html.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>This manual page was adapted by Sergei Golovan &lt;sgolovan@nes.ru&gt; for the <strong>Debian</strong> system (but may be used by others) from the <strong>ejabberd</strong> documentation written by Alexey Shchepin &lt;alexey@sevcom.net&gt;. Updated by Konstantin Khomoutov &lt;flatworm@users.sourceforge.net&gt;.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2 any later version published by the Free Software Foundation.</p><p>On Debian systems, the complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ejabberd2prosody.8.html"><span aria-hidden="true">&larr;</span> ejabberd2prosody.8: Ejabbed db dump importer for prosody</a></li>
   <li class="next"><a href="ekey-rekey.8.html">ekey-rekey.8: Entropy key long term session key tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
