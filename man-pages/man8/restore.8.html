<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>restore: Restore files or file systems from backups made with dump</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Restore files or file systems from backups made with dump">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="restore (8) manual">
  <meta name="twitter:description" content="Restore files or file systems from backups made with dump">
  <meta name="twitter:image" content="https://www.carta.tech/images/dump-restore-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/restore.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="restore (8) manual" />
  <meta property="og:description" content="Restore files or file systems from backups made with dump" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dump-restore-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">restore<small> (8)</small></h1>
        <p class="lead">Restore files or file systems from backups made with dump</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/restore.8.html">
      <span itemprop="name">restore: Restore files or file systems from backups made with dump</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dump/">
      <span itemprop="name">dump</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/restore.8.html">
      <span itemprop="name">restore: Restore files or file systems from backups made with dump</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>restore -C</strong> [<strong>-cdHklMvVy</strong>] [<strong>-b </strong><em>blocksize</em>] [<strong>-D </strong><em>filesystem</em>] [<strong>-f </strong><em>file</em>] [<strong>-F </strong><em>script</em>] [<strong>-L </strong><em>limit</em>] [<strong>-s </strong><em>fileno</em>] [<strong>-T </strong><em>directory</em>]</p><p><strong>restore -i</strong> [<strong>-acdhHklmMNouvVy</strong>] [<strong>-A </strong><em>file</em>] [<strong>-b </strong><em>blocksize</em>] [<strong>-f </strong><em>file</em>] [<strong>-F </strong><em>script</em>] [<strong>-Q </strong><em>file</em>] [<strong>-s </strong><em>fileno</em>] [<strong>-T </strong><em>directory</em>]</p><p><strong>restore -P</strong> <em>file</em> [<strong>-acdhHklmMNuvVy</strong>] [<strong>-b </strong><em>blocksize</em>] [<strong>-f </strong><em>file</em>] [<strong>-F </strong><em>script</em>] [<strong>-s </strong><em>fileno</em>] [<strong>-T </strong><em>directory</em>] [<strong>-X </strong><em>filelist</em>] [ <em>file ... </em>]</p><p><strong>restore -R</strong> [<strong>-cdHklMNuvVy</strong>] [<strong>-b </strong><em>blocksize</em>] [<strong>-f </strong><em>file</em>] [<strong>-F </strong><em>script</em>] [<strong>-s </strong><em>fileno</em>] [<strong>-T </strong><em>directory</em>]</p><p><strong>restore -r</strong> [<strong>-cdHklMNuvVy</strong>] [<strong>-b </strong><em>blocksize</em>] [<strong>-f </strong><em>file</em>] [<strong>-F </strong><em>script</em>] [<strong>-s </strong><em>fileno</em>] [<strong>-T </strong><em>directory</em>]</p><p><strong>restore -t</strong> [<strong>-cdhHklMNuvVy</strong>] [<strong>-A </strong><em>file</em>] [<strong>-b </strong><em>blocksize</em>] [<strong>-f </strong><em>file</em>] [<strong>-F </strong><em>script</em>] [<strong>-Q </strong><em>file</em>] [<strong>-s </strong><em>fileno</em>] [<strong>-T </strong><em>directory</em>] [<strong>-X </strong><em>filelist</em>] [ <em>file ... </em>]</p><p><strong>restore -x</strong> [<strong>-adchHklmMNouvVy</strong>] [<strong>-A </strong><em>file</em>] [<strong>-b </strong><em>blocksize</em>] [<strong>-f </strong><em>file</em>] [<strong>-F </strong><em>script</em>] [<strong>-Q </strong><em>file</em>] [<strong>-s </strong><em>fileno</em>] [<strong>-T </strong><em>directory</em>] [<strong>-X </strong><em>filelist</em>] [ <em>file ... </em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>restore</strong> command performs the inverse function of <a href="../man8/dump.8.html"><strong>dump</strong>(8)</a>. A full backup of a file system may be restored and subsequent incremental backups layered on top of it. Single files and directory subtrees may be restored from full or partial backups. <strong>Restore</strong> works across a network; to do this see the <strong>-f</strong> flag described below. Other arguments to the command are file or directory names specifying the files that are to be restored. Unless the <strong>-h</strong> flag is specified (see below), the appearance of a directory name refers to the files and (recursively) subdirectories of that directory.</p><p>Exactly one of the following flags is required:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-C</strong></p>
  </dt>
  <dd>
    <p>This mode allows comparison of files from a dump. <strong>Restore</strong> reads the backup and compares its contents with files present on the disk. It first changes its working directory to the root of the filesystem that was dumped and compares the tape with the files in its new current directory. See also the <strong>-L</strong> flag described below.</p>
  </dd>
  <dt>
    <p><strong>-i</strong></p>
  </dt>
  <dd>
    <p>This mode allows interactive restoration of files from a dump. After reading in the directory information from the dump, <strong>restore</strong> provides a shell like interface that allows the user to move around the directory tree selecting files to be extracted. The available commands are given below; for those commands that require an argument, the default is the current directory.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>add </strong>[<em>arg</em>]</p>
  </dt>
  <dd>
    <p>The current directory or specified argument is added to the list of files to be extracted.  If a directory is specified, then it and all its descendents are added to the extraction list (unless the <strong>-h</strong> flag is specified on the command line). Files that are on the extraction list are prepended with a &ldquo;*&rdquo; when they are listed by <strong>ls</strong>.</p>
  </dd>
  <dt>
    <p><strong>cd</strong><em> arg</em></p>
  </dt>
  <dd>
    <p>Change the current working directory to the specified argument.</p>
  </dd>
  <dt>
    <p><strong>delete </strong>[<em>arg</em>]</p>
  </dt>
  <dd>
    <p>The current directory or specified argument is deleted from the list of files to be extracted. If a directory is specified, then it and all its descendents are deleted from the extraction list (unless the <strong>-h</strong> flag is specified on the command line). The most expedient way to extract most of the files from a directory is to add the directory to the extraction list and then delete those files that are not needed.</p>
  </dd>
  <dt>
    <p><strong>extract</strong></p>
  </dt>
  <dd>
    <p>All files on the extraction list are extracted from the dump. <strong>Restore</strong> will ask which volume the user wishes to mount. The fastest way to extract a f ew files is to start with the last volume and work towards the first volume.</p>
  </dd>
  <dt>
    <p><strong>help</strong></p>
  </dt>
  <dd>
    <p>List a summary of the available commands.</p>
  </dd>
  <dt>
    <p><strong>ls </strong>[<em>arg</em>]</p>
  </dt>
  <dd>
    <p>List the current or specified directory. Entries that are directories are appended with a &ldquo;/&rdquo;. Entries that have been marked for extraction are prepended with a &ldquo;*&rdquo;. If the verbose flag is set, the inode number of each entry is also listed.</p>
  </dd>
  <dt>
    <p><strong>pwd</strong></p>
  </dt>
  <dd>
    <p>Print the full pathname of the current working directory.</p>
  </dd>
  <dt>
    <p><strong>quit</strong></p>
  </dt>
  <dd>
    <p><strong>Restore</strong> immediately exits, even if the extraction list is not empty.</p>
  </dd>
  <dt>
    <p><strong>setmodes</strong></p>
  </dt>
  <dd>
    <p>All directories that have been added to the extraction list have their owner, modes, and times set; nothing is extracted from the dump. This is useful for cleaning up after a <strong>restore</strong> has been prematurely aborted.</p>
  </dd>
  <dt>
    <p><strong>verbose</strong></p>
  </dt>
  <dd>
    <p>The sense of the <strong>-v</strong> flag is toggled. When set, the verbose flag causes the <strong>ls</strong> command to list the inode numbers of all entries. It also causes <strong>restore</strong> to print out information about each file as it is extracted.</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-P</strong><em> file</em></p>
  </dt>
  <dd>
    <p><strong>Restore</strong> creates a new Quick File Access file <em>file</em> from an existing dump file without restoring its contents.</p>
  </dd>
  <dt>
    <p><strong>-R</strong></p>
  </dt>
  <dd>
    <p><strong>Restore</strong> requests a particular tape of a multi-volume set on which to restart a full restore (see the <strong>-r</strong> flag below). This is useful if the restore has been interrupted.</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>Restore (rebuild) a file system. The target file system should be made pristine with <a href="../man8/mke2fs.8.html"><strong>mke2fs</strong>(8)</a>, mounted, and the user <strong>cd</strong>'d into the pristine file system before starting the restoration of the initial level 0 backup. If the level 0 restores successfully, the <strong>-r</strong> flag may be used to restore any necessary incremental backups on top of the level 0. The <strong>-r</strong> flag precludes an interactive file extraction and can be detrimental to one's health (not to mention the disk) if not used carefully. An example:</p><ul>
<li><p><strong>mke2fs /dev/sda1</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>mount /dev/sda1 /mnt</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>cd /mnt</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>restore rf /dev/st0</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>
</li><li><p>Note that <strong>restore</strong> leaves a file <em>restoresymtable</em> in the root directory to pass information between incremental restore passes. This file should be removed when the last incremental has been restored.</p></li><li><p><strong>Restore</strong>, in conjunction with <a href="../man8/mke2fs.8.html"><strong>mke2fs</strong>(8)</a> and <a href="../man8/dump.8.html"><strong>dump</strong>(8)</a>, may be used to modify file system parameters such as size or block size.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>The names of the specified files are listed if they occur on the backup. If no file argument is given, the root directory is listed, which results in the entire content of the backup being listed, unless the <strong>-h</strong> flag has been specified.  Note that the <strong>-t</strong> flag replaces the function of the old <strong>dumpdir</strong>(8) program.  See also the <strong>-X</strong> option below.</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>The named files are read from the given media. If a named file matches a directory whose contents are on the backup and the <strong>-h</strong> flag is not specified, the directory is recursively extracted. The owner, modification time, and mode are restored (if possible). If no file argument is given, the root directory is extracted, which results in the entire content of the backup being extracted, unless the <strong>-h</strong> flag has been specified.  See also the <strong>-X</strong> option below.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The following additional options may be specified:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-a</strong></p>
  </dt>
  <dd>
    <p>In <strong>-i</strong> or <strong>-x</strong> mode, <strong>restore</strong> does ask the user for the volume number on which the files to be extracted are supposed to be (in order to minimise the time by reading only the interesting volumes). The <strong>-a</strong> option disables this behaviour and reads all the volumes starting with 1. This option is useful when the operator does not know on which volume the files to be extracted are and/or when he prefers the longer unattended mode rather than the shorter interactive mode.</p>
  </dd>
  <dt>
    <p><strong>-A</strong><em> archive_file</em></p>
  </dt>
  <dd>
    <p>Read the table of contents from <em>archive_file</em> instead of the media. This option can be used in combination with the <strong>-t</strong>, <strong>-i</strong>, or <strong>-x</strong> options, making it possible to check whether files are on the media without having to mount the media.</p>
  </dd>
  <dt>
    <p><strong>-b</strong><em> blocksize</em></p>
  </dt>
  <dd>
    <p>The number of kilobytes per dump record. If the <strong>-b</strong> option is not specified, <strong>restore</strong> tries to determine the media block size dynamically.</p>
  </dd>
  <dt>
    <p><strong>-c</strong></p>
  </dt>
  <dd>
    <p>Normally, <strong>restore</strong> will try to determine dynamically whether the dump was made from an old (pre-4.4) or new format file system. The <strong>-c</strong> flag disables this check, and only allows reading a dump in the old format.</p>
  </dd>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>The <strong>-d</strong> (debug) flag causes <strong>restore</strong> to print debug information.</p>
  </dd>
  <dt>
    <p><strong>-D</strong><em> filesystem</em></p>
  </dt>
  <dd>
    <p>The <strong>-D</strong> flag allows the user to specify the filesystem name when using <strong>restore</strong> with the <strong>-C</strong> option to check the backup.</p>
  </dd>
  <dt>
    <p><strong>-f</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Read the backup from <em>file</em>; <em>file</em> may be a special device file like <em>/dev/st0</em> (a tape drive), <em>/dev/sda1</em> (a disk drive), an ordinary file, or <em>-</em> (the standard input). If the name of the file is of the form <em>host:file</em> or <em>user@host:file</em>, <strong>restore</strong> reads from the named file on the remote host using <strong>rmt</strong>(8).</p>
  </dd>
  <dt>
    <p><strong>-F</strong><em> script</em></p>
  </dt>
  <dd>
    <p>Run script at the beginning of each tape. The device name and the current volume number are passed on the command line. The script must return 0 if <strong>restore</strong> should continue without asking the user to change the tape, 1 if <strong>restore</strong> should continue but ask the user to change the tape. Any other exit code will cause <strong>restore</strong> to abort. For security reasons, <strong>restore</strong> reverts back to the real user ID and the real group ID before running the script.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Extract the actual directory, rather than the files that it references. This prevents hierarchical restoration of complete subtrees from the dump.</p>
  </dd>
  <dt>
    <p><strong>-H</strong><em> hash_size</em></p>
  </dt>
  <dd>
    <p>Use a hashtable having the specified number of entries for storing the directories entries instead of a linked list. This hashtable will considerably speed up inode lookups (visible especially in interactive mode when adding/removing files from the restore list), but at the price of much more memory usage. The default value is 1, meaning no hashtable is used.</p>
  </dd>
  <dt>
    <p><strong>-k</strong></p>
  </dt>
  <dd>
    <p>Use Kerberos authentication when contacting the remote tape server. (Only available if this options was enabled when <strong>restore</strong> was compiled.)</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>When doing remote restores, assume the remote file is a regular file (instead of a tape device). If you're restoring a remote compressed file, you will need to specify this option or <strong>restore</strong> will fail to access it correctly.</p>
  </dd>
  <dt>
    <p><strong>-L</strong><em> limit</em></p>
  </dt>
  <dd>
    <p>The <strong>-L</strong> flag allows the user to specify a maximal number of miscompares when using <strong>restore</strong> with the <strong>-C</strong> option to check the backup. If this limit is reached, <strong>restore</strong> will abort with an error message. A value of 0 (the default value) disables the check.</p>
  </dd>
  <dt>
    <p><strong>-m</strong></p>
  </dt>
  <dd>
    <p>Extract by inode numbers rather than by file name. This is useful if only a few files are being extracted, and one wants to avoid regenerating the complete pathname to the file.</p>
  </dd>
  <dt>
    <p><strong>-M</strong></p>
  </dt>
  <dd>
    <p>Enables the multi-volume feature (for reading dumps made using the <strong>-M</strong> option of dump). The name specified with <strong>-f</strong> is treated as a prefix and <strong>restore</strong> tries to read in sequence from <em>&lt;prefix&gt;001, &lt;prefix&gt;002</em> etc.</p>
  </dd>
  <dt>
    <p><strong>-N</strong></p>
  </dt>
  <dd>
    <p>The <strong>-N</strong> flag causes <strong>restore</strong> to perform a full execution as requested by one of <strong>-i</strong>, <strong>-R</strong>, <strong>-r</strong>, <strong>t</strong> or <strong>x</strong> command without actually writing any file on disk.</p>
  </dd>
  <dt>
    <p><strong>-o</strong></p>
  </dt>
  <dd>
    <p>The <strong>-o</strong> flag causes <strong>restore</strong> to automatically restore the current directory permissions without asking the operator whether to do so in one of <strong>-i</strong> or <strong>-x</strong> modes.</p>
  </dd>
  <dt>
    <p><strong>-Q</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Use the file <em>file</em> in order to read tape position as stored using the dump Quick File Access mode, in one of <strong>-i</strong>, <strong>-x</strong> or <strong>-t</strong> mode.</p><ul>
<li><p>It is recommended to set up the st driver to return logical tape positions rather than physical before calling <strong>dump/restore</strong> with parameter <strong>-Q</strong>. Since not all tape devices support physical tape positions those tape devices return an error during <strong>dump/restore</strong> when the st driver is set to the default physical setting. Please see the <strong>st</strong>(4) man page, option <strong>MTSETDRVBUFFER</strong> , or the <strong>mt(1)</strong> man page, on how to set the driver to return logical tape positions.</p></li><li><p>Before calling <strong>restore</strong> with parameter <strong>-Q</strong>, always make sure the st driver is set to return the same type of tape position used during the call to <strong>dump</strong>. Otherwise <strong>restore</strong> may be confused.</p></li><li><p>This option can be used when restoring from local or remote tapes (see above) or from local or remote files.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-s</strong><em> fileno</em></p>
  </dt>
  <dd>
    <p>Read from the specified <em>fileno</em> on a multi-file tape. File numbering starts at 1.</p>
  </dd>
  <dt>
    <p><strong>-T</strong><em> directory</em></p>
  </dt>
  <dd>
    <p>The <strong>-T</strong> flag allows the user to specify a directory to use for the storage of temporary files. The default value is <em>/tmp</em>. This flag is most useful when restoring files after having booted from a floppy. There might be little or no space on the floppy filesystem, but another source of space might exist.</p>
  </dd>
  <dt>
    <p><strong>-u</strong></p>
  </dt>
  <dd>
    <p>When creating certain types of files, <strong>restore</strong> may generate a warning diagnostic if they already exist in the target directory. To prevent this, the <strong>-u</strong> (unlink) flag causes <strong>restore</strong> to remove old entries before attempting to create new ones.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Normally <strong>restore</strong> does its work silently. The <strong>-v</strong> (verbose) flag causes it to type the name of each file it treats preceded by its file type.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Enables reading multi-volume non-tape mediums like CDROMs.</p>
  </dd>
  <dt>
    <p><strong>-X</strong><em> filelist</em></p>
  </dt>
  <dd>
    <p>Read list of files to be listed or extracted from the text file <em>filelist</em> in addition to those specified on the command line. This can be used in conjunction with the <strong>-t</strong> or <strong>-x</strong> commands. The file <em>filelist</em> should contain file names separated by newlines. <em>filelist</em> may be an ordinary file or <em>-</em> (the standard input).</p>
  </dd>
  <dt>
    <p><strong>-y</strong></p>
  </dt>
  <dd>
    <p>Do not ask the user whether to abort the restore in the event of an error. Always try to skip over the bad block(s) and continue.</p>
  </dd>

</dl>
<p>(The 4.3BSD option syntax is implemented for backward compatibility but is not documented here.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Complains if it gets a read error. If <strong>y</strong> has been specified, or the user responds <strong>y</strong>, <strong>restore</strong> will attempt to continue the restore.</p><p>If a backup was made using more than one tape volume, <strong>restore</strong> will notify the user when it is time to mount the next volume. If the <strong>-x</strong> or <strong>-i</strong> flag has been specified, <strong>restore</strong> will also ask which volume the user wishes to mount. The fastest way to extract a few files is to start with the last volume, and work towards the first volume.</p><p>There are numerous consistency checks that can be listed by <strong>restore</strong>. Most checks are self-explanatory or can &ldquo;never happen&rdquo;. Common errors are given below:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>Converting to new file system format</em></p>
  </dt>
  <dd>
    <p>A dump tape created from the old file system has been loaded. It is automatically converted to the new file system format.</p>
  </dd>
  <dt>
    <p><em>&lt;filename&gt;: not found on tape</em></p>
  </dt>
  <dd>
    <p>The specified file name was listed in the tape directory, but was not found on the tape. This is caused by tape read errors while looking for the file, and from using a dump tape created on an active file system.</p>
  </dd>
  <dt>
    <p><em>expected next file &lt;inumber&gt;, got &lt;inumber&gt;</em></p>
  </dt>
  <dd>
    <p>A file that was not listed in the directory showed up. This can occur when using a dump created on an active file system.</p>
  </dd>
  <dt>
    <p><em>Incremental dump too low</em></p>
  </dt>
  <dd>
    <p>When doing an incremental restore, a dump that was written before the previous incremental dump, or that has too low an incremental level has been loaded.</p>
  </dd>
  <dt>
    <p><em>Incremental dump too high</em></p>
  </dt>
  <dd>
    <p>When doing an incremental restore, a dump that does not begin its coverage where the previous incremental dump left off, or that has too high an incremental level has been loaded.</p>
  </dd>
  <dt>
    <p><em>Tape read error while restoring &lt;filename&gt;</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>Tape read error while skipping over inode &lt;inumber&gt;</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>Tape read error while trying to resynchronize</em></p>
  </dt>
  <dd>
    <p>A tape (or other media) read error has occurred. If a file name is specified, its contents are probably partially wrong. If an inode is being skipped or the tape is trying to resynchronize, no extracted files have been corrupted, though files may not be found on the tape.</p>
  </dd>
  <dt>
    <p><em>resync restore, skipped &lt;num&gt; blocks</em></p>
  </dt>
  <dd>
    <p>After a dump read error, <strong>restore</strong> may have to resynchronize itself. This message lists the number of blocks that were skipped over.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>Restore</strong> exits with zero status on success. Tape errors are indicated with an exit code of 1.</p><p>When doing a comparison of files from a dump, an exit code of 2 indicates that some files were modified or deleted since the dump was made.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>If the following environment variable exists it will be utilized by <strong>restore</strong>:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>TAPE</strong></p>
  </dt>
  <dd>
    <p>If no <strong>-f</strong> option was specified, <strong>restore</strong> will use the device specified via <strong>TAPE</strong> as the dump device. <strong>TAPE</strong> may be of the form <em>tapename</em>, <em>host:tapename</em> or <em>user@host:tapename</em>.</p>
  </dd>
  <dt>
    <p><strong>TMPDIR</strong></p>
  </dt>
  <dd>
    <p>The directory given in <strong>TMPDIR</strong> will be used instead of <em>/tmp</em> to store temporary files.</p>
  </dd>
  <dt>
    <p><strong>RMT</strong></p>
  </dt>
  <dd>
    <p>The environment variable <strong>RMT</strong> will be used to determine the pathname of the remote <strong>rmt</strong>(8) program.</p>
  </dd>
  <dt>
    <p><strong>RSH</strong></p>
  </dt>
  <dd>
    <p><strong>Restore</strong> uses the contents of this variable to determine the name of the remote shell command to use when doing a network restore (rsh, ssh etc.). If this variable is not set, <a href="../man3/rcmd.3.html"><strong>rcmd</strong>(3)</a> will be used, but only root will be able to do a network restore.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/dev/st0</em></p>
  </dt>
  <dd>
    <p>the default tape drive</p>
  </dd>
  <dt>
    <p><em>/tmp/rstdir*</em></p>
  </dt>
  <dd>
    <p>file containing directories on the tape</p>
  </dd>
  <dt>
    <p><em>/tmp/rstmode*</em></p>
  </dt>
  <dd>
    <p>owner, mode, and time stamps for directories</p>
  </dd>
  <dt>
    <p><em>./restoresymtable</em></p>
  </dt>
  <dd>
    <p>information passed between incremental restores</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO restore&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/dump.8.html"><strong>dump</strong>(8)</a>, <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a>, <a href="../man8/mke2fs.8.html"><strong>mke2fs</strong>(8)</a>, <strong>rmt</strong>(8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p><strong>Restore</strong> can get confused when doing incremental restores from dumps that were made on active file systems.</p><p>A level 0 dump must be done after a full restore. Because <strong>restore</strong> runs in user code, it has no control over inode allocation; thus a full dump must be done to get a new set of directories reflecting the new inode numbering, even though the content of the files is unchanged.</p><p>The temporary files <em>/tmp/rstdir*</em> and <em>/tmp/rstmode*</em> are generated with a unique name based on the date of the dump and the process ID (see <a href="../man3/mktemp.3.html"><strong>mktemp</strong>(3)</a><strong>),</strong> except when <strong>-r</strong> or <strong>-R</strong> is used. Because <strong>-R</strong> allows you to restart a <strong>-r</strong> operation that may have been interrupted, the temporary files should be the same across different processes. In all other cases, the files are unique because it is possible to have two different dumps started at the same time, and separate operations shouldn't conflict with each other.</p><p>To do a network restore, you have to run <strong>restore</strong> as root or use a remote shell replacement (see <strong>RSH</strong> variable).  This is due to the previous security history of <strong>dump</strong> and <strong>restore</strong>. ( <strong>restore</strong> is written to be setuid root, but we are not certain all bugs are gone from the code - run setuid at your own risk.)</p><p>At the end of restores in <strong>-i</strong> or <strong>-x</strong> modes (unless <strong>-o</strong> option is in use), <strong>restore</strong> will ask the operator whether to set the permissions on the current directory. If the operator confirms this action, the permissions on the directory from where <strong>restore</strong> was launched will be replaced by the permissions on the dumped root inode. Although this behaviour is not really a bug, it has proven itself to be confusing for many users, so it is recommended to answer 'no', unless you're performing a full restore and you do want to restore the permissions on '/'.</p><p>It should be underlined that because it runs in user code, <strong>restore</strong> , when run with the <strong>-C</strong> option, sees the files as the kernel presents them, whereas <strong>dump</strong> sees all the files on a given filesystem. In particular, this can cause some confusion when comparing a dumped filesystem a part of which is hidden by a filesystem mounted on top of it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The <strong>dump/restore</strong> backup suite was ported to Linux's Second Extended File System by Remy Card &lt;card@Linux.EU.Org&gt;. He maintained the initial versions of <strong>dump</strong> (up and including 0.4b4, released in January 1997).</p><p>Starting with 0.4b5, the new maintainer is Stelian Pop &lt;stelian@popies.net&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>The <strong>dump/restore</strong> backup suite is available from &lt;http://dump.sourceforge.net&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>The <strong>restore</strong> command appeared in 4.2BSD.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="restartd.8.html"><span aria-hidden="true">&larr;</span> restartd.8: Process checker and/or reloader</a></li>
   <li class="next"><a href="restorecon.8.html">restorecon.8: Restore file(s) default selinux security contexts. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
