<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ambsdtar: Amanda application to interface with bsd tar</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Amanda application to interface with bsd tar">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ambsdtar (8) manual">
  <meta name="twitter:description" content="Amanda application to interface with bsd tar">
  <meta name="twitter:image" content="https://www.carta.tech/images/amanda-common-ambsdtar-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ambsdtar.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ambsdtar (8) manual" />
  <meta property="og:description" content="Amanda application to interface with bsd tar" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/amanda-common-ambsdtar-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ambsdtar<small> (8)</small></h1>
        <p class="lead">Amanda application to interface with bsd tar</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ambsdtar.8.html">
      <span itemprop="name">ambsdtar: Amanda application to interface with bsd tar</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/amanda-common/">
      <span itemprop="name">amanda-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ambsdtar.8.html">
      <span itemprop="name">ambsdtar: Amanda application to interface with bsd tar</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Amgtar is an Amanda Application API script. It should not be run by users directly. It uses BSD Tar to backup and restore data.</p><p>The <strong>diskdevice</strong> in the disklist (DLE) must be the directory to backup.</p><p>Extracting backup never remove files. If a file where present in the level 0 backup, you removed it, made a level 1 backup, then after extracting both levels, the file will be present.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROPERTIES</h2>
        <div class="sectioncontent">
<p>This section lists the properties that control ambsdtar&apos;s functionality. See <a href="../man7/amanda-applications.7.html"><strong>amanda-applications</strong>(7)</a> for information on application properties and how they are configured.</p><p>COMMAND-OPTIONS</p><p>If set, theses options are passed asis to gtar. Each option must be a different value of the property. Some option can break how amanda do backup, use it with care.</p><p>Use:</p>
<pre>
  property "COMMAND-OPTIONS" "--foo" "bar"
</pre>
<p>Do not use:</p>
<pre>
  property "COMMAND-OPTIONS" "--foo bar"
</pre>
<p>DIRECTORY</p><p>If set, bsdtar will backup from that directory instead of the <em>diskdevice</em> set by the DLE. On restore, the data is restore in that directory instead of the current working directory.</p><p>STATE-DIR</p><p>The directory where ambsdtar stores the database it uses to generate incremental dumps.  The default is set when Amanda is built.</p><p>BSDTAR-PATH</p><p>The path to the bsdtar binary.  The default is set when Amanda is built.</p><p>ONE-FILE-SYSTEM</p><p>If "YES" (the default), do not allow bsdtar to cross filesystem boundaries. If "NO", bsdtar will cross filesystem boundaries.  This corresponds to the <em>--one-filesystem</em> option of bsdtar.</p><p>TAR-BLOCKSIZE</p><p>Block size of Nx512 bytes (default N=20).  This corresponds to the <em>--blocking-factor</em> option of bsdtar.</p><p>EXIT-HANDLING</p><p>List which exit status of gtar are good or bad. eg. "1=GOOD 2=BAD", exit status of 1 will produce a good backup, exit status of 2 will give an error.</p><p>NORMAL</p><p>List all regex (POSIX Extended Regular Expression syntax) that are normal output from gtar. These output are in the "FAILED DUMP DETAILS" section of the email report if the dump result is STRANGE or FAILED. Default values:</p>
<pre>
  "^could not open conf file"
  "^Elapsed time:"
  "^Throughput"
  ": socket ignored$"
  ": File .* shrunk by [0-9][0-9]* bytes, padding with zeros"
  ": Cannot add file .*: No such file or directory$"
  ": Error exit delayed from previous errors"
</pre>
<p>To treat one of these default patterns differently, specify it explicitly in a different property.</p><p>IGNORE</p><p>List all regex (POSIX Extended Regular Expression syntax) that amanda ignore. These output are never in the email report. Default values:</p>
<pre>
  ": Directory is new$"
  ": Directory has been renamed"
</pre>
<p>To treat one of these default patterns differently, specify it explicitly in a different property.</p><p>STRANGE</p><p>List all regex (POSIX Extended Regular Expression syntax) that are strange output from gtar. All gtar output that doesn&apos;t match a normal or ignore regex are strange by default. The result of the dump is STRANGE if gtar produce a strange output. These output are in the "FAILED DUMP DETAILS" section of the email report.</p><p>VERBOSE</p><p>Default: "NO". If "YES", ambsdtar print more verbose debugging message and can leave temporary files in AMANDA_TMPDIR.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INCLUDE AND EXCLUDE LISTS</h2>
        <div class="sectioncontent">
<p>This application supplies exclude lists via the <strong>GNU-tar</strong> <strong>--exclude-from</strong> option. This option accepts normal shell-style wildcard expressions, using <strong>*</strong> to match any number of characters and <strong>?</strong> to match a single character. Character classes are represented with <strong>[..]</strong>, which will match any of the characters in the brackets. Expressions can be "anchored" to the base directory of the DLE by prefixing them with "./". Without this prefix, they will match at any directory level. Expressions that begin or end with a "/" will not match anything: to completely exclude a directory, do not include the trailing slash. Example expressions:</p>
<pre>
  ./temp-files           # exclude top-level directory entirely
  ./temp-files/          # BAD: does nothing
  /temp-files            # BAD: does nothing
  ./temp-files/*         # exclude directory contents; include directory
  temp-files             # exclude anything named "temp-files"
  generated-*            # exclude anything beginning with "generated-"
  *.iso                  # exclude ISO files
  proxy/local/cache      # exclude "cache" in dir "local" in "proxy"
</pre>
<p>Similarly, include expressions are supplied to <strong>GNU-tar</strong>&apos;s <strong>--files-from</strong> option. This option ordinarily does not accept any sort of wildcards, but amgtar "manually" applies glob pattern matching to include expressions with only one slash. The expressions must still begin with "./", so this effectively only allows expressions like "./[abc]*" or "./*.txt".</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
  define application-tool app_ambsdtar {
    plugin "ambsdtar"

    property "BSDTAR-PATH" "/bin/bsdtar"
    property "STATE-DIR" "/xxx/yyy"
    property "ONE-FILE-SYSTEM" "YES"
    property "TAR-BLOCKSIZE" "20"
    property "EXIT-HANDLING" "1=GOOD 2=BAD"
    # change a default NORMAL regex to a STRANGE regex.
    property "STRANGE" ": socket ignored$"
    # add three new IGNORE regex
    property "IGNORE" ": Directory is new$"
    property append "IGNORE" ": Directory has been renamed"
    property append "IGNORE" "file changed as we read it$"
  }
</pre>
<p>A dumptype using this application might look like:</p>
<pre>
  define dumptype ambsdtar_app_dtyp {
    global
    program "APPLICATION"
    application "app_ambsdtar"
  }
</pre>
<p>Note that the <em>program</em> parameter must be set to <em>"APPLICATION"</em> to use the <em>application</em> parameter.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ambsdtar&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/amanda.8.html"><strong>amanda</strong>(8)</a>, <strong>tar</strong>(1), <a href="../man5/amanda.conf.5.html"><strong>amanda.conf</strong>(5)</a>, <a href="../man7/amanda-applications.7.html"><strong>amanda-applications</strong>(7)</a></p><p>The Amanda Wiki: : http://wiki.zmanda.com/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p><strong>Jean-Louis Martineau</strong> &lt;martineau@zmanda.com&gt;</p><p>Zmanda, Inc. (http://www.zmanda.com)</p><p><strong>Dustin J. Mitchell</strong> &lt;dustin@zmanda.com&gt;</p><p>Zmanda, Inc. (http://www.zmanda.com)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="amavisd-new-cronjob.8.html"><span aria-hidden="true">&larr;</span> amavisd-new-cronjob.8: Cronjobs for the debian amavisd-new package</a></li>
   <li class="next"><a href="amcheck.8.html">amcheck.8: Run amanda self-checks <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
