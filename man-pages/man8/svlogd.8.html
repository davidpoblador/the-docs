<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>svlogd: Runit's service logging daemon</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Runit's service logging daemon">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="svlogd (8) manual">
  <meta name="twitter:description" content="Runit's service logging daemon">
  <meta name="twitter:image" content="https://www.carta.tech/images/runit-svlogd-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/svlogd.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="svlogd (8) manual" />
  <meta property="og:description" content="Runit's service logging daemon" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/runit-svlogd-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">svlogd<small> (8)</small></h1>
        <p class="lead">Runit's service logging daemon</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/svlogd.8.html">
      <span itemprop="name">svlogd: Runit's service logging daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/runit/">
      <span itemprop="name">runit</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/svlogd.8.html">
      <span itemprop="name">svlogd: Runit's service logging daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>svlogd</strong> [-tttv] [-r <em>c</em>] [-R <em>xyz</em>] [-l <em>len</em>] [-b <em>buflen</em>] <em>logs</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>logs</em> consists of one or more arguments, each specifying a directory.</p><p><strong>svlogd</strong> continuously reads log data from its standard input, optionally filters log messages, and writes the data to one or more automatically rotated <em>logs</em>.</p><p>Recent log files can automatically be processed by an arbitrary processor program when they are rotated, and <strong>svlogd</strong> can be told to alert selected log messages to standard error, and through udp.</p><p><strong>svlogd</strong> runs until it sees end-of-file on standard input or is sent a TERM signal, see below.</p><h3>LOG DIRECTORY</h3>
<p>A log directory <em>log</em> contains some number of old log files, and the current log file <em>current</em>. Old log files have a file name starting with <em>@</em> followed by a precise timestamp (see the daemontools' <strong>tai64n</strong> program), indicating when <em>current</em> was rotated and renamed to this file.</p><p>A log directory additionally contains the lock file <em>lock</em>, maybe <em>state</em> and <em>newstate</em>, and optionally the file <em>config</em>. <strong>svlogd</strong> creates necessary files if they don't exist.</p><p>If <strong>svlogd</strong> has trouble opening a log directory, it prints a warning, and ignores this log directory. If <strong>svlogd</strong> is unable to open all log directories given at the command line, it exits with an error. This can happen on start-up or after receiving a HUP signal.</p>
<h3>LOG FILE ROTATION</h3>
<p><strong>svlogd</strong> appends selected log messages to the <em>current</em> log file. If <em>current</em> has <em>size</em> bytes or more (or there is a new-line within the last <em>len</em> of <em>size</em> bytes), or is older than a specified amount of <em>time</em>, <em>current</em> is rotated:</p><p><strong>svlogd</strong> closes <em>current</em>, changes permission of <em>current</em> to 0755, renames <em>current</em> to @<em>timestamp</em>.s, and starts with a new empty <em>current</em>. If <strong>svlogd</strong> sees <em>num</em> or more old log files in the log directory, it removes the oldest one. Note that this doesn't decrease the number of log files if there are already more than <em>num</em> log files, this must be done manually, e.g. for keeping 10 log files:</p><p> ls -1 &#92;@* |sort |sed -ne '10,$p' |xargs rm</p>
<h3>PROCESSOR</h3>
<p>If <strong>svlogd</strong> is told to process recent log files, it saves <em>current</em> to @<em>timestamp</em>.u, feeds @<em>timestamp</em>.u through ``sh -c "<em>processor</em>"'' and writes the output to @<em>timestamp</em>.t. If the <em>processor</em> finishes successfully, @<em>timestamp</em>.t is renamed to @<em>timestamp</em>.s, and @<em>timestamp</em>.u is deleted; otherwise @<em>timestamp</em>.t is deleted and the <em>processor</em> is started again. <strong>svlogd</strong> also saves any output that the <em>processor</em> writes to file descriptor 5, and makes that output available on file descriptor 4 when running <em>processor</em> on the next log file rotation.</p><p>A <em>processor</em> is run in the background. If <strong>svlogd</strong> sees a previously started <em>processor</em> still running when trying to start a new one for the same <em>log</em>, it blocks until the currently running <em>processor</em> has finished successfully. Only the HUP signal works in that situation. Note that this may block any program feeding its log data to <strong>svlogd.</strong></p>
<h3>CONFIG</h3>
<p>On startup, and after receiving a HUP signal, <strong>svlogd</strong> checks for each log directory <em>log</em> if the configuration file <em>log/config</em> exists, and if so, reads the file line by line and adjusts configuration for <em>log</em> as follows:</p><p>If the line is empty, or starts with a ``#'', it is ignored. A line of the form</p>
<dl class='dl-vertical'>
  <dt>
    <p>s<em>size</em></p>
  </dt>
  <dd>
    <p>sets the maximum file size of <em>current</em> when <strong>svlogd</strong> should rotate the current log file to <em>size</em> bytes. Default is 1000000. If <em>size</em> is zero, <strong>svlogd</strong> doesn't rotate log files. You should set <em>size</em> to at least (2 * <em>len</em>).</p>
  </dd>
  <dt>
    <p>n<em>num</em></p>
  </dt>
  <dd>
    <p>sets the number of old log files <strong>svlogd</strong> should maintain to <em>num</em>. If <strong>svlogd</strong> sees more that <em>num</em> old log files in <em>log</em> after log file rotation, it deletes the oldest one. Default is 10. If <em>num</em> is zero, <strong>svlogd</strong> doesn't remove old log files.</p>
  </dd>
  <dt>
    <p>N<em>min</em></p>
  </dt>
  <dd>
    <p>sets the minimum number of old log files <strong>svlogd</strong> should maintain to <em>min</em>. <em>min</em> must be less than <em>num</em>. If <em>min</em> is set, and <strong>svlogd</strong> cannot write to <em>current</em> because the filesystem is full, and it sees more than <em>min</em> old log files, it deletes the oldest one.</p>
  </dd>
  <dt>
    <p>t<em>timeout</em></p>
  </dt>
  <dd>
    <p>sets the maximum age of the <em>current</em> log file when <strong>svlogd</strong> should rotate the current log file to <em>timeout</em> seconds. If <em>current</em> is <em>timeout</em> seconds old, and is not empty, <strong>svlogd</strong> forces log file rotation.</p>
  </dd>
  <dt>
    <p>!<em>processor</em></p>
  </dt>
  <dd>
    <p>tells <strong>svlogd</strong> to feed each recent log file through <em>processor</em> (see above) on log file rotation. By default log files are not processed.</p>
  </dd>
  <dt>
    <p>u<em>a.b.c.d[:port]</em></p>
  </dt>
  <dd>
    <p>tells <strong>svlogd</strong> to transmit the first <em>len</em> characters of selected log messages to the IP address <em>a.b.c.d</em>, port number <em>port</em>. If <em>port</em> isn't set, the default port for syslog is used (514). <em>len</em> can be set through the -l option, see below. If <strong>svlogd</strong> has trouble sending udp packets, it writes error messages to the log directory. Attention: logging through udp is unreliable, and should be used in private networks only.</p>
  </dd>
  <dt>
    <p>U<em>a.b.c.d[:port]</em></p>
  </dt>
  <dd>
    <p>is the same as the <em>u</em> line above, but the log messages are no longer written to the log directory, but transmitted through udp only. Error messages from <strong>svlogd</strong> concerning sending udp packages still go to the log directory.</p>
  </dd>
  <dt>
    <p>p<em>prefix</em></p>
  </dt>
  <dd>
    <p>tells <strong>svlogd</strong> to prefix each line to be written to the log directory, to standard error, or through UDP, with <em>prefix</em>.</p>
  </dd>

</dl>
<p>If a line starts with a <em>-</em>, <em>+</em>, <em>e</em>, or <em>E</em>, <strong>svlogd</strong> matches the first <em>len</em> characters of each log message against <em>pattern</em> and acts accordingly:</p>
<dl class='dl-vertical'>
  <dt>
    <p>-<em>pattern</em></p>
  </dt>
  <dd>
    <p>the log message is deselected.</p>
  </dd>
  <dt>
    <p>+<em>pattern</em></p>
  </dt>
  <dd>
    <p>the log message is selected.</p>
  </dd>
  <dt>
    <p>e<em>pattern</em></p>
  </dt>
  <dd>
    <p>the log message is selected to be printed to standard error.</p>
  </dd>
  <dt>
    <p>E<em>pattern</em></p>
  </dt>
  <dd>
    <p>the log message is deselected to be printed to standard error.</p>
  </dd>

</dl>
<p>Initially each line is selected to be written to <em>log/current</em>. Deselected log messages are discarded from <em>log</em>. Initially each line is deselected to be written to standard err. Log messages selected for standard error are written to standard error.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PATTERN MATCHING</h2>
        <div class="sectioncontent">
<p><strong>svlogd</strong> matches a log message against the string <em>pattern</em> as follows:</p><p><em>pattern</em> is applied to the log message one character by one, starting with the first. A character not a star (``*'') and not a plus (``+'') matches itself. A plus matches the next character in <em>pattern</em> in the log message one or more times. A star before the end of <em>pattern</em> matches any string in the log message that does not include the next character in <em>pattern</em>. A star at the end of <em>pattern</em> matches any string.</p><p>Timestamps optionally added by <strong>svlogd</strong> are not considered part of the log message.</p><p>An <strong>svlogd</strong> pattern is not a regular expression. For example consider a log message like this</p><p> 2005-12-18_09:13:50.97618 tcpsvd: info: pid 1977 from 10.4.1.14</p><p>The following pattern doesn't match</p><p> -*pid*</p><p>because the first star matches up to the first p in tcpsvd, and then the match fails because i is not s. To match this log message, you can use a pattern like this instead</p><p> -*: *: pid *</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>timestamp. Prefix each selected line with a precise timestamp (see the daemontools' <strong>tai64n</strong> program) when writing to <em>log</em> or to standard error.</p>
  </dd>
  <dt>
    <p><strong>-tt</strong></p>
  </dt>
  <dd>
    <p>timestamp. Prefix each selected line with a human readable, sortable UTC timestamp of the form YYYY-MM-DD_HH:MM:SS.xxxxx when writing to <em>log</em> or to standard error.</p>
  </dd>
  <dt>
    <p><strong>-ttt</strong></p>
  </dt>
  <dd>
    <p>timestamp. Prefix each selected line with a human readable, sortable UTC timestamp of the form YYYY-MM-DDTHH:MM:SS.xxxxx when writing to <em>log</em> or to standard error.</p>
  </dd>
  <dt>
    <p><strong>-r </strong><em>c</em></p>
  </dt>
  <dd>
    <p>replace. <em>c</em> must be a single character. Replace non-printable characters in log messages with <em>c</em>. Characters are replaced before pattern matching is applied.</p>
  </dd>
  <dt>
    <p><strong>-R </strong><em>xyz</em></p>
  </dt>
  <dd>
    <p>replace charset. Additionally to non-printable characters, replace all characters found in <em>xyz</em> with <em>c</em> (default ``_'').</p>
  </dd>
  <dt>
    <p><strong>-l </strong><em>len</em></p>
  </dt>
  <dd>
    <p>line length. Pattern matching applies to the first <em>len</em> characters of a log message only. Default is 1000.</p>
  </dd>
  <dt>
    <p><strong>-b </strong><em>buflen</em></p>
  </dt>
  <dd>
    <p>buffer size. Set the size of the buffer <strong>svlogd</strong> uses when reading from standard input and writing to <em>logs</em> to <em>buflen</em>. Default is 1024. <em>buflen</em> must be greater than <em>len</em>. For <strong>svlogd</strong> instances that process a lot of data in short time, the buffer size should be increased to improve performance.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>verbose. Print verbose messages to standard error.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">
<p>If <strong>svlogd</strong> is sent a HUP signal, it closes and reopens all <em>logs</em>, and updates their configuration according to <em>log/config</em>. If <strong>svlogd</strong> has trouble opening a log directory, it prints a warning, and discards this log directory. If <strong>svlogd</strong> is unable to open all log directories given at the command line, it exits with an error.</p><p>If <strong>svlogd</strong> is sent a TERM signal, or if it sees end-of-file on standard input, it stops reading standard input, processes the data in the buffer, waits for all <em>processor</em> subprocesses to finish if any, and exits 0 as soon as possible.</p><p>If <strong>svlogd</strong> is sent an ALRM signal, it forces log file rotation for all <em>logs</em> with a non empty <em>current</em> log file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO svlogd&hellip;</h2>
        <div class="sectioncontent">
<p>sv(8), <a href="../man8/runsv.8.html"><strong>runsv</strong>(8)</a>, <a href="../man8/chpst.8.html"><strong>chpst</strong>(8)</a>, <a href="../man8/runit.8.html"><strong>runit</strong>(8)</a>, <a href="../man8/runit-init.8.html"><strong>runit-init</strong>(8)</a>, <a href="../man8/runsvdir.8.html"><strong>runsvdir</strong>(8)</a>, <a href="../man8/runsvchdir.8.html"><strong>runsvchdir</strong>(8)</a></p><p>http://smarden.org/runit/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Gerrit Pape &lt;pape@smarden.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="svcgssd.8.html"><span aria-hidden="true">&larr;</span> svcgssd.8: Server-side rpcsec_gss daemon</a></li>
   <li class="next"><a href="svnserve.8.html">svnserve.8: Server for the 'svn' repository access method <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
