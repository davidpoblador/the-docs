<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ceph-rest-api: Ceph restlike administration server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ceph restlike administration server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ceph-rest-api (8) manual">
  <meta name="twitter:description" content="Ceph restlike administration server">
  <meta name="twitter:image" content="https://www.carta.tech/images/ceph-common-ceph-rest-api-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ceph-rest-api.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ceph-rest-api (8) manual" />
  <meta property="og:description" content="Ceph restlike administration server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ceph-common-ceph-rest-api-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ceph-rest-api<small> (8)</small></h1>
        <p class="lead">Ceph restlike administration server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ceph-rest-api.8.html">
      <span itemprop="name">ceph-rest-api: Ceph restlike administration server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ceph-common/">
      <span itemprop="name">ceph-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ceph-rest-api.8.html">
      <span itemprop="name">ceph-rest-api: Ceph restlike administration server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>ceph-rest-api</strong> [ -c <em>conffile</em> ] [--cluster <em>clustername</em> ] [ -n <em>name</em> ] [-i <em>id</em> ]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ceph-rest-api</strong> is a WSGI application that can run as a standalone web service or run under a web server that supports WSGI.  It provides much of the functionality of the <strong>ceph</strong> command-line tool through an HTTP-accessible interface.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-c/--conf conffile</strong></p>
  </dt>
  <dd>
    <p>names the ceph.conf file to use for configuration.  If -c is not specified, the default depends on the state of the --cluster option (default &apos;ceph&apos;; see below).  The configuration file is searched for in this order:</p><ul>
<li><p>$CEPH_CONF</p></li><li><p>/etc/ceph/${cluster}.conf</p></li><li><p>~/.ceph/${cluster}.conf</p></li><li><p>${cluster}.conf (in the current directory)</p></li>
</ul>
  </dd>

</dl>
<p>so you can also pass this option in the environment as CEPH_CONF.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>--cluster clustername</strong></p>
  </dt>
  <dd>
    <p>set <em>clustername</em> for use in the $cluster metavariable, for locating the ceph.conf file.  The default is &apos;ceph&apos;.</p>
  </dd>
  <dt>
    <p><strong>-n/--name name</strong></p>
  </dt>
  <dd>
    <p>specifies the client &apos;name&apos;, which is used to find the client-specific configuration options in the config file, and also is the name used for authentication when connecting to the cluster (the entity name appearing in ceph auth list output, for example).  The default is &apos;client.restapi&apos;.</p>
  </dd>
  <dt>
    <p><strong>-i/--id id</strong></p>
  </dt>
  <dd>
    <p>specifies the client &apos;id&apos;, which will form the clientname as &apos;client.&lt;id&gt;&apos; if clientname is not set.  If -n/-name is set, that takes precedence.</p><p>Also, global Ceph options are supported.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION PARAMETERS</h2>
        <div class="sectioncontent">
<p>Supported configuration parameters include:</p><ul>
<li><p><strong>keyring</strong> the keyring file holding the key for &apos;clientname&apos;</p></li><li><p><strong>public addr</strong> ip:port to listen on (default 0.0.0.0:5000)</p></li><li><p><strong>log file</strong> (usual Ceph default)</p></li><li><p><strong>restapi base url</strong> the base URL to answer requests on (default /api/v0.1)</p></li><li><p><strong>restapi log level</strong> critical, error, warning, info, debug (default warning)</p><p>Configuration parameters are searched in the standard order: first in the section named &apos;&lt;clientname&gt;&apos;, then &apos;client&apos;, then &apos;global&apos;.</p><p>&lt;clientname&gt; is either supplied by -n/--name, "client.&lt;id&gt;" where &lt;id&gt; is supplied by -i/--id, or &apos;client.restapi&apos; if neither option is present.</p><p>A single-threaded server will run on <strong>public addr</strong> if the ceph-rest-api executed directly; otherwise, configuration is specified by the enclosing WSGI web server.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>Commands are submitted with HTTP GET requests (for commands that primarily return data) or PUT (for commands that affect cluster state). HEAD and OPTIONS are also supported.  Standard HTTP status codes are returned.</p><p>For commands that return bulk data, the request can include Accept: application/json or Accept: application/xml to select the desired structured output, or you may use a .json or .xml addition to the requested PATH.  Parameters are supplied as query parameters in the request; for parameters that take more than one value, repeat the key=val construct.  For instance, to remove OSDs 2 and 3, send a PUT request to <strong>osd/rm?ids=2&ids=3</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISCOVERY</h2>
        <div class="sectioncontent">
<p>Human-readable discovery of supported commands and parameters, along with a small description of each command, is provided when the requested path is incomplete/partially matching.  Requesting / will redirect to the value of  <strong>restapi base url</strong>, and that path will give a full list of all known commands. For example, requesting <strong>api/vX.X/mon</strong> will return the list of API calls for monitors - <strong>api/vX.X/osd</strong> will return the list of API calls for OSD and so on.</p><p>The command set is very similar to the commands supported by the <strong>ceph</strong> tool.  One notable exception is that the <strong>ceph pg &lt;pgid&gt; &lt;command&gt;</strong> style of commands is supported here as <strong>tell/&lt;pgid&gt;/command?args</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPLOYMENT AS WSGI APPLICATION</h2>
        <div class="sectioncontent">
<p>When deploying as WSGI application (say, with Apache/mod_wsgi, or nginx/uwsgi, or gunicorn, etc.), use the <strong>ceph_rest_api.py</strong> module (<strong>ceph-rest-api</strong> is a thin layer around this module).  The standalone web server is of course not used, so address/port configuration is done in the WSGI server.  Use a python .wsgi module or the equivalent to call <strong>app = generate_app(conf, cluster, clientname, clientid, args)</strong> where:</p><ul>
<li><p>conf is as -c/--conf above</p></li><li><p>cluster is as --cluster above</p></li><li><p>clientname, -n/--name</p></li><li><p>clientid, -i/--id, and</p></li><li><p>args are any other generic Ceph arguments</p><p>When app is returned, it will have attributes &apos;ceph_addr&apos; and &apos;ceph_port&apos; set to what the address and port are in the Ceph configuration; those may be used for the server, or ignored.</p><p>Any errors reading configuration or connecting to the cluster cause an exception to be raised; see your WSGI server documentation for how to see those messages in case of problem.</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p><strong>ceph-rest-api</strong> is part of the Ceph distributed storage system. Please refer to the Ceph documentation at <em>http://ceph.com/docs</em> for more information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ceph-rest-api&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/ceph.8.html"><strong>ceph</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>2010-2014, Inktank Storage, Inc. and contributors. Licensed under Creative Commons BY-SA</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ceph-rbdnamer.8.html"><span aria-hidden="true">&larr;</span> ceph-rbdnamer.8: Udev helper to name rbd devices</a></li>
   <li class="next"><a href="ceph-run.8.html">ceph-run.8: Restart daemon on core dump <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
