<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>batctl: B.a.t.m.a.n. advanced control and management tool</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="B.a.t.m.a.n. advanced control and management tool">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="batctl (8) manual">
  <meta name="twitter:description" content="B.a.t.m.a.n. advanced control and management tool">
  <meta name="twitter:image" content="https://www.carta.tech/images/batctl-batctl-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/batctl.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="batctl (8) manual" />
  <meta property="og:description" content="B.a.t.m.a.n. advanced control and management tool" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/batctl-batctl-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">batctl<small> (8)</small></h1>
        <p class="lead">B.a.t.m.a.n. advanced control and management tool</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/batctl.8.html">
      <span itemprop="name">batctl: B.a.t.m.a.n. advanced control and management tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/batctl/">
      <span itemprop="name">batctl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/batctl.8.html">
      <span itemprop="name">batctl: B.a.t.m.a.n. advanced control and management tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>batctl [</strong><em>options</em><strong>]&nbsp;</strong><em>command</em><strong>|</strong><em>debug&nbsp;table</em><strong>&nbsp;[</strong><em>parameters</em><strong>]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>batctl offers a convenient way to configure the batman-adv kernel module as well as displaying debug information such as originator tables, translation tables and the debug log. In combination with a bat-hosts file batctl allows the use of host names instead of MAC addresses.</p><p>B.A.T.M.A.N. advanced operates on layer 2. Thus all hosts participating in the virtual switched network are transparently connected together for all protocols above layer 2. Therefore the common diagnosis tools do not work as expected. To overcome these problems batctl contains the commands <strong>ping</strong>, <strong>traceroute</strong>, <strong>tcpdump</strong> which provide similar functionality to the normal <strong>ping</strong>(1), <strong>traceroute</strong>(1), <strong>tcpdump</strong>(1) commands, but modified to layer 2 behaviour or using the B.A.T.M.A.N. advanced protocol.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em></em><strong>options:</strong></p>
  </dt>
  <dd>
    <p>-m     specify mesh interface or VLAN created on top of a mesh interface (default 'bat0')</p><p>-h     print general batctl help</p><p>-v     print batctl version and batman-adv version (if the module is loaded)</p>
  </dd>
  <dt>
    <p><em></em><strong>commands:</strong></p>
  </dt>
  <dd>
    
<dl class='dl-vertical'>
  <dt>
    <strong>interface</strong>|<strong>if</strong> [<strong>add</strong>|<strong>del iface(s)</strong>]
  </dt>
  <dd>
    <p>If no parameter is given or the first parameter is neither "add" nor "del" the current interface settings are displayed. In order to add or delete interfaces specify "add" or "del" as first argument and append the interface names you wish to add or delete. Multiple interfaces can be specified.</p>
  </dd>
  <dt>
    <strong>orig_interval</strong>|<strong>it</strong> [<strong>interval</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current originator interval setting is displayed otherwise the parameter is used to set the originator interval. The interval is in units of milliseconds.</p>
  </dd>
  <dt>
    <strong>ap_isolation</strong>|<strong>ap</strong> [<strong>0</strong>|<strong>1</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current ap isolation setting is displayed. Otherwise the parameter is used to enable or disable ap isolation. This command can be used in conjunction with "-m" option to target per VLAN configurations.</p>
  </dd>
  <dt>
    <strong>bridge_loop_avoidance</strong>|<strong>bl</strong> [<strong>0</strong>|<strong>1</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current bridge loop avoidance setting is displayed. Otherwise the parameter is used to enable or disable the bridge loop avoidance. Bridge loop avoidance support has to be enabled when compiling the module otherwise this option won't be available.</p>
  </dd>
  <dt>
    <strong>distributed_arp_table</strong>|<strong>dat</strong> [<strong>0</strong>|<strong>1</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current distributed arp table setting is displayed. Otherwise the parameter is used to enable or disable the distributed arp table.</p>
  </dd>
  <dt>
    <strong>aggregation</strong>|<strong>ag</strong> [<strong>0</strong>|<strong>1</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current aggregation setting is displayed. Otherwise the parameter is used to enable or disable OGM packet aggregation.</p>
  </dd>
  <dt>
    <strong>bonding</strong>|<strong>b</strong> [<strong>0</strong>|<strong>1</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current bonding mode setting is displayed. Otherwise the parameter is used to enable or disable the bonding mode.</p>
  </dd>
  <dt>
    <strong>fragmentation</strong>|<strong>f</strong> [<strong>0</strong>|<strong>1</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current fragmentation mode setting is displayed. Otherwise the parameter is used to enable or disable fragmentation.</p>
  </dd>
  <dt>
    <strong>network_coding</strong>|<strong>nc</strong> [<strong>0</strong>|<strong>1</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current network coding mode setting is displayed. Otherwise the parameter is used to enable or disable network coding.</p>
  </dd>
  <dt>
    <strong>multicast_mode</strong>|<strong>mm</strong> [<strong>0</strong>|<strong>1</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current multicast mode setting is displayed. Otherwise the parameter is used to enable or disable multicast optimizations (i.e. disabling means always sending own multicast frames via classic flooding).</p>
  </dd>
  <dt>
    <strong>loglevel</strong>|<strong>ll</strong> [<strong>level</strong>[ <strong>level</strong>[ <strong>level</strong>]] <strong>...</strong>]
  </dt>
  <dd>
    <p>If no parameter is given the current log level settings are displayed otherwise the parameter(s) is/are used to set the log level. Level 'none' disables all verbose logging. Level 'batman' enables messages related to routing / flooding / broadcasting. Level 'routes' enables messages related to routes being added / changed / deleted. Level 'tt' enables messages related to translation table operations. Level 'bla' enables messages related to the bridge loop avoidance. Level 'dat' enables messages related to ARP snooping and the Distributed Arp Table. Level 'nc' enables messages related to network coding. Level 'all' enables all messages. The messages are sent to the batman-adv debug log. Use <strong>batctl log</strong> to retrieve it. Make sure to have debugging output enabled when compiling the module otherwise the output as well as the loglevel options won't be available.</p>
  </dd>
  <dt>
    <strong>log</strong>|<strong>l</strong> [<strong>-n</strong>]<strong></strong>
  </dt>
  <dd>
    <p>batctl will read the batman-adv debug log which has to be compiled into the kernel module. If "-n" is given batctl will not replace the MAC addresses with bat-host names in the output.</p>
  </dd>
  <dt>
    <strong>gw_mode|gw</strong> [<strong>off</strong>|<strong>client</strong>|<strong>server</strong>] [<strong>sel_class|bandwidth</strong>]<strong></strong>
  </dt>
  <dd>
    <p>If no parameter is given the current gateway mode is displayed otherwise the parameter is used to set the gateway mode. The second (optional) argument specifies the selection class (if 'client' was the first argument) or the gateway bandwidth (if 'server' was the first argument). If the node is a server this parameter is used to inform other nodes in the network about this node's internet connection bandwidth. Just enter any number (optionally followed by "kbit" or "mbit") and the batman-adv module will propagate the entered value in the mesh. Use "/" to separate the down\(hy and upload rates. You can omit the upload rate and the module will assume an upload of download / 5.</p><p>default: 10000 -&gt; 10.0/2.0 MBit</p><p>examples:  5000 -&gt;  5.0/1.0 MBit</p><p> 5000kbit  5mbit  5mbit/1024  5mbit/1024kbit  5mbit/1mbit</p><p>If the node is a gateway client the parameter will decide which criterias to consider when the batman-adv module has to choose between different internet connections announced by the aforementioned servers.</p><p>default: 20 -&gt; late switch (TQ 20)</p><p>examples:  1 -&gt; fast connection</p><p>consider the gateway's advertised throughput as well as the link quality towards the gateway and stick with the selection until the gateway disappears</p>
<pre>
  2 -&gt; stable connection
</pre>
<p>chooses the gateway with the best link quality and sticks with it (ignore the advertised throughput)</p>
<pre>
  3 -&gt; fast switch connection
</pre>
<p>chooses the gateway with the best link quality but switches to another gateway as soon as a better one is found</p><p> XX -&gt; late switch connection</p><p>chooses the gateway with the best link quality but switches to another gateway as soon as a better one is found which is at least XX TQ better than the currently selected gateway (XX has to be a number between 3 and 256).</p>
  </dd>
  <dt>
    <strong>isolation_mark</strong>|<strong>mark</strong>
  </dt>
  <dd>
    <p>If no parameter is given the current isolation mark value is displayed. Otherwise the parameter is used to set or unset the isolation mark used by the Extended Isolation feature.</p><p>The input is supposed to be of the form $value/$mask, where $value can be any 32bit long integer (expressed in decimal or hex base) and $mask is a generic bitmask (expressed in hex base) that selects the bits to take into consideration from $value. It is also possible to enter the input using only $value and in this case the full bitmask is used by default.</p><p>Example 1: 0x00000001/0xffffffff</p><p>Example 2: 0x00040000/0xffff0000</p><p>Example 3: 16 or 0x0F</p>
  </dd>

</dl>

  </dd>

</dl>
<p><em></em><strong>debug tables:</strong></p>
<dl class='dl-vertical'>
  <dt>
    
  </dt>
  <dd>
    <p>The batman-adv kernel module comes with a variety of debug tables containing various information about the state of the mesh seen by each individual node. These tables are exported via debugfs and easily accessible via batctl. You will need debugfs support compiled into your kernel and preferrably have mounted the debugfs to a well-known mountpoint. If debugfs is not mounted batctl will attempt to do this step for you.</p><p>All of the debug tables support the following options:</p><p>-w     refresh the list every second or add a number to let it refresh at a custom interval in seconds (with optional decimal places)</p><p>-n     do not replace the MAC addresses with bat-host names in the output</p><p>-H     do not show the header of the debug table</p><p>The originator table also supports the "-t" filter option to remove all originators from the output that have not been seen for the specified amount of seconds (with optional decimal places). It furthermore supports the "-i" parameter to specify an interface for which the originator table should be printed. If this parameter is not supplied, the default originator table is printed.</p><p>The local and global translation tables also support the "-u" and "-m" option to only display unicast or multicast translation table announcements respectively.</p><p>List of debug tables:</p><p>- originators|o</p><p>- gateways|gwl</p><p>- translocal|tl</p><p>- transglobal|tg</p><p>- claimtable|cl (compile time option)</p><p>- backbonetable|bbt (compile time option)</p><p>- dat_cache|dc (compile time option)</p><p>- nc_nodes|nn (compile time option)</p>
  </dd>
  <dt>
    <strong>translate</strong>|<strong>t</strong> <strong>MAC_address</strong>|<strong>bat-host_name</strong>|<strong>host_name</strong>|<strong>IP_address</strong>
  </dt>
  <dd>
    <p>Translates a destination (hostname, IP, MAC, bat_host-name) to the originator mac address responsible for it.</p>
  </dd>
  <dt>
    <strong>statistics</strong>|<strong>s</strong>
  </dt>
  <dd>
    <p>Retrieve traffic counters from batman-adv kernel module. The output may vary depending on which features have been compiled into the kernel module.</p><p>Each module subsystem has its own counters which are indicated by their prefixes:</p><p>mgmt - mesh protocol counters</p><p>tt - translation table counters</p><p>All counters without a prefix concern payload (pure user data) traffic.</p>
  </dd>
  <dt>
    <strong>ping</strong>|<strong>p</strong> [<strong>-c count</strong>][<strong>-i interval</strong>][<strong>-t time</strong>][<strong>-R</strong>][<strong>-T</strong>] <strong>MAC_address</strong>|<strong>bat-host_name</strong>|<strong>host_name</strong>|<strong>IP_address</strong>
  </dt>
  <dd>
    <p>Layer 2 ping of a MAC address or bat-host name.  batctl will try to find the bat-host name if the given parameter was not a MAC address. It can also try to guess the MAC address using an IPv4/IPv6 address or a hostname when the IPv4/IPv6 address was configured on top of the batman-adv interface of the destination device and both source and destination devices are in the same IP subnet. The "-c" option tells batctl how man pings should be sent before the program exits. Without the "-c" option batctl will continue pinging without end. Use CTRL + C to stop it.  With "-i" and "-t" you can set the default interval between pings and the timeout time for replies, both in seconds. When run with "-R", the route taken by the ping messages will be recorded. With "-T" you can disable the automatic translation of a client MAC address to the originator address which is responsible for this client.</p>
  </dd>
  <dt>
    <strong>traceroute</strong>|<strong>tr</strong> [<strong>-n</strong>][<strong>-T</strong>] <strong>MAC_address</strong>|<strong>bat-host_name</strong>|<strong>host_name</strong>|<strong>IP_address</strong>
  </dt>
  <dd>
    <p>Layer 2 traceroute to a MAC address or bat-host name. batctl will try to find the bat-host name if the given parameter was not a MAC address. It can also try to guess the MAC address using an IPv4/IPv6 address or a hostname when the IPv4/IPv6 address was configured on top of the batman-adv interface of the destination device and both source and destination devices are in the same IP subnet. batctl will send 3 packets to each host and display the response time. If "-n" is given batctl will not replace the MAC addresses with bat-host names in the output. With "-T" you can disable the automatic translation of a client MAC address to the originator address which is responsible for this client.</p>
  </dd>
  <dt>
    <strong>tcpdump</strong>|<strong>td</strong> [<strong>-c</strong>][<strong>-n</strong>][<strong>-p filter</strong>][<strong>-x filter</strong>] <strong>interface ...</strong>
  </dt>
  <dd>
    <p>batctl will display all packets that are seen on the given interface(s). A variety of options to filter the output are available: To only print packets that match the compatibility number of batctl specify the "-c" (compat filter) option. If "-n" is given batctl will not replace the MAC addresses with bat-host names in the output. To filter the shown packet types you can either use "-p" (dump only specified packet types) or "-x" (dump all packet types except specified). The following packet types are available:</p><p>1 - batman ogm packets</p><p>2 - batman icmp packets</p><p>4 - batman unicast packets</p><p>8 - batman broadcast packets</p><p>32 - batman fragmented packets</p><p>64 - batman tt / roaming packets</p><p>128 - non batman packets</p><p>Example: batctl td &lt;interface&gt; -p 129 -&gt; only display batman ogm packets and non batman packets</p>
  </dd>
  <dt>
    <strong>bisect_iv</strong> [<strong>-l MAC</strong>][<strong>-t MAC</strong>][<strong>-r MAC</strong>][<strong>-s min</strong> [<strong>- max</strong>]][<strong>-o MAC</strong>][<strong>-n</strong>] <strong>logfile1</strong> [<strong>logfile2</strong> ... <strong>logfileN</strong>]
  </dt>
  <dd>
    <p>Analyses the B.A.T.M.A.N. IV logfiles to build a small internal database of all sent sequence numbers and routing table changes. This database can then be analyzed in a number of different ways. With "-l" the database can be used to search for routing loops. Use "-t" to trace OGMs of a host throughout the network. Use "-r" to display routing tables of the nodes. The option "-s" can be used to limit the output to a range of sequence numbers, between min and max, or to one specific sequence number, min. Furthermore using "-o" you can filter the output to a specified originator. If "-n" is given batctl will not replace the MAC addresses with bat-host names in the output.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em></em><strong>bat-hosts</strong><em></em></p>
  </dt>
  <dd>
    <p>This file is similar to the /etc/hosts file. You can write one MAC address and one host name per line. batctl will search for bat-hosts in /etc, your home directory and the current directory. The found data is used to match MAC address to your provided host name or replace MAC addresses in debug output and logs. Host names are much easier to remember than MAC addresses.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO batctl&hellip;</h2>
        <div class="sectioncontent">
<p><strong>ping</strong>(1), <strong>traceroute</strong>(1), <strong>tcpdump</strong>(1), <a href="../man1/dmesg.1.html"><strong>dmesg</strong>(1)</a>, <a href="../man1/dot.1.html"><strong>dot</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>batctl was written by Andreas Langer &lt;an.langer@gmx.de&gt; and Marek Lindner &lt;mareklindner@neomailbox.ch&gt;.</p><p>This manual page was written by Simon Wunderlich &lt;sw@simonwunderlich.de&gt;, Marek Lindner &lt;mareklindner@neomailbox.ch&gt; and Andrew Lunn &lt;andrew@lunn.ch&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="batcher.8.html"><span aria-hidden="true">&larr;</span> batcher.8: Article batching backend for internetnews</a></li>
   <li class="next"><a href="batmand.8.html">batmand.8: Better approach to mobile ad\(hyhoc networking <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
