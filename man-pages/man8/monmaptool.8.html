<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>monmaptool: Ceph monitor cluster map manipulation tool</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ceph monitor cluster map manipulation tool">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="monmaptool (8) manual">
  <meta name="twitter:description" content="Ceph monitor cluster map manipulation tool">
  <meta name="twitter:image" content="https://www.carta.tech/images/ceph-monmaptool-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/monmaptool.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="monmaptool (8) manual" />
  <meta property="og:description" content="Ceph monitor cluster map manipulation tool" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ceph-monmaptool-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">monmaptool<small> (8)</small></h1>
        <p class="lead">Ceph monitor cluster map manipulation tool</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/monmaptool.8.html">
      <span itemprop="name">monmaptool: Ceph monitor cluster map manipulation tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ceph/">
      <span itemprop="name">ceph</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/monmaptool.8.html">
      <span itemprop="name">monmaptool: Ceph monitor cluster map manipulation tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>monmaptool</strong> <em>mapfilename</em> [ --clobber ] [ --print ] [ --create ]
[ --add <em>ip</em>:<em>port</em> <em>...</em> ] [ --rm <em>ip</em>:<em>port</em> <em>...</em> ]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>monmaptool</strong> is a utility to create, view, and modify a monitor cluster map for the Ceph distributed storage system. The monitor map specifies the only fixed addresses in the Ceph distributed system. All other daemons bind to arbitrary addresses and register themselves with the monitors.</p><p>When creating a map with --create, a new monitor map with a new, random UUID will be created. It should be followed by one or more monitor addresses.</p><p>The default Ceph monitor port is 6789.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--print</strong></p>
  </dt>
  <dd>
    <p>will print a plaintext dump of the map, after any modifications are made.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    <p><strong>--clobber</strong></p>
  </dt>
  <dd>
    <p>will allow monmaptool to overwrite mapfilename if changes are made.</p>
  </dd>
  <dt>
    <p><strong>--create</strong></p>
  </dt>
  <dd>
    <p>will create a new monitor map with a new UUID (and with it, a new, empty Ceph file system).</p>
  </dd>
  <dt>
    <p><strong>--generate</strong></p>
  </dt>
  <dd>
    <p>generate a new monmap based on the values on the command line or specified in the ceph configuration.  This is, in order of preference,</p>
<dl class='dl-vertical'>
  <dt>
    1.
  </dt>
  <dd>
    <p><strong>--monmap filename</strong> to specify a monmap to load</p>
  </dd>
  <dt>
    2.
  </dt>
  <dd>
    <p><strong>--mon-host &apos;host1,ip2&apos;</strong> to specify a list of hosts or ip addresses</p>
  </dd>
  <dt>
    3.
  </dt>
  <dd>
    <p><strong>[mon.foo]</strong> sections containing <strong>mon addr</strong> settings in the config</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>--filter-initial-members</strong></p>
  </dt>
  <dd>
    <p>filter the initial monmap by applying the <strong>mon initial members</strong> setting.  Monitors not present in that list will be removed, and initial members not present in the map will be added with dummy addresses.</p>
  </dd>
  <dt>
    <p><strong>--add name ip:port</strong></p>
  </dt>
  <dd>
    <p>will add a monitor with the specified ip:port to the map.</p>
  </dd>
  <dt>
    <p><strong>--rm name</strong></p>
  </dt>
  <dd>
    <p>will remove the monitor with the specified ip:port from the map.</p>
  </dd>
  <dt>
    <p><strong>--fsid uuid</strong></p>
  </dt>
  <dd>
    <p>will set the fsid to the given uuid.  If not specified with --create, a random fsid will be generated.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>To create a new map with three monitors (for a fresh Ceph file system):</p>
<pre>
monmaptool  --create  --add  mon.a 192.168.0.10:6789 --add mon.b 192.168.0.11:6789 &#92;
  --add mon.c 192.168.0.12:6789 --clobber monmap
</pre>
<p>To display the contents of the map:</p>
<pre>
monmaptool --print monmap
</pre>
<p>To replace one monitor:</p>
<pre>
monmaptool --rm mon.a --add mon.a 192.168.0.9:6789 --clobber monmap
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p><strong>monmaptool</strong> is part of the Ceph distributed storage system.  Please refer to the Ceph documentation at <em>http://ceph.com/docs</em> for more information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO monmaptool&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/ceph.8.html"><strong>ceph</strong>(8)</a>, <a href="../man8/crushtool.8.html"><strong>crushtool</strong>(8)</a>,</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>2010-2014, Inktank Storage, Inc. and contributors. Licensed under Creative Commons BY-SA</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="monkeysphere-host.8.html"><span aria-hidden="true">&larr;</span> monkeysphere-host.8: Monkeysphere host key administration tool.</a></li>
   <li class="next"><a href="monthly.8.html">monthly.8: Httpd log rotation for wwwstat <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
