<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>makepercentrelay: Build a list of %-relayed domains</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Build a list of %-relayed domains">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="makepercentrelay (8) manual">
  <meta name="twitter:description" content="Build a list of %-relayed domains">
  <meta name="twitter:image" content="https://www.carta.tech/images/courier-mta-makepercentrelay-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/makepercentrelay.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="makepercentrelay (8) manual" />
  <meta property="og:description" content="Build a list of %-relayed domains" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/courier-mta-makepercentrelay-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">makepercentrelay<small> (8)</small></h1>
        <p class="lead">Build a list of %-relayed domains</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/makepercentrelay.8.html">
      <span itemprop="name">makepercentrelay: Build a list of %-relayed domains</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/courier-mta/">
      <span itemprop="name">courier-mta</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/makepercentrelay.8.html">
      <span itemprop="name">makepercentrelay: Build a list of %-relayed domains</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>makepercentrelay</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>makepercentrelay</strong> reads /etc/courier/esmtppercentrelay.dir and creates /etc/courier/esmtppercentrelay.dat which is a binary database file. The files /etc/courier/esmtppercentrelay and /etc/courier/esmtppercentrelay.dat specify a list of "percent-hack" domains. /etc/courier/esmtppercentrelay is a plain text file, containing one domain per line. The Courier mail server loads the contents of /etc/courier/esmtppercentrelay into memory, so if you have a lot of domains, you will want to use the binary database file. The <strong>makepercentrelay</strong> command reads /etc/courier/esmtppercentrelay.dir, which can be either a plain text file itself, or a directory containing plain text files. All files in the subdirectory are concatenated, and the binary database file is created from the result. Note that this build of courier ignores any files that match the regex pattern ".*.dpkg-[a-z]*" (dpkg configuration file handling) and ".*~" (backup files of some editors).</p><p>the Courier mail server can use both /etc/courier/esmtppercentrelay and /etc/courier/esmtppercentrelay.dat at the same time. Usually you would put a couple of your most frequent domains in /etc/courier/esmtppercentrelay, then put the rest in /etc/courier/esmtppercentrelay.dir, and use <strong>makepercentrelay</strong> to turn it into a database file.</p><p>"percent-hack" domains are a list of domains for which the Courier mail server accepts mail via ESMTP addressed as "local%percent.hack.domain@local.domain", where "percent.hack.domain" is a domain found in /etc/courier/esmtppercentrelay or /etc/courier/esmtppercentrelay.dat, and "local.domain" is any domain found in /etc/courier/locals. The Courier mail server removes the local domain, and rewrites the address as "local@percent.hack.domain", then attempts to deliver it.</p><p>The percent hack applies only to mail received via ESMTP. The Courier mail server does not check this list of domains if the message is received via any other way (such as by running <strong>/usr/bin/sendmail</strong> directly from the command line). "percent.hack.domain" would likely to be a domain that the Courier mail server knows how to handle via some other means. It might be an entry in /etc/courier/aliases, or an entry in /etc/courier/esmtproutes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO makepercentrelay&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong></strong><a href="../man8/esmtpd.8.html"><strong>esmtpd</strong>(8)</a>\m[]\s-2\u[1]\d\s+2, \m[blue]<strong></strong><a href="../man8/makealiases.8.html"><strong>makealiases</strong>(8)</a>\m[]\s-2\u[2]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Sam Varshavchik</strong></p><p>Author</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man8/esmtpd.8.html"><strong>esmtpd</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/esmtpd.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man8/makealiases.8.html"><strong>makealiases</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/makealiases.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="makemap.8.html"><span aria-hidden="true">&larr;</span> makemap.8: Create database maps for sendmail</a></li>
   <li class="next"><a href="makesmtpaccess.8.html">makesmtpaccess.8: Build esmtp server access file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
