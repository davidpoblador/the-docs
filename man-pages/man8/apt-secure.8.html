<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>apt-secure: Archive authentication support for apt</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Archive authentication support for apt">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="apt-secure (8) manual">
  <meta name="twitter:description" content="Archive authentication support for apt">
  <meta name="twitter:image" content="https://www.carta.tech/images/apt-apt-secure-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/apt-secure.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="apt-secure (8) manual" />
  <meta property="og:description" content="Archive authentication support for apt" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/apt-apt-secure-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">apt-secure<small> (8)</small></h1>
        <p class="lead">Archive authentication support for apt</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/apt-secure.8.html">
      <span itemprop="name">apt-secure: Archive authentication support for apt</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/apt/">
      <span itemprop="name">apt</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/apt-secure.8.html">
      <span itemprop="name">apt-secure: Archive authentication support for apt</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Starting with version 0.6, <strong>apt</strong> contains code that does signature checking of the Release file for all archives. This ensures that packages in the archive can&apos;t be modified by people who have no access to the Release file signing key.</p><p>If a package comes from a archive without a signature, or with a signature that apt does not have a key for, that package is considered untrusted, and installing it will result in a big warning. <strong>apt-get</strong> will currently only warn for unsigned archives; future releases might force all sources to be verified before downloading packages from them.</p><p>The package frontends <a href="../man8/apt-get.8.html"><strong>apt-get</strong>(8)</a>, <strong>aptitude</strong>(8) and <a href="../man8/synaptic.8.html"><strong>synaptic</strong>(8)</a> support this new authentication feature.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TRUSTED ARCHIVES</h2>
        <div class="sectioncontent">
<p>The chain of trust from an apt archive to the end user is made up of several steps. <strong>apt-secure</strong> is the last step in this chain; trusting an archive does not mean that you trust its packages not to contain malicious code, but means that you trust the archive maintainer. It&apos;s the archive maintainer&apos;s responsibility to ensure that the archive&apos;s integrity is preserved.</p><p>apt-secure does not review signatures at a package level. If you require tools to do this you should look at <strong>debsig-verify</strong> and <strong>debsign</strong> (provided in the debsig-verify and devscripts packages respectively).</p><p>The chain of trust in Debian starts when a maintainer uploads a new package or a new version of a package to the Debian archive. In order to become effective, this upload needs to be signed by a key contained in the Debian Maintainers keyring (available in the debian-keyring package). Maintainers&apos; keys are signed by other maintainers following pre-established procedures to ensure the identity of the key holder.</p><p>Once the uploaded package is verified and included in the archive, the maintainer signature is stripped off, and checksums of the package are computed and put in the Packages file. The checksums of all of the Packages files are then computed and put into the Release file. The Release file is then signed by the archive key for this Debian release, and distributed alongside the packages and the Packages files on Debian mirrors. The keys are in the Debian archive keyring available in the debian-archive-keyring package.</p><p>End users can check the signature of the Release file, extract a checksum of a package from it and compare it with the checksum of the package they downloaded by hand - or rely on APT doing this automatically.</p><p>Notice that this is distinct from checking signatures on a per package basis. It is designed to prevent two possible attacks:</p><p>Network "man in the middle" attacks. Without signature checking, malicious agents can introduce themselves into the package download process and provide malicious software either by controlling a network element (router, switch, etc.) or by redirecting traffic to a rogue server (through ARP or DNS spoofing attacks).</p><p>Mirror network compromise. Without signature checking, a malicious agent can compromise a mirror host and modify the files in it to propagate malicious software to all users downloading packages from that host.</p><p>However, it does not defend against a compromise of the Debian master server itself (which signs the packages) or against a compromise of the key used to sign the Release files. In any case, this mechanism can complement a per-package signature.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USER CONFIGURATION</h2>
        <div class="sectioncontent">
<p><strong>apt-key</strong> is the program that manages the list of keys used by apt. It can be used to add or remove keys, although an installation of this release will automatically contain the default Debian archive signing keys used in the Debian package repositories.</p><p>In order to add a new key you need to first download it (you should make sure you are using a trusted communication channel when retrieving it), add it with <strong>apt-key</strong> and then run <strong>apt-get update</strong> so that apt can download and verify the InRelease or Release.gpg files from the archives you have configured.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARCHIVE CONFIGURATION</h2>
        <div class="sectioncontent">
<p>If you want to provide archive signatures in an archive under your maintenance you have to:</p><p><em>Create a toplevel Release file</em>, if it does not exist already. You can do this by running <strong>apt-ftparchive release</strong> (provided in apt-utils).</p><p><em>Sign it</em>. You can do this by running <strong>gpg --clearsign -o InRelease Release</strong> and <strong>gpg -abs -o Release.gpg Release</strong>.</p><p><em>Publish the key fingerprint</em>, that way your users will know what key they need to import in order to authenticate the files in the archive.</p><p>Whenever the contents of the archive change (new packages are added or removed) the archive maintainer has to follow the first two steps outlined above.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO apt-secure&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/apt.conf.5.html"><strong>apt.conf</strong>(5)</a>, <a href="../man8/apt-get.8.html"><strong>apt-get</strong>(8)</a>, <a href="../man5/sources.list.5.html"><strong>sources.list</strong>(5)</a>, <a href="../man8/apt-key.8.html"><strong>apt-key</strong>(8)</a>, <a href="../man1/apt-ftparchive.1.html"><strong>apt-ftparchive</strong>(1)</a>, <a href="../man1/debsign.1.html"><strong>debsign</strong>(1)</a>, <a href="../man1/debsig-verify.1.html"><strong>debsig-verify</strong>(1)</a>, <a href="../man1/gpg.1.html"><strong>gpg</strong>(1)</a></p><p>For more background information you might want to review the \m[blue]<strong>Debian Security Infrastructure</strong>\m[]\s-2\u[1]\d\s+2 chapter of the Securing Debian Manual (available also in the harden-doc package) and the \m[blue]<strong>Strong Distribution HOWTO</strong>\m[]\s-2\u[2]\d\s+2 by V. Alex Brennen.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong>APT bug page</strong>\m[]\s-2\u[3]\d\s+2. If you wish to report a bug in APT, please see /usr/share/doc/debian/bug-reporting.txt or the <a href="../man1/reportbug.1.html"><strong>reportbug</strong>(1)</a> command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>APT was written by the APT team &lt;apt@packages.debian.org&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MANPAGE AUTHORS</h2>
        <div class="sectioncontent">
<p>This man-page is based on the work of Javier Fernández-Sanguino Peña, Isaac Jones, Colin Walters, Florian Weimer and Michael Vogt.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p><strong>Jason Gunthorpe</strong></p><p><strong>APT team</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>Debian Security Infrastructure</p><p>http://www.debian.org/doc/manuals/securing-debian-howto/ch7</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>Strong Distribution HOWTO</p><p>http://www.cryptnet.net/fdp/crypto/strong_distro.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>APT bug page</p><p>http://bugs.debian.org/src:apt</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="apt-p2p.8.html"><span aria-hidden="true">&larr;</span> apt-p2p.8: Apt-p2p  apt helper for peer-to-peer downloads of debian packages</a></li>
   <li class="next"><a href="aptitude-curses.8.html">aptitude-curses.8: High-level interface to the package manager <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
