<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fetchnews: Fetch news via nntp</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Fetch news via nntp">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fetchnews (8) manual">
  <meta name="twitter:description" content="Fetch news via nntp">
  <meta name="twitter:image" content="https://www.carta.tech/images/leafnode-fetchnews-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/leafnode-fetchnews.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fetchnews (8) manual" />
  <meta property="og:description" content="Fetch news via nntp" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/leafnode-fetchnews-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fetchnews<small> (8)</small></h1>
        <p class="lead">Fetch news via nntp</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fetchnews.8.html">
      <span itemprop="name">fetchnews: Fetch news via nntp</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/leafnode/">
      <span itemprop="name">leafnode</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fetchnews.8.html">
      <span itemprop="name">fetchnews: Fetch news via nntp</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fetchnews</strong> [<strong>-q</strong>] [<strong>-v</strong>] ... [<strong>-x</strong> <em>number</em>] [<strong>-l</strong>] [<strong>-n</strong>] [<strong>-f</strong>] [<strong>-P</strong>] [<strong>-w</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Leafnode</strong> is a USENET package intended for small sites, where there are few users and little disk space, but where a large number of groups is desired.</p><p>The design of <strong>leafnode</strong> is intended to self-repair after problems, and to require no manual maintenance.</p><p><strong>Fetchnews</strong> (formerly called "fetch") is the program which submits and retrieves new articles to or from the upstream NNTP server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>Be quiet. Suppresses some warnings. This flag cancels any previously encountered <strong>-v</strong> flags.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Be verbose.  This flag cancels any previously encountered <strong>-q</strong> flags.  A maximum of four <strong>-v</strong> can be used (the more v, the more verbose):</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Warn about non-critical errors.</p>
  </dd>
  <dt>
    <p><strong>-vv</strong></p>
  </dt>
  <dd>
    <p>Be verbose whenever a group command occurs.</p>
  </dd>
  <dt>
    <p><strong>-vvv</strong></p>
  </dt>
  <dd>
    <p>Be verbose whenever an article command occurs.</p>
  </dd>
  <dt>
    <p><strong>-vvvv</strong></p>
  </dt>
  <dd>
    <p>For debugging purposes. Don't expect the additional output to make sense.</p>
  </dd>
  <dt>
    <p><strong>-w</strong></p>
  </dt>
  <dd>
    <p>Wait mode. This causes the XOVER update (which runs after the article fetch phase) to run in the foreground. By default, the XOVER update runs in the background, detached from the shell, on systems that offer a working <a href="../man2/fork.2.html"><strong>fork</strong>(2)</a> call. Helpful for debugging and to avoid terminal clobbering when fetchnews is run manually.</p>
  </dd>
  <dt>
    <p><strong>-x</strong> <em>number</em></p>
  </dt>
  <dd>
    <p>Go <em>number</em> articles back and try to re-fetch what's missing. This can be useful to pull data from broken servers that have either overview and group data out of synch or create articles out of article number order.</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>Don't use supplementary servers (<em>-l</em> is supposed to mean "local"). This does speed up the operation quite a bit.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>Do not expire newsgroup subscriptions. Technically: do not unlink files in the <em>interesting.groups</em> directory.</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>Erase the active.read file, thus force redownloading the whole active file from all upstream servers. This is usually occurring only very infrequently because it takes a long time. See <em>timeout_active</em> in <a href="../man8/leafnode.8.html"><strong>leafnode</strong>(8)</a>. <strong>DO NOT</strong> use this option in cron jobs or otherwise regularly.</p>
  </dd>
  <dt>
    <p><strong>-P</strong></p>
  </dt>
  <dd>
    <p>Only post articles that have accumulated in the <em>out.going</em> directory but do not fetch articles from upstream servers.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>fetchnews</strong> will exit with code 0 if it could connect to all servers and encountered no other errors. It exits with code 2 when it was unable to connect to at least one server, and it exits with code 1 on other errors.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES AND CONFIGURATION</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/var/spool/news/leaf.node/active.read</strong></p>
  </dt>
  <dd>
    <p>is a file to track when the active files have been successfully downloaded from the upstream servers the last time. If it is missing, this has the same effect as giving the <strong>-f</strong> option. It is only created after the active file of each upstream servers has been downloaded successfully.</p>
  </dd>

</dl>
<p>See <a href="../man8/leafnode.8.html"><strong>leafnode</strong>(8)</a> for the list of other files affected, and for information on configuring <strong>fetchnews.</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LN_SKIP_GROUPS=</strong><em>pattern[,pattern[...]]</em> (since v1.9.53)</p>
  </dt>
  <dd>
    <p>If set, all groups that match one of the <a href="../man3/wildmat.3.html"><strong>wildmat</strong>(3)</a> <em>pattern</em>s will be skipped during the fetch. This can be used as a quick way of skipping binary groups during daytime, for instance, example:</p><ul>
<li><p>env 'LN_SKIP_GROUPS=*binary*,alt.*' /usr/sbin/fetchnews -nq</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>LN_LOCK_TIMEOUT</strong></p>
  </dt>
  <dd>
    <p>This variable is parsed as an unsigned integer value and determines how many seconds fetchnews will wait when trying to obtain the lock file from another leafnode program. 0 means to wait indefinitely. This variable takes precedence over the configuration file.</p>
  </dd>
  <dt>
    <p><strong>LN_SUPPRESS_DATE</strong></p>
  </dt>
  <dd>
    <p>(since v1.11.7) If this variable is defined (regardless of its value, including empty), leafnode will skip checking the upstream server's time by means of the NNTP DATE command.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ALGORITHM</h2>
        <div class="sectioncontent">
<p>Here is a brief description of what <strong>fetchnews</strong> does.</p><p>First, after connecting to the upstream NNTP server, all articles that have the u+r permission (0400) flag set in <strong>/var/spool/news/out.going</strong> are posted using POST.  If a posting fails, that article is moved to <strong>/var/spool/news/failed.postings</strong> which an administrator has to clean up once in a while.  Moving a file back to <strong>/var/spool/news/out.going</strong> is sufficient to retry the post it. The u+r flag is checked to prevent posting an (incomplete) article that <a href="../man8/leafnode.8.html"><strong>leafnode</strong>(8)</a> is still receiving at the same time.  If a posting succeeds, the article is removed from out.going in order to not post it twice into a moderated newsgroup on a different server (which would send multiple copies of the article to the moderator). <strong>Note:</strong> older fetchnews versions tried to post on all servers first, but failed to do so when one of the servers could not be reached. If you need to work around a dodgy upstream server that is fast but doesn't forward your posts reliably, prohibit posting to this server using the nopost server option in the configuration file, see <a href="../man8/leafnode.8.html"><strong>leafnode</strong>(8)</a>.</p><p>Second, the upstream server's list of newsgroups (obtained using LIST and LIST NEWSGROUPS) is merged into <strong>leafnode</strong>'s (if timeout_active has expired, the active.read file is not present or the active file is empty) or updated (with NEWGROUPS).</p><p>Third, <strong>fetchnews</strong> iterates over the list of newsgroups, performing a GROUP, an XOVER (if supported) or XHDR Message-ID and a number of HEAD and BODY or ARTICLE commands for each group which has been read recently. It assumes that for the particular group it is looking at, "maxage" was set to the groupexpire or global expire. As a consequence, it makes only sense to set maxage lower than or equal to expire.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><strong>Fetchnews</strong> does not use NEWNEWS.  NEWNEWS is not used because it is often very expensive and therefore also disabled at many sites.</p><p>After some experiments, I decided that it was better to fetch all the articles in a group than to optimize away some; users would complain too loudly when the optmizer guessed wrongly.</p><p>The only way to control what newsgroups are accessible to local users is to control what the upstream server lets <strong>fetchnews</strong> read, and that will not keep out all crossposts (endemic in e.g. the alt.sex groups).  If your site is big enough that you need to control newsgroup access, consider using a news server which is designed for a big site.</p><p><strong>Fetchnews</strong> sets its real and effective uid to "news" when started as root and refuses to run if it cannot get this user ID.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p><strong>Fetchnews</strong> ignores the "Supersedes:" and "Control:" headers.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>Older versions of <strong>fetchnews</strong> posted any articles found in out.going. Since v1.9.23, <strong>fetchnews</strong> will only post article files that have their user executable bit set. <strong>Leafnode</strong> sets this bit after it has successfully received a post. This behaviour avoids posting incomplete articles when <strong>leafnode</strong> receives a post at the same time <strong>fetchnews</strong> is posting.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Arnt Gulbrandsen &lt;agulbra@troll.no&gt; and copyright 1995-96 Troll Tech AS, Postboks 6133 Etterstad, 0602 Oslo, Norway, fax +47 22646949.</p><p>Modified by Cornelius Krasel &lt;krasel@wpxx02.toxi.uni-wuerzburg.de&gt;, Markus Enzenberger &lt;enz@cip.physik.uni-muenchen.de&gt; and Randolf Skerka &lt;Randolf.Skerka@gmx.de&gt;. Copyright of the modifications 1997-1999. Modified by Matthias Andree &lt;matthias.andree@gmx.de&gt;, copyright of the modifications 2001-2004.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fetchnews&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/leafnode.8.html"><strong>leafnode</strong>(8)</a>, <a href="../man8/texpire.8.html"><strong>texpire</strong>(8)</a>, <a href="../man1/newsq.1.html"><strong>newsq</strong>(1)</a>, <strong>/etc/news/leafnode/leafnode/filters.example</strong>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="cyrus-nntpd-fetchnews.8.html"><span aria-hidden="true">&larr;</span> fetchnews.8: Retrieve new articles from peer and feed to cyrus</a></li>
   <li class="next"><a href="fgadm.8.html">fgadm.8: Filtergen command program <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
