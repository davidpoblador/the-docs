<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>watch-multiple-mimedefangs: Keep an eye on a cluster of mimedefang machines</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Keep an eye on a cluster of mimedefang machines">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="watch-multiple-mimedefangs (8) manual">
  <meta name="twitter:description" content="Keep an eye on a cluster of mimedefang machines">
  <meta name="twitter:image" content="https://www.carta.tech/images/mimedefang-watch-multiple-mimedefangs-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/watch-multiple-mimedefangs.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="watch-multiple-mimedefangs (8) manual" />
  <meta property="og:description" content="Keep an eye on a cluster of mimedefang machines" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mimedefang-watch-multiple-mimedefangs-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">watch-multiple-mimedefangs<small> (8)</small></h1>
        <p class="lead">Keep an eye on a cluster of mimedefang machines</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/watch-multiple-mimedefangs.8.html">
      <span itemprop="name">watch-multiple-mimedefangs: Keep an eye on a cluster of mimedefang machines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mimedefang/">
      <span itemprop="name">mimedefang</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/watch-multiple-mimedefangs.8.html">
      <span itemprop="name">watch-multiple-mimedefangs: Keep an eye on a cluster of mimedefang machines</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>watch-multiple-mimdefangs.tcl [-n] [-r] [-s] [-t] [-archive] </strong><em>machine-1 machine-2 ... machine-N</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>watch-multiple-mimdefangs.tcl</strong> is a Tk script that graphically displays the status of <a href="../man8/mimedefang-multiplexor.8.html"><strong>mimedefang-multiplexor</strong>(8)</a> on a cluster of machines.  Note that Tcl/Tk 8.4 or higher is required to run <strong>watch-multiple-mimdefangs.tcl</strong>.</p><p>If you supply the <strong>-archive</strong> command-line option, then <strong>watch-multiple-mimdefangs.tcl</strong> logs the output of <strong>md-mx-ctrl rawload</strong> for each machine.  The output for <em>machine_name</em> is logged in:</p><p>$HOME/.watch-multiple-mimedefangs/<em>machine_name</em>/data.</p><p>If you supply any of <strong>-n</strong>, <strong>-r</strong>, <strong>-s</strong> or <strong>-t</strong> options, then <strong>watch-multiple-mimdefangs.tcl</strong> uses the <strong>rawload1</strong> command rather than <strong>rawload</strong> command to read performance data.  <em>Do not use these options unless all monitored</em> machines are running MIMEDefang 2.74 or newer!.</p><p>The <strong>-n</strong>, <strong>-r</strong>, <strong>-s</strong>, and <strong>-t</strong> options enable monitoring of scan times, filter_relay times, filter_sender times and filter_recipient times, respectively.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PREREQUISITES</h2>
        <div class="sectioncontent">
<p>To use <strong>watch-multiple-mimdefangs.tcl</strong> to monitor a cluster of machines, you need the following prerequisites:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>A UNIX-like machine with Tcl/Tk 8.4, the X window system and an SSH client. You also need "xterm" to use some of the features.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>The ability to SSH <em>as root</em> to all of the machines you want to monitor. Ideally, you should be using the SSH agent so that you can SSH to the monitored machines as root without being prompted for a password or pass phrase.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>The program <strong>md-mx-ctrl</strong> on root's path on all the machines you want to monitor.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISPLAY</h2>
        <div class="sectioncontent">
<p>For each machine specified on the command line, <strong>watch-multiple-mimdefangs.tcl</strong> creates a chart with five columns.  The columns are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>A button with the name of the machine.  Clicking the button pops up a menu that lets you take various actions, as described later.  If all slaves on the machine are busy, the button turns yellow.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>A label showing the number of busy slaves in the form "busy/total", where total is the total number of slaves.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>A label showing the average number of messages per second over the last 10 seconds.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>A label showing the average number of milliseconds per scan over the last 10 seconds.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>A chart that graphs the average number of busy slaves, the average number of messages per second and the average scan time in milliseconds, all averaged over the last 10 seconds.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MACHINE MENU</h2>
        <div class="sectioncontent">
<p>If you click on a machine name, a menu with three options pops up:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>SSH</strong></p>
  </dt>
  <dd>
    <p>Open an xterm session and ssh as root to the machine.</p>
  </dd>
  <dt>
    <p><strong>Busy Slaves</strong></p>
  </dt>
  <dd>
    <p>Monitor the busy slaves on the machine.  If you click on the process-ID of a slave, an xterm will open up and the command "strace -s 100 -t -p <em>pid</em>" will be executed on the remote machine.  This is Linux-specific, but you can edit <strong>watch-multiple-mimdefangs.tcl</strong> to replace the command with your particular system's command for tracing system calls.</p>
  </dd>
  <dt>
    <p><strong>Delete</strong></p>
  </dt>
  <dd>
    <p>Remove the machine from the list of machines being monitored.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADDING A MACHINE</h2>
        <div class="sectioncontent">
<p>If you need to add a machine to the display, simply type the name of the machine in the "Add Machine:" box and press Enter.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>watch-multiple-mimdefangs.tcl</strong> was written by David F. Skoll.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO watch-multiple-mimedefangs&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/mimedefang.pl.8.html"><strong>mimedefang.pl</strong>(8)</a>, <a href="../man5/mimedefang-filter.5.html"><strong>mimedefang-filter</strong>(5)</a>, <a href="../man8/mimedefang.8.html"><strong>mimedefang</strong>(8)</a>, <a href="../man7/mimedefang-protocol.7.html"><strong>mimedefang-protocol</strong>(7)</a>, <a href="../man8/md-mx-ctrl.8.html"><strong>md-mx-ctrl</strong>(8)</a>, <a href="../man8/watch-mimedefang.8.html"><strong>watch-mimedefang</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="watch-mimedefang.8.html"><span aria-hidden="true">&larr;</span> watch-mimedefang.8: Keep an eye on mimedefang-multiplexor</a></li>
   <li class="next"><a href="watchcatd.8.html">watchcatd.8: Process monitoring daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
