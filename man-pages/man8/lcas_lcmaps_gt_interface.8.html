<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lcas_lcmaps_gt_interface: A globus gsi-authz plug-in to run lcas and lcmaps</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A globus gsi-authz plug-in to run lcas and lcmaps">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lcas_lcmaps_gt_interface (8) manual">
  <meta name="twitter:description" content="A globus gsi-authz plug-in to run lcas and lcmaps">
  <meta name="twitter:image" content="https://www.carta.tech/images/lcas-lcmaps-gt4-interface-lcas_lcmaps_gt_interface-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/lcas_lcmaps_gt_interface.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lcas_lcmaps_gt_interface (8) manual" />
  <meta property="og:description" content="A globus gsi-authz plug-in to run lcas and lcmaps" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lcas-lcmaps-gt4-interface-lcas_lcmaps_gt_interface-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lcas_lcmaps_gt_interface<small> (8)</small></h1>
        <p class="lead">A globus gsi-authz plug-in to run lcas and lcmaps</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/lcas_lcmaps_gt_interface.8.html">
      <span itemprop="name">lcas_lcmaps_gt_interface: A globus gsi-authz plug-in to run lcas and lcmaps</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lcas-lcmaps-gt4-interface/">
      <span itemprop="name">lcas-lcmaps-gt4-interface</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/lcas_lcmaps_gt_interface.8.html">
      <span itemprop="name">lcas_lcmaps_gt_interface: A globus gsi-authz plug-in to run lcas and lcmaps</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lcas_lcmaps_gt_interface</strong></p><p><strong>lcas_lcmaps_gt4_interface</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This is a plug-in to be loaded from a GSI-AuthZ capable Globus service. The feature was introduced in Globus GT4 and is available for GT5. The purpose of this call-out is to authorize a user by running the LCAS framework and map the user credentials to a Unix account based using the LCMAPS framework. Both LCAS and LCMAPS are frameworks that run configured plug-ins to do the real work.</p><p>Some of the plug-ins are capable of imposing certain policy on the user credentials, others are capable of off-loading the decision to a centralized service to make the decision or even provide an account mapping in the process.</p><p>This plug-in is dynamically loaded during each interaction that requires an account mapping in the GSI-AuthZ interface of a Globus service.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LLGT_LOG_FILE</strong></p>
  </dt>
  <dd>
    <p>When this variable is set and it can be opened as file, log output will go to the given file instead of to syslog. When either $LCAS_LOG_FILE or $LCMAPS_LOG_FILE is unset, it will also be set to this same file.</p>
  </dd>
  <dt>
    <p><strong>LLGT_LOG_FACILITY</strong></p>
  </dt>
  <dd>
    <p>Change the default logging facility with the $LLGT_LOG_FACILITY environment variable. Use the name of (standard syslog) facility names. Example: LOG_DAEMON, LOG_LOCAL1, etcetera</p>
  </dd>
  <dt>
    <p><strong>LLGT_LOG_IDENT</strong></p>
  </dt>
  <dd>
    <p>The $LLGT_LOG_IDENT can (optionally) be set as the Syslog ident value. This will be the identifying string in Syslog for the current process. Not using this option will let Syslog (or one of the GT services) to set these options. By default the Syslog ident will be set to the executable name.</p>
  </dd>
  <dt>
    <p><strong>LLGT_RUN_LCAS</strong></p>
  </dt>
  <dd>
    <p>Set the environment variable $LLGT_RUN_LCAS to "no", "disabled" or "disable" to avoid LCAS to run prior to the LCMAPS.</p><p>There is a matching ./configure option "--enable-lcas" which can be used to change the default behaviour to run LCAS or not. The $LLGT_RUN_LCAS environment variable can still influence the LCAS run.</p>
  </dd>
  <dt>
    <p><strong>LLGT_LIFT_PRIVILEGED_PROTECTION</strong></p>
  </dt>
  <dd>
    <p>Normally the callout, after LCMAPS has finished, checks whether it is (still) running with root privileges (uid, euid, gid or egid) and fails if that is the case. This is to prevent erroneous configurations to silently result in a root-account mapping in services that do not have their own checks for this.</p><p>When the environment variable LLGT_LIFT_PRIVILEGED_PROTECTION is set, this check is disabled. This is NEEDED for services that:</p><p>1.) don't user switch, and run as root.</p><p>2.) services that expect only a username to be returned and perform the user switch themselves, e.g. the Globus GSI-OpenSSHd.</p>
  </dd>
  <dt>
    <p><strong>LLGT_CACHE_CALLOUT</strong></p>
  </dt>
  <dd>
    <p>Set the environment variable $LLGT_CACHE_CALLOUT to "no", "disabled" or "disable" to disable reusing the result of the `localname' callout for the `userok' callout. This results in calling the LCAS/LCMAPS authorization twice for e.g. gsisshd.</p>
  </dd>
  <dt>
    <p><strong>LLGT_DLCLOSE_LCMAPS</strong></p>
  </dt>
  <dd>
    <p>Set the environment variable $LLGT_DLCLOSE_LCMAPS to "no", "disabled" or "disable" to prevent calling dlclose() on the LCMAPS library. This might be needed as a workaround on RH5-based systems in an installation for gsisshd, when the use of PAM is enabled ("UsePAM Yes" in the /etc/gsissh/sshd_config). The underlying bug is a combination between the OpenSSL, VOMS and PAM libraries, which can trigger a segfault when VOMS is initialized twice.</p>
  </dd>
  <dt>
    <p><strong>LLGT_DLCLOSE_LCAS</strong></p>
  </dt>
  <dd>
    <p>Set the environment variable $LLGT_DLCLOSE_LCAS to "no", "disabled" or "disable" to prevent calling dlclose() on the LCAS library. This might be needed as a workaround on RH5-based systems. The underlying bug is a combination between the OpenSSL, VOMS and Globus libraries, which can trigger a segfault when VOMS is initialized twice, which can happen when LCAS is using a VOMS based plugin. Normally should not be needed as LCAS is now dlclosed and terminated after LCMAPS.</p>
  </dd>
  <dt>
    <p><strong>LLGT_NO_CHANGE_USER</strong><em> (deprecated)</em></p>
  </dt>
  <dd>
    <p>Depreciated $LLGT_NO_CHANGE_USER in favour of $LLGT_LIFT_PRIVILEGED_PROTECTION. (Depreciation does not mean non-functional anymore)</p>
  </dd>
  <dt>
    <p><strong>LLGT4_NO_CHANGE_USER</strong><em> (deprecated)</em></p>
  </dt>
  <dd>
    <p>Depreciated $LLGT4_NO_CHANGE_USER in favour of $LLGT_LIFT_PRIVILEGED_PROTECTION. (Depreciation does not mean non-functional anymore)</p>
  </dd>
  <dt>
    <p><strong>LLGT_VOMS_DISABLE_CREDENTIAL_CHECK</strong></p>
  </dt>
  <dd>
    <p>The VOMS credentials are verified by the LCMAPS framework before further processing is done in the plug-ins. The LCMAPS framework has an API to enable or disable the verification of the VOMS credentials and this option will <strong>disable</strong> the verification of the VOMS credentials. A vanilla LCMAPS build will verify the VOMS credentials by default.</p>
  </dd>
  <dt>
    <p><strong>LLGT_VOMS_ENABLE_CREDENTIAL_CHECK</strong></p>
  </dt>
  <dd>
    <p>Similar to the $LLGT_VOMS_DISABLE_CREDENTIAL_CHECK environment variable, this setting will <strong>enable</strong> the verification of the VOMS credentials, overriding the LCMAPS default setting to have the verification of VOMS credentials to be disabled. A vanilla LCMAPS build will verify the VOMS credentials by default, the OSG build has is disabled by default.</p>
  </dd>
  <dt>
    <p><strong>LLGT_LCAS_LIBDIR</strong></p>
  </dt>
  <dd>
    <p>Support for an alternative LCAS_LIBDIR as a run-time setting by exporting $LLGT_LCAS_LIBDIR="/usr/local/lib/liblcas.so"</p>
  </dd>
  <dt>
    <p><strong>LLGT_LCMAPS_LIBDIR</strong></p>
  </dt>
  <dd>
    <p>Support for an alternative LCMAPS_LIBDIR as a run-time setting by exporting $LLGT_LCMAPS_LIBDIR="/usr/local/lib/liblcmaps.so"</p>
  </dd>
  <dt>
    <p><strong>LLGT_ENABLE_DEBUG</strong></p>
  </dt>
  <dd>
    <p>If the $LLGT_ENABLE_DEBUG environment variable is set, then the debugging message logged at level LOG_DEBUG are passed to the log. The scope of this setting is only within the LCAS-LCMAPS-GT-interface</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INTERNAL ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>GATEKEEPER_JM_ID</strong></p>
  </dt>
  <dd>
    <p>An environment variable that is internally set to uniquely identify this gatekeeper and the job manager.</p>
  </dd>
  <dt>
    <p><strong>JOB_REPOSITORY_ID</strong></p>
  </dt>
  <dd>
    <p>Similar to the $GATEKEEPER_JM_ID value, but its purpose is for the LCMAPS job repository plug-in.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LCAS ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LCAS_DEBUG_LEVEL</strong></p>
  </dt>
  <dd>
    <p>Debug level</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LCMAPS ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LCMAPS_DEBUG_LEVEL</strong></p>
  </dt>
  <dd>
    <p>For LCMAPS 1.5.0 (and newer) the value "5" corresponds to Syslog LOG_DEBUG, "4" corresponds to LOG_INFO, "3" to LOG_NOTICE and so on. The LCMAPS default is to log up to LOG_INFO.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>True</strong></p>
  </dt>
  <dd>
    <p>The user is authorized and a local Unix account was procured.</p>
  </dd>
  <dt>
    <p><strong>False</strong></p>
  </dt>
  <dd>
    <p>No mapping was possible.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>From version 0.3.0 onwards, the interface tries to forward the requested username to LCMAPS (for version 1.6.0 and up). The mapping plugins can use this to support multiple username entries in the grid-mapfile, or enforcing poolaccount mappings to a specific poolaccount.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Please report any errors to the Nikhef Grid Middleware Security Team &lt;grid-mw-security-support@nikhef.nl&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lcas_lcmaps_gt_interface&hellip;</h2>
        <div class="sectioncontent">
<p><strong>lcas.db</strong>(5), <strong>lcas</strong>(3). <strong>lcmaps.db</strong>(5), <a href="../man3/lcmaps.3.html"><strong>lcmaps</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>LCMAPS and the LCMAPS plug-ins were written by the Grid Middleware Security Team &lt;grid-mw-security@nikhef.nl&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lcas_lcmaps_gt4_interface.8.html"><span aria-hidden="true">&larr;</span> lcas_lcmaps_gt4_interface.8: A globus gsi-authz plug-in to run lcas and lcmaps</a></li>
   <li class="next"><a href="lcd-flash.8.html">lcd-flash.8: Momentarily inverts the lcd to indicate an error <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
