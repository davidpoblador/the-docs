<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dhcpd: Dynamic host configuration protocol server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Dynamic host configuration protocol server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dhcpd (8) manual">
  <meta name="twitter:description" content="Dynamic host configuration protocol server">
  <meta name="twitter:image" content="https://www.carta.tech/images/isc-dhcp-server-dhcpd-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dhcpd.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dhcpd (8) manual" />
  <meta property="og:description" content="Dynamic host configuration protocol server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/isc-dhcp-server-dhcpd-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dhcpd<small> (8)</small></h1>
        <p class="lead">Dynamic host configuration protocol server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dhcpd.8.html">
      <span itemprop="name">dhcpd: Dynamic host configuration protocol server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/isc-dhcp-server/">
      <span itemprop="name">isc-dhcp-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dhcpd.8.html">
      <span itemprop="name">dhcpd: Dynamic host configuration protocol server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dhcpd</strong> [ <strong>-p</strong> <em>port</em> ] [ <strong>-f</strong> ] [ <strong>-d</strong> ] [ <strong>-q</strong> ] [ <strong>-t</strong> | <strong>-T</strong> ] [ <strong>-4</strong> | <strong>-6</strong> ] [ <strong>-s</strong> <em>server</em> ] [ <strong>-cf</strong> <em>config-file</em> ] [ <strong>-lf</strong> <em>lease-file</em> ] [ <strong>-pf</strong> <em>pid-file</em> ] [ <strong>--no-pid</strong> ] [ <strong>-tf</strong> <em>trace-output-file</em> ] [ <strong>-play</strong> <em>trace-playback-file</em> ] [ <em>if0</em> [ <em>...ifN</em> ] ]</p><p><strong>dhcpd</strong> --version</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Internet Systems Consortium DHCP Server, dhcpd, implements the Dynamic Host Configuration Protocol (DHCP) and the Internet Bootstrap Protocol (BOOTP).  DHCP allows hosts on a TCP/IP network to request and be assigned IP addresses, and also to discover information about the network to which they are attached.  BOOTP provides similar functionality, with certain restrictions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPERATION</h2>
        <div class="sectioncontent">
<p>The DHCP protocol allows a host which is unknown to the network administrator to be automatically assigned a new IP address out of a pool of IP addresses for its network.  In order for this to work, the network administrator allocates address pools in each subnet and enters them into the <a href="../man5/dhcpd.conf.5.html"><strong>dhcpd.conf</strong>(5)</a> file.</p><p>There are two versions of the DHCP protocol DHCPv4 and DHCPv6.  At startup the server  may be started for one or the other via the <strong>-4</strong> or <strong>-6</strong> arguments.</p><p>On startup, dhcpd reads the <em>dhcpd.conf</em> file and stores a list of available addresses on each subnet in memory.  When a client requests an address using the DHCP protocol, dhcpd allocates an address for it.  Each client is assigned a lease, which expires after an amount of time chosen by the administrator (by default, one day).  Before leases expire, the clients to which leases are assigned are expected to renew them in order to continue to use the addresses.  Once a lease has expired, the client to which that lease was assigned is no longer permitted to use the leased IP address.</p><p>In order to keep track of leases across system reboots and server restarts, dhcpd keeps a list of leases it has assigned in the <a href="../man5/dhcpd.leases.5.html"><strong>dhcpd.leases</strong>(5)</a> file.  Before dhcpd grants a lease to a host, it records the lease in this file and makes sure that the contents of the file are flushed to disk.  This ensures that even in the event of a system crash, dhcpd will not forget about a lease that it has assigned.  On startup, after reading the dhcpd.conf file, dhcpd reads the dhcpd.leases file to refresh its memory about what leases have been assigned.</p><p>New leases are appended to the end of the dhcpd.leases file.  In order to prevent the file from becoming arbitrarily large, from time to time dhcpd creates a new dhcpd.leases file from its in-core lease database.  Once this file has been written to disk, the old file is renamed <em>dhcpd.leases~</em>, and the new file is renamed dhcpd.leases.  If the system crashes in the middle of this process, whichever dhcpd.leases file remains will contain all the lease information, so there is no need for a special crash recovery process.</p><p>BOOTP support is also provided by this server.  Unlike DHCP, the BOOTP protocol does not provide a protocol for recovering dynamically-assigned addresses once they are no longer needed.  It is still possible to dynamically assign addresses to BOOTP clients, but some administrative process for reclaiming addresses is required.  By default, leases are granted to BOOTP clients in perpetuity, although the network administrator may set an earlier cutoff date or a shorter lease length for BOOTP leases if that makes sense.</p><p>BOOTP clients may also be served in the old standard way, which is to simply provide a declaration in the dhcpd.conf file for each BOOTP client, permanently assigning an address to each client.</p><p>Whenever changes are made to the dhcpd.conf file, dhcpd must be restarted.  To restart dhcpd, send a SIGTERM (signal 15) to the process ID contained in <em>RUNDIR/dhcpd.pid</em>, and then re-invoke dhcpd.  Because the DHCP server database is not as lightweight as a BOOTP database, dhcpd does not automatically restart itself when it sees a change to the dhcpd.conf file.</p><p>Note: We get a lot of complaints about this.  We realize that it would be nice if one could send a SIGHUP to the server and have it reload the database.  This is not technically impossible, but it would require a great deal of work, our resources are extremely limited, and they can be better spent elsewhere.  So please don't complain about this on the mailing list unless you're prepared to fund a project to implement this feature, or prepared to do it yourself.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND LINE</h2>
        <div class="sectioncontent">
<p>The names of the network interfaces on which dhcpd should listen for broadcasts may be specified on the command line.  This should be done on systems where dhcpd is unable to identify non-broadcast interfaces, but should not be required on other systems.  If no interface names are specified on the command line dhcpd will identify all network interfaces which are up, eliminating non-broadcast interfaces if possible, and listen for DHCP broadcasts on each interface.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND LINE OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-4</strong></p>
  </dt>
  <dd>
    <p>Run as a DHCP server. This is the default and cannot be combined with <strong>-6</strong>.</p>
  </dd>
  <dt>
    <p><strong>-6</strong></p>
  </dt>
  <dd>
    <p>Run as a DHCPv6 server. This cannot be combined with <strong>-4</strong>.</p>
  </dd>
  <dt>
    <p><strong>-p</strong><em></em><strong>port</strong></p>
  </dt>
  <dd>
    <p>The udp port number on which <strong>dhcpd</strong> should listen.  If unspecified <strong>dhcpd</strong> uses the default port of 67.  This is mostly useful for debugging purposes.</p>
  </dd>
  <dt>
    <p><strong>-s</strong><em></em><strong>address</strong></p>
  </dt>
  <dd>
    <p>Specify an address or host name to which <strong>dhcpd</strong> should send replies rather than the broadcast address (255.255.255.255). This option is only supported in IPv4.</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>Force <strong>dhcpd</strong> to run as a foreground process instead of as a daemon in the background. This is useful when running <strong>dhcpd</strong> under a debugger, or when running it out of inittab on System V systems.</p>
  </dd>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Send log messages to the standard error descriptor. This can be useful for debugging, and also at sites where a complete log of all dhcp activity must be kept but syslogd is not reliable or otherwise cannot be used.  Normally, <strong>dhcpd</strong> will log all output using the <a href="../man3/syslog.3.html"><strong>syslog</strong>(3)</a></strong> function with the log facility set to LOG_DAEMON.  Note that <strong>-d</strong> implies <strong>-f</strong> (the daemon will not fork itself into the background).</p>
  </dd>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>Be quiet at startup.  This suppresses the printing of the entire copyright message during startup.  This might be desirable when starting <strong>dhcpd</strong> from a system startup script (e.g., /etc/rc).</p>
  </dd>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>Test the configuration file.  The server tests the configuration file for correct syntax, but will not attempt to perform any network operations.  This can be used to test a new configuration file automatically before installing it.</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Test the lease file.  The server tests the lease file for correct syntax, but will not attempt to perform any network operations.  This can be used to test a new lease file automatically before installing it.</p>
  </dd>
  <dt>
    <p><strong>-tf</strong><em></em><strong>tracefile</strong></p>
  </dt>
  <dd>
    <p>Specify a file into which the entire startup state of the server and all the transactions it processes are logged.  This can be useful in submitting bug reports - if you are getting a core dump every so often, you can start the server with the <strong>-tf</strong> option and then, when the server dumps core, the trace file will contain all the transactions that led up to it dumping core, so that the problem can be easily debugged with <strong>-play</strong>.</p>
  </dd>
  <dt>
    <p><strong>-play</strong><em></em><strong>playfile</strong></p>
  </dt>
  <dd>
    <p>Specify a file from which the entire startup state of the server and all the transactions it processed are read.  The <strong>-play</strong> option must be specified with an alternate lease file, using the <strong>-lf</strong> switch, so that the DHCP server doesn't wipe out your existing lease file with its test data.  The DHCP server will refuse to operate in playback mode unless you specify an alternate lease file.</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>Print version number and exit.</p>
  </dd>

</dl>
<p><em>Modifying default file locations:</em> The following options can be used to modify the locations <strong>dhcpd</strong> uses for its files.  Because of the importance of using the same lease database at all times when running dhcpd in production, these options should be used <strong>only</strong> for testing lease files or database files in a non-production environment.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-cf</strong><em></em><strong>config-file</strong></p>
  </dt>
  <dd>
    <p>Path to alternate configuration file.</p>
  </dd>
  <dt>
    <p><strong>-lf</strong><em></em><strong>lease-file</strong></p>
  </dt>
  <dd>
    <p>Path to alternate lease file.</p>
  </dd>
  <dt>
    <p><strong>-pf</strong><em></em><strong>pid-file</strong></p>
  </dt>
  <dd>
    <p>Path to alternate pid file.</p>
  </dd>
  <dt>
    <p><strong>--no-pid</strong></p>
  </dt>
  <dd>
    <p>Option to disable writing pid files.  By default the program will write a pid file.  If the program is invoked with this option it will not check for an existing server process.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>The syntax of the <a href="../man5/dhcpd.conf.5.html"><strong>dhcpd.conf</strong>(5)</a> file is discussed separately.  This section should be used as an overview of the configuration process, and the <a href="../man5/dhcpd.conf.5.html"><strong>dhcpd.conf</strong>(5)</a> documentation should be consulted for detailed reference information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Subnets</h2>
        <div class="sectioncontent">
<p>dhcpd needs to know the subnet numbers and netmasks of all subnets for which it will be providing service.  In addition, in order to dynamically allocate addresses, it must be assigned one or more ranges of addresses on each subnet which it can in turn assign to client hosts as they boot.  Thus, a very simple configuration providing DHCP support might look like this:</p>
<pre>
	subnet 239.252.197.0 netmask 255.255.255.0 {
	  range 239.252.197.10 239.252.197.250;
	}
</pre>
<p>Multiple address ranges may be specified like this:</p>
<pre>
	subnet 239.252.197.0 netmask 255.255.255.0 {
	  range 239.252.197.10 239.252.197.107;
	  range 239.252.197.113 239.252.197.250;
	}
</pre>
<p>If a subnet will only be provided with BOOTP service and no dynamic address assignment, the range clause can be left out entirely, but the subnet statement must appear.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Lease Lengths</h2>
        <div class="sectioncontent">
<p>DHCP leases can be assigned almost any length from zero seconds to infinity.  What lease length makes sense for any given subnet, or for any given installation, will vary depending on the kinds of hosts being served.</p><p>For example, in an office environment where systems are added from time to time and removed from time to time, but move relatively infrequently, it might make sense to allow lease times of a month or more.  In a final test environment on a manufacturing floor, it may make more sense to assign a maximum lease length of 30 minutes - enough time to go through a simple test procedure on a network appliance before packaging it up for delivery.</p><p>It is possible to specify two lease lengths: the default length that will be assigned if a client doesn't ask for any particular lease length, and a maximum lease length.  These are specified as clauses to the subnet command:</p>
<pre>
	subnet 239.252.197.0 netmask 255.255.255.0 {
	  range 239.252.197.10 239.252.197.107;
	  default-lease-time 600;
	  max-lease-time 7200;
	}
</pre>
<p>This particular subnet declaration specifies a default lease time of 600 seconds (ten minutes), and a maximum lease time of 7200 seconds (two hours).  Other common values would be 86400 (one day), 604800 (one week) and 2592000 (30 days).</p><p>Each subnet need not have the same lease&ndash;in the case of an office environment and a manufacturing environment served by the same DHCP server, it might make sense to have widely disparate values for default and maximum lease times on each subnet.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BOOTP Support</h2>
        <div class="sectioncontent">
<p>Each BOOTP client must be explicitly declared in the dhcpd.conf file.  A very basic client declaration will specify the client network interface's hardware address and the IP address to assign to that client.  If the client needs to be able to load a boot file from the server, that file's name must be specified.  A simple bootp client declaration might look like this:</p>
<pre>
	host haagen {
	  hardware ethernet 08:00:2b:4c:59:23;
	  fixed-address 239.252.197.9;
	  filename "/tftpboot/haagen.boot";
	}
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Options</h2>
        <div class="sectioncontent">
<p>DHCP (and also BOOTP with Vendor Extensions) provide a mechanism whereby the server can provide the client with information about how to configure its network interface (e.g., subnet mask), and also how the client can access various network services (e.g., DNS, IP routers, and so on).</p><p>These options can be specified on a per-subnet basis, and, for BOOTP clients, also on a per-client basis.  In the event that a BOOTP client declaration specifies options that are also specified in its subnet declaration, the options specified in the client declaration take precedence.  A reasonably complete DHCP configuration might look something like this:</p>
<pre>
	subnet 239.252.197.0 netmask 255.255.255.0 {
	  range 239.252.197.10 239.252.197.250;
	  default-lease-time 600 max-lease-time 7200;
	  option subnet-mask 255.255.255.0;
	  option broadcast-address 239.252.197.255;
	  option routers 239.252.197.1;
	  option domain-name-servers 239.252.197.2, 239.252.197.3;
	  option domain-name "isc.org";
	}
</pre>
<p>A bootp host on that subnet that needs to be in a different domain and use a different name server might be declared as follows:</p>
<pre>
	host haagen {
	  hardware ethernet 08:00:2b:4c:59:23;
	  fixed-address 239.252.197.9;
	  filename "/tftpboot/haagen.boot";
	  option domain-name-servers 192.5.5.1;
	  option domain-name "vix.com";
	}
</pre>
<p>A more complete description of the dhcpd.conf file syntax is provided in <a href="../man5/dhcpd.conf.5.html"><strong>dhcpd.conf</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OMAPI</h2>
        <div class="sectioncontent">
<p>The DHCP server provides the capability to modify some of its configuration while it is running, without stopping it, modifying its database files, and restarting it.  This capability is currently provided using OMAPI - an API for manipulating remote objects.  OMAPI clients connect to the server using TCP/IP, authenticate, and can then examine the server's current status and make changes to it.</p><p>Rather than implementing the underlying OMAPI protocol directly, user programs should use the dhcpctl API or OMAPI itself.  Dhcpctl is a wrapper that handles some of the housekeeping chores that OMAPI does not do automatically.  Dhcpctl and OMAPI are documented in <strong>dhcpctl</strong>(3)</strong> and <a href="../man3/omapi.3.html"><strong>omapi</strong>(3)</a></strong>.</p><p>OMAPI exports objects, which can then be examined and modified.  The DHCP server exports the following objects: lease, host, failover-state and group.  Each object has a number of methods that are provided: lookup, create, and destroy.  In addition, it is possible to look at attributes that are stored on objects, and in some cases to modify those attributes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE LEASE OBJECT</h2>
        <div class="sectioncontent">
<p>Leases can't currently be created or destroyed, but they can be looked up to examine and modify their state.</p><p>Leases have the following attributes:</p><p><strong>state </strong><em>integer</em> lookup, examine</p>
<pre>
1 = free
2 = active
3 = expired
4 = released
5 = abandoned
6 = reset
7 = backup
8 = reserved
9 = bootp
</pre>
<p><strong>ip-address </strong><em>data</em> lookup, examine</p><p>The IP address of the lease.</p><p><strong>dhcp-client-identifier </strong><em>data</em> lookup, examine, update</p><p>The client identifier that the client used when it acquired the lease. Not all clients send client identifiers, so this may be empty.</p><p><strong>client-hostname </strong><em>data</em> examine, update</p><p>The value the client sent in the host-name option.</p><p><strong>host </strong><em>handle</em> examine</p><p>the host declaration associated with this lease, if any.</p><p><strong>subnet </strong><em>handle</em> examine</p><p>the subnet object associated with this lease (the subnet object is not currently supported).</p><p><strong>pool </strong><em>handle</em> examine</p><p>the pool object associated with this lease (the pool object is not currently supported).</p><p><strong>billing-class </strong><em>handle</em> examine</p><p>the handle to the class to which this lease is currently billed, if any (the class object is not currently supported).</p><p><strong>hardware-address </strong><em>data</em> examine, update</p><p>the hardware address (chaddr) field sent by the client when it acquired its lease.</p><p><strong>hardware-type </strong><em>integer</em> examine, update</p><p>the type of the network interface that the client reported when it acquired its lease.</p><p><strong>ends </strong><em>time</em> examine</p><p>the time when the lease's current state ends, as understood by the client.</p><p><strong>tstp </strong><em>time</em> examine</p><p>the time when the lease's current state ends, as understood by the server.</p><p><strong>tsfp </strong><em>time</em> examine</p><p>the adjusted time when the lease's current state ends, as understood by the failover peer (if there is no failover peer, this value is undefined).  Generally this value is only adjusted for expired, released, or reset leases while the server is operating in partner-down state, and otherwise is simply the value supplied by the peer.</p><p><strong>atsfp </strong><em>time</em> examine</p><p>the actual tsfp value sent from the peer.  This value is forgotten when a lease binding state change is made, to facilitate retransmission logic.</p><p><strong>cltt </strong><em>time</em> examine</p><p>The time of the last transaction with the client on this lease.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE HOST OBJECT</h2>
        <div class="sectioncontent">
<p>Hosts can be created, destroyed, looked up, examined and modified. If a host declaration is created or deleted using OMAPI, that information will be recorded in the dhcpd.leases file.  It is permissible to delete host declarations that are declared in the dhcpd.conf file.</p><p>Hosts have the following attributes:</p><p><strong>name </strong><em>data</em> lookup, examine, modify</p><p>the name of the host declaration.  This name must be unique among all host declarations.</p><p><strong>group </strong><em>handle</em> examine, modify</p><p>the named group associated with the host declaration, if there is one.</p><p><strong>hardware-address </strong><em>data</em> lookup, examine, modify</p><p>the link-layer address that will be used to match the client, if any. Only valid if hardware-type is also present.</p><p><strong>hardware-type </strong><em>integer</em> lookup, examine, modify</p><p>the type of the network interface that will be used to match the client, if any.  Only valid if hardware-address is also present.</p><p><strong>dhcp-client-identifier </strong><em>data</em> lookup, examine, modify</p><p>the dhcp-client-identifier option that will be used to match the client, if any.</p><p><strong>ip-address </strong><em>data</em> examine, modify</p><p>a fixed IP address which is reserved for a DHCP client that matches this host declaration.  The IP address will only be assigned to the client if it is valid for the network segment to which the client is connected.</p><p><strong>statements </strong><em>data</em> modify</p><p>a list of statements in the format of the dhcpd.conf file that will be executed whenever a message from the client is being processed.</p><p><strong>known </strong><em>integer</em> examine, modify</p><p>if nonzero, indicates that a client matching this host declaration will be treated as <em>known</em> in pool permit lists.  If zero, the client will not be treated as known.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE GROUP OBJECT</h2>
        <div class="sectioncontent">
<p>Named groups can be created, destroyed, looked up, examined and modified.  If a group declaration is created or deleted using OMAPI, that information will be recorded in the dhcpd.leases file.  It is permissible to delete group declarations that are declared in the dhcpd.conf file.</p><p>Named groups currently can only be associated with hosts - this allows one set of statements to be efficiently attached to more than one host declaration.</p><p>Groups have the following attributes:</p><p><strong>name </strong><em>data</em></p><p>the name of the group.  All groups that are created using OMAPI must have names, and the names must be unique among all groups.</p><p><strong>statements </strong><em>data</em></p><p>a list of statements in the format of the dhcpd.conf file that will be executed whenever a message from a client whose host declaration references this group is processed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE CONTROL OBJECT</h2>
        <div class="sectioncontent">
<p>The control object allows you to shut the server down.  If the server is doing failover with another peer, it will make a clean transition into the shutdown state and notify its peer, so that the peer can go into partner down, and then record the "recover" state in the lease file so that when the server is restarted, it will automatically resynchronize with its peer.</p><p>On shutdown the server will also attempt to cleanly shut down all OMAPI connections.  If these connections do not go down cleanly after five seconds, they are shut down preemptively.  It can take as much as 25 seconds from the beginning of the shutdown process to the time that the server actually exits.</p><p>To shut the server down, open its control object and set the state attribute to 2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THE FAILOVER-STATE OBJECT</h2>
        <div class="sectioncontent">
<p>The failover-state object is the object that tracks the state of the failover protocol as it is being managed for a given failover peer. The failover object has the following attributes (please see <strong>dhcpd.conf (5)</strong> for explanations about what these attributes mean):</p><p><strong>name </strong><em>data</em> examine</p><p>Indicates the name of the failover peer relationship, as described in the server's <strong>dhcpd.conf</strong> file.</p><p><strong>partner-address </strong><em>data</em> examine</p><p>Indicates the failover partner's IP address.</p><p><strong>local-address </strong><em>data</em> examine</p><p>Indicates the IP address that is being used by the DHCP server for this failover pair.</p><p><strong>partner-port </strong><em>data</em> examine</p><p>Indicates the TCP port on which the failover partner is listening for failover protocol connections.</p><p><strong>local-port </strong><em>data</em> examine</p><p>Indicates the TCP port on which the DHCP server is listening for failover protocol connections for this failover pair.</p><p><strong>max-outstanding-updates </strong><em>integer</em> examine</p><p>Indicates the number of updates that can be outstanding and unacknowledged at any given time, in this failover relationship.</p><p><strong>mclt </strong><em>integer</em> examine</p><p>Indicates the maximum client lead time in this failover relationship.</p><p><strong>load-balance-max-secs </strong><em>integer</em> examine</p><p>Indicates the maximum value for the secs field in a client request before load balancing is bypassed.</p><p><strong>load-balance-hba </strong><em>data</em> examine</p><p>Indicates the load balancing hash bucket array for this failover relationship.</p><p><strong>local-state </strong><em>integer</em> examine, modify</p><p>Indicates the present state of the DHCP server in this failover relationship.  Possible values for state are:</p>
<pre>
1   - startup
2   - normal
3   - communications interrupted
4   - partner down
5   - potential conflict
6   - recover
7   - paused
8   - shutdown
9   - recover done
10  - resolution interrupted
11  - conflict done
254 - recover wait
</pre>
<p>(Note that some of the above values have changed since DHCP 3.0.x.)</p><p>In general it is not a good idea to make changes to this state. However, in the case that the failover partner is known to be down, it can be useful to set the DHCP server's failover state to partner down.  At this point the DHCP server will take over service of the failover partner's leases as soon as possible, and will give out normal leases, not leases that are restricted by MCLT.  If you do put the DHCP server into the partner-down when the other DHCP server is not in the partner-down state, but is not reachable, IP address assignment conflicts are possible, even likely.  Once a server has been put into partner-down mode, its failover partner must not be brought back online until communication is possible between the two servers.</p><p><strong>partner-state </strong><em>integer</em> examine</p><p>Indicates the present state of the failover partner.</p><p><strong>local-stos </strong><em>integer</em> examine</p><p>Indicates the time at which the DHCP server entered its present state in this failover relationship.</p><p><strong>partner-stos </strong><em>integer</em> examine</p><p>Indicates the time at which the failover partner entered its present state.</p><p><strong>hierarchy </strong><em>integer</em> examine</p><p>Indicates whether the DHCP server is primary (0) or secondary (1) in this failover relationship.</p><p><strong>last-packet-sent </strong><em>integer</em> examine</p><p>Indicates the time at which the most recent failover packet was sent by this DHCP server to its failover partner.</p><p><strong>last-timestamp-received </strong><em>integer</em> examine</p><p>Indicates the timestamp that was on the failover message most recently received from the failover partner.</p><p><strong>skew </strong><em>integer</em> examine</p><p>Indicates the skew between the failover partner's clock and this DHCP server's clock</p><p><strong>max-response-delay </strong><em>integer</em> examine</p><p>Indicates the time in seconds after which, if no message is received from the failover partner, the partner is assumed to be out of communication.</p><p><strong>cur-unacked-updates </strong><em>integer</em> examine</p><p>Indicates the number of update messages that have been received from the failover partner but not yet processed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><strong>ETCDIR/dhcpd.conf, DBDIR/dhcpd.leases, RUNDIR/dhcpd.pid,</strong> <strong>DBDIR/dhcpd.leases~.</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dhcpd&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/dhclient.8.html"><strong>dhclient</strong>(8)</a>, <a href="../man8/dhcrelay.8.html"><strong>dhcrelay</strong>(8)</a>, <a href="../man5/dhcpd.conf.5.html"><strong>dhcpd.conf</strong>(5)</a>, <a href="../man5/dhcpd.leases.5.html"><strong>dhcpd.leases</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><a href="../man8/dhcpd.8.html"><strong>dhcpd</strong>(8)</a></strong> was originally written by Ted Lemon under a contract with Vixie Labs. Funding for this project was provided by Internet Systems Consortium.  Version 3 of the DHCP server was funded by Nominum, Inc. Information about Internet Systems Consortium is available at <strong>https://www.isc.org/</strong>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dhcp_probe.8.html"><span aria-hidden="true">&larr;</span> dhcp_probe.8: Locate dchp and bootp servers on a directly-attached network</a></li>
   <li class="next"><a href="dhcpdump.8.html">dhcpdump.8: \s-1dhcp\s0 packet dumper <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
