<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fsarchiver: Filesystem archiver</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Filesystem archiver">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fsarchiver (8) manual">
  <meta name="twitter:description" content="Filesystem archiver">
  <meta name="twitter:image" content="https://www.carta.tech/images/fsarchiver-fsarchiver-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/fsarchiver.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fsarchiver (8) manual" />
  <meta property="og:description" content="Filesystem archiver" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fsarchiver-fsarchiver-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fsarchiver<small> (8)</small></h1>
        <p class="lead">Filesystem archiver</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fsarchiver.8.html">
      <span itemprop="name">fsarchiver: Filesystem archiver</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fsarchiver/">
      <span itemprop="name">fsarchiver</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fsarchiver.8.html">
      <span itemprop="name">fsarchiver: Filesystem archiver</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>fsarchiver is a system tool that allows you to save the contents of a filesystem to a compressed archive file. The file-system can be restored on a partition which has a different size and it can be restored on a different file-system. Unlike tar/dar, FSArchiver also creates the filesystem when it extracts the data to partitions. Everything is checksummed in the archive in order to protect the data. If the archive is corrupt, you just lose the current file, not the whole archive.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LINKS</h2>
        <div class="sectioncontent">
<h3>Official project homepage:</h3>
<p>http://www.fsarchiver.org</p>
<h3>Quick Start Guide:</h3>
<p>http://www.fsarchiver.org/QuickStart</p>
<h3>Forums where to ask questions:</h3>
<p>http://www.fsarchiver.org/forums/</p>
<h3>Report a bug:</h3>
<p>http://www.fsarchiver.org/forums/viewforum.php?f=17</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fsarchiver [</strong> <em>options</em> <strong>] savefs</strong> <em>archive</em> <em>filesystem</em> <strong>...</strong></p><p><strong>fsarchiver [</strong> <em>options</em> <strong>] restfs</strong> <em>archive</em> <strong>id=</strong><em>n</em><strong>,dest=</strong><em>filesystem</em><strong>[,mkfs=</strong><em>fstype,</em><strong>mkfsopt=</strong><em>options</em><strong>]</strong> <strong>...</strong></p><p><strong>fsarchiver [</strong> <em>options</em> <strong>] savedir</strong> <em>archive</em> <em>directory</em> <strong>...</strong></p><p><strong>fsarchiver [</strong> <em>options</em> <strong>] restdir</strong> <em>archive destination</em></p><p><strong>fsarchiver [</strong> <em>options</em> <strong>] archinfo</strong> <em>archive</em></p><p><strong>fsarchiver [</strong> <em>options</em> <strong>] probe [detailed]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>savefs</strong></p>
  </dt>
  <dd>
    <p>Save <em>filesystems</em> to <em>archive</em>.</p>
  </dd>
  <dt>
    <p><strong>restfs</strong></p>
  </dt>
  <dd>
    <p>Restore filesystems from <em>archive</em>. This overwrites the existing data on <em>filesystems</em>. Zero-based index <em>n</em> indicates the part of the archive to restore. Optionally, a filesystem may be converted to <em>fstype</em>.</p>
  </dd>
  <dt>
    <p><strong>savedir</strong></p>
  </dt>
  <dd>
    <p>Save <em>directories</em> to <em>archive</em> (similar to a compressed tarball).</p>
  </dd>
  <dt>
    <p><strong>restdir</strong></p>
  </dt>
  <dd>
    <p>Restore data from <em>archive</em> which is not based on a filesystem to <em>destination</em>.</p>
  </dd>
  <dt>
    <p><strong>archinfo</strong></p>
  </dt>
  <dd>
    <p>Show information about an existing <em>archive</em> file and its contents.</p>
  </dd>
  <dt>
    <p><strong>probe</strong></p>
  </dt>
  <dd>
    <p>Show list of filesystems detected on the disks.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>-h, --help</strong>
  </dt>
  <dd>
    <p>Show help and information about how to use fsarchiver with examples.</p>
  </dd>
  <dt>
    <strong>-V, --version</strong>
  </dt>
  <dd>
    <p>Show program version and exit.</p>
  </dd>
  <dt>
    <strong>-v, --verbose</strong>
  </dt>
  <dd>
    <p>Verbose mode (can be used several times to increase the level of details). The details will be printed to the console.</p>
  </dd>
  <dt>
    <strong>-o, --overwrite</strong>
  </dt>
  <dd>
    <p>Overwrite the archive if it already exists instead of failing.</p>
  </dd>
  <dt>
    <strong>-d, --debug</strong>
  </dt>
  <dd>
    <p>Debug mode (can be used several times to increase the level of details). The details will be written in /var/log/fsarchiver.log.</p>
  </dd>
  <dt>
    <strong>-A, --allow-rw-mounted</strong>
  </dt>
  <dd>
    <p>Allow to save a filesystem which is mounted in read-write (live backup). By default fsarchiver fails with an error if the partition if mounted in read-write mode which allows modifications to be done on the filesystem during the backup. Modifications can drive to inconsistencies in the backup. Using lvm snapshots is the recommended way to make backups since it will provide consistency, but it is only available for filesystems which are on LVM logical-volumes.</p>
  </dd>
  <dt>
    <strong>-a, --allow-no-acl-xattr</strong>
  </dt>
  <dd>
    <p>Allow to run savefs when partition is mounted without the acl/xattr options. By default fsarchiver fails with an error if the partition is mounted in such a way that the ACL and Extended-Attributes are not readable. These attributes would not be saved and then such attributes could be lost. If you know what you don't need ACL and Extended-Attributes to be preserved then it's safe to run fsarchiver with that option.</p>
  </dd>
  <dt>
    <strong>-e pattern, --exclude=pattern</strong>
  </dt>
  <dd>
    <p>Exclude files and directories that match that pattern. The pattern can contains shell asterisks such as * and ?, and the pattern may be either a simple file/dir name or an absolute file/dir path. You must use quotes around the pattern each time you use wildcards, else it would be interpreted by the shell. The wildcards must be interpreted by fsarchiver. See examples below for more details about this option.</p>
  </dd>
  <dt>
    <strong>-L label, --label=label</strong>
  </dt>
  <dd>
    <p>Set the label of the archive: it's just a comment about the contents. It can be used to remember a particular thing about the archive or the state of the filesystem for instance.</p>
  </dd>
  <dt>
    <strong>-z level, --compress=level</strong>
  </dt>
  <dd>
    <p>Valid compression levels are between 1 (very fast) and 9 (very good). The memory requirement increases a lot with the best compression levels, and it's multiplied by the number of compression threads (option -j). Level 9 is considered as an extreme compression level and requires an huge amount of memory to run. For more details please read this page: http://www.fsarchiver.org/Compression</p>
  </dd>
  <dt>
    <strong>-s mbsize, --split=mbsize</strong>
  </dt>
  <dd>
    <p>Split the archive into several files of mbsize megabytes each.</p>
  </dd>
  <dt>
    <strong>-j count, --jobs=count</strong>
  </dt>
  <dd>
    <p>Create more than one compression thread. Useful on multi-core CPUs. By default fsarchiver will only use one compression thread (-j 1) and then only one logical processor will be used for compression. You should use that option if you have a multi-core CPU or more than one physical CPU on your computer. The typical way to use this option is to specify the number of logical processors available so that all the processing power is used to compress the archive very quickly. You may also want to use all the logical processors but one for that task so that the system stays responsive for other applications.</p>
  </dd>
  <dt>
    <strong>-c password, --cryptpass=password</strong>
  </dt>
  <dd>
    <p>Encrypt/decrypt data in archive. Password length: 6 to 64 chars. You can either provide a real password or a dash ("-c -") with this option if you do not want to provide the password in the command line and you want to be prompted for a password in the terminal instead.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<h3>save only one filesystem (/dev/sda1) to an archive:</h3>
<p>fsarchiver savefs /data/myarchive1.fsa /dev/sda1</p>
<h3>save two filesystems (/dev/sda1 and /dev/sdb1) to an archive:</h3>
<p>fsarchiver savefs /data/myarchive2.fsa /dev/sda1 /dev/sdb1</p>
<h3>restore the first filesystem from an archive (first = number 0):</h3>
<p>fsarchiver restfs /data/myarchive2.fsa id=0,dest=/dev/sda1</p>
<h3>restore the second filesystem from an archive (second = number 1):</h3>
<p>fsarchiver restfs /data/myarchive2.fsa id=1,dest=/dev/sdb1</p>
<h3>restore two filesystems from an archive (number 0 and 1):</h3>
<p>fsarchiver restfs /data/arch2.fsa id=0,dest=/dev/sda1 id=1,dest=/dev/sdb1</p>
<h3>restore a filesystem from an archive and convert it to reiserfs:</h3>
<p>fsarchiver restfs /data/myarchive1.fsa id=0,dest=/dev/sda1,mkfs=reiserfs</p>
<h3>restore a filesystem from an archive and specify extra mkfs options:</h3>
<p>fsarchiver restfs /data/myarchive1.fsa id=0,dest=/dev/sda1,mkfs=ext4,mkfsopt="-I 256"</p>
<h3>save the contents of /usr/src/linux to an archive (similar to tar):</h3>
<p>fsarchiver savedir /data/linux-sources.fsa /usr/src/linux</p>
<h3>save a /dev/sda1 to an archive split into volumes of 680MB:</h3>
<p>fsarchiver savefs -s 680 /data/myarchive1.fsa /dev/sda1</p>
<h3>save a filesystem and exclude all files/dirs called 'pagefile.*'</h3>
<p>fsarchiver savefs /data/myarchive.fsa /dev/sda1 --exclude='pagefile.*'</p>
<h3>exclude 'share' in both '/usr/share' and '/usr/local/share':</h3>
<p>fsarchiver savefs /data/myarchive.fsa --exclude=share</p>
<h3>absolute exclude valid for '/usr/share' but not '/usr/local/share'</h3>
<p>fsarchiver savefs /data/myarchive.fsa --exclude=/usr/share</p>
<h3>save a filesystem (/dev/sda1) to an encrypted archive:</h3>
<p>fsarchiver savefs -c mypassword /data/myarchive1.fsa /dev/sda1</p>
<h3>extract an archive made of simple files to /tmp/extract:</h3>
<p>fsarchiver restdir /data/linux-sources.fsa /tmp/extract</p>
<h3>show information about an archive and its file systems:</h3>
<p>fsarchiver archinfo /data/myarchive2.fsa</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNING</h2>
        <div class="sectioncontent">
<p><strong>fsarchiver</strong> is still in development, don't use it for critical data yet.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>fsarchiver was written by Francois Dupoux. It is released under the GPL2 (GNU General Public License version 2). This manpage was written by Ilya Barygin and Francois Dupoux.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fsadm.8.html"><span aria-hidden="true">&larr;</span> fsadm.8: Fsadm  utility to resize or check filesystem on a device</a></li>
   <li class="next"><a href="fsck.8.html">fsck.8: Check and repair a linux filesystem <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
