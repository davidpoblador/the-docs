<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tc-red: Random early detection</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Random early detection">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tc-red (8) manual">
  <meta name="twitter:description" content="Random early detection">
  <meta name="twitter:image" content="https://www.carta.tech/images/iproute2-tc-red-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/tc-red.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tc-red (8) manual" />
  <meta property="og:description" content="Random early detection" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/iproute2-tc-red-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tc-red<small> (8)</small></h1>
        <p class="lead">Random early detection</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/tc-red.8.html">
      <span itemprop="name">tc-red: Random early detection</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/iproute2/">
      <span itemprop="name">iproute2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/tc-red.8.html">
      <span itemprop="name">tc-red: Random early detection</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>tc qdisc ... red</strong> <strong>limit</strong> bytes <strong>[ min</strong> bytes <strong>] [ max</strong> bytes <strong>] avpkt</strong> bytes <strong>[ burst</strong> packets <strong>] [ ecn ] [ harddrop] [ bandwidth</strong> rate <strong>] [ probability</strong> chance <strong>] [ adaptive ]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Random Early Detection is a classless qdisc which manages its queue size smartly. Regular queues simply drop packets from the tail when they are full, which may not be the optimal behaviour. RED also performs tail drop, but does so in a more gradual way.</p><p>Once the queue hits a certain average length, packets enqueued have a configurable chance of being marked (which may mean dropped). This chance increases linearly up to a point called the <strong>max</strong> average queue length, although the queue might get bigger.</p><p>This has a host of benefits over simple taildrop, while not being processor intensive. It prevents synchronous retransmits after a burst in traffic, which cause further retransmits, etc.</p><p>The goal is to have a small queue size, which is good for interactivity while not disturbing TCP/IP traffic with too many sudden drops after a burst of traffic.</p><p>Depending on if ECN is configured, marking either means dropping or purely marking a packet as overlimit.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ALGORITHM</h2>
        <div class="sectioncontent">
<p>The average queue size is used for determining the marking probability. This is calculated using an Exponential Weighted Moving Average, which can be more or less sensitive to bursts.</p><p>When the average queue size is below <strong>min</strong> bytes, no packet will ever be marked. When it exceeds <strong>min,</strong> the probability of doing so climbs linearly up to <strong>probability,</strong> until the average queue size hits <strong>max</strong> bytes. Because <strong>probability</strong> is normally not set to 100%, the queue size might conceivably rise above <strong>max</strong> bytes, so the <strong>limit</strong> parameter is provided to set a hard maximum for the size of the queue.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>min</p>
  </dt>
  <dd>
    <p>Average queue size at which marking becomes a possibility. Defaults to <strong>max</strong> /3</p>
  </dd>
  <dt>
    <p>max</p>
  </dt>
  <dd>
    <p>At this average queue size, the marking probability is maximal. Should be at least twice <strong>min</strong> to prevent synchronous retransmits, higher for low <strong>min.</strong> Default to <strong>limit</strong> /4</p>
  </dd>
  <dt>
    <p>probability</p>
  </dt>
  <dd>
    <p>Maximum probability for marking, specified as a floating point number from 0.0 to 1.0. Suggested values are 0.01 or 0.02 (1 or 2%, respectively). Default : 0.02</p>
  </dd>
  <dt>
    <p>limit</p>
  </dt>
  <dd>
    <p>Hard limit on the real (not average) queue size in bytes. Further packets are dropped. Should be set higher than max+burst. It is advised to set this a few times higher than <strong>max.</strong></p>
  </dd>
  <dt>
    <p>burst</p>
  </dt>
  <dd>
    <p>Used for determining how fast the average queue size is influenced by the real queue size. Larger values make the calculation more sluggish, allowing longer bursts of traffic before marking starts. Real life experiments support the following guideline: (min+min+max)/(3*avpkt).</p>
  </dd>
  <dt>
    <p>avpkt</p>
  </dt>
  <dd>
    <p>Specified in bytes. Used with burst to determine the time constant for average queue size calculations. 1000 is a good value.</p>
  </dd>
  <dt>
    <p>bandwidth</p>
  </dt>
  <dd>
    <p>This rate is used for calculating the average queue size after some idle time. Should be set to the bandwidth of your interface. Does not mean that RED will shape for you! Optional. Default : 10Mbit</p>
  </dd>
  <dt>
    <p>ecn</p>
  </dt>
  <dd>
    <p>As mentioned before, RED can either 'mark' or 'drop'. Explicit Congestion Notification allows RED to notify remote hosts that their rate exceeds the amount of bandwidth available. Non-ECN capable hosts can only be notified by dropping a packet.  If this parameter is specified, packets which indicate that their hosts honor ECN will only be marked and not dropped, unless the queue size hits <strong>limit</strong> bytes. Recommended.</p>
  </dd>
  <dt>
    <p>harddrop</p>
  </dt>
  <dd>
    <p>If average flow queue size is above <strong>max</strong> bytes, this parameter forces a drop instead of ecn marking.</p>
  </dd>
  <dt>
    <p>adaptive</p>
  </dt>
  <dd>
    <p>(Added in linux-3.3) Sets RED in adaptive mode as described in http://icir.org/floyd/papers/adaptiveRed.pdf</p>
<pre>
Goal of Adaptive RED is to make 'probability' dynamic value between 1% and 50% to reach the target average queue :
<strong>(max - min) / 2</strong>
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p># tc qdisc add dev eth0 parent 1:1 handle 10: red  limit 400000 min 30000 max 90000 avpkt 1000  burst 55 ecn adaptive bandwidth 10Mbit</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tc-red&hellip;</h2>
        <div class="sectioncontent">
<p><strong>tc</strong>(8), <a href="../man8/tc-choke.8.html"><strong>tc-choke</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOURCES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>o</p>
  </dt>
  <dd>
    <p>Floyd, S., and Jacobson, V., Random Early Detection gateways for Congestion Avoidance. http://www.aciri.org/floyd/papers/red/red.html</p>
  </dd>
  <dt>
    <p>o</p>
  </dt>
  <dd>
    <p>Some changes to the algorithm by Alexey N. Kuznetsov.</p>
  </dd>
  <dt>
    <p>o</p>
  </dt>
  <dd>
    <p>Adaptive RED  : http://icir.org/floyd/papers/adaptiveRed.pdf</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Alexey N. Kuznetsov, &lt;kuznet@ms2.inr.ac.ru&gt;,  Alexey Makarenko &lt;makar@phoenix.kharkov.ua&gt;, J Hadi Salim &lt;hadi@nortelnetworks.com&gt;, Eric Dumazet &lt;eric.dumazet@gmail.com&gt;. This manpage maintained by bert hubert &lt;ahu@ds9a.nl&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tc-prio.8.html"><span aria-hidden="true">&larr;</span> tc-prio.8: Priority qdisc</a></li>
   <li class="next"><a href="tc-sfb.8.html">tc-sfb.8: Stochastic fair blue <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
