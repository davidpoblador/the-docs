<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>usn-tombstone-cleanup.pl: Directory server perl script for cleaning up tombstone entries.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Directory server perl script for cleaning up tombstone entries.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="usn-tombstone-cleanup.pl (8) manual">
  <meta name="twitter:description" content="Directory server perl script for cleaning up tombstone entries.">
  <meta name="twitter:image" content="https://www.carta.tech/images/389-ds-base-usn-tombstone-cleanup.pl-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/usn-tombstone-cleanup.pl.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="usn-tombstone-cleanup.pl (8) manual" />
  <meta property="og:description" content="Directory server perl script for cleaning up tombstone entries." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/389-ds-base-usn-tombstone-cleanup.pl-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">usn-tombstone-cleanup.pl<small> (8)</small></h1>
        <p class="lead">Directory server perl script for cleaning up tombstone entries.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/usn-tombstone-cleanup.pl.8.html">
      <span itemprop="name">usn-tombstone-cleanup.pl: Directory server perl script for cleaning up tombstone entries.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/389-ds-base/">
      <span itemprop="name">389-ds-base</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/usn-tombstone-cleanup.pl.8.html">
      <span itemprop="name">usn-tombstone-cleanup.pl: Directory server perl script for cleaning up tombstone entries.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>usn-tombstone-cleanup.pl [-Z serverID] [-D rootdn] { -w password | -w - | -j filename } -s suffix -n backend [-m maxusn_to_delete] [-P protocol] [-v] [-h]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Deletes the tombstone entries maintained by the instance if the USN Plug-in is enabled.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>A summary of options is included below:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-Z</strong> <em>Server Identifier</em></p>
  </dt>
  <dd>
    <p>The server ID of the Directory Server instance.  If there is only one instance on the system, this option can be skipped.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-D</strong> <em>Root DN</em></p>
  </dt>
  <dd>
    <p>The Directory Manager DN, or root DN.  If not specified, the script will search the server instance configuration for the value.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-w</strong> <em>password</em></p>
  </dt>
  <dd>
    <p>The rootdn password.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-w -</strong></p>
  </dt>
  <dd>
    <p>Prompt for the rootdn password.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-j</strong> <em>password filename</em></p>
  </dt>
  <dd>
    <p>The name of the file that contains the root DN password.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-s</strong> <em>suffix</em></p>
  </dt>
  <dd>
    <p>Gives the name of the suffix containing the entries to clean/delete.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-n</strong> <em>backend</em></p>
  </dt>
  <dd>
    <p>Gives the name of the database containing the entries to clean/delete.  Example, userRoot.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-m</strong> <em>maxusn_to_delete</em></p>
  </dt>
  <dd>
    <p>Sets the upper bound for entries to delete. All tombstone entries with an entryUSN value up to the specified maximum (inclusive) are deleted, but not past that USN value. If no maximum USN value is set, then all backend tombstone entries are deleted.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-P</strong> <em>protocol</em></p>
  </dt>
  <dd>
    <p>The connection protocol to connect to the Directory Server.  Protocols are STARTTLS, LDAPS, LDAPI, and LDAP. If this option is skipped, the most secure protocol that is available is used.  For LDAPI, AUTOBIND is also available for the root user.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Display verbose output</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Display usage</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>usn-tombstone-cleanup.pl -Z instance2 -D 'cn=directory manager' -w password -n userRoot -s 'ou=people,dc=example,dc=com' -P STARTTLS</p>
  </dt>
  <dd>
    <p>Note: security must be enabled to use protocol STARTTLS.  If STARTTLS is not available it will default to next strongest/available protocol automatically.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Exit status is zero if no errors occur.  Errors result in a non-zero exit status and a diagnostic message being written to standard error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>usn-tombstone-cleanup.pl was written by the 389 Project.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs to https://fedorahosted.org/389/newticket.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2013 Red Hat, Inc.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="usermod.8.html"><span aria-hidden="true">&larr;</span> usermod.8: Modify a user account</a></li>
   <li class="next"><a href="utmpset.8.html">utmpset.8: Logout a line from utmp and wtmp file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
