<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dphys-swapfile: Set up, mount/unmount, and delete an swap file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Set up, mount/unmount, and delete an swap file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dphys-swapfile (8) manual">
  <meta name="twitter:description" content="Set up, mount/unmount, and delete an swap file">
  <meta name="twitter:image" content="https://www.carta.tech/images/dphys-swapfile-dphys-swapfile-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dphys-swapfile.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dphys-swapfile (8) manual" />
  <meta property="og:description" content="Set up, mount/unmount, and delete an swap file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dphys-swapfile-dphys-swapfile-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dphys-swapfile<small> (8)</small></h1>
        <p class="lead">Set up, mount/unmount, and delete an swap file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dphys-swapfile.8.html">
      <span itemprop="name">dphys-swapfile: Set up, mount/unmount, and delete an swap file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dphys-swapfile/">
      <span itemprop="name">dphys-swapfile</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dphys-swapfile.8.html">
      <span itemprop="name">dphys-swapfile: Set up, mount/unmount, and delete an swap file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dphys-swapfile</strong> <strong>setup</strong>|<strong>install</strong>|<strong>swapon</strong>|<strong>swapoff</strong>|<strong>uninstall</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>dphys-swapfile computes the size for an optimal swap file (and resizes an existing swap file if necessary), mounts an swap file, unmounts it, and deletes it it is not wanted any more.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>There is only one parameter, an command, which can be either of these:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>setup</strong></p>
  </dt>
  <dd>
    <p>and <strong>install</strong> Both tell dphys-swapfile to compute the optimal swap file size and (re-)generate an fitting swap file. Default it 2 times RAM size. This can be called at boot time, so the file allways stays the right size for current RAM, or run by hand whenever RAM size has changed.</p>
  </dd>
  <dt>
    <p><strong>swapon</strong></p>
  </dt>
  <dd>
    <p>and <strong>swapoff</strong> These run the <em>swapon </em>and <em>swapoff</em> commands on the swapfile. Note that direct swapon/off from <em>/etc/fstab</em> is not possible, as that is (at least on Debian) done in the same script that mounts /var (which is where the swap file most likely resides). And we need to do our setup between those actions. So we pass up on <em>/etc/fstab</em>, and do our own swapon/off here.</p>
  </dd>
  <dt>
    <p><strong>uninstall</strong></p>
  </dt>
  <dd>
    <p>Gets rid of an unwanted swap file, reclaiming its disk space.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIG</h2>
        <div class="sectioncontent">
<p>The config file <em>/etc/dphys-swapfile</em> allows the user to set up the working environment for dphys-swapfile.</p><p>This config file is a sh script fragment full of assignments, which is sourced. Standard sh syntax rules apply. Assignments are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>CONF_SWAPFILE</strong></p>
  </dt>
  <dd>
    <p>Set where the swap file should be placed. Defaults to /var/swap. It is unlikely that you will need to change this, unless you have very strange partitioning, and then you will most likely be using an swap partition anyway.</p>
  </dd>
  <dt>
    <p><strong>CONF_SWAPSIZE</strong></p>
  </dt>
  <dd>
    <p>Set size to this absolute value, in MBytes. Leaving this empty (which is the Default) uses an computed value as size instead. This is unlikely to ever be needed, unless in some strange diskspace situations. Note, that swap enabled and size smaller than RAM may causes kernal-internal VM troubles on some kernels/systems.</p>
  </dd>
  <dt>
    <p><strong>CONF_SWAPFACTOR</strong></p>
  </dt>
  <dd>
    <p>Set size to computed value. Uses this value times RAM size. It so dynamically adapts to RAM size, guarantees enough swap on large RAM, without going into excess diskspace on small RAM (and disk?) systems. Defaults to 2, which gives swap size = 2 * RAM size.</p>
  </dd>
  <dt>
    <p><strong>CONF_MAXSWAP</strong></p>
  </dt>
  <dd>
    <p>Set size restriction of maximal computed and absolute(!) values, in MBytes. Defaults to 2048 which was a former 32bit kernel limit for the swapfile size and is now a limit to prevent unusually and senselessly big swap files on systems with a lot of RAM.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/etc/dphys-swapfile</strong></p>
  </dt>
  <dd>
    <p>user config</p>
  </dd>
  <dt>
    <p><strong>$CONF_SWAPFILE</strong></p>
  </dt>
  <dd>
    <p>the swap file, target of the whole action (defaults to <em>/var/swap</em>)</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>dphys-swapfile is usually run at system startup and shutdown from an /etc/init.d (or /etc/rc.d) script, such as this (minimal) one:</p>
<pre>
#!/bin/sh\!
# /etc/init.d/dphys-swapfile - automatically set up an swapfile\!
# author franklin, last modification 2004.06.04\!
# This script is copyright ETH Zuerich Physics Departement,\!
#   use under either modified/non-advertising BSD or GPL license\!
case "$1" in\!
  start)\!
    /sbin/dphys-swapfile setup\!
    /sbin/dphys-swapfile swapon\!
    ;;\!
  stop)\!
    /sbin/dphys-swapfile swapoff\!
    ;;\!
esac\!
exit 0\!
</pre>
<p>If an sysadmin wants to have the swapfile in another place, say /var/run/swap, he can use:</p><p>In <em>/etc/dphys-swapfile</em>:</p><p>CONF_SWAPFILE=/var/run/swap</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>neil@franklin.ch, http://neil.franklin.ch/</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="downtimed.8.html"><span aria-hidden="true">&larr;</span> downtimed.8: System downtime monitoring and reporting daemon</a></li>
   <li class="next"><a href="dpkg-divert.8.html">dpkg-divert.8: Override a package's version of a file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
