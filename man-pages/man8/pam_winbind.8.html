<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pam_winbind: Pam module for winbind</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Pam module for winbind">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pam_winbind (8) manual">
  <meta name="twitter:description" content="Pam module for winbind">
  <meta name="twitter:image" content="https://www.carta.tech/images/libpam-winbind-pam_winbind-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pam_winbind.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pam_winbind (8) manual" />
  <meta property="og:description" content="Pam module for winbind" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libpam-winbind-pam_winbind-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pam_winbind<small> (8)</small></h1>
        <p class="lead">Pam module for winbind</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pam_winbind.8.html">
      <span itemprop="name">pam_winbind: Pam module for winbind</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libpam-winbind/">
      <span itemprop="name">libpam-winbind</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pam_winbind.8.html">
      <span itemprop="name">pam_winbind: Pam module for winbind</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This tool is part of the <a href="../man7/samba.7.html"><strong>samba</strong>(7)</a> suite.</p><p>pam_winbind is a PAM module that can authenticate users against the local domain by talking to the Winbind daemon.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Edit the PAM system config /etc/pam.d/service and modify it as the following example shows:</p>
<pre>
			    ...
			    auth      required        pam_env.so
			    auth      sufficient      pam_unix2.so
			+++ auth      required        pam_winbind.so  use_first_pass
			    account   requisite       pam_unix2.so
			+++ account   required        pam_winbind.so  use_first_pass
			+++ password  sufficient      pam_winbind.so
			    password  requisite       pam_pwcheck.so  cracklib
			    password  required        pam_unix2.so    use_authtok
			    session   required        pam_unix2.so
			+++ session   required        pam_winbind.so
			    ...

</pre>
<p>Make sure that pam_winbind is one of the first modules in the session part. It may retrieve kerberos tickets which are needed by other modules.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>pam_winbind supports several options which can either be set in the PAM configuration files or in the pam_winbind configuration file situated at /etc/security/pam_winbind.conf. Options from the PAM configuration file take precedence to those from the configuration file. See <a href="../man5/pam_winbind.conf.5.html"><strong>pam_winbind.conf</strong>(5)</a> for further details.</p><p>debug</p><p>Gives debugging output to syslog.</p><p>debug_state</p><p>Gives detailed PAM state debugging output to syslog.</p><p>require_membership_of=[SID or NAME]</p><p>If this option is set, pam_winbind will only succeed if the user is a member of the given SID or NAME. A SID can be either a group-SID, an alias-SID or even an user-SID. It is also possible to give a NAME instead of the SID. That name must have the form: <em>MYDOMAIN&#92;&#92;mygroup</em> or <em>MYDOMAIN&#92;&#92;myuser</em>. pam_winbind will, in that case, lookup the SID internally. Note that NAME may not contain any spaces. It is thus recommended to only use SIDs. You can verify the list of SIDs a user is a member of with wbinfo --user-sids=SID.</p><p>use_first_pass</p><p>By default, pam_winbind tries to get the authentication token from a previous module. If no token is available it asks the user for the old password. With this option, pam_winbind aborts with an error if no authentication token from a previous module is available.</p><p>try_first_pass</p><p>Same as the use_first_pass option (previous item), except that if the primary password is not valid, PAM will prompt for a password.</p><p>use_authtok</p><p>Set the new password to the one provided by the previously stacked password module. If this option is not set pam_winbind will ask the user for the new password.</p><p>krb5_auth</p><p>pam_winbind can authenticate using Kerberos when winbindd is talking to an Active Directory domain controller. Kerberos authentication must be enabled with this parameter. When Kerberos authentication can not succeed (e.g. due to clock skew), winbindd will fallback to samlogon authentication over MSRPC. When this parameter is used in conjunction with <em>winbind refresh tickets</em>, winbind will keep your Ticket Granting Ticket (TGT) uptodate by refreshing it whenever necessary.</p><p>krb5_ccache_type=[type]</p><p>When pam_winbind is configured to try kerberos authentication by enabling the <em>krb5_auth</em> option, it can store the retrieved Ticket Granting Ticket (TGT) in a credential cache. The type of credential cache can be set with this option. Currently the only supported value is: <em>FILE</em>. In that case a credential cache in the form of /tmp/krb5cc_UID will be created, where UID is replaced with the numeric user id. Leave empty to just do kerberos authentication without having a ticket cache after the logon has succeeded.</p><p>cached_login</p><p>Winbind allows to logon using cached credentials when <em>winbind offline logon</em> is enabled. To use this feature from the PAM module this option must be set.</p><p>silent</p><p>Do not emit any messages.</p><p>mkhomedir</p><p>Create homedirectory for a user on-the-fly, option is valid in PAM session block.</p><p>warn_pwd_expire</p><p>Defines number of days before pam_winbind starts to warn about passwords that are going to expire. Defaults to 14 days.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PAM DATA EXPORTS</h2>
        <div class="sectioncontent">
<p>This section describes the data exported in the PAM stack which could be used in other PAM modules.</p><p>PAM_WINBIND_HOMEDIR</p><p>This is the Windows Home Directory set in the profile tab in the user settings on the Active Directory Server. This could be a local path or a directory on a share mapped to a drive.</p><p>PAM_WINBIND_LOGONSCRIPT</p><p>The path to the logon script which should be executed if a user logs in. This is normally a relative path to the script stored on the server.</p><p>PAM_WINBIND_LOGONSERVER</p><p>This exports the Active Directory server we are authenticating against. This can be used as a variable later.</p><p>PAM_WINBIND_PROFILEPATH</p><p>This is the profile path set in the profile tab in the user settings. Normally the home directory is synced with this directory on a share.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pam_winbind&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/pam_winbind.conf.5.html"><strong>pam_winbind.conf</strong>(5)</a>, <a href="../man1/wbinfo.1.html"><strong>wbinfo</strong>(1)</a>, <a href="../man8/winbindd.8.html"><strong>winbindd</strong>(8)</a>, <a href="../man5/smb.conf.5.html"><strong>smb.conf</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This man page is correct for version 3 of Samba.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.</p><p>This manpage was written by Jelmer Vernooij and Guenther Deschner.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pam_wheel.8.html"><span aria-hidden="true">&larr;</span> pam_wheel.8: Only permit root access to members of group wheel</a></li>
   <li class="next"><a href="pam_xauth.8.html">pam_xauth.8: Pam module to forward xauth keys between users <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
