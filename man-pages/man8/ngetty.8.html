<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ngetty: Daemon for virtual console terminals</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Daemon for virtual console terminals">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ngetty (8) manual">
  <meta name="twitter:description" content="Daemon for virtual console terminals">
  <meta name="twitter:image" content="https://www.carta.tech/images/ngetty-ngetty-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ngetty.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ngetty (8) manual" />
  <meta property="og:description" content="Daemon for virtual console terminals" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ngetty-ngetty-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ngetty<small> (8)</small></h1>
        <p class="lead">Daemon for virtual console terminals</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ngetty.8.html">
      <span itemprop="name">ngetty: Daemon for virtual console terminals</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ngetty/">
      <span itemprop="name">ngetty</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ngetty.8.html">
      <span itemprop="name">ngetty: Daemon for virtual console terminals</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ngetty</strong> [ tty1 | vc/1 | 1 ] [ /dev/tty2 | vc/2 | 2 ] ...</p><p><strong>ngetty-helper</strong> /dev/ttyX [ login ]</p><p><strong>ngetty-argv</strong> :options:child:[name]:args [user [tty]]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>ngetty</strong> is a daemon that starts login sessions on virtual console terminals, on demand.  It opens the virtual console terminals specified by the <em>tty...</em> arguments, displays a <em>/etc/issue</em> message, prints the login prompt on each terminal and waits for user name. On user action, <strong>ngetty</strong> executes <a href="../man1/login.1.html"><strong>login</strong>(1)</a> in a new process with the terminal the user is typing in as the controlling terminal.</p><p><a href="../man1/login.1.html"><strong>login</strong>(1)</a> then prompts for a password to login with the system and finally, if the login succeeds, executes the user's login shell.</p><p>When the user logs out, <strong>ngetty</strong> restarts the corresponding virtual console terminal.</p><p>Actually almost the whole work is done by a <strong>ngetty-helper</strong> program. It makes <em>/var/run/utmp</em>, <em>/var/log/wtmp</em> records, prints <em>/etc/issue</em>, hostname, login prompt, waits for user name. <strong>ngetty</strong> invokes the <strong>ngetty-helper</strong> by need.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>The traditional way to enable logins on virtual console terminals is to start a bunch of <a href="../man8/getty.8.html"><strong>getty</strong>(8)</a> programs, one for each virtual console terminal, from <a href="../man8/init.8.html"><strong>init</strong>(8)</a>. As most users rarely login on virtual console terminals nowadays, preferring graphical logins instead, it seems wasteful to have all those <a href="../man8/getty.8.html"><strong>getty</strong>(8)</a> processes doing nothing but wasting memory. Alternatively, <strong>ngetty</strong> manages logins on any number of virtual console terminals from a single, light, process.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INVOCATION</h2>
        <div class="sectioncontent">
<p><strong>ngetty</strong> does not use stdin, stdout or stderr and closes them.</p><p>When running <strong>ngetty</strong> in the background, remember to disassociate it from the current controlling terminal by making it the process group leader of a new session, e.g.:</p><p>setsid ngetty tty...  &</p><p>ngetty-argv :-D:-S:-e:--:/sbin/ngetty::1:2:3:4</p><p>To start <strong>ngetty</strong> from <a href="../man8/init.8.html"><strong>init</strong>(8)</a>, add something like this to <em>/etc/inittab</em>:</p><p>ng:2345:respawn:/sbin/ngetty tty1 tty2 ... tty6</p><p>If <strong>ngetty-argv</strong> is available use it to start ngetty from <em>/etc/inittab</em>. See the example bellow.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>If <strong>ngetty</strong> can not open one of the virtual console terminals specified in the <em>tty...</em> arguments, most likely because that <em>tty</em> device node does not exist, no greeting message will be displayed on that terminal, obviously, and <strong>ngetty</strong> will simply go on, ignoring the offending terminal. Create the missing <em>tty</em> device and send SIGCHLD to ngetty. Then it will reopen the new <em>tty</em>. Instead of sending SIGCHLD you can login and logout on some working <em>tty</em>. This also forces ngetty to reopen the new <em>tty</em>.</p><p><strong>ngetty</strong> uses <strong>ngetty-helper</strong> program. It's path is hard-coded in <strong>ngetty</strong>. Never remove <strong>ngetty-helper</strong> program nor move it to other location.</p><p>If, on user action, <strong>ngetty-helper</strong> can not execute <a href="../man1/login.1.html"><strong>login</strong>(1)</a>, in all likelihood because the compiled-in <strong>LOGIN</strong> path does not match your system's <a href="../man1/login.1.html"><strong>login</strong>(1)</a> path, <strong>ngetty</strong> restarts the terminal and redisplays the greeting message.</p><p>In any case, <strong>ngetty</strong> does not output error messages.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>It's possible to set different options for <strong>ngetty-helper</strong> program in file <em>/etc/ngetty/Conf</em>. If the option begin with "=" it's applied for all tty.  If it start with a tty name it's applied only on current tty. Examples:</p><p><strong># options format:</strong></p><p><strong># [ttyX]=option[=value]</strong></p><p><strong>#=debug</strong></p><p>=environ=,TERM=linux</p><p>tty3=long-hostname</p><p>tty1=clear=&#92;033c</p><p>=newline=</p><p>=timeout=180</p><p>tty1=timeout=60</p><p>tty1=delay=1</p><p>For security reasons <strong>ngetty-helper</strong> evaluate the file <em>/etc/ngetty/Conf</em> only if it has mode:</p><p>-rw-------    root   root   /etc/ngetty/Conf</p><p><strong>ngetty-helper</strong> recognizes the following options which might be embedded in the <em>/etc/ngetty/Conf</em> file:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong># tty5=login-prog=/bin/login.test</strong></p>
  </dt>
  <dd>
    <p>If a line starts with <strong>#</strong>, <strong>space</strong> or <strong>tab</strong> it is a comment.</p>
  </dd>
  <dt>
    <p><strong>debug</strong></p>
  </dt>
  <dd>
    <p>If debug is set <strong>ngetty-helper</strong> write on terminal all successfully applied options.  Set this on the fist line of <em>/etc/ngetty/Conf</em> file.</p>
  </dd>
  <dt>
    <p><strong>date-string</strong></p>
  </dt>
  <dd>
    <p>Escape <strong>&#92;d</strong> (current day) in <em>/etc/issue</em> as:</p><p><strong>Fri Jun 01 2007</strong>. Default is: <strong>2007-06-01</strong>.</p>
  </dd>
  <dt>
    <p><strong>days=string</strong></p>
  </dt>
  <dd>
    <p>Abbreviation for week days (21 bytes).  Default is:</p><p><strong>=days=SunMonTueWedThuFriSat</strong></p>
  </dd>
  <dt>
    <p><strong>months=string</strong></p>
  </dt>
  <dd>
    <p>Abbreviation for months (36 bytes).  Default is:</p><p><strong>=months=JanFebMarAprMayJunJulAugSepOctNovDec</strong></p>
  </dd>
  <dt>
    <p><strong>tz=string</strong></p>
  </dt>
  <dd>
    <p>Change the timezone offset.  If the string starts with slash it's the name of tzfile. The string is positive number if the local time zone is east of the Prime Meridian and negative if it is west. Default is <em>/etc/localtime</em>. Examples:</p><p><strong>=tz=-18000</strong>        -0500</p><p><strong>=tz=7200</strong>          +0200</p><p><strong>=tz=/etc/localtime</strong></p><p><strong>=tz=AUTO</strong></p>
  </dd>
  <dt>
    <p><strong>echo-off</strong></p>
  </dt>
  <dd>
    <p>Turn the echo off just before starting /bin/login.  It's similar to <strong>stty -echo</strong>.</p>
  </dd>
  <dt>
    <p><strong>newline=string</strong></p>
  </dt>
  <dd>
    <p>Print this <strong>string</strong> before writing out <em>/etc/issue</em>. (default is <strong>&#92;012</strong>). Example:</p><p><strong>tty3=newline=&#92;012I am &#92;l&#92;012</strong></p>
  </dd>
  <dt>
    <p><strong>clear=string</strong></p>
  </dt>
  <dd>
    <p>Clear the screen before prompting for the login name with the <strong>string</strong> (default is <strong>&#92;033c</strong>).  Examples:</p><p><strong>tty1=clear=</strong></p><p><strong>tty3=clear=&#92;033[H&#92;033[J</strong></p>
  </dd>
  <dt>
    <p><strong>noclear-first=/etc/ngetty/.noclear</strong></p>
  </dt>
  <dd>
    <p>Do not clear the screen before prompting for the login name the first time after reboot.  Example:</p><p><strong>tty1=noclear-first=/etc/ngetty/.noclear.tty1</strong></p>
  </dd>
  <dt>
    <p><strong>nohangup</strong></p>
  </dt>
  <dd>
    <p>Do not call vhangup() to disable writing to this tty by other applications.</p>
  </dd>
  <dt>
    <p><strong>long-hostname</strong></p>
  </dt>
  <dd>
    <p>By default the hostname is only printed until the first dot. With this option enabled, the full text from gethostname() is shown.</p>
  </dd>
  <dt>
    <p><strong>nousername</strong></p>
  </dt>
  <dd>
    <p>Do not ask for user name.  Exec <a href="../man1/login.1.html"><strong>login</strong>(1)</a> immediately.  Example:</p><p><strong>=nousername</strong></p><p><strong>=login-prompt= Press ENTER to activate &#92;l\bP</strong></p>
  </dd>
  <dt>
    <p><strong>deny=,black,list,users...</strong></p>
  </dt>
  <dd>
    <p>Disable login process for some users.  The first char after "deny=" is split char.  Example:</p><p><strong>tty1=deny=,root,nobody,guest</strong></p>
  </dd>
  <dt>
    <p><strong>allow=,white,list,users...</strong></p>
  </dt>
  <dd>
    <p>Enable login process only for the users. The first char after "allow=" is split char.  Example:</p><p><strong>=clear=</strong></p><p><strong>=allow=,root,operator</strong></p>
  </dd>
  <dt>
    <p><strong>print=an:CM:PY:04:69</strong></p>
  </dt>
  <dd>
    <p>Accept only these chars in user name.  Default is to accept only "<strong>,-._ 0-9 a-z A-Z</strong>". It's possible to insert here the output of</p><p><strong>printf 'tty3=print=az:AZ:&#92;ABC&#92;XYZ:__'</strong></p><p>Here <strong>ABC</strong> and <strong>XYZ</strong> are octal numbers.  Examples:</p><p><strong>tty1=print=az:AZ</strong></p><p><strong>tty2=print=az:AZ:__:,.:09</strong></p>
  </dd>
  <dt>
    <p><strong>issue-file=/etc/issue</strong></p>
  </dt>
  <dd>
    <p>Change the issue file.  Disable printing of the issue file with:</p><p><strong>=issue-file=</strong></p>
  </dd>
  <dt>
    <p><strong>login-prog=/bin/login</strong></p>
  </dt>
  <dd>
    <p>Change the login app.  It's possible to use fgetty's <em>/bin/login1</em> application with:</p><p><strong>=echo-off</strong></p><p><strong>=login-prog=/bin/login1</strong></p>
  </dd>
  <dt>
    <p><strong>login-buffer=string</strong></p>
  </dt>
  <dd>
    <p>Read login name over the <strong>string</strong>. Default string is 40 bytes long.  Example:</p><p><strong>=login-buffer=12345678901234567</strong></p>
  </dd>
  <dt>
    <p><strong>login-prompt=&#92;n login:</strong></p>
  </dt>
  <dd>
    <p>Change the login prompt string.  Example:</p><p><strong>=login-prompt=&#92;033[1;33m&#92;l&#92;033[0;39m  &#92;n login: </strong></p>
  </dd>
  <dt>
    <p><strong>nice=10</strong></p>
  </dt>
  <dd>
    <p>Change the priority by calling nice().</p>
  </dd>
  <dt>
    <p><strong>delay=5</strong></p>
  </dt>
  <dd>
    <p>Sleep this many seconds before printing the file /etc/issue.</p>
  </dd>
  <dt>
    <p><strong>timeout=180</strong></p>
  </dt>
  <dd>
    <p>Wait at most this many seconds for user name.</p>
  </dd>
  <dt>
    <p><strong>chdir=/home</strong></p>
  </dt>
  <dd>
    <p>Change into this directory before calling the login prog.</p>
  </dd>
  <dt>
    <p><strong>chroot=/chroot</strong></p>
  </dt>
  <dd>
    <p>Call chroot() with this directory name.</p>
  </dd>
  <dt>
    <p><strong>autologin-name=username</strong></p>
  </dt>
  <dd>
    <p>Log the specified user automatically in without asking for a login name and password.  Check the -f option from <strong>/bin/login</strong> for this. Example:</p><p><strong>tty1=autologin-name=maria</strong></p>
  </dd>
  <dt>
    <p><strong>autologin-first=/etc/ngetty/.autologin</strong></p>
  </dt>
  <dd>
    <p>Log in automatically only the first time after reboot without asking for a login name and password. Example:</p><p><strong>tty1=autologin-name=maria</strong></p><p><strong>tty1=autologin-first=/etc/ngetty/.autologin</strong></p>
  </dd>
  <dt>
    <p><strong>environ=,TERM=linux</strong></p>
  </dt>
  <dd>
    <p>Replace the environ.  The first char after "environ=" is split char.  Examples:</p><p><strong>=environ=,TERM=vt100,PATH=/bin:/usr/bin,HOME=/</strong></p><p><strong>tty3=environ=,TERM=linux,TTY=/dev/tty3</strong></p>
  </dd>
  <dt>
    <p><strong>sh-A=line</strong></p>
  </dt>
  <dd>
    <p>Exec this line before printing <em>/etc/issue</em>. The line is executed using <strong>/bin/sh -c</strong> <em>line</em>. It's good idea to use the full paths here.  Example:</p><p><strong>tty4=sh-A=exec /bin/ps e -u root</strong></p><p><strong>tty4=delay=8</strong></p>
  </dd>
  <dt>
    <p><strong>sh-B=line</strong></p>
  </dt>
  <dd>
    <p>Similar to option <strong>sh-A.</strong> This is executed before asking for username.</p>
  </dd>
  <dt>
    <p><strong>login-argv=any_string</strong></p>
  </dt>
  <dd>
    <p>Ngetty starts login application with options</p><p><strong>login -- XYZ</strong>      # default</p><p><strong>login -f XYZ</strong>      # if autologin-name=XYZ</p><p>With this option it's possible to start login appl with <strong>any_string</strong> instead of <strong>--</strong> or <strong>-f</strong>. Using the program <a href="../man8/ngetty-argv.8.html"><strong>ngetty-argv</strong>(8)</a> one can start arbitrary program with different arguments.  Two very dangerous examples are (never try them):</p><p><strong>tty4=login-prog=/sbin/ngetty-argv</strong></p><p><strong>tty5=login-prog=/sbin/ngetty-argv</strong></p><p><strong>tty4=login-argv=,/bin/login,,-f,%U</strong></p><p><strong>tty5=login-argv=:-C:/bin/bash:-bash</strong></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WARNING</h2>
        <div class="sectioncontent">
<p>If ngetty-helper finds stdout or stderr open it exits immediately with error 100.  Ngetty invokes it correctly.  See also the program test-helper.c in source package.</p><p>Do not edit the file <em>/etc/ngetty/Conf</em> directly. Put the configurations in <em>/etc/ngetty/Conf.sed</em> (the same syntax and permissions as <em>/etc/ngetty/Conf</em>) and after editing it, execute:</p><p><strong>cd /etc/ngetty && ./setup</strong></p><p>The script <em>/etc/ngetty/setup</em> removes comments, merges lines ending with a backslash and expands the string <strong>=tz=AUTO</strong> to numeric number. Then it updates <em>/etc/ngetty/Conf</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">
<p>If ngetty receives SIGTERM it kill all child's PID (first with SIGTERM and then with SIGKILL) and exit immediately.  It does not change UID, GID and mode of the controlling tty devices. It does not catch the other signals. Sending SIGCHLD to ngetty forces it to reread his internal cache tables and to restart failed tty devices.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ISSUE ESCAPES</h2>
        <div class="sectioncontent">
<p><strong>ngetty-helper</strong> recognizes the following escapes sequences which might be embedded after  <strong>login-prompt=</strong>, <strong>newline=</strong>, <strong>clear=</strong> or in the <em>/etc/issue</em> file:</p>
<dl class='dl-vertical'>
  <dt>
    <strong>&#92;d</strong>
  </dt>
  <dd>
    <p>insert current day (localtime),</p>
  </dd>
  <dt>
    <strong>&#92;l</strong>
  </dt>
  <dd>
    <p>insert line on which <strong>ngetty</strong> is running,</p>
  </dd>
  <dt>
    <strong>&#92;m</strong>
  </dt>
  <dd>
    <p>inserts machine architecture (uname -m),</p>
  </dd>
  <dt>
    <strong>&#92;n</strong>
  </dt>
  <dd>
    <p>inserts machine's network node hostname (uname -n),</p>
  </dd>
  <dt>
    <strong>&#92;o</strong>
  </dt>
  <dd>
    <p>inserts domain name,</p>
  </dd>
  <dt>
    <strong>&#92;r</strong>
  </dt>
  <dd>
    <p>inserts operating system release (uname -r),</p>
  </dd>
  <dt>
    <strong>&#92;t</strong>
  </dt>
  <dd>
    <p>insert current time (localtime),</p>
  </dd>
  <dt>
    <strong>&#92;s</strong>
  </dt>
  <dd>
    <p>inserts operating system name,</p>
  </dd>
  <dt>
    <strong>&#92;u</strong>
  </dt>
  <dd>
    <p>insert the number of users which are currently logged in,</p>
  </dd>
  <dt>
    <strong>&#92;U</strong>
  </dt>
  <dd>
    <p>insert the  string  "1 user" or "&lt;n&gt; users", where &lt;n&gt; is the number of users currently logged  in,</p>
  </dd>
  <dt>
    <strong>&#92;v</strong>
  </dt>
  <dd>
    <p>inserts operating system version (uname -v).</p>
  </dd>
  <dt>
    <strong>&#92;XYZ</strong>
  </dt>
  <dd>
    <p>inserts a letter with octal code XYZ.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>"<strong>Linux&nbsp;eos&nbsp;i386&nbsp;#1&nbsp;Tue&nbsp;Mar&nbsp;19&nbsp;21:54:09&nbsp;MET&nbsp;1996</strong>" was produced by putting "<strong>&#92;s&nbsp;&#92;n&nbsp;&#92;m&nbsp;&#92;v</strong>" into <em>/etc/issue</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NGETTY-ARGV</h2>
        <div class="sectioncontent">
<p>The program <a href="../man8/ngetty-argv.8.html"><strong>ngetty-argv</strong>(8)</a> splits argv[1] on strings, expands <strong>%U</strong> and <strong>%T</strong> to username and tty and then start the the application.  The first char after "login-argv=" is split char.  In the examples above every user logs on tty4 without password and tty5 is always root.  To understand better how <strong>ngetty-argv</strong> works try as non-root:</p><p><strong>ngetty-argv ':/bin/echo:echo:%U: on %T' usr tty3</strong></p><p><strong>ngetty-argv ':/bin/sleep:-hacker:39:I am %U on %T' 123 X</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p>One can put also options for ngetty-argv at the beginning.</p>
  </dt>
  <dd>
    <ul>
<li><p><strong>--</strong>         last option</p></li><li><p><strong>-u503</strong>      setuid to 503</p></li><li><p><strong>-g230</strong>      setgid to 230</p></li><li><p><strong>-a120</strong>      exec alarm(120) before starting child</p></li><li><p><strong>-s10</strong>       sleep 10 secs before starting child</p></li><li><p><strong>-d/X/YZ</strong>    chdir(/X/YZ)  before starting child</p></li><li><p><strong>-r/A/BC</strong>    chroot(/A/BC) before starting child</p></li><li><p><strong>-D</strong>         start the child in background and exit</p></li><li><p><strong>-N -C</strong>      NOTTY | SCTTY controlling tty</p></li><li><p><strong>-S</strong>         like <strong>setsid</strong>(8)</p></li><li><p><strong>-e,HOME=/,TERM=linux</strong>     same as <strong>environ=</strong> above</p></li><li><p><strong>-p/path/to/pid.file</strong>      write the child pid here</p></li>
</ul>
  </dd>

</dl>
<p>One possible example for <strong>/etc/ngetty/Conf</strong> is:</p><p>tty9=clear=</p><p>tty9=issue-file=</p><p>tty9=login-prompt=&#92;n  &#92;d &#92;t  qmail-qread:</p><p>tty9=login-prog=/sbin/ngetty-argv</p><p>tty9=login-argv=:-u106:-g503:-d/var/qmail:--</p>
<pre>
  :./bin/qmail-qread:qread
</pre>
<p>Another example is setting the TTY environ automatically:</p><p>=login-prog=/sbin/ngetty-argv</p><p>=login-argv=:-e,TTY=/dev/%T,TERM=linux:--</p>
<pre>
  :/bin/login:login-%T:--:%U
</pre>
<p>I recommend using <strong>ngetty-argv </strong> in <em>/etc/inittab</em> also. Put as last argument runlevel string.  Then ps will show <strong>ngetty-2345</strong> instead of <strong>ngetty</strong>.  Next start tty1 ... tty6 on runlevels 2345.</p><p>ng:<strong>2345</strong>:respawn:/sbin/ngetty-argv</p>
<pre>
  .-e.-S.-d/.-s1.--./sbin/%U.%U-%T.1.2.3.4.5.6
</pre>

<pre>
  ngetty <strong>2345</strong>
</pre>
<p>On a terminal (in scripts) start ngetty with</p><p>ngetty-argv .-N.-S.-e./sbin/%U.%U.8.9.10 ngetty</p><p>ngetty-argv .-D.-S.-e./sbin/%U.%U.8.9.10 ngetty</p><p>This program is a hack written for <strong>ngetty-helper</strong>. There is no additional code in ngetty-helper and it's possible to start a program with any args. It is like a filter between ngetty-helper and login application. One can easy modify it without touching ngetty-helper. It's similar to DJB well known <a href="../man1/argv0.1.html"><strong>argv0</strong>(1)</a> and <a href="../man8/setuidgid.8.html"><strong>setuidgid</strong>(8)</a>. You can write own such programs and use them instead of ngetty-argv.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<table class="table table-striped">
<tr>
<th>/etc/ngetty/Conf@ <strong>ngetty-helper</strong> configuration file</th>
<th></th></tr>

<tr>
<td>/etc/ngetty/Conf.sed@ private setup file</td>
<td></td></tr>

<tr>
<td>/etc/ngetty/setup@ updates <strong>Conf.sed -&gt; Conf</strong></td>
<td></td></tr>

<tr>
<td>/etc/issue@ printed before the login prompt</td>
<td></td></tr>

<tr>
<td>/var/run/utmp@ the system status file</td>
<td></td></tr>

<tr>
<td>/var/log/wtmp@ the system logging file</td>
<td></td></tr>

<tr>
<td>/etc/inittab@ <a href="../man8/init.8.html"><strong>init</strong>(8)</a> configuration file</td>
<td></td></tr>
</table>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ngetty&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/getty.8.html"><strong>getty</strong>(8)</a> <a href="../man8/fgetty.8.html"><strong>fgetty</strong>(8)</a> <a href="../man8/mingetty.8.html"><strong>mingetty</strong>(8)</a></p><p><a href="../man1/login.1.html"><strong>login</strong>(1)</a> <strong>nlogin</strong>(1) <a href="../man1/argv0.1.html"><strong>argv0</strong>(1)</a> <a href="../man8/setuidgid.8.html"><strong>setuidgid</strong>(8)</a> <a href="../man1/stty.1.html"><strong>stty</strong>(1)</a></p><p>http://sites.google.com/site/anbadeol/logind</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Nikola Vladov</p><p>http://riemann.fmi.uni-sofia.bg/ngetty/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2007,2008,2010 Nikola Vladov</p><p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="nfswatch.8.html"><span aria-hidden="true">&larr;</span> nfswatch.8: Monitor an \*(@n server</a></li>
   <li class="next"><a href="ngetty-argv.8.html">ngetty-argv.8: Daemon for virtual console terminals <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
