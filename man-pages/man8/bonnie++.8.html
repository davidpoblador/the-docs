<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bonnie++: Program to test hard drive performance.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Program to test hard drive performance.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bonnie++ (8) manual">
  <meta name="twitter:description" content="Program to test hard drive performance.">
  <meta name="twitter:image" content="https://www.carta.tech/images/bonnie++-bonnie++-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/bonnie++.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bonnie++ (8) manual" />
  <meta property="og:description" content="Program to test hard drive performance." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/bonnie++-bonnie++-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bonnie++<small> (8)</small></h1>
        <p class="lead">Program to test hard drive performance.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/bonnie++.8.html">
      <span itemprop="name">bonnie++: Program to test hard drive performance.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/bonnie++/">
      <span itemprop="name">bonnie++</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/bonnie++.8.html">
      <span itemprop="name">bonnie++: Program to test hard drive performance.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>bonnie++</strong> <em>[-d dir] [-s size(MiB)[:chunk-size(b)]]</em> <em>[-n number-to-stat(*1024)[:max-size[:min-size][:num-directories[:chunk-size]]]]</em> <em>[-m machine-name] [-r ram-size-in-MiB] [-x number-of-tests]</em> <em>[-u uid-to-use:gid-to-use] [-g gid-to-use]</em> <em>[-q] [-f size-for-char-io] [-b] [-D] [-p processes | -y p|s ]</em> <em>[-z seed-num|-Z random-file]</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This manual page documents briefly the <strong>bonnie++</strong>, program.</p><p>Bonnie++ is a program to test hard drives and file systems for performance or the lack therof. There are a many different types of file system operations which different applications use to different degrees. Bonnie++ tests some of them and for each test gives a result of the amount of work done per second and the percentage of CPU time this took. For performance results higher numbers are better, for CPU usage lower are better (NB a configuration scoring a performance result of 2000 and a CPU result of 90% is better in terms of CPU use than a configuration delivering performance of 1000 and CPU usage of 60%).</p><p>There are two sections to the program's operations. The first is to test the IO throughput in a fashion that is designed to simulate some types of database applications. The second is to test creation, reading, and deleting many small files in a fashion similar to the usage patterns of programs such as Squid or INN.</p><p>All the details of the tests performed by Bonnie++ are contained in the file <strong>/usr/share/doc/bonnie++/readme.html</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>For Bonnie++ every option is of the form of a hyphen followed by a letter and then the next parameter contains the value.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>the directory to use for the tests.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>the size of the file(s) for IO performance measures in megabytes. If the size is greater than 1G then multiple files will be used to store the data, and each file will be up to 1G in size.  This parameter may include the chunk size seperated from the size by a colon.  The chunk-size is measured in bytes and must be a power of two from 256 to 1048576, the default is 8192.  NB You can specify the size in giga-bytes or the chunk-size in kilo-bytes if you add <strong>g</strong> or <strong>k</strong> to the end of the number respectively.</p><p>If the specified size is 0 then this test will be skipped.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>the number of files for the file creation test. This is measured in multiples of 1024 files. This is because no-one will want to test less than 1024 files, and we need the extra space on braille displays.</p><p>If the specified number is 0 then this test will be skipped.</p><p>The default for this test is to test with 0 byte files. To use files of other sizes you can specify <strong>number:max:min:num-directories:chunk-size</strong> where <strong>max</strong> is the maximum size and <strong>min</strong> is the minimum size (both default to 0 if not specified). If minimum and maximum sizes are specified then every file will have a random size from the range <strong>min..max</strong> inclusive.  If you specify a number of directories then the files will be evenly distributed amoung that many sub-directories.</p><p>If <strong>max</strong> is <strong>-1</strong> then hard links will be created instead of files. If <strong>max</strong> is <strong>-2</strong> then soft links will be created instead of files.</p>
  </dd>
  <dt>
    <p><strong>-m</strong></p>
  </dt>
  <dd>
    <p>name of the machine - for display purposes only.</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>RAM size in megabytes. If you specify this the other parameters will be checked to ensure they make sense for a machine of that much RAM. You should not need to do this in general use as it should be able to discover the RAM size. NB If you specify a size of 0 then all checks will be disabled...</p>
  </dd>
  <dt>
    <p><strong>-x</strong></p>
  </dt>
  <dd>
    <p>number of test runs. This is useful if you want to perform more than one test. It will dump output continuously in CSV format until either the number of tests have been completed, or it is killed.</p>
  </dd>
  <dt>
    <p><strong>-u</strong></p>
  </dt>
  <dd>
    <p>user-id to use.  When running as root specify the UID to use for the tests.  It is not recommended to use root (since the occasion when a Bonnie++ bug wiped out someone's system), so if you really want to run as root then use <strong>-u root.</strong> Also if you want to specify the group to run as then use the <strong>user:group</strong> format.  If you specify a user by name but no group then the primary group of that user will be chosen.  If you specify a user by number and no group then the group will be <strong>nogroup.</strong></p>
  </dd>
  <dt>
    <p><strong>-g</strong></p>
  </dt>
  <dd>
    <p>group-id to use.  Same as using <strong>:group</strong> for the <strong>-u</strong> parameter, just a different way to specify it for compatibility with other programs.</p>
  </dd>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>quiet mode. If specified then some of the extra informational messages will be suppressed. Also the csv data will be the only output on standard out and the plain text data will be on standard error. This means you can run <strong>bonnie++ -q &gt;&gt; file.csv</strong> to record your csv data.</p>
  </dd>
  <dt>
    <p><strong>-f size-for-char-io</strong></p>
  </dt>
  <dd>
    <p>fast mode control, skips per-char IO tests if no parameter, otherwise specifies the size of the tests for per-char IO tests (default 20M).</p>
  </dd>
  <dt>
    <p><strong>-b</strong></p>
  </dt>
  <dd>
    <p>no write buffering.  fsync() after every write.</p>
  </dd>
  <dt>
    <p><strong>-p</strong></p>
  </dt>
  <dd>
    <p>number of processes to serve semaphores for.  This is used to create the semaphores for synchronising multiple Bonnie++ processes.  All the processes which are told to use the semaphore with <strong>-ys</strong> will start each test with synchronization.  Use "-p -1" to delete the semaphore.</p>
  </dd>
  <dt>
    <p><strong>-y s|p</strong></p>
  </dt>
  <dd>
    <p>perform synchronization before each test.  Option <strong>s</strong> for semaphores and option <strong>p</strong> for prompting.</p>
  </dd>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>use direct IO (O_DIRECT) for the bulk IO tests</p>
  </dd>
  <dt>
    <p><strong>-z seed</strong></p>
  </dt>
  <dd>
    <p>random number seed to repeat the same test.</p>
  </dd>
  <dt>
    <p><strong>-Z random-file</strong></p>
  </dt>
  <dd>
    <p>file containing random data in network byte order.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MULTIPLE PROCESSES</h2>
        <div class="sectioncontent">
<p>Run the following commands to run three copies of Bonnie++ simultaneously:</p><p>bonnie++ -p3</p><p>bonnie++ -y &gt; out1 &</p><p>bonnie++ -y &gt; out2 &</p><p>bonnie++ -y &gt; out3 &</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OUTPUT</h2>
        <div class="sectioncontent">
<p>The primary output is plain-text in 80 columns which is designed to fit well when pasted into email and which will work well with Braille displays.</p><p>The second type of output is CSV (Comma Seperated Values). This can easily be imported into any spread-sheet or database program. Also I have included the programs <strong>bon_csv2html</strong> and <strong>bon_csv2txt</strong> to convert CSV data to HTML and plain-ascii respectively.</p><p>For every test two numbers are reported, the amount of work done (higher numbers are better) and the percentage of CPU time taken to perform the work (lower numbers are better). If a test completes in less than 500ms then the output will be displayed as "++++". This is because such a test result can't be calculated accurately due to rounding errors and I would rather display no result than a wrong result.</p><p>Data volumes for the 80 column text display use "K" for KiB (1024 bytes), "M" for MiB (1048576 bytes), and "G" for GiB (1073741824 bytes).  So K/sec means a multiple of 1024 bytes per second.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This program, its manual page, and the Debian package were written by Russell Coker &lt;russell@coker.com.au&gt;, parts of the program are based on the work of Tim Bray &lt;tbray@textuality.com&gt;.</p><p>The documentation, the Perl scripts, and all the code for testing the creation of thousands of files was written by Russell Coker, but the entire package is under joint copyright with Tim Bray.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">
<p>Handles SIGINT and does a cleanup (which may take some time), a second SIGINT or a SIGQUIT will cause it to immediately die.</p><p>SIGXCPU and SIGXFSZ act like SIGINT.</p><p>Ignores SIGHUP.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The random file sizes will add up to different values for different test runs. I plan to add some code that checks the sum and ensures that the sum of the values will be the same on seperate runs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>The source is available from http://www.coker.com.au/bonnie++ .</p><p>See http://etbe.coker.com.au/category/benchmark for further information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO bonnie++&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/zcav.8.html"><strong>zcav</strong>(8)</a>, <a href="../man8/getc_putc.8.html"><strong>getc_putc</strong>(8)</a>, <a href="../man1/bon_csv2html.1.html"><strong>bon_csv2html</strong>(1)</a>, <a href="../man1/bon_csv2txt.1.html"><strong>bon_csv2txt</strong>(1)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bmon.8.html"><span aria-hidden="true">&larr;</span> bmon.8: Bandwidth monitor and rate estimator</a></li>
   <li class="next"><a href="booleans.8.html">booleans.8: Policy booleans enable runtime customization of selinux policy <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
