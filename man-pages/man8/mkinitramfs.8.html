<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mkinitramfs: Low-level tool for generating an initramfs image</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Low-level tool for generating an initramfs image">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mkinitramfs (8) manual">
  <meta name="twitter:description" content="Low-level tool for generating an initramfs image">
  <meta name="twitter:image" content="https://www.carta.tech/images/initramfs-tools-mkinitramfs-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/mkinitramfs.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mkinitramfs (8) manual" />
  <meta property="og:description" content="Low-level tool for generating an initramfs image" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/initramfs-tools-mkinitramfs-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mkinitramfs<small> (8)</small></h1>
        <p class="lead">Low-level tool for generating an initramfs image</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mkinitramfs.8.html">
      <span itemprop="name">mkinitramfs: Low-level tool for generating an initramfs image</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/initramfs-tools/">
      <span itemprop="name">initramfs-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mkinitramfs.8.html">
      <span itemprop="name">mkinitramfs: Low-level tool for generating an initramfs image</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mkinitramfs</strong> [<strong>-c</strong> <em>compress</em>] [<strong>-d</strong> <em>confdir</em>] [<strong>-k</strong>] -o <em>outfile</em> [<strong>-r</strong> <em>root</em>] [<strong>-v</strong>] [<em>version</em>]</p><p><strong>mkinitramfs</strong> [<strong>--supported-host-version=</strong> <em>hversion</em>]</p><p><strong>mkinitramfs</strong> [<strong>--supported-target-version=</strong> <em>tversion</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>mkinitramfs</strong> script generates an initramfs image. The initramfs is a compressed cpio archive. The archive can be used on a different box of the same arch with the corresponding Linux kernel. <strong>mkinitramfs</strong> is meant for advanced usage. On your local box <strong>update-initramfs</strong> calls <strong>mkinitramfs</strong> with the relevant parameters. <strong>update-initramfs</strong> keeps sha1sum of generated initramfs. It takes care to generate backups and eventually runs the bootloader.</p><p>At boot time, the kernel unpacks that archive into RAM disk, mounts and uses it as initial root file system. All finding of the root device happens in this early userspace.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong> -c </strong><em> compress</em></p>
  </dt>
  <dd>
    <p>Override the <strong>COMPRESS</strong> setting in <em>initramfs.conf</em>.</p>
  </dd>
  <dt>
    <p><strong> -d </strong><em> confdir</em></p>
  </dt>
  <dd>
    <p>Set an alternate configuration directory.</p>
  </dd>
  <dt>
    <p><strong> -k</strong></p>
  </dt>
  <dd>
    <p>Keep the temporary directory used to make the image.</p>
  </dd>
  <dt>
    <p><strong> -o </strong><em> outfile</em></p>
  </dt>
  <dd>
    <p>Write the image to <em>outfile</em>.</p>
  </dd>
  <dt>
    <p><strong> -r </strong><em> root</em></p>
  </dt>
  <dd>
    <p>Override the <strong>ROOT</strong> setting in <em>initramfs.conf</em>.</p>
  </dd>
  <dt>
    <p><strong> -v</strong></p>
  </dt>
  <dd>
    <p>Set the verbose mode output.</p>
  </dd>
  <dt>
    <p><em> version</em></p>
  </dt>
  <dd>
    <p>Set the kernel version of the initramfs image (defaults to the running kernel).</p>
  </dd>
  <dt>
    <p><strong>--supported-host-version=</strong><em>hversion</em></p>
  </dt>
  <dd>
    <p>This option queries if mkinitramfs can create ramdisks on a running kernel of version <em>hversion</em>.</p>
  </dd>
  <dt>
    <p><strong>--supported-target-version=</strong><em>tversion</em></p>
  </dt>
  <dd>
    <p>This option queries if mkinitramfs can create ramdisks for kernel version <em>tversion</em>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p><strong>mkinitramfs</strong> honours the <strong>TMPDIR</strong> environment variable. If set, it uses subdirectories in the given directory to create its temporary working directories. Else it uses <em>/var/tmp</em> as default value for that purpose. The given directory should be on a filesystem which allows the execution of files stored there, i.e. should not be mounted with the <strong>noexec</strong> mount option.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/initramfs-tools/initramfs.conf</em></p>
  </dt>
  <dd>
    <p>The default configuration file for the script. See <a href="../man5/initramfs.conf.5.html"><strong>initramfs.conf</strong>(5)</a> for a description of the available configuration parameter.</p>
  </dd>
  <dt>
    <p><em>/etc/initramfs-tools/modules</em></p>
  </dt>
  <dd>
    <p>Specified modules will be put in the generated image and loaded when the system boots. The format - one per line - is identical to that of <em>/etc/modules,</em> which is described in <a href="../man5/modules.5.html"><strong>modules</strong>(5)</a>.</p>
  </dd>
  <dt>
    <p><em>/etc/initramfs-tools/conf.d</em></p>
  </dt>
  <dd>
    <p>The conf.d directory allows one to hardcode bootargs at initramfs build time via config snippets. This allows one to set ROOT or RESUME. This is especially useful for bootloaders, which do not pass an root bootarg.</p>
  </dd>
  <dt>
    <p><em>/etc/initramfs-tools/DSDT.aml</em></p>
  </dt>
  <dd>
    <p>If this file exists, it will be appended to the initramfs in a way that causes it to be loaded by ACPI.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Create an initramfs for current running kernel:</p><p><strong>mkinitramfs -o ~/tmp/initramfs-$(uname -r)</strong></p><p>Create an initramfs for specific kernel and keep builddirs:</p><p><strong>mkinitramfs -k -o ~/tmp/initramfs-2.6.21-686 2.6.21-686</strong></p><p>Debug initramfs creation (check out written logfile)</p><p><strong>sh -x mkinitramfs -o ~/tmp/initramfs-$(uname -r) 2&gt; ~/tmp/log</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The initramfs-tools are written by Maximilian Attems &lt;maks@debian.org&gt;, Jeff Bailey &lt;jbailey@raspberryginger.com&gt; and numerous others.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mkinitramfs&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/initramfs.conf.5.html"><strong>initramfs.conf</strong>(5)</a>, <a href="../man8/initramfs-tools.8.html"><strong>initramfs-tools</strong>(8)</a>, <a href="../man8/update-initramfs.8.html"><strong>update-initramfs</strong>(8)</a>, <a href="../man8/lsinitramfs.8.html"><strong>lsinitramfs</strong>(8)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mkimapdcert.8.html"><span aria-hidden="true">&larr;</span> mkimapdcert.8: Create a test ssl certificate for imap over ssl</a></li>
   <li class="next"><a href="mkinitrd.8.html">mkinitrd.8: Is a compat wrapper, which calls dracut to generate an initramfs <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
