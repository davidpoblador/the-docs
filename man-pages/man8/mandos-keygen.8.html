<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mandos-keygen: Generate key and password for mandos client and server.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Generate key and password for mandos client and server.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mandos-keygen (8) manual">
  <meta name="twitter:description" content="Generate key and password for mandos client and server.">
  <meta name="twitter:image" content="https://www.carta.tech/images/mandos-client-mandos-keygen-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/mandos-keygen.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mandos-keygen (8) manual" />
  <meta property="og:description" content="Generate key and password for mandos client and server." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mandos-client-mandos-keygen-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mandos-keygen<small> (8)</small></h1>
        <p class="lead">Generate key and password for mandos client and server.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mandos-keygen.8.html">
      <span itemprop="name">mandos-keygen: Generate key and password for mandos client and server.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mandos-client/">
      <span itemprop="name">mandos-client</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mandos-keygen.8.html">
      <span itemprop="name">mandos-keygen: Generate key and password for mandos client and server.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mandos-keygen</strong> [<strong>--dir&nbsp;</strong><strong></strong><em>DIRECTORY</em> | <strong>-d&nbsp;</strong><strong></strong><em>DIRECTORY</em>]</p><p>[<strong>--type&nbsp;</strong><strong></strong><em>KEYTYPE</em> | <strong>-t&nbsp;</strong><strong></strong><em>KEYTYPE</em>]</p><p>[<strong>--length&nbsp;</strong><strong></strong><em>BITS</em> | <strong>-l&nbsp;</strong><strong></strong><em>BITS</em>]</p><p>[<strong>--subtype&nbsp;</strong><strong></strong><em>KEYTYPE</em> | <strong>-s&nbsp;</strong><strong></strong><em>KEYTYPE</em>]</p><p>[<strong>--sublength&nbsp;</strong><strong></strong><em>BITS</em> | <strong>-L&nbsp;</strong><strong></strong><em>BITS</em>]</p><p>[<strong>--name&nbsp;</strong><strong></strong><em>NAME</em> | <strong>-n&nbsp;</strong><strong></strong><em>NAME</em>]</p><p>[<strong>--email&nbsp;</strong><strong></strong><em>ADDRESS</em> | <strong>-e&nbsp;</strong><strong></strong><em>ADDRESS</em>]</p><p>[<strong>--comment&nbsp;</strong><strong></strong><em>TEXT</em> | <strong>-c&nbsp;</strong><strong></strong><em>TEXT</em>]</p><p>[<strong>--expire&nbsp;</strong><strong></strong><em>TIME</em> | <strong>-x&nbsp;</strong><strong></strong><em>TIME</em>]</p><p>[<strong>--force</strong> | <strong>-f</strong>] <strong>mandos-keygen</strong> {<strong>--password</strong> | <strong>-p</strong> | <strong>--passfile&nbsp;</strong><strong></strong><em>FILE</em> | <strong>-F</strong>&nbsp;<em>FILE</em>}</p><p>[<strong>--dir&nbsp;</strong><strong></strong><em>DIRECTORY</em> | <strong>-d&nbsp;</strong><strong></strong><em>DIRECTORY</em>]</p><p>[<strong>--name&nbsp;</strong><strong></strong><em>NAME</em> | <strong>-n&nbsp;</strong><strong></strong><em>NAME</em>] [<strong>--no-ssh</strong> | <strong>-S</strong>] <strong>mandos-keygen</strong> {<strong>--help</strong> | <strong>-h</strong>} <strong>mandos-keygen</strong> {<strong>--version</strong> | <strong>-v</strong>}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mandos-keygen</strong> is a program to generate the OpenPGP key used by <strong>mandos-client</strong>(8mandos). The key is normally written to /etc/mandos for later installation into the initrd image, but this, and most other things, can be changed with command line options.</p><p>This program can also be used with the <strong>--password</strong> or <strong>--passfile</strong> options to generate a ready-made section for clients.conf (see <a href="../man5/mandos-clients.conf.5.html"><strong>mandos-clients.conf</strong>(5)</a>).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PURPOSE</h2>
        <div class="sectioncontent">
<p>The purpose of this is to enable <em>remote and unattended rebooting</em> of client host computer with an <em>encrypted root file system</em>. See the section called &ldquo;OVERVIEW&rdquo; for details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>--help</strong>, <strong>-h</strong></p><p>Show a help message and exit</p><p><strong>--dir </strong><strong></strong><em>DIRECTORY</em>, <strong>-d </strong><strong></strong><em>DIRECTORY</em></p><p>Target directory for key files. Default is /etc/mandos.</p><p><strong>--type </strong><strong></strong><em>TYPE</em>, <strong>-t </strong><strong></strong><em>TYPE</em></p><p>Key type. Default is &ldquo;RSA&rdquo;.</p><p><strong>--length </strong><strong></strong><em>BITS</em>, <strong>-l </strong><strong></strong><em>BITS</em></p><p>Key length in bits. Default is 4096.</p><p><strong>--subtype </strong><strong></strong><em>KEYTYPE</em>, <strong>-s </strong><strong></strong><em>KEYTYPE</em></p><p>Subkey type. Default is &ldquo;RSA&rdquo; (Elgamal encryption-only).</p><p><strong>--sublength </strong><strong></strong><em>BITS</em>, <strong>-L </strong><strong></strong><em>BITS</em></p><p>Subkey length in bits. Default is 4096.</p><p><strong>--email </strong><strong></strong><em>ADDRESS</em>, <strong>-e </strong><strong></strong><em>ADDRESS</em></p><p>Email address of key. Default is empty.</p><p><strong>--comment </strong><strong></strong><em>TEXT</em>, <strong>-c </strong><strong></strong><em>TEXT</em></p><p>Comment field for key. Default is empty.</p><p><strong>--expire </strong><strong></strong><em>TIME</em>, <strong>-x </strong><strong></strong><em>TIME</em></p><p>Key expire time. Default is no expiration. See <a href="../man1/gpg.1.html"><strong>gpg</strong>(1)</a> for syntax.</p><p><strong>--force</strong>, <strong>-f</strong></p><p>Force overwriting old key.</p><p><strong>--password</strong>, <strong>-p</strong></p><p>Prompt for a password and encrypt it with the key already present in either /etc/mandos or the directory specified with the <strong>--dir</strong> option. Outputs, on standard output, a section suitable for inclusion in <strong>mandos-clients.conf</strong>(8). The host name or the name specified with the <strong>--name</strong> option is used for the section header. All other options are ignored, and no key is created.</p><p><strong>--passfile </strong><strong></strong><em>FILE</em>, <strong>-F </strong><strong></strong><em>FILE</em></p><p>The same as <strong>--password</strong>, but read from <em>FILE</em>, not the terminal.</p><p><strong>--no-ssh</strong>, <strong>-S</strong></p><p>When <strong>--password</strong> or <strong>--passfile</strong> is given, this option will prevent <strong>mandos-keygen</strong> from calling <strong>ssh-keyscan</strong> to get an SSH fingerprint for this host and, if successful, output suitable config options to use this fingerprint as a <strong>checker</strong> option in the output. This is otherwise the default behavior.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OVERVIEW</h2>
        <div class="sectioncontent">
<p>This is part of the Mandos system for allowing computers to have encrypted root file systems and at the same time be capable of remote and/or unattended reboots. The computers run a small client program in the initial RAM disk environment which will communicate with a server over a network. All network communication is encrypted using TLS. The clients are identified by the server using an OpenPGP key; each client has one unique to it. The server sends the clients an encrypted password. The encrypted password is decrypted by the clients using the same OpenPGP key, and the password is then used to unlock the root file system, whereupon the computers can continue booting normally.</p><p>This program is a small utility to generate new OpenPGP keys for new Mandos clients, and to generate sections for inclusion in clients.conf on the server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p>The exit status will be 0 if a new key (or password, if the <strong>--password</strong> option was used) was successfully created, otherwise not.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p><strong>TMPDIR</strong></p><p>If set, temporary files will be created here. See <a href="../man1/mktemp.1.html"><strong>mktemp</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>Use the <strong>--dir</strong> option to change where <strong>mandos-keygen</strong> will write the key files. The default file names are shown here.</p><p>/etc/mandos/seckey.txt</p><p>OpenPGP secret key file which will be created or overwritten.</p><p>/etc/mandos/pubkey.txt</p><p>OpenPGP public key file which will be created or overwritten.</p><p>/tmp</p><p>Temporary files will be written here if <em>TMPDIR</em> is not set.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>Normal invocation needs no options:</p><p><strong>mandos-keygen</strong></p><p>Create key in another directory and of another type. Force overwriting old key files:</p><p><strong>mandos-keygen --dir ~/keydir --type RSA --force</strong></p><p>Prompt for a password, encrypt it with the key in /etc/mandos and output a section suitable for clients.conf.</p><p><strong>mandos-keygen --password</strong></p><p>Prompt for a password, encrypt it with the key in the client-key directory and output a section suitable for clients.conf.</p><p><strong>mandos-keygen --password --dir client-key</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SECURITY</h2>
        <div class="sectioncontent">
<p>The <strong>--type</strong>, <strong>--length</strong>, <strong>--subtype</strong>, and <strong>--sublength</strong> options can be used to create keys of low security. If in doubt, leave them to the default values.</p><p>The key expire time is <em>not</em> guaranteed to be honored by <strong>mandos</strong>(8).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mandos-keygen&hellip;</h2>
        <div class="sectioncontent">
<p><strong>intro</strong>(8mandos), <a href="../man1/gpg.1.html"><strong>gpg</strong>(1)</a>, <a href="../man5/mandos-clients.conf.5.html"><strong>mandos-clients.conf</strong>(5)</a>, <strong>mandos</strong>(8), <strong>mandos-client</strong>(8mandos), <strong>ssh-keyscan</strong>(1)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2008-2009, 2011-2012 Teddy Hogeborn, Bj\(:orn P\(oahlsson</p><p>This manual page is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p>This manual page is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program. If not, see \m[blue]<strong>http://www.gnu.org/licenses/</strong>\m[].</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mandos-ctl.8.html"><span aria-hidden="true">&larr;</span> mandos-ctl.8: Control the operation of the mandos server</a></li>
   <li class="next"><a href="mapscrn.8.html">mapscrn.8: Load screen output mapping table <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
