<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>puppet-agent: The puppet agent daemon</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The puppet agent daemon">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="puppet-agent (8) manual">
  <meta name="twitter:description" content="The puppet agent daemon">
  <meta name="twitter:image" content="https://www.carta.tech/images/puppet-common-puppet-agent-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/puppet-agent.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="puppet-agent (8) manual" />
  <meta property="og:description" content="The puppet agent daemon" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/puppet-common-puppet-agent-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">puppet-agent<small> (8)</small></h1>
        <p class="lead">The puppet agent daemon</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/puppet-agent.8.html">
      <span itemprop="name">puppet-agent: The puppet agent daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/puppet-common/">
      <span itemprop="name">puppet-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/puppet-agent.8.html">
      <span itemprop="name">puppet-agent: The puppet agent daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Retrieves the client configuration from the puppet master and applies it to the local host.</p><p>This service may be run as a daemon, run periodically using cron (or something similar), or run interactively for testing purposes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE</h2>
        <div class="sectioncontent">
<p>puppet agent [--certname <em>name</em>] [-D|--daemonize|--no-daemonize] [-d|--debug] [--detailed-exitcodes] [--digest <em>digest</em>] [--disable [message]] [--enable] [--fingerprint] [-h|--help] [-l|--logdest syslog|<em>file</em>|console] [--no-client] [--noop] [-o|--onetime] [-t|--test] [-v|--verbose] [-V|--version] [-w|--waitforcert <em>seconds</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This is the main puppet client. Its job is to retrieve the local machine\'s configuration from a remote server and apply it. In order to successfully communicate with the remote server, the client must have a certificate signed by a certificate authority that the server trusts; the recommended method for this, at the moment, is to run a certificate authority as part of the puppet server (which is the default). The client will connect and request a signed certificate, and will continue connecting until it receives one.</p><p>Once the client has a signed certificate, it will retrieve its configuration and apply it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE NOTES</h2>
        <div class="sectioncontent">
<p>\'puppet agent\' does its best to find a compromise between interactive use and daemon use. Run with no arguments and no configuration, it will go into the background, attempt to get a signed certificate, and retrieve and apply its configuration every 30 minutes.</p><p>Some flags are meant specifically for interactive use -- in particular, \'test\', \'tags\' or \'fingerprint\' are useful. \'test\' enables verbose logging, causes the daemon to stay in the foreground, exits if the server\'s configuration is invalid (this happens if, for instance, you\'ve left a syntax error on the server), and exits after running the configuration once (rather than hanging around as a long-running process).</p><p>\'tags\' allows you to specify what portions of a configuration you want to apply. Puppet elements are tagged with all of the class or definition names that contain them, and you can use the \'tags\' flag to specify one of these names, causing only configuration elements contained within that class or definition to be applied. This is very useful when you are testing new configurations -- for instance, if you are just starting to manage \'ntpd\', you would put all of the new elements into an \'ntpd\' class, and call puppet with \'--tags ntpd\', which would only apply that small portion of the configuration during your testing, rather than applying the whole thing.</p><p>\'fingerprint\' is a one-time flag. In this mode \'puppet agent\' will run once and display on the console (and in the log) the current certificate (or certificate request) fingerprint. Providing the \'--digest\' option allows to use a different digest algorithm to generate the fingerprint. The main use is to verify that before signing a certificate request on the master, the certificate request the master received is the same as the one the client sent (to prevent against man-in-the-middle attacks when signing certificates).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Note that any configuration parameter that\'s valid in the configuration file is also a valid long argument. For example, \'server\' is a valid configuration parameter, so you can specify \'--server <em>servername</em>\' as an argument.</p><p>See the configuration file documentation at http://docs.puppetlabs.com/references/stable/configuration.html for the full list of acceptable parameters. A commented list of all configuration options can also be generated by running puppet agent with \'--genconfig\'.</p>
<dl class='dl-vertical'>
  <dt>
    <p>--certname</p>
  </dt>
  <dd>
    <p>Set the certname (unique ID) of the client. The master reads this unique identifying string, which is usually set to the node\'s fully-qualified domain name, to determine which configurations the node will receive. Use this option to debug setup problems or implement unusual node identification schemes.</p>
  </dd>
  <dt>
    <p>--daemonize</p>
  </dt>
  <dd>
    <p>Send the process into the background. This is the default.</p>
  </dd>
  <dt>
    <p>--no-daemonize</p>
  </dt>
  <dd>
    <p>Do not send the process into the background.</p>
  </dd>
  <dt>
    <p>--debug</p>
  </dt>
  <dd>
    <p>Enable full debugging.</p>
  </dd>
  <dt>
    <p>--detailed-exitcodes</p>
  </dt>
  <dd>
    <p>Provide transaction information via exit codes. If this is enabled, an exit code of \'2\' means there were changes, an exit code of \'4\' means there were failures during the transaction, and an exit code of \'6\' means there were both changes and failures.</p>
  </dd>
  <dt>
    <p>--digest</p>
  </dt>
  <dd>
    <p>Change the certificate fingerprinting digest algorithm. The default is SHA256. Valid values depends on the version of OpenSSL installed, but will likely contain MD5, MD2, SHA1 and SHA256.</p>
  </dd>
  <dt>
    <p>--disable</p>
  </dt>
  <dd>
    <p>Disable working on the local system. This puts a lock file in place, causing \'puppet agent\' not to work on the system until the lock file is removed. This is useful if you are testing a configuration and do not want the central configuration to override the local state until everything is tested and committed.</p><ul>
<li><p>Disable can also take an optional message that will be reported by the \'puppet agent\' at the next disabled run.</p></li><li><p>\'puppet agent\' uses the same lock file while it is running, so no more than one \'puppet agent\' process is working at a time.</p></li><li><p>\'puppet agent\' exits after executing this.</p></li>
</ul>
  </dd>
  <dt>
    <p>--enable</p>
  </dt>
  <dd>
    <p>Enable working on the local system. This removes any lock file, causing \'puppet agent\' to start managing the local system again (although it will continue to use its normal scheduling, so it might not start for another half hour).</p><ul>
<li><p>\'puppet agent\' exits after executing this.</p></li>
</ul>
  </dd>
  <dt>
    <p>--fingerprint</p>
  </dt>
  <dd>
    <p>Display the current certificate or certificate signing request fingerprint and then exit. Use the \'--digest\' option to change the digest algorithm used.</p>
  </dd>
  <dt>
    <p>--help</p>
  </dt>
  <dd>
    <p>Print this help message</p>
  </dd>
  <dt>
    <p>--logdest</p>
  </dt>
  <dd>
    <p>Where to send messages. Choose between syslog, the console, and a log file. Defaults to sending messages to syslog, or the console if debugging or verbosity is enabled.</p>
  </dd>
  <dt>
    <p>--no-client</p>
  </dt>
  <dd>
    <p>Do not create a config client. This will cause the daemon to start but not check configuration unless it is triggered with <strong>puppet kick</strong>. This only makes sense when puppet agent is being run with listen = true in puppet.conf or was started with the <strong>--listen</strong> option.</p>
  </dd>
  <dt>
    <p>--noop</p>
  </dt>
  <dd>
    <p>Use \'noop\' mode where the daemon runs in a no-op or dry-run mode. This is useful for seeing what changes Puppet will make without actually executing the changes.</p>
  </dd>
  <dt>
    <p>--onetime</p>
  </dt>
  <dd>
    <p>Run the configuration once. Runs a single (normally daemonized) Puppet run. Useful for interactively running puppet agent when used in conjunction with the --no-daemonize option.</p>
  </dd>
  <dt>
    <p>--test</p>
  </dt>
  <dd>
    <p>Enable the most common options used for testing. These are \'onetime\', \'verbose\', \'ignorecache\', \'no-daemonize\', \'no-usecacheonfailure\', \'detailed-exit-codes\', \'no-splay\', and \'show_diff\'.</p>
  </dd>
  <dt>
    <p>--verbose</p>
  </dt>
  <dd>
    <p>Turn on verbose reporting.</p>
  </dd>
  <dt>
    <p>--version</p>
  </dt>
  <dd>
    <p>Print the puppet version number and exit.</p>
  </dd>
  <dt>
    <p>--waitforcert</p>
  </dt>
  <dd>
    <p>This option only matters for daemons that do not yet have certificates and it is enabled by default, with a value of 120 (seconds). This causes \'puppet agent\' to connect to the server every 2 minutes and ask it to sign a certificate request. This is useful for the initial setup of a puppet client. You can turn off waiting for certificates by specifying a time of 0.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
$ puppet agent --server puppet.domain.com
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Puppet agent accepts the following signals:</p>
<dl class='dl-vertical'>
  <dt>
    <p>SIGHUP</p>
  </dt>
  <dd>
    <p>Restart the puppet agent daemon.</p>
  </dd>
  <dt>
    <p>SIGINT and SIGTERM</p>
  </dt>
  <dd>
    <p>Shut down the puppet agent daemon.</p>
  </dd>
  <dt>
    <p>SIGUSR1</p>
  </dt>
  <dd>
    <p>Immediately retrieve and apply configurations from the puppet master.</p>
  </dd>
  <dt>
    <p>SIGUSR2</p>
  </dt>
  <dd>
    <p>Close file descriptors for log files and reopen them. Used with logrotate.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Luke Kanies</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2011 Puppet Labs, LLC Licensed under the Apache 2.0 License</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="puppet.8.html"><span aria-hidden="true">&larr;</span> puppet.8: Puppet  see \'puppet help\' for help on available puppet subcommands</a></li>
   <li class="next"><a href="puppet-apply.8.html">puppet-apply.8: Apply puppet manifests locally <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
