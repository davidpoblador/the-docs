<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ecryptfs-migrate-home: Migrate a user's home to directory to an encrypted home setup</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Migrate a user's home to directory to an encrypted home setup">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ecryptfs-migrate-home (8) manual">
  <meta name="twitter:description" content="Migrate a user's home to directory to an encrypted home setup">
  <meta name="twitter:image" content="https://www.carta.tech/images/ecryptfs-utils-ecryptfs-migrate-home-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ecryptfs-migrate-home.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ecryptfs-migrate-home (8) manual" />
  <meta property="og:description" content="Migrate a user's home to directory to an encrypted home setup" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ecryptfs-utils-ecryptfs-migrate-home-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ecryptfs-migrate-home<small> (8)</small></h1>
        <p class="lead">Migrate a user's home to directory to an encrypted home setup</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ecryptfs-migrate-home.8.html">
      <span itemprop="name">ecryptfs-migrate-home: Migrate a user's home to directory to an encrypted home setup</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ecryptfs-utils/">
      <span itemprop="name">ecryptfs-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ecryptfs-migrate-home.8.html">
      <span itemprop="name">ecryptfs-migrate-home: Migrate a user's home to directory to an encrypted home setup</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ecryptfs-migrate-home</strong> [-u|--user USER]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-u, --user USER</strong></p>
  </dt>
  <dd>
    <p>Migrate USER's home directory to an encrypted home directory</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>WARNING</strong>: Make a complete backup copy of the non-encrypted data to another system or external media. This script is dangerous and in case of an error, could result in data lost, or lock USER out of the system!</p><p>This program must be executed by root.</p><p>This program will attempt to migrate a user's home directory to an encrypted home directory.</p><p>This program requires free disk space 2.5x the current size of the home directory to be migrated.  Once successful, you can recover most of this space by deleting the cleartext directory.</p><p>The USER must be logged out of all sessions in order to perform the migration, and have no open files according to <strong>lsof</strong>(1).</p><p>Once the migration has completed, the USER must login immediately, <strong>BEFORE THE NEXT REBOOT</strong> in order to complete the migration.</p><p>After logging in, if USER can read and write files in their home directory successfully, then the migration has completed successfully and can remove the cleartext backup in <em>/home/</em>.</p><p>After a successful migration, the USER really must run <a href="../man1/ecryptfs-unwrap-passphrase.1.html"><strong>ecryptfs-unwrap-passphrase</strong>(1)</a> or <strong>zescrow</strong>(1) and record their randomly generated mount passphrase.</p><p>If swap is not already encrypted, it is highly recommended that your administrator setup encrypted swap using <a href="../man1/ecryptfs-setup-swap.1.html"><strong>ecryptfs-setup-swap</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ecryptfs-migrate-home&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/ecryptfs-unwrap-passphrase.1.html"><strong>ecryptfs-unwrap-passphrase</strong>(1)</a>, <a href="../man1/ecryptfs-setup-private.1.html"><strong>ecryptfs-setup-private</strong>(1)</a>, <a href="../man1/ecryptfs-setup-swap.1.html"><strong>ecryptfs-setup-swap</strong>(1)</a>, <strong>lsof</strong>(1), <a href="../man1/rsync.1.html"><strong>rsync</strong>(1)</a>, <strong>zescrow</strong>(1)</p><p><em>http://ecryptfs.org/</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manpage was written by Dustin Kirkland &lt;kirkland@ubuntu.com&gt; for Ubuntu systems (but may be used by others).  Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2 or any later version published by the Free Software Foundation.</p><p>On Debian and Ubuntu systems, the complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ecryptfs-manager.8.html"><span aria-hidden="true">&larr;</span> ecryptfs-manager.8: Ecryptfs key manager.</a></li>
   <li class="next"><a href="ecryptfsd.8.html">ecryptfsd.8: User-space ecryptfs daemon. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
