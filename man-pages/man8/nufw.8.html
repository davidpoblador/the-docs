<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>nufw: Nufw user filtering gateway server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Nufw user filtering gateway server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="nufw (8) manual">
  <meta name="twitter:description" content="Nufw user filtering gateway server">
  <meta name="twitter:image" content="https://www.carta.tech/images/nufw-nufw-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/nufw.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="nufw (8) manual" />
  <meta property="og:description" content="Nufw user filtering gateway server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nufw-nufw-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">nufw<small> (8)</small></h1>
        <p class="lead">Nufw user filtering gateway server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/nufw.8.html">
      <span itemprop="name">nufw: Nufw user filtering gateway server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nufw/">
      <span itemprop="name">nufw</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/nufw.8.html">
      <span itemprop="name">nufw: Nufw user filtering gateway server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>nufw</strong> [ <strong>-h</strong> ] [ <strong>-V</strong> ] [ <strong>-D</strong> ] [ <strong>-m</strong> ] [ <strong>-v[v...]</strong> ] [ <strong>-s</strong> ] [ <strong>-S</strong> ] [ <strong>-N</strong> ] [ <strong>-A </strong><em>debug_area</em><strong></strong> ] [ <strong>-k </strong><em>keyfile</em><strong></strong> ] [ <strong>-c </strong><em>certfile</em><strong></strong> ] [ <strong>-a </strong><em>cafile</em><strong></strong> ] [ <strong>-r </strong><em>crlfile</em><strong></strong> ] [ <strong>-n </strong><em>nuauth_cert_dn</em><strong></strong> ] [ <strong>-d </strong><em>address</em><strong></strong> ] [ <strong>-p </strong><em>(remote) port</em><strong></strong> ] [ <strong>-t </strong><em>timeout</em><strong></strong> ] [ <strong>-T </strong><em>track_size</em><strong></strong> ] [ <strong>-q </strong><em>NfQueue_num</em><strong></strong> ] [ <strong>-L </strong><em>Nfqueue_length</em><strong></strong> ] [ <strong>-C</strong> ] [ <strong>-M</strong> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This manual page documents the <strong>nufw</strong> command.</p><p>nufw is the minimalist server, designed to run on the gateway(s) of the network. nufw is designed to run in conjunction with nuauth, the authenticating server. nufw receives network packets from the local firewall (on Linux 2.4 and 2.6, this is set up with the help of '-j NFQUEUE' or '-j QUEUE' netfilter target), and synchronizes with a nuauth server to check packet is authorized to travel through the gateway.</p><p>The design of the NUFW package lets administrator filter network traffic per user, not only per IP. This means you can now deal with different permissions for user A and user B, even if they work at the same moment, on the same multiuser machine. In other words, this extends firewalling criteria to userID, at the network scale.</p><p>Original packaging and informations and help can be found from http://www.nufw.org/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h </strong></p>
  </dt>
  <dd>
    <p>Issues usage details and exits.</p>
  </dd>
  <dt>
    <p><strong>-V </strong></p>
  </dt>
  <dd>
    <p>Issues version and exits.</p>
  </dd>
  <dt>
    <p><strong>-D </strong></p>
  </dt>
  <dd>
    <p>Run as a daemon. If started as a daemon, nufw logs message to syslog. If you don't specify this option, messages go to the console nufw is running on, both on STDOUT and STDERR. Unless you are debugging something, you should run nufw with this option.</p>
  </dd>
  <dt>
    <p><strong>-m </strong></p>
  </dt>
  <dd>
    <p>Mark packets with UserID. This requires the wvmark POM patch applied to netfilter, and is necessary for per user QoS or routing.</p>
  </dd>
  <dt>
    <p><strong>-v </strong></p>
  </dt>
  <dd>
    <p>Increases debug level. Multiple switches are accepted and each of them increases the debug level by one. Default debug level is 2, max is 10.</p>
  </dd>
  <dt>
    <p><strong>-A </strong><em>debug_areas</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Chooses debug_area. Default debug area is ALL. To select a subset add value from the following list:</p>
<dl class='dl-vertical'>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>DEBUG_AREA_MAIN (1) main domain</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>DEBUG_AREA_PACKET (2) packet domain</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>DEBUG_AREA_USER (4) user domain</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>DEBUG_AREA_GW (8) Gateway domain, interaction with nufw servers.</p>
  </dd>
  <dt>
    <p>&bull;</p>
  </dt>
  <dd>
    <p>DEBUG_AREA_AUTH (16) Authentication domain</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-k </strong><em>keyfile</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Use specified file as SSL (private) key file.</p>
  </dd>
  <dt>
    <p><strong>-c </strong><em>certfile</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Use specified file as SSL (public) certificate file.</p>
  </dd>
  <dt>
    <p><strong>-a </strong><em>cafile</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Use specified file as SSL certificate authority file.</p>
  </dd>
  <dt>
    <p><strong>-r </strong><em>crlfile</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Use specified file as SSL certificate revocation list file. You will need to restart nufw if you modify this file. Since 2.2.19, nufw reloads this file dynamically when receiving a HUP signal.</p>
  </dd>
  <dt>
    <p><strong>-n </strong><em>nuauth_dn</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Use specified string as the needed DN of nuauth. nufw will refuse to connect if the provided string does not match the DN of the certificate provided by nuauth. If you do not use this option, the DN of the nuauth certificate will be checked against the fully qualified domain name of the nuauth server, obtained from a reverse DNS lookup on nuauth IP address.</p>
  </dd>
  <dt>
    <p><strong>-s </strong></p>
  </dt>
  <dd>
    <p>Disable strict TLS checking of the certificate provided by nuauth.</p>
  </dd>
  <dt>
    <p><strong>-S </strong></p>
  </dt>
  <dd>
    <p>Force strict TLS checking of the certificate provided by nuauth. This is the default behavior of the daemon since 2.2.18.</p>
  </dd>
  <dt>
    <p><strong>-N </strong></p>
  </dt>
  <dd>
    <p>Suppress error if server FQDN does not match certificate CN.</p>
  </dd>
  <dt>
    <p><strong>-d </strong><em>address</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Network address of the nuauth server.</p>
  </dd>
  <dt>
    <p><strong>-p </strong><em>port</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Specifies TCP port to send data to when addressing the nuauth server. Nuauth server must be setup to listen on that port. Default value : 4128</p>
  </dd>
  <dt>
    <p><strong>-t </strong><em>seconds</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Specifies timeout to forget packets not answered for by nuauth. Default value : 15 s.</p>
  </dd>
  <dt>
    <p><strong>-T </strong><em>track_size</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Set maximum number of packets that can wait a decision in nufw. Default value : 1000.</p>
  </dd>
  <dt>
    <p><strong>-q </strong><em>NfQueue number</em><strong> </strong></p>
  </dt>
  <dd>
    <p>If Nufw was compiled with NfQueue support, Id of the NfQueue to use (default : 0).</p>
  </dd>
  <dt>
    <p><strong>-L </strong><em>NfQueue length</em><strong> </strong></p>
  </dt>
  <dd>
    <p>Specify the length of the nfnetlink queue used by nufw. This is the number of packets that the kernel will keep internally before dropping new coming packets.</p>
  </dd>
  <dt>
    <p><strong>-C </strong></p>
  </dt>
  <dd>
    <p>Listen to conntrack events (needed for connection expiration).</p>
  </dd>
  <dt>
    <p><strong>-M </strong></p>
  </dt>
  <dd>
    <p>Only report event on marked connections to nuauth (implies -C and -m)</p><p>This is the way to do an efficient selection of events to be sent to nuauth but this REQUIRES a kernel with transmit_mark applied (should be ok for 2.6.18+) and the use of CONNMARK to propagate the initial mark across all the packets of the connection.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">
<p>The <strong>nufw</strong> daemon is designed to deal with several signals : USR1, USR2, SYS, WINCH and POLL.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>USR1 </strong></p>
  </dt>
  <dd>
    <p>Increases verbosity. The daemon then acts as if it had been launched with one supplementary '-v'.A line is also added to the system log to mention the signal event.</p>
  </dd>
  <dt>
    <p><strong>USR2 </strong></p>
  </dt>
  <dd>
    <p>Decreases verbosity. The daemon then acts as if it had been launched with one less '-v'. A line is also added to the system log to mention the signal event.</p>
  </dd>
  <dt>
    <p><strong>SYS </strong></p>
  </dt>
  <dd>
    <p>Removes the Conntrack events thread. This gets the daemon to work as if the "-C" switch had not been set. This is useful on HA configurations, when one firewall gets passive, for instance.</p>
  </dd>
  <dt>
    <p><strong>WINCH </strong></p>
  </dt>
  <dd>
    <p>Starts the Conntrack events thread. This gets the daemon to work as if the "-C" switch had been set at startup. This is useful on HA configurations, when one firewall gets active, for instance.</p>
  </dd>
  <dt>
    <p><strong>POLL </strong></p>
  </dt>
  <dd>
    <p>Logs an "audit" line, mentionning how many network datagrams were received and sent since daemon startup.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO nufw&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/nuauth.8.html"><strong>nuauth</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Nufw was designed and coded by Eric Leblond, aka Regit (&lt;eric@regit.org&gt;) , and Vincent Deffontaines, aka gryzor (&lt;vincent@gryzor.com&gt;). Original idea in 2001, while working on NSM Ldap support.</p><p>This manual page was written by Vincent Deffontaines</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 2 as published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts and no Back-Cover Texts.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="nuauth.8.html"><span aria-hidden="true">&larr;</span> nuauth.8: Nufw authentication server</a></li>
   <li class="next"><a href="nullidentd.8.html">nullidentd.8: A bare minimum identd server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
