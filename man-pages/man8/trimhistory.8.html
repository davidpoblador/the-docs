<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>trimhistory: Remove old xymon history-log entries</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Remove old xymon history-log entries">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="trimhistory (8) manual">
  <meta name="twitter:description" content="Remove old xymon history-log entries">
  <meta name="twitter:image" content="https://www.carta.tech/images/xymon-trimhistory-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/trimhistory.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="trimhistory (8) manual" />
  <meta property="og:description" content="Remove old xymon history-log entries" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xymon-trimhistory-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">trimhistory<small> (8)</small></h1>
        <p class="lead">Remove old xymon history-log entries</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/trimhistory.8.html">
      <span itemprop="name">trimhistory: Remove old xymon history-log entries</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xymon/">
      <span itemprop="name">xymon</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/trimhistory.8.html">
      <span itemprop="name">trimhistory: Remove old xymon history-log entries</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>trimhistory --cutoff=TIME [options]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>trimhistory</strong> tool is used to purge old entries from the Xymon history logs. These logfiles accumulate information about all status changes that have occurred for any given service, host, or the entire Xymon system, and is used to generate the event- and history-log webpages.</p><p>Purging old entries can be done while Xymon is running, since the tool takes care not to commit updates to a file if it changes mid-way through the operation. In that case, the update is aborted and the existing logfile is left untouched.</p><p>Optionally, this tool will also remove logfiles from hosts that are no longer defined in the Xymon <a href="../man5/hosts.cfg.5.html"><strong>hosts.cfg</strong>(5)</a></em> file. As an extension, even logfiles from services can be removed, if the service no longer has a valid status-report logged in the current Xymon status.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    --cutoff=TIME
  </dt>
  <dd>
    <p>This defines the cutoff-time when processing the history logs. Entries dated before this time are discarded. TIME is specified as the number of seconds since the beginning of the Epoch. This is easily generated by the GNU <a href="../man1/date.1.html"><strong>date</strong>(1)</a></em> utility, e.g. the following command will trim history logs of all entries prior to Oct. 1st 2004:</p>
<pre>
    trimhistory --cutoff=`date +%s --date="1 Oct 2004"`
</pre>

  </dd>
  <dt>
    --outdir=DIRECTORY
  </dt>
  <dd>
    <p>Normally, files in the XYMONHISTDIR directory are replaced. This option causes trimhistory to save the shortened history logfiles to another directory, so you can verify that the operation works as intended. The output directory must exist.</p>
  </dd>
  <dt>
    --drop
  </dt>
  <dd>
    <p>Causes trimhistory to delete files from hosts that are not listed in the <a href="../man5/hosts.cfg.5.html"><strong>hosts.cfg</strong>(5)</a></em> file.</p>
  </dd>
  <dt>
    --dropsvcs
  </dt>
  <dd>
    <p>Causes trimhistory to delete files from services that are not currently tracked by Xymon. Normally these files would be left untouched if only the host exists.</p>
  </dd>
  <dt>
    --droplogs
  </dt>
  <dd>
    <p>Process the XYMONHISTLOGS directory also, and delete status-logs from events prior to the cut-off time. Note that this can dramatically increase the processing time, since there are often lots and lots of files to process.</p>
  </dd>
  <dt>
    --progress[=N]
  </dt>
  <dd>
    <p>This will cause trimhistory to output a status line for every N history logs or status-log collections it processes, to indicate how far it has progressed. The default setting for N is 100.</p>
  </dd>
  <dt>
    --env=FILENAME
  </dt>
  <dd>
    <p>Loads the environment from FILENAME before executing trimhistory.</p>
  </dd>
  <dt>
    --debug
  </dt>
  <dd>
    <p>Enable debugging output.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    $XYMONHISTDIR/allevents
  </dt>
  <dd>
    <p>The eventlog of all events that have happened in Xymon.</p>
  </dd>
  <dt>
    $XYMONHISTDIR/HOSTNAME
  </dt>
  <dd>
    <p>The per-host eventlogs.</p>
  </dd>
  <dt>
    $XYMONHISTDIR/HOSTNAME.SERVICE
  </dt>
  <dd>
    <p>The per-service eventlogs.</p>
  </dd>
  <dt>
    $XYMONHISTLOGS/*/*
  </dt>
  <dd>
    <p>The historical status-logs.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    XYMONHISTDIR
  </dt>
  <dd>
    <p>The directory holding all history logs.</p>
  </dd>
  <dt>
    XYMONHISTLOGS
  </dt>
  <dd>
    <p>The top-level directory for the historical status-log collections.</p>
  </dd>
  <dt>
    HOSTSCFG
  </dt>
  <dd>
    <p>The location of the hosts.cfg file, holding the list of currently known hosts in Xymon.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO trimhistory&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/xymon.7.html"><strong>xymon</strong>(7)</a>, <a href="../man5/hosts.cfg.5.html"><strong>hosts.cfg</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tricklectl.8.html"><span aria-hidden="true">&larr;</span> tricklectl.8: Control utility for trickled</a></li>
   <li class="next"><a href="tripplite.8.html">tripplite.8: Driver for tripp-lite smartpro ups equipment <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
