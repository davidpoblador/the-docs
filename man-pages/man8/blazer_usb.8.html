<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>blazer_usb: Driver for megatec/q1 protocol usb based ups equipment</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Driver for megatec/q1 protocol usb based ups equipment">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="blazer_usb (8) manual">
  <meta name="twitter:description" content="Driver for megatec/q1 protocol usb based ups equipment">
  <meta name="twitter:image" content="https://www.carta.tech/images/nut-server-blazer_usb-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/blazer_usb.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="blazer_usb (8) manual" />
  <meta property="og:description" content="Driver for megatec/q1 protocol usb based ups equipment" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nut-server-blazer_usb-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">blazer_usb<small> (8)</small></h1>
        <p class="lead">Driver for megatec/q1 protocol usb based ups equipment</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/blazer_usb.8.html">
      <span itemprop="name">blazer_usb: Driver for megatec/q1 protocol usb based ups equipment</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nut-server/">
      <span itemprop="name">nut-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/blazer_usb.8.html">
      <span itemprop="name">blazer_usb: Driver for megatec/q1 protocol usb based ups equipment</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NOTE</h2>
        <div class="sectioncontent">
<p>This man page only documents the hardware-specific features of the blazer driver. For information about the core driver, see <a href="../man8/nutupsdrv.8.html"><strong>nutupsdrv</strong>(8)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTED HARDWARE</h2>
        <div class="sectioncontent">
<p>The blazer driver is known to work with various UPSes from Blazer, Energy Sistem, Fenton Technologies, General Electric, Mustek and many others. The NUT compatibility table lists all the known supported models. Keep in mind, however, that other models not listed there may also be supported, but haven\(cqt been tested.</p><p>All devices with a serial interface (use the <strong>blazer_ser</strong> driver) and many with a USB interface (use the <strong>blazer_usb</strong> driver) are supported.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTRA ARGUMENTS</h2>
        <div class="sectioncontent">
<p>You may need to override or provide defaults for some values, depending on the make and model of your UPS. The following are the ones that most likely will need changing (see <a href="../man5/ups.conf.5.html"><strong>ups.conf</strong>(5)</a>):</p><p><strong>default.battery.voltage.high =</strong> <em>value</em></p><p>Maximum battery voltage that is reached after about 12 to 24 hours charging. If you want the driver to report a guesstimated <strong>battery.charge</strong>, you need to specify this (see BATTERY CHARGE).</p><p><strong>default.battery.voltage.low =</strong> <em>value</em></p><p>Minimum battery voltage just before the UPS automatically shuts down. If you want the driver to report a guesstimated <strong>battery.charge</strong>, you need to specify this (see BATTERY CHARGE).</p><p><strong>default.battery.voltage.nominal =</strong> <em>value</em>, <strong>override.battery.voltage.nominal =</strong> <em>value</em></p><p>Some devices show a wrong nominal battery voltage (or none at all), so you may need to override or set a default value.</p><p><strong>override.battery.packs =</strong> <em>value</em></p><p>Some devices report a part of the total battery voltage. For instance, if <strong>battery.voltage.nominal</strong> is 24 V, but it reports a <strong>battery.voltage</strong> of around 2 V, the number of <strong>battery.packs</strong> to correct this reading would be 12. The driver will attempt to detect this automatically, but if this fails somehow, you may want to override this value.</p><p><strong>ondelay =</strong> <em>value</em></p><p>Time to wait before switching on the UPS (minutes). Note that a value below 3 minutes, may cause earlier firmware versions to not switch on automatically, so it defaults to 3 minutes. The acceptable range is 0..9999 minutes.</p><p><strong>offdelay =</strong> <em>value</em></p><p>Time to wait before shutting down the UPS (seconds). This value is truncated to units of 6 seconds (less than 60 seconds) or 60 seconds (more than 60 seconds). Defaults to 30 seconds. The acceptable range is 12..600 seconds.</p><p><strong>norating</strong></p><p>Some UPSes will lock up if you attempt to read rating information from them. Setting this flag will make the driver skip this step.</p><p><strong>novendor</strong></p><p>Some UPSes will lock up if you attempt to read vendor information from them. Setting this flag will make the driver skip this step.</p><p><strong>protocol =</strong> <em>string</em></p><p>Skip autodetection of the protocol to use and only use the one specified. Supported values <em>megatec</em>, <em>megatec/old</em>, <em>mustek</em> and <em>zinto</em>.</p><p><strong>runtimecal =</strong> <em>value,value,value,value</em></p><p>Parameter used in the (optional) runtime estimation. This takes two runtimes at different loads. Typically, this uses the runtime at full load and the runtime at half load. For instance, if your UPS has a rated runtime of 240 seconds at full load and 720 seconds at half load, you would enter</p>
<pre>
runtimecal = 240,100,720,50
</pre>
<p>The first load should always be higher than the second. If you have values available for loads other than 100 and 50 % respectively, you can use those too, but keep them spaced apart as far as reasonably possible. Just don\(cqt get too close to no load (prediction of runtime depends more on idle load for the battery then).</p><p><strong>chargetime =</strong> <em>value</em></p><p>The time needed to fully recharge the battery after being fully discharged. If not specified, the driver defaults to 43200 seconds (12 hours). Only used if <strong>runtimecal</strong> is also specified.</p><p><strong>idleload =</strong> <em>value</em></p><p>Minimum battery load used by the driver to estimate the runtime. If not specified, the driver defaults to 10%. Only used if <strong>runtimecal</strong> is also specified.</p><h3>USB INTERFACE ONLY</h3>
<p><strong>vendorid =</strong> <em>regex</em>, <strong>productid =</strong> <em>regex</em>, <strong>vendor =</strong> <em>regex</em>, <strong>product =</strong> <em>regex</em>, <strong>serial =</strong> <em>regex</em></p><p>Select a specific UPS, in case there is more than one connected via USB. Each option specifies an extended regular expression (see <a href="../man7/regex.7.html"><strong>regex</strong>(7)</a></strong>) that must match the UPS\(cqs entire vendor/product/serial string (minus any surrounding whitespace), or the whole 4-digit hexadecimal code for vendorid and productid. Try <strong>-DD</strong> for finding out the strings to match.</p><p>Examples:</p><p>-x vendor="Foo.Corporation.*"</p><p>-x vendorid=051d* (APC)</p><p>-x product=".*(Smart|Back)-?UPS.*"</p><p><strong>bus =</strong> <em>regex</em></p><p>Select a UPS on a specific USB bus or group of busses. The argument is a regular expression that must match the bus name where the UPS is connected (e.g. bus="002", bus="00[2-3]").</p><p><strong>subdriver =</strong> <em>string</em></p><p>Select a serial-over-USB subdriver to use. You have a choice between <strong>phoenix</strong>, <strong>ippon</strong>, <strong>cypress</strong>, and <strong>krauler</strong>. When using this option, it is mandatory to also specify the <strong>vendorid</strong> and <strong>productid</strong>.</p><p><strong>langid_fix =</strong> <em>value</em></p><p>Apply the language ID workaround to the krauler subdriver. This is mandatory for some devices to work (LDLC, Dynamix and others). You must to provide <strong>value</strong> (0x409 or 0x4095), according to your device entry in NUT hardware compatibility list (HCL).</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UPS COMMANDS</h2>
        <div class="sectioncontent">
<p>This driver supports some instant commands (see <a href="../man8/upscmd.8.html"><strong>upscmd</strong>(8)</a>):</p><p><strong>beeper.toggle</strong></p><p>Toggle the UPS beeper. (Not available on some hardware.)</p><p><strong>load.on</strong></p><p>Turn on the load immediately.</p><p><strong>load.off</strong></p><p>Turn off the load immediately (see KNOWN PROBLEMS).</p><p><strong>shutdown.return</strong></p><p>Turn off the load and return when power is back. Uses the timers defined by <strong>ondelay</strong> and <strong>offdelay</strong>.</p><p><strong>shutdown.stayoff</strong></p><p>Turn off the load and remain off (see KNOWN PROBLEMS). Uses the timer defined by <strong>offdelay</strong>.</p><p><strong>shutdown.stop</strong></p><p>Stop a shutdown in progress.</p><p><strong>test.battery.start.deep</strong></p><p>Perform a long battery test (Not available on some hardware.)</p><p><strong>test.battery.start.quick</strong></p><p>Perform a (10 second) battery test.</p><p><strong>test.battery.start</strong> <em>value</em></p><p>Perform a battery test for the duration of <em>value</em> minutes.</p><p><strong>test.battery.stop</strong></p><p>Stop a running battery test (not available on some hardware.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BATTERY CHARGE</h2>
        <div class="sectioncontent">
<p>Due to popular demand, this driver will report a guesstimated <strong>battery.charge</strong> and optionally <strong>battery.runtime</strong>, provided you specified a couple of the EXTRA ARGUMENTS listed above.</p><p>If you specify both <strong>battery.voltage.high</strong> and <strong>battery.voltage.low</strong> in <a href="../man5/ups.conf.5.html"><strong>ups.conf</strong>(5)</a>, but don\(cqt enter <strong>runtimecal</strong>, it will guesstimate the state of charge by looking at the battery voltage alone. This is not reliable under load, as this only gives reasonably accurate readings if you disconnect the load, let the battery rest for a couple of minutes and then measure the open cell voltage. This just isn\(cqt practical if the power went out and the UPS is providing power for your systems.</p>
<pre>
                     battery.voltage - battery.voltage.low
battery.charge =  ------------------------------------------ x 100 %
                  battery.voltage.high - battery.voltage.low
</pre>
<p>There is a way to get better readings without disconnecting the load but this requires one to keep track on how much (and how fast) current is going in- and out of the battery. If you specified the <strong>runtimecal</strong>, the driver will attempt to do this. Note however, that this heavily relies on the values you enter and that the UPS must be able to report the load as well. There are quite a couple of devices that report 0 % (or any other fixed value) at all times, in which case this obviously doesn\(cqt work.</p><p>The driver also has no way of determining the degradation of the battery capacity over time, so you\(cqll have to deal with this yourself (by adjusting the values in <strong>runtimecal</strong>). Also note that the driver guesses the initial state of charge based on the battery voltage, so this may be less than 100 %, even when you are certain that they are full. There is just no way to reliably measure this between 0 and 100 % full charge.</p><p>This is better than nothing (but not by much). If any of the above calculations is giving you incorrect readings, you are the one that put in the values in <a href="../man5/ups.conf.5.html"><strong>ups.conf</strong>(5)</a>, so don\(cqt complain with the author. If you need something better, buy a UPS that reports <strong>battery.charge</strong> and <strong>battery.runtime</strong> all by itself without the help of a NUT driver.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES FOR THE PREVIOUS USER OF MEGATEC DRIVERS</h2>
        <div class="sectioncontent">
<p>The blazer drivers having replaced the megatec ones, some configuration changes may be required by users switching to blazer.</p><p>Part of this, the following megatec options, in ups.conf, have to be changed:</p><p><strong>battvolts</strong></p><p>You need to use <em>default.battery.voltage.high</em> and <em>default.battery.voltage.low</em></p><p><strong>dtr and rts</strong></p><p>You need to use <em>cablepower</em></p><p><strong>ignoreoff</strong></p><p>This parameter can simply be discarded, since it was a wrong understanding of the specification.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN PROBLEMS</h2>
        <div class="sectioncontent">
<p>Some UPS commands aren\(cqt supported by all models. In most cases, the driver will send a message to the system log when the user tries to execute an unsupported command. Unfortunately, some models don\(cqt even provide a way for the driver to check for this, so the unsupported commands will silently fail.</p><p>Both the <strong>load.off</strong> and <strong>shutdown.stayoff</strong> instant commands are meant to turn the load off indefinitely. However, some UPS models don\(cqt allow this.</p><p>Some models report a bogus value for the beeper status (will always be <em>enabled</em> or <em>disabled</em>). So, the <strong>beeper.toggle</strong> command may appear to have no effect in the status reported by the driver when, in fact, it is working fine.</p><p>The temperature and load value is known to be bogus in some models.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Arjen de Korte &lt;adkorte-guest at alioth.debian.org&gt;, Alexander Gordeev &lt;lasaine at lvk.cs.msu.su&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO blazer_usb&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/blazer_ser.8.html"><strong>blazer_ser</strong>(8)</a>, <a href="../man8/nutupsdrv.8.html"><strong>nutupsdrv</strong>(8)</a>, <a href="../man8/upsc.8.html"><strong>upsc</strong>(8)</a>, <a href="../man8/upscmd.8.html"><strong>upscmd</strong>(8)</a>, <a href="../man8/upsrw.8.html"><strong>upsrw</strong>(8)</a></p><h3>Internet Resources:</h3>
<p>The NUT (Network UPS Tools) home page: http://www.networkupstools.org/</p><p>The NUT HCL: http://www.networkupstools.org/stable-hcl.html</p>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="blazer_ser.8.html"><span aria-hidden="true">&larr;</span> blazer_ser.8: Driver for megatec/q1 protocol serial based ups equipment</a></li>
   <li class="next"><a href="bld.8.html">bld.8: A black list daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
