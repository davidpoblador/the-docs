<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ovs-pki: Openflow public key infrastructure management utility</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Openflow public key infrastructure management utility">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ovs-pki (8) manual">
  <meta name="twitter:description" content="Openflow public key infrastructure management utility">
  <meta name="twitter:image" content="https://www.carta.tech/images/openvswitch-common-ovs-pki-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ovs-pki.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ovs-pki (8) manual" />
  <meta property="og:description" content="Openflow public key infrastructure management utility" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/openvswitch-common-ovs-pki-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ovs-pki<small> (8)</small></h1>
        <p class="lead">Openflow public key infrastructure management utility</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ovs-pki.8.html">
      <span itemprop="name">ovs-pki: Openflow public key infrastructure management utility</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/openvswitch-common/">
      <span itemprop="name">openvswitch-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ovs-pki.8.html">
      <span itemprop="name">ovs-pki: Openflow public key infrastructure management utility</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>Each command takes the form:</p><p><strong>ovs-pki</strong> [<em>options</em>] <em>command</em> [<em>args</em>]</p><p>The implemented commands and their arguments are:</p><p><strong>ovs-pki</strong> <strong>init</strong></p><p><strong>ovs-pki</strong> <strong>req</strong> <em>name</em></p><p><strong>ovs-pki</strong> <strong>sign</strong> <em>name</em> [<em>type</em>]</p><p><strong>ovs-pki</strong> <strong>req+sign</strong> <em>name</em> [<em>type</em>]</p><p><strong>ovs-pki</strong> <strong>verify</strong> <em>name</em> [<em>type</em>]</p><p><strong>ovs-pki</strong> <strong>fingerprint</strong> <em>file</em></p><p><strong>ovs-pki</strong> <strong>self-sign</strong> <em>name</em></p><p>Each <em>type</em> above is a certificate type, either <strong>switch</strong> (default) or <strong>controller</strong>.</p><p>The available options are:</p><p>[<strong>-k</strong> <em>type</em> | <strong>-\^-key=</strong><em>type</em>]</p><p>[<strong>-B</strong> <em>nbits</em> | <strong>-\^-bits=</strong><em>nbits</em>]</p><p>[<strong>-D</strong> <em>file</em> | <strong>-\^-dsaparam=</strong><em>file</em>]</p><p>[<strong>-b</strong> | <strong>-\^-batch</strong>]</p><p>[<strong>-f</strong> | <strong>-\^-force</strong>]</p><p>[<strong>-d</strong> <em>dir</em> | <strong>-\^-dir=</strong><em>dir</em>]</p><p>[<strong>-l</strong> <em>file</em> | <strong>-\^-log=</strong><em>file</em>]</p><p>[<strong>-h</strong> | <strong>-\^-help</strong>]</p><p>Some options do not apply to every command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>ovs-pki</strong> program sets up and manages a public key infrastructure for use with OpenFlow.  It is intended to be a simple interface for organizations that do not have an established public key infrastructure.  Other PKI tools can substitute for or supplement the use of <strong>ovs-pki</strong>.</p><p><strong>ovs-pki</strong> uses <strong>openssl</strong>(1) for certificate management and key generation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OFFLINE COMMANDS</h2>
        <div class="sectioncontent">
<p>The following <strong>ovs-pki</strong> commands support manual PKI administration:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>init</strong></p>
  </dt>
  <dd>
    <p>Initializes a new PKI (by default in directory <strong>/var/lib/openvswitch/pki</strong>) and populates it with a pair of certificate authorities for controllers and switches.</p><p>This command should ideally be run on a high-security machine separate from any OpenFlow controller or switch, called the CA machine.  The files <strong>pki/controllerca/cacert.pem</strong> and <strong>pki/switchca/cacert.pem</strong> that it produces will need to be copied over to the OpenFlow switches and controllers, respectively.  Their contents may safely be made public.</p><p>By default, <strong>ovs-pki</strong> generates 2048-bit RSA keys.  The <strong>-B</strong> or <strong>-\^-bits</strong> option (see below) may be used to override the key length.  The <strong>-k dsa</strong> or <strong>-\^-key=dsa</strong> option may be used to use DSA in place of RSA.  If DSA is selected, the <strong>dsaparam.pem</strong> file generated in the new PKI hierarchy must be copied to any machine on which the <strong>req</strong> command (see below) will be executed.  Its contents may safely be made public.</p><p>Other files generated by <strong>init</strong> may remain on the CA machine. The files <strong>pki/controllerca/private/cakey.pem</strong> and <strong>pki/switchca/private/cakey.pem</strong> have particularly sensitive contents that should not be exposed.</p>
  </dd>
  <dt>
    <p><strong>req</strong> <em>name</em></p>
  </dt>
  <dd>
    <p>Generates a new private key named <em>name</em><strong>-privkey.pem</strong> and corresponding certificate request named <em>name</em><strong>-req.pem</strong>. The private key can be intended for use by a switch or a controller.</p><p>This command should ideally be run on the switch or controller that will use the private key to identify itself.  The file <em>name</em><strong>-req.pem</strong> must be copied to the CA machine for signing with the <strong>sign</strong> command (below).</p><p>This command will output a fingerprint to stdout as its final step. Write down the fingerprint and take it to the CA machine before continuing with the <strong>sign</strong> step.</p><p>When RSA keys are in use (as is the default), <strong>req</strong>, unlike the rest of <strong>ovs-pki</strong>'s commands, does not need access to a PKI hierarchy created by <strong>ovs-pki init</strong>.  The <strong>-B</strong> or <strong>-\^-bits</strong> option (see below) may be used to specify the number of bits in the generated RSA key.</p><p>When DSA keys are used (as specified with <strong>-\^-key=dsa</strong>), <strong>req</strong> needs access to the <strong>dsaparam.pem</strong> file created as part of the PKI hierarchy (but not to other files in that tree).  By default, <strong>ovs-pki</strong> looks for this file in <strong>/var/lib/openvswitch/pki/dsaparam.pem</strong>, but the <strong>-D</strong> or <strong>-\^-dsaparam</strong> option (see below) may be used to specify an alternate location.</p><p><em>name</em><strong>-privkey.pem</strong> has sensitive contents that should not be exposed.  <em>name</em><strong>-req.pem</strong> may be safely made public.</p>
  </dd>
  <dt>
    <p><strong>sign</strong> <em>name</em> [<em>type</em>]</p>
  </dt>
  <dd>
    <p>Signs the certificate request named <em>name</em><strong>-req.pem</strong> that was produced in the previous step, producing a certificate named <em>name</em><strong>-cert.pem</strong>.  <em>type</em>, either <strong>switch</strong> (default) or <strong>controller</strong>, indicates the use for which the key is being certified.</p><p>This command must be run on the CA machine.</p><p>The command will output a fingerprint to stdout and request that you verify that it is the same fingerprint output by the <strong>req</strong> command.  This ensures that the request being signed is the same one produced by <strong>req</strong>.  (The <strong>-b</strong> or <strong>-\^-batch</strong> option suppresses the verification step.)</p><p>The file <em>name</em><strong>-cert.pem</strong> will need to be copied back to the switch or controller for which it is intended.  Its contents may safely be made public.</p>
  </dd>
  <dt>
    <p><strong>req+sign</strong> <em>name</em> [<em>type</em>]</p>
  </dt>
  <dd>
    <p>Combines the <strong>req</strong> and <strong>sign</strong> commands into a single step, outputting all the files produced by each.  The <em>name</em><strong>-privkey.pem</strong> and <em>name</em><strong>-cert.pem</strong> files must be copied securely to the switch or controller. <em>name</em><strong>-privkey.pem</strong> has sensitive contents and must not be exposed in transit.  Afterward, it should be deleted from the CA machine.</p><p>This combined method is, theoretically, less secure than the individual steps performed separately on two different machines, because there is additional potential for exposure of the private key.  However, it is also more convenient.</p>
  </dd>
  <dt>
    <p><strong>verify</strong> <em>name</em> [<em>type</em>]</p>
  </dt>
  <dd>
    <p>Verifies that <em>name</em><strong>-cert.pem</strong> is a valid certificate for the given <em>type</em> of use, either <strong>switch</strong> (default) or <strong>controller</strong>.  If the certificate is valid for this use, it prints the message ``<em>name</em><strong>-cert.pem</strong>: OK''; otherwise, it prints an error message.</p>
  </dd>
  <dt>
    <p><strong>fingerprint</strong> <em>file</em></p>
  </dt>
  <dd>
    <p>Prints the fingerprint for <em>file</em>.  If <em>file</em> is a certificate, then this is the SHA-1 digest of the DER encoded version of the certificate; otherwise, it is the SHA-1 digest of the entire file.</p>
  </dd>
  <dt>
    <p><strong>self-sign</strong> <em>name</em></p>
  </dt>
  <dd>
    <p>Signs the certificate request named <em>name</em><strong>-req.pem</strong> using the private key <em>name</em><strong>-privkey.pem</strong>, producing a self-signed certificate named <em>name</em><strong>-cert.pem</strong>.  The input files should have been produced with <strong>ovs-pki req</strong>.</p><p>Some controllers accept such self-signed certificates.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <strong>-k</strong> <em>type</em>
  </dt>
  <dd>
    
  </dd>
  <dt>
    &#92;$1
  </dt>
  <dd>
    <p>For the <strong>init</strong> command, sets the public key algorithm to use for the new PKI hierarchy.  For the <strong>req</strong> and <strong>req+sign</strong> commands, sets the public key algorithm to use for the key to be generated, which must match the value specified on <strong>init</strong>.  With other commands, the value has no effect.</p><p>The <em>type</em> may be <strong>rsa</strong> (the default) or <strong>dsa</strong>.</p>
  </dd>
  <dt>
    <strong>-B</strong> <em>nbits</em>
  </dt>
  <dd>
    <p>Sets the number of bits in the key to be generated.  When RSA keys are in use, this option affects only the <strong>init</strong>, <strong>req</strong>, and <strong>req+sign</strong> commands, and the same value should be given each time. With DSA keys are in use, this option affects only the <strong>init</strong> command.</p><p>The value must be at least 1024.  The default is 2048.</p>
  </dd>
  <dt>
    <strong>-D</strong> <em>file</em>
  </dt>
  <dd>
    <p>Specifies an alternate location for the <strong>dsaparam.pem</strong> file required by the <strong>req</strong> and <strong>req+sign</strong> commands.  This option affects only these commands, and only when DSA keys are used.</p><p>The default is <strong>dsaparam.pem</strong> under the PKI hierarchy.</p>
  </dd>
  <dt>
    <strong>-b</strong>
  </dt>
  <dd>
    <p>Suppresses the interactive verification of fingerprints that the <strong>sign</strong> command by default requires.</p>
  </dd>
  <dt>
    <strong>-d</strong> <em>dir</em>
  </dt>
  <dd>
    <p>Specifies the location of the PKI hierarchy to be used or created by the command (default: <strong>/var/lib/openvswitch/pki</strong>).  All commands, except <strong>req</strong>, need access to a PKI hierarchy.</p>
  </dd>
  <dt>
    <strong>-f</strong>
  </dt>
  <dd>
    <p>By default, <strong>ovs-pki</strong> will not overwrite existing files or directories.  This option overrides this behavior.</p>
  </dd>
  <dt>
    <strong>-l</strong> <em>file</em>
  </dt>
  <dd>
    <p>Sets the log file to <em>file</em>.  Default: <strong>/var/log/openvswitch/ovs-pki.log</strong>.</p>
  </dd>
  <dt>
    <strong>-h</strong>
  </dt>
  <dd>
    <p>Prints a help usage message and exits.</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ovs-parse-backtrace.8.html"><span aria-hidden="true">&larr;</span> ovs-parse-backtrace.8: Parses ovs-appctl backtrace output</a></li>
   <li class="next"><a href="ovs-vsctl.8.html">ovs-vsctl.8: Utility for querying and configuring ovs-vswitchd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
