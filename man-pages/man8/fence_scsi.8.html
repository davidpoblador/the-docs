<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fence_scsi: I/o fencing agent for scsi persistent reservations</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="I/o fencing agent for scsi persistent reservations">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fence_scsi (8) manual">
  <meta name="twitter:description" content="I/o fencing agent for scsi persistent reservations">
  <meta name="twitter:image" content="https://www.carta.tech/images/fence-agents-fence_scsi-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/fence_scsi.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fence_scsi (8) manual" />
  <meta property="og:description" content="I/o fencing agent for scsi persistent reservations" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fence-agents-fence_scsi-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fence_scsi<small> (8)</small></h1>
        <p class="lead">I/o fencing agent for scsi persistent reservations</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fence_scsi.8.html">
      <span itemprop="name">fence_scsi: I/o fencing agent for scsi persistent reservations</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fence-agents/">
      <span itemprop="name">fence-agents</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fence_scsi.8.html">
      <span itemprop="name">fence_scsi: I/o fencing agent for scsi persistent reservations</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong></strong> fence_scsi [<em>OPTION</em>]...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>fence_scsi is an I/O fencing agent that uses SCSI-3 persistent reservations to control access to shared storage devices. These devices must support SCSI-3 persistent reservations (SPC-3 or greater) as well as the "preempt-and-abort" subcommand.</p><p>The fence_scsi agent works by having each node in the cluster register a unique key with the SCSI devive(s). Once registered, a single node will become the reservation holder by creating a "write exclusive, registrants only" reservation on the device(s). The result is that only registered nodes may write to the device(s). When a node failure occurs, the fence_scsi agent will remove the key belonging to the failed node from the device(s). The failed node will no longer be able to write to the device(s). A manual reboot is required.</p><p>Keys are either be specified manually (see -k option) or generated automatically (see -n option). Automatic key generation requires that cman be running. Keys will then be generated using the cluster ID and node ID such that each node has a unique key that can be determined by any other node in the cluster.</p><p>Devices can either be specified manually (see -d option) or discovered automatically. Multiple devices can be specified manually by using a comma-separated list. If no devices are specified, the fence_scsi agent will attempt to discover devices by looking for cluster volumes and extracting the underlying devices. Devices may be device-mapper multipath devices or raw devices. If using a device-mapper multipath device, the fence_scsi agent will find the underlying devices (paths) and created registrations for each path.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-o</strong> <em>action</em></p>
  </dt>
  <dd>
    <p>Fencing action. This value can be "on", "off", or "status". All actions require either a key (see -k option) or node name (see -n option). For "on", the agent will attempt to register with the device(s) and create a reservation if none exists. The "off" action will attempt to remove a node's key from the device(s). The "status" action will report whether or not a node's key is currently register with one or more of the devices. The default action if "off".</p>
  </dd>
  <dt>
    <p><strong>-d</strong> <em>devices</em></p>
  </dt>
  <dd>
    <p>List of devices to use for current operation. Devices can be comma-separated list of raw device (eg. /dev/sdc) or device-mapper multipath devices (eg. /dev/dm-3). Each device must support SCSI-3 persistent reservations.</p>
  </dd>
  <dt>
    <p><strong>-f</strong> <em>logfile</em></p>
  </dt>
  <dd>
    <p>Log output to file.</p>
  </dd>
  <dt>
    <p><strong>-n</strong> <em>nodename</em></p>
  </dt>
  <dd>
    <p>Name of the node to be fenced. The node name is used to generate the key value used for the current operation. This option will be ignored when used with the -k option.</p>
  </dd>
  <dt>
    <p><strong>-k</strong> <em>key</em></p>
  </dt>
  <dd>
    <p>Key to use for the current operation. This key should be unique to a node. For the "on" action, the key specifies the key use to register the local node. For the "off" action, this key specifies the key to be removed from the device(s).</p>
  </dd>
  <dt>
    <p><strong>-a</strong></p>
  </dt>
  <dd>
    <p>Use the APTPL flag for registrations. This option is only used for the "on" action.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Print out a help message describing available options, then exit.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Verbose output.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Print out a version message, then exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STDIN PARAMETERS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>agent = "param"</em></p>
  </dt>
  <dd>
    <p>This option is used by <a href="../man8/fence_node.8.html"><strong>fence_node</strong>(8)</a> and is ignored by fence_scsi.</p>
  </dd>
  <dt>
    <p><em>nodename = "param"</em></p>
  </dt>
  <dd>
    <p>Same as -n option.</p>
  </dd>
  <dt>
    <p><em>action = "param" </em></p>
  </dt>
  <dd>
    <p>Same as -o option.</p>
  </dd>
  <dt>
    <p><em>devices = "param"</em></p>
  </dt>
  <dd>
    <p>Same as -d option.</p>
  </dd>
  <dt>
    <p><em>logfile = "param"</em></p>
  </dt>
  <dd>
    <p>Same as -f option</p>
  </dd>
  <dt>
    <p><em>key = "param"</em></p>
  </dt>
  <dd>
    <p>Same as -k option.</p>
  </dd>
  <dt>
    <p><em>aptpl = "1"</em></p>
  </dt>
  <dd>
    <p>Enable the APTPL flag. Default is 0 (disable).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fence_scsi&hellip;</h2>
        <div class="sectioncontent">
<p><strong>fence</strong>(8), <a href="../man8/fence_node.8.html"><strong>fence_node</strong>(8)</a>, <a href="../man8/sg_persist.8.html"><strong>sg_persist</strong>(8)</a>, <a href="../man8/vgs.8.html"><strong>vgs</strong>(8)</a>, <a href="../man8/cman_tool.8.html"><strong>cman_tool</strong>(8)</a>, <a href="../man5/cman.5.html"><strong>cman</strong>(5)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fence_sanbox2.8.html"><span aria-hidden="true">&larr;</span> fence_sanbox2.8: Fence agent for qlogic sanbox2 fc switches</a></li>
   <li class="next"><a href="fence_tool.8.html">fence_tool.8: A utility for the fenced daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
