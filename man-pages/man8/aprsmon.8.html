<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>aprsmon: Monitor aprs ax.25 traffic for javaprs</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Monitor aprs ax.25 traffic for javaprs">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="aprsmon (8) manual">
  <meta name="twitter:description" content="Monitor aprs ax.25 traffic for javaprs">
  <meta name="twitter:image" content="https://www.carta.tech/images/aprsdigi-aprsmon-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/aprsmon.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="aprsmon (8) manual" />
  <meta property="og:description" content="Monitor aprs ax.25 traffic for javaprs" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/aprsdigi-aprsmon-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">aprsmon<small> (8)</small></h1>
        <p class="lead">Monitor aprs ax.25 traffic for javaprs</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/aprsmon.8.html">
      <span itemprop="name">aprsmon: Monitor aprs ax.25 traffic for javaprs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/aprsdigi/">
      <span itemprop="name">aprsdigi</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/aprsmon.8.html">
      <span itemprop="name">aprsmon: Monitor aprs ax.25 traffic for javaprs</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>aprsmon [-a] [-m] [-r] [-k minutes] [-p port] [-t title] [-i infofile]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Aprsmon</strong> uses SOCK_PACKET facilities to provide a network monitor of all AX.25 UI text traffic heard by the system.  It is based on <strong>listen</strong>(1).</p><p><strong>Aprsmon</strong> collects (-m) or displays standard AX.25 UI text frames in a format similar to that output by a standard TNC in "Monitor ON" mode and is intended to be used with programs like javAPRS which wish to see a TNC data stream over a TCP connection.  When the <strong>aprsmon</strong> master has been running for a while and a new <strong>aprsmon</strong> slave starts up, first all saved up reports are sent, then a title line indicating the beginning of live data is sent, and new reports are sent as received.</p><p>Compressed position and telemetry reports as generated by the APRS Mic Encoder are translated into the conventional uncompressed APRS Micro-Interface-Module (MIM) telemtry format so that these stations are visible in javAPRS.  Reports containing a TheNet X1J4 beacon header are also edited to strip off the header making these nodes visible in javAPRS as well.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-a</strong></p>
  </dt>
  <dd>
    <p>Allow for the monitoring of outgoing frames as well as incoming ones.</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>Choose "raw" mode which allows non-printable data through.</p>
  </dd>
  <dt>
    <p><strong>-p port</strong></p>
  </dt>
  <dd>
    <p>Monitor only those frames received on a particular port, by default all AX.25 interfaces are monitored.</p>
  </dd>
  <dt>
    <p><strong>-m</strong></p>
  </dt>
  <dd>
    <p>"Master" mode.  Retain monitored data for the number of minutes specified with the <strong>-k</strong> option in a shared memory segment.</p>
  </dd>
  <dt>
    <p><strong>-k minutes</strong></p>
  </dt>
  <dd>
    <p>Retain monitored packets going back the given number of minutes. Default is 30.</p>
  </dd>
  <dt>
    <p><strong>-t title</strong></p>
  </dt>
  <dd>
    <p>Sets the <em>javAPRS</em> or <em>aprsd</em> title string.  Default is "Live data from Linux." For use with aprsd the format must be something like "aprsmon v2.4.4 padd padb." pada and padb can be anything, and are ignored but you *must* have 4 words in all.</p>
  </dd>
  <dt>
    <p><strong>-i infofile</strong></p>
  </dt>
  <dd>
    <p><em>Infofile</em> is the path to the file that the aprsmon master writes the shared memory segment and semaphore id's into.  Default is "/var/ax25/aprsmon.info."</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">javAPRS CONFIGURATION</h2>
        <div class="sectioncontent">
<p>Set up one <em>aprsmon</em> master running on your system to collect historical data going back a while.  You will probably want to set up an /etc/rc.d/init.d script for this.</p>
<pre>
aprsmon -a -m&
</pre>
<p>Add an entry into /etc/services with the port number you want javAPRS to connect on.  For example:</p>
<pre>
aprs		14439/tcp	# APRS monitor on 144.39
</pre>
<p>Add an entry into /etc/inetd.conf for this service:</p>
<pre>
aprs stream tcp nowait root /usr/sbin/aprsmon aprsmon -a
</pre>
<p>To test, simply "telnet localhost aprs".  To use with javAPRS, set, for example,</p>
<pre>
&lt;PARAM name = "dataFile1" value = "netc:14439:localhost"&gt;
</pre>
<p>in your HTML file as described in the <strong>javAPRS</strong> documentation, and then use <strong>appletviewer</strong> to run javAPRS:</p>
<pre>
appletviewer mydemo.html
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Mic-E to MIM Translation</h2>
        <div class="sectioncontent">
<p>The Mic-E reduces the duration of packet noise on a voice frequency by encoding its data in a compressed form, some of which is binary. Some APRS-decoding software, notably javAPRS, is unable to deal with this data.  To solve this problem <strong>aprsmon</strong> expands the Mic-E packet into one or two MIM packets as follows:</p>
<pre>
@<strong>ddhhmm</strong>z<strong>DDMM.hhN/DDDMM.hhW$cse/spd/E</strong>&gt;mon/M<strong>m</strong>/<strong>status</strong>
T#MIC,<strong>aaabbbcccdddeeefffComments</strong>
</pre>

<dl class='dl-vertical'>
  <dt>
    <p><strong>ddhhmm</strong></p>
  </dt>
  <dd>
    <p>is the UTC day and time the packet was received by the host running <strong>aprsmon.</strong></p>
  </dd>
  <dt>
    <p><strong>DDMM.hhN</strong></p>
  </dt>
  <dd>
    <p>is the latitude.</p>
  </dd>
  <dt>
    <p><strong>/</strong></p>
  </dt>
  <dd>
    <p>is the symbol table selection (/ or &#92;).</p>
  </dd>
  <dt>
    <p><strong>DDDMM.hhW</strong></p>
  </dt>
  <dd>
    <p>is the longitude.</p>
  </dd>
  <dt>
    <p><strong>$</strong></p>
  </dt>
  <dd>
    <p>is the symbol.</p>
  </dd>
  <dt>
    <p><strong>cse,spd</strong></p>
  </dt>
  <dd>
    <p>are course and speed.</p>
  </dd>
  <dt>
    <p><strong>E</strong></p>
  </dt>
  <dd>
    <p>is the type of Mic-Encoder:</p><ul>
<li>
<pre>
E - TAPR Mic-Encoder
T - Kenwood TH-D7
</pre>
</li>
</ul>
  </dd>
  <dt>
    <p><strong>m</strong></p>
  </dt>
  <dd>
    <p>is the status message number, and</p>
  </dd>
  <dt>
    <p><strong>status</strong></p>
  </dt>
  <dd>
    <p>is the status message number expanded as follows:</p><ul>
<li>
<pre>
0 -  Off duty..
1 -  Enroute...
2 -  In Service
3 -  Returning.
4 -  Committed.
5 -  Special...
6 -  PRIORITY..
7 -  EMERGENCY.
</pre>
</li>
</ul>
  </dd>
  <dt>
    <p><strong>aaa,bbb,ccc,ddd,eee,fff</strong></p>
  </dt>
  <dd>
    <p>are the values of the telemetry channels.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><strong>/etc/ax25/axports</strong> <strong>/var/ax25/aprsmon.info</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO aprsmon&hellip;</h2>
        <div class="sectioncontent">
<p><strong>call</strong>(1), <strong>listen</strong>(1), <strong>beacon</strong>(1), <a href="../man4/ax25.4.html"><strong>ax25</strong>(4)</a>, <strong>axattach</strong>(8), <strong>http://www.bridge.net/~sdimse/javAPRS.html,</strong> <strong>http://www.tapr.org,</strong> <strong>http://www.aprs.net,</strong> <strong>MIC-E.TXT,</strong>TELEMTRY.TXT,<strong>PROTOCOL.TXT</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<pre>
Alan Crosswell, n2ygk@weca.org
</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="aprsdigi.8.html"><span aria-hidden="true">&larr;</span> aprsdigi.8: Aprs(\*(tm) digipeater</a></li>
   <li class="next"><a href="apt.8.html">apt.8: Command-line interface <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
