<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>scanbm: Scanbm- user scanning support daemon for scanbd / scanbd manager</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Scanbm- user scanning support daemon for scanbd / scanbd manager">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="scanbm (8) manual">
  <meta name="twitter:description" content="Scanbm- user scanning support daemon for scanbd / scanbd manager">
  <meta name="twitter:image" content="https://www.carta.tech/images/scanbd-scanbm-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/scanbm.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="scanbm (8) manual" />
  <meta property="og:description" content="Scanbm- user scanning support daemon for scanbd / scanbd manager" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/scanbd-scanbm-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">scanbm<small> (8)</small></h1>
        <p class="lead">Scanbm- user scanning support daemon for scanbd / scanbd manager</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/scanbm.8.html">
      <span itemprop="name">scanbm: Scanbm- user scanning support daemon for scanbd / scanbd manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/scanbd/">
      <span itemprop="name">scanbd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/scanbm.8.html">
      <span itemprop="name">scanbm: Scanbm- user scanning support daemon for scanbd / scanbd manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>scanbm</strong> <strong>[-c</strong> <em>configfile</em> <strong>[-d</strong><em>[debuglevel]</em> <strong>] [-s]</strong> <strong>[-t</strong> <em>device</em> <strong>-a</strong> <em>action</em> <strong>]</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>scanbd</strong></p>
  </dt>
  <dd>
    <p><strong>-m</strong> <strong>[-c</strong> <em>configfile</em> <strong>[-d</strong><em>[debuglevel]</em> <strong>] [-s]</strong> <strong>[-t</strong> <em>device</em> <strong>-a</strong> <em>action</em> <strong>]</strong></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>scanbm</strong> is a companion to scanbd, a scanner button monitoring daemon that can trigger execution of scripts when a button is pressed.</p><p>scanbm is actually a (symbolic) link to scanbd and can be called as <strong>scanbm</strong> or <strong>scanbd -m.</strong></p><p>scanbd (the scanner button daemon) opens and polls the scanner and therefore locks the device. So no other application can access the device directly (open the /dev/..., or via libusb, etc).</p><p>To enable scanning from applications, we use scanbm as a manager for scanbd. scanbm is a "proxy" for saned to access the scanner from an application. scanbm listens for requests on the saned network port. All applications therefore need to use the "net backend to access a scanner.</p><p>If a scan request arrives to scanbm on the sane-port, scanbm requests the scanbd scanner polling daemon to interrupt polling and to release the device by sending it a dbus-message (default) or a posix-signal (SIGUSR1) (signal-mode). It then starts the real saned which does the scanning and sends the data back to the requesting application. When the scanning is done and saned exits, scanbm requests scanbd to restart the polling by sending a second dbus-message (or the posix-signal SIGUSR2) and ends execution. The polling scanbd now re-enables polling of the devices.</p><p>scanbm is meant to be started from <strong>inetd, xinetd or systemd.</strong> Unlike saned it does not support stand-alone mode.</p><p><strong>Note:</strong> Please note that the scanbm acts as a proxy to saned, all scanner applications must be configured to use the sane "net" backend to access the scanner. Direct access will not be possible.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-c</strong><em> configfile</em><strong> --config</strong><em>=configfile</em></p>
  </dt>
  <dd>
    <p>Use <em>configfile</em> instead of the default /etc/scanbd/scanbd.conf configuration file.</p>
  </dd>
  <dt>
    <p><strong>-d</strong><em>[debuglevel]</em><strong> --debug</strong><em>[=debuglevel]</em></p>
  </dt>
  <dd>
    <p>turn debug mode on. If specified, set the debug level to <em>debuglevel</em></p><p>1 = error</p><p>2 = warn</p><p>3 = info</p><p>4 - 7 = debug)</p>
  </dd>
  <dt>
    <p><strong>-s --signal</strong></p>
  </dt>
  <dd>
    <p>use signals SIGUSR1/ SIGUSR2 instead of dbus messages to request the polling scanbd to stop / restart polling</p>
  </dd>
  <dt>
    <p><strong>-t</strong><em> device </em><strong>--trigger</strong><em>=device</em></p>
  </dt>
  <dd>
    <p>Trigger action for <em>device</em> (numerical)</p>
  </dd>
  <dt>
    <p><strong>-a</strong><em> action </em><strong>--action</strong><em>=action</em></p>
  </dt>
  <dd>
    <p><em>action</em> (numerical) to be triggered</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SCANBD/SCANBM CONFIGURATION</h2>
        <div class="sectioncontent">
<p>scanbd and scanbm are configured trough scanbd.conf (/etc/scanbd/scanbd.conf or the file pointed out by the <strong>-c &lt;config-file&gt;</strong> )</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NETWORK SETUP FOR SCANBM</h2>
        <div class="sectioncontent">
<p>scanbm must be setup very similar to the way saned must be setup. Note that your inetd must support IPv6 if you want to connect to scanbm over IPv6 ; xinetd, openbsd-inetd and systemd are known to support IPv6, check the documentation for your inetd daemon.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INETD CONFIGURATION</h2>
        <div class="sectioncontent">
<p>For <strong>scanbm</strong> it is also necessary to add a configuration line to <em>/etc/inetd.conf</em> just like it is for saned.</p><p>The configuration line normally looks like this:</p><p>sane-port stream tcp nowait scanbd.scanbd /usr/sbin/scanbm scanbm</p><p>However, if your system uses <a href="../man8/tcpd.8.html"><strong>tcpd</strong>(8)</a> for additional security screening, you may want to disable saned access control by putting ``+'' in <em>saned.conf</em> (see <a href="../man8/saned.8.html"><strong>saned</strong>(8)</a> ) and use a line of the following form in <em>/etc/inetd.conf</em> instead:</p><p>sane-port stream tcp nowait scanbd.scanbd /usr/sbin/tcpd /usr/sbin/scanbm</p><p>Note that both examples assume that there is a <strong>scanbd</strong> group and a <strong>scanbd</strong> user.  If you follow this example, please make sure that the access permissions on the special device are set such that <strong>scanbd and saned</strong> can access the scanner (the programs generally need read and write access to scanner devices).</p><p>If xinetd is installed on your system instead of inetd the following example for xinetd.conf may be helpful:</p>
<pre>
# default: off
# description: The sane server accepts requests
# for network access to a local scanner via the
# network.
service sane-port
{
   port        = 6566
   socket_type = stream
   wait        = no
   user        = scanbd
   group       = scanbd
   server      = /usr/sbin/scanbm
   server_args =
}
</pre>
<p>Finally, it is also necessary to add a line of the following form to <em>/etc/services</em>:</p><p>sane-port 6566/tcp # SANE network scanner daemon</p><p>The official IANA short name for port 6566 is "sane-port". The older name "sane" is now deprecated.</p><p>scanbm does not do access control, but it relies on the access control done by saned.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO scanbm&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/scanbd.8.html"><strong>scanbd</strong>(8)</a>, <a href="../man7/sane.7.html"><strong>sane</strong>(7)</a>, <a href="../man8/saned.8.html"><strong>saned</strong>(8)</a>, <strong>sane-dll</strong>(5), <a href="../man5/sane-net.5.html"><strong>sane-net</strong>(5)</a></p><p><em>http://http://scanbd.sourceforge.net/</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Louis Lagendijk</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="scanbd.8.html"><span aria-hidden="true">&larr;</span> scanbd.8: Scanbd- scanner button monitoring daemon</a></li>
   <li class="next"><a href="scanlogd.8.html">scanlogd.8: Detects and logs tcp port scans <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
