<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lcmaps_voms_poolgroup.mod: Lcmaps plugin to switch user identity based on voms credentials by pool groups</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Lcmaps plugin to switch user identity based on voms credentials by pool groups">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lcmaps_voms_poolgroup.mod (8) manual">
  <meta name="twitter:description" content="Lcmaps plugin to switch user identity based on voms credentials by pool groups">
  <meta name="twitter:image" content="https://www.carta.tech/images/lcmaps-plugins-voms-lcmaps_voms_poolgroup.mod-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/lcmaps_voms_poolgroup.mod.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lcmaps_voms_poolgroup.mod (8) manual" />
  <meta property="og:description" content="Lcmaps plugin to switch user identity based on voms credentials by pool groups" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lcmaps-plugins-voms-lcmaps_voms_poolgroup.mod-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lcmaps_voms_poolgroup.mod<small> (8)</small></h1>
        <p class="lead">Lcmaps plugin to switch user identity based on voms credentials by pool groups</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/lcmaps_voms_poolgroup.mod.8.html">
      <span itemprop="name">lcmaps_voms_poolgroup.mod: Lcmaps plugin to switch user identity based on voms credentials by pool groups</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lcmaps-plugins-voms/">
      <span itemprop="name">lcmaps-plugins-voms</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/lcmaps_voms_poolgroup.mod.8.html">
      <span itemprop="name">lcmaps_voms_poolgroup.mod: Lcmaps plugin to switch user identity based on voms credentials by pool groups</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lcmaps_voms_poolgroup.mod</strong> [<strong>-groupmapfile</strong> <em>groupmapfile</em>] [<strong>-groupmapdir</strong> <em>groupmapdir</em>] [<strong>--map-to-secondary-groups</strong>] [<strong>-override_inconsistency</strong>] [<strong>-mapall</strong>] [<strong>-mapmin</strong> <em>number of minimal mappings</em>] [<strong>-strict_poolprefix_match</strong> <em>yes_or_no</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This VOMS poolgroup acquisition plugin is a 'VOMS-aware' modification of the <strong>lcmaps_poolgroup.mod.8</strong> plugin.  The plugin tries to find a local group (more specifically a GroupID) based on the VOMS information that has available from the LCMAPS, in particular the Fully Qualified Attribute Names (FQAN). The group is acquired from an group pool. The groups in the group-pool must exist on the system, either locally or through a centralized account database, e.g. LDAP.</p><p>The <strong>groupmapdir</strong> directory is going to be used as a persistent and open mapping database. A pool is defined as being a set of groups following a particular pattern in their naming, i.e. pool001 or atlas001. In the directory the plug-in will make a new filename build-up VOMS FQAN in URL-encode form:</p><p>Example showing the output of ls -li:</p><p>1836080 -rw-r--r-- 2 root root %2fdteam%2f</p><p>1836080 -rw-r--r-- 2 root root dteam001</p><p>This filename is hardlinked to the mapped groupname. Creating this hardlink is designed to be an atomic operation and verified to work on large installations serving multiple services from one NFS-share.</p><p>The VOMS credentials need to be available from the LCMAPS framework.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-groupmapfile </strong><em>groupmapfile</em></p>
  </dt>
  <dd>
    <p>This option is used to determine the groupmapfile path. The plug-in will open the file and use the content for the FQAN to Group ID mapping. The same formatting rules of the grid-mapfile apply to the groupmapfile. Provide a full path.</p>
  </dd>
  <dt>
    <p><strong>-groupmapdir </strong><em>groupmapdir"</em></p>
  </dt>
  <dd>
    <p>A directory used for the group mapping database, similar to the gridmapdir. It is important to not mix the gridmapdir and groupmapdir directories.</p>
  </dd>
  <dt>
    <p><strong>--map-to-secondary-groups</strong></p>
  </dt>
  <dd>
    <p>When enabled, the plug-in will map all the FQANs of the user to secondary Group IDs. There will be no primary Group ID set by this plug-in when enabled.</p>
  </dd>
  <dt>
    <p><strong>-override_inconsistency</strong></p>
  </dt>
  <dd>
    <p>If the poolgroup is mapped from an URL-encoded VOMS FQAN to a group name, and when the gridmapfile states that this user needs to move to another pool, then the plug-in will remap the user to the new pool. Without this option the plug-in will fail if an existing mapping for the user credentials exist, but do not map the configured mapping pool.</p>
  </dd>
  <dt>
    <p><strong>-mapall</strong></p>
  </dt>
  <dd>
    <p>When enabled, a failure will be triggered if not all of the FQANs could be mapped to primary or secondary Group IDs.</p>
  </dd>
  <dt>
    <p><strong>-mapmin </strong><em>number of minimal mappings</em></p>
  </dt>
  <dd>
    <p>This option will set a minimum amount of groups that have to be resolved for later mapping. If the minimum is not set then the minimum amount is set to '0' by default. If the plugin is not able to the required number of poolgroups it will fail. Note: if the minimum is set to zero or the minimum is not set the plugin will return a success if no other errors occur, even if no poolgroups were found.</p>
  </dd>
  <dt>
    <p><strong>-strict_poolprefix_match </strong><em>yes/no</em></p>
  </dt>
  <dd>
    <p>If this is set to 'yes', a line in the groupmapfile like <strong>&lt;FQAN&gt; .poolgr</strong> will result in groups matching the regexp <strong>poolgr[0-9]+</strong>. Otherwise it will be allowed to match <strong>poolgr.*</strong> (legacy behaviour).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LCMAPS_MOD_SUCCESS</strong></p>
  </dt>
  <dd>
    <p>Success.</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_MOD_FAIL</strong></p>
  </dt>
  <dd>
    <p>Failure.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Please report any errors to the Nikhef Grid Middleware Security Team &lt;grid-mw-security-support@nikhef.nl&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lcmaps_voms_poolgroup.mod&hellip;</h2>
        <div class="sectioncontent">
<p><strong>lcmaps.db</strong>(5), <a href="../man3/lcmaps.3.html"><strong>lcmaps</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>LCMAPS and the LCMAPS plug-ins were written by the Grid Middleware Security Team &lt;grid-mw-security@nikhef.nl&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lcmaps_voms_poolaccount.mod.8.html"><span aria-hidden="true">&larr;</span> lcmaps_voms_poolaccount.mod.8: Lcmaps plugin to switch user identity based on voms credentials by pool accounts</a></li>
   <li class="next"><a href="ld-linux.8.html">ld-linux.8: Dynamic linker/loader <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
