<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fxotune: Automatically tune dahdi fxo channels</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Automatically tune dahdi fxo channels">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fxotune (8) manual">
  <meta name="twitter:description" content="Automatically tune dahdi fxo channels">
  <meta name="twitter:image" content="https://www.carta.tech/images/dahdi-fxotune-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/fxotune.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fxotune (8) manual" />
  <meta property="og:description" content="Automatically tune dahdi fxo channels" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dahdi-fxotune-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fxotune<small> (8)</small></h1>
        <p class="lead">Automatically tune dahdi fxo channels</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fxotune.8.html">
      <span itemprop="name">fxotune: Automatically tune dahdi fxo channels</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dahdi/">
      <span itemprop="name">dahdi</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fxotune.8.html">
      <span itemprop="name">fxotune: Automatically tune dahdi fxo channels</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fxotune -i</strong> <em>[options]</em> - detect mode</p><p><strong>fxotune -d</strong> <em>[ options ]</em> - dump mode</p><p><strong>fxotune -s</strong> <em>[ options ]</em> - Startup mode</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple"></h2>
        <div class="sectioncontent">

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>fxotune</strong> is a script that fine-tune parameters of the FXO modules of the card. It has three modes of operation:</p><p><em>Detect mode (-i):</em> it detects and tunes all the available FXO channels. It writes settings to a configuration file (/etc/fxotune.conf) from which it can be loaded (e.g: at startup) using -s .</p><p><em>Dump mode (-d):</em> Runs detection on a single DAHDI channel, and just dumps waveforms to <strong>fxotune_dump.vals</strong> is generated in the current directory.</p><p><em>Startup mode (-s):</em> fxotune just reads the settings from fxotune.conf into the FXO modules.</p><p>You are advised to run fxotune on all FXO ports you have that support it and that are connected. Note that the tunning is affected by e.g. the physical parameters of the connection, and thus if it has been radically changed, you may need to re-run fxotune.</p><p>This program only works for the Digium TDM400P/800P/2400P cards and compatible and the Xorcom Astribank devices. Other cards (notably X100P cards and clones) do not have the hardware to support such tuning.</p><p>The tuning process needs a clear line to do the tuning.  In order to do that, it runs in cycles of the following: sets the line off-hook, dials a dial string (which should set the PSTN provider waiting for the next digit), and then starts tuning. It has a limited ammount of time for tuning before the PSTN gives up and gives a busy tone. So after a while it hangs up and starts a new cycle.</p><p><strong>fxotune</strong> has two operation modes: tune (-i) and set (-s). In the tune mode it generates /etc/fxotune.conf, and in the set mode it merely applies the parameters from fxotune.conf to device's ports.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The following options below except -v (verbose) affect only the detection process and hence apply only to the <em>detect</em> and <em>dump</em> modes.</p><p>In addition, to maintain compatibility with older versions of fxotune, if in detect or dump mode there is a parameter with option before it, it is considered to be the <em>dialstring</em> parameter (-n).</p><p><strong>-b</strong> <em>startdev</em></p><p>Start tuning from dahdi channel num. <em> startdev</em>: skip all previous channels. By default starting from channel 1.</p><p>In dump mode (-d) this is the single channel that will be tested.</p><p><strong>-e</strong> <em>stopdev</em></p><p>Tune only up to dahdi channel num. <em> stopdev</em>: skip all previous channels. By default stopping at channel 252.</p><p>In dump mode (-d) this parameter is ignored.</p><p><strong>-l</strong> <em>delay-to-silence</em></p><p>Time in seconds to wait after dialing the dial-string to get a clear line. The default is 0. before</p><p><strong>-m</strong> <em>silence-good-for</em></p><p>Time in seconds which states how long the PSTN will wait after we dialed the dial-string until it starts giving a busy tone. You can test this by connecting an analog phone to the line and dialing.</p><p>The default is 18 (18 seconds).</p><p><strong>-n</strong> <em>dial-string</em></p><p>Digits to dial to the PSTN in order to get it stop its dialtone and waiting for the next digit.</p><p>The default is "4" (sending just the digit 4). It should work in most cases. Again, this can be tested by connecting a phone to the PSTN line and dialing the dial-string.</p><p><strong>-t</strong> <em>detect-type</em></p><p>This option allows using the older detection method used by fxotune of Zaptel 1.2. use <strong>-t 1</strong> for that older method. whereas <strong>-t 2</strong> (the default) uses the current method.</p><p>This option only applies to detect mode (-i).</p><p><strong>-v[vvvv]</strong></p><p>Sets debugging on. The more v-s, the higher debug level.</p><p>Note that: -vv -v  will actually set debug level to 1 instead of 3.</p><p><strong>-w</strong> <em>wave-form</em></p><p>The default: -1, for multitone waveform. Alternatively: a frequency of a single tone.</p><p>This option only applies to dump mode (-d).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>fxotune -i 9</p><p>if you need to dial 9 for an external line. If you always get a line, you can simply use any digit.</p><p><strong>-s</strong></p><p>Load settings from the last test. Used at startup.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/etc/fxotune.conf</em></p><p>The configuration file generated by fxotune in detect mode and from which configuration is loaded when <strong>-s</strong> is used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Running fxotune takes approximately a minute per port. If you wish to only run fxotune for several ports, you can use the options -b and -e to set a specific range of ports. Another useful trick is to actually keep asterisk running, and only "destroy" the dahdi channels you wish to tune (dahdi destroy channel NNN): other channels will be used by Asterisk, and hence skipped. This can be useful if you have many FXO ports that are not connected.</p><p><strong>fxotune</strong> writes immediately to <strong>/etc/fxotune.conf</strong> so if you stop it half-way, you may get a half-configured system. If you have already tuned your FXO channels and wish to test-run fxotune again, you are advised to backup /etc/fxotune.conf .</p><p>The default for -m is 18 seconds. This asusmes that you get a clear line for at least 18 seconds. It is advised that you test that timeout earlier by connecting a phone to the FXO line, dialing 4 (or whatever dial string you put with -n) and see how much time of silence you have.</p><p>If you connect your device to a PSTN provider that is not in the US, there is a similar operation you should apply before even getting to fxotune: setting the opermode. The opermode sets a number of country-specific parameters. For the Digium analog cards this is set through the kernel module parameter 'opermode' . For the Xorcom Astribank this is set through the variable 'opermode' in /etc/dahdi/xpp.conf . For valid values of this parameter, see /usr/share/asterisk/init_fxo_modes (FIXME: this has changed and will change. Tzafrir).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fxotune&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/dahdi_cfg.8.html"><strong>dahdi_cfg</strong>(8)</a>, <a href="../man8/dahdi_tool.8.html"><strong>dahdi_tool</strong>(8)</a>, <a href="../man8/dahdi_monitor.8.html"><strong>dahdi_monitor</strong>(8)</a>, <a href="../man8/asterisk.8.html"><strong>asterisk</strong>(8)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Tzafrir Cohen &lt;tzafrir.cohen@xorcom.com&gt; Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2 any later version published by the Free Software Foundation.</p><p>On Debian systems, the complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fxload.8.html"><span aria-hidden="true">&larr;</span> fxload.8: Firmware download to ez-usb devices</a></li>
   <li class="next"><a href="gadmin-bind.8.html">gadmin-bind.8: Gtk+ configuration tool for bind9 <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
